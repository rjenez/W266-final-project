<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student9325.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student4026.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match849-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
enum class Boje {Pik,Tref,Herc,Karo};
std::vector&lt;Boje&gt;vektorboja={Boje::Pik,Boje::Tref,Boje::Herc,Boje::Karo};
</font><a name="0"></a><font color="#FF0000"><a href="match849-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

std::vector&lt;std::string&gt;vektorbrojeva={"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    Cvor *sljedeci=nullptr;
</font>};

std::string vratistring(Boje boja) {
 if(boja==Boje::Pik)return ("Pik");
 if(boja==Boje::Tref)return ("Tref");
 if(boja==Boje::Herc)return ("Herc");
 return ("Karo");
}

Boje vratiboju(std::string rijec){
 if(rijec=="Pik")return Boje::Pik;
 if(rijec=="Tref")return Boje::Tref;
 if(rijec=="Herc")return Boje::Herc;
 return Boje::Karo;
}

bool uporedikarte(Cvor karta1, std::pair&lt;std::string,std::string&gt;karta2) {
 
   
   if(karta1.karta.boja!=vratiboju(karta2.first)) {
    return karta1.karta.boja&lt;vratiboju(karta2.first);
   }
   auto it1=vektorbrojeva.begin();
   while(it1!=vektorbrojeva.end() &amp;&amp; karta1.karta.vrijednost!=*it1)it1++;
   int distanca1=std::distance(it1,vektorbrojeva.end());
   auto it2=vektorbrojeva.begin();
   while(it2!=vektorbrojeva.end() &amp;&amp; karta2.second!=*it2 )it2++;
   int distanca2=std::distance(it2,vektorbrojeva.end());
   return distanca1&gt;distanca2;

return false; 
}


void provjerispil(Cvor*pok) {
 
 auto pomocna=pok,start=pok; pok=pok-&gt;sljedeci; int brojac=0;
 while(pok!=start) {
  brojac++; if(brojac==53)throw std::logic_error("Neispravna lista!");
  auto pomocna_karta=std::make_pair(vratistring(pomocna-&gt;karta.boja),pomocna-&gt;karta.vrijednost);
  if(uporedikarte(*pok,pomocna_karta) )throw std::logic_error("Neispravna lista!");
  
  if(std::count(vektorboja.begin(),vektorboja.end(),vratiboju(pomocna_karta.first))==0)throw std::logic_error("Neispravna lista!");
  if(std::count(vektorbrojeva.begin(),vektorbrojeva.end(),pomocna_karta.second)==0)throw std::logic_error("Neispravna lista!");
  pomocna=pok;
  pok=pok-&gt;sljedeci;
 }
 
 pok=start-&gt;sljedeci;
 while(pok!=start) {
    pomocna=pok-&gt;sljedeci;
    while(pomocna!=pok) {
     if(pok-&gt;karta.boja==pomocna-&gt;karta.boja&amp;&amp;pok-&gt;karta.vrijednost==pomocna-&gt;karta.vrijednost)throw std::logic_error("Neispravna lista!");
     pomocna=pomocna-&gt;sljedeci;
    }
    pok=pok-&gt;sljedeci;
 }
 
}

void provjerikartu(std::pair&lt;std::string,std::string&gt; karta){
 if(std::count(vektorboja.begin(),vektorboja.end(),vratiboju(karta.first))==0)throw std::logic_error("Neispravne karte!");
 if(std::count(vektorbrojeva.begin(),vektorbrojeva.end(),karta.second)==0)throw std::logic_error("Neispravne karte!");
 
}


Cvor* KreirajSpil() {
 int brojacboja=0,brojackarti=0;
 Cvor*pocetak=nullptr,*zadnji;
  for(int i=0;i&lt;52;i++) { 
      Cvor *novi=new Cvor;
      novi-&gt;karta.boja=vektorboja[brojacboja];
      novi-&gt;karta.vrijednost=vektorbrojeva[brojackarti];
      if(pocetak==nullptr)pocetak=novi;
    else zadnji-&gt;sljedeci=novi;
     if(i==51) novi-&gt;sljedeci=pocetak;
      zadnji=novi;
     
     brojackarti++; if(brojackarti==13){brojackarti=0;brojacboja++;}
  }
  return pocetak;
}

  void  IzbaciKarte(Cvor* &amp;prvi,std::multimap&lt;Boje,std::string&gt; &amp;mapa){
   
   provjerispil(prvi);
   
   auto it=mapa.begin();
   int velicina=mapa.size();
   int brojac=0;
   while(it!=mapa.end()) {
       
       Cvor*pok=prvi-&gt;sljedeci;
       Cvor*prosli=prvi;  brojac=0;
       for(;pok!=prvi;pok=pok-&gt;sljedeci) {
           if(brojac==52)throw std::logic_error("Neispravna lista");
           if(it-&gt;first==pok-&gt;karta.boja &amp;&amp; it-&gt;second==pok-&gt;karta.vrijednost){
               prosli-&gt;sljedeci=pok-&gt;sljedeci-&gt;sljedeci;
               Cvor*zabrisanje=pok;
               pok=prosli;
               if(zabrisanje==prvi)prvi=prvi-&gt;sljedeci;
               delete zabrisanje;
           }
           else prosli=pok;
           brojac++;
       }
       it++;
   }
   if(velicina==brojac)prvi=nullptr;
  }
   
<a name="3"></a><font color="#00FFFF"><a href="match849-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

 std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor* &amp;pok,const short int &amp;r, const int &amp;b ) {
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    provjerispil(pok);
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek;
    Cvor*pomocni=pok-&gt;sljedeci; 
    Cvor*prethodni=pok;
    int kraj=1;
    while(pomocni!=pok){kraj++;pomocni=pomocni-&gt;sljedeci;} //brojanje karata
     int brojac=0;
     pomocni=pok;

     while(brojac!=b) {
      
         
        for(int i=0;i&lt;r-1;i++) {
         
          prethodni=pomocni;
          pomocni=pomocni-&gt;sljedeci;
        
         
         }
         Cvor*zabrisanje=pomocni;
         prethodni-&gt;sljedeci=pomocni-&gt;sljedeci;//provjeriti oko ovoga
         if(zabrisanje==pok)pok=pok-&gt;sljedeci;
         stek.push(std::make_pair(vratistring(zabrisanje-&gt;karta.boja),zabrisanje-&gt;karta.vrijednost));
         pomocni=pomocni-&gt;sljedeci;
         delete zabrisanje;
         brojac++;
         
         if(brojac==kraj)brojac=b; 
         
         
     }
      return stek;
 }
 
 void VratiPosljednjihNKarata(Cvor* &amp;pok,std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;stek,int n) {
   if(n&lt;0 || n&gt;52) throw std::domain_error("Broj n je besmislen!");
  if(n&gt;stek.size()) throw std::range_error("Nedovoljno karata u steku!");
 provjerispil(pok);
    for(int i=0;i&lt;n;i++) {
     Cvor* prosli=pok;
    Cvor*pomocni=pok-&gt;sljedeci;
     
     provjerikartu(stek.top());
     auto pomocnakarta=stek.top();
     while( pomocni!=pok &amp;&amp; uporedikarte(*pomocni,pomocnakarta)) {
      
      prosli=prosli-&gt;sljedeci;
      pomocni=pomocni-&gt;sljedeci;
     }
     if(pomocni-&gt;karta.boja==vratiboju(pomocnakarta.first) &amp;&amp; pomocni-&gt;karta.vrijednost==pomocnakarta.second)stek.pop();
    else { Cvor*zaubacivanje=new Cvor;
     zaubacivanje-&gt;karta.boja=vratiboju(pomocnakarta.first);
     zaubacivanje-&gt;karta.vrijednost=pomocnakarta.second;
     zaubacivanje-&gt;sljedeci=pomocni;
     prosli-&gt;sljedeci=zaubacivanje;
     
     stek.pop();
    }
    
    }
  
}

void UnistiSpil(Cvor* pok) {
 Cvor*trenutni=pok-&gt;sljedeci;
 Cvor*prosli=trenutni;
 trenutni=trenutni-&gt;sljedeci;
 while(trenutni!=pok) {
  delete prosli;
  prosli=trenutni;
  trenutni=trenutni-&gt;sljedeci;
 }
 delete prosli;
 delete trenutni;
 
}


int main ()
{ Cvor*pok=nullptr;
   try{ 
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int r; std::cin&gt;&gt;r;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int b; std::cin&gt;&gt;b;
    pok=KreirajSpil();
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek=IzbaciKarteRazbrajanjem(pok,r,b);
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;52-b&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
   
    Cvor*pomocni=pok;
   
    for(int i=0;i&lt;4;i++) {
    std::string nazivboje=vratistring(pomocni-&gt;karta.boja);
    std::cout&lt;&lt;nazivboje&lt;&lt;": ";
    while(vratistring(pomocni-&gt;karta.boja)==nazivboje){
<a name="1"></a><font color="#00FF00"><a href="match849-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

       std::cout&lt;&lt;pomocni-&gt;karta.vrijednost&lt;&lt;" ";
     pomocni=pomocni-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl;
    }
    
    std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";int vracanje; std::cin&gt;&gt;vracanje;
</font>    VratiPosljednjihNKarata(pok,stek,vracanje);
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;52-b+vracanje&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    pomocni=pok;
    for(int i=0;i&lt;4;i++) {
    std::string nazivboje=vratistring(pomocni-&gt;karta.boja);
    std::cout&lt;&lt;nazivboje&lt;&lt;": ";
    while(vratistring(pomocni-&gt;karta.boja)==nazivboje){
       std::cout&lt;&lt;pomocni-&gt;karta.vrijednost&lt;&lt;" ";
     pomocni=pomocni-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl;
    } 
  
   }
   catch(std::domain_error &amp;izuzetak) {
    std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
   }
   catch(std::logic_error &amp;izuzetak) {
    std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
   }
   
   catch(std::range_error &amp;izuzetak) {
    std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
   }
   catch(std::bad_alloc) {
    ;
   }
    UnistiSpil(pok);
   	return 0;
}
</pre>
</body>
</html>
