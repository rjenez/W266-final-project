<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8480.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8069.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt; 
#include &lt;stdexcept&gt;
#include &lt;stack&gt;

typedef std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; Stek_parova;

enum class Boje{Pik, Tref, Herc, Karo};
std::vector&lt;std::string&gt; karte_vrijednosti{"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
std::vector&lt;Boje&gt; boje_vrijednosti{Boje::Pik, Boje::Tref, Boje::Herc, Boje::Karo};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    Cvor* sljedeci;
};

std::string PretvoriUString(Boje b);

Cvor *KreirajSpil() {
    Cvor* prvi=nullptr, *prethodni=nullptr;
    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;13; j++) {
            Cvor* novi(nullptr);
            novi=new Cvor;
            if(i==0) novi-&gt;karta.boja=Boje::Pik;
            else if(i==1) novi-&gt;karta.boja=Boje::Tref;
            else if(i==2) novi-&gt;karta.boja=Boje::Herc;
            else novi-&gt;karta.boja=Boje::Karo;
            
            novi-&gt;karta.vrijednost=karte_vrijednosti[j];

            novi-&gt;sljedeci=nullptr;
            if(i==3 &amp;&amp; j==12) {
                novi-&gt;sljedeci=prvi;
                prethodni-&gt;sljedeci=novi;
                break;
            }
            if(!prvi) prvi=novi;
            else prethodni-&gt;sljedeci=novi;
            prethodni=novi;
        }
    }
    return prvi;
}

void UnistiListu(Cvor* p);

int BrojKarti(Cvor* p);

bool TestirajListu(Cvor* pocetak) {
    bool ispravna=false;
    if(!pocetak) return 0;
    int broj_karti(0);
    auto p=pocetak;
    for(;;) {
        if(broj_karti==BrojKarti(pocetak) &amp;&amp; p==pocetak) break;
        broj_karti++;
        for(int i=0; i&lt;4; i++) {
            if( p-&gt;karta.boja==boje_vrijednosti[i]) {
                ispravna=true;
                break;
            }
        }
        for(int i=0; i&lt;karte_vrijednosti.size(); i++) {
            if((p!=nullptr) &amp;&amp; p-&gt;karta.vrijednost==karte_vrijednosti[i]) {
                ispravna=true;
                break;
            }
        }
       if(p!=nullptr) p=p-&gt;sljedeci;
    }
    if(broj_karti&gt;52) return 0;
    return ispravna;
}

void IzbaciKarte(Cvor*&amp; pocetak, std::multimap&lt;Boje, std::string&gt; &amp;izbaci) {
    if(!TestirajListu(pocetak)) {
        UnistiListu(pocetak);
        throw std::logic_error("Neispravna lista");
    }
    if(!pocetak) return;
    Cvor* p(pocetak);
    int brojac(0);
    for(;;) {
        brojac++;
        if(brojac==BrojKarti(pocetak) &amp;&amp; p==pocetak) break;
        auto prethodni=p;
        if(p!=pocetak) prethodni=prethodni-&gt;sljedeci;
        for(auto it=izbaci.begin(); it!=izbaci.end(); it++) {
            if(p-&gt;karta.boja==it-&gt;first &amp;&amp; p-&gt;karta.vrijednost==it-&gt;second) {
                if(p==pocetak) pocetak=p-&gt;sljedeci;
                prethodni-&gt;sljedeci=p-&gt;sljedeci;
                delete p;
                izbaci.erase(it);
            }
        }
        p=prethodni-&gt;sljedeci;
    } 
}  

int BrojKarti(Cvor *pocetak) {
    if(!pocetak) return 0;
    int broj(1);
    Cvor *p=pocetak;
    p=p-&gt;sljedeci;
    int brojac(0);
    for(;;) {
        if(p==pocetak) break;
        brojac++;
        p=p-&gt;sljedeci;
        broj++;
    
    }

    return broj;
}

typedef std::pair&lt;std::string, std::string&gt; Par_stringova;

<a name="1"></a><font color="#00FF00"><a href="match315-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

std::string PretvoriUString(Boje b) {
    if(b==Boje::Pik) return "Pik";
    else if(b==Boje::Tref) return "Tref";
    else if(b==Boje::Herc) return "Herc";
    else return "Karo";
</font>}

<a name="0"></a><font color="#FF0000"><a href="match315-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

Stek_parova IzbaciKarteRazbrajanjem(Cvor*&amp; pocetak, const short int &amp;delta, const int &amp;broj) {
    if(!TestirajListu(pocetak)) {
       // UnistiListu(pocetak);
        throw std::logic_error("Neispravna lista!");
    }
    if(delta&lt;1 || delta&gt;52 || broj&lt;1) {
      //  UnistiListu(pocetak);
        throw std::logic_error("Neispravni elementi za izbacivanje!");
    }
    Stek_parova povratni;
</font>    int brojac(1), broj_izbacenih(0);
    
    auto p(pocetak);
    auto prethodni(p);
    while(broj_izbacenih&lt;broj) {
        if(!pocetak) break;
        Par_stringova par;
        while(brojac&lt;delta) {
           if(!p) break;
           p=p-&gt;sljedeci;
            brojac++;
        }
        if(brojac==delta) {
            auto pom(PretvoriUString(p-&gt;karta.boja));
            par.first=pom; 
            par.second=p-&gt;karta.vrijednost;
            povratni.push(par);
            for(;prethodni-&gt;sljedeci!=p; prethodni=prethodni-&gt;sljedeci);
             if(p==pocetak) pocetak=p-&gt;sljedeci;
                prethodni-&gt;sljedeci=p-&gt;sljedeci;
        
                delete p;
                broj_izbacenih++;
                brojac=1;
        }
        
        p=prethodni-&gt;sljedeci;
    } 
    return povratni;
}

int VelicinaSteka(Stek_parova stek) {
    int broj(0);
    while(!stek.empty()) {
        auto pom(stek.top());
        broj++;
        stek.pop();
    }
    return broj;
}

bool TestirajStek(Stek_parova s) {
    bool ispravan=false;
    while(!s.empty()) {
    auto pom=s.top();
    if(pom.first=="Pik" || pom.first=="Tref" ||pom.first=="Herc" || pom.first=="Karo" ) ispravan=true;
    if(!ispravan) return false;
    for(int i=0; i&lt;13; i++) {
        if(pom.second==karte_vrijednosti[i]){
             ispravan=true;
             break;
        }
    }
    if(!ispravan) return false;
    s.pop();
    }
    return ispravan;
}

std::pair&lt;std::string, std::string&gt; VratiPrethodni(std::pair&lt;std::string, std::string&gt; par) {
    std::pair&lt;std::string, std::string&gt; povratni;
    if(par.second=="2") {
        if(par.first!="Pik") povratni.second="A";

       if(par.first=="Pik") povratni.first="Pik";
       else if(par.first=="Tref") povratni.first="Pik";
       else if(par.first=="Herc") povratni.first="Tref";
       else povratni.first="Herc";
    }
    else {
        povratni.first=par.first;
        for(int i=0; i&lt;13; i++) {
        if(par.second==karte_vrijednosti[i])
            povratni.second=karte_vrijednosti[i-1];
        }
    }
    return povratni;
}

Boje PretvoriUEnum(std::string s) {
    Boje povratni;
    if(s=="Pik") povratni=Boje::Pik;
    else if(s=="Tref") povratni=Boje::Tref;
    else if(s=="Herc") povratni=Boje::Herc;
    else povratni=Boje::Karo;
    return povratni;
}


void VratiPosljednjihNKarata(Cvor*&amp; pocetak, Stek_parova &amp;stek, int n) {
    if(!TestirajListu(pocetak)) 
        throw std::logic_error("Neispravna lista!");
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if( n&gt;VelicinaSteka(stek)) throw std::range_error("Nedovoljno karata u steku!");
    if(!TestirajStek(stek)) throw std::logic_error("Neispravne karte");
    
    int broj_ubacenih(0);
    auto p=pocetak;
    auto prethodni=p;
    while(broj_ubacenih&lt;n) {
            auto pom=stek.top();
            for(;prethodni-&gt;sljedeci!=p; prethodni=prethodni-&gt;sljedeci);
            std::string boja(PretvoriUString(p-&gt;karta.boja));
            auto par(VratiPrethodni(pom));
            if(par.first==boja &amp;&amp; par.second==p-&gt;karta.vrijednost) {
                Cvor *pokazivac=nullptr;
                pokazivac=new Cvor;
                auto ubaci(PretvoriUEnum(pom.first));
                pokazivac-&gt;karta.boja=ubaci;
                pokazivac-&gt;karta.vrijednost=pom.second;
                pokazivac-&gt;sljedeci=p-&gt;sljedeci;
                prethodni=p;
                prethodni-&gt;sljedeci=pokazivac;
                broj_ubacenih++;
                if(!stek.empty()) stek.pop();
                if(stek.empty()) break;
            }
            p=p-&gt;sljedeci;
    }
    
}

void IspisiSpil(Cvor* pocetak) {
    int vel(BrojKarti(pocetak));
    int broj(0);
    auto p=pocetak;
 
    for(;p-&gt;sljedeci!=pocetak; p=p-&gt;sljedeci) {
        if(broj==vel) break;
        broj++;
        std::cout &lt;&lt;"Pik: ";
        PretvoriUString(p-&gt;karta.boja);
<a name="2"></a><font color="#0000FF"><a href="match315-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        while( PretvoriUString(p-&gt;karta.boja)=="Pik") {
            std::cout &lt;&lt;p-&gt;karta.vrijednost&lt;&lt;" ";
            p=p-&gt;sljedeci;
</font>            if(p==pocetak) break;
        }    
        std::cout&lt;&lt;std::endl;
        std::cout &lt;&lt; "Tref: ";
<a name="3"></a><font color="#00FFFF"><a href="match315-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        while( PretvoriUString(p-&gt;karta.boja)=="Tref"){
            std::cout &lt;&lt;p-&gt;karta.vrijednost&lt;&lt;" ";
            p=p-&gt;sljedeci;
</font>            if(p==pocetak) break;
        }
        std::cout &lt;&lt; std::endl;
        std::cout&lt;&lt;"Herc: ";
<a name="4"></a><font color="#FF00FF"><a href="match315-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        while( PretvoriUString(p-&gt;karta.boja)=="Herc"){
            std::cout &lt;&lt;p-&gt;karta.vrijednost&lt;&lt;" ";
            p=p-&gt;sljedeci;
</font>            if(p==pocetak) break;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Karo: ";
<a name="5"></a><font color="#FF0000"><a href="match315-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        while( PretvoriUString(p-&gt;karta.boja)=="Karo"){
            std::cout &lt;&lt;p-&gt;karta.vrijednost&lt;&lt;" ";
            p=p-&gt;sljedeci;
</font>            if(p==pocetak) break;
        }
        std::cout&lt;&lt;std::endl;
        if(p==pocetak) break;
    }
}

void UnistiListu(Cvor* pocetak) {
    if(!pocetak) return;
    auto p(pocetak);
    Cvor* prethodni;
    for(;;) {
         prethodni=p;
        p=p-&gt;sljedeci;
        delete prethodni;
        if(p==pocetak) {
            //delete p;
            pocetak=nullptr;
            break;
        }
    }
   // pocetak=nullptr;
    
    
}


int main ()
{
    Cvor* pok(nullptr);
      try {
    pok=KreirajSpil();
    short int korak(0);
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    std::cin&gt;&gt;korak;
    int broj(0);
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    std::cin&gt;&gt;broj;
    auto stek(IzbaciKarteRazbrajanjem(pok, korak, broj));
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarti(pok)&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    IspisiSpil(pok);
    std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
    int vracaj;
    std::cin&gt;&gt;vracaj;
    VratiPosljednjihNKarata(pok, stek, vracaj);
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarti(pok)&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    IspisiSpil(pok);
    UnistiListu(pok);
    }
    catch(std::domain_error izuzetak) {
        UnistiListu(pok);
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }
    catch(std::range_error izuzetak2) {
        UnistiListu(pok);
        std::cout &lt;&lt;"Izuzetak: "&lt;&lt; izuzetak2.what();
    }
    catch(std::logic_error izuzetak3) {
        UnistiListu(pok);
        std::cout &lt;&lt;"Izuzetak: "&lt;&lt; izuzetak3.what();
    }
	return 0;
}
    

</pre>
</body>
</html>
