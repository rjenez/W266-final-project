<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student6010.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student1110.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match77-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;


using namespace std;

enum class Boje {Pik, Tref, Herc, Karo};

struct Karta
{
    Boje boje;
    string vrijednost;
};

struct Cvor
{
    Karta karta;
    Cvor *sljedeci;
};

void UnistiSpil(Cvor* spil)
{
    Cvor* poc=spil;
    Cvor* pom=spil-&gt;sljedeci;
    while(pom-&gt;sljedeci!=spil)
    {
        delete poc;
        poc=pom;
        pom=pom-&gt;sljedeci;
    }
    delete poc;
    delete pom;
}


int PrebrojiKarte(Cvor *spil)
{
    if (spil==nullptr) return 0;
    Cvor *pom=spil;
    int br=1;
    while(pom-&gt;sljedeci!=spil)
    {
        br++;
        pom=pom-&gt;sljedeci;
    }
    return br;
}

void IspisiListu(Cvor *karte)
{
    Cvor *pom=karte;
    while(pom-&gt;sljedeci!=karte)
    {
        cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
        pom=pom-&gt;sljedeci;
    }
    cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;endl;
}

void IspisiStack(stack&lt;pair&lt;string, string&gt;&gt; karte)
{
    while(!karte.empty())
    {
        pair&lt;string, string&gt; pom=karte.top();
        cout&lt;&lt;pom.first&lt;&lt;" "&lt;&lt;pom.second&lt;&lt;endl;
        karte.pop();
    }
}

Cvor* KreirajSpil()
{
    vector&lt;string&gt; v1={"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"}, v2={"3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    Cvor *karta=nullptr;
    Cvor *t=karta;
    try
    {
        Cvor *novi=new Cvor;
        novi-&gt;karta.vrijednost=v1[0];
        novi-&gt;karta.boje=Boje(0);
        karta=novi;
        t=novi;
        try
        {   
            for(int k=0; k&lt;4; k++)
            {
                vector&lt;string&gt; v=v1;
                if(k==0) v=v2;
                for(int i=0; i&lt;v.size(); i++)
                {
                    Cvor *novi= new Cvor;
                    novi-&gt;karta.vrijednost=v[i];
                    novi-&gt;karta.boje=Boje(k);
                    t-&gt;sljedeci=novi;
                    t=novi;
                    //delete novi;
                }
            }
            t-&gt;sljedeci=karta;
            return karta;
        }
        catch(...){ throw "Izuzetak"; }
    }
    catch(...){ throw bad_alloc(); }
}


Cvor* IzbaciKarte(Cvor* &amp;spil, multimap&lt;Boje, string&gt; &amp;karte)
{
    Cvor *pom=spil;
    while (pom-&gt;sljedeci!=spil)
    {
        for(auto i=karte.begin(); i!=karte.end(); i++)
        {
            if(pom-&gt;karta.boje==i-&gt;first &amp;&amp; pom-&gt;karta.vrijednost==i-&gt;second)
            {
                Cvor *pom2=pom-&gt;sljedeci;
                
                while(pom2-&gt;sljedeci!=pom)
                    pom2=pom2-&gt;sljedeci;
                pom2-&gt;sljedeci=pom-&gt;sljedeci;
                if(pom!=nullptr)
                    delete pom;
                pom=pom2;
            }
        }
    pom=pom-&gt;sljedeci;
    }
    //Zadnja karta
    for(auto i=karte.begin(); i!=karte.end(); i++)
        if(pom-&gt;karta.boje==i-&gt;first &amp;&amp; pom-&gt;karta.vrijednost==i-&gt;second)
        {
             Cvor *pom2=pom-&gt;sljedeci;
            
             while(pom2-&gt;sljedeci!=pom)
                pom2=pom2-&gt;sljedeci;
             pom2-&gt;sljedeci=pom-&gt;sljedeci;
            if(pom!=nullptr)
                delete pom;
            pom=pom2;
        }
    pom=pom-&gt;sljedeci;
    //delete pom; 
    return pom;
}


stack&lt;pair&lt;string, string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor* &amp;spil, const short int &amp;r, const int &amp;b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) UnistiSpil(spil);
    if(r&lt;1 || r&gt;52 || b&lt;1) throw logic_error ("Neispravni elementi za izbacivanje!");
    
    int korak_razbrajanja=r, broj_karata_za_izbacivanje=b;
    
    if(broj_karata_za_izbacivanje&gt;PrebrojiKarte(spil)) 
        broj_karata_za_izbacivanje=PrebrojiKarte(spil);
    
    stack&lt;pair&lt;string, string&gt;&gt; karte;
    int brojac=1;
    Cvor *pom=spil;
    while(broj_karata_za_izbacivanje&gt;0)
    {
        if(brojac==korak_razbrajanja)
        {
            if(pom-&gt;karta.boje==Boje::Pik) karte.push(make_pair("Pik", pom-&gt;karta.vrijednost));
            else if(pom-&gt;karta.boje==Boje::Tref) karte.push(make_pair("Tref", pom-&gt;karta.vrijednost));
            else if(pom-&gt;karta.boje==Boje::Herc) karte.push(make_pair("Herc", pom-&gt;karta.vrijednost));
            else  karte.push(make_pair("Karo", pom-&gt;karta.vrijednost));
            
            Cvor *pom2=pom-&gt;sljedeci, *pom3=spil;
            
            while(pom3-&gt;sljedeci!=pom)
                pom3=pom3-&gt;sljedeci;
                
            pom3-&gt;sljedeci=pom2;
            delete pom;
            pom=pom3;
            
            brojac=0;
            broj_karata_za_izbacivanje--;
        }
        pom=pom-&gt;sljedeci; brojac++;
    }
    return karte;
}

void VratiPosljednjihNKarata(Cvor* &amp;spil, stack&lt;pair&lt;string, string&gt;&gt; &amp;izbacene, int n)
{
    if(n&lt;0 || n&gt;52) UnistiSpil(spil);
    if(n&lt;0 || n&gt;52) throw domain_error ("Broj n je besmislen!");
    if (n&gt;izbacene.size()) UnistiSpil(spil);
    if (n&gt;izbacene.size()) throw range_error ("Nedovoljno karata u steku!");
     if(n==0) return;
     if(n==izbacene.size())
     {
         UnistiSpil(spil);
         spil=KreirajSpil();
         return;
     }
     
     //USLOV ZA BESMISLENE
     vector&lt;string&gt; v={"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
     stack&lt;pair&lt;string, string&gt;&gt; provjeri=izbacene;
     while(!provjeri.empty())
     {
         bool uredu=false;
         pair&lt;string, string&gt; pom=provjeri.top();
         for(int i=0; i&lt;v.size(); i++)
            if(pom.second==v[i])
                uredu=true;
        if(!uredu)
        {
            UnistiSpil(spil);
            throw logic_error("Neispravne karte!");
        }
        
        if(pom.first!="Herc")
            if(pom.first!="Karo")
                if(pom.first!="Pik")
                    if(pom.first!="Tref")
                    {
                        UnistiSpil(spil);
                        throw logic_error("Neispravne karte!");
                    }
        provjeri.pop();
     }
     
     provjeri=izbacene;
     int za_izbaciti=n;
     for(int i=0; i&lt;za_izbaciti; i++)
        provjeri.pop();
    multimap&lt;Boje, string&gt; mapa;
     while(!provjeri.empty())
     {
         pair&lt;string, string&gt; s=provjeri.top();
         Boje b;
         if(s.first=="Pik") b=Boje::Pik;
         else if(s.first=="Karo") b=Boje::Karo;
         else if(s.first=="Tref") b=Boje::Tref;
         else b=Boje::Herc;
         
         mapa.insert(make_pair(b, s.second));
         provjeri.pop();
     }
     UnistiSpil(spil);
     spil=KreirajSpil();
     spil=IzbaciKarte(spil, mapa);
}


int main ()
{
    cout&lt;&lt;"Unesite korak razbrajanja: ";
    int korak;
    cin&gt;&gt;korak;
    cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int br_karata_za_izbaciti; 
    cin&gt;&gt;br_karata_za_izbaciti;
    try
    {
        Cvor* spil;
        stack&lt;pair&lt;string, string&gt;&gt; izbacene_karte;
        
        spil=KreirajSpil();
        izbacene_karte=IzbaciKarteRazbrajanjem(spil, korak, br_karata_za_izbaciti);
        cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;PrebrojiKarte(spil)&lt;&lt;" karata, i to: "&lt;&lt;endl;
        Cvor *pom=spil;
        cout&lt;&lt;"Pik: ";
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Pik)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }
        cout&lt;&lt;endl&lt;&lt;"Tref: ";
        pom=spil;
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Tref)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }
        cout&lt;&lt;endl&lt;&lt;"Herc: ";
        pom=spil;
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Herc)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }
        cout&lt;&lt;endl&lt;&lt;"Karo: ";
        pom=spil;
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Karo)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }  
        if(pom-&gt;karta.boje==Boje::Karo)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
    cout&lt;&lt;endl&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
    int br_karata_za_vratiti;
    cin&gt;&gt;br_karata_za_vratiti;
    VratiPosljednjihNKarata(spil, izbacene_karte, br_karata_za_vratiti);
    cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;PrebrojiKarte(spil)&lt;&lt;" karata, i to: "&lt;&lt;endl;
    
    pom=spil;
        cout&lt;&lt;"Pik: ";
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Pik)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }
        cout&lt;&lt;endl&lt;&lt;"Tref: ";
        pom=spil;
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Tref)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }
        cout&lt;&lt;endl&lt;&lt;"Herc: ";
        pom=spil;
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Herc)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }
        cout&lt;&lt;endl&lt;&lt;"Karo: ";
        pom=spil;
        while(pom-&gt;sljedeci!=spil)
        {
            if(pom-&gt;karta.boje==Boje::Karo)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
            pom=pom-&gt;sljedeci;
        }  
        if(pom-&gt;karta.boje==Boje::Karo)
                cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
    UnistiSpil(spil); 
    return 0;
    }
    catch(logic_error l) {cout&lt;&lt;"Izuzetak: "&lt;&lt;l.what();}
    catch(domain_error d) {cout&lt;&lt;"Izuzetak: "&lt;&lt;d.what();}
    catch(range_error r) {cout&lt;&lt;"Izuzetak: "&lt;&lt;r.what();}
</font>}</pre>
</body>
</html>
