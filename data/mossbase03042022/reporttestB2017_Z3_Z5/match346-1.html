<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8257.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student1366.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;new&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
enum class Boje { Pik,Tref,Herc,Karo };
typedef std::multimap&lt;Boje,std::string&gt; DioSpila;
struct Karta {
    Boje boja;
    std::string vrijednost;
};
struct Cvor {
    Karta karta;
    Cvor* sljedeci;
};
Cvor* KreirajSpil() {
    static const std::vector&lt;std::string&gt; v{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    Cvor *pocetak=nullptr, *prethodni;
    for (int i=0;i&lt;4;i++) {
        for (int j=0;j&lt;13;j++) {
            Cvor *novi(new Cvor{{static_cast&lt;Boje&gt;(i),v.at(j)},nullptr});
            if (!pocetak) pocetak=novi;
            else prethodni-&gt;sljedeci=novi;
            prethodni=novi;
        }
    }
    prethodni-&gt;sljedeci=pocetak;
    return pocetak;
}
int BrojKarata(Cvor* pocetak) {
    if (pocetak==nullptr) return 0;
    int brojac(0);
    Cvor* pok=pocetak;
    do {
        brojac++;
        pok=pok-&gt;sljedeci;
    } while(pok!=pocetak);
    return brojac;
}
Cvor* PronadjiKartu(Cvor* pocetak, std::pair&lt;Boje,std::string&gt; kartauspilu) {
    Cvor* pok=pocetak;
    if (pok==nullptr) return nullptr;
    do {
<a name="2"></a><font color="#0000FF"><a href="match346-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        if (pok-&gt;karta.boja==kartauspilu.first &amp;&amp; pok-&gt;karta.vrijednost==kartauspilu.second) return pok;
        pok=pok-&gt;sljedeci;
</font>    }while(pok!=pocetak);
    return nullptr;
}
Cvor* PronadjiKartuZaIzbaciti(Cvor *pocetak, std::pair&lt;Boje,std::string&gt; kartauspilu) {
    Cvor* pok=pocetak, *prethodni=nullptr;
    if (pok==nullptr) return nullptr;
    for (prethodni=pocetak;prethodni-&gt;sljedeci!=pocetak;prethodni=prethodni-&gt;sljedeci);
    do {
        if (pok-&gt;karta.boja==kartauspilu.first &amp;&amp; pok-&gt;karta.vrijednost==kartauspilu.second) return prethodni;
        prethodni=pok;
        pok=pok-&gt;sljedeci;
    }while(pok!=pocetak);
    return nullptr;
}
int BrojPonavljanja(Cvor* pocetak, std::pair&lt;Boje,std::string&gt; kartauspilu) {
    int brojac(0);
    if (pocetak==nullptr) return 0;
    Cvor* pok=pocetak;
    do {
        if (pok-&gt;karta.boja==kartauspilu.first &amp;&amp; pok-&gt;karta.vrijednost==kartauspilu.second) brojac++;
        pok=pok-&gt;sljedeci;
    }while(pok!=pocetak);
    return brojac;
}
bool DaLiJeDobroSortiran(Cvor* pocetak) {
    static const std::vector&lt;std::string&gt; v{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    Cvor *pok(pocetak);
    if (pok==nullptr) return true;
    Cvor *pok2(pocetak-&gt;sljedeci);
    while (pok2!=pocetak) {
<a name="4"></a><font color="#FF00FF"><a href="match346-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        if (pok2-&gt;karta.boja&lt;pok-&gt;karta.boja || ( pok2-&gt;karta.boja==pok-&gt;karta.boja &amp;&amp; std::find(v.begin(),v.end(),pok2-&gt;karta.vrijednost)&lt;std::find(v.begin(),v.end(),pok-&gt;karta.vrijednost)))
</font>            return false;
        pok=pok-&gt;sljedeci;pok2=pok2-&gt;sljedeci;
    }
    return true;
}
bool DaLiJeIspravan(Cvor* pocetak) {
    static const std::vector&lt;std::string&gt; v{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    Cvor *test=pocetak;
    if (pocetak==nullptr) return true;
    do {
        if (!std::count(v.begin(),v.end(),test-&gt;karta.vrijednost)) return false;
        if (BrojPonavljanja(pocetak,std::make_pair(test-&gt;karta.boja,test-&gt;karta.vrijednost))&gt;1) return false;
        test=test-&gt;sljedeci;
    }while(test!=pocetak);
    return true;
}
void IzbaciKarte(Cvor* &amp;pocetak, DioSpila &amp;diospila) {
    if (BrojKarata(pocetak)&gt;52 || !DaLiJeDobroSortiran(pocetak) || !DaLiJeIspravan(pocetak)) throw std::logic_error("Neispravna lista");
    auto it(diospila.begin());
    while (it!=diospila.end()) {
        auto par=std::make_pair(it-&gt;first,it-&gt;second);
        bool loga=false;
        if (BrojPonavljanja(pocetak, par)) {
            Cvor* it2=PronadjiKartuZaIzbaciti(pocetak, par);
            if (it2==nullptr) {
                Cvor* temp=pocetak;
                pocetak=pocetak-&gt;sljedeci;
                delete temp;
            }
            Cvor* temp=it2-&gt;sljedeci;
            if (temp==pocetak) pocetak=pocetak-&gt;sljedeci;
            if (temp==it2) {
                it2-&gt;sljedeci=nullptr;
                delete it2;
                pocetak=nullptr;
            }
            else {
                it2-&gt;sljedeci=it2-&gt;sljedeci-&gt;sljedeci;
                delete temp;
            }
            it=diospila.erase(it);
            loga=true;
        }
        if(!loga) it++;
    }
}
std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor* &amp;pocetak, const short int &amp;r, const int &amp;b) {
    if (r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if (BrojKarata(pocetak)&gt;52 || !DaLiJeIspravan(pocetak) || !DaLiJeDobroSortiran(pocetak)) throw std::logic_error("Neispravna lista!");
    static const std::vector&lt;std::string&gt; v{"Pik","Tref","Herc","Karo"};
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek;
    int brojac(0), brrazmaka(1);
    Cvor* pok=pocetak;
    while(BrojKarata(pocetak) &amp;&amp; brojac&lt;b) {
        bool loga=false;
        if (brrazmaka==r) {
            auto karta=std::make_pair(v[static_cast&lt;int&gt;(pok-&gt;karta.boja)], pok-&gt;karta.vrijednost);
            stek.push(karta);
            auto pok2=PronadjiKartuZaIzbaciti(pocetak, std::make_pair(pok-&gt;karta.boja,pok-&gt;karta.vrijednost));
            Cvor* temp=pok2-&gt;sljedeci;
            if (temp==pocetak) pocetak=pocetak-&gt;sljedeci;
            if (temp==pok2) {
                pok2-&gt;sljedeci=nullptr;
                delete pok2;
                pocetak=nullptr;
            }
            else {
                pok2-&gt;sljedeci=pok2-&gt;sljedeci-&gt;sljedeci;
                pok=pok-&gt;sljedeci;
                delete temp;
            }
            loga=true;
            brojac++; brrazmaka=0;
        }
        if (!loga) pok=pok-&gt;sljedeci;
        brrazmaka++;
    }
    return stek;
}
void UnistiSpil(Cvor* pocetak) {
    int brojkarata(BrojKarata(pocetak));
    for (int i=0;i&lt;brojkarata;i++) {
        Cvor* temp=pocetak;
        pocetak=pocetak-&gt;sljedeci;
        delete temp;
    }
}
void IspisiSpil(Cvor* pocetak) {
    static const std::vector&lt;std::string&gt; v{"Pik", "Tref", "Herc", "Karo"};
    for(int it=0;it&lt;4;it++) {
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; v.at(it) &lt;&lt; ": ";
        Cvor *test=pocetak;
        do {
            if(test == nullptr) break;
            if(test-&gt;karta.boja == static_cast&lt;Boje&gt;(it))
                    std::cout &lt;&lt; test-&gt;karta.vrijednost &lt;&lt; " ";
            test=test-&gt;sljedeci;
        }while(test!=pocetak);
    }
}
void UbaciKartu(Cvor* &amp;pocetak, std::pair&lt;Boje,std::string&gt; karta) {
    static const std::vector&lt;std::string&gt; v2{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    Cvor* pok=pocetak;
    if (pocetak==nullptr) {
        pocetak=new Cvor{{karta.first,karta.second},nullptr};
        pocetak-&gt;sljedeci=pocetak;
    }
    else {
        while (pok-&gt;sljedeci!=pocetak &amp;&amp; ((static_cast&lt;int&gt;(pok-&gt;karta.boja) &lt; static_cast&lt;int&gt;(karta.first)))) pok=pok-&gt;sljedeci;
        while ((static_cast&lt;int&gt;(pok-&gt;karta.boja) == static_cast&lt;int&gt;(karta.first)) &amp;&amp; (std::find(v2.begin(),v2.end(),pok-&gt;karta.vrijednost) &lt; std::find(v2.begin(),v2.end(),karta.second))) pok=pok-&gt;sljedeci;
        pok=PronadjiKartuZaIzbaciti(pocetak,std::make_pair(pok-&gt;karta.boja,pok-&gt;karta.vrijednost));
        auto novi=new Cvor{{karta.first,karta.second},pok-&gt;sljedeci};
<a name="3"></a><font color="#00FFFF"><a href="match346-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if (pok-&gt;sljedeci==pocetak &amp;&amp; ((std::find(v2.begin(),v2.end(),karta.second) &lt; std::find(v2.begin(),v2.end(),pocetak-&gt;karta.vrijednost)) || (static_cast&lt;int&gt;(karta.first) &lt; static_cast&lt;int&gt;(pok-&gt;karta.boja)))) pocetak=novi;
</font>        pok-&gt;sljedeci=novi;
    }
}
<a name="5"></a><font color="#FF0000"><a href="match346-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

void VratiPosljednjihNKarata(Cvor* &amp;pocetak, std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;red, int n) {
    if (n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if (n&gt;red.size()) throw std::range_error("Nedovoljno karata u steku!");
</font>    if (BrojKarata(pocetak)&gt;52 || !DaLiJeIspravan(pocetak) || !DaLiJeDobroSortiran(pocetak)) throw std::logic_error("Neispravna lista!");
    static const std::vector&lt;std::string&gt; v{"Pik", "Tref", "Herc", "Karo"};
    static const std::vector&lt;std::string&gt; v2{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    int brojac(0);
    while (red.size() &amp;&amp; brojac&lt;n) {
        if (!std::count(v.begin(),v.end(),red.top().first) || !std::count(v2.begin(),v2.end(),red.top().second)) throw std::logic_error("Neispravne karte!");
        auto karta=std::make_pair(static_cast&lt;Boje&gt;(std::find(v.begin(),v.end(),red.top().first)-v.begin()),red.top().second);
        if (BrojPonavljanja(pocetak,karta)) continue;
        UbaciKartu(pocetak, karta);
        red.pop();
        brojac++;
    }
}
<a name="0"></a><font color="#FF0000"><a href="match346-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

int main ()
{
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int r;
    std::cin&gt;&gt;r;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int b;
    std::cin&gt;&gt;b;
    try {
    auto pocetak=KreirajSpil();
    try {
</font>        auto red=IzbaciKarteRazbrajanjem(pocetak, r, b);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarata(pocetak)&lt;&lt;" karata, i to: ";
        IspisiSpil(pocetak);
<a name="1"></a><font color="#00FF00"><a href="match346-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        std::cout&lt;&lt;std::endl&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        int brojkarata;
        std::cin&gt;&gt;brojkarata;
        VratiPosljednjihNKarata(pocetak,red,brojkarata);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarata(pocetak)&lt;&lt;" karata, i to: ";
        IspisiSpil(pocetak);
</font>    }
    catch(std::exception &amp;e) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
    }
    UnistiSpil(pocetak);
    }
    catch(...) {}
	return 0;
}
</pre>
</body>
</html>
