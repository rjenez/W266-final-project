<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student3169.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student3169.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match308-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;stack&gt;


enum class Boje {Pik, Tref, Herc, Karo};

struct Karta{
    Boje boja;
    std::string vrijednost;
};

struct Cvor{
    Karta karta;
    Cvor* sljedeci=nullptr;
</font>};

template &lt;typename T&gt; std::string U_string(T x)
{
	std::ostringstream s;
	s&lt;&lt;x;
	return s.str();
}

std::string Pretvori(Boje boja)
{
    std::string s;
    if(boja==Boje(0))s="Pik";
    else if(boja==Boje(1))s="Tref";
    else if(boja==Boje(2))s="Herc";
    else if(boja==Boje(3))s="Karo";
    return s;
}

int PretvoriBoje(Boje boja){
    if(boja==Boje::Pik)return 0;
    else if(boja==Boje::Herc)return 2;
    else if(boja==Boje::Karo)return 3;
    return 1;
}

Boje pretvoriStringUBoju(std::string s){
    if(s=="Pik")return Boje::Pik;
    else if(s=="Herc")return Boje::Herc;
    else if(s=="Karo")return Boje::Karo;
    return Boje::Tref;
}

Boje Pretvori2(std::string s)
{
    Boje boja;
    if(s=="Pik")boja=Boje(0);
    else if(s=="Tref")boja=Boje(1);
    else if(s=="Herc")boja=Boje(2);
    else if(s=="Karo")boja=Boje(3);
    return boja;
}

int Pretvori1(std::string s)
{
    int broj;
    if(s=="J"){broj=11;return broj;}
    if(s=="Q"){broj=12;return broj;}
    if(s=="K"){broj=13;return broj;}
    if(s=="A"){broj=14;return broj;}
    else broj=std::stoi(s);
    return broj;
    
}

Cvor* KreirajSpil()
{
    Cvor* pocetak(nullptr), *prethodni, *temp;
    
    Boje trenutna_boja;
    for(int i(0);i&lt;4;i++)
    {
        trenutna_boja=Boje(i);
        for(int j(2);j&lt;=10;j++)
        {
            Karta tmp;
            tmp.boja= trenutna_boja;
            tmp.vrijednost=U_string(j);
            temp=new Cvor;
            temp-&gt;karta=tmp;
            if(!pocetak)
            {
                pocetak=temp;
                prethodni=temp;
            }
            else{
                prethodni-&gt;sljedeci=temp;
                prethodni=temp;
                
            }
            temp=temp-&gt;sljedeci;
        }
        Karta tmp;
        tmp.boja=trenutna_boja;
        tmp.vrijednost="J";
        temp=new Cvor;
        temp-&gt;karta=tmp;
        prethodni-&gt;sljedeci=temp;
        prethodni=temp;
        temp=temp-&gt;sljedeci;
        tmp.vrijednost="Q";
        temp=new Cvor;
        temp-&gt;karta=tmp;
        prethodni-&gt;sljedeci=temp;
        prethodni=temp;
        temp=temp-&gt;sljedeci;
        tmp.vrijednost="K";
        temp=new Cvor;
        temp-&gt;karta=tmp;
        prethodni-&gt;sljedeci=temp;
        prethodni=temp;
        temp=temp-&gt;sljedeci;
        tmp.vrijednost="A";
        temp=new Cvor;
        temp-&gt;karta=tmp;
        prethodni-&gt;sljedeci=temp;
        prethodni=temp;
        temp=temp-&gt;sljedeci;
    }
    prethodni-&gt;sljedeci=pocetak;
    
    return pocetak;
}

void IzbaciKarte( Cvor* &amp;pocetak, std::multimap&lt;Boje, std::string&gt;&amp; Mapa)
{
    
    Cvor* privremeni=pocetak;
    if(pocetak==nullptr)return;
    int brojac(0);
    while(privremeni-&gt;sljedeci!=pocetak)
    {
        if(brojac&gt;52)throw std::logic_error("Neispravna lista");
        
        if(!((privremeni-&gt;karta).boja==Boje::Pik || (privremeni-&gt;karta).boja==Boje::Herc || (privremeni-&gt;karta).boja==Boje::Tref || (privremeni-&gt;karta).boja==Boje::Karo))throw std::logic_error("Neispravna lista");
        if(!((privremeni-&gt;karta).vrijednost[0]&gt;='0' &amp;&amp; (privremeni-&gt;karta).vrijednost[0]&lt;='9' || (privremeni-&gt;karta).vrijednost[0]=='K' || (privremeni-&gt;karta).vrijednost[0]=='Q' || (privremeni-&gt;karta).vrijednost[0]=='A' || (privremeni-&gt;karta).vrijednost[0]=='J'))throw std::logic_error("Neispravna lista");
        brojac++;
        privremeni=privremeni-&gt;sljedeci;
    }
    Cvor* kraj(privremeni);
    privremeni=pocetak;
    Cvor* prethodni(pocetak);
    while(privremeni!=nullptr &amp;&amp; privremeni-&gt;sljedeci!=pocetak)
    {
        auto it2=Mapa.find((privremeni-&gt;karta).boja);
        if(it2!=Mapa.end() &amp;&amp; it2-&gt;second==(privremeni-&gt;karta).vrijednost)
        {
            Mapa.erase(it2);
            prethodni-&gt;sljedeci=privremeni-&gt;sljedeci;
            auto tmp=privremeni;
            privremeni=privremeni-&gt;sljedeci;
            if(tmp==pocetak){pocetak=privremeni;
            kraj-&gt;sljedeci=pocetak;}
            delete tmp;
            tmp=nullptr;
        }
    }
}

<a name="3"></a><font color="#00FFFF"><a href="match308-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor* &amp;pocetak, const short int &amp;r, const int &amp;b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1)throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; Stek;
    Cvor* privremeni=pocetak;
    if(pocetak!=nullptr){
    int brojac(0);
  while(privremeni-&gt;sljedeci!=pocetak)
    {
        if(brojac&gt;52)throw std::logic_error("Neispravna lista");
        
        if(!((privremeni-&gt;karta).boja==Boje::Pik || (privremeni-&gt;karta).boja==Boje::Herc || (privremeni-&gt;karta).boja==Boje::Tref || (privremeni-&gt;karta).boja==Boje::Karo))throw std::logic_error("Neispravna lista");
        if(!((privremeni-&gt;karta).vrijednost[0]&gt;='0' &amp;&amp; (privremeni-&gt;karta).vrijednost[0]&lt;='9' || (privremeni-&gt;karta).vrijednost[0]=='K' || (privremeni-&gt;karta).vrijednost[0]=='Q' || (privremeni-&gt;karta).vrijednost[0]=='A' || (privremeni-&gt;karta).vrijednost[0]=='J'))throw std::logic_error("Neispravna lista");
        brojac++;
        privremeni=privremeni-&gt;sljedeci;
    }
    
    int a(0);
    Cvor* kraj(privremeni);
    privremeni=pocetak;
    Cvor* prethodni=pocetak;
    while(!(privremeni==nullptr || a==b))
    {
        int br(0);
        while(br!=r)
        {
            br++;
            if(br==r)break;
            prethodni=privremeni;
            privremeni=privremeni-&gt;sljedeci;
        
        }
        std::string pomocni;
        if((privremeni-&gt;karta).boja==Boje(0))pomocni="Pik";
        else if((privremeni-&gt;karta).boja==Boje(1))pomocni="Tref";
        else if((privremeni-&gt;karta).boja==Boje(2))pomocni="Herc";
        else if((privremeni-&gt;karta).boja==Boje(3))pomocni="Karo";
        std::pair&lt;std::string, std::string&gt; temp;
        temp.first=pomocni;
        temp.second=(privremeni-&gt;karta).vrijednost;
        Stek.push(temp);
        a++;
        prethodni-&gt;sljedeci=privremeni-&gt;sljedeci;
        auto tmp=privremeni;
        privremeni=privremeni-&gt;sljedeci;
        if(tmp==kraj)kraj=prethodni;
        if(tmp==pocetak){pocetak=privremeni;
        kraj-&gt;sljedeci=pocetak;}
        delete tmp;
        tmp=nullptr;
        
    }}
    return Stek;
}


void VratiPosljednjihNKarata(Cvor* pocetak, std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;Red, int n)
{
     Cvor* privremeni=pocetak;
    int brojac(0);
   while(privremeni-&gt;sljedeci!=pocetak)
    {
        if(brojac&gt;52)throw std::logic_error("Neispravna lista");
        
        if(!((privremeni-&gt;karta).boja==Boje::Pik || (privremeni-&gt;karta).boja==Boje::Herc || (privremeni-&gt;karta).boja==Boje::Tref || (privremeni-&gt;karta).boja==Boje::Karo))throw std::logic_error("Neispravna lista");
        if(!((privremeni-&gt;karta).vrijednost[0]&gt;='0' &amp;&amp; (privremeni-&gt;karta).vrijednost[0]&lt;='9' || (privremeni-&gt;karta).vrijednost[0]=='K' || (privremeni-&gt;karta).vrijednost[0]=='Q' || (privremeni-&gt;karta).vrijednost[0]=='A' || (privremeni-&gt;karta).vrijednost[0]=='J'))throw std::logic_error("Neispravna lista");
        brojac++;
        privremeni=privremeni-&gt;sljedeci;
    }
    if(n&lt;0)throw std::domain_error("Broj n je besmislen!");
    if(n&gt;Red.size())throw std::range_error("Nedovoljno karata u steku!");
    int a(0);
    Cvor*kraj(privremeni);
    while(a!=n)
    {
        privremeni=pocetak;
        if(a==n)break;
        auto par=Red.top();
        Red.pop();
        Cvor* prethodni=privremeni;
        while(privremeni!=nullptr &amp;&amp; privremeni-&gt;sljedeci!=pocetak)
        {
            if(Pretvori((privremeni-&gt;karta).boja)==par.first)break;
            prethodni=privremeni;
            privremeni=privremeni-&gt;sljedeci;
        }
        
        while(privremeni!=nullptr &amp;&amp; privremeni-&gt;sljedeci!=pocetak)
        {
            if(Pretvori1((privremeni-&gt;karta).vrijednost)&lt;Pretvori1(par.second))
            {
                prethodni=privremeni;
                privremeni=privremeni-&gt;sljedeci;
            }
            else break;
        }
        Cvor* zlj=new Cvor;
        zlj-&gt;karta.boja=Pretvori2(par.first);
        zlj-&gt;karta.vrijednost=par.second;
        if(prethodni==pocetak &amp;&amp; Pretvori1((prethodni-&gt;karta).vrijednost)&gt;Pretvori1(par.second))
        {
            zlj-&gt;sljedeci=prethodni;
            pocetak=zlj;
            kraj-&gt;sljedeci=pocetak;
        }
        else if(privremeni==kraj&amp;&amp;Pretvori1((privremeni-&gt;karta).vrijednost)&lt;Pretvori1(par.second)){
            privremeni-&gt;sljedeci=zlj;
            zlj-&gt;sljedeci=pocetak;
            kraj=zlj;
        }
        else{
        prethodni-&gt;sljedeci=zlj;
        zlj-&gt;sljedeci=privremeni;
        }
        
        a++;
        
    }
}

void UnistiSpil(Cvor* pocetak)
{
    if(pocetak==nullptr)return;
    auto priv=pocetak;
    while(priv-&gt;sljedeci!=nullptr&amp;&amp;priv-&gt;sljedeci!=pocetak)
    {
        auto privremeni=priv;
        priv=priv-&gt;sljedeci;
        delete privremeni;
    }
    delete priv;
    
}

int main ()
{
    try{
     Cvor *Spil=nullptr;
     Spil=KreirajSpil();
    try
    {
<a name="1"></a><font color="#00FF00"><a href="match308-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    int n;
    std::cin&gt;&gt;n;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int broj;
    std::cin&gt;&gt;broj;
   
    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; Red(IzbaciKarteRazbrajanjem(Spil,n,broj));
</font>    
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;((broj&gt;=52)?0:(52-broj))&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    std::cout&lt;&lt;"Pik: ";
    auto tmp(Spil);
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(0))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break;
        if(tmp-&gt;sljedeci==Spil)break;
        tmp=tmp-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Tref: ";
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(1))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break;
        if(tmp-&gt;sljedeci==Spil)break;
         tmp=tmp-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Herc: ";
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(2))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";

        else break;
        if(tmp-&gt;sljedeci==Spil)break;
        tmp=tmp-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Karo: ";
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(3))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break;
        if(tmp-&gt;sljedeci==Spil)break;
         tmp=tmp-&gt;sljedeci;
    }
    
    std::cout&lt;&lt;std::endl&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
    int br1;
    std::cin&gt;&gt;br1;
   VratiPosljednjihNKarata(Spil,Red,br1);
    
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;((broj&gt;=52)?(0+br1):(52-broj+br1))&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    std::cout&lt;&lt;"Pik: ";
    tmp=Spil;
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(0))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break;
        if(tmp-&gt;sljedeci==Spil)break;
        tmp=tmp-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Tref: ";
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(1))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break; 
        if(tmp-&gt;sljedeci==Spil)break;
        tmp=tmp-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Herc: ";
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(2))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break; 
        if(tmp-&gt;sljedeci==Spil)break;
        tmp=tmp-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Karo: ";
    while(Spil!=nullptr)
    {
        if((tmp-&gt;karta).boja==Boje(3))std::cout&lt;&lt;(tmp-&gt;karta).vrijednost&lt;&lt;" ";
        else break; 
        if(tmp-&gt;sljedeci==Spil)break;
<a name="0"></a><font color="#FF0000"><a href="match308-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        tmp=tmp-&gt;sljedeci;
    }
    UnistiSpil(Spil);   
    }
    catch(std::domain_error Izuzetak){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
          UnistiSpil(Spil);  
    }
    catch(std::logic_error Izuzetak){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
          UnistiSpil(Spil);  
    }
    catch(std::range_error Izuzetak){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
          UnistiSpil(Spil);  
</font>    }
    }
    catch(...){}
	return 0;
}
</pre>
</body>
</html>
