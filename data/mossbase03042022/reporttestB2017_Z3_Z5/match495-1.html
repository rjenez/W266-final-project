<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student7540.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student4785.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;iterator&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;stack&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;utility&gt;

std::vector&lt;std::string&gt; ime_karte {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

<a name="2"></a><font color="#0000FF"><a href="match495-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

enum class Boje
{
    Pik, Tref, Herc, Karo
};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    Cvor* sljedeci;
};

bool JeLiKruzna(Cvor* pocetak)
</font>{
    if(pocetak==nullptr) return true;
    auto temp=pocetak-&gt;sljedeci;
    for(int i=0; i&lt;52; i++) {
        if(temp==nullptr) return false;
        if(temp==pocetak) return true;
        temp=temp-&gt;sljedeci;
    }
    return false;
}

int BrojKarata(Cvor *pocetak)
{
    if(pocetak==nullptr) return 0;
    int brojac(0);
    auto temp=pocetak;
    do {
        brojac++;
        temp=temp-&gt;sljedeci;
    } while(temp!=pocetak);
    return brojac;
}

bool ValjanostKarti(Cvor *pocetak)
{
    if(pocetak==nullptr) return true;
    auto temp=pocetak;
    do {
        auto b=temp-&gt;karta.boja;
        if(b!=Boje::Pik &amp;&amp; b!=Boje::Herc &amp;&amp; b!=Boje::Tref &amp;&amp; b!=Boje::Karo) return false;
        auto d=temp-&gt;karta.vrijednost;
        bool ima(false);
        for(int i=0; i&lt;13; i++) {
            if(d==ime_karte[i]) {
                ima=true;
                break;
            }
        }
        if(!ima) return false;
        temp=temp-&gt;sljedeci;
    } while(temp!=pocetak);
    return true;
}

bool ValjanostSteka(std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek){
    while(!stek.empty()){
        auto prvi=stek.top().first;
        if(prvi!="Pik" &amp;&amp; prvi!="Herc" &amp;&amp; prvi!="Karo" &amp;&amp; prvi!="Tref") return false;
        bool ima(false);
        for(int i=0;i&lt;13;i++){
            if(ime_karte[i]==stek.top().second) {
                ima=true;
                break;
            }
        }
        if(!ima) return false;
        stek.pop();
    }
    return true;
}

void IspravnostSpila(Cvor *pocetak)
{
    if(!JeLiKruzna(pocetak)) throw std::logic_error("Neispravna lista!");
    if(pocetak==nullptr) return;
    int br_karata=BrojKarata(pocetak);
    if(br_karata&gt;52) throw std::logic_error("Neispravna lista!");
    if(!ValjanostKarti(pocetak)) throw std::logic_error("Neispravna lista!");
    auto temp=pocetak-&gt;sljedeci;
    auto prethodni=pocetak;
    do {
        int i,j;
        for(i=0; i&lt;13; i++) if(ime_karte[i]==prethodni-&gt;karta.vrijednost) break;
        for(j=0; j&lt;13; j++) if(ime_karte[j]==temp-&gt;karta.vrijednost) break;
        if(prethodni-&gt;karta.boja&gt;temp-&gt;karta.boja) throw std::logic_error("Neispravna lista!");
        if(prethodni-&gt;karta.boja==temp-&gt;karta.boja &amp;&amp; i&gt;j)  throw std::logic_error("Neispravna lista!");
        temp=temp-&gt;sljedeci;
    } while(temp!=pocetak);
}

Cvor* KreirajSpil()
{
    Cvor *pocetak(nullptr), *prethodni;
    for(int i=0; i&lt;13; i++) {
        Cvor *novi(new Cvor {{Boje::Pik,ime_karte[i]},nullptr});
        if(!pocetak) pocetak=novi;
        else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
    }
    for(int i=0; i&lt;13; i++) {
        Cvor *novi(new Cvor {{Boje::Tref,ime_karte[i]},nullptr});
        prethodni-&gt;sljedeci=novi;
        prethodni=novi;
    }
    for(int i=0; i&lt;13; i++) {
        Cvor *novi(new Cvor {{Boje::Herc,ime_karte[i]},nullptr});
        prethodni-&gt;sljedeci=novi;
        prethodni=novi;
    }
    for(int i=0; i&lt;13; i++) {
        Cvor *novi(new Cvor {{Boje::Karo,ime_karte[i]},nullptr});
        prethodni-&gt;sljedeci=novi;
        prethodni=novi;
        if(i==12) prethodni-&gt;sljedeci=pocetak;
    }
    return pocetak;
}

void UnistiSpil(Cvor* pocetak)
{
    if(pocetak==nullptr) return;
    auto temp=pocetak;
    auto a=temp;
    if(temp!=nullptr) {
        do {
            temp=temp-&gt;sljedeci;
            a=temp-&gt;sljedeci;
        } while(a!=pocetak);
        temp-&gt;sljedeci=nullptr;
    }
    Cvor* prethodni(nullptr);
    for(auto p=pocetak; p!=nullptr; p=p-&gt;sljedeci) {
        delete prethodni;
        prethodni=p;
    }
    delete prethodni;
}

void IzbaciKarte(Cvor *&amp;pocetak, std::multimap&lt;Boje,std::string&gt; &amp;izbaci)
{
    try {
        IspravnostSpila(pocetak);
    } catch(std::logic_error izuzetak) {
        throw;
    }
    for(auto it=izbaci.begin(); it!=izbaci.end();) {
        bool nasao(false);
        Cvor* temp=pocetak, *prethodni(nullptr);
        do {
            if(temp-&gt;karta.boja==it-&gt;first &amp;&amp; temp-&gt;karta.vrijednost==it-&gt;second) {
                if(pocetak-&gt;sljedeci==pocetak &amp;&amp; prethodni==nullptr) {
                    pocetak=nullptr;
                    delete temp;
                    return;
                } else if(temp==pocetak) {
                    prethodni=pocetak;
                    while(prethodni-&gt;sljedeci!=pocetak) prethodni=prethodni-&gt;sljedeci;
                    pocetak=temp-&gt;sljedeci;
                    prethodni-&gt;sljedeci=pocetak;
                    delete temp;
                } else {
                    prethodni-&gt;sljedeci=temp-&gt;sljedeci;
                    delete temp;
                }
                it=izbaci.erase(it);
                nasao=true;
                break;
            }
            prethodni=temp;
            temp=temp-&gt;sljedeci;
        } while(temp!=pocetak);
<a name="0"></a><font color="#FF0000"><a href="match495-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        if(!nasao) it++;
    }
}

std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor *&amp;pocetak, const short int &amp;r, const int &amp;b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    try {
        IspravnostSpila(pocetak);
    } catch(std::logic_error izuzetak) {
        throw;
    }
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek;
    int izbaceno(0);
    Cvor* temp=pocetak, *prethodni(nullptr);
    while(izbaceno!=b) {
        if(pocetak==nullptr) return stek;
        for(int i=0; i&lt;r-1; i++) {
            prethodni=temp;
            temp=temp-&gt;sljedeci;
        }
        std::string s;
        Boje b=temp-&gt;karta.boja;
        if(b==Boje::Pik) s="Pik";
        else if(b==Boje::Tref) s="Tref";
        else if(b==Boje::Herc) s="Herc";
        else s="Karo";
        stek.push({s,temp-&gt;karta.vrijednost});
        if(pocetak-&gt;sljedeci==pocetak) {
            pocetak=nullptr;
            delete temp;
            return stek;
        } else if(temp==pocetak) {
            prethodni=pocetak;
            while(prethodni-&gt;sljedeci!=pocetak) prethodni=prethodni-&gt;sljedeci;
            pocetak=temp-&gt;sljedeci;
            prethodni-&gt;sljedeci=pocetak;
            prethodni=nullptr;
            auto a=temp;
            temp=temp-&gt;sljedeci;
            delete a;
        } else {
            prethodni-&gt;sljedeci=temp-&gt;sljedeci;
            auto a=temp;
            temp=temp-&gt;sljedeci;
            delete a;
        }
        izbaceno++;
    }
<a name="3"></a><font color="#00FFFF"><a href="match495-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    return stek;
}

void VratiPosljednjihNKarata(Cvor *&amp;pocetak,std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;stek, int n)
</font>{
    int velicina_steka=stek.size();
    if(n&gt;velicina_steka) throw std::range_error("Nedovoljno karata u steku!");
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(!ValjanostSteka(stek)) throw std::logic_error("Neispravne karte!");
    for(int i=0; i&lt;n ; i++) {
        std::string s=stek.top().first;
        Boje b;
        if(s=="Pik") b=Boje::Pik;
        else if(s=="Tref") b=Boje::Tref;
        else if(s=="Herc") b=Boje::Herc;
        else b=Boje::Karo;
        Cvor *temp=pocetak,*prethodni(nullptr);
        bool uspjesno(false);
        bool duplikat(false);
        do {
            if(pocetak==nullptr) {
                Cvor *novi(new Cvor {{b,stek.top().second},nullptr});
                pocetak=novi;
                novi-&gt;sljedeci=pocetak;
                temp=pocetak;
                uspjesno=true;
                break;
            }
            if(temp-&gt;karta.boja&lt;b) {
                prethodni=temp;
                temp=temp-&gt;sljedeci;
                continue;
            }
            int i,j;
            for(i=0; i&lt;13; i++) if(ime_karte[i]==temp-&gt;karta.vrijednost) break;
            for(j=0; j&lt;13; j++) if(ime_karte[j]==stek.top().second) break;
            if(temp-&gt;karta.boja==b &amp;&amp; i&lt;j) {
                prethodni=temp;
                temp=temp-&gt;sljedeci;
                continue;
            }
            if(temp-&gt;karta.boja==b &amp;&amp; i==j){
                duplikat=true;
                break;
            }
            if(temp==pocetak) {
                Cvor *novi(new Cvor {{b,stek.top().second},nullptr});
                while(temp-&gt;sljedeci!=pocetak)temp=temp-&gt;sljedeci;
                temp-&gt;sljedeci=novi;
                novi-&gt;sljedeci=pocetak;
                pocetak=novi;
                uspjesno=true;
                break;
            }

            Cvor *novi(new Cvor {{b,stek.top().second},nullptr});
            prethodni-&gt;sljedeci=novi;
            novi-&gt;sljedeci=temp;
            prethodni=temp;
            temp=temp-&gt;sljedeci;
            uspjesno=true;
            break;
        } while(temp!=pocetak);
        if(!duplikat &amp;&amp; !uspjesno) {
            Cvor *novi(new Cvor {{b,stek.top().second},nullptr});
            prethodni-&gt;sljedeci=novi;
            novi-&gt;sljedeci=pocetak;
        }
        stek.pop();
    }
}

void IspisiSpil(Cvor* pocetak)
{
    Cvor* temp=pocetak;
    int velicina=BrojKarata(pocetak);
<a name="4"></a><font color="#FF00FF"><a href="match495-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;velicina&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    temp=pocetak;
    std::cout&lt;&lt;"Pik: ";
</font>    if(pocetak!=nullptr &amp;&amp; temp-&gt;karta.boja==Boje::Pik) {
        do {
            std::cout&lt;&lt;temp-&gt;karta.vrijednost&lt;&lt;" ";
            temp=temp-&gt;sljedeci;
        } while(temp!=pocetak &amp;&amp; temp-&gt;karta.boja==Boje::Pik);
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Tref: ";
    if(pocetak!=nullptr &amp;&amp; temp-&gt;karta.boja==Boje::Tref) {
        do {
            std::cout&lt;&lt;temp-&gt;karta.vrijednost&lt;&lt;" ";
            temp=temp-&gt;sljedeci;
        } while(temp!=pocetak &amp;&amp; temp-&gt;karta.boja==Boje::Tref);
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Herc: ";
    if(pocetak!=nullptr &amp;&amp; temp-&gt;karta.boja==Boje::Herc) {
        do {
            std::cout&lt;&lt;temp-&gt;karta.vrijednost&lt;&lt;" ";
            temp=temp-&gt;sljedeci;
        } while(temp!=pocetak &amp;&amp; temp-&gt;karta.boja==Boje::Herc);
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Karo: ";
    if(pocetak!=nullptr &amp;&amp; temp-&gt;karta.boja==Boje::Karo) {
        do {
            std::cout&lt;&lt;temp-&gt;karta.vrijednost&lt;&lt;" ";
            temp=temp-&gt;sljedeci;
        } while(temp!=pocetak &amp;&amp; temp-&gt;karta.boja==Boje::Karo);
    }
    std::cout&lt;&lt;std::endl;
}


int main ()
{
    Cvor* spil(nullptr);
    try {
<a name="1"></a><font color="#00FF00"><a href="match495-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        spil=KreirajSpil();
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        short int r;
        std::cin&gt;&gt;r;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        int b;
        std::cin&gt;&gt;b;
</font>        auto stek=IzbaciKarteRazbrajanjem(spil, r,b);
        IspisiSpil(spil);
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin&gt;&gt;n;
        VratiPosljednjihNKarata(spil,stek,n);
        IspisiSpil(spil);
        UnistiSpil(spil);
    } catch(std::logic_error e) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
        UnistiSpil(spil);
    } catch(std::range_error e) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
        UnistiSpil(spil);
    }
    return 0;
}
</pre>
</body>
</html>
