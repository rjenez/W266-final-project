<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student7537.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student7537.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 5
/*#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;stack&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

struct Karta{
  Boje boja;
  std::string vrijednost;
};

typedef std::multimap&lt;Boje, std::string&gt; MultiMapa;
typedef std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; Stek;

struct Cvor{
  Karta karta;
  Cvor *sljedeci=nullptr;
};

bool NeispravanSpil(Cvor *it)
{
    auto sljedeci(it); auto trenutni(it);
    auto prethodni(it);
    sljedeci=it-&gt;sljedeci; int br(0);
    while(trenutni-&gt;sljedeci!=it) {
        if(trenutni-&gt;karta.boja&gt;sljedeci-&gt;karta.boja) {
            return true;
        } else {
            if(trenutni-&gt;karta.boja==sljedeci-&gt;karta.boja) {
                if(trenutni-&gt;karta.vrijednost=="10") {
                    if(sljedeci-&gt;karta.vrijednost!="J" &amp;&amp; sljedeci-&gt;karta.vrijednost!="Q" &amp;&amp; sljedeci-&gt;karta.vrijednost!="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                        return true;
                    }
                } else if(trenutni-&gt;karta.vrijednost=="J" &amp;&amp; sljedeci-&gt;karta.vrijednost!="Q" &amp;&amp; sljedeci-&gt;karta.vrijednost!="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="Q" &amp;&amp; sljedeci-&gt;karta.vrijednost!="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost&gt;="2" &amp;&amp; trenutni-&gt;karta.vrijednost&lt;="9" &amp;&amp; sljedeci-&gt;karta.vrijednost&gt;="2"
                          &amp;&amp; sljedeci-&gt;karta.vrijednost&lt;="9" &amp;&amp; trenutni-&gt;karta.vrijednost&gt;sljedeci-&gt;karta.vrijednost) {
                    return true;
                }
            }
            if(br!=0 &amp;&amp; prethodni-&gt;karta.boja==trenutni-&gt;karta.boja) {
                if(trenutni-&gt;karta.vrijednost=="10") {
                    if(!(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9")) {
                        return true;
                    }
                } else if(trenutni-&gt;karta.vrijednost=="J" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="Q" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10"
                          &amp;&amp; prethodni-&gt;karta.vrijednost!="J") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="K" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10"
                          &amp;&amp; prethodni-&gt;karta.vrijednost!="J" &amp;&amp; prethodni-&gt;karta.vrijednost!="Q") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="A" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10"
                          &amp;&amp; prethodni-&gt;karta.vrijednost!="J" &amp;&amp; prethodni-&gt;karta.vrijednost!="Q" &amp;&amp; prethodni-&gt;karta.vrijednost!="K") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost&gt;="2" &amp;&amp; trenutni-&gt;karta.vrijednost&lt;="9" &amp;&amp; prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9"
                          &amp;&amp; trenutni-&gt;karta.vrijednost&lt;prethodni-&gt;karta.vrijednost) {
                    return true;
                }
            }
        }
        sljedeci=sljedeci-&gt;sljedeci; trenutni=trenutni-&gt;sljedeci;
        if(br!=0) prethodni=prethodni-&gt;sljedeci;
        br++;
    }
    return false;
}

Cvor *PostaviBoju(Boje boja, Cvor *it)
{
    for(int i=2; i&lt;=10; i++) {
        it-&gt;karta.boja=boja;
        if(i!=10) {
            it-&gt;karta.vrijednost=i+'0';
        } else it-&gt;karta.vrijednost="10";
        it=it-&gt;sljedeci;
    }
    for(int i=0; i&lt;4; i++) {
        it-&gt;karta.boja=boja;
        if(i==0)
            it-&gt;karta.vrijednost="J";
        else if(i==1)
            it-&gt;karta.vrijednost="Q";
        else if(i==2)
            it-&gt;karta.vrijednost="K";
        else if(i==3)
            it-&gt;karta.vrijednost="A";
        it=it-&gt;sljedeci;
    }
    return it;
}

Cvor *StvoriListu(){
    Cvor *pocetak(nullptr), *prethodni;
    for(int i=0; i&lt;52; i++){
        Cvor *novi(new Cvor{});
        novi-&gt;karta.vrijednost=i+'0';
        if(!pocetak) pocetak=novi;
        else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
    }
    prethodni-&gt;sljedeci=pocetak;
    
    return pocetak;
}

Cvor *KreirajSpil(){
  Cvor *pok(StvoriListu()), *it(pok);
  it=PostaviBoju(Boje::Pik, it);
  it=PostaviBoju(Boje::Tref, it);
  it=PostaviBoju(Boje::Herc, it);
  it=PostaviBoju(Boje::Karo, it);

  return pok;
}

int VelicinaListe(Cvor *pok){
    auto it(pok); int br(0);
    while(it-&gt;sljedeci!=pok){
        br++;
        it=it-&gt;sljedeci;
    }
    br++;
    return br;
}

Cvor *ZadnjiClan(Cvor *pok){
    auto it(pok);
    while(it-&gt;sljedeci!=pok){
        it=it-&gt;sljedeci;
    }
    return it;
}

void IzbaciKarte(Cvor *pok, MultiMapa &amp;mm)
{
    if(VelicinaListe(pok)&gt;52 || NeispravanSpil(pok))
        throw std::logic_error("Neispravna lista!");
    int br(0);
    auto itm(mm.begin());
    for(int i=0; i&lt;mm.size(); i++) {
        auto trenutni(pok);
        Cvor *prethodni(ZadnjiClan(pok)), *sljedeci(pok);
        sljedeci=sljedeci-&gt;sljedeci;
        while(trenutni-&gt;sljedeci!=pok) {
            if(trenutni-&gt;karta.boja==itm-&gt;first &amp;&amp; trenutni-&gt;karta.vrijednost==itm-&gt;second) {
                delete trenutni;
                prethodni-&gt;sljedeci=sljedeci; 
                itm=mm.erase(itm);
                br=1;
                break;
            }
            prethodni=prethodni-&gt;sljedeci;
            trenutni=trenutni-&gt;sljedeci; 
            sljedeci=sljedeci-&gt;sljedeci;
        }
        if(br==0)
            itm++;
        br=0;
    }
    if(VelicinaListe(pok)==0) pok=nullptr;
}

Stek IzbaciKarteRazbrajanjem(Cvor *&amp;pok, short int r, int b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(VelicinaListe(pok)&gt;52 || NeispravanSpil(pok))
        throw std::logic_error("Neispravna lista!");
    Stek final;
    int brr(0), brb(0);
    auto prethodni(ZadnjiClan(pok));
    auto prethodni_prethodnog(prethodni);
    for(auto it=pok; it-&gt;sljedeci!=pok; it=it-&gt;sljedeci) {
        while(brr!=r) {
            if(brr!=0)
                prethodni_prethodnog=prethodni_prethodnog-&gt;sljedeci;  
            prethodni=prethodni-&gt;sljedeci;
            brr++;
            it=it-&gt;sljedeci;
        }
        auto sljedeci(it);
        it=prethodni;
        std::pair&lt;std::string, std::string&gt; p;
        p.second=it-&gt;karta.vrijednost;
        if(Boje::Pik==it-&gt;karta.boja)
            p.first="Pik";
        else if(Boje::Tref==it-&gt;karta.boja)
            p.first="Tref";
        else if(Boje::Herc==it-&gt;karta.boja)
            p.first="Herc";
        else if(Boje::Karo==it-&gt;karta.boja)
            p.first="Karo";
        final.push(p);
        delete it;
        prethodni_prethodnog-&gt;sljedeci=sljedeci;
        it=prethodni_prethodnog;
        prethodni=it;
        if(VelicinaListe(pok)==0)
            pok=nullptr;
        if(pok==nullptr) return final;   
        brr=0;
        brb++;
        if(brb==b)
            return final;
    }
    return final;
}

std::pair&lt;Boje, std::string&gt; PretvoriUListu(std::pair&lt;std::string, std::string&gt; p)
{
    std::pair&lt;Boje, std::string&gt; p1;
    p1.second=p.second;
    if(p.first=="Pik")
        p1.first=Boje::Pik;
    else if(p.first=="Tref")
        p1.first=Boje::Tref;
    else if(p.first=="Herc")
        p1.first=Boje::Herc;
    else if(p.first=="Karo")
        p1.first=Boje::Karo;
    return p1;
}

bool NeispravanRed(Stek red)
{
    while(!red.empty()) {
        auto p1(red.top());
        auto p(PretvoriUListu(p1));
        if(p.first!=Boje::Pik &amp;&amp; p.first!=Boje::Karo &amp;&amp; p.first!=Boje::Tref &amp;&amp; p.first!=Boje::Herc)
            return true;
        else if(p.second!="A" &amp;&amp; p.second!="J" &amp;&amp; p.second!="K" &amp;&amp; p.second!="Q"
                &amp;&amp; !(p.second&gt;="2" &amp;&amp; p.second&lt;="9") &amp;&amp; p.second!="10")
            return true;
        red.pop();
    }
    return false;
}

void VratiPosljednjihNKarata(Cvor *&amp;pok, Stek &amp;red, int n)
{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red.size()) throw std::range_error("Nedovoljno karata u steku!");
    if(VelicinaListe(pok)&gt;52 || NeispravanSpil(pok))
        throw std::logic_error("Neispravna lista!");
    if(NeispravanRed(red))
        throw std::logic_error("Neispravne karte!");
    if(pok==nullptr){
        Cvor *prethodni;
        while(!red.empty()){
            auto p(red.top());
            auto p1(PretvoriUListu(p));
            Cvor *novi(new Cvor);
            if(!pok){
                pok=novi;
                pok-&gt;karta.boja=p1.first; pok-&gt;karta.vrijednost=p1.second;
            } 
            else{
                prethodni-&gt;sljedeci=novi;
                prethodni-&gt;karta.boja=p1.first; prethodni-&gt;karta.vrijednost=p1.second;
            }
            prethodni=novi;
            red.pop();
        }
        prethodni-&gt;sljedeci=pok;
    }    
    else{    
    for(int i=0; i&lt;n; i++) {
        auto p(red.top());
        auto p1(PretvoriUListu(p));
        int br(0); auto it(pok); auto prethodni(pok);
        for(it=pok; prethodni-&gt;sljedeci!=pok; it=it-&gt;sljedeci) {
            if(br==0) prethodni=ZadnjiClan(pok);
            if(p1.second=="A") {
                if(it-&gt;karta.boja&gt;p1.first &amp;&amp; ((prethodni-&gt;karta.vrijednost!="A" &amp;&amp; prethodni-&gt;karta.boja==p1.first) 
                  || prethodni-&gt;karta.boja!=p1.first)){
                    br=0;
                    break;
                } 
            } else if(p1.second=="K") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; it-&gt;karta.vrijednost=="A") || it-&gt;karta.boja&gt;p1.first) 
                   &amp;&amp; ((prethodni-&gt;karta.vrijednost!="K" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(p1.second=="J") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; (it-&gt;karta.vrijednost&gt;p1.second || it-&gt;karta.vrijednost=="A")) || it-&gt;karta.boja&gt;p1.first) 
                  &amp;&amp; ((prethodni-&gt;karta.vrijednost!="J" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(p1.second=="Q") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; (it-&gt;karta.vrijednost=="A" || it-&gt;karta.vrijednost=="K")) || it-&gt;karta.boja&gt;p1.first) 
                   &amp;&amp; ((prethodni-&gt;karta.vrijednost!="Q" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(p1.second=="10") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; (it-&gt;karta.vrijednost=="J" || it-&gt;karta.vrijednost=="Q" || it-&gt;karta.vrijednost=="K" || it-&gt;karta.vrijednost=="A"))
                    || it-&gt;karta.boja&gt;p1.first) &amp;&amp; ((prethodni-&gt;karta.vrijednost!="10" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(it-&gt;karta.boja==p1.first &amp;&amp; p1.second&gt;="0" &amp;&amp; p1.second&lt;="9"){ 
                  if((it-&gt;karta.vrijednost&gt;p1.second || it-&gt;karta.vrijednost=="10") 
                     &amp;&amp; ((prethodni-&gt;karta.vrijednost!=p1.second &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                      br=0;
                      break;
                  }
             }else if(it-&gt;karta.boja==p1.first &amp;&amp; it-&gt;karta.vrijednost==p1.second) {
                br=1;
                break;
            }
            if(it-&gt;sljedeci!=pok)
                br=1;
            else br=0;    
            prethodni=prethodni-&gt;sljedeci;
        }
        if(br==0){
           auto novi(new Cvor);
           novi-&gt;karta.boja=p1.first; novi-&gt;karta.vrijednost=p1.second;
           novi-&gt;sljedeci=it;
           prethodni-&gt;sljedeci=novi;
        }
        red.pop();
    }
    }
}

void UnistiSpil(Cvor *pok){
    if(pok){
        Cvor *prethodni(nullptr); auto p(pok);
        for(p=pok; p-&gt;sljedeci!=pok; p=p-&gt;sljedeci){
            delete prethodni;
            prethodni=p;
        }
        delete prethodni; delete p;
    }
}

int main ()
{
    int r, b;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; b;
    auto s(KreirajSpil());
    try {
        auto s1(IzbaciKarteRazbrajanjem(s, r, b));
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; VelicinaListe(s) &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pik: ";
        auto it(s);
        while(Boje::Pik==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; "\nTref: ";
        while(Boje::Tref==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; "\nHerc: ";
        while(Boje::Herc==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Karo: ";
        while(Boje::Karo==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        int n;
        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; n;
        VratiPosljednjihNKarata(s, s1, n);
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; VelicinaListe(s) &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pik: ";
        it=s;
        while(Boje::Pik==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Tref: ";
        while(Boje::Tref==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Herc: ";
        while(Boje::Herc==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Karo: ";
        while(Boje::Karo==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
    } catch(std::domain_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    } catch(std::range_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    } catch(std::logic_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    }
    
    UnistiSpil(s);

    return 0;
}*/


#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;stack&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

struct Karta{
  Boje boja;
  std::string vrijednost;
};

typedef std::multimap&lt;Boje, std::string&gt; MultiMapa;
typedef std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; Stek;

struct Cvor{
  Karta karta;
  Cvor *sljedeci=nullptr;
};

bool NeispravanSpil(Cvor *it)
{
    auto sljedeci(it); auto trenutni(it);
    auto prethodni(it);
    sljedeci=it-&gt;sljedeci; int br(0);
<a name="2"></a><font color="#0000FF"><a href="match462-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    while(trenutni-&gt;sljedeci!=it) {
        if(trenutni-&gt;karta.boja&gt;sljedeci-&gt;karta.boja) {
            return true;
        } else {
            if(trenutni-&gt;karta.boja==sljedeci-&gt;karta.boja) {
</font>                if(trenutni-&gt;karta.vrijednost=="10") {
                    if(sljedeci-&gt;karta.vrijednost!="J" &amp;&amp; sljedeci-&gt;karta.vrijednost!="Q" &amp;&amp; sljedeci-&gt;karta.vrijednost!="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                        return true;
                    }
                } else if(trenutni-&gt;karta.vrijednost=="J" &amp;&amp; sljedeci-&gt;karta.vrijednost!="Q" &amp;&amp; sljedeci-&gt;karta.vrijednost!="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="Q" &amp;&amp; sljedeci-&gt;karta.vrijednost!="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="K" &amp;&amp; sljedeci-&gt;karta.vrijednost!="A") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost&gt;="2" &amp;&amp; trenutni-&gt;karta.vrijednost&lt;="9" &amp;&amp; sljedeci-&gt;karta.vrijednost&gt;="2"
                          &amp;&amp; sljedeci-&gt;karta.vrijednost&lt;="9" &amp;&amp; trenutni-&gt;karta.vrijednost&gt;sljedeci-&gt;karta.vrijednost) {
                    return true;
                }
            }
            if(br!=0 &amp;&amp; prethodni-&gt;karta.boja==trenutni-&gt;karta.boja) {
                if(trenutni-&gt;karta.vrijednost=="10") {
                    if(!(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9")) {
                        return true;
                    }
                } else if(trenutni-&gt;karta.vrijednost=="J" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="Q" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10"
                          &amp;&amp; prethodni-&gt;karta.vrijednost!="J") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="K" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10"
                          &amp;&amp; prethodni-&gt;karta.vrijednost!="J" &amp;&amp; prethodni-&gt;karta.vrijednost!="Q") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost=="A" &amp;&amp; !(prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9") &amp;&amp; prethodni-&gt;karta.vrijednost!="10"
                          &amp;&amp; prethodni-&gt;karta.vrijednost!="J" &amp;&amp; prethodni-&gt;karta.vrijednost!="Q" &amp;&amp; prethodni-&gt;karta.vrijednost!="K") {
                    return true;
                } else if(trenutni-&gt;karta.vrijednost&gt;="2" &amp;&amp; trenutni-&gt;karta.vrijednost&lt;="9" &amp;&amp; prethodni-&gt;karta.vrijednost&gt;="2" &amp;&amp; prethodni-&gt;karta.vrijednost&lt;="9"
                          &amp;&amp; trenutni-&gt;karta.vrijednost&lt;prethodni-&gt;karta.vrijednost) {
                    return true;
                }
            }
        }
        sljedeci=sljedeci-&gt;sljedeci; trenutni=trenutni-&gt;sljedeci;
        if(br!=0) prethodni=prethodni-&gt;sljedeci;
        br++;
    }
    return false;
}

Cvor *PostaviBoju(Boje boja, Cvor *it)
{
    for(int i=2; i&lt;=10; i++) {
        it-&gt;karta.boja=boja;
        if(i!=10) {
            it-&gt;karta.vrijednost=i+'0';
        } else it-&gt;karta.vrijednost="10";
        it=it-&gt;sljedeci;
    }
    for(int i=0; i&lt;4; i++) {
        it-&gt;karta.boja=boja;
        if(i==0)
            it-&gt;karta.vrijednost="J";
        else if(i==1)
            it-&gt;karta.vrijednost="Q";
        else if(i==2)
            it-&gt;karta.vrijednost="K";
        else if(i==3)
            it-&gt;karta.vrijednost="A";
        it=it-&gt;sljedeci;
    }
    return it;
}

Cvor *StvoriListu(){
    Cvor *pocetak(nullptr), *prethodni;
    for(int i=0; i&lt;52; i++){
        Cvor *novi(new Cvor{});
        novi-&gt;karta.vrijednost=i+'0';
        if(!pocetak) pocetak=novi;
        else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
    }
    prethodni-&gt;sljedeci=pocetak;
    
    return pocetak;
}

Cvor *KreirajSpil(){
  Cvor *pok(StvoriListu()), *it(pok);
  it=PostaviBoju(Boje::Pik, it);
  it=PostaviBoju(Boje::Tref, it);
  it=PostaviBoju(Boje::Herc, it);
  it=PostaviBoju(Boje::Karo, it);

  return pok;
}

int VelicinaListe(Cvor *pok){
    auto it(pok); int br(0);
    while(it-&gt;sljedeci!=pok){
        br++;
        it=it-&gt;sljedeci;
    }
    br++;
    return br;
}

Cvor *ZadnjiClan(Cvor *pok){
    auto it(pok);
    while(it-&gt;sljedeci!=pok){
        it=it-&gt;sljedeci;
    }
    return it;
}

void IzbaciKarte(Cvor *pok, MultiMapa &amp;mm)
{
    if(VelicinaListe(pok)&gt;52 || NeispravanSpil(pok))
        throw std::logic_error("Neispravna lista!");
    int br(0);
    auto itm(mm.begin());
    for(int i=0; i&lt;mm.size(); i++) {
        auto trenutni(pok);
        Cvor *prethodni(ZadnjiClan(pok)), *sljedeci(pok);
        sljedeci=sljedeci-&gt;sljedeci;
        while(trenutni-&gt;sljedeci!=pok) {
            if(trenutni-&gt;karta.boja==itm-&gt;first &amp;&amp; trenutni-&gt;karta.vrijednost==itm-&gt;second) {
                delete trenutni;
                prethodni-&gt;sljedeci=sljedeci; 
                itm=mm.erase(itm);
                br=1;
                break;
            }
            prethodni=prethodni-&gt;sljedeci;
            trenutni=trenutni-&gt;sljedeci; 
            sljedeci=sljedeci-&gt;sljedeci;
        }
        if(br==0)
            itm++;
        br=0;
    }
    if(VelicinaListe(pok)==0) pok=nullptr;
}

Stek IzbaciKarteRazbrajanjem(Cvor *&amp;pok, short int r, int b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(VelicinaListe(pok)&gt;52 || NeispravanSpil(pok))
        throw std::logic_error("Neispravna lista!");
    Stek final;
    int brr(0), brb(0);
    auto prethodni(ZadnjiClan(pok));
    auto prethodni_prethodnog(prethodni);
    for(auto it=pok; it-&gt;sljedeci!=pok; it=it-&gt;sljedeci) {
        while(brr!=r) {
            if(brr!=0)
                prethodni_prethodnog=prethodni_prethodnog-&gt;sljedeci;  
            prethodni=prethodni-&gt;sljedeci;
            brr++;
            it=it-&gt;sljedeci;
        }
        auto sljedeci(it);
        it=prethodni;
        std::pair&lt;std::string, std::string&gt; p;
        p.second=it-&gt;karta.vrijednost;
        if(Boje::Pik==it-&gt;karta.boja)
            p.first="Pik";
        else if(Boje::Tref==it-&gt;karta.boja)
            p.first="Tref";
        else if(Boje::Herc==it-&gt;karta.boja)
            p.first="Herc";
        else if(Boje::Karo==it-&gt;karta.boja)
            p.first="Karo";
        final.push(p);
        delete it;
        prethodni_prethodnog-&gt;sljedeci=sljedeci;
        it=prethodni_prethodnog;
        prethodni=it;
        if(VelicinaListe(pok)==0)
            pok=nullptr;
        if(pok==nullptr) return final;   
        brr=0;
        brb++;
        if(brb==b)
            return final;
    }
    return final;
}

std::pair&lt;Boje, std::string&gt; PretvoriUListu(std::pair&lt;std::string, std::string&gt; p)
{
    std::pair&lt;Boje, std::string&gt; p1;
    p1.second=p.second;
    if(p.first=="Pik")
        p1.first=Boje::Pik;
    else if(p.first=="Tref")
        p1.first=Boje::Tref;
    else if(p.first=="Herc")
        p1.first=Boje::Herc;
    else if(p.first=="Karo")
        p1.first=Boje::Karo;
    return p1;
}

bool NeispravanRed(Stek red)
{
    while(!red.empty()) {
        auto p1(red.top());
        auto p(PretvoriUListu(p1));
        if(p.first!=Boje::Pik &amp;&amp; p.first!=Boje::Karo &amp;&amp; p.first!=Boje::Tref &amp;&amp; p.first!=Boje::Herc)
            return true;
        else if(p.second!="A" &amp;&amp; p.second!="J" &amp;&amp; p.second!="K" &amp;&amp; p.second!="Q"
                &amp;&amp; !(p.second&gt;="2" &amp;&amp; p.second&lt;="9") &amp;&amp; p.second!="10")
            return true;
        red.pop();
    }
    return false;
}

void VratiPosljednjihNKarata(Cvor *&amp;pok, Stek &amp;red,const int &amp;n)
{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red.size()) throw std::range_error("Nedovoljno karata u steku!");
    if(VelicinaListe(pok)&gt;52 || NeispravanSpil(pok))
        throw std::logic_error("Neispravna lista!");
    if(NeispravanRed(red))
        throw std::logic_error("Neispravne karte!");
    if(pok==nullptr){
        Cvor *prethodni;
        while(!red.empty()){
            auto p(red.top());
            auto p1(PretvoriUListu(p));
            Cvor *novi(new Cvor);
            if(!pok){
                pok=novi;
                pok-&gt;karta.boja=p1.first; pok-&gt;karta.vrijednost=p1.second;
            } 
            else{
                prethodni-&gt;sljedeci=novi;
                prethodni-&gt;karta.boja=p1.first; prethodni-&gt;karta.vrijednost=p1.second;
            }
            prethodni=novi;
            red.pop();
        }
        prethodni-&gt;sljedeci=pok;
    }    
    else{    
    for(int i=0; i&lt;n; i++) {
        auto p(red.top());
        auto p1(PretvoriUListu(p));
        int br(0); auto it(pok); auto prethodni(pok);
        for(it=pok; prethodni-&gt;sljedeci!=pok; it=it-&gt;sljedeci) {
            if(br==0) prethodni=ZadnjiClan(pok);
            if(p1.second=="A") {
                if(it-&gt;karta.boja&gt;p1.first &amp;&amp; ((prethodni-&gt;karta.vrijednost!="A" &amp;&amp; prethodni-&gt;karta.boja==p1.first) 
                  || prethodni-&gt;karta.boja!=p1.first)){
                    br=0;
                    break;
                } 
            } else if(p1.second=="K") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; it-&gt;karta.vrijednost=="A") || it-&gt;karta.boja&gt;p1.first) 
                   &amp;&amp; ((prethodni-&gt;karta.vrijednost!="K" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(p1.second=="J") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; (it-&gt;karta.vrijednost&gt;p1.second || it-&gt;karta.vrijednost=="A")) || it-&gt;karta.boja&gt;p1.first) 
                  &amp;&amp; ((prethodni-&gt;karta.vrijednost!="J" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(p1.second=="Q") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; (it-&gt;karta.vrijednost=="A" || it-&gt;karta.vrijednost=="K")) || it-&gt;karta.boja&gt;p1.first) 
                   &amp;&amp; ((prethodni-&gt;karta.vrijednost!="Q" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(p1.second=="10") {
                if(((it-&gt;karta.boja==p1.first &amp;&amp; (it-&gt;karta.vrijednost=="J" || it-&gt;karta.vrijednost=="Q" || it-&gt;karta.vrijednost=="K" || it-&gt;karta.vrijednost=="A"))
                    || it-&gt;karta.boja&gt;p1.first) &amp;&amp; ((prethodni-&gt;karta.vrijednost!="10" &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                    br=0;
                    break;
                }
            } else if(it-&gt;karta.boja==p1.first &amp;&amp; p1.second&gt;="0" &amp;&amp; p1.second&lt;="9"){ 
                  if((it-&gt;karta.vrijednost&gt;p1.second || it-&gt;karta.vrijednost=="10") 
                     &amp;&amp; ((prethodni-&gt;karta.vrijednost!=p1.second &amp;&amp; prethodni-&gt;karta.boja==p1.first) || prethodni-&gt;karta.boja!=p1.first)) {
                      br=0;
                      break;
                  }
             }else if(it-&gt;karta.boja==p1.first &amp;&amp; it-&gt;karta.vrijednost==p1.second) {
                br=1;
                break;
            }
            if(it-&gt;sljedeci!=pok)
                br=1;
            else br=0;    
            prethodni=prethodni-&gt;sljedeci;
        }
        if(br==0){
           auto novi(new Cvor);
           novi-&gt;karta.boja=p1.first; novi-&gt;karta.vrijednost=p1.second;
           novi-&gt;sljedeci=it;
           prethodni-&gt;sljedeci=novi;
        }
        red.pop();
    }
    }
}

void UnistiSpil(Cvor *pok){
    if(pok){
        Cvor *prethodni(nullptr); auto p(pok);
        for(p=pok; p-&gt;sljedeci!=pok; p=p-&gt;sljedeci){
            delete prethodni;
            prethodni=p;
        }
        delete prethodni; delete p;
    }
}

int main ()
{
    int r, b;
<a name="3"></a><font color="#00FFFF"><a href="match462-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; b;
    auto s(KreirajSpil());
</font>    try {
        auto s1(IzbaciKarteRazbrajanjem(s, r, b));
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; VelicinaListe(s) &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pik: ";
        auto it(s);
        while(Boje::Pik==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; "\nTref: ";
        while(Boje::Tref==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; "\nHerc: ";
        while(Boje::Herc==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Karo: ";
        while(Boje::Karo==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match462-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        int n;
        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; n;
        VratiPosljednjihNKarata(s, s1, n);
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; VelicinaListe(s) &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Pik: ";
        it=s;
        while(Boje::Pik==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Tref: ";
        while(Boje::Tref==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Herc: ";
        while(Boje::Herc==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl &lt;&lt; "Karo: ";
        while(Boje::Karo==it-&gt;karta.boja) {
            std::cout &lt;&lt; it-&gt;karta.vrijednost &lt;&lt; " ";
            it=it-&gt;sljedeci;
        }
<a name="0"></a><font color="#FF0000"><a href="match462-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cout &lt;&lt; std::endl;
    } catch(std::domain_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    } catch(std::range_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    } catch(std::logic_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>    }
    
    UnistiSpil(s);

    return 0;
}

</pre>
</body>
</html>
