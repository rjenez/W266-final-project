<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student2213.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student9273.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match159-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;new&gt;
#include &lt;queue&gt;
#include &lt;stack&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;

enum class Boje{Pik,Tref,Herc,Karo};

std::string printBoju(Boje boja);

struct Karta{
    Boje boja;
    std::string vrijednost;
};

struct Cvor{
    Karta karta;
    Cvor *sljedeci;
};
/*
bool DaLiJeValidan(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil){
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first!=Boje::Pik &amp;&amp; it-&gt;first!=Boje::Karo &amp;&amp; it-&gt;first!=Boje::Herc &amp;&amp; it-&gt;first!=Boje::Tref){
            return false;
            break;
        }
        if(it-&gt;second!="2" &amp;&amp; it-&gt;second!="3" &amp;&amp; it-&gt;second!="4" &amp;&amp; it-&gt;second!="5" &amp;&amp; it-&gt;second!="6" &amp;&amp; it-&gt;second!="7" &amp;&amp; it-&gt;second!="8" &amp;&amp; it-&gt;second!="9" &amp;&amp;
            it-&gt;second!="10" &amp;&amp; it-&gt;second!="J" &amp;&amp; it-&gt;second!="Q" &amp;&amp; it-&gt;second!="K" &amp;&amp; it-&gt;second!="A") {
                return false;
                break;
        }
    }
    return true;
}
*/


std::vector&lt;std::string&gt; Elementi{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

int VelicinaSpila(Cvor *prvi){
    int brojac(0);
    Cvor *trenutni=prvi;
    
    while (trenutni-&gt;sljedeci!=prvi) {
        brojac++;
        trenutni=trenutni-&gt;sljedeci;
        
    }
    brojac++;
    return brojac;
}

int pretvoriUInt(std::string par){
        if(par=="J") return 11;
        else if(par=="Q") return 12;
        else if(par=="K") return 13;
        else if(par=="A") return 14;
        return std::stoi(par);
}

/*
void sortirajSpil(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil){
    spil.sort( [](std::pair&lt;Boje, std::string&gt; &amp;a, std::pair&lt;Boje, std::string&gt; &amp;b) -&gt; bool
    {
       return pretvoriUInt(a.second) &lt; pretvoriUInt(b.second); 
    });
}

bool DaLiSuSortirani (std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil){
 
    bool gotovPik(false);
    bool gotovTref(false);
    bool gotovHerc(false);
    
    int brojPik(0);
    int brojTref(0);
    int brojHerc(0);
    int brojKaro(0);
    
    auto itPikP = spil.begin();
    auto itPikK = spil.begin();
    auto itTrefP = spil.begin();
    auto itTrefK = spil.begin();
    auto itHercP = spil.begin();
    auto itHercK = spil.begin();
    auto itKaroP = spil.begin();
    auto itKaroK = spil.begin();
    
    for(auto it = spil.begin(); it != spil.end(); it++){
        if(it-&gt;first==Boje::Pik &amp;&amp; brojPik==0){
            if(gotovPik) return false;
            itPikP = it;
            itPikK = it;
            brojPik++;
        }
        else if(it-&gt;first==Boje::Pik){
            if(gotovPik) return false;
            itPikK++;
            brojPik++;
        }
        
        if(it-&gt;first==Boje::Tref &amp;&amp; brojTref==0){
            gotovPik = true;
            if(gotovTref) return false; 
            itTrefP=it;
            itTrefK=it;
            brojTref++;
        }
        else if(it-&gt;first==Boje::Tref){
            if(gotovTref) return false;
            itTrefK++;
            brojTref++;
        }
        
        if(it-&gt;first==Boje::Herc &amp;&amp; brojHerc==0){
            gotovPik = true;
            gotovTref = true;
            if(gotovHerc) return false;
            itHercP=it;
            itHercK=it;
            brojHerc++;
        }
        else if(it-&gt;first==Boje::Herc){
            if(gotovHerc) return false;
            itHercK++;
            brojHerc++;
        }
        if(it-&gt;first==Boje::Karo &amp;&amp; brojKaro==0){
            gotovPik = true;
            gotovTref = true;
            gotovHerc = true;
            itKaroP=it;
            itKaroK=it;
            brojKaro++;
        }
        else if(it-&gt;first==Boje::Karo){
            itKaroK++;
            brojKaro++;
        }
    }
    
    if(brojPik &gt; 1){
        auto prethodni = itPikP;
       do{
            itPikP++;
            if(pretvoriUInt(itPikP-&gt;second) &lt;= pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while(itPikP!=itPikK);
    }
    
    if(brojTref&gt;1){
        auto prethodni=itTrefP;
        do{
            itTrefP++;
            if(pretvoriUInt(itTrefP-&gt;second)&lt;=pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while (itTrefP!=itTrefK); 
    }    
    if(brojHerc&gt;1){
        auto prethodni=itHercP;
        do{
            itHercP++;
            if(pretvoriUInt(itHercP-&gt;second)&lt;=pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while(itHercP!=itHercK);
    }
    
    if(brojKaro&gt;1){
        auto prethodni=itKaroP;
        do{
            itKaroP++;
            if(pretvoriUInt(itKaroP-&gt;second)&lt;=pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while(itKaroP!=itKaroK);
    }
    return true;
    
}
*/
Cvor *KreirajSpil(){
    
    Cvor *pocetak(nullptr), *prethodni(nullptr);
    try{
        for(int i=0;i&lt;4;i++){
            Boje trenutnaboja =(Boje)i;
            for(int j=0;j&lt;Elementi.size();j++){
                //Cvor *novi(new Cvor{{trenutnaboja,Elementi.at(j)},nullptr});
                Cvor *novi = (new Cvor);
                novi-&gt;karta.boja=trenutnaboja;
                //std::cout &lt;&lt; printBoju(novi-&gt;karta.boja) &lt;&lt; std::endl;
                novi-&gt;karta.vrijednost=Elementi.at(j);
                novi-&gt;sljedeci=nullptr;
                if(!pocetak) pocetak = novi;
                else {
                    novi-&gt;sljedeci=pocetak;
                    prethodni-&gt;sljedeci=novi;
                }
                prethodni=novi;
            }
        }
        
        /*//print
        auto p = pocetak;
        do {
            std::cout&lt;&lt; printBoju(p-&gt;karta.boja)&lt;&lt; " " &lt;&lt; p-&gt;karta.vrijednost &lt;&lt; 
            " sljedeca: " &lt;&lt; printBoju(p-&gt;sljedeci-&gt;karta.boja) &lt;&lt; " " &lt;&lt; 
            p-&gt;sljedeci-&gt;karta.vrijednost &lt;&lt; std::endl;
            
            p = p-&gt; sljedeci;
        }
        while (p!=pocetak);
        
        //brisanje
        
        *auto p = pocetak;
        auto q = pocetak-&gt;sljedeci;
        delete p;
        for(q; q!=pocetak; q=q-&gt;sljedeci){
            std::cout &lt;&lt; printBoju(q-&gt;karta.boja) &lt;&lt; " " &lt;&lt; q-&gt;karta.vrijednost &lt;&lt; " sljedeca: " &lt;&lt; printBoju(q-&gt;sljedeci-&gt;karta.boja) &lt;&lt; " " &lt;&lt; q-&gt;sljedeci-&gt;karta.vrijednost &lt;&lt; std::endl;
            delete q;
        }*/
        
        //delete q;
        /*
        Cvor *pomocni = pocetak;
        do{
            pomocni = pomocni-&gt;sljedeci;
        }while(pomocni-&gt;sljedeci!=pocetak);
        
        pomocni-&gt;sljedeci = pocetak;
        delete pomocni;
        */
    }
    catch(std::bad_alloc){
        std::cout &lt;&lt; "Entered catch" &lt;&lt; std::endl;
        for(auto p=pocetak;p!=prethodni;p=p-&gt;sljedeci){
            delete p;
            throw;
        }
    }
    return pocetak;

}

void IspisiSpil(Cvor *&amp;pocetak) {
    if(pocetak!=nullptr) {
        auto p = pocetak;
        do {
            std::cout&lt;&lt; printBoju(p-&gt;karta.boja)&lt;&lt; " " &lt;&lt; p-&gt;karta.vrijednost &lt;&lt; 
            " sljedeca: " &lt;&lt; printBoju(p-&gt;sljedeci-&gt;karta.boja) &lt;&lt; " " &lt;&lt; 
            p-&gt;sljedeci-&gt;karta.vrijednost &lt;&lt; std::endl;
            
            p = p-&gt; sljedeci;
        }
        while (p!=pocetak);
    }
    
}
void UnistiSpil(Cvor *&amp;pocetak) {
    
    auto drugi = pocetak -&gt; sljedeci;
    pocetak -&gt; sljedeci = nullptr;
    
    auto next = drugi -&gt; sljedeci;
    while (drugi)
    {
        delete drugi;
        drugi = next;
        if(drugi)
            next = drugi -&gt; sljedeci;
    }
    pocetak = nullptr;
    /*
        auto posljednji = pocetak;
        do {
            posljednji = posljednji-&gt; sljedeci;
        }
        while (posljednji-&gt;sljedeci != pocetak);
        
        posljednji -&gt; sljedeci = nullptr;
        auto next = pocetak-&gt;sljedeci;
        while(pocetak) {
            delete pocetak;
            pocetak = next;
            if(pocetak)
                next = pocetak -&gt; sljedeci;
        }*/
}
void IzbaciKarte( Cvor *&amp;prvi,std::multimap&lt;Boje,std::string&gt; &amp;m){
   // if((spil.size()&gt;52) || (!DaLiSuSortirani(spil)) || (!DaLiSuSortirani(spil))) throw std::logic_error("Neispravna lista!");
   Cvor *pomocni=prvi;
   Cvor *prethodni=nullptr;
   
   while (pomocni-&gt;sljedeci!=nullptr) {
       
       auto iter=m.begin();
      while(iter!=m.end()){
      // std::cout &lt;&lt; "Usao na  "&lt;&lt; printBoju(pomocni-&gt;karta.boja) &lt;&lt; pomocni-&gt;karta.vrijednost &lt;&lt;"      "&lt;&lt; printBoju(iter-&gt;first) &lt;&lt; iter-&gt;second &lt;&lt; std::endl;
        if( (pomocni-&gt;karta.boja==iter-&gt;first) &amp;&amp; (pomocni-&gt;karta.vrijednost==iter-&gt;second) ){
            if(m.size()&gt;1){
                iter=m.erase(iter);
            }
            else {
                m.clear();
            }
            prethodni-&gt;sljedeci=pomocni-&gt;sljedeci;
            delete pomocni;
            pomocni=prethodni-&gt;sljedeci;
          //std::cout &lt;&lt; "Izlazim na "&lt;&lt;printBoju(pomocni-&gt;karta.boja)&lt;&lt;pomocni-&gt;karta.vrijednost&lt;&lt;"  "  &lt;&lt; std::endl;  
        }
        if(m.size()&gt;0)
            iter++; 
        else 
            iter=m.end();
        prethodni=pomocni;
      }
      pomocni=pomocni-&gt;sljedeci;
      
    //I ovdje memorijska  std::cout &lt;&lt; printBoju(prvi-&gt;karta.boja)  &lt;&lt; prvi-&gt;karta.vrijednost&lt;&lt; "prvi , a pomocni"&lt;&lt;printBoju(pomocni-&gt;karta.boja) &lt;&lt;pomocni-&gt;karta.vrijednost &lt;&lt; std::endl;
   }
}

/*std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor *prvi,const short int &amp;r, const int &amp;b){
 //   if(b&lt;1 || r&lt;1 ||r&gt;52) throw std::logic_error("Neispravni elementi za izbacivanje!");
  //  if(spil.size()&gt;52 || (!DaLiJeValidan(spil)) || (!DaLiSuSortirani(spil)) ) throw std::logic_error("Neispravna lista!");
    
    Cvor *pomocni=prvi;
    Cvor *prethodni=nullptr;
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; povratni ;
    
    int pozicija(0);
    int finalna;
    int pomjer;
     
    for(int i = 0; i &lt; b; i++){
        for(int j=0;j&lt;r;j++){
            pomocni=pomocni-&gt;sljedeci;
        }
        povratni.push(std::make_pair(printBoju(pomocni-&gt;karta.boja),pomocni-&gt;karta.vrijednost));
        
        prethodni-&gt;sljedeci=pomocni-&gt;sljedeci;
        delete pomocni;
    }    
        /*
        finalna=pozicija+r;
        if(finalna &gt; spil.size()){
            //pomjer = finalna - (spil.size());
            pozicija = pomjer;
        }
        else{
            pomjer = r-1;
            pozicija += r;
        }
        if(std::distance(it, spil.end()) &gt;= r){
        
            std::advance(it, pomjer);
            pozicija-=1;
        }
        else{
          
            pomjer+=1;
            std::advance(it, pomjer);
            pozicija-=1;
        }
        povratni.push(std::make_pair(printBoju(it-&gt;first),it-&gt;second));
        it=spil.erase(it);
    }
    return povratni;    
}
/*
Boje vratiEnum(std::string s){
    if(s=="Pik") return Boje::Pik;
    else if(s=="Tref") return Boje::Tref;
    else if(s=="Herc") return Boje::Herc;
    else if(s=="Karo") return Boje::Karo;
    return Boje::Pik;
}

bool DaLiJeRedValidan(std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; red){
    while (!red.empty()) {
        if(red.front().first!="Pik" &amp;&amp; red.front().first!="Tref" &amp;&amp; red.front().first!="Herc" &amp;&amp; red.front().first!="Karo"){
            return false;
            break;
        }
        if(red.front().second!="2" &amp;&amp; red.front().second!="3" &amp;&amp; red.front().second!="4" &amp;&amp; red.front().second!="5" &amp;&amp; red.front().second!="6" &amp;&amp; red.front().second!="7" &amp;&amp; red.front().second!="8" &amp;&amp; 
            red.front().second!="9" &amp;&amp; red.front().second!="10" &amp;&amp; red.front().second!="J" &amp;&amp; red.front().second!="Q" &amp;&amp; red.front().second!="K" &amp;&amp; red.front().second!="A" ){
                return false;
                break;
            }
        red.pop();
    }
    return true;
}


void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil,std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;povratni, int n){
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(spil.size()&gt;52 || (!DaLiJeValidan(spil)) || (!DaLiSuSortirani(spil))) throw std::logic_error("Neispravna lista!");
    if(n&gt;povratni.size()) throw std::range_error("Nedovoljno karata u redu!");
    if(!DaLiJeRedValidan(povratni)) throw std::logic_error("Neispravne karte!");
    
    
    for(int i=0;i&lt;n;i++){
            spil.push_back(std::make_pair(vratiEnum(povratni.front().first),povratni.front().second));
            povratni.pop();
    }
    
    sortirajSpil(spil);
    
}
*/
std::string printBoju(Boje boja){
    switch(boja) {
        case Boje::Pik:{
            return "Pik";
            break;
        }
        case Boje::Tref:{
            return "Tref";
            break;
        }
        case Boje::Herc:{
            return "Herc";
            break;
        }
        case Boje::Karo:{
            return "Karo";
            break;
        }
    }
    return "greska";
}

void ispisiMapu(std::multimap&lt;Boje, std::string&gt; m){
    if(m.size()==0) std::cout &lt;&lt; "Nema clanova u mapi!" &lt;&lt; std::endl;
    for(auto it=m.begin(); it!=m.end(); it++){
        std::cout &lt;&lt; printBoju(it-&gt;first) &lt;&lt; " " &lt;&lt; it-&gt;second &lt;&lt; std::endl;
    }
}
/*
void ispisiQueue(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; q){
    if(q.empty()) std::cout &lt;&lt; "Nema clanova u queueu!" &lt;&lt; std::endl;
    while(!q.empty()){
        std::cout &lt;&lt; q.front().first &lt;&lt; " " &lt;&lt; q.front().second&lt;&lt; std::endl;
        q.pop();
    }
}

void ispisiListu(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt;spil){
    std::cout &lt;&lt; "Pik: ";
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Pik) std::cout &lt;&lt; it-&gt;second&lt;&lt;" ";   
    }
    std::cout &lt;&lt; std::endl;
    
    std::cout &lt;&lt; "Tref: ";
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Tref) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
    
    std::cout &lt;&lt; "Herc: ";
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Herc) std::cout &lt;&lt; it-&gt;second &lt;&lt;" ";
    }
    std::cout &lt;&lt; std::endl;
    
    std::cout &lt;&lt; "Karo: ";
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Karo) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
    }
    std::cout  &lt;&lt; std::endl;
        
}
int prebrojiKarte(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt;spil){
    int brojac(0);
    for(auto it=spil.begin();it!=spil.end();it++){
        brojac++;
    }
return brojac;
}


int main ()
{   int r,b,a;
    std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil{{Boje::Pik,"4"},{Boje::Tref,"2"}};
    std::multimap&lt;Boje,std::string&gt; m{{Boje::Karo,"2"},{Boje::Pik,"3"},{Boje::Tref,"3"}};
    
    Cvor *prvi=nullptr;
    Cvor *zadnji=nullptr;
    
  try{
      
    spil=KreirajSpil();
    std::cout &lt;&lt; "Unesite korak razbrajanja: " ;
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: " ;
    std::cin &gt;&gt; b;
   auto queue1 = IzbaciKarteRazbrajanjem(spil, r, b);
   std::cout &lt;&lt; "U spilu trenutno ima "&lt;&lt;prebrojiKarte(spil)&lt;&lt;" karata, i to:" &lt;&lt; std::endl;
   ispisiListu(spil);
   std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: " ;
   std::cin &gt;&gt; a;
   VratiPrvihNKarata(spil,queue1,a);
   std::cout &lt;&lt; "U spilu trenutno ima "&lt;&lt;prebrojiKarte(spil)&lt;&lt;" karata, i to:" &lt;&lt; std::endl;
   ispisiListu(spil);
  } 
  catch(std::exception &amp;e){
      std::cout &lt;&lt; "Izuzetak: "&lt;&lt;e.what() &lt;&lt; std::endl;
  }
   
	return 0;
}

*/ 
void Isprintaj(Cvor *prvi){
    Cvor *pomocni=prvi;
   do {
        std::cout &lt;&lt; printBoju(pomocni-&gt;karta.boja) &lt;&lt;" "&lt;&lt;pomocni-&gt;karta.vrijednost &lt;&lt; std::endl;
        pomocni = pomocni-&gt;sljedeci;
    }
    while (pomocni!=prvi);
        
}
int main ()
{
    std::multimap&lt;Boje,std::string&gt; m{{Boje::Karo,"2"},{Boje::Pik,"3"},{Boje::Tref,"3"}};
   // std::stack&lt;std::list&lt;std::string,std::string&gt;&gt; izbacene ;
    Cvor *prva_karta = nullptr;
    prva_karta=KreirajSpil();
    //Isprintaj(prva_karta);
//    IzbaciKarte(prva_karta,m);
    //Isprintaj(prva_karta);
   // ispisiMapu(m);
   IspisiSpil(prva_karta);
   UnistiSpil(prva_karta);
   IspisiSpil(prva_karta);
	return 0;
</font>}
</pre>
</body>
</html>
