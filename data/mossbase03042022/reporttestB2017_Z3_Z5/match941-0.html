<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8560.cpp<p></p><pre>
#include&lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;string&gt;
#include&lt;stdexcept&gt;
#include&lt;stack&gt;
#include&lt;map&gt;
#include&lt;utility&gt;
enum class Boja {Pik, Tref, Herc, Karo};
struct Karta {
    Boja boja;
    std::string vrijednost;
};
struct Cvor {
    Karta karta;
    Cvor *sljedeci;
};
Cvor *KreirajSpil() {
    std::vector&lt;std::string&gt; nazivi {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    int j(0);
    Cvor*pocetak(nullptr), *prethodni;
    for(int i=0; i&lt;52; i++) {
        Cvor *novi(new Cvor);
        if(i&lt;13) novi-&gt;karta.boja=Boja::Pik;
        else if(i&gt;=13 &amp;&amp; i&lt;26) novi-&gt;karta.boja=Boja::Tref;
        else if(i&gt;=26 &amp;&amp; i&lt;39) novi-&gt;karta.boja=Boja::Herc;
        else novi-&gt;karta.boja=Boja::Karo;
        novi-&gt;karta.vrijednost=nazivi[j];
        novi-&gt;sljedeci=nullptr;
        if(!pocetak) pocetak=novi;
        else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
        if(i==12 || i==25 || i==38) j=-1;
        j++;
    }
    prethodni-&gt;sljedeci=pocetak;
    return pocetak;
}
bool DaLiJeSpilSortiran(Cvor *pocetak) {
    Cvor *pret(pocetak),*kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) {
        if(pret-&gt;karta.boja&gt;p-&gt;karta.boja) return false;
        pret=p;
    }
    return true;
}
bool DaLiJeIspravnaVelicina(Cvor *pocetak) {
    Cvor *kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    int brojac(1);
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) brojac++;
    if(brojac&gt;52) return false;
    return true;
}
bool ImaDuplih(Cvor *pocetak) {
    Cvor *kraj(pocetak), *prethodni(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) {
        if(prethodni-&gt;karta.boja==p-&gt;karta.boja &amp;&amp; prethodni-&gt;karta.vrijednost==p-&gt;karta.vrijednost) return true;
        prethodni=p;
    }
    return false;
}
bool DaLiSuIspravniNazivi(Cvor *pocetak) {
    Cvor *k(pocetak),*pp(pocetak);
    pp=pp-&gt;sljedeci;
    auto tmp(pocetak-&gt;karta);
    if(tmp.vrijednost!="2" &amp;&amp; tmp.vrijednost!="3" &amp;&amp; tmp.vrijednost!="4" &amp;&amp; tmp.vrijednost!="5" &amp;&amp; tmp.vrijednost!="6" &amp;&amp; tmp.vrijednost!="7" &amp;&amp; tmp.vrijednost!="8" &amp;&amp; tmp.vrijednost!="9" &amp;&amp; tmp.vrijednost!="10" &amp;&amp; tmp.vrijednost!="J" &amp;&amp; tmp.vrijednost!="Q" &amp;&amp; tmp.vrijednost!="K" &amp;&amp; tmp.vrijednost!="A") return false;
    for(auto p=pp; p!=k; p=p-&gt;sljedeci) {
        tmp=pp-&gt;karta;
        if(tmp.vrijednost!="2" &amp;&amp; tmp.vrijednost!="3" &amp;&amp; tmp.vrijednost!="4" &amp;&amp; tmp.vrijednost!="5" &amp;&amp; tmp.vrijednost!="6" &amp;&amp; tmp.vrijednost!="7" &amp;&amp; tmp.vrijednost!="8" &amp;&amp; tmp.vrijednost!="9" &amp;&amp; tmp.vrijednost!="10" &amp;&amp; tmp.vrijednost!="J" &amp;&amp; tmp.vrijednost!="Q" &amp;&amp; tmp.vrijednost!="K" &amp;&amp; tmp.vrijednost!="A") return false;
    }
    return true;
}
void IzbaciKarte(Cvor *&amp;pocetak, std::multimap&lt;Boja,std::string&gt; &amp;mapa) {
    if(!DaLiJeIspravnaVelicina(pocetak) || ImaDuplih(pocetak) || !DaLiJeSpilSortiran(pocetak) || !DaLiSuIspravniNazivi(pocetak)) throw std::logic_error("Neispravna lista!");
    Cvor *kraj(pocetak);
    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        Cvor *pret(pocetak),*poc(pocetak);
        auto par(*it);
        poc=poc-&gt;sljedeci;
<a name="1"></a><font color="#00FF00"><a href="match941-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        for(auto i=poc; i!=kraj; i=i-&gt;sljedeci) {
            if(i-&gt;karta.boja==par.first &amp;&amp; i-&gt;karta.vrijednost==par.second) {
</font>                auto brisi(i);
                i=i-&gt;sljedeci;
                pret-&gt;sljedeci=i;
                if(brisi==kraj) kraj=i;
                break;
            }
            pret=i;
        }
    }
    pocetak=kraj;
}
int BrojKarataUSpilu(Cvor *pocetak) {
    int vel(1);
    Cvor *kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) vel++;
    return vel;
}
<a name="0"></a><font color="#FF0000"><a href="match941-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Cvor *&amp;pocetak, const short int &amp;r, const int &amp;b) {
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    if(!DaLiJeIspravnaVelicina(pocetak) || ImaDuplih(pocetak) || !DaLiJeSpilSortiran(pocetak) || !DaLiSuIspravniNazivi(pocetak)) throw std::logic_error("Neispravna lista!");
    int vel(BrojKarataUSpilu(pocetak));
    int brojk(b);
    Cvor *prethodni,*poc(pocetak),*kraj(pocetak);
    prethodni=pocetak;
    poc=poc-&gt;sljedeci;
    for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) prethodni=p;
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; izbaceni;
    while(brojk!=0) {
        short int korak(r);
        while(korak!=1) {
            prethodni=pocetak;
            pocetak=pocetak-&gt;sljedeci;
            korak--;
        }
        auto par(pocetak-&gt;karta);
        std::string bojaa;
        if(par.boja==Boja::Pik) bojaa="Pik";
        else if(par.boja==Boja::Tref) bojaa="Tref";
        else if(par.boja==Boja::Herc) bojaa="Herc";
        else bojaa="Karo";
        izbaceni.push(std::make_pair(bojaa,par.vrijednost));
        auto brisi(pocetak);
        pocetak=pocetak-&gt;sljedeci;
        prethodni-&gt;sljedeci=pocetak;
        if(brisi==kraj) kraj=pocetak;
        delete brisi;
        brojk--;
        vel--;
        if(vel==0) break;
    }
    pocetak=kraj;
    return izbaceni;
}
bool KriterijSortiranja(std::string s1, std::string s2) {
    std::vector&lt;std::string&gt; nazivi{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    int prvi(0),drugi(0);
    for(int i=0; i&lt;nazivi.size(); i++) {
        if(s1==nazivi[i]) prvi=i;
        if(s2==nazivi[i]) drugi=i;
    }
    return prvi&lt;drugi;
}
bool DaLisuIspravniPodaci(std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; s) {
    while(!s.empty()) {
        auto par(s.top());
        if(par.first!="Pik" &amp;&amp; par.first!="Tref" &amp;&amp; par.first!="Herc" &amp;&amp; par.first!="Karo") return false;
        if(par.second!="2" &amp;&amp; par.second!="3" &amp;&amp; par.second!="4" &amp;&amp; par.second!="5" &amp;&amp; par.second!="6" &amp;&amp; par.second!="7" &amp;&amp; par.second!="8" &amp;&amp; par.second!="9" &amp;&amp; par.second!="10" &amp;&amp; par.second!="J" &amp;&amp; par.second!="Q" &amp;&amp; par.second!="K" &amp;&amp; par.second!="A") return false;
<a name="2"></a><font color="#0000FF"><a href="match941-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        s.pop();
    }
    return true;
}
void VratiPosljednjihNKarata(Cvor *&amp;pocetak, std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; izbaceni, int n) {
</font>    if(n&gt;int(izbaceni.size())) throw std::range_error("Nedovoljno karata u steku!");
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(!DaLisuIspravniPodaci(izbaceni)) throw std::logic_error("Neispravne karte!");
    Cvor *kraj(pocetak);
    while(n!=0) {
        auto par(izbaceni.top());
        Boja b;
        if(par.first=="Tref") b=Boja::Tref;
        else if(par.first=="Herc") b=Boja::Herc;
        else if(par.first=="Pik") b=Boja::Pik;
        else b=Boja::Karo;
        Cvor *ima(nullptr),*poc(pocetak),*prethodni;
        poc=poc-&gt;sljedeci;
        for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) prethodni=p;
        if(pocetak-&gt;karta.boja==b &amp;&amp; pocetak-&gt;karta.vrijednost==par.second) ima=pocetak;
        for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) {
            if(p-&gt;karta.boja==b &amp;&amp; p-&gt;karta.vrijednost==par.second) {
                ima=p;
                break;
            }
        }
        if(!ima) {
            Cvor *novi(new Cvor);
            novi-&gt;karta.boja=b;
            novi-&gt;karta.vrijednost=par.second;
            novi-&gt;sljedeci=nullptr;
            Cvor *nadji(pocetak);
            while(nadji-&gt;karta.boja&lt;b) {
                prethodni=nadji;
                nadji=nadji-&gt;sljedeci;
            }
            while(!(KriterijSortiranja(par.second,nadji-&gt;karta.vrijednost))) {
                prethodni=nadji;
                nadji=nadji-&gt;sljedeci;
                if(nadji==kraj) break;
            }
            prethodni-&gt;sljedeci=novi;
            novi-&gt;sljedeci=nadji;
            if(nadji==pocetak) kraj=novi;
        }
        n--;
        izbaceni.pop();
    }
}
void IspisiSpil(Cvor *pocetak) {
    if(pocetak-&gt;karta.boja==Boja::Pik)  {
        std::cout&lt;&lt;"Pik: ";
        while(pocetak-&gt;karta.boja==Boja::Pik) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(pocetak-&gt;karta.boja==Boja::Tref) {
        std::cout&lt;&lt;"Tref: ";
        while(pocetak-&gt;karta.boja==Boja::Tref) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(pocetak-&gt;karta.boja==Boja::Herc) {
        std::cout&lt;&lt;"Herc: ";
        while(pocetak-&gt;karta.boja==Boja::Herc) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(pocetak-&gt;karta.boja==Boja::Karo) {
        std::cout&lt;&lt;"Karo: ";
        while(pocetak-&gt;karta.boja==Boja::Karo) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
}
void UnistiSpil(Cvor *pocetak) {
    if(!pocetak) return;
    Cvor *kraj(pocetak),*prethodni;
    Cvor *poc(pocetak); 
    poc=poc-&gt;sljedeci;
    for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) prethodni=p;
    prethodni-&gt;sljedeci=nullptr;
    for(auto p=pocetak; p!=nullptr;) {
        auto brisi(p);
        p=p-&gt;sljedeci;
        delete brisi;
    }
}
int main () {
    Cvor *pocetak=nullptr;
    try {
        pocetak=KreirajSpil();
        short int korak;
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        std::cin&gt;&gt;korak;
        int brojk;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        std::cin&gt;&gt;brojk;
        std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; izbaceni(IzbaciKarteRazbrajanjem(pocetak,korak,brojk));
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarataUSpilu(pocetak)&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        IspisiSpil(pocetak);
        int broj;
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        std::cin&gt;&gt;broj;
        VratiPosljednjihNKarata(pocetak,izbaceni,broj);
<a name="3"></a><font color="#00FFFF"><a href="match941-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarataUSpilu(pocetak)&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        IspisiSpil(pocetak);
    }
    catch(std::domain_error izuz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    catch(std::logic_error izuz) {
</font>        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    catch(std::range_error izuz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    UnistiSpil(pocetak);
    return 0;
}
</pre>
</body>
</html>
