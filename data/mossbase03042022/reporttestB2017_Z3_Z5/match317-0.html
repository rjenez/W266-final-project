<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8367.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z5/student8367.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match317-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;map&gt;
#include &lt;stack&gt; 
enum class Boje{Pik,Tref,Herc,Karo};
struct Karta
{
    Boje boja;
    std::string vrijednost;
};
struct Cvor
{
    Karta karta;
    Cvor *sljedeci;
};
template &lt;typename T &gt; std::string PretvoriUString (T x)
</font>{
    std::ostringstream s;
    s &lt;&lt; x;
    return s.str();
}
Cvor* KreirajSpil()
{
    Cvor *pocetak(nullptr),*prethodni;
    for(int i=0;i&lt;4;i++)
    {
        for(int j=2;j&lt;=14;j++)
        {
            Cvor *novi(new Cvor);
            Karta karta;
            if(j&lt;=10)
                karta.vrijednost=PretvoriUString(j);
            else
            {
<a name="3"></a><font color="#00FFFF"><a href="match317-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                if(j==11)
                    karta.vrijednost="J";
                else if(j==12)
                    karta.vrijednost="Q";
                else if(j==13)
                    karta.vrijednost="K";
</font>                else if(j==14)
                    karta.vrijednost="A";
            }
<a name="1"></a><font color="#00FF00"><a href="match317-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            if(i==0)
                karta.boja=Boje::Pik;
            else if(i==1)
                karta.boja=Boje::Tref;
            else if(i==2)
                karta.boja=Boje::Herc;
</font>            else if(i==3)
                karta.boja=Boje::Karo;
            novi-&gt;karta=karta;
            novi-&gt;sljedeci=nullptr;
            if(!pocetak) pocetak=novi;
            else prethodni-&gt;sljedeci=novi;
            prethodni=novi;
        }
    }
    prethodni-&gt;sljedeci=pocetak;
    return pocetak;
}

bool IspravnaListaSpila(Cvor*&amp; listaSpila)
{
    int brojac=0;
    for(Cvor* p=listaSpila-&gt;sljedeci;p!=listaSpila;p=p-&gt;sljedeci)
    {
        brojac++;
    }
    if(brojac+1&gt;52) return false;
    for(Cvor* i=listaSpila-&gt;sljedeci;i!=listaSpila;i=i-&gt;sljedeci)
    {
        if((*i).karta.boja != Boje::Pik &amp;&amp; (*i).karta.boja != Boje::Tref &amp;&amp; (*i).karta.boja != Boje::Herc  &amp;&amp; (*i).karta.boja != Boje::Karo) {
            return false;
        }
        if((*i).karta.vrijednost != "2" &amp;&amp; (*i).karta.vrijednost != "3" &amp;&amp; (*i).karta.vrijednost != "4" &amp;&amp; 
        (*i).karta.vrijednost != "5" &amp;&amp; (*i).karta.vrijednost != "6" &amp;&amp; (*i).karta.vrijednost != "7" &amp;&amp; 
        (*i).karta.vrijednost != "8" &amp;&amp; (*i).karta.vrijednost != "9" &amp;&amp; (*i).karta.vrijednost != "10" &amp;&amp; 
        (*i).karta.vrijednost != "J" &amp;&amp; (*i).karta.vrijednost != "Q" &amp;&amp; (*i).karta.vrijednost != "K" &amp;&amp; (*i).karta.vrijednost != "A") {
            return false;
        }
    }
    return true;
}

void IzbaciKarte(Cvor *&amp;listaSpila, std::multimap &lt; Boje, std::string &gt; &amp;multiMapa)
{
    if(!IspravnaListaSpila(listaSpila)) throw std::logic_error ("Neispravna lista!");
ponovo:
    for(auto it=multiMapa.begin();it!=multiMapa.end();it++)
    {
        if(listaSpila!=nullptr)
        {
            Cvor* prethodni=nullptr;
            for(Cvor* p=listaSpila-&gt;sljedeci;p!=listaSpila;p=p-&gt;sljedeci)
            {
                if(it-&gt;first==(*p-&gt;sljedeci).karta.boja &amp;&amp; it-&gt;second==(*p-&gt;sljedeci).karta.vrijednost)
                {
                    prethodni=p;
                }
                if(it-&gt;first==(*p).karta.boja &amp;&amp; it-&gt;second==(*p).karta.vrijednost)
                {
                    if(prethodni!=nullptr)
                        prethodni-&gt;sljedeci=p-&gt;sljedeci;
                    else
                        listaSpila-&gt;sljedeci=p-&gt;sljedeci;
                    if(p==p-&gt;sljedeci) listaSpila=nullptr;
                    delete p;
                    multiMapa.erase(it);
                    goto ponovo;
                }
            }
            if(it-&gt;first==(*listaSpila).karta.boja &amp;&amp; it-&gt;second==(*listaSpila).karta.vrijednost)
            {
                if(prethodni!=nullptr)
                    prethodni-&gt;sljedeci=listaSpila-&gt;sljedeci;
                delete listaSpila;
                if(prethodni!=nullptr)
                    listaSpila=prethodni-&gt;sljedeci;
                else listaSpila=nullptr;
                multiMapa.erase(it);
                goto ponovo;
            }
            
        }
    }
}
std::stack&lt; std::pair &lt; std::string, std::string &gt;&gt; IzbaciKarteRazbrajanjem(Cvor*&amp; listaSpila, const short int &amp;r, int &amp;b)
{
    if (!IspravnaListaSpila(listaSpila)) throw std::logic_error ("Neispravna lista!");
    if (r &lt; 1 || r &gt; 52) throw std::logic_error ("Neispravni elementi za izbacivanje!");
    if (b &lt; 1) throw std::logic_error ("Neispravni elementi za izbacivanje!");
<a name="2"></a><font color="#0000FF"><a href="match317-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    std::stack &lt; std::pair &lt; std::string, std::string &gt;&gt; stek;
    int izbaceno(0), element(0);
    Cvor* prethodni=nullptr;
</font>    for(Cvor* i = listaSpila; ; i=i-&gt;sljedeci) 
    {
        element++;
        if(element+1==r) prethodni=i;
        if(element == r) 
        {
            if((int)(*i).karta.boja == 0)
                stek.push(std::make_pair("Pik", (*i).karta.vrijednost));
            else if((int)(*i).karta.boja == 1)
                stek.push(std::make_pair("Tref", (*i).karta.vrijednost));
            else if((int)(*i).karta.boja == 2)
                stek.push(std::make_pair("Herc", (*i).karta.vrijednost));
            else  if((int)(*i).karta.boja == 3)
                stek.push(std::make_pair("Karo", (*i).karta.vrijednost));
            if(prethodni==nullptr)
            {
                for(Cvor* p=listaSpila-&gt;sljedeci;p!=listaSpila;p=p-&gt;sljedeci)
                    prethodni=p;
                listaSpila=listaSpila-&gt;sljedeci;
            }
            if(listaSpila-&gt;sljedeci==listaSpila) listaSpila=nullptr;
            else prethodni-&gt;sljedeci=i-&gt;sljedeci;
            delete i;
            i=prethodni;
            izbaceno++;
            prethodni=nullptr;
            if(izbaceno == b || listaSpila == nullptr) break;
            element = 0;
        }
    }
<a name="4"></a><font color="#FF00FF"><a href="match317-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    return stek;
}
void VratiPosljednjihNKarata(Cvor*&amp; listaSpila,std::stack &lt; std::pair &lt; std::string, std::string &gt;&gt;&amp; red, int n)
</font>{
<a name="5"></a><font color="#FF0000"><a href="match317-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    if (n &lt; 0) throw std::domain_error ("Broj n je besmislen!");
    if (n &gt; red.size()) throw std::range_error ("Nedovoljno karata u steku!");
    for(int k = 0; k &lt; red.size(); k++) {
</font>        std::string a1, a2;
        a1 = red.top().first;
        a2 = red.top().second;
        if(a1 != "Pik" &amp;&amp; a1 != "Tref" &amp;&amp; a1 != "Herc" &amp;&amp; a1 != "Karo") throw std::logic_error ("Neispravne karte!");
        if(a2 != "2" &amp;&amp; a2 != "3" &amp;&amp; a2 != "4" &amp;&amp; a2 != "5" &amp;&amp; a2 != "6" &amp;&amp; a2 != "7" &amp;&amp; a2 != "8" &amp;&amp; a2 != "9" &amp;&amp; a2 != "10"
                &amp;&amp; a2 != "J" &amp;&amp; a2 != "Q" &amp;&amp; a2 != "K" &amp;&amp; a2 != "A") throw std::logic_error ("Neispravne karte!");
        red.push(red.top());
        red.pop();
    }
    if (!IspravnaListaSpila(listaSpila)) throw std::logic_error ("Neispravna lista!");
}

void UnistiSpil(Cvor*&amp; listaSpila)
{
    if(listaSpila==nullptr) return;
    for(Cvor* p=listaSpila-&gt;sljedeci;p!=listaSpila;)
    {
        Cvor* pom=p-&gt;sljedeci;
        delete p;
        p=pom;
    }
    delete listaSpila;
    
}
int main ()
{
	Cvor* listaSpila = KreirajSpil();
    int korakRazbrajanja;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; korakRazbrajanja;
    int brojIzbacenihKarata;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; brojIzbacenihKarata;
    std::stack &lt; std::pair &lt; std::string, std::string &gt;&gt; redIzbacenih;
    try 
    {
        redIzbacenih = IzbaciKarteRazbrajanjem(listaSpila, korakRazbrajanja, brojIzbacenihKarata);
    }
    catch(std::logic_error c)
    {
        std::cout &lt;&lt;"Izuzetak: "&lt;&lt; c.what();
        UnistiSpil(listaSpila);
        return 0;
    }
    int brojKarata=0;
    if(listaSpila!=nullptr)
    {
        for(Cvor* i=listaSpila-&gt;sljedeci;i!=listaSpila;i=i-&gt;sljedeci) brojKarata++;
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; brojKarata+1 &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
    }
    else
    {
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; brojKarata &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pik:\nTref:\nHerc:\nKaro:";
    }
    if(listaSpila!=nullptr)
    {
        if(listaSpila==listaSpila-&gt;sljedeci)
        {
            if((int)(*listaSpila).karta.boja==0)
            {
                std::cout&lt;&lt;"Pik: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
            else if((int)(*listaSpila).karta.boja==1)
            {
                std::cout&lt;&lt;"Pik:\nTref: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
            else if((int)(*listaSpila).karta.boja==2)
            {
                std::cout&lt;&lt;"Pik:\nTref:\nHerc: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
            else if((int)(*listaSpila).karta.boja==3)
            {
                std::cout&lt;&lt;"Pik:\nTref:\nHerc:\nKaro: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
        }
        for (Cvor* x = listaSpila; x-&gt;sljedeci != listaSpila; x=x-&gt;sljedeci)
        {
            std::cout &lt;&lt; "Pik: ";
            if((*x).karta.boja == Boje::Pik)
            {
                
                while ((*x).karta.boja == Boje::Pik &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
                
            }
            std::cout &lt;&lt; "\nTref: ";
            if((*x).karta.boja == Boje::Tref)
            {
                
                while ((*x).karta.boja == Boje::Tref &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
               
            }
            std::cout &lt;&lt; "\nHerc: ";
            if((*x).karta.boja == Boje::Herc)
            {
               
                while ((*x).karta.boja == Boje::Herc &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
                
            }
            std::cout &lt;&lt; "\nKaro: ";
            if((*x).karta.boja == Boje::Karo)
            {
                
                while ((*x).karta.boja == Boje::Karo &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
                if(x-&gt;sljedeci==listaSpila &amp;&amp; (*x).karta.boja == Boje::Karo) 
                    std::cout&lt;&lt;(*x).karta.vrijednost &lt;&lt; "\n";
                break;
            }
        }
        std::cout &lt;&lt; "\nUnesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin &gt;&gt; n;
        try
        {
            VratiPosljednjihNKarata(listaSpila, redIzbacenih, n);
        }
        catch (std::exception&amp; c)
        {
            std::cout&lt;&lt;"Izuzetak: " &lt;&lt; c.what();
            UnistiSpil(listaSpila);
            return 0;
        }
        
        int brojKarata=0;
        if(listaSpila!=nullptr)
        {
            for(Cvor* i=listaSpila-&gt;sljedeci;i!=listaSpila;i=i-&gt;sljedeci) brojKarata++;
            std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; brojKarata+1 &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
        }
        else
        {
            std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; brojKarata &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pik:\nTref:\nHerc:\nKaro:";
        }
        if(listaSpila==listaSpila-&gt;sljedeci)
        {
            if((int)(*listaSpila).karta.boja==0)
            {
                std::cout&lt;&lt;"Pik: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
            else if((int)(*listaSpila).karta.boja==1)
            {
                std::cout&lt;&lt;"Pik:\nTref: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
            else if((int)(*listaSpila).karta.boja==2)
            {
                std::cout&lt;&lt;"Pik:\nTref:\nHerc: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
            else if((int)(*listaSpila).karta.boja==3)
            {
                std::cout&lt;&lt;"Pik:\nTref:\nHerc:\nKaro: "&lt;&lt;(*listaSpila).karta.vrijednost;
            }
        }
        for (Cvor* x = listaSpila; x-&gt;sljedeci != listaSpila; x=x-&gt;sljedeci)
        {
            std::cout &lt;&lt; "Pik: ";
            if((*x).karta.boja == Boje::Pik)
            {
                
                while ((*x).karta.boja == Boje::Pik &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
                
            }
            std::cout &lt;&lt; "\nTref: ";
            if((*x).karta.boja == Boje::Tref)
            {
                
                while ((*x).karta.boja == Boje::Tref &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
               
            }
            std::cout &lt;&lt; "\nHerc: ";
            if((*x).karta.boja == Boje::Herc)
            {
               
                while ((*x).karta.boja == Boje::Herc &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
                
            }
            std::cout &lt;&lt; "\nKaro: ";
            if((*x).karta.boja == Boje::Karo)
            {
                
                while ((*x).karta.boja == Boje::Karo &amp;&amp; x-&gt;sljedeci != listaSpila)
                {
                    std::cout &lt;&lt; (*x).karta.vrijednost &lt;&lt; " ";
                    
                    x=x-&gt;sljedeci;
                }
                if(x-&gt;sljedeci==listaSpila &amp;&amp; (*x).karta.boja == Boje::Karo) 
                    std::cout&lt;&lt;(*x).karta.vrijednost &lt;&lt; "\n";
                break;
            }
        }
        UnistiSpil(listaSpila);
    }
    
        
    return 0;
}
</pre>
</body>
</html>
