<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student3568.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student4628.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 2
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;

const double pi(4*atan(1));
const double eps(1e-10);

class NepreklapajucaKugla {
    double x,y,z,r;
    NepreklapajucaKugla* prethodni{};
    static NepreklapajucaKugla* posljednji;
    bool DaLiSePoklapa(const NepreklapajucaKugla &amp;k);
    void Obrisi(NepreklapajucaKugla &amp;k);
    public:
    explicit NepreklapajucaKugla(double r = 0) {
        x=0; y=0; z=0;
        r=0;
        if(DaLiSePoklapa(*this)) {
            Obrisi(*this);
            throw std::logic_error("Nedozvoljeno preklapanje");
            
        }
        else {
            prethodni=posljednji;
            posljednji=this;
        }    
    }
    
    NepreklapajucaKugla(double x, double y, double z, double r = 0) {
        if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik\n");
        NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z;
        NepreklapajucaKugla::r=r;
        prethodni=posljednji;
            posljednji=this;
        if(DaLiSePoklapa(*this)) {
            Obrisi(*this);    
            throw std::logic_error("Nedozvoljeno preklapanje");
        }
        else  {
            
        }
    }
    
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0) {
        if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik\n");
        double a,b,c;
        std::tie(a,b,c)=centar;
        x=a; y=b; z=c; 
        NepreklapajucaKugla::r=r;
        if(DaLiSePoklapa(*this)){ 
            Obrisi(*this);
            throw std::logic_error("Nedozvoljeno preklapanje");
        }
        else { prethodni=posljednji;
        posljednji=this;}
        }
    ~NepreklapajucaKugla()=default;
    NepreklapajucaKugla(const NepreklapajucaKugla &amp;k)=delete;
    NepreklapajucaKugla &amp;operator =(const NepreklapajucaKugla &amp;k)=delete;
<a name="0"></a><font color="#FF0000"><a href="match899-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

    double DajX() const;
    double DajY() const;
    double DajZ() const;
    std::tuple&lt;double, double, double&gt; DajCentar() const;
    double DajPoluprecnik() const;
    double DajPovrsinu() const;
    double DajZapreminu() const;
    NepreklapajucaKugla &amp;PostaviX(double x);
    NepreklapajucaKugla &amp;PostaviY(double y);
    NepreklapajucaKugla &amp;PostaviZ(double z);
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z);
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar);
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r);
    void Ispisi() const;
    void Transliraj(double delta_x, double delta_y, double delta_z);
    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);
};

NepreklapajucaKugla* NepreklapajucaKugla::posljednji(nullptr);
</font>
<a name="1"></a><font color="#00FF00"><a href="match899-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

double NepreklapajucaKugla::DajX() const { return x; }

double NepreklapajucaKugla::DajY() const { return y; }

double NepreklapajucaKugla::DajZ() const { return z; }

std::tuple&lt;double, double, double&gt; NepreklapajucaKugla::DajCentar() const {
    return std::make_tuple(x,y,z);
}

double NepreklapajucaKugla::DajPoluprecnik() const { return r; }

double NepreklapajucaKugla::DajPovrsinu() const { return 4*pi*r*r; }
</font>
double NepreklapajucaKugla::DajZapreminu() const {
    return (4/3.*std::pow(r,3)*pi);
}

NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviX(double x) {
    NepreklapajucaKugla::x=x;
    if(DaLiSePoklapa(*this)){ 
        Obrisi(*this);
        throw std::logic_error("Nedozvoljeno preklapanje");
        
    }
    else { prethodni=posljednji; posljednji=this; };
    return *this;
}

NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviY(double y) {
    NepreklapajucaKugla::y=y;
    if(DaLiSePoklapa(*this)){ 
        Obrisi(*this);
        throw std::logic_error("Nedozvoljeno preklapanje");
       
    }
    else { prethodni=posljednji; posljednji=this; };
    return *this;
}

NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviZ(double z) {
    NepreklapajucaKugla::z=z;
    if(DaLiSePoklapa(*this)){ 
        Obrisi(*this);
        throw std::logic_error("Nedozvoljeno preklapanje");
        
    }
    else { prethodni=posljednji; posljednji=this; };
    return *this;
}

NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviCentar(double x, double y, double z) {
    NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z;
    if(DaLiSePoklapa(*this)){
        Obrisi(*this);
        throw std::logic_error("Nedozvoljeno preklapanje");
        
    }
    else { prethodni=posljednji; posljednji=this;  };
    return *this;
}

NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) {
    double a,b,c;
    std::tie(a,b,c)=centar;
    PostaviCentar(a,b,c);
    if(DaLiSePoklapa(*this)){ 
         Obrisi(*this);
        throw std::logic_error("Nedozvoljeno preklapanje");
       
    }
    else { prethodni=posljednji; posljednji=this; };
    return *this;
}

NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviPoluprecnik(double r) {
    if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik\n");
    NepreklapajucaKugla::r=r;
    if(DaLiSePoklapa(*this)){ 
        Obrisi(*this);
        throw std::logic_error("Nedozvoljeno preklapanje");
      
    }
    else { prethodni=posljednji; posljednji=this; };
    return *this;
}

<a name="2"></a><font color="#0000FF"><a href="match899-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void NepreklapajucaKugla::Ispisi() const {
    std::cout&lt;&lt;"{("&lt;&lt;DajX()&lt;&lt;","&lt;&lt;DajY()&lt;&lt;","&lt;&lt;DajZ()&lt;&lt;"),"&lt;&lt;DajPoluprecnik()&lt;&lt;"}"&lt;&lt;std::endl;
</font>}

void NepreklapajucaKugla::Transliraj(double delta_x, double delta_y, double delta_z) {
    x+=delta_x; y+=delta_y; z+=delta_z;
}

double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2) {
    return std::sqrt(std::pow(k1.x-k2.x,2)+std::pow(k1.y-k2.y,2)+std::pow(k1.z-k2.z,2));
}

bool NepreklapajucaKugla::DaLiSePoklapa(const NepreklapajucaKugla &amp;k) {
    if(posljednji==nullptr) return 0;
    if(prethodni==nullptr) return 0;
  
    for(auto p=prethodni; p!=nullptr; p=p-&gt;prethodni) {
       if(RastojanjeCentara(*p, k)-k.r&lt;=p-&gt;DajPoluprecnik()) return 1;
    }
    return 0;
}



void NepreklapajucaKugla::Obrisi( NepreklapajucaKugla &amp;k) {
    posljednji=prethodni;
    if(prethodni==nullptr) prethodni=nullptr;
   else { prethodni=prethodni-&gt;prethodni; }
}


int main() {
    std::cout&lt;&lt;"Unesite broj kugli: ";
    int n;
    std::cin&gt;&gt;n;while(n&lt;=0 || !std::cin || int(n)!=n) {
        std::cout&lt;&lt;"Neispravan broj kugli, unesite ponovo!\n";
        std::cin.clear();
        std::cin.ignore(1000, '\n');
        std::cin&gt;&gt;n;
    }
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; kugle;
   double unos[4];
    for(int i=0; i&lt;n; i++) {
        std::cout&lt;&lt;"Unesite centar za "&lt;&lt;i+1&lt;&lt;". kuglu: ";
            for(int j=0; j&lt;3; j++) {
                std::cin&gt;&gt;unos[j];
                if(!std::cin) {
                    std::cout&lt;&lt;"Neispravan centar, unesite ponovo:\n";
                    std::cin.clear();
                    std::cin.ignore(1000, '\n');
                    j=-1;
                }
                }
       
        std::cout&lt;&lt;"Unesite poluprecnik: ";
        std::cin&gt;&gt;unos[3];
        while(!std::cin || unos[3]&lt;0) {
            std::cout &lt;&lt; "Neispravan poluprecnik, unesite ponovo:" &lt;&lt; std::endl;
            std::cin.clear();
            std::cin.ignore(1000, '\n');
            std::cin&gt;&gt;unos[3];
        }
        
    try {
        auto pok(std::make_shared&lt;NepreklapajucaKugla&gt;(unos[0], unos[1], unos[2], unos[3]));
        kugle.push_back(pok);
    }
    catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;izuzetak.what();
        
    }
    catch(std::bad_alloc ) {
        std::cout&lt;&lt;"Nedovoljno memorije";
    }
    catch(std::logic_error izuzetak2) {
        std::cout&lt;&lt;izuzetak2.what()&lt;&lt;std::endl;
        i--;
    }
    }
    
    
    std::sort(kugle.begin(), kugle.end(), [] (std::shared_ptr&lt;NepreklapajucaKugla&gt; k1, std::shared_ptr&lt;NepreklapajucaKugla&gt; k2) {
        return k1-&gt;DajPovrsinu()&lt;k2-&gt;DajPovrsinu();
    });
    
    std::cout&lt;&lt;"\nKugle nakon obavljenog sortiranja: "&lt;&lt;std::endl;
    std::for_each(kugle.begin(), kugle.end(), [] (std::shared_ptr&lt;NepreklapajucaKugla&gt; k) {
        k-&gt;Ispisi();
    });
 

    return 0;
}


</pre>
</body>
</html>
