<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student9340.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student9340.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 2
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;cmath&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
const double e = 0.0000000001;
class NepreklapajucaKugla
{
    static NepreklapajucaKugla *posljednja;
    NepreklapajucaKugla *prethodna;
    double x, y, z, r;
    
    bool DaLiSeSijeku(double x, double y, double z, double r, NepreklapajucaKugla k){
        double d (sqrt(pow(x-k.x,2)+pow(y-k.y,2)+pow(z-k.z,2)));
        return (d&lt;k.r+r&amp;&amp;d&gt;fabs(k.r-r));
    }
<a name="1"></a><font color="#00FF00"><a href="match299-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

public:
    explicit NepreklapajucaKugla(double r = 0);
    NepreklapajucaKugla(double x, double y, double z, double r = 0);
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0);
</font>    double DajX() const {
        return x;
    }
    double DajY() const {
        return y;
    }
    double DajZ() const {
        return z;
    }
    std::tuple&lt;double, double, double&gt; DajCentar() const {
        return std::make_tuple (x,y,z);
    }
    double DajPoluprecnik() const {
        return r;
    };
    double DajPovrsinu() const {
        return r*r*atan(1)*4;
    }
    double DajZapreminu() const {
        return ((4.0/3.0)*r*r*r*atan(1)*4);
    }
    NepreklapajucaKugla &amp;PostaviX(double x) {
        NepreklapajucaKugla::x=x;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviY(double y) {
        NepreklapajucaKugla::y=y;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviZ(double z) {
        NepreklapajucaKugla::z=z;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) {
        NepreklapajucaKugla::x=x;
        NepreklapajucaKugla::y=y;
        NepreklapajucaKugla::z=z;
        return *this;
    }
<a name="2"></a><font color="#0000FF"><a href="match299-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar);
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r);
    void Ispisi() const {
        std::cout&lt;&lt;"{("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;","&lt;&lt;z&lt;&lt;"),"&lt;&lt;r&lt;&lt;"}";
</font>    } 
    void Transliraj(double delta_x, double delta_y, double delta_z);
    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);
    ~NepreklapajucaKugla(){
        /*NepreklapajucaKugla* pom(posljednja);
        if (pom==this) posljednja=pom-&gt;prethodna;
        else {
            while (pom-&gt;prethodna!=this) pom=pom-&gt;prethodna;
            pom-&gt;prethodna=pom-&gt;prethodna-&gt;prethodna;
        }*/
    }
};

NepreklapajucaKugla* NepreklapajucaKugla::posljednja=nullptr;

NepreklapajucaKugla::NepreklapajucaKugla(double r)
{
    prethodna=posljednja;
    
    NepreklapajucaKugla* drugaKugla=prethodna;
    while(drugaKugla!=nullptr){
        if(DaLiSeSijeku(x,y,z,r,*drugaKugla))
            throw std::logic_error("Nedozvoljeno preklapanje");
        drugaKugla=drugaKugla-&gt;prethodna;
    }
    
    if (r&gt;=0) {
        x=0;
        y=0;
        z=0;
        NepreklapajucaKugla::r=r;
    } else {
        throw std::domain_error ("Ilegalan poluprecnik");
    }
    posljednja=this;
}
NepreklapajucaKugla::NepreklapajucaKugla(double x, double y, double z, double r)
{
    prethodna=posljednja;
    
    NepreklapajucaKugla *drugaKugla=prethodna;
    while(drugaKugla!=nullptr){
        if(DaLiSeSijeku(x,y,z,r,*drugaKugla))
            throw std::logic_error("Nedozvoljeno preklapanje");
        drugaKugla=drugaKugla-&gt;prethodna;
    }
    
    if (r&gt;=0) {
        NepreklapajucaKugla::x=x;
        NepreklapajucaKugla::y=y;
        NepreklapajucaKugla::z=z;
        NepreklapajucaKugla::r=r;
    } else {
        throw std::domain_error ("Ilegalan poluprecnik");
    }
    
    posljednja=this;
}
NepreklapajucaKugla::NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r)
{
    prethodna=posljednja;
    
    NepreklapajucaKugla *drugaKugla=prethodna;
    while(drugaKugla!=nullptr){
        if(DaLiSeSijeku(x,y,z,r,*drugaKugla))
            throw std::logic_error("Nedozvoljeno preklapanje");
        drugaKugla=drugaKugla-&gt;prethodna;
    }
    
<a name="4"></a><font color="#FF00FF"><a href="match299-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    x=std::get&lt;0&gt;(centar);
    y=std::get&lt;1&gt;(centar);
    z=std::get&lt;2&gt;(centar);
    NepreklapajucaKugla::r=r;
    
    posljednja=this;
</font>}
NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar)
{
<a name="3"></a><font color="#00FFFF"><a href="match299-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    x=std::get&lt;0&gt;(centar);
    y=std::get&lt;1&gt;(centar);
    z=std::get&lt;2&gt;(centar);
    return *this;
}
NepreklapajucaKugla &amp;NepreklapajucaKugla::PostaviPoluprecnik(double r)
{
    if (r&gt;=0) NepreklapajucaKugla::r=r;
</font>    else throw std::domain_error ("Ilegalan poluprecnik");
    return *this;
}
void NepreklapajucaKugla::Transliraj(double delta_x, double delta_y, double delta_z)
{
    x+=delta_x;
    y+=delta_y;
    z+=delta_z;
}
double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2)
{
<a name="5"></a><font color="#FF0000"><a href="match299-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    double d (sqrt(pow(k2.x-k1.x,2)+pow(k2.y-k1.y,2)+pow(k2.z-k1.z,2)));
    return d;
</font>}
int main ()
{
    try {
        int n;
        std::cout&lt;&lt;"Unesite broj kugli: ";
        do {
            std::cin&gt;&gt;n;
            if (n&lt;=0 || !std::cin) {
                std::cin.clear();
                std::cin.ignore(1000, '\n');
                std::cout&lt;&lt;"Neispravan broj kugli, unesite ponovo!"&lt;&lt;std::endl;
            }
        } while (n&lt;=0 || !std::cin);
        std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; pok (n,nullptr);
        for (int i=0; i&lt;n; i++) {
            double x,y,z,r;
            bool greska (false);
            do {
                greska=false;
                std::cout&lt;&lt;"Unesite centar za "&lt;&lt;i+1&lt;&lt;". kuglu: ";
                std::cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
                if (!std::cin) {
                    greska=true;
                    std::cin.clear();
                    std::cin.ignore(1000,'\n');
                    std::cout&lt;&lt;"Neispravan centar"&lt;&lt;std::endl;
                    continue;
                }
                greska=false;
                std::cout&lt;&lt;"Unesite poluprecnik: ";
                std::cin&gt;&gt;r;
                if (!std::cin || r&lt;0) {
                    greska=true;
                    std::cin.clear();
                    std::cin.ignore(1000,'\n');
                    std::cout&lt;&lt;"Ilegalan poluprecnik"&lt;&lt;std::endl;
                    continue;
                }
            } while (greska);
            try{
<a name="0"></a><font color="#FF0000"><a href="match299-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

                pok[i]=std::make_shared&lt;NepreklapajucaKugla&gt;(x,y,z,r);
            } catch(std::logic_error e){
                std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                i--;
            }
        }
        std::sort(pok.begin(), pok.end(), [] (std::shared_ptr&lt;NepreklapajucaKugla&gt; k1, std::shared_ptr&lt;NepreklapajucaKugla&gt; k2){
            return k1-&gt;DajPovrsinu()&lt;k2-&gt;DajPovrsinu();
        });
        std::cout&lt;&lt;std::endl&lt;&lt;"Kugle nakon obavljenog sortiranja: "&lt;&lt;std::endl;
        std::for_each(pok.begin(), pok.end(), [] (std::shared_ptr&lt;NepreklapajucaKugla&gt; kugla){
            kugla-&gt;Ispisi();
</font>            std::cout&lt;&lt;std::endl;
        });
        
    } catch(std::domain_error e) {
        std::cout&lt;&lt;e.what();
    } catch(std::logic_error e){
        std::cout&lt;&lt;e.what();
    }

    return 0;
}
</pre>
</body>
</html>
