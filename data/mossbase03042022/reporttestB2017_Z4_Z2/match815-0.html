<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student4261.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student4261.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 2
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;

const double pi=4*atan(1);
const double eps=0.0000000001;

class NepreklapajucaKugla {
    double x, y, z, r;
    
    NepreklapajucaKugla* prethodni;
    static NepreklapajucaKugla* posljednji;
    
    static bool PreklapaSe (double x, double y, double z, double r, NepreklapajucaKugla* pok=nullptr) {
        NepreklapajucaKugla* p(posljednji);
        while (p!=nullptr) {
            if (std::sqrt( (x-(*p).x)*(x-(*p).x)+(y-(*p).y)*(y-(*p).y)+(z-(*p).z)*(z-(*p).z) )-(r+(*p).r)&lt;=eps &amp;&amp; p!=pok) return true;
            p=(*p).prethodni;
        }
<a name="3"></a><font color="#00FFFF"><a href="match815-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        return false;
    }
    
    
  public:
  
    explicit NepreklapajucaKugla(double r = 0) {
        if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if (PreklapaSe(0, 0, 0, r)) throw std::logic_error("Nedozvoljeno preklapanje");
        prethodni=posljednji;
</font>        x=0; y=0; z=0; NepreklapajucaKugla::r=r;
        posljednji=this;
    }
    
<a name="0"></a><font color="#FF0000"><a href="match815-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    NepreklapajucaKugla(double x, double y, double z, double r = 0) {
        if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if (PreklapaSe(x, y, z, r)) throw std::logic_error("Nedozvoljeno preklapanje");
        prethodni=posljednji;
        NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z; NepreklapajucaKugla::r=r;
</font>        posljednji=this;
    }
    
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0) {
        if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if (PreklapaSe(std::get&lt;0&gt;(centar), std::get&lt;1&gt;(centar), std::get&lt;2&gt;(centar), r)) throw std::logic_error("Nedozvoljeno preklapanje");
        prethodni=posljednji;
        x=std::get&lt;0&gt;(centar); y=std::get&lt;1&gt;(centar); z=std::get&lt;2&gt;(centar); NepreklapajucaKugla::r=r; 
        posljednji=this;
    }
    NepreklapajucaKugla (const NepreklapajucaKugla &amp;k)=delete;
    NepreklapajucaKugla &amp;operator= (const NepreklapajucaKugla &amp;k)=delete;
    
    ~NepreklapajucaKugla() {
        if (prethodni==nullptr) {
            if (this==posljednji) posljednji=nullptr;
            else{
                NepreklapajucaKugla* sljedeci(posljednji), *trenutni(posljednji);
                while ((*trenutni).prethodni!=nullptr) { if (trenutni!=posljednji) sljedeci=(*sljedeci).prethodni; trenutni=(*trenutni).prethodni; }
                trenutni=nullptr; (*sljedeci).prethodni=nullptr;
            }
        }
        else if (this==posljednji) { posljednji=prethodni; }
        else {
            NepreklapajucaKugla* sljedeci(posljednji), *trenutni(posljednji);
            while (trenutni!=this) { if (trenutni!=posljednji) sljedeci=(*sljedeci).prethodni; trenutni=(*trenutni).prethodni; }
            (*sljedeci).prethodni=(*trenutni).prethodni;
        }
    }
    
    double DajX() const { return x; }
    double DajY() const { return y; }
    double DajZ() const { return z; }
    
    std::tuple&lt;double, double, double&gt; DajCentar() const { return std::make_tuple(x, y, z); }
    double DajPoluprecnik() const { return r; }
    double DajPovrsinu() const { return 4*r*r*pi; }
    double DajZapreminu() const { return 4*r*r*r*pi/3; }
    
    NepreklapajucaKugla &amp;PostaviX(double x) { if (PreklapaSe(x, y, z, r, this)) throw std::logic_error("Nedozvoljeno preklapanje"); NepreklapajucaKugla::x=x;  return *this; }
    NepreklapajucaKugla &amp;PostaviY(double y) { if (PreklapaSe(x, y, z, r, this)) throw std::logic_error("Nedozvoljeno preklapanje"); NepreklapajucaKugla::y=y; return *this; }
    NepreklapajucaKugla &amp;PostaviZ(double z) { if (PreklapaSe(x, y, z, r, this)) throw std::logic_error("Nedozvoljeno preklapanje"); NepreklapajucaKugla::z=z; return *this; }
    
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) { if (PreklapaSe(x, y, z, r, this)) throw std::logic_error("Nedozvoljeno preklapanje"); NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z; return *this; }
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) { 
<a name="4"></a><font color="#FF00FF"><a href="match815-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        if (PreklapaSe(std::get&lt;0&gt;(centar), std::get&lt;1&gt;(centar), std::get&lt;2&gt;(centar), r, this)) throw std::logic_error("Nedozvoljeno preklapanje");
        x=std::get&lt;0&gt;(centar); y=std::get&lt;1&gt;(centar); z=std::get&lt;2&gt;(centar);
</font>        return *this; 
    }
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r) { if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik"); if (PreklapaSe(x, y, z, r, this)) throw std::logic_error("Nedozvoljeno preklapanje"); NepreklapajucaKugla::r=r; return *this; }
    
    void Ispisi() const { std::cout &lt;&lt; "{(" &lt;&lt; DajX() &lt;&lt; "," &lt;&lt; DajY() &lt;&lt; "," &lt;&lt; DajZ() &lt;&lt; ")," &lt;&lt; DajPoluprecnik() &lt;&lt; "}"; }
    
    void Transliraj(double delta_x, double delta_y, double delta_z) { 
        if (PreklapaSe(x+delta_x, y+delta_y, z+delta_z, r, this)) throw std::logic_error("Nedozvoljeno preklapanje");
        x+=delta_x; y+=delta_y; z+=delta_z;
    }
    
<a name="2"></a><font color="#0000FF"><a href="match815-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);
};

double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2) {
    return std::sqrt((k1.x-k2.x)*(k1.x-k2.x)+(k1.y-k2.y)*(k1.y-k2.y)+(k1.z-k2.z)*(k1.z-k2.z));
</font>}

NepreklapajucaKugla* NepreklapajucaKugla::posljednji=nullptr;

int main ()
{
    int n;
    std::cout &lt;&lt; "Unesite broj kugli: "; 
    while ( std::cin &gt;&gt; n, !std::cin || n&lt;=0) {
        std::cout &lt;&lt; "Neispravan broj kugli, unesite ponovo!" &lt;&lt; std::endl;
        std::cin.clear(); std::cin.ignore(10000, '\n');
    }
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; v;
    v.resize(n);
    
    for (int i=0; i&lt;n; i++) {
        std::cout &lt;&lt; "Unesite centar za " &lt;&lt; i+1 &lt;&lt; ". kuglu: ";
        double x, y, z, r;
        while (std::cin &gt;&gt; x &gt;&gt; y &gt;&gt; z, !std::cin) {
            std::cout &lt;&lt; "Neispravan centar, unesite ponovo:" &lt;&lt; std::endl;
            std::cin.clear(); std::cin.ignore(1000, '\n');
        }
        std::cout &lt;&lt; "Unesite poluprecnik: ";
        while (std::cin &gt;&gt; r, !std::cin || r&lt;0) {
            std::cout &lt;&lt; "Neispravan poluprecnik, unesite ponovo:" &lt;&lt; std::endl;
            std::cin.clear(); std::cin.ignore(1000, '\n');
        }
        try {
            v.at(i)=std::make_shared&lt;NepreklapajucaKugla&gt;(x, y, z, r);
        }
        catch(std::exception &amp;izuzetak) {
<a name="1"></a><font color="#00FF00"><a href="match815-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
            i--;
        }
    }
    std::sort(v.begin(), v.end(), [](std::shared_ptr&lt;NepreklapajucaKugla&gt; p1, std::shared_ptr&lt;NepreklapajucaKugla&gt; p2) { return (*p1).DajPovrsinu()&lt;(*p2).DajPovrsinu(); } );
</font>    std::cout &lt;&lt; std::endl &lt;&lt; "Kugle nakon obavljenog sortiranja: " &lt;&lt; std::endl;
    std::for_each(v.begin(), v.end(), [](std::shared_ptr&lt;NepreklapajucaKugla&gt; p) { (*p).Ispisi(); std::cout &lt;&lt; std::endl; } );
    
    
    /*NepreklapajucaKugla* p;
    
    try {
        p=new NepreklapajucaKugla(5, 5, 5, 1);
        
        
        try {
            NepreklapajucaKugla k1(5, 5, 5);
        }
        catch(...) { std::cout &lt;&lt; "greska"; }
        
    }
    catch(std::exception &amp;iz) {
        std::cout &lt;&lt; iz.what();
    }
    delete p;*/
    
	return 0;
}
</pre>
</body>
</html>
