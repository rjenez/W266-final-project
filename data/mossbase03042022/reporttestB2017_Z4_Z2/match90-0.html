<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student6728.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student6728.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match90-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_36.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 2

#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;new&gt;
#include &lt;algorithm&gt;

// KOPIRAN PRETHODNI ZADATAK! zatim izmijenjen



const double pi=4*atan(1);
const double eps=pow(10, -10);

class NepreklapajucaKugla {
    double X, Y, Z, R;
    NepreklapajucaKugla *prije;
    static NepreklapajucaKugla *posljednja;
    bool Preklapanje(const NepreklapajucaKugla &amp;k1, double x, double y, double z, double r);
public:
    explicit NepreklapajucaKugla(double r = 0) {
        if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        
        for (NepreklapajucaKugla *p=posljednja; p!=nullptr; p=p-&gt;prije)
            if (Preklapanje(*p, 0, 0, 0, r)==true) throw std::logic_error("Nedozvoljeno preklapanje");
        
        X=0; Y=0; Z=0; R=r;
        
        if(posljednja==nullptr) prije=nullptr;
        else prije=posljednja;
        posljednja=this;
    }
    
    NepreklapajucaKugla(double x, double y, double z, double r = 0) {
        if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        
        for (NepreklapajucaKugla *p=posljednja; p!=nullptr; p=p-&gt;prije)
            if (Preklapanje(*p, x, y, z, r)==true) throw std::logic_error("Nedozvoljeno preklapanje");
        
        X=x; Y=y; Z=z; R=r;
        
        if(posljednja==nullptr) prije=nullptr;
        else prije=posljednja;
        posljednja=this;
    }
    
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0) {
        if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        
        for (NepreklapajucaKugla *p=posljednja; p!=nullptr; p=p-&gt;prije)
            if (Preklapanje(*p, std::get&lt;0&gt;(centar), std::get&lt;1&gt;(centar), std::get&lt;2&gt;(centar), r)==true) throw std::logic_error("Nedozvoljeno preklapanje");
        
        X=std::get&lt;0&gt;(centar); Y=std::get&lt;1&gt;(centar); Z=std::get&lt;2&gt;(centar); R=r;
        
        if(posljednja==nullptr) prije=nullptr;
        else prije=posljednja;
        posljednja=this;
    }
    
    ~NepreklapajucaKugla() {
        if (posljednja!=nullptr &amp;&amp; posljednja-&gt;prije!=nullptr &amp;&amp; this-&gt;prije!=nullptr) {
            if (this==posljednja) posljednja=this-&gt;prije;
            if (this-&gt;prije==nullptr) {
                NepreklapajucaKugla *prethodni=posljednja;
                for (NepreklapajucaKugla *p=posljednja-&gt;prije; p!=nullptr; p=p-&gt;prije) {
                    if (p==this) prethodni-&gt;prije=p-&gt;prije;
                    prethodni=p;
                }
            }   
        }
    }
    
    NepreklapajucaKugla (const NepreklapajucaKugla &amp;k) = delete;
    NepreklapajucaKugla &amp; operator=(const NepreklapajucaKugla &amp;k) = delete;
    double DajX() const { return X; }
    double DajY() const { return Y; }
    double DajZ() const { return Z; }
    std::tuple&lt;double, double, double&gt; DajCentar() const { return std::make_tuple(X, Y, Z); }
</font><a name="2"></a><font color="#0000FF"><a href="match90-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_13.gif"/></a>

    double DajPoluprecnik() const { return R; }
    double DajPovrsinu() const { return 4*pi*R*R; }
    double DajZapreminu() const { return (4/double(3))*pi*R*R*R; }
    NepreklapajucaKugla &amp;PostaviX(double x) { X=x; return *this; }
    NepreklapajucaKugla &amp;PostaviY(double y) { Y=y; return *this; }
    NepreklapajucaKugla &amp;PostaviZ(double z) { Z=z; return *this; }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) { X=x; Y=y; Z=z; return *this; }
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) { X=std::get&lt;0&gt;(centar); Y=std::get&lt;1&gt;(centar); Z=std::get&lt;2&gt;(centar); return *this; }
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r) { if(r&lt;0) throw std::domain_error("Ilegalan poluprecnik"); R=r; return *this; }
    void Ispisi() const { std::cout &lt;&lt; "{(" &lt;&lt; X &lt;&lt; "," &lt;&lt; Y &lt;&lt; "," &lt;&lt; Z &lt;&lt; ")," &lt;&lt; R &lt;&lt; "}" &lt;&lt; std::endl; }
</font><a name="0"></a><font color="#FF0000"><a href="match90-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_46.gif"/></a>

    void Transliraj(double delta_x, double delta_y, double delta_z) { X+=delta_x; Y+=delta_y; Z+=delta_z; } 
    
    bool DaLiSadrzi(const NepreklapajucaKugla &amp;k) const;
    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2); 
};

NepreklapajucaKugla *NepreklapajucaKugla::posljednja(nullptr);



// provjeriti za svaki slucaj
bool NepreklapajucaKugla::DaLiSadrzi(const NepreklapajucaKugla &amp;k) const {
    // d - udaljenost centara
    double d=sqrt(pow((X-k.X), 2) + pow((Y-k.Y), 2) + pow((Z-k.Z), 2));
    double rp=fabs(R-k.R); // razlika poluprecnika
    if ((d&lt;R || (fabs(d-R)&lt;eps*(fabs(d)+fabs(R)))) &amp;&amp; ((d&lt;rp) || (fabs(d-rp)&lt;eps*(fabs(d)+fabs(rp)))))
        return true;
    return false;
}


double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2) {
    return sqrt(pow((k2.X-k1.X), 2) + pow((k2.Y-k1.Y), 2) + pow((k2.Z-k1.Z), 2));
}


bool NepreklapajucaKugla::Preklapanje(const NepreklapajucaKugla &amp;k1, double x, double y, double z, double r) {
    // d - udaljenost centara
    double d=sqrt(pow((x-k1.X), 2) + pow((y-k1.Y), 2) + pow((z-k1.Z), 2));
    double zp=k1.R+r; // zbir poluprecnika
    if (d&lt;zp || (fabs(d-zp)&lt;eps*(fabs(d)+fabs(zp)))) return true;
    return false;
}



int main ()
{   
    int n;
    std::cout &lt;&lt; "Unesite broj kugli: ";
    std::cin &gt;&gt; n;
    while (!std::cin || n&lt;1) {
        std::cout &lt;&lt; "Neispravan broj kugli, unesite ponovo!" &lt;&lt; std::endl;
        std::cin.clear();
        std::cin.ignore(1000, '\n');
        std::cin &gt;&gt; n;
    }
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; v;
    
    
    for (int i=0; i&lt;n; i++) {
        double x, y, z, r;
        std::cout &lt;&lt; "Unesite centar za " &lt;&lt; i+1 &lt;&lt; ". kuglu: ";
        std::cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
        while (!std::cin) {
            std::cout &lt;&lt; "Neispravan centar, unesite ponovo:" &lt;&lt; std::endl;
            std::cin.clear();
            std::cin.ignore(1000, '\n');
            std::cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
        }
        std::cout &lt;&lt; "Unesite poluprecnik: ";
        std::cin &gt;&gt; r;
        while (r&lt;0 || !std::cin) {
            std::cout &lt;&lt; "Neispravan poluprecnik, unesite ponovo:"&lt;&lt; std::endl;
            std::cin.clear();
            std::cin.ignore(1000, '\n');
            std::cin &gt;&gt; r;
        }
        
        try {
            v.push_back(std::make_shared&lt;NepreklapajucaKugla&gt;(x, y, z, r));
        }
        catch (std::logic_error e) {
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
        }
    }
    
    std::sort (std::begin(v), std::end(v), [] (std::shared_ptr&lt;NepreklapajucaKugla&gt; k1, std::shared_ptr&lt;NepreklapajucaKugla&gt; k2) { return (*k1).DajPovrsinu() &lt; (*k2).DajPovrsinu(); });
    
    std::cout &lt;&lt; std::endl &lt;&lt; "Kugle nakon obavljenog sortiranja: " &lt;&lt; std::endl;
    
    std::for_each (std::begin(v), std::end(v), [] (std::shared_ptr&lt;NepreklapajucaKugla&gt; k) { (*k).Ispisi(); });
    
	return 0;
</font>}</pre>
</body>
</html>
