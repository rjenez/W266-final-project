<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2478.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2478.cpp<p></p><pre>

#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#define PI 4*std::atan(1)
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;

<a name="1"></a><font color="#00FF00"><a href="match159-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_27.gif"/></a>

bool JesuLiJednaki (double x, double y, double Eps = 1e-10) {
    return std::fabs(x-y) &lt;= Eps * (std::fabs(x) + std::fabs(y));
}

class NepreklapajucaKugla {
    double x, y, z, r;
    void testNaPreklapanje();
    std::shared_ptr&lt;NepreklapajucaKugla&gt; posljednja;
    static std::shared_ptr&lt;NepreklapajucaKugla&gt; posljednjaKreirana;

public:
    NepreklapajucaKugla (const NepreklapajucaKugla &amp;k)= delete; //Zabrana kopiranja
    NepreklapajucaKugla &amp;operator  = (const NepreklapajucaKugla &amp;k)= delete; //Zabrana dodjele
    ~NepreklapajucaKugla ();
    explicit NepreklapajucaKugla(double r = 0) {
        if (r&lt;0) throw std::domain_error ("Ilegalan poluprecnik");
        NepreklapajucaKugla::r = r;
    }
    NepreklapajucaKugla(double x, double y, double z, double r = 0){
        if (r&lt;0) throw std::domain_error ("Ilegalan poluprecnik");
        posljednja = posljednjaKreirana;
        posljednjaKreirana = std::shared_ptr&lt;NepreklapajucaKugla&gt; (this);
        NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z; NepreklapajucaKugla::r=r;
        testNaPreklapanje();
    }
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp; centar, double r = 0){
        if (r&lt;0) throw std::domain_error ("Ilegalan poluprecnik");
        NepreklapajucaKugla::x=std::get&lt;0&gt;(centar); NepreklapajucaKugla::y=std::get&lt;1&gt;(centar); NepreklapajucaKugla::z=std::get&lt;2&gt;(centar); NepreklapajucaKugla::r=r;
    }
    double DajX() const {
        return x;
    }
    double DajY() const {
        return y;
    };
    double DajZ() const {
        return z;
    };
    std::tuple&lt;double, double, double&gt; DajCentar() const {
</font><a name="0"></a><font color="#FF0000"><a href="match159-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_69.gif"/></a>

        return std::make_tuple(x, y, z);
    }
    double DajPoluprecnik() const {
        return r;
    }
    double DajPovrsinu() const {
        return 4*PI*r*r;
    }
    double DajZapreminu() const {
        return 4/3*PI*r*r*r;
    }
    NepreklapajucaKugla &amp;PostaviX(double x) {
        NepreklapajucaKugla::x = x;
        testNaPreklapanje();
        return *this;
    }
    NepreklapajucaKugla &amp; PostaviY(double y) {
        NepreklapajucaKugla::y = y;
        testNaPreklapanje();
        return *this;
    }
    NepreklapajucaKugla &amp; PostaviZ(double z) {
        NepreklapajucaKugla::z = z;
        testNaPreklapanje();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) {
        NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z;
        testNaPreklapanje();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp; centar){
        NepreklapajucaKugla::x = std::get&lt;0&gt; (centar);
        NepreklapajucaKugla::y = std::get&lt;1&gt; (centar);
        NepreklapajucaKugla::z = std::get&lt;2&gt; (centar);
        testNaPreklapanje();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r){
        NepreklapajucaKugla::r = r;
        if (r&lt;0) throw std::domain_error ("Ilegalan poluprecnik");
        testNaPreklapanje();
        return *this;
    }
    int dajBrojElemenata () const ;
    void Ispisi() const {
        std::cout&lt;&lt;"{("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;","&lt;&lt;z&lt;&lt;"),"&lt;&lt;r&lt;&lt;"}\n";
    }
    void Transliraj(double delta_x, double delta_y, double delta_z){
        x+=delta_x; y+=delta_y; z+=delta_z;
        testNaPreklapanje();
    }

    friend double RastojanjeCentara(const NepreklapajucaKugla &amp; k1, const NepreklapajucaKugla &amp; k2);
};
std::shared_ptr&lt;NepreklapajucaKugla&gt; NepreklapajucaKugla::posljednjaKreirana(nullptr);
double RastojanjeCentara (double x1, double y1, double z1,
                          double x2, double y2, double z2) {
    return std::sqrt (  (x1-x2)*(x1-x2)+
                        (y1-y2)*(y1-y2)+
                        (z1-z2)*(z1-z2)
    );
}



void NepreklapajucaKugla::testNaPreklapanje()
{
    for (auto it=posljednjaKreirana-&gt;posljednja; it!=nullptr; it=it-&gt;posljednja){
        //if (posljednja == nullptr) break; 
        if (RastojanjeCentara(it-&gt;x, it-&gt;y, it-&gt;z, posljednjaKreirana-&gt;x, posljednjaKreirana-&gt;y, posljednjaKreirana-&gt;z) &lt;  (it-&gt;r +posljednjaKreirana-&gt;r)
                ) {
            posljednjaKreirana=posljednjaKreirana-&gt;posljednja;
            posljednja=nullptr;
            throw std::logic_error ("Nedozvoljeno preklapanje");
        }
    }
}
int NepreklapajucaKugla::dajBrojElemenata() const {

    int i(0);
    for (auto it=posljednjaKreirana; it!=nullptr; it=it-&gt;posljednja){
        i++;
    }
    return i;
}

NepreklapajucaKugla::~NepreklapajucaKugla() {
    std::cout&lt;&lt;"keno";
    // posljednjaKreirana = nullptr;
/*if (dajBrojElemenata()==0) return;
auto it1 (posljednjaKreirana);
int j(0);
for (int i=0; i&lt;dajBrojElemenata(); i++) {
    if (it1 == posljednja ) {j = i-1; break; }
}
if (j==0){
if (dajBrojElemenata()==1) posljednjaKreirana = nullptr;
else {posljednjaKreirana = posljednjaKreirana-&gt;posljednja;
}
}
else if (posljednja == nullptr) {
auto it ( posljednjaKreirana);
for (int i=0; i&lt;dajBrojElemenata()-2; i++)
    {it = it-&gt;posljednja;}
it-&gt;posljednja = nullptr;
}
else   {
auto it2 (posljednjaKreirana);
for (int i=0; i&lt;j-1; i++)
    {it2 = it2-&gt; posljednja; }
it2-&gt;posljednja = it1;
}
*/
}
typedef std::shared_ptr&lt;NepreklapajucaKugla&gt; pametni;
int main ()
{
    int n;
    std::cout&lt;&lt;"Unesite broj kugli: ";
    std::cin&gt;&gt;n;
    std::vector&lt;pametni&gt; vektor;
    double x,y,z,r;
    for (int i=1; i&lt;=n; i++){
        try {
            std::cout&lt;&lt;"Unesite centar za "&lt;&lt;i&lt;&lt;". kuglu: ";
            std::cin&gt;&gt;x;
            if (!std::cin) throw std::domain_error("Ilegalan unos!");
            std::cin&gt;&gt;y;
            if (!std::cin) throw std::domain_error("Ilegalan unos!");
            std::cin&gt;&gt;z;
            if (!std::cin) throw std::domain_error("Ilegalan unos!");
            std::cout&lt;&lt;"Unesite poluprecnik: ";
            std::cin&gt;&gt;r;
            if (!std::cin) throw std::domain_error("Ilegalan unos!");
            //auto p (std::make_shared&lt;NepreklapajucaKugla&gt; (NepreklapajucaKugla(x,y,z,r)));
            std::shared_ptr&lt;NepreklapajucaKugla&gt; p (new NepreklapajucaKugla(x,y,z,r)) ;
            vektor.push_back( p) ;
        }
        catch(std::domain_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;"\n";
            i--;
            std::cin.ignore (10000, '\n');
        }
        catch (std::logic_error e) {
            std::cout&lt;&lt;e.what()&lt;&lt;"\n";
            i--;
            std::cin.ignore (10000, '\n');
</font>        }
    }

/*    std::sort (std::begin(vektor), std::end(vektor), [](pametni k1, pametni k2) { return  (k1-&gt;DajPovrsinu() ) &lt; (k2-&gt;DajPovrsinu() ); } );
     std::cout&lt;&lt;"Kugle nakon obavljenog sortiranja: ";
     std::for_each (std::begin(vektor), std::end(vektor), [](pametni &amp;k) {k-&gt;Ispisi();} );*/
    return 0;
}
</pre>
</body>
</html>
