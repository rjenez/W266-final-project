<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2868.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2868.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 1
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;

const double pi = 4*std::atan(1);
const double eps = std::pow(10, -10);

bool Isti(double x, double y)
{
    return (std::fabs(x - y) &lt;= eps * (std::fabs(x) + std::fabs(y)));
}

double Rastojanje(double x1, double y1, double z1, double x2, double y2, double z2)
{
    return std::sqrt(std::pow(x1-x2, 2) + std::pow(y1-y2, 2) + std::pow(z1-z2, 2));
}

class NepreklapajucaKugla
{
    double x, y, z, r;
    NepreklapajucaKugla* prosla_kugla;
    static NepreklapajucaKugla* pocetak;
<a name="0"></a><font color="#FF0000"><a href="match871-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    static bool DaLiSePreklapaju(const NepreklapajucaKugla &amp;k1, double x, double y, double z, double r) {
        return (Rastojanje(k1.DajX(), k1.DajY(), k1.DajZ(), x, y, z) &lt;= (k1.DajPoluprecnik() + r));
    }
public:
    explicit NepreklapajucaKugla(double r = 0) {
        if (!pocetak) {
</font>            pocetak=this;
            prosla_kugla=nullptr;
        } else {
            NepreklapajucaKugla* p(pocetak);
            do {
                if (DaLiSePreklapaju(*p, 0, 0, 0, r))
                    throw std::logic_error("Nedozvoljeno preklapanje");
                p = p-&gt;prosla_kugla;
            } while (p!=nullptr);
            prosla_kugla=pocetak;
            pocetak=this;
        }
        if (r&lt;0)
            throw std::domain_error("Ilegalan poluprecnik");
        x=0;
        y=0;
        z=0;
        NepreklapajucaKugla::r=r;
    }

    NepreklapajucaKugla(double x, double y, double z, double r = 0) {
        if (!pocetak) {
            pocetak=this;
            prosla_kugla=nullptr;
        } else {
            NepreklapajucaKugla* p(pocetak);
            do {
                if (DaLiSePreklapaju(*p, x, y, z, r))
                    throw std::logic_error("Nedozvoljeno preklapanje");
                p = p-&gt;prosla_kugla;
            } while (p!=nullptr);
            prosla_kugla=pocetak;
            pocetak=this;
        }
        if (r&lt;0)
            throw std::domain_error("Ilegalan poluprecnik");
        NepreklapajucaKugla::x=x;
        NepreklapajucaKugla::y=y;
        NepreklapajucaKugla::z=z;
        NepreklapajucaKugla::r=r;
    }

    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0) {
        if (!pocetak) {
            pocetak=this;
            prosla_kugla=nullptr;
        } else {
            NepreklapajucaKugla* p(pocetak);
            do {
<a name="4"></a><font color="#FF00FF"><a href="match871-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                if (DaLiSePreklapaju(*p, std::get&lt;0&gt;(centar), std::get&lt;1&gt;(centar), std::get&lt;2&gt;(centar), r))
                    throw std::logic_error("Nedozvoljeno preklapanje");
</font>                p = p-&gt;prosla_kugla;
            } while (p!=nullptr);
            prosla_kugla=pocetak;
            pocetak=this;
        }
        if (r&lt;0)
            throw std::domain_error("Ilegalan poluprecnik");
        NepreklapajucaKugla::x=std::get&lt;0&gt;(centar);
        NepreklapajucaKugla::y=std::get&lt;1&gt;(centar);
        NepreklapajucaKugla::z=std::get&lt;2&gt;(centar);
        NepreklapajucaKugla::r=r;
    }

    NepreklapajucaKugla(const NepreklapajucaKugla &amp;k) = delete;
    NepreklapajucaKugla(NepreklapajucaKugla &amp;&amp;k) = delete;
    NepreklapajucaKugla&amp; operator =(const NepreklapajucaKugla &amp;k) = delete;
    NepreklapajucaKugla&amp; operator =(NepreklapajucaKugla &amp;&amp;k) = delete;

    ~NepreklapajucaKugla() {
        if (this==pocetak) {
            pocetak=this-&gt;prosla_kugla;
        } else {
            NepreklapajucaKugla* p(pocetak);
            do {
                if (this==p-&gt;prosla_kugla) {
                    p-&gt;prosla_kugla=this-&gt;prosla_kugla;
                    break;
                }
                p = p-&gt;prosla_kugla;
            } while (p!=nullptr);
        }
    }

    double DajX() const {
        return x;
    }
    double DajY() const {
        return y;
    }
    double DajZ() const {
        return z;
    }
    std::tuple&lt;double, double, double&gt; DajCentar() const {
        return std::make_tuple(x, y, z);
    }
    double DajPoluprecnik() const {
        return r;
    }
    double DajPovrsinu() const {
        return 4*r*r*pi;
    }
    double DajZapreminu() const {
        return 4*r*r*r*pi/3;
    }
    NepreklapajucaKugla &amp;PostaviX(double x) {
        NepreklapajucaKugla* p(pocetak);
        do {
            if (DaLiSePreklapaju(*p, x, y, z, r))
                throw std::logic_error("Nedozvoljeno preklapanje");
            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        NepreklapajucaKugla::x=x;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviY(double y) {
        NepreklapajucaKugla* p(pocetak);
        do {
            if (DaLiSePreklapaju(*p, x, y, z, r))
                throw std::logic_error("Nedozvoljeno preklapanje");
            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        NepreklapajucaKugla::y=y;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviZ(double z) {
        NepreklapajucaKugla* p(pocetak);
        do {
            if (DaLiSePreklapaju(*p, x, y, z, r))
                throw std::logic_error("Nedozvoljeno preklapanje");
            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        NepreklapajucaKugla::z=z;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) {
        NepreklapajucaKugla* p(pocetak);
        do {
            if (DaLiSePreklapaju(*p, x, y, z, r))
                throw std::logic_error("Nedozvoljeno preklapanje");
            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        NepreklapajucaKugla::x=x;
        NepreklapajucaKugla::y=y;
        NepreklapajucaKugla::z=z;
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) {
        NepreklapajucaKugla* p(pocetak);
        do {
<a name="5"></a><font color="#FF0000"><a href="match871-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            if (DaLiSePreklapaju(*p, std::get&lt;0&gt;(centar), std::get&lt;1&gt;(centar), std::get&lt;2&gt;(centar), r))
                throw std::logic_error("Nedozvoljeno preklapanje");
</font>            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        NepreklapajucaKugla::x=std::get&lt;0&gt;(centar);
        NepreklapajucaKugla::y=std::get&lt;1&gt;(centar);
        NepreklapajucaKugla::z=std::get&lt;2&gt;(centar);
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r) {
        NepreklapajucaKugla* p(pocetak);
        do {
            if (DaLiSePreklapaju(*p, x, y, z, r))
                throw std::logic_error("Nedozvoljeno preklapanje");
            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        if (r&lt;0)
<a name="2"></a><font color="#0000FF"><a href="match871-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            throw std::domain_error("Ilegalan poluprecnik");
        NepreklapajucaKugla::r=r;
        return *this;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "{(" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; "," &lt;&lt; z &lt;&lt; ")," &lt;&lt; r &lt;&lt; "}" &lt;&lt; std::endl;
</font>    }
    void Transliraj(double delta_x, double delta_y, double delta_z) {
        NepreklapajucaKugla* p(pocetak);
        do {
            if (DaLiSePreklapaju(*p, x+delta_x, y+delta_y, z+delta_z, r))
                throw std::logic_error("Nedozvoljeno preklapanje");
            p = p-&gt;prosla_kugla;
        } while (p!=nullptr);
        x+=delta_x;
        y+=delta_y;
        z+=delta_z;
    }

    bool DaLiSadrzi(const NepreklapajucaKugla &amp;k) const {
        return (k.r&lt;this-&gt;r &amp;&amp; RastojanjeCentara(*this, k) &lt;= std::fabs(r - k.r));
    }
    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);

};

NepreklapajucaKugla* NepreklapajucaKugla::pocetak = nullptr;

<a name="1"></a><font color="#00FF00"><a href="match871-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2)
{
    return Rastojanje(k1.x, k1.y, k1.z, k2.x, k2.y, k2.z);
</font>}


int main ()
{
    int n;
    std::cout &lt;&lt; "Unesite broj kugli: ";
    do {
        std::cin &gt;&gt; n;
<a name="3"></a><font color="#00FFFF"><a href="match871-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if (!std::cin || n&lt;=0) {
            std::cin.clear();
            std::cin.ignore(10000,'\n');
            std::cout &lt;&lt; "Neispravan broj kugli, unesite ponovo!" &lt;&lt; std::endl;
        } else
</font>            break;
    } while (true);
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; niz(n, nullptr);
    for (int i = 0; i &lt; n; i++) {
        double x, y, z, r;
        bool valja1(false), valja2(false);
        
        std::cout &lt;&lt; "Unesite centar za " &lt;&lt; i+1 &lt;&lt; ". kuglu: ";
        do {
            std::cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
            if (!std::cin) {
                std::cin.clear();
                std::cin.ignore(10000,'\n');
                std::cout &lt;&lt; "Neispravan centar, unesite ponovo:" &lt;&lt; std::endl;
                continue;
            } else
                valja1=true;
        } while(!valja1);
        
        std::cout &lt;&lt; "Unesite poluprecnik: ";
        do {
            std::cin &gt;&gt; r;
            if (!std::cin || r&lt;0) {
                std::cin.clear();
                std::cin.ignore(10000,'\n');
                std::cout &lt;&lt; "Neispravan poluprecnik, unesite ponovo:" &lt;&lt; std::endl;
            } else
                valja2=true;
        } while (!valja2);
        
        std::shared_ptr&lt;NepreklapajucaKugla&gt; pomoc(nullptr);
        try {
            pomoc = std::make_shared&lt;NepreklapajucaKugla&gt;(x, y, z, r);
        } catch (const std::exception &amp;greska) {
            std::cout &lt;&lt; greska.what() &lt;&lt; std::endl;
            i--;
            continue;
        }
        niz.at(i)=pomoc;
    }
    std::sort(niz.begin(), niz.end(), [] (const std::shared_ptr&lt;NepreklapajucaKugla&gt; &amp;k1, const std::shared_ptr&lt;NepreklapajucaKugla&gt; &amp;k2) {
        return k1-&gt;DajPoluprecnik() &lt; k2-&gt;DajPoluprecnik();
    });
    std::cout &lt;&lt; "\nKugle nakon obavljenog sortiranja: " &lt;&lt; std::endl;
    for (auto i : niz)
        i-&gt;Ispisi();
    return 0;
}
</pre>
</body>
</html>
