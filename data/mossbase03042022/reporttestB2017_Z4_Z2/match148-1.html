<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student4973.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student6369.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match148-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_36.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 1
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;tuple&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

constexpr double PI=atan(1)*4;
constexpr double eps=0.000000001;


class NepreklapajucaKugla
{
    
    static NepreklapajucaKugla *posljednjaKreirana;
    NepreklapajucaKugla* prethodna;
    double x,y,z,poluprecnik;
    
    void DaLiSePreklapaju(){
        for(NepreklapajucaKugla *pok=posljednjaKreirana; pok!=nullptr; pok=pok-&gt;prethodna){
            if(this-&gt;DaLiSePreklapaju(*pok)){
                throw std::logic_error("Nedozvoljeno preklapanje");
            }
        }
    }
    
    bool DaLiSePreklapaju(const NepreklapajucaKugla &amp;k){
        double zbir_poluprecnika = DajPoluprecnik() + k.DajPoluprecnik();
        double udaljenost = RastojanjeCentara(*this,k);
        if(zbir_poluprecnika &gt; udaljenost) return true;
        return false;
    }

    
    

public:

    ~NepreklapajucaKugla(){
        
        if(this==posljednjaKreirana){
            posljednjaKreirana=posljednjaKreirana-&gt;prethodna;
        }
        else{
            NepreklapajucaKugla *prije_prethodne = posljednjaKreirana;
            for(auto pok=posljednjaKreirana-&gt;prethodna; pok!=nullptr; pok=pok-&gt;prethodna){
                if(this==pok){
                    prije_prethodne-&gt;prethodna=this-&gt;prethodna;
                    break;
                }
                prije_prethodne=pok;
            }
        }
    }

    explicit NepreklapajucaKugla(double r = 0) {
        if(r &lt; 0) throw std::domain_error("Ilegalan poluprecnik");
        poluprecnik=r;
        x = 0;
        y = 0;
        z = 0;
        //postavljamo prethodnu na zadnju DO SADA kreiranu
        prethodna=posljednjaKreirana;
        
        //Testiramo da li se ova preklapa i sa jednom drugom
        this-&gt;DaLiSePreklapaju();
        
        //Ako se ne preklapa onda azuriramo posljenjuKreiranu
        posljednjaKreirana=this;
        
    }
    NepreklapajucaKugla(double x, double y, double z, double r = 0) {
        
        if(r &lt; 0) throw std::domain_error("Ilegalan poluprecnik");
        poluprecnik=r;
        this-&gt;x = x;
        this-&gt;y = y;
        this-&gt;z = z;
        //postavljamo prethodnu na zadnju DO SADA kreiranu
        prethodna=posljednjaKreirana;
        
        //Testiramo da li se ova preklapa i sa jednom drugom
        this-&gt;DaLiSePreklapaju();
        
        //Ako se ne preklapa onda azuriramo posljenjuKreiranu
        posljednjaKreirana=this;
        

    }
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0) {
        if(r &lt; 0) throw std::domain_error("Ilegalan poluprecnik");
        poluprecnik=r;
        x = std::get&lt;0&gt;(centar);
        y = std::get&lt;1&gt;(centar);
        z = std::get&lt;2&gt;(centar);
        
        //postavljamo prethodnu na zadnju DO SADA kreiranu
        prethodna=posljednjaKreirana;
        
        //Testiramo da li se ova preklapa i sa jednom drugom
        this-&gt;DaLiSePreklapaju();
        
        //Ako se ne preklapa onda azuriramo posljenjuKreiranu
        posljednjaKreirana=this;
        

    }
    double DajX() const {
        return x;
    }
    double DajY() const {
        return y;
    }
    double DajZ() const {
        return z;
    }
    
    
    std::tuple&lt;double, double, double&gt; DajCentar() const {
</font><a name="0"></a><font color="#FF0000"><a href="match148-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_61.gif"/></a>

        return std::make_tuple(x,y,z);
    }
    
    double DajPoluprecnik() const {
        return poluprecnik;
    }
    double DajPovrsinu() const {
        return 4*poluprecnik*poluprecnik*PI;
    }
    double DajZapreminu() const {
        return ((4/3.)*poluprecnik*poluprecnik*poluprecnik)*PI;
    }
    
    
    NepreklapajucaKugla &amp;PostaviX(double x) {
        this-&gt;x=x;
        this-&gt;DaLiSePreklapaju();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviY(double y) {
        this-&gt;y = y;
        this-&gt;DaLiSePreklapaju();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviZ(double z) {
        this-&gt;z = z;
        this-&gt;DaLiSePreklapaju();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) {
        this-&gt; x= x;
        this -&gt; y = y;
        this -&gt; z = z;
        this-&gt;DaLiSePreklapaju();
        return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) {
        this-&gt;x = std::get&lt;0&gt;(centar);
        this-&gt;y = std::get&lt;1&gt;(centar);
        this-&gt;z = std::get&lt;2&gt;(centar);
        this-&gt;DaLiSePreklapaju();
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r) {
        if(r &lt; 0) throw std::domain_error("Ilegalan poluprecnik");
        this-&gt;poluprecnik = r;
        this-&gt;DaLiSePreklapaju();
        return *this;
    }
    
    
    void Ispisi() const {
        std::cout&lt;&lt;"{"&lt;&lt;"("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;","&lt;&lt;z&lt;&lt;")"&lt;&lt;","&lt;&lt;poluprecnik&lt;&lt;"}";
    }
    
    
    void Transliraj(double delta_x, double delta_y, double delta_z) {
        x += delta_x;
        y += delta_y;
        z += delta_z;
        this-&gt;DaLiSePreklapaju();
        
    }
    

    bool DaLiSadrzi(const NepreklapajucaKugla &amp;k) const;

    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);
};


NepreklapajucaKugla* NepreklapajucaKugla::posljednjaKreirana=nullptr;



bool NepreklapajucaKugla::DaLiSadrzi(const NepreklapajucaKugla &amp;k) const
{

    double udaljenost = RastojanjeCentara(*this,k);
    double veci_poluprecnik,manji_poluprecnik;
    if(DajPoluprecnik() &gt; k.DajPoluprecnik()) {
        veci_poluprecnik = DajPoluprecnik();
        manji_poluprecnik = k.DajPoluprecnik();
    } else return false;

    if(udaljenost &lt; veci_poluprecnik) {
        if(fabs((veci_poluprecnik - udaljenost)- manji_poluprecnik) &lt; eps || (veci_poluprecnik - udaljenost)&gt;manji_poluprecnik) return true;
    }
    return false;

}


double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2)
{
    double rastojanje;
    rastojanje = sqrt((k1.DajX() - k2.DajX())*(k1.DajX() - k2.DajX()) + ((k1.DajY() - k2.DajY())*(k1.DajY() - k2.DajY())) +
                      ((k1.DajZ() - k2.DajZ()) * (k1.DajZ() - k2.DajZ())));
    return rastojanje;
}



int main ()
{
    int n;
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; v;
    std::cout&lt;&lt;"Unesite broj kugli: ";
    std::cin&gt;&gt;n;
    double x,y,z,r;
    for(int i(0); i &lt; n; i++){
        try {
            std::cout&lt;&lt;"Unesite centar "&lt;&lt;i+1&lt;&lt;". kugle: ";
            std::cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
            std::cout&lt;&lt;"Unesite poluprecnik "&lt;&lt;i+1&lt;&lt;". kugle: ";
            std::cin&gt;&gt;r;
            auto dijeljeni = std::make_shared&lt;NepreklapajucaKugla&gt;(x,y,z,r);
            v.push_back(dijeljeni);
        }

        catch(std::domain_error e) {
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
            i--;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
            i--;
        }
    }

    return 0;
</font>}
</pre>
</body>
</html>
