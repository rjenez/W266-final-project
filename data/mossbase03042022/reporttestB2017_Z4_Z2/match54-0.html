<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student9238.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student9238.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match54-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 1
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;tuple&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;

using namespace std;



class NepreklapajucaKugla
{
    double x,y,z,r;

    double pi=atan(1)*4;

    double ep=pow(10,-10);
    
    static NepreklapajucaKugla *stat_pointer;

    friend bool Presjek(NepreklapajucaKugla &amp;k1,NepreklapajucaKugla &amp;k2) {

        double udaljenost=sqrt(pow(k1.x-k2.x,2)+pow(k1.y-k2.y,2)+pow(k1.z-k2.z,2));

        double min,max;

        if(k1.r&gt;k2.r) {
            max=k1.r;
            min=k2.r;
        } else {
            max=k2.r;
            min=k1.r;
        }


        if(k1.DaLiSadrzi(k2))return true;




        if(udaljenost==k1.r || udaljenost==k2.r ||udaljenost==k1.r+k2.r) return true;

        return(min&gt;=fabs(max-udaljenost));

    }
    
    friend void Testiraj(NepreklapajucaKugla &amp;k1) {

        
        NepreklapajucaKugla*pom=NepreklapajucaKugla::stat_pointer;
    
        k1.pointer=stat_pointer;
        
        while(pom!=nullptr) {

        if(Presjek(k1,*pom)){
                throw logic_error("Nedozvoljeno preklapanje");
            }
            pom=pom-&gt;pointer;
        }
        stat_pointer=&amp;k1;
    }

    friend void TestirajStari(NepreklapajucaKugla &amp;k1){
        
        NepreklapajucaKugla*pom=NepreklapajucaKugla::stat_pointer;
    
        while(pom!=nullptr) {

        if(Presjek(k1,*pom) &amp;&amp; pom!=&amp;k1){
                throw logic_error("Nedozvoljeno preklapanje");
            }
            pom=pom-&gt;pointer;
        }
        
    }

public:


    NepreklapajucaKugla *pointer=nullptr;//prosli


   ~NepreklapajucaKugla(){
        
        
        
        
        if(this-&gt;pointer==nullptr){
            
            NepreklapajucaKugla* pom=stat_pointer;
            
            if(pom==this)
                stat_pointer=nullptr;
            
            else while(pom-&gt;pointer!=this)
                pom=pom-&gt;pointer;
            
            pom-&gt;pointer=nullptr;
        }
        else if(this==stat_pointer){
            stat_pointer=stat_pointer-&gt;pointer;
        }
        
        else
        {
            NepreklapajucaKugla* pom=stat_pointer;
            while(pom-&gt;pointer!=this){
                pom=pom-&gt;pointer;
            }
            pom-&gt;pointer=this-&gt;pointer;
        }
        
        
    } 
    

    explicit NepreklapajucaKugla(double r = 0):x(0),y(0),z(0) {

        Testiraj(*this);
        if (r&lt;0) throw domain_error("Ilegalan poluprecnik");

    }

     NepreklapajucaKugla(double x, double y, double z, double r = 0):x(x),y(y),z(z),r(r) {
        Testiraj(*this);

    }



    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0) {

        double x,y,z;
        tie(x,y,z)=centar;
        this-&gt;x=x;
        this-&gt;y=y;
        this-&gt;z=z;
        this-&gt;r=r;
        Testiraj(*this);


    }

    NepreklapajucaKugla &amp;operator=(const NepreklapajucaKugla &amp;k1) =delete;
    
    

    double DajX() const {
        return this-&gt;x;
    }

    double DajY() const {
        return this-&gt;y;
    }

    double DajZ() const {
        return this-&gt;z;
    }

    std::tuple&lt;double, double, double&gt; DajCentar() const {
        return make_tuple(this-&gt;x,this-&gt;y,this-&gt;z);
    }

    double DajPoluprecnik() const {
        return this-&gt;r;
    }

    double DajPovrsinu() const {

        return 4*pi*r*r;

    }

    double DajZapreminu() const {

        return (4/3)*pi*r*r*r;

    }

    NepreklapajucaKugla &amp;PostaviX(double x) {
        
        double t1=x;
        try{
        this-&gt;x=x;
        TestirajStari(*this);
        }
        catch(exception &amp;ex){
            cout&lt;&lt;ex.what()&lt;&lt;endl;
            this-&gt;x=t1;
        }
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviY(double y) {
        double t1=y;
        try{
        this-&gt;y=y;
        TestirajStari(*this);
        }
        catch(exception &amp;ex){
            cout&lt;&lt;ex.what()&lt;&lt;endl;
            this-&gt;y=t1;
        }
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviZ(double z) {
        double t1=z;
        try{
        this-&gt;z=z;
        TestirajStari(*this);
        }
        catch(exception &amp;ex){
            cout&lt;&lt;ex.what()&lt;&lt;endl;
            this-&gt;z=t1;
        }
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) {

 double t1(this-&gt;x),t2(this-&gt;y),t3(this-&gt;z);
        try {
          
            this-&gt;x=x;
            this-&gt;y=y;
            this-&gt;z=z;
            TestirajStari(*this);
        } catch(exception &amp;ex) {
            cout&lt;&lt;ex.what()&lt;&lt;endl;
            this-&gt;x=t1;
            this-&gt;y=t2;
            this-&gt;z=t3;
        }

        return *this;


    }

    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) {


        double t1(this-&gt;x),t2(this-&gt;y),t3(this-&gt;z);
        try {
            double x,y,z;
            tie(x,y,z)=centar;
            this-&gt;x=x;
            this-&gt;y=y;
            this-&gt;z=z;
            TestirajStari(*this);
        } catch(exception &amp;ex) {
                cout&lt;&lt;ex.what()&lt;&lt;endl;
                this-&gt;x=t1;
            this-&gt;y=t2;
            this-&gt;z=t3;
        }

        return *this;
    }

    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r) {

        if (r&lt;0) throw domain_error("Ilegalan poluprecnik");

        double temp=this-&gt;r;
        try {
            this-&gt;r=r;
            TestirajStari(*this);
        } catch(exception &amp;ex) {
            this-&gt;r=temp;
            cout&lt;&lt;ex.what()&lt;&lt;endl;
        }
        //return *this;
    }

    void Ispisi() const {

        cout&lt;&lt;"{"&lt;&lt;"("&lt;&lt;this-&gt;x&lt;&lt;","&lt;&lt;this-&gt;y&lt;&lt;","&lt;&lt;this-&gt;z&lt;&lt;")"&lt;&lt;","&lt;&lt;r&lt;&lt;"}"&lt;&lt;endl;

    }

    void Transliraj(double delta_x, double delta_y, double delta_z) {

        try {


            this-&gt;x+=delta_x;
            this-&gt;y+=delta_y;
            this-&gt;z+=delta_z;
            Testiraj(*this);
        } catch(exception &amp;ex) {
            cout&lt;&lt;ex.what()&lt;&lt;endl;
            this-&gt;x-=delta_x;
            this-&gt;y-=delta_y;
            this-&gt;z-=delta_z;

        }
    }

    bool DaLiSadrzi(const NepreklapajucaKugla &amp;k) const {

        double udaljenost=sqrt(pow(this-&gt;x-k.x,2)+pow(this-&gt;y-k.y,2)+pow(this-&gt;z-k.z,2));

        return (fabs(this-&gt;r-k.r)&gt;=udaljenost);
    }

    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2) {
        double udaljenost=sqrt(pow(k1.x-k2.x,2)+pow(k1.y-k2.y,2)+pow(k1.z-k2.z,2));
        return udaljenost;
    }

};


 NepreklapajucaKugla* NepreklapajucaKugla::stat_pointer=nullptr;


int main ()
{

   

    vector&lt;shared_ptr&lt;NepreklapajucaKugla&gt;&gt; v,vt;

    int n;
    cout&lt;&lt;"Unesite broj kugli: ";

    while(1) {
        cin&gt;&gt;n;
        if(n&lt;=0) {
            cout&lt;&lt;"Neispravan broj kugli, unesite ponovo!"&lt;&lt;endl;
            cin.clear();
            cin.ignore(10000, '\n');
        } else break;
    }

    for(int i=0; i&lt;n; i++) {
        double p=0,x=0,y=0,z=0;



        cout&lt;&lt;"Unesite centar za "&lt;&lt;i+1&lt;&lt;". kuglu: ";
        while(1) {
            if(!(cin&gt;&gt;x&gt;&gt;y&gt;&gt;z)) {
                cout&lt;&lt;"Neispravan centar, unesite ponovo:"&lt;&lt;endl;
                cin.clear();
                cin.ignore(10000, '\n');
            } else break;
        }


        cout&lt;&lt;"Unesite poluprecnik: ";

        while(1) {
            if(!(cin&gt;&gt;p )) {
                cout&lt;&lt;"Neispravan poluprecnik, unesite ponovo:"&lt;&lt;endl;
                cin.clear();
                cin.ignore(10000, '\n');
            }

            else if(p&lt;0) {
                cout&lt;&lt;"Neispravan poluprecnik, unesite ponovo:"&lt;&lt;endl;
                cin.clear();
                cin.ignore(10000, '\n');
            } else break;

        }
        try {

            shared_ptr&lt;NepreklapajucaKugla&gt; ptr=make_shared&lt;NepreklapajucaKugla&gt;(x,y,z,p);

            v.push_back(ptr);

        }

        catch(exception &amp;ex) {
            cout&lt;&lt;ex.what()&lt;&lt;endl;
            i--;
        }
    }

    
   
    
    sort(v.begin(),v.end(),[](shared_ptr&lt;NepreklapajucaKugla&gt; k1,shared_ptr&lt;NepreklapajucaKugla&gt; k2) {
        return k1-&gt;DajZapreminu()&lt;k2-&gt;DajZapreminu();
    });
    cout&lt;&lt;"\nKugle nakon obavljenog sortiranja: "&lt;&lt;endl;
    for_each(v.begin(),v.end(),[](shared_ptr&lt;NepreklapajucaKugla&gt; k) {
        k-&gt;Ispisi();
</font>    });

    

    return 0;
}
    
    
    // 3 5 5 5 1 0 0 0 2 3 3 3 1    
    
    // 3 0 0 0 2 3 3 3 1 50 50 50 1
    
    //3 0 0 0 2 3 3 3 1 6 6 6 1
    
    //3 0 0 0 2 9 9 9 1 1 1 1 3
    
    //3 0 0 0 2 5 5 5 3 13 13 13 4
    
/*3
2 3 1
5
10 7 8 xx
2      XX
4 6 3
7
5 8 4
1*/</pre>
</body>
</html>
