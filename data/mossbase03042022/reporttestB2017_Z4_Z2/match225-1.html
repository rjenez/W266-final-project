<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student4011.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student8118.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 2
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;tuple&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;iomanip&gt;

class NepreklapajucaKugla {
    double x,y,z,r;
    static constexpr double PI{4*atan(1.)};
    static bool DaliSuJednaki(double x1, double x2) { return fabs(x1-x2)&lt;=pow(10,-10)*(fabs(x1)+fabs(x2)); }
    static bool DaLiJeCentarUnutar(double x,double y, double z, double x2, double y2, double z2, double r2);
    static bool DaLiJeCentarIzvan(double x, double y, double z, double x2, double y2, double z2, double r2);
    static bool DaLiSePreklapaju(double x, double y, double z, double r, const NepreklapajucaKugla &amp;k2);
    static bool DaLiSeSijeku(double x, double y, double z, double r, const NepreklapajucaKugla &amp;k2);
    static double RastojanjeCentara(double x, double y, double z, const NepreklapajucaKugla &amp;k2);
    static double RastojanjeCentara(double x, double y, double z, double x2, double y2, double z2);
    static void TestPreklapanja(double x, double y, double z, double r);
    static NepreklapajucaKugla* pokNaKraj;
    NepreklapajucaKugla* prethodni;
public:
    explicit NepreklapajucaKugla(double r=0);
    NepreklapajucaKugla(double x, double y, double z, double r=0);
    explicit NepreklapajucaKugla(const std::tuple&lt;double,double,double&gt; &amp;centar, double r=0);
    ~NepreklapajucaKugla();
    double DajX() const { return x; }
    double DajY() const { return y; }
    double DajZ() const { return z; }
    NepreklapajucaKugla(NepreklapajucaKugla &amp;&amp;k);
    NepreklapajucaKugla&amp; operator =(NepreklapajucaKugla &amp;&amp;k);
    NepreklapajucaKugla(const NepreklapajucaKugla &amp;k) = delete;
    NepreklapajucaKugla&amp; operator =(const NepreklapajucaKugla &amp;k) = delete;
    std::tuple&lt;double,double,double&gt; DajCentar() const { return std::make_tuple(x,y,z); }
    double DajPoluprecnik() const { return r; }
    double DajPovrsinu() const { return 4*r*r*PI; }
    double DajZapreminu() const { return 4*r*r*r*PI/3; }
<a name="0"></a><font color="#FF0000"><a href="match225-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    NepreklapajucaKugla &amp;PostaviX(double x) { TestPreklapanja(x,y,z,r); NepreklapajucaKugla::x=x; return *this; }
    NepreklapajucaKugla &amp;PostaviY(double y) { TestPreklapanja(x,y,z,r); NepreklapajucaKugla::y=y; return *this; }
    NepreklapajucaKugla &amp;PostaviZ(double z) { TestPreklapanja(x,y,z,r); NepreklapajucaKugla::z=z; return *this; }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z);
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double,double,double&gt; &amp;centar);
</font>    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r);
    void Ispisi() const { std::cout&lt;&lt;"{("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;","&lt;&lt;z&lt;&lt;"),"&lt;&lt;r&lt;&lt;"}"&lt;&lt;std::endl; }
    void Transliraj(double delta_x, double delta_y, double delta_z);
    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);
};
NepreklapajucaKugla* NepreklapajucaKugla::pokNaKraj=nullptr;

int main()
{
    std::cout&lt;&lt;"Unesite broj kugli: ";
    int brojkugla;
    std::cin&gt;&gt;brojkugla;
    if (!std::cin || brojkugla&lt;=0) {
        do {
            std::cout&lt;&lt;"Neispravan broj kugli, unesite ponovo!"&lt;&lt;std::endl;
            std::cin.clear();
            std::cin.ignore(1000,'\n');
            std::cin&gt;&gt;brojkugla;
        }while(brojkugla&lt;=0 || !std::cin); 
    }
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt; VektorKugli(brojkugla);
    for (int i=0;i&lt;brojkugla;i++) {
        std::cout&lt;&lt;"Unesite centar za "&lt;&lt;i+1&lt;&lt;". kuglu: ";
        double x,y,z;
        std::cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
        if (!std::cin) {
            do {
                std::cout&lt;&lt;"Neispravan centar, unesite ponovo: "&lt;&lt;std::endl;
                std::cin.clear();
                std::cin.ignore(1000,'\n');
                std::cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
            } while (!std::cin);
        }
        std::cout&lt;&lt;"Unesite poluprecnik: ";
        double r;
        std::cin&gt;&gt;r;
        if (r&lt;0 || !std::cin) {
            do {
            std::cout&lt;&lt;"Neispravan poluprecnik, unesite ponovo: "&lt;&lt;std::endl;
            std::cin.clear();
            std::cin.ignore(1000,'\n');
            std::cin&gt;&gt;r;
            }while(!std::cin || r&lt;0);
        }
        try {
        VektorKugli.at(i)=std::make_shared&lt;NepreklapajucaKugla&gt;(x,y,z,r);
        }
        catch(std::logic_error err) {
            std::cout&lt;&lt;err.what()&lt;&lt;std::endl; i--;
        }
    }
    std::sort(VektorKugli.begin(),VektorKugli.end(),[](std::shared_ptr&lt;NepreklapajucaKugla&gt; k1, std::shared_ptr&lt;NepreklapajucaKugla&gt; k2) { return k1-&gt;DajPovrsinu()&lt;k2-&gt;DajPovrsinu();});
    std::cout&lt;&lt;std::endl&lt;&lt;"Kugle nakon obavljenog sortiranja: "&lt;&lt;std::endl;
    std::for_each(VektorKugli.begin(), VektorKugli.end(),[](std::shared_ptr&lt;NepreklapajucaKugla&gt; k1){ k1-&gt;Ispisi(); });
	return 0;
}

//IMPLEMENTACIJA
NepreklapajucaKugla::NepreklapajucaKugla(double r) {
    if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
    TestPreklapanja(0,0,0,r);
<a name="8"></a><font color="#00FFFF"><a href="match225-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if (!pokNaKraj) { pokNaKraj=this; prethodni=nullptr; }
    else { prethodni=pokNaKraj; pokNaKraj=this; }
    x=0;y=0;z=0;NepreklapajucaKugla::r=r;
</font>}
NepreklapajucaKugla::NepreklapajucaKugla(double x, double y, double z, double r) {
    if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
    TestPreklapanja(x,y,z,r);
<a name="3"></a><font color="#00FFFF"><a href="match225-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if (!pokNaKraj) { pokNaKraj=this; prethodni=nullptr; }
    else { prethodni=pokNaKraj; pokNaKraj=this; }
    NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z; NepreklapajucaKugla::r=r;
</font>}
NepreklapajucaKugla::NepreklapajucaKugla(const std::tuple&lt;double,double,double&gt; &amp;centar, double r) {
<a name="4"></a><font color="#FF00FF"><a href="match225-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
    TestPreklapanja(std::get&lt;0&gt;(centar),std::get&lt;1&gt;(centar),std::get&lt;2&gt;(centar),r);
</font>    if (!pokNaKraj) { pokNaKraj=this; prethodni=nullptr; }
    else { prethodni=pokNaKraj; pokNaKraj=this; }
    x=std::get&lt;0&gt;(centar); y=std::get&lt;1&gt;(centar); z=std::get&lt;2&gt;(centar); NepreklapajucaKugla::r=r;
} 
NepreklapajucaKugla&amp; NepreklapajucaKugla::PostaviCentar(double x, double y, double z) {
    TestPreklapanja(x,y,z,r);
    NepreklapajucaKugla::x=x; NepreklapajucaKugla::y=y; NepreklapajucaKugla::z=z; return *this;
}
<a name="1"></a><font color="#00FF00"><a href="match225-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

NepreklapajucaKugla&amp; NepreklapajucaKugla::PostaviCentar(const std::tuple&lt;double,double,double&gt; &amp;centar) {
    TestPreklapanja(std::get&lt;0&gt;(centar),std::get&lt;1&gt;(centar),std::get&lt;2&gt;(centar),r);
</font>    x=std::get&lt;0&gt;(centar); y=std::get&lt;1&gt;(centar); z=std::get&lt;2&gt;(centar); return *this; 
}
<a name="6"></a><font color="#00FF00"><a href="match225-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

NepreklapajucaKugla&amp; NepreklapajucaKugla::PostaviPoluprecnik(double r) { 
    if (r&lt;0) throw std::domain_error("Ilegalan poluprecnik");
    TestPreklapanja(x,y,z,r);
    NepreklapajucaKugla::r=r; return *this; 
</font>}
void NepreklapajucaKugla::Transliraj(double delta_x, double delta_y, double delta_z) {
    TestPreklapanja(x+delta_x,y+delta_y,z+delta_z,r);
    x+=delta_x; y+=delta_y; z+=delta_z;
}
bool NepreklapajucaKugla::DaLiJeCentarUnutar(double x,double y, double z, double x2, double y2, double z2, double r2) {
    return (RastojanjeCentara(x,y,z,x2,y2,z2)&lt;r2 || DaliSuJednaki(RastojanjeCentara(x,y,z,x2,y2,z2),r2));
}
bool NepreklapajucaKugla::DaLiJeCentarIzvan(double x, double y, double z, double x2, double y2, double z2, double r2) {
    return ((x&gt;=x2+r2 || x&lt;=x2-r2) || (y&gt;=y2+r2 || y&lt;=y2-r2) || (z&gt;=z2+r2 || z&lt;=z2-r2));
}
<a name="2"></a><font color="#0000FF"><a href="match225-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2) {
    return sqrt(pow(k2.x-k1.x,2)+pow(k2.y-k1.y,2)+pow(k2.z-k1.z,2));
</font>}
bool NepreklapajucaKugla::DaLiSePreklapaju(double x, double y, double z, double r, const NepreklapajucaKugla &amp;k2) {
    return (NepreklapajucaKugla::DaLiJeCentarUnutar(x,y,z,k2.x,k2.y,k2.z,k2.r) || NepreklapajucaKugla::DaLiJeCentarUnutar(k2.x,k2.y,k2.z,x,y,z,r) || DaLiSeSijeku(x,y,z,r,k2));
}
bool NepreklapajucaKugla::DaLiSeSijeku(double x, double y, double z, double r, const NepreklapajucaKugla &amp;k2) {
    bool logicka(false);
    if (NepreklapajucaKugla::DaLiJeCentarUnutar(x,y,z,k2.x,k2.y,k2.z,k2.r)) {
        logicka=(r+RastojanjeCentara(x,y,z,k2)&gt;k2.r || DaliSuJednaki(r+RastojanjeCentara(x,y,z,k2),k2.r));
    }
    else if (NepreklapajucaKugla::DaLiJeCentarUnutar(k2.x,k2.y,k2.z,x,y,z,r)) {
        logicka=(k2.r+RastojanjeCentara(x,y,z,k2)&gt;r || DaliSuJednaki(k2.r+RastojanjeCentara(x,y,z,k2),r));
    }
    else 
        logicka=(RastojanjeCentara(x,y,z,k2)&lt;r+k2.r || DaliSuJednaki(RastojanjeCentara(x,y,z,k2),r+k2.r));
    return logicka;
}
void NepreklapajucaKugla::TestPreklapanja(double x, double y, double z, double r) {
<a name="7"></a><font color="#0000FF"><a href="match225-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    for (auto pok=NepreklapajucaKugla::pokNaKraj;pok!=nullptr;pok=pok-&gt;prethodni) {
        if (DaLiSePreklapaju(x,y,z,r,*pok)) throw std::logic_error("Nedozvoljeno preklapanje");
</font>    }
}
double NepreklapajucaKugla::RastojanjeCentara(double x, double y, double z, const NepreklapajucaKugla &amp;k2) {
    return sqrt(pow(k2.x-x,2)+pow(k2.y-y,2)+pow(k2.z-z,2));
}
NepreklapajucaKugla::~NepreklapajucaKugla() {
    if (pokNaKraj==this) pokNaKraj=this-&gt;prethodni;
    else {
        NepreklapajucaKugla* pok;
        for (pok=pokNaKraj;pok-&gt;prethodni!=this;pok=pok-&gt;prethodni);
        pok-&gt;prethodni=this-&gt;prethodni;
    }
}
double NepreklapajucaKugla::RastojanjeCentara(double x, double y, double z, double x2, double y2, double z2) {
    return sqrt(pow(x2-x,2)+pow(y2-y,2)+pow(z2-z,2));
}
<a name="9"></a><font color="#FF00FF"><a href="match225-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

NepreklapajucaKugla::NepreklapajucaKugla(NepreklapajucaKugla &amp;&amp;k) {
    TestPreklapanja(k.DajX(),k.DajY(),k.DajZ(),k.DajPoluprecnik());
    *this=std::move(k);
</font>}
<a name="5"></a><font color="#FF0000"><a href="match225-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

NepreklapajucaKugla&amp; NepreklapajucaKugla::operator =(NepreklapajucaKugla &amp;&amp;k) {
    TestPreklapanja(k.DajX(),k.DajY(),k.DajZ(),k.DajPoluprecnik());
    *this=std::move(k);
</font>    return *this;
}</pre>
</body>
</html>
