<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2009.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2009.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 1
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
using std::cin;
using std::cout;
using std::vector;
using std::shared_ptr;
using std::shared_ptr;
using std::endl;
const double eps=0.0000000001;
const double pi=3.141592653589793238462;

class NepreklapajucaKugla
{
    double x,y,z,r;
    NepreklapajucaKugla*prethodni=nullptr;
    static NepreklapajucaKugla* zadnji;
    static bool IstiDouble(const double &amp;x, const double &amp;y) {
        if (fabs(x-y) &lt; eps*(fabs(x)+fabs(y))) return true;
        else if(fabs(x-y)&lt;eps) return true;
        else return false;
    }

    static bool Preklapanje(double x1, double y1, double z1, double r1, NepreklapajucaKugla* p=nullptr) {
        NepreklapajucaKugla* zadnji_temp=zadnji;
        while(zadnji_temp!=nullptr) {
            double d=sqrt((x1-zadnji_temp-&gt;x)*(x1-zadnji_temp-&gt;x)+(y1-zadnji_temp-&gt;y)*(y1-zadnji_temp-&gt;y)+(z1-zadnji_temp-&gt;z)*(z1-zadnji_temp-&gt;z));
            if(zadnji_temp!=p &amp;&amp; d-(r1+zadnji_temp-&gt;DajPoluprecnik())&lt;=eps) return true;
            zadnji_temp=zadnji_temp-&gt;prethodni;
        }
<a name="4"></a><font color="#FF00FF"><a href="match197-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        return false;
    }

public:
    explicit NepreklapajucaKugla(double r1 = 0) {
        if(r1&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if(Preklapanje(0,0,0,r1)) throw std::logic_error("Nedozvoljeno preklapanje");
        prethodni=zadnji;
</font>        x=y=z=0;
<a name="2"></a><font color="#0000FF"><a href="match197-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

        NepreklapajucaKugla::r=r1;
        zadnji=this;
    };

    NepreklapajucaKugla(double x, double y, double z, double r1 = 0) {
        if(r1&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if(Preklapanje(x,y,z,r1)) throw std::logic_error("Nedozvoljeno preklapanje");
        prethodni=zadnji;
        NepreklapajucaKugla::x=x;
        NepreklapajucaKugla::y=y;
        NepreklapajucaKugla::z=z;
        NepreklapajucaKugla::r=r1;
        zadnji=this;
    }

    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, const double r1 = 0) {
</font><a name="1"></a><font color="#00FF00"><a href="match197-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

        if(r1&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if(Preklapanje(std::get&lt;0&gt;(centar),std::get&lt;1&gt;(centar),std::get&lt;2&gt;(centar),r1)) throw std::logic_error("Nedozvoljeno preklapanje");
        prethodni=zadnji;
        x=std::get&lt;0&gt;(centar);
        y=std::get&lt;1&gt;(centar);
        z=std::get&lt;2&gt;(centar);
        NepreklapajucaKugla::r=r1;
        zadnji=this;
    }

    NepreklapajucaKugla (const NepreklapajucaKugla &amp;x) =delete;
    NepreklapajucaKugla &amp;operator =(const NepreklapajucaKugla &amp;k) = delete;
</font>
    double DajX() const {
        return x;
    }

    double DajY() const {
        return y;
    }

    double DajZ() const {
        return z;
    }

    std::tuple&lt;double, double, double&gt; DajCentar() const {
        return std::make_tuple(x,y,z);
    }

    double DajPoluprecnik() const {
        return r;
    }

    double DajPovrsinu() const {
        return 4*r*r*pi;
    }

    double DajZapreminu() const {
        return (4./3)*(r*r*r)*pi;
    }

    NepreklapajucaKugla &amp;PostaviX(double x1) {
        if(Preklapanje(x1,y,z,r,this)) throw std::logic_error("Nedozvoljeno preklapanje");
        x=x1;
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviY(double y1) {
        if(Preklapanje(x,y1,z,r,this)) throw std::logic_error("Nedozvoljeno preklapanje");
        y=y1;
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviZ(double z1) {
        if(Preklapanje(x,y,z1,r,this)) throw std::logic_error("Nedozvoljeno preklapanje");
        z=z1;
<a name="6"></a><font color="#00FF00"><a href="match197-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        return *this;
    }

    NepreklapajucaKugla &amp;PostaviCentar(double x1, double y1, double z1) {
        if(Preklapanje(x1,y1,z1,r,this)) throw std::logic_error("Nedozvoljeno preklapanje");
</font>        x=x1;
        y=y1;
<a name="0"></a><font color="#FF0000"><a href="match197-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

        z=z1;
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) {
        if(Preklapanje(std::get&lt;0&gt;(centar),std::get&lt;1&gt;(centar),std::get&lt;2&gt;(centar),r,this)) throw std::logic_error("Nedozvoljeno preklapanje");
        x=std::get&lt;0&gt;(centar);
        y=std::get&lt;1&gt;(centar);
        z=std::get&lt;2&gt;(centar);
        return *this;
    }

    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r1) {
        if(r1&lt;0) throw std::domain_error("Ilegalan poluprecnik");
        if(Preklapanje(x,y,z,r1,this)) throw std::logic_error("Nedozvoljeno preklapanje");
</font>        r=r1;
        return *this;
    }

    void Ispisi() const {
        std::cout &lt;&lt; "{(" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; "," &lt;&lt; z &lt;&lt; ")," &lt;&lt; r &lt;&lt; "}" &lt;&lt; endl;
    }

<a name="3"></a><font color="#00FFFF"><a href="match197-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    void Transliraj(double delta_x, double delta_y, double delta_z) {
        if(Preklapanje(x+delta_x,y+delta_y,z+delta_z,r,this)) throw std::logic_error("Nedozvoljeno preklapanje");
        x+=delta_x;
        y+=delta_y;
        z+=delta_z;
</font>    }

    ~NepreklapajucaKugla() {
        if(this==zadnji) zadnji=prethodni; // ako je zadnji u listi
        else if(prethodni==nullptr) { // ako je prvi
            if(this==zadnji) zadnji=nullptr; // ako je prvi a ujedno i jedini
            else { // ako ih je prvi a ima ih vise od 1
                NepreklapajucaKugla*next(zadnji);
                while(next-&gt;prethodni!=nullptr &amp;&amp; next-&gt;prethodni!=this) next=next-&gt;prethodni;
                next-&gt;prethodni=nullptr;
            }
        } else { // ako je negdje izmedju
            NepreklapajucaKugla*next(zadnji);
            NepreklapajucaKugla*previous(zadnji);
            while(next-&gt;prethodni!=nullptr &amp;&amp; next-&gt;prethodni!=this)  {
                next=next-&gt;prethodni;
                previous=previous-&gt;prethodni;
            }
            previous=previous-&gt;prethodni-&gt;prethodni;
            next-&gt;prethodni=previous;
        }
    }

    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2);

};

NepreklapajucaKugla*NepreklapajucaKugla::zadnji=nullptr;

double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2)
{
    return sqrt((k1.x-k2.x)*(k1.x-k2.x)+(k1.y-k2.y)*(k1.y-k2.y)+(k1.z-k2.z)*(k1.z-k2.z));
}

int main ()
{
    int n;
    cout &lt;&lt; "Unesite broj kugli: ";
<a name="5"></a><font color="#FF0000"><a href="match197-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    while (std::cin &gt;&gt; n, !cin || n&lt;=0) {
        std::cout &lt;&lt; "Neispravan broj kugli, unesite ponovo!" &lt;&lt; std::endl;
        std::cin.clear();
        std::cin.ignore(1000, '\n');
    }
    try {
</font>        vector&lt;shared_ptr&lt;NepreklapajucaKugla&gt;&gt; kugle;
        for(int i=0; i&lt;n; i++) {
            std::tuple&lt;double,double,double&gt; centar;
            double r;
            bool preklapanje {false};
            for(;;) {
                preklapanje=false;
                cout &lt;&lt; "Unesite centar za " &lt;&lt; i+1 &lt;&lt; ". kuglu: ";
                for(;;) {
                    cin &gt;&gt; std::get&lt;0&gt;(centar) &gt;&gt; std::get&lt;1&gt;(centar) &gt;&gt; std::get&lt;2&gt;(centar);
                    if(cin.fail()) {
                        cin.clear();
                        cin.ignore(1000,'\n');
                        cout &lt;&lt; "Neispravan centar, unesite ponovo:" &lt;&lt;endl;
                    } else break;
                }
                cout &lt;&lt; "Unesite poluprecnik: ";
                for(;;) {
                    cin &gt;&gt; r;
                    if(r&lt;0 || cin.fail()) {
                        if(cin.fail()) {
                            cin.clear();
                            cin.ignore(1000,'\n');
                        }
                        cout &lt;&lt; "Neispravan poluprecnik, unesite ponovo: " &lt;&lt; endl;
                    } else break;
                }
                try {
                    NepreklapajucaKugla nk(centar,r);
                } catch(std::logic_error&amp; ex) {
                    cout &lt;&lt; ex.what() &lt;&lt;endl;
                    preklapanje=true;
                }
                if(!preklapanje) break;
            }
            kugle.push_back(shared_ptr&lt;NepreklapajucaKugla&gt;(new NepreklapajucaKugla(centar,r)));
        }
        cout &lt;&lt;endl;
        std::sort(kugle.begin(),kugle.end(),[kugle](const shared_ptr&lt;NepreklapajucaKugla&gt; &amp;k1,const shared_ptr&lt;NepreklapajucaKugla&gt; &amp;k2) {
            return k1-&gt;DajZapreminu()&lt;k2-&gt;DajZapreminu();
        });
        cout &lt;&lt; "Kugle nakon obavljenog sortiranja: " &lt;&lt;endl;
        std::for_each(kugle.begin(),kugle.end(),[kugle](const shared_ptr&lt;NepreklapajucaKugla&gt; &amp;k) {
            k-&gt;Ispisi();
        });

    } catch(std::exception &amp;ex) {
        cout &lt;&lt; ex.what();
    }

    return 0;
}
</pre>
</body>
</html>
