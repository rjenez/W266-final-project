<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student7868.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student1213.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match111-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 1
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;tuple&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;initializer_list&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;

using namespace std;

double E=pow(10,-11);
double PI=atan(1)*4;

bool jednakostest(double x, double y);

double kvad(double x) { return x*x;} 

class NepreklapajucaKugla{
    double ox,oy,oz,pp;
public:
    explicit NepreklapajucaKugla(double r = 0){
        if(r&lt;0) throw domain_error("Ilegalan poluprecnik");
        ox=0; 
        oy=0; 
        oz=0; 
        pp=r;
    }
    NepreklapajucaKugla(double x, double y, double z, double r = 0){
        if(!cin){
            cin.clear(); cin.ignore(1,'\n'); 
            throw domain_error("Ilegalan poluprecnik");
        }
        if(r&lt;0) throw domain_error("Ilegalan poluprecnik");
        ox=x;
        oy=y; 
        oz=z; 
        pp=r;
    }
    explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r = 0){
        if(r&lt;0) throw domain_error("Ilegalan poluprecnik");
        ox=get&lt;0&gt;(centar); 
        oy=get&lt;1&gt;(centar); 
        oz=get&lt;2&gt;(centar); pp=r;
    }
    double DajX() const { return ox;}
    double DajY() const {return oy;}
    double DajZ() const { return oz;}
    NepreklapajucaKugla &amp;PostaviX(double x) { ox=x; return *this;}
    NepreklapajucaKugla &amp;PostaviY(double y) { oy=y; return *this;}
    NepreklapajucaKugla &amp;PostaviZ(double z) { oz=z; return *this;}
    std::tuple&lt;double, double, double&gt; DajCentar() const{
        auto rez=make_tuple(ox,oy,oz);
        return rez;
    }
    NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z){
        ox=x;
        oy=y; 
        oz=z; return *this;
    }
    NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar){
        PostaviCentar(get&lt;0&gt;(centar),get&lt;1&gt;(centar),get&lt;2&gt;(centar));
        return *this;
    }
    friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2){
        return sqrt(kvad(k1.ox-k2.ox)+kvad(k1.oy-k2.oy)+kvad(k1.oz-k2.oz));
    }
    double DajPoluprecnik() const { return pp;}
    NepreklapajucaKugla &amp;PostaviPoluprecnik(double r){
        if(r&lt;0) throw domain_error("Ilegalan poluprecnik");
        pp=r; 
        return *this;
    }
    double DajPovrsinu() const{ 
        return 4*PI*pp*pp;
    }
    double DajZapreminu() const { 
        return (4*PI*pp*pp*pp)/3;
    }
    void Ispisi() const {
        cout&lt;&lt;"{(";
        cout&lt;&lt;ox&lt;&lt;","&lt;&lt;oy&lt;&lt;","&lt;&lt;oz&lt;&lt;"),"&lt;&lt;pp&lt;&lt;"}";
        cout&lt;&lt;endl;
    }
    void Transliraj(double delta_x, double delta_y, double delta_z){
        ox+=delta_x; 
        oy+=delta_y; 
        oz+=delta_z;
    }
   
    friend bool DaLiSeSijeku(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2){
       double duzi,kraci;
          if(k1.DajPoluprecnik()&lt;=k2.DajPoluprecnik()) { duzi=k2.DajPoluprecnik(); kraci=k1.DajPoluprecnik();return (duzi+kraci&gt;RastojanjeCentara(k1,k2) &amp;&amp; duzi-kraci&lt;RastojanjeCentara(k1,k2));}
          else { duzi=k1.DajPoluprecnik(); kraci=k2.DajPoluprecnik(); return (duzi+kraci&gt;RastojanjeCentara(k1,k2) &amp;&amp; duzi-kraci&lt;RastojanjeCentara(k1,k2));}
        

    }
    bool DaLiSadrzi(const NepreklapajucaKugla &amp;k) const{
        return RastojanjeCentara(*this,k)&lt;this-&gt;DajPoluprecnik() &amp;&amp; this-&gt;DajPovrsinu()&gt;k.DajPovrsinu();
    }
};

void unosn(int &amp;n){
    for(;;){
        cin&gt;&gt;n;
        if(!cin) {
            cin.clear(); 
            cin.ignore(1,'\n'); 
            cout&lt;&lt;"Neispravan broj kugli, unesite ponovo!"&lt;&lt;endl;
            
        }
        else if(n&lt;=0) { cout&lt;&lt;"Neispravan broj kugli, unesite ponovo!"&lt;&lt;endl;}
        else break;
    }
}

bool jednakostest(double x, double y){
        return fabs(x-y)&lt;E*(fabs(x)+fabs(y));
    }



void check(double &amp;x, double &amp;y, double &amp;z, int i){
    while(!cin){
            cin.clear(); cin.ignore(3,'\n'); cout&lt;&lt;"Neispravan centar"&lt;&lt;endl;
            cout&lt;&lt;"Unesite centar "&lt;&lt;i+1&lt;&lt;". kugle: ";
            cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
        }
}

int main ()
{
    cout&lt;&lt;"Unesite broj kugla: ";
    int n;
    unosn(n);
    vector&lt;shared_ptr&lt;NepreklapajucaKugla&gt;&gt; v;
    v.resize(n);
    for(int i=0; i&lt;n; i++){
        double x,y,z;
        try{
        cout&lt;&lt;"Unesite centar "&lt;&lt;i+1&lt;&lt;". kugle: ";
        cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
        check(x,y,z,i);
        cout&lt;&lt;"Unesite poluprecnik "&lt;&lt;i+1&lt;&lt;". kugle: "; 
        double prec;
        cin&gt;&gt;prec;
        v[i]=make_shared&lt;NepreklapajucaKugla&gt;(x,y,z,prec);
        } catch(domain_error e) { cout&lt;&lt;e.what()&lt;&lt;endl; i--;}
    }
    double dx,dy,dz; 
    cout&lt;&lt;"Unesite parametre translacije (delta_x,delta_y,delta_z): ";
    for(;;) {
        bool a=true;
        cin&gt;&gt;dx&gt;&gt;dy&gt;&gt;dz;
        if(!cin){
            cin.clear(); cin.ignore(1,'\n'); 
            cout&lt;&lt;"Neispravni parametri translacije, unesite ponovo!"&lt;&lt;endl; 
            a=false;
        }
        if(a)break;
    }
    
    transform(v.begin(),v.end(),v.begin(),[dx,dy,dz](shared_ptr&lt;NepreklapajucaKugla&gt; kug){
        kug-&gt;Transliraj(dx,dy,dz); 
        return kug;
    });
    sort(v.begin(),v.end(),[](shared_ptr&lt;NepreklapajucaKugla&gt; kug1, shared_ptr&lt;NepreklapajucaKugla&gt; kug2){
        return kug1-&gt;DajZapreminu()&lt;((4*PI*kvad(kug2-&gt;DajPoluprecnik())*kug2-&gt;DajPoluprecnik())/3);
    });
    cout&lt;&lt;"Kugle nakon obavljenje transformacije imaju sljedece vrijednosti: "&lt;&lt;endl;
    for_each(v.begin(),v.end(),[](shared_ptr&lt;NepreklapajucaKugla&gt;kug)
        {
            kug-&gt;Ispisi();
            
        });
    cout&lt;&lt;"NepreklapajucaKugla sa najvecom povrsinom je: ";
    auto isp=(max_element(v.begin(),v.end(),[](shared_ptr&lt;NepreklapajucaKugla&gt; kug1, shared_ptr&lt;NepreklapajucaKugla&gt; kug2){
        return kug1-&gt;DajPovrsinu()&lt;kug2-&gt;DajPovrsinu();
    }));
    isp-&gt;get()-&gt;Ispisi();
    
    bool ima=false;
    auto it1=v.begin(), it2=v.end();
    for_each(v.begin(),v.end(),[&amp;it1,it2,&amp;ima](shared_ptr&lt;NepreklapajucaKugla&gt; kug){
          it1++;
          for_each(it1,it2,[kug,&amp;ima](shared_ptr&lt;NepreklapajucaKugla&gt; kug1){
               if (DaLiSeSijeku(*kug,*kug1)){
                   ima=true; 
                   cout&lt;&lt;"Presjecaju se kugle: ";
                   kug-&gt;Ispisi();
                   kug1-&gt;Ispisi();}});}
    );
	if(ima) return 0;
	else cout&lt;&lt;"Ne postoje kugle koje se presjecaju!";  
	return 0;
</font>}
</pre>
</body>
</html>
