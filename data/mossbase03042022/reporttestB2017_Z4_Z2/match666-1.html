<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student9325.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z2/student2213.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;new&gt;

static constexpr double eps(pow(10,-10));
static constexpr double PI(3.14159265359);

int broj(1);
int pr(0);

class NepreklapajucaKugla{
    double x, y, z, r;
    NepreklapajucaKugla *prethodni;
    static NepreklapajucaKugla *zadnji;
   
    static bool DaLiSePreklapaju(double x, double y, double z, double r, NepreklapajucaKugla &amp;k){
        //if(std::fabs(r-0)&lt;eps || std::fabs(k.DajPoluprecnik()-0)&lt;eps) return false;
        double rastojanje=std::sqrt(std::pow((x-k.DajX()),2)+std::pow((y-k.DajY()),2)+std::pow((z-k.DajZ()),2));
        
        if((r+k.DajPoluprecnik())&gt;rastojanje || std::fabs((r+k.DajPoluprecnik())-rastojanje)&lt;eps ) return true;
       
      return false;  
    }
    
    public:
    
        explicit NepreklapajucaKugla(double r=0) {
<a name="5"></a><font color="#FF0000"><a href="match666-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(0,0,0,r, *pok)) throw std::logic_error("Nedozvoljeno preklapanje");
            }
            this-&gt;x=0;
</font>            this-&gt;y=0;
            this-&gt;z=0;
            this-&gt;r=r;
            prethodni=zadnji;
            zadnji = this;
        }
        NepreklapajucaKugla(double x, double y, double z, double r=0){
<a name="3"></a><font color="#00FFFF"><a href="match666-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(x,y,z,r, *pok)) throw std::logic_error("Nedozvoljeno preklapanje");
</font>            }
            this-&gt;x=x;
            this-&gt;y=y;
            this-&gt;z=z;
<a name="2"></a><font color="#0000FF"><a href="match666-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            this-&gt;r=r;
            
            prethodni=zadnji;
            zadnji=this;
        }
        explicit NepreklapajucaKugla(const std::tuple&lt;double, double, double&gt; &amp;centar, double r=0){
</font>            
<a name="0"></a><font color="#FF0000"><a href="match666-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(std::get&lt;0&gt;(centar),std::get&lt;1&gt;(centar),std::get&lt;2&gt;(centar),r, *pok)) throw std::logic_error("Nedozvoljeno preklapanje");
</font>            }
            
            this-&gt;x=std::get&lt;0&gt;(centar);
            this-&gt;y=std::get&lt;1&gt;(centar);
            this-&gt;z=std::get&lt;2&gt;(centar);
            this-&gt;r=r; 
            
            prethodni=zadnji;
            zadnji=this;
        }
        
        ~NepreklapajucaKugla(){
            if(this==zadnji){
                auto *temp(zadnji-&gt;prethodni);
                if(temp==zadnji||temp==nullptr) zadnji=nullptr;
                else{
                    zadnji = nullptr;
                    zadnji = temp;
                }
            }
            else{
                for(auto pok = zadnji; pok!=nullptr; pok=pok-&gt;prethodni)
                if(this==pok-&gt;prethodni){
                    auto *temp(pok-&gt;prethodni-&gt;prethodni);
                    if(temp==nullptr||temp==pok-&gt;prethodni) pok-&gt;prethodni=nullptr;
                    else{
                        pok-&gt;prethodni=nullptr;
                        pok-&gt;prethodni=temp;
                    }
                }
            }
        }
        
        double DajX() const {return x; }
        double DajY() const {return y; }
        double DajZ() const {return z; }
        std::tuple&lt;double, double, double&gt; DajCentar() const { return std::make_tuple(x,y,z); };
        
        double DajPoluprecnik() const {return r;}
        double DajPovrsinu() const {
            double p;
            p=4*r*r*PI;
            return p;
        }
        double DajZapreminu() const{
            double z;
            z=pow(r,3)*(4/3)*PI;
            return z;
        }
        NepreklapajucaKugla &amp;PostaviX(double x) {
            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(x,this-&gt;y,this-&gt;z,this-&gt;r,*pok)) throw std::logic_error("Nedozvoljeno preklapanje");
            }
            this-&gt;x= x;
            return *this;
            
        }
        NepreklapajucaKugla &amp;PostaviY(double y) {
            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(this-&gt;x,y,this-&gt;z,this-&gt;r,*pok)) throw std::logic_error("Nedozvoljeno preklapanje");
            }
            this-&gt;y= y; 
            return *this;
        }
        NepreklapajucaKugla &amp;PostaviZ(double z) {
            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(this-&gt;x,this-&gt;y,z,this-&gt;r,*pok)) throw std::logic_error("Nedozvoljeno preklapanje");
            }
            this-&gt;z= z;
            return *this;
        }
        NepreklapajucaKugla &amp;PostaviCentar(double x, double y, double z) {
            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(x,y,z,this-&gt;r,*pok)) throw std::logic_error("Nedozvoljeno preklapanje");}
            this-&gt;x = x;
            this-&gt;y = y;
            this-&gt;z = z;
            return *this;
        }
        NepreklapajucaKugla &amp;PostaviCentar(const std::tuple&lt;double, double, double&gt; &amp;centar) {
<a name="1"></a><font color="#00FF00"><a href="match666-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(std::get&lt;0&gt;(centar),std::get&lt;1&gt;(centar),std::get&lt;2&gt;(centar),this-&gt;r,*pok)) throw std::logic_error ("Nedozvoljeno preklapanje");
</font>            }
            this-&gt;x=std::get&lt;0&gt;(centar);
            this-&gt;y=std::get&lt;1&gt;(centar);
            this-&gt;z=std::get&lt;2&gt;(centar);
            return *this;
        }
        NepreklapajucaKugla &amp;PostaviPoluprecnik(double r){
            if(r&lt;0) throw std::domain_error("Neispravan poluprecnik, unesite ponovo:");
            for(auto pok=zadnji;pok!=nullptr;pok=pok-&gt;prethodni){
            if(DaLiSePreklapaju(this-&gt;x,this-&gt;y,this-&gt;z,r,*pok)) throw std::logic_error("Nedozvoljeno preklapanje");}
            this-&gt;r=r;
            return *this;
        }
        void Ispisi() const {
            std::cout&lt;&lt;"{("&lt;&lt;this-&gt;DajX()&lt;&lt;","&lt;&lt;this-&gt;DajY()&lt;&lt;","&lt;&lt;this-&gt;DajZ()&lt;&lt;"),"&lt;&lt;DajPoluprecnik()&lt;&lt;"}";
        }
        void Transliraj(double delta_x, double delta_y, double delta_z){
            this-&gt;x=this-&gt;x+delta_x;
            this-&gt;y=this-&gt;y+delta_y;
            this-&gt;z=this-&gt;z+delta_z;
        }
        
        
        bool DaLiSadrzi(const NepreklapajucaKugla &amp;k) const;
        friend double RastojanjeCentara(const NepreklapajucaKugla &amp;k1,const NepreklapajucaKugla &amp;k2);
    
};

NepreklapajucaKugla *NepreklapajucaKugla::zadnji(nullptr);
    
    double RastojanjeCentara(const NepreklapajucaKugla &amp;k1, const NepreklapajucaKugla &amp;k2){
        double rastojanje=std::sqrt(pow((k1.DajX()-k2.DajX()),2)+pow((k1.DajY()-k2.DajY()),2)+pow((k1.DajZ()-k2.DajZ()),2));
     return rastojanje;
    }
    bool NepreklapajucaKugla::DaLiSadrzi(const NepreklapajucaKugla &amp;k) const {
        double rastojanje=RastojanjeCentara(*this,k);
        if(this-&gt;r&lt;k.DajPoluprecnik()){
            if((this-&gt;r+rastojanje)&lt;k.DajPoluprecnik()) return true;
        }
        else{
            if((k.DajPoluprecnik()+rastojanje)&lt;this-&gt;r) return true;
        }
        return false;
    }


int main ()
{ 
    int n;
    bool validacija(false);
    bool cen(true);
    bool pol(true);
    std::tuple&lt;double, double,double&gt; centar;
    std::cout &lt;&lt; "Unesite broj kugli: ";
  
    do{
        validacija = false;
       try{
           std::cin &gt;&gt; n;
            if(!(std::cin)) {
               std::cin.clear();
               std::cin.ignore(1000,'\n');
                throw std::domain_error("Neispravan broj kugli, unesite ponovo!");
            }
            else if(n&lt;=0){
                std::cin.clear();
                std::cin.ignore(1000,'\n');
                throw std::domain_error("Neispravan broj kugli, unesite ponovo!");
            }
            else {
                validacija = true;
            }
       }
       catch(std::domain_error greska){
           std::cout &lt;&lt; greska.what() &lt;&lt; std::endl;
           validacija = false;
       }
    }while(!validacija);
    
    std::vector&lt;std::shared_ptr&lt;NepreklapajucaKugla&gt;&gt;v_kugli(n,nullptr);
    for(int i=0;i&lt;n;i++){
        
        double x,y,z,r;
        
            std::cout &lt;&lt; "Unesite centar za "&lt;&lt; i+1&lt;&lt;". kuglu: ";
            do{
                cen=false;
                
                try{
                    std::cin &gt;&gt; x&gt;&gt;y&gt;&gt;z;
                    if(!(std::cin)){
                        std::cin.clear();
                        std::cin.ignore(1000,'\n');
                        throw std::domain_error("Neispravan centar, unesite ponovo:");
                    }
                    else{
                        cen=true;
                    }
                }
                catch(std::domain_error e){
                    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
                    cen=false;
                }
            }while (!cen); 
            
           
            std::cout &lt;&lt; "Unesite poluprecnik: ";
            do{
                pol=false;
            
                try{   
                    std::cin&gt;&gt;r;
                    if(!(std::cin)){
                        std::cin.clear();
                        std::cin.ignore(1000,'\n');
                        throw std::domain_error("Neispravan poluprecnik, unesite ponovo:");
                    }
                    else if(r&lt;0){
                        std::cin.clear();
                        std::cin.ignore(1000,'\n');
                        throw std::domain_error("Neispravan poluprecnik, unesite ponovo:");
                    }
                    else pol=true;
                }
                catch(std::domain_error e){
                    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
                    pol=false;
                }
            } while (!pol);
        
        centar=std::make_tuple(x,y,z); 
        try{
            auto novaKugl = std::shared_ptr&lt;NepreklapajucaKugla&gt;(new NepreklapajucaKugla(x,y,z,r));
            v_kugli.at(i)=novaKugl;
        }
        catch(std::logic_error e){
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
        }
        
    }
    std::cout &lt;&lt; std::endl;
<a name="6"></a><font color="#00FF00"><a href="match666-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    std::cout &lt;&lt; "Kugle nakon obavljenog sortiranja: " &lt;&lt; std::endl;
    std::sort(v_kugli.begin(),v_kugli.end(),[](std::shared_ptr&lt;NepreklapajucaKugla&gt;k1,std::shared_ptr&lt;NepreklapajucaKugla&gt;k2)-&gt;bool{return k1-&gt;DajPovrsinu()&lt;k2-&gt;DajPovrsinu();});
</font><a name="4"></a><font color="#FF00FF"><a href="match666-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::for_each(v_kugli.begin(),v_kugli.end(),[](std::shared_ptr&lt;NepreklapajucaKugla&gt;k)-&gt;void{k-&gt;Ispisi(); std::cout &lt;&lt; std::endl;});
</font>    
	return 0;
}

</pre>
</body>
</html>
