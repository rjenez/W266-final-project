<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student2667.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1200.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class GradjaninBiH {
public:
enum Pol {Musko, Zensko};
private:
    static GradjaninBiH* zadnji;
    GradjaninBiH* prije;
    long long int jmbg;
    std::string ime_i_prezime;
    static long long int PretvoriUInt(std::string broj) {
        long long int x=0;
        for(int i(0);i&lt;broj.size();i++) { x*=10; x += broj[i]-'0'; }
        return x;
    }
    static std::string DajString(long long int broj) {
        std::string s;
        while(broj!=0) {
            int c = broj%10;
            s+= c + '0';
            broj/=10;
        }
        for(int i(0);i&lt;s.length()/2;i++)
            std::swap(s[i],s[s.length()-1-i]);
        if(s.length()==12) s = "0" + s;
        return s;
    }
    static int UInt(char x) { return x - '0'; }
    int NapraviCifru(std::string x) {
<a name="0"></a><font color="#FF0000"><a href="match171-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

        int c = 11 - ( 7 * (UInt(x[0]) + UInt(x[6])) + 6*(UInt(x[1]) + UInt(x[7])) + 5*(UInt(x[2]) + UInt(x[8])) + 4 * (UInt(x[3]) + UInt(x[9])) + 3* (UInt(x[4]) + UInt(x[10])) + 2*(UInt(x[5]) + UInt(x[11]))) % 11;
        if(c == 11) c=0;
        return c;
    }
    void ProvjeriCifru(std::string x, long long int jmbg) {
</font>        int c = 11 - ( 7 * (UInt(x[0]) + UInt(x[6])) + 6*(UInt(x[1]) + UInt(x[7])) + 5*(UInt(x[2]) + UInt(x[8])) + 4 * (UInt(x[3]) + UInt(x[9])) + 3* (UInt(x[4]) + UInt(x[10])) + 2*(UInt(x[5]) + UInt(x[11]))) % 11;
        if(c == 11) c=0;
        if(c==10 || c != jmbg%10)
            throw std::logic_error("JMBG nije validan");
    }
    void ProvjeriDatum(int d,int m, int g) {
        if(g&lt;1917 || g&gt;2017)
            throw std::logic_error("Neispravni podaci");
        if(m&lt;1 || m&gt;12) throw std::logic_error("Neispravni podaci");
        int mjeseci[13] = {0,31,28,31,30,31,30,31,31,30,31,30,31};
        if( g%400 == 0 || (g%4 ==0 &amp;&amp; g%100 !=0)) mjeseci[2]=29;
        if( d&lt;1 || d&gt;mjeseci[m]) throw std::logic_error("Neispravni podaci");
    }
    void ProvjeriMaticne(long long int jmbg) {
        GradjaninBiH *z = zadnji;
        while(z) {
            if(z-&gt;DajJMBG() == jmbg)
                throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
            z=z-&gt;prije;
        }
    }
    void ProvjeriPodatke() {
        ProvjeriCifru(DajString(jmbg), jmbg);
        if( DajSifruRegije() &lt; 0 || DajSifruRegije() &gt; 99)
            throw std::logic_error("Neispravni podaci");
        ProvjeriDatum(DajDanRodjenja(), DajMjesecRodjenja(), DajGodinuRodjenja());
        ProvjeriMaticne(jmbg);
    }
    
    std::string DajStringDuzineTri(int x) {
        std::string tmp = DajString(x);
        while(tmp.length()!=3) tmp = "0" + tmp;
        return tmp;
    }
    
    long long int DajMuJMBG(int dan_rodjenja,int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
        std::string _jmbg = DajString(dan_rodjenja) + DajString(mjesec_rodjenja) + DajString(godina_rodjenja).substr(1) + DajString(sifra_regije);
        if(_jmbg.length()==8) _jmbg = "0" + _jmbg;
        std::string kod; int kontrolna=-1;
        int o; if(pol == Pol::Musko) o=0; else o=500;
        bool kodovi[500]{0};
        GradjaninBiH* tmp = zadnji;
        while(tmp) {
            if( dan_rodjenja == tmp-&gt;DajDanRodjenja() &amp;&amp; mjesec_rodjenja == tmp-&gt;DajMjesecRodjenja() &amp;&amp; godina_rodjenja == tmp -&gt; DajGodinuRodjenja() &amp;&amp;
                sifra_regije == tmp-&gt;DajSifruRegije() &amp;&amp; pol == tmp-&gt;DajPol() ) kodovi[ PretvoriUInt(DajString(tmp-&gt;DajJMBG()).substr(9,3))-o] = true;
            tmp = tmp -&gt; prije;
        }
        for(int i(0);i&lt;500;i++) {
            if(!kodovi[i]) {
                if(NapraviCifru(_jmbg + DajStringDuzineTri(i))==10) continue;
                kod = DajStringDuzineTri(i+o);
                kontrolna = NapraviCifru(_jmbg + DajStringDuzineTri(i));
                break;
            }
        }
        _jmbg = _jmbg + kod;
        _jmbg += kontrolna + '0';
        return PretvoriUInt(_jmbg);
    }
<a name="6"></a><font color="#00FF00"><a href="match171-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    GradjaninBiH* next(GradjaninBiH* ptr) {
        GradjaninBiH* tmp = zadnji;
        if(tmp==ptr)
            return nullptr;
        while(tmp-&gt;prije!=ptr) tmp = tmp -&gt; prije;
        return tmp;
    }
public:
</font><a name="1"></a><font color="#00FF00"><a href="match171-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
~GradjaninBiH();
std::string DajImeIPrezime() const { return ime_i_prezime; }
long long int DajJMBG() const { return jmbg; }
int DajDanRodjenja() const { return PretvoriUInt(DajString(jmbg).substr(0,2)); };
int DajMjesecRodjenja() const { return PretvoriUInt(DajString(jmbg).substr(2,2)); };
int DajGodinuRodjenja() const { if (DajString(jmbg)[4] == '0') return PretvoriUInt("2"+DajString(jmbg).substr(4,3)); else return PretvoriUInt("1"+DajString(jmbg).substr(4,3)); };
</font>int DajSifruRegije() const { return PretvoriUInt(DajString(jmbg).substr(7,2)); } 
Pol DajPol() const { char tmp = DajString(jmbg)[9]; if( UInt(tmp)&gt;=5) return Pol::Zensko; else return Pol::Musko; }
void PromijeniImeIPrezime(std::string novo_ime) { ime_i_prezime = novo_ime; }
};

GradjaninBiH* GradjaninBiH::zadnji;

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) {
    this-&gt;ime_i_prezime = ime_i_prezime;
    this-&gt;jmbg = jmbg;
    this-&gt;prije = GradjaninBiH::zadnji;
    ProvjeriPodatke();
    GradjaninBiH::zadnji = this;
}

GradjaninBiH::~GradjaninBiH() {
    GradjaninBiH *tmp = next(this);
    if(tmp) tmp-&gt;prije = prije;
    if(this == GradjaninBiH::zadnji)
        GradjaninBiH::zadnji = prije;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
    this-&gt;ime_i_prezime = ime_i_prezime;
    if(sifra_regije&lt;0 || sifra_regije&gt;99)
        throw std::logic_error("Neispravni podaci");
    ProvjeriDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja);
    jmbg = DajMuJMBG(dan_rodjenja,mjesec_rodjenja,godina_rodjenja,sifra_regije,pol);
    zadnji = this;
}

int intaj(std::string broj) {
        int x=0;
        for(int i(0);i&lt;broj.length();i++) { x*=10; x += broj[i]-'0'; }
        return x;
    }

void DajArgumente(std::string datum, int &amp;d, int &amp;m, int &amp;g) {
    d = intaj(datum.substr(0,2));
    m = intaj(datum.substr(3,2));
    g = intaj(datum.substr(6));
}

int main ()
{
   std::string ime;
   long long int JMBG;
   std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
   int n;
   std::cin&gt;&gt;n;
   for(int i(0);i&lt;n;i++) {
<a name="3"></a><font color="#00FFFF"><a href="match171-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

       std::cin.ignore(10000,'\n');
       std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
       std::getline(std::cin,ime);
       std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
       std::cin&gt;&gt;JMBG;
</font>       try {
           auto gradjanin = GradjaninBiH(ime,JMBG);
<a name="2"></a><font color="#0000FF"><a href="match171-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

           std::string spol = (gradjanin.DajPol()!=0) ? "zensko" : "musko";
           std::cout&lt;&lt;"Unijeli ste gradjanina " &lt;&lt; gradjanin.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;gradjanin.DajDanRodjenja()&lt;&lt;"."&lt;&lt;gradjanin.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;gradjanin.DajGodinuRodjenja()&lt;&lt;" u regiji "
                    &lt;&lt;gradjanin.DajSifruRegije()&lt;&lt;", "&lt;&lt;spol&lt;&lt;"."&lt;&lt;std::endl; 
       } catch(std::logic_error belaj) {
</font>           --i;
           std::cout&lt;&lt; belaj.what() &lt;&lt; std::endl;
       }
   }
   std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
   std::cin&gt;&gt;n;
   for(int i(0);i&lt;n;i++) {
<a name="5"></a><font color="#FF0000"><a href="match171-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

       std::cin.ignore(10000,'\n');
       std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
       std::getline(std::cin, ime);
       int d,m,g;
</font>       std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
       std::string datum;
       std::getline(std::cin, datum);
       DajArgumente(datum,d,m,g);
       std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
       int s;
       std::cin&gt;&gt;s;
       std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
       char c;
       std::cin&gt;&gt;c;
       GradjaninBiH::Pol pol = (c=='M') ? GradjaninBiH::Pol::Musko : GradjaninBiH::Pol::Zensko;
       try {
<a name="4"></a><font color="#FF00FF"><a href="match171-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

           auto gradjanin1 = GradjaninBiH(ime, d,m,g,s,pol);
           std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt; gradjanin1.DajImeIPrezime() &lt;&lt; " JMBG: "&lt;&lt; gradjanin1.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
       } catch (std::logic_error belaj) {
</font>           --i;
           std::cout&lt;&lt;belaj.what()&lt;&lt;std::endl;
       }
   }
   
   /*std::string ime = "Murga Drot";
           GradjaninBiH g(ime, 2905017170007);
           std::cout &lt;&lt; g.DajDanRodjenja() &lt;&lt;"/"&lt;&lt;g.DajMjesecRodjenja() &lt;&lt;"/" &lt;&lt;g.DajGodinuRodjenja()&lt;&lt;std::endl;
           std::cout &lt;&lt;  g.DajSifruRegije()&lt;&lt; std::endl; 
           std::cout &lt;&lt; g.DajPol() &lt;&lt; std::endl;*/
	return 0;
}</pre>
</body>
</html>
