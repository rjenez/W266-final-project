<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student9972.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1326.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match87-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_77.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;

using namespace std;

class GradjaninBiH
{
    string ime;
    long long int jmbg;
    
    GradjaninBiH *pret;
    static GradjaninBiH *tren;
    static int br;    
    
    bool ProvjeriDatum(int d,int m,int g)
    {
        int niz[12]={31,28,31,30,31,30,30,31,30,31,30,31};
        if((d&lt;=0 || d&gt;niz[m-1]) || (m&lt;0 || m&gt;12) || (g&lt;1917))
         return false;
        return true;
    }
    
    public:
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg)
    {   
        
        ime=ime_i_prezime;
        
        int d,m,g;
        d=jmbg/100000000000;
        m=jmbg/1000000000%100;
        g=jmbg/1000000%1000;
        
        if(g&gt;17)
            g+=1000;
        else g+=2000;
        
        if(!ProvjeriDatum(d,m,g)) throw logic_error("JMBG nije validan");
         if(br==0)
         {
             pret=nullptr;
             GradjaninBiH::jmbg=jmbg;
             tren=this;
         }
        else
        {   
            pret=tren;
            GradjaninBiH *pom=tren;
            while(pom!=nullptr) 
            {   
               
                if(pom-&gt;DajJMBG()==jmbg) throw logic_error("Vec postoji gradjanin sa istim JMBG");
                pom=pom-&gt;pret;
                
            }
            GradjaninBiH::jmbg=jmbg;
            tren=this;
        }
        
        
          br++;
                
        
    }
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol pol)
    {   
        
        if(!ProvjeriDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja) || (sifra_regije&lt;0 || sifra_regije&gt;99)) throw logic_error("Neispravni podaci");
        
        ime=ime_i_prezime;
        long long int n=0;
        int godina=godina_rodjenja%1000;
        
       n=dan_rodjenja/10+n*10;
       n=dan_rodjenja%10+n*10;
       
       if(mjesec_rodjenja&lt;10)
       {
           n*=10;
           n=mjesec_rodjenja%10+n*10;    
           
       }
       else{
       n=mjesec_rodjenja/10+n*10;
       n=mjesec_rodjenja%10+n*10;    
       }
       
       
       n=godina/100+n*10;
       n=godina/10%10+n*10;
       n=godina%10+n*10;
       
       if(sifra_regije&lt;10)
       {
           n*=10;
           n=sifra_regije%10+n*10;    
       }
       else 
       {
           n=sifra_regije/10+n*10;
           n=sifra_regije%10+n*10;    
       }
       
       int id;
       if(Pol::Musko==pol) id=0;
       else if(Pol::Zensko==pol) id=500;
      
        if(br==0)
         {
             pret=nullptr;
             tren=this;
         }
        else
        {   
            pret=tren;
            GradjaninBiH *pom=tren;
            while(pom!=nullptr) 
            {  
                if(pom-&gt;DajJMBG()%1000/10==id &amp;&amp; pom-&gt;DajJMBG()/10000==n &amp;&amp; pom-&gt;DajPol()==pol) 
                        id++;
                pom=pom-&gt;pret;
       
            }
            tren=this;
        }
        
        if(id==0)
        {
           n*=1000;
        }
        else if(id&gt;0 &amp;&amp; id&lt;10)
        {
            n*=10;n*=10;
            n=id%10+n*10;
        }
        else if(id&gt;9 &amp;&amp; id&lt;100)
        {
            n*=10;
            n=id/10+n*10;
            n=id%10+n*10;
        }
        else 
        {
            n=id/100+n*10;
            n=id/10%10+n*10;
            n=id%10+n*10;
        }
        
         
        int c=11-(7*(dan_rodjenja/10+godina%10)+6*(dan_rodjenja%10+sifra_regije/10)+5*(mjesec_rodjenja/10+sifra_regije%10)+4*(mjesec_rodjenja%10+id/100)+3*(godina/100+id/10%10)+2*(godina/10%10+id%10))%11;
        if(c==11) c=0;
       else if(c==10) throw logic_error("JMBG nije validan");
        
        n=n*10+c;
       
         br++;
        jmbg=n;
    }
    std::string DajImeIPrezime() const
    {
        return ime;
    }
    long long int DajJMBG() const
    {
        return jmbg;
        
    }
    int DajDanRodjenja() const
    {
        return jmbg/100000000000;
    }
    int DajMjesecRodjenja() const
    {
        return (jmbg/1000000000)%100;
    }
    int DajGodinuRodjenja() const
    {
        int g=(jmbg/1000000)%1000;
        if(g&gt;917)g+=1000;
        else g+=2000;
        return g;
    }
    int DajSifruRegije() const
    {
        return(jmbg/10000)%100;
    }
    Pol DajPol() const
    {
        int n=(jmbg/10)%1000;
        if(n&lt;=499) return Pol::Musko;
        return Pol::Zensko;
    }
    void PromijeniImeIPrezime(std::string novo_ime)
    {
        ime=novo_ime;
    }
    
    void Ispis()const
    {
        cout&lt;&lt;ime&lt;&lt;"/"&lt;&lt;jmbg&lt;&lt;endl;
    }
    
};

string Pretvori(GradjaninBiH::Pol pol)
{
    if(pol==GradjaninBiH::Musko) return "musko";
    return "zensko";
}

GradjaninBiH::Pol Pretvori(char c)
{
    if(c=='M') return GradjaninBiH::Musko;
    return GradjaninBiH::Zensko;
}
GradjaninBiH *GradjaninBiH::tren;
int GradjaninBiH::br=0;
int main ()
{   
    GradjaninBiH *niz[1000];
    cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;endl;
    int n;cin&gt;&gt;n;
    cin.clear();
    cin.ignore(10000,'\n');
   
    for(int i=0;i&lt;n;i++)
    {
        string s;long long int jmbg;
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;endl;
        getline(cin,s);
        cout&lt;&lt;"Unesite JMBG: "&lt;&lt;endl;
        cin&gt;&gt;jmbg;
        cin.clear();cin.ignore(10000,'\n');
        try{
                niz[i]=new GradjaninBiH(s,jmbg);
                 cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;niz[i]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;niz[i]-&gt;DajMjesecRodjenja()
</font><a name="1"></a><font color="#00FF00"><a href="match87-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_20.gif"/></a>

        &lt;&lt;"."&lt;&lt;niz[i]-&gt;DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;niz[i]-&gt;DajSifruRegije()&lt;&lt;", "&lt;&lt;Pretvori(niz[i]-&gt;DajPol())&lt;&lt;"."&lt;&lt;endl;
    
        }catch(logic_error e)
        {   
            i--;
            cout&lt;&lt;e.what()&lt;&lt;endl;
        }
        
    }
    
    int n1;
    cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;endl;
    cin&gt;&gt;n1;
    
    cin.clear();
    cin.ignore(10000,'\n');
   
   
    for(int i=n;i&lt;n+n1;i++)
    {
        string s;
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;endl;
        getline(cin,s);
        cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;endl;
        int m,d,g;char c;
        cin&gt;&gt;d&gt;&gt;c&gt;&gt;m&gt;&gt;c&gt;&gt;g;
        int sifra;
        cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;endl;
        cin&gt;&gt;sifra;
        cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;endl;
        char p;
        cin&gt;&gt;p;
        
        cin.clear();
        cin.ignore(10000,'\n');
   
        
        try
        {
            niz[i]=new GradjaninBiH(s,d,m,g,sifra,Pretvori(p));
            cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[i]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;endl;
        }
        catch(logic_error e )
        {   
            i--;
            cout&lt;&lt;e.what()&lt;&lt;endl;
        }
        
        
    }
    
    for(int i=0;i&lt;n+n1;i++)
        delete niz[i];
    
    
	return 0;
</font>}</pre>
</body>
</html>
