<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3546.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3546.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

<a name="2"></a><font color="#0000FF"><a href="match28-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_28.gif"/></a>

using std::cin;
using std::cout;

int BrojacCifara(long long int x){
    int brojac(0);
    while(x!=0){
        x/=10;
        brojac++;
    }
    return brojac;
}
bool PrestupnaGodina(int g){
    if(g%4==0 &amp;&amp; g%100!=0 || g%400==0) return true;
    return false;
}

bool IspravnostDatuma(int d,int m,int g){
    if(d==0 || d&gt;31 || m==0 || m&gt;12 || g&lt;1917 || g&gt;2017) return false;
    if(d==31 &amp;&amp; m==4 &amp;&amp; m==6 &amp;&amp; m==9 &amp;&amp; m==11) return false;
    if(d==29 &amp;&amp; m==2 &amp;&amp; !PrestupnaGodina(g)) return false;
    return true;
}

class GradjaninBiH{
    std::string imeiprez;
    long long int JMBG;
    int danrodj,mjrodj,godrodj,sifrareg;
    static GradjaninBiH *posljedni;
    GradjaninBiH *prije;
    int kodosobe;
    public:
    enum Pol{Musko,Zensko};
    GradjaninBiH(std::string ime_i_prezime,long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime,int dan_rodjenja,int mjesec_rodjenja,int godina_rodjenja,int sifra_regije,Pol pol);
    GradjaninBiH(const GradjaninBiH &amp;g)=delete;
    GradjaninBiH &amp;operator =(const GradjaninBiH &amp;g)=delete;
    ~GradjaninBiH() {
        for(auto p=posljedni;p!=nullptr;p=p-&gt;prije){
            if(posljedni==this){
                posljedni=posljedni-&gt;prije;
                break;
            }
            if(p-&gt;prije==this){
                p-&gt;prije=this-&gt;prije;
                break;
            }
        }
    }
    std::string DajImeIPrezime() const{ return imeiprez;}
    long long int DajJMBG() const{return JMBG;}
    int DajDanRodjenja() const{return danrodj;}
    int DajMjesecRodjenja() const{return mjrodj;}
    int DajGodinuRodjenja() const{return godrodj;}
    int DajSifruRegije() const{return sifrareg;}
    Pol DajPol() const{
        if(kodosobe&lt;500) return Musko;
        else return Zensko;
    }
    void PromijeniImeIPrezime(std::string novo_ime){imeiprez=novo_ime;}
};

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime,long long int jmbg){
    int niz[13];
    if(BrojacCifara(jmbg)==12)
    niz[0]=0;
    int indeks(12);
    long long int temp(jmbg);
    while(temp!=0){
        niz[indeks]=temp%10;
        indeks--;
        temp/=10;
    }
    int danrodj1=10*niz[0]+niz[1];
    int mjrodj1=10*niz[2]+niz[3];
    int godrodj1=100*niz[4]+10*niz[5]+niz[6];
    if(godrodj1&lt;=17) godrodj1+=2000;
    else godrodj1+=1000;
    int sifrareg1=10*niz[7]+niz[8];
    int kod;
    kod=100*niz[9]+10*niz[10]+niz[11];
    int x;
    x=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
</font><a name="0"></a><font color="#FF0000"><a href="match28-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_29.gif"/></a>

    if(x==11) x=0;
    if(!IspravnostDatuma(danrodj1,mjrodj1,godrodj1) || x!=niz[12]) throw std::domain_error("JMBG nije validan");
    for(auto r=posljedni;r!=nullptr;r=r-&gt;prije){
        if((r-&gt;JMBG)==jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
    }
    prije=posljedni;
    posljedni=this;
    imeiprez=ime_i_prezime;
    JMBG=jmbg;
    danrodj=danrodj1;
    mjrodj=mjrodj1;
    godrodj=godrodj1;
    sifrareg=sifrareg1;
    kodosobe=kod;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime,int dan_rodjenja,int mjesec_rodjenja,int godina_rodjenja,int sifra_regije,Pol pol){
    if(!IspravnostDatuma(dan_rodjenja,mjesec_rodjenja,godina_rodjenja) || sifra_regije&lt;0 || sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
    int kod;
    if(pol==Musko) kod=0;
    else kod=500;
    for(auto r=posljedni;r!=nullptr;r=r-&gt;prije){
        if(pol==Musko){
            if((r-&gt;kodosobe)&lt;500 &amp;&amp; (r-&gt;danrodj)==dan_rodjenja &amp;&amp; (r-&gt;mjrodj)==mjesec_rodjenja &amp;&amp; (r-&gt;godrodj)==godina_rodjenja &amp;&amp; (r-&gt;sifrareg)==sifra_regije){
                kod=++(r-&gt;kodosobe);
                break;
            }
        }
        else if(pol==Zensko){
            if((r-&gt;kodosobe)&gt;499 &amp;&amp; (r-&gt;danrodj)==dan_rodjenja &amp;&amp; (r-&gt;mjrodj)==mjesec_rodjenja &amp;&amp; (r-&gt;godrodj)==godina_rodjenja &amp;&amp; (r-&gt;sifrareg)==sifra_regije){
                kod=++(r-&gt;kodosobe);
                break;
            }
        }
    }
    prije=posljedni;
    posljedni=this;
    kodosobe=kod;
    imeiprez=ime_i_prezime;
    danrodj=dan_rodjenja;
    mjrodj=mjesec_rodjenja;
    godrodj=godina_rodjenja;
    sifrareg=sifra_regije;
    if(godina_rodjenja&gt;2000)
    godina_rodjenja-=2000;
    else godina_rodjenja-=1000;
    long long int jmbg(0);
    jmbg+=dan_rodjenja;
    jmbg*=100;
    jmbg+=mjesec_rodjenja;
    jmbg*=1000;
    jmbg+=godina_rodjenja;
    jmbg*=100;
    jmbg+=sifra_regije;
    jmbg*=1000;
    jmbg+=kod;
    jmbg*=10;
    int niz[13];
    niz[0]=(dan_rodjenja-dan_rodjenja%10)/10;
    niz[1]=dan_rodjenja%10;
    niz[2]=(mjesec_rodjenja-mjesec_rodjenja%10)/10;
    niz[3]=mjesec_rodjenja%10;
    niz[4]=(godina_rodjenja-godina_rodjenja%100)/100;
    niz[5]=((godina_rodjenja-100*niz[4])-godina_rodjenja%10)/10;
    niz[6]=godina_rodjenja%10;
    niz[7]=(sifra_regije-sifra_regije%10)/10;
    niz[8]=sifra_regije%10;
    niz[9]=(kod-kod%100)/100;
    niz[10]=((kod-100*niz[9])-kod%10)/10;
    niz[11]=kod%10;
    niz[12]=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
</font><a name="3"></a><font color="#00FFFF"><a href="match28-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_7.gif"/></a>

    if(niz[12]==11) niz[12]=0;
    if(niz[12]!=10) jmbg+=niz[12];
    else{
        jmbg/=10;
        jmbg-=kod;
        kod++;
        jmbg+=kod;
        niz[9]=(kod-kod%100)/100;
        niz[10]=((kod-100*niz[9])-kod%10)/10;
        niz[11]=kod%10;
        niz[12]=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
</font><a name="1"></a><font color="#00FF00"><a href="match28-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_28.gif"/></a>

        jmbg+=niz[12];
    }
    JMBG=jmbg;
}

GradjaninBiH* GradjaninBiH::posljedni=nullptr;

int main ()
{
    cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? ";
    int n(0);
    cin&gt;&gt;n;
    cin.ignore(1000,'\n');
    cout&lt;&lt;std::endl;
    GradjaninBiH *niz[100];
    for(int i=0;i&lt;n;i++){
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): ";
        std::string s;
        std::getline(cin,s);
        cout&lt;&lt;std::endl;
        cout&lt;&lt;"Unesite JMBG: ";
        long long int x;
        cin&gt;&gt;x;
        cin.ignore(1000,'\n');
        cout&lt;&lt;std::endl;
        try{
            niz[i]=new GradjaninBiH(s,x);
            cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;(*niz[i]).DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;(*niz[i]).DajDanRodjenja()&lt;&lt;"."&lt;&lt;(*niz[i]).DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;(*niz[i]).DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;(*niz[i]).DajSifruRegije()&lt;&lt;", ";
            if((*niz[i]).DajPol()==GradjaninBiH::Musko)
            cout&lt;&lt;"musko."&lt;&lt;std::endl;
            else cout&lt;&lt;"zensko."&lt;&lt;std::endl;
        }
        catch(std::domain_error iz){
            cout&lt;&lt;iz.what()&lt;&lt;std::endl;
            i--;
        }
        catch(std::logic_error izu){
            cout&lt;&lt;izu.what()&lt;&lt;std::endl;
            i--;
        }
    }
    cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? ";
    int k;
    cin&gt;&gt;k;
    cin.ignore(1000,'\n');
    cout&lt;&lt;std::endl;
    for(int i=n;i&lt;n+k;i++){
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): ";
        std::string s;
        std::getline(cin,s);
        cout&lt;&lt;std::endl;
        cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): ";
        char znak1,znak2;
        int dan,mjesec,godina;
        cin&gt;&gt;dan&gt;&gt;znak1&gt;&gt;mjesec&gt;&gt;znak2&gt;&gt;godina;
        cout&lt;&lt;std::endl;
        cout&lt;&lt;"Unesite sifru regije: ";
        int sifra;
        cin&gt;&gt;sifra;
        cin.ignore(1000,'\n');
        cout&lt;&lt;std::endl;
        cout&lt;&lt;"Unesite M za musko, Z za zensko: ";
        char p;
        cin&gt;&gt;p;
        cout&lt;&lt;std::endl;
        cin.ignore(1000,'\n');
        try{
        GradjaninBiH::Pol p1;
        if(p=='M')
        p1=GradjaninBiH::Musko;
        else
        p1=GradjaninBiH::Zensko;
        niz[i]=new GradjaninBiH(s,dan,mjesec,godina,sifra,p1);
        cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;(*niz[i]).DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;(*niz[i]).DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
        }
        catch(std::logic_error iz){
            cout&lt;&lt;iz.what()&lt;&lt;std::endl;
</font>            i--;
        }
    }
	return 0;
}</pre>
</body>
</html>
