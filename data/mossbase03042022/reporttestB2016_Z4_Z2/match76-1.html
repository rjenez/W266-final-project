<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student7678.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student7911.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match76-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;


using std::cin;
using std::cout;
using std::endl;
using std::string;
using std::logic_error;
using std::getline;


class GradjaninBiH{
    
    string iip;//ImeIPrezime
    long long int jmb;
    int dr,mr,gr,sifr,kod;
    
   
    GradjaninBiH *prije_njega;
    static GradjaninBiH * posljednji_kreirani;
    
    
    
    public:
    enum Pol {Musko, Zensko};
    GradjaninBiH(string ime_i_prezime, long long int jmbg){
        
        
       
        for(GradjaninBiH *p = posljednji_kreirani; p!=nullptr; p = p-&gt;prije_njega){
                if(jmbg == p-&gt;jmb)throw logic_error("Vec postoji gradjanin sa istim JMBG");
            }
            
            
        
        int dr1 = int(jmbg/(pow(10,11)));
        if(dr1&lt;1 || dr1&gt;31)throw logic_error("JMBG nije validan");
        int mr1 = int(jmbg/pow(10,9))%100;
        if(mr1&lt;1 || mr1&gt;12)throw logic_error("JMBG nije validan");
        int gr1 = int(jmbg/pow(10,6))%1000;
        int tmp = gr1/100;
        int tmp2;
        if(tmp==0)tmp2 = gr1+2000;
        else tmp2 = gr1+1000;
        
        if(tmp2&gt;2017 || tmp2&lt;1917)throw logic_error("JMBG nije validan");
        
        int c[13];
        
        long long int x = jmbg;
        for(int i=12; i&gt;=0; i--){
            c[i] = x%10;
            x=x/10;
        }
        
        int rez = 11 - (7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2] + c[8]) + 4*(c[3] + c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
</font><a name="1"></a><font color="#00FF00"><a href="match76-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_33.gif"/></a>

        
        if(rez == 10)throw logic_error("JMBG nije validan");
        if(rez == 11)rez=0;
        if(c[12]!=rez)throw logic_error("JMBG nije validan");
        
        
        iip = ime_i_prezime;
        jmb = jmbg;
        dr = dr1;
        mr = mr1;
        gr = gr1;
        sifr = int(jmbg/pow(10,4))%100;
        kod = (jmbg/10)%1000;
        
        prije_njega = posljednji_kreirani;
        posljednji_kreirani = this;
        
        
     }
    
    GradjaninBiH(string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
        
        if((dan_rodjenja&lt;1 || dan_rodjenja&gt;31)||(mjesec_rodjenja&lt;1 || mjesec_rodjenja&gt;12)||(godina_rodjenja&lt;1917 || godina_rodjenja&gt;2017))throw logic_error("Neispravni podaci");
        if(sifra_regije&lt;0 || sifra_regije&gt;99)throw logic_error("Neispravni podaci");
        
        
        prije_njega = posljednji_kreirani;
        posljednji_kreirani = this;
            
        iip = ime_i_prezime;
        dr = dan_rodjenja;
        mr = mjesec_rodjenja;
        gr = godina_rodjenja;
        sifr = sifra_regije;
        
        int c[13];
        c[0] = dan_rodjenja/10;
        c[1] = dan_rodjenja%10;
        
        c[2] = mjesec_rodjenja/10;
        c[3] = mjesec_rodjenja%10;
        
        c[4] = (godina_rodjenja%1000)/100;
        c[5] = ((godina_rodjenja%1000)%100)/10;
        c[6] = ((godina_rodjenja%1000)%100)%10;
        
        c[7] = sifra_regije/10;
        c[8] = sifra_regije%10;
        
        
        //trayimo sa istim datumima i regiji i polu
        if(prije_njega == nullptr){//za prvi clan
            if(pol == Musko)this-&gt;kod=0;
            if(pol == Zensko)this-&gt;kod=500;
        }
        else{
            if(pol == Musko){
            for(GradjaninBiH *p = posljednji_kreirani; p!=nullptr; p = p-&gt;prije_njega){//ovdje trazim zadnjeg muskarca sa istim datumom i regijom
                    if(p-&gt;kod&gt;=500 &amp;&amp; p-&gt;kod&lt;=999)continue;                 //ne gledaj zene
                    if((p-&gt;dr == this-&gt;dr)&amp;&amp;(p-&gt;mr == this-&gt;mr)&amp;&amp;(p-&gt;gr == this-&gt;gr)&amp;&amp;(p-&gt;sifr == this-&gt;sifr)){this-&gt;kod = (p-&gt;kod)+1;break;}
                }
            }
            
            if(pol == Zensko){
                for(GradjaninBiH *p = posljednji_kreirani; p!=nullptr; p = p-&gt;prije_njega){
                if(p-&gt;kod&gt;=0 &amp;&amp; p-&gt;kod&lt;=499)continue;
                if((p-&gt;dr == this-&gt;dr)&amp;&amp;(p-&gt;mr == this-&gt;mr)&amp;&amp;(p-&gt;gr == this-&gt;gr)&amp;&amp;(p-&gt;sifr == this-&gt;sifr)){this-&gt;kod = (p-&gt;kod)+1;break;}
            }
            }
        }
        
        
        c[9] = kod/100;
        c[10] = (kod%100)/10;
        c[11] = (kod%100)%10;
        
        int rez = 11 - (7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2] + c[8]) + 4*(c[3] + c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
</font><a name="3"></a><font color="#00FFFF"><a href="match76-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

        if(rez == 11){
            c[12] = 0;
        }
        else if(rez == 10){
            (this-&gt;kod)++;
            c[9] = kod/100;
            c[10] = (kod%100)/10;
             c[11] = (kod%100)%10;
            rez = 11 - (7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2] + c[8]) + 4*(c[3] + c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
</font><a name="0"></a><font color="#FF0000"><a href="match76-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_34.gif"/></a>

        }
        c[12] = rez;
        long long int jmbg = 0;
        int b=12;
        for(int i=0; i&lt;13; i++){
            jmbg = jmbg + pow(10,b);
            b--;
        }
        
        jmb = jmbg;
        
        
    }
    
    
    string DajImeIPrezime()const{
        return iip;
    }
    
    long long int DajJMBG()const{
        return jmb;
    }
    
    int DajDanRodjenja()const{
        return dr;
    }
    
    int DajMjesecRodjenja()const{
        return mr;
    }
    
    int DajGodinuRodjenja()const{
        int gdr;
        if(gr/100 != 0)gdr = gr+1000;
        else gdr = gr+2000;
        
        return gdr;
        
    }
    
    int DajSifruRegije()const{
        return sifr;
    }
    
    Pol DajPol()const{
        if(kod&gt;=0 &amp;&amp; kod&lt;=499)return Musko;
        return Zensko;
    }
    
    void PromijeniImeIPrezime(string novo_ime){
        iip = novo_ime;
    }
            
    
};
    
GradjaninBiH* GradjaninBiH::posljednji_kreirani=nullptr;



int main ()
{
    cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? ";
    int n; cin&gt;&gt;n;
    cin.ignore(1000,'\n');
    GradjaninBiH *p[100];
    
    for(int i=0; i&lt;n; i++){
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;endl;
        
        string ime;
        getline(cin,ime);
        cout&lt;&lt;"Unesite JMBG: "&lt;&lt;endl;
        long long int jmb; cin&gt;&gt;jmb;
        cin.ignore(1000,'\n');
        try{
            GradjaninBiH g(ime, jmb);
            p[i] = &amp;g;
        cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;g.DajImeIPrezime()&lt;&lt;"  rodjenog "&lt;&lt;g.DajDanRodjenja()&lt;&lt;"."&lt;&lt;g.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;g.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;g.DajSifruRegije();
        cout&lt;&lt;", ";
        if(g.DajPol()==0)cout&lt;&lt;"musko."&lt;&lt;endl;
        else cout&lt;&lt;"zensko."&lt;&lt;endl;
        
        }
        catch(logic_error e){
            cout&lt;&lt;e.what()&lt;&lt;endl;
            i--;
        }
    }
    
   
    
    cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? ";
    int m; cin&gt;&gt;m;
    cin.ignore(1000,'\n');
    
    for(int i=n; i&lt;m; i++){
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;endl;
         string ime;
        getline(cin,ime);
        cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;endl;
        int d,m,g; cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
        cin.ignore(1000,'\n');
        cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;endl;
        int s; cin&gt;&gt;s;
        cin.ignore(1000,'\n');
        cout&lt;&lt;"Unesite M za musko, Z za zensko: ";
       
        char q; cin&gt;&gt;q;
         cin.ignore(1000,'\n');
         GradjaninBiH::Pol pol;
         if(q=='M')pol = GradjaninBiH::Musko;
         if(q=='Z')pol = GradjaninBiH::Zensko;
         try{
         GradjaninBiH gr(ime,d,m,g,s,pol);
         p[i]=&amp;gr;
         cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;gr.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;gr.DajJMBG()&lt;&lt;".";
         }
         catch(logic_error e){
             cout&lt;&lt;e.what()&lt;&lt;endl;
</font>             i--;
         }
    }
	return 0;
}</pre>
</body>
</html>
