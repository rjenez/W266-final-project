<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3186.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3186.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match492-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
#include &lt;stdexcept&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

class GradjaninBiH {
public: enum Pol { Musko, Zensko };
private:
    std::string ImePrezime; Pol pol;
</font>    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije;
    long long int maticni_broj; // Veze izmedju cvorova ..
    GradjaninBiH *veza; static GradjaninBiH *zadnji;
    // Pomocne privatne metode ..
    bool DaLiValjaDatum           (int d, int m, int g)                   const;
    bool ImalIstogMaticnog        (long long int n)                       const;
    long long int GenerisiMaticni (int d, int m, int g, int s_r, int kod) const;
public:
    GradjaninBiH (std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH (std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
        int godina_rodjenja, int sifra_regije, Pol pol);
    ~GradjaninBiH() {
        if (zadnji == this) zadnji = this -&gt; veza; 
        else {
            GradjaninBiH *destruktPOK; for (destruktPOK = zadnji; destruktPOK -&gt; veza != this; destruktPOK = destruktPOK -&gt; veza);
            destruktPOK -&gt; veza = this -&gt; veza;
        }
    }
    std::string DajImeIPrezime() const { return GradjaninBiH::ImePrezime;           };
    long long int DajJMBG()      const { return GradjaninBiH::maticni_broj;         };
    int DajDanRodjenja()         const { return GradjaninBiH::dan_rodjenja;         };
    int DajMjesecRodjenja()      const { return GradjaninBiH::mjesec_rodjenja;      };
    int DajGodinuRodjenja()      const { return GradjaninBiH::godina_rodjenja;      };
    int DajSifruRegije()         const { return GradjaninBiH::sifra_regije;         };
    Pol DajPol()                 const { return GradjaninBiH::pol;                  };
    void PromijeniImeIPrezime (std::string novo_ime);
};  GradjaninBiH *GradjaninBiH::zadnji = nullptr;

<a name="0"></a><font color="#FF0000"><a href="match492-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

bool GradjaninBiH::DaLiValjaDatum (int d, int m, int g) const {
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if ((g % 4 == 0 and g % 100 != 0) or g % 400 == 0) broj_dana[1]++;
    if (g &lt; 1 or d &lt; 1 or m &lt; 1 or m &gt; 12 or d &gt; broj_dana[m - 1])
</font>        return false;   return true;
}

bool GradjaninBiH::ImalIstogMaticnog (long long int n) const {
    for (auto *it = GradjaninBiH::zadnji; it != nullptr; it = it-&gt;veza)
        if (n == it-&gt;DajJMBG()) return true; return false;
}

long long int GradjaninBiH::GenerisiMaticni (int d, int m, int g, int s_r, int kod) const {
    long long int mat_generic = 1e11*d + 1e9*m + 1e6*(g%1000) + 1e4*s_r + 1e1*kod;
    int n_mat[13];
    {
        int brojac_cifri{0}, pocetni_index{0}; long long int temp{mat_generic};
        while (temp != 0)   brojac_cifri++, temp /= 10;
        if      (brojac_cifri == 13) pocetni_index = 0;
        else if (brojac_cifri == 12) pocetni_index = 1, n_mat[0] = 0;
        else throw std::logic_error ("Izuzetak"); temp = mat_generic; n_mat[12] = 0;
        for (int i=12; i&gt;=pocetni_index; --i)   n_mat[i] = temp%10, temp /= 10;
    }   //for (int i=0; i&lt;=12; ++i)   std::cout &lt;&lt; n_mat[i] &lt;&lt; " "; std::cout &lt;&lt; std::endl;
    int c13{11-(7*(n_mat[0] + n_mat[6])+ 6*(n_mat[1] + n_mat[7]) + 5*(n_mat[2] + n_mat[8]) + 4*(n_mat[3] + n_mat[9] ) + 3 * (n_mat[4] + n_mat[10]) + 2 * (n_mat[5] + n_mat[11]))%11};
    if (c13 == 11) c13 = 0; else if (c13 == 10)  throw std::logic_error("Izuzetak");  
    return (mat_generic + c13);
}

// Prvi konstruktor ..
GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, long long int jmbg) {
    
    int maticni_niz[13];
    {   // Testiranje da li je format maticnog broja okej.. Takodjer dodavanje nule za 12-cifreni..
        int brojac_cifri{0}, pocetni_index{0}; long long int temp{jmbg};
        while (temp != 0)   brojac_cifri++,   temp /= 10; temp = jmbg;
        if      (brojac_cifri == 13) pocetni_index = 0;
        else if (brojac_cifri == 12) pocetni_index = 1, maticni_niz[0] = 0;
        else throw std::logic_error ("JMBG nije validan");
        for (int i=12; i&gt;=pocetni_index; --i) maticni_niz[i] = temp%10, temp /= 10;
    }
    
    int d{0}, m{0}, g{0}, s_r{0}, kod{0};
    for (int i=0;  i&lt;12; ++i) {
        if      (i &gt;= 0 and i &lt;= 1)  d *= 10, d += maticni_niz[i];
        else if (i &gt;= 2 and i &lt;= 3)  m *= 10, m += maticni_niz[i];
        else if (i &gt;= 4 and i &lt;= 6) {
            if      (maticni_niz[i] == 9 and i == 4) g = 1;
            else if (maticni_niz[i] == 0 and i == 4) g = 2;
                    g *= 10, g += maticni_niz[i];
        }
        else if (i &gt;= 7 and i &lt;= 8)  s_r *= 10, s_r += maticni_niz[i];
        else if (i &gt;= 9 and i &lt;= 11) kod *= 10, kod += maticni_niz[i];
    }   // std::cout &lt;&lt; "Dan: " &lt;&lt; d &lt;&lt; " Mj: " &lt;&lt; m &lt;&lt; " godina: " &lt;&lt; g &lt;&lt; " kod: " &lt;&lt; kod &lt;&lt; " s_r: " &lt;&lt; s_r; for (int i=0; i&lt;=12; ++i)   std::cout &lt;&lt; maticni_niz[i];    std::cout &lt;&lt; std::endl;
    int c13 {11-(7*(maticni_niz[0]+maticni_niz[6])+6*(maticni_niz[1]+maticni_niz[7])+5*(maticni_niz[2]+maticni_niz[8])+4*(maticni_niz[3]+maticni_niz[9])+3*(maticni_niz[4]+maticni_niz[10])+2*(maticni_niz[5]+maticni_niz[11]))%11};
    if (c13 == 11)  c13 = 0;    if (not(DaLiValjaDatum(d, m, g)) or not(c13 == maticni_niz[12]) or g &gt; 2017 or g &lt; 1917 or kod &gt; 999 or kod &lt; 0)    throw std::logic_error ("JMBG nije validan"); 
    if (GradjaninBiH::ImalIstogMaticnog(jmbg)) throw std::logic_error ("Vec postoji gradjanin sa istim JMBG");
<a name="3"></a><font color="#00FFFF"><a href="match492-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    GradjaninBiH::ImePrezime = ime_i_prezime;   GradjaninBiH::dan_rodjenja = d; GradjaninBiH::mjesec_rodjenja = m;  GradjaninBiH::godina_rodjenja = g;  GradjaninBiH::sifra_regije = s_r;   GradjaninBiH::maticni_broj = jmbg;  
    if (kod &gt;= 0 and kod &lt;= 499)  GradjaninBiH::pol = Pol::Musko; else    GradjaninBiH::pol = Pol::Zensko;  veza = zadnji;  zadnji = this;
</font><a name="4"></a><font color="#FF00FF"><a href="match492-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

}

// Drugi konstruktor ..
GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
    if (DaLiValjaDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja)) {
</font>        GradjaninBiH::dan_rodjenja = dan_rodjenja;
        GradjaninBiH::mjesec_rodjenja = mjesec_rodjenja;
        GradjaninBiH::godina_rodjenja = godina_rodjenja;
    }   else throw std::logic_error ("Neispravni podaci");
    if (sifra_regije &lt;= 99 and sifra_regije &gt;= 0) {
        GradjaninBiH::sifra_regije = sifra_regije;
    }   else throw std::logic_error ("Neispravni podaci");
    GradjaninBiH::ImePrezime = ime_i_prezime; GradjaninBiH::pol = pol;
    
    int kod_setter(0);  if (pol == Pol::Zensko) kod_setter = 500;
    for (;;) {  // Ovdje treba generisati maticni broj osobe ..
        try {
            long long int mat = GenerisiMaticni(dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, kod_setter);
            if (ImalIstogMaticnog(mat)) kod_setter++;
            else {
                GradjaninBiH::maticni_broj = mat; 
                veza = zadnji; zadnji = this; break;
            }
        }   catch (std::logic_error) {
            kod_setter++;
        }
    }
}

void GradjaninBiH::PromijeniImeIPrezime (std::string novo_ime) {
    GradjaninBiH::ImePrezime = novo_ime;
}

int main ()
{ 
    try {
        int broj_gradjana;
        std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? " &lt;&lt; std::endl;
        std::cin &gt;&gt; broj_gradjana; std::cin.ignore (10000, '\n');
        
        for (int i=0; i&lt;broj_gradjana; ++i) {
            std::string input_;
            std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match492-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            std::getline (std::cin, input_);
            
            long long int input_maticni_;
            std::cout &lt;&lt; "Unesite JMBG: " &lt;&lt; std::endl;
            std::cin &gt;&gt; input_maticni_;
            
            try {
                GradjaninBiH neka_osoba (input_, input_maticni_);
                std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; neka_osoba.DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; neka_osoba.DajDanRodjenja() &lt;&lt; ".";
</font>                std::cout &lt;&lt; neka_osoba.DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; neka_osoba.DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; neka_osoba.DajSifruRegije();
                std::cout &lt;&lt; ", "; if (neka_osoba.DajPol() == GradjaninBiH::Pol::Musko) std::cout &lt;&lt; "musko."; else std::cout &lt;&lt; "zensko.";
                std::cout &lt;&lt; std::endl; std::cin.clear(); std::cin.ignore(10000, '\n');
            }   catch (std::logic_error txt) {
                std::cout &lt;&lt; txt.what() &lt;&lt; std::endl; --i;
                std::cin.clear(); std::cin.ignore(10000, '\n');
            }
        }
        
        std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
        std::cin &gt;&gt; broj_gradjana; std::cin.ignore(10000, '\n');
        
        for (int i=0; i&lt;broj_gradjana; ++i) {
            std::string input_;
            std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
            std::getline (std::cin, input_);

            std::string input;
            std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl;
            std::getline (std::cin, input);
            
            int d{0}, m{0}, g{0};
            for (int x=0; x&lt;input.length(); ++x) {
                if      (x == 0 or x == 1)  d *= 10, d += input[x] - '0';
                else if (x == 3 or x == 4)  m *= 10, m += input[x] - '0';
                else if (x &gt;= 6 and x &lt;= 9) g *= 10, g += input[x] - '0';
                else if (input[x] == '/' or input[x] == '\n')   continue;
                else throw std::logic_error ("Neispravni podaci");
            }
            
            int s_r;
            std::cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; std::endl;
            std::cin &gt;&gt; s_r; std::cin.clear(); std::cin.ignore (10000, '\n');
            
            char znak;
            std::cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; std::endl;
            std::cin &gt;&gt; znak;
            
            try {
                GradjaninBiH::Pol pol = GradjaninBiH::Pol::Musko;
                if      (znak == 'M') pol = GradjaninBiH::Pol::Musko;
                else if (znak == 'Z') pol = GradjaninBiH::Pol::Zensko;
                GradjaninBiH neka_osoba (input_, d, m, g, s_r, pol);
                std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; neka_osoba.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; neka_osoba.DajJMBG() &lt;&lt; "." &lt;&lt; std::endl;
                std::cin.clear(); std::cin.ignore(10000, '\n');
            }   catch (std::logic_error txt) {
                std::cout &lt;&lt; txt.what() &lt;&lt; std::endl; --i;
                std::cin.clear(); std::cin.ignore(10000, '\n');
            }
        }
    }   catch (std::logic_error txt) {
        std::cout &lt;&lt; txt.what() &lt;&lt; std::endl;
    }
	return 0;
}</pre>
</body>
</html>
