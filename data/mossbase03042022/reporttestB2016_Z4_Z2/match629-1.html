<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1671.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student2526.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match629-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;new&gt;
class GradjaninBiH{
    public:
     enum Pol {Musko, Zensko};
     private:
    std::string ime_i_prezime;
</font>    int dan_rodjenja;
    int mjesec_rodjenja;
    int godina_rodjenja;
    int sifra_regije;
    long long int jmbg;
    int kod_osobe;
    GradjaninBiH *prethodni=nullptr;
    Pol pol;
    public:
    static GradjaninBiH* posljednji;
<a name="5"></a><font color="#FF0000"><a href="match629-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
 int godina_rodjenja, int sifra_regije, Pol pol);
</font>std::string DajImeIPrezime() const{
    return ime_i_prezime;
}
~GradjaninBiH(){
    if(this==posljednji) posljednji=posljednji-&gt;prethodni;
    else{
    GradjaninBiH *poslje=posljednji;
    while(poslje-&gt;prethodni!=nullptr&amp;&amp;poslje-&gt;prethodni!=this) poslje=poslje-&gt;prethodni;
    poslje-&gt;prethodni=this-&gt;prethodni;
    }
}
long long int DajJMBG() const{
    return jmbg;
}
int DajDanRodjenja() const {
    return dan_rodjenja;
}
int DajMjesecRodjenja() const{
    return mjesec_rodjenja;
}
int DajGodinuRodjenja() const{
    int tmp=godina_rodjenja;
    if(tmp&gt;=917){ tmp+=1000; return tmp;}
    if(tmp&lt;=17){ tmp+=2000; return tmp;}
    return tmp+1000;
    
}
int DajSifruRegije() const{
    return sifra_regije;
}
Pol DajPol() const{
    return pol;
}
void PromijeniImeIPrezime(std::string novo_ime){
    ime_i_prezime=novo_ime;
}
};
GradjaninBiH* GradjaninBiH::posljednji = nullptr;
bool ispravan_datum(int d,int m,int g){
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if(g % 4 == 0 &amp;&amp; g % 100 != 0 || g % 400 == 0) broj_dana[1]++;
    if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m - 1]) return false;
    return true;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg){
     if((jmbg&lt;0||int(log10(jmbg))&lt;11||int(log10(jmbg))&gt;12)) throw std::logic_error("JMBG nije validan");
        auto pok=posljednji;
    while(pok!=nullptr){
        if(jmbg==pok-&gt;jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        pok=pok-&gt;prethodni;
    }
    auto tmp=jmbg;
    int niz[13],i{};
    if(int(log10(jmbg))+1==12){
        niz[i]=0; i++;
    }
    while(tmp!=0){
        niz[i]=tmp%10;
        tmp/=10;
        i++;
        
    }
    int cifre[13];
    for(int j{};j&lt;13;j++) cifre[j]=niz[13-j-1];
    GradjaninBiH::ime_i_prezime=ime_i_prezime;
    int c13=11-(7*(cifre[0]+cifre[6])+6*(cifre[1]+cifre[7])+5*(cifre[2]+cifre[8])+4*(cifre[3]+cifre[9])+3*(cifre[4]+cifre[10])+2*(cifre[5]+cifre[11]))%11;
    if(c13==11) c13=0;
    if(c13==10||c13!=cifre[12]) throw std::logic_error("JMBG nije validan");
    int dan=cifre[1]+cifre[0]*10;
    int mjesec=cifre[3]+cifre[2]*10;
    int godina=cifre[4]*100+cifre[5]*10+cifre[6];
    if(!ispravan_datum(dan,mjesec,godina)) throw std::logic_error("JMBG nije validan");
    godina_rodjenja=godina; dan_rodjenja=dan; mjesec_rodjenja=mjesec;
    int sifra=cifre[7]*10+cifre[8];
    GradjaninBiH::sifra_regije=sifra;
    int tmp2=cifre[9]*100+cifre[10]*10+cifre[11];
    kod_osobe=tmp2;
    if(tmp2&gt;=0&amp;&amp;tmp2&lt;500) pol=Pol::Musko;
    else pol=Pol::Zensko;
    GradjaninBiH::jmbg=jmbg;
    prethodni=posljednji;
<a name="2"></a><font color="#0000FF"><a href="match629-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    posljednji=this;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol pol){
    if(!ispravan_datum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)||sifra_regije&lt;0||sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
</font><a name="0"></a><font color="#FF0000"><a href="match629-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    GradjaninBiH::ime_i_prezime=ime_i_prezime; GradjaninBiH::mjesec_rodjenja=mjesec_rodjenja;
    GradjaninBiH::sifra_regije=sifra_regije;
    GradjaninBiH::dan_rodjenja=dan_rodjenja;
    GradjaninBiH::pol=pol;
</font>    auto pok=posljednji;
    int min;
    if(pol==Pol::Musko) min=0;
    else min=500;
    while(pok!=nullptr){
        if(pol==pok-&gt;pol&amp;&amp;dan_rodjenja==pok-&gt;dan_rodjenja&amp;&amp;sifra_regije==pok-&gt;sifra_regije&amp;&amp;min==pok-&gt;kod_osobe) min++;
        pok=pok-&gt;prethodni;
    }
    int niz1[3],z{};
    while(z!=3){
        niz1[z]=godina_rodjenja%10;
        godina_rodjenja/=10;
        z++;
    }
    godina_rodjenja=0;
    for(int j=2;j&gt;=0;j--) godina_rodjenja=godina_rodjenja*10+niz1[j];
    GradjaninBiH::godina_rodjenja=godina_rodjenja;
    kod_osobe=min;
    long long int JMBG{dan_rodjenja};
    JMBG*=100; JMBG+=mjesec_rodjenja;
    JMBG*=1000; JMBG+=godina_rodjenja;
    JMBG*=100; JMBG+=sifra_regije;
    JMBG*=1000; JMBG+=kod_osobe;
    JMBG*=10;
    int niz[13],i{};
    if(int(log10(JMBG))+1==12){
        niz[i]=0; i++;
    }
    long long int tmp=JMBG;
    while(tmp!=0){
        niz[i]=tmp%10;
        tmp/=10;
        i++;
    }
    int cifre[13];
    for(int j{};j&lt;13;j++) cifre[j]=niz[13-j-1];
int c13=11-(7*(cifre[0]+cifre[6])+6*(cifre[1]+cifre[7])+5*(cifre[2]+cifre[8])+4*(cifre[3]+cifre[9])+3*(cifre[4]+cifre[10])+2*(cifre[5]+cifre[11]))%11;
    if(c13==11) c13=0;
    JMBG+=c13;
    jmbg=JMBG;
    prethodni=posljednji;
    posljednji=this;
}
int main ()
{
    GradjaninBiH **niz=new GradjaninBiH*[100]; int vel{};
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    int n; std::cin&gt;&gt;n;
    std::cin.ignore(1000,'\n');
    for(int i=0;i&lt;n;i++){
        std::string ime;
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
        long long int JMBG; std::cin&gt;&gt;JMBG;
        std::cin.ignore(1000,'\n');
        try{
            GradjaninBiH neko(ime,JMBG);
            niz[i]=new GradjaninBiH(neko);
            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;neko.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;neko.DajDanRodjenja()&lt;&lt;"."&lt;&lt;
            neko.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;neko.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;neko.DajSifruRegije()&lt;&lt;", ";
<a name="1"></a><font color="#00FF00"><a href="match629-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            if(neko.DajPol()==GradjaninBiH::Pol::Musko)std::cout&lt;&lt;"musko."&lt;&lt;std::endl;
            else std::cout&lt;&lt;"zensko."&lt;&lt;std::endl;
            
        }
        catch(std::bad_alloc){
</font>            for(int i=0;i&lt;vel;i++) delete niz[i];
            delete []niz;
            return 0;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
            i--;
            vel--;
            
        }
        vel++;
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
    std::cin.ignore(1000,'\n');
    for(int i=vel;i&lt;vel+n;i++){
        std::string ime;
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
        char jede;
        int dan,mjesec,godina; std::cin&gt;&gt;dan&gt;&gt;jede&gt;&gt;mjesec&gt;&gt;jede&gt;&gt;godina;
        std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
        int sifra; std::cin&gt;&gt;sifra;
        std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
        char znak; std::cin&gt;&gt;znak;
        std::cin.ignore(1000,'\n');
        try{
            if(znak=='M') niz[i]=new GradjaninBiH(GradjaninBiH(ime,dan,mjesec,godina,sifra,GradjaninBiH::Pol(0)));
            else niz[i]=new GradjaninBiH(GradjaninBiH(ime,dan,mjesec,godina,sifra,GradjaninBiH::Pol(1)));
            

<a name="4"></a><font color="#FF00FF"><a href="match629-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[i]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
        }
        catch(std::bad_alloc){
</font>            vel+=i-vel;
            for(int i=0;i&lt;vel;i++){
                delete niz[i];
            }
            delete[] niz;
            return 0;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
            i--;
        }
    }
    vel+=n;
    for(int i=0;i&lt;vel;i++) delete niz[i];
    delete [] niz;
    
    
    
	return 0;
} </pre>
</body>
</html>
