<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8864.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student2068.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
//
long long int stepen(int x) {
    long long int s=1;
    for(int i=0; i&lt;x; i++) s*=10;
    return s;
}

void ValidanDatum(int d, int m, int g) {
    if(g&lt;1917 || g&gt;2017 || m&lt;1 || m&gt;12 || d&lt;1 || d&gt;31) throw std::logic_error("Neispravni podaci");
<a name="7"></a><font color="#0000FF"><a href="match165-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    int dani[12]={ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
</font>    if(d%400==0 || (d%100 &amp;&amp; d%4==0)) dani[1]++;
    if(d&gt;dani[m-1]) throw std::logic_error("Neispravni podaci");
}

class GradjaninBiH {
public:
    enum Pol { Musko, Zensko };
private :
    static GradjaninBiH *zadnji;
    GradjaninBiH *prethodni;
    std::string s;
    long long int mat;
    Pol spol;
    int daj_d() const;
    int daj_m() const;
    int daj_g() const;
    int daj_sifru() const;
    int daj_kod() const;
<a name="1"></a><font color="#00FF00"><a href="match165-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

    int daj_zadnju() const;
public :
    GradjaninBiH(const GradjaninBiH &amp;G) =delete;
    GradjaninBiH&amp; operator=(const GradjaninBiH &amp;g) =delete;
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime() const { return s; }
    long long int DajJMBG() const { return mat; }
    int DajDanRodjenja() const { return daj_d(); }
    int DajMjesecRodjenja() const { return daj_m(); }
    int DajGodinuRodjenja() const { int a=daj_g(); if(a&gt;100) return a+1000; return a+2000; }
</font>    int DajSifruRegije() const { return daj_sifru(); }
    Pol DajPol() const { return spol; }
    void PromijeniImeIPrezime(std::string novo_ime) { s=novo_ime; }
    ~GradjaninBiH() {
        auto p=zadnji;
        while(p-&gt;prethodni!=this) {
            if(!p-&gt;prethodni) {
                zadnji=zadnji-&gt;prethodni;
                return;
            }
            p=p-&gt;prethodni;
        }
        p-&gt;prethodni=prethodni;
    }
};

GradjaninBiH* GradjaninBiH::zadnji=nullptr;

int izracunaj_zadnju_cifru(int d, int m, int g, int sifra, int kod) {
    return 11-(7*(d/10+g%10)+6*(d%10+sifra/10)+5*(m/10+sifra%10)+4*(m%10+kod/100)+3*(g/100+(kod%100-kod%10)/10) +2*((g%100-g%10)/10+kod%10))%11;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) : s(ime_i_prezime), mat(jmbg) {
    if(daj_kod()&lt;500) spol=Musko; else spol=Zensko;
    int godina=daj_g(); if(godina&gt;100) godina+=1000; else godina+=2000;
    try { ValidanDatum(daj_d(), daj_m(), godina); }
    catch(...) { throw std::logic_error("JMBG nije validan"); }
    int c13=izracunaj_zadnju_cifru(daj_d(), daj_m(), daj_g(), daj_sifru(), daj_kod());
    if(c13==11) c13=0;
    if(c13!=daj_zadnju() || c13==10) throw std::logic_error("JMBG nije validan");
    auto pointer=zadnji;
    while(pointer) {
        if(jmbg==pointer-&gt;mat) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        pointer=pointer-&gt;prethodni;
    }
    prethodni=zadnji; zadnji=this;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) : s(ime_i_prezime), spol(pol) {  
    try { ValidanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja); }
    catch(...) { throw std::logic_error("Neispravni podaci"); }
    if(sifra_regije&lt;0 || sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
    int kod;
    if(pol==Musko) kod=0; else kod=500;
    auto p=zadnji; int godina; if(godina_rodjenja&gt;1999) godina=godina_rodjenja-2000; else godina=godina_rodjenja-1000;
    for(;;) {
        while(p) {
<a name="6"></a><font color="#00FF00"><a href="match165-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            if(dan_rodjenja==p-&gt;daj_d() &amp;&amp; mjesec_rodjenja==p-&gt;daj_m() &amp;&amp; godina==p-&gt;daj_g() &amp;&amp; sifra_regije==p-&gt;daj_sifru() &amp;&amp; pol==p-&gt;spol &amp;&amp; kod==p-&gt;daj_kod()) { kod++; p=zadnji; continue; }
</font>            p=p-&gt;prethodni;
        }
        int z=izracunaj_zadnju_cifru(dan_rodjenja, mjesec_rodjenja, godina, sifra_regije, kod);
        if(z==10) {
            p=zadnji; kod++;
            continue;
        }
        if(z==11) z=0;
        mat=z;
        break;
    }
    prethodni=zadnji; zadnji=this;
    mat+=dan_rodjenja*stepen(11)+mjesec_rodjenja*stepen(9)+godina*stepen(6)+sifra_regije*stepen(4)+kod*10;
}

int GradjaninBiH::daj_d() const {
    return mat/stepen(11);
}

int GradjaninBiH::daj_m() const {
    return mat%stepen(11)/stepen(9);
}

int GradjaninBiH::daj_g() const {
    return mat%stepen(9)/stepen(6);
    /*if(x&gt;100) x+=1000;
    else x+=2000;
    return x;*/
}

int GradjaninBiH::daj_sifru() const {
    return mat%stepen(6)/stepen(4);
}

int GradjaninBiH::daj_kod() const {
    return mat%stepen(4)/10;
}

int GradjaninBiH::daj_zadnju() const {
    return mat%10;
}

int main () {
    GradjaninBiH* niz[100];
	std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? \n";
	int n; std::cin &gt;&gt; n;
	for(int i=0; i&lt;n; i++) {
<a name="4"></a><font color="#FF00FF"><a href="match165-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

	    std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): ";
	    std::string s;
	    std::cin.ignore(10000, '\n'); std::getline(std::cin, s);
	    std::cout &lt;&lt; "\nUnesite JMBG: \n";
	    long long int jmbg; std::cin &gt;&gt; jmbg;
</font>	    try { 
<a name="5"></a><font color="#FF0000"><a href="match165-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

	        niz[i]=new GradjaninBiH(s, jmbg); 
	        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; niz[i]-&gt;DajDanRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; niz[i]-&gt;DajSifruRegije() &lt;&lt; ", ";
</font><a name="2"></a><font color="#0000FF"><a href="match165-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	        if(niz[i]-&gt;DajPol()==GradjaninBiH::Musko) std::cout &lt;&lt; "musko.\n"; else std::cout &lt;&lt; "zensko.\n";
</font>	    }
	    catch(std::logic_error izuzetak) { std::cout &lt;&lt; izuzetak.what() &lt;&lt; "\n"; i--; }
	}
	std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? \n";
	int n2; std::cin &gt;&gt; n2;
	for(int i=n; i&lt;n+n2; i++) {
<a name="0"></a><font color="#FF0000"><a href="match165-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

	    std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): ";
	    std::string s;
	    std::cin.ignore(10000, '\n'); std::getline(std::cin, s);
	    std::cout &lt;&lt; "\nUnesite datum rodjenja (format dd/mm/gggg): ";
	    int d, m, g; char c; std::cin &gt;&gt; d &gt;&gt; c &gt;&gt; m &gt;&gt; c &gt;&gt;g;
	    std::cout &lt;&lt; "\nUnesite sifru regije: ";
	    int si; std::cin &gt;&gt; si;
	    std::cout &lt;&lt; "\nUnesite M za musko, Z za zensko: \n";
	    std::cin &gt;&gt; c; GradjaninBiH::Pol a;
	    if(c=='Z' || c=='z') a=GradjaninBiH::Zensko; else a=GradjaninBiH::Musko; 
</font><a name="3"></a><font color="#00FFFF"><a href="match165-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	    try { 
	        niz[i]=new GradjaninBiH(s, d, m, g, si, a); 
	        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; niz[i]-&gt;DajJMBG() &lt;&lt; ".\n";
</font>	    }
	    catch(std::logic_error izuzetak) { std::cout &lt;&lt; izuzetak.what() &lt;&lt; "\n"; i--; }
	}
	for(int j=0; j&lt;n+n2; j++) delete niz[j];
	return 0;
}</pre>
</body>
</html>
