<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5581.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class GradjaninBiH{
    
    public:
        enum Pol {Musko,Zensko};
    private:
        std::string ime_i_prezime;
        long long int jmbg;
        int dan_rodjenja;
        int mjesec_rodjenja;
        int godina_rodjenja;
        Pol pol;
        int sifra_regije;
        static GradjaninBiH* posljednji;
        GradjaninBiH* prethodni=nullptr;
        void Postavi(std::string ime_i_prezime, long long int jmbg);
        void Postavi(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
        static bool LegalanDatum(int dan, int mjesec, int godina);
    public:
        GradjaninBiH(std::string ime_i_prezime, long long int jmbg){Postavi(ime_i_prezime,jmbg);}
        GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){Postavi(ime_i_prezime, dan_rodjenja,mjesec_rodjenja,godina_rodjenja,sifra_regije,pol);};
        long long int DajJMBG() const{return jmbg;};
        std::string DajImeIPrezime() const {return ime_i_prezime;}
        int DajDanRodjenja() const{return dan_rodjenja;};
        int DajMjesecRodjenja() const{return mjesec_rodjenja;};
        int DajGodinuRodjenja() const{return godina_rodjenja;};
        int DajSifruRegije() const{return sifra_regije;};
        Pol DajPol() const{return pol;};
        void PromijeniImeIPrezime(std::string novo_ime){ime_i_prezime=novo_ime;}
        ~GradjaninBiH();
};
    bool GradjaninBiH::LegalanDatum(int dan, int mjesec, int godina){
        int dani[]{31,28,31,30,31,30,31,31,30,31,30,31};
        if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) dani[1]++;
        if(godina&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&lt;1 || dan&gt;dani[mjesec-1])
            return false;
        return true;
    }
    GradjaninBiH* GradjaninBiH::posljednji=nullptr;
    GradjaninBiH::~GradjaninBiH(){
        if(this==posljednji)//zadnji gradjanin
            posljednji=posljednji-&gt;prethodni;
        else if(this-&gt;prethodni==nullptr &amp;&amp; this==posljednji){
            posljednji=nullptr;
        }
        else if(this-&gt;prethodni==nullptr)//prvi gradjanin
        {
            auto pok=posljednji;
            while(pok-&gt;prethodni!=this){
                pok=pok-&gt;prethodni;
            }
            pok-&gt;prethodni=nullptr;
        }
        else {auto pom=posljednji;
        while(pom-&gt;prethodni!=this){
            pom=pom-&gt;prethodni;
        }
        pom-&gt;prethodni=this-&gt;prethodni;
        
    }}
    void GradjaninBiH::Postavi(std::string ime_i_prezime, long long int jmbg){
        
        int Jmbg[13];
        
        long long int pom = jmbg;
        
        for(int i=12 ; i&gt;=0 ; i--)
            Jmbg[i]=pom%10, pom/=10;
        
        dan_rodjenja=Jmbg[0]*10+Jmbg[1];
        mjesec_rodjenja=Jmbg[2]*10+Jmbg[3];
<a name="0"></a><font color="#FF0000"><a href="match424-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        if(Jmbg[4]==0) godina_rodjenja=2000+Jmbg[5]*10+Jmbg[6];
        else godina_rodjenja=1000+Jmbg[4]*100+Jmbg[5]*10+Jmbg[6];
</font>        if(!LegalanDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja) || godina_rodjenja&lt;1917)
            throw std::logic_error("JMBG nije validan");
        sifra_regije=Jmbg[7]*10+Jmbg[8];
        if(sifra_regije&lt;0 || sifra_regije&gt;99)
            throw std::logic_error("JMBG nije validan");
        int c13=11-(7*(Jmbg[0]+Jmbg[6])+6*(Jmbg[1]+Jmbg[7])+5*(Jmbg[2]+Jmbg[8])+4*(Jmbg[3]+Jmbg[9])+3*(Jmbg[4]+Jmbg[10])+2*(Jmbg[5]+Jmbg[11]))%11;
        if(c13==11) c13=0;
        if(c13!=Jmbg[12] || c13==10)
            throw std::logic_error("JMBG nije validan");
        
<a name="4"></a><font color="#FF00FF"><a href="match424-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        int p=Jmbg[9]*100+Jmbg[10]*10+Jmbg[11];
        if(p&gt;=0 &amp;&amp; p&lt;500) pol=Musko;
</font>        else pol=Zensko;
        GradjaninBiH::jmbg=jmbg;
        GradjaninBiH::ime_i_prezime=ime_i_prezime;
        
<a name="3"></a><font color="#00FFFF"><a href="match424-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        GradjaninBiH* pom2=posljednji;
        while(pom2!=nullptr){
            if(pom2-&gt;jmbg==jmbg)
                throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
            pom2=pom2-&gt;prethodni;
        }
        
        prethodni=posljednji;
</font>        posljednji=this;
    }
    void GradjaninBiH::Postavi(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
        
        if(!LegalanDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja) || godina_rodjenja&lt;1917){
            throw std::logic_error("Neispravni podaci");}
        if(sifra_regije&lt;0||sifra_regije&gt;99){
            throw std::logic_error("Neispravni podaci");}
        GradjaninBiH::ime_i_prezime=ime_i_prezime;
        GradjaninBiH::dan_rodjenja=dan_rodjenja;
        GradjaninBiH::mjesec_rodjenja=mjesec_rodjenja;
        GradjaninBiH::godina_rodjenja=godina_rodjenja;
        GradjaninBiH::sifra_regije=sifra_regije;
        GradjaninBiH::pol=pol;
        int Jmbg[13];
<a name="5"></a><font color="#FF0000"><a href="match424-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        Jmbg[1]=dan_rodjenja%10;
        Jmbg[0]=dan_rodjenja/10;
        Jmbg[3]=mjesec_rodjenja%10;
        Jmbg[2]=mjesec_rodjenja/10;
</font>        int pgod=godina_rodjenja%1000;
        Jmbg[6]=pgod%10;
        pgod/=10;
        Jmbg[5]=pgod%10;
        Jmbg[4]=pgod/10;
        Jmbg[8]=sifra_regije%10;
        Jmbg[7]=sifra_regije/10;
        int dg,gg;
        if(pol==Musko)dg=0, gg=499;
        else dg=500,gg=999;
        bool ispravan=true;
        bool registrovan=false;
        for(int i=dg;i&lt;=gg;i++){
            ispravan=true;
            int pom=i;
            Jmbg[11]=pom%10;
            pom/=10;
            Jmbg[10]=pom%10;
            Jmbg[9]=pom/10;
            Jmbg[12]=11-(7*(Jmbg[0]+Jmbg[6])+6*(Jmbg[1]+Jmbg[7])+5*(Jmbg[2]+Jmbg[8])+4*(Jmbg[3]+Jmbg[9])+3*(Jmbg[4]+Jmbg[10])+2*(Jmbg[5]+Jmbg[11]))%11;
            if(Jmbg[12]==10) continue;
            if(Jmbg[12]==11) Jmbg[12]=0;
        
        long long int JMBG = 0;
        for(int j=0;j&lt;13;j++){
            JMBG=JMBG*10+Jmbg[j];
        }
        
        GradjaninBiH* pom2=posljednji;
        while(pom2!=nullptr){
            if(JMBG==pom2-&gt;jmbg){
                ispravan=false;
                break;
            }
            pom2=pom2-&gt;prethodni;
            
        }
        if(ispravan){
            registrovan=true;
            jmbg=JMBG;
            break;
        }
        
        }
        
        if(!registrovan)
            throw std::logic_error("Svi JMBG su zauzeti");
        prethodni=posljednji;
        posljednji=this;
    }

int main ()
{
    
    std::string ime;
    long long int jmbg;
    GradjaninBiH* niz[100]{nullptr};
    std::string ppp[]{"musko","zensko"};
    int broj1;
    GradjaninBiH::Pol pol;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    std::cin&gt;&gt;broj1;
    
    for(int i=0;i&lt;broj1;i++){
        bool neispravan=false;
        do{
            neispravan=false;
            try{
                std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
                std::cin.ignore(100,'\n');
                std::getline(std::cin,ime);
                std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
                std::cin&gt;&gt;jmbg;
<a name="1"></a><font color="#00FF00"><a href="match424-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                niz[i]=new GradjaninBiH(ime,jmbg);
                std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;niz[i]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;niz[i]-&gt;DajMjesecRodjenja()
</font>                &lt;&lt;"."&lt;&lt;niz[i]-&gt;DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;niz[i]-&gt;DajSifruRegije()&lt;&lt;", "&lt;&lt;ppp[int(niz[i]-&gt;DajPol())]&lt;&lt;"."&lt;&lt;std::endl;
            }
            catch(std::logic_error e){
                std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                neispravan=true;
                
            }
        }
        while(neispravan);
    }
    
    int broj2,dd, mm, gg, sifra;
    char z,pp;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    std::cin&gt;&gt;broj2;
    
    for(int i=broj1;i&lt;broj1+broj2;i++){
        bool neispravan;
        do{
            
            neispravan=false;
            try{
                std::cin.ignore(100,'\n');
                std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
                
                std::getline(std::cin,ime);
                
                
                std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match424-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                std::cin&gt;&gt;dd&gt;&gt;z&gt;&gt;mm&gt;&gt;z&gt;&gt;gg;
                
                std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
</font>                std::cin&gt;&gt;sifra;
                std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
                std::cin&gt;&gt;pp;
                if(pp=='M') pol=GradjaninBiH::Pol::Musko;
                else pol=GradjaninBiH::Pol::Zensko;
                niz[i]= new GradjaninBiH(ime,dd,mm,gg,sifra,pol);
<a name="6"></a><font color="#00FF00"><a href="match424-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[i]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
</font><a name="6"></a><font color="#00FF00"><a href="match424-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                
</font>            }
            catch(std::logic_error e){
                std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                neispravan=true;
               
            }
        }
        while(neispravan);
    }
    
    for(int i=0;i&lt;broj1+broj2;i++){
        delete niz[i];
    }
    


return 0;
}</pre>
</body>
</html>
