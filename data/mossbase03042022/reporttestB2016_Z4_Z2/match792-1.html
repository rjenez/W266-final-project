<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3899.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1571.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

int brojac = 0;

class GradjaninBiH {
    long long int jmbg;
    std::string ime_prezime;
    int dan, mjesec, godina, sifra;
    mutable int kod_fe = 500, kod_ma = 0;
    static GradjaninBiH *zadnji;
    GradjaninBiH *prethodni = nullptr;
    bool provjera_datuma (int d, int m, int g) {
        int b_d [12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if ((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) b_d[1]++;
        if (g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; b_d[m - 1]) return false;
        return true;
    }
    int vrati_13 (int c[]) { // za 13.cifru jmbg-a
        int c_13;
        c_13 = 11 - (7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2]+c[8]) + 4*(c[3]+c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11])) % 11;
        if (c_13 == 11) c_13 = 0;
        return c_13;
    }
    public:
    enum Pol { Musko, Zensko } ;
    GradjaninBiH (std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH (std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
   // ~GradjaninBiH();
<a name="2"></a><font color="#0000FF"><a href="match792-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    std::string DajImeIPrezime() const { return ime_prezime; }
    long long int DajJMBG() const { return jmbg; }
    int DajDanRodjenja() const;
    int DajMjesecRodjenja() const;
    int DajGodinuRodjenja() const;
    int DajSifruRegije() const;
    Pol DajPol() const;
    void PromijeniImeIPrezime (std::string novo_ime) { ime_prezime = novo_ime; }
</font>};
GradjaninBiH *GradjaninBiH::zadnji = nullptr;

GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
    if (sifra_regije &lt; 0 || sifra_regije &gt; 99 || !(provjera_datuma(dan_rodjenja,mjesec_rodjenja,godina_rodjenja))) 
        throw std::domain_error ("Neispravni podaci");
    brojac++;
    int neki_kod;
    if (pol == Pol::Zensko) 
        neki_kod = kod_fe;
    
    else if (pol == Pol::Musko) 
        neki_kod = kod_ma;
    
    int temp_neki_kod (neki_kod);
    int dan_temp (dan_rodjenja), mjesec_temp(mjesec_rodjenja), temp_godina (godina_rodjenja), temp_regija(sifra_regije);
    int niz_jmbg[13];
   
    if (dan_rodjenja &lt; 10) {
        niz_jmbg[0] = 0;
        niz_jmbg[1] = dan_rodjenja;
    }
    else {
        niz_jmbg[0] = int(dan_temp/10);
        niz_jmbg[1] = dan_temp%10; 
    }
    if (mjesec_rodjenja &lt; 10) {
        niz_jmbg[2] = 0;
        niz_jmbg[3] = mjesec_rodjenja;
    }
    else {
        niz_jmbg[2] = int(mjesec_temp/10);
        niz_jmbg[3] = mjesec_temp%10;
    }
    niz_jmbg[4] = int ((temp_godina%1000)/100);
    niz_jmbg[5] = int ((temp_godina%100)/10);
    niz_jmbg[6] = int (temp_godina%10);
    if (sifra_regije &lt; 10) {
        niz_jmbg[7] = 0;
        niz_jmbg[8] = sifra_regije;
    }
    else {
        niz_jmbg[7] = int (temp_regija/10);
        niz_jmbg[8] = int (temp_regija%10);
    }
    if (neki_kod == 0) {
        niz_jmbg[9] = 0;
        niz_jmbg[10] = 0;
        niz_jmbg[11] = neki_kod;
    }
    if (neki_kod &gt; 0 &amp;&amp; neki_kod &lt; 10) {
        niz_jmbg[9] = 0;
        niz_jmbg[10] = 0;
        niz_jmbg[11] = neki_kod;
    }
    else if (neki_kod &gt;=10 &amp;&amp; neki_kod &lt;100) {
        niz_jmbg[9] = 0;
        niz_jmbg[10] = int (temp_neki_kod/10);
        niz_jmbg[11] = int (temp_neki_kod%10);
    }
    else if (neki_kod &gt;= 100 &amp;&amp; neki_kod &lt; 1000) {
        niz_jmbg[9] = int ((temp_neki_kod%1000)/100);
        niz_jmbg[10] = int ((temp_neki_kod%100) /10);
        niz_jmbg[11] = int (temp_neki_kod%10);
    }
    int c_13 = vrati_13(niz_jmbg);
    niz_jmbg[12] = c_13;
 
   /* GradjaninBiH *pok(this);
    if (brojac == 1) zadnji = pok;
    else {
        this-&gt;prethodni = zadnji;
        zadnji = pok;
    }
    GradjaninBiH *temp = zadnji-&gt;prethodni;
    for (GradjaninBiH *it = zadnji; it != nullptr; it=it-&gt;prethodni) {
        if (it-&gt;DajJMBG() == 0) {
            zadnji = nullptr;
            zadnji = temp;
            throw std::logic_error ("Vec postoji gradjanin sa istim JMBG");
            break;
        }
    }*/
    long long int pravi_jmbg(0);
    for (int i=0; i&lt;13; i++) {
        pravi_jmbg = 10 * pravi_jmbg + niz_jmbg[i];
    }
    ime_prezime = ime_i_prezime; dan = dan_rodjenja; mjesec = mjesec_rodjenja; godina = godina_rodjenja; sifra = sifra_regije;
    jmbg = pravi_jmbg;
    if (pol == Pol::Zensko) kod_fe++;
    else kod_ma++;
}
GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, long long int jmbg) {
    brojac++;
    GradjaninBiH *pok(this);
    if (brojac == 1) zadnji = pok;
    else {
        this-&gt;prethodni = zadnji;
        zadnji = pok;
    }
  /*  GradjaninBiH *temp = zadnji-&gt;prethodni;
    for (GradjaninBiH *it = zadnji; it != nullptr; it=it-&gt;prethodni) {
        if (it-&gt;GradjaninBiH::jmbg == jmbg) {
            zadnji = nullptr;
            zadnji = temp;
            throw std::logic_error ("Vec postoji gradjanin sa istim JMBG");
            break;
        }
    }*/
    long long int ne = jmbg;
    int vektor[13];
    for (long long int i=12; i&gt;=0; i--) {
        vektor[i] = ne % 10;
        ne /= 10;
    }
    int c_13 = vrati_13(vektor);
    if (c_13 == 10 || vektor[12] != c_13) throw std::logic_error ("JMBG nije validan");
    if (vektor[9] &gt;= 5) kod_fe++;
    else if (vektor[9] &lt; 5) kod_ma++;
    int dan_rod = vektor[0]*10 + vektor[1];
    int mj_rod = vektor[2]*10 + vektor[3];
    int go_rod = vektor[4]*100 + vektor[5]*10 + vektor[6];
    if (!provjera_datuma(dan_rod,mj_rod,go_rod)) throw std::logic_error ("JMBG nije validan");
    ime_prezime = ime_i_prezime; GradjaninBiH::jmbg = jmbg;
}
/*GradjaninBiH::~GradjaninBiH() {
    auto p = zadnji;
    do {
        if (p-&gt;prethodni == nullptr) {
            GradjaninBiH::zadnji = nullptr;
            p = nullptr;
            break;
        }
        GradjaninBiH::zadnji = p-&gt;prethodni;
        p = nullptr;
        p = zadnji;
    } while (p-&gt;prethodni != nullptr);
}*/
int GradjaninBiH::DajDanRodjenja() const {
    long long int jm = DajJMBG();
    int niz[13];
    for (long long int i=12; i&gt;=0; i--) {
        niz[i] = jm % 10;
        jm /= 10;
    }
  double nesto = (niz[0]*10 + niz[1]);
  return nesto;
}
int GradjaninBiH::DajMjesecRodjenja() const {
    long long int m = DajJMBG();
    int niz[13];
    for (int i=12; i&gt;=0; i--) {
        niz[i] = m % 10;
        m /= 10;
    }
    return niz[2]*10 + niz[3];
}
int GradjaninBiH::DajGodinuRodjenja() const {
    long long int god = DajJMBG();
    int niz[13];
    for (int i=12; i&gt;=0; i--) {
        niz[i] = god % 10;
        god /= 10;
    }
<a name="3"></a><font color="#00FFFF"><a href="match792-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    double izraz = niz[4]*100 + niz[5]*10 + niz[6];
    if (niz[4] == 0) izraz+=2000;
    else izraz += 1000;
</font>    return izraz;
}
int GradjaninBiH::DajSifruRegije() const {
    long long int sifra = DajJMBG();
    int niz[13];
    for (int i=12; i&gt;=0; i--) {
        niz[i] = sifra%10;
        sifra /= 10;
    }
    return niz[7]*10 + niz[8];
}
GradjaninBiH::Pol GradjaninBiH::DajPol() const {
    Pol nesto;
    long long int s = DajJMBG();
    int niz[13];
    for (int i=12; i&gt;=0; i--) {
        niz[i] = s % 10;
        s /= 10;
    }
    double izraz = niz[9]*100 + niz[10]*10 + niz[11];
    if (izraz &lt;= 499) nesto = GradjaninBiH::Pol::Musko;
    else nesto = GradjaninBiH::Pol::Zensko;
    return nesto;
}
int main ()
{
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? " &lt;&lt; std::endl;
    int n;
    std::cin &gt;&gt; n;
    std::cin.ignore(10000,'\n');
        for (int i=0; i&lt;n; i++) {
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
        std::string ime;
        std::getline (std::cin, ime);
        std::cout &lt;&lt; "Unesite JMBG: " &lt;&lt; std::endl;
        long long int jmbg;
        std::cin &gt;&gt; jmbg;
        std::cin.ignore(10000,'\n');
        try {
<a name="0"></a><font color="#FF0000"><a href="match792-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            GradjaninBiH ciko (ime, jmbg);
            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; ciko.DajImeIPrezime();
            std::cout &lt;&lt; " rodjenog " &lt;&lt; ciko.DajDanRodjenja() &lt;&lt; "." &lt;&lt; ciko.DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; ciko.DajGodinuRodjenja();
</font>            std::cout &lt;&lt; " u regiji " &lt;&lt; ciko.DajSifruRegije() &lt;&lt; ", ";
            GradjaninBiH::Pol temp = ciko.DajPol();
            if (temp == 1) std::cout &lt;&lt; "zensko.";
            else std::cout &lt;&lt; "musko.";
            std::cout &lt;&lt; std::endl;
        }
        catch (std::logic_error poruka) {
                std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
               i--;
            }
        }
    int m;
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
    std::cin &gt;&gt; m;
    for (int i=0; i&lt;m; i++) {
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match792-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::string ime;
        std::cin.clear();
        std::cin.ignore(10000,'\n');
        std::getline (std::cin, ime);
        std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl;
</font>        int dan, mjesec, godina;
        char z1, z2;
        std::cin &gt;&gt; dan &gt;&gt; z1 &gt;&gt; mjesec &gt;&gt; z2 &gt;&gt; godina;
        std::cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; std::endl;
        int sifra;
        std::cin &gt;&gt; sifra;
        std::cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; std::endl;
        char spol;
        std::cin &gt;&gt; spol;
        try{
            GradjaninBiH::Pol spol1;
            if (spol == 'M') spol1 = GradjaninBiH::Pol::Musko;
<a name="1"></a><font color="#00FF00"><a href="match792-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            else spol1 = GradjaninBiH::Pol::Zensko;
            GradjaninBiH  ciko (ime, dan, mjesec, godina,sifra, spol1) ;
            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; ciko.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; ciko.DajJMBG() &lt;&lt;"." &lt;&lt; std::endl;
</font>        }
        catch (std::logic_error poruka) {
            std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
            i--;
        }
    }
	return 0;
}</pre>
</body>
</html>
