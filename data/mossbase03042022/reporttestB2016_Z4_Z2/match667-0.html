<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4377.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4377.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match667-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class GradjaninBiH
{
    public:
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    GradjaninBiH(const GradjaninBiH &amp;r) = delete;
    GradjaninBiH &amp;operator =(const GradjaninBiH &amp;r) = delete;
    ~GradjaninBiH();
    
    std::string DajImeIPrezime() const;
</font>    long long int DajJMBG() const;
    int DajDanRodjenja() const;
    int DajMjesecRodjenja() const;
    int DajGodinuRodjenja() const;
    int DajSifruRegije() const;
    Pol DajPol() const;
    void PromijeniImeIPrezime(std::string novo_ime);

    private:
    static GradjaninBiH* spok;
    std::string ime_i_prezime;
    long long int jmbg;
    int dan_rodjenja;
    int mjesec_rodjenja;
    int godina_rodjenja;
    int sifra_regije;
    Pol pol;
    GradjaninBiH* pok;
    
    int BrojCifara(long long int n)
    {
        int brojac(0);
        while(n!=0) { n/=10; brojac++; }
        return brojac;
    }
    
    bool ProvjeriDatum(int dd, int mm, int g)
    {
        bool prestupna(false);
         if((g % 4 == 0 &amp;&amp; g % 100 != 0 )|| g % 400 == 0) prestupna = true;
        if(dd &lt; 0 || dd &gt; 31 || mm &lt; 0 || mm &gt; 12) return false;
        else if(mm == 1 &amp;&amp; dd &gt; 31) return false;
        else if(prestupna &amp;&amp; mm == 2 &amp;&amp; dd &gt; 29) return false;
        else if (mm == 2 &amp;&amp; dd&gt;28) return false;
        else if(mm == 3 &amp;&amp; dd &gt; 31) return false;
        else if(mm == 4 &amp;&amp; dd &gt; 30) return false;
        else if(mm == 5 &amp;&amp; dd &gt; 31) return false;
        else if(mm == 6 &amp;&amp; dd &gt; 30) return false;
        else if(mm == 7 &amp;&amp; dd &gt; 31) return false;
        else if(mm == 8 &amp;&amp; dd &gt; 31) return false;
        else if(mm == 9 &amp;&amp; dd &gt; 30) return false;
        else if(mm == 10 &amp;&amp; dd &gt; 31) return false;
        else if(mm == 11 &amp;&amp; dd &gt; 30) return false;
        else if(mm == 12 &amp;&amp; dd &gt; 31) return false;
        return true;
    }
};

GradjaninBiH* GradjaninBiH::spok = nullptr;

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg)
{
    if(BrojCifara(jmbg) &lt; 12 || BrojCifara(jmbg) &gt; 13) throw std::logic_error("JMBG nije validan");
    GradjaninBiH::jmbg = jmbg;
    int JMBG[13];
    for(int i = 12; i &gt;= 0; i--)
    { 
        JMBG[i] = jmbg%10;
        jmbg/=10;
    }
    int izraz (7*(JMBG[0]+JMBG[6]) + 6*(JMBG[1]+JMBG[7]) + 5*(JMBG[2]+JMBG[8]) + 4*(JMBG[3]+JMBG[9]) + 3*(JMBG[4]+JMBG[10]) + 2*(JMBG[5]+JMBG[11]));
    izraz = izraz%11;
    izraz = 11-izraz;
    if(izraz == 11) izraz = 0;
    if(izraz == 10 || izraz != JMBG[12]) throw std::logic_error("JMBG nije validan");
    
    auto p = spok;
    while(p != nullptr)
    {
        if(p-&gt;jmbg == GradjaninBiH::jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        p = p-&gt;pok;
    }
    
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    dan_rodjenja = JMBG[0]; dan_rodjenja*=10; dan_rodjenja+=JMBG[1];
    mjesec_rodjenja = JMBG[2]; mjesec_rodjenja*=10; mjesec_rodjenja+=JMBG[3];
    if(JMBG[4] == 0) godina_rodjenja = 2000; else godina_rodjenja = 1900; 
    godina_rodjenja+=JMBG[5]*10; godina_rodjenja+=JMBG[6];
    sifra_regije = JMBG[7]; sifra_regije*=10; sifra_regije+=JMBG[8];
    if(JMBG[9] &lt; 5) pol = Musko;
    else pol = Zensko;
    if(!ProvjeriDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)) throw std::logic_error("JMBG nije validan");
    pok = spok; spok = this;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol)
{
    if(!ProvjeriDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)) throw std::logic_error("Neispravni podaci");
    int cdan(dan_rodjenja);
    int cmonth(mjesec_rodjenja);
    int cyear(godina_rodjenja-1000);
    int czip(sifra_regije);
    int brojac;
    if(pol == Musko) brojac = 0;
    else brojac = 500;
    
    if(sifra_regije &lt; 0 || sifra_regije &gt; 99) throw std::logic_error("Neispravni podaci");
    auto p = spok;
    while(p != nullptr)
    {
        if(p-&gt;sifra_regije == sifra_regije &amp;&amp; p-&gt;pol == pol &amp;&amp; p-&gt;dan_rodjenja == dan_rodjenja &amp;&amp; p-&gt;mjesec_rodjenja == mjesec_rodjenja &amp;&amp; p-&gt;godina_rodjenja == godina_rodjenja)
        brojac++;
        p = p-&gt;pok;
    }
    
    int JMBG[13];
    JMBG[1] = cdan%10; cdan/=10; JMBG[0] = cdan;
    JMBG[3] = cmonth%10; cmonth/=10; JMBG[2] = cmonth;
    JMBG[6] = cyear%10; cyear/=10; JMBG[5] = cyear%10; cyear/=10; JMBG[4] = cyear;
    JMBG[8] = czip%10; czip/=10; JMBG[7] = czip;
    JMBG[11] = brojac%10; brojac/=10; JMBG[10] = brojac%10; brojac/=10; JMBG[9] = brojac;
    int izraz (7*(JMBG[0]+JMBG[6]) + 6*(JMBG[1]+JMBG[7]) + 5*(JMBG[2]+JMBG[8]) + 4*(JMBG[3]+JMBG[9]) + 3*(JMBG[4]+JMBG[10]) + 2*(JMBG[5]+JMBG[11]));
    izraz = izraz%11;
    izraz = 11-izraz;
    if(izraz == 11) izraz = 0;
    JMBG[12] = izraz;
    
<a name="2"></a><font color="#0000FF"><a href="match667-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    long long int jmbg(0);
    for(int i=0; i&lt;13; i++)
    {
        jmbg += JMBG[i];
        if(i!=12) jmbg*=10;
</font>    }
    
    GradjaninBiH::jmbg = jmbg; 
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    GradjaninBiH::dan_rodjenja = dan_rodjenja;
    GradjaninBiH::mjesec_rodjenja = mjesec_rodjenja;
    GradjaninBiH::godina_rodjenja = godina_rodjenja;
    GradjaninBiH::sifra_regije = sifra_regije;
    GradjaninBiH::pol = pol;
    pok = spok; spok = this;
    
}


std::string GradjaninBiH::DajImeIPrezime() const
{
    return ime_i_prezime;
}
long long int GradjaninBiH::DajJMBG() const
{
    return jmbg;
}
int GradjaninBiH::DajDanRodjenja() const
{
    return dan_rodjenja;
}
int GradjaninBiH::DajMjesecRodjenja() const
{
    return mjesec_rodjenja;
}
int GradjaninBiH::DajGodinuRodjenja() const
{
    return godina_rodjenja;
}
int GradjaninBiH::DajSifruRegije() const
{
    return sifra_regije;
}
GradjaninBiH::Pol GradjaninBiH::DajPol() const
{
    return pol;
}
void GradjaninBiH::PromijeniImeIPrezime(std::string novo_ime)
{
    ime_i_prezime = novo_ime;
}

/*void GradjaninBiH::Ispisi() const
{
    std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; ime_i_prezime &lt;&lt; std::endl;
    std::cout &lt;&lt; "jmbg: " &lt;&lt; jmbg &lt;&lt; std::endl;
    std::cout &lt;&lt; "Datum rodjenja: " &lt;&lt; dan_rodjenja &lt;&lt; "/" &lt;&lt; mjesec_rodjenja &lt;&lt; "/" &lt;&lt; godina_rodjenja &lt;&lt; std::endl;
    std::cout &lt;&lt; "Sifra regije: " &lt;&lt; sifra_regije &lt;&lt; std::endl;
    if(pol == false) std::cout &lt;&lt; "Pol: Muski" &lt;&lt; std::endl;
    else std::cout &lt;&lt; "Pol: Zenski" &lt;&lt; std::endl;
}*/
    
GradjaninBiH::~GradjaninBiH()
{
    if(spok == this)
    {
        spok = this-&gt;pok;
    }
    else if(this-&gt;pok == nullptr)
    {
        auto p(spok);
        while(p-&gt;pok-&gt;pok != nullptr) p = p-&gt;pok;
        p-&gt;pok = nullptr;
    }
    else
    {
        auto p(spok);
        while(p-&gt;pok != this) p = p-&gt;pok;
        p-&gt;pok = this-&gt;pok;
    }
}

int main ()
{
    GradjaninBiH* pokazivaci[100] {};
    int brojac_gradjana(0);
    try {
        
        std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? \n";
        int n;
        std::cin &gt;&gt; n;
        for(int i=0; i&lt;n; i++)
        {
            std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): \n";
            std::string ime, prezime, iip;
            std::cin.ignore(10000, '\n');
            getline(std::cin, iip);
            
            try {
            std::cout &lt;&lt; "Unesite JMBG: \n";
            long long int jmb;
            std::cin &gt;&gt; jmb;
            pokazivaci[brojac_gradjana] = new GradjaninBiH (iip, jmb);

            if(pokazivaci[brojac_gradjana]-&gt;DajPol() == GradjaninBiH::Musko)
            std::cout &lt;&lt; "Unijeli ste gradjanina "&lt;&lt; iip &lt;&lt; " rodjenog " &lt;&lt; pokazivaci[brojac_gradjana]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;pokazivaci[brojac_gradjana]-&gt;DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;pokazivaci[brojac_gradjana]-&gt;DajGodinuRodjenja() &lt;&lt;" u regiji "&lt;&lt;pokazivaci[brojac_gradjana]-&gt;DajSifruRegije() &lt;&lt; ", musko.";
            else
            std::cout &lt;&lt; "Unijeli ste gradjanina "&lt;&lt; iip &lt;&lt; " rodjenog " &lt;&lt; pokazivaci[brojac_gradjana]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;pokazivaci[brojac_gradjana]-&gt;DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;pokazivaci[brojac_gradjana]-&gt;DajGodinuRodjenja() &lt;&lt;" u regiji "&lt;&lt;pokazivaci[brojac_gradjana]-&gt;DajSifruRegije() &lt;&lt; ", zensko.";
            std::cout&lt;&lt;std::endl;
            brojac_gradjana++;
<a name="3"></a><font color="#00FFFF"><a href="match667-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            } catch (std::logic_error a) { std::cout &lt;&lt; a.what() &lt;&lt; std::endl; i--;}
        }
        
        
        std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu?  \n";
        std::cin &gt;&gt; n;
</font>        for(int i=0; i&lt;n; i++)
        {
            try{
            
            std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): \n";
            std::string iip;
            std::cin.ignore(10000, '\n');
<a name="1"></a><font color="#00FF00"><a href="match667-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            getline(std::cin, iip);
            
            std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): \n";
            int dd,mm,gg;
            char znak;
            std::cin &gt;&gt; dd &gt;&gt; znak &gt;&gt; mm &gt;&gt; znak &gt;&gt; gg;
            std::cout &lt;&lt; "Unesite sifru regije: \n";
            int sifra;
            std::cin &gt;&gt; sifra;
            std::cin.ignore(10000, '\n');
            std::cout &lt;&lt; "Unesite M za musko, Z za zensko: \n";
</font>            char mz;
            std::cin &gt;&gt; mz;
            
            GradjaninBiH::Pol lop(GradjaninBiH::Musko);
            if(mz == 'M' || mz == 'm') lop = GradjaninBiH::Musko;
            else if(mz == 'Z' || mz == 'z') lop = GradjaninBiH::Zensko;
            else { std::cout &lt;&lt; "Neispravan unos"; return 0; }
            //std::cout &lt;&lt; dd&lt;&lt;"/"&lt;&lt;mm&lt;&lt;"/"&lt;&lt;gg&lt;&lt;std::endl;
            pokazivaci[brojac_gradjana] = new GradjaninBiH (iip, dd,mm,gg,sifra, lop);
            
            std::cout &lt;&lt; "Unijeli ste gradjanina "&lt;&lt; iip &lt;&lt; " JMBG: " &lt;&lt; pokazivaci[brojac_gradjana]-&gt;DajJMBG()&lt;&lt;".";
            std::cout&lt;&lt;std::endl;
            brojac_gradjana++;
           
            } catch (std::logic_error a) { std::cout &lt;&lt; a.what() &lt;&lt; std::endl; i--; }
        }
        
        
    } catch (std::logic_error a) { std::cout &lt;&lt; a.what();}
	return 0;
}</pre>
</body>
</html>
