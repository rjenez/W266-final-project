<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student6507.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student2086.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;

class GradjaninBiH{
    std::string ime_i_prezime;
    int jmbg[13]{};
    GradjaninBiH* veza;
    static GradjaninBiH* kraj;
    static bool TestDatuma(int d,int m,int g);
    static void TestJMBG(GradjaninBiH *veza,int* jmbg);
   
    public:
    enum Pol{Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime,int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime () const{return ime_i_prezime;}
    long long int DajJMBG() const;
    int DajDanRodjenja() const {return jmbg[0]*10+jmbg[1];}
    int DajMjesecRodjenja() const{return jmbg[2]*10+jmbg[3];}
    int DajGodinuRodjenja() const;
    int DajSifruRegije() const{return jmbg[7]*10+jmbg[8];}
    Pol DajPol() const;
    void PromijeniImeIPrezime(std::string novo_ime){ ime_i_prezime=novo_ime; } 
    ~GradjaninBiH();
};
GradjaninBiH* GradjaninBiH::kraj=nullptr;
    GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg):ime_i_prezime(ime_i_prezime){
        std::string s(std::to_string(jmbg));
        for(int i=0; i&lt;13; i++){
            if(s.size()==12){
                if(i==0){ GradjaninBiH::jmbg[i]=0; continue; }
                GradjaninBiH::jmbg[i]=s[i-1]-'0';
            }else{
                GradjaninBiH::jmbg[i]=s[i]-'0';
            }
        }
        {
         int d=GradjaninBiH::jmbg[0]*10+GradjaninBiH::jmbg[1],m=GradjaninBiH::jmbg[2]*10+GradjaninBiH::jmbg[3],g=GradjaninBiH::jmbg[4]*100+GradjaninBiH::jmbg[5]*10+GradjaninBiH::jmbg[6];
         if(g&gt;17)
            g+=1000;
        else g+=2000;
      //  std::cout&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g;
        if(!TestDatuma(d,m,g)) throw std::logic_error("JMBG nije validan");
        int c=11-(7*(GradjaninBiH::jmbg[0]+GradjaninBiH::jmbg[6])+6*(GradjaninBiH::jmbg[1]+GradjaninBiH::jmbg[7])+5*(GradjaninBiH::jmbg[2]+GradjaninBiH::jmbg[8])+4*(GradjaninBiH::jmbg[3]+GradjaninBiH::jmbg[9])+3*(GradjaninBiH::jmbg[4]+GradjaninBiH::jmbg[10])+2*(GradjaninBiH::jmbg[5]+GradjaninBiH::jmbg[11]))%11;
        if(c!=GradjaninBiH::jmbg[12]) throw std::logic_error("JMBG nije validan");
        }
        veza=kraj;
        kraj=this;
        GradjaninBiH::ime_i_prezime=ime_i_prezime;
        TestJMBG(veza,GradjaninBiH::jmbg);
    }
    void GradjaninBiH::TestJMBG (GradjaninBiH * veza,int* jmbg){
        for(GradjaninBiH* p(veza); p!=nullptr; p=p-&gt;veza){
            if( std::equal(jmbg,jmbg+13,(p-&gt;jmbg)) ) throw std::logic_error ("Vec postoji gradjanin sa istim JMBG");
        }
    }
    bool GradjaninBiH::TestDatuma(int d,int m,int g){
        int broj_dana[]{31,28,31,30,31,30,31,31,30,31,30,31};
        if(((g%4==0) and (g%100!=0)) or (g%400==0))
            broj_dana[1]++;
        return !(g&lt;1 or m&lt;1 or m&gt;12 or d&lt;1 or d&gt;broj_dana[m-1]);
            
    }
    
<a name="3"></a><font color="#00FFFF"><a href="match392-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
        if(!TestDatuma(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)) throw std::logic_error ("Nesipravni podaci");
</font>        GradjaninBiH::ime_i_prezime=ime_i_prezime;
        if(sifra_regije&lt;0 or sifra_regije&gt;99) throw std::logic_error ("Nesipravni podaci");
        std::string s(std::to_string(dan_rodjenja));
        if(s.size()==1){
            jmbg[0]=0;
            jmbg[1]=s[0]-'0';
        }else{
            jmbg[0]=s[0]-'0';
            jmbg[1]=s[1]-'0';
        }
        s=std::to_string(mjesec_rodjenja);
        for(int i=0; i&lt;2; i++)
            jmbg[2+i]=s[i]-'0';
        s=std::to_string(godina_rodjenja);
        for(int i=0; i&lt;3; i++)
            jmbg[4+i]=s[i+1]-'0';
        s=std::to_string(sifra_regije);
        for(int i=0; i&lt;2; i++)
            jmbg[7+i]=s[i]-'0';
        veza=kraj;
        kraj=this;
        int a(0);
        if(pol==Zensko)
            a=500;
        for(GradjaninBiH* p(veza); p!=nullptr; p=p-&gt;veza){
            bool pom(true);
            for(int i=0; i&lt;9; i++){
                if(p-&gt;jmbg[i]!=jmbg[i])
                    pom=false;
            }
        if(pom){
            int b(jmbg[9]*100+jmbg[10]*10+jmbg[11]);
            if(pol==Musko){
                if(b&gt;=a and b&lt;500)
                    a=++b;
            }else{
                if(b&gt;=a) a=++b;
            }
        }
        }
        s=std::to_string(a);
        if(s.size()==1){
            s="00"+std::to_string(a);
        }else if(s.size()==2){
            s="0"+std::to_string(a);
        }
        for(int i=0; i&lt;3; i++)
            jmbg[9+i]=s[i]-'0';
  //      for(int i=0; i&lt;12; i++)
    //    std::cout&lt;&lt;jmbg[i]&lt;&lt;" ";
    // = 11−(7∙ ( + )+6∙ ( + )+5∙ ( + )+4∙ ( + )+3∙ ( + )+2∙ ( + ))%11
        jmbg[12]=11-(7*(jmbg[0]+jmbg[6])+6*(jmbg[1]+jmbg[7])+5*(jmbg[2]+jmbg[8])+4*(jmbg[3]+jmbg[9])+3*(jmbg[4]+jmbg[10])+2*(jmbg[5]+jmbg[11]))%11;
 //  std::cout&lt;&lt;jmbg[12]&lt;&lt;" ";
   //     for(int i=0; i&lt;13; i++)
     //   std::cout&lt;&lt;jmbg[i];
    }
    long long int GradjaninBiH::DajJMBG()const{
        long long int a(0);
        for(int i=0; i&lt;13; i++){
            a+=jmbg[12-i]*std::pow(10,i);
        }
        return a;
    }
    int GradjaninBiH::DajGodinuRodjenja() const{
        int a(jmbg[4]*100+jmbg[5]*10+jmbg[6]);
        if(a&lt;=17) a+=2000;     
        else a+=1000;
        return a;
    }
    GradjaninBiH::Pol GradjaninBiH::DajPol() const{
        int a(jmbg[9]*100+jmbg[10]*10+jmbg[11]);
        if(a&gt;=500) return Zensko;
        return Musko;
    }
    GradjaninBiH::~GradjaninBiH(){
        if(this==kraj){
            kraj=this-&gt;veza;
        }else
        for(GradjaninBiH* p(kraj); p!=nullptr; p=p-&gt;veza){
            if(p-&gt;veza==this) p-&gt;veza=this-&gt;veza;
        }
        
    }
int main ()
{
<a name="4"></a><font color="#FF00FF"><a href="match392-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    int n;
    std::cin&gt;&gt;n;
    std::cin.ignore(10000,'\n');
</font><a name="0"></a><font color="#FF0000"><a href="match392-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    for(int i=0; i&lt;n; i++){
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::string s;
        std::getline(std::cin,s);
        std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
        long long int br;
        std::cin&gt;&gt;br;
         std::cin.ignore(10000,'\n');
</font>        try{
        GradjaninBiH neko(s,br);
        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;neko.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;neko.DajDanRodjenja()&lt;&lt;"."&lt;&lt;neko.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;neko.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;neko.DajSifruRegije()&lt;&lt;", ";
        if(neko.DajPol()==0) std::cout&lt;&lt;"musko."&lt;&lt;std::endl;
        else std::cout&lt;&lt;"zensko."&lt;&lt;std::endl;
        }catch(std::logic_error iz){
            std::cout&lt;&lt;iz.what();
            i--;
        }
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
     std::cin.ignore(10000,'\n');
<a name="2"></a><font color="#0000FF"><a href="match392-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    for(int i=0; i&lt;n; i++){
         std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
         std::string s;
         std::getline(std::cin,s);
         std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
</font>         char znak1,znak2;
         int d,m,g;
<a name="1"></a><font color="#00FF00"><a href="match392-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

         std::cin&gt;&gt;d&gt;&gt;znak1&gt;&gt;m&gt;&gt;znak2&gt;&gt;g;
          std::cin.ignore(10000,'\n');
         std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
         int sr;
         std::cin&gt;&gt;sr;
          std::cin.ignore(10000,'\n');
         std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
</font>         GradjaninBiH::Pol pol;
         char pom;
         std::cin&gt;&gt;pom;
          std::cin.ignore(10000,'\n');
         if(pom=='M') pol=GradjaninBiH::Musko;
         else if (pom=='Z') pol=GradjaninBiH::Zensko;
         else{
             std::cout&lt;&lt;"Nesipravni podaci";
             i--;
             continue;
         }
         try{
         GradjaninBiH neko(s,d,m,g,sr,pol);
         std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;neko.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;neko.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
         }catch(std::logic_error iz){
             std::cout&lt;&lt;iz.what();
             i--;
         }
    }     
/*   try{
    GradjaninBiH s("Murga Drot",12,12,1992,17,GradjaninBiH::Musko);
    std::cout&lt;&lt;s.DajJMBG();
    }catch(...){
        std::cout&lt;&lt;"flaksčf";
    } */
	return 0;
}</pre>
</body>
</html>
