<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4495.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5573.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

class GradjaninBiH{
    std::string ime_i_prezime;
    long long int jmbg;
    GradjaninBiH* prethodni; //pok na prethodno kreiranog gradjanina
    
    void PostaviPrethodnika(GradjaninBiH* p) { prethodni = p; }
    GradjaninBiH* VratiPrethodnika() { return prethodni; }
    void PostaviJMBG(long long int jmb) { jmbg=jmb;}
    int DajSifruPola() const {
        long long int jmb=DajJMBG();
        int cifre[13];
        int i=0;
        while(jmb&gt;0) {
            cifre[i]=jmb%10;
            i++;
            jmb/=10;
        }
        if(i==12) cifre[12]=0;
        
         for(int i=0;i&lt;7;i++){
            int temp=cifre[i];
            cifre[i]=cifre[12-i];
            cifre[12-i]=temp;
        }
        
        return cifre[9]*100+cifre[10]*10+cifre[11];
    }
    
    bool IspitajJMBG(long long int jmbg){
        
        GradjaninBiH* novi=posljednji;
        while(novi!=nullptr) {
            if(novi-&gt;DajJMBG()==jmbg) return false;
            
            GradjaninBiH* pom=novi;
            novi=pom-&gt;VratiPrethodnika();
            pom-&gt;PostaviPrethodnika(nullptr);
            pom=nullptr;
        }
        return true;
    }
    
    //pomocna za generisanje pola
    //ako nema nijednog kreiranog gradjanina, vraca 0 ako je musko, 500 ako je zensko
    // ako ima, naci ce dvije najmanje sifra pola i na osnovu toga generisati
    int generisiPol(int sifra_regije, std::string pol){ 
        int prviNajmanjiMuskarci=2000; // 2000 jer je dovoljno velik broj, svakako ne moze nicija sifra biti &gt; 1000
        int drugiNajmanjiMuskarci=2000;
        int prviNajmanjiZene=2000;
        int drugiNajmanjiZene=2000;
        
        if(posljednji==nullptr){ // nema kreiranih gradjana
            if(pol == "Musko") return 0;
            return 500;
        }
        
        GradjaninBiH* novi=posljednji;
        while(novi!=nullptr){
            GradjaninBiH* pom=novi;
            if(sifra_regije==pom-&gt;DajSifruRegije()){
                int sifra=pom-&gt;DajSifruPola();
                if(pol=="Musko" &amp;&amp; pom-&gt;DajPol()==Pol::Musko){
                    if(sifra &lt;prviNajmanjiMuskarci){
                        
                        drugiNajmanjiMuskarci=prviNajmanjiMuskarci;
                        prviNajmanjiMuskarci =sifra;
                    }
                    else if(sifra &lt; drugiNajmanjiMuskarci &amp;&amp; sifra!= prviNajmanjiMuskarci){
                        drugiNajmanjiMuskarci=sifra;
                    }
                }
                else if(pol=="Zensko" &amp;&amp; pom-&gt;DajPol()==Pol::Zensko){
                    if(sifra &lt; prviNajmanjiZene){
                        drugiNajmanjiZene=prviNajmanjiZene;
                        prviNajmanjiZene=sifra;
                    }
                    else if(sifra &lt; drugiNajmanjiZene &amp;&amp; sifra!=prviNajmanjiZene){
                        drugiNajmanjiZene=sifra;
                    }
                }
            }
             //prolazak kroz listu
            novi=pom-&gt;VratiPrethodnika();
            pom=nullptr;
        }
         novi=nullptr;
                
                //znak da nije pronadjen nijedan muskarac
                if(pol=="Musko"){
                    if(prviNajmanjiMuskarci==2000) { return 0; }
                    if(prviNajmanjiMuskarci+1 != drugiNajmanjiMuskarci &amp;&amp; prviNajmanjiMuskarci+1 &lt;500) return prviNajmanjiMuskarci+1;
                    if(prviNajmanjiMuskarci+1 ==drugiNajmanjiMuskarci &amp;&amp; drugiNajmanjiMuskarci+1 &lt;500) return drugiNajmanjiMuskarci+1;
                 
                 }
             
             if(pol=="Zensko"){
                 if(prviNajmanjiZene==2000) return 500;
                 if(prviNajmanjiZene+1 != drugiNajmanjiZene &amp;&amp; prviNajmanjiZene+1&lt;1000) return prviNajmanjiZene+1;
                 if(prviNajmanjiZene+1 == drugiNajmanjiZene &amp;&amp; drugiNajmanjiZene+1 &lt; 1000) return drugiNajmanjiZene+1;
             }
            
        return -1; //znak da je doslo do greske
        }
    
    public:
    
    enum Pol {Musko, Zensko};
    static GradjaninBiH* posljednji;

    GradjaninBiH(std::string ime_i_prezime, long long int jmbg) {
        this-&gt;ime_i_prezime = ime_i_prezime;
        
        if(!IspitajJMBG(jmbg))  throw std::logic_error("Vec postoji gradjanin sa istim JMBG"); //radi
        PromijeniImeIPrezime(ime_i_prezime);
        
        long long int jmb=jmbg;
        if(jmbg&lt;0) throw std::logic_error("JMBG nije validan");
        int cifre[13];
        int i=0;
        while (jmbg&gt;0) {
            cifre[i]=jmbg%10;
            i++;
            jmbg/=10;
        }
        
        if(i==12) cifre[12]=0;
        if(i&lt;12 || i&gt;13) throw std::logic_error("JMBG nije validan");
        
        for(int i=0;i&lt;7;i++){
            int temp=cifre[i];
            cifre[i]=cifre[12-i];
            cifre[12-i]=temp;
        }

<a name="5"></a><font color="#FF0000"><a href="match459-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

        int dan=cifre[0]*10+cifre[1];
        int mjesec=cifre[2]*10+cifre[3];
        int godina;
</font>    
        if(cifre[4]==0) godina= 2000+cifre[5]*10+cifre[6];
        else godina = 1000 + cifre[4]*100 +cifre[5]*10+cifre[6]; 
        

       if(dan&gt;31) throw std::logic_error("JMBG nije validan");
       
       //mjeseci sa 30 dana
       if(((mjesec==4) || (mjesec==6) || (mjesec==9) || (mjesec==11)) &amp;&amp; dan&gt;=31) throw std::logic_error("JMBG nije validan");
       
       //provjera za februar
       if(mjesec == 2){
           //prestupna godina
           if(godina%4 == 0 &amp;&amp; godina%400 == 0 &amp;&amp; godina%100 != 0){
               if(dan &gt; 29) throw std::logic_error("JMBG nije validan");
           }
           else{
               if(dan &gt; 28) throw std::logic_error("JMBG nije validan");
           }
           
       }
       
       if(godina&gt;2017 || godina &lt; 1917) throw std::logic_error("JMBG nije validan"); //provjeriti
     
     int kontrolnacifra= 11-((7*(cifre[0]+cifre[6])+6*(cifre[1]+cifre[7])+5*(cifre[2]+cifre[8])+4*(cifre[3]+cifre[9])+3*(cifre[4]+cifre[10])+2*(cifre[5]+cifre[11]))%11);
        
     if(kontrolnacifra&gt;=12 || (kontrolnacifra==10)) throw std::logic_error ("JMBG nije validan");
     if(kontrolnacifra!=cifre[12]){
         if(kontrolnacifra==11 &amp;&amp; cifre[12]==0){
             this-&gt;jmbg = jmb;
             PostaviPrethodnika(posljednji);
             posljednji=this;
         }
         else throw std::logic_error ("JMBG nije validan");
     }
     else{
          this-&gt;jmbg = jmb;
          PostaviPrethodnika(posljednji);
          posljednji=this;
     }
    
     
    }
    
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
        this-&gt;ime_i_prezime = ime_i_prezime;
        
        if(dan_rodjenja &gt; 31 || dan_rodjenja &lt; 0) throw std::logic_error("Neispravni podaci");
        if(mjesec_rodjenja &lt; 0 || mjesec_rodjenja &gt; 13) throw std::logic_error("Neispravni podaci");
        
        if((mjesec_rodjenja== 4 || mjesec_rodjenja==6 || mjesec_rodjenja == 9 || mjesec_rodjenja==11) &amp;&amp; dan_rodjenja &gt; 30) 
            throw std::logic_error("Neispravni podaci");
            
        //februar    
        if(mjesec_rodjenja == 2){
            if(godina_rodjenja %4 == 0 &amp;&amp; godina_rodjenja%100 != 0 &amp;&amp; godina_rodjenja %400 == 0){
                if(dan_rodjenja &gt; 29) throw std::logic_error("Neispravni podaci");
            }else {
                if(dan_rodjenja &gt; 28) throw std::logic_error("Neispravni podaci");
            } }
            
            if(godina_rodjenja &gt; 2017) throw std::logic_error("Neispravni podaci");
            if(godina_rodjenja &lt; 1917) throw std::logic_error("Neispravni podaci");
            
            if(sifra_regije&lt;0 || sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
            
            int cifre[13];
            
            if(dan_rodjenja&lt;10) {cifre[0]=0; cifre[1]=dan_rodjenja;}
            else {cifre[0]= dan_rodjenja/10; cifre[1]=dan_rodjenja%10;}
            
            if(mjesec_rodjenja &lt; 10){cifre[2]=0; cifre[3]=mjesec_rodjenja; }
            else {cifre[2] =mjesec_rodjenja/10; cifre[3]=mjesec_rodjenja%10;}
            
            if(godina_rodjenja==2000) { cifre[4]=0; cifre[5]=0; cifre[6]=0; }
            else if(godina_rodjenja &gt; 2000 &amp;&amp; godina_rodjenja&lt;2010) { cifre[4]=0; cifre[5]=0; cifre[6]=godina_rodjenja%10;}
            else if(godina_rodjenja &gt; 2010 &amp;&amp; godina_rodjenja&lt;2018) {cifre[4] = 0; cifre[5] = (godina_rodjenja/10)%10; cifre[6]=godina_rodjenja%10; }
            else {cifre[4] = (godina_rodjenja/100)%10 ; cifre[5] =(godina_rodjenja/10)%10; cifre[6]=godina_rodjenja%10;}
    
            if(sifra_regije&lt;10) {cifre[7]=0; cifre[8]=sifra_regije;}
            else {cifre[7]=sifra_regije/10; cifre[8]=sifra_regije%10;}
            
            int sifra;
            if(pol==Pol::Musko) sifra=generisiPol(sifra_regije, "Musko");
            else sifra=generisiPol(sifra_regije,"Zensko");
            if(sifra&lt;10 &amp;&amp; sifra&gt;=0) { cifre[9]=cifre[10]=cifre[11] =0; }
            else if(sifra&gt;=10 &amp;&amp; sifra&lt;100){ cifre[9]=0; cifre[10]=sifra/10 ;cifre[11]=sifra%10;}
            else if(sifra&gt;=100 &amp;&amp; sifra&lt;1000) {cifre[9]=sifra/100 ; cifre[10]=(sifra/10)%10 ;cifre[11]=sifra%10; }
            //if(sifra==-1) - ako je metoda vratila gresku sta onda???
            
            int kontrolnacifra= 11-((7*(cifre[0]+cifre[6])+6*(cifre[1]+cifre[7])+5*(cifre[2]+cifre[8])+4*(cifre[3]+cifre[9])+3*(cifre[4]+cifre[10])+2*(cifre[5]+cifre[11]))%11);
 
            if(kontrolnacifra==10 || kontrolnacifra &lt; 0 || kontrolnacifra &gt; 11)  throw std::logic_error("JMBG nije validan"); 
            
            
            //kad je kontrolnaCifra 11, onda je 0?
            if(kontrolnacifra==11)cifre[12] =0;
            else cifre[12]=kontrolnacifra;

            
            if(cifre[0]==0){
                long long int jmb=0;
                for(int i=1;i&lt;13;i++){
                    jmb=jmb+pow(10,12-i)*cifre[i];
                }
                jmbg=jmb;
            }
            else {
            long long int jmb=0;
            for(int i = 0; i &lt; 13; i++){
                jmb = jmb + pow(10,12-i)*cifre[i];
                
            }
  
            jmbg = jmb;
            
            }
      GradjaninBiH* novi=this;
      novi-&gt;prethodni=posljednji;
      posljednji=novi;
     }
     
     ~GradjaninBiH(){
         if(posljednji-&gt;VratiPrethodnika() == nullptr) posljednji=nullptr; //ako je samo 1 element u listi
         else if(this == posljednji){
             posljednji=this-&gt;VratiPrethodnika();
         }
         else{
             GradjaninBiH* novi=posljednji;
             while(novi-&gt;VratiPrethodnika()!=this){
                 GradjaninBiH* pom= novi;
                 novi=pom-&gt;VratiPrethodnika();
                 pom=nullptr;
             }
             
             novi-&gt;PostaviPrethodnika(this-&gt;VratiPrethodnika());
         }
     }
    
    std::string DajImeIPrezime() const { return ime_i_prezime ; }
    
    long long int DajJMBG() const { return jmbg; }
    
    int DajDanRodjenja() const {
        long long int jmb=DajJMBG();
        int cifre[13];
        int i=0;
        while(jmb&gt;0){
            cifre[i]=jmb%10;
            i++;
            jmb/=10;
        }
        
        if(i==12) cifre[12]=0;
        
        for(int i=0;i&lt;7;i++){
            int temp=cifre[i];
            cifre[i]=cifre[12-i];
            cifre[12-i]=temp;
        }
        
        if(cifre[0]==0) return cifre[1];
        else {
            return cifre[0]*10+cifre[1];
        }
    }
    
    int DajMjesecRodjenja() const {
        long long int jmb=DajJMBG();
        
        int cifre[13];
        int i=0;
        while(jmb&gt;0) {
            cifre[i]=jmb%10;
            i++;
            jmb/=10;
        }
        if(i==12) cifre[12]=0;
        
         for(int i=0;i&lt;7;i++){
            int temp=cifre[i];
            cifre[i]=cifre[12-i];
            cifre[12-i]=temp;
        }
        
        if(cifre[2]==0) return cifre[3];
        else {
            return cifre[2]*10+cifre[3];
        }
        
    }
    
    int DajGodinuRodjenja() const {
        long long int jmb=DajJMBG();
        
        int cifre[13];
        int i=0;
        while(jmb&gt;0) {
            cifre[i]=jmb%10;
            i++;
            jmb/=10;
        }
        if(i==12) cifre[12]=0;
        
         for(int i=0;i&lt;7;i++){
            int temp=cifre[i];
            cifre[i]=cifre[12-i];
            cifre[12-i]=temp;
        }
        
        if(cifre[4]==0){ 
<a name="2"></a><font color="#0000FF"><a href="match459-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            return 2000 + cifre[5]*10+cifre[6];
        } 
        
        return 1000+cifre[4]*100+cifre[5]*10+cifre[6];
        
    }
    
    int DajSifruRegije() const {
</font>        long long int jmb=DajJMBG();
        int cifre[13];
        int i=0;
        while(jmb&gt;0) {
            cifre[i]=jmb%10;
            i++;
            jmb/=10;
        }
        if(i==12) cifre[12]=0;
        
         for(int i=0;i&lt;7;i++){
            int temp=cifre[i];
            cifre[i]=cifre[12-i];
            cifre[12-i]=temp;
        }
        if(cifre[7]==0) return cifre[8];
        else {
            return cifre[7]*10+cifre[8];
        }
    }
    
    Pol DajPol() const {
        int spol=this-&gt;DajSifruPola();
        if(spol&gt;=0 &amp;&amp; spol&lt;500) return Pol::Musko;
        return Pol::Zensko;
    }
    
    void PromijeniImeIPrezime(std::string novo_ime) { ime_i_prezime = novo_ime; }
};

// postaviti posljednjeg na nullptr
GradjaninBiH* GradjaninBiH::posljednji=nullptr;

int main ()
{
    GradjaninBiH* niz[100];
    int brojGradjana=0;
<a name="4"></a><font color="#FF00FF"><a href="match459-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? "&lt;&lt; std::endl;
    int n;
    std::cin &gt;&gt; n;
    for(int i =0; i &lt; n; i++){
    try{
</font>            
<a name="3"></a><font color="#00FFFF"><a href="match459-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
            std::string ime_prezime;
            std::cin.ignore(256, '\n');
            std::getline(std::cin, ime_prezime);
            
            std::cin.clear();
</font>            std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
            long long int jmb;
            std::cin&gt;&gt;jmb;
            
            GradjaninBiH g(ime_prezime, jmb);
            niz[brojGradjana]=&amp;g;
            brojGradjana++;
            std::cout &lt;&lt;"Unijeli ste gradjanina " &lt;&lt; ime_prezime &lt;&lt; " rodjenog " &lt;&lt; g.DajDanRodjenja() &lt;&lt; "." &lt;&lt; g.DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; g.DajGodinuRodjenja() 
                      &lt;&lt; " u regiji " &lt;&lt; g.DajSifruRegije() &lt;&lt; ", ";
                      if(g.DajPol() == GradjaninBiH::Musko) std::cout &lt;&lt;"musko."&lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match459-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                      else std::cout &lt;&lt; "zensko." &lt;&lt; std::endl;
        }
    
        catch(std::logic_error e){
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
        }
    }
    
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
</font>    std::cin &gt;&gt; n;
    
    for(int i = 0; i &lt; n; i++){
        try{
            std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
            std::string ime_prezime;
            std::cin.ignore();
            std::getline(std::cin, ime_prezime);
            std::cin.clear();
            
            std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl;
            std::string datumRodjenja;
            std::getline(std::cin, datumRodjenja);
            int danRodjenja=stoi(datumRodjenja.substr(0,2));
            int mjesecRodjenja=stoi(datumRodjenja.substr(3,2));
            int godRodjenja=stoi(datumRodjenja.substr(6,4));
            
<a name="1"></a><font color="#00FF00"><a href="match459-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            std::cout &lt;&lt;"Unesite sifru regije: "&lt;&lt; std::endl;
            int sifraRegije;
            std::cin &gt;&gt; sifraRegije;
            
            std::cout &lt;&lt; "Unesite M za musko, Z za zensko: "&lt;&lt; std::endl;
            char spol;
            std::cin&gt;&gt;spol;
</font>            if(spol!='M' &amp;&amp; spol!= 'Z') throw std::logic_error("Neispravni podaci");
            GradjaninBiH::Pol p;
            if(spol=='M') p=GradjaninBiH::Musko;
            else  p=GradjaninBiH::Zensko;
            GradjaninBiH g(ime_prezime, danRodjenja, mjesecRodjenja, godRodjenja, sifraRegije, p);
            niz[brojGradjana]=&amp;g; 
            brojGradjana++;
            std::cout &lt;&lt;"Unijeli ste gradjanina " &lt;&lt; ime_prezime &lt;&lt; " JMBG: " &lt;&lt; g.DajJMBG() &lt;&lt; "." &lt;&lt; std::endl;
        }
        catch(std::logic_error e){
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
        }
    }
    
    
	return 0;
}</pre>
</body>
</html>
