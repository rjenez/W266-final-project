<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4770.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4770.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
class GradjaninBiH {
    std::string i_i_p;
    int niz[13];
    static GradjaninBiH *kraj;
    GradjaninBiH *prethodni;
    static bool IspravanDatum(int dan, int mjesec, int godina);
    public:
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    GradjaninBiH &amp;operator = (const GradjaninBiH &amp;gr) = delete;
    GradjaninBiH(const GradjaninBiH &amp;g) = delete;
    ~GradjaninBiH();
    std::string DajImeIPrezime() const {
        return i_i_p;
    }
    long long int DajJMBG() const {
        long long int jmbg(0), k(1);
        for(int i = 12; i &gt;= 0; i--) {
            jmbg += niz[i]*k;
            k *= 10;
        } return jmbg;
    }
    int DajDanRodjenja() const {
        int dan = niz[0] * 10 + niz[1];
        return dan;
    }
    int DajMjesecRodjenja() const {
        int mjesec = niz[2] * 10 + niz[3];
        return mjesec;
    }
    int DajGodinuRodjenja() const {
        int godina;
        if(niz[4] == 0) godina = 2000 + 10 * niz[5] + niz[6];
        else godina = 1000 + 100 * niz[4] + 10 * niz[5] + niz[6];
        return godina;
    }
    int DajSifruRegije() const {
        int sifra = 10 * niz[7] + niz[8];
        return sifra;
    }
    Pol DajPol() const {
        int pol = 100 * niz[9] + 10 * niz[10] + niz[11];
        if(pol &gt;= 500) return Pol::Zensko;
        return Pol::Musko;
    }
    void PromijeniImeIPrezime(std::string novo_ime) {
        i_i_p = novo_ime;
    }

};
GradjaninBiH *GradjaninBiH::kraj = nullptr;
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) 
{
    i_i_p = ime_i_prezime;
    int brojac(12);
    int a;
    while(jmbg) {
        a = jmbg % 10;
        jmbg /= 10;
        niz[brojac] = a;
        brojac--;
        //if(brojac &lt; 0) throw std::logic_error("JMBG nije validan");
    }
    if(!brojac) niz[brojac] = 0;
<a name="2"></a><font color="#0000FF"><a href="match277-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    int c = 11 - (7*(niz[0] + niz[6]) + 6*(niz[1] + niz[7]) + 5*(niz[2] + niz[8]) + 4*(niz[3] + niz[9]) + 3*(niz[4] + niz[10]) + 2*(niz[5] + niz[11])) % 11;
    if(c == 11) c = 0;
    if(c != niz[12]) throw std::logic_error("JMBG nije validan");
</font>    int dan, mjesec, godina;
    dan = 10 * niz[0] + niz[1];
    mjesec = 10 * niz[2] + niz[3];
    if(niz[4] == 0) godina = 2000 + 10 * niz[5] + niz[6];
    else godina = 1000 + 100 * niz[4] + 10 * niz[5] + niz[6];
    if(!IspravanDatum(dan, mjesec, godina)) throw std::logic_error("JMBG nije validan");
    for(auto pok = kraj; pok != nullptr; pok = pok -&gt; prethodni)
    {
        if(pok -&gt; DajJMBG() == DajJMBG()) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
    }
    prethodni = kraj;
    kraj = this;
}
bool GradjaninBiH::IspravanDatum(int dan, int mjesec, int godina)
{
    int broj_dana[12] = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 }; 
    if((godina % 4 == 0 &amp;&amp; godina % 100 != 0) || godina % 400 == 0) broj_dana[1]++;
    if(dan &lt; 1 || dan &gt; broj_dana[mjesec - 1] || mjesec &lt; 1 || mjesec &gt; 12 || godina &gt; 2017 || godina &lt;= 1917) return false;
    return true;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol)
{
    i_i_p = ime_i_prezime;
    if(sifra_regije &lt; 0 || sifra_regije &gt; 99) throw std::logic_error("Neispravni podaci");
    if(!IspravanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja)) throw std::logic_error("Neispravni podaci");
    if(dan_rodjenja &lt; 10) {
        niz[0] = 0; niz[1] = dan_rodjenja;
    }
    else {
<a name="5"></a><font color="#FF0000"><a href="match277-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        niz[0] = dan_rodjenja / 10; niz[1] = dan_rodjenja % 10;
    }
    niz[2] = mjesec_rodjenja / 10; niz[3] = mjesec_rodjenja % 10;
</font>    if(godina_rodjenja &gt;= 2000) {
        niz[4] = 0; 
        niz[5] = (godina_rodjenja % 100) / 10;
        niz[6] = godina_rodjenja % 10;
    }
    else {
        niz[4] = (godina_rodjenja - 1000) / 100;
        niz[5] = (godina_rodjenja % 100) / 10;
        niz[6] = godina_rodjenja % 10;
    }
    if(sifra_regije &lt; 10) {
        niz[7] = 0; niz[8] = sifra_regije;
    }
    else {
        niz[7] = sifra_regije / 10; niz[8] = sifra_regije % 10;
    }
    if(pol == Pol::Zensko) {
        for(int i = 500; i &lt; 1000; i++)
        {
            bool ima(false);
            niz[9] = i / 100; niz[10] = (i % 100) / 10; niz[11] = i % 10;
            int c = 11 - (7*(niz[0] + niz[6]) + 6*(niz[1] + niz[7]) + 5*(niz[2] + niz[8]) + 4*(niz[3] + niz[9]) + 
            3*(niz[4] + niz[10]) + 2*(niz[5] + niz[11])) % 11;
            if(c == 10) continue;
            if(c == 11) c = 0;
            niz[12] = c;
            for(auto pok = kraj; pok != nullptr; pok = pok -&gt; prethodni)
            {
                if(pok -&gt; DajJMBG() == DajJMBG()) 
                {   
                    ima = true; break;
                }
            }
            if(!ima) break;
        }
    }
    else if(pol == Pol::Musko) {
        for(int i = 0; i &lt; 500; i++)
        {
            bool ima(false);
            niz[9] = i / 100; niz[10] = (i % 100) / 10; niz[11] = i % 10;
            int c = 11 - (7*(niz[0] + niz[6]) + 6*(niz[1] + niz[7]) + 5*(niz[2] + niz[8]) + 4*(niz[3] + niz[9]) + 
            3*(niz[4] + niz[10]) + 2*(niz[5] + niz[11])) % 11;
            if(c == 10) continue;
            if(c == 11) c = 0;
            niz[12] = c;
            for(auto pok = kraj; pok != nullptr; pok = pok -&gt; prethodni)
            {
                if(pok -&gt; DajJMBG() == DajJMBG()) 
                {
                    ima = true; break;
                }
            } if(!ima) break;
        }
    }
}
GradjaninBiH::~GradjaninBiH() {
    auto tmp = kraj;
    for(auto pok = kraj; pok != nullptr; pok = pok -&gt; prethodni)
    {
        if(pok == this) {
            if(kraj == this) {
                kraj = prethodni; break;
            } tmp -&gt; prethodni = prethodni; break;
        } tmp = pok;
    }
}
int main ()
{
<a name="1"></a><font color="#00FF00"><a href="match277-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    GradjaninBiH *niz[100] {};
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? \n";
    int n;
    std::cin&gt;&gt;n;
    std::cin.ignore(1000, '\n');
    for(int i = 0; i &lt; n; i++)
    {
        try {
            std::cin.ignore(1000, '\n');
</font>            long long int jmbg;
            std::string s;
            std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): \n";
            std::getline(std::cin, s);
            std::cout&lt;&lt;"Unesite JMBG: \n";
            //std::cin.ignore(1000000, '\n');
            std::cin&gt;&gt;jmbg;
          //  std::cin.ignore(1000000, '\n');
            niz[i] = new GradjaninBiH(s, jmbg);
            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i] -&gt; GradjaninBiH::DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;niz[i] -&gt; GradjaninBiH::DajDanRodjenja()&lt;&lt;"."&lt;&lt;niz[i]-&gt;GradjaninBiH::DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;
            niz[i]-&gt;GradjaninBiH::DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;niz[i]-&gt;GradjaninBiH::DajSifruRegije()&lt;&lt;",";
            if(niz[i]-&gt;GradjaninBiH::DajPol() == GradjaninBiH::Pol::Zensko) std::cout&lt;&lt;" zensko.";
            else std::cout&lt;&lt;" musko.";
            
        }
        catch(std::logic_error a) {
            std::cin.ignore(10000, '\n');
            std::cout&lt;&lt;a.what();
            i--;
        }
        std::cout&lt;&lt;std::endl;
    } 
    int m;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? ";
    std::cin&gt;&gt;m;
    for(int i = 0; i &lt; m; i++)
    {
<a name="4"></a><font color="#FF00FF"><a href="match277-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        try {
            std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): ";
            std::string t;
            std::getline(std::cin, t);
            std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): ";
            int d, m, g;
</font>            char a;
            std::cin&gt;&gt;d&gt;&gt;a&gt;&gt;m&gt;&gt;a&gt;&gt;g;
<a name="3"></a><font color="#00FFFF"><a href="match277-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            std::cout&lt;&lt;"Unesite sifru regije: ";
            int sifra; std::cin&gt;&gt;sifra;
            std::cin.ignore(10000, '\n');
            std::cout&lt;&lt;"Unesite M za musko, Z za zensko: ";
            char x; std::cin&gt;&gt;x;
</font>            auto spol = GradjaninBiH::Pol::Zensko;
<a name="0"></a><font color="#FF0000"><a href="match277-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

            if(x == 'M') auto spol = GradjaninBiH::Pol::Musko;
            niz[i+n] = new GradjaninBiH(t, d, m, g, sifra, spol);
            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i+n]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[i+n]-&gt;DajJMBG()&lt;&lt;".";
            std::cin.ignore(100000, '\n');
        } catch(std::logic_error izuzetak) {
            std::cin.ignore(10000, '\n');
            std::cout&lt;&lt;izuzetak.what();
</font>            i--;
        } std::cout&lt;&lt;std::endl;
    } 
	return 0;
}</pre>
</body>
</html>
