<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4124.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4124.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class GradjaninBiH {
    std::string ime_i_prezime;
    long long int jmbg;
    GradjaninBiH *prethodni;
    static GradjaninBiH *posljednji;
    void TestDatum(int d, int m, int g) {
        int temp(g/100);
        if(temp==9) g+=1000;
        else g+=2000;
        int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if((g%4==0 and g%100!=0) or g%400==0) broj_dana[1]++;
        if(g&lt;1 or m&lt;1 or m&gt;12 or d&lt;1 or d&gt;broj_dana[m-1])
            throw std::logic_error("");
    }
    void TestJMBG(long long int jmbg) {
        int c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11,c12,c13;
        c13=jmbg%10; jmbg/=10; c12=jmbg%10; jmbg/=10; c11=jmbg%10; jmbg/=10; c10=jmbg%10; jmbg/=10;
        c9=jmbg%10; jmbg/=10; c8=jmbg%10; jmbg/=10; c7=jmbg%10; jmbg/=10; c6=jmbg%10; jmbg/=10;
        c5=jmbg%10; jmbg/=10; c4=jmbg%10; jmbg/=10; c3=jmbg%10; jmbg/=10; c2=jmbg%10; jmbg/=10;
        c1=jmbg%10;
        int c = 11-(7*(c1+c7)+6*(c2+c8)+5*(c3+c9)+4*(c4+c10)+3*(c5+c11)+2*(c6+c12))%11;
        if(c==11) c=0;
        if(c13!=c or c13==10) throw std::logic_error("JMBG nije validan");
        int d(c2+c1*10), m(c4+c3*10), g(c7+c6*10+c5*100);
        try{
            TestDatum(d,m,g);
        } catch(...) {
            throw std::logic_error("JMBG nije validan");
        }
    }
public:
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    GradjaninBiH &amp;operator =(const GradjaninBiH &amp;g)=delete;
    GradjaninBiH(const GradjaninBiH &amp;g)=delete;
    std::string DajImeIPrezime() const {return ime_i_prezime;}
    long long int DajJMBG() const {return jmbg;}
    int DajDanRodjenja() const {return jmbg/100000000000;}
    int DajMjesecRodjenja() const;
    int DajGodinuRodjenja() const;
    int DajSifruRegije() const;
    Pol DajPol() const;
    void PromijeniImeIPrezime(std::string novo_ime) {ime_i_prezime = novo_ime;}
    ~GradjaninBiH();
    void Ispisi() const { std::cout &lt;&lt; ime_i_prezime;}
};

GradjaninBiH::~GradjaninBiH() {
    GradjaninBiH *temp(posljednji), *temp2(posljednji);
    if(posljednji-&gt;jmbg!=jmbg) posljednji=posljednji-&gt;prethodni;
    while(posljednji-&gt;jmbg!=jmbg) {
        posljednji=posljednji-&gt;prethodni;
        if(posljednji-&gt;jmbg==jmbg) break;
        temp2=temp2-&gt;prethodni;
    }
    temp2-&gt;prethodni=prethodni;
    prethodni=nullptr;
    posljednji=temp;
}

GradjaninBiH* GradjaninBiH::posljednji = nullptr;

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) : ime_i_prezime(ime_i_prezime) {
        TestJMBG(jmbg);
        GradjaninBiH::jmbg=jmbg;
        if(!posljednji) {
            prethodni=nullptr;
            posljednji=this;
        } else {
            prethodni=posljednji;
            posljednji=this;
        }
        auto temp(prethodni);
        while(temp!=nullptr) {
            if(temp-&gt;jmbg==GradjaninBiH::jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
            temp=temp-&gt;prethodni;
        }
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) : ime_i_prezime(ime_i_prezime) {
    try{
        TestDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja);
        if(sifra_regije&lt;0 or sifra_regije&gt;99) throw;
    } catch(...) {
        throw std::logic_error("Neispravni podaci");
    }
    long long int temp(0);
    long long int d(dan_rodjenja), m(mjesec_rodjenja);
    d *= 100000000000;
    m *= 1000000000;
    temp+=d+m;
    long long int temp3=godina_rodjenja%1000;
    temp3 *= 1000000; 
    temp+=temp3+sifra_regije*10000;
    jmbg=temp;
    if(!posljednji) {
        prethodni=nullptr;
        posljednji=this;
    } else {
        prethodni=posljednji;
        posljednji=this;
    }
    GradjaninBiH *temp2(prethodni);
    if(pol==Pol::Zensko) jmbg+=5000;
    while(temp2!=nullptr) {
        long long int jmbg2(temp2-&gt;jmbg);
        int dan(jmbg2/100000000000), mjesec(jmbg2/1000000000), godina(jmbg2/1000000);
        mjesec%=100; godina%=1000;
        long long int kod2(jmbg2/10); kod2%=1000;
        Pol pol2(Pol::Musko);
        if(kod2&gt;=500) pol2=Pol::Zensko;
        int regija(jmbg2/10000); regija%=100;
        if(dan==dan_rodjenja and mjesec==mjesec_rodjenja and godina==(godina_rodjenja%1000) and pol2==pol and regija==sifra_regije)
            jmbg+=kod2*10+1;
        temp2=temp2-&gt;prethodni;
    }
    int c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11,c12,c13;
    long long int jmbg3(jmbg);
    jmbg3/=10; c12=jmbg3%10; jmbg3/=10; c11=jmbg3%10; jmbg3/=10; c10=jmbg3%10; jmbg3/=10;
    c9=jmbg3%10; jmbg3/=10; c8=jmbg3%10; jmbg3/=10; c7=jmbg3%10; jmbg3/=10; c6=jmbg3%10; jmbg3/=10;
    c5=jmbg3%10; jmbg3/=10; c4=jmbg3%10; jmbg3/=10; c3=jmbg3%10; jmbg3/=10; c2=jmbg3%10; jmbg3/=10;
    c1=jmbg3%10;
    c13 = 11-(7*(c1+c7)+6*(c2+c8)+5*(c3+c9)+4*(c4+c10)+3*(c5+c11)+2*(c6+c12))%11;
    if(c13==11) c13=0;
    jmbg+=c13;
}

int GradjaninBiH::DajMjesecRodjenja() const {
    long long int temp(jmbg);
    temp/=1000000000;
    return temp%100;
}

int GradjaninBiH::DajGodinuRodjenja() const {
    long long int temp(jmbg);
    temp/=1000000;
    int temp2=temp%1000;
    int temp3=temp2/100;
    if(temp3==9) return temp2+1000;
    return temp2+2000;
}

int GradjaninBiH::DajSifruRegije() const {
    long long int temp(jmbg);
    temp/=10000;
    return temp%100;
}

GradjaninBiH::Pol GradjaninBiH::DajPol() const {
    long long int temp(jmbg);
    temp/=10;
<a name="1"></a><font color="#00FF00"><a href="match907-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    int temp2=temp%1000;
    if(temp2&lt;500) return Musko;
    return Zensko;
}

int main ()
{
    GradjaninBiH *gradjanin[100];
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? " &lt;&lt; std::endl;
    int n, m;
</font>    std::cin &gt;&gt; n;
    for(int i(0); i&lt;n; i++) {
        try {
        std::cin.clear();
<a name="0"></a><font color="#FF0000"><a href="match907-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cin.ignore(10000, '\n');
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
        std::string ime_i_prezime;
        std::getline(std::cin, ime_i_prezime);
        std::cout &lt;&lt; "Unesite JMBG: " &lt;&lt; std::endl;
        long long int jmbg;
        std::cin &gt;&gt; jmbg;
</font>        gradjanin[i]=new GradjaninBiH(ime_i_prezime, jmbg);
        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; ime_i_prezime &lt;&lt; " rodjenog " &lt;&lt; gradjanin[i]-&gt;DajDanRodjenja()
<a name="2"></a><font color="#0000FF"><a href="match907-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                  &lt;&lt; "." &lt;&lt; gradjanin[i]-&gt;DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; gradjanin[i]-&gt;DajGodinuRodjenja()
                  &lt;&lt; " u regiji " &lt;&lt; gradjanin[i]-&gt;DajSifruRegije() &lt;&lt; ", ";
        if(gradjanin[i]-&gt;DajPol()==GradjaninBiH::Pol::Musko) std::cout &lt;&lt; "musko." &lt;&lt; std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match907-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        else std::cout &lt;&lt; "zensko." &lt;&lt; std::endl;
        }
        catch(std::logic_error a) {
            i--;
</font>            std::cout &lt;&lt; a.what() &lt;&lt; std::endl;
        }
    }
    std::cin.clear();
    std::cin.ignore(10000, '\n');
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
    std::cin &gt;&gt; m;
    for(int i(n); i&lt;m+n; i++) {
        try {
        std::cin.clear();
        std::cin.ignore(10000, '\n');
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
        std::string ime_i_prezime;
        std::getline(std::cin, ime_i_prezime);
        std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl;
        int d,m,g; char z1,z2;
        std::cin &gt;&gt; d &gt;&gt; z1 &gt;&gt; m &gt;&gt; z2 &gt;&gt; g;
        int sifra;
        std::cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; std::endl;
        std::cin &gt;&gt; sifra;
        std::cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; std::endl;
        std::cin &gt;&gt; z1;
        GradjaninBiH::Pol pol;
        if(z1=='M') pol=GradjaninBiH::Pol::Musko;
        else if(z1=='Z') pol=GradjaninBiH::Pol::Zensko;
        else {
            i--;
            std::cout &lt;&lt; "Neispravni podaci" &lt;&lt; std::endl;
            continue;
        }
        gradjanin[i]=new GradjaninBiH(ime_i_prezime, d,m,g, sifra, pol);
<a name="4"></a><font color="#FF00FF"><a href="match907-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; ime_i_prezime &lt;&lt; " JMBG: " &lt;&lt; gradjanin[i]-&gt;DajJMBG() &lt;&lt; "." &lt;&lt; std::endl;
        }
        catch(std::logic_error a) {
            i--;
</font>            std::cout &lt;&lt; a.what() &lt;&lt; std::endl;
        }
    }
	return 0;
}</pre>
</body>
</html>
