<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8118.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5475.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

class GradjaninBiH {
    std::string ime_i_prezime;
    long long int jmbg;
    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, kod;
    GradjaninBiH *prethodni;
    static GradjaninBiH *zadnji;
    static bool NeispravanDatum(int d, int m, int g);
    static void VecPostojiJMBG(long long int jmbg);
    static int c13(int d, int m, int g, int sifra, int kod);
    static long long int KreirajJMBG(int d, int m, int g, int sifra, int p);
public:
    enum Pol{Musko, Zensko};
    ~GradjaninBiH();
<a name="0"></a><font color="#FF0000"><a href="match402-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol);
    GradjaninBiH(const GradjaninBiH &amp;gr) = delete;
    GradjaninBiH operator =(const GradjaninBiH &amp;gr) = delete;
</font><a name="1"></a><font color="#00FF00"><a href="match402-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    std::string DajImeIPrezime() const { return ime_i_prezime; }
    long long int DajJMBG() const { return jmbg; }
    int DajDanRodjenja() const { return dan_rodjenja; }
    int DajMjesecRodjenja() const { return mjesec_rodjenja; }
    int DajGodinuRodjenja() const { return godina_rodjenja; }
    int DajSifruRegije() const { return sifra_regije; }
</font>/**/Pol DajPol() const { return Pol(kod &gt;= 500); }
    void PromijeniImeIPrezime(std::string novo_ime) { ime_i_prezime = novo_ime; }
};

GradjaninBiH *GradjaninBiH::zadnji(nullptr);
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) {
    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja, kod, sifra_regije;
    long long int temp(jmbg / 10);
    kod = temp % 1000; temp /= 1000;
    sifra_regije = temp % 100; temp /= 100;
    godina_rodjenja = temp % 100; temp /= 100;
<a name="4"></a><font color="#FF00FF"><a href="match402-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    if(temp % 10 == 0) godina_rodjenja += 2000;
    else godina_rodjenja += 1900;
    temp /= 10;
    mjesec_rodjenja = temp % 100; temp /= 100;
    dan_rodjenja = temp % 100; 
</font>    int c(c13(dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, kod));
    if(NeispravanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) || c == 10 || c != jmbg%10)
        throw std::logic_error("JMBG nije validan");
    VecPostojiJMBG(jmbg);
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    GradjaninBiH::jmbg = jmbg;
    GradjaninBiH::dan_rodjenja = dan_rodjenja; 
    GradjaninBiH::mjesec_rodjenja = mjesec_rodjenja; 
    GradjaninBiH::godina_rodjenja = godina_rodjenja;
    GradjaninBiH::sifra_regije = sifra_regije; 
    GradjaninBiH::kod = kod;
    if(zadnji == nullptr) prethodni = nullptr;
    else prethodni = zadnji;
    zadnji = this;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
int godina_rodjenja, int sifra_regije, Pol pol) {
<a name="2"></a><font color="#0000FF"><a href="match402-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    if(NeispravanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) || sifra_regije &lt; 0 || sifra_regije &gt; 99)
        throw std::logic_error("Neispravni podaci");
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    GradjaninBiH::dan_rodjenja = dan_rodjenja; 
    GradjaninBiH::mjesec_rodjenja = mjesec_rodjenja; 
    GradjaninBiH::godina_rodjenja = godina_rodjenja;
</font>    GradjaninBiH::sifra_regije = sifra_regije;
    GradjaninBiH::jmbg = KreirajJMBG(dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, pol);
    GradjaninBiH::kod = jmbg%10;
    if(zadnji == nullptr) prethodni = nullptr;
    else prethodni = zadnji;
    zadnji = this;
}
bool GradjaninBiH::NeispravanDatum(int d, int m, int g) {
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
    if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m-1])
        return true;
    return false;
}
int GradjaninBiH::c13(int d, int m, int g, int sifra, int kod) {
    int c1(d/10), c2(d%10), c3(m/10), c4(m%10), c5, c6, c7, c8, c9, c10, c11, c12;
    c5 = (g/100)%10; c6 = (g/10)%10; c7 = g%10;
    c8 = sifra/10; c9 = sifra%10;
    c10 = kod/100; c11 = (kod/10)%10; c12 = kod%10;
    int c = 11 - (7*(c1+c7) + 6*(c2+c8) + 5*(c3+c9) + 4*(c4+c10) + 3*(c5+c11) + 2*(c6+c12)) % 11;
    if(c == 11) c = 0;
    return c;
}
void GradjaninBiH::VecPostojiJMBG(long long int jmbg) {
    GradjaninBiH *pok(zadnji);
    while(pok != nullptr) {
        if(pok-&gt;jmbg == jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        pok = pok-&gt;prethodni;
    }
}
long long int GradjaninBiH::KreirajJMBG(int d, int m, int g, int sifra, int p) {
    GradjaninBiH *pok(zadnji);
    int kod(0), n(500);
    bool uvecaj_kod;
    if(p) { kod = 500; n = 1000; }
    while(kod &lt; n) {
        pok = zadnji; uvecaj_kod = false;
        while(pok != nullptr) {
            if(kod == pok-&gt;kod &amp;&amp; pok-&gt;dan_rodjenja == d &amp;&amp; pok-&gt;sifra_regije == sifra) {
                uvecaj_kod = true;
                break;
            } pok = pok-&gt;prethodni;
        }
        if(uvecaj_kod) kod++;
        else break;
    }
    long long int mj(m), gj(g);
    long long int b = d*100000000000 + mj*1000000000;
    return b + c13(d, m, g, sifra, kod) + kod*10 + sifra*10000 + (gj%1000)*1000000;
}
GradjaninBiH::~GradjaninBiH() {
    GradjaninBiH *pok(zadnji);
    if(zadnji == this) {
        zadnji = zadnji-&gt;prethodni;
        pok-&gt;prethodni = nullptr;
    }
    else {
        while(pok-&gt;prethodni != this) pok = pok-&gt;prethodni;
        pok-&gt;prethodni = prethodni;
    }
}
void Ispisi(const GradjaninBiH &amp;gr) {
    std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; gr.DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; gr.DajDanRodjenja() &lt;&lt; "." &lt;&lt; gr.DajMjesecRodjenja()
    &lt;&lt; "." &lt;&lt; gr.DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; gr.DajSifruRegije() &lt;&lt; ", ";
    if(gr.DajPol()) std::cout &lt;&lt; "zensko." &lt;&lt; std::endl;
    else std::cout &lt;&lt; "musko." &lt;&lt; std::endl;
} 
int main ()
{
    try {
    int n1, n2;
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? " &lt;&lt; std::endl;
    std::cin &gt;&gt; n1; std::cin.ignore(1000, '\n');
<a name="5"></a><font color="#FF0000"><a href="match402-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    for(int i=0; i&lt;n1; i++) {
        try {
        std::string ime;
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
        std::getline(std::cin, ime); 
</font>        long long int jmbg;
        std::cout &lt;&lt; "Unesite JMBG: " &lt;&lt; std::endl;
        std::cin &gt;&gt; jmbg;
        std::cin.ignore(1000, '\n');
        GradjaninBiH gr(ime, jmbg);
        Ispisi(gr);
        }
<a name="3"></a><font color="#00FFFF"><a href="match402-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        catch(std::logic_error e) {
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
        }
    }
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
</font>    std::cin &gt;&gt; n2; std::cin.ignore(1000, '\n');
<a name="6"></a><font color="#00FF00"><a href="match402-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    for(int i=0; i&lt;n2; i++) {
        try {
        std::string ime;
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
        std::getline(std::cin, ime);
</font>        std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl;
        int d, m, g;
        char znak;
        std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g;
        std::cin.ignore(1000, '\n');
        int sifra_regije;
        std::cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; std::endl;
        std::cin &gt;&gt; sifra_regije; 
        char z; GradjaninBiH::Pol pol;
        std::cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; std::endl;
        std::cin &gt;&gt; z;
        if(z == 'M') pol = GradjaninBiH::Musko;
        else pol = GradjaninBiH::Zensko;
        std::cin.ignore(1000, '\n');
        GradjaninBiH gr(ime, d, m, g, sifra_regije, pol);
        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; gr.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; gr.DajJMBG() 
        &lt;&lt; "." &lt;&lt; std::endl;
        }
        catch(std::logic_error e) {
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
        }
    }
    } catch(std::logic_error e) { std::cout &lt;&lt; e.what() &lt;&lt; std::endl; }
    catch(...) {}
	return 0;
}</pre>
</body>
</html>
