<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4682.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4682.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

struct Datum{
    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja;
    Datum(int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja);
    Datum(long long int jmbg);
};

class GradjaninBiH{
    std::string ime_i_prezime;
    long long int JMBG[13];
    int kod_osobe;
    static GradjaninBiH *prvi;
    static GradjaninBiH *zadnji;
    int regija, pol,rezerkod,kontkod_osobe;
    Datum datum;
    GradjaninBiH *prethodni;
    public:
    
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime() const{return ime_i_prezime;}
    long long int DajJMBG() const;
    int DajDanRodjenja() const{return datum.dan_rodjenja;}
    int DajMjesecRodjenja() const{return datum.mjesec_rodjenja;}
    int DajGodinuRodjenja() const{return datum.godina_rodjenja;}
    int DajSifruRegije() const{return regija;}
    Pol DajPol() const{return Pol(pol);}
    void PromijeniImeIPrezime(std::string novo_ime){ime_i_prezime = novo_ime;}
    ~GradjaninBiH();
};

int main ()
{
    
    GradjaninBiH *niz[100]{nullptr};
    int j(0);
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    int n;
    std::cin &gt;&gt;n;
    for(int i(0); i &lt; n; i++){
        try{
<a name="0"></a><font color="#FF0000"><a href="match583-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cin.ignore(10000,'\n');
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::string ime;
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
        long long int JMBG;
        std::cin&gt;&gt;JMBG;
</font>        
<a name="3"></a><font color="#00FFFF"><a href="match583-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        niz[j] = new GradjaninBiH(ime,JMBG);
        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[j]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;niz[j]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;niz[j]-&gt;DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;niz[j]-&gt;DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;niz[j]-&gt;DajSifruRegije()&lt;&lt;",";
</font>        switch(niz[j]-&gt;DajPol()){
            case 0: std::cout&lt;&lt;" musko."&lt;&lt;std::endl;
            break;
            case 1: std::cout&lt;&lt;" zensko."&lt;&lt;std::endl;
            break;
        }
        j++;
        }catch(std::logic_error error){
            std::cout&lt;&lt; error.what()&lt;&lt;std::endl;
            i--;
        }
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
      for(int i(0); i &lt; n; i++){
          try{
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::cin.ignore(10000,'\n');
        std::string ime;
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
        char znak;
        int d,m,g;
        std::cin&gt;&gt;d&gt;&gt;znak&gt;&gt;m&gt;&gt;znak&gt;&gt;g;
        std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
        int sifra;
        GradjaninBiH::Pol pol;
        std::cin&gt;&gt;sifra;
        std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
        std::cin.ignore(10000,'\n');
        std::cin&gt;&gt;znak;
        if(znak == 'M')
            pol = GradjaninBiH::Pol(0);
        else pol = GradjaninBiH::Pol(1);
<a name="1"></a><font color="#00FF00"><a href="match583-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        niz[j] = new GradjaninBiH(ime,d,m,g,sifra,pol);
        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[j]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[j]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
</font>        j++;
      }catch(std::logic_error error){
            std::cout&lt;&lt; error.what()&lt;&lt;std::endl;
            i--;
        }
      }
    
/*for(int i(100); i &gt;-1; i--)
    delete niz[i];*/

    return 0;
}
Datum::Datum(int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja){
    int dani[12]{31,28,31,30,31,30,31,31,30,31,30,31};
    if((godina_rodjenja%4== 0 &amp;&amp; godina_rodjenja%100!= 0) || godina_rodjenja%400 == 0) dani[1]++;
    if(godina_rodjenja &lt; 1 || dan_rodjenja &lt; 1 || dan_rodjenja &gt; dani[mjesec_rodjenja-1] || mjesec_rodjenja &lt; 1 || mjesec_rodjenja &gt; 12)
        throw std::logic_error("Neispravni podaci");
    Datum::dan_rodjenja = dan_rodjenja, Datum::mjesec_rodjenja = mjesec_rodjenja, Datum::godina_rodjenja = godina_rodjenja;
}
Datum::Datum(long long int jmbg){
    long long int a(1000000000000),b(1000000);
    try{
    if ((jmbg / (a / (b/10)) % 10)*10 + ((jmbg / (a / (b))) % 10) &gt; 17)
    *this = Datum(((jmbg/a)%10)*10+(jmbg/(a/10))%10,((jmbg/(a/100))%10)*10+(jmbg/(a/1000))%10,1000 + ((jmbg/(a/(b/100)))%10)*100+((jmbg/(a/(b/10)))%10)*10+(jmbg/(a/(b)))%10);
    else
    *this = Datum(((jmbg/a)%10)*10+(jmbg/(a/10))%10,((jmbg/(a/100))%10)*10+(jmbg/(a/1000))%10,2000 + ((jmbg/(a/(b/100)))%10)*100+((jmbg/(a/(b/10)))%10)*10+(jmbg/(a/(b)))%10);
    }catch(...){
        throw std::logic_error("JMBG nije validan");
    }
}
GradjaninBiH* GradjaninBiH::prvi = nullptr;
GradjaninBiH* GradjaninBiH::zadnji = nullptr;
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) : ime_i_prezime(ime_i_prezime),datum(jmbg),prethodni(nullptr){
    static GradjaninBiH *pred;
    if(!prvi) prvi = this;
    else prethodni = pred;
    pred = this;
    GradjaninBiH *privremeni(nullptr);
    privremeni = this;
    int i(0);
    long long int temp(jmbg);
    while(temp){
        JMBG[i] = temp%10;
        temp/=10;
        i++;
    }
    while(privremeni != nullptr &amp;&amp; privremeni-&gt;prethodni != this){
        if(privremeni != this &amp;&amp; privremeni-&gt;DajJMBG() == jmbg)
            throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        privremeni = privremeni-&gt;prethodni;
    }
    std::reverse(std::begin(JMBG),std::end(JMBG));
    regija = JMBG[7]*10 + JMBG[8];
    if(JMBG[9] &lt; 5)
        pol = 0;
    else pol = 1;
    
    kontkod_osobe = 11-(7*(JMBG[0] + JMBG[6]) + 6*(JMBG[1]+JMBG[7]) + 5*(JMBG[2]+JMBG[8]) + 4*(JMBG[3]+JMBG[9]) + 3*(JMBG[4]+JMBG[10]) + 2*(JMBG[5]+JMBG[11]))%11;
    rezerkod = JMBG[9]*100 + JMBG[10]*10 + JMBG[11];
    if(kontkod_osobe == 10)
        throw std::logic_error("JMBG nije validan");
    if(kontkod_osobe == 11)
        kontkod_osobe = 0;
        
    zadnji = this;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol pol)
: ime_i_prezime(ime_i_prezime),regija(sifra_regije),pol(pol),datum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja),prethodni(nullptr)
{
    if(regija &lt; 0 || regija &gt; 99)
        throw std::logic_error("Neispravni podaci");
    static GradjaninBiH *pred;
    if(!prvi) prvi = this;
    else prethodni = pred;
    pred = this;
    GradjaninBiH *privremeni = this;
    if(pol == 0)
        kod_osobe = 0;
    else if(pol == 1)
        kod_osobe=500;
    while(privremeni-&gt;prethodni != nullptr &amp;&amp; privremeni-&gt;prethodni != this){
        if(privremeni != this &amp;&amp; pol == privremeni-&gt;pol &amp;&amp; regija == privremeni-&gt;regija &amp;&amp; datum.dan_rodjenja == privremeni-&gt;datum.dan_rodjenja &amp;&amp; datum.mjesec_rodjenja == privremeni-&gt;datum.mjesec_rodjenja &amp;&amp; datum.godina_rodjenja == privremeni-&gt;datum.godina_rodjenja){
            if(kod_osobe == privremeni-&gt;kod_osobe)
                kod_osobe++;
            if(pol == 0 &amp;&amp; kod_osobe == 500)
                kod_osobe = 0;
            else if (pol == 1 &amp;&amp; kod_osobe == 1000)
                kod_osobe = 500;
        }
        privremeni = privremeni-&gt;prethodni;
    }
    //radim ovaj dio u 1 ujutro, mrsko mi išta pametnije smišljat, nadam se da neće sa ovime biti problema 
    JMBG[0] = (datum.dan_rodjenja/10)%10,JMBG[1] = dan_rodjenja%10,JMBG[2] = (datum.mjesec_rodjenja/10)%10,JMBG[3] = datum.mjesec_rodjenja%10,JMBG[4] = (datum.godina_rodjenja/100)%10,JMBG[5] = (datum.godina_rodjenja/10)%10,JMBG[6] = datum.godina_rodjenja%10,JMBG[7] = (regija/10)%10,JMBG[8] = regija%10;
<a name="2"></a><font color="#0000FF"><a href="match583-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    JMBG[9] = (kod_osobe/100)%10,JMBG[10] = (kod_osobe/10)%10,JMBG[11] = kod_osobe%10;
    JMBG[12] = 11-(7*(JMBG[0] + JMBG[6]) + 6*(JMBG[1]+JMBG[7]) + 5*(JMBG[2]+JMBG[8]) + 4*(JMBG[3]+JMBG[9]) + 3*(JMBG[4]+JMBG[10]) + 2*(JMBG[5]+JMBG[11]))%11;
</font><a name="4"></a><font color="#FF00FF"><a href="match583-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    if(JMBG[12] == 11)
        JMBG[12] = 0;
    if(JMBG[12] == 10){
</font>        kod_osobe++;
        JMBG[12] = 11-(7*(JMBG[0] + JMBG[6]) + 6*(JMBG[1]+JMBG[7]) + 5*(JMBG[2]+JMBG[8]) + 4*(JMBG[3]+JMBG[9]) + 3*(JMBG[4]+JMBG[10]) + 2*(JMBG[5]+JMBG[11]))%11;
    }
    zadnji = this;
}
long long int GradjaninBiH::DajJMBG() const{
    long long int JMBG(0),deset(1);
    for(int i(12); i &gt; -1; i--)
        JMBG += GradjaninBiH::JMBG[i]*deset, deset *= 10;
    return JMBG;
}
GradjaninBiH::~GradjaninBiH(){
    GradjaninBiH *privremeni(zadnji);
    if(this != zadnji)
    while(privremeni-&gt;prethodni != this){
        privremeni = privremeni-&gt;prethodni;
    }
    else zadnji = this-&gt;prethodni;

    privremeni-&gt;prethodni = this-&gt;prethodni;
}</pre>
</body>
</html>
