<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5358.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5358.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

class GradjaninBiH{
    public:enum Pol {Musko, Zensko};
    private:
    static  GradjaninBiH* zadnji;
    std::string ime_prezime;
    long long int JMBG;
    Pol pol;
    GradjaninBiH* prethodni=nullptr;
    public:
explicit GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
 int godina_rodjenja, int sifra_regije, Pol pol);
 GradjaninBiH(const GradjaninBiH &amp;g)=delete;
std::string DajImeIPrezime() const;
~GradjaninBiH();
long long int DajJMBG() const;
int DajDanRodjenja() const;
int DajMjesecRodjenja() const;
int DajGodinuRodjenja() const;
int DajSifruRegije() const;
Pol DajPol() const;
void PromijeniImeIPrezime(std::string novo_ime);

};
bool ProvjeriDatum(int d, int m, int g) {
    int broj_dana[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
    if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m - 1])
        throw "Neispravan datum!";
    return true;
}
int UstimaniMrtvaci(long long int a,int n){
    int c;
    for(int i=0;i&lt;n;i++){
        c=a%10;
        a/=10;
    }
    return c;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg){
    int dan=UstimaniMrtvaci(jmbg,13)*10+UstimaniMrtvaci(jmbg,12);
    int mjesec=UstimaniMrtvaci(jmbg,11)*10+UstimaniMrtvaci(jmbg,10);
    int god= UstimaniMrtvaci(jmbg,9)*100+UstimaniMrtvaci(jmbg,8)*10+UstimaniMrtvaci(jmbg,7);
    if(god&lt;18)god+=2000;
    else god+=1000;
    try{ProvjeriDatum(dan,mjesec,god);}
    catch(...){
        throw std::logic_error("JMBG nije validan");
    }
    int c=11-(7* (UstimaniMrtvaci(jmbg,13) +UstimaniMrtvaci(jmbg,7) )+6* (UstimaniMrtvaci(jmbg,12) + UstimaniMrtvaci(jmbg,6) )+5* (UstimaniMrtvaci(jmbg,11) +UstimaniMrtvaci(jmbg,5) )+4* (UstimaniMrtvaci(jmbg,10) +UstimaniMrtvaci(jmbg,4) )+3* (UstimaniMrtvaci(jmbg,9) +UstimaniMrtvaci(jmbg,3) )+2* (UstimaniMrtvaci(jmbg,8) +UstimaniMrtvaci(jmbg,2) ))%11;
    if(c==10)throw std::logic_error("JMBG nije validan");
    if(c==11)c=0;
    for(auto it=zadnji;it!=nullptr;it=it-&gt;prethodni){
        if(it-&gt;JMBG==jmbg)throw std::domain_error("Vec postoji gradjanin sa istim JMBG");
    }
    if(zadnji==nullptr){
        zadnji=this;
    }
    else{
        this-&gt;prethodni=zadnji;
        zadnji=this;
    }
    //std::cout&lt;&lt;zadnji-&gt;DajImeIPrezime();
    ime_prezime=ime_i_prezime;
    JMBG=jmbg;
    if(UstimaniMrtvaci(JMBG,4)*100+UstimaniMrtvaci(JMBG,3)*10+UstimaniMrtvaci(JMBG,2)&lt;500)pol=Pol::Musko;
    else pol=Pol::Zensko;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
 int godina_rodjenja, int sifra_regije, Pol pol){
    ime_prezime=ime_i_prezime;
    long long int jmbg=0;
    try{
        if(ProvjeriDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)){
            jmbg+=dan_rodjenja*pow(10,11);
            jmbg+=mjesec_rodjenja*pow(10,9);
            if(godina_rodjenja&gt;2000)godina_rodjenja-=2000;
            else godina_rodjenja-=1000;
            jmbg+=godina_rodjenja*pow(10,6);
        }
    }
    catch(...){
        throw std::logic_error("Neispravni podaci");
    }
    if(sifra_regije&gt;0 &amp;&amp; sifra_regije&lt;100){
        jmbg+=sifra_regije*pow(10,4);
    }
    else throw std::logic_error("Neispravni podaci");
    if(pol==Pol::Musko){
        int ss=0;
        PON1:
        jmbg+=ss*10;
        int c=11-(7* (UstimaniMrtvaci(jmbg,13) +UstimaniMrtvaci(jmbg,7) )+6* (UstimaniMrtvaci(jmbg,12) + UstimaniMrtvaci(jmbg,6) )+5* (UstimaniMrtvaci(jmbg,11) +UstimaniMrtvaci(jmbg,5) )+4* (UstimaniMrtvaci(jmbg,10) +UstimaniMrtvaci(jmbg,4) )+3* (UstimaniMrtvaci(jmbg,9) +UstimaniMrtvaci(jmbg,3) )+2* (UstimaniMrtvaci(jmbg,8) +UstimaniMrtvaci(jmbg,2) ))%11;
    if(c==10)throw std::logic_error("JMBG nije validan");
    if(c==11)c=0;
    jmbg+=c;
    try{
        for(auto it=zadnji;it!=nullptr;it=it-&gt;prethodni){
        if(it-&gt;JMBG==jmbg)throw std::domain_error("Vec postoji gradjanin sa istim JMBG");
    }
    }
    catch(...){
        ss++;
        goto PON1;
    }
    }
    else{
       int ss=500;
        PON2:
        jmbg+=ss*10;
        int c=11-(7* (UstimaniMrtvaci(jmbg,13) +UstimaniMrtvaci(jmbg,7) )+6* (UstimaniMrtvaci(jmbg,12) + UstimaniMrtvaci(jmbg,6) )+5* (UstimaniMrtvaci(jmbg,11) +UstimaniMrtvaci(jmbg,5) )+4* (UstimaniMrtvaci(jmbg,10) +UstimaniMrtvaci(jmbg,4) )+3* (UstimaniMrtvaci(jmbg,9) +UstimaniMrtvaci(jmbg,3) )+2* (UstimaniMrtvaci(jmbg,8) +UstimaniMrtvaci(jmbg,2) ))%11;
    if(c==10)throw std::logic_error("JMBG nije validan");
    if(c==11)c=0;
    jmbg+=c;
    try{
        for(auto it=zadnji;it!=nullptr;it=it-&gt;prethodni){
        if(it-&gt;JMBG==jmbg)throw std::domain_error("Vec postoji gradjanin sa istim JMBG");
    }
    }
    catch(...){
        ss++;
        goto PON2;
    }
    }
    if(zadnji==nullptr){
        zadnji=this;
    }
    else{
        this-&gt;prethodni=zadnji;
        zadnji=this;
    }
    //std::cout&lt;&lt;zadnji-&gt;DajImeIPrezime();
    ime_prezime=ime_i_prezime;
    JMBG=jmbg;
    //std::cout&lt;&lt;jmbg;
 }
 std::string GradjaninBiH::DajImeIPrezime() const{
    return ime_prezime;
}
GradjaninBiH::~GradjaninBiH(){
    auto it=zadnji;
    while(it!=this ){
        it=it-&gt;prethodni;
    }
    it-&gt;prethodni=this-&gt;prethodni;
}
long long int GradjaninBiH::DajJMBG() const{
    return JMBG;
}
int GradjaninBiH::DajDanRodjenja() const{
    return UstimaniMrtvaci(JMBG,13)*10+UstimaniMrtvaci(JMBG,12);
}
int GradjaninBiH::DajMjesecRodjenja() const{
    return UstimaniMrtvaci(JMBG,11)*10+UstimaniMrtvaci(JMBG,10);
}
int GradjaninBiH::DajGodinuRodjenja() const{
    int god= UstimaniMrtvaci(JMBG,9)*100+UstimaniMrtvaci(JMBG,8)*10+UstimaniMrtvaci(JMBG,7);
    if(god&lt;18)god+=2000;
    else god+=1000;
    return god;
}
int GradjaninBiH::DajSifruRegije() const{
    return UstimaniMrtvaci(JMBG,6)*10+UstimaniMrtvaci(JMBG,5);
}
GradjaninBiH::Pol GradjaninBiH::DajPol() const{
    return pol;
}
void GradjaninBiH::PromijeniImeIPrezime(std::string novo_ime){
    ime_prezime=novo_ime;
}
GradjaninBiH *GradjaninBiH::zadnji=nullptr;
int main ()
{
	std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
	int n;
	std::cin&gt;&gt;n;
	for(int i=0;i&lt;n;i++){
	    std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
	    std::string ime;
<a name="2"></a><font color="#0000FF"><a href="match504-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

	    std::cin.clear();
	    std::cin.ignore(100000,'\n');
	    std::getline(std::cin,ime);
	    std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
</font>	    long long int jmbg;
	    std::cin&gt;&gt;jmbg;
	    try{
	    GradjaninBiH a(ime,jmbg);
	    std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;a.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;a.DajDanRodjenja()&lt;&lt;"."&lt;&lt;a.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;a.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;a.DajSifruRegije()&lt;&lt;", ";
	    if(a.DajPol()==GradjaninBiH::Pol::Musko)std::cout&lt;&lt;"musko."&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match504-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

	    else std::cout&lt;&lt;"zensko."&lt;&lt;std::endl;
	    }
	    catch(std::logic_error e){
	        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
</font>	        i--;
	    }
	}
	std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
	int m;
	std::cin&gt;&gt;m;
	for(int i=0;i&lt;m;i++){
	    std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
	    std::string ime;
<a name="1"></a><font color="#00FF00"><a href="match504-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

	    std::cin.clear();
	    std::cin.ignore(100000,'\n');
	    std::getline(std::cin,ime);
	    std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
	    int dan,mjesec,godina;
</font>	    char c1,c2;
	    std::cin&gt;&gt;dan&gt;&gt;c1&gt;&gt;mjesec&gt;&gt;c2&gt;&gt;godina;
	    std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
	    int sr;
	    std::cin&gt;&gt;sr;
	    std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
	    char p;
	    std::cin&gt;&gt;p;
	    try{
<a name="0"></a><font color="#FF0000"><a href="match504-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

	        if(p=='M'){
	        GradjaninBiH b(ime,dan,mjesec,godina,sr,GradjaninBiH::Pol::Musko);
	        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;b.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;b.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
	        }
	        else{
	        GradjaninBiH b(ime,dan,mjesec,godina,sr,GradjaninBiH::Pol::Zensko);
	        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;b.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;b.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
	        }
	    }
	    catch(std::logic_error e){
	        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
</font>	        i--;
	    }
	}
    return 0;
}</pre>
</body>
</html>
