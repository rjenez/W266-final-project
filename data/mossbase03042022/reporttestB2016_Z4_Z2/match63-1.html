<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student2675.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5470.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match63-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_21.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

bool dat(int d,int  m, int g)
{
    if(m&gt;12 || m&lt;=0 || g&lt;1917 || d&lt;=0 || g&gt;2017) return false;
    if((m==1 || m==3 || m==5 || m==7 || m==8|| m==10|| m==12)&amp;&amp;d&gt;31) return false;
    if((m==4 || m==6 || m==9 || m==11)&amp;&amp;d&gt;30) return false;
    if((g%400==0 || (g%4==0 &amp;&amp; g%100!=0))&amp;&amp;d&gt;29&amp;&amp;m==2) return false;
    if(d&gt;28&amp;&amp;m==2&amp;&amp;!(g%400==0 || (g%4==0 &amp;&amp; g%100!=0))) return false;
    return true;
}

bool IstiNiz(int *p,int *q,int l)
{
    for(int i=0;i&lt;l;i++)
        if(p[i]!=q[i]) return false;
    return true;
}

class GradjaninBiH
{
    std::string ip;
    int c[13];
    GradjaninBiH* pok;
    static GradjaninBiH *prosli;
public:
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg)
    {
        ip=ime_i_prezime; 
        for(int i=12;i&gt;=0;i--)
        {
            c[i]=jmbg%10;
            jmbg/=10;
        }
        if(jmbg) std::logic_error("JMBG nije validan");
        int b=1000;
        if(c[4]==0 &amp;&amp; (c[5]==0 || (c[5]==1 &amp;&amp; c[6]&lt;=7))) b+=1000;
        int a=11-(7*(c[0]+c[6])+6*(c[1]+c[7])+5*(c[2]+c[8])+4*(c[3]+c[9])+3*(c[4]+c[10])+2*(c[5]+c[11]))%11;
</font><a name="1"></a><font color="#00FF00"><a href="match63-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_24.gif"/></a>

        if(!dat(c[0]*10+c[1],c[2]*10+c[3],b+c[4]*100+c[5]*10+c[6])||(a!=c[12] &amp;&amp; !(c[12]==0 &amp;&amp; a==11))) throw std::logic_error("JMBG nije validan");
        for(auto pom=prosli;pom;pom=pom-&gt;pok) if(IstiNiz(c,pom-&gt;c,13)) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        pok=prosli;
        prosli=this;
    }
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol)
    {
        if(!dat(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)||sifra_regije&lt;0||sifra_regije&gt;99 ) throw std::logic_error("Neispravni podaci");
        ip=ime_i_prezime; 
        c[0]=dan_rodjenja/10;
        c[1]=dan_rodjenja%10;
        c[2]=mjesec_rodjenja/10;
        c[3]=mjesec_rodjenja%10;
        c[4]=(godina_rodjenja/100)%10;
        c[5]=(godina_rodjenja/10)%10;
        c[6]=godina_rodjenja%10;
        c[7]=sifra_regije/10;
        c[8]=sifra_regije%10;
        if(int(pol)) c[9]=5;
        else c[9]=0;
        c[10]=0,c[11]=0;
        for(auto pom=prosli;pom;pom=pom-&gt;pok)
        {
            if(IstiNiz(c,pom-&gt;c,9)) c[11]++;
            if(c[11]&gt;=10) c[11]=0,c[10]++;
            if(c[10]&gt;=10) c[10]=0,c[9]++;
        }
        if(11-(7*(c[0]+c[6])+6*(c[1]+c[7])+5*(c[2]+c[8])+4*(c[3]+c[9])+3*(c[4]+c[10])+2*(c[5]+c[11]))%11==10)
</font><a name="3"></a><font color="#00FFFF"><a href="match63-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

        {
            c[11]++;
            if(c[11]&gt;=10) c[11]=0,c[10]++;
            if(c[10]&gt;=10) c[10]=0,c[9]++;
        }
        c[12]=11-(7*(c[0]+c[6])+6*(c[1]+c[7])+5*(c[2]+c[8])+4*(c[3]+c[9])+3*(c[4]+c[10])+2*(c[5]+c[11]))%11;
</font><a name="0"></a><font color="#FF0000"><a href="match63-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_40.gif"/></a>

        if(c[12]==11) c[12]=0;
        pok=prosli;
        prosli=this;
    }
    ~GradjaninBiH()
    {
        if(this==prosli) prosli=this-&gt;pok;
        else 
        {
            GradjaninBiH *pom=prosli;
            for(;pom-&gt;pok==this;pom=pom-&gt;pok);
            pom-&gt;pok=this-&gt;pok;
        }
    }
    std::string DajImeIPrezime() const {return ip;}
    long long int DajJMBG() const
    {
        long long int br=0;
        for(int i=0;i&lt;13;i++)
        {
            br+=c[i];
            if(i!=12) br*=10;
        }
        return br;
    }
    int DajDanRodjenja() const  { return 10*c[0]+c[1];}
    int DajMjesecRodjenja() const{ return 10*c[2]+c[3];}
    int DajGodinuRodjenja() const
    {
        if(c[4]==0 &amp;&amp; (c[5]==0 || (c[5]==1 &amp;&amp; c[6]&lt;=7)))
        return 2000+100*c[4]+10*c[5]+c[6];
        return 1000+100*c[4]+10*c[5]+c[6];
    }
    int DajSifruRegije() const{    return c[7]*10+c[8];}
    Pol DajPol() const { return Pol(c[9]&gt;=5);}
    void PromijeniImeIPrezime(std::string novo_ime){ip=novo_ime;}
};
GradjaninBiH *GradjaninBiH::prosli=nullptr;
int main ()
{
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? \n";
    int n;
    std::cin &gt;&gt;n;
    for(int i=0;i&lt;n;i++)
    {
        try
        {
            std::string ip;
            std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): \n";
            std::cin &gt;&gt; std::ws;
            std::getline(std::cin,ip);
            long long int br;
            std::cout &lt;&lt;"Unesite JMBG: \n";
            std::cin &gt;&gt; br;
            GradjaninBiH gr(ip,br);
            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; gr.DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; gr.DajDanRodjenja() &lt;&lt; "." &lt;&lt; gr.DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; gr.DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; gr.DajSifruRegije() &lt;&lt; ", ";
            if(gr.DajPol()) std::cout &lt;&lt; "zensko.\n";
            else std::cout &lt;&lt; "musko.\n";
        }
        catch(std::logic_error x)
        {
            std::cout &lt;&lt; x.what()&lt;&lt;"\n";
            i--;
        }
    }
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? \n";
    std::cin &gt;&gt; n;
    for(int i=0;i&lt;n;i++)
    {
        try
        {
            char p;
            std::string ip;
            std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): \n";
            if(p=std::cin.peek(),p==' '|| p=='\n') std::cin &gt;&gt; std::ws;
            std::getline(std::cin,ip);
            int d,m,g,sr;
            std::cout &lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): \n";
            std::cin &gt;&gt; d &gt;&gt; p &gt;&gt; m &gt;&gt;p&gt;&gt; g;
            std::cout &lt;&lt; "Unesite sifru regije: \n";
            std::cin &gt;&gt; sr;
            int a;
            std::cout &lt;&lt; "Unesite M za musko, Z za zensko: \n";
            p=getchar();
            p=getchar();
            if(p=='M' || p=='m') a=0;
            else a=1;
            GradjaninBiH gr(ip,d,m,g,sr,GradjaninBiH::Pol(a));
            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; gr.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; gr.DajJMBG() &lt;&lt;".\n";
        }
        catch(std::logic_error x)
        {
            std::cout &lt;&lt; x.what() &lt;&lt;"\n";
</font>            i--;
        }
    }
	return 0;
}</pre>
</body>
</html>
