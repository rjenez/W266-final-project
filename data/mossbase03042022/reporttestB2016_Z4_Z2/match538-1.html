<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4495.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8755.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
class GradjaninBiH
{
    std::string ime_i_prezime;
    int jmbg_niz[13];
    GradjaninBiH *prethodni;
    static GradjaninBiH *posljednji;
    bool NeispravanDatum(const int &amp;d, const int &amp;m, const int &amp;g);
    public:
        enum Pol {Musko, Zensko};
        GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
        GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
        ~GradjaninBiH()
        {
            if(this==posljednji)
            {
                auto *temp(posljednji-&gt;prethodni);
                if(temp==posljednji || temp==nullptr) posljednji=nullptr;
                else
                {
                    posljednji=nullptr;
                    posljednji=temp;
                }
            }
            else
            {
                for(auto pok=posljednji;pok!=nullptr; pok=pok-&gt;prethodni)
                if(this==pok-&gt;prethodni)
                {
                    auto*temp(pok-&gt;prethodni-&gt;prethodni
                    );
                    if(temp==nullptr || temp==pok-&gt;prethodni) pok-&gt;prethodni=nullptr;
                    else
                    {
                        pok-&gt;prethodni=nullptr;
                        pok-&gt;prethodni=temp;
                    }
                }
            }
        }
        std::string DajImeIPrezime() const{return ime_i_prezime;}
        long long int DajJMBG() const{long long int broj(0), n(1); for(int i=12; i&gt;=0; i--){broj+=(static_cast&lt;long long int&gt;(jmbg_niz[i]))*n; n*=10;} return broj;}
<a name="1"></a><font color="#00FF00"><a href="match538-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        int DajDanRodjenja() const{return jmbg_niz[0]*10+jmbg_niz[1];}
        int DajMjesecRodjenja() const{return jmbg_niz[2]*10+jmbg_niz[3];}
        int DajGodinuRodjenja() const{if(jmbg_niz[4]==0) return 2000+jmbg_niz[4]*100+jmbg_niz[5]*10+jmbg_niz[6]; else return 1000+jmbg_niz[4]*100+jmbg_niz[5]*10+jmbg_niz[6];};
</font><a name="2"></a><font color="#0000FF"><a href="match538-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        int DajSifruRegije() const{return jmbg_niz[7]*10+jmbg_niz[8];}
        Pol DajPol() const{if(jmbg_niz[9]&lt;5) return Pol::Musko; else return Pol::Zensko;};
</font>        void PromijeniImeIPrezime(std::string novo_ime){ime_i_prezime=novo_ime;}
};
GradjaninBiH *GradjaninBiH::posljednji(nullptr);

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg)
{
    if(jmbg&lt;static_cast&lt;long long int&gt;(10000000000) || (jmbg&gt;static_cast&lt;long long int&gt;(912999999999) &amp;&amp; jmbg&lt;static_cast&lt;long long int&gt;(1000000000000)) || jmbg&gt;static_cast&lt;long long int&gt;(3112999999999)) throw std::logic_error("JMBG nije validan");
    int niz[13]={};
    for(int i=12; jmbg!=0; i--, jmbg/=10)   niz[i]=jmbg%10;
    int KontrolnaCifra(0), k(7);
    for(int i=0; i&lt;6; i++)  KontrolnaCifra+=(k--)*(niz[i]+niz[i+6]);
    KontrolnaCifra=11-(KontrolnaCifra%11);
    if(KontrolnaCifra==11)  KontrolnaCifra=0;
    if(NeispravanDatum(niz[0]*10+niz[1],niz[2]*10+niz[3],niz[4]*100+niz[5]*10+niz[6]) || niz[12]!=KontrolnaCifra) throw std::logic_error("JMBG nije validan");
    for(auto pok=posljednji; pok!=nullptr; pok=pok-&gt;prethodni)
    {
        if(prethodni==pok) break;
        if(std::equal(std::begin(pok-&gt;jmbg_niz), std::end(pok-&gt;jmbg_niz), std::begin(niz))) 
        throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
    }
    this-&gt;ime_i_prezime=ime_i_prezime;
    for(int i=0; i&lt;12; i++)
    (this-&gt;jmbg_niz[i])=niz[i];
    prethodni=posljednji;
    posljednji=this;
}
<a name="3"></a><font color="#00FFFF"><a href="match538-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol)
    {
        if(NeispravanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) || sifra_regije&lt;0 || sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
</font>        else
        {
<a name="0"></a><font color="#FF0000"><a href="match538-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

            jmbg_niz[0]=dan_rodjenja/10; jmbg_niz[1]=dan_rodjenja%10;
            jmbg_niz[2]=mjesec_rodjenja/10; jmbg_niz[3]=mjesec_rodjenja%10;
            jmbg_niz[4]=(godina_rodjenja%1000)/100; jmbg_niz[5]=(godina_rodjenja%100)/10; jmbg_niz[6]=godina_rodjenja%10;
            jmbg_niz[7]=sifra_regije/10; jmbg_niz[8]=sifra_regije%10;
</font>            int brojac(0);
            for(auto pok=posljednji; pok!=nullptr; pok=pok-&gt;prethodni)
            {
                if(prethodni==pok) break;
                bool NijePronadjen(false);
                for(int i=0; i&lt;8; i++)
                    if(pok-&gt;jmbg_niz[i]!=jmbg_niz[i])   {NijePronadjen=true; break;}
                if(NijePronadjen || pol==Pol::Musko &amp;&amp; jmbg_niz[9]&gt;4 || pol==Pol::Zensko &amp;&amp; jmbg_niz[9]&lt;5)  continue;
                else brojac++;
            }
            if(pol==Pol::Zensko) brojac+=500;
            jmbg_niz[9]=brojac/100; jmbg_niz[10]=(brojac%100)/10; jmbg_niz[11]=brojac%10; //&lt;--------------------------
            jmbg_niz[12]=0;
            int k(7);
            for(int i=0; i&lt;6; i++) jmbg_niz[12]+=(k--)*(jmbg_niz[i]+jmbg_niz[i+6]);
            jmbg_niz[12]=11-(jmbg_niz[12]%11);
            if(jmbg_niz[12]==10) throw std::logic_error("JMBG nije validan");
            else if(jmbg_niz[12]==11) jmbg_niz[12]=0;//&lt;------------------------- FORMULA
        }
    }
bool GradjaninBiH::NeispravanDatum(const int &amp;d, const int &amp;m, const int &amp;g)
{
    int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
    if(g%4==0 &amp;&amp; g%100!=0 || g%400==0)   broj_dana[1]++;
    if(g&lt;1 || d&lt;1 || m&lt;1 || m&gt;12 || d&gt;broj_dana[m-1])   return true;
    return false;
}
/*long long int DajJMBG()
{
    long long int broj, n(1);
    for(int i=12; i&gt;=0;i--)
    {
        broj+=jmbg_niz[i]*n;
        n*=10;
    }
    return broj;
}*/
int main ()
{
    int n;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
    GradjaninBiH *pok_niz[100];
    for(int i=0; i&lt;n; i++)
    {
        std::cin.ignore(10000,'\n');
        std::cin.clear();
        try
        {
            long long int jmbg;
            std::string ime;
            std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
            std::getline(std::cin, ime);
            std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
            std::cin&gt;&gt;jmbg;
                GradjaninBiH gradjanin(ime, jmbg);
                std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;ime&lt;&lt;" rodjenog "&lt;&lt;gradjanin.DajDanRodjenja()&lt;&lt;"."&lt;&lt;gradjanin.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;gradjanin.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;gradjanin.DajSifruRegije()&lt;&lt;", ";
                if(gradjanin.DajPol()==0) std::cout&lt;&lt;"musko."&lt;&lt;std::endl; else std::cout&lt;&lt;"zensko."&lt;&lt;std::endl;
            pok_niz[i]=new GradjaninBiH(gradjanin);
        }
        catch(std::logic_error izuzetak){i--; std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;}
        catch(...){return 0;}
    }
    int m;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    std::cin&gt;&gt;m;
    std::cin.ignore(10000,'\n');
    std::cin.clear();
    for(int i=0; i&lt;m; i++)
    {
        try
        {
            std::string ime;
            std::string datum;
            int sifra;
            std::string pol;
            GradjaninBiH::Pol pol_br;
            std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
            std::getline(std::cin, ime);
            std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
            std::cin&gt;&gt;datum;
            std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
            std::cin&gt;&gt;sifra;
            std::cin.ignore(10000,'\n');
            std::cin.clear();
            std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
            std::getline(std::cin, pol);
            if(pol=="M") pol_br=GradjaninBiH::Pol::Musko; else if(pol=="Z") pol_br=GradjaninBiH::Pol::Zensko;
            GradjaninBiH gradjanin(ime, datum[0]*10+datum[1]-528, datum[3]*10+datum[4]-528, datum[6]*1000+datum[7]*100+datum[8]*10+datum[9]-53328, sifra, pol_br);
            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;ime&lt;&lt;" JMBG: "&lt;&lt;gradjanin.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
            pok_niz[n+i]=new GradjaninBiH(gradjanin);
            
        }
        catch(std::logic_error izuzetak){i--;std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;}
        catch(...){return 0;}
        
    }
    for(int i=0; i&lt;n+m; i++)
    {
        delete pok_niz[i];
    }
    
}</pre>
</body>
</html>
