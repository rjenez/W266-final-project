<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1624.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1624.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
using namespace::std;

<a name="3"></a><font color="#00FFFF"><a href="match697-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

bool ValidanDatum(int dan,int mjesec,int godina)
{
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if(godina % 4 == 0 &amp;&amp; godina % 100 != 0 || godina % 400 == 0)
        broj_dana[1]++;
    if(godina &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &lt; 1 || dan &gt; broj_dana[mjesec-1])
        return false;
    return true;
}
class GradjaninBiH
{   
    string ime;
    long long int jmbg;
    GradjaninBiH *prethodnik;
    static GradjaninBiH *posljednji;
<a name="0"></a><font color="#FF0000"><a href="match697-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

    bool Provjera(long long int jmbg);
public:
    enum Pol{Musko,Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime() const
    {
        return ime;
    }
    long long int DajJMBG() const
    {
        return jmbg;
    }
    int DajDanRodjenja() const;
    int DajMjesecRodjenja() const;
    int DajGodinuRodjenja() const;
    int DajSifruRegije() const;
    Pol DajPol() const;
    void PromijeniImeIPrezime(std::string novo_ime)
    {
        ime = novo_ime;
    }
};

bool GradjaninBiH::Provjera(long long int jmbg)
</font>{
    GradjaninBiH *pomocni = posljednji;
    while(pomocni != nullptr)
    {
        if((*pomocni).DajJMBG() == jmbg)
            return true;
    }
    return false;
}
GradjaninBiH *GradjaninBiH::posljednji(nullptr);
GradjaninBiH::GradjaninBiH(string ime_i_prezime,long long int jmbg)
{
    bool ima(false);
    if (posljednji == nullptr)
    {
            prethodnik = nullptr;
    }
    else
    {
        ima = Provjera(jmbg);
        prethodnik = posljednji;
    }
    posljednji = this;
    long long int t(jmbg);
    int c[13];
    int i = 12;
    while(t &gt; 0)
    {
        c[i--] = t%10;
        t/=10;
    }
    if(i &gt; 0)
        c[0] = 0;
    int c13 = 11 - (7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2]+c[8]) + 4*(c[3]+c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
    if(c13 == 10)
        throw logic_error("JMBG nije validan");
    int dan = c[0]*10 + c[1];
    int mjesec = c[2]*10 + c[3];
<a name="1"></a><font color="#00FF00"><a href="match697-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    int godina = c[4]*100 + c[5]*10 + c[6];
    if(godina &gt; 17)
        godina+=1000;
    else
        godina+=2000;
    if(ValidanDatum(dan,mjesec,godina) == false)
</font>        throw logic_error("JMBG nije validan");
    ime = ime_i_prezime;
    if(ima)
        jmbg+=10;
    GradjaninBiH::jmbg = jmbg;
}

GradjaninBiH::GradjaninBiH(string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol)
{
    int dan(dan_rodjenja);
    int mjesec(mjesec_rodjenja);
    int godina(godina_rodjenja);
    long long int jmbg(0);
    if(!ValidanDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja))
        throw logic_error("Neispravni podaci");
    if(sifra_regije &lt; 0 || sifra_regije &gt; 99)
        throw logic_error("Neispravni podaci");
    int cifre[13];
    cifre[1] = dan%10;
    dan/=10;
    cifre[0] = dan;
    cifre[3] = mjesec%10;
    mjesec = mjesec / 10;
    cifre[2] = mjesec;
    cifre[6] = (godina%100)%10;
    godina /= 10;
<a name="2"></a><font color="#0000FF"><a href="match697-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    cifre[5] = godina%10;
    godina /=10;
    cifre[4] = godina%10;
    cifre[8] = sifra_regije%10;
    sifra_regije /=10;
    cifre[7] = sifra_regije;
</font>    if(pol == Musko)
    {
        cifre[9] = 0;
    }
    else
        cifre[9] = 5;
    cifre[10] = 0;
    cifre[11] = 0;
    int c[13];
    copy(cifre,cifre+13,c);
    int c13 = 11 - (7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2]+c[8]) + 4*(c[3]+c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
    if(c13 == 10)
        throw logic_error("Neispravni podaci");
    if(c13 == 11)
        cifre[12] = 0;
    else
        cifre[12] = c13;
    for(int i = 0;i &lt; 13;i++)
    {
       jmbg += cifre[i];
       jmbg*=10;
    }
    jmbg/=10;
    bool ima;
    
    if (posljednji == nullptr)
            prethodnik = nullptr;
    else
    {
        ima = Provjera(jmbg);
        prethodnik = posljednji;
    }
    posljednji = this;
        
    GradjaninBiH::jmbg = jmbg;
    ime = ime_i_prezime;
}

int GradjaninBiH::DajDanRodjenja() const
{
    long long int t(jmbg);
    int c[13];
    int i(0);
    while(t &gt; 0)
    {
        c[i] = t%10;
        t = t/10;
        i++;
    }
    int dan = c[12]*10 + c[11];
    return dan;
}

int GradjaninBiH::DajMjesecRodjenja() const
{
    long long int t(jmbg);
    int c[13];
    int i(0);
    while(t &gt; 0)
    {
        c[i++] = t%10;
        t/=10;
    }
    return c[10]*10 + c[9];
}

int GradjaninBiH::DajGodinuRodjenja() const
{
    long long int t(jmbg);
    int c[13];
    int i(0);
    while(t &gt; 0)
    {
        c[i++] = t%10;
        t/=10;
    }
    int godina = 100*c[8] + 10*c[7] + c[6];
    if(godina &gt; 17)
        godina+=1000;
    else
        godina+=2000;
    return godina;
}
int GradjaninBiH::DajSifruRegije() const
{
    long long int t(jmbg);
    int c[13];
    int i(0);
    while(t &gt; 0)
    {
        c[i++] = t%10;
        t/=10;
    }
    return c[5]*10 + c[4];
    
}
GradjaninBiH::Pol GradjaninBiH::DajPol() const
{
    long long int t(jmbg);
    int c[13];
    int i(0);
    while(t &gt; 0)
    {
        c[i++] = t%10;
        t/=10;
    }
    int p(c[3]*100 + 10*c[2] + c[1]);
    if(p &gt;=500)
        return Pol::Zensko;
    return Pol::Musko;
}
int main()
{
    GradjaninBiH *g[100];
    int n;
    cout &lt;&lt; "Koliko gradjanja zelite unijeti po JMBG? " &lt;&lt; endl;
    cin &gt;&gt; n;
    for(int i = 0;i &lt; n;i++)
    {
        string s;
        cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; endl;
        cin.ignore();
        getline(cin,s);
        long long int jmbg;
        cout &lt;&lt; "Unesite JMBG: " &lt;&lt; endl;
        cin &gt;&gt; jmbg;
        cout &lt;&lt; jmbg &lt;&lt; "XX";
        try
        {
            GradjaninBiH a(s,jmbg);
            g[i] = &amp;a;
            
        }
        catch(exception &amp;e)
        {
            cout &lt;&lt; e.what();
            continue;
        }
        cout &lt;&lt; "Unjeli ste gradjanina " &lt;&lt;  (*g[i]).DajImeIPrezime() &lt;&lt; " rodjenog ";
    }
    return 0;
}</pre>
</body>
</html>
