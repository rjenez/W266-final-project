<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3219.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3219.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match70-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_19.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#define VEL 100

using namespace std;

class GradjaninBiH {
    string ImePrezime;
    long long int JMBG;
    int dan_rodjenja,mjesec_rodjenja,godina_rodjenja;
    int sifra_regije;
    int MZ;
    GradjaninBiH *pok=nullptr;
    static GradjaninBiH *staticki;
    int BrojPola(long long int jmbg) { long long int pom=jmbg/10000; return (jmbg/10000-pom)*1000; }
    
    public:
    enum Pol {Musko, Zensko}; 
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);  
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);  
    std::string DajImeIPrezime() const { return ImePrezime; } 
    long long int DajJMBG() const  { return JMBG; };
    int DajDanRodjenja() const { return dan_rodjenja; };  
    int DajMjesecRodjenja() const  { return mjesec_rodjenja; };
    int DajGodinuRodjenja() const   { return godina_rodjenja; };
    int DajSifruRegije() const  { return sifra_regije; };
    Pol DajPol() const  { if(MZ==0) return Pol::Musko; else return Pol::Zensko; };
    void PromijeniImeIPrezime(std::string novo_ime);
    ~GradjaninBiH() {
        if(staticki-&gt;pok==nullptr)  { staticki=nullptr; }
        else if(this==staticki) { staticki=staticki-&gt;pok;}
        else if(this-&gt;pok==nullptr) { GradjaninBiH* pom=staticki; while(pom-&gt;pok != this) pom=pom-&gt;pok; pom-&gt;pok=nullptr;}
        else {
            GradjaninBiH* pom=staticki;
            while(pom-&gt;pok != this) pom=pom-&gt;pok;
            pom-&gt;pok=this-&gt;pok;
        }
    }
};
 GradjaninBiH* GradjaninBiH::staticki=nullptr;


bool DaLiJeIspravanDatum(int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja) {
    int BrojDanaPoMjesecu[]{31,28,31,30,31,30,31,31,30,31,30,31};
</font><a name="3"></a><font color="#00FFFF"><a href="match70-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

    if((godina_rodjenja%4==0 &amp;&amp; godina_rodjenja%100!=0) || godina_rodjenja%400==0) BrojDanaPoMjesecu[1]++;
    if(dan_rodjenja&lt;1 || dan_rodjenja&gt;BrojDanaPoMjesecu[mjesec_rodjenja-1] || mjesec_rodjenja&lt;1 || mjesec_rodjenja&gt;12 || godina_rodjenja&lt;1) return false;
    return true;
}

int ZadnjiBroj(int niz[]) {
    int n=11-(7*(niz[0]+niz[6]) + 6*(niz[1]+niz[7]) + 5*(niz[2]+niz[8]) + 4*(niz[3]+niz[9]) + 3*(niz[4]+niz[10]) + 2*(niz[5]+niz[11]))%11;
</font><a name="0"></a><font color="#FF0000"><a href="match70-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_46.gif"/></a>


    if(n==11) n=0;
    if(n==10) throw logic_error ("JMBG nije validan");
    return n;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) {
    int pomJMBG[13];
    int i=12;
    long long int n=jmbg;
    while(n!=0) {
        pomJMBG[i]=n%10;
        n/=10;
        i--;
    }
    int Dan=pomJMBG[0]*10+pomJMBG[1];
    int Mjesec=pomJMBG[2]*10+pomJMBG[3];
    int Godina=pomJMBG[4]*100+pomJMBG[5]*10+pomJMBG[6];
    if(!DaLiJeIspravanDatum(Dan,Mjesec,Godina)) throw logic_error ("JMBG nije validan");
    if(pomJMBG[12] != ZadnjiBroj(pomJMBG)) throw logic_error ("JMBG nije validan");
    
    GradjaninBiH* pom=staticki;
    while(pom!=nullptr) {
        if(pom-&gt;DajJMBG()==jmbg) throw logic_error ("Vec postoji gradjanin sa istim JMBG");
        pom=pom-&gt;pok;
    }
   
    pok=staticki;
    staticki=this;
    JMBG=jmbg;
    ImePrezime=ime_i_prezime;
    dan_rodjenja=Dan;
    mjesec_rodjenja=Mjesec;
    if(Godina&gt;=917) godina_rodjenja=1000+Godina;
    else if(Godina&lt;=17) godina_rodjenja=2000+Godina;
    if(pomJMBG[9]*100+pomJMBG[10]*10+pomJMBG[11]&lt;500) MZ=0;
    else MZ=1;
    sifra_regije=pomJMBG[7]*10+pomJMBG[8];
    
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
    if(!DaLiJeIspravanDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)) throw logic_error ("Neispravni podaci");
    if(sifra_regije&lt;0 || sifra_regije &gt; 99) throw logic_error ("Neispravni podaci");
    
    pok=staticki;
    staticki=this;
    
    ImePrezime=ime_i_prezime;
    GradjaninBiH::dan_rodjenja=dan_rodjenja;
    GradjaninBiH::mjesec_rodjenja=mjesec_rodjenja;
    GradjaninBiH::godina_rodjenja=godina_rodjenja;
    GradjaninBiH::sifra_regije=sifra_regije;
    if(pol==GradjaninBiH::Pol::Musko) MZ=0;
    else MZ=1;
    int spol=0;
    if(MZ==1) spol=500;
    GradjaninBiH* pom=pok;
    while(pom!=nullptr) {
        if(pom-&gt;DajDanRodjenja()==dan_rodjenja &amp;&amp; pom-&gt;DajMjesecRodjenja()==mjesec_rodjenja &amp;&amp; pom-&gt;DajGodinuRodjenja()==godina_rodjenja &amp;&amp; pom-&gt;DajSifruRegije()==sifra_regije &amp;&amp; pom-&gt;DajPol()==pol) {
            if(spol==BrojPola(pom-&gt;DajJMBG())) {
                spol++; pom=pok;
            }
        }
        pom=pom-&gt;pok;
    }
    int pomgod;
    if(godina_rodjenja&gt;=2000) pomgod=godina_rodjenja-2000;
    else pomgod=godina_rodjenja-1000;
    
    int niz[]={dan_rodjenja/10,dan_rodjenja%10,mjesec_rodjenja/10,mjesec_rodjenja%10,pomgod/100,(pomgod/10)%10,pomgod%10,sifra_regije/10,sifra_regije%10,spol/100,(spol/10)%10,spol%10};
    
    long long int dan=dan_rodjenja*100000000000; 
    long long int mjesec=(mjesec_rodjenja*10000000000)/10; 
    long long int godina=pomgod*1000000;
    long long int jmbg=dan+mjesec+godina+(sifra_regije*10000)+(spol*10)+ZadnjiBroj(niz);
    GradjaninBiH::JMBG=jmbg;
    
}

void GradjaninBiH::PromijeniImeIPrezime(std::string novo_ime) {
     ImePrezime=novo_ime;
 }

int main () {
    GradjaninBiH* NPok[VEL]={nullptr};
    cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;endl;
    int n; cin&gt;&gt;n;
    for(int i(0);i&lt;n;i++) {
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;endl;
        cin.ignore(10000,'\n');
        string Ime; getline(cin,Ime);
        cout&lt;&lt;"Unesite JMBG: "&lt;&lt;endl;
        long long int jmbg; cin&gt;&gt;jmbg;
        
        try{
            NPok[i]= new GradjaninBiH (Ime,jmbg);
        } catch(logic_error e) { cout&lt;&lt;e.what()&lt;&lt;endl; i--; continue; }
        
        cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;NPok[i]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;NPok[i]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;NPok[i]-&gt;DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;NPok[i]-&gt;DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;NPok[i]-&gt;DajSifruRegije()&lt;&lt;", ";
</font><a name="1"></a><font color="#00FF00"><a href="match70-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_22.gif"/></a>

        if(NPok[i]-&gt;DajPol()) cout&lt;&lt;"zensko."&lt;&lt;endl;
        else cout&lt;&lt;"musko."&lt;&lt;endl;
        
    }
    int k; 
    cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;endl;
    cin&gt;&gt;k;
    for(int i(0);i&lt;k;i++) {
        cin.ignore(10000,'\n');
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;endl;
        string Ime; getline(cin,Ime);
        cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;endl;
        string datum;
        getline(cin,datum);
        int d,m,g;
        d=stoi(datum.substr(0,2)); datum=datum.substr(3);
        m=stoi(datum.substr(0,2)); datum=datum.substr(3);
        g=stoi(datum.substr(0));
        cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;endl;
        int sifra; cin&gt;&gt;sifra; cin.ignore(10000,'\n');
        cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;endl;
        char slovo; cin&gt;&gt;slovo;
        if(slovo=='M') {
            try{
                
                NPok[n+i]= new GradjaninBiH (Ime, d, m, g, sifra, GradjaninBiH::Pol::Musko);
            } catch(logic_error e) { cout&lt;&lt;e.what()&lt;&lt;endl; i--;  continue; }
        }
        else if(slovo=='Z') {
            try{
                NPok[n+i]= new GradjaninBiH (Ime, d, m, g, sifra, GradjaninBiH::Pol::Zensko);
            } catch(logic_error e) { cout&lt;&lt;e.what()&lt;&lt;endl; i--;  continue; }
        }
        cout&lt;&lt; "Unijeli ste gradjanina "&lt;&lt;NPok[n+i]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;NPok[n+i]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;endl;
    }
    for(int i(0);i&lt;n+k;i++) {
        delete NPok[i];
        NPok[i]=nullptr;
</font>    }
	return 0;
}</pre>
</body>
</html>
