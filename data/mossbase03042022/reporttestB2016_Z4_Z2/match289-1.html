<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student6874.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1317.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

using namespace std;

class GradjaninBiH
{
    string ime_i_prezime;
    long long int jmb;
    GradjaninBiH* prethodni;
    static GradjaninBiH* zadnji;
<a name="6"></a><font color="#00FF00"><a href="match289-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    bool ProvjeriDatum(int d, int m, int g) 
    {
        int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>        if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
        if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m - 1]) return false;
        return true;
    }
    void ProvjeriJMBG(long long int jmbg);

    public:
        enum Pol {Musko, Zensko};
        GradjaninBiH(string ime_i_prezime, long long int jmbg);
        GradjaninBiH(string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
        GradjaninBiH(const GradjaninBiH &amp;g) = delete;
        GradjaninBiH &amp;operator =(const GradjaninBiH &amp;g) = delete;
<a name="3"></a><font color="#00FFFF"><a href="match289-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        string DajImeIPrezime() const { return ime_i_prezime; }
        long long int DajJMBG() const { return jmb; }
        int DajDanRodjenja() const;
        int DajMjesecRodjenja() const;
        int DajGodinuRodjenja() const;
        int DajSifruRegije() const;
        Pol DajPol() const;
        void PromijeniImeIPrezime(string novo_ime) { ime_i_prezime=novo_ime; }
</font>        ~GradjaninBiH();
};

GradjaninBiH* GradjaninBiH::zadnji(nullptr);

GradjaninBiH::~GradjaninBiH()
{
    if(zadnji==this)
    {
        zadnji=zadnji-&gt;prethodni;
        this-&gt;prethodni=nullptr;
    }
    else
    {
        auto pom(zadnji);
        auto sljedeci(zadnji);
        while(pom!=this)
        {
            sljedeci=pom;
            pom=pom-&gt;prethodni;
        }
        auto pom2(pom-&gt;prethodni);
        sljedeci-&gt;prethodni=pom2;
        pom-&gt;prethodni=nullptr;
    }
}

GradjaninBiH::Pol GradjaninBiH::DajPol() const
{
    int niz[13], pol;
    long long int pom(jmb);
    for(int i=12; i&gt;=0; i--)
    {
        niz[i]=pom%10;
        pom/=10;
        if(i==0) break;
    }
    pol=niz[9]*100+niz[10]*10+niz[11];
    if(pol&gt;=0 &amp;&amp; pol&lt;500) return Musko;
    return Zensko;
}

<a name="4"></a><font color="#FF00FF"><a href="match289-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

int GradjaninBiH::DajSifruRegije() const
{
    int niz[13];
    long long int pom(jmb);
    for(int i=12; i&gt;=0; i--)
    {
        niz[i]=pom%10;
        pom/=10;
</font>        if(i==0) break;
    }
    
    return niz[7]*10+niz[8];
}

int GradjaninBiH::DajGodinuRodjenja() const
{
    int niz[13], godina_rodjenja;
    long long int pom(jmb);
    for(int i=12; i&gt;=0; i--)
    {
        niz[i]=pom%10;
        pom/=10;
        if(i==0) break;
    }
    godina_rodjenja=niz[4]*100+niz[5]*10+niz[6];
    if(niz[5]*10+niz[6]&gt;=0 &amp;&amp; niz[5]*10+niz[6]&lt;=17) godina_rodjenja+=2000;
    else godina_rodjenja+=1000;
    return godina_rodjenja;
}

<a name="5"></a><font color="#FF0000"><a href="match289-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

int GradjaninBiH::DajMjesecRodjenja() const
{
    int niz[13];
    long long int pom(jmb);
    for(int i=12; i&gt;=0; i--)
    {
        niz[i]=pom%10;
        pom/=10;
</font>        if(i==0) break;
    }
    
<a name="1"></a><font color="#00FF00"><a href="match289-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    return niz[2]*10+niz[3];
}

int GradjaninBiH::DajDanRodjenja() const
{
    int niz[13];
    long long int pom(jmb);
    for(int i=12; i&gt;=0; i--)
    {
        niz[i]=pom%10;
        pom/=10;
</font>        if(i==0) break;
    }
    
    return niz[0]*10+niz[1];
}

void GradjaninBiH::ProvjeriJMBG(long long int jmbg)
{
    int niz[13], dan_rodjenja, mjesec_rodjenja, godina_rodjenja;
    long long int pom(jmbg);
    for(int i=12; i&gt;=0; i--)
    {
        niz[i]=pom%10;
        pom/=10;
        if(i==0) break;
    }
    if(pom!=0) throw std::logic_error("JMBG nije validan");
<a name="0"></a><font color="#FF0000"><a href="match289-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    dan_rodjenja=niz[0]*10+niz[1];
    mjesec_rodjenja=niz[2]*10+niz[3];
    godina_rodjenja=niz[4]*100+niz[5]*10+niz[6];
    if(niz[5]*10+niz[6]&gt;=0 &amp;&amp; niz[5]*10+niz[6]&lt;=17) godina_rodjenja+=2000;
</font>    else godina_rodjenja+=1000;
    if(!ProvjeriDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja)) throw std::logic_error("JMBG nije validan");
    int zadnja_cifra(11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11);
    if(zadnja_cifra==11) zadnja_cifra=0;
    if(zadnja_cifra!=niz[12] || zadnja_cifra==10) throw std::logic_error("JMBG nije validan");
    
    return;
}

GradjaninBiH::GradjaninBiH(string ime_i_prezime, long long int jmbg) : ime_i_prezime(ime_i_prezime)
{
    ProvjeriJMBG(jmbg);
    
    auto pom_pok(zadnji);
    while(pom_pok!=nullptr)
    {
        if(pom_pok-&gt;jmb==jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        pom_pok=pom_pok-&gt;prethodni;
    }
    prethodni=zadnji;
    zadnji=this;
    jmb=jmbg;
}

GradjaninBiH::GradjaninBiH(string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) : ime_i_prezime(ime_i_prezime)
{
    if(!ProvjeriDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) || !(sifra_regije&gt;=0 &amp;&amp; sifra_regije&lt;=99)) throw std::logic_error("Neispravni podaci");
    
    long long int niz[13];
    
    if(dan_rodjenja&gt;=0 &amp;&amp; dan_rodjenja&lt;=9)
    {
        niz[0]=0;
        niz[1]=dan_rodjenja;
    }
    else if(dan_rodjenja&gt;=10 &amp;&amp; dan_rodjenja&lt;=31)
    {
        niz[0]=dan_rodjenja/10;
        niz[1]=dan_rodjenja%10;
    }
    if(mjesec_rodjenja&gt;=0 &amp;&amp; mjesec_rodjenja&lt;=9)
    {
        niz[2]=0;
        niz[3]=mjesec_rodjenja;
    }
    else if(mjesec_rodjenja&gt;=10 &amp;&amp; mjesec_rodjenja&lt;=12)
    {
        niz[2]=1;
        niz[3]=mjesec_rodjenja%10;
    }
    godina_rodjenja%=1000;
    if(godina_rodjenja&gt;=0 &amp;&amp; godina_rodjenja&lt;=9)
    {
        niz[4]=0;
        niz[5]=0;
        niz[6]=godina_rodjenja;
    }
    else if(godina_rodjenja&gt;=10 &amp;&amp; godina_rodjenja&lt;=17)
    {
        niz[4]=0;
        niz[5]=godina_rodjenja/10;
        niz[6]=godina_rodjenja%10;
    }
    else
    {
        niz[4]=godina_rodjenja/100;
        niz[5]=(godina_rodjenja/10)%10;
        niz[6]=godina_rodjenja%10;
    }
    if(sifra_regije&gt;=0 &amp;&amp; sifra_regije&lt;=9)
    {
        niz[7]=0;
        niz[8]=sifra_regije;
    }
    else if(sifra_regije&gt;=10 &amp;&amp; sifra_regije&lt;=99)
    {
        niz[7]=sifra_regije/10;
        niz[8]=sifra_regije%10;
    }
    
    if(zadnji==nullptr)
    {
        if(pol==Zensko)
        {
            niz[9]=5; niz[10]=0; niz[11]=0;
            niz[12]=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
            if(niz[12]==11) niz[12]=0;
            
        }
        else if(pol==Musko)
        {
            niz[9]=0; niz[10]=0; niz[11]=0;
            niz[12]=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
            if(niz[12]==11) niz[12]=0;
        }
    }
    else
    {
        auto pom_pok(zadnji);
        int maks_m(0), maks_z(500);
        bool nasao_m(false), nasao_z(false);
        while(pom_pok!=nullptr)
        {
            auto pom(pom_pok-&gt;jmb);
            int niz2[13];
            for(int i=12; i&gt;=0; i--)
            {
                niz2[i]=pom%10;
                pom/=10;
                if(i==0) break;
            }
            int dan, mjesec, godina, regija, kod;
            
            dan=niz2[0]*10+niz2[1];
            mjesec=niz2[2]*10+niz2[3];
            godina=niz2[4]*100+niz2[5]*10+niz2[6];
            regija=niz2[7]*10+niz2[8];
            kod=niz2[9]*100+niz2[10]*10+niz2[11];
            
            if(kod&gt;=0 &amp;&amp; kod&lt;=499 &amp;&amp; dan==dan_rodjenja &amp;&amp; mjesec==mjesec_rodjenja &amp;&amp; godina==godina_rodjenja &amp;&amp; regija==sifra_regije &amp;&amp; kod&gt;=maks_m &amp;&amp; pol==Musko)
            {
                maks_m=kod;
                nasao_m=true;
            }
            if(kod&gt;=500 &amp;&amp; kod&lt;=999 &amp;&amp; dan==dan_rodjenja &amp;&amp; mjesec==mjesec_rodjenja &amp;&amp; godina==godina_rodjenja &amp;&amp; regija==sifra_regije &amp;&amp; kod&gt;=maks_z &amp;&amp; pol==Zensko)
            {
                maks_z=kod;
                nasao_z=true;
            }
            
            pom_pok=pom_pok-&gt;prethodni;
        }
        if(nasao_z) maks_z++;
        if(nasao_m) maks_m++;
        
        if(pol==Zensko) 
        {
            niz[9]=maks_z/100;
<a name="2"></a><font color="#0000FF"><a href="match289-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            niz[10]=(maks_z/10)%10;
            niz[11]=maks_z%10;
            niz[12]=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
</font>            if(niz[12]==11) niz[12]=0;
        }
        else
        {
            if(maks_m&gt;=0 &amp;&amp; maks_m&lt;=9)
            {
                niz[9]=0;
                niz[10]=0;
                niz[11]=maks_m;
            }
            if(maks_m&gt;=10 &amp;&amp; maks_m&lt;=99)
            {
                niz[9]=0;
                niz[10]=maks_m/10;
                niz[11]=maks_m%10;
            }
            if(maks_m&gt;=100 &amp;&amp; maks_m&lt;=499)
            {
                niz[9]=maks_m/100;
                niz[10]=(maks_m/10)%10;
                niz[11]=maks_m%10;
            }
            niz[12]=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
            if(niz[12]==11) niz[12]=0;
        }
    }
    jmb=(((((((((((niz[0]*10+niz[1])*10+niz[2])*10+niz[3])*10+niz[4])*10+niz[5])*10+niz[6])*10+niz[7])*10+niz[8])*10+niz[9])*10+niz[10])*10+niz[11])*10+niz[12];
    
    prethodni=zadnji;
    zadnji=this;
}

int main ()
{
    GradjaninBiH* niz[100]{nullptr};
    
    int n;
    cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? ";
    cin &gt;&gt; n;
    cout &lt;&lt; endl;
    if(!cin) cin.clear();
    cin.ignore(1000, '\n');
    
    for(int i=0; i&lt;n; i++)
    {
        string ime_i_prezime;
        cout &lt;&lt; "Unesite ime i prezime (u istom redu): ";
        getline(cin, ime_i_prezime);
        
        try
        {
            long long int jmbg;
            cout &lt;&lt; endl &lt;&lt; "Unesite JMBG: ";
            cin &gt;&gt; jmbg;
            niz[i] = new GradjaninBiH(ime_i_prezime, jmbg);
            if(niz[i]-&gt;DajPol()==0) cout &lt;&lt; endl &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; niz[i]-&gt;DajDanRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; niz[i]-&gt;DajSifruRegije() &lt;&lt; ", " &lt;&lt; "musko." &lt;&lt; endl;
            else cout &lt;&lt; endl &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; niz[i]-&gt;DajDanRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; niz[i]-&gt;DajSifruRegije() &lt;&lt; ", " &lt;&lt; "zensko." &lt;&lt; endl;
            if(!cin) cin.clear();
            cin.ignore(1000, '\n');
        }
        catch(std::logic_error izuzetak)
        {
            cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl;
            i--;
            if(!cin) cin.clear();
            cin.ignore(1000, '\n');
        }
    }
    
    int m;
    cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? ";
    cin &gt;&gt; m;
    cout &lt;&lt; endl;
    if(!cin) cin.clear();
    cin.ignore(1000, '\n');
    
    for(int i=n; i&lt;n+m; i++)
    {
        string ime_i_prezime;
        cout &lt;&lt; "Unesite ime i prezime (u istom redu): ";
        getline(cin, ime_i_prezime);
        
        try
        {
            int dan, mjesec, godina;
            char znak;
            cout &lt;&lt; endl &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): ";
            cin &gt;&gt; dan &gt;&gt; znak &gt;&gt; mjesec &gt;&gt; znak &gt;&gt; godina;
            
            int sifra_regije;
            cout &lt;&lt; endl &lt;&lt; "Unesite sifru regije: ";
            cin &gt;&gt; sifra_regije;
            if(!cin) cin.clear();
            cin.ignore(1000, '\n');
            
            cout &lt;&lt; endl &lt;&lt; "Unesite M za musko, Z za zensko: ";
            cin &gt;&gt; znak;
            
            if(znak=='M') niz[i]=new GradjaninBiH(ime_i_prezime, dan, mjesec, godina, sifra_regije, GradjaninBiH::Musko);
            else niz[i]=new GradjaninBiH(ime_i_prezime, dan, mjesec, godina, sifra_regije, GradjaninBiH::Zensko);
            
            cout &lt;&lt; endl &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; niz[i]-&gt;DajJMBG() &lt;&lt; "." &lt;&lt; endl;
            
            if(!cin) cin.clear();
            cin.ignore(1000, '\n');
        }
        catch(std::logic_error izuzetak)
        {
            cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl;
            i--;
            if(!cin) cin.clear();
            cin.ignore(1000, '\n');
        }
    }
    for(int i=0; i&lt;100; i++)
        delete niz[i];
	
	return 0;
}


</pre>
</body>
</html>
