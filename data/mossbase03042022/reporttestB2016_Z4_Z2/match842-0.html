<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3301.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3301.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

class GradjaninBiH{
  std::string ime_i_prezime;
  long long int jmbg;
  GradjaninBiH *prethodni;
  static GradjaninBiH *posljednji ;
  static int brojac;
  
  static bool IspravanDatum(long long int jmbg);
  static bool Datum (int dan, int mjesec, int godina);
  static int DajKod (long long int jmbg);
  public:
   enum Pol {Musko, Zensko};
   GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
   GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
   std::string DajImeIPrezime() const {return ime_i_prezime;}
   long long int DajJMBG()const{return jmbg ;}
   int DajDanRodjenja() const ;
   int DajMjesecRodjenja() const;
   int DajGodinuRodjenja() const;
   int DajSifruRegije() const ;
   Pol DajPol() const ;
   void PromijeniImeIPrezime (std::string novo_ime) {ime_i_prezime = novo_ime;}
   GradjaninBiH (const GradjaninBiH &amp;gr) = delete;
   GradjaninBiH operator=(const GradjaninBiH &amp;gr) = delete;
   ~GradjaninBiH(){
       if(this==posljednji)
         GradjaninBiH::posljednji=GradjaninBiH::posljednji-&gt;prethodni;
       else if(this-&gt;prethodni==nullptr){
         GradjaninBiH *q;
         for(q=GradjaninBiH::posljednji; q-&gt;prethodni!=this; q=q-&gt;prethodni);
        q-&gt;prethodni = nullptr;
           
       }
       else{
           GradjaninBiH *q;
           for(q = GradjaninBiH::posljednji; q-&gt;prethodni!=this; q=q-&gt;prethodni);
           q-&gt;prethodni = this-&gt;prethodni;
       }
   }
    
};



GradjaninBiH *GradjaninBiH::posljednji = nullptr;
int GradjaninBiH::brojac = 0;



<a name="3"></a><font color="#00FFFF"><a href="match842-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

bool GradjaninBiH::Datum(int dan, int mjesec, int godina){
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0)
      broj_dana[1]++;
<a name="2"></a><font color="#0000FF"><a href="match842-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    if(godina&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&lt;1 || dan&gt;broj_dana[mjesec-1])
      return false;
    return true;
}


bool GradjaninBiH::IspravanDatum (long long int jmbg){
</font>    long long int a(jmbg);
    int brojac(0);
    while(a!=0){
        a/=10;
        brojac++;
    }
   if(brojac&gt;13 || brojac&lt;0)
      return false;
    int niz[13];
    a = jmbg;
    for(int i=12; i&gt;=0; i--){
        niz[i] = a%10;
        a/=10;
    }
<a name="1"></a><font color="#00FF00"><a href="match842-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    int dan(0), mjesec(0) , godina(0);
    dan = niz[0]*10 + niz[1];
    mjesec = niz[2]*10 + niz[3];
    godina = niz[4]*100 + niz[5]*10 + niz[6];
    if(godina&gt;17)
</font>      godina+=1000;
    else
      godina+=2000;
    if(Datum(dan, mjesec, godina))
      return true;
    
    return false;
    
}

GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, long long int jmbg){
    if(!GradjaninBiH::IspravanDatum(jmbg))
       throw std::logic_error("JMBG nije validan");
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    GradjaninBiH::jmbg = jmbg;
    long long int a(jmbg);
    int c[13];
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    
    int izraz(0);
    izraz+=(11 - (7*(c[0] + c[6]) + 6*(c[1] + c[7]) + 5*(c[2] + c[8]) + 4*(c[3] + c[9]) + 3*(c[4] + c[10]) + 2*(c[5] + c[11]))%11);
    if(izraz==11)
      izraz = 0;
    if(c[12]!=izraz || izraz==10)
      throw std::logic_error("JMBG nije validan");
  if(GradjaninBiH::brojac!=0)
    prethodni = GradjaninBiH::posljednji;
   else
     prethodni = nullptr;
   GradjaninBiH::posljednji = this;
   for(auto q = GradjaninBiH::posljednji-&gt;prethodni; q!=nullptr; q = q-&gt;prethodni)
     if(q-&gt;jmbg == GradjaninBiH::jmbg){
         GradjaninBiH::posljednji = prethodni;
         prethodni = nullptr;
         throw std::logic_error("Vec postoji gradjanin s istim JMBG");
     }

   GradjaninBiH::brojac++;
  
}


int GradjaninBiH::DajKod(long long int jmbg){
    int c[13];
    auto a(jmbg);
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    int kod(c[9]*100 + c[10]*10 + c[11]);
    return kod;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja,int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
    if(!GradjaninBiH::Datum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) || !(sifra_regije&gt;=0 &amp;&amp; sifra_regije&lt;=99))
      throw std::logic_error("Neispravni podaci");
    int min_kod(0);
    if(pol==Pol::Zensko)
      min_kod = 500;
     
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    
    if(brojac!=0)
      prethodni = GradjaninBiH::posljednji;
    else
      prethodni = nullptr;
   GradjaninBiH::posljednji = this;
    long long int JMBG(0);
    if(prethodni){
      
    for(auto q =GradjaninBiH::posljednji-&gt;prethodni; q!=nullptr; q=q-&gt;prethodni ){
        
        if(q-&gt;DajKod(q-&gt;DajJMBG())&gt;min_kod &amp;&amp; q-&gt;DajPol()==pol)
          min_kod = q-&gt;DajKod(q-&gt;jmbg);
          std::cout&lt;&lt;min_kod;
    }
    }
    if(min_kod!=0 &amp;&amp; min_kod!=500)
      min_kod++;
    int niz[13];
    niz[1] = dan_rodjenja%10;
    dan_rodjenja/=10;
    niz[0] = dan_rodjenja%10;
    niz[3] = mjesec_rodjenja%10;
    mjesec_rodjenja/=10;
    niz[2] = mjesec_rodjenja%10;
    niz[6] = godina_rodjenja%10;
    godina_rodjenja/=10;
    niz[5] = godina_rodjenja%10;
    godina_rodjenja/=10;
    niz[4] = godina_rodjenja%10;
    niz[8] = sifra_regije%10;
    sifra_regije/=10;
    niz[7] = sifra_regije%10;
    niz[11] = min_kod%10;
    min_kod/=10;
    niz[10] = min_kod%10;
    min_kod/=10;
    niz[9] = min_kod%10;
    niz[12] = 11 - ((7*(niz[0] + niz[6]) + 6*(niz[1] + niz[7]) + 5*(niz[2] + niz[8]) + 4*(niz[3] + niz[9]) + 3*(niz[4]+ niz[10]) + 2*(niz[5] + niz[11]))%11);
    if(niz[12]==11)
      niz[12] = 0;
    
    long long int k(1);
    

    for(int i=12; i&gt;=0; i--){
        
        JMBG+=(niz[i]*k);
        k*=10;
    }
    GradjaninBiH::jmbg = JMBG;
    brojac++;
}

GradjaninBiH::Pol GradjaninBiH::DajPol() const{
    int c[13];
    long long int a(jmbg);
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    int b(0);
    b+=c[9]*100 + c[10]*10 + c[11];
    if(b&gt;=0 &amp;&amp; b&lt;=499)
      return Pol::Musko;
    else 
      return Pol::Zensko;
    
}

int GradjaninBiH::DajSifruRegije() const {
    int c[13];
    long long int a(jmbg);
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    return (c[7]*10 + c[8]);
    
}

int GradjaninBiH::DajDanRodjenja()const {
    int c[13];
    long long int a(jmbg);
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    return (c[0]*10 + c[1]);
}

int GradjaninBiH::DajMjesecRodjenja() const{
    int c[13];
    long long int a(jmbg);
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    return (c[2]*10 + c[3]);
}

int GradjaninBiH::DajGodinuRodjenja()const {
    int c[13];
    long long int a(jmbg);
    for(int i=12; i&gt;=0; i--){
        c[i] = a%10;
        a/=10;
    }
    int godina(0);
    godina+=(c[4]*100 + c[5]*10 + c[6]);
    if(godina&gt;17)
      godina+=1000;
    else
      godina+=2000;
    return godina;
}
int main ()
{
   GradjaninBiH *niz[100];
    int n;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? ";
    std::cin&gt;&gt;n;
    for(int i=0; i&lt;n; i++){
        try{
        std::cout&lt;&lt;"\nUnesite ime i prezime (u istom redu): ";
        std::string ime_i_prezime;
        std::cin.clear();
        std::cin.ignore(10000, '\n');
        std::getline(std::cin, ime_i_prezime);
        long long int jmbg;
        std::cout&lt;&lt;"\nUnesite JMBG: ";
        std::cin&gt;&gt;jmbg;
        GradjaninBiH gr(ime_i_prezime, jmbg);
        
        niz[i] = &amp;gr;
<a name="0"></a><font color="#FF0000"><a href="match842-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cout&lt;&lt;"\nUnijeli ste gradjanina "&lt;&lt;gr.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;gr.DajDanRodjenja()&lt;&lt;"."&lt;&lt;gr.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;gr.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;gr.DajSifruRegije()&lt;&lt;", ";
        if(gr.DajPol()==GradjaninBiH::Pol::Musko)
          std::cout&lt;&lt;"musko.";
</font>        else 
          std::cout&lt;&lt;"zensko.";
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;"\n"&lt;&lt;e.what();
            i--;
        }
        catch(...){
            std::cout&lt;&lt;"Neispravni podaci";
            i--;
        }
    }
    
    int m;
    std::cout&lt;&lt;"\nKoliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? ";
    std::cin&gt;&gt;m;
    for(int i=0; i&lt;m; i++){
        try{
        std::string ime_i_prezime;
        std::cout&lt;&lt;"\nUnesite ime i prezime (u istom redu): ";
        std::cin.clear();
        std::cin.ignore(10000, '\n');
        std::getline(std::cin, ime_i_prezime);
        int d, m, g;
        char znak1, znak2;
        std::cout&lt;&lt;"\nUnesite datum rodjenja (format dd/mm/gggg): ";
        std::cin&gt;&gt;d&gt;&gt;znak1&gt;&gt;m&gt;&gt;znak2&gt;&gt;g;
        int sifra_regije;
        std::cout&lt;&lt;"\nUnesite sifru regije: ";
        std::cin&gt;&gt;sifra_regije;
        char znak;
        std::cout&lt;&lt;"\nUnesite M za musko, Z za zensko: ";
        std::cin&gt;&gt;znak;
        if(znak=='M'){
          GradjaninBiH gr1(ime_i_prezime, d, m, g, sifra_regije, GradjaninBiH::Pol::Musko);
          std::cout&lt;&lt;"\nUnijeli ste gradjanina "&lt;&lt;gr1.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;gr1.DajJMBG()&lt;&lt;".";
          niz[i+n] = &amp;gr1;
        }
        else if(znak=='Z'){
            GradjaninBiH gr2(ime_i_prezime, d, m, g, sifra_regije, GradjaninBiH::Pol::Zensko);
            std::cout&lt;&lt;"\nUnijeli ste gradjanina "&lt;&lt;gr2.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;gr2.DajJMBG()&lt;&lt;".";
        
         niz[i+n] = &amp;gr2;       
        }
        }
        catch(...){
            std::cout&lt;&lt;"\nNeispravni podaci";
            i--;
        }
    }
    
	return 0;
}</pre>
</body>
</html>
