<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student9949.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5624.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match37-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cstdio&gt;
enum Pol {Musko, Zensko};
bool IspravanDatum(int d, int m, int g){
    int broj_dana[]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>    if((g%4==0 &amp;&amp; g%100!=0) || g%400==0)
        broj_dana[1]++;
<a name="1"></a><font color="#00FF00"><a href="match37-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_29.gif"/></a>

    if(g&lt;1 || d&lt;1 || m&lt;1 ||m&gt;12 || d&gt;broj_dana[m-1])
        return false;
    return true;
}
class GradjaninBiH{
    std::string ime_i_prezime;
    long long int jmbg;
    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, kod, kcifra;
    Pol pol;
    GradjaninBiH *pok_na_prethodni;
    static GradjaninBiH *save;
    GradjaninBiH operator=(GradjaninBiH jedan);
    void JMBGtoDMG(long long int j){
        long long int b=j;
        int br=0;
        while(b!=0){
            br++; b/=10;
        }
        if(br!=12 &amp;&amp; br!=13) throw std::logic_error("JMBG nije validan");
        long long int a(j);
        kcifra=a%10;
        a/=10;
        kod=0;
        for(int i=0; i&lt;3; i++){
            static int k =1;
            kod+=a%10*k;
            k*=10;
            a/=10;
        }
        if(kod&lt;500) pol=Musko;
        else pol=Zensko;
        sifra_regije=0;
        for(int i=0; i&lt;2; i++){
            static int k =1;
            sifra_regije+=a%10*k;
            k*=10;
            a/=10;
        }
        godina_rodjenja=0;
        for(int i=0; i&lt;3; i++){
            static int k =1;
            godina_rodjenja+=a%10*k;
            k*=10;
            a/=10;
        }
        if( godina_rodjenja &gt;17) godina_rodjenja+=1000;
        else godina_rodjenja+=2000;
        mjesec_rodjenja=0;
        for(int i=0; i&lt;2; i++){
            static int k =1;
            mjesec_rodjenja+=a%10*k;
            k*=10;
            a/=10;
        }
        if(br==12) dan_rodjenja=a;
        else {
            dan_rodjenja=a%10;
            a/=10;
            dan_rodjenja+=a*10;
        }
    }
    void DMGtoJMBG(int d, int m, int g, int sifra, Pol pol){
        bool tri=true;
        if(d&lt;10) tri=false;
        if(tri){
            int nizjmbg[13];
            nizjmbg[0]=d%10;
            d/=10;
            nizjmbg[1]=d; 
            if(m&lt;10) nizjmbg[2]=0;
            else {
                nizjmbg[2]=m%10;
                m/=10;
            }
            nizjmbg[3]=m;
            nizjmbg[4]=g%10;
            g/=10;
            nizjmbg[5]=g%10;
            g/=10;
            nizjmbg[6]=g%10;
            nizjmbg[7]=sifra%10;
            sifra/=10;
            nizjmbg[8]=sifra%10;
            kod=DajKod();
            nizjmbg[9]=kod%10;
            kod/=10;
            nizjmbg[10]=kod%10;
            kod/=10;
            nizjmbg[11]=kod%10;
            kcifra=11-(7*(nizjmbg[0]+nizjmbg[6])+6*(nizjmbg[1]+nizjmbg[7])+5*(nizjmbg[2]+nizjmbg[8])+4*(nizjmbg[3]+nizjmbg[9])+3*(nizjmbg[4]+nizjmbg[10])+2*(nizjmbg[5]+nizjmbg[11]))%11;
</font><a name="2"></a><font color="#0000FF"><a href="match37-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_11.gif"/></a>

            nizjmbg[12]=kcifra;
        }
        else{
            int nizjmbg[12];
            nizjmbg[0]=d; 
            if(m&lt;10) nizjmbg[1]=0;
            else {
                nizjmbg[1]=m%10;
                m/=10;
            }
            nizjmbg[2]=m;
            nizjmbg[3]=g%10;
            g/=10;
            nizjmbg[4]=g%10;
            g/=10;
            nizjmbg[5]=g%10;
            nizjmbg[6]=sifra%10;
            sifra/=10;
            nizjmbg[7]=sifra%10;
            kod=DajKod();
            nizjmbg[8]=kod%10;
            kod/=10;
            nizjmbg[9]=kod%10;
            kod/=10;
            nizjmbg[10]=kod%10;
            kcifra=11-(7*(nizjmbg[5])+6*(nizjmbg[0]+nizjmbg[6])+5*(nizjmbg[1]+nizjmbg[7])+4*(nizjmbg[2]+nizjmbg[8])+3*(nizjmbg[3]+nizjmbg[9])+2*(nizjmbg[4]+nizjmbg[10]))%11;
</font><a name="0"></a><font color="#FF0000"><a href="match37-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_49.gif"/></a>

            nizjmbg[11]=kcifra;
        }
    }
    int DajKod(){
        int br=0;
        GradjaninBiH *pok=pok_na_prethodni;
        while(pok!=nullptr){
            if(pok-&gt;DajSifruRegije()==sifra_regije&amp;&amp;pok-&gt;DajDanRodjenja()==dan_rodjenja &amp;&amp;pok-&gt;DajMjesecRodjenja()==mjesec_rodjenja &amp;&amp; pok-&gt;DajGodinuRodjenja()==godina_rodjenja)br++; 
        }
        if(pol==Musko) return br;
        else return 500+br;
    }

    bool DaLiImaIspred(){
        GradjaninBiH *pok=pok_na_prethodni;
        while(pok!=nullptr){
            if(pok-&gt;DajJMBG()==jmbg) return false; 
            else pok=pok-&gt;pok_na_prethodni;
        }
        return true;
    }
    public:
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime() const;
    long long int DajJMBG() const;
    int DajDanRodjenja() const;
    int DajMjesecRodjenja() const;
    int DajGodinuRodjenja() const;
    int DajSifruRegije() const;
    Pol DajPol()const;
    void PromijeniImeIPrezime(std::string novo_ime);
   // ~GradjaninBiH();{
      /*  GradjaninBiH *trenutni = save, *sljedeci;
        while(trenutni != this){
            sljedeci=trenutni;
            trenutni=trenutni-&gt;pok_na_prethodni;
        }
        sljedeci-&gt;pok_na_prethodni = trenutni-&gt;pok_na_prethodni;
    }*/
};
GradjaninBiH *GradjaninBiH::save=nullptr;
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg){
    GradjaninBiH::ime_i_prezime=ime_i_prezime;
    GradjaninBiH::jmbg=jmbg;
    JMBGtoDMG(jmbg);
    if(!IspravanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja))throw std::logic_error ("JMBG nije validan");
    pok_na_prethodni=save;
    save=this;
    if(!DaLiImaIspred()) throw std::logic_error("Vec postoji gradjanin sa istim JMBG-om");
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
    if(!IspravanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja))throw std::logic_error ("Neispravni podaci");
    GradjaninBiH::ime_i_prezime=ime_i_prezime;
    GradjaninBiH::dan_rodjenja=dan_rodjenja;
    GradjaninBiH::mjesec_rodjenja=mjesec_rodjenja;
    GradjaninBiH::godina_rodjenja=godina_rodjenja;
    if(sifra_regije&lt;0 || sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
    GradjaninBiH::sifra_regije=sifra_regije;
    GradjaninBiH::pol=pol;
    DMGtoJMBG(dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, pol);
    pok_na_prethodni=save;
    save=this;
    if(!DaLiImaIspred()) throw std::logic_error("Vec postoji gradjanin sa istim JMBG-om");
}
std::string GradjaninBiH::DajImeIPrezime()const{
    return ime_i_prezime; 
} 
long long int GradjaninBiH::DajJMBG()const{
    return jmbg;
}
int GradjaninBiH::DajDanRodjenja() const{
    return dan_rodjenja;
}
int GradjaninBiH::DajMjesecRodjenja() const{
    return mjesec_rodjenja;
}
int GradjaninBiH::DajGodinuRodjenja() const{
    return godina_rodjenja;
}
int GradjaninBiH::DajSifruRegije() const{
    return sifra_regije;
}
Pol GradjaninBiH::DajPol() const{
    return pol;
}
void GradjaninBiH::PromijeniImeIPrezime(std::string novo_ime){
    ime_i_prezime=novo_ime;
}
std::string DajIme(std::string s){
    std::string s1;
    int j(0);
    for(int i=0; i&lt;s.length(); i++){
        if(s[i]==' ') j=i;
    }
    s1=s.substr(0, j);
    return s1;
}
int main ()
{
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG?"&lt;&lt;std::endl;
    int n;
    std::cin&gt;&gt;n;
    for(int i=0; i&lt;n; i++){
        std::string s;
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
	    std::getline(std::cin, s);
	    std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
	    long long int a;
	    std::scanf("%lli", &amp;a);
	    try{
	        GradjaninBiH jedan(s,a);
	        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;DajIme(s)&lt;&lt;" rodjenog "&lt;&lt;jedan.DajDanRodjenja()&lt;&lt;"."&lt;&lt;jedan.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;jedan.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;jedan.DajSifruRegije()&lt;&lt;", ";
	        if(jedan.DajPol()==Musko) std::cout&lt;&lt;"musko."&lt;&lt;std::endl;
	        else std::cout&lt;&lt;"zensko."&lt;&lt;std::endl;
	    }
	    catch(std::logic_error e){
	        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	    }
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    int n1;
    std::cin&gt;&gt;n1;
    for(int i=0; i&lt;n1; i++){
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu) "&lt;&lt;std::endl;
        std::string s;
        std::getline(std::cin, s);
        std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gg)"&lt;&lt;std::endl;
        int a, b, c;
        std::cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
        std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
        int d;
        std::cin&gt;&gt;d;
        std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
        char e;
        std::cin&gt;&gt;e;
        Pol pOl;
        if(e=='M')pOl=Musko;
        else pOl=Zensko;
        std::cout&lt;&lt;"Unijeli ste gradjanina ";
        try{
            GradjaninBiH drugi(s, a,b,c,d,pOl);
            std::cout&lt;&lt;DajIme(s)&lt;&lt;" JMBG: "&lt;&lt;drugi.DajJMBG()&lt;&lt;std::endl;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
        }
        
    }
	return 0;
</font>}</pre>
</body>
</html>
