<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student7774.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student7774.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

<a name="3"></a><font color="#00FFFF"><a href="match64-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

using std::cout;
using std::cin;
using std::endl;
using std::string;

class Datum {
    int dan, mj, god;
public:    
    void Postavi(int dan, int mjesec, int godina);
    int DajDan() const { return dan; }
    int DajMjesec() const { return mj; }
    int DajGodinu() const { return god; }
};

void Datum::Postavi(int dan, int mjesec, int godina) {
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    
    if(godina % 4 == 0 &amp;&amp; (godina % 100 != 0 || godina % 400 == 0))
        broj_dana[1]++;
<a name="2"></a><font color="#0000FF"><a href="match64-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_20.gif"/></a>

    if(godina &lt; 1 || dan &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &gt; broj_dana[mjesec - 1])
        throw std::logic_error("Neispravni podaci");
        
    this-&gt;dan = dan; this-&gt;mj = mjesec; this-&gt;god = godina;
}

bool IstiDatumi(Datum d1, Datum d2) {
    return d1.DajDan() == d2.DajDan() &amp;&amp; d1.DajMjesec() == d2.DajMjesec() &amp;&amp; d1.DajGodinu() == d2.DajGodinu();
}

class GradjaninBiH {
    string ime_i_prezime;
    int c[13], sifra_regije;
    long long int JMBG;
    Datum datum_rodjenja;
    static GradjaninBiH *zadnji;
    GradjaninBiH *prethodni;

public:
    enum Pol {Musko, Zensko} pol;
    
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
        int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime() const { return ime_i_prezime; }
    long long int DajJMBG() const { return JMBG; }
    Datum DajDatumRodjenja() const { return datum_rodjenja; }
    int DajDanRodjenja() const { return datum_rodjenja.DajDan(); }
    int DajMjesecRodjenja() const { return datum_rodjenja.DajMjesec(); }
    int DajGodinuRodjenja() const { return datum_rodjenja.DajGodinu(); }
    int DajSifruRegije() const { return sifra_regije; }
    Pol DajPol() const { return pol; }
    void PromijeniImeIPrezime(std::string novo_ime) { ime_i_prezime = novo_ime; }
};

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) :
    ime_i_prezime(ime_i_prezime), JMBG(jmbg), prethodni(nullptr) {
    // Pretvaranje broja u niz jmbg    
    for (int i = 12; i &gt;= 0; i--) {
        c[i] = jmbg%10;
        jmbg = jmbg/10;
    }                                                                       /*
Standardni ulaz:	3 
Murga Drot
3005017180005
Gile Sampion
2905017170007*/
    // Postavljanje sifre regije
        sifra_regije = c[7]*10 + c[8];
    
    // Postavljanje pola gradjanina
        int POL(0);
            POL += c[9]*100 + c[10]*10 + c[11];
        if(POL &lt; 500)
            pol = Musko;
        else
            pol = Zensko;
            
    // Trazimo ispravan c13
    int c13;
        c13=11-(7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2]+c[8]) + 4*(c[3]+c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
</font><a name="0"></a><font color="#FF0000"><a href="match64-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_37.gif"/></a>

        
    // Provjera valjanosti c13    
    if (c13 != 11 and c13 != c[12])    
        throw std::logic_error("JMBG nije validan");
    
    // Provjera valjanosti datuma
    int dan(c[0]*10+c[1]),mjesec(c[2]*10+c[3]),godina(0);
    if(c[6]&gt;=17)
        godina+=2000 + c[4]*100 + c[5]*10 + c[6];
    else
        godina+=1000 + c[4]*100 + c[5]*10 + c[6];
    
    try {
        datum_rodjenja.Postavi(dan, mjesec, godina);
    }
    catch (...) {
        throw std::logic_error("JMBG nije validan");
    }
    // Provjera 2 ista JMBG-a u slucaju da prethodno postoji neki GBiH
    if (zadnji) {
        for(auto it = zadnji; it != nullptr; it = it-&gt;prethodni) {
            if(it-&gt;JMBG == this-&gt;JMBG) {
               // cout &lt;&lt; it-&gt;JMBG &lt;&lt; " " &lt;&lt; JMBG;
                throw std::logic_error ("Vec postoji gradjanin sa istim JMBG");
            }    
        }
    }
    // "Alociranje" novog gradjanjina!
    if(!zadnji)
        zadnji = this;
    else {
        this-&gt;prethodni=zadnji;
        zadnji = this;
    }
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol) : ime_i_prezime(ime_i_prezime), prethodni(nullptr), pol(pol) {
        
    // Provjera i postavljanje datuma    
    try {
        datum_rodjenja.Postavi(dan_rodjenja, mjesec_rodjenja, godina_rodjenja);
    }
    catch (...) {
        throw std::logic_error("Neispravni podaci");
    }
        
    // Provjera i postavljanje sifre regije    
    if(sifra_regije&lt;0 or sifra_regije&gt;99)
        throw  std::logic_error("Neispravni podaci");
    
    this-&gt;sifra_regije = sifra_regije;
    
    // postavljanje c[13]
    c[0] = datum_rodjenja.DajDan()/10;
    c[1] = datum_rodjenja.DajDan()%10;
    c[2] = datum_rodjenja.DajMjesec()/10;
    c[3] = datum_rodjenja.DajMjesec()%10;
    c[4] = (datum_rodjenja.DajGodinu()%1000)/100;
    c[5] = (datum_rodjenja.DajGodinu()%100)/10;
    c[6] = datum_rodjenja.DajGodinu()%10;
    c[7] = sifra_regije/10;
    c[8] = sifra_regije%10;
    
    if(!zadnji) {                     // Sve ovo ako zadnji nije nullptr
        int iniz[500];
        for (int i = 0; i &lt; 500; i++) 
            iniz[i] = i;
        
        if(pol == Zensko)
            for (int i = 0; i &lt; 500; i++) 
                iniz[i] += 500;
        
        bool naso_slobodno = false;
        for(int i = 0; i&lt;500; i++){
            //prvjeravas da li ima i-ti u listi
            
            // prolazis kroz listu
            bool pronasao_i = false;
            for(auto it = zadnji; it != nullptr; it = it-&gt;prethodni){
                if(IstiDatumi(this-&gt;DajDatumRodjenja(), it-&gt;DajDatumRodjenja()) 
                    &amp;&amp; this-&gt;DajSifruRegije() == it-&gt;DajSifruRegije()
                    &amp;&amp; this-&gt;DajPol() == it-&gt;DajPol()){
                        
                        int spec_broj = it-&gt;c[9]*100 + it-&gt;c[10]*10 + c[11];           
                        if(it-&gt;DajPol() == Pol::Zensko){
                            spec_broj -= 500;
                        }
                        
                        if(i == spec_broj){
                            pronasao_i = true;
                            break;
                        }
                        
                    }
            }
            
            if(!pronasao_i){
                naso_slobodno = true;
                c[11] = i%100; c[10] = (i%10)/10; c[9] = i/100;
                if(this-&gt;DajPol() == Pol::Zensko){
                    c[9] += 5;
                }
                break;
            }
            
        }
        
        if(!naso_slobodno){
            throw std::logic_error("JMBG nije moguc"); // nema slobodno mjesto
        }
        c[12]=11-(7*(c[0]+c[6]) + 6*(c[1]+c[7]) + 5*(c[2]+c[8]) + 4*(c[3]+c[9]) + 3*(c[4]+c[10]) + 2*(c[5]+c[11]))%11;
</font><a name="1"></a><font color="#00FF00"><a href="match64-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_28.gif"/></a>

        if(c[12] == 11)
            c[12] = 0;
        JMBG = 0;
        
        for(int i = 0; i &lt; 13; i++){
            JMBG = JMBG*10 + c[i];
        }
        
        
    }
    
}

GradjaninBiH *GradjaninBiH::zadnji=nullptr;

int main ()
{
    int n;
    cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? " &lt;&lt; endl;
    cin &gt;&gt; n;
    cin.ignore(100,'\n');
    
    string ime_i_prezime;
    long long int jmbg;
    
    for (int i = 0; i &lt; n; i++) {
        cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; endl;
        getline(cin, ime_i_prezime);
        cout &lt;&lt; "Unesite JMBG: " &lt;&lt; endl;
        cin &gt;&gt; jmbg;
        cin.ignore(100,'\n');
        
        try {
            GradjaninBiH g(ime_i_prezime,jmbg);
            cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; g.DajImeIPrezime() &lt;&lt; " rodjenog "
            &lt;&lt; g.DajDanRodjenja() &lt;&lt; "." &lt;&lt; g.DajMjesecRodjenja() &lt;&lt; "."
            &lt;&lt; g.DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; g.DajSifruRegije() &lt;&lt; 
            ", ";
            if(g.pol == GradjaninBiH::Musko)
                cout &lt;&lt; "musko." &lt;&lt; endl;
            else 
                cout &lt;&lt; "zensko." &lt;&lt; endl;
        }
        catch (std::logic_error err) {
            std::cout &lt;&lt;endl &lt;&lt;  err.what() &lt;&lt; std::endl;
            i--;
            continue;
        }
    }
    
    char znak1, znak2, MZ;
    int dan, mjesec, godina, sifra_regije;
    
    cout  &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu?" &lt;&lt; endl;
    cin &gt;&gt; n;
    cin.ignore(100,'\n');
    
    for (int i = 0; i &lt; n; i++) {
        cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; endl;
        getline(cin, ime_i_prezime);
        cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg):" &lt;&lt; endl;
        cin &gt;&gt; dan;
        cin.ignore(100,'\n');
        cin &gt;&gt; znak1 &gt;&gt; mjesec;
        cin.ignore(100,'\n');
        cin &gt;&gt; znak2 &gt;&gt; godina;
        cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; endl;
        cin &gt;&gt; sifra_regije;
        cin.ignore(100,'\n');
        cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; endl;
        cin &gt;&gt; MZ;
        
        try {
            if(MZ == 'M') {
            GradjaninBiH g(ime_i_prezime, dan, mjesec ,godina, sifra_regije, GradjaninBiH::Musko);
            cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; g.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; g.DajJMBG();
          } else {
            GradjaninBiH g(ime_i_prezime, dan, mjesec ,godina, sifra_regije, GradjaninBiH::Zensko);
            cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; g.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; g.DajJMBG();
          }    
        }
        catch (const char error[]) {
            std::cout &lt;&lt; error &lt;&lt; std::endl;
</font>        }
        
        
    }    
    
    
    
	return 0;
}</pre>
</body>
</html>
