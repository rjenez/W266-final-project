<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8118.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8864.cpp<p></p><pre>
<a name="10"></a><font color="#FF0000"><a href="match131-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
class GradjaninBiH{
  public:
    enum Pol{Musko,Zensko};
  private:    
</font>    GradjaninBiH *prethodni;
    long long int JMBG;
    std::string imeprezime;
    int dan,mjesec,godina,sifra,regija;
    Pol pol;
    static GradjaninBiH* prvi;  
    bool IstiJMBG(long long int temp);
    int IstiKod(Pol spol,int d,int m,int g,int s);
  public:
    GradjaninBiH(const GradjaninBiH&amp;g)=delete;
    GradjaninBiH&amp;operator=(const GradjaninBiH&amp;g)=delete;
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol);
<a name="3"></a><font color="#00FFFF"><a href="match131-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    std::string DajImeIPrezime() const{return imeprezime;}
    long long int DajJMBG() const{return JMBG;}
    int DajDanRodjenja() const{return dan;}
    int DajMjesecRodjenja() const{return mjesec;}
    int DajGodinuRodjenja() const{return godina;}
    int DajSifruRegije() const{return regija;}
    Pol DajPol() const{return pol;}
    void PromijeniImeIPrezime(std::string novo_ime);
</font>    ~GradjaninBiH();
};
GradjaninBiH* GradjaninBiH::prvi=nullptr;
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime,long long int jmbg){
    auto temp1(prethodni);
    auto temp2(prvi);
    prethodni=prvi;
    prvi=this;
    if(IstiJMBG(jmbg)){
        prethodni=temp1;
        prvi=temp2;
        throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
    }
    imeprezime=ime_i_prezime;
    JMBG=jmbg;
    sifra=jmbg%10; jmbg/=10;
    int polovi(jmbg%1000);
    if(polovi&lt;500) pol=Musko;
    else pol=Zensko;
    jmbg/=1000;
    regija=jmbg%100;
    jmbg/=100;
<a name="7"></a><font color="#0000FF"><a href="match131-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    godina=jmbg%1000;
    if(godina&lt;18)godina+=2000;
    else godina+=1000;
    jmbg/=1000;
    mjesec=jmbg%100; jmbg/=100;
    dan=jmbg%100;
</font><a name="1"></a><font color="#00FF00"><a href="match131-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    int brdana[12]={31,28,31,30,31,30,31,31,30,31,30,31};
    if((godina%4==0 &amp;&amp; godina%100==0)||godina%400==0)brdana[1]++;
    if(regija&lt;0 || regija&gt;99 || godina&lt;1 || mjesec&lt;1 || dan&lt;1 || mjesec&gt;12 || dan&gt;brdana[mjesec-1]){
</font>        prethodni=temp1;
        prvi=temp2;
        throw std::logic_error("JMBG nije validan");
    }
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol polovi){
<a name="2"></a><font color="#0000FF"><a href="match131-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        int brdana[12]={31,28,31,30,31,30,31,31,30,31,30,31};
        if((godina_rodjenja%4==0 &amp;&amp; godina_rodjenja%100==0)||godina_rodjenja%400==0)brdana[1]++;
        if(sifra_regije&lt;0||sifra_regije&gt;99||godina_rodjenja&lt;1||mjesec_rodjenja&lt;1||dan_rodjenja&lt;1||mjesec_rodjenja&gt;12||dan_rodjenja&gt;brdana[mjesec_rodjenja-1])
</font>            throw std::logic_error("Neispravni podaci");
        imeprezime=ime_i_prezime; dan=dan_rodjenja; mjesec=mjesec_rodjenja;
        godina=godina_rodjenja; regija=sifra_regije; pol=polovi;
        prethodni=prvi;
        prvi=this;
        long long int x(0);
        int c[14];
        c[1]=dan_rodjenja/10;
        c[2]=dan_rodjenja%10;
        c[3]=mjesec_rodjenja/10;
        c[4]=mjesec_rodjenja%10;
        c[5]=(godina_rodjenja%1000)/100;
        c[6]=(godina_rodjenja%100)/10;
        c[7]=godina_rodjenja%10;
        c[8]=sifra_regije/10;
        c[9]=sifra_regije%10;
        int kod;
        if(pol==Musko)kod=0;
        else kod=500;
<a name="11"></a><font color="#00FF00"><a href="match131-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        kod+=IstiKod(pol,dan,mjesec,godina,regija);
        c[10]=kod/100;
        c[11]=(kod%100)/10;
        c[12]=kod%10;
</font>        bool trinaest(true);
        do{
            trinaest=false;
            c[13]=11-(7*(c[1]+c[7])+6*(c[2]+c[8])+5*(c[3]+c[9])+4*(c[4]+c[10])+3*(c[5]+c[11])+2*(c[6]+c[12]))%11;
            if (c[13]==11)c[13]=0;
            if (c[13]==10){
                do{
                    trinaest=true;
                    kod++;c[10]=kod/100;c[11]=(kod%100)/10;c[12]=kod%10;
                    long long int faktor(1);  
                    x=0;
                    for(int i=13;i&gt;0;i--){
                        x+=c[i]*faktor;
                        faktor*=10;
                    }
                }while(!IstiJMBG(x));
            }
            else{
                x=0;
                long long int faktor(1);
                for(int i=13;i&gt;0;i--){
                    x+=c[i]*faktor;
                    faktor*=10;
                }
            }
        }while(trinaest);
        JMBG=x;
    }
void GradjaninBiH::PromijeniImeIPrezime(std::string novo_ime){
    imeprezime=novo_ime;
}
bool GradjaninBiH::IstiJMBG(long long int temp){
    long long int broj=temp;
    GradjaninBiH *pok(prethodni);
    while (pok!=nullptr){
        //std::cout&lt;&lt;"Isti JMBG";
        if (broj==pok-&gt;JMBG) return true;
        pok=pok-&gt;prethodni;
    }
    return false;
}
int GradjaninBiH::IstiKod(Pol spol,int d,int m,int g,int s){
    int brojac(0);
    GradjaninBiH *pok(prethodni);
    while (pok!=nullptr){
<a name="9"></a><font color="#FF00FF"><a href="match131-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        if(spol==pok-&gt;pol &amp;&amp; d==pok-&gt;dan &amp;&amp; m==pok-&gt;mjesec &amp;&amp; g==pok-&gt;godina &amp;&amp; s==pok-&gt;regija)brojac++;
        pok=pok-&gt;prethodni;
    }
    return brojac;
</font>}
<a name="5"></a><font color="#FF0000"><a href="match131-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

GradjaninBiH::~GradjaninBiH(){
    if(prvi==this) prvi=this-&gt;prethodni;
    else{
    auto p1(prvi);
    auto p2(p1-&gt;prethodni);
    while(p2!=this &amp;&amp; p2!=nullptr){
        p1=p1-&gt;prethodni;
        p2=p2-&gt;prethodni;
</font>    }
    if(p2==nullptr) p1-&gt;prethodni=nullptr;
    else p1-&gt;prethodni=p2-&gt;prethodni;
    }     
}
int main ()
{
    GradjaninBiH* niz[100]{};
    int n(0);
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? \n";
    int a;
    std::cin&gt;&gt;a;
    for(int i=0;i&lt;a;i++){
        try{
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): \n";
        std::string ime;
        std::cin.ignore(1000,'\n');
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite JMBG: \n";
<a name="4"></a><font color="#FF00FF"><a href="match131-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        long long int x;
        std::cin&gt;&gt;x;
        niz[n]=new GradjaninBiH(ime,x);
        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[n]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;niz[n]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;niz[n]-&gt;DajMjesecRodjenja()&lt;&lt;"."
</font><a name="6"></a><font color="#00FF00"><a href="match131-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        &lt;&lt;niz[n]-&gt;DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;niz[n]-&gt;DajSifruRegije()&lt;&lt;", ";
        if(niz[n]-&gt;DajPol()==GradjaninBiH::Musko)std::cout&lt;&lt;"musko.\n";else std::cout&lt;&lt;"zensko.\n";
</font>        n++;
        }catch(std::logic_error a){
            std::cout&lt;&lt;a.what()&lt;&lt;std::endl;
            i--;
        }
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? \n";
    int b;
    std::cin&gt;&gt;b;
    for(int i=0;i&lt;b;i++){
      try{
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): \n";
        std::string ime;
        std::cin.ignore(1000,'\n');
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): \n";
        char znak;
        int d,m,g;
        std::cin&gt;&gt;d&gt;&gt;znak&gt;&gt;m&gt;&gt;znak&gt;&gt;g;
        std::cout&lt;&lt;"Unesite sifru regije: \n";
        int sifra; std::cin&gt;&gt;sifra;
        std::cout&lt;&lt;"Unesite M za musko, Z za zensko: \n";
<a name="0"></a><font color="#FF0000"><a href="match131-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        std::cin&gt;&gt;znak;
        GradjaninBiH::Pol pol;
        if(znak=='M')pol=GradjaninBiH::Pol::Musko;
        else pol=GradjaninBiH::Pol::Zensko;
        niz[n]= new GradjaninBiH(ime,d,m,g,sifra,pol);
        std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[n]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[n]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
</font>        n++;
<a name="8"></a><font color="#00FFFF"><a href="match131-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        }catch(std::logic_error a){std::cout&lt;&lt;a.what()&lt;&lt;std::endl; i--;}
      }
      for(int i=0;i&lt;n;i++)delete niz[i];
</font>	return 0;
}</pre>
</body>
</html>
