<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1671.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1671.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

class GradjaninBiH {
    public:
    enum Pol {Musko, Zensko};
    
    private:
    std::string ime_i_prezime;
    long long int jmbg;
    int dan_rodjenja;
    int mjesec_rodjenja;
    int godina_rodjenja;
    int sifra_regije;
    Pol pol;
    void ProvjeriJMBG(long long int jmbg);//
    int KontrolnaCifra(long long int jmbg);//
    static int DajCifru(long long int jmbg, int cifra);//
    int BrojCifara(long long int jmbg);//
    static void OcitajInformacije(long long int jmbg, int &amp;dan_rodjenja, int &amp;mjesec_rodjenja, int &amp;godina_rodjenja, int &amp;sifra_regije, Pol &amp;pol);//
    static bool ProvjeriDatum(int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja);//
    GradjaninBiH *prethodni;
    static GradjaninBiH *posljednji;
    public:
<a name="0"></a><font color="#FF0000"><a href="match207-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);//
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);//
    std::string DajImeIPrezime() const { return ime_i_prezime; }//
    long long int DajJMBG() const { return jmbg; }; //
    int DajDanRodjenja() const { return dan_rodjenja; } //
    int DajMjesecRodjenja() const { return mjesec_rodjenja; } //
    int DajGodinuRodjenja() const { return godina_rodjenja; } //
    int DajSifruRegije() const { return sifra_regije; } //
    Pol DajPol() const { return pol; } //
    void PromijeniImeIPrezime(std::string novo_ime) { ime_i_prezime = novo_ime; } //
</font>    ~GradjaninBiH();
    GradjaninBiH(const GradjaninBiH &amp;g) = delete;
    GradjaninBiH &amp;operator =(const GradjaninBiH &amp;g) = delete;
};
GradjaninBiH *GradjaninBiH::posljednji(nullptr);
GradjaninBiH::~GradjaninBiH() {
    if (posljednji == this) posljednji = prethodni, prethodni = nullptr;
    else if(this-&gt;prethodni) {
        auto pom = GradjaninBiH::posljednji;
        while (pom-&gt;prethodni != this) pom--;
        pom-&gt;prethodni = this-&gt;prethodni;
        this-&gt;prethodni = nullptr;
    }
}
<a name="4"></a><font color="#FF00FF"><a href="match207-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol) {
    if (!ProvjeriDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja)) throw std::logic_error ("Neispravni podaci");
</font>    if (sifra_regije &lt; 0 || sifra_regije &gt; 99) throw std::logic_error ("Neispravni podaci");
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    GradjaninBiH::dan_rodjenja = dan_rodjenja;
    GradjaninBiH::mjesec_rodjenja = mjesec_rodjenja;
    GradjaninBiH::godina_rodjenja = godina_rodjenja;
    GradjaninBiH::sifra_regije = sifra_regije;
    GradjaninBiH::pol = pol;
    auto pom(posljednji);
    int sifra(0);
    while (pom) {
        if (pom-&gt;DajDanRodjenja() == dan_rodjenja &amp;&amp; pom-&gt;DajMjesecRodjenja() == mjesec_rodjenja &amp;&amp; pom-&gt;DajGodinuRodjenja() == godina_rodjenja
        &amp;&amp; pom-&gt;DajSifruRegije() == sifra_regije &amp;&amp; pom-&gt;DajPol() == pol) sifra++;
        pom = pom-&gt;prethodni;
    }
    if (pol == Pol::Zensko) sifra += 500;
    int mat_broj[13] = {0};
    mat_broj[1] = dan_rodjenja%10; dan_rodjenja /= 10;
    mat_broj[0] = dan_rodjenja;
    mat_broj[3] = mjesec_rodjenja%10; mjesec_rodjenja /= 10;
    mat_broj[2] = mjesec_rodjenja;
    mat_broj[6] = godina_rodjenja%10; godina_rodjenja /= 10;
    
    mat_broj[5] = godina_rodjenja%10; godina_rodjenja /= 10;
    mat_broj[4] = godina_rodjenja%10;
    mat_broj[8] = sifra_regije%10; sifra_regije /= 10;
    mat_broj[7] = sifra_regije;
    mat_broj[11] = sifra%10; sifra /= 10;
    mat_broj[10] = sifra%10; sifra /= 10;
    mat_broj[9] = sifra%10;
    mat_broj[12] = 0;
    long long int jmbg_pom(0);
    for (int i = 0; i &lt; 13; i++) jmbg_pom *= 10, jmbg_pom += mat_broj[i];
    auto kontrolni(GradjaninBiH::KontrolnaCifra(jmbg_pom));
    if (kontrolni == 11) kontrolni = 0;
    jmbg_pom += kontrolni;
    jmbg = jmbg_pom;
    prethodni = posljednji;
    posljednji = this;
};
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg)  {
    ProvjeriJMBG(jmbg);
    if (posljednji) {
        auto pom(GradjaninBiH::posljednji);
        while (pom) {
            if (pom-&gt;DajJMBG() == jmbg) throw std::logic_error ("Vec postoji gradjanin sa istim JMBG");
            pom = pom-&gt;prethodni;
        }
    }
    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije;
    Pol pol;
    OcitajInformacije(jmbg, dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, pol);
    GradjaninBiH::ime_i_prezime = ime_i_prezime;
    GradjaninBiH::jmbg = jmbg;
    GradjaninBiH::dan_rodjenja = dan_rodjenja;
    GradjaninBiH::mjesec_rodjenja = mjesec_rodjenja;
    GradjaninBiH::godina_rodjenja = godina_rodjenja;
    GradjaninBiH::sifra_regije = sifra_regije;
    GradjaninBiH::pol = pol;
    prethodni = posljednji;
    posljednji = this;
};
<a name="5"></a><font color="#FF0000"><a href="match207-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

bool GradjaninBiH::ProvjeriDatum(int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja) {
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if (godina_rodjenja % 4 == 0 &amp;&amp; godina_rodjenja % 100 != 0 || godina_rodjenja % 400 == 0) broj_dana[1]++;
    if (godina_rodjenja &lt; 1 || mjesec_rodjenja &lt; 1 || mjesec_rodjenja &gt; 12 || dan_rodjenja &lt; 1 || dan_rodjenja &gt; broj_dana[mjesec_rodjenja-1])
        return false;
    return true;
}
void GradjaninBiH::OcitajInformacije(long long int jmbg, int &amp;dan_rodjenja, int &amp;mjesec_rodjenja, int &amp;godina_rodjenja, int &amp;sifra_regije, Pol &amp;pol) {
    dan_rodjenja = DajCifru(jmbg, 1) * 10 + DajCifru(jmbg, 2);
    mjesec_rodjenja = DajCifru(jmbg, 3) * 10 + DajCifru(jmbg, 4);
    godina_rodjenja = DajCifru(jmbg, 5) * 100 + DajCifru(jmbg, 6) * 10 + DajCifru(jmbg, 7);
    if (godina_rodjenja &lt;= 17) godina_rodjenja += 2000;
    else godina_rodjenja += 1000;
    sifra_regije = DajCifru(jmbg, 8) * 10 + DajCifru(jmbg, 9);
    if (DajCifru(jmbg, 10) &lt; 5) pol = Musko;
    else pol = Zensko;
}
int GradjaninBiH::DajCifru(long long int jmbg, int cifra) {
    for (int i = 13; jmbg != 0; i--) {
        if (i == cifra) return jmbg%10;
        jmbg /= 10;
    }
    return 0; //12 cifara;
}
int GradjaninBiH::KontrolnaCifra(long long int jmbg) {
    return 11 - (7 * (DajCifru(jmbg, 1) + DajCifru(jmbg, 7)) + 6 * (DajCifru(jmbg, 2) + DajCifru(jmbg, 8)) + 5 * (DajCifru(jmbg, 3) + DajCifru(jmbg, 9))
    + 4 * (DajCifru(jmbg, 4) + DajCifru(jmbg, 10)) + 3 * (DajCifru(jmbg, 5) + DajCifru(jmbg, 11)) + 2 * (DajCifru(jmbg, 6) + DajCifru(jmbg, 12)))%11;
}
int GradjaninBiH::BrojCifara(long long int jmbg) {
    int brojac(0);
    while (jmbg) brojac++, jmbg /= 10;
    return brojac;
}
void GradjaninBiH::ProvjeriJMBG(long long int jmbg) {
    auto broj_cifara(BrojCifara(jmbg));
    if (broj_cifara != 12 &amp;&amp; broj_cifara != 13) throw std::logic_error ("JMBG nije validan");
    if (KontrolnaCifra(jmbg) == 10) throw std::logic_error ("JMBG nije validan");
    int dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije;
    Pol pol;
    OcitajInformacije(jmbg, dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, pol);
    if (!ProvjeriDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja)) throw std::logic_error ("JMBG nije validan");
}

int main ()
{
	try {
	    GradjaninBiH *niz[100];
	    int n;
<a name="3"></a><font color="#00FFFF"><a href="match207-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? " &lt;&lt; std::endl;
	    std::cin &gt;&gt; n;
	    for (int i = 0; i &lt; n; i++) {     
	        std::cin.ignore(10000, '\n');
	        std::string ime_i_prezime;
</font>	        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match207-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

	        std::getline(std::cin, ime_i_prezime);
	        long long int jmbg;
	        std::cout &lt;&lt; "Unesite JMBG: " &lt;&lt; std::endl;
	        std::cin &gt;&gt; jmbg;
	        try {
	            niz[i] = new GradjaninBiH(ime_i_prezime, jmbg);
	            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; niz[i]-&gt;DajDanRodjenja()
</font><a name="6"></a><font color="#00FF00"><a href="match207-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

	            &lt;&lt; "." &lt;&lt;  niz[i]-&gt;DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; niz[i]-&gt;DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; niz[i]-&gt;DajSifruRegije() &lt;&lt; ", ";
	            if (niz[i]-&gt;DajPol() == GradjaninBiH::Pol::Musko) std::cout &lt;&lt; "musko." &lt;&lt; std::endl;
</font>	            else std::cout &lt;&lt; "zensko." &lt;&lt; std::endl;;
	        }
	        catch (std::logic_error e) {
	            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	            i--;
	        }
	    }
	    int m;
	    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
	    std::cin &gt;&gt; m;
	    for (int i = n; i &lt; n + m; i++) {
	        std::cin.ignore(10000, '\n');
	        std::string ime_i_prezime;
	        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;
	        std::getline(std::cin, ime_i_prezime);
	        int dan_rodjenja, mjesec_rodjenja, godina_rodjenja;
	        char znak1, znak2;
	        std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl;
	        std::cin &gt;&gt; dan_rodjenja &gt;&gt; znak1 &gt;&gt; mjesec_rodjenja &gt;&gt; znak2 &gt;&gt; godina_rodjenja;
	        int sifra_regije;
	        std::cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; std::endl;
	        std::cin &gt;&gt; sifra_regije;
	        char gender;
	        std::cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; std::endl;
	        std::cin &gt;&gt; gender;
	        GradjaninBiH::Pol pol(GradjaninBiH::Musko);
	        if (gender == 'Z') pol = GradjaninBiH::Zensko;
<a name="2"></a><font color="#0000FF"><a href="match207-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	        try {
	            niz[i] = new GradjaninBiH(ime_i_prezime, dan_rodjenja, mjesec_rodjenja, godina_rodjenja, sifra_regije, pol);
	            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; niz[i]-&gt;DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; niz[i]-&gt;DajJMBG() &lt;&lt; "." &lt;&lt; std::endl;
</font>	        }
	        catch(std::logic_error e) {
	            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	            i--;
	        }
	        
	    }
	    
	}
	catch(...) {
	    
	}
	return 0;
}</pre>
</body>
</html>
