<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1453.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student1453.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

bool IspravanDatum(int dan, int mjesec, int godina){
    if(mjesec&gt;12||mjesec&lt;1) return false;
    if(godina&lt;0) return false;
    if(mjesec==1 || mjesec==3 || mjesec==5 || mjesec==7 || mjesec==8 || mjesec==10 || mjesec==12){
        if(dan&gt;31 || dan&lt;1) return false;
    }
    if(mjesec==4 || mjesec==6 || mjesec==9 || mjesec==11){
        if(dan&gt;30 || dan&lt;1) return false;
    }
    if(mjesec==2){
        if(godina%4==0 &amp;&amp; godina%100!=0 || godina%400==0){
           // if(g % 4 == 0 &amp;&amp; g % 100 != 0 || g % 400 == 0) 
            if(dan&gt;29|| dan&lt;1) return false;
        }else{
            if(dan&gt;28|| dan&lt;1) return false;
        }
    }
    return true;
}
void IspravanJMBG(long long int broj){
    int niz[13], i(12), brojac(0);
    while(broj!=0){
        niz[i]=broj%10;
        broj/=10;
        brojac++;
        i--;
    }
    if(brojac==13){
        if(IspravanDatum(niz[0]*10+niz[1],niz[2]*10+niz[3],1000+niz[4]*100+niz[5]*10+niz[6])==false) 
            throw std::logic_error("JMBG nije validan");
    }
    if(brojac==12){
        if(IspravanDatum(niz[0],niz[1]*10+niz[2],1000+niz[3]*100+niz[4]*10+niz[5])==false) 
            throw std::logic_error("JMBG nije validan");
    }
    if(brojac!=12 &amp;&amp; brojac!=13) throw std::logic_error("JMBG nije validan");
    
}

class GradjaninBiH{
        std::string ime;
        long long int JMBG;
        GradjaninBiH *pok;
        static GradjaninBiH *zadnji;
        int muski=0, zenski=500;
        int dan;
        int mjesec;
        int godina;
        int sifra;
        bool spol;
        
    public:
        enum Pol{Musko,Zensko};
        GradjaninBiH (std::string ime_i_prezime, long long int jmbg);
        GradjaninBiH (std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
        std::string DajImeIPrezime() const{return ime;}
        long long int DajJMBG() const {return JMBG;}
        int DajMjesecRodjenja() const {return mjesec;}
        int DajDanRodjenja()const {return dan;}
        int DajGodinuRodjenja() const {return godina;}
        int DajSifruRegije() const{return sifra;}
        Pol DajPol() const{
            if(spol) return Musko;
            else return Zensko;
        }
        void PromijeniImeIPrezime(std::string novo_ime){ime=novo_ime;}
        ~GradjaninBiH(){
            auto p(zadnji);
            while(p-&gt;pok!=pok) p=p-&gt;pok;
            p-&gt;pok=pok;
            pok=nullptr;
            
        }
};
GradjaninBiH* GradjaninBiH::zadnji=nullptr;
int main (){
    GradjaninBiH *g[100];
    for(int i=0;i&lt;100;i++)g[i]=nullptr;
    int n,z,br=0;
    
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG?" &lt;&lt; std::endl;
    std::cin &gt;&gt; n;
    for(int i=0;i&lt;n;i++){
        std::string ime;
        long long int jmbg;
<a name="0"></a><font color="#FF0000"><a href="match910-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cin.ignore(1000,'\n');
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::getline(std::cin,ime);
        std::cout &lt;&lt; "Unesite JMBG: "&lt;&lt;std::endl;
        std::cin &gt;&gt; jmbg;
</font>        try{
<a name="2"></a><font color="#0000FF"><a href="match910-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        g[br]=new GradjaninBiH(ime,jmbg);
        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt;g[br]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;g[br]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;g[br]-&gt;DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;g[br]-&gt;DajGodinuRodjenja()
</font>        &lt;&lt;" u regiji "&lt;&lt;g[br]-&gt;DajSifruRegije();
<a name="1"></a><font color="#00FF00"><a href="match910-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        if(g[br]-&gt;DajPol()==GradjaninBiH::Musko)std::cout &lt;&lt; ", musko." &lt;&lt; std::endl;
        else std::cout &lt;&lt; ", zensko." &lt;&lt; std::endl;
        }catch(std::logic_error e){
            std::cout &lt;&lt; e.what()&lt;&lt;std::endl;
</font>            i--;
        }
        br++;
    }
    
    
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu?"&lt;&lt;std::endl;
    std::cin &gt;&gt; z;
    for(int i=0;i&lt;z;i++){
        std::string ime;
        int dan,mjesec,godina;
        int sifra;
        GradjaninBiH::Pol pol;
        std::cin.ignore(1000,'\n');
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::getline(std::cin,ime);
        std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
        char znak;
<a name="3"></a><font color="#00FFFF"><a href="match910-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cin &gt;&gt; dan&gt;&gt;znak&gt;&gt;mjesec&gt;&gt;znak&gt;&gt;godina;
        std::cout &lt;&lt; "Unesite sifru regije: "&lt;&lt;std::endl;
        std::cin &gt;&gt; sifra;
        std::cout &lt;&lt; "Unesite M za musko, Z za zensko: " &lt;&lt; std::endl;
</font>        char a;
        std::cin &gt;&gt; a;
        if(a=='M') pol=GradjaninBiH::Musko;
        if(a=='Z') pol=GradjaninBiH::Zensko;
        try{
        g[br]=new GradjaninBiH(ime,dan,mjesec,godina,sifra,pol);
<a name="4"></a><font color="#FF00FF"><a href="match910-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt;g[br]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;g[br]-&gt;DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
        }catch(std::logic_error e){
            std::cout &lt;&lt; e.what()&lt;&lt;std::endl;
</font>            i--;
        }
        br++;
    }
    for(int i=0;i&lt;=br;i++) delete g[i];
    
    
	return 0;
}

GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, long long int jmbg){
    try{
        IspravanJMBG(jmbg);
    }catch(std::logic_error){ 
        throw;
    }
    pok=zadnji;
    zadnji=this;
    auto p=pok;
    while(p!=nullptr){
        if(jmbg==p-&gt;JMBG) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        p=p-&gt;pok;
    }
    JMBG=jmbg;
    ime=ime_i_prezime;
    auto broj(jmbg);
    int niz[13], i(12);
    niz[0]=0;
    while(broj!=0){
        niz[i]=broj%10;
        broj/=10;
        i--;
    }
    dan=niz[0]*10+niz[1];
    mjesec=niz[2]*10+niz[3];
    godina=niz[4]*100+niz[5]*10+niz[6];
    if(godina&lt;100) godina+=2000;
    else godina+=1000;
    sifra=niz[7]*10+niz[8];
    if(niz[9]&lt;5) spol=true;
    else spol=false;
    
}

GradjaninBiH::GradjaninBiH (std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
    if(IspravanDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)==false) throw std::logic_error("Neispravni podaci");
    if(sifra_regije&lt;0 || sifra_regije&gt;99) throw std::logic_error("Neispravni podaci");
    pok=zadnji;
    zadnji=this;
    auto p=pok;
    int g=godina_rodjenja%1000;
    while(p!=nullptr){
        if(dan_rodjenja==p-&gt;dan &amp;&amp; mjesec_rodjenja==p-&gt;mjesec&amp;&amp;godina_rodjenja==p-&gt;godina){
            if(p-&gt;spol==true &amp;&amp; pol==Musko) muski++;
            if(p-&gt;spol==false &amp;&amp; pol==Zensko) zenski++;
        }
        p=p-&gt;pok;
    }
    long long int j;
    if(pol==Musko){
        j=muski*10+10000*sifra_regije+1000000*g+1000000000*(long long int)mjesec_rodjenja+100000000000*dan_rodjenja;
        
    }
    if(pol==Zensko){
        j=zenski*10+10000*sifra_regije+1000000*g+1000000000*(long long int)mjesec_rodjenja+100000000000*dan_rodjenja;
    }
    p=pok;
    while(p!=nullptr){
        if(j==p-&gt;JMBG) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        p=p-&gt;pok;
    }
    
    int s;
    if(pol==Musko) s=muski;
    else s=zenski;
    
    int c13(11-(7*(dan_rodjenja/10+g%10)+6*(dan_rodjenja%10+sifra_regije/10)+ 
        5*(mjesec_rodjenja/10+sifra_regije%10)+ 4*(mjesec_rodjenja%10+s/100)+3*(g/100+(s%100)/10) 
        + 2*((g%100)/10+s%10))%11);
    if(c13==11) c13=0;
    if(c13==10) throw std::logic_error("JMBG nije validan");
    j+=c13;
    JMBG=j;
    ime=ime_i_prezime;
    dan=dan_rodjenja;
    mjesec=mjesec_rodjenja;
    godina=godina_rodjenja;
    sifra=sifra_regije;
    if(pol==Musko) spol=true;
    else spol=false;
    
    
}</pre>
</body>
</html>
