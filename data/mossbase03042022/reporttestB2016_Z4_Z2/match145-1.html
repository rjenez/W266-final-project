<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8638.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;



class GradjaninBiH{
std::string name;
long long int jmbg;
long long int *pok_na_prosli_jmbg = nullptr;
public:
enum Pol {Musko, Zensko};
bool DaLiJeValidanJMBG(long long int jmbg);
bool DaLiJeValidanDatum(int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja);
int Formula_za_posljednji_broj(int dan, int mjesec, int godina, int sifra_regije, Pol pol);

GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
std::string DajImeIPrezime() const { return GradjaninBiH::name; }
long long int DajJMBG() const { return GradjaninBiH::jmbg;}
int DajDanRodjenja() const;
int DajMjesecRodjenja() const;
int DajGodinuRodjenja() const;
int DajSifruRegije() const;
Pol DajPol() const;
void PromijeniImeIPrezime(std::string novo_ime) { GradjaninBiH::name = novo_ime; }
};

int GradjaninBiH::Formula_za_posljednji_broj(int dan, int mjesec, int godina, int sifra_regije, Pol pol){
    
    int niz[13];
    
    niz[0] = (dan / 10) % 10;
    niz[1] = dan % 10;
    niz[2] = (mjesec / 10) % 10;
    niz[3] = mjesec % 10;
    niz[4] = (godina/100)%10;
    niz[5] = (godina/10)%10;
    niz[6] = godina%10;
    niz[7] = (sifra_regije/10)%10;
    niz[8] =  sifra_regije%10;
    int kod; if(pol == Pol::Musko) kod = 0; if(pol == Pol::Zensko)kod = 500;
    niz[9] = (kod / 100)%10;
    niz[10] = (kod/10)%10;
    niz[11] = kod%10;
    
    return 11 - (7*(niz[0]+niz[6]) + 6*(niz[1]+niz[7]) + 5*(niz[2]+niz[8]) + 4*(niz[3]+niz[9]) + 3*(niz[4]+niz[10]) + 2*(niz[5]+niz[11])) %11;
}

bool GradjaninBiH::DaLiJeValidanJMBG(long long int jmbg){
    
    long long int broj = jmbg;
    while(broj &gt; 100)
        broj /= 10;
    int dan = (broj%10) + ((broj/10)%10) * 10;
    
    broj = jmbg;
    while(broj &gt; 10000)
        broj /= 10;
    int mjesec = (broj%10) + ((broj/10)%10) * 10;
    
    broj = jmbg;
     while(broj &gt; 10000000)
        broj /= 10;
    int godina = 1000 + (broj%10) + ((broj/10)%10) * 10 + ((broj/100)%10) * 100;
    
    broj = jmbg;
    while(broj &gt; 1000000000)
        broj /= 10;
    int sifra = (broj%10) + ((broj/10)%10) * 10 ;
    
    broj = jmbg;
    broj /= 10;
    Pol pol;
    if( (broj%10) + ((broj/10)%10) * 10 + ((broj/100)%10) * 100 &lt; 500) pol = Pol::Musko;
    else pol = Pol::Zensko;
    
    
    //if(DaLiJeValidanDatum(dan, mjesec, godina) == false) return false;
    if( (jmbg%10) == 0 &amp;&amp; (Formula_za_posljednji_broj(dan, mjesec, godina, sifra, pol)) == 11) return true;
    else if( (jmbg%10) != (Formula_za_posljednji_broj(dan, mjesec, godina, sifra, pol)) || (Formula_za_posljednji_broj(dan, mjesec, godina, sifra, pol)) == 10) return false;
    return true;
}

bool GradjaninBiH::DaLiJeValidanDatum(int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja){
    int broj_dana[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    
    if((godina_rodjenja % 4 == 0 &amp;&amp; godina_rodjenja % 100 != 0) || godina_rodjenja % 400 == 0) broj_dana[1]++;
    if(godina_rodjenja &lt; 1 || dan_rodjenja &lt; 1 || mjesec_rodjenja &lt; 1 || mjesec_rodjenja &gt; 12 || dan_rodjenja &gt; broj_dana[mjesec_rodjenja-1]) 
        return false;
        
    return true;
}

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) {
    if(pok_na_prosli_jmbg != nullptr){
        if(*pok_na_prosli_jmbg == jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
    }
    if(DaLiJeValidanJMBG(jmbg) == false) throw std::logic_error("JMBG nije validan");
    GradjaninBiH::name = ime_i_prezime; GradjaninBiH::jmbg = jmbg;
}

<a name="6"></a><font color="#00FF00"><a href="match145-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
    if(DaLiJeValidanDatum(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) == false) throw std::logic_error("Neispravni podaci");
</font>    if(sifra_regije &lt; 0 || sifra_regije &gt; 99) throw std::logic_error("Neispravni podaci");
    
    GradjaninBiH::name = ime_i_prezime;
    int niz[13];
    
    niz[0] = (dan_rodjenja / 10) % 10;
    niz[1] = dan_rodjenja % 10;
    niz[2] = (mjesec_rodjenja / 10) % 10;
    niz[3] = mjesec_rodjenja % 10;
    niz[4] = (godina_rodjenja/100)%10;
    niz[5] = (godina_rodjenja/10)%10;
    niz[6] = godina_rodjenja%10;
    niz[7] = (sifra_regije/10)%10;
    niz[8] =  sifra_regije%10;
    
    int kod;
    if(pol == Pol::Musko) kod = 0;
    if(pol == Pol::Zensko)kod = 500;
    
    if(pok_na_prosli_jmbg != nullptr){
    int pomocni[13]; long long int temp = *pok_na_prosli_jmbg;
    for(int i=0; i&lt;13; i++){
        pomocni[i] = temp%10;
        temp /= 10;
    }
    bool ista_regija(true);
    for(int i=0; i&lt;9; i++){
        if(niz[i] != pomocni[i]){
            ista_regija = false;
            break;
        }
    }
    if(ista_regija) kod++;
    }
    
    niz[9] = (kod / 100)%10;
    niz[10] = (kod/10)%10;
    niz[11] = kod%10;
    niz[12] = 11 - (7*(niz[0]+niz[6]) + 6*(niz[1]+niz[7]) + 5*(niz[2]+niz[8]) + 4*(niz[3]+niz[9]) + 3*(niz[4]+niz[10]) + 2*(niz[5]+niz[11])) %11;
    if(niz[12] == 11) niz[12] = 0;
    
    long long int k = 1; long long int JBG(0); int i = 12;
    while(i &gt;= 0){
        JBG += k * niz[i];
        k *= 10;
        i--;
    }
    GradjaninBiH::jmbg= JBG;
}

int GradjaninBiH::DajDanRodjenja() const{
    long long int broj = GradjaninBiH::jmbg;
    while(broj &gt; 100)
        broj /= 10;
    return (broj%10) + ((broj/10)%10) * 10;
}

int GradjaninBiH::DajMjesecRodjenja() const {
    long long int broj = GradjaninBiH::jmbg;
    while(broj &gt; 10000)
        broj /= 10;
    return (broj%10) + ((broj/10)%10) * 10;
}

int GradjaninBiH::DajGodinuRodjenja() const {
    
    long long int broj = GradjaninBiH::jmbg;
    while(broj &gt; 10000000)
        broj /= 10;
    int godina;
    if(((broj/100)%10) == 0) godina = 2000 + (broj%10) + ((broj/10)%10) * 10 + ((broj/100)%10) * 100;
    else godina = 1000 + (broj%10) + ((broj/10)%10) * 10 + ((broj/100)%10) * 100;
    return godina;
}

int GradjaninBiH::DajSifruRegije() const {
    
    long long int broj = GradjaninBiH::jmbg;
    while(broj &gt; 1000000000)
        broj /= 10;
    return (broj%10) + ((broj/10)%10) * 10 ;
}

GradjaninBiH::Pol GradjaninBiH::DajPol() const{
    
    long long int broj = GradjaninBiH::jmbg;
    broj /= 10;
    
    if( (broj%10) + ((broj/10)%10) * 10 + ((broj/100)%10) * 100 &lt; 500) return Pol::Musko;
    return Pol::Zensko;
}

<a name="5"></a><font color="#FF0000"><a href="match145-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

int main (){
    
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po JMBG? "&lt;&lt; std::endl;
    int br1;
    std::cin &gt;&gt; br1;
    std::cin.clear();
    std::cin.ignore(10000, '\n');
</font>    
    
    std::string ime;
    long long int jmbg;
<a name="3"></a><font color="#00FFFF"><a href="match145-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    for(int i=0; i&lt;br1; i++){
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): " &lt;&lt; std::endl;  std::getline(std::cin, ime);
        std::cout &lt;&lt; "Unesite JMBG: " &lt;&lt; std::endl; std::cin &gt;&gt; jmbg;
        try{ 
            GradjaninBiH g1(ime, jmbg);
            ime.clear();
            std::cin.clear();
            std::cin.ignore(10000,'\n');
</font><a name="0"></a><font color="#FF0000"><a href="match145-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; g1.DajImeIPrezime() &lt;&lt; " rodjenog " &lt;&lt; g1.DajDanRodjenja() &lt;&lt; "." &lt;&lt; g1.DajMjesecRodjenja() &lt;&lt; "." &lt;&lt; g1.DajGodinuRodjenja() &lt;&lt; " u regiji " &lt;&lt; g1.DajSifruRegije() &lt;&lt; ", " ;
        if(g1.DajPol() == GradjaninBiH::Pol::Musko) std::cout &lt;&lt; "musko." &lt;&lt; std::endl;
        else std::cout &lt;&lt; "zensko."&lt;&lt; std::endl;
        }
        catch(std::logic_error e){
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
            ime.clear();
            std::cin.clear();
            std::cin.ignore(10000,'\n');
        }
        
        ime.erase();
    }
    
    std::cout &lt;&lt; "Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? " &lt;&lt; std::endl;
    int br2;
    std::cin &gt;&gt; br2;
    std::cin.clear();
    std::cin.ignore(10000, '\n');
    
    std::string ime_i_prezime;
    int dan, mjesec, god, sifra;
    char spol, gutac;
</font>    GradjaninBiH::Pol pol;
<a name="4"></a><font color="#FF00FF"><a href="match145-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    for(int i=0; i&lt;br2; i++){
        std::cout &lt;&lt; "Unesite ime i prezime (u istom redu): "&lt;&lt; std::endl; std::getline(std::cin, ime_i_prezime);
        std::cout &lt;&lt; "Unesite datum rodjenja (format dd/mm/gggg): " &lt;&lt; std::endl; std::cin &gt;&gt; dan; std::cin &gt;&gt; gutac; std::cin &gt;&gt; mjesec; std::cin &gt;&gt; gutac; std::cin &gt;&gt; god;
</font><a name="1"></a><font color="#00FF00"><a href="match145-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        std::cout &lt;&lt; "Unesite sifru regije: " &lt;&lt; std::endl; std::cin &gt;&gt; sifra;
        std::cout &lt;&lt; "Unesite M za musko, Z za zensko: "&lt;&lt; std::endl; std::cin &gt;&gt; spol; if(spol == 'M') pol = GradjaninBiH::Pol::Musko; if(spol == 'Z') pol = GradjaninBiH::Pol::Zensko;
        try{
            auto g2 = GradjaninBiH(ime_i_prezime, dan, mjesec, god, sifra, pol);
            ime.clear();
            std::cin.clear();
            std::cin.ignore(10000,'\n');
</font><a name="2"></a><font color="#0000FF"><a href="match145-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            std::cout &lt;&lt; "Unijeli ste gradjanina " &lt;&lt; g2.DajImeIPrezime() &lt;&lt; " JMBG: " &lt;&lt; g2.DajJMBG() &lt;&lt; "." &lt;&lt; std::endl; 
        }
        catch(std::logic_error e){
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
            i--;
            ime.clear();
            std::cin.clear();
            std::cin.ignore(10000,'\n');
        }
        
    }
    
	return 0;
</font>}</pre>
</body>
</html>
