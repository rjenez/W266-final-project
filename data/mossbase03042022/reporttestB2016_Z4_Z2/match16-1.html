<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student7791.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8923.cpp<p></p><pre>
<a name="5"></a><font color="#FF0000"><a href="match16-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
using std::string;
using std::cout;
using std::cin;
class GradjaninBiH
{
    private:
    string cime_i_prezime;
    long long int cjmbg;
    GradjaninBiH *pok_na_pred;
    static GradjaninBiH *pok_na_zad;
    int DajKontrolnu() const;
  //  int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
  //  Pol cpol;
   bool JeLiValidan(long long int jmbg,int &amp;dan,int &amp;mjesec,int &amp;godina,int &amp;sifra) const;
    public:
    enum Pol {Musko, Zensko};
    ~GradjaninBiH()=default;
    GradjaninBiH(const GradjaninBiH &amp;g)=delete;
    GradjaninBiH &amp;operator=(const GradjaninBiH &amp;g)=delete;
GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol pol);
</font>std::string DajImeIPrezime() const;
<a name="2"></a><font color="#0000FF"><a href="match16-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_11.gif"/></a>

long long int DajJMBG() const;
int DajDanRodjenja() const;
int DajMjesecRodjenja() const;
int DajGodinuRodjenja() const;
int DajSifruRegije() const;
Pol DajPol() const;
void PromijeniImeIPrezime(std::string novo_ime);
};
GradjaninBiH* GradjaninBiH::pok_na_zad=nullptr;
int GradjaninBiH::DajKontrolnu() const
{
    long long int pom(cjmbg);
    pom/=10;
    int a=pom%10;
    pom/=10;
    int b=pom%10;
    pom/=10;
    int c=pom%10;
    int d=a+(b*10)+(c*100);
    return d;
}
bool GradjaninBiH::JeLiValidan(long long int ljmbg,int &amp;dan,int &amp;mjesec,int &amp;godina,int &amp;sifra) const
{
    long long int jmbg(ljmbg);
    if(jmbg&lt;0)
    return false;
    int niz[13]={0};
    niz[0]=-1;
    int i(12);
    while(jmbg&gt;0)
    {
        if(i&lt;0) 
        break;
        int pom(jmbg%10);
        niz[i]=pom;
        jmbg/=10;
        i--;
    }
    if(i!=0 &amp;&amp; i!=-1)
    return false;
    if(jmbg!=0)
    return false;
    if(niz[0]==-1)
    niz[0]=0;
    int pom(11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11);
</font><a name="4"></a><font color="#FF00FF"><a href="match16-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_6.gif"/></a>

    if(pom==10)
    return false;
    if(pom==11)
    pom=0;
    if(pom!=niz[12])
    return false;
    int d,m,g;
    d=niz[0]*10+niz[1];
    m=niz[2]*10+niz[3];
    g=1000+niz[4]*100+niz[5]*10+niz[6];
    int broj_dana[12]={31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if((g%4==0 &amp;&amp; g%100!=0) || g%400==0) 
    broj_dana[1]++;
<a name="3"></a><font color="#00FFFF"><a href="match16-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_10.gif"/></a>

    if(g&lt;1 || d&lt;1 || m&lt;1 || m&gt;12 || d&gt;broj_dana[m-1])
    return false;
    dan=d;
    mjesec=m;
    godina=g;
    int s(niz[7]*10+niz[8]);
    sifra=s;
   // int p(niz[9]*100+niz[10]*10+niz[11]);
  //  if(p&lt;=499)
  //  pol=Musko;
  //  else
 //   pol=Zensko;
    return true;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg) : pok_na_pred(nullptr)
{
    int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
    if(!GradjaninBiH::JeLiValidan(jmbg,cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije))
    throw std::logic_error("JMBG nije validan");
    if(pok_na_zad!=nullptr)
    {
        GradjaninBiH *pom(pok_na_zad);
       while(true)
       {
          if((*pom).GradjaninBiH::DajJMBG()==jmbg)
          throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
          else
          {
              pom=(*pom).GradjaninBiH::pok_na_pred;
              if(pom==nullptr) break;
          }
       }
    }
    cjmbg=jmbg;
    cime_i_prezime=ime_i_prezime;
     if(pok_na_zad!=nullptr)
    pok_na_pred=pok_na_zad;
    pok_na_zad=this;
    
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime,int d,int m,int g, int s, Pol pol) :pok_na_pred(nullptr)
{
   int broj_dana[12]={31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>   if((g%4==0 &amp;&amp; g%100!=0) || g%400==0) 
   broj_dana[1]++;
<a name="1"></a><font color="#00FF00"><a href="match16-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

   if(g&lt;1 || d&lt;1 || m&lt;1 || m&gt;12 || d&gt;broj_dana[m-1] || s&lt;0 || s&gt;99)  
   throw std::logic_error("Neispravni podaci");
   int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
   Pol cpol;
   cdan_rodjenja=d;
   cgodina_rodjenja=g;
   cmjesec_rodjenja=m;
   csifra_regije=s;
   cpol=pol;
   g-=1000;
   if(g&gt;=1000)
   g-=1000;
   cime_i_prezime=ime_i_prezime;
   cjmbg=d*(1e+11)+m*(1e+9)+g*(1e+6)+s*(1e+4);
   int kontrolna(0);
   if(pol==GradjaninBiH::Zensko)
   kontrolna=500;
   if(g&lt;100)
   g+=1000;
   if(pok_na_zad!=nullptr)
   {
        GradjaninBiH *pom(pok_na_zad);
       while(true)
       {
           if(pom==nullptr) break;
          if((*pom).GradjaninBiH::DajDanRodjenja()==d &amp;&amp; (*pom).GradjaninBiH::DajMjesecRodjenja()==m &amp;&amp; (*pom).GradjaninBiH::DajGodinuRodjenja()==(g+1000) &amp;&amp; (*pom).GradjaninBiH::DajSifruRegije()==s &amp;&amp; (*pom).GradjaninBiH::DajPol()==pol &amp;&amp; (*pom).GradjaninBiH::DajKontrolnu()==kontrolna)
     //    if((*pom).GradjaninBiH::DajKontrolnu()==kontrolna)
          {
                kontrolna++;
                pom=pok_na_zad;
          } 
          else
          {
              pom=(*pom).GradjaninBiH::pok_na_pred;
              if(pom==nullptr) break;
          }
       }
   }
   cjmbg+=(kontrolna*(1e1));
   long long int jmbg(cjmbg);
   int niz[13];
    niz[0]=-1;
    int i(12);
    while(jmbg&gt;0)
    {
        if(i&lt;0) 
        break;
        int pom(jmbg%10);
        niz[i]=pom;
        jmbg/=10;
        i--;
    }
     int pom(11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11);
</font><a name="0"></a><font color="#FF0000"><a href="match16-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_41.gif"/></a>

   // if(pom==10)
   // throw std::logic_error("Neprikladan JMBG");
    if(pom==11)
    pom=0;
    cjmbg+=pom;
     if(pok_na_zad!=nullptr)
   pok_na_pred=pok_na_zad;
    pok_na_zad=this;
}
std::string GradjaninBiH::DajImeIPrezime() const
{
    return cime_i_prezime;
}
int GradjaninBiH::DajDanRodjenja() const
{
     int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
     long long int jmbg(cjmbg);
    if(GradjaninBiH::JeLiValidan(jmbg,cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije))
   return cdan_rodjenja;
   else
   return cdan_rodjenja;
}
int GradjaninBiH::DajMjesecRodjenja() const
{
    int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
    long long int jmbg(cjmbg);
    if(GradjaninBiH::JeLiValidan(jmbg,cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije))
    return cmjesec_rodjenja;
    else
    return cmjesec_rodjenja;
}
int GradjaninBiH::DajGodinuRodjenja() const
{
int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
long long int jmbg(cjmbg);
bool pom=GradjaninBiH::JeLiValidan(jmbg,cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije);
if(cgodina_rodjenja&lt;1100)
cgodina_rodjenja+=1000;

return cgodina_rodjenja;
}
int GradjaninBiH::DajSifruRegije() const
{
    int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
    long long int jmbg(cjmbg);
    if(GradjaninBiH::JeLiValidan(jmbg,cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije))
    return csifra_regije;
    else
    return csifra_regije;
}
GradjaninBiH::Pol GradjaninBiH::DajPol() const
{
    int cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije;
    Pol cpol;
    long long int jmbg(cjmbg);
    if(GradjaninBiH::JeLiValidan(jmbg,cdan_rodjenja,cmjesec_rodjenja,cgodina_rodjenja,csifra_regije))
    {
       int pom=(*this).GradjaninBiH::DajKontrolnu();
       if(pom&lt;=499)
       cpol=GradjaninBiH::Musko;
       else
       cpol=GradjaninBiH::Zensko;
       return cpol;
    }
    else
    throw;
}
void GradjaninBiH::PromijeniImeIPrezime(std::string novo_ime)
{
    cime_i_prezime=novo_ime;
    
}
long long int GradjaninBiH::DajJMBG() const
{
    return cjmbg;
}
int main ()
{
    cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    int broj;
    cin&gt;&gt;broj;
    GradjaninBiH *p[100];
   for(int i=0;i&lt;broj;i++)
    {
        cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        string ime;
        cin.ignore(10000,'\n');
        std::getline(cin,ime);
        cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
        long long int maticni;
        cin&gt;&gt;maticni;
        try
        {
            
            p[i]=(new GradjaninBiH(ime,maticni));
            if(p[i]-&gt;GradjaninBiH::DajPol()==GradjaninBiH::Musko)
            cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;p[i]-&gt;GradjaninBiH::DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;p[i]-&gt;GradjaninBiH::DajDanRodjenja()&lt;&lt;"."&lt;&lt;p[i]-&gt;GradjaninBiH::DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;p[i]-&gt;GradjaninBiH::DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;p[i]-&gt;GradjaninBiH::DajSifruRegije()&lt;&lt;", musko."&lt;&lt;std::endl;
       else
       cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;p[i]-&gt;GradjaninBiH::DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;p[i]-&gt;GradjaninBiH::DajDanRodjenja()&lt;&lt;"."&lt;&lt;p[i]-&gt;GradjaninBiH::DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;p[i]-&gt;GradjaninBiH::DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;p[i]-&gt;GradjaninBiH::DajSifruRegije()&lt;&lt;", zensko."&lt;&lt;std::endl;
       if(i==broj-1)
       break;
        }
        catch(std::logic_error izuzetak)
        {
            cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
i--;

            
        }
        
    }
    cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    int broj2;
    cin&gt;&gt;broj2;
    for(int i=broj;i&lt;broj2+broj;i++)
    {
    cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
    string ime2;
    cin.ignore(10000,'\n');
    std::getline(cin,ime2);
    cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
    char znak1,znak2;
    int d,m,g;
    cin&gt;&gt;d&gt;&gt;znak1&gt;&gt;m&gt;&gt;znak2&gt;&gt;g;
    cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
    int s;
    cin&gt;&gt;s;
   // cout&lt;&lt;d&lt;&lt;znak1&lt;&lt;m&lt;&lt;znak2&lt;&lt;g;
   // cout&lt;&lt;d;
   try
   {
    cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
    char znak3;
    cin&gt;&gt;znak3;
    if(znak3=='M')
    p[i]=(new GradjaninBiH(ime2,d,m,g,s,GradjaninBiH::Pol::Musko));
    if(znak3=='Z')
    p[i]=(new GradjaninBiH(ime2,d,m,g,s,GradjaninBiH::Pol::Zensko));
        cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;p[i]-&gt;GradjaninBiH::DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;p[i]-&gt;GradjaninBiH::DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
        if(i==broj2+broj-1)
        return 0;
        
    }
    catch(std::logic_error izuzetak)
    {
        cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
       i--;
    }
    }
	return 0;
</font>}</pre>
</body>
</html>
