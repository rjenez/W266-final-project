<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student4416.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student7392.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
enum PraviPol{m, z};

bool testdatuma(int dan, int mjesec, int godina){
    int dani[]{31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if(godina%4!=0 || godina%400==0)dani[1]--;
    return !(dan&lt;1 || mjesec&lt;1 || godina&lt;1 || dan&gt;dani[mjesec-1] || mjesec&gt;12);
}

int dajbrojcifri(long long int a){
    int k=0;
    while(a){
        k++;
        a/=10;
    }
    return k;
}

void obradijmbg(long long int a, int &amp;dan, int &amp;mjesec, int &amp;godina, int &amp;sifraregije, int &amp;kod, PraviPol &amp;pol){
    if(dajbrojcifri(a)&lt;12 || dajbrojcifri(a)&gt;13)throw std::domain_error("JMBG nije validan");
    int niz[13];
    for(int i=12;i&gt;=0;i--){
        niz[i]=a%10;
        a/=10;
    }
    int c=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
    if(c==11)c=0;
    if(c!=niz[12])throw std::domain_error("JMBG nije validan");
    dan=niz[0]*10+niz[1];
    mjesec=niz[2]*10+niz[3];
    godina=1000+niz[4]*100+niz[5]*10+niz[6];
    if(godina&lt;1018)godina+=1000;
    if(!testdatuma(dan, mjesec, godina))throw std::domain_error("JMBG nije validan");
    sifraregije=niz[7]*10+niz[8];
    kod=niz[9]*100+niz[10]*10+niz[11];
    if(kod&lt;500)pol=PraviPol::m; else pol=PraviPol::z;
}

long long int napravijmbg(int dan, int mjesec, int godina, int sifraregije, int kod){
    long long int jmbg=0;
    jmbg+=dan;
    jmbg=jmbg*100+mjesec;
    godina%=1000;
    jmbg=jmbg*1000+godina;
    jmbg=jmbg*100+sifraregije;
    jmbg=jmbg*1000+kod;
    jmbg=jmbg*10;
    int niz[13];
    long long int a=jmbg;
    for(int i=12;i&gt;=0;i--){
        niz[i]=a%10;
        a/=10;
    }
    int c=11-(7*(niz[0]+niz[6])+6*(niz[1]+niz[7])+5*(niz[2]+niz[8])+4*(niz[3]+niz[9])+3*(niz[4]+niz[10])+2*(niz[5]+niz[11]))%11;
    if(c==11)c=0;
    if(c==10)return 0;
    jmbg+=c;
    return jmbg;
}

class GradjaninBiH{
    std::string imeiprezime;
    long long int jmbg;
    int dan, mjesec, godina, sifraregije, kod;
    PraviPol pol;
    GradjaninBiH *prethodni;
    static GradjaninBiH *zadnji;
    
public:
    GradjaninBiH(const GradjaninBiH &amp;g)=delete;
    void operator =(const GradjaninBiH &amp;g)=delete;
    enum Pol{Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol);
    ~GradjaninBiH();
<a name="2"></a><font color="#0000FF"><a href="match984-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    std::string DajImeIPrezime() const{return imeiprezime;}
    long long int DajJMBG() const{return jmbg;}
    int DajDanRodjenja() const{return dan;}
    int DajMjesecRodjenja() const{return mjesec;}
    int DajGodinuRodjenja() const{return godina;}
    int DajSifruRegije() const{return sifraregije;}
</font>    Pol DajPol() const{if(pol==PraviPol::m)return Pol::Musko; return Pol::Zensko;}
    void PromijeniImeIPrezime(std::string novo_ime){imeiprezime=novo_ime;}
};

GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg){
        obradijmbg(jmbg, dan, mjesec, godina, sifraregije, kod, pol);
        this-&gt;jmbg=jmbg;
        imeiprezime=ime_i_prezime;
        if(zadnji==nullptr){
            prethodni=nullptr;
        } else {
            GradjaninBiH *test=zadnji;
            for(;test!=nullptr;test=test-&gt;prethodni){
                if(jmbg==test-&gt;DajJMBG())throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
            }
            prethodni=zadnji;
        }
        zadnji=this;
    }
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja, int godina_rodjenja, int sifra_regije, Pol pol){
        if(!testdatuma(dan_rodjenja, mjesec_rodjenja, godina_rodjenja) || sifra_regije&lt;0 || sifra_regije&gt;99){
            throw std::domain_error("Neispravni podaci");
        }
        int min=0, max=500;
        if(pol!=Pol::Musko){
            min=500;
            max=1000;
        }
        dan=dan_rodjenja;
        mjesec=mjesec_rodjenja;
        godina=godina_rodjenja;
        sifraregije=sifra_regije;
        if(pol==Pol::Musko)this-&gt;pol=PraviPol::m; else this-&gt;pol=PraviPol::z;
        imeiprezime=ime_i_prezime;
        long long int tempjmbg;
        for(int i=min;i&lt;max;i++){
            tempjmbg=napravijmbg(dan, mjesec, godina, sifraregije, i);
            if(tempjmbg==0){
                if(i==max-1)throw std::range_error("nema mjesta");
                continue;
            }
            bool naso=false;
            GradjaninBiH *test=zadnji;
            for(;test!=nullptr;test=test-&gt;prethodni){
                if(test-&gt;DajJMBG()==tempjmbg){
                    naso=true;
                    break;
                }
            }
            if(!naso){
                jmbg=tempjmbg;
                break;
            }
            if(i==max-1)throw std::range_error("nema mjesta");
        }
        if(zadnji==nullptr){
            prethodni=nullptr;
        } else {
            prethodni=zadnji;
        }
        zadnji=this;
    }
GradjaninBiH::~GradjaninBiH(){
        GradjaninBiH *test=zadnji;
        if(test==this){
            if(test-&gt;prethodni==nullptr){
                zadnji=nullptr;
            } else {
                zadnji=zadnji-&gt;prethodni;
            }
        } else {
            for(;test!=nullptr;test=test-&gt;prethodni){
                if(test-&gt;prethodni==this){
                   break;
                }
            }
            test-&gt;prethodni=this-&gt;prethodni;
        } 
    }

GradjaninBiH* GradjaninBiH::zadnji=nullptr;

int main ()
{
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? \n";
    GradjaninBiH *niz[100];
    for(int i=0;i&lt;100;i++)niz[i]=nullptr;
    int n;
    std::cin&gt;&gt;n;
    for(int i=0;i&lt;n;i++){
        do{
            try{
<a name="3"></a><font color="#00FFFF"><a href="match984-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): \n";
                std::string a;
                std::cin.ignore(1000, '\n');
                std::getline(std::cin, a, '\n');
</font><a name="0"></a><font color="#FF0000"><a href="match984-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                std::cout&lt;&lt;"Unesite JMBG: \n";
                long long int b;
                std::cin&gt;&gt;b;
                niz[i]=new GradjaninBiH(a, b);
                std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;niz[i]-&gt;DajDanRodjenja()&lt;&lt;"."&lt;&lt;niz[i]-&gt;DajMjesecRodjenja();
</font><a name="1"></a><font color="#00FF00"><a href="match984-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                std::cout&lt;&lt;"."&lt;&lt;niz[i]-&gt;DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;niz[i]-&gt;DajSifruRegije()&lt;&lt;", ";
                if(niz[i]-&gt;DajPol()==GradjaninBiH::Pol::Musko)std::cout&lt;&lt;"musko"; else std::cout&lt;&lt;"zensko";
</font>                std::cout&lt;&lt;".\n";
                break;
            }
            catch(std::domain_error gg){
                std::cout&lt;&lt;gg.what()&lt;&lt;'\n';
            }
            catch(std::bad_alloc){
                for(int i=0;i&lt;100;i++)delete niz[i];
                return 0;
            }
        }while(true);
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? \n";
    int m;
    std::cin&gt;&gt;m;
    for(int i=n;i&lt;n+m;i++){
        do{
            try{
<a name="4"></a><font color="#FF00FF"><a href="match984-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): \n";
                std::string a;
                std::cin.ignore(1000, '\n');
                std::getline(std::cin, a, '\n');
</font>                std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): \n";
                int dan, mjesec, godina;
                std::scanf("%d/%d/%d", &amp;dan, &amp;mjesec, &amp;godina);
                std::cout&lt;&lt;"Unesite sifru regije: \n";
                int sifra;
                std::cin&gt;&gt;sifra;
                std::cout&lt;&lt;"Unesite M za musko, Z za zensko: \n";
                char c;
                std::cin.ignore(1000, '\n');
                std::cin&gt;&gt;c;
                if(c=='M'){
                    niz[i]=new GradjaninBiH(a, dan, mjesec, godina, sifra, GradjaninBiH::Pol::Musko);
                    std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[i]-&gt;DajJMBG()&lt;&lt;".\n";
                } 
                if(c=='Z'){
                    niz[i]=new GradjaninBiH(a, dan, mjesec, godina, sifra, GradjaninBiH::Pol::Zensko);
                    std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;niz[i]-&gt;DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;niz[i]-&gt;DajJMBG()&lt;&lt;".\n";
                }
                break;
            }
            catch(std::domain_error gg){
                std::cout&lt;&lt;gg.what()&lt;&lt;'\n';
            }
            catch(std::bad_alloc){
                for(int i=0;i&lt;100;i++)delete niz[i];
                return 0;
            }
        }while(true);
    }
	return 0;
}</pre>
</body>
</html>
