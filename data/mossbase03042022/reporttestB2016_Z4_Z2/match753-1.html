<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student5172.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student2340.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

class GradjaninBiH{
    std::string _ime_i_prezime;
    long long int _jmbg;
    int _dan_rodjenja, _mjesec_rodjenja,_godina_rodjenja,_sifra_regije;
    int _pol;
    GradjaninBiH* prethodni;
    
    int DajKodPola (){
        return (_jmbg/10)%1000;
    }
    
    bool IspravnostDatuma(int d, int m, int g){
        int broj_dana[]{31,28,31,30,31,30,31,31,30,31,30,31};
        if((g%4==0 &amp;&amp; g%100!=0) || g%400==0) broj_dana[1]++;
        if(g&lt;1 || m&lt;1 || m&gt;12 || d&lt;1 || d&gt;broj_dana[m-1]) return false;
        return true;
    }
    
    bool IspravnostJMBG(long long int jmbg){
        int jmbg_niz[13]={0};
        if(jmbg/100000000000==0) return false;
        if(!IspravnostDatuma(DajDanRodjenja(),DajMjesecRodjenja(),DajGodinuRodjenja())) return false;
        if(DajDanRodjenja()&lt;10){
            jmbg_niz[0]=0;
            jmbg_niz[1]=DajDanRodjenja();
        } else{
            jmbg_niz[0]=DajDanRodjenja()/10;
            jmbg_niz[1]=DajDanRodjenja()%10;
        }
        if(DajMjesecRodjenja()&lt;10){
            jmbg_niz[2]=0;
            jmbg_niz[3]=DajMjesecRodjenja();
        } else {
            jmbg_niz[2]=DajMjesecRodjenja()/10;
            jmbg_niz[3]=DajMjesecRodjenja()%10;
        }
        if(DajGodinuRodjenja()&gt;=2000){
            jmbg_niz[4]=0;
            jmbg_niz[5]=(DajGodinuRodjenja()/10)%10;
            jmbg_niz[6]=DajGodinuRodjenja()%10;
        }else {
            jmbg_niz[4]=(DajGodinuRodjenja()/100)%10;
            jmbg_niz[5]=(DajGodinuRodjenja()/10)%10;
            jmbg_niz[6]=DajGodinuRodjenja()%10;
        }
        jmbg_niz[7]=(jmbg/100000)%10;
        jmbg_niz[8]=(jmbg/10000)%10;
        jmbg_niz[9]=(jmbg/1000)%10;
        jmbg_niz[10]=(jmbg/100)%10;
        jmbg_niz[11]=(jmbg/10)%10;
<a name="3"></a><font color="#00FFFF"><a href="match753-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        jmbg_niz[12]=jmbg%10;
        
        int c13=11-(7*(jmbg_niz[0]+jmbg_niz[6])+
                    6*(jmbg_niz[1]+jmbg_niz[7])+
</font>                    5*(jmbg_niz[2]+jmbg_niz[8])+
                    4*(jmbg_niz[3]+jmbg_niz[9])+
                    3*(jmbg_niz[4]+jmbg_niz[10])+
                    2*(jmbg_niz[5]+jmbg_niz[11]))%11;
                    
        if(c13==10) return false;
        
        return true;
    }
    
    public:
        enum Pol {Musko, Zensko};
        static GradjaninBiH* posljednjiKreirani;
        GradjaninBiH(std::string ime_i_prezime, long long int jmbg) : _ime_i_prezime(ime_i_prezime), _jmbg(jmbg){
            if(IspravnostJMBG(jmbg)==false) throw std::logic_error("JMBG nije validan");
            int temp(0);
            
            temp=(_jmbg/100000000000)%100;
            _dan_rodjenja=temp;
            temp=(_jmbg/1000000000)%100;
            _mjesec_rodjenja=temp;
            temp=(_jmbg/1000000)%1000+1000;
            _godina_rodjenja=temp;
            if(temp&lt;1900) _godina_rodjenja=temp+1000;
            temp=_jmbg/10000;
            _sifra_regije=temp%100;
            
            int zaPol = (_jmbg/10)%1000;
            if(zaPol&lt;500) _pol=Pol::Musko;
            else _pol=Pol::Zensko;
            
            if(posljednjiKreirani==nullptr) {
                prethodni=nullptr;
                posljednjiKreirani=this;
            }
            else {
                prethodni=posljednjiKreirani;
                posljednjiKreirani=this;
            }
            
            GradjaninBiH* tempG=posljednjiKreirani-&gt;prethodni;
            while(tempG!=nullptr){
                if(tempG-&gt;DajJMBG()==jmbg) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
                tempG=tempG-&gt;prethodni;
            }
        }
        
        
        GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
        int godina_rodjenja, int sifra_regije, Pol pol) : _ime_i_prezime(ime_i_prezime),_dan_rodjenja(dan_rodjenja),
                                                        _mjesec_rodjenja(mjesec_rodjenja), _godina_rodjenja(godina_rodjenja),
                                                        _sifra_regije(sifra_regije),_pol(pol){
            if(IspravnostDatuma(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)==false) throw std::logic_error("Neispravni podaci");
            _jmbg=0;
            _jmbg=10000000000*dan_rodjenja;
            _jmbg+=100000000*mjesec_rodjenja;
            
            _jmbg+=100000*(godina_rodjenja-1000);
            int max_muskarac(-1);
            int max_zena(499);
            
            //std::cout &lt;&lt; dan_rodjenja &lt;&lt; mjesec_rodjenja &lt;&lt; godina_rodjenja;
            
            if(posljednjiKreirani==nullptr) {
                prethodni=nullptr;
                posljednjiKreirani=this;
            }
            else {
                prethodni=posljednjiKreirani;
                posljednjiKreirani=this;
            }
            
            GradjaninBiH* tempG=posljednjiKreirani-&gt;prethodni;
            while(tempG!=nullptr){
                if(tempG-&gt;DajDanRodjenja()==dan_rodjenja &amp;&amp; tempG-&gt;DajMjesecRodjenja()==mjesec_rodjenja &amp;&amp;
                   tempG-&gt;DajGodinuRodjenja()==godina_rodjenja &amp;&amp; tempG-&gt;DajSifruRegije()==sifra_regije){
                       if(tempG-&gt;DajKodPola()&gt;max_muskarac)
                        max_muskarac=tempG-&gt;DajKodPola();
                        if(tempG-&gt;DajKodPola()&gt;max_zena)
                        max_zena=tempG-&gt;DajKodPola();
                   }
                
                tempG=tempG-&gt;prethodni;
            }
            
        
            _jmbg+=sifra_regije*1000;
            _jmbg*=10;
            if(_pol==Pol::Musko) _jmbg+=max_muskarac*1+1;
            else _jmbg+=(max_zena+1)*10;
            
        int jmbg_niz[13]={0};
        if(dan_rodjenja&lt;10){
            jmbg_niz[0]=0;
            jmbg_niz[1]=dan_rodjenja;
        } else{
            jmbg_niz[0]=dan_rodjenja/10;
            jmbg_niz[1]=dan_rodjenja%10;
        }
        if(mjesec_rodjenja&lt;10){
            jmbg_niz[2]=0;
            jmbg_niz[3]=mjesec_rodjenja;
        } else {
            jmbg_niz[2]=mjesec_rodjenja/10;
            jmbg_niz[3]=mjesec_rodjenja%10;
        
        }
        if(godina_rodjenja&gt;=2000){
            jmbg_niz[4]=0;
            jmbg_niz[5]=(godina_rodjenja/10)%10;
            jmbg_niz[6]=godina_rodjenja%10;
        }else {
            jmbg_niz[4]=(godina_rodjenja/100)%10;
            jmbg_niz[5]=(godina_rodjenja/10)%10;
            jmbg_niz[6]=godina_rodjenja%10;
        }
        jmbg_niz[7]=(_jmbg/100000)%10;
        jmbg_niz[8]=(_jmbg/10000)%10;
        jmbg_niz[9]=(_jmbg/1000)%10;
        jmbg_niz[10]=(_jmbg/100)%10;
        jmbg_niz[11]=(_jmbg/10)%10;
        jmbg_niz[12]=_jmbg%10;
        
        int c13=11-(7*(jmbg_niz[0]+jmbg_niz[6])+
                    6*(jmbg_niz[1]+jmbg_niz[7])+
                    5*(jmbg_niz[2]+jmbg_niz[8])+
                    4*(jmbg_niz[3]+jmbg_niz[9])+
                    3*(jmbg_niz[4]+jmbg_niz[10])+
                    2*(jmbg_niz[5]+jmbg_niz[11]))%11;
                    
        if(c13==10) throw std::logic_error("JMBG nije validan");
        if(c13==11) c13=0;
        
        if(!IspravnostJMBG(_jmbg)) throw std::logic_error("JMBG nije validan");
        _jmbg+=c13;
        
        tempG=posljednjiKreirani-&gt;prethodni;
        while(tempG!=nullptr){
            if(tempG-&gt;DajJMBG()==_jmbg)
             throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
            tempG=tempG-&gt;prethodni;
        }
            
    }
    
    ~GradjaninBiH(){
        if(prethodni!=nullptr){
            posljednjiKreirani=prethodni;
            prethodni=prethodni-&gt;prethodni;
        }
        else{ posljednjiKreirani=nullptr;
        }
    }
        std::string DajImeIPrezime() const{
            return _ime_i_prezime;
        }
        long long int DajJMBG() const{
            return _jmbg;
        }
        int DajDanRodjenja() const{
            int temp(0);
            temp=(_jmbg/100000000000)%100;
            return temp;
        }
        GradjaninBiH* DajPrethodni() const{
            return prethodni;
        }
        
        int DajMjesecRodjenja() const{
            int temp(0);
            temp=(_jmbg/1000000000)%100;
            return temp;
        }
        int DajGodinuRodjenja() const{
            int temp(0);
            temp=(_jmbg/1000000)%1000+1000;
            if(temp&lt;1900) temp+=1000;
            return temp;
        }
        int DajSifruRegije() const{
            int temp(0);
            temp=_jmbg/10000;
            return temp%100;
        }
        Pol DajPol() const{
            return Pol(_pol);
        }
        void PromijeniImeIPrezime(std::string novo_ime){
            _ime_i_prezime=novo_ime;
        }

};

GradjaninBiH* GradjaninBiH::posljednjiKreirani=nullptr;
int main ()
{       std::string ime_i_prezime,_ime_i_prezime;
        long long int JMBG;
        int dd,mm,gggg,sifra_regije,m,n;
        //enum Pol{M,Z};
        char a(0);
    
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? ";
    std::cin&gt;&gt;n;
    std::cout&lt;&lt;std::endl;
    for(int i=0; i&lt;n; i++){

        std::cin.ignore(100000,'\n');
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): ";
        std::getline(std::cin,ime_i_prezime);
        
        std::cout&lt;&lt;"\nUnesite JMBG: ";
        
        
        std::cin&gt;&gt;JMBG;
        
        try{
<a name="0"></a><font color="#FF0000"><a href="match753-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        GradjaninBiH g (ime_i_prezime,JMBG);
        std::cout&lt;&lt;"\nUnijeli ste gradjanina "&lt;&lt;g.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;g.DajDanRodjenja()&lt;&lt;"."
                &lt;&lt;g.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;g.DajGodinuRodjenja()&lt;&lt;" u regiji "
                &lt;&lt;g.DajSifruRegije()&lt;&lt;", ";
                     if(g.DajPol()==1) std::cout&lt;&lt;"zensko.";
</font>                     else std::cout&lt;&lt;"musko.";
        }catch(std::logic_error e){
             std::cout&lt;&lt;std::endl&lt;&lt;e.what();
             i--;
        }
        std::cout&lt;&lt;std::endl;
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? ";
    std::cin&gt;&gt;m;
    std::cout&lt;&lt;std::endl;
    for(int i=0; i&lt;m; i++){

        std::cin.ignore(10000,'\n');
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): ";
        std::getline(std::cin, ime_i_prezime);
        std::cout&lt;&lt;"\nUnesite datum rodjenja (format dd/mm/gggg): ";
        char t(0);
        std::cin&gt;&gt;dd&gt;&gt;t&gt;&gt;mm&gt;&gt;t&gt;&gt;gggg;
        std::cout&lt;&lt;"\nUnesite sifru regije: ";
        std::cin&gt;&gt;sifra_regije;
        std::cout&lt;&lt;"\nUnesite M za musko, Z za zensko: ";
        std::cin&gt;&gt;a;
        try{
<a name="1"></a><font color="#00FF00"><a href="match753-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        if(a=='M') {
            GradjaninBiH g (ime_i_prezime,dd,mm,gggg,sifra_regije,GradjaninBiH::Pol::Musko);
            std::cout&lt;&lt;"\nUnijeli ste gradjanina "&lt;&lt;g.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;g.DajJMBG() &lt;&lt; ".";
</font>        }
        
<a name="2"></a><font color="#0000FF"><a href="match753-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        else if(a=='Z') {
        
            GradjaninBiH g (ime_i_prezime,dd,mm,gggg,sifra_regije,GradjaninBiH::Pol::Zensko);
            std::cout&lt;&lt;"\nUnijeli ste gradjanina "&lt;&lt;g.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;g.DajJMBG() &lt;&lt; ".";
</font>        }
        else throw std::domain_error("Neispravni podaci");
        }catch(std::logic_error &amp;e){
             std::cout&lt;&lt;std::endl&lt;&lt;e.what();
             i--;
        }
        catch (std::domain_error &amp;e) {
            std::cout &lt;&lt; std::endl&lt;&lt;e.what();
            i--;
        }
        //std::cout&lt;&lt;""
        std::cout&lt;&lt;std::endl;
    }

	return 0;
}</pre>
</body>
</html>
