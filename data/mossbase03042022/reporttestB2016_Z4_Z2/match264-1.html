<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z2/student3411.cpp<p></p><pre>
/B 2016/2017, Zadaća 4, Zadatak 2
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
class GradjaninBiH{
    std::string ime;
    int jmbg[13];
    GradjaninBiH *veza;
    static GradjaninBiH *posljednji;
    static bool ProvjeriDatum(int dan, int mjesec, int godina);
    static bool ProvjeriJmbg(int niz1[], int niz2[]){
        for(int i=0; i&lt;13; i++){                        //f-a koja provjerava da li su podudarni nizovi od 13 elem(tj jmbg)
            if(niz1[i]!=niz2[i]) return false;          //poziva se npr iz konstruktora sa 2 parametra
        }
        return true;
    }
    public:
    GradjaninBiH(const GradjaninBiH &amp;x)=delete; //zabrana kopiranja
    GradjaninBiH &amp;operator =(const GradjaninBiH &amp;x)=delete; //zabrana dodjele
    ~GradjaninBiH(){
        GradjaninBiH *p=posljednji;
        GradjaninBiH *v=this;
        if(p==this &amp;&amp; v-&gt;veza==nullptr) posljednji=nullptr; //lista od samo 1 clana
        else if(p==this &amp;&amp; v-&gt;veza!=nullptr) posljednji=posljednji-&gt;veza; //lista u kojoj se otklanja posljednji, a ima vise od jednog clana
        else if(v-&gt;veza==nullptr) {
            while(p-&gt;veza!=this){
                if(p-&gt;veza==this) {
                    p-&gt;veza=nullptr;
                    break;
                }
            }
        }
        else if(v-&gt;veza!=nullptr){
            GradjaninBiH *pom(this);
            while(p-&gt;veza!=this){
                if(p-&gt;veza==this) {
                    v=v-&gt;veza;
                    p-&gt;veza=v;
                    break;
                }
            }
            pom-&gt;veza=nullptr;
        }
    }
    enum Pol {Musko, Zensko};
    GradjaninBiH(std::string ime_i_prezime, long long int jmbg);
    GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,
    int godina_rodjenja, int sifra_regije, Pol pol);
    std::string DajImeIPrezime() const{return ime;}
    long long int DajJMBG() const{
        long long int x(0);
        for(int i=12; i&gt;=0; i--){
            x=x*10+jmbg[i];
        }
        return x;
    }
    int DajDanRodjenja() const{int dan(10*jmbg[12]+jmbg[11]); return dan;}
    int DajMjesecRodjenja() const{int mjesec(10*jmbg[10]+jmbg[9]); return mjesec;}
    int DajGodinuRodjenja() const{
        int godina(100*jmbg[8]+10*jmbg[7]+jmbg[6]);
        if(godina&gt;=917 &amp;&amp; godina&lt;=999) godina+=1000;
        if(godina&gt;=0 &amp;&amp; godina&lt;=17) godina+=2000;
        return godina;
    }
    int DajSifruRegije() const{
        int sifra(10*jmbg[5]+jmbg[4]);
        return sifra;
    }
    Pol DajPol() const{
        int kontrolni_kod(100*jmbg[3]+10*jmbg[2]+jmbg[1]);
        if(kontrolni_kod&lt;500) return Musko;
        return Zensko;
    }
    void PromijeniImeIPrezime(std::string ime_i_prezime){
        ime=ime_i_prezime;
    }
};
GradjaninBiH *GradjaninBiH::posljednji=nullptr;

<a name="4"></a><font color="#FF00FF"><a href="match264-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

bool GradjaninBiH::ProvjeriDatum(int dan, int mjesec, int godina){
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if(godina % 4 == 0 &amp;&amp; godina % 100 != 0 || godina % 400 == 0) broj_dana[1]++;
    if(godina&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&lt;1 || dan&gt;broj_dana[mjesec-1]){
        return false;
    }
    return true;
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, long long int jmbg){
    int niz[13];
    long long int x(jmbg);
    int br(0);
    while(x&gt;0){
        niz[br]=x%10;
        x=x/10;
        br++;
    }
    if(!(br==12 || br==13)) throw std::logic_error("JMBG nije validan");
    if(br==12) niz[12]=0;
    int dan(10*niz[12]+niz[11]);
    int mjesec(10*niz[10]+niz[9]);
    int godina(100*niz[8]+10*niz[7]+niz[6]);
    if(!( (godina&gt;=917 &amp;&amp; godina&lt;=999) || (godina&gt;=0 &amp;&amp; godina&lt;=17) )) throw std::logic_error("JMBG nije validan");
    if(godina&gt;=917 &amp;&amp; godina&lt;=999) godina+=1000;
    if(godina&gt;=0 &amp;&amp; godina&lt;=17) godina+=2000;
    if(!ProvjeriDatum(dan,mjesec,godina)) throw std::logic_error("JMBG nije validan");
    int kontrolni_kod(100*niz[3]+10*niz[2]+niz[1]);
    Pol pol;
    int koef(11-(7*(niz[12]+niz[6])+ 6*(niz[11]+niz[5])+ 5*(niz[10]+niz[4])+ 4*(niz[9]+niz[3])+ 3*(niz[8]+niz[2])+ 2*(niz[7]+niz[1]))%11);//11−(7*(niz[12]+niz[6])+6*(niz[11]+niz[5])+5*(niz[10]+niz[4])+4*(niz[9]+niz[3])+3*(niz[8]+niz[2])+2*(niz[7]+niz[1]))%11);
    if(koef==11) koef=0;
    if(koef==10 || koef!=niz[0]) throw std::logic_error("JMBG nije validan");
    //TREBA IZVRŠIT PROVEJRU JMBGA SA OSTALIM!!!
    if(posljednji==nullptr){        //uslov koji vrijedi ako do sada nema nijednog elementa u listi
    if(kontrolni_kod&lt;500) pol=Musko;
    else pol=Zensko;         //ukoliko su prosle sve provjere
    ime=ime_i_prezime;      //vrsi se dodjela podataka ovom objektu
    for(int i=0; i&lt;13; i++){
        this-&gt;jmbg[i]=niz[i];
    }
    posljednji=this;            //uvezivanje ovog objekta u listu tj formiranje liste
    this-&gt;veza=nullptr;         //buduci da je ovo prvi objekat u listi
    }
    else if(posljednji!=nullptr){
        bool nalazise(false);
        for(GradjaninBiH *p=posljednji; p!=nullptr; p=p-&gt;veza){
            nalazise=ProvjeriJmbg(p-&gt;jmbg,niz);
            if(nalazise) throw std::logic_error("Vec postoji gradjanin sa istim JMBG");
        }
        if(!nalazise){      //uslov koji govori da u listi nema osobe sa istim jmbg
            if(kontrolni_kod&lt;500) pol=Musko;
            else pol=Zensko;
            ime=ime_i_prezime;                      //dodjela podataka
            for(int i=0; i&lt;13; i++){
                this-&gt;jmbg[i]=niz[i];
            }
            this-&gt;veza=posljednji;      //uvezivanje ovog objekta u listu, tj sada pokazuje na objekat prije sebe
            posljednji=this;            //posljednji pokazuje na ovaj objekat, tj novi posljedni objekat u listi
        }
    }
}
GradjaninBiH::GradjaninBiH(std::string ime_i_prezime, int dan_rodjenja, int mjesec_rodjenja,int godina_rodjenja, int sifra_regije, Pol pol){
    if(!ProvjeriDatum(dan_rodjenja,mjesec_rodjenja,godina_rodjenja)) throw std::logic_error("Neispravni podaci");
<a name="1"></a><font color="#00FF00"><a href="match264-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    if(sifra_regije&lt;0 || sifra_regije&gt;=99) throw std::logic_error("Neispravni podaci");
    ime=ime_i_prezime;
    jmbg[11]=dan_rodjenja%10; jmbg[12]=dan_rodjenja/10; //postavljanje dana u jmbg
    jmbg[10]=mjesec_rodjenja/10; jmbg[9]=mjesec_rodjenja%10; //postavljanje mjeseca u jmbg
</font>    int x(godina_rodjenja);
    int br1(6);
    while(br1&lt;9){
        jmbg[br1]=x%10;       //postavljanje godine u jmbg
        x/=10;              
        br1++;
    }
    jmbg[4]=sifra_regije%10; jmbg[5]=sifra_regije/10; //postavljanje sifre regije
    if(posljednji==nullptr){        //dodjeljivanje koda za pol
        if(pol==Musko){
            jmbg[1]=0; jmbg[2]=0; jmbg[3]=0;
        }
        if(pol==Zensko){
            jmbg[1]=0; jmbg[2]=0; jmbg[3]=5;
        }
    }
    else if(posljednji!=nullptr){    //dodjeljivanje koda za pol
        int br(0);
        for(GradjaninBiH *pok=posljednji; pok!=nullptr; pok=pok-&gt;veza){
            bool datum(false), sifra(false);
            if(dan_rodjenja==pok-&gt;DajDanRodjenja() &amp;&amp; mjesec_rodjenja==pok-&gt;DajMjesecRodjenja() &amp;&amp; godina_rodjenja==pok-&gt;DajGodinuRodjenja())
                datum=true;
            if(pok-&gt;DajSifruRegije()==sifra_regije)
                sifra=true;
            if(sifra==true || datum==true) br++;
        }
        if(pol==Musko){
            if(br&gt;=500) throw std::logic_error("Neispravni podaci");
            int br2(1);
            while(br2&lt;4){
                jmbg[br2]=br%10;
                br/=10;
                br2++;
            }
        }
        if(pol==Zensko){
            br+=500;
            if(br&gt;999) throw std::logic_error("Neispravni podaci");
            int br2(1);
            while(br2&lt;4){
                jmbg[br2]=br%10;
                br/=10;
                br2++;
            }
        }
    }
    if(posljednji==nullptr){
        int koef(11-(7*(jmbg[12]+jmbg[6])+ 6*(jmbg[11]+jmbg[5])+ 5*(jmbg[10]+jmbg[4])+ 4*(jmbg[9]+jmbg[3])+ 3*(jmbg[8]+jmbg[2])+ 2*(jmbg[7]+jmbg[1]))%11);
        if(koef==11) koef=0;
        if(koef==10) throw std::logic_error("Neispravni podaci");
        jmbg[0]=koef;
        posljednji=this;                //dodjeljivanje i uvezivanje ukoliko se radi o prvome elemenut liste
        this-&gt;veza=nullptr;
    }
    else if(posljednji!=nullptr){
        int koef(11-(7*(jmbg[12]+jmbg[6])+ 6*(jmbg[11]+jmbg[5])+ 5*(jmbg[10]+jmbg[4])+ 4*(jmbg[9]+jmbg[3])+ 3*(jmbg[8]+jmbg[2])+ 2*(jmbg[7]+jmbg[1]))%11);
        if(koef==11) koef=0;
        if(koef==10) throw std::logic_error("Neispravni podaci");
        jmbg[0]=koef;
        this-&gt;veza=posljednji;
        posljednji=this;            //uvezivanje u listu u slucaju da nije ovo prvi element liste
    }
}
int main ()
{   enum Pol {Musko, Zensko};
    int n;
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po JMBG? "&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
    while(n&gt;0){
        std::string s;
        long long int x;
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::cin.ignore(10000,'\n');
<a name="5"></a><font color="#FF0000"><a href="match264-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::getline(std::cin, s);
        std::cout&lt;&lt;"Unesite JMBG: "&lt;&lt;std::endl;
        std::cin&gt;&gt;x;
        try{
            GradjaninBiH gradj(s,x);
            auto pol=gradj.DajPol();
</font><a name="2"></a><font color="#0000FF"><a href="match264-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;gradj.DajImeIPrezime()&lt;&lt;" rodjenog "&lt;&lt;gradj.DajDanRodjenja()&lt;&lt;"."&lt;&lt;gradj.DajMjesecRodjenja()&lt;&lt;"."&lt;&lt;gradj.DajGodinuRodjenja()&lt;&lt;" u regiji "&lt;&lt;gradj.DajSifruRegije()&lt;&lt;", ";
</font>            if(pol==GradjaninBiH::Musko) std::cout&lt;&lt;"musko."&lt;&lt;std::endl;
<a name="6"></a><font color="#00FF00"><a href="match264-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            if(pol!=GradjaninBiH::Musko) std::cout&lt;&lt;"zensko."&lt;&lt;std::endl;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
</font>            n++;//3005017180005 2905017170007 1234567891234 1612994175008
        }
        n--;
    }
    std::cout&lt;&lt;"Koliko gradjana zelite unijeti po datumu rodjenja, regiji i polu? "&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
    while(n&gt;0){
        std::string s;
        std::cout&lt;&lt;"Unesite ime i prezime (u istom redu): "&lt;&lt;std::endl;
        std::cin.ignore(10000,'\n');
        std::getline(std::cin,s);
        std::cout&lt;&lt;"Unesite datum rodjenja (format dd/mm/gggg): "&lt;&lt;std::endl;
        int dan,mj,god;
        char znak;
        std::cin&gt;&gt;dan&gt;&gt;znak&gt;&gt;mj&gt;&gt;znak&gt;&gt;god;
        int sifra;
<a name="3"></a><font color="#00FFFF"><a href="match264-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cout&lt;&lt;"Unesite sifru regije: "&lt;&lt;std::endl;
        std::cin&gt;&gt;sifra;
        std::cout&lt;&lt;"Unesite M za musko, Z za zensko: "&lt;&lt;std::endl;
        std::cin&gt;&gt;znak;
</font>        Pol pol;
        if(znak=='Z') pol=Zensko;
        else pol=Musko;
        try{
            if(znak=='M'){
            GradjaninBiH gradj(s,dan,mj,god,sifra,GradjaninBiH::Pol::Musko);
<a name="7"></a><font color="#0000FF"><a href="match264-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;gradj.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;gradj.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
            }
            else{
                GradjaninBiH gradj(s,dan,mj,god,sifra,GradjaninBiH::Pol::Zensko);
</font><a name="0"></a><font color="#FF0000"><a href="match264-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                std::cout&lt;&lt;"Unijeli ste gradjanina "&lt;&lt;gradj.DajImeIPrezime()&lt;&lt;" JMBG: "&lt;&lt;gradj.DajJMBG()&lt;&lt;"."&lt;&lt;std::endl;
            }
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
</font>            n++;
        }
    n--;
    }
	return 0;
}</pre>
</body>
</html>
