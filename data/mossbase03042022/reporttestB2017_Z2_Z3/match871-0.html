<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student1624.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student1624.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;

template &lt;typename tip&gt;
int periodican_niz(const std::vector&lt;tip&gt; &amp;v)
{
	bool p = false;

	for(int i=1; i&lt;v.size(); i++) {
		for(int j=0; j&lt;v.size(); j++) {
			if(j+i&lt;v.size()) p = v[j]==v[j+i];
			if(!p) break;
		}
		if(p) return i;
	}

	return 0;
}

template &lt;typename T&gt;
T **AlocirajFragmentirano(const std::vector&lt;T&gt; &amp;v, int &amp;koliko_puta)
{
	if(!v.size())
		throw "Prazan vektor!";

	for(auto i : v)
		if(i&lt;=0) throw std::domain_error("Neispravan vektor!");

	int period = periodican_niz(v);
	int redova = 0;

	if(period) {
		koliko_puta=std::ceil(v.size()/(double)period);
	} else {
		koliko_puta = 2;
		period = v.size();
	}

	redova = koliko_puta*period;
	T najveci = *std::max_element(v.begin(), v.end());

	T **matrica(new T*[redova] {});

	try {
		for(int i=0; i&lt;redova;) {
			for(int j=0; j&lt;period; j++, i++)
				matrica[i] = new T[v[j]];
		}

		int index = 0;
		for(int i=0; i&lt;redova; i++) {
			int k = najveci;

			if(index==period) index=0;
			for(int j=v[index]-1; j&gt;=0; j--)
				matrica[i][j] = k--;
			index++;
		}
	} catch(...) {
		for(int i = 0; i &lt; redova; i++)
<a name="2"></a><font color="#0000FF"><a href="match871-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

			delete[] matrica[i];
		delete[] matrica;
		throw;
	}

	return matrica;
}

template &lt;typename T&gt;
T **AlocirajKontinualno(const std::vector&lt;T&gt; &amp;v, int &amp;koliko_puta)
</font>{
	if(!v.size()) throw "Prazan vektor!";

	for(auto i : v)
		if(i&lt;=0) throw std::domain_error("Neispravan vektor!");

	int period = periodican_niz(v);
	int redova = 0;

	if(period) {
		koliko_puta=std::ceil(v.size()/(double)period);
	} else {
		koliko_puta = 2;
		period = v.size();
	}

	redova = koliko_puta*period;

	int elemenata = 0;
	for(int i=0; i&lt;period; i++)
		elemenata+=v[i];

	elemenata*=koliko_puta;

	T **a = new T*[redova];
	try {
		a[0] = new T[elemenata];

		int index = 0;
		for(int i = 1; i &lt; redova; i++) {
			if(index==period) index=0;
			a[i] = a[i - 1] + v[index];
			index++;
		}

		index = 0;
		for(int i=0; i&lt;redova; i++) {
			if(index==period) index=0;
			int k=1;
			for(int j=v[index]-1; j&gt;=0; j--)
				a[i][j] = k++;
			index++;
		}
	} catch(...) {
		delete[] a;
<a name="3"></a><font color="#00FFFF"><a href="match871-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		throw;
	}

	return a;
}

int main ()
{

	try {
		int n;
		std::cout &lt;&lt; "Unesite broj elemenata vektora: ";
		std::cin &gt;&gt; n;
		std::vector&lt;int&gt; v;
</font>		std::cout &lt;&lt; "Unesite elemente vektora: ";

		for(int i=0; i&lt;n; i++) {
			int temp;
			std::cin &gt;&gt; temp;
			v.push_back(temp);
		}

		std::cout &lt;&lt; "Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: ";
		std::cin &gt;&gt; n;

		int **matrica = nullptr;
		int koliko_puta = 0;
		if(n) matrica = AlocirajFragmentirano(v, koliko_puta);
		else matrica = AlocirajKontinualno(v, koliko_puta);

		std::cout &lt;&lt; "Dinamicki alocirana matrica: " &lt;&lt; std::endl;

		int redova = 0;
		int period = 0;

		if(!periodican_niz(v)) period = v.size();
		else period = std::ceil(v.size()/(double)koliko_puta);

		redova = koliko_puta*period;

		int index = 0;

<a name="1"></a><font color="#00FF00"><a href="match871-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		for(int i=0; i&lt;redova; i++) {
			if(index==period)
				index=0;
			for(int j=0; j&lt;v[index]; j++) {
				std::cout &lt;&lt; std::left &lt;&lt; std::setw(2) &lt;&lt; matrica[i][j] &lt;&lt; " ";
</font>			}
			std::cout &lt;&lt; std::endl;
			index++;
		}

<a name="0"></a><font color="#FF0000"><a href="match871-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		if(n) for(int i = 0; i &lt; redova; i++) delete[] matrica[i];
		else delete[] matrica[0];

		delete[] matrica;

	} catch(const char poruka[]) {
		std::cout &lt;&lt; "Izuzetak: " &lt;&lt; poruka;
</font>	} catch(std::domain_error izuzetak) {
		std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what();
	}

	return 0;
}</pre>
</body>
</html>
