<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student4108.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student8035.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;

bool TestPerioda(const std::vector&lt;int&gt; &amp;brojevi, int p) //copy paste sa tuta
{
	int n=brojevi.size();
	if(n==1 || p&gt;=n) return false;
	for(int i=0;i&lt;n-p;i++)
	{
		if(brojevi.at(i)!=brojevi.at(i+p)) return false;
	}
	return true;
}

int OdrediOsnovniPeriod(const std::vector&lt;int&gt; &amp;brojevi) //copy paste sa tuta
{
	int n=brojevi.size();
	for(int i=1;i&lt;n;i++)
	{
		if(TestPerioda(brojevi,i)) return i;
	}
	return 0;
}

int** AlocirajKontinualno(const std::vector&lt;int&gt; &amp;brojevi, int &amp;koliko_puta)
{
	int **mat=nullptr;
	try
	{
	    int p=OdrediOsnovniPeriod(brojevi);
	    int n=brojevi.size();
	    if(n==0) throw ("Prazan vektor!");
	    if(p==0) p=n;
	    int m=p-n%p; 
	    if(p==n) n*=2; 
	    if(m&lt;p)
	    {
	    	n+=m;
	    }
	    
	    koliko_puta=n/p;
	    
	    int broj=0;
	    for(int i=0;i&lt;p;i++)
	    {
	    	broj+=brojevi.at(i);
	    	if(brojevi.at(i)&lt;=0) throw std::domain_error("Neispravan vektor!");
	    }
	    broj*=koliko_puta;
	    
	    mat=new int*[p*koliko_puta];
	    mat[0]=new int[broj];
	    
	    int br(0);
	    for(int i=0;i&lt;brojevi.at(0);i++)
	    {
	    	mat[0][i]=brojevi.at(0)-i;
	    	br++;
	    }
	    for(int i=1;i&lt;p;i++)
	    {
	    	mat[i]=mat[i-1]+br;
	    	br=0;
<a name="3"></a><font color="#00FFFF"><a href="match830-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	    	for(int j=0;j&lt;brojevi.at(i);j++)
	    	{
	    		mat[i][j]=brojevi.at(i)-j;
</font>	    		br++;
	    	}
	    }
	    for(int i=1;i&lt;koliko_puta;i++)
	    {
	    	for(int j=0;j&lt;p;j++)
	    	{
	    		mat[i*p+j]=mat[i*p+j-1]+br;
	    		br=0;
	    		for(int k=0;k&lt;brojevi.at(j);k++)
	    		{
	    			mat[i*p+j][k]=brojevi.at(j)-k;
	      			br++;
	    		}
	       	}
	    }
	}
	catch(std::bad_alloc)
	{
		delete[] mat;
		throw(std::bad_alloc());
	}
 	return mat;
}

int** AlocirajFragmentirano(const std::vector&lt;int&gt; &amp;brojevi, int &amp;koliko_puta)
{
	int **mat=nullptr;
	int brojac(0); //brojac za brisanje memorije u catchu
	try
	{
	    int p=OdrediOsnovniPeriod(brojevi);
	    int n=brojevi.size();
	    if(n==0) throw ("Prazan vektor!");
	    if(p==0) p=n;
	    int m=p-n%p; 
	    if(p==n) n*=2; 
	    if(m&lt;p)
	    {
	    	n+=m;
	    }
	    
	    koliko_puta=n/p;
	    int max=brojevi.at(0);
	    for(int i=0;i&lt;p;i++)
	    {
	    	if(brojevi.at(i)&gt;max) max=brojevi.at(i);
	    	if(brojevi.at(i)&lt;=0) throw std::domain_error("Neispravan vektor!");
	    }
	    
	    mat=new int*[p*koliko_puta];
	    
	    for(int i=0;i&lt;p;i++)
	    {
	    	mat[brojac++]=new int[brojevi.at(i)];
	    	for(int j=0;j&lt;brojevi.at(i);j++)
	    	{
	    		mat[i][brojevi.at(i)-j-1]=max-j;
	    	}
	    }
	    
	    for(int i=1;i&lt;koliko_puta;i++)
	    {
	    	for(int j=0;j&lt;p;j++)
	    	{
	    		mat[brojac++]=new int[brojevi.at(j)];
	    		for(int k=0;k&lt;brojevi.at(j);k++)
	    		{
	    			mat[i*p+j][brojevi.at(j)-k-1]=max-k;
	    		}
	       	}
	    }
	}
<a name="2"></a><font color="#0000FF"><a href="match830-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

	catch(std::bad_alloc)
	{
		for(int i=0;i&lt;brojac;i++) delete[] mat[i];
		delete[] mat;
		throw(std::bad_alloc());
</font>	}
 	return mat;
}
int main ()
{
	int **p=nullptr;
	
	try
	{
		int n;
		std::cout&lt;&lt;"Unesite broj elemenata vektora: ";
		std::cin&gt;&gt;n;
		std::vector&lt;int&gt; v;
		std::cout&lt;&lt;"Unesite elemente vektora: ";
		for(int i=0;i&lt;n;i++)
		{
			int unos;
			std::cin&gt;&gt;unos;
			v.push_back(unos);
		}
		std::cout&lt;&lt;"Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: ";
		int unos;
		std::cin&gt;&gt;unos;
		if(unos==0)
		{
			int koliko_puta;
			p=AlocirajKontinualno(v,koliko_puta);
			int m=OdrediOsnovniPeriod(v);
			if(m==0) m=v.size();
			std::cout&lt;&lt;"Dinamicki alocirana matrica: "&lt;&lt;std::endl;
			for(int i=0;i&lt;koliko_puta;i++)
			{
<a name="0"></a><font color="#FF0000"><a href="match830-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

				for(int j=0;j&lt;m;j++)
				{
					for(int k=0;k&lt;v.at(j);k++)
					{
						std::cout&lt;&lt;std::setw(3)&lt;&lt;std::left&lt;&lt;p[i*m+j][k];
</font>					}
					std::cout&lt;&lt;std::endl;
				}
			}
			delete[] p[0];
			delete[] p;
		}
		else if(unos==1)
		{
			int koliko_puta;
			p=AlocirajFragmentirano(v,koliko_puta);
			int m=OdrediOsnovniPeriod(v);
			if(m==0) m=v.size();
			std::cout&lt;&lt;"Dinamicki alocirana matrica: "&lt;&lt;std::endl;
			for(int i=0;i&lt;koliko_puta;i++)
			{
<a name="1"></a><font color="#00FF00"><a href="match830-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

				for(int j=0;j&lt;m;j++)
				{
					for(int k=0;k&lt;v.at(j);k++)
					{
						std::cout&lt;&lt;std::setw(3)&lt;&lt;std::left&lt;&lt;p[i*m+j][k];
</font>					}
					std::cout&lt;&lt;std::endl;
					delete[] p[i*m+j];
				}
			}
			delete[] p;
		}
	}
	catch(std::domain_error ex)
	{
		std::cout&lt;&lt;"Izuzetak: "&lt;&lt;ex.what();
	}
	catch(std::bad_alloc)
	{
		std::cout&lt;&lt;"Nema dovoljno memorije";
	}
	
	return 0;
}</pre>
</body>
</html>
