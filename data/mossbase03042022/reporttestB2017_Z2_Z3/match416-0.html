<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student8467.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student8467.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;

template &lt;typename Tip&gt;
int Period(const std::vector&lt;Tip&gt; v){
	int i, pokazivac = 0;
	for(i = 1; i &lt; v.size(); i++){
		if(v.at(pokazivac) == v.at(i)){
			while(i &lt; v.size() &amp;&amp; v.at(pokazivac) == v.at(i)){
				i++;
				pokazivac++;
			}
			if(i &lt; v.size()){
				pokazivac = 0;
				i--;
			}
			else if(i &gt;= v.size()) break;
		}
	}
	return (i - pokazivac);
}


template &lt;typename Tip&gt;
int Periodicnost(std::vector&lt;Tip&gt; v, int &amp;velicina, int &amp;p){
	int i, pokazivac = 0;
	for(i = 1; i &lt; v.size(); i++){
		if(v.at(pokazivac) == v.at(i)){
			while(i &lt; v.size() &amp;&amp; v.at(pokazivac) == v.at(i)){
				i++;
				pokazivac++;
			}
			if(i &lt; v.size()){
				pokazivac = 0;
				i--;
			}
			else if(i &gt;= v.size()) break;
		}
	}
	int period(i - pokazivac);
	p = period;
	
	if(period == v.size()){
		//Slucaj kada je potrebno dodati još jednom na vektor
		velicina = 2*v.size();
		return 2;
	}else if(v.size() % period != 0){
		//Ovdje moramo nadopuniti vektor kako bi bio periodičan do kraja
		velicina = v.size() + (period - (v.size() % period));
	}else if(v.size() % period == 0){
		velicina = v.size();
	}
	return (v.size() / period);
}

template &lt;typename Tip&gt;
<a name="2"></a><font color="#0000FF"><a href="match416-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

int **AlocirajFragmentirano(const std::vector&lt;Tip&gt; &amp;vektor, int &amp;koliko_puta){
	//Provjera validnosti niza
	if(vektor.size() == 0) throw std::domain_error("Prazan vektor!");
	for(Tip a: vektor){
</font>		if(a &lt;= 0) throw std::domain_error("Neispravan vektor!");
	}
	//Provjeravamo da li je niz periodičan
	int velicina_vektora = 0;
	int period = 0;
	koliko_puta = Periodicnost(vektor, velicina_vektora, period);
	//Alociranje matrice
	try{
		int **a(new int*[velicina_vektora]{});
		//Alociranje redova
		try{
			for(int i = 0; i &lt; velicina_vektora; i++){
				if(i &lt; vektor.size()){
					a[i] = new int[vektor.at(i)];
				}else if(i &gt;= vektor.size()){
					a[i] = new int[vektor.at(i - period)];
				}
			}
		}catch(...){
			for(int i = 0; i &lt; velicina_vektora; i++){
				delete[] a[i];
			}
			delete[] a;
			throw;
		}
		//Popunjavanje matrice/Najveće zlo ikad
		int najveci = *(max_element(vektor.begin(),vektor.end()));
		int idi, broj;
		for(int i = 0; i &lt; velicina_vektora; i++){
			if(i &lt; vektor.size()){
				idi = najveci - vektor.at(i) + 1;
				broj = vektor.at(i);
			}else if(i &gt;= vektor.size()){
				idi = najveci - vektor.at(i - period) + 1;
				broj = vektor.at(i - period);
			}
			for(int e = 0; e &lt; broj; e++){
				a[i][e] = idi;
				idi++;
			}
		}
		//Vraćanje
		return a;
	}catch(...){
		throw;
	}
}

template &lt;typename Tip&gt;
<a name="3"></a><font color="#00FFFF"><a href="match416-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

int **AlocirajKontinuirano(const std::vector&lt;Tip&gt; &amp;vektor, int &amp;koliko_puta){
	if(vektor.size() == 0) throw std::domain_error("Prazan vektor!");
	for(Tip a: vektor){
</font>		if(a &lt;= 0) throw std::domain_error("Neispravan vektor!");
	}
	//Provjeravamo da li je niz periodičan
	int velicina_vektora = 0;
	int period = 0;
	koliko_puta = Periodicnost(vektor, velicina_vektora, period);
	//Alociranje matrice
	try{
		int **a(new int*[velicina_vektora]{});
		int broj_elemenata_matrice = 0;
		for(int i = 0; i &lt; velicina_vektora; i++){
			if(i &lt; vektor.size()){
				broj_elemenata_matrice += vektor.at(i);
			}else if(i &gt;= vektor.size()){
				broj_elemenata_matrice += vektor.at(i - period);
			}
		}
		
		try {
			a[0] = new int[broj_elemenata_matrice];
			for(int i = 1; i &lt; velicina_vektora; i++){
				if(i-1 &lt; vektor.size()){
					a[i] = a[i - 1] + vektor.at(i-1);
					//std::cout &lt;&lt; "i=" &lt;&lt; i &lt;&lt; vektor.at(i);
				}else if(i-1 &gt;= vektor.size()){
					a[i] = a[i - 1] + vektor.at(i - period - 1);
					//std::cout &lt;&lt; "i=" &lt;&lt; i &lt;&lt; vektor.at(i - period);
				}
			}
		}catch (...) {
			delete[] a;
			throw;
		}
		//POPUNJAVANJE MATRICE
		int idi, broj;
		for(int i = 0; i &lt; velicina_vektora; i++){
			if(i &lt; vektor.size()){
				idi = vektor.at(i);
				broj = vektor.at(i);
			}else if(i &gt;= vektor.size()){
				idi = vektor.at(i - period);
				broj = vektor.at(i - period);
			}
			for(int e = 0; e &lt; broj; e++){
				a[i][e] = idi;
				//std::cout &lt;&lt; idi &lt;&lt;  " ";
				idi--;
			}
		}
		//Vraćanje
		return a;
	}catch(...){
		throw;
	}
}




int main (){
	int broj_elemenata;
	std::cout &lt;&lt; "Unesite broj elemenata vektora: ";
	std::cin &gt;&gt; broj_elemenata;
	std::vector&lt;int&gt; vektor;
	int koliko_puta = 0;
<a name="0"></a><font color="#FF0000"><a href="match416-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

	std::cout &lt;&lt; "Unesite elemente vektora: ";
	for(int i = 0; i &lt; broj_elemenata; i++){
		int unos;
		std::cin &gt;&gt; unos;
		vektor.push_back(unos);
	}
	int odabir;
	std::cout &lt;&lt; "Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: ";
	std::cin &gt;&gt; odabir;
</font>	if(odabir == 1){
		try{
			int period(Period(vektor));
			int broj,duzina_vektora;
			int **a = AlocirajFragmentirano(vektor, koliko_puta);
			
			if(period == vektor.size()) duzina_vektora = 2*vektor.size();
			else duzina_vektora = (ceil(vektor.size() / (period*1.0))) * period;
			
			std::cout &lt;&lt; "Dinamicki alocirana matrica:" &lt;&lt; std::endl;
			for(int i = 0; i &lt; duzina_vektora; i++){
				if(i &lt; vektor.size()){
					broj = vektor.at(i);
				}else if(i &gt;= vektor.size()){
					broj = vektor.at(i - period);
				}
				for(int e = 0; e &lt; broj; e++){
<a name="4"></a><font color="#FF00FF"><a href="match416-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

					std::cout &lt;&lt; std::setw(2) &lt;&lt; std::left &lt;&lt; a[i][e] &lt;&lt; " ";
				}
				std::cout &lt;&lt; std::endl;
			}
			//-----------DEALOCIRANJE-----------------------
			for(int i = 0; i &lt; duzina_vektora; i++){
</font>					delete[] a[i];
			}
			delete[] a;
			//------------------------------------------------
		}catch(std::exception &amp;e){
			//KEČOVANJE
			std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; std::endl; 
		}
	}else if(odabir == 0){
		try{
			int period(Period(vektor));
			int broj,duzina_vektora;
			int **a = AlocirajKontinuirano(vektor, koliko_puta);
			
			if(period == vektor.size()) duzina_vektora = 2*vektor.size();
			else duzina_vektora = (ceil(vektor.size() / (period*1.0))) * period;
			
			std::cout &lt;&lt; "Dinamicki alocirana matrica:" &lt;&lt; std::endl;
			for(int i = 0; i &lt; duzina_vektora; i++){
				if(i &lt; vektor.size()){
					broj = vektor.at(i);
				}else if(i &gt;= vektor.size()){
					broj = vektor.at(i - period);
				}
				for(int e = 0; e &lt; broj; e++){
<a name="1"></a><font color="#00FF00"><a href="match416-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

					std::cout &lt;&lt; std::setw(2) &lt;&lt; std::left &lt;&lt; a[i][e] &lt;&lt; " ";
				}
				std::cout &lt;&lt; std::endl;
			}
			//-----------DEALOCIRANJE-----------------------
			delete[] a[0];
			delete[] a;
			//------------------------------------------------
		}catch(std::exception &amp;e){
</font>			//KEČOVANJE
			std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; std::endl; 
		}
	}else{
		std::cout &lt;&lt; "Greska u odabiru!";
		return 0;
	}
	return 0;
}</pre>
</body>
</html>
