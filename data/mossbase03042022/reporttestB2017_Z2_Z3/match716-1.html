<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student1704.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student8518.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 3

	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!

	NAPOMENA: nece svi (javni) testovi sa zamgera biti
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;type_traits&gt;

template&lt;typename Tiiip&gt;
int Period(const std::vector&lt;Tiiip&gt; &amp;v)
{
	int period(0);
	bool jest=true;

	for(int i=0; i&lt;v.size(); i++) {
		for(int j=i+1; j&lt;v.size(); j++) {
			if((i+1)!=v.size() &amp;&amp; v.at(i)==v.at(j)) {
				int h=j;
				int k=i;

				do {
					if(h!=v.size() &amp;&amp; v.at(k)!=v.at(h)) {
						jest=false;
						break;
					}

					h++;
					k++;
				} while(h!=v.size());

				if(jest) {
					period=j-i;
					break;
				}
			}

		}
	}

	return period;
}

template&lt;typename Tip1&gt;
auto AlocirajFragmentirano(const std::vector&lt;Tip1&gt; &amp;v, int &amp;koliko_puta)-&gt; Tip1 ** {
	for(int i=0; i&lt;v.size(); i++) {
		if(v.at(i)&lt;=0)
			throw std::domain_error("Neispravan vektor!");
	}
	if(v.size()==0)
	throw "Prazan vektor!";
	
	int period=Period(v);

	koliko_puta=0;
	Tip1** dupli=nullptr;

	Tip1 najveci(0);
	for(int i=0; i&lt;v.size(); i++) {
		if(v.at(i)&gt;najveci)
			najveci=v.at(i);
	}

	//slucaj1
	if(period!=0) {
		for(int i=0; i&lt;v.size(); i+=period)
			koliko_puta++;

		dupli=new Tip1*[koliko_puta*period];

		for(int i=0; i&lt;koliko_puta*period; i++)
			dupli[i]=nullptr;

		try {
			int j=0;
			for(int i=0; i&lt;koliko_puta*period; i++) {
				dupli[i]=new Tip1[v.at(j)];
<a name="2"></a><font color="#0000FF"><a href="match716-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

				j++;
				if(j==period)
					j=0;
			}
		} catch(...) {
			for(int i=0; i&lt;koliko_puta*period; i++)
				delete [] dupli[i];

			delete[] dupli;
</font>			throw;
		}

		int l=0;
		for(int i=0; i&lt;period*koliko_puta; i++) {
			int k=0;
			for(int j=v.at(l)-1; j&gt;=0; j--) {
				dupli[i][j]=najveci-v.at(k)+1;
				k++;
			}
			l++;
			if(l==period)
				l=0;
		}
	}

	//slucaj2
	if(period==0) {
		koliko_puta=2;
		period=v.size();

		dupli=new Tip1*[koliko_puta*period];

		for(int i=0; i&lt;koliko_puta*period; i++)
			dupli[i]=nullptr;

		try {
			int j=0;
			for(int i=0; i&lt;koliko_puta*period; i++) {
				dupli[i]=new Tip1[v.at(j)];
				j++;
				if(j==period)
					j=0;
			}
		} catch(...) {
			for(int i=0; i&lt;koliko_puta*period; i++)
				delete [] dupli[i];

			delete[] dupli;
			throw;
		}

		int l=0;
		for(int i=0; i&lt;period*koliko_puta; i++) {
			int k=0;
			for(int j=v.at(l)-1; j&gt;=0; j--) {
				dupli[i][j]=najveci-v.at(k)+1;
				k++;
			}
			l++;
			if(l==period)
				l=0;
		}
	}
	return dupli;
}

template&lt;typename Tip1&gt;
auto AlocirajKontinualno(const std::vector&lt;Tip1&gt; &amp;v, int &amp;koliko_puta) -&gt; Tip1 ** 
{
	for(int i=0; i&lt;v.size(); i++) {
		if(v.at(i)&lt;=0)
			throw std::domain_error("Neispravan vektor!");
	}
	if(v.size()==0)
	throw "Prazan vektor!";

	int period=Period(v);

	koliko_puta=0;
	Tip1** dupli=nullptr;

	Tip1 najveci(0);
	for(int i=0; i&lt;v.size(); i++) {
		if(v.at(i)&gt;najveci)
			najveci=v.at(i);
	}

	if(period!=0) {
		for(int i=0; i&lt;v.size(); i+=period)
			koliko_puta++;
	
		dupli=new Tip1*[koliko_puta*period];

		for(int i=0; i&lt;koliko_puta*period; i++)
			dupli[i]=nullptr;

		try {
			int duzina(0);

			for(int i=0; i&lt;v.size(); i++)
				duzina+=v.at(i);

			duzina*=koliko_puta;

			dupli[0]=new Tip1[duzina];

			int j=0;
<a name="1"></a><font color="#00FF00"><a href="match716-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

			for(int i=1; i&lt;koliko_puta*period; i++) {
				dupli[i]=dupli[i-1]+v.at(j);                /////DOBRA RASPODJELA POKAZIVACA???
				j++;
				if(j==period)
					j=0;
</font>			}

		} catch(...) {
			delete[] dupli;
			throw;
		}

		int l=0;
		for(int i=0; i&lt;period*koliko_puta; i++) {
			int k=0;
			for(int j=v.at(l)-1; j&gt;=0; j--) {
				dupli[i][j]=k+1;
				k++;
			}
			l++;
			if(l==period)
				l=0;
		}
	}

	//slucaj2-kontinualna
	if(period==0)
	{
		koliko_puta=2;
		period=v.size();
	
		dupli=new Tip1*[koliko_puta*period];

		for(int i=0; i&lt;koliko_puta*period; i++)
			dupli[i]=nullptr;

		try {
			int duzina(0);

			for(int i=0; i&lt;v.size(); i++)
				duzina+=v.at(i);

			duzina*=koliko_puta;

			dupli[0]=new Tip1[duzina];

			int j=0;
			for(int i=1; i&lt;koliko_puta*period; i++) {
				dupli[i]=dupli[i-1]+v.at(j);             
				j++;
				if(j==period)
					j=0;
			}

		} catch(...) {
			delete[] dupli;
			throw;
		}

		int l=0;
		for(int i=0; i&lt;period*koliko_puta; i++) {
			int k=0;
			for(int j=v.at(l)-1; j&gt;=0; j--) {
				dupli[i][j]=k+1;
				k++;
			}
			l++;
			if(l==period)
				l=0;
		}
	}
	return dupli;
}

int main ()
{
	std::cout&lt;&lt;"Unesite broj elemenata vektora: ";
	int br_el;
	std::cin&gt;&gt;br_el;

	try {
		std::vector&lt;int&gt; v(br_el);
		std::cout&lt;&lt;"Unesite elemente vektora: ";
		for(int i=0; i&lt;v.size(); i++)
			std::cin&gt;&gt;v.at(i);

		std::cout&lt;&lt;"Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: ";
		int odabir;
		std::cin&gt;&gt;odabir;
		
		int koliko_puta;
		int period=Period(v);
		
		if(period==0) {
		koliko_puta=2;
		period=v.size();}

		if(odabir==1) {
			auto dupli=AlocirajFragmentirano(v, koliko_puta);
			int l=0; 
			std::cout&lt;&lt;"Dinamicki alocirana matrica: "&lt;&lt;std::endl;
			for(int i=0; i&lt;period*koliko_puta; i++) {
				int k=0;
				for(int j=0; j&lt;v.at(l); j++) {
					std::cout&lt;&lt;dupli[i][j]&lt;&lt;"  ";
					k++;
				}
<a name="0"></a><font color="#FF0000"><a href="match716-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

				l++;
				if(l==period)
					l=0;
				std::cout&lt;&lt;std::endl;
			}
			for(int i=0; i&lt;period*koliko_puta; i++) delete[] dupli[i];
			delete[] dupli;
</font>		}
		else if(odabir==0) {
			auto dupli=AlocirajKontinualno(v, koliko_puta);
			int l=0;
			std::cout&lt;&lt;"Dinamicki alocirana matrica: "&lt;&lt;std::endl;
			for(int i=0; i&lt;period*koliko_puta; i++) {
				int k=0;
				for(int j=0; j&lt;v.at(l); j++) {
					std::cout&lt;&lt;dupli[i][j]&lt;&lt;"  ";
					k++;
				}
				l++;
<a name="3"></a><font color="#00FFFF"><a href="match716-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

				if(l==period)
					l=0;
				std::cout&lt;&lt;std::endl;
			}
			
			delete[] dupli[0];
			delete[] dupli;
		}

	} 
	catch(std::domain_error poruka)
</font>	{
		std::cout&lt;&lt;"Izuzetak: "&lt;&lt;poruka.what();
	}
	catch(const char poruka2[])
	{
			std::cout&lt;&lt;"Izuzetak: "&lt;&lt;poruka2;
	}

	return 0;
}</pre>
</body>
</html>
