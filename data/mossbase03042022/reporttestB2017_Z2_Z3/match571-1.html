<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student3108.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student2556.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 3

	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!

	NAPOMENA: nece svi (javni) testovi sa zamgera biti
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

template &lt;typename Tip&gt;
bool JelPeriodican(const std::vector&lt;Tip&gt; &amp;vektor, int period)
{
	for(int i=0; i &lt; vektor.size(); i++) {
		for(int j=i; j&lt;vektor.size(); j+=period) {
			if(vektor.at(i) != vektor.at(j)) return false;
		}
	}
	return true;
}

template &lt;typename Tip&gt;
int Period(const std::vector&lt;Tip&gt; &amp;vektor)
{
	for(int i = 1; i &lt; vektor.size(); i++) {
		if(JelPeriodican(vektor, i)) return i;
	}
	return 0;
}
template&lt;typename Tip&gt;
<a name="1"></a><font color="#00FF00"><a href="match571-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

int **AlocirajFragmentirano(const std::vector&lt;Tip&gt; &amp;vektor, int &amp;koliko_puta)
{
	if(vektor.size()==0) throw("Prazan vektor!");
	for(int i=0; i&lt;vektor.size(); i++) {
		if(vektor.at(i)&lt;=0) throw std::domain_error("Neispravan vektor!");
</font>	}
	int period=Period(vektor);

	if(period!=0) {
		int novaDuzina;
		if(vektor.size()%period!=0) {
			int dopuna=period-vektor.size()%period;
			novaDuzina = vektor.size()+dopuna;
		} else novaDuzina = vektor.size();

		koliko_puta=novaDuzina/period;
	} else {
		koliko_puta=2;
		period=vektor.size();
	}

	try {
		int **p;
		try {
			int suma(0);
			for(int i=0; i&lt;period; i++) suma+=vektor.at(i);
			p=new int *[period*koliko_puta];
			for(int i=0; i&lt;koliko_puta*period; i++) {
				p[i]=new int[vektor.at(i%period)];
			}
			for(int i=0; i&lt;koliko_puta*period; i++) {
				for(int j=vektor.at(i%period)-1; j&gt;=0; j--) {
					if(j==vektor.at(i%period)-1) p[i][j]=vektor.at(period-1);
					else p[i][j]=p[i][j+1] - 1;
				}
			}
			return p;
		} catch(...) {
			for(int i=0; i&lt;period*koliko_puta; i++) delete[] p[i];
			delete[] p;
			throw;
		}
	} catch(...) {
		throw;
	}

}
template &lt;typename Tip&gt;
<a name="2"></a><font color="#0000FF"><a href="match571-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

int **AlocirajKontinualno(const std::vector&lt;Tip&gt; &amp;vektor, int &amp;koliko_puta)
{
	if(vektor.size() == 0) throw ("Prazan vektor!");
	for(int i = 0; i &lt; vektor.size(); i++) {
		if(vektor.at(i) &lt;= 0) throw std::domain_error("Neispravan vektor!");
</font>	}

	int period=Period(vektor);
	if(period!=0) {
		int novaDuzina;
		if(vektor.size()%period!=0) {
			int dopuna=period-vektor.size()%period;
			novaDuzina = vektor.size()+dopuna;
		} else novaDuzina = vektor.size();

		koliko_puta=novaDuzina/period;
	} else {
		koliko_puta = 2;
		period = vektor.size();
	}

	try {
		int **p;
		p = new int*[period*koliko_puta];
		try {
			int suma(0);
			for(int i=0; i&lt;period; i++) suma+=vektor.at(i);
			p[0] = new int[suma*koliko_puta];
			for(int i=1; i&lt;period*koliko_puta; i++) {
				p[i] = p[i-1] + vektor.at((i-1) % period);
			}
			for(int i=0; i &lt; period * koliko_puta; i++) {
				for(int j=vektor.at(i%period) - 1; j &gt;= 0; j--) {
					if(j==vektor.at(i%period)-1) p[i][j]=1;
					else p[i][j] = p[i][j+1] + 1;
				}
			}
			return p;
		} catch(...) {
			delete[] p;
			throw;
		}
	} catch(...) {
		throw;
	}
}

int main ()
{

	int n;
	std::cout&lt;&lt;"Unesite broj elemenata vektora: ";
<a name="0"></a><font color="#FF0000"><a href="match571-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

	std::cin&gt;&gt;n;

	std::vector&lt;int&gt; vektor(n);
	std::cout&lt;&lt;"Unesite elemente vektora: ";
	for(int i=0; i&lt;n; i++) {
		std::cin&gt;&gt;vektor.at(i);
	}

	std::cout&lt;&lt;"Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: ";
	int f;
	std::cin&gt;&gt;f;
</font>//	while() std::cin&gt;&gt;f;

	int koliko_puta;
	try {
		int **pok;
		if(f==0) pok = AlocirajKontinualno(vektor, koliko_puta);
		if(f==1) pok = AlocirajFragmentirano(vektor, koliko_puta);
		std::cout&lt;&lt;"Dinamicki alocirana matrica: "&lt;&lt;std::endl;
		int period(Period(vektor));

		if(f==0) {
			for(int i=0; i&lt;period*koliko_puta; i++) {
				for(int j=0; j&lt;pok[i][0]; j++)
					std::cout&lt;&lt;pok[i][j]&lt;&lt;"  ";
				std::cout&lt;&lt;std::endl;
			}
			delete[] pok[0];
			delete[] pok;
		}
		if(f==1) {
			for(int i=0; i&lt;period*koliko_puta; i++) {
				for(int j=0; j&lt;vektor.at(i%period); j++)
					std::cout&lt;&lt;pok[i][j]&lt;&lt;"  ";
				std::cout&lt;&lt;std::endl;
			}
<a name="3"></a><font color="#00FFFF"><a href="match571-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

			for(int i=0; i&lt;koliko_puta*period; i++) delete[] pok[i];
			delete[] pok;
		}
	} catch(std::domain_error izuzetak) {
		std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
</font>	} catch(const char* izuzetak2) {
		std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak2;
	}

	return 0;
}</pre>
</body>
</html>
