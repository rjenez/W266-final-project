<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student6854.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student2821.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 3
	
	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!
	
	NAPOMENA: nece svi (javni) testovi sa zamgera biti 
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za 
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
<a name="0"></a><font color="#FF0000"><a href="match175-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

template&lt;typename tip&gt;
   int TestPerioda(std::vector&lt;tip&gt; v, int p){
   	if(p&lt;1 || p&gt;=v.size()) return 0;
   	for(int i=0; i&lt;v.size(); i++){
   		if(v[i]!=v[i+p]) return 0;
   	}
   	return 1;
   }
template&lt;typename tip&gt;
   int OdrediOsnovniPeriod(std::vector&lt;tip&gt; v){
   	for(int i=0; i&lt;v.size(); i++){
   		if(TestPerioda(v,i)) return i;
   	}
   	return 0;
   }
template&lt;typename tip&gt;
 tip **AlocirajFragmentirano(std::vector&lt;tip&gt; &amp;v, int &amp;koliko_puta){
  	if(v.size()==0) throw("Prazan vektor!");
  	int m=v.size();
  	for(int i=0; i&lt;v.size(); i++){
  		if(v[i]&lt;=0) throw std::domain_error ("Neispravan vektor!");
  	}
  	int period(OdrediOsnovniPeriod(v));
  	if(period&gt;0){
  		int pom(v.size());
  		for(;;){
  			if(pom%period==0) break;
  			pom++;
  		}
  		koliko_puta=(v.size()/period)+1;
  		int ostatak(pom%(koliko_puta-1));
  		for(int i=(period-ostatak); i&lt;period; i++) v.push_back(v[i]);
  	}
  	else {
  	    for(int i=0; i&lt;m; i++) v.push_back(v[i]);
  		koliko_puta=2;
  	}
  	int **pok(nullptr);
  	try{
  		pok=new int*[m*koliko_puta];
  		for(int i=0; i&lt;m*koliko_puta; i++){
  			pok[i]=nullptr;
  		}
  		try{
  		    for(int i=0; i&lt;koliko_puta; i++){
  		       for(int j=i*m; j&lt;(i+1)*m; j++) pok[i*m+j]=new int[v[j-i*m]];
  		    }
  		}catch(...){
  		    throw;
  		}
  	}
  	catch(std::bad_alloc){
  	    for(int i=0; i&lt;v.size(); i++) delete[] pok[i];
  	    delete[] pok;
  	    throw;
  	} catch(...){
  	    throw;
  	}
  	return pok;
  }
template&lt;typename tip&gt;
 tip **AlocirajKontiualno(std::vector&lt;tip&gt; &amp;v, int &amp;koliko_puta){
  	if(v.size()==0) throw("Prazan vektor!");
  	int m=v.size();
  	for(int i=0; i&lt;v.size(); i++) if(v[i]&lt;=0) throw std::domain_error("Neispravan vektor!");
  	int period(OdrediOsnovniPeriod(v));
  	//prosirenje
  	if(period&gt;0){
  	    int pom(v.size());
  	    for(;;){
  	        if(pom%period==0) break;
  	        pom++;
  	    }
  	    koliko_puta=(v.size()/period)+1;
  	    int ostatak(pom%(koliko_puta-1));
  	    for(int i=(period-ostatak); i&lt;period; i++) v.push_back(v[i]);
  	} else{
  	    for(int i=0; i&lt;m; i++) v.push_back(v[i]);
  	    koliko_puta=2;
  	}
  	int **pok(nullptr);
  	int vel=*max_element(v.begin(),v.end());
  	try{
  	    pok=new int*[m*koliko_puta];
  	    pok[0]=new int[v.size()*vel];
  	    int pom(1);
  	    for(int i=0; i&lt;koliko_puta; i++){
  	        pok[pom]=pok[pom-1]+v[i];
  	        pom++;
  	    }
  	}
  	catch(...){
  	    delete[] pok[0];
  	    delete[] pok;
  	    throw;
  	}
  	return pok;
  }
int main ()
{
    std::cout&lt;&lt;"Unesite broj elemenata vektora: ";
    int n;
    std::cin&gt;&gt;n;
    std::cout&lt;&lt;"Unesite elemente vektora: ";
    std::vector&lt;int&gt; v;
    for(int i=0; i&lt;n; i++){
        int pom;
        std::cin&gt;&gt;pom;
        v.push_back(pom);
    }
    int f;
    std::cout&lt;&lt;"Odaberite alokaciju: 1 - framentirana, 0 - kontinualna: ";
    std::cin&gt;&gt;f;
    if(f!=0 || f!=1) std::cout &lt;&lt; "Pogresan odabir!" &lt;&lt; std::endl;
    else {
        try{
        int **pok(nullptr);
        int koliko_puta;
        if(f==0) pok=AlocirajKontiualno(v,koliko_puta);
        else pok=AlocirajFragmentirano(v,koliko_puta);
        std::cout&lt;&lt;"Dinamicki alocirana matrica: "&lt;&lt;std::endl;
        
            if(f){
                for(int i=0; i&lt;v.size(); i++) delete [] pok[i];
                delete[] pok;
            } else{
                delete[] pok[0];
                delete[] pok;
            }
            
        }catch(std::domain_error izuzetak){
            std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        }
        catch(...){
            std::cout &lt;&lt; "Prazan vektor!" &lt;&lt; std::endl;
</font>        }
    }
	return 0;
}</pre>
</body>
</html>
