<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student7597.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student2157.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 3
	
	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!
	
	NAPOMENA: nece svi (javni) testovi sa zamgera biti 
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za 
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;

void Periodicnost(std::vector&lt;int&gt; V, int &amp;p){
	bool periodican;
	for(int i = 1; i &lt; V.size(); i++){
		periodican = true;
		for(int j = 0; j &lt; V.size(); j++){
			if(i+j==V.size()){p=i;return;}
			if(V.at(j) != V.at(j + i)){
				periodican = false;
				break;
			}
		}
		if(periodican){ p = i; return;}
	}
}

bool DaLiImaSmisla(std::vector&lt;int&gt; V){
	for(int i = 0; i &lt; V.size(); i++){
		if(V.at(i) &lt;= 0) return false;
	}
	return true;
}

int **AlocirajFragmentirano(const std::vector&lt;int&gt; &amp;V, int &amp;koliko_puta){
	if(!DaLiImaSmisla(V)) throw std::domain_error("Neispravan vektor!");
	if(V.size() == 0) throw ("Prazan vektor! ");
	int p = 0;
	Periodicnost(V, p);
	
	if(p == 0){
		p = V.size();
		koliko_puta = 2;
	}
	else if(V.size() % p == 0) koliko_puta = V.size()/p;
	else  koliko_puta = int(V.size() / p + 1);
	
	int nesto = koliko_puta * p;
	int **pokazivac(new int *[nesto]);
	int j = 0;
	for(int i = 0; i &lt; nesto; i++){
			pokazivac[i] = new int [V.at(j) + 1];
			j++;
			if(j == p) j = 0;
	}
    
	//popunjavanje
	int k = 0;
	for(int i  = 0; i &lt; nesto; i++){
		int nezz(0);
		for(int j = V.at(k) - 1; j &gt;= 0; j--){
			pokazivac[i][j] = p - nezz;
			nezz++;
		}
		k++;
		if(k == p) k = 0;
	}
	return pokazivac;
}

int **AlocirajKontinualno(const std::vector&lt;int&gt; &amp;V, int &amp;koliko_puta){
	if(!DaLiImaSmisla(V)) throw std::domain_error("Neispravan vektor!");
	if(V.size() == 0) throw ("Prazan vektor!");
	int p = 0;
	Periodicnost(V, p);
	if(p == 0){
		p = V.size();
		koliko_puta = 2;
	}
	else if(V.size() % p == 0) koliko_puta = V.size()/p;
	else koliko_puta = int(V.size() / p + 1);
	int **pok(new int *[koliko_puta * p]);
	int k = 0;
	int suma(0);
	for(int i = 0; i &lt; p; i++){
		suma += V.at(i);
	}
	suma *= koliko_puta;
	pok[0] = new int[suma];
	for(int i = 1; i &lt; koliko_puta * p; i++){
		pok[i] = pok[i - 1] + V.at(k);
		k++;
		if(k == p) k = 0;
	}
	//popunjavanje
	k = 0;
	int nesto(koliko_puta*p);
	for(int i  = 0; i &lt; nesto; i++){
		int nezz=1;
		for(int j = V.at(k)-1; j &gt;=0; j--){
			pok[i][j] =nezz; 
			nezz++;
		}
		k++;
		if(k == p) k = 0;
	}
	return pok;
}


int main ()
{
	try{
	std::cout&lt;&lt;"Unesite broj elemenata vektora: ";
	int n;
	std::cin&gt;&gt;n;
	std::cout&lt;&lt;"Unesite elemente vektora: ";
<a name="1"></a><font color="#00FF00"><a href="match982-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

	std::vector&lt;int&gt; V(n);
	for(int i = 0; i &lt; n; i++){
		std::cin&gt;&gt;V.at(i);
	}
	int opcija;
	std::cout&lt;&lt;"Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: ";
	std::cin&gt;&gt;opcija;
</font>	int koliko_puta;
	int **pok;
	if(opcija == 1) pok = AlocirajFragmentirano(V, koliko_puta);
	else pok = AlocirajKontinualno(V, koliko_puta);
	std::cout&lt;&lt;"Dinamicki alocirana matrica: \n";
	int p = 0;
	Periodicnost(V, p);
	if(p == 0){
		p = V.size();
		koliko_puta = 2;
	}
	int koliko = p * koliko_puta;
	int k = 0;
<a name="0"></a><font color="#FF0000"><a href="match982-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

	for(int i = 0; i &lt; koliko; i++){
		for(int j = 0; j &lt; V.at(k); j++){
			std::cout&lt;&lt;std::setw(3)&lt;&lt;std::left&lt;&lt;pok[i][j];
			
		}
		k++; 
</font>		if(k == p) k = 0;
		std::cout&lt;&lt;std::endl;
	}
<a name="2"></a><font color="#0000FF"><a href="match982-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	if(opcija == 1){
	for(int i = 0; i &lt; koliko; i++){
		delete[] pok[i];
	}
	delete[] pok;
	}
	else{
		delete[] pok[0]; delete[] pok;
</font>	}
	
	}
	catch(std::domain_error e){
		std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
	}
	catch(std::bad_alloc){
		std::cout&lt;&lt;"Izuzetak: Problemi sa memorijom! ";
	}
	catch(const char poruka[]){
		std::cout&lt;&lt;"Izuzetak: "&lt;&lt;poruka;
	}

	return 0;
}</pre>
</body>
</html>
