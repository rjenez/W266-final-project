<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student7080.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z3/student7080.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 3

	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!

	NAPOMENA: nece svi (javni) testovi sa zamgera biti
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;cmath&gt;
int max(std::vector&lt;int&gt; v)
{
	int m(v.at(0));
	for(int i(0); i&lt;v.size(); i++)if(v.at(i)&gt;m)m=v.at(i);
	return m;
}
int OdrediOsnovniPeriod(std::vector&lt;int&gt;);
int Suma(const std::vector&lt;int&gt; v, int koliko_puta)
{
	int suma(0);
	for(int j(0); j&lt;koliko_puta; j++) {
		if(OdrediOsnovniPeriod(v)!=0)
			for(int i(0); i&lt;OdrediOsnovniPeriod(v); i++) suma+=v.at(i);
		else
			for(int i(0); i&lt;v.size(); i++) suma+=v.at(i);
	}
	return suma;
}
bool TestPerioda(std::vector&lt;int&gt; v, int p )
{
	const double nestomalo(0.000001);
	if(v.size()&lt;=p or p &lt; 1 ) return false;
	for(int i(0); i&lt;v.size()-p; i++) {
		if(fabs(v.at(i)-v.at(i+p))&gt;nestomalo) return false;
	}
	return true;
}

int OdrediOsnovniPeriod(std::vector&lt;int&gt; v)
{
	for(int i(0); i&lt;v.size(); i++) {
		if(TestPerioda(v,i)==true) {
			return i;
		}
	}
	return v.size();
}

int VratiKolikoPuta(const std::vector&lt;int&gt; &amp;v )
{
	int koliko_puta(0);
	int OsnovniPeriod(OdrediOsnovniPeriod(v));
	if(OsnovniPeriod==v.size()) return 2;

	for(int i(0); i&lt;v.size(); i++) {
		if(koliko_puta*OsnovniPeriod&gt;v.size()-OsnovniPeriod) {
			koliko_puta++;
			return koliko_puta;
		}
		for(int j(0); j&lt;OsnovniPeriod-1; j++) {
			i++;
		}
		koliko_puta++;
	}
	return koliko_puta;
}

template&lt;typename Tip&gt;
<a name="1"></a><font color="#00FF00"><a href="match406-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

int**AlocirajKontinualno( const std::vector&lt;Tip&gt; &amp;v, int &amp;koliko_puta)
{
	if(v.size()==0) throw("Prazan vektor!");
	for(int i(0); i&lt;v.size(); i++) {
		if(v.at(i)&lt;=0) throw std::domain_error("Neispravan vektor!");
</font>	}
	int **pok=nullptr;
	koliko_puta=VratiKolikoPuta(v);
	try {
		pok=new int*[OdrediOsnovniPeriod(v)*koliko_puta] {};
	} catch(std::bad_alloc) {
		throw;
	}
	try {
		int sum(Suma(v,koliko_puta));
		pok[0]= new int[sum];
	} catch(std::bad_alloc) {
		delete[] pok;
		throw;
	}
	int j(0);
	for(int i(1); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) {
		pok[i]=pok[i-1]+v.at(j);
		j++;
		if(j==OdrediOsnovniPeriod(v)) j=0;
	}

	int k(0);
	for(int i(0); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) {
		for(int j(0); j&lt;v.at(k); j++) {
			pok[i][j]=v.at(k)-j;
		}
		k++;
		if(k==OdrediOsnovniPeriod(v)) k=0;
	}

	return pok;
}
template&lt;typename Tip&gt;
<a name="2"></a><font color="#0000FF"><a href="match406-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

int**AlocirajFragmentirano( const std::vector&lt;Tip&gt; &amp;v, int &amp;koliko_puta)
{
	if(v.size()==0)throw ("Prazan vektor!");
	for(int i(0); i&lt;v.size(); i++) {
		if(v.at(i)&lt;=0) throw std::domain_error("Neispravan vektor!");
</font>	}
	koliko_puta=VratiKolikoPuta(v);
	int** pok=nullptr;
	try {
		pok= new int*[OdrediOsnovniPeriod(v)*koliko_puta] {};
	} catch(std::bad_alloc) {
		throw;
	}
	try {
		int j(0);
		for(int i(0); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) {
			pok[i]=new int [v.at(j)];
			j++;
			if(j==OdrediOsnovniPeriod(v)) j=0;
		}
	} catch(std::bad_alloc) {
		for(int i(0); i&lt;OdrediOsnovniPeriod(v)*koliko_puta; i++) delete[] pok[i];
		delete[] pok;
		throw;
	}
	int m(0);
	for(int i(0); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) {
		int p(0);
		for(int j(v.at(m)-1); j&gt;=0; j--) {
			pok[i][j]=max(v)-p;
			p++;
		}
		m++;
		if(m==OdrediOsnovniPeriod(v)) m=0;
	}

	return pok;
}
int main ()
{
	try {
<a name="0"></a><font color="#FF0000"><a href="match406-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

		std::cout &lt;&lt; "Unesite broj elemenata vektora: " ;
		int n;
		std::cin &gt;&gt; n;
		std::cout &lt;&lt; "Unesite elemente vektora: " ;
		std::vector&lt;int&gt; v;
		for(int i(0); i&lt;n; i++) {
			int x;
			std::cin &gt;&gt; x;
			v.push_back(x);
		}
		std::cout &lt;&lt; "Odaberite alokaciju: 1 - fragmentirana, 0 - kontinualna: " ;
		int k;
		std::cin &gt;&gt; k;
		int**pok(nullptr);
</font>		int koliko_puta;
		if(k==0) {
			pok=AlocirajKontinualno(v,koliko_puta);
			std::cout &lt;&lt; "Dinamicki alocirana matrica:" &lt;&lt; std::endl;
			int m(0);
			for(int i(0); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) {
				for(int j(0); j&lt;v.at(m); j++) {
					std::cout &lt;&lt;std::left&lt;&lt;std::setw(3)&lt;&lt; pok[i][j] ;
				}
				m++;
				if(m==OdrediOsnovniPeriod(v))m=0;
				std::cout  &lt;&lt; std::endl;
			}
			delete[] pok[0];
			delete[] pok;
		} else {
			pok=AlocirajFragmentirano(v,koliko_puta);
			std::cout &lt;&lt; "Dinamicki alocirana matrica:" &lt;&lt; std::endl;
			int m(0);
			for(int i(0); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) {
				for(int j(0); j&lt;v.at(m); j++) {
					std::cout &lt;&lt;std::left&lt;&lt;std::setw(3)&lt;&lt; pok[i][j] ;
				}
				m++;
				if(m==OdrediOsnovniPeriod(v)) m=0;
				std::cout  &lt;&lt; std::endl;
			}
			for(int i(0); i&lt;koliko_puta*OdrediOsnovniPeriod(v); i++) delete[] pok[i];
			delete[] pok;
		}
	} catch(std::domain_error poruka) {
		std::cout &lt;&lt;"Izuzetak: "&lt;&lt; poruka.what() &lt;&lt; std::endl;
	} catch(std::bad_alloc) {
		std::cout &lt;&lt; "Problem sa memorijom" &lt;&lt; std::endl;
	} catch(...) {
		std::cout &lt;&lt; "Izuzetak: Prazan vektor!" &lt;&lt; std::endl;
	}
	return 0;
}</pre>
</body>
</html>
