<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student1531.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student1253.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match37-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;map&gt;


class Student
{
    int indeks;
    std::string godina;
    std::string imeprezime, adresa, telefon;

    static void UkloniRazmake(std::string &amp;s) {
        std::string temp(s);
        bool razmak(true), pocetak(true);
        int poc(0), kraj(s.size());
        for(int i=0; i&lt;s.size(); i++) {
            if(s[i] != ' ' &amp;&amp; razmak &amp;&amp; pocetak) {
                pocetak = false;
                razmak = false;
                poc = i;
            }
            if(s[i] == ' ' &amp;&amp; !razmak) {
                razmak = true;
                kraj = i;
            }
            if(s[i] != ' ') {
                razmak = false;
                kraj = s.size();
            }
        }
        s = temp.substr(poc, kraj-poc);

        temp = s;
        razmak = false;
        poc = 0;
        kraj = 0;
        for(int i=0; i&lt;temp.size(); i++) {
            if(temp[i] == ' ') {
                poc = i;
                while(i&lt;temp.size() &amp;&amp; temp[i]==' ') i++;
                kraj = i;
                s = temp.substr(0, poc) + " " + temp.substr(kraj, temp.size()-kraj);
                i--;
            }
        }

    }
public:
    Student(int indeks, std::string godina, std::string imeprezime, std::string adresa, std::string telefon) {
        std::string temp;
        temp = std::to_string(indeks);
        if(temp.size() != 5) throw std::domain_error("Neispravni parametri\n");


        if(godina.size() == 1 || godina.size() == 3) {
            if(godina[0] != '1' &amp;&amp; godina[0] != '2' &amp;&amp; godina[0] != '3') throw std::domain_error("Neispravni parametri\n");
            if(godina.size() == 3) {
                if(godina[1] != '/') throw std::domain_error("Neispravni parametri\n");
                if(godina[2] != 'B' &amp;&amp; godina[2] != 'M' &amp;&amp; godina[2] != 'D') throw std::domain_error("Neispravni parametri\n");
                if(godina[0] == 3 &amp;&amp; godina[2] == 'M') throw std::domain_error("Neispravni parametri\n");
            }
        } else {
            throw std::domain_error("Neispravni parametri\n");
        }
        UkloniRazmake(imeprezime);
        UkloniRazmake(adresa);

        bool prvi(true);
        for(int i=0; i&lt;telefon.size(); i++) {
            if( !(telefon[i] &gt;= '0' &amp;&amp; telefon[i] &lt;= '9') ) {
                if(prvi) {
                    if(telefon[i] != '/') throw std::domain_error("Neispravni parametri\n");
                    prvi = false;
                } else {
                    if(telefon[i] != '-') throw std::domain_error("Neispravni parametri\n");
                }
            }
        }
        this-&gt;indeks = indeks;
        this-&gt;godina = godina;
        this-&gt;imeprezime = imeprezime;
        this-&gt;telefon = telefon;
        this-&gt;adresa = adresa;
    }

    int DajIndeks() const {
        return indeks;
    }
    std::string DajGodinuStudija() const {
        std::string temp(godina);
        if(temp.size()==1) {
            temp += "/B";
        }
        return temp;
    }
    std::string DajImePrezime() const {

        return imeprezime;
    }
    std::string DajAdresu() const {
        return adresa;
    }
    std::string DajTelefon() const {
        return telefon;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; indeks &lt;&lt; "\n";
        std::cout &lt;&lt; "Godina studija: " &lt;&lt; this-&gt;DajGodinuStudija() &lt;&lt; "\n";
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; imeprezime &lt;&lt; "\n";
        std::cout &lt;&lt; "Adresa: " &lt;&lt; this-&gt;DajAdresu() &lt;&lt; "\n";
        std::cout &lt;&lt; "Telefon: " &lt;&lt; this-&gt;DajTelefon() &lt;&lt; std::endl;
    }

};

class Laptop
{
    int ev_broj;
    std::string naziv;
    std::string karakteristike;
    Student *kod_koga_je;
public:
    Laptop(int ev_broj, std::string naziv, std::string karakteristike) : kod_koga_je(nullptr) {
        if(ev_broj&lt;0) throw std::domain_error("Neispravni parametri\n");
        this-&gt;ev_broj = ev_broj;
        this-&gt;naziv = naziv;
        this-&gt;karakteristike = karakteristike;
    }
    int DajEvidencijskiBroj() const {
        return ev_broj;
    }
    std::string DajNaziv() const {
        return naziv;
    }
    std::string DajKarakteristike() const {
        return karakteristike;
    }
    void Zaduzi(Student &amp;s) {
        if(kod_koga_je != nullptr) throw std::domain_error("Laptop vec zaduzen\n");
        kod_koga_je = &amp;s;
    }
    void Razduzi() {
        if(kod_koga_je != nullptr) {
            delete kod_koga_je; //treba li
            kod_koga_je = nullptr;
        }
    }
    bool DaLiJeZaduzen() const {
        if(kod_koga_je) return true;
        return false;
    }
    Student &amp;DajKodKogaJe() {
        if(kod_koga_je == nullptr) throw std::domain_error("Laptop nije zaduzen\n");
        return *kod_koga_je;
    }
    Student *DajPokKodKogaJe() {
        return kod_koga_je;
    }
    void Ispisi() const {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;ev_broj&lt;&lt;"\n";
        std::cout&lt;&lt;"Naziv: "&lt;&lt;naziv&lt;&lt;"\n";
        std::cout&lt;&lt;"Karakteristike: "&lt;&lt;karakteristike&lt;&lt;std::endl;
    }

};


class Administracija
{
    std::map&lt;int, Student* &gt; s;
    std::map&lt;int, Laptop* &gt; l;
    static void Dealokacija(Administracija *a) {
        for(auto it = a-&gt;s.begin(); it!=a-&gt;s.end(); it++) {
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
        for(auto it = a-&gt;l.begin(); it!=a-&gt;l.end(); it++) {
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
    }
public:
    Administracija() = default;
    ~Administracija() {
        Dealokacija(this);
    }
    Administracija(const Administracija &amp;a) {
        for(auto it = a.s.begin(); it!=a.s.end(); it++) {
            s.insert({it-&gt;first, nullptr });
        }
        for(auto it = a.l.begin(); it!=a.l.end(); it++) {
            l.insert({it-&gt;first, nullptr });
        }

        auto i(a.s.begin());
        try {
            for(auto it = s.begin(); it!=s.end() &amp;&amp; i != a.s.end(); it++) {
                it-&gt;second = new Student(*(i-&gt;second));
                i++;
            }
        } catch(...) {
            Dealokacija(this);
            throw;
        }
        auto j(a.l.begin());
        try {
            for(auto it = l.begin(); it!=l.end() &amp;&amp; j != a.l.end(); it++) {
                it-&gt;second = new Laptop(*(j-&gt;second));
                j++;
            }
        } catch(...) {
            Dealokacija(this);
            throw;
        }
    }

    Administracija(Administracija &amp;&amp;a) : s(a.s), l(a.l) {
        for(auto it = a.s.begin(); it!=a.s.end(); it++) {
            s.insert({it-&gt;first, nullptr });
        }
        for(auto it = a.l.begin(); it!=a.l.end(); it++) {
            l.insert({it-&gt;first, nullptr });
        }
        auto i(a.s.begin());
        for(auto it = s.begin(); it!=s.end() &amp;&amp; i != a.s.end(); it++) {
            it-&gt;second = i-&gt;second;
            i++;
        }
        auto j(a.l.begin());
        for(auto it = l.begin(); it!=l.end() &amp;&amp; j != a.l.end(); it++) {
            it-&gt;second =j-&gt;second;
            j++;
        }
        for(auto it = a.s.begin(); it!=a.s.end(); it++) {
            it-&gt;second = nullptr;
        }
        for(auto it = a.l.begin(); it!=a.l.end(); it++) {
            it-&gt;second = nullptr;
        }

    }
    Administracija &amp;operator =(const Administracija &amp;a) {
        Dealokacija(this);
        *this = a;
        for(auto it = s.begin(); it!=s.end(); it++) {
            it-&gt;second = nullptr;
        }
        for(auto it = l.begin(); it!=l.end(); it++) {
            it-&gt;second = nullptr;
        }
        auto i(a.s.begin());
        try {
            for(auto it = s.begin(); it!=s.end() &amp;&amp; i != a.s.end(); it++) {
                it-&gt;second = new Student(*(i-&gt;second));
                i++;
            }
        } catch(...) {
            Dealokacija(this);
            throw;
        }
        auto j(a.l.begin());
        try {
            for(auto it = l.begin(); it!=l.end() &amp;&amp; j != a.l.end(); it++) {
                it-&gt;second = new Laptop(*(j-&gt;second));
                j++;
            }
        } catch(...) {
            Dealokacija(this);
            throw;
        }
        return *this;
    }
    Administracija &amp;operator =(Administracija &amp;&amp;a) {
        std::swap(s, a.s);
        std::swap(l, a.l);
        return *this;
    }

    void RegistrirajNovogStudenta(int indeks, std::string godina, std::string imeprezime, std::string adresa, std::string telefon)  {
        for(auto it = s.begin(); it!=s.end(); it++) {
            if(it-&gt;second-&gt;DajIndeks() == indeks) throw std::domain_error("Student s tim indeksom vec postoji\n");
        }
        Student *novi(new Student(indeks, godina, imeprezime, adresa, telefon));
        s.insert({indeks, novi});
    }

    void RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike)  {
        for(auto it = l.begin(); it!=l.end(); it++) {
            if(it-&gt;second-&gt;DajEvidencijskiBroj() == ev_broj) throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji\n");
        }
        Laptop *novi(new Laptop(ev_broj, naziv, karakteristike));
        l.insert({ev_broj, novi});
    }

    Student &amp;NadjiStudenta(int indeks) {
        for(auto it = s.begin(); it!=s.end(); it++) {
            if(it-&gt;second-&gt;DajIndeks() == indeks) {
                return *(it-&gt;second);
            }
        }
        throw std::domain_error("Student nije nadjen\n");
    }
    Student NadjiStudenta(int indeks) const {
        for(auto it = s.begin(); it!=s.end(); it++) {
            if(it-&gt;second-&gt;DajIndeks() == indeks) {
                return *(it-&gt;second);
            }
        }
        throw std::domain_error("Student nije nadjen\n");
    }

    Laptop &amp;NadjiLaptop(int ev_broj) {
        for(auto it = l.begin(); it!=l.end(); it++) {
            if(it-&gt;second-&gt;DajEvidencijskiBroj() == ev_broj) {
                return *(it-&gt;second);
            }
        }
        throw std::domain_error("Laptop nije nadjen\n");
    }
    Laptop NadjiLaptop(int ev_broj) const {
        for(auto it = l.begin(); it!=l.end(); it++) {
            if(it-&gt;second-&gt;DajEvidencijskiBroj() == ev_broj) {
                return *(it-&gt;second);
            }
        }
        throw std::domain_error("Laptop nije nadjen\n");
    }

    void IzlistajStudente() const {
        for(auto it = s.begin(); it!=s.end(); it++) {
            it-&gt;second-&gt;Ispisi();
            std::cout&lt;&lt;std::endl;
        }
    }
    void IzlistajLaptope() const {
        for(auto it = l.begin(); it!=l.end(); it++) {
            it-&gt;second-&gt;Ispisi();
            if(it-&gt;second-&gt;DaLiJeZaduzen()) {
                Student temp(it-&gt;second-&gt;DajKodKogaJe());
                std::cout&lt;&lt;"Zaduzio(la): "&lt;&lt;temp.DajImePrezime()&lt;&lt;" ("&lt;&lt;temp.DajIndeks()&lt;&lt;")\n";
            }
            std::cout&lt;&lt;std::endl;
        }
    }

    void ZaduziLaptop(int indeks, int ev_broj) {
        bool ima_student(false);
        for(auto it = s.begin(); it!=s.end(); it++) {
            if(it-&gt;second-&gt;DajIndeks() == indeks) {
                ima_student = true;
                bool ima_laptop(false);
                for(auto it2 = l.begin(); it2!=l.end(); it2++) {
                    if(it2-&gt;second-&gt;DajEvidencijskiBroj() == ev_broj) {
                        ima_laptop = true;
                        for(auto it3 = l.begin(); it3!=l.end(); it3++) {
                            if(it3-&gt;second-&gt;DajPokKodKogaJe()) {
                                if(it3-&gt;second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() == indeks) {
                                    throw std::domain_error("Student je vec zaduzio laptop\n");
                                }
                            }
                        }

                        it2-&gt;second-&gt;Zaduzi(*(it-&gt;second));
                    }
                }
                if(!ima_laptop) throw std::domain_error("Laptop nije nadjen\n");
            }
        }
        if(!ima_student) {
            throw std::domain_error("Student nije nadjen\n");
        }
    }

    int NadjiSlobodniLaptop() const {
        for(auto it = l.begin(); it!=l.end(); it++) {
            if( !(it-&gt;second-&gt;DaLiJeZaduzen()) ) {
                return it-&gt;second-&gt;DajEvidencijskiBroj();
            }
        }
        throw std::domain_error("Nema slobodnih laptopa\n");
    }

    void RazduziLaptop(int ev_broj) {
        for(auto it = l.begin(); it!=l.end(); it++) {
            if(it-&gt;second-&gt;DajEvidencijskiBroj() == ev_broj) {
                if( !(it-&gt;second-&gt;DaLiJeZaduzen()) ) {
                    throw std::domain_error("Laptop nije zaduzen\n");
                }
                it-&gt;second-&gt;Razduzi();
            }
        }

        throw std::domain_error("Laptop nije nadjen\n");
    }
    void PrikaziZaduzenja() const {
        bool test(false);
        for(auto it = l.begin(); it!=l.end(); it++) {
            if(it-&gt;second-&gt;DaLiJeZaduzen()) {
                test = true;
                Student temp(it-&gt;second-&gt;DajKodKogaJe());
                std::cout&lt;&lt;"Student "&lt;&lt;temp.DajImePrezime()&lt;&lt;" ("&lt;&lt;temp.DajIndeks()&lt;&lt;") zaduzio/la laptop broj "&lt;&lt;it-&gt;second-&gt;DajEvidencijskiBroj()&lt;&lt;"\n";
            }
            std::cout&lt;&lt;std::endl;
        }
        if(!test) {
            std::cout&lt;&lt;"Nema zaduzenja\n";
        }
    }

};


int main ()
{
    try {
        Administracija etf;

        etf.RegistrirajNoviLaptop(123, "Dell", "CPU 3.0 GHz, 4 GB RAM");
        etf.RegistrirajNoviLaptop(331, "ASUS", "CPU 3.5 GHz, 2 GB RAM");
        etf.RegistrirajNoviLaptop(122, "Dell 2", "CPU 3.2 GHz, 6 GB RAM");


        etf.RegistrirajNovogStudenta(14212, "1","Benjamin", "Francuska revolucija 23", "12/34-56");
        etf.RegistrirajNovogStudenta(17528, "2","Ivan", "Trg vjecnih studenata 12", "048/597-585");
        etf.RegistrirajNovogStudenta(17525, "3", "Ante" ,"Trg vjecnih studenata 11", "062/582-757");

        etf.ZaduziLaptop(14212, 122);
        etf.ZaduziLaptop(17525,331);
        etf.IzlistajLaptope();
    } catch(std::domain_error izu) {
        std::cout&lt;&lt;izu.what();
    }
    return 0;
</font>}
</pre>
</body>
</html>
