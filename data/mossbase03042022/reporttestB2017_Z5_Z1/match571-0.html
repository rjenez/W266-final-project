<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student8317.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student8317.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;

std::string Postavi (const std::string&amp; ime_i_prezime)
{
    std::string novi;
    for(int i=0; i&lt;ime_i_prezime.length(); i++) {

        int j=i;
        while(j&lt;ime_i_prezime.length() &amp;&amp; ime_i_prezime[j]==' ') j++;
        if(i!=0 &amp;&amp; j!=ime_i_prezime.length()) novi.push_back(ime_i_prezime[i]);
        if(j!=ime_i_prezime.length() &amp;&amp; ( i!=j || i==0)) novi.push_back(ime_i_prezime[j]);
        i=j;
    }
    return novi;

}

std::string Studiji[] {"1", "2", "3", "1/B", "2/B", "3/B","1/M", "2/M", "3/M","1/D", "2/D", "3/D"};
class Student
{
    int broj_indeksa;
<a name="7"></a><font color="#0000FF"><a href="match571-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    std::string godina_studija, ime_i_prezime, adresa,  broj_telefona;

public:

    Student (int broj_indeksa, std::string godina_studija, std::string ime_i_prezime, std::string adresa,
             std::string telefon)   {
</font>        Student::broj_indeksa=broj_indeksa;
        {
            int i(0);
            for( i=0; i&lt;12; i++) {
                if(godina_studija==Studiji[i]) {
                    Student::godina_studija=Studiji[i];
                    break;
                }
            }
            if(i==12) throw std::domain_error("Neispravni parametri");
        }
        Student::ime_i_prezime=Postavi(ime_i_prezime);
        Student::adresa=Postavi(adresa);


        int i=0;

        while(i&lt;telefon.length() &amp;&amp; (telefon[i]&lt;='9' &amp;&amp; telefon[i]&gt;='0')  ) i++;
<a name="1"></a><font color="#00FF00"><a href="match571-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        if(i==0 || i==telefon.length() || telefon[i]!='/') {
            throw std::domain_error("Neispravni parametri");
        }
        i++;
        while(i&lt;telefon.length() &amp;&amp; telefon[i]&lt;='9' &amp;&amp; telefon[i]&gt;='0'  )i++;
</font><a name="2"></a><font color="#0000FF"><a href="match571-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        if(i==telefon.length() || telefon[i]!='-')throw std::domain_error("Neispravni parametri");
        i++;
        while(i&lt;telefon.length() &amp;&amp; telefon[i]&lt;='9' &amp;&amp; telefon[i]&gt;='0'  )i++;
</font>        if(i!=telefon.length())throw std::domain_error("Neispravni parametri");
        broj_telefona=telefon;
    }
    std::string DajImePrezime() const {
        return ime_i_prezime;
    }
    std::string DajAdresu() const {
        return adresa;
    }
    std::string DajTelefon() const {
        return broj_telefona;
    }
    int DajIndeks() const {
        return broj_indeksa;
    }
    std::string DajGodinuStudija() const {

        if(godina_studija.size()==1 &amp;&amp; godina_studija[0]-'0'&lt;4) return Studiji[godina_studija[0]-'0'+2];
        return godina_studija;
    }
    void Ispisi() const {
        std::cout&lt;&lt;"Broj indeksa: "&lt;&lt;broj_indeksa&lt;&lt;std::endl
                 &lt;&lt;"Godina studija: "&lt;&lt;DajGodinuStudija()&lt;&lt;std::endl
                 &lt;&lt;"Ime i prezime: "&lt;&lt;ime_i_prezime&lt;&lt;std::endl
<a name="6"></a><font color="#00FF00"><a href="match571-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                 &lt;&lt;"Adresa: "&lt;&lt;adresa&lt;&lt;std::endl
                 &lt;&lt;"Telefon: "&lt;&lt;broj_telefona&lt;&lt;std::endl;
    }
};

class Laptop
{
    int ev_broj;
    std::string naziv;
</font>    std::string karakteristike;
    Student* kod_koga_je;
public:
    Laptop(int ev_broj, std::string naziv, std::string karakteristike):  naziv(naziv),
        karakteristike(karakteristike) {
        if(ev_broj&lt;0) throw std::domain_error("Neispravni parametri");
        Laptop::ev_broj=ev_broj;
        kod_koga_je=nullptr;
    }
    int DajEvidencijskiBroj() const {
<a name="4"></a><font color="#FF00FF"><a href="match571-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        return ev_broj;
    }
    std::string DajNaziv() const {
        return naziv;
    }
    std::string DajKarakteristike() const {
        return karakteristike;
    }
    void Zaduzi(Student&amp; a) {
        if(kod_koga_je!=nullptr) throw std::domain_error("Laptop vec zaduzen");
        kod_koga_je=&amp;a;
</font>    }
    void Razduzi() {
<a name="3"></a><font color="#00FFFF"><a href="match571-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if(kod_koga_je!=nullptr) kod_koga_je=nullptr;
    }
    bool DaLiJeZaduzen() const {
        return kod_koga_je!=nullptr;
    }
    Student&amp; DajKodKogaJe() const {
        if(kod_koga_je==nullptr) throw std::domain_error("Laptop nije zaduzen");
        return *kod_koga_je;
    }
    Student* DajPokKodKogaJe() const {
        return kod_koga_je;
    }
    void Ispisi() const {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;ev_broj&lt;&lt;std::endl
</font><a name="0"></a><font color="#FF0000"><a href="match571-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                 &lt;&lt;"Naziv: "&lt;&lt;naziv&lt;&lt;std::endl
                 &lt;&lt;"Karakteristike: "&lt;&lt;karakteristike&lt;&lt;std::endl;

        //provjeriti je l treba novi red
    }
};

class Administracija
{
    std::map&lt;int, Student*&gt; studenti;
    std::map&lt;int, Laptop*&gt;laptopi;
public:
    Administracija()=default; // provjeriti je li dafult
</font>    Administracija(const Administracija&amp; v) {
        try {

            for(auto it=v.studenti.begin(); it!=v.studenti.end(); it++) {
                studenti.emplace(std::make_pair((it-&gt;first), new Student(*(it-&gt;second))));}
            }
            catch(std::bad_alloc) {

                for(auto it=studenti.begin(); it!=studenti.end(); it++) {
                    delete it-&gt;second;
                }
                studenti.clear();
                throw;
            }
            try {

                for(auto it=v.laptopi.begin(); it!=v.laptopi.end(); it++) {
                    laptopi.emplace(it-&gt;first, new Laptop(*(it-&gt;second)));
                }}
                catch(std::bad_alloc) {

                    for(auto it=laptopi.begin(); it!=laptopi.end(); it++) {
                        delete it-&gt;second;
                    }
                    laptopi.clear();
                    throw;
                }
            }
Administracija(Administracija&amp;&amp; v){
    if(&amp;v!=this){
    studenti=v.studenti; laptopi=v.laptopi;
   for( auto it=v.laptopi.begin(); it!=v.laptopi.end(); it++) it-&gt;second=nullptr;
 for(auto it=v.studenti.begin(); it!=v.studenti.end(); it++) it-&gt;second=nullptr;
    } 
}
Administracija&amp; operator =( Administracija v){
     std::swap(studenti, v.studenti); std::swap(laptopi, v.laptopi);
    return *this;   
        
    }
Administracija&amp;operator=(Administracija&amp;&amp; v){
    if(&amp;v!=this){
    studenti=v.studenti; laptopi=v.laptopi;
     for( auto it=v.laptopi.begin(); it!=v.laptopi.end(); it++) it-&gt;second=nullptr;
 for(auto it=v.studenti.begin(); it!=v.studenti.end(); it++) it-&gt;second=nullptr;}
 return *this;
}
void RegistrirajNovogStudenta(int broj_indeksa, std::string godina_studija, std::string ime_i_prezime, std::string adresa,
             std::string telefon){
                 if(studenti.count(broj_indeksa)) throw std::domain_error("Student s tim indeksom vec postoji");
                 studenti.emplace(broj_indeksa, new Student(broj_indeksa, godina_studija, ime_i_prezime, adresa, telefon));
             }
void RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike){
    if(laptopi.count(ev_broj)) throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
    laptopi.emplace(ev_broj, new Laptop(ev_broj, naziv, karakteristike));
}
Student &amp; NadjiStudenta(int broj_indeksa){
    if(!studenti.count(broj_indeksa)) throw std::domain_error("Student nije nadjen");
    return *(studenti[broj_indeksa]);
}
Student  NadjiStudenta( int broj_indeksa) const {
    if(!studenti.count(broj_indeksa)) throw std::domain_error("Student nije nadjen");
    auto it=studenti.find(broj_indeksa);
    return *(it-&gt;second);
}
Laptop &amp; NadjiLaptop(int ev_broj){
    if(!laptopi.count(ev_broj)) throw std::domain_error("Laptop nije nadjen");
    return *(laptopi[ev_broj]);
}
Laptop  NadjiLaptop( int ev_broj) const {
    if(!laptopi.count(ev_broj)) throw std::domain_error("Laptop nije nadjen");
    auto it=laptopi.find(ev_broj);
    return *(it-&gt;second);
}
void IzlistajStudente() const {
    for(auto it=studenti.begin(); it!=studenti.end(); it++){
       (*(it-&gt;second)).Ispisi(); std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}
void IzlistajLaptope() const {
    for(auto it=laptopi.begin(); it!=laptopi.end(); it++){
       (*(it-&gt;second)).Ispisi();
        if((*(it-&gt;second)).DaLiJeZaduzen()){
            std::cout&lt;&lt;std::endl&lt;&lt;"Zaduzio(la): "&lt;&lt;(((it-&gt;second)-&gt;DajKodKogaJe())).DajImePrezime()&lt;&lt;" ("&lt;&lt;
            (((it-&gt;second)-&gt;DajKodKogaJe())).DajIndeks()&lt;&lt;")";
        }
        std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}

void ZaduziLaptop(int broj_indeksa, int ev_broj){
    if(!studenti.count(broj_indeksa)) throw std::domain_error("Student nije nadjen");
      if(!laptopi.count(ev_broj)) throw std::domain_error("Laptop nije nadjen");
<a name="5"></a><font color="#FF0000"><a href="match571-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

      if(laptopi[ev_broj]-&gt;DaLiJeZaduzen()) throw std::domain_error("Laptop vec zaduzen");
      for( auto it=laptopi.begin(); it!=laptopi.end(); it++) if(((it-&gt;second)-&gt;DaLiJeZaduzen()) &amp;&amp;
      ((it-&gt;second)-&gt;DajKodKogaJe()).DajIndeks()==broj_indeksa)
</font>      throw std::domain_error("Student je vec zaduzio laptop");
      NadjiLaptop(ev_broj).Zaduzi(NadjiStudenta(broj_indeksa));
    
}
int NadjiSlobodanLaptop(){
       bool nadjen(false); int broj;
     for( auto it=laptopi.begin(); it!=laptopi.end(); it++) {
  if(!((it-&gt;second)-&gt;DaLiJeZaduzen())) {nadjen=true; broj=it-&gt;first; break;}}
     if(!nadjen) throw std::domain_error("Nema slobodnih laptopa");
    return broj;
}
void RazduziLaptop(int ev_broj){
    if(!laptopi.count(ev_broj)) throw std::domain_error("Laptop nije nadjen");
    if(!(laptopi[ev_broj]-&gt;DaLiJeZaduzen())) throw std::domain_error("Laptop nije zaduzen");
    laptopi[ev_broj]-&gt;Razduzi();
}

void PrikaziZaduzenja() const {
    bool zaduzeni(false);
for( auto it=laptopi.begin(); it!=laptopi.end(); it++) {
    
  if(((it-&gt;second)-&gt;DaLiJeZaduzen())){
      std::cout&lt;&lt;"Student "&lt;&lt;(((it-&gt;second)-&gt;DajKodKogaJe())).DajImePrezime()&lt;&lt;" ("&lt;&lt;
            (((it-&gt;second)-&gt;DajKodKogaJe())).DajIndeks()&lt;&lt;") zaduzio/la laptop broj "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            //provjeriti novi red
            zaduzeni=true;
  }}
  if(!zaduzeni) std::cout&lt;&lt;"Nema zaduzenja";
}
~Administracija(){
    for( auto it=laptopi.begin(); it!=laptopi.end(); it++) { delete it-&gt;second; it-&gt;second=nullptr;}
    for( auto it=studenti.begin(); it!=studenti.end(); it++) { delete it-&gt;second; it-&gt;second=nullptr;}
    
}
        };

//Laptop::kod_koga_je=nullptr;


        int main () {
            try {
Administracija a;
int opcija; do{
              std::cout&lt;&lt;"Unesite neku od zeljenih opcija: "&lt;&lt;std::endl
              &lt;&lt;"1: Registriraj Novi Laptop"&lt;&lt;std::endl
              &lt;&lt;"2: Registriraj Novog Studenta"&lt;&lt;std::endl
              &lt;&lt;"3: Izlistaj Laptope"&lt;&lt;std::endl
              &lt;&lt;"4: IzlistajStudente"&lt;&lt;std::endl
              &lt;&lt;"5: Zaduzi Laptop"&lt;&lt;std::endl
              &lt;&lt;"6: PrikaziZaduzenja"&lt;&lt;std::endl
              &lt;&lt;"7: Nadji slobodan laptop"&lt;&lt;std::endl
              &lt;&lt;"8: Zavrsi"&lt;&lt;std::endl;
              std::cin&gt;&gt;opcija;
              switch(opcija){
                  case 8: 
                  break;
                  case 1:
                  std::cout&lt;&lt;"Unesite evidencijski broj, naziv i karakteristike: ";
                  try{
                      
                  
                  int broj;
                  std::string m,b;
                  std::cin&gt;&gt;broj;
                  std::cin.clear();
                  std::cin.ignore(1000,'\n');
                  std::getline(std::cin, m);
                  std::getline(std::cin, b);
                   a.RegistrirajNoviLaptop(broj, m, b);
                  } catch(...){}
                  break;
                  case 2: 
                  std::cout&lt;&lt;"Unesite  broj indeksa, godinu studija ime i prezime, adresu i telefon: ";
                  try{
                      
                  
                  int broj1;
                  std::string naz0, kar0,naz1,naz3;
                  std::cin&gt;&gt;broj1;
                  std::cin.clear();
                  std::cin.ignore(1000,'\n');
                  std::getline(std::cin, naz0);
                  std::getline(std::cin, kar0);
                   std::getline(std::cin, naz1);
                    std::getline(std::cin, naz3);
                    a.RegistrirajNovogStudenta(broj1,naz0,kar0,naz1,naz3);
                  
              } catch(std::domain_error iz ){
                  std::cout&lt;&lt;iz.what();
              }
              break;
              case 3:
              a.IzlistajLaptope();
              break;
              case 4:
              a.IzlistajStudente();
              case 5:
              try{
                  std::cout&lt;&lt;"Unesire evidencijski broj laptopa i broj indeksa studenta";
                  int indeks, ev;
                  std::cin&gt;&gt;ev&gt;&gt;indeks;
                  a.ZaduziLaptop(indeks,ev);
              }
              catch(std::domain_error iz ){
                  std::cout&lt;&lt;iz.what();
              }
              break;
              case 6:
              a.PrikaziZaduzenja();
              case 7:
              try{ int brojz=a.NadjiSlobodanLaptop();
                  std::cout&lt;&lt;"Slobodan laptop ima broj: "&lt;&lt;brojz;
              }
              catch(std::domain_error iz ){
                  std::cout&lt;&lt;iz.what();
              }
              break;
              
              
   } } while(opcija!=8);
            }
   catch(std::domain_error iz) {
                std::cout&lt;&lt;iz.what();
            }
            return 0;
        }
</pre>
</body>
</html>
