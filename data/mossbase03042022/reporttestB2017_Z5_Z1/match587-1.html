<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student6877.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student4469.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match587-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;

class Student
{
    int br_indexa;
    std::string godina_studija, imeprezime, adresa, br_telefona;
    bool testindeksa (int broj) {
</font>        if(broj&lt;=0)return false;
        int brojac=0;
        while(broj!=0) {
            broj/=10;
            brojac++;
        }
        if(brojac==5)return true;
        return false;
    }

    bool testgodine (std::string godina) {
        if(godina.size()==0)return false;
        std::string niz[11]= {"1","2","3","1/B","2/B","3/B","1/M","2/M","1/D","2/D","3/D"};
        int i=0;
        for(; i&lt;11; i++) {
            if(godina==niz[i])break;
        }
        if(i!=11)return true;
        return false;
    }

    bool testbroja(std::string broj) {
        if(broj.size()==0) return false;
        int i=0;
        if(broj[i]&gt;='0' &amp;&amp; broj[i]&lt;='9') {
            while(i&lt;broj.size() &amp;&amp; broj[i]&gt;='0' &amp;&amp; broj[i]&lt;='9') {
                i++;
            }
            if(i!=broj.size() &amp;&amp; broj[i]=='/') {
                i++;
                while(i&lt;broj.size() &amp;&amp; broj[i]&gt;='0' &amp;&amp; broj[i]&lt;='9') {
                    i++;
                }
                if(i!=broj.size() &amp;&amp; broj[i]=='-') {
                    i++;
                    while(i&lt;broj.size() &amp;&amp; broj[i]&gt;='0' &amp;&amp; broj[i]&lt;='9') {
                        i++;
                    }
                    if(i!=broj.size())return false;

                } else return false;
            } else return false;
        } else return false;

        return true;
    }
    
    std::string sredi_ime(std::string ime) {
        std::string pomocni=std::string();
       int i=0;
       while(i!=ime.size()) {
       while(i&lt;ime.size() &amp;&amp; ime[i]==' '){
           i++;
       } int j=i;
       while(j&lt;ime.size() &amp;&amp;ime[j]!=' ') {
           j++;
       }
        pomocni+=ime.substr(i,j-i);
        if(j!=ime.size()){
            int k=j; while(k&lt;ime.size() &amp;&amp; ime[k]==' ' )k++;
            
            if(k!=ime.size())pomocni+=' ';
            
        }
        i=j;
        
    }
   return pomocni;
}

public:

    Student(int indeks, std::string godina, std::string ime, std::string adresa, std::string broj);
    int DajIndeks() const {return br_indexa;}
    std::string DajImePrezime() const {return imeprezime;}
    std::string DajGodinuStudija() const {
        if(godina_studija=="1")return"1/B";
        if(godina_studija=="2")return"2/B";
        if(godina_studija=="3")return"3/B";
        return godina_studija;}
    std::string DajAdresu() const {return adresa;}
    std::string DajTelefon() const {return br_telefona;}
    void Ispisi () const {
        std::cout&lt;&lt;"Broj indeksa: "&lt;&lt;br_indexa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina studija: "&lt;&lt;DajGodinuStudija()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;imeprezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Telefon: "&lt;&lt;br_telefona&lt;&lt;std::endl;
    }
    

};

<a name="3"></a><font color="#00FFFF"><a href="match587-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

Student::Student(int indeks, std::string godina, std::string ime, std::string adresa1, std::string broj)
{
    if(!testindeksa(indeks) || !testgodine(godina) ||!testbroja(broj)) throw std::domain_error("Neispravni parametri");
</font>    ime =sredi_ime(ime);
     br_indexa=indeks; godina_studija=godina; imeprezime=ime; adresa=adresa1; br_telefona=broj;
}

class Laptop {
  int ev_broj; std::string naziv, karakteristike;
  Student *kod_koga_je;
  public: 
  Laptop(int broj,std::string ime, std::string karakteristike):naziv(ime),karakteristike(karakteristike),kod_koga_je(nullptr) {
      if(broj&lt;0)throw std::domain_error("Neispravni parametri");
      ev_broj=broj;
  }
  int DajEvidencijskiBroj()const {return ev_broj;}
  std::string DajNaziv() const {return naziv;}
  std::string DajKarakteristike() const {return karakteristike;}
  void Zaduzi (Student &amp; student) {
      if(kod_koga_je!=nullptr)throw std::domain_error("Laptop vec zaduzen");
      kod_koga_je=&amp;student;
  }
  void Razduzi() {if(kod_koga_je!=nullptr)kod_koga_je=nullptr;}
  bool DaLiJeZaduzen() {if(kod_koga_je!=nullptr)return true; return false;}
  Student &amp; DajKodKogaJe() {
      if(kod_koga_je==nullptr)throw std::domain_error("Laptop nije zaduzen");
      return *kod_koga_je;
  }
    Student* DajPokKodKogaJe() {return kod_koga_je;}
    void Ispisi() const {
    std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;ev_broj&lt;&lt;std::endl;
    std::cout&lt;&lt;"Naziv: "&lt;&lt;naziv&lt;&lt;std::endl;
    std::cout&lt;&lt;"Karakteristike: "&lt;&lt;karakteristike&lt;&lt;std::endl;
}    
};


<a name="0"></a><font color="#FF0000"><a href="match587-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

class Administracija {
  std::map&lt;int, Student*&gt; mapa_studenti;
  std::map&lt;int, Laptop*&gt; mapa_laptopi;
  public :
  Administracija()=default;
  Administracija (const Administracija&amp; admin);
  Administracija(Administracija &amp;&amp; admin);
  Administracija&amp; operator=(const Administracija&amp; admin);
  Administracija &amp;operator=(Administracija &amp;&amp;admin);    
</font><a name="2"></a><font color="#0000FF"><a href="match587-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

  void RegistrirajNovogStudenta(int indeks, std::string godina, std::string ime, std::string adresa, std::string broj);
  void RegistrirajNoviLaptop(int broj,std::string ime, std::string karakteristike);
  Student&amp; NadjiStudenta(int broj) {
      auto it=mapa_studenti.find(broj); if(it==mapa_studenti.end()) throw std::domain_error("Student nije nadjen"); else return *it-&gt;second;
</font>  }
  Student NadjiStudenta(int broj) const{
      auto it=mapa_studenti.find(broj); if(it==mapa_studenti.end()) throw std::domain_error("Student nije nadjen"); else return *it-&gt;second;
  }
  Laptop&amp; NadjiLaptop(int broj) {
      auto it=mapa_laptopi.find(broj); if(it==mapa_laptopi.end()) throw std::domain_error("Laptop nije nadjen"); else return *it-&gt;second;
  }
  Laptop NadjiLaptop(int broj) const{
      auto it=mapa_laptopi.find(broj); if(it==mapa_laptopi.end()) throw std::domain_error("Laptop nije nadjen"); else return *it-&gt;second;
  }
  void IzlistajStudente();
  void IzlistajLaptope();
  void ZaduziLaptop(int indeks, int evid);
  int NadjiSlobodniLaptop ();
  void RazduziLaptop(int evid);
  void PrikaziZaduzenja();
  ~Administracija();
  
};

Administracija::Administracija(const Administracija&amp; admin) {
    auto it=admin.mapa_studenti.begin();
    try {
    while(it!=admin.mapa_studenti.end()) {
        mapa_studenti.insert(std::make_pair(it-&gt;first,new Student(*it-&gt;second)));
        
        it++;
    }}
    catch(...) {
        auto it=mapa_studenti.begin();
        while(it!=mapa_studenti.end()){
            delete it-&gt;second;
            it++;
        }
        throw;
    }
    
}

Administracija::Administracija(Administracija &amp;&amp;admin) {
    mapa_studenti=admin.mapa_studenti;
<a name="1"></a><font color="#00FF00"><a href="match587-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    mapa_laptopi=admin.mapa_laptopi;
    for(auto it=admin.mapa_studenti.begin();it!=admin.mapa_studenti.end();it++) {
        it-&gt;second=nullptr;
    }
    for(auto it=admin.mapa_laptopi.begin();it!=admin.mapa_laptopi.end();it++) {
        it-&gt;second=nullptr;
    }
}

Administracija&amp; Administracija:: operator=(const Administracija &amp;admin) {
</font> 
  for(auto it=mapa_studenti.begin();it!=mapa_studenti.end();it++) {
      delete it-&gt;second;
      it=mapa_studenti.erase(it);
  }
  for(auto it=mapa_laptopi.begin();it!=mapa_laptopi.end();it++){
      delete it-&gt;second;
      it=mapa_laptopi.erase(it);
  }
  try {
  for(auto it=admin.mapa_studenti.begin();it!=admin.mapa_studenti.end();it++) {
     mapa_studenti.insert(std::make_pair(it-&gt;first,new Student(*it-&gt;second)));
  }}
  catch(...) {
      for(auto it=mapa_studenti.begin();it!=mapa_studenti.end();it++) {
          delete it-&gt;second;
      }
      throw;
  }
  
  try {
  for(auto it=admin.mapa_laptopi.begin();it!=admin.mapa_laptopi.end();it++) {
     mapa_laptopi.insert(std::make_pair(it-&gt;first,new Laptop(*it-&gt;second)));
  }}
  catch(...) {
      for(auto it=mapa_laptopi.begin();it!=mapa_laptopi.end();it++) {
          delete it-&gt;second;
      }
      
  }
   return *this;
}

Administracija&amp; Administracija::operator=( Administracija&amp;&amp; admin) {
    
    mapa_laptopi=std::move(admin.mapa_laptopi);
    mapa_studenti=std::move(admin.mapa_studenti);
    
    return *this;
}

void Administracija::RegistrirajNovogStudenta(int indeks, std::string godina, std::string ime, std::string adresa, std::string broj) {
    auto it=mapa_studenti.find(indeks);
    if(it!=mapa_studenti.end())throw std::domain_error ("Student s tim indeksom vec postoji");
    mapa_studenti.insert(std::make_pair(indeks,new Student( indeks,godina, ime, adresa,  broj) ) ) ;
}

void Administracija::RegistrirajNoviLaptop(int broj,std::string ime, std::string karakteristike) {
    auto it=mapa_laptopi.find(broj);
    if(it!=mapa_laptopi.end())throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
    mapa_laptopi.insert(std::make_pair(broj,new Laptop(broj,ime,karakteristike)));
}

void Administracija::IzlistajStudente() {
    for(auto it=mapa_studenti.begin();it!=mapa_studenti.end();it++) {
        it-&gt;second-&gt;Ispisi(); std::cout&lt;&lt;std::endl;
    }
}

void Administracija::IzlistajLaptope() {
    for(auto it=mapa_laptopi.begin();it!=mapa_laptopi.end();it++) {
        it-&gt;second-&gt;Ispisi();
        if(it-&gt;second-&gt;DaLiJeZaduzen()) {
            auto pok2=it-&gt;second-&gt;DajPokKodKogaJe();
<a name="6"></a><font color="#00FF00"><a href="match587-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            std::cout&lt;&lt;std::endl;std::cout&lt;&lt;"Zaduzio(la): "&lt;&lt;pok2-&gt;DajImePrezime()&lt;&lt;" ("&lt;&lt;pok2-&gt;DajIndeks()&lt;&lt;")"&lt;&lt;std::endl;
</font>        }
    }
}

void Administracija::ZaduziLaptop(int indeks, int evid) {
    auto it=mapa_studenti.find(indeks);
    if(it==mapa_studenti.end())throw std::domain_error("Student nije nadjen");
    auto it2=mapa_laptopi.find(evid);
<a name="5"></a><font color="#FF0000"><a href="match587-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    if(it2==mapa_laptopi.end())throw std::domain_error("Laptop nije nadjen");
    if(it2-&gt;second-&gt;DaLiJeZaduzen())throw std::domain_error("Laptop vec zaduzen");
    for(auto it2=mapa_laptopi.begin();it2!=mapa_laptopi.end();it2++) {
        auto pok2=it2-&gt;second-&gt;DajPokKodKogaJe();
</font>        if(pok2!=nullptr){
        if(pok2-&gt;DajAdresu()==it-&gt;second-&gt;DajAdresu() &amp;&amp; 
        pok2-&gt;DajIndeks()==it-&gt;second-&gt;DajIndeks() &amp;&amp; 
        pok2-&gt;DajGodinuStudija()==it-&gt;second-&gt;DajGodinuStudija() &amp;&amp;
        pok2-&gt;DajImePrezime()==it-&gt;second-&gt;DajImePrezime() &amp;&amp; 
        pok2-&gt;DajTelefon()==it-&gt;second-&gt;DajTelefon()) throw std::domain_error("Student je vec zaduzio laptop");
        }
    }
    it2-&gt;second-&gt;Zaduzi(*it-&gt;second);
}

int Administracija::NadjiSlobodniLaptop() {
    auto it=mapa_laptopi.begin();
    for(;it!=mapa_laptopi.end();it++){
        if(!it-&gt;second-&gt;DaLiJeZaduzen())break;
    }
    if(it==mapa_laptopi.end())throw std::domain_error("Nema slobodnih laptopa");
    
    return it-&gt;second-&gt;DajEvidencijskiBroj();
}

void Administracija::RazduziLaptop(int evid){
    auto it=mapa_laptopi.begin(); 
    for(;it!=mapa_laptopi.end();it++) {
        if(it-&gt;second-&gt;DajEvidencijskiBroj()==evid)break;
    }
  if(it==mapa_laptopi.end())throw std::domain_error("Laptop nije nadjen");
  if(!it-&gt;second-&gt;DaLiJeZaduzen()) throw std::domain_error("Laptop nije zaduzen");
  it-&gt;second-&gt;Razduzi();
  
}

void Administracija::PrikaziZaduzenja() {
    auto it=mapa_laptopi.begin(); int brojac=0;
    for(;it!=mapa_laptopi.end();it++) {
        auto pok=it-&gt;second-&gt;DajPokKodKogaJe();
        if(pok!=nullptr) {
            std::cout&lt;&lt;"Student "&lt;&lt;pok-&gt;DajImePrezime()&lt;&lt;" ("&lt;&lt;pok-&gt;DajIndeks()&lt;&lt;") zaduzio/la laptop broj "&lt;&lt;it-&gt;second-&gt;DajEvidencijskiBroj()&lt;&lt;std::endl;
        }
        if(pok==nullptr)brojac++;
    }
    if( brojac==mapa_laptopi.size() )std::cout&lt;&lt;"Nema zaduzenja"&lt;&lt;std::endl;
}

Administracija::~Administracija () {
    auto it=mapa_studenti.begin();
    for(;it!=mapa_studenti.end();it++) {
        delete it-&gt;second;
    }
    auto it2=mapa_laptopi.begin();
    for(;it2!=mapa_laptopi.end();it2++) {
        delete it2-&gt;second;
    }
    
}

int main ()
{
    Administracija admin; int opcija=11;
    do{
    std::cout&lt;&lt;"Izaberite opciju ili 0 za kraj: "&lt;&lt;std::endl;
    std::cout&lt;&lt;"1. Registriraj studenta"&lt;&lt;std::endl;
    std::cout&lt;&lt;"2. Registriraj laptop"&lt;&lt;std::endl;
    std::cout&lt;&lt;"3. Nadji studenta"&lt;&lt;std::endl;
    std::cout&lt;&lt;"4. Nadji laptop"&lt;&lt;std::endl;
    std::cout&lt;&lt;"5. Izlistaj studente"&lt;&lt;std::endl;
    std::cout&lt;&lt;"6. Izlistaj laptope"&lt;&lt;std::endl;
    std::cout&lt;&lt;"7. Zaduzi laptop"&lt;&lt;std::endl;
    std::cout&lt;&lt;"8. Nadji slobodni laptop"&lt;&lt;std::endl;
    std::cout&lt;&lt;"9. Razduzi laptop"&lt;&lt;std::endl;
    std::cout&lt;&lt;"10. Prikazi zaduzenja"&lt;&lt;std::endl;
     std::cin&gt;&gt;opcija; 
     std::cin.ignore(10000,'\n');
     if(opcija==1) {
         std::cout&lt;&lt;"Unesite ime i prezime: "; std::string imeiprezime; std::getline(std::cin,imeiprezime); 
          std::cout&lt;&lt;"Unesite broj telefona: "; std::string telefon; std::getline(std::cin,telefon);
         std::cout&lt;&lt;"Unesite adresu: "; std::string adresa; std::getline(std::cin, adresa); 
          std::cout&lt;&lt;"Unesite godinu studija: "; std::string godina; std::getline(std::cin,godina);
         std::cout&lt;&lt;"Unesite broj indeksa: "; int broj; std::cin&gt;&gt;broj;
         admin.RegistrirajNovogStudenta(broj, godina, imeiprezime, adresa, telefon);
     }
     if(opcija==2) {
         std::cout&lt;&lt;"Unesite broj: "; int broj; std::cin&gt;&gt;broj; std::cin.ignore(10000,'\n');
         std::cout&lt;&lt;"Unesite ime: "; std::string ime; std::getline(std::cin, ime);
         std::cout&lt;&lt;"Unesite karakteritike: "; std::string karakt; std::getline(std::cin, karakt);
         admin.RegistrirajNoviLaptop(broj, ime, karakt);
     }
     if(opcija==3) {
         std::cout&lt;&lt;"Unesite broj indeksa: "; int broj; std::cin&gt;&gt;broj;
         Student s=admin.NadjiStudenta(broj);
         s.Ispisi();
     }
     if(opcija==4) {
         std::cout&lt;&lt;"Unesite evidencijski broj: "; int broj; std::cin&gt;&gt;broj;
         Laptop p=admin.NadjiLaptop(broj);
         p.Ispisi();
     }
     if(opcija ==5) {
         admin.IzlistajStudente();
     }
     if(opcija==6){
         admin.IzlistajLaptope();
     }
     if(opcija==7){
         std::cout&lt;&lt;"Unesite broj indeksa studenta: "; int br1; std::cin&gt;&gt;br1;
         std::cout&lt;&lt;"Unesite broj laptopa: "; int br2; std::cin&gt;&gt;br2;
         admin.ZaduziLaptop(br1,br2);
     }
     if(opcija==8){
         int broj=admin.NadjiSlobodniLaptop();
         Laptop p=admin.NadjiLaptop(broj);
         std::cout&lt;&lt;"Prvi slobodni je "; p.Ispisi();
     }
     if(opcija==9) {
         std::cout&lt;&lt;"Unesite evidencijski broj: "; int broj; std::cin&gt;&gt;broj;
         admin.RazduziLaptop(broj);
     }
     
     if(opcija==10) {
         admin.PrikaziZaduzenja();
     }
     
    }while(opcija!=0);
    
    
    
    
    
    return 0;
}
</pre>
</body>
</html>
