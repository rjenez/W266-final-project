<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student5287.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student5287.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;utility&gt;

<a name="1"></a><font color="#00FF00"><a href="match65-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_21.gif"/></a>

using std::vector;
using std::string;
using std::map;

class Student{
    int index;
    string godina, ime;
    string adresa, br_tel;
    
    bool CheckIndex(int idx){
        if(idx &lt; 0) return false;
        
        short digits = 1;
        idx /= 10;
        
        while(idx){
            digits++;
            idx /= 10;
        }
        
        return digits == 5;
    }
    bool ProcessYear(string godina){
        string valid[11]{
            "1", "2", "3", "1/B", "2/B", "3/B", "1/M", "2/M", "1/D", "2/D", "3/D"
        };
        
        for(int i = 0; i &lt; 11; i++)
            if(godina == valid[i]){
                Student::godina = (i &lt; 3)? valid[i+3] : valid[i];
                return true;
            }
        
        return false;
    }
    void ClearWhitespace(string &amp;godina){
        string::iterator i1, i2;
        i1 = godina.begin();
        i2 = godina.begin();
        
        while(i1 != godina.end()){
            i2 = i1;
            while(i2 != godina.end() &amp;&amp; *i2 == ' ') {
                i2++;
            }
            
            if(std::distance(i1, i2) &gt;= 1){
                int dec = (i1 == godina.begin() &amp;&amp; *i1 == ' ')? 0 : 1;
                godina.erase(i1, i2 - dec );
            }
            
            i1++;
        }
        if(godina.size() &gt; 1 &amp;&amp; godina.at(godina.size()-1) == ' ')
            godina.erase(godina.size()-1);
    }
    bool isDigit(char c){ return c &gt;= '0' &amp;&amp; c &lt;= '9'; }
    bool ProcessTelephone(string tel){
        string::iterator it = tel.begin();
        bool firstCheck = true;
        
        while(it != tel.end()){
            
            if(!isDigit(*it)){
                if(firstCheck &amp;&amp; *it != '/') return false;
                else if (!firstCheck &amp;&amp; *it != '-') return false;
                else if(firstCheck) firstCheck = false;
            }
            
            it++;
        }
        
        return true;
    }
public:
    Student(int index, string godina, string ime, string adresa, string broj_telefona)
        : index(index), godina(godina), ime(ime), adresa(adresa), br_tel(broj_telefona)
    {
        if(!CheckIndex(index) || !ProcessYear(godina) || !ProcessTelephone(broj_telefona))
            throw std::domain_error("Neispravni parametri");
        ClearWhitespace(Student::ime);
        ClearWhitespace(Student::adresa);
    }
    
    int DajIndeks() const{ return index; }
    string DajGodinuStudija()const { return godina; }
    string DajImePrezime() const{ return ime; }
    string DajAdresu() const{ return adresa; }
    string DajTelefon() const{ return br_tel; }
    
    void Ispisi() const {
        std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; index &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina studija: " &lt;&lt; godina &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; ime &lt;&lt; std::endl;
<a name="0"></a><font color="#FF0000"><a href="match65-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_60.gif"/></a>

        std::cout &lt;&lt; "Adresa: " &lt;&lt; adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Telefon: " &lt;&lt; br_tel &lt;&lt; std::endl;
    }
};

class Laptop{
    int ev_broj;
    string naziv;
    string karakteristike;
    Student* kod_koga_je = nullptr; //Po default nije niciji
    
public:
    Laptop(int ev_broj, string naziv, string specs) : ev_broj(ev_broj), naziv(naziv), karakteristike(specs) {
        if(ev_broj &lt; 0)
            throw std::domain_error("Neispravni parametri");
    }
    
    int DajEvidencijskiBroj() const { return ev_broj; }
    string DajNaziv() const { return naziv; }
    string DajKarakteristike() const { return karakteristike; }
    
    //Sta ako se posalje isti student, baca li se izuzetak?
    void Zaduzi(Student &amp;student) {
        if(DaLiJeZaduzen())
            throw std::domain_error("Laptop vec zaduzen");
        
        kod_koga_je = &amp;student;
    }
    void Razduzi() {
        kod_koga_je = nullptr;
    }
    bool DaLiJeZaduzen() const {
        return kod_koga_je != nullptr;
    }
    Student&amp; DajKodKogaJe() const {
        if(!DaLiJeZaduzen())
            throw std::domain_error("Laptop nije zaduzen");
        
        return *kod_koga_je;
    }
    Student* DajPokKodKogaJe() const {
        return kod_koga_je;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; ev_broj &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naziv: " &lt;&lt; naziv &lt;&lt; std::endl;
        std::cout &lt;&lt; "Karakteristike: " &lt;&lt; karakteristike &lt;&lt; std::endl;
    }
};

class Administracija{
    map&lt;int, Student*&gt; studenti;
    map&lt;int, Laptop*&gt; laptopi;
    
    void ClearMaps(){
        map&lt;int, Student*&gt;::iterator sit;
        for(sit = studenti.begin(); sit != studenti.end(); sit++){
            delete sit-&gt;second;
        }
        studenti.clear();
        map&lt;int, Laptop*&gt;::iterator lit;
        for(lit = laptopi.begin(); lit != laptopi.end(); lit++){
            delete lit-&gt;second;
        }
        laptopi.clear();
    }
    void CheckIfStudentGotLaptop(Student *s){
        map&lt;int, Laptop*&gt;::iterator lit;
        for(lit = laptopi.begin(); lit != laptopi.end(); lit++){
            if(lit-&gt;second-&gt;DajPokKodKogaJe() == s)
                throw std::domain_error("Student je vec zaduzio laptop");
        }
    }
public:
    Administracija(){}
    ~Administracija(){ ClearMaps(); }
    
    //Copy const
    Administracija(const Administracija &amp;a) : studenti(a.studenti), laptopi(a.laptopi) {
        map&lt;int, Student*&gt;::iterator sit;
        for(sit = studenti.begin(); sit != studenti.end(); sit++){
            sit-&gt;second = new Student(*(sit-&gt;second));
        }
        map&lt;int, Laptop*&gt;::iterator lit;
        for(lit = laptopi.begin(); lit != laptopi.end(); lit++){
            lit-&gt;second = new Laptop(*(lit-&gt;second));
        }
    }
    //Move const
    Administracija(Administracija &amp;&amp;a) : studenti(std::move(a.studenti)), laptopi(std::move(a.laptopi)) {
        a.studenti.clear();
        a.laptopi.clear();
    }
    //Copy assign
    Administracija&amp; operator =(const Administracija &amp;a) {
        if(&amp;a == this) return *this;
        
        studenti = a.studenti;
        laptopi = a.laptopi;
        
        map&lt;int, Student*&gt;::iterator sit;
        for(sit = studenti.begin(); sit != studenti.end(); sit++){
            sit-&gt;second = new Student(*(sit-&gt;second));
        }
        map&lt;int, Laptop*&gt;::iterator lit;
        for(lit = laptopi.begin(); lit != laptopi.end(); lit++){
            lit-&gt;second = new Laptop(*(lit-&gt;second));
        }
        
        return *this;
    }
    //Move assign
    Administracija&amp; operator =(Administracija &amp;&amp;a) {
        if(&amp;a == this) return *this;
        
        studenti = std::move(a.studenti);
        laptopi = std::move(a.laptopi);
        
        a.studenti.clear();
        a.laptopi.clear();
        
        return *this;
    }
    
    void RegistrirajNovogStudenta(int index, string godina, string ime, string adresa, string broj_telefona) {
        if(studenti.count(index) &gt; 0)
            throw std::domain_error("Student s tim indeksom vec postoji");
            
        studenti[index] = new Student(index, godina, ime, adresa, broj_telefona);
    }
    void RegistrirajNoviLaptop(int ev_broj, string naziv, string specs) {
        if(laptopi.count(ev_broj) &gt; 0)
            throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
            
        laptopi[ev_broj] = new Laptop(ev_broj, naziv, specs);
    }
    
    Student&amp; NadjiStudenta(int index) {
        map&lt;int, Student*&gt;::iterator sit = studenti.find(index);
        
        if(sit == studenti.end())
            throw std::domain_error("Student nije nadjen");
        
        return *(sit-&gt;second);
    }
    Student NadjiStudenta(int index) const {
        map&lt;int, Student*&gt;::const_iterator sit = studenti.find(index);
        
        if(sit == studenti.end())
            throw std::domain_error("Student nije nadjen");
        
        return *(sit-&gt;second);
    }
    Laptop&amp; NadjiLaptop(int ev_broj) {
        map&lt;int, Laptop*&gt;::iterator lit = laptopi.find(ev_broj);
        
        if(lit == laptopi.end())
            throw std::domain_error("Laptop nije nadjen");
        
        return *(lit-&gt;second);
    }
    Laptop NadjiLaptop(int ev_broj) const {
        map&lt;int, Laptop*&gt;::const_iterator lit = laptopi.find(ev_broj);
        
        if(lit == laptopi.end())
            throw std::domain_error("Laptop nije nadjen");
        
        return *(lit-&gt;second);
    }
    
    void IzlistajStudente() const {
        map&lt;int, Student*&gt;::const_iterator sit;
        for(sit = studenti.begin(); sit != studenti.end(); sit++){
            sit-&gt;second-&gt;Ispisi();
            std::cout &lt;&lt; std::endl;
        }
    }
    void IzlistajLaptope() const {
        map&lt;int, Laptop*&gt;::const_iterator lit;
        for(lit = laptopi.begin(); lit != laptopi.end(); lit++){
            lit-&gt;second-&gt;Ispisi();
            if(lit-&gt;second-&gt;DaLiJeZaduzen()){
                std::cout &lt;&lt; "Zaduzio(la): " &lt;&lt; lit-&gt;second-&gt;DajPokKodKogaJe()-&gt;DajImePrezime() 
                      &lt;&lt; " (" &lt;&lt; lit-&gt;second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() &lt;&lt; ")" &lt;&lt; std::endl;
            }
            std::cout &lt;&lt; std::endl;
        }
    }
    
    void ZaduziLaptop(int index, int ev_broj) {
        Student* s = &amp;NadjiStudenta(index);
        Laptop* l = &amp;NadjiLaptop(ev_broj);
        
        CheckIfStudentGotLaptop(s);
        l-&gt;Zaduzi(*s);
    }
    int NadjiSlobodniLaptop() const {
        map&lt;int, Laptop*&gt;::const_iterator lit = std::find_if(laptopi.begin(), laptopi.end(), [](const std::pair&lt;int, Laptop*&gt; a){
            return (a.second)-&gt;DajPokKodKogaJe() == nullptr;
        });
        
        if(lit == laptopi.end())
            throw std::domain_error("Nema slobodnih laptopa");
        
        return lit-&gt;first;
    }
    void RazduziLaptop(int ev_broj) {
        Laptop* l = &amp;NadjiLaptop(ev_broj);
        
        if(!(l-&gt;DaLiJeZaduzen()))
            throw std::domain_error("Laptop nije zaduzen");
        
        l-&gt;Razduzi();
    }
    
    void PrikaziZaduzenja() const {
        map&lt;int, Laptop*&gt;::const_iterator lit;
        bool nemaZaduzenja = true;
        
        for(lit = laptopi.begin(); lit != laptopi.end(); lit++){
            if(lit-&gt;second-&gt;DaLiJeZaduzen()){
                nemaZaduzenja = false;
                std::cout &lt;&lt; "Student " &lt;&lt; lit-&gt;second-&gt;DajPokKodKogaJe()-&gt;DajImePrezime() &lt;&lt;
                        " (" &lt;&lt; lit-&gt;second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() &lt;&lt; ")" &lt;&lt;
                        " zaduzio/la laptop broj " &lt;&lt; lit-&gt;first &lt;&lt; std::endl;
            }
        }
        
        if(nemaZaduzenja)
            std::cout &lt;&lt; "Nema zaduzenja" &lt;&lt; std::endl;
    }
};

void UserInterface(Administracija &amp;admin){
    while(true){
        std::cout &lt;&lt; 
            "1 - Registriraj novog studenta" &lt;&lt; std::endl &lt;&lt;
            "2 - Registriraj novi laptop" &lt;&lt; std::endl &lt;&lt;
            "3 - Izlistaj studente" &lt;&lt; std::endl &lt;&lt;
</font>            "4 - Izlistaj laptope" &lt;&lt; std::endl &lt;&lt;
            "5 - Nadji slobodni laptop" &lt;&lt; std::endl &lt;&lt;
<a name="2"></a><font color="#0000FF"><a href="match65-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_14.gif"/></a>

            "6 - Zaduzi laptop" &lt;&lt; std::endl &lt;&lt;
            "7 - Razduzi laptop" &lt;&lt; std::endl &lt;&lt;
            "8 - Prikazi zaduzenja" &lt;&lt; std::endl &lt;&lt;
            "9 - Kraj" &lt;&lt; std::endl;
        try{
            int opt;
            std::cin &gt;&gt; opt;
            
            if(opt &lt; 0 || opt &gt; 9)
                throw std::domain_error("Pogresna komanda!");
            
            int index, ev_broj;
            string godina, ime, adresa, tel, naziv, opis;
            
            if(opt == 1){
                std::cout &lt;&lt; "Unesite podatke o studentu: ";
                std::cin &gt;&gt; index &gt;&gt; godina &gt;&gt; ime &gt;&gt; adresa &gt;&gt; tel;
                admin.RegistrirajNovogStudenta(index, godina, ime, adresa, tel);
            }else if(opt == 2){
                std::cout &lt;&lt; "Unesite podatke o laptopu: ";
                std::cin &gt;&gt; ev_broj &gt;&gt; naziv &gt;&gt; opis;
                admin.RegistrirajNoviLaptop(ev_broj, naziv, opis);
            }else if(opt == 3){
                admin.IzlistajStudente();
            }else if(opt == 4){
                admin.IzlistajLaptope();
            }else if(opt == 5){
                std::cout &lt;&lt; "Evidencijski broj slobodnog laptopa: " &lt;&lt; admin.NadjiSlobodniLaptop() &lt;&lt; std::endl;
            }else if(opt == 6){
                std::cout &lt;&lt; "Indeks studenta i evidencijski broj laptopa: ";
                std::cin &gt;&gt; index &gt;&gt; ev_broj;
                admin.ZaduziLaptop(index, ev_broj);
            }else if(opt == 7){
                std::cout &lt;&lt; "Evidencijski broj laptopa: ";
                std::cin &gt;&gt; ev_broj;
                admin.RazduziLaptop(ev_broj);
            }else if(opt == 8){
                admin.PrikaziZaduzenja();
            }else if(opt == 9){
                break;
            }
        }catch(std::exception &amp;err){
            std::cout &lt;&lt; err.what() &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; std::endl;
    }
}

int main() {
    
    Administracija admin;
    UserInterface(admin);
</font>    
    return 0;
}</pre>
</body>
</html>
