<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student3568.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student3568.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;string&gt;   
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;

class Student
{
    int br_indeksa;
    std::string godina_studija, ime_prezime, adresa, telefon;
    static std::string ZanemariRazmake(std::string);
    static bool IspravanBroj(std::string);
    static bool IspravnaGodina(std::string);
    static bool IspravanIndeks(int);
    void PostaviGodinu(std::string);
<a name="4"></a><font color="#FF00FF"><a href="match447-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

public:
    Student(int br_indeksa, std::string godina_studija, std::string ime_prezime,
            std::string adresa, std::string telefon);
    int DajIndeks() const {
        return br_indeksa;
    }
    std::string DajGodinuStudija() const {
</font>        return godina_studija;
    }
    std::string DajImePrezime() const {
        return ime_prezime;
    }
    std::string DajAdresu() const {
        return adresa;
    }
    std::string DajTelefon() const {
        return telefon;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; DajIndeks() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina studija: " &lt;&lt; DajGodinuStudija() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: "&lt;&lt; DajImePrezime() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; DajAdresu() &lt;&lt; std::endl;
<a name="5"></a><font color="#FF0000"><a href="match447-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::cout &lt;&lt; "Telefon: " &lt;&lt; DajTelefon() &lt;&lt; std::endl;
    }
};

class Laptop
{
    int ev_broj;
    std::string naziv, karakteristike;
    Student* kod_koga_je = nullptr;
</font><a name="1"></a><font color="#00FF00"><a href="match447-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

public:
    Laptop(int ev_broj, std::string naziv, std::string karakteristike);
    int DajEvidencijskiBroj() const {
        return ev_broj;
    }
    std::string DajNaziv() const {
        return naziv;
    }
    std::string DajKarakteristike() const {
        return karakteristike;
    }
    void Zaduzi(Student &amp;student);
</font>    void Razduzi();
    bool DaLiJeZaduzen() const {
        return kod_koga_je != nullptr;
    }
    Student&amp; DajKodKogaJe() const {
        if(!kod_koga_je) throw std::domain_error ("Laptop nije zaduzen");
        return *kod_koga_je;
    }
    Student* DajPokKodKogaJe() const {
        return kod_koga_je;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; DajEvidencijskiBroj() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naziv: " &lt;&lt; DajNaziv() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Karakteristike: " &lt;&lt; DajKarakteristike() &lt;&lt; std::endl;
    }
};

class Administracija
{
    std::map&lt;int, Student*&gt; studenti;
    std::map&lt;int, Laptop*&gt; laptopi;
public:
    Administracija() {}
    Administracija(const Administracija &amp;a);
    Administracija(Administracija &amp;&amp;a);
    Administracija&amp; operator = (const Administracija &amp;a);
    Administracija&amp; operator = (Administracija &amp;&amp;a);
<a name="0"></a><font color="#FF0000"><a href="match447-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    ~Administracija();
    void RegistrirajNovogStudenta(int br_indeksa, std::string godina_studija, std::string ime_prezime,
                                  std::string adresa, std::string telefon);
    void RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike);
    Student&amp; NadjiStudenta(int br_indeksa);
    Student NadjiStudenta(int br_indeksa) const;
    Laptop&amp; NadjiLaptop(int ev_broj);
    Laptop NadjiLaptop(int ev_broj) const;
    void IzlistajStudente() const;
    void IzlistajLaptope() const;
    void ZaduziLaptop(int br_indeksa, int ev_broj);
    int NadjiSlobodniLaptop();
    void RazduziLaptop(int ev_broj);
    void PrikaziZaduzenja();
</font>
};

int main ()
{
     Administracija etf ;

    etf.RegistrirajNoviLaptop(123, "Dell", "CPU 3.0 GHz, 4 GB RAM");
    etf.RegistrirajNoviLaptop(331, "ASUS", "CPU 3.5 GHz, 2 GB RAM");
    etf.RegistrirajNoviLaptop(122, "Dell 2", "CPU 3.2 GHz, 6 GB RAM");
    etf.RegistrirajNovogStudenta(14212, "1", "Benjamin", "Francuska revolucija 23", "12/34-56");
    etf.RegistrirajNovogStudenta(17528, "2","Ivan", "Trg vjecnih studenata 12", "048/597-585");
    
    etf.ZaduziLaptop(14212, 123);
    //etf.ZaduziLaptop(17528, 331);
    
    etf.PrikaziZaduzenja();
    return 0;
}

//Implementacija interfejsa klase Student
Student::Student(int br_indeksa, std::string godina_studija, std::string ime_prezime,
                 std::string adresa, std::string telefon)
{
    if(!Student::IspravanIndeks(br_indeksa))
        throw std::domain_error ("Neispravni parametri");
    Student::br_indeksa = br_indeksa;

    if(!Student::IspravnaGodina(godina_studija)) 
        throw std::domain_error ("Neispravni parametri");

    PostaviGodinu(godina_studija);
    Student::ime_prezime = Student::ZanemariRazmake(ime_prezime);
    Student::adresa = Student::ZanemariRazmake(adresa);

    if(!Student::IspravanBroj(telefon))
        throw std::domain_error ("Neispravni parametri");
    Student::telefon = telefon;

}

std::string Student::ZanemariRazmake(std::string s)
{
    std::string rezultat("");
    for(auto it = s.begin(); it != s.end(); it++) {
        if(*it == ' ') continue;
        while (*it != ' ' &amp;&amp; it != s.end()) {
            rezultat += *it;
            it++;
        }
        if(it != --s.end()) rezultat+= " ";
        if(it == s.end()) break;
    }
    int pos(rezultat.size());
    for(auto it = rezultat.end(); it != rezultat.begin(); it--){
        pos--;
        if(*it != ' ') {
            rezultat = rezultat.substr(0, pos);
            break;
        }
    }
    return rezultat;
}
bool Student::IspravanBroj(std::string telefon)
{
    auto it(telefon.begin());
    int crta(0), crtica(0);
    while (it != telefon.end()) {
        if(*it == '/') crta++;
        if(crtica &gt; 0 &amp;&amp; crta == 0) return false;
        if(*it == '-') crtica++;
        if(!((*it &gt;= '0' &amp;&amp; *it &lt;='9') || *it == '-' || *it == '/')) return false;
        it++;
    }
    if(!(crta==1 &amp;&amp; crtica==1)) return false;
    return true;
}
bool Student::IspravnaGodina(std::string godina_studija)
{
    if(godina_studija.size() == 1 &amp;&amp; *(godina_studija.begin())&gt;'0' &amp;&amp;
            *(godina_studija.begin())&lt;'4') return true;
    if(godina_studija.size() == 3 &amp;&amp; godina_studija[0] &gt; '0' &amp;&amp; godina_studija[0] &lt; '4' &amp;&amp;
            godina_studija[1] == '/' &amp;&amp; (godina_studija[2] == 'B' ||
                                         godina_studija[2] == 'M' || godina_studija[2] == 'D')) return true;
    return false;
}
bool Student::IspravanIndeks(int br_indeksa)
{
    int br_cifara(0);
    while (br_indeksa != 0) {
        br_indeksa /=10;
        br_cifara++;
    }
    return br_cifara == 5;
}
void Student::PostaviGodinu(std::string godina_studija)
{
    if(godina_studija.size() == 1 &amp;&amp; *(godina_studija.begin())&gt;'0' &amp;&amp;
            *(godina_studija.begin())&lt;'4')
        Student::godina_studija = godina_studija + "/B";
    else Student::godina_studija = godina_studija;
}

//Implementacija interfejsa klase Laptop
<a name="2"></a><font color="#0000FF"><a href="match447-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

Laptop::Laptop(int ev_broj, std::string naziv, std::string karakteristike)
{
    if(ev_broj &lt;= 0 ) throw std::domain_error ("Neispravni parametri");
    Laptop:: ev_broj = ev_broj;
    Laptop::naziv = naziv;
    Laptop::karakteristike = karakteristike;
</font>}
void Laptop::Zaduzi(Student &amp;student)
{
    if(kod_koga_je != nullptr) throw std::domain_error ("Laptop vec zaduzen");
    kod_koga_je = &amp;student;
}
void Laptop::Razduzi()
{
    kod_koga_je = nullptr;
}

//Implementacija interfejsa klase Administracija
Administracija::Administracija(const Administracija &amp;a)
{
    for(auto it = a.studenti.begin(); it != a.studenti.end(); it++) {
        studenti[it-&gt;first] = new Student(*(it-&gt;second));
        //studenti.insert(std::pair&lt;int, Student*&gt;(it-&gt;first, new Student(*(it-&gt;second))));
    }
    for(auto it = a.laptopi.begin(); it != a.laptopi.end(); it++) {
        laptopi[it-&gt;first] = new Laptop(*(it-&gt;second));
        laptopi.insert(std::pair&lt;int, Laptop*&gt;(it-&gt;first, new Laptop(*(it-&gt;second))));
    }
}
Administracija::Administracija(Administracija &amp;&amp;a)
{
    studenti = a.studenti;
    laptopi = a.laptopi;
    for(auto it = a.studenti.begin(); it != a.studenti.end(); it++)
        it-&gt;second = nullptr;
    for(auto it = a.laptopi.begin(); it != a.laptopi.end(); it++)
<a name="6"></a><font color="#00FF00"><a href="match447-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        it-&gt;second = nullptr;
}
Administracija&amp; Administracija::operator = (const Administracija &amp;a)
{
    if(this == &amp;a) return *this;
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
</font>        delete it-&gt;second;
        it-&gt;second = nullptr;
    }
    studenti.clear();
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        delete it-&gt;second;
        it-&gt;second = nullptr;
    }
    laptopi.clear();
    for(auto it = a.studenti.begin(); it != a.studenti.end(); it++) {
        studenti[it-&gt;first] = new Student(*(it-&gt;second));
        //studenti.insert(std::pair&lt;int, Student*&gt;(it-&gt;first, new Student(*(it-&gt;second))));
    }
    for(auto it = a.laptopi.begin(); it != a.laptopi.end(); it++) {
        laptopi[it-&gt;first] = new Laptop(*(it-&gt;second));
        laptopi.insert(std::pair&lt;int, Laptop*&gt;(it-&gt;first, new Laptop(*(it-&gt;second))));
    }
    return *this;
}
Administracija&amp; Administracija::operator = (Administracija &amp;&amp;a)
{
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        delete it-&gt;second;
        it-&gt;second = nullptr;
    }
    studenti.clear();
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        delete it-&gt;second;
        it-&gt;second = nullptr;
    }
    laptopi.clear();
    studenti = a.studenti;
    laptopi = a.laptopi;
    for(auto it = a.studenti.begin(); it != a.studenti.end(); it++)
        it-&gt;second = nullptr;
    for(auto it = a.laptopi.begin(); it != a.laptopi.end(); it++)
        it-&gt;second = nullptr;
    return *this;
}
Administracija::~Administracija()
{
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        delete it-&gt;second;
        it-&gt;second = nullptr;
    }
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        delete it-&gt;second;
<a name="7"></a><font color="#0000FF"><a href="match447-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        it-&gt;second = nullptr;
    }
}
void Administracija::RegistrirajNovogStudenta(int br_indeksa, std::string godina_studija, std::string ime_prezime,
        std::string adresa, std::string telefon)
</font>{
    if(studenti.find(br_indeksa) != studenti.end())
        throw std::domain_error ("Student s tim indeksom vec postoji");
    studenti[br_indeksa] = new Student(br_indeksa, godina_studija, ime_prezime,
                                       adresa, telefon);
}
void Administracija::RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike)
{
    if(laptopi.find(ev_broj) != laptopi.end())
        throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
    laptopi[ev_broj] = new Laptop(ev_broj, naziv, karakteristike);
}
Student&amp; Administracija::NadjiStudenta(int br_indeksa)
{
    auto it(studenti.find(br_indeksa));
    if(it == studenti.end())
        throw std::domain_error ("Student nije nadjen");
    return *(it-&gt;second);
}
Student Administracija::NadjiStudenta(int br_indeksa) const
{
    auto it(studenti.find(br_indeksa));
    if(it == studenti.end())
        throw std::domain_error ("Student nije nadjen");
    return *(it-&gt;second);
}
Laptop&amp; Administracija::NadjiLaptop(int ev_broj)
{
    auto it(laptopi.find(ev_broj));
    if(it == laptopi.end())
        throw std::domain_error ("Laptop nije nadjen");
    return *(it-&gt;second);
}
Laptop Administracija::NadjiLaptop(int ev_broj) const
{
    auto it(laptopi.find(ev_broj));
    if(it == laptopi.end())
        throw std::domain_error ("Laptop nije nadjen");
    return *(it-&gt;second);
}
void Administracija::IzlistajStudente() const
{
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        (it-&gt;second)-&gt;Ispisi();
        std::cout &lt;&lt; std::endl;
    }
}
void Administracija::IzlistajLaptope() const
{
<a name="3"></a><font color="#00FFFF"><a href="match447-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        (it-&gt;second)-&gt;Ispisi();
        if((it-&gt;second)-&gt;DaLiJeZaduzen())
            std::cout &lt;&lt; "Zaduzio(la): " &lt;&lt; (it-&gt;second)-&gt;DajKodKogaJe().DajImePrezime() &lt;&lt;
</font>                      " (" &lt;&lt; (it-&gt;second)-&gt;DajKodKogaJe().DajIndeks() &lt;&lt; ")"&lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}
void Administracija::ZaduziLaptop(int br_indeksa, int ev_broj)
{
    if(studenti.find(br_indeksa) == studenti.end())
        throw std::domain_error ("Student nije nadjen");
    if(laptopi.find(ev_broj) == laptopi.end())
        throw std::domain_error ("Laptop nije nadjen");
    if(laptopi[ev_broj]-&gt;DaLiJeZaduzen())
        throw std::domain_error ("Laptop vec zaduzen");
    bool jenull(false);
    auto it = std::find_if(laptopi.begin(), laptopi.end(), [br_indeksa, &amp;jenull](std::pair&lt;int, Laptop*&gt; x) {
        if(!x.second-&gt;DajPokKodKogaJe()) jenull = true;
        return !x.second-&gt;DajPokKodKogaJe() || x.second-&gt;DajKodKogaJe().DajIndeks() == br_indeksa;
    });
    if(it != laptopi.end() &amp;&amp; !jenull)
        throw std::domain_error("Student je vec zaduzio laptop");
    laptopi[ev_broj]-&gt;Zaduzi(*studenti[br_indeksa]);
}
int Administracija::NadjiSlobodniLaptop()
{
    auto it = std::find_if(laptopi.begin(), laptopi.end(), [](std::pair&lt;int, Laptop*&gt; x) {
        return x.second-&gt;DaLiJeZaduzen();
    });
    if(it == laptopi.end())
        throw std::domain_error("Nema slobodnih laptopa");
    return it-&gt;second-&gt;DajEvidencijskiBroj();
}
void Administracija::RazduziLaptop(int ev_broj)
{
    if(laptopi.find(ev_broj) == laptopi.end())
        throw std::domain_error ("Laptop nije nadjen");
    if(!laptopi[ev_broj]-&gt;DaLiJeZaduzen())
        throw std::domain_error ("Laptop nije zaduzen");
    laptopi[ev_broj]-&gt;Razduzi();
}
void Administracija::PrikaziZaduzenja()
{   bool ima_zaduzenja(false);
    for_each(laptopi.begin(), laptopi.end(), [this, &amp;ima_zaduzenja](std::pair&lt;int, Laptop*&gt; x){
        if(x.second-&gt;DaLiJeZaduzen()){
            ima_zaduzenja = true;
            std::cout &lt;&lt; "Student " &lt;&lt; x.second-&gt;DajKodKogaJe().DajImePrezime() &lt;&lt;
                      " (" &lt;&lt; x.second-&gt;DajKodKogaJe().DajIndeks() &lt;&lt; ") zaduzio/la laptop broj ";
                std::cout &lt;&lt; x.second-&gt;DajEvidencijskiBroj() &lt;&lt; std::endl;
        }
    });
    if(!ima_zaduzenja) std::cout &lt;&lt; "Nema zaduzenja" &lt;&lt; std::endl;
} 
</pre>
</body>
</html>
