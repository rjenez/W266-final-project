<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student9676.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;map&gt;

using std::string;
using std::map;

class Student {
    int broj_indeksa;
    string godina_studija;
    string ime;
    string adresa;
    string broj_telefona;
    
    void PostaviIndeks(int);
    void PostaviTelefon(string);
    void PostaviGodinuStudija(string);
    void PostaviIme(string);
    void PostaviAdresu(string);
    string UkloniRazmake(string);
public:
    Student(int, string, string, string, string);
    int DajIndeks() const { return broj_indeksa; }
    string DajGodinuStudija() const { return godina_studija; }
    string DajImePrezime() const { return ime; }
    string DajAdresu() const { return adresa; }
    string DajTelefon() const { return broj_telefona; }
    void Ispisi() const;
};

void Student::PostaviIndeks(int broj_indeksa) {
    int indeks = broj_indeksa;
    int broj_cifara = 0;
    while(indeks) {
        broj_cifara++;
        indeks /= 10;
    }
    if(broj_cifara != 5)
        throw std::domain_error("Neispravni parametri");
    this -&gt; broj_indeksa = broj_indeksa;
}

void Student::PostaviTelefon(string telefon) {
    int i = 0;
    bool validan = true;
    while(telefon[i] &gt;= '0' &amp;&amp; telefon[i] &lt;= '9' &amp;&amp; i &lt; telefon.length())
        i++;
    if(telefon[i] != '/' || i == 0)
        validan = false;
    else
<a name="2"></a><font color="#0000FF"><a href="match741-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        i++;
    while(telefon[i] &gt;= '0' &amp;&amp; telefon[i] &lt;= '9' &amp;&amp; i &lt; telefon.length())
        i++;
    if(telefon[i] != '-' || telefon[i - 1] == '/')
</font>        validan = false;
    else
<a name="3"></a><font color="#00FFFF"><a href="match741-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        i++;
    while(telefon[i] &gt;= '0' &amp;&amp; telefon[i] &lt;= '9' &amp;&amp; i &lt; telefon.length())
        i++;
    if(i == telefon.length() &amp;&amp; validan)
</font>        broj_telefona = telefon;
    else
        throw std::domain_error("Neispravni parametri");
}

void Student::PostaviGodinuStudija(string godina) {
    string validna_godina = "";
    if(godina.length() == 1 &amp;&amp; (godina[0] == '1' || godina[0] == '2' || godina[0] == '3')) {
        validna_godina.push_back(godina[0]);
        validna_godina += "/B";
    }
    else if(godina.length() == 3) {
        if((godina[0] == '1' || godina[0] == '2' || godina[0] == '3') &amp;&amp; godina[1] == '/') {
            if(godina[2] == 'B' || godina[2] == 'D' || (godina[2] == 'M' &amp;&amp; godina[0] != '3')) {
                validna_godina = godina;
            }
        }
    }
    if(validna_godina != "")
        this -&gt; godina_studija = validna_godina;
    else
        throw std::domain_error("Neispravni parametri");
}

string Student::UkloniRazmake(string s) {
    string bez_razmaka = "";
    bool razmak = true;
    for(int i = 0; i &lt; s.length(); i++) {
        if(s[i] != ' ') {
            bez_razmaka.push_back(s[i]);
            razmak = false;
        }
        else if(!razmak) {
            razmak = true;
            bez_razmaka.push_back(' ');
        }
    }
    bez_razmaka = (razmak == false) ? bez_razmaka : bez_razmaka.substr(0, bez_razmaka.length() - 1);
    return bez_razmaka;
}

void Student::PostaviIme(string ime) {
    this -&gt; ime = UkloniRazmake(ime);
}

void Student::PostaviAdresu(string adresa) {
    this -&gt; adresa = UkloniRazmake(adresa);
}

Student::Student(int broj_indeksa, string godina_studija, string ime, string adresa, string broj_telefona) {
    PostaviIndeks(broj_indeksa);
    PostaviGodinuStudija(godina_studija);
    PostaviIme(ime);
    PostaviAdresu(adresa);
    PostaviTelefon(broj_telefona);
}

void Student::Ispisi() const {
    std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; broj_indeksa &lt;&lt; "\n";
    std::cout &lt;&lt; "Godina studija: " &lt;&lt; godina_studija &lt;&lt; "\n";
    std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; ime &lt;&lt; "\n";
    std::cout &lt;&lt; "Adresa: " &lt;&lt; adresa &lt;&lt; "\n";
    std::cout &lt;&lt; "Telefon: " &lt;&lt; broj_telefona &lt;&lt; "\n";
}

class Laptop {
    int ev_broj;
    string naziv;
    string karakteristike;
    Student* kod_koga_je;
public:
    Laptop(int, string, string);
    int DajEvidencijskiBroj() const { return ev_broj; }
    string DajNaziv() const { return naziv; }
    string DajKarakteristike() const { return karakteristike; }
    void Zaduzi(Student&amp;);
    void Razduzi() { kod_koga_je = nullptr; }
    bool DaLiJeZaduzen() { return kod_koga_je != nullptr; }
    Student&amp; KodKogaJe();
    void Ispisi() const;
};

Laptop::Laptop(int ev_broj, string naziv, string karakteristike) {
    if(ev_broj &lt; 0)
        throw std::domain_error("Neispravni parametri");
    this -&gt; ev_broj = ev_broj;
    this -&gt; naziv = naziv;
    this -&gt; karakteristike = karakteristike;
    this -&gt; kod_koga_je = nullptr;
}

void Laptop::Zaduzi(Student&amp; student) {
    if(DaLiJeZaduzen())
        throw std::domain_error("Laptop vec zaduzen");
    kod_koga_je = &amp;student;
}

Student&amp; Laptop::KodKogaJe() {
    if(!DaLiJeZaduzen())
        throw std::domain_error("Laptop nije zaduzen");
    return *kod_koga_je;
}

void Laptop::Ispisi() const {
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; ev_broj &lt;&lt; std::endl;
    std::cout &lt;&lt; "Naziv: " &lt;&lt; naziv &lt;&lt; std::endl;
    std::cout &lt;&lt; "Karakteristike: " &lt;&lt; karakteristike &lt;&lt; std::endl;
}

class Administracija {
    map&lt;int, Student*&gt; studenti;
    map&lt;int, Laptop*&gt; laptopi;
public:
    Administracija() {}
    ~Administracija();
    Administracija(const Administracija&amp;);
    Administracija(Administracija&amp;&amp;);
    Administracija&amp; operator =(const Administracija&amp;);
    Administracija&amp; operator =(Administracija&amp;&amp;);
    void RegistrirajNovogStudenta(int, string, string, string, string);
    void RegistrirajNoviLaptop(int, string, string);
    Student&amp; NadjiStudenta(int);
    Student NadjiStudenta(int) const;
    Laptop&amp; NadjiLaptop(int);
    Laptop NadjiLaptop(int) const;
    void IzlistajStudente() const;
    void IzlistajLaptope() const;
    void ZaduziLaptop(int, int);
    int NadjiSlobodniLaptop() const;
    void RazduziLaptop(int);
    void PrikaziZaduzenja() const;
};

<a name="4"></a><font color="#FF00FF"><a href="match741-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

Administracija::~Administracija() {
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        delete it -&gt; second;
    }
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
</font>        delete it -&gt; second;
    }
}

Administracija::Administracija(const Administracija&amp; administracija) {
    for(auto it = administracija.studenti.begin(); it != administracija.studenti.end(); it++) {
        Student s = *it -&gt; second;
        studenti[it -&gt; first] = new Student(s.DajIndeks(), s.DajGodinuStudija(), s.DajImePrezime(), s.DajAdresu(), s.DajTelefon());
    }
    for(auto it = administracija.laptopi.begin(); it != administracija.laptopi.end(); it++) {
        Laptop l = *it -&gt; second;
        laptopi[it -&gt; first] = new Laptop(l.DajEvidencijskiBroj(), l.DajNaziv(), l.DajKarakteristike());
    }
}

Administracija::Administracija(Administracija&amp;&amp; administracija) {
    studenti = administracija.studenti;
<a name="0"></a><font color="#FF0000"><a href="match741-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    laptopi = administracija.laptopi;
    for(auto it = administracija.studenti.begin(); it != administracija.studenti.end(); it++) {
        it -&gt; second = nullptr;
    }
    for(auto it = administracija.laptopi.begin(); it != administracija.laptopi.end(); it++) {
        it -&gt; second = nullptr;
    }
}

Administracija&amp; Administracija::operator =(const Administracija&amp; administracija) {
</font>    if(this == &amp;administracija)
        return *this;
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        delete it -&gt; second;
    }
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        delete it -&gt; second;
    }
    for(auto it = administracija.studenti.begin(); it != administracija.studenti.end(); it++) {
        Student s = *it -&gt; second;
        studenti[it -&gt; first] = new Student(s.DajIndeks(), s.DajGodinuStudija(), s.DajImePrezime(), s.DajAdresu(), s.DajTelefon());
    }
    for(auto it = administracija.laptopi.begin(); it != administracija.laptopi.end(); it++) {
        Laptop l = *it -&gt; second;
        laptopi[it -&gt; first] = new Laptop(l.DajEvidencijskiBroj(), l.DajNaziv(), l.DajKarakteristike());
    }
    return *this;
}

Administracija&amp; Administracija::operator =(Administracija&amp;&amp; administracija) {
    if(this == &amp;administracija)
        return *this;
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        delete it -&gt; second;
    }
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        delete it -&gt; second;
    }
    studenti = administracija.studenti;
    laptopi = administracija.laptopi;
    for(auto it = administracija.studenti.begin(); it != administracija.studenti.end(); it++) {
        it -&gt; second = nullptr;
    }
    for(auto it = administracija.laptopi.begin(); it != administracija.laptopi.end(); it++) {
        it -&gt; second = nullptr;
    }
    return *this;
}

void Administracija::RegistrirajNovogStudenta(int broj_indeksa, string godina_studija, string ime, string adresa, string broj_telefona) {
    auto it = studenti.find(broj_indeksa);
    if(it == studenti.end())
        studenti[broj_indeksa] = new Student(broj_indeksa, godina_studija, ime, adresa, broj_telefona);
    else
        throw std::domain_error("Student s tim indeksom vec postoji");
}

void Administracija::RegistrirajNoviLaptop(int ev_broj, string naziv, string karakteristike) {
    auto it = laptopi.find(ev_broj);
    if(it == laptopi.end())
        laptopi[ev_broj] = new Laptop(ev_broj, naziv, karakteristike);
    else
        throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
}

Student&amp; Administracija::NadjiStudenta(int indeks) {
<a name="5"></a><font color="#FF0000"><a href="match741-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    auto it = studenti.find(indeks);
    if(it == studenti.end())
        throw std::domain_error("Student nije nadjen");
    return *it -&gt; second;
}

Student Administracija::NadjiStudenta(int indeks) const {
    auto it = studenti.find(indeks);
</font><a name="6"></a><font color="#00FF00"><a href="match741-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    if(it == studenti.end())
        throw std::domain_error("Student nije nadjen");
    return *it -&gt; second;
}

Laptop&amp; Administracija::NadjiLaptop(int ev_broj) {
    auto it = laptopi.find(ev_broj);
</font><a name="7"></a><font color="#0000FF"><a href="match741-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    if(it == laptopi.end())
        throw std::domain_error("Laptop nije nadjen");
    return *it -&gt; second;
}

Laptop Administracija::NadjiLaptop(int ev_broj) const {
    auto it = laptopi.find(ev_broj);
</font><a name="1"></a><font color="#00FF00"><a href="match741-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    if(it == laptopi.end())
        throw std::domain_error("Laptop nije nadjen");
    return *it -&gt; second;
}

void Administracija::IzlistajStudente() const {
    for(auto it = studenti.begin(); it != studenti.end(); it++) {
        it -&gt; second -&gt; Ispisi();
</font>        std::cout &lt;&lt; std::endl;
    }
}

void Administracija::IzlistajLaptope() const {
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        Laptop* laptop = it -&gt; second;
        laptop -&gt; Ispisi();
        if(laptop -&gt; DaLiJeZaduzen()) {
            Student vlasnik = laptop -&gt; KodKogaJe();
            std::cout &lt;&lt; "Zaduzio(la): " &lt;&lt; vlasnik.DajImePrezime() &lt;&lt; " (" &lt;&lt; vlasnik.DajIndeks() &lt;&lt; ")";
        }
        std::cout &lt;&lt; std::endl;    
    }
}

void Administracija::ZaduziLaptop(int indeks, int ev_broj) {
    auto student = studenti.find(indeks);
    if(student == studenti.end())
        throw std::domain_error("Student nije nadjen");

    auto laptop = laptopi.find(ev_broj);
    if(laptop == laptopi.end())
        throw std::domain_error("Laptop nije nadjen");
    
    if(laptop -&gt; second -&gt; DaLiJeZaduzen())
        throw std::domain_error("Laptop vec zaduzen");
        
    auto iter(std::find_if(laptopi.begin(), laptopi.end(), [indeks](const std::pair&lt;int, Laptop*&gt;&amp; it) {
        if((it.second) -&gt; DaLiJeZaduzen() &amp;&amp; ((it.second) -&gt; KodKogaJe()).DajIndeks() == indeks) return true; return false; } ));
    if(iter == laptopi.end())
        laptop -&gt; second -&gt; Zaduzi(*student -&gt; second);
    else
        throw std::domain_error("Student je vec zaduzio laptop");
}

int Administracija::NadjiSlobodniLaptop() const {
    auto iter(std::find_if(laptopi.begin(), laptopi.end(), [](const std::pair&lt;int, Laptop*&gt;&amp; it) {
        if(!(it.second) -&gt; DaLiJeZaduzen()) return true; return false; } ));
    if(iter == laptopi.end())
        throw std::domain_error("Nema slobodnih laptopa");
    return iter -&gt; second -&gt; DajEvidencijskiBroj();
}

void Administracija::RazduziLaptop(int ev_broj) {
    auto it = laptopi.find(ev_broj);
    if(it == laptopi.end())
        throw std::domain_error("Laptop nije nadjen");
    if(it -&gt; second -&gt; DaLiJeZaduzen())
        it -&gt; second -&gt; Razduzi();
    else
        throw std::domain_error("Laptop nije zaduzen");
}

void Administracija::PrikaziZaduzenja() const {
    bool ima_zaduzenih = false;
    for(auto it = laptopi.begin(); it != laptopi.end(); it++) {
        Laptop* laptop = it -&gt; second;
        if(laptop -&gt; DaLiJeZaduzen()) {
            Student vlasnik = laptop -&gt; KodKogaJe();
            std::cout &lt;&lt; "Student "&lt;&lt; vlasnik.DajImePrezime() &lt;&lt; " (" &lt;&lt; vlasnik.DajIndeks() &lt;&lt; ") ";
            std::cout &lt;&lt; "zaduzio/la laptop broj " &lt;&lt; laptop -&gt; DajEvidencijskiBroj() &lt;&lt; "\n";
            ima_zaduzenih = true;
        }
        std::cout &lt;&lt; std::endl;    
    }
    if(!ima_zaduzenih)
        std::cout &lt;&lt; "Nema zaduzenja";
}

using std::cout;
using std::cin;
using std::getline;

int main () {
    Administracija administracija;
    cout &lt;&lt; "1. Registracija studenta\n2. Registracija laptopa\n";
    cout &lt;&lt; "3. Trazenje studenta\n4. Trazenje laptopa\n5. Ispis studenta\n";
    cout &lt;&lt; "6. Ispis laptopa\n7. Zaduzenje laptopa\n8. Trazenje slobodnog laptopa\n";
    cout &lt;&lt; "9. Razduzenje laptopa\n10. Prikaz zaduzenja\n0. ***IZLAZ***\n";
    
    try {
        while(1) {
            cout &lt;&lt; "\nOdaberite opciju: ";
            int n;
            cin &gt;&gt; n;
            if(n == 1) {
                cin.ignore(9999, '\n');
                string ime, adresa, telefon, godina;
                int indeks;
                cout &lt;&lt; "Unesite ime i prezime: ";
                getline(cin, ime);
                cout &lt;&lt; "Unesite adresu: ";
                getline(cin, adresa);
                cout &lt;&lt; "Unesite broj telefona: ";
                getline(cin, telefon);
                cout &lt;&lt; "Unesite godinu studija: ";
                getline(cin, godina);
                cout &lt;&lt; "Unesite broj indeksa: ";
                cin &gt;&gt; indeks;
                administracija.RegistrirajNovogStudenta(indeks, godina, ime, adresa, telefon);
            }
            else if(n == 2) {
                string naziv, karakteristike;
                int ev_broj;
                cin.ignore(9999, '\n');
                cout &lt;&lt; "Unesite naziv: ";
                getline(cin, naziv);
                cout &lt;&lt; "Unesite karakteristike: ";
                getline(cin, karakteristike);
                cout &lt;&lt; "Unesite evidencijski broj: ";
                cin &gt;&gt; ev_broj;
                administracija.RegistrirajNoviLaptop(ev_broj, naziv, karakteristike);
            }
            else if(n == 3) {
                int indeks;
                cout &lt;&lt; "Unesite indeks trazenog studenta: ";
                cin &gt;&gt; indeks;
                cout &lt;&lt; "Student sa unesenim brojem indeksa:\n";
                administracija.NadjiStudenta(indeks).Ispisi();
            }
            else if(n == 4) {
                int ev_broj;
                cout &lt;&lt; "Unesite evidencijski broj trazenog laptopa: ";
                cin &gt;&gt; ev_broj;
                cout &lt;&lt; "Laptop sa unesenim evidencijskim brojem\n";
                administracija.NadjiLaptop(ev_broj).Ispisi();
            }
            else if(n == 5) {
                administracija.IzlistajStudente();
            }
            else if(n == 6) {
                administracija.IzlistajLaptope();
            }
            else if(n == 7) {
                int ev_broj, indeks;
                cout &lt;&lt; "Unesite indeks studenta koji zaduzuje laptop: ";
                cin &gt;&gt; indeks;
                cout &lt;&lt; "Unesite evidencijski broj laptopa: ";
                cin &gt;&gt; ev_broj;
                administracija.ZaduziLaptop(indeks, ev_broj);
            }
            else if(n == 8) {
                cout &lt;&lt; "Prvi slobodan laptop je sa evidencijskim brojem: ";
                cout &lt;&lt; administracija.NadjiSlobodniLaptop() &lt;&lt; "\n";
            }
            else if(n == 9) {
                int ev_broj;
                cout &lt;&lt; "Unesite evidencijski broj laptopa za razduzenje: ";
                cin &gt;&gt; ev_broj;
                administracija.RazduziLaptop(ev_broj);
            }
            else if(n == 10) {
                administracija.PrikaziZaduzenja();
            }
            else break;
        }
    }
    catch(std::domain_error greska) {
        std::cout &lt;&lt; greska.what();
    }
	return 0;
}
</pre>
</body>
</html>
