<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student9081.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z1/student9081.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match692-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;new&gt;

class Student 
{
    int br_indeksa;
    std::string god_studija,ime,adresa,br_telefona;
</font>    static bool TestIndeksa (int br_indeksa) {return br_indeksa&gt;=10000 &amp;&amp; br_indeksa&lt;=99999;}
    static bool TestGodinaStudija (std::string god_studija);
    static std::string IzmijeniString (std::string ime);
    static bool TestBrojTelefona (std::string s);
<a name="2"></a><font color="#0000FF"><a href="match692-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

public:
    Student (int br_indeksa, std::string god_studija, std::string ime, std::string adresa, std::string br_telefona): br_indeksa(br_indeksa),god_studija(god_studija),
    ime(IzmijeniString(ime)),adresa(IzmijeniString(adresa)),br_telefona(br_telefona) {
</font>        if (!TestIndeksa(br_indeksa) || !TestGodinaStudija(god_studija) || !TestBrojTelefona(br_telefona) || ime.size()==0 || adresa.size()==0)
            throw std::domain_error ("Neispravni parametri");
    }
    int DajIndeks () const {return br_indeksa;}
    std::string DajImePrezime () const {return ime;}
    std::string DajAdresu () const {return adresa;}
    std::string DajTelefon () const {return br_telefona;}
    std::string DajGodinuStudija () const {
        if (god_studija=="1") return "1/B";
        if (god_studija=="2") return "2/B";
        if (god_studija=="3") return "3/B";
        return god_studija;
    }
    void Ispisi () const;
};

void Student::Ispisi () const
{
    std::cout&lt;&lt;"Broj indeksa: "&lt;&lt;br_indeksa&lt;&lt;std::endl;
    std::cout&lt;&lt;"Godina studija: "&lt;&lt;DajGodinuStudija()&lt;&lt;std::endl;
    std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;ime&lt;&lt;std::endl;
    std::cout&lt;&lt;"Adresa: "&lt;&lt;adresa&lt;&lt;std::endl;
    std::cout&lt;&lt;"Telefon: "&lt;&lt;br_telefona&lt;&lt;std::endl;
}

bool Student::TestBrojTelefona (std::string s)
{
    int brojac_cr(0),brojac_ks(0),brojac_s(0);
    for (int i=0;i&lt;s.size();i++)
    {
        if (s[i]=='-')
        {
            brojac_cr++;
            if (brojac_ks!=1) return false;
            if (brojac_s==0) return false;
            brojac_s=0;
        }
        else if (s[i]=='/')
        {
            brojac_ks++;
            if (brojac_cr!=0) return false;
            if (brojac_s==0) return false;
            brojac_s=0;
        }
        else if (!(s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')) return false;
        else if (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9') brojac_s++;
    }
    if (brojac_s==0) return false;
    if (brojac_cr!=1 || brojac_ks!=1) return false;
    return true;
}

bool Student::TestGodinaStudija (std::string s)
{
    const char *niz[]{"1","2","3","1/B","2/B","3/B","1/M","2/M","1/D","2/D","3/D"};
    for (int i=0;i&lt;11;i++)
    {
        if (s==niz[i])
        return true;
    }
    return false;
}

std::string Student::IzmijeniString (std::string ime)
{
    for (int i=0;i&lt;ime.size();i++)
    {
        if (i&gt;0 &amp;&amp; ime[i-1]==' ' &amp;&amp; ime[i]==' ')
        {
            ime.erase(ime.begin()+i);
            --i;
        }
    }
    if (ime.size()!=0) {
    if (ime[0]==' ') ime.erase(ime.begin());
    if (ime[ime.size()-1]==' ') ime.erase(ime.begin()+ime.size()-1);}
    return ime;
}

class Laptop
{
    int ev_broj;
    std::string naziv,karakteristike;
    Student *kod_koga_je;
<a name="4"></a><font color="#FF00FF"><a href="match692-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

public:
    Laptop (int ev_broj, std::string naziv, std::string karakteristike): ev_broj(ev_broj),naziv(naziv),karakteristike(karakteristike),kod_koga_je(nullptr) {
        if (ev_broj&lt;0 || naziv.size()==0 || karakteristike.size()==0) throw std::domain_error ("Neispravni parametri");
</font>    }
    int DajEvidencijskiBroj () const {return ev_broj;}
    std::string DajNaziv () const {return naziv;}
    std::string DajKarakteristike () const {return karakteristike;}
    bool DaLiJeZaduzen () const {return kod_koga_je!=nullptr;}
    void Zaduzi (Student &amp;s) { if (DaLiJeZaduzen()) throw std::domain_error ("Laptop vec zaduzen"); kod_koga_je=&amp;s;}
    void Razduzi () {kod_koga_je=nullptr;}
    Student &amp;DajKodKogaJe () const {if (!DaLiJeZaduzen()) throw std::domain_error ("Laptop nije zaduzen"); return *kod_koga_je;}
    Student *DajPokKodKogaJe () const {if (!DaLiJeZaduzen()) return nullptr; return kod_koga_je;}
    void Ispisi() const;
};

void Laptop::Ispisi() const
{
    std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;ev_broj&lt;&lt;std::endl;
    std::cout&lt;&lt;"Naziv: "&lt;&lt;naziv&lt;&lt;std::endl;
    std::cout&lt;&lt;"Karakteristike: "&lt;&lt;karakteristike&lt;&lt;std::endl;
}

class Administracija
{
    std::map&lt;int,Student*&gt; studenti;
    std::map&lt;int,Laptop*&gt; laptopi;
    void UnistiMapuStudenata (std::map&lt;int,Student*&gt; &amp;mapa);
    void UnistiMapuLaptopa (std::map&lt;int,Laptop*&gt; &amp;mapa);
    std::map&lt;int,Student*&gt; StvoriMapu (const std::map&lt;int,Student*&gt; &amp;mapa);
    std::map&lt;int,Laptop*&gt; StvoriMapu (const std::map&lt;int,Laptop*&gt; &amp;mapa);
    static void DealocirajL(std::map&lt;int,Laptop*&gt; &amp;mapa);
    static void DealocirajS(std::map&lt;int,Student*&gt; &amp;mapa);
public:
    Administracija () = default;
    ~Administracija () {DealocirajS(studenti); DealocirajL(laptopi);}
    Administracija (const Administracija &amp;a);
    Administracija (Administracija &amp;&amp;a);
    Administracija &amp;operator = (const Administracija &amp;a);
<a name="0"></a><font color="#FF0000"><a href="match692-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Administracija &amp;operator = (Administracija &amp;&amp;a);
    void RegistrirajNovogStudenta (int br_indeksa, std::string god_studija, std::string ime, std::string adresa, std::string br_telefona);
    void RegistrirajNoviLaptop (int ev_broj, std::string naziv, std::string karakteristike);
    Student &amp;NadjiStudenta (int br_indeksa);
    Student NadjiStudenta (int br_indeksa) const;
</font>    Laptop &amp;NadjiLaptop (int ev_broj);
    Laptop NadjiLaptop (int ev_broj) const;
    void IzlistajStudente () const;
    void IzlistajLaptope () const;
    void ZaduziLaptop (int br_indeksa, int ev_broj);
    int NadjiSlobodniLaptop () const;
    void RazduziLaptop (int ev_broj);
    void PrikaziZaduzenja () const;
};

void Administracija::PrikaziZaduzenja () const
{
    auto it(laptopi.begin()),kraj(laptopi.end());
    bool zaduzen(false);
    while (it!=kraj)
    {
        if (it-&gt;second-&gt;DaLiJeZaduzen())
        {
            zaduzen=true;
            std::cout&lt;&lt;"Student "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe().DajImePrezime()&lt;&lt;" ("&lt;&lt;it-&gt;second-&gt;DajKodKogaJe().DajIndeks()&lt;&lt;") zaduzio/la laptop broj "&lt;&lt;it-&gt;first&lt;&lt;"\n";
        }
        it++;
    }
    if (!zaduzen) std::cout&lt;&lt;"Nema zaduzenja\n";
}

void Administracija::RazduziLaptop(int ev_broj)
{
    if (!laptopi.count(ev_broj)) throw std::domain_error ("Laptop nije nadjen");
    if (!(laptopi[ev_broj]-&gt;DaLiJeZaduzen())) throw std::domain_error ("Laptop nije zaduzen");
    laptopi[ev_broj]-&gt;Razduzi();
}

int Administracija::NadjiSlobodniLaptop() const
{
    int temp(0); bool slobodno(false);
    auto it(laptopi.begin()),kraj(laptopi.end());
    while (it!=kraj)
    {
        if (!(it-&gt;second-&gt;DaLiJeZaduzen()))
        {
            temp=it-&gt;first;
            slobodno=true;
            break;
        }
        it++;
    }
    if (!slobodno) throw std::domain_error ("Nema slobodnih laptopa");
    return temp;
}

void Administracija::ZaduziLaptop (int br_indeksa, int ev_broj)
{
    if (!studenti.count(br_indeksa)) throw std::domain_error ("Student nije nadjen");
    if (!laptopi.count(ev_broj)) throw std::domain_error ("Laptop nije nadjen");
    if (laptopi[ev_broj]-&gt;DaLiJeZaduzen()) throw std::domain_error ("Laptop vec zaduzen");
    auto it(laptopi.begin()),kraj(laptopi.end());
    while (it!=kraj)
    {
        if (it-&gt;second-&gt;DaLiJeZaduzen())
        {
            if (it-&gt;second-&gt;DajKodKogaJe().DajIndeks()==br_indeksa)
                throw std::domain_error ("Student je vec zaduzio laptop");
        }
        it++;
    }
    laptopi[ev_broj]-&gt;Zaduzi(*studenti[br_indeksa]);
}

void Administracija::IzlistajLaptope () const
{
    auto it(laptopi.begin()),kraj(laptopi.end());
    while (it!=kraj)
    {
        it-&gt;second-&gt;Ispisi();
        if (it-&gt;second-&gt;DaLiJeZaduzen())
        std::cout&lt;&lt;"Zaduzio(la): "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe().DajImePrezime()&lt;&lt;" ("&lt;&lt;it-&gt;second-&gt;DajKodKogaJe().DajIndeks()&lt;&lt;")\n";
        std::cout&lt;&lt;"\n";
        it++;
    }
}

void Administracija::IzlistajStudente () const
{
    auto it(studenti.begin()),kraj(studenti.end());
    while (it!=kraj)
    {
        it-&gt;second-&gt;Ispisi();
        std::cout&lt;&lt;"\n";
        it++;
    }
}

Laptop Administracija::NadjiLaptop(int ev_broj) const
{
    if (!laptopi.count(ev_broj)) throw std::domain_error ("Laptop nije nadjen");
    auto it(laptopi.begin()),kraj(laptopi.end());
    Laptop *pok(nullptr);
    while (it!=kraj)
    {
        if (it-&gt;first==ev_broj)
        {
            pok=it-&gt;second; break;
        }
        it++;
    }
<a name="5"></a><font color="#FF0000"><a href="match692-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    return *pok;
}

Laptop &amp;Administracija::NadjiLaptop(int ev_broj)
{
    if (!laptopi.count(ev_broj)) throw std::domain_error ("Laptop nije nadjen");
    return *laptopi[ev_broj];
}

Student Administracija::NadjiStudenta (int br_indeksa) const
</font>{
    if (!studenti.count(br_indeksa)) throw std::domain_error ("Student nije nadjen");
    auto it(studenti.begin()),kraj(studenti.end());
    Student *pok(nullptr);
    while (it!=kraj)
    {
        if (it-&gt;first==br_indeksa)
        {
            pok=it-&gt;second;
            break;
        }
        it++;
    }
    return *pok;
}

Student &amp;Administracija::NadjiStudenta(int br_indeksa)
{
    if (!studenti.count(br_indeksa)) throw std::domain_error ("Student nije nadjen");
    return *studenti[br_indeksa];
}

<a name="6"></a><font color="#00FF00"><a href="match692-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

void Administracija::RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike)
{
    if (laptopi.count(ev_broj)) throw std::domain_error ("Laptop s tim evidencijskim brojem vec postoji");
    laptopi[ev_broj]=new Laptop(ev_broj,naziv,karakteristike);
</font><a name="1"></a><font color="#00FF00"><a href="match692-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

}

void Administracija::RegistrirajNovogStudenta (int br_indeksa, std::string god_studija, std::string ime, std::string adresa, std::string br_telefona)
{
    if (studenti.count(br_indeksa)) throw std::domain_error ("Student s tim indeksom vec postoji");
    studenti[br_indeksa]=new Student(br_indeksa,god_studija,ime,adresa,br_telefona);
</font>}

void Administracija::DealocirajL (std::map&lt;int,Laptop*&gt; &amp;laptopi)
{
    auto it(laptopi.begin()),kraj(laptopi.end());
    while (it!=kraj)
    {
        delete it-&gt;second; it-&gt;second=nullptr;
        it++;
    }
}

void Administracija::DealocirajS (std::map&lt;int,Student*&gt; &amp;studenti)
{
    auto it(studenti.begin()),kraj(studenti.end());
    while (it!=kraj)
    {
        delete it-&gt;second; it-&gt;second=nullptr;
        it++;
    }
}

void Administracija::UnistiMapuStudenata (std::map&lt;int,Student*&gt; &amp;mapa)
{
    auto it(mapa.begin()),kraj(mapa.end());
    while (it!=kraj)
    it=mapa.erase(it);
}

void Administracija::UnistiMapuLaptopa (std::map&lt;int,Laptop*&gt; &amp;mapa)
{
    auto it(mapa.begin()),kraj(mapa.end());
    while (it!=kraj)
    it=mapa.erase(it);
}

std::map&lt;int,Student*&gt; Administracija::StvoriMapu (const std::map&lt;int,Student*&gt; &amp;mapa)
{
    auto it(mapa.begin()),kraj(mapa.end());
    std::map&lt;int,Student*&gt; temp;
    while (it!=kraj)
    {
        temp[it-&gt;first]=nullptr;
        it++;
    }
    it=mapa.begin();
    try
    {
        while (it!=kraj)
        {
            temp[it-&gt;first]= new Student(*(it-&gt;second));
            it++;
        }
    }
    catch (std::bad_alloc)
    {
        DealocirajS(temp);
        throw;
    }
    return temp;
}

std::map&lt;int,Laptop*&gt; Administracija::StvoriMapu (const std::map&lt;int,Laptop*&gt; &amp;mapa)
{
    auto it(mapa.begin()),kraj(mapa.end());
    std::map&lt;int,Laptop*&gt; temp;
    while (it!=kraj)
    {
        temp[it-&gt;first]=nullptr;
        it++;
    }
    it=mapa.begin();
    try
    {
        while (it!=kraj)
        {
            temp[it-&gt;first]=new Laptop(*(it-&gt;second));
            it++;
        }
    }
    catch (std::bad_alloc)
    {
        DealocirajL(temp);
        throw;
    }
    return temp;
}

Administracija::Administracija (Administracija &amp;&amp;a): studenti(a.studenti),laptopi(a.laptopi)
{
    UnistiMapuLaptopa(a.laptopi); UnistiMapuStudenata(a.studenti);
}

Administracija::Administracija (const Administracija &amp;a)
{
    studenti=StvoriMapu(a.studenti); laptopi=StvoriMapu(a.laptopi);
}

Administracija &amp;Administracija::operator= (const Administracija &amp;a)
{
    if (&amp;a!=this) {
    std::map&lt;int,Student*&gt; st(StvoriMapu(a.studenti));
    std::map&lt;int,Laptop*&gt; lp(StvoriMapu(a.laptopi));
    DealocirajL(this-&gt;laptopi); DealocirajS(this-&gt;studenti);
    UnistiMapuLaptopa(this-&gt;laptopi); UnistiMapuStudenata(this-&gt;studenti);
    studenti=st; laptopi=lp;}
    return *this;
}

<a name="7"></a><font color="#0000FF"><a href="match692-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

Administracija &amp;Administracija::operator= (Administracija &amp;&amp;a)
{
    std::swap(studenti,a.studenti); std::swap(laptopi,a.laptopi);
    return *this;
</font>}

int main ()
{
    Administracija a;
    for(;;)
    {
        int n;
        std::cout&lt;&lt;"Odaberite jednu od opcija:\n1 - Unesi novog studenta\n2 - Unesi novi laptop\n3 - Zaduzi laptop\n4 - Razduzi laptop\n5 - Nadji studenta\n6 - Nadji laptop\n";
        std::cout&lt;&lt;"7 - Izlistaj sve studente\n8 - Izlistaj sve laptope\n9 - Kraj\n";
        std::cin&gt;&gt;n;
        if (n==1)
        {
            std::cin.ignore(10000,'\n');
            int indeks;
            std::string ime,adresa,br_telefona,god_studija;
            std::cout&lt;&lt;"Unesite indeks: ";
            std::cin&gt;&gt;indeks;
            std::cout&lt;&lt;"Unesite ime i prezime: ";
            std::cin&gt;&gt;ime;
            std::cout&lt;&lt;"Unesite adresu i broj telefona ";
            std::cin&gt;&gt;adresa&gt;&gt;br_telefona;
            std::cout&lt;&lt;"Unesite godinu studija: ";
            std::cin&gt;&gt;god_studija;
            try {
            a.RegistrirajNovogStudenta(indeks,god_studija,ime,adresa,br_telefona);}
            catch(...)
            {std::cout&lt;&lt;"Greska!Unesite ponovo!\n";}
        }
        else if (n==2)
        {
            std::cin.ignore(10000,'\n');
            int br;
            std::string ime,k;
            std::cout&lt;&lt;"Unesite evidencijski broj laptopa: ";
            std::cin&gt;&gt;br;
            std::cout&lt;&lt;"Unesite ime laptopa: ";
            std::cin&gt;&gt;ime;
            std::cout&lt;&lt;"Unesite karakteristike: ";
            std::cin&gt;&gt;k;
            try {a.RegistrirajNoviLaptop(br,ime,k);}
            catch(...)
            {std::cout&lt;&lt;"Greska!Unesite ponovo\n";}
        }
        else if (n==3)
        {
            int i,e;
            std::cout&lt;&lt;"Unesite indeks i ev broj: ";
            std::cin&gt;&gt;i&gt;&gt;e;
            try {a.ZaduziLaptop(i,e); }
            catch(...)
            {std::cout&lt;&lt;"Greska!Unesite ponovo!\n";}
        }
        else if (n==4)
        {
            int e;
            std::cout&lt;&lt;"Unesite ev broj laptopa: ";
            std::cin&gt;&gt;e;
            try {a.RazduziLaptop(e);}
            catch(...)
            {std::cout&lt;&lt;"Greska!Unesite ponovo!\n";}
        }
        else if (n==5)
        {
            int i;
            std::cout&lt;&lt;"Unesi indeks za pretragu: ";
            std::cin&gt;&gt;i;
            try
            {
                Student s(a.NadjiStudenta(i));
                std::cout&lt;&lt;"Ime studenta je "&lt;&lt;s.DajImePrezime();
            }
            catch(...)
            {std::cout&lt;&lt;"Greska!Unesite ponovo!\n";}
        }
        else if (n==6)
        {
            int e;
            std::cout&lt;&lt;"Unesite ev broj za pretragu: ";
            std::cin&gt;&gt;e;
            try
            {
                Laptop l(a.NadjiLaptop(e));
                std::cout&lt;&lt;"Naziv laptopa je "&lt;&lt;l.DajNaziv();
            }
            catch(...)
            {std::cout&lt;&lt;"Greska!Unesite ponovo!\n";}
        }
        else if (n==7) a.IzlistajStudente();
        else if (n==8) a.IzlistajLaptope();
        else if (n==9) break;
    }
	return 0;
}
</pre>
</body>
</html>
