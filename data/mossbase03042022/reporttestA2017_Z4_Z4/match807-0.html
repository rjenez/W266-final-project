<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z4/Z4/student9952.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z4/Z4/student9952.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int dva_slova(char a, char b);
int ime(char c);
int sigurica(char* kod);
int sigurica2(char* kod,int *broj);
int sigurica3(char* kod);
int tag(char* stek, char* pocetak, char* kraj);
int provjeri(char* kod);


int main()
{
	printf("%d\n",provjeri("&lt;div&gt; &lt;H2&gt; &lt;/h2&gt; &lt;p&gt; &lt;b&gt; &lt;/b&gt; &lt;i&gt; &lt;/i&gt; &lt;a&gt; &lt;/a&gt; &lt;/p&gt; &lt;/div&gt;"));
	return 0;
}


int provjeri(char* kod)
{
	int duzina=0;

	char* pocetak=kod;
	char* kraj=kod;
	if(!sigurica(kod))return 0;
	if(!sigurica2(kod,&amp;duzina))return 0;
	if(!sigurica3(kod))return 0;
	char* stek=(char*)malloc(sizeof(char)*(duzina+1));
	int i;
	for(i=0; i&lt;duzina+1; i++)stek[i]='\0';

	while(*kraj!='\0'&amp;&amp;*pocetak!='\0')
	{


		while(*kraj!='\0')
		{
			if(*kraj=='&gt;')break;
			kraj++;
		}
		if(*kraj=='\0')
		{
			free(stek);
			return 1;
		}
		while(*pocetak!='\0' &amp;&amp; pocetak&lt;kraj)
		{
			if(*pocetak=='&lt;')break;
			pocetak++;
		}
		
		if(!tag(stek,pocetak,kraj))
		{
			free(stek);
			return 0;
		}
		if(kraj!='\0')kraj++;
		if(pocetak&lt;kraj)pocetak++;
	}
	free(stek);
	return 1;
}

int sigurica(char* kod)
{
	char *p=kod;
	while(p!='\0')
	{
		if(*p=='&lt;'||*p=='&gt;')return 1;
		p++;
	}
	return 0;
}

int sigurica2(char* kod,int *broj)
{
	int a=0,b=0,c=0;
	char* s=kod;
	while(*s!='\0')
	{
		(*broj)++;
<a name="0"></a><font color="#FF0000"><a href="match807-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		if(*s=='&lt;')a++;
		if(*s=='&gt;')b++;
		if(*s=='&lt;' &amp;&amp; (*(s+1)=='/'&amp;&amp; ime( *(s+2) )   ) )c++;
</font>		if(*s=='&lt;' &amp;&amp; 	!(	(*(s+1)=='/'&amp;&amp; ime( *(s+2) )   )	||  ( ime(*(s+1) ) )	) 	)return 0;
		s++;
	}
	if(a==b &amp;&amp;a==c*2)return 1;
	return 0;
}

int sigurica3(char* kod)
{
	int a=-1;
	char* s=kod;
	while(*s!='\0')
	{
		if(*s=='&lt;'||*s=='&gt;')
		{
			if(a==1 &amp;&amp; *s=='&lt;' )return 0;
			if(a==-1 &amp;&amp; *s=='&gt;')return 0;
			a*=-1;

		}
		s++;
	}
	return 1;
}

int ime(char c)
{
	if( (c&gt;='A' &amp;&amp; c&lt;='Z')||(c&gt;='a'&amp;&amp;c&lt;='z')||(c&gt;='0'&amp;&amp;c&lt;='9'))return 1;
	return 0;
}

int tag(char* stek, char* pocetak, char* kraj)
{

	char* s1=pocetak;/* "&lt;" */
	char* s2=kraj;/* "&gt;" */
	char* klizni=stek;
	char* zadnji=stek;
	char* predzadnji=stek;
	char* pomocni=0;
	int t=1,pronasao=0;
//	printf("\n |%s|%s| ",pocetak,kraj);
//	printf("\n |%s|| ",stek);
	if( ime(*(s1+1)) )
	{
		/*dodaj na stek*/
		while(*klizni!='\0')klizni++;
		s1++;
		while(ime(*s1)&amp;&amp;s1&lt;s2)
		{
			*klizni=*s1;
			klizni++;
			s1++;
		}
		*klizni++='.';
		*klizni='\0';

	}
	else if(*(s1+1)=='/'&amp;&amp;ime(*(s1+2)))
	{
		/*skini sa steka ako moze i ako nije prazan*/
		klizni=stek;
		if(*stek=='\0')return 0;
		
		while(*klizni!='\0')
		{
			if(*klizni=='.'){zadnji=klizni;}
			klizni++;
		}
		klizni = stek;
		while(*klizni!='\0')
		{
		
			if(*klizni=='.'&amp;&amp;klizni&lt;zadnji)
			{
				pronasao=1;
				predzadnji=klizni;
			}
			klizni++;
		}
	
		if(pronasao){predzadnji++;}/*sad ovaj pokazuje na prvo slovo zadnjeg otvorenog taga */
		else {predzadnji=stek;}

		pomocni=predzadnji;
		s1+=2;
		//	printf("\n |%s|%s| ",predzadnji,s1);
		//	printf("\n %d",*predzadnji-*s1);
		while(predzadnji&lt;zadnji &amp;&amp; s1&lt;s2)
		{
			if(		!(*predzadnji==*s1||dva_slova(*predzadnji,*s1)) 	 )
			{
			
				t=0;
				break;
			}
			predzadnji++;
			s1++;
		}
		
		if(t)*pomocni='\0';
		else return 0;

	}

	
	return 1;
}

int dva_slova(char a, char b)
{
	
	if( ((a&gt;='a'&amp;&amp;a&lt;='z')||(a&gt;='A'&amp;&amp;a&lt;='Z'))&amp;&amp;((b&gt;='a'&amp;&amp;b&lt;='z')||(b&gt;='A'&amp;&amp;b&lt;='Z')) )
	{
	
		if(a-b=='a'-'A')return 1;
		if(b-a=='a'-'A')return 1;
	}
	
return 0;
}</pre>
</body>
</html>
