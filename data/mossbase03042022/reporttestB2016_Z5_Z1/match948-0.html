<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1966.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1966.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdanja;
    Korisnik* zaduzenik;
    public:
<a name="2"></a><font color="#0000FF"><a href="match948-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    Knjiga(std::string title, std::string name,std::string genre, int godina) {
        naslov=title; ime_pisca=name; zanr=genre; godina_izdanja=godina; 
        zaduzenik=nullptr;
    }
    std::string DajNaslov() const {return naslov;}
    std::string DajAutora() const {return ime_pisca;}
</font>    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdanja;}
    Korisnik* DajKodKogaJe() const {return zaduzenik;}
    void ZaduziKnjigu(Korisnik &amp;neko) {
        zaduzenik=&amp;neko;
    }
    void RazduziKnjigu()  {
        zaduzenik=nullptr;
    }
<a name="3"></a><font color="#00FFFF"><a href="match948-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    bool DaLiJeZaduzena() const {
        return zaduzenik!=nullptr;
    }
};
class Biblioteka{
    std::map&lt;int, Knjiga*&gt; knjige;
    std::map&lt;int, Korisnik*&gt; korisnici;
    public:
</font>    Biblioteka() {}
    Biblioteka(std::map&lt;int, Knjiga*&gt; mapa1, std::map &lt;int, Korisnik*&gt; mapa2){
        knjige=mapa1;
        korisnici=mapa2;
    }
    Biblioteka(std::map&lt;int, Korisnik*&gt; mapa1, std::map&lt;int, Knjiga*&gt; mapa2) {
        korisnici=mapa1;
        knjige=mapa2;
    } 
    Biblioteka (const Biblioteka &amp;b) {
        *this=b;
    }
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime,
    std::string adresa, std::string br_tel) {
<a name="5"></a><font color="#FF0000"><a href="match948-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) {
            if(clanski_broj==i-&gt;first) throw std::logic_error("Korisnik vec postoji");
        }
        korisnici.insert(std::make_pair(clanski_broj, new Korisnik {ime, prezime, adresa, br_tel}));
</font>    }
    void RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdanja){
<a name="6"></a><font color="#00FF00"><a href="match948-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        for(auto i=knjige.begin(); i!=knjige.end(); i++) if(evidencijski_broj==i-&gt;first) throw std::logic_error("Knjiga vec postoji");
        knjige.insert(std::make_pair(evidencijski_broj, new Knjiga(naslov, ime_pisca, zanr, godina_izdanja)));
</font>    }
<a name="1"></a><font color="#00FF00"><a href="match948-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

     Korisnik &amp;NadjiKorisnika(int clanski_broj) const {
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) if(clanski_broj==i-&gt;first) return *(i-&gt;second);
        throw std::logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj) const {
</font><a name="4"></a><font color="#FF00FF"><a href="match948-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        for(auto i=knjige.begin(); i!=knjige.end(); i++){
            if(evidencijski_broj==i-&gt;first) return *(i-&gt;second);
        }throw std::logic_error("Knjiga nije nadjena");
</font>    }
    ~Biblioteka(){
        for(auto i=knjige.begin(); i!=knjige.end(); i++) delete i-&gt;second;
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) delete i-&gt;second;
    }
    void IzlistajKorisnike() const {
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(i-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(i-&gt;second)-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(i-&gt;second)-&gt;adresa&lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match948-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(i-&gt;second)-&gt;telefon&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    void IzlistajKnjige() const {
        for(auto i=knjige.begin(); i!=knjige.end(); i++) {
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt;(i-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(i-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(i-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(i-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
<a name="7"></a><font color="#0000FF"><a href="match948-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            if((i-&gt;second)-&gt;DajKodKogaJe()!=nullptr) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;((i-&gt;second)-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;((i-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj) {
</font>        bool ima_li_knjige=false, ima_li_korisnika=false;
        for(auto i=knjige.begin(); i!=knjige.end(); i++) {
            if(i-&gt;first==evidencijski_broj) {ima_li_knjige=true;
            break;} 
        }
        if(!ima_li_knjige) throw std::logic_error("Knjiga nije nadjena");
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) {
            if(i-&gt;first==clanski_broj) {
                ima_li_korisnika=true;
                break;
            }
        } if(!ima_li_korisnika) throw std::logic_error("Korisnik nije nadjen");
        if(knjige[evidencijski_broj]-&gt;DajKodKogaJe()!=nullptr) throw std::logic_error("Knjiga vec zaduzena");
        knjige[evidencijski_broj]-&gt;ZaduziKnjigu(*(korisnici[clanski_broj]));
    }
    void RazduziKnjigu(int evidencijski_broj) {
        bool ima_li_knjige=false;
        for(auto i=knjige.begin(); i!=knjige.end(); i++) {
            if(evidencijski_broj==i-&gt;first) {ima_li_knjige=true;
            break;}
        } if(!ima_li_knjige) throw std::logic_error("Knjiga nije nadjena");
        if((knjige[evidencijski_broj])-&gt;DajKodKogaJe()==nullptr) throw std::logic_error("Knjiga nije zaduzena");
        knjige[evidencijski_broj]-&gt;RazduziKnjigu();
    }
    
    void PrikaziZaduzenja(int clanski_broj) {
        bool ima_li_korisnika=false;
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) {
            if(i-&gt;first==clanski_broj) {ima_li_korisnika=true;
                break;
            }
        } if(!ima_li_korisnika) throw std::logic_error("Korisnik nije nadjen");
        std::vector&lt;int&gt; indeksi(0);
        auto ko_je_taj_korisnik=korisnici[clanski_broj];
        for(auto i=knjige.begin(); i!=knjige.end(); i++) {
            if(ko_je_taj_korisnik == (i-&gt;second)-&gt;DajKodKogaJe())  {
                indeksi.push_back(i-&gt;first);
            }
        } if(indeksi.size()==0) throw std::logic_error("Nema zaduzenja za tog korisnika!");
       for(auto i=knjige.begin(); i!=knjige.end(); i++) {
           for(int j=0; j&lt;indeksi.size(); j++) {
               if(i-&gt;first==indeksi[j]){
                   std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;indeksi[j]&lt;&lt;std::endl;
                   std::cout&lt;&lt;"Naslov: "&lt;&lt;(i-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
                   std::cout&lt;&lt;"Pisac: "&lt;&lt;(i-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
                   std::cout&lt;&lt;"Zanr: "&lt;&lt;(i-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
                   std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(i-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
                   std::cout&lt;&lt;std::endl;}
           }
       }
    }
};

int main ()
{
    Biblioteka B;
    std::string unos;
    while(unos!=".") {
        std::cout&lt;&lt;"Odaberite: 1 za unos novog korisnika, 2 za registraciju knjige, 3 za pronalazak korisnika po sifri,\n";
        std::cout&lt;&lt;"4 za pronalazak knjige po evidencijskom broju, 5 za prikaz korisnika, 6 za prikaz knjiga, 7 za zaduzivanje knjige,\n";
        std::cout&lt;&lt;"8 za razduzivanje knjige, 9 za prikaz zaduzenja korisnika, \".\" za kraj: ";
        std::cin&gt;&gt;unos;
        if(unos=="1") {
            int broj;
            std::string ime, prezime, adresa, brtel;
            std::cout&lt;&lt;"Unesite podatke o korisniku (clanski broj, ime, prezime, adresu i telefon: ";
            std::cin&gt;&gt;broj&gt;&gt;ime&gt;&gt;prezime&gt;&gt;adresa&gt;&gt;brtel;
            B.RegistrirajNovogKorisnika(broj, ime, prezime, adresa, brtel);
        }
        if(unos=="2") {
            int evid_br, god_izdanja;
            std::string naslov, autor, zanr;
            std::cout&lt;&lt;"Unesite podatke o knjizi redom: evidencijski broj, naslov, ime i prezime autora, zanr, godinu izdanja: ";
            std::cin&gt;&gt;evid_br;
            std::getline(std::cin,naslov);
            std::getline(std::cin, autor);
            std::getline(std::cin, zanr);
            std::cin&gt;&gt;god_izdanja;
            B.RegistrirajNovuKnjigu(evid_br, naslov, autor, zanr, god_izdanja);
        }
        if(unos=="3") {
            std::cout&lt;&lt;"Unesite clanski broj: ";
            int br;
            std::cin&gt;&gt;br;
            try{
            auto k=B.NadjiKorisnika(br);
                std::cout&lt;&lt;"Korisnik se zove: "&lt;&lt;k.ime&lt;&lt;" "&lt;&lt;k.prezime;
            }
            catch(std::logic_error e) {std::cout&lt;&lt;e.what();}
            }
            if(unos=="4"){
                std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                int br;
                std::cin&gt;&gt;br;
                try{
                    std::cout&lt;&lt;"Rado se o knjizi: "&lt;&lt;  B.NadjiKnjigu(br).DajNaslov()&lt;&lt;std::endl;
                } catch(std::logic_error e) {
                    std::cout&lt;&lt;e.what();
                }
            } 
            if(unos=="5") {B.IzlistajKorisnike();}
            if(unos=="6") B.IzlistajKnjige();
            if(unos=="7") {
                int br1, br2;
                std::cout&lt;&lt;"Unesite redom evidencijski broj knjige i clanski broj korisnika: ";
                std::cin&gt;&gt;br1&gt;&gt;br2;
                try{
                    B.ZaduziKnjigu(br1, br2);
                }catch(std::logic_error e) {std::cout&lt;&lt;e.what();}
            }
            if(unos=="8") {
                int br1;
                std::cout&lt;&lt;"Unesite redom evidencijski broj knjige: ";
                std::cin&gt;&gt;br1;
                try{
                 B.RazduziKnjigu(br1);   
                }catch(std::logic_error e) {
                    std::cout&lt;&lt;e.what();
                }
            }
            if(unos=="9") {
                int br;
                std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
                std::cin&gt;&gt;br;
                try{
                B.PrikaziZaduzenja(br);} catch(std::logic_error e) {std::cout&lt;&lt;e.what();}
            }
            }
        
	return 0;
}


</pre>
</body>
</html>
