<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2896.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2896.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match124-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;

struct Korisnik
{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga
{
    private:
    std::string naslov;
    std::string autor;
    std::string zanr;
    int godinaizd;
    Korisnik *pkorisnik;
    public:
    Knjiga(std::string knaslov, std::string kautor, std::string kzanr, int kgodinaizd)
    {
        naslov = knaslov;
        autor = kautor;
        zanr = kzanr;
        godinaizd = kgodinaizd;
        pkorisnik = nullptr;
    }
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return autor; }
</font>    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godinaizd; }
<a name="0"></a><font color="#FF0000"><a href="match124-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_33.gif"/></a>

    Korisnik* DajKodKogaJe() const { return pkorisnik; }
    void ZaduziKnjigu(Korisnik &amp;k)
    {
        pkorisnik = &amp;k;
    }
    void RazduziKnjigu() { pkorisnik = nullptr; }
    bool DaLiJeZaduzena() const { return pkorisnik!=nullptr; }
};

class Biblioteka
{
    private:
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
    public:
    Biblioteka()
    {
        korisnici = std::map&lt;int, Korisnik*&gt;{};
        knjige = std::map&lt;int, Knjiga*&gt;{};
    }
    Biblioteka(const Biblioteka &amp;b)
    {
        
    }
    ~Biblioteka()
    {
        for(auto it = knjige.begin(); it!=knjige.end(); it++)
        {
            delete it-&gt;second;
        }
        for(auto it = korisnici.begin(); it!=korisnici.end(); it++)
        {
            delete it-&gt;second;
        }
    }
    void RegistrirajNovogKorisnika(int clanski_br, std::string imek, std::string prezimek, std::string adresak, std::string telk);
    void RegistrirajNovuKnjigu(int,std::string,std::string,std::string,int);
    Korisnik &amp;NadjiKorisnika(int) const;
    Knjiga &amp;NadjiKnjigu(int) const;
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int, int);
    void RazduziKnjigu(int);
    void PrikaziZaduzenja(int clanski_br) const;
    Biblioteka &amp;operator = (Biblioteka &amp;&amp;b);
};


Biblioteka &amp;Biblioteka::operator = (Biblioteka  &amp;&amp;b)
{
    *this = std::move(b);
    return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_br, std::string imek, std::string prezimek, std::string adresak, std::string telk)
{
    if(korisnici.count(clanski_br) &gt; 0) throw std::logic_error("Korisnik vec postoji");
    Korisnik *novikorisnik = nullptr;
    try
    {
        novikorisnik = new Korisnik;
        novikorisnik-&gt;ime = imek;
        novikorisnik-&gt;prezime = prezimek;
        novikorisnik-&gt;adresa = adresak;
        novikorisnik-&gt;telefon = telk;
        korisnici.insert(std::make_pair(clanski_br,novikorisnik));
    }
    catch(...)
    {
        delete novikorisnik;
    }
}

void Biblioteka::RegistrirajNovuKnjigu(int e_br, std::string naslovk, std::string pisack, std::string zanrk, int godinak)
{
    if(knjige.count(e_br) &gt; 0) throw std::logic_error("Knjiga vec postoji");
    Knjiga *novaknjiga = nullptr;
    try
    {
        novaknjiga = new Knjiga(naslovk, pisack, zanrk, godinak);
        knjige.insert(std::make_pair(e_br,novaknjiga));
    }
    catch(...)
    {
        delete novaknjiga;
    }
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_br) const
{
    if(korisnici.count(clanski_br) &gt; 0)
    {
        auto it = korisnici.find(clanski_br);
        return *(it-&gt;second);
    }
    else
    {
        throw std::logic_error("Korisnik nije nadjen");
    }
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int e_br) const
{
    if(knjige.count(e_br) &gt; 0)
    {
        auto it = knjige.find(e_br);
        return *(it-&gt;second);
    }
    else
    {
        throw std::logic_error("Knjiga nije nadjena");
    }
}

void Biblioteka::IzlistajKorisnike() const
{
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
    {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match124-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl &lt;&lt; std::endl;
    }
}

void Biblioteka::IzlistajKnjige() const
{
    for(auto it=knjige.begin(); it!=knjige.end(); it++)
</font>    {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match124-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena())
        {
            std::cout &lt;&lt; "Zaduzena kod korisnika: ";
            std::cout &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
            std::cout &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int e_br, int clanski_br)
{
    if(knjige.count(e_br) == 0) throw std::logic_error("Knjiga nije nadjena");
    if(korisnici.count(clanski_br) == 0) throw std::logic_error("Korisnik nije nadjen");
    auto it = knjige.find(e_br);
    if(it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    auto zaduzenik = korisnici.find(clanski_br)-&gt;second;
    it-&gt;second-&gt;ZaduziKnjigu(*zaduzenik);
}

void Biblioteka::RazduziKnjigu(int e_br)
{
    if(knjige.count(e_br) == 0) throw std::logic_error("Knjiga nije nadjena");
    auto it = knjige.find(e_br);
    if(it-&gt;second-&gt;DaLiJeZaduzena() == false) throw std::logic_error("Knjiga nije zaduzena");
    it-&gt;second-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int clanski_br) const
{
    if(korisnici.count(clanski_br) == 0) throw std::logic_error("Korisnik nije nadjen");
    int br = 0;
    for(auto it=knjige.begin(); it!=knjige.end(); it++)
    {
        if(it-&gt;second-&gt;DajKodKogaJe() == korisnici.find(clanski_br)-&gt;second) //
        {
            br++;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match124-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; std::endl;
    }
    if(br==0) throw std::logic_error("Nema zaduzenja za tog korisnika!");
}

int main ()
{
    Biblioteka svjetlost;
    std::cout &lt;&lt; "1-Unesite korisnika, 2-Unesite knjigu, 3-Unesi zaduzenje, 4-Unesi razduzenje" &lt;&lt; std::endl;
    std::cout &lt;&lt; "5-Izlistaj korisnike, 6-Izlistaj knjige ili neki drugi broj za kraj\n";
    int k=1;
    while(k!=0)
    {
        std::cout &lt;&lt; "Unesite opciju: ";
        int n;
        std::cin &gt;&gt; n;
        switch(n)
        {
            case 1:
            {
                std::cout &lt;&lt; "Unesite clanski broj, ime, prezime, adresu i br telefona redom(svaki podatak u zaseban red): ";
                int clanski;
                std::string imee;
                std::string prezimee;
                std::string adresaa;
                std::string brtell;
                std::cin &gt;&gt; clanski;
                std::cin.ignore(1000,'\n');
                std::getline(std::cin, imee);
        
                std::getline(std::cin, prezimee);
                
                std::getline(std::cin, adresaa);
               
                std::getline(std::cin,brtell);
               
                svjetlost.RegistrirajNovogKorisnika(clanski,imee,prezimee,adresaa,brtell);
            break;
            }
            case 5:
            {
                svjetlost.IzlistajKorisnike();
                break;
            }
            case 2:
            {
                std::cout &lt;&lt; "Unesite evidencijski broj, naslov, pisca, zanr, godinu redom(svaki podatak u novi red): ";
                int evid;
                std::string naslovv;
                std::string pisacc;
                std::string zanrr;
                int godina;
                std::cin &gt;&gt; evid;
                std::cin.ignore(1000, '\n');
                std::getline(std::cin, naslovv);
                std::getline(std::cin, pisacc);
                std::getline(std::cin, zanrr);
                std::cin &gt;&gt; godina;
                svjetlost.RegistrirajNovuKnjigu(evid,naslovv,pisacc,zanrr,godina);
                break;
            }
            case 6:
            {
                svjetlost.IzlistajKnjige();
                break;
            }
            case 3:
            {
                std::cout &lt;&lt; "Unesite clanski broj korisnika i evidencijski broj knjige: ";
                int a,b;
                std::cin &gt;&gt; a &gt;&gt; b;
                svjetlost.ZaduziKnjigu(a,b);
                break;
            }
            case 4:
            {
                std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
                int a;
                std::cin &gt;&gt; a;
                svjetlost.RazduziKnjigu(a);
                break;
            }
            case 7:
            {
                svjetlost.PrikaziZaduzenja(1);
            }
            default:
            {
                k=0;
</font>                break;
            }
        }
    }
	return 0;
}</pre>
</body>
</html>
