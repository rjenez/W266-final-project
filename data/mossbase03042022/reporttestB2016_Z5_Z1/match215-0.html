<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2908.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2908.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;



<a name="0"></a><font color="#FF0000"><a href="match215-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_53.gif"/></a>

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
    Korisnik(std::string i,std::string p,std::string a,std::string tel){ ime=i;prezime=p; adresa=a; telefon=tel; }
};


class Knjiga{
    std::string naslov,ime_pisca,genre;
    int godina_izdavanja;
    Korisnik *kod_koga_je;
    public:
    friend class Biblioteka;
    Knjiga(std::string n,std::string ip,std::string g,int gi,Korisnik *neki);
    Knjiga(std::string n,std::string ip,std::string g,int gi);
    std::string DajNaslov() const{ return naslov;}
    std::string DajAutora() const{ return ime_pisca;}
    std::string DajZanr() const{ return genre;}
    int DajGodinuIzdavanja() const {return godina_izdavanja;}
    Korisnik DajKodKogaJe() const { return *kod_koga_je;}
    void ZaduziKnjigu(Korisnik &amp;zaduzeni){zaduzeni=*kod_koga_je;}
    void RazduziKnjigu(){kod_koga_je=nullptr;}
    bool DaLiJeZaduzena(){return kod_koga_je;}
   
    
    
    
 
};

Knjiga::Knjiga(std::string n,std::string ip,std::string g,int gi,Korisnik *neki):
    naslov(n),ime_pisca(ip),genre(g),godina_izdavanja(gi),kod_koga_je(neki) {}
    
        

    
Knjiga::Knjiga(std::string n,std::string ip,std::string g,int gi):
    naslov(n),ime_pisca(ip),genre(g),godina_izdavanja(gi) {kod_koga_je=nullptr;}
    
class Biblioteka{
  
    std::map&lt;int,Korisnik*&gt;korisnici;
    std::map&lt;int,Knjiga*&gt;knjige;
    public:
    Biblioteka ( Biblioteka &amp;&amp;b);
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
   
    ~Biblioteka();
    void RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa,std::string broj_tel);
    void RegistrirajNovuKnjigu (int broj_knjige,std::string naslov,std::string pisac,std::string zz,int godina_izdavanja);
    Korisnik NadjiKorisnika(int broj){ if(!korisnici.count(broj)) {throw std::logic_error ("Korisnik nije nadjen"); }
    else return *korisnici[broj];}
    Knjiga NadjiKnjigu(int broi){if(!knjige.count(broi)) throw std::logic_error ("Knjiga nije nadjena");  else return *knjige[broi];}
void IzlistajKorisnike() const ;
void IzlistajKnjige() const;

    
    
    
};

Biblioteka &amp;Biblioteka::operator =(Biblioteka b){
    std::swap(knjige,b.knjige); std::swap(korisnici,b.korisnici);
    return *this;
}


/*Biblioteka::Biblioteka(const Biblioteka &amp;b):korisnici(new std::map&lt;int,b.korisnici.second&gt;),
knjige(new std::map&lt;int,&gt;)
{
    try{
        for(int i=0;i&lt;b.korisnici.size();i++){
            korisnici[i]=std::make_pair(b.korisnici[i].first,new Korisnik(b.korisnici[i]-&gt;second-&gt;ime,b.korisnici[i]-&gt;second-&gt;prezime,
            b.korisnici[i].second-&gt;adresa,b.korisnici[i].second-&gt;telefon);
            
        }
        for(int j=0,j&lt;b.knjige.size();j++){
            knjige[j]=std::make_pair(b.knjige[j].first,new Knjiga(b.knjige[j]-&gt;second-&gt;naslov,b.knjige[j]-&gt;second-&gt;ime_pisca,b.knjige[j]-&gt;second-&gt;genre,
            b.knjige[j]-&gt;second-&gt;godina_izdavanja))
        }
    }
    catch(...){
        for(int i=0;i&lt;b.korisnici.size();i++) delete korisnici[i];
         for(int j=0;j&lt;b.knjige.size();j++) delete knjige[j];
    }
}*/


   

  


Biblioteka::~Biblioteka(){
    for(int i=0;i&lt;knjige.size();i++) delete knjige[i];
    for(int j=0;j&lt;korisnici.size();j++) delete korisnici[j];
 
}

void Biblioteka::IzlistajKorisnike() const {
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
         std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>         std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
         std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match215-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

         std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
    }
     std::cout&lt;&lt;std::endl;
}

void Biblioteka::IzlistajKnjige() const  {
    for(auto it=knjige.begin();it!=knjige.end();it++){
</font>         std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
         std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;naslov&lt;&lt;std::endl;
         std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;ime_pisca&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match215-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_17.gif"/></a>

         std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;genre&lt;&lt;std::endl;
         std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;godina_izdavanja&lt;&lt;std::endl&lt;&lt;std::endl;
    }
    
   
}
void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa,std::string broj_tel){
            try{
        korisnici.insert(std::make_pair(clanski_broj,new Korisnik(ime,prezime,adresa,broj_tel)));
            }
            catch(std:: bad_alloc){
                std::cout&lt;&lt;"Nece ici...";
            }
        
       
    
}
    
void Biblioteka::RegistrirajNovuKnjigu(int broj_knjige,std::string naslov,std::string pisac,std::string zz,int godina_izdavanja){
        try{
       knjige.insert(std::make_pair(broj_knjige,new Knjiga(naslov,pisac,zz,godina_izdavanja)));
        }
        catch(std::bad_alloc){
            std::cout&lt;&lt;"Problemi sa memorijom";
        }
}

int main(){
Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
</font>"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata 3b", "037/654-321");
b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
<a name="3"></a><font color="#00FFFF"><a href="match215-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);

Biblioteka a=b;
a.IzlistajKorisnike();
</font>

return 0;
}
    
</pre>
</body>
</html>
