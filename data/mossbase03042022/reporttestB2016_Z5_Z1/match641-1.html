<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student9207.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1571.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};
class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *zaduzenje;
    void Ispisi() const;
    public:
    Knjiga (std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja): naslov(naslov), ime_pisca(ime_pisca),zanr(zanr),godina_izdavanja(godina_izdavanja) { zaduzenje = nullptr; }
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return ime_pisca; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    Korisnik *DajKodKogaJe() const { return zaduzenje; }
    void ZaduziKnjigu (Korisnik &amp;zaduzenje) { Knjiga::zaduzenje = &amp;zaduzenje; }
    void RazduziKnjigu() { zaduzenje = nullptr; }
<a name="5"></a><font color="#FF0000"><a href="match641-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    bool DaLiJeZaduzena() const { return zaduzenje!=nullptr; }
};
class Biblioteka {
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt;  knjige;
</font>    void IspisiKorisnike() const;
    public:
    void RegistrirajNovogKorisnika (int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona);//
<a name="4"></a><font color="#FF00FF"><a href="match641-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    void RegistrirajNovuKnjigu (int evi_broj, std::string naslov, std::string pisac, std::string zanr, int god_izdavanja);//
    Korisnik &amp;NadjiKorisnika (int cl_broj) const; //
    Knjiga &amp;NadjiKnjigu (int ev_broj); //
    Biblioteka (const Biblioteka &amp;kop); // kasnije imple.
</font>    Biblioteka &amp;operator= (const Biblioteka &amp;nema); // kasnije
    Biblioteka() {};
    void IzlistajKorisnike() { this-&gt;IspisiKorisnike(); }//
    void IzlistajKnjige() const; //
    void ZaduziKnjigu (int ev_broj, int clanski_broj); //
    void RazduziKnjigu(int ev_broj); //
    void PrikaziZaduzenja (int clanski_broj) const;//
    ~Biblioteka();//
};
void Biblioteka::IspisiKorisnike() const {
    for (auto it=korisnici.begin(); it!= korisnici.end(); it++) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first; 
        std::cout &lt;&lt; std::endl &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon;
        std::cout &lt;&lt; std::endl;
    }
}
void Knjiga::Ispisi() const {
    std::cout &lt;&lt; "Naslov: " &lt;&lt; DajNaslov() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Pisac: " &lt;&lt; DajAutora() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Zanr: " &lt;&lt; DajZanr() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; DajGodinuIzdavanja();
    std::cout &lt;&lt; std::endl;
}
void Biblioteka::RegistrirajNovogKorisnika (int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona) {
    auto it = korisnici.find (clanski_broj);
    if (it != korisnici.end()) throw std::logic_error ("Korisnik vec postoji");
    Korisnik *pok = new Korisnik;
    (*pok).ime = ime;
    (*pok).prezime = prezime;
    (*pok).adresa = adresa;
    (*pok).telefon = broj_telefona;
    korisnici[clanski_broj] = pok;
}
void Biblioteka::RegistrirajNovuKnjigu (int evi_broj, std::string naslov, std::string pisac, std::string zanr, int god_izdavanja) {
    auto it = knjige.find (evi_broj);
    if (it != knjige.end()) throw std::logic_error ("Knjiga vec postoji");
    Knjiga *pok = new Knjiga (naslov, pisac, zanr, god_izdavanja);
    knjige[evi_broj] = pok;
}
Korisnik &amp;Biblioteka::NadjiKorisnika (int cl_broj) const {
    Korisnik *pomocni;
    auto it = korisnici.find (cl_broj);
    if (it == korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
    if (it != korisnici.end()) {
        pomocni = it-&gt;second;
        return *pomocni;
    }
}
Knjiga &amp;Biblioteka::NadjiKnjigu (int ev_broj) {
    Knjiga *pomocni;
    auto it = knjige.find (ev_broj);
    if (it != knjige.end()) {
        pomocni = it-&gt;second;
        return *pomocni;
    }
    throw std::logic_error ("Knjiga nije nadjena");
}
void Biblioteka::IzlistajKnjige() const {
    for (auto it=knjige.begin(); it!=knjige.end(); it++) {
      
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if (it-&gt;second-&gt;DaLiJeZaduzena()) {
            std::cout &lt;&lt; "Zaduzena kod korisnika: ";
            std::cout &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
            std::cout &lt;&lt; std::endl &lt;&lt; std::endl;
        }
    }
}
void Biblioteka::ZaduziKnjigu(int ev_broj, int clanski_broj) {
    auto it = knjige.find(ev_broj);
    if (it == knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
    auto proba = knjige.find(ev_broj);
    if (proba-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
    auto it2 = korisnici.find (clanski_broj);
    if (it2 == korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
    
    for (auto it1=korisnici.begin(); it1!=korisnici.end(); it1++) {
        if (it1-&gt;first == clanski_broj ) {
            for (auto it3=knjige.begin(); it3!=knjige.end(); it3++) {
                if (it3-&gt;first == ev_broj) {
                    it3-&gt;second-&gt;ZaduziKnjigu(*(it1)-&gt;second);
                    break;
                }
            }
        }
    }
}
void Biblioteka::RazduziKnjigu(int ev_broj) {
    auto it = knjige.find (ev_broj);
    if (it == knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
    if (it != knjige.end()) it-&gt;second-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski_broj) const {
    bool ima(false);
    auto it = korisnici.find (clanski_broj);
    if (it == korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
    for (auto it1=knjige.begin(); it1!=knjige.end(); it1++) {
        if (it1-&gt;second-&gt;DaLiJeZaduzena() &amp;&amp; it-&gt;second-&gt;ime == it1-&gt;second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; it-&gt;second-&gt;prezime == it1-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &amp;&amp; it-&gt;second-&gt;adresa == it1-&gt;second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; it-&gt;second-&gt;telefon == it1-&gt;second-&gt;DajKodKogaJe()-&gt;telefon) {
            ima = true;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it1-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it1-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; (it1-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl; 
            std::cout &lt;&lt; "Zanr: " &lt;&lt; (it1-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it1-&gt;second)-&gt;DajGodinuIzdavanja() ;
            std::cout &lt;&lt; std::endl &lt;&lt; std::endl;
        }
    }
    if (!ima) throw std::logic_error ("Nema zaduzenja za tog korisnika");
}
Biblioteka::~Biblioteka() {
    for (auto it=knjige.begin(); it!=knjige.end(); it++) {
        if (it-&gt;second != nullptr)
            delete it-&gt;second;
    }
    for (auto it=korisnici.begin(); it!=korisnici.end(); it++) {
        if (it-&gt;second != nullptr)
            delete it-&gt;second;
    }
}
Biblioteka::Biblioteka (const Biblioteka &amp;kop) {
    for (auto it=kop.korisnici.begin(); it!=kop.korisnici.end(); it++) {
        Korisnik *pomocni = new Korisnik;
        (*pomocni).ime = it-&gt;second-&gt;ime;
        (*pomocni).prezime = it-&gt;second-&gt;prezime;
        (*pomocni).adresa = it-&gt;second-&gt;adresa;
        (*pomocni).telefon = it-&gt;second-&gt;telefon;
        korisnici.insert (std::make_pair(it-&gt;first, pomocni));
    }
    for (auto it=kop.knjige.begin(); it!=kop.knjige.end(); it++) {
        Knjiga *pomocni = new Knjiga (it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja());
        knjige.insert (std::make_pair(it-&gt;first, pomocni));
    }
}
Biblioteka &amp;Biblioteka::operator= (const Biblioteka &amp;nema) {
     if (this != &amp;nema) {
        korisnici.erase (korisnici.begin(), korisnici.end());
        knjige.erase (knjige.begin(), knjige.end());
        for (auto it=nema.korisnici.begin(); it!=nema.korisnici.end(); it++) {
            korisnici[it-&gt;first] = it-&gt;second;
        }
        for (auto it=nema.knjige.begin(); it!=nema.knjige.end(); it++)
            knjige.insert (std::make_pair (it-&gt;first, new Knjiga (it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja())));
    }
    return *this;
}

int main ()
{
    Biblioteka bib;
    std::string ime, prezime, adresa, telefon, naziv_knjige, zanr, autor;
    int evidencijski_broj, clanski_broj, godina_izdavanja, izbor;
    for(;;) {
        std::cout &lt;&lt; "Izaberite neku od opcija:\n";
        std::cout &lt;&lt; "0 - Kraj\n";
        std::cout &lt;&lt; "1 - Registriraj novog korisnika\n";
        std::cout &lt;&lt; "2 - Registriraj novu knjigu\n";
        std::cout &lt;&lt; "3 - Izlistaj korisnike\n";
        std::cout &lt;&lt; "4 - Izlistaj knjige\n";
        std::cout &lt;&lt; "5 - Zaduzi knjigu\n";
        std::cout &lt;&lt; "6 - Razduzi knjigu\n";
        std::cout &lt;&lt; "7 - Prikazi zaduzenja\n\n";
        std::cout &lt;&lt; "Vas izbor:\n";
        std::cin &gt;&gt; izbor;
        std::cin.clear();
        std::cin.ignore (10000,'\n');
        try {
            switch(izbor) {
                case (0): {
<a name="3"></a><font color="#00FFFF"><a href="match641-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                    std::cout &lt;&lt;  "Dovidjenja!" &lt;&lt; std::endl;
                    return 0;
                }
                case (1): {
                    std::cout &lt;&lt; "Unesite ime korisnika: ";
                    std::getline (std::cin, ime);
                    std::cout &lt;&lt; "Unesite prezime korisnika: ";
                    std::getline (std::cin, prezime);
</font>                    std::cout &lt;&lt; "Unesite adresu: ";
<a name="2"></a><font color="#0000FF"><a href="match641-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                    std::getline (std::cin, adresa);
                    std::cout &lt;&lt; "Unesite broj telefona: ";
                    std::getline (std::cin, telefon);
                    std::cout &lt;&lt; "Unesite clanski broj: ";
                    std::cin &gt;&gt; clanski_broj;
                    std::cin.clear();
                    std::cin.ignore (10000,'\n');
</font>                    bib.RegistrirajNovogKorisnika (clanski_broj, ime, prezime, adresa, telefon);
                    std::cout &lt;&lt; "Korisnik uspjesno dodan!\n\n" ;
                    break;
                }
<a name="0"></a><font color="#FF0000"><a href="match641-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

                case(2): {
                    std::cout &lt;&lt; "Unesite naziv knjige: ";
                    std::getline (std::cin, naziv_knjige);
                    std::cout &lt;&lt; "Unesite zanr knjige: ";
                    std::getline (std::cin, zanr);
                    std::cout &lt;&lt; "Unesite ime autora knjige: ";
                    std::getline (std::cin, autor);
                    std::cout &lt;&lt; "Unesite godinu izdavanja knjige: ";
                    std::cin &gt;&gt; godina_izdavanja;
                    std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
                    std::cin &gt;&gt; evidencijski_broj;
                    std::cin.clear();
                    std::cin.ignore (10000,'\n');
</font>                    bib.RegistrirajNovuKnjigu (evidencijski_broj, naziv_knjige, zanr, autor, godina_izdavanja);
                    std::cout &lt;&lt; "Knjiga uspjesno dodana!\n\n";
                    break;
                }
                case(3): {
                    bib.IzlistajKorisnike();
                    std::cout &lt;&lt; std::endl;
                    break;
                }
                case(4): {
                    bib.IzlistajKnjige();
<a name="1"></a><font color="#00FF00"><a href="match641-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

                    std::cout &lt;&lt; std::endl;
                    break;
                }
                case(5): {
                    std::cout &lt;&lt; "Unesite clanski broj: ";
                    std::cin &gt;&gt; clanski_broj;
                    std::cout &lt;&lt; "Unesite evidencijski broj: ";
                    std::cin &gt;&gt; evidencijski_broj;
                    std::cin.clear();
                    std::cin.ignore(10000,'\n');
</font>                    bib.ZaduziKnjigu(evidencijski_broj, clanski_broj);
                    std::cout &lt;&lt; "Knjiga je uspjesno zaduzena!\n\n";
                    break;
                }
<a name="6"></a><font color="#00FF00"><a href="match641-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                case(6): {
                    std::cout &lt;&lt; "Unesite evidencijski broj: ";
                    std::cin &gt;&gt; evidencijski_broj;
                    std::cin.clear();
                    std::cin.ignore(10000,'\n');
</font>                    bib.RazduziKnjigu(evidencijski_broj);
                    std::cout &lt;&lt; "Knjiga je uspjesno razduzena!\n\n";
                    break;
                }
<a name="7"></a><font color="#0000FF"><a href="match641-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                case(7): {
                    std::cout &lt;&lt; "Unesite clanski broj: ";
                    std::cin &gt;&gt; clanski_broj;
                    std::cin.clear();
                    std::cin.ignore(10000,'\n');
</font>                    bib.PrikaziZaduzenja(clanski_broj);
                    break;
                }
            }
        }
        catch (std::logic_error por) {
            std::cout &lt;&lt; por.what() &lt;&lt; std::endl &lt;&lt; std::endl;
        }
    }
	return 0;
}</pre>
</body>
</html>
