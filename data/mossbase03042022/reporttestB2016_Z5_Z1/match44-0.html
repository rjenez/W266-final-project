<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5441.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5441.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

<a name="5"></a><font color="#FF0000"><a href="match44-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
};
bool operator ==(Korisnik&amp; k1, Korisnik&amp; k2){
    return k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon==k2.telefon; 
}
class Knjiga{
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik* ko_je_zaduzio;
    public:
    Knjiga(std::string naziv, std::string ime_p, std::string z, int god): 
</font>            naslov(naziv), ime_pisca(ime_p), zanr(z), godina_izdavanja(god), ko_je_zaduzio(nullptr) {}
    std::string DajNaslov()  const { return naslov; }
    std::string DajAutora()  const { return ime_pisca; }
    std::string DajZanr()    const { return zanr; } 
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
<a name="4"></a><font color="#FF00FF"><a href="match44-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

    Korisnik* DajKodKogaJe() const { return ko_je_zaduzio; }
    void ZaduziKnjigu(Korisnik&amp; korisnik) { ko_je_zaduzio=&amp;korisnik; }
    void RazduziKnjigu() { ko_je_zaduzio=nullptr; }
    bool DaLiJeZaduzena() { if(ko_je_zaduzio) return true; else return false; }
};
class Biblioteka{
    std::map&lt;int,Korisnik*&gt; korisnici;
    std::map&lt;int,Knjiga*&gt; knjige;
    void UnistiMemoriju();
    public:
    Biblioteka(): korisnici(), knjige() {}
    ~Biblioteka() {
        UnistiMemoriju(); 
    }
    Biblioteka(const Biblioteka&amp; b);
    Biblioteka(Biblioteka&amp;&amp; b);
    Biblioteka&amp; operator =(const Biblioteka&amp; b);
    Biblioteka&amp; operator =(Biblioteka&amp;&amp; b);
    void RegistrirajNovogKorisnika(int cl_broj, std::string i, std::string p, std::string ad, std::string br_tel);
</font><a name="0"></a><font color="#FF0000"><a href="match44-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_34.gif"/></a>

    void RegistrirajNovuKnjigu(int ev_br, std::string naz, std::string ime_p, std::string z, int god);
    Korisnik&amp; NadjiKorisnika(int cl_br);
    Knjiga&amp; NadjiKnjigu(int e_br);
    void IzlistajKorisnike();
    void IzlistajKnjige();
    void ZaduziKnjigu(int e_br, int c_br);
    void RazduziKnjigu(int e_br);
    void PrikaziZaduzenja(int c_br);
};

void Biblioteka::UnistiMemoriju(){
     for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
        { delete it-&gt;second; it-&gt;second=nullptr; }
     for(auto it=knjige.begin(); it!=knjige.end(); it++)
        { delete it-&gt;second; it-&gt;second=nullptr; }
}
Biblioteka::Biblioteka(const Biblioteka&amp; b){
       UnistiMemoriju();
       korisnici=b.korisnici;
       auto it1=korisnici.begin(); auto it2=b.korisnici.begin();
       while(it1!=korisnici.end())
       {
           Korisnik* pok=new Korisnik(*(it2-&gt;second));
           it1-&gt;second=pok;
           it1++; it2++;
       }
       
       knjige=b.knjige;
       auto itk1=knjige.begin(); auto itk2=b.knjige.begin();
       while(itk1!=knjige.end())
       {
           Knjiga* pok=new Knjiga(*(itk2-&gt;second));
           itk1-&gt;second=pok;
           itk1++; itk2++;
       }
        
    }
Biblioteka::Biblioteka(Biblioteka&amp;&amp; b){
     UnistiMemoriju();
     korisnici=b.korisnici;
     for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) it-&gt;second=nullptr;
     knjige=b.knjige;
     for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) it-&gt;second=nullptr;
     
}
Biblioteka&amp; Biblioteka::operator=(const Biblioteka&amp; b){
    if(&amp;b!= this){
         UnistiMemoriju();
       korisnici=b.korisnici;
       auto it1=korisnici.begin(); auto it2=b.korisnici.begin();
       while(it1!=korisnici.end())
       {
           Korisnik* pok=new Korisnik(*(it2-&gt;second));
           it1-&gt;second=pok;
           it1++; it2++;
       }
       
       knjige=b.knjige;
       auto itk1=knjige.begin(); auto itk2=b.knjige.begin();
       while(itk1!=knjige.end())
       {
           Knjiga* pok=new Knjiga(*(itk2-&gt;second));
           itk1-&gt;second=pok;
           itk1++; itk2++;
       }
    }
    return *this;
}
Biblioteka&amp; Biblioteka::operator =(Biblioteka&amp;&amp; b){
    if(&amp;b!=this)
    {UnistiMemoriju();
     korisnici=b.korisnici;
     for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) it-&gt;second=nullptr;
     knjige=b.knjige;
     for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) it-&gt;second=nullptr;}
     return *this;
}
    void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, std::string i, std::string p, std::string ad, std::string br_tel){
        if(korisnici.count(cl_broj)) throw std::logic_error("Korisnik vec postoji");
        else{
            Korisnik* pok(new Korisnik({i, p, ad, br_tel}));
            korisnici.insert(std::make_pair(cl_broj, pok));
        }
    }
    void Biblioteka::RegistrirajNovuKnjigu(int ev_br, std::string naz, std::string ime_p, std::string z, int god){
        if(knjige.count(ev_br)) throw std::logic_error("Knjiga vec postoji");
        else{
            Knjiga* pok(new Knjiga({naz, ime_p, z, god}));
            knjige.insert(std::make_pair(ev_br, pok));
        }
    }
    Korisnik&amp; Biblioteka::NadjiKorisnika(int cl_br){
        auto it(korisnici.find(cl_br));
        if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        else return *(it-&gt;second);
    }
    Knjiga&amp; Biblioteka::NadjiKnjigu(int e_br){
        auto it(knjige.find(e_br));
        if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        else return *(it-&gt;second);
    }
    void Biblioteka::IzlistajKorisnike() {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
        {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl;
<a name="6"></a><font color="#00FF00"><a href="match44-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    void Biblioteka::IzlistajKnjige() {
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
        {
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match44-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_12.gif"/></a>

            std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            if(!((it-&gt;second)-&gt;DaLiJeZaduzena())) std::cout&lt;&lt;std::endl;
            else std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(it-&gt;second)-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    void Biblioteka::ZaduziKnjigu(int e_br, int c_br) {
        if(!knjige.count(e_br)) throw std::logic_error("Knjiga nije nadjena");
        if(!korisnici.count(c_br)) throw std::logic_error("Korisnik nije nadjen");
        if(NadjiKnjigu(e_br).DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        NadjiKnjigu(e_br).ZaduziKnjigu(NadjiKorisnika(c_br));
    }
    void Biblioteka::RazduziKnjigu(int e_br) { 
        if(!knjige.count(e_br)) throw std::logic_error("Knjiga nije nadjena");
        if(!NadjiKnjigu(e_br).DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        NadjiKnjigu(e_br).RazduziKnjigu();
    }
    void Biblioteka::PrikaziZaduzenja(int c_br) {
        if(!korisnici.count(c_br)) throw std::logic_error("Korisnik nije nadjen");
        bool ima_li_zaduzenja(0);
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
        {
            if((*(it-&gt;second)-&gt;DajKodKogaJe())==NadjiKorisnika(c_br)) {
                ima_li_zaduzenja=1;
                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
</font>                std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match44-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_11.gif"/></a>

                std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
            }
        }
        if(!ima_li_zaduzenja) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    }


int main() {
    Biblioteka b;
    for(;;){
    try{    std::cout&lt;&lt;"\nOdaberite opciju:\nRegistriraj novog korisnika: 1\nRegistriraj novu knjigu: 2\n";
        std::cout&lt;&lt;"Nadji korisnika: 3\nNadji knjigu: 4\nIzlistaj korisnike: 5\nIzlistaj knjige: 6\nZaduzi knjigu: 7\nRazduzi knjigu: 8\nPrikazi zaduzenja: 9\n";
        std::cout&lt;&lt;"Kraj: 0\n";
        int n;
        std::cin&gt;&gt;n;
        if(n==1) {
            Korisnik k;
            std::cout&lt;&lt;"Unesite clanski broj: "; int clbr; std::cin&gt;&gt;clbr;
            std::cout&lt;&lt;"Unesite ime korisnika: "; std::cin&gt;&gt;k.ime;
            std::cout&lt;&lt;"Unesite prezime: "; std::cin&gt;&gt;k.prezime;
            std::cout&lt;&lt;"Adresa: "; std::cin&gt;&gt;k.adresa;
            std::cout&lt;&lt;"Broj telefona: "; std::cin&gt;&gt;k.telefon;
            b.RegistrirajNovogKorisnika(clbr, k.ime, k.prezime, k.adresa, k.telefon);
        }
        if(n==2){
            std::cout&lt;&lt;"Evidencijski broj: "; int ebr; std::cin&gt;&gt;ebr;std::cin.ignore(10,'\n');
            std::cout&lt;&lt;"Unesite naziv knjige: "; std::string naz; std::getline(std::cin,naz); 
            std::cout&lt;&lt;"Unesite ime pisca: "; std::string pisac;  std::getline(std::cin,pisac);
</font><a name="1"></a><font color="#00FF00"><a href="match44-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

            std::cout&lt;&lt;"Zanr: "; std::string zanrr; std::getline(std::cin,zanrr);
            std::cout&lt;&lt;"Godina izdanja: "; int god; std::cin&gt;&gt;god;
            b.RegistrirajNovuKnjigu(ebr, naz, pisac, zanrr, god);
        }
        if(n==3){
            std::cout&lt;&lt;"Unesite clanski broj korisnika: "; int br; std::cin&gt;&gt;br;
            Korisnik kor(b.NadjiKorisnika(br));
            std::cout&lt;&lt;"\nIme i prezime: "&lt;&lt;kor.ime&lt;&lt;" "&lt;&lt;kor.prezime;
            std::cout&lt;&lt;"\nAdresa: "&lt;&lt;kor.adresa;
            std::cout&lt;&lt;"\nBroj telefona: "&lt;&lt;kor.telefon;
        }
        if(n==4){
            std::cout&lt;&lt;"Unesite evidencijski broj knjige: "; int br; std::cin&gt;&gt;br;
            Knjiga knj(b.NadjiKnjigu(br));
            std::cout&lt;&lt;"\nNaziv: "&lt;&lt;knj.DajNaslov();
            std::cout&lt;&lt;"\nIme pisca: "&lt;&lt;knj.DajAutora();
            std::cout&lt;&lt;"\nZanr: "&lt;&lt;knj.DajZanr();
            std::cout&lt;&lt;"\nGodina izdavanja: "&lt;&lt;knj.DajGodinuIzdavanja();
        }
        if(n==5){
            b.IzlistajKorisnike();
        }
        if(n==6){
            b.IzlistajKnjige();
        }
        if(n==7){
            std::cout&lt;&lt;"Unesite evidencijski broj knjige i clanski broj korisnika: "; int evbr, clbr;
            std::cin&gt;&gt;evbr&gt;&gt;clbr;
            b.ZaduziKnjigu(evbr, clbr);
        }
        if(n==8){
            std::cout&lt;&lt;"Unesite evidencijski broj knjige: "; int ebr; std::cin&gt;&gt;ebr;
            b.RazduziKnjigu(ebr);
        }
        if(n==9){
            std::cout&lt;&lt;"Unesite clanski broj korisnika: "; int br; std::cin&gt;&gt;br;
            b.PrikaziZaduzenja(br);
        }
        if(n==0) break;
    } catch(std::logic_error por) { std::cout&lt;&lt;por.what(); }
    }
   
    return 0;
</font>}
</pre>
</body>
</html>
