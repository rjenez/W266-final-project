<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8986.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8986.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
    //Napomena: Sve je javno !
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga {
    
    std::string naslov, pisac, zanr;
    int godina_izdavanja;
    Korisnik *zaduzena_kod;
    
    public:
    
    Knjiga(std::string naslov, std::string pisac, std::string zanr, int godina)
            : naslov(naslov), pisac(pisac), zanr(zanr), godina_izdavanja(godina) {
                zaduzena_kod=nullptr;
            }
            
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return pisac; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    Korisnik *DajKodKogaJe() const { return zaduzena_kod; }
    bool DaLiJeZaduzena() const { if(zaduzena_kod==nullptr) return false; return true; }
    
    void ZaduziKnjigu(Korisnik &amp;k) { zaduzena_kod=&amp;k; }
    void RazduziKnjigu() { zaduzena_kod=nullptr; }
    
};

class Biblioteka {
    
    std::map&lt;int,Korisnik *&gt; korisnici;
    std::map&lt;int,Knjiga *&gt; knjige;
    
    public:
    
    Biblioteka() {};
    ~Biblioteka();
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
    Biblioteka &amp;operator=(Biblioteka b);
    
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
    void RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov, std::string pisac, std::string zanr, int godina);
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
    void RazduziKnjigu(int evidencijski_broj);
    
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void PrikaziZaduzenja(int clanski_broj) const;
    Korisnik &amp;NadjiKorisnika(int clanski_broj) const;
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj) const;
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
    
};

Biblioteka::~Biblioteka() {
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
        delete it-&gt;second;
    for(auto it=knjige.begin(); it!=knjige.end(); it++)
        delete it-&gt;second;
}
<a name="0"></a><font color="#FF0000"><a href="match605-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

Biblioteka::Biblioteka(const Biblioteka &amp;b) {
        for(auto it=(b.korisnici).begin(); it!=(b.korisnici).end(); it++ ) {
            korisnici.insert(std::make_pair(it-&gt;first, new Korisnik(*(it-&gt;second)))); 
        }
        for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++)
            knjige.insert(std::make_pair(it-&gt;first, new Knjiga(*(it-&gt;second))));
</font>    }
Biblioteka::Biblioteka(Biblioteka &amp;&amp;b) {
    korisnici=b.korisnici;
    knjige=b.knjige;
    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++)
        it-&gt;second=nullptr;
    for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++)
        it-&gt;second=nullptr;
}
Biblioteka&amp; Biblioteka::operator=(Biblioteka b) {
    std::swap(b.korisnici, korisnici);
    std::swap(b.knjige, knjige);
    return *this;
}


void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
    if(!korisnici.count(clanski_broj)) {
        Korisnik k{ime,prezime,adresa,telefon};
        korisnici.insert(std::make_pair(clanski_broj, new Korisnik(k)));
    }
    else throw std::logic_error ("Korisnik vec postoji");
}
void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov, std::string pisac, std::string zanr, int godina) {
    if(!knjige.count(evidencijski_broj)) {
        Knjiga k(naslov,pisac,zanr, godina);
        knjige.insert(std::make_pair(evidencijski_broj, new Knjiga(k)));
    }
    else throw std::logic_error ("Knjiga vec postoji");
}
void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj) {
    try {
        if(NadjiKnjigu(evidencijski_broj).DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
        NadjiKnjigu(evidencijski_broj).ZaduziKnjigu(NadjiKorisnika(clanski_broj));
    }
    catch(...) {
        throw;
    }
}
void Biblioteka::RazduziKnjigu(int evidencijski_broj) {
    try {
        if(!NadjiKnjigu(evidencijski_broj).DaLiJeZaduzena()) throw std::logic_error ("Knjiga nije zaduzena");
        NadjiKnjigu(evidencijski_broj).RazduziKnjigu();
    }
    catch(...) { throw; }
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) const {
    try {
        bool nadjen(false);
        
        for(auto it(knjige.begin()); it!=knjige.end(); it++) {
<a name="6"></a><font color="#00FF00"><a href="match605-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            if((it-&gt;second-&gt;DajKodKogaJe())==&amp;(NadjiKorisnika(clanski_broj))) {
                nadjen=true;
               std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl
                 &lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl
</font>                 &lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl
                 &lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl
                 &lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl; 
            }
        }
        if(!nadjen) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    }
    catch(...) {
        throw std::logic_error ("Korisnik nije nadjen");
    }
}
void Biblioteka::IzlistajKorisnike() const {
    for(auto it(korisnici.begin()); it!=korisnici.end(); it++) {
<a name="2"></a><font color="#0000FF"><a href="match605-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl
                 &lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl
                 &lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl
</font>                 &lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
                 
        std::cout&lt;&lt;std::endl;
    }
    
}
void Biblioteka::IzlistajKnjige() const {
    for(auto it(knjige.begin()); it!=knjige.end(); it++) {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl
                 &lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl
                 &lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl
                 &lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl
                 &lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena())
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
    std::cout&lt;&lt;std::endl;
    }
}
<a name="1"></a><font color="#00FF00"><a href="match605-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski_broj) const {
    auto it(korisnici.find(clanski_broj));
    if(it==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
    return *(it-&gt;second);
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int evidencijski_broj) const {
    auto it(knjige.find(evidencijski_broj));
    if(it==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
    return *(it-&gt;second);
</font>}
Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski_broj) {
    auto it(korisnici.find(clanski_broj));
    if(it==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
    return *(it-&gt;second);
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int evidencijski_broj) {
    auto it(knjige.find(evidencijski_broj));
    if(it==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
    return *(it-&gt;second);
}

void Meni1(Biblioteka &amp;b) {
    int opcija;
    for(;;) {
        std::cout&lt;&lt;"Odaberite opciju:\n"
                 &lt;&lt;" 0 - nazad\n"
                 &lt;&lt;" 1 - dodaj novog korisnika\n"
                 &lt;&lt;" 2 - pronadji korisnika\n"
                 &lt;&lt;" 3 - izlistaj korisnike\n"
                 &lt;&lt;" 4 - izlistaj zaduzenja korisnika\n";
        std::cin&gt;&gt;opcija;
        if(opcija==0) return;
        if(opcija==1) {
            for(;;) {
                std::string ime, prezime, adresa, telefon; int n; bool unos(false);
                std::cout&lt;&lt;"\nUnesite clanski broj: "; std::cin&gt;&gt;n;
                std::cout&lt;&lt;"Unesite ime: "; std::cin.ignore(10000, '\n'); std::getline(std::cin, ime);
                std::cout&lt;&lt;"Unesite prezime: "; ; std::getline(std::cin, prezime);
<a name="3"></a><font color="#00FFFF"><a href="match605-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                std::cout&lt;&lt;"Unesite adresu: ";  std::getline(std::cin, adresa);
                std::cout&lt;&lt;"Unesite telefon: ";  std::getline(std::cin, telefon);
                try {
                b.RegistrirajNovogKorisnika(n,ime, prezime, adresa, telefon);
</font>                unos=true;
                }
                catch(std::logic_error g) {
                    std::cout&lt;&lt;g.what()&lt;&lt;" Unesite ponovo\n";
                    unos=false;
                }
                if(unos) {
                    std::cout&lt;&lt;"Novi korisnik je uspjesno dodan!\n";
                    break;
                }
            }
        }
        if(opcija==2) {
            int n; 
            std::cout&lt;&lt;"Unesite clanski broj: "; std::cin&gt;&gt;n;
            try {
                Korisnik k(b.NadjiKorisnika(n));
                std::cout&lt;&lt;"Ime: "&lt;&lt;k.ime&lt;&lt;std::endl
                         &lt;&lt;"Prezime: "&lt;&lt;k.prezime&lt;&lt;std::endl
                         &lt;&lt;"Adresa: "&lt;&lt;k.adresa&lt;&lt;std::endl
                         &lt;&lt;"Telefon: "&lt;&lt;k.telefon&lt;&lt;std::endl;
            }
            catch(std::logic_error g) { std::cout&lt;&lt;g.what()&lt;&lt;std::endl; }
        }
        if(opcija==3) {
            b.IzlistajKorisnike();
        }
        if(opcija==4) {
            std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
            int n; std::cin&gt;&gt;n;
            b.PrikaziZaduzenja(n);
        }
    }
}

void Meni2(Biblioteka &amp;b) {
    int opcija;
    for(;;) {
    std::cout&lt;&lt;"Odaberite opciju:\n"
             &lt;&lt;" 0 - nazad\n"
             &lt;&lt;" 1 - dodaj novu knjigu\n"
             &lt;&lt;" 2 - pronadji knjigu\n"
             &lt;&lt;" 3 - izlistaj knjige\n"
             &lt;&lt;" 4 - pronadji kod koga je knjiga\n"
             &lt;&lt;" 5 - zaduzi knjigu\n"
             &lt;&lt;" 6 - razduzi knjigu\n";
    std::cin&gt;&gt;opcija;
    if(opcija==0) return;
    if(opcija==1) {
       for(;;) {
            std::string naslov, pisac, zanr; int godina, n; bool unos(false);
            std::cout&lt;&lt;"\nUnesite evidencijski broj: "; std::cin&gt;&gt;n;
            std::cout&lt;&lt;"Unesite naslov: "; std::cin.ignore(10000, '\n'); std::getline(std::cin, naslov);
<a name="5"></a><font color="#FF0000"><a href="match605-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            std::cout&lt;&lt;"Unesite pisca: ";  std::getline(std::cin, pisac);
            std::cout&lt;&lt;"Unesite zanr: ";  std::getline(std::cin, zanr);
            std::cout&lt;&lt;"Unesite godinu izdavanja: "; std::cin&gt;&gt;godina;
            try {
</font>                b.RegistrirajNovuKnjigu(n, naslov, pisac, zanr, godina);
                unos=true;
            }
            catch(std::logic_error g) {
                std::cout&lt;&lt;g.what()&lt;&lt;" Unesite ponovo\n";
                unos=false;
            }
            if(unos) {
                std::cout&lt;&lt;"Nova knjiga je uspjesno dodana!\n";
                break;
            }
        } 
    }
    if(opcija==2) {
        int n; 
        std::cout&lt;&lt;"Unesite evidencijski broj: "; std::cin&gt;&gt;n;
        try {
            Knjiga k(b.NadjiKnjigu(n));
            std::cout&lt;&lt;"Naslov: "&lt;&lt;k.DajNaslov()&lt;&lt;std::endl
                     &lt;&lt;"Pisac: "&lt;&lt;k.DajAutora()&lt;&lt;std::endl
                     &lt;&lt;"Zanr: "&lt;&lt;k.DajZanr()&lt;&lt;std::endl
                     &lt;&lt;"Godina izdavanja: "&lt;&lt;k.DajGodinuIzdavanja()&lt;&lt;std::endl;
        }
        catch(std::logic_error g) { std::cout&lt;&lt;g.what()&lt;&lt;std::endl; }
    }
    if(opcija==3) b.IzlistajKnjige();
    if(opcija==4) {
        std::cout&lt;&lt;"Unesite evidencijski broj: ";
        int n; std::cin&gt;&gt;n;
        try {
            Knjiga k(b.NadjiKnjigu(n));
            if(!k.DaLiJeZaduzena()) throw std::logic_error ("Knjiga nije zaduzena");
            std::cout&lt;&lt;"\nKnjiga se nalazi kod: "&lt;&lt;k.DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;k.DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
        }
        catch(std::logic_error g) {
            std::cout&lt;&lt;g.what()&lt;&lt;std::endl;
        }
    }
    if(opcija==5) {
        std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
        int n; std::cin&gt;&gt;n;
        std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
<a name="4"></a><font color="#FF00FF"><a href="match605-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        int m; std::cin&gt;&gt;m;
        try{
            b.ZaduziKnjigu(n,m);
        }
        catch(std::logic_error g) { std::cout&lt;&lt;g.what()&lt;&lt;std::endl; }
    }
    if(opcija==6) {
</font>        std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
<a name="7"></a><font color="#0000FF"><a href="match605-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        int n; std::cin&gt;&gt;n;
        try{
            b.RazduziKnjigu(n);
        }
        catch(std::logic_error g) { std::cout&lt;&lt;g.what()&lt;&lt;std::endl; }
</font>    }
}
}

int main () {

Biblioteka b;

std::cout&lt;&lt;"DOBRODOSLI!\n\n";

for(;;) {
    int opcija;
    std::cout&lt;&lt;"Odaberite opciju:\n"
             &lt;&lt;" 0 - kraj\n"
             &lt;&lt;" 1 - upravljanje korisnicima\n"
             &lt;&lt;" 2 - upravljanje knjigama\n";
    std::cin&gt;&gt;opcija;
    if(opcija==0) break;
    if(opcija==1) Meni1(b);
    if(opcija==2) Meni2(b);
}

std::cout&lt;&lt;"\nDOVIDJENJA!"; 
	return 0;
}</pre>
</body>
</html>
