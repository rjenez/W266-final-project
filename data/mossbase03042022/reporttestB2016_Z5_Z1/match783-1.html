<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4614.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7341.cpp<p></p><pre>
/B16/17 (Zadaća 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match783-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};
class Knjiga {
    std::string naslov;
    std::string autor;
    std::string zanr;
    int god;
    Korisnik * zaduzio;
    public:
    //konstruktor
    Knjiga (std::string n, std::string i, std::string z, int g): 
    naslov(n), autor(i), zanr(z), god(g), zaduzio(nullptr) {}
</font>    //fje 
    std::string DajNaslov() const {return naslov;}
    std::string DajAutora() const {return autor;}
    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja () const {return god;}
<a name="5"></a><font color="#FF0000"><a href="match783-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Korisnik* DajKodKogaJe() const {return zaduzio;}
    void ZaduziKnjigu (Korisnik &amp;osoba){ zaduzio=&amp;osoba;}
    void RazduziKnjigu () {zaduzio=nullptr;} 
    bool DaLiJeZaduzena () const { if(!zaduzio) return false; else return true; }    
</font>    //~Knjiga() {delete zaduzio;}
    
};

class Biblioteka {
<a name="3"></a><font color="#00FFFF"><a href="match783-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    std::map&lt;int, Korisnik *&gt; korisnici;
    std::map&lt;int, Knjiga *&gt; knjige;
    public:
    Biblioteka() {}
    //kopirajuci konstruktor
    Biblioteka(const Biblioteka &amp;bib) {
        for(auto it=(bib.korisnici).begin(); it!=(bib.korisnici).end(); it++){
</font>            int cl_broj=it-&gt;first;
            Korisnik * p(new Korisnik());
            p-&gt;ime=((it-&gt;second)-&gt;ime);
            p-&gt;prezime=((it-&gt;second)-&gt;prezime);
            p-&gt;adresa=((it-&gt;second)-&gt;adresa);
            p-&gt;telefon=((it-&gt;second)-&gt;telefon);
            korisnici.insert(std::make_pair(cl_broj,p));
        }
        for(auto it=(bib.knjige).begin(); it!=(bib.knjige).end(); it++){
            int ev_broj=it-&gt;first;
            Knjiga * k(new Knjiga((*(it-&gt;second)).DajNaslov(), (*(it-&gt;second)).DajAutora(),
                                  (*(it-&gt;second)).DajZanr(), (*(it-&gt;second)).DajGodinuIzdavanja()));
            
            knjige.insert(std::make_pair(ev_broj,k));
        }
    }
    
    //pomjerajuci konstruktor
    Biblioteka(Biblioteka &amp;&amp;bib) {
       
        for(auto it=(bib.korisnici).begin(); it!=(bib.korisnici).end(); it++){
            korisnici.insert(std::make_pair(it-&gt;first, it-&gt;second));
            (it-&gt;second)=nullptr;
        }
        for(auto it=(bib.knjige).begin(); it!=(bib.knjige).end(); it++){
            knjige.insert(std::make_pair(it-&gt;first, it-&gt;second));
            (it-&gt;second)=nullptr;
        }
    }
    
    
    //preklopljeni operator dodjele
    Biblioteka &amp;operator =(const Biblioteka &amp;bib){
    std::map&lt;int, Korisnik *&gt; korisnici_privremena;  //AKO NE USPIJU ALOKACIJE 
    std::map&lt;int, Knjiga *&gt; knjige_privremena;

    for(auto it=(bib.korisnici).begin(); it!=(bib.korisnici).end(); it++){
            int cl_broj=it-&gt;first;
            Korisnik * p(new Korisnik());
            p-&gt;ime=((it-&gt;second)-&gt;ime);
            p-&gt;prezime=((it-&gt;second)-&gt;prezime);
            p-&gt;adresa=((it-&gt;second)-&gt;adresa);
            p-&gt;telefon=((it-&gt;second)-&gt;telefon);
            korisnici_privremena.insert(std::make_pair(cl_broj,p));
        }
        for(auto it=(bib.knjige).begin(); it!=(bib.knjige).end(); it++){
            int ev_broj=it-&gt;first;
            Knjiga * k(new Knjiga((*(it-&gt;second)).DajNaslov(), (*(it-&gt;second)).DajAutora(),
                                  (*(it-&gt;second)).DajZanr(), (*(it-&gt;second)).DajGodinuIzdavanja()));
            
            knjige_privremena.insert(std::make_pair(ev_broj,k));
        }
        
        
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
             //brise alocirano
             delete (it-&gt;second);
        }
        //isprazni mapu
        korisnici.clear();
       
       for(auto it=knjige.begin(); it!=knjige.end(); it++){
           delete (it-&gt;second);
       }
       knjige.clear();
        
        //kopira sadrzaje privremenih u objekat 
       for(auto it=(korisnici_privremena).begin(); it!=(korisnici_privremena).end(); it++){
           korisnici.insert(*it);
       }
       for(auto it=(knjige_privremena).begin(); it!=(knjige_privremena).end(); it++){
          knjige.insert(*it);
       }
       
       return *this;
}

//preklopljeni operator dodjele
 Biblioteka &amp;operator =(Biblioteka &amp;&amp;bib){
     if(&amp;bib!=this){
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
             delete (it-&gt;second);
        }
        korisnici.clear();
        for(auto it=knjige.begin(); it!=knjige.end(); it++){
           delete (it-&gt;second);
        }
        knjige.clear();
        for(auto it=(bib.korisnici).begin(); it!=(bib.korisnici).end(); it++){
           korisnici.insert(*it);
           it-&gt;second=nullptr;
       }
       for(auto it=(bib.knjige).begin(); it!=(bib.knjige).end(); it++){
          knjige.insert(*it);
          it-&gt;second=nullptr;
       }
    }
    
    return *this;
}

~Biblioteka(){
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {delete (it-&gt;second);}
<a name="4"></a><font color="#FF00FF"><a href="match783-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    for(auto it=knjige.begin(); it!=knjige.end(); it++) {delete (it-&gt;second);}
}
    //fje
    void RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, 
</font>    std::string adresa, std::string br_tel){
        
        
        bool ima(false);
        for( auto it=korisnici.begin(); it!=korisnici.end(); it++){
            if((it-&gt;first)==cl_broj) {ima=true; break;}
        }
        if(ima) throw std::logic_error ("Korisnik vec postoji");
        Korisnik * k(new Korisnik);
        k-&gt;ime=ime; k-&gt;prezime=prezime; k-&gt;adresa=adresa; k-&gt;telefon=br_tel;
<a name="6"></a><font color="#00FF00"><a href="match783-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        korisnici.insert(std::make_pair(cl_broj,k));
                                    
    }
    
    void RegistrirajNovuKnjigu (int ev_br, std::string naslov, std::string pisac,
    std::string zanr, int god){
</font>        
        bool ima (false);
        for(auto it=knjige.begin(); it!=knjige.end(); it++){
            if((it-&gt;first)==ev_br) {ima=true; break; }
        }
        if(ima) throw std::logic_error ("Knjiga vec postoji");
        knjige.insert(std::make_pair(ev_br, new Knjiga(naslov, pisac, zanr, god)));
    }
    
<a name="1"></a><font color="#00FF00"><a href="match783-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    Korisnik &amp; NadjiKorisnika (int cl_broj){
        auto it (korisnici.find(cl_broj));
        if(it==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
        return (*(it-&gt;second));
    }
    
    Knjiga &amp; NadjiKnjigu(int ev_broj)  {
        auto it(knjige.find(ev_broj));
        if(it==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
        return(*(it-&gt;second));
    }
    void IzlistajKorisnike() const {
</font>        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;(it-&gt;first)&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    void IzlistajKnjige() const {
        for(auto it=knjige.begin(); it!=knjige.end(); it++){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;(it-&gt;first)&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            if((it-&gt;second)-&gt;DaLiJeZaduzena()) {
                Korisnik * k( ((it-&gt;second)-&gt;DajKodKogaJe()) );
                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(*k).ime&lt;&lt;" "&lt;&lt;(*k). prezime&lt;&lt;std::endl&lt;&lt;std::endl;
            }
<a name="2"></a><font color="#0000FF"><a href="match783-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            std::cout&lt;&lt;std::endl;
        }
    }
    
    void ZaduziKnjigu(int ev_br /*knjiga*/, int cl_br/*korisnik*/ ){
        auto k(knjige.find(ev_br));
        if(k==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
        auto ko(korisnici.find(cl_br));
        if(ko==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
        if(((k-&gt;second)-&gt;DajKodKogaJe())!=nullptr) throw std::logic_error ("Knjiga vec zaduzena");
</font>        
        knjige[ev_br]-&gt;Knjiga::ZaduziKnjigu(*korisnici[cl_br]);
    }
    
    void RazduziKnjigu (int ev_br){
        auto k(knjige.find(ev_br));
        if(k==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
        if(((k-&gt;second)-&gt;DajKodKogaJe())==nullptr) throw std::logic_error ("Knjiga nije zaduzena");
        knjige[ev_br]-&gt;Knjiga::RazduziKnjigu();
    }
    
    void PrikaziZaduzenja (int cl_br) const {
        auto k(korisnici.find(cl_br)); //k je iterator na tog korisnika
        if(k==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
        bool ima(false);
            for(auto it=knjige.begin(); it!=knjige.end(); it++){ //ide kroz knjige
                if((it-&gt;second)-&gt;DajKodKogaJe()==(k-&gt;second)) { //ako je knjiga zaduzena kod osobe k
                    ima=true;
                    std::cout&lt;&lt;(it-&gt;second)-&gt;DajNaslov(); //ispisuje naziv knjige
                }
            }
            if(!ima) throw std::logic_error ("Nema zaduzenja za tog korisnika!");
    }
        
    
    
    
};
int main (){
try {    
    Biblioteka bib6;
    bib6.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib6.RegistrirajNovogKorisnika(1,"Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
}
catch(std::logic_error Izuzetak){
    std::cout&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
}    
try{
    Biblioteka bib6;
    bib6.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib6.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    std::cout &lt;&lt; bib6.NadjiKorisnika(1).ime&lt;&lt;std::endl;
    
    Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Pero", "Periša", "Zmaja od Bosne bb", "123 444");
    bib8.RegistrirajNovogKorisnika(2, "Mirko", "Miki", "Čekaluša", "123 987");
    bib8.RegistrirajNovuKnjigu(1, "Pustolovine", "Mato Lovrak", "Roman2", 1941);
    bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    bib8.RegistrirajNovuKnjigu(3, "A planine su odjekivale", "Khaled Hosseini", "Roman", 2012);
    bib8.RegistrirajNovuKnjigu(4, "Hiljadu čudesnih sunaca", "Khaled Hosseini", "Roman", 2007);
    bib8.ZaduziKnjigu(2, 1);
    bib8.ZaduziKnjigu(4, 2);
    bib8.IzlistajKnjige();
    std::cout&lt;&lt;"Nakon dodjele biblioteka: "&lt;&lt;std::endl;
    bib8=bib6;
    bib8.IzlistajKnjige();
    Biblioteka bib7(bib6);
    std::cout&lt;&lt;"Nova biblioteka: "&lt;&lt;std::endl;
    bib7.IzlistajKnjige();
} catch(std::logic_error Izuzetak){
    std::cout&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
}    
	return 0;
}</pre>
</body>
</html>
