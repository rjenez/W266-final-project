<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4389.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4389.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match500-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
//Zadatak greskom pisan u folderu Tutorijal 12, Zadatak 3.

struct Korisnik {
	std::string ime;
	std::string prezime;
	std::string adresa;
	std::string telefon;
};
class Knjiga {
	std::string naslov;
	std::string ime_pisca;
	std::string zanr;
	int g_izdavanja;
	Korisnik *zaduzenik;
public:
	Knjiga(std::string hdln, std::string wrtr, std::string gnre, int ypub) : naslov(hdln), ime_pisca(wrtr), zanr(gnre), g_izdavanja(ypub) {zaduzenik=nullptr;}
</font><a name="6"></a><font color="#00FF00"><a href="match500-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

	std::string DajNaslov() const { return naslov; }
	std::string DajAutora() const { return ime_pisca; }
	std::string DajZanr() const { return zanr; }
</font>	int DajGodinuIzdavanja() const { return g_izdavanja; }
	Korisnik *DajKodKogaJe() const { return zaduzenik; }
	void ZaduziKnjigu(Korisnik &amp;korisnik) { zaduzenik = &amp;korisnik; }
	void RazduziKnjigu() { zaduzenik = nullptr; }
	bool DaLiJeZaduzena() { if(zaduzenik) return true; return false; }
};

class Biblioteka {
<a name="7"></a><font color="#0000FF"><a href="match500-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

	std::map&lt;int, Korisnik*&gt; korisnici;
	std::map&lt;int, Knjiga*&gt; knjige;
public:
	Biblioteka();
	Biblioteka(const Biblioteka &amp;b);
	Biblioteka(Biblioteka &amp;&amp;b);
</font>	Biblioteka &amp;operator=(const Biblioteka &amp;b);
	Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
	void RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
	void RegistrirajNovuKnjigu(int ev_broj, std::string naslov, std::string ime, std::string zanr, int ypub);
	Korisnik &amp;NadjiKorisnika(int cl_broj);
	Knjiga &amp;NadjiKnjigu(int ev_broj);
	void IzlistajKorisnike() const;
	void IzlistajKnjige() const;
	void ZaduziKnjigu(int ev_broj, int cl_broj);
	void RazduziKnjigu(int ev_broj);
	void PrikaziZaduzenja(int cl_broj) const;
	~Biblioteka();
};

Biblioteka::Biblioteka() {}
Biblioteka::Biblioteka(const Biblioteka &amp;b) : korisnici(b.korisnici), knjige(b.knjige) {
	auto it2 = b.korisnici.begin();
	for(auto it1=korisnici.begin(); it1!=korisnici.end(); it1++){
		it1-&gt;second = new Korisnik(*(it2-&gt;second));
		it2++;
	}
}
<a name="1"></a><font color="#00FF00"><a href="match500-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b) : korisnici(b.korisnici), knjige(b.knjige){
	for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++){
		it-&gt;second = nullptr;
	}
	for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++){
		it-&gt;second = nullptr;
	}
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){
</font>	auto it2 = b.korisnici.begin();
	for(auto it1=korisnici.begin(); it1!=korisnici.end(); it1++){
		it1-&gt;second = new Korisnik(*(it2-&gt;second));
		it2++;
	}
	return *this;
}
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b){
	for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++){
		it-&gt;second = nullptr;
	}
	for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++){
		it-&gt;second = nullptr;
	}
	return *this;
}
Biblioteka::~Biblioteka(){
<a name="2"></a><font color="#0000FF"><a href="match500-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	for(auto it=korisnici.begin(); it!=korisnici.end(); it++){ delete it-&gt;second; }
	for(auto it=knjige.begin(); it!=knjige.end(); it++){ delete it-&gt;second; }
}

void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
</font><a name="4"></a><font color="#FF00FF"><a href="match500-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	if(korisnici.count(cl_broj)&gt;0) throw std::logic_error("Korisnik vec postoji");
	Korisnik *temp = new Korisnik;
	temp-&gt;ime = ime; temp-&gt;prezime = prezime; temp-&gt;adresa = adresa; temp-&gt;telefon = telefon;
	korisnici[cl_broj] = temp;
</font>}
void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, std::string naslov, std::string ime, std::string zanr, int ypub){
	if(knjige.count(ev_broj)&gt;0) throw std::logic_error("Korisnik vec postoji");
	Knjiga *temp = new Knjiga(naslov, ime, zanr, ypub);
	knjige[ev_broj] = temp;
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int cl_broj){
	auto it = korisnici.find(cl_broj);
	if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
	return *it-&gt;second;
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj){
<a name="3"></a><font color="#00FFFF"><a href="match500-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	auto it = knjige.find(ev_broj);
	if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
	return *it-&gt;second;
}

void Biblioteka::IzlistajKorisnike() const {
	for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
		std::cout &lt;&lt; "Clanski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>		std::cout &lt;&lt; "Ime i prezime: "&lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
		std::cout &lt;&lt; "Adresa: "&lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
<a name="5"></a><font color="#FF0000"><a href="match500-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

		std::cout &lt;&lt; "Broj telefona: "&lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
		std::cout &lt;&lt; std::endl;
	}
}
void Biblioteka::IzlistajKnjige() const {
	for(auto it=knjige.begin(); it!=knjige.end(); it++){
</font>		std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
		std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
		std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
		std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
		std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
		if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
		std::cout &lt;&lt; std::endl;
	}
}

void Biblioteka::ZaduziKnjigu(int ev_broj, int cl_broj){
	if(knjige.count(ev_broj) == 0) throw std::logic_error("Knjiga nije nadjena");
	if(korisnici.count(cl_broj) == 0) throw std::logic_error("Korisnik nije nadjen");
	if(knjige[ev_broj]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
	knjige[ev_broj]-&gt;ZaduziKnjigu(*korisnici[cl_broj]);
}
void Biblioteka::RazduziKnjigu(int ev_broj){
	if(knjige.count(ev_broj)==0) throw std::logic_error("Knjiga nije nadjena");
	if(!knjige[ev_broj]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
	knjige[ev_broj]-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int cl_broj) const{
	if(korisnici.count(cl_broj)==0) throw std::logic_error("Korisnik nije nadjen");
	for(auto it=knjige.begin(); it!=knjige.end(); it++){
		if(it-&gt;second-&gt;DajKodKogaJe()-&gt;ime == korisnici.find(cl_broj)-&gt;second-&gt;ime){
			std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
			std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
			std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
			std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
			std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
			std::cout &lt;&lt; std::endl;
		}
	}
}

int main ()
{
	Biblioteka bib5;
	bib5.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
	bib5.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
	
	Biblioteka bib6(bib5);
	std::cout &lt;&lt; bib6.NadjiKnjigu(2).DajNaslov();
	return 0;
}</pre>
</body>
</html>
