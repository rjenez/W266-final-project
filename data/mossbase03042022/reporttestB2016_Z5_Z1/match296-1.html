<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3515.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8521.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match296-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;

using namespace std;

struct Korisnik {
    string ime,prezime,adresa,telefon;
};

class Knjiga {
    string naslov,pisac,zanr;
    int godina_izdavanja;
    Korisnik *pok=nullptr;
    public:
    Knjiga(string n,string p,string z,int g){naslov=n;pisac=p;zanr=z;godina_izdavanja=g;};
</font>    string DajNaslov() const {return naslov;}
    string DajAutora() const {return pisac;}
    string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdavanja;}
    Korisnik *DajKodKogaJe() const {return pok;}
    void ZaduziKnjigu(Korisnik &amp;k){pok=&amp;k;}
    void RazduziKnjigu(){pok=nullptr;}
    bool DaLiJeZaduzena(){if(pok!=nullptr)return true;return false;}
};
<a name="5"></a><font color="#FF0000"><a href="match296-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

class Biblioteka {
    map&lt;int,Korisnik *&gt;korisnici;
    map&lt;int,Knjiga *&gt;knjige;
    public:
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
</font>    ~Biblioteka();
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
<a name="1"></a><font color="#00FF00"><a href="match296-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    Biblioteka &amp;operator = (Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int clanski_broj,string i,string pr,string adr,string tel);
    void RegistrirajNovuKnjigu(int evidencijski_broj,string nas,string pis,string zan,int god);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
    void IzlistajKorisnike()const;
    void IzlistajKnjige()const;
    void ZaduziKnjigu(int evidencijski_broj,int clanski_broj);
    void RazduziKnjigu(int evidencijski_broj);
    void PrikaziZaduzenja(int clanski_broj);
};
Biblioteka::Biblioteka(const Biblioteka &amp;b){
    try {
</font>    for(auto j=b.korisnici.begin();j!=b.korisnici.end();j++){
        RegistrirajNovogKorisnika(j-&gt;first,j-&gt;second-&gt;ime,j-&gt;second-&gt;prezime,j-&gt;second-&gt;adresa,j-&gt;second-&gt;telefon);
    }
    for(auto j=b.knjige.begin();j!=b.knjige.end();j++){
        RegistrirajNovuKnjigu(j-&gt;first,j-&gt;second-&gt;DajNaslov(),j-&gt;second-&gt;DajAutora(),j-&gt;second-&gt;DajZanr(),j-&gt;second-&gt;DajGodinuIzdavanja());
    }
   }
   catch(...){
       throw;
   }
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;b):korisnici(b.korisnici),knjige(b.knjige){
   auto p(korisnici.begin());auto pomoc(b.korisnici.begin());
   while (pomoc!=b.korisnici.end() &amp;&amp; p!=korisnici.end()){
       p-&gt;second=pomoc-&gt;second;
       pomoc-&gt;second=nullptr;
       p++;pomoc++;
   }
   auto p2(knjige.begin());auto pomoc2(b.knjige.begin());
   while(pomoc2!=b.knjige.end() &amp;&amp; p2!=knjige.end()){
       p2-&gt;second=pomoc2-&gt;second;
       pomoc2-&gt;second=nullptr;
       p2++;pomoc2++;
   }
}
 Biblioteka &amp; Biblioteka::operator =(const Biblioteka &amp;b){
     if(&amp;b!=this){
         try {
             for(auto i=korisnici.begin();i!=korisnici.end();i=korisnici.begin()){
                 delete i-&gt;second;korisnici.erase(i-&gt;first);
                 if(korisnici.size()==0)break;
             }
        for(auto j=b.korisnici.begin();j!=b.korisnici.end();j++){
                RegistrirajNovogKorisnika(j-&gt;first,j-&gt;second-&gt;ime,j-&gt;second-&gt;prezime,j-&gt;second-&gt;adresa,j-&gt;second-&gt;telefon);
        }
        for(auto i=knjige.begin();i!=knjige.end();i=knjige.begin()){
                 delete i-&gt;second;knjige.erase(i-&gt;first);
                 if(knjige.size()==0)break;
             }
        for(auto j=b.knjige.begin();j!=b.knjige.end();j++){
            RegistrirajNovuKnjigu(j-&gt;first,j-&gt;second-&gt;DajNaslov(),j-&gt;second-&gt;DajAutora(),j-&gt;second-&gt;DajZanr(),j-&gt;second-&gt;DajGodinuIzdavanja());
        }
    }
         catch(...){
             throw;
         }
     }
<a name="7"></a><font color="#0000FF"><a href="match296-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

     return *this;
 }
 Biblioteka &amp; Biblioteka::operator = (Biblioteka &amp;&amp;b){
     swap(korisnici,b.korisnici);
     swap(knjige,b.knjige);
     return *this;
</font> }
void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj,string i,string pr,string adr,string tel){
    Korisnik *k=nullptr;
    try {
        k=new Korisnik;
        k-&gt;ime=i;k-&gt;prezime=pr;k-&gt;adresa=adr;k-&gt;telefon=tel;
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            if(it-&gt;first==clanski_broj)throw logic_error("Korisnik vec postoji");
        }
        korisnici.insert(make_pair(clanski_broj,k));
    }
    catch(logic_error l){
        cout&lt;&lt;l.what();delete k;
    }
}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj,string nas,string pis,string zan,int god){
    Knjiga *k=nullptr;
    try {
        k=new Knjiga(nas,pis,zan,god);
       for(auto it=knjige.begin();it!=knjige.end();it++){
           if(it-&gt;first==evidencijski_broj)throw logic_error("Knjiga vec postoji");
       }
       knjige.insert(make_pair(evidencijski_broj,k));
    }
    catch(logic_error l){
        cout&lt;&lt;l.what();delete k;
    }
}

<a name="2"></a><font color="#0000FF"><a href="match296-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski_broj){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
        if(it-&gt;first==clanski_broj)return *(it-&gt;second);
    }
    throw logic_error("Korisnik nije nadjen");
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int evidencijski_broj){
    for(auto it=knjige.begin();it!=knjige.end();it++){
        if(it-&gt;first==evidencijski_broj)return *(it-&gt;second);
</font>    }
    throw logic_error("Knjiga nije nadjena");
}
Biblioteka::~Biblioteka(){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
        delete it-&gt;second;it-&gt;second=nullptr;
    }
    for(auto it=knjige.begin();it!=knjige.end();it++){
        delete it-&gt;second;it-&gt;second=nullptr;
    }
}
void Biblioteka:: IzlistajKorisnike()const{
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
<a name="0"></a><font color="#FF0000"><a href="match296-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

        cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
        cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
        cout&lt;&lt;endl;
    }
}
void Biblioteka::IzlistajKnjige()const{
    for(auto it=knjige.begin();it!=knjige.end();it++){
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
</font>        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="6"></a><font color="#00FF00"><a href="match296-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()){
</font><a name="4"></a><font color="#FF00FF"><a href="match296-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
        }
        cout&lt;&lt;endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evidencijski_broj,int clanski_broj){
</font>   if(evidencijski_broj&lt;=0)throw logic_error("Knjiga nije nadjena");
   if(clanski_broj&lt;=0) throw logic_error("Korisnik nije nadjen");
    Knjiga *r =&amp;NadjiKnjigu(evidencijski_broj);
    if(r-&gt;DaLiJeZaduzena())throw logic_error ("Knjiga vec zaduzena");
    r-&gt;ZaduziKnjigu(NadjiKorisnika(clanski_broj));
}
void Biblioteka::RazduziKnjigu(int evidencijski_broj){
    if(evidencijski_broj&lt;=0)throw logic_error("Knjiga nije nadjena");
    Knjiga *r =&amp;NadjiKnjigu(evidencijski_broj);
    if(!r-&gt;DaLiJeZaduzena())throw logic_error ("Knjiga nije zaduzena");
    r-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski_broj){
    if(clanski_broj&lt;=0)throw logic_error("Korisnik nije nadjen");
    bool a(false);
    for(auto it=knjige.begin();it!=knjige.end();it++){
        if(it-&gt;second-&gt;DajKodKogaJe()==&amp;NadjiKorisnika(clanski_broj)){
<a name="8"></a><font color="#00FFFF"><a href="match296-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        a=true;
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
</font>        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        cout&lt;&lt;endl;
        }
    }
    if(a==false)cout&lt;&lt;"Nema zaduzenja za tog korisnika!"&lt;&lt;endl;
}
int main ()
{
	return 0;
}</pre>
</body>
</html>
