<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7197.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7197.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise


#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

using namespace std;

struct Korisnik {
  std::string ime, prezime, adresa, telefon;
};

class Knjiga
{
  std::string naslov, pisac, zanr;
  int godina;
  Korisnik *korisnik = nullptr;

public:
  Knjiga(std::string naslov, std::string autor, std::string zanr, int g): naslov(naslov), pisac(autor), zanr(zanr), godina(g), korisnik(nullptr) {}
  std::string DajNaslov()const {
    return naslov;
  }
  std::string DajAutora()const {
    return pisac;
  }
  std::string DajZanr()const {
    return zanr;
  }
  int DajGodinuIzdavanja()const {
    return godina;
  }
  Korisnik* DajKodKogaJe()const {
    return korisnik;
  }
  void ZaduziKnjigu(Korisnik &amp;k) {
    korisnik=&amp;k;
  }
  void RazduziKnjigu() {
    korisnik=nullptr;
  }
  bool DaLiJeZaduzena() const {
<a name="0"></a><font color="#FF0000"><a href="match238-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

    if(korisnik==nullptr)return false;
    return true;
  }
};
class Biblioteka
{
  map&lt;int,Korisnik*&gt; korisnici;
  map&lt;int,Knjiga*&gt; knjige;

public:

  Biblioteka() {}

  ~Biblioteka() {
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
      delete it-&gt;second;
    }
    korisnici.clear();

    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
      delete it-&gt;second;
    }
    knjige.clear();
  }

  Biblioteka(const Biblioteka&amp;b) {

    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) {
      korisnici[it-&gt;first] = new Korisnik(*it-&gt;second);
</font>    }
<a name="7"></a><font color="#0000FF"><a href="match238-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) {
      knjige[it-&gt;first] = new Knjiga(*it-&gt;second);
    }
  }

  Biblioteka( Biblioteka&amp;&amp;b) {
</font>    korisnici=b.korisnici;
    knjige=b.knjige;
    b.korisnici.clear();
    b.knjige.clear();
  }

  Biblioteka&amp; operator=(const Biblioteka&amp;b) {
    if(this!=&amp;b) {
<a name="3"></a><font color="#00FFFF"><a href="match238-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

      for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
        delete it-&gt;second;
      }
      korisnici.clear();

      for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        delete it-&gt;second;
      }
      knjige.clear();
      
      for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) {
        korisnici[it-&gt;first] = new Korisnik(*it-&gt;second);
</font>      }
<a name="1"></a><font color="#00FF00"><a href="match238-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

      for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) {
        knjige[it-&gt;first] = new Knjiga(*it-&gt;second);
      }
    }

    return *this;

  }
  
  
  Biblioteka&amp; operator=(Biblioteka &amp;&amp;b){
      if(this!=&amp;b) {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
          delete it-&gt;second;
        }
        korisnici.clear();
  
        for(auto it=knjige.begin(); it!=knjige.end(); it++) {
          delete it-&gt;second;
        }
        knjige.clear();
</font>        
        korisnici=b.korisnici;
        knjige=b.knjige;
        b.korisnici.clear();
        b.knjige.clear();
        
      }
      
<a name="5"></a><font color="#FF0000"><a href="match238-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

      return *this;
  
  }
  
  void RegistrirajNovogKorisnika(int clanskiBroj, string ime, string prezime, string adresa, string telefon){
    if(korisnici.find(clanskiBroj)!=korisnici.end()) throw logic_error("Korisnik vec postoji");
</font>    
    korisnici[clanskiBroj] = new Korisnik{ime,prezime,adresa,telefon};
  }

<a name="8"></a><font color="#00FFFF"><a href="match238-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

  void RegistrirajNovuKnjigu(int evidencijskiBroj, string naslov, string imePisca, string zanr, int godina){
    if(knjige.find(evidencijskiBroj)!=knjige.end()) throw logic_error("Knjiga vec postoji");
</font><a name="4"></a><font color="#FF00FF"><a href="match238-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    
    knjige[evidencijskiBroj] = new Knjiga{naslov,imePisca,zanr,godina};
  }


  Korisnik&amp; NadjiKorisnika(int clanskiBroj){
    if(korisnici.find(clanskiBroj)==korisnici.end()) throw logic_error("Korisnik nije nadjen");
</font>    
    return *korisnici[clanskiBroj];
  }
   
  Knjiga&amp; NadjiKnjigu(int evidencijskiBroj){
<a name="2"></a><font color="#0000FF"><a href="match238-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

     if(knjige.find(evidencijskiBroj)==knjige.end()) throw logic_error("Knjiga ne postoji");
    
    return *knjige[evidencijskiBroj];
  }
  
  
  void IzlistajKorisnike()const{
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
      cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
      cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
      cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
</font><a name="9"></a><font color="#FF00FF"><a href="match238-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

      cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl&lt;&lt;endl;
    }
  }

  void IzlistajKnjige()const{
      for(auto it=knjige.begin();it!=knjige.end();it++){
      cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
</font>      cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
      cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="6"></a><font color="#00FF00"><a href="match238-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

      cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
      cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
      
      if(it-&gt;second-&gt;DaLiJeZaduzena()){
</font>        Korisnik* k = it-&gt;second-&gt;DajKodKogaJe();
<a name="10"></a><font color="#FF0000"><a href="match238-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;k-&gt;ime&lt;&lt;" "&lt;&lt;k-&gt;prezime&lt;&lt;endl;
      }
      
      cout&lt;&lt;endl;
    }
  }
  
  
  void ZaduziKnjigu(int evidencijskiBroj, int clanskiBroj){
    if(korisnici.find(clanskiBroj)==korisnici.end()) throw logic_error("Korisnik nije nadjen");
</font>    if(knjige.find(evidencijskiBroj)==knjige.end()) throw logic_error("Knjiga nije nadjena");
    if(knjige[evidencijskiBroj]-&gt;DaLiJeZaduzena()) throw logic_error("Knjiga vec zaduzena");
    
    knjige[evidencijskiBroj]-&gt;ZaduziKnjigu(*korisnici[clanskiBroj]);
  }
  
  void RazduziKnjigu(int evidencijskiBroj){
    if(knjige.find(evidencijskiBroj)==knjige.end()) throw logic_error("Knjiga nije nadjena");
    
    if(!knjige[evidencijskiBroj]-&gt;DaLiJeZaduzena()) throw logic_error("Knjiga nije zaduzena");
    
    knjige[evidencijskiBroj]-&gt;RazduziKnjigu();
  }
  
  void PrikaziZaduzenja(int clanskiBroj){
        if(korisnici.find(clanskiBroj)==korisnici.end()) throw logic_error("Korisnik nije nadjen");
        bool zaduzio=false;
        
        Korisnik* k = korisnici[clanskiBroj];
        for(auto it=knjige.begin();it!=knjige.end();it++){
          if(it-&gt;second-&gt;DajKodKogaJe()==k){
            zaduzio = true;
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
            cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
            cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
            cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
          }
        }
        if(zaduzio==false) cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
  }
  
};




int main ()
{
  return 0;
}</pre>
</body>
</html>
