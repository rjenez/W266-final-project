<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5078.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2157.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match3-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;string&gt;
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;exception&gt;
#include &lt;algorithm&gt;
struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};
void Ispisi(std::string ime,std::string prezime,std::string adresa,std::string telefon){
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;ime&lt;&lt;" "&lt;&lt;prezime&lt;&lt;"\n";
        std::cout&lt;&lt;"Adresa: "&lt;&lt;adresa&lt;&lt;"\n";
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;telefon&lt;&lt;"\n";
    }
class Knjiga{
    std::string naslov_knjige;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    Korisnik *zaduzena;
    public:
    Knjiga(std::string naslov,std::string pisac,std::string zanr,int godina);
    std::string DajNaslov()const{return naslov_knjige;}
    std::string DajAutora()const{return ime_pisca;}
    std::string DajZanr()const{return zanr;}
    int DajGodinuIzdavanja()const{return godina_izdavanja;}
    Korisnik *DajKodKogaJe()const{return zaduzena;}
    void ZaduziKnjigu(Korisnik &amp;k){if(zaduzena!=nullptr)throw std::logic_error("Knjiga vec zaduzena");
        else {zaduzena=&amp;k;}}
    void RazduziKnjigu(){if(zaduzena==nullptr)throw std::logic_error("Knjiga nije zaduzena");
        else{zaduzena=nullptr;}}
    bool DaLiJeZaduzena(){if(zaduzena==nullptr)return false; return true;}
    void Ispisi()const;
};
void Knjiga::Ispisi()const{
        std::cout&lt;&lt;"Naslov: "&lt;&lt;naslov_knjige&lt;&lt;"\n";
        std::cout&lt;&lt;"Pisac: "&lt;&lt;ime_pisca&lt;&lt;"\n";
        std::cout&lt;&lt;"Zanr: "&lt;&lt;zanr&lt;&lt;"\n";
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;godina_izdavanja&lt;&lt;"\n";
        if(zaduzena!=nullptr){
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;zaduzena-&gt;ime&lt;&lt;" "&lt;&lt;
            zaduzena-&gt;prezime&lt;&lt;"\n";
        }
        
 }
Knjiga::Knjiga(std::string naslov,std::string pisac,std::string zanrr,int godina){
    naslov_knjige=naslov;
    ime_pisca=pisac;
    zanr=zanrr;
    godina_izdavanja=godina;
    zaduzena=nullptr;
}
class Biblioteka{
    std::map&lt;int,Korisnik*&gt; korisnik;
    std::map&lt;int,Knjiga*&gt; knjiga;
    public:
    Biblioteka(){};
    void RegistrirajNovogKorisnika( int clbr,std::string ime,std::string prezime
    ,std::string adresa, std::string br_tel);
    void RegistrirajNovuKnjigu(const int evbr,std::string naslov,std::string ime,
    std::string zanr,int godina);
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;bibl);
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
    Korisnik &amp;NadjiKorisnika(int clbr);
    Knjiga &amp;NadjiKnjigu(int evbr);
    void IzlistajKorisnike()const;
    void IzlistajKnjige()const;
    ~Biblioteka(){
    for(auto itr=korisnik.begin(); itr!=korisnik.end();itr++)delete (itr-&gt;second);
    for(auto itr=knjiga.begin(); itr!=knjiga.end();itr++)delete (itr-&gt;second);
    }
    void ZaduziKnjigu(int evbr,int clbr);
    void RazduziKnjigu(int evbr);
    void PrikaziZaduzenja(int clbr);
    friend bool UporediKorisnika(Korisnik k1,Korisnik k2);
};
Biblioteka::Biblioteka(const Biblioteka &amp;bibl){
    for(auto b =bibl.korisnik.begin(); b != bibl.korisnik.end(); b++){
        auto p=new Korisnik;
        p-&gt;ime=b-&gt;second-&gt;ime;p-&gt;prezime=b-&gt;second-&gt;prezime;p-&gt;adresa=b-&gt;second-&gt;adresa;
        p-&gt;telefon=b-&gt;second-&gt;telefon;
        korisnik.insert(std::make_pair(b-&gt;first,p));
    }
    for(auto b =bibl.knjiga.begin(); b != bibl.knjiga.end(); b++){
        auto p=new Knjiga(b-&gt;second-&gt;DajNaslov(),b-&gt;second-&gt;DajAutora()
        ,b-&gt;second-&gt;DajZanr(),b-&gt;second-&gt;DajGodinuIzdavanja());
        knjiga.insert(std::make_pair(b-&gt;first,p));
    }
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;bibl){
    std::swap(korisnik,bibl.korisnik);
    std::swap(knjiga,bibl.knjiga);
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;bibl){
    delete this;
    for(auto b =bibl.korisnik.begin(); b != bibl.korisnik.end(); b++){
        auto p=new Korisnik;
        p-&gt;ime=b-&gt;second-&gt;ime;p-&gt;prezime=b-&gt;second-&gt;prezime;p-&gt;adresa=b-&gt;second-&gt;adresa;
        p-&gt;telefon=b-&gt;second-&gt;telefon;
        korisnik.insert(std::make_pair(b-&gt;first,p));
    }
    for(auto b =bibl.knjiga.begin(); b != bibl.knjiga.end(); b++){
    auto p=new Knjiga(b-&gt;second-&gt;DajNaslov(),b-&gt;second-&gt;DajAutora()
        ,b-&gt;second-&gt;DajZanr(),b-&gt;second-&gt;DajGodinuIzdavanja());
        knjiga.insert(std::make_pair(b-&gt;first,p));
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;bibl){
    delete this;
        for(auto b =bibl.korisnik.begin(); b != bibl.korisnik.end(); b++){
        auto p=new Korisnik;
        p-&gt;ime=b-&gt;second-&gt;ime;p-&gt;prezime=b-&gt;second-&gt;prezime;p-&gt;adresa=b-&gt;second-&gt;adresa;
        p-&gt;telefon=b-&gt;second-&gt;telefon;
        korisnik.insert(std::make_pair(b-&gt;first,p));
    }
    for(auto b =bibl.knjiga.begin(); b != bibl.knjiga.end(); b++){
        auto p=new Knjiga(b-&gt;second-&gt;DajNaslov(),b-&gt;second-&gt;DajAutora()
        ,b-&gt;second-&gt;DajZanr(),b-&gt;second-&gt;DajGodinuIzdavanja());
        knjiga.insert(std::make_pair(b-&gt;first,p));
    }
    return *this;
}
void Biblioteka::RegistrirajNovogKorisnika(int clbr,std::string ime
,std::string prezime,std::string adresa,std::string br_tel){
    bool sluc=false;
    std::for_each(korisnik.begin(),korisnik.end(),[clbr,&amp;sluc](std::pair&lt;int,Korisnik*&gt; k){
        if(k.first==clbr)sluc=true;
    });
    if(sluc==true)throw std::logic_error("Korisnik vec postoji");
    auto pok=new Korisnik;
    pok-&gt;ime=ime;pok-&gt;prezime=prezime;pok-&gt;adresa=adresa;pok-&gt;telefon=br_tel;
    korisnik.insert(std::make_pair(clbr,pok));
}
void Biblioteka::RegistrirajNovuKnjigu(const int evbr,std::string naslov,std::string ime,
    std::string zanr,int godina){
        bool sluc=false;
            std::for_each(knjiga.begin(),knjiga.end(),[evbr,&amp;sluc](std::pair&lt;int,Knjiga*&gt; k){
        if(k.first==evbr)sluc=true;
        });
        if(sluc==true)throw std::logic_error("Knjiga vec postoji");
        auto pok=new Knjiga(naslov,ime,zanr,godina);
        knjiga.insert(std::make_pair(evbr,pok));
    }
Korisnik &amp;Biblioteka::NadjiKorisnika(const int clbr){
    auto p=korisnik.find(clbr);
    if(p==korisnik.end() &amp;&amp; clbr!=(*korisnik.end()).first){
        throw std::logic_error ("Korisnik nije nadjen");
    }
    return *((*p).second);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(const int evbr){
    auto p=knjiga.find(evbr);
    if(p==knjiga.end() &amp;&amp; evbr!=p-&gt;first){
        throw std::logic_error ("Knjiga nije nadjena");
    }
    return *(*p).second;
}
void Biblioteka::IzlistajKorisnike()const{
    for(auto const &amp;i:korisnik){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i.first&lt;&lt;"\n";
        Ispisi(i.second-&gt;ime,i.second-&gt;prezime,
        i.second-&gt;adresa,i.second-&gt;telefon);std::cout&lt;&lt;"\n";}
}
void Biblioteka::IzlistajKnjige()const{
    for(auto const &amp;i:knjiga){
    std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;"\n";
    i.second-&gt;Ispisi();std::cout&lt;&lt;"\n";}
}
void Biblioteka::ZaduziKnjigu(int evbr,int clbr){
    try{
        NadjiKnjigu(evbr).ZaduziKnjigu(NadjiKorisnika(clbr));
    }
    catch(std::logic_error x){throw x;}
}
void Biblioteka::RazduziKnjigu(int evbr){
    try{
        NadjiKnjigu(evbr).RazduziKnjigu();
    }
    catch(std::logic_error x){throw x;}
}
bool UporediKorisnika(Korisnik k1,Korisnik k2){
    if(k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime
    &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon==k2.telefon)return true;
    return false;
}
void Biblioteka::PrikaziZaduzenja(int clbr){
    bool sluc=false;
    try{
    auto p=NadjiKorisnika(clbr);
    std::for_each(knjiga.begin(),knjiga.end(),[clbr,&amp;sluc,p](std::pair&lt;int,Knjiga*&gt; k){
        if(k.second-&gt;DajKodKogaJe()==nullptr);
        else if(UporediKorisnika(p,*k.second-&gt;DajKodKogaJe())==true){
            sluc=true;
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;k.first&lt;&lt;"\n";
            k.second-&gt;Ispisi();std::cout&lt;&lt;"\n";}
    });}
    catch(std::logic_error x){throw std::logic_error ("Korisnik nije nadjen");}
    if(sluc==false)std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!\n"; 
}
int main ()
{
    Biblioteka Cazin;
    for(;;){
        std::cout&lt;&lt;"Izaberite opciju: \n";
        std::cout&lt;&lt;" 0 - Kraj\n";
        std::cout&lt;&lt;" 1 - Uredjivanje knjiga\n";
        std::cout&lt;&lt;" 2 - Uredjivanje korisnika\n";
        int glavni;
        std::cin&gt;&gt;glavni;
        if(glavni==1){
            for(;;){
             std::cout&lt;&lt;"Izaberite opciju: \n";
             std::cout&lt;&lt;" 0 - Nazad\n";
             std::cout&lt;&lt;" 1 - Dodavanje nove knjige\n";
             std::cout&lt;&lt;" 2 - Zaduzi knjigu\n";
             std::cout&lt;&lt;" 3 - Razduzi knjigu\n";
             std::cout&lt;&lt;" 4 - Izlistaj knjige\n";
             std::cout&lt;&lt;" 5 - Kraj\n";
             int int_knjig;
             std::cin&gt;&gt;int_knjig;
             if(int_knjig==1){
                 for(;;){
                     int evbr,god;
                     std::cout&lt;&lt;"Unesi evidencijski broj knjige: ";
                     std::cin&gt;&gt;evbr;
                     std::cin.ignore(1000,'\n');
                     std::cout&lt;&lt;"Unesite naslov knjige: ";
                     std::string naziv,ime,zanr;
                     std::getline(std::cin,ime,'\n');
                     std::cout&lt;&lt;"Unesite ime pisca: ";
                     std::getline(std::cin,ime,'\n');
                     std::cout&lt;&lt;"Unesite zanr: ";
                     std::getline(std::cin,ime,'\n');
                     std::cout&lt;&lt;"Unesi godinu izdavanja: ";
                     std::cin&gt;&gt;god;
                     try{
                         Cazin.RegistrirajNovuKnjigu(evbr,naziv,ime,zanr,god);
                     }
                     catch(std::logic_error x){
                         std::cout&lt;&lt;"Izuzetak: "&lt;&lt;x.what();
                         continue;
                     }
                     break;
                 }
             }
             if(int_knjig==2){
                 for(;;){
                int evbr,clbr;
                std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                std::cin&gt;&gt;evbr;
                std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
                std::cin&gt;&gt;clbr;
                try{Cazin.ZaduziKnjigu(evbr,clbr);}
                catch(std::logic_error x){
                         std::cout&lt;&lt;"Izuzetak: "&lt;&lt;x.what();
                         continue;
                     }
                break;}
             }
             if(int_knjig==3){
                 for(;;){
                 int evbr;
                 std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                 std::cin&gt;&gt;evbr;
                try{Cazin.RazduziKnjigu(evbr);}
                catch(std::logic_error x){
                         std::cout&lt;&lt;"Izuzetak: "&lt;&lt;x.what();
                         continue;
                     }
                break;
             }
             if(int_knjig==4){
                 Cazin.IzlistajKnjige();
             }
             if(int_knjig==0)break;
             if(int_knjig==5)return 0;
            }
        }
            }
        if(glavni==2){
            for(;;){
                std::cout&lt;&lt;"Izaberite opciju: \n";
                std::cout&lt;&lt;" 0 - Nazad\n";
                std::cout&lt;&lt;" 1 - Dodavanje novog korisnika\n";
                std::cout&lt;&lt;" 2 - Izlistaj korisnike\n";
                std::cout&lt;&lt;" 3 - Izlistaj zaduzenja korisnika\n";
                std::cout&lt;&lt;" 4 - Kraj\n";
                int int_kor;
                std::cin&gt;&gt;int_kor;
                if(int_kor==1){
                    for(;;){
                        int clbr;
                        std::string ime,prezime,adresa,telefon;
                        std::cout&lt;&lt;"Unesi clanski broj korisnika: ";
                        std::cin&gt;&gt;clbr;
                        std::cout&lt;&lt;"Unesi ime korisnika: ";
                        std::cin.ignore(1000,'\n');
                        std::getline(std::cin,ime,'\n');
                        std::cout&lt;&lt;"Unesi prezime korisnika: ";
                        std::getline(std::cin,prezime,'\n');
                        std::cout&lt;&lt;"Unesi adresu korisnika: ";
                        std::getline(std::cin,adresa,'\n');
                        std::cout&lt;&lt;"Unesi broj telefona: ";
                        std::getline(std::cin,telefon,'\n');
                        try{
                            Cazin.RegistrirajNovogKorisnika(clbr,ime,prezime,adresa,telefon);
                        }
                        catch(std::logic_error x){
                            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;x.what();
                            continue;
                        }break;
                    }
                }
                if(int_kor==2){
                    Cazin.IzlistajKorisnike();
                }
                if(int_kor==3){
                    for(;;){std::cout&lt;&lt;"Unesi clanski broj korisnika: ";
                    int clbr;
                    std::cin&gt;&gt;clbr;
                    try{
                        Cazin.PrikaziZaduzenja(clbr);
                    }
                    catch(std::domain_error x){
                        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;x.what();continue;
                    }break;
                    }
                }
                if(int_kor==0)break;
                if(int_kor==4)return 0;
            }
        }
        if(glavni==0)break;
</font>    }
	return 0;
}</pre>
</body>
</html>
