<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1966.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student9358.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};

class Knjiga{
    std::string naslov,pisac,zanr;
    int godina;
<a name="3"></a><font color="#00FFFF"><a href="match337-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    Korisnik *kodkogaje;
    public:
    Knjiga(std::string naslov1,std::string pisac1,std::string zanr1,int godina1){
        naslov=naslov1; pisac=pisac1; zanr=zanr1; godina=godina1;
        kodkogaje=nullptr;
    }
    std::string DajNaslov() {return naslov;}
    std::string DajAutora() {return pisac;}
</font>    std::string DajZanr() {return zanr;}
    int DajGodinuIzdavanja() {return godina;}
    Korisnik *DajKodKogaJe() {return kodkogaje;}
    void ZaduziKnjigu(Korisnik &amp;osoba){
        kodkogaje=&amp;osoba;
    }
    void RazduziKnjigu(){
        kodkogaje=nullptr;
    }
    bool DaLiJeZaduzena(){
        if(kodkogaje!=nullptr) return true;
        return false;
    }
};

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; mapakorisnika;
    std::map&lt;int,Knjiga*&gt; mapaknjiga;
    public:
    ~Biblioteka(){
        for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++)
            delete it-&gt;second;
        for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++)
<a name="0"></a><font color="#FF0000"><a href="match337-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

            delete it-&gt;second;
    }
    void RegistrirajNovogKorisnika(int broj, std::string ime1, std::string prezime1, std::string adresa1, std::string telefon1){
        for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
            if(broj==it-&gt;first) throw std::logic_error("Korisnik vec postoji");
</font>        }
        try{
            Korisnik *novi=new Korisnik;
            novi-&gt;ime=ime1; novi-&gt;prezime=prezime1; novi-&gt;adresa=adresa1; novi-&gt;telefon=telefon1;
            mapakorisnika.insert(std::make_pair(broj,novi));
        }
        catch(...){
<a name="1"></a><font color="#00FF00"><a href="match337-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            throw;
        }
    }
    void RegistrirajNovuKnjigu(int broj, std::string naslov1, std::string pisac1, std::string zanr1, int godina1){
        for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end();it++){
            if(broj==it-&gt;first) throw std::logic_error("Knjiga vec postoji");
</font>        }
        try{
            Knjiga *nova=new Knjiga(naslov1,pisac1,zanr1,godina1);
            mapaknjiga.insert(std::make_pair(broj,nova));
        }
        catch(...){
            throw;
        }
    }
<a name="7"></a><font color="#0000FF"><a href="match337-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Korisnik &amp;NadjiKorisnika(int broj){
        for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
            if(broj==it-&gt;first) {
                return *(it-&gt;second);
</font>            }
            else if(it==--(mapakorisnika.end())) throw std::logic_error("Korisnik nije nadjen");
        }
    }
    
<a name="8"></a><font color="#00FFFF"><a href="match337-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    Knjiga &amp;NadjiKnjigu(int broj){
        for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++){
            if(broj==it-&gt;first) return *(it-&gt;second);
</font>            else if(it==--(mapaknjiga.end())) throw std::logic_error("Knjiga nije nadjena");
        }
        
    }
    
    void IzlistajKorisnike() const{
        for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match337-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    
    void IzlistajKnjige() const{
        for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            if((it-&gt;second)-&gt;DaLiJeZaduzena()){
                auto tmp=((it-&gt;second)-&gt;DajKodKogaJe());
                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;tmp-&gt;ime&lt;&lt;" "&lt;&lt;tmp-&gt;prezime;
            }  
            std::cout&lt;&lt;std::endl;
        }
    }
    
    void ZaduziKnjigu(int evbr, int clbr){
       bool postojiknjiga(false),postojikorisnik(false);
       for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++){                   //provjere ...
            if(it-&gt;first==evbr) {
                postojiknjiga=true;
                if((it-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");   //ako postoji, provjeri je li zaduzena..
                break;                                
            }
        }
        if(!(postojiknjiga)) throw std::logic_error("Knjiga ne postoji");   //ako knjiga nije pronadjena kroz cijelu petlju, bool ce ostati false i baca se izuzetak...
<a name="2"></a><font color="#0000FF"><a href="match337-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++){
            if(it-&gt;first==clbr) {
                postojikorisnik=true;
                break;
            }                               //ako pronadje, znaci da postoji i odmah prekida petlju
        }
        if(!(postojikorisnik)) throw std::logic_error("Korisnik ne postoji");   //analogno kao i za knjigu
        //zaduzivanje
        for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++){
</font>            for(auto it1=mapakorisnika.begin();it1!=mapakorisnika.end();it1++){
                if(it-&gt;first==evbr &amp;&amp; it1-&gt;first==clbr) {             //kad nadje da su isti, postavi pokazivac i izlazi iz petlji
                  (it-&gt;second)-&gt;Knjiga::ZaduziKnjigu(*(it1-&gt;second));
                  break;
                }
            }
        }
    }
    
    void RazduziKnjigu(int evbr){
        for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end();it++){
            if(it-&gt;first==evbr){                                     //ako pronadjemo knjigu u mapi, provjerimo je li zaduzena - ako nije baca se izuzetak, ako jest, postavljamo na nullptr i prekidamo petlju
                if(!((it-&gt;second)-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
                (it-&gt;second)-&gt;Knjiga::RazduziKnjigu();
                break;
            }
        }
    }
    void PrikaziZaduzenja(int clbr) const{
        bool postoji(false),imazaduzenja(false);
        for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
            for(auto it1=mapaknjiga.begin();it1!=mapaknjiga.end();it1++){
                if((it-&gt;first)==clbr){
                    postoji=true;
                    auto temp=(it1-&gt;second)-&gt;DajKodKogaJe();
                    if(it-&gt;second==temp) {
                        imazaduzenja=true;
                        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it1-&gt;first&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Naslov: "&lt;&lt;(it1-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Pisac: "&lt;&lt;(it1-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Zanr: "&lt;&lt;(it1-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it1-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
                        
                    }
                }
            }
        }
        if(!(imazaduzenja)) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
        if(!(postoji)) throw std::logic_error("Korisnik nije nadjen");
    }
};

int main ()
{
   std::cout&lt;&lt;"Izaberite opciju: 1 za registrovanje novog korisnika, 2 za registrovanje nove knjige, \n3 za nalazenje korisnika, 4 za nalazenje knjige, \n5 za zaduzivanje knjige, 6 za razduzivanje knjige, \n7 za izlistavanje zaduzenja, 8 za izlistavanje korisnika, \n9 za izlistavanje knjiga, 0 za kraj:";
   int opcija(1);
   Biblioteka bib;
   int broj;
   while(opcija!=0){
       std::cout&lt;&lt;"\nOpcija: ";
       std::cin&gt;&gt;opcija;
       if(opcija==1){
           std::cout&lt;&lt;"Unesite podatke o korisniku kojeg zelite registrovati: ";
           std::string ime,prezime,adresa,telefon;
           std::cin&gt;&gt;broj;
           std::cin.ignore(1000,'\n');
           std::getline(std::cin, ime);
           std::getline(std::cin,prezime);
           std::getline(std::cin,adresa);
           std::getline(std::cin,telefon);
           try{
               bib.RegistrirajNovogKorisnika(broj,ime,prezime,adresa,telefon);
           }
           catch(std::logic_error izuzetak){
               std::cout&lt;&lt;izuzetak.what();
           }
       }
       else if(opcija==2){
           std::cout&lt;&lt;"Unesite podatke o knjizi koju zelite registrovati: ";
           std::string naslov,pisac,zanr;
           int godina;
           std::cin&gt;&gt;broj;
           std::cin.ignore(1000,'\n');
<a name="6"></a><font color="#00FF00"><a href="match337-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

           std::getline(std::cin, naslov);
           std::getline(std::cin,pisac);
           std::getline(std::cin,zanr);
           std::cin&gt;&gt;godina;
           try{
</font>               bib.RegistrirajNovuKnjigu(broj,naslov,pisac,zanr,godina);
           }
           catch(std::logic_error izuzetak){
               std::cout&lt;&lt;izuzetak.what();
           }
       }
       else if(opcija==3){
           std::cout&lt;&lt;"Unesite clanski broj korisnika kojeg zelite naci: ";
           std::cin&gt;&gt;broj;
           try{
               Korisnik k=bib.NadjiKorisnika(broj);
               std::cout&lt;&lt;k.ime&lt;&lt;" "&lt;&lt;k.prezime&lt;&lt;" "&lt;&lt;k.adresa&lt;&lt;" "&lt;&lt;k.telefon&lt;&lt;std::endl;
           }
           catch(std::logic_error izuzetak){
               std::cout&lt;&lt;izuzetak.what();
           }
       }
       else if(opcija==4){
           std::cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite naci: ";
           std::cin&gt;&gt;broj;
           try{
               Knjiga k=bib.NadjiKnjigu(broj);
               std::cout&lt;&lt;k.DajNaslov()&lt;&lt;" "&lt;&lt;k.DajAutora()&lt;&lt;" "&lt;&lt;k.DajZanr()&lt;&lt;" "&lt;&lt;k.DajGodinuIzdavanja()&lt;&lt;std::endl;
           }
           catch(std::logic_error izuzetak){
               std::cout&lt;&lt;izuzetak.what();
           }
       }
       else if(opcija==5){
           std::cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite zaduziti, i clanski broj korisnika kod kojeg je zelite zaduziti: ";
           int ebr, cbr;
<a name="5"></a><font color="#FF0000"><a href="match337-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

           std::cin&gt;&gt;ebr&gt;&gt;cbr;
           try{
               bib.ZaduziKnjigu(ebr,cbr);
           }
           catch(std::logic_error izuzetak){
               std::cout&lt;&lt;izuzetak.what();
</font>           }
       }
       else if(opcija==6){
<a name="9"></a><font color="#FF00FF"><a href="match337-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

           std::cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite razduziti: ";
           std::cin&gt;&gt;broj;
           try{
               bib.RazduziKnjigu(broj);
           }
           catch(std::logic_error izuzetak){
               std::cout&lt;&lt;izuzetak.what();
</font>           }
       }
       else if(opcija==7){
<a name="10"></a><font color="#FF0000"><a href="match337-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            std::cout&lt;&lt;"Unesite clanski broj korisnika cija zaduzenja zelite prikazati: ";
            std::cin&gt;&gt;broj;
            try{
                bib.PrikaziZaduzenja(broj);
            }
            catch(std::logic_error izuzetak){
                std::cout&lt;&lt;izuzetak.what();
</font>            }
       }
       else if(opcija==8){
           bib.IzlistajKorisnike();
       }
       else if(opcija==9){
           bib.IzlistajKnjige();
       }
       else break;
       
   }
	return 0;
}</pre>
</body>
</html>
