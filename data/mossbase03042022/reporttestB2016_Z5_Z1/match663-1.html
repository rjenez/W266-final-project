<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7001.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3411.cpp<p></p><pre>
/B16/17 (Zadaća 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};

class Knjiga{
    std::string naslov,pisac,zanr;
    int godina;
    Korisnik *pok;
    public:
    Knjiga(std::string naslov,std::string pisac,std::string zanr,int godina);
    std::string DajNaslov() const{return naslov;}
    std::string DajAutora() const{return pisac;}
    std::string DajZanr() const{return zanr;}
    int DajGodinuIzdavanja() const{return godina;}
    Korisnik *DajKodKogaJe() const{return pok;}
    void ZaduziKnjigu(Korisnik &amp;x){pok=&amp;x;}
    void RazduziKnjigu(){pok=nullptr;}
    bool DaLiJeZaduzena() {if(pok!=nullptr) return true; return false;}
};
Knjiga::Knjiga(std::string naslov,std::string pisac,std::string zanr,int godina){
    this-&gt;naslov=naslov;
    this-&gt;pisac=pisac;
    this-&gt;zanr=zanr;
    this-&gt;godina=godina;
    pok=nullptr;
}
class Biblioteka{
    std::map&lt;int, Korisnik*&gt; korisnik;
    std::map&lt;int, Knjiga*&gt; knjiga;
    public:
    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;bibl); //po mogucnosti copy i swap da se ne mora pomjerajući pisat
    Biblioteka(Biblioteka &amp;&amp;bibl);
    Biblioteka &amp;operator=(const Biblioteka &amp;x);//po mogucnosti copy i swap da se ne mora pomjerajući pisat
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;bibl);
    ~Biblioteka();//ne zaboravi da knjiga ima konstrukot;
    void RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string tel);
<a name="1"></a><font color="#00FF00"><a href="match663-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    void RegistrirajNovuKnjigu(int clanski, std::string naslov,std::string pisac,std::string zanr,int godina);
    Korisnik &amp;NadjiKorisnika(int clanski) const;
    Knjiga &amp;NadjiKnjigu(int clanski) const;
    void IzlistajKorisnike() const ;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evidencijski, int clanski);
    void RazduziKnjigu(int evidencijski);
    void PrikaziZaduzenja(int clanski) const;
};
Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;bibl){
</font>    if(&amp;bibl!=this){
        for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second;
        for(auto it=knjiga.begin(); it!=knjiga.end(); it++) {delete (it-&gt;second);}
        korisnik.erase( korisnik.begin(), korisnik.end() );                             //brisanje starog sadrzaja
        knjiga.erase( knjiga.begin(), knjiga.end() );
    }
    for(auto it=bibl.korisnik.begin(); it!=bibl.korisnik.end(); it++){
<a name="6"></a><font color="#00FF00"><a href="match663-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        korisnik[it-&gt;first]=it-&gt;second;
        it-&gt;second=nullptr;
    }
    for(auto it=bibl.knjiga.begin(); it!=bibl.knjiga.end(); it++){
        knjiga[it-&gt;first]=it-&gt;second;
</font>        auto pok((it-&gt;second)-&gt;DajKodKogaJe());
        pok=nullptr;
        it-&gt;second=nullptr;
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;bibl){
    if(&amp;bibl!=this){
        for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second;
        for(auto it=knjiga.begin(); it!=knjiga.end(); it++) {delete (it-&gt;second);}      //u ova 4 reda se vrsi dealociranje
        korisnik.erase( korisnik.begin(), korisnik.end() );                             //i brisanje starih clanova u *this
        knjiga.erase( knjiga.begin(), knjiga.end() );
        for(auto it=bibl.knjiga.begin(); it!=bibl.knjiga.end(); it++){
<a name="4"></a><font color="#FF00FF"><a href="match663-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            this-&gt;RegistrirajNovuKnjigu(it-&gt;first,(it-&gt;second)-&gt;DajNaslov(),(it-&gt;second)-&gt;DajAutora(),(it-&gt;second)-&gt;DajZanr(),(it-&gt;second)-&gt;DajGodinuIzdavanja());
</font>        }
        for(auto it=bibl.korisnik.begin(); it!=bibl.korisnik.end(); it++){
<a name="5"></a><font color="#FF0000"><a href="match663-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            this-&gt;RegistrirajNovogKorisnika(it-&gt;first, (it-&gt;second)-&gt;ime, (it-&gt;second)-&gt;prezime, (it-&gt;second)-&gt;adresa,(it-&gt;second)-&gt;telefon);
</font>        }
    }
    for(auto it1=bibl.korisnik.begin(); it1!=bibl.korisnik.end(); it1++){
        for(auto it=bibl.knjiga.begin(); it!=bibl.knjiga.end(); it++){
            auto osoba((it-&gt;second)-&gt;DajKodKogaJe());
            if(osoba==it1-&gt;second){
                this-&gt;ZaduziKnjigu(it-&gt;first,it1-&gt;first);
            }
        }
    }
    return *this;
}
Biblioteka::Biblioteka(const Biblioteka &amp;bibl){
    for(auto it=bibl.korisnik.begin(); it!=bibl.korisnik.end(); it++){
        this-&gt;RegistrirajNovogKorisnika(it-&gt;first, (it-&gt;second)-&gt;ime, (it-&gt;second)-&gt;prezime, (it-&gt;second)-&gt;adresa,(it-&gt;second)-&gt;telefon);
    }
    for(auto it=bibl.knjiga.begin(); it!=bibl.knjiga.end(); it++){
        this-&gt;RegistrirajNovuKnjigu(it-&gt;first,(it-&gt;second)-&gt;DajNaslov(),(it-&gt;second)-&gt;DajAutora(),(it-&gt;second)-&gt;DajZanr(),(it-&gt;second)-&gt;DajGodinuIzdavanja());
    }
    for(auto it1=bibl.korisnik.begin(); it1!=bibl.korisnik.end(); it1++){
        for(auto it=bibl.knjiga.begin(); it!=bibl.knjiga.end(); it++){
            auto osoba((it-&gt;second)-&gt;DajKodKogaJe());
            if(osoba==it1-&gt;second){                             //zaduzivanje knjige da isti korisnik ima zaduzenu istu knjigu
                this-&gt;ZaduziKnjigu(it-&gt;first,it1-&gt;first);
            }
        }
    }
    
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;bibl){
    for(auto it=bibl.korisnik.begin(); it!=bibl.korisnik.end(); it++){
        korisnik[it-&gt;first]=it-&gt;second;     //preusmjeravamo da *this pokazuje na alocirano mjesto korisnika
        it-&gt;second=nullptr;                 //korisnika postavljamo na nullptr  da ne vrsi kasnije duplo brisanje
    }
    for(auto it=bibl.knjiga.begin(); it!=bibl.knjiga.end(); it++){
        knjiga[it-&gt;first]=it-&gt;second;
        auto pok((it-&gt;second)-&gt;DajKodKogaJe());
        pok=nullptr;
        it-&gt;second=nullptr;
    }
}
Biblioteka::~Biblioteka(){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second;
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) {delete (it-&gt;second);}
}
void Biblioteka::RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string tel){
    auto it(korisnik.find(clanski));
    if(it!=korisnik.end()) throw std::logic_error("Korisnik vec postoji");
    Korisnik *pok(new Korisnik);
    pok-&gt;ime=ime; pok-&gt;prezime=prezime; pok-&gt;adresa=adresa; pok-&gt;telefon=tel;
    korisnik[clanski]=pok;
}
void Biblioteka::RegistrirajNovuKnjigu(int clanski,std::string naslov,std::string pisac,std::string zanr,int godina ){
    auto it(knjiga.find(clanski));
    if(it!=knjiga.end()) throw std::logic_error("Knjiga vec postoji");
    Knjiga *pok(new Knjiga(naslov, pisac, zanr, godina));
    knjiga[clanski]=pok;
}
<a name="0"></a><font color="#FF0000"><a href="match663-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski) const{
    auto it(korisnik.find(clanski));
    if(it==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
    return *(it-&gt;second);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int clanski) const{
    auto it(knjiga.find(clanski));
    if(it==knjiga.end()) throw std::logic_error("Knjiga nije nadjen");
    return *(it-&gt;second);
}
void Biblioteka::IzlistajKorisnike() const{
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
</font>        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const{
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if((it-&gt;second)-&gt;DaLiJeZaduzena()) {
            auto osoba((it-&gt;second)-&gt;DajKodKogaJe());
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;osoba-&gt;ime&lt;&lt;" "&lt;&lt;osoba-&gt;prezime&lt;&lt;std::endl;
        }
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evidencijski, int clanski){
    auto it1(knjiga.find(evidencijski));
    if(it1==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    auto it2(korisnik.find(clanski));
<a name="2"></a><font color="#0000FF"><a href="match663-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    if(it2==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
    if((it1-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    (it1-&gt;second)-&gt;ZaduziKnjigu(*(it2-&gt;second));
}
void Biblioteka::RazduziKnjigu(int evidencijski) {
    auto it1(knjiga.find(evidencijski));
    if(it1==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
</font><a name="3"></a><font color="#00FFFF"><a href="match663-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if(!((it1-&gt;second)-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
    (it1-&gt;second)-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski) const{
    auto it1(korisnik.find(clanski));
    if(it1==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
    int br(0);
</font>    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        auto osoba((it-&gt;second)-&gt;DajKodKogaJe());
        if(osoba==(it1-&gt;second)){
            br++;
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(br==0){
        std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!"&lt;&lt;std::endl;
    }
}
int main (){
    int x;
    Biblioteka bib;
    do{
        std::cout&lt;&lt;"Unesite zeljenu opciju: 1-unos korisnika, 2-unos knjige, 3-pronadji korisnika, 4-nadji knjigu, 5-zaduzi knjigu, 6-razduzi knjigu, 7-prikaz zaduzenja \n";
        std::cin&gt;&gt;x;
        if(x==2){
            int broj(4);
            std::cout&lt;&lt;"Unos knjige//pokazni primjer";
            std::string nas("Juzni Vetar"), pis="Saban", zanr="muzika";
            int god=1976;
            try{
                bib.RegistrirajNovuKnjigu(broj,nas,pis,zanr,god);
            }
            catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
        }
        else if(x==1){
            std::cout&lt;&lt;"Unos korisnika //pokazni primjer\n";
            std::string ime("suljo"), prezime("suljic"), drzv("BIH");
            try{
                bib.RegistrirajNovogKorisnika(43,ime,prezime, drzv, "064569895");
            }
            catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
        }
        else if(x==3){
            std::cout&lt;&lt;"Pronalazak po clanskom broju: \n";
            try{
                Korisnik kor(bib.NadjiKorisnika(43));
                std::cout&lt;&lt;kor.ime&lt;&lt;" "&lt;&lt;kor.prezime&lt;&lt;" "&lt;&lt;kor.adresa;
            }
            catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
        }
            else if(x==4){
                std::cout&lt;&lt;"Pronalazak po evidencijskom broju: \n";
                try{
                    Knjiga k(bib.NadjiKnjigu(4));
                    std::cout&lt;&lt;k.DajNaslov()&lt;&lt;", napisao: "&lt;&lt;k.DajAutora()&lt;&lt;", a zanr: "&lt;&lt;k.DajZanr();
                    
                }
                catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
            }
            else if(x==5){
                std::cout&lt;&lt;"Zaduzivanje knjige: \n";
                try{
                    bib.ZaduziKnjigu(4,43);
                }
                catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
            }
            else if(x==6){
                std::cout&lt;&lt;"Razduzivanje: \n";
                try{
                    bib.RazduziKnjigu(4);
                }
                catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
            }
            else if(x==7){
                std::cout&lt;&lt;"\nIzlistajKorisnike: ";bib.IzlistajKorisnike();
                std::cout&lt;&lt;"\nIzlistajKnjige: ";bib.IzlistajKnjige(); std::cout&lt;&lt;std::endl;
                std::cout&lt;&lt;"Prikaz zaduznja po clanskom: ";
                try{
                    bib.PrikaziZaduzenja(43);
                }
                catch(std::logic_error e){
                std::cout&lt;&lt;e.what();
            }
            }
            
            
        }while(x!=0);
	return 0;
}</pre>
</body>
</html>
