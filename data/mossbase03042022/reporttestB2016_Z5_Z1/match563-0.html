<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1422.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1422.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;

typedef std::string string;

struct Korisnik{
    string ime, prezime, adresa, telefon;
};

class Knjiga{
  private:
  string naslov,ime_pisca,zanr;
  int god_izdavanja;
  Korisnik *zaduzena=nullptr;
  public:
  explicit Knjiga(string n,string i_p,string z,int g): naslov(n), ime_pisca(i_p), zanr(z), god_izdavanja(g) {}
  string DajNaslov() const {return naslov;}
  string DajAutora() const {return ime_pisca;}
  string DajZanr() const {return zanr;}
  int DajGodinuIzdavanja() const {return god_izdavanja;}
  Korisnik *DajKodKogaJe() const {return zaduzena;}
  void ZaduziKnjigu(Korisnik &amp;osoba){zaduzena=&amp;osoba;};
  void RazduziKnjigu(){zaduzena=nullptr;}
  bool DaLiJeZaduzena(){if (zaduzena==nullptr) return false; return true;}
  
};

class Biblioteka{
  private:
  std::map&lt;int,Korisnik*&gt; korisnik;
  std::map&lt;int, Knjiga*&gt; knjiga;
  public:
  Biblioteka(){};
<a name="5"></a><font color="#FF0000"><a href="match563-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  Biblioteka(Biblioteka &amp;b){for(auto it=korisnik.begin();it!=korisnik.end();it++){this-&gt;korisnik[it-&gt;first]=new Korisnik(*it-&gt;second);} for(auto it=knjiga.begin();it!=knjiga.end();it++){this-&gt;knjiga[it-&gt;first]=new Knjiga(*it-&gt;second); } }
</font>  ~Biblioteka(){ for(auto it=korisnik.begin();it!=korisnik.end();it++){ delete it-&gt;second;  } for(auto it=knjiga.begin();it!=knjiga.end();it++) {delete it-&gt;second;} }
  Biblioteka operator=(const Biblioteka &amp;b){
    if(this==&amp;b) return *this;
    for(auto it=korisnik.begin(); it!=korisnik.end();it++){
      delete it-&gt;second;
    }
    for(auto it=knjiga.begin();it!=knjiga.end();it++){
      delete it-&gt;second;
    }
    for(auto it=b.korisnik.begin();it!=b.korisnik.end();it++){
      this-&gt;korisnik[it-&gt;first]=new Korisnik(*it-&gt;second);
    }
    for(auto it=b.knjiga.begin();it!=b.knjiga.end();it++){
      this-&gt;knjiga[it-&gt;first]=new Knjiga(*it-&gt;second);
    }
    return *this;
  }
  void RegistrirajNovogKorisnika(int cl_broj, string ime, string prezime, string adresa, string br_tel);
  void IzlistajKorisnike() const{
    for(auto it=korisnik.begin();it!=korisnik.end();it++){
      std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
      std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
      std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
      std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
      std::cout&lt;&lt;std::endl;
    }
  }
  void RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime_pisca, string zanr,int god_izdavanja);
  void IzlistajKnjige() const {
    for(auto it=knjiga.begin();it!=knjiga.end();it++){
      std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
      std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
      if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
      std::cout&lt;&lt;std::endl;
    }
  }
  
  Korisnik &amp;NadjiKorisnika(int cl_broj);
  Knjiga &amp;NadjiKnjigu(int ev_broj);
  void ZaduziKnjigu(int ev_broj, int cl_broj);
  void RazduziKnjigu(int ev_broj);
  void PrikaziZaduzenja(int cl_broj);
};

void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, string ime, string prezime, string adresa, string br_tel){
  for(auto it=korisnik.begin();it!=korisnik.end();it++){
    if(it-&gt;first==cl_broj) throw std::logic_error("Korisnik vec postoji");
  }
  Korisnik k;
  k.ime=ime; k.prezime=prezime; k.adresa=adresa; k.telefon=br_tel;
  korisnik[cl_broj]=new Korisnik(k);
}

void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime_pisca, string zanr,int god_izdavanja){
  for(auto it=knjiga.begin();it!=knjiga.end();it++){
    if(it-&gt;first==ev_broj) throw std::logic_error("Knjiga vec postoji");
  }
  Knjiga k(naslov,ime_pisca,zanr,god_izdavanja);
  knjiga[ev_broj]=new Knjiga(k);
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int cl_broj){
  if(korisnik.find(cl_broj)==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
  auto it(korisnik.find(cl_broj));
  return *(it-&gt;second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj){
  if(knjiga.find(ev_broj)==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
  auto it(knjiga.find(ev_broj));
  return *(it-&gt;second);
}

void Biblioteka::ZaduziKnjigu(int ev_broj,int cl_broj){
  if(knjiga.find(ev_broj)==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
  if(korisnik.find(cl_broj)==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
  auto knj(knjiga.find(ev_broj));
  if(knj-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga je vec zaduzena");
  auto kor(korisnik.find(cl_broj));
  knj-&gt;second-&gt;ZaduziKnjigu(*(kor-&gt;second));
}

void Biblioteka::RazduziKnjigu(int ev_broj){
  if(knjiga.find(ev_broj)==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
  auto knj(knjiga.find(ev_broj));
  if(!(knj-&gt;second-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
  knj-&gt;second-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int cl_broj){
  bool ima(false);
    if(korisnik.find(cl_broj)==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
    for(auto it=knjiga.begin();it!=knjiga.end();it++){
    if(it-&gt;second-&gt;DajKodKogaJe()==korisnik[cl_broj]) ima=true;
  }
  if(ima==false) throw std::logic_error("Nema zaduzenja za tog korisnika!");
  IzlistajKnjige(); 
}

int main (){
 try{
    int n;
<a name="4"></a><font color="#FF00FF"><a href="match563-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Biblioteka b;
    do{
    std::cout&lt;&lt;"Odaberite opciju: "&lt;&lt;std::endl;
    std::cout&lt;&lt;"1: REGISTRACIJA NOVOG KORISNIKA"&lt;&lt;std::endl;
    std::cout&lt;&lt;"2: REGISTRACIJA NOVE KNJIGE"&lt;&lt;std::endl;
</font>    std::cout&lt;&lt;"3: PRONALAZAK ZELJENOG KORISNIKA"&lt;&lt;std::endl;
    std::cout&lt;&lt;"4: PRONALAZAK ZELJENE KNJIGE"&lt;&lt;std::endl;
    std::cout&lt;&lt;"5: ZADUZIVANJE KNJIGE"&lt;&lt;std::endl;
    std::cout&lt;&lt;"6: RAZDUZIVANJE KNJIGE"&lt;&lt;std::endl;
    std::cout&lt;&lt;"7: PRIKAZ ZADUZENJA"&lt;&lt;std::endl;
    std::cout&lt;&lt;"8: ISPIS KORISNIKA"&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match563-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    std::cout&lt;&lt;"9: ISPIS KNJIGA"&lt;&lt;std::endl;
    std::cout&lt;&lt;"0: IZLAZAK IZ PROGRAMA"&lt;&lt;std::endl;
    std::cin&gt;&gt;n;
    if(n==1){
      int cl_br;
</font>      string ime, prezime,adresa,tel;
      std::cout&lt;&lt;"REGISTRACIJA NOVOG KORISNIKA"&lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match563-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

      std::cout&lt;&lt;"Clanski broj: "&lt;&lt;std::endl; std::cin&gt;&gt;cl_br;
      std::cout&lt;&lt;"Ime: "&lt;&lt;std::endl;
      std::cin&gt;&gt;ime;
      std::cout&lt;&lt;"Prezime: "&lt;&lt;std::endl;
      std::cin&gt;&gt;prezime;
      std::cout&lt;&lt;"Adresa stanovanja: "&lt;&lt;std::endl;
      std::cin&gt;&gt;adresa;
      std::cout&lt;&lt;"Kontakt telefon: "&lt;&lt;std::endl;
      std::cin&gt;&gt;tel;
      b.RegistrirajNovogKorisnika(cl_br,ime,prezime,adresa,tel);
</font>      std::cout&lt;&lt;"Korisnik registriran!"&lt;&lt;std::endl;
    }
    else if(n==2){
      int ev_br,god;
      string naslov, pisac,zanr;
      std::cout&lt;&lt;"REGISTRACIJA NOVE KNJIGE"&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match563-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

      std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;std::endl; std::cin&gt;&gt;ev_br;
      std::cout&lt;&lt;"Naslov: "&lt;&lt;std::endl; 
      std::cin&gt;&gt;naslov;
      std::cout&lt;&lt;"Autor: "&lt;&lt;std::endl; 
      std::cin&gt;&gt;pisac;
      std::cout&lt;&lt;"Zanr: "&lt;&lt;std::endl; 
      std::cin&gt;&gt;zanr;
      std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;std::endl; std::cin&gt;&gt;god;
      b.RegistrirajNovuKnjigu(ev_br,naslov,pisac,zanr,god);
</font>      std::cout&lt;&lt;"Knjiga registrirana!"&lt;&lt;std::endl;
    }
    else if(n==3){
      int cl_br;
      std::cout&lt;&lt;"PRONALAZAK ZELJENOG KORISNIKA"&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match563-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

      std::cout&lt;&lt;"Unesite clanski broj korisnika kojeg trazite: "&lt;&lt;std::endl;
      std::cin&gt;&gt;cl_br;
      b.NadjiKorisnika(cl_br);
    }
    else if(n==4){
      int ev_br;
      std::cout&lt;&lt;"PRONALAZAK ZELJENE KNJIGE"&lt;&lt;std::endl;
      std::cout&lt;&lt;"Unesite evidencijski broj knjige koju trazite: "&lt;&lt;std::endl;
</font>      std::cin&gt;&gt;ev_br;
      b.NadjiKnjigu(ev_br);
    }
    else if(n==5){
      int ev_br,cl_br;
      std::cout&lt;&lt;"ZADUZIVANJE KNJIGE"&lt;&lt;std::endl;
      std::cout&lt;&lt;"Unesite evidencijski broj knjige i clanski broj korisnika koji je zaduzuje: "&lt;&lt;std::endl;
      std::cin&gt;&gt;ev_br; std::cin&gt;&gt;cl_br;
      b.ZaduziKnjigu(ev_br,cl_br);
      std::cout&lt;&lt;"Knjiga zaduzena!"&lt;&lt;std::endl;
    }
    else if(n==6){
      int ev_br;
      std::cout&lt;&lt;"RAZDUZIVANJE KNJIGE"&lt;&lt;std::endl;
      std::cout&lt;&lt;"Unesite evidencijski broj knjige koju treba razduziti: "&lt;&lt;std::endl;
      std::cin&gt;&gt;ev_br;
      b.RazduziKnjigu(ev_br);
      std::cout&lt;&lt;"Knjiga razduzena!"&lt;&lt;std::endl;
    }
    else if(n==7){
      int cl_br;
      std::cout&lt;&lt;"PRIKAZ ZADUZENJA"&lt;&lt;std::endl;
      std::cout&lt;&lt;"Unesite clanski broj korisnika cija zaduzenja trazite: "&lt;&lt;std::endl;
      std::cin&gt;&gt;cl_br;
      b.PrikaziZaduzenja(cl_br);
    }
    else if(n==8){
      b.IzlistajKorisnike();
    }
    else if(n==9){
      b.IzlistajKnjige();
    }
    else{
 
      std::cout&lt;&lt;"Pogresan unos! Pokusajte ponovo."&lt;&lt;std::endl;
    }
    std::cout&lt;&lt;std::endl;
    } while(n!=0);
  }
  catch(std::logic_error izuzetak){
    std::cout&lt;&lt;izuzetak.what();
  }
  return 0;
}</pre>
</body>
</html>
