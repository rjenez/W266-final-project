<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4766.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4766.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik{
  std::string ime,prezime,adresa,telefon;
};
class Knjiga{
  std::string naslov,imePisca,zanr;
  int god;
  Korisnik *k = nullptr;
  public:
    Knjiga(std::string naslov,std::string imePisca,std::string zanr, int god):
    naslov(naslov),imePisca(imePisca),zanr(zanr),god(god){ }
    std::string DajNaslov()const{ return naslov; }
    std::string DajAutora()const{ return imePisca; }
    std::string DajZanr()const{ return zanr; }
    int DajGodinuIzdavanja()const{ return god; }
    Korisnik *DajKodKogaJe()const{return k; }
<a name="4"></a><font color="#FF00FF"><a href="match700-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    void ZaduziKnjigu( Korisnik &amp;x){ k = &amp;x; }
    void RazduziKnjigu(){ k = nullptr; }
    bool DaLiJeZaduzena(){ return k; }
};
class Biblioteka{
    std::map&lt;int,Korisnik*&gt; clanovi;
    std::map&lt;int,Knjiga*&gt; knjige;
</font>    public:
        Biblioteka(){ }
        void RegistrirajNovogKorisnika(int br,std::string ime,std::string prezime,
            std::string adresa,std::string telefon);
        void RegistrirajNovuKnjigu(int br, std::string naslov, std::string imeP,
            std::string zanr, int god);
        ~Biblioteka(){
            for(auto &amp;p:clanovi) delete p.second;
            for(auto &amp;p:knjige) delete p.second;
        }
        Biblioteka &amp;operator=(const Biblioteka &amp;b);
        Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
        Biblioteka (const Biblioteka &amp;b){ *this = b; }
        Biblioteka(Biblioteka &amp;&amp;b) {*this = b; }
        Korisnik &amp;NadjiKorisnika(int br)const;
        Knjiga &amp;NadjiKnjigu(int br)const;
        void IzlistajKorisnike()const;
        void IzlistajKnjige()const;
        void ZaduziKnjigu(int evNum, int clNum);
        void RazduziKnjigu(int evNum);
        void PrikaziZaduzenja(int clNum)const;
};
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b){
    for(auto &amp;p:knjige) delete p.second; 
<a name="5"></a><font color="#FF0000"><a href="match700-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    for(auto &amp;p:clanovi) delete p.second;
    knjige = std::move(b.knjige);
    clanovi = std::move(b.clanovi);
    return *this;
</font><a name="3"></a><font color="#00FFFF"><a href="match700-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){
    
    std::map&lt;int,Knjiga*&gt; knjigee;
    std::map&lt;int,Korisnik*&gt; clanovii;
    try{
        for(auto &amp;p:b.knjige)
</font>            knjigee[p.first] = new Knjiga(p.second-&gt;DajNaslov(),p.second-&gt;DajAutora(),
            p.second-&gt;DajZanr(),p.second-&gt;DajGodinuIzdavanja());
<a name="1"></a><font color="#00FF00"><a href="match700-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        for(auto &amp;p:b.clanovi){
            clanovii[p.first] = new Korisnik;
            clanovii[p.first] -&gt;ime = p.second-&gt;ime;
            clanovii[p.first]-&gt; prezime = p.second-&gt;prezime;
            clanovii[p.first]-&gt;adresa = p.second-&gt;adresa;
            clanovii[p.first]-&gt;telefon = p.second-&gt;telefon;
</font>        }
        for(auto &amp;p:clanovi) delete p.second;
        for(auto &amp;p:knjige) delete p.second;
        knjige = std::move(knjigee);
        clanovi = std::move(clanovii);
    }catch(...){
        for(auto &amp;p:clanovii) delete p.second;
        for(auto &amp;p:knjigee) delete p.second;
        throw;
    }
    return *this;
}
void Biblioteka::PrikaziZaduzenja(int clNum)const{
    try{
        Korisnik &amp;k(NadjiKorisnika(clNum)); int num(0);
        for(auto &amp;p:knjige){
            if(p.second-&gt;DajKodKogaJe() == &amp;k){
                std::cout &lt;&lt; "\nEvidencijksi broj: " &lt;&lt; p.first &lt;&lt; std::endl &lt;&lt;
                "Naslov: " &lt;&lt; p.second-&gt;DajNaslov() &lt;&lt; "\nPisac: " &lt;&lt; p.second-&gt;DajAutora()
                &lt;&lt; "\nZanr: " &lt;&lt; p.second-&gt;DajZanr() &lt;&lt; "\nGodina izdavanja: " &lt;&lt;
                p.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                num++;
            }
        }
        if(!num) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl; 
    }catch(std::logic_error err){
        std::cout &lt;&lt; err.what() &lt;&lt; std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evNum, int clNum){
    try{
        auto &amp;book(NadjiKnjigu(evNum)); auto &amp;k(NadjiKorisnika(clNum));
        if(book.DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        book.ZaduziKnjigu(k);
    }catch(std::logic_error err){
        std::cout &lt;&lt; err.what()&lt;&lt;std::endl;
    }
}
void Biblioteka::RazduziKnjigu(int evNum){
    try{
        auto book(NadjiKnjigu(evNum));
        if(!book.DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        book.RazduziKnjigu();
    }catch(std::logic_error err){
        std::cout &lt;&lt; err.what() &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKorisnike()const{
    for(auto &amp;p:clanovi){
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; p.first &lt;&lt; "\nIme i prezime: " &lt;&lt;
        p.second-&gt;ime &lt;&lt; " " &lt;&lt; p.second-&gt;prezime &lt;&lt; "\nAdresa: " &lt;&lt; p.second-&gt;adresa
        &lt;&lt; "\nBroj telefona: " &lt;&lt; p.second-&gt;telefon &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige()const{
    for(auto &amp;p:knjige){
        std::cout &lt;&lt; "\nEvidencijski broj: " &lt;&lt; p.first &lt;&lt; "\nNaslov: " &lt;&lt;
        p.second-&gt;DajNaslov() &lt;&lt; "\nPisac: " &lt;&lt; p.second-&gt;DajAutora() &lt;&lt; 
        "\nZanr: " &lt;&lt; p.second-&gt;DajZanr() &lt;&lt; "\nGodina izdavanja: " &lt;&lt;
        p.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if(p.second-&gt;DaLiJeZaduzena())
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt;
            p.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;p.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;"\n";
    }
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int br)const{
    if(clanovi.find(br) == clanovi.end()) throw std::logic_error("Korisnik nije nadjen");
    return *(clanovi.find(br)-&gt;second);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int br)const{
    auto p(knjige.find(br));
    if(p == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
<a name="2"></a><font color="#0000FF"><a href="match700-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    return *(p-&gt;second);
}
void Biblioteka::RegistrirajNovuKnjigu(int br, std::string naslov, std::string imeP,
    std::string zanr, int god){
    if(knjige.find(br) != knjige.end()) throw std::logic_error("Knjiga vec postoji");
    knjige[br] = new Knjiga(naslov,imeP,zanr,god);
</font>}
<a name="0"></a><font color="#FF0000"><a href="match700-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int br,std::string ime,std::string prezime,
    std::string adresa,std::string telefon){
    if(clanovi.find(br)!= clanovi.end()) throw std::logic_error("Korisnik vec postoji");
    clanovi[br] = new Korisnik;
    clanovi[br]-&gt;ime = ime; clanovi[br]-&gt;prezime = prezime;
    clanovi[br]-&gt;adresa = adresa; clanovi[br]-&gt;telefon = telefon;
</font>}
Biblioteka vrati(){
    Biblioteka z;
    return z;
}
int main () {
    Korisnik k;
    k.ime = "a"; k.prezime = "b"; k.adresa = "c"; k.telefon = "nemam";
    
    Knjiga b("a","b","c",10);
    std::cout &lt;&lt; b.DajAutora() &lt;&lt; b.DajNaslov() &lt;&lt; b.DajZanr() &lt;&lt;
    b.DajGodinuIzdavanja() &lt;&lt; b.DajKodKogaJe();
    b.ZaduziKnjigu(k);
    b.RazduziKnjigu();
    if(b.DaLiJeZaduzena()) std::cout &lt;&lt;std::endl &lt;&lt; "jest";
    
    Biblioteka l;
    l.RegistrirajNovogKorisnika(1,"ime","prezime","adrsa","tel");
    l.RegistrirajNovuKnjigu(2,"naslo","imeP","zanr", 100);
    auto x = l;
    l = x;
    x = vrati();
    Biblioteka zzz(vrati());
    Biblioteka kkkkk(x);
    auto korisnik = l.NadjiKorisnika(1);
    auto knjizurina = l.NadjiKnjigu(2);
    l.IzlistajKorisnike();
    l.IzlistajKnjige();
    l.ZaduziKnjigu(2,1);
    l.RazduziKnjigu(2);
    l.PrikaziZaduzenja(1);
	return 0;
}</pre>
</body>
</html>
