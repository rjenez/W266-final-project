<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3671.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3671.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match170-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_20.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;

struct Korisnik {
  std::string ime;
  std::string prezime;
  std::string adresa;
  std::string telefon;
};

class Knjiga {
  std::string naslov, ime_pisca, zanr;
  int godina_izdavanja;
  Korisnik *zaduzenje = nullptr;
  public:
  Knjiga(std::string n, std::string ip, std::string z, int gi){
    naslov = n; ime_pisca = ip; zanr = z; godina_izdavanja = gi; 
  }
  std::string DajNaslov() const {
    return naslov;
  }
  std::string DajAutora() const {
    return ime_pisca;
  }
  std::string DajZanr() const {
    return zanr;
  }
  int DajGodinuIzdavanja() const {
    return godina_izdavanja;
  }
  bool DaLiJeZaduzena(){
    if(zaduzenje == nullptr)
      return false;
    else return true;
  }
  void ZaduziKnjigu(Korisnik &amp;k){
    zaduzenje = &amp;k;
  }
  void RazduziKnjigu(){
    zaduzenje = nullptr;
  }
  Korisnik *DajKodKogaJe() const {
    return zaduzenje; 
  };
  
};
typedef std::map&lt;int, Knjiga*&gt; MapaKnjiga;
typedef std::map&lt;int, Korisnik*&gt; MapaKorisnika;
class Biblioteka {
    MapaKnjiga mapaKnjiga;
    MapaKorisnika mapaKorisnika;
    void IzlistajKnjigu (std::pair&lt;int, Knjiga*&gt; i, bool kodKogaJe = true) const {
      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i.first &lt;&lt; std::endl;
      std::cout &lt;&lt; "Naslov: " &lt;&lt; i.second-&gt;DajNaslov() &lt;&lt; std::endl;
      std::cout &lt;&lt; "Pisac: " &lt;&lt; i.second-&gt;DajAutora() &lt;&lt; std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match170-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_65.gif"/></a>

      std::cout &lt;&lt; "Zanr: " &lt;&lt; i.second-&gt;DajZanr() &lt;&lt; std::endl;
      std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; i.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
      if (kodKogaJe) {
        if (i.second-&gt;DaLiJeZaduzena()) {
          std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; i.second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; i.second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
        } else {
          std::cout &lt;&lt; std::endl;
        }
      }
    }
    public:
    Biblioteka () {}
    Biblioteka(const Biblioteka &amp;biblioteka) {
      for (auto i : biblioteka.mapaKorisnika) {
        mapaKorisnika[i.first] = new Korisnik(*(i.second));
      }
    }
    Biblioteka(Biblioteka &amp;&amp;biblioteka) {
      mapaKnjiga = biblioteka.mapaKnjiga;
      mapaKorisnika = biblioteka.mapaKorisnika;
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;biblioteka) {
      if (this == &amp;biblioteka) {
        return *this;
      }
      for (auto i : mapaKorisnika) {
        delete i.second;
        mapaKorisnika.erase(i.first);
      }
      for (auto i : biblioteka.mapaKorisnika) {
        mapaKorisnika[i.first] = new Korisnik(*i.second);
      }
      return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;biblioteka) {
      mapaKnjiga = biblioteka.mapaKnjiga;
      mapaKorisnika = biblioteka.mapaKorisnika;
      return *this;
    }
    ~Biblioteka() {
      for (auto i : mapaKnjiga) {
        delete i.second;
      }
      for (auto i : mapaKorisnika) {
        delete i.second;
      }
    }
    void RegistrirajNovogKorisnika (int broj, std::string ime, std::string prezime, std::string adresa, std::string brojTel) {
      for (auto i : mapaKorisnika) {
        if (i.first == broj) {
          throw std::logic_error ("Korisnik vec postoji");
        }
      }
      mapaKorisnika[broj] = new Korisnik{ime, prezime, adresa, brojTel};

    }
    void RegistrirajNovuKnjigu (int broj, std::string naslov, std::string pisac, std::string zanr, int godine) {
      for (auto i : mapaKnjiga) {
        if (i.first == broj) {
          throw std::logic_error ("Knjiga vec postoji");
        }
      }
      mapaKnjiga[broj] = new Knjiga(naslov, pisac, zanr, godine);
    }
    Korisnik &amp;NadjiKorisnika (int broj) const {
      for (auto i : mapaKorisnika) {
        if (i.first == broj) {
          return *i.second;
        }
      }
      throw std::logic_error ("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu (int broj) const {
      for (auto i : mapaKnjiga) {
        if (i.first == broj) {
          return *i.second;
        }
      }
      throw std::logic_error ("Knjiga nije nadjena");
    }
    void IzlistajKnjige () const {
      for (auto i : mapaKnjiga) {
        IzlistajKnjigu(i);
      }
    }
    void IzlistajKorisnike () const {
      for (auto i : mapaKorisnika) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; i.first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; i.second-&gt;ime &lt;&lt; " " &lt;&lt; i.second-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; i.second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; i.second-&gt;telefon &lt;&lt; std::endl &lt;&lt; std::endl;
      }
    }
    void ZaduziKnjigu(int brojKnjige, int brojKorisnika) {
      auto knjiga = mapaKnjiga.find(brojKnjige);
      if (knjiga == mapaKnjiga.end()) {
        throw std::logic_error("Knjiga nije nadjena");
      }
      if (knjiga-&gt;second-&gt;DaLiJeZaduzena()) {
        throw std::logic_error("Knjiga vec zaduzena");
      }
      auto korisnik = mapaKorisnika.find(brojKorisnika);
      if (korisnik == mapaKorisnika.end()) {
        throw std::logic_error("Korisnik nije nadjen");
      }
      knjiga-&gt;second-&gt;ZaduziKnjigu(*(korisnik-&gt;second));
    }
    void RazduziKnjigu(int broj) {
      auto knjiga = mapaKnjiga.find(broj);
      if (knjiga == mapaKnjiga.end()) {
        throw std::logic_error("Knjiga nije nadjena");
      }
      if (!knjiga-&gt;second-&gt;DaLiJeZaduzena()) {
        throw std::logic_error("Knjiga nije zaduzena");
      }
      (*(knjiga-&gt;second)).RazduziKnjigu();
    }
    void PrikaziZaduzenja (int broj) const {
      auto korisnik = mapaKorisnika.find(broj);
      int n(0);
      if (korisnik == mapaKorisnika.end()) {
        throw std::logic_error("Korisnik nije nadjen");
      }
      for (auto i : mapaKnjiga) {
        if ((*(i.second)).DajKodKogaJe() == korisnik-&gt;second) {
          IzlistajKnjigu(i, false);
          std::cout &lt;&lt; std::endl;
          n++;
        }
      }
      if (n == 0) {
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
      }
      
    }
};

int main ()
{
  try {
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
    "Zmaja od Bosne 30", "032/444-555");
    b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
    "Trg neznalica 111", "030/111-222");
    b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
</font>    "Studenata etfovaca 3b", "037/654-321");
    b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
<a name="2"></a><font color="#0000FF"><a href="match170-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

    b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
    b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
    b.ZaduziKnjigu(231, 1234);
    b.ZaduziKnjigu(136, 1234);
    b.PrikaziZaduzenja(1234);
  }
  catch (const char error[]) {
    std::cout &lt;&lt; error &lt;&lt; std::endl;
  }
  catch (std::logic_error error) {
    std::cout &lt;&lt; error.what() &lt;&lt; std::endl;
  }
  
    
	return 0;
</font>}</pre>
</body>
</html>
