<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4682.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4682.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};
class Knjiga{
    std::string naslov,pisac,zanr;
    int godina;
    Korisnik *korisnik = nullptr;
    public:
    Knjiga(std::string nasl, std::string pis, std::string zan, int god): naslov(nasl),pisac(pis),zanr(zan),godina(god){}
    std::string DajNaslov() const { return naslov;}
    std::string DajAutora() const {return pisac;}
    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina;}
    Korisnik *&amp;DajKodKogaJe() {return korisnik;}
    void ZaduziKnjigu(Korisnik &amp;kor){
        korisnik = &amp;kor;
    }
    void RazduziKnjigu(){
        korisnik = nullptr;
    }
    bool DaLiJeZaduzena(){
        if(!korisnik) return false;
        return true;
    }
};
class Biblioteka{
    std::map&lt;int,Korisnik*&gt; korisnik;
    std::map&lt;int,Knjiga*&gt; knjiga;
    public:
    Biblioteka(){};
    Biblioteka(Biblioteka &amp;bibl);
    Biblioteka(Biblioteka &amp;&amp;bibl);
    Biblioteka &amp;operator =(Biblioteka &amp;bibl);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;bibl);
    ~Biblioteka(){
        for(auto it(korisnik.begin()); it != korisnik.end(); it++)
            delete it-&gt;second;
        for(auto it(knjiga.begin()); it != knjiga.end(); it++)
            delete it-&gt;second;
    }
    void RegistrirajNovogKorisnika(int clanskibr, std::string ime, std::string prezime, std::string adresa, std::string broj);
    void RegistrirajNovuKnjigu(int evidencija, std::string naslov, std::string pisac ,std::string zanr, int godina);
    Korisnik &amp;NadjiKorisnika(int clanskibr);
    Knjiga &amp;NadjiKnjigu(int evidencija);
    void IzlistajKnjige() const;
    void IzlistajKorisnike() const;
    void ZaduziKnjigu(int evidencija, int clanskibr);
    void RazduziKnjigu(int evidencija);
    void PrikaziZaduzenja(int clanskibr);
};
int main ()
{
    std::cout&lt;&lt;"Dobrodosli!"&lt;&lt;std::endl&lt;&lt;std::endl&lt;&lt;"Odaberite opciju: "&lt;&lt;std::endl;
    while(true){
<a name="4"></a><font color="#FF00FF"><a href="match721-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::cout&lt;&lt;"1)Registrirajte novog korisnika"&lt;&lt;std::endl&lt;&lt;"2)Novu knjigu"&lt;&lt;std::endl&lt;&lt;"3)Izlistaj Korisnike"&lt;&lt;std::endl&lt;&lt;"4)Izlistaj Knjige"&lt;&lt;std::endl&lt;&lt;"5)Zaduzi knjigu"&lt;&lt;std::endl&lt;&lt;"6)Prikazi Zaduzenja"&lt;&lt;std::endl&lt;&lt;"7)Nadji nekoga"&lt;&lt;std::endl&lt;&lt;"8)Razduzi Knjigu: "&lt;&lt;std::endl&lt;&lt;"0)Kraj programa"&lt;&lt;std::endl;
    int n,a;
</font>    std::string ime,prezime,telefon,adresa;
    Biblioteka biblioteka;
    std::cin&gt;&gt;n;
    try{
    switch(n){
        case 0: return 0;
        case 1:
        std::cout&lt;&lt;"Unesite clanski broj, ime, prezime, adresu i broj telefona"&lt;&lt;std::endl;
        std::cin&gt;&gt;n;
        std::cin.ignore(10000,'\n');
        std::cin&gt;&gt;ime&gt;&gt;prezime&gt;&gt;adresa&gt;&gt;telefon;
        biblioteka.RegistrirajNovogKorisnika(n,ime,prezime,adresa,telefon);
        break;
        case 2:
        std::cout&lt;&lt;"Unesite evidencijski broj,naslov, ime autora, zanr i kada je izdata"&lt;&lt;std::endl;
        std::cin&gt;&gt;n;
        std::cin.ignore(10000,'\n');
        std::cin&gt;&gt;ime&gt;&gt;prezime&gt;&gt;adresa&gt;&gt;a;
        biblioteka.RegistrirajNovuKnjigu(n,ime,prezime,adresa,a);
        break;
        case 3:
        biblioteka.IzlistajKorisnike();
        break;
        case 4:
        biblioteka.IzlistajKnjige();
        break;
        case 5:
        std::cout&lt;&lt;"Unesite evidencjski broj knjige i clanski broj korisnika"&lt;&lt;std::endl;
        std::cin&gt;&gt;n&gt;&gt;a;
        biblioteka.ZaduziKnjigu(n,a);
        break;
        case 6:
        std::cout&lt;&lt;"Unesite broj osobe za koja zelit evidjeti zaduzenja"&lt;&lt;std::endl;
        std::cin&gt;&gt;n;
        biblioteka.PrikaziZaduzenja(n);
        break;
        case 7:
        std::cout&lt;&lt;"Za trazenje knjige unesite 1, za trazenje osobe unesite 2"&lt;&lt;std::endl;
        std::cin&gt;&gt;n;
        if(n == 1){
            std::cout&lt;&lt;"Unesite evidencijski broj"&lt;&lt;std::endl;
            std::cin&gt;&gt;a;
            Knjiga b = biblioteka.NadjiKnjigu(a);
            std::cout&lt;&lt;b.DajNaslov()&lt;&lt;std::endl&lt;&lt;b.DajAutora()&lt;&lt;std::endl&lt;&lt;b.DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;b.DajZanr()&lt;&lt;std::endl;
        }
        if(n == 2){
            std::cout&lt;&lt;"Unesite clanski broj"&lt;&lt;std::endl;
            std::cin&gt;&gt;a;
            Korisnik b = biblioteka.NadjiKorisnika(a);
            std::cout&lt;&lt;b.ime&lt;&lt;" "&lt;&lt;b.prezime&lt;&lt;" "&lt;&lt;std::endl&lt;&lt;b.adresa&lt;&lt;std::endl&lt;&lt;b.telefon;
        }
        break;
        case 8:
            std::cout&lt;&lt;"Unesite evidencijski broj knjige koju razduzujete"&lt;&lt;std::endl;
            std::cin&gt;&gt;a;
            biblioteka.RazduziKnjigu(a);
            break;
        
    }
    }catch(...){
        std::cout&lt;&lt;"Pogresan unos"&lt;&lt;std::endl;
    }
    }
	return 0;
}
Biblioteka::Biblioteka(Biblioteka &amp;bibl){
    for(auto it(bibl.korisnik.begin()); it!= bibl.korisnik.end(); it++){
        korisnik[it-&gt;first] = new Korisnik(*(it-&gt;second));
    }
    for(auto it(bibl.knjiga.begin()); it!= bibl.knjiga.end(); it++){
        knjiga[it-&gt;first] = new Knjiga(*(it-&gt;second));
    }
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;bibl){
    std::swap(korisnik,bibl.korisnik);
    std::swap(knjiga,bibl.knjiga);
}
Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;bibl){

    for(auto it(bibl.korisnik.begin()); it!= bibl.korisnik.end(); it++){
        korisnik[it-&gt;first] = new Korisnik(*(it-&gt;second));
    }
    for(auto it(bibl.knjiga.begin()); it!= bibl.knjiga.end(); it++){
        knjiga[it-&gt;first] = new Knjiga(*(it-&gt;second));
    }
<a name="1"></a><font color="#00FF00"><a href="match721-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    return *this;
}
Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;bibl){
    std::swap(korisnik,bibl.korisnik);
    std::swap(knjiga,bibl.knjiga);
    return *this;
}
void Biblioteka::RegistrirajNovogKorisnika(int clanskibr, std::string ime, std::string prezime, std::string adresa, std::string telefon){
</font>    auto it(korisnik.find(clanskibr));
    if(it != korisnik.end())
        throw std::logic_error("Korisnik vec postoji");
    korisnik[clanskibr] = new Korisnik;
    korisnik[clanskibr]-&gt;ime = ime,korisnik[clanskibr]-&gt;prezime = prezime,korisnik[clanskibr]-&gt;adresa = adresa, korisnik[clanskibr]-&gt;telefon = telefon;
}
<a name="5"></a><font color="#FF0000"><a href="match721-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

void Biblioteka::RegistrirajNovuKnjigu(int evidencija, std::string naslov, std::string pisac, std::string zanr, int godina){
    auto it(knjiga.find(evidencija));
</font>    if(it != knjiga.end())
        throw std::logic_error("Knjiga vec postoji");
    knjiga[evidencija] = new Knjiga(naslov,pisac,zanr,godina);
}
<a name="0"></a><font color="#FF0000"><a href="match721-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibr){
    auto it(korisnik.find(clanskibr));
    if(it == korisnik.end())
        throw std::logic_error("Korisnik nije nadjen");
    return *(korisnik[clanskibr]);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencija){
    auto it(knjiga.find(evidencija));
    if(it == knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
    return *(knjiga[evidencija]);
}
void Biblioteka::IzlistajKnjige() const{
    for(auto it(knjiga.begin()); it != knjiga.end(); it++){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;" "&lt;&lt;std::endl
</font>    &lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
    if(it-&gt;second-&gt;DajKodKogaJe())
        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
    std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKorisnike() const{
<a name="6"></a><font color="#00FF00"><a href="match721-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    for(auto it(korisnik.begin()); it != korisnik.end(); it++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl
</font><a name="3"></a><font color="#00FFFF"><a href="match721-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        &lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int evidencija, int clanskibr){
    auto it(knjiga.find(evidencija));
    if(it == knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
</font>    if(it -&gt;second-&gt; DajKodKogaJe() != nullptr)
        throw std::logic_error("Knjiga vec zaduzena");
    auto it2(korisnik.find(clanskibr));
    if(it2 == korisnik.end())
        throw std::logic_error("Korisnik nije nadjen");
<a name="2"></a><font color="#0000FF"><a href="match721-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    knjiga[evidencija]-&gt;DajKodKogaJe() = korisnik[clanskibr];
}
void Biblioteka::RazduziKnjigu(int evidencija){
    auto it(knjiga.find(evidencija));
    if(it == knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
    if(it -&gt;second-&gt; DajKodKogaJe() == nullptr)
        throw std::logic_error("Knjiga nije zaduzena");
</font>    knjiga[evidencija]-&gt;DajKodKogaJe() = nullptr;
}
void Biblioteka::PrikaziZaduzenja(int clanskibr){
    auto it(korisnik.find(clanskibr));
    if(it == korisnik.end())
        throw std::logic_error("Korisnik nije nadjen");
    for(auto it(knjiga.begin()); it != knjiga.end(); it++){
        if(it-&gt;second-&gt;DajKodKogaJe() == korisnik[clanskibr])
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;" "&lt;&lt;std::endl
    &lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
    return;
    }
    throw std::logic_error("Nema zaduzenja za tog korisnika!");
}</pre>
</body>
</html>
