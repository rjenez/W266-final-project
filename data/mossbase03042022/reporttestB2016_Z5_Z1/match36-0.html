<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3047.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3047.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

struct Korisnik
{
<a name="2"></a><font color="#0000FF"><a href="match36-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    std::string ime, prezime, adresa, telefon;
};



class Knjiga
{
    std::string naslov, ime_pisca, zanr;  
    int gi;
    Korisnik* k = nullptr;
public:
    Knjiga(const std::string&amp; n, const std::string&amp; ip, const std::string&amp; zanr, int gi)  
        : naslov(n), ime_pisca(ip), zanr(zanr), gi(gi){}
    
    std::string DajNaslov() const
    {
        return naslov;
    }
    
    std::string DajAutora() const
    {
        return ime_pisca;
</font>    }
    
    std::string DajZanr() const
    {
        return zanr;
    }
    int DajGodinuIzdavanja()const
    {
        return gi;
    }
    
<a name="0"></a><font color="#FF0000"><a href="match36-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_67.gif"/></a>

    Korisnik* DajKodKogaJe()const
    {
        return k;
    }
    
    void ZaduziKnjigu(Korisnik&amp; ko)
    {
        k = &amp;ko;
    }
    
    void RazduziKnjigu()
    {
        k = nullptr;
    }
    
    bool DaLiJeZaduzena() const
    {
        return k != nullptr;
    }
    
};


class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
    
    void ObrisiMemoriju();
    
public:
    ~Biblioteka()
    {
        ObrisiMemoriju();
    }
    Biblioteka() = default;
    Biblioteka(const Biblioteka&amp; b);
    Biblioteka(Biblioteka&amp;&amp; b)
    {
        korisnici = std::move(b.korisnici);
        knjige = std::move(b.knjige);
        b.knjige.clear();
        b.korisnici.clear();
    }
    Biblioteka&amp; operator=(Biblioteka&amp;&amp;);
    Biblioteka&amp; operator=(const Biblioteka&amp;);
    
    void RegistrirajNovogKorisnika(int cb, const std::string&amp; i, const std::string&amp; p, const std::string&amp; a, const std::string bt);
    
    void RegistrirajNovuKnjigu(int eb, const std::string&amp; n, const std::string&amp; ip, const std::string&amp; zanr, int gi);
    
    Korisnik&amp; NadjiKorisnika(int eb) const;
    
    Knjiga&amp; NadjiKnjigu(int eb) const;
    
    void IzlistajKnjige()const;
    
    void IzlistajKorisnike()const;
    
    void ZaduziKnjigu(int, int);
    
    void RazduziKnjigu(int);
    
    void PrikaziZaduzenja(int) const;
};

void IspisiKnjigu(const Knjiga&amp; k)
{
    std::cout &lt;&lt; "Naslov: " &lt;&lt; k.DajNaslov();
    std::cout &lt;&lt; "\nPisac: " &lt;&lt; k.DajAutora();
    std::cout &lt;&lt; "\nZanr: " &lt;&lt; k.DajZanr();
    std::cout &lt;&lt; "\nGodina izdavanja: " &lt;&lt; k.DajGodinuIzdavanja() &lt;&lt; "\n\n";    
}

void Biblioteka::PrikaziZaduzenja(int ebko) const
{
    const auto&amp; korisnik = NadjiKorisnika(ebko);
    bool zaduzen = false;    
    for(const auto&amp; e : knjige)
    {
        if( (e.second)-&gt;DajKodKogaJe() == &amp;korisnik )
        {
            zaduzen = true;
            const auto&amp; k = *(e.second);
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; e.first;
            std::cout &lt;&lt; "\nNaslov: " &lt;&lt; k.DajNaslov();
            std::cout &lt;&lt; "\nPisac: " &lt;&lt; k.DajAutora();
            std::cout &lt;&lt; "\nZanr: " &lt;&lt; k.DajZanr();
            std::cout &lt;&lt; "\nGodina izdavanja: " &lt;&lt; k.DajGodinuIzdavanja() &lt;&lt; "\n\n";    
        }
        
    }
    if(zaduzen == false)
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika";
    
}

void Biblioteka::RazduziKnjigu(int ebk)
{
    auto&amp; knjiga = NadjiKnjigu(ebk);
    if(!knjiga.DaLiJeZaduzena())
        throw std::logic_error("Knjiga nije zaduzena");
    knjiga.RazduziKnjigu();
}

void Biblioteka::ZaduziKnjigu(int ebk, int ebko)
{
    auto&amp; knjiga = NadjiKnjigu(ebk);
    auto&amp; korisnik = NadjiKorisnika(ebko);
    if(knjiga.DaLiJeZaduzena())
        throw std::logic_error("Knjiga vec zaduzena");
    knjiga.ZaduziKnjigu(korisnik);
}

void Biblioteka::IzlistajKorisnike()const
{
    for(const auto&amp; e : korisnici)
    {
        const auto&amp; k = *(e.second);
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; e.first;
        std::cout &lt;&lt; "\nIme i prezime: " &lt;&lt; k.ime &lt;&lt; " " &lt;&lt; k.prezime;
        std::cout &lt;&lt; "\nAdresa: " &lt;&lt; k.adresa;
        std::cout &lt;&lt; "\nBroj telefona: " &lt;&lt; k.telefon &lt;&lt; "\n\n";
    }
}

void Biblioteka::IzlistajKnjige()const
{
    for(const auto&amp; e : knjige)
    {
        const auto&amp; k = *(e.second);
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; e.first;
        std::cout &lt;&lt; "\nNaslov: " &lt;&lt; k.DajNaslov();
        std::cout &lt;&lt; "\nPisac: " &lt;&lt; k.DajAutora();
        std::cout &lt;&lt; "\nZanr: " &lt;&lt; k.DajZanr();
        std::cout &lt;&lt; "\nGodina izdavanja: " &lt;&lt; k.DajGodinuIzdavanja() &lt;&lt; "\n";
        if(k.DaLiJeZaduzena())
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; k.DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; k.DajKodKogaJe()-&gt;prezime &lt;&lt; "\n";
        std::cout &lt;&lt; "\n";
    }
}

Knjiga&amp; Biblioteka::NadjiKnjigu(int eb) const
{
    auto it = knjige.find(eb);
    if(it == knjige.end())
        throw std::logic_error("Knjiga nije nadjen");
    return *(it-&gt;second);
}


Korisnik&amp; Biblioteka::NadjiKorisnika(int eb) const
{
    auto it = korisnici.find(eb);
    if(it == korisnici.end())
        throw std::logic_error("Korisnik nije nadjen");
    return *(it-&gt;second);
}

void Biblioteka::RegistrirajNovuKnjigu(int eb, const std::string&amp; n, const std::string&amp; ip, const std::string&amp; zanr, int gi)
{
    if(knjige.find(eb) != knjige.end())
        throw std::logic_error("Knjiga vec postoji");
    knjige[eb] = new Knjiga( n, ip, zanr, gi );
}

void Biblioteka::RegistrirajNovogKorisnika(int cb, const std::string&amp; i, const std::string&amp; p, const std::string&amp; a, const std::string bt)
{
    if(korisnici.find(cb) != korisnici.end())
        throw std::logic_error("Korisnik vec postoji");
    korisnici[cb] = new Korisnik( {i, p, a, bt} );
    
}

Biblioteka&amp; Biblioteka::operator=(const Biblioteka&amp; b)
{
    if(this == &amp;b)
        return *this;
    ObrisiMemoriju();
    
    for(auto it = b.korisnici.begin(); it != b.korisnici.end(); ++it)
        korisnici[it-&gt;first] = new Korisnik(*(it-&gt;second));
        
    for(auto it = b.knjige.begin(); it != b.knjige.end(); ++it)
        knjige[it-&gt;first] = new Knjiga(*(it-&gt;second));
        
    return *this;
}


Biblioteka&amp; Biblioteka::operator=(Biblioteka&amp;&amp; b)
{
    if(this == &amp;b)
        return *this;
    ObrisiMemoriju();
    korisnici = std::move(b.korisnici);
    knjige = std::move(b.knjige);
    b.knjige.clear();
    b.korisnici.clear();
    
    return *this;
}

void Biblioteka::ObrisiMemoriju()
{
    for(auto e : korisnici)
        delete e.second;
    for(auto e : knjige)
        delete e.second;
    korisnici.clear();
    knjige.clear();
}

Biblioteka::Biblioteka(const Biblioteka&amp; b) : Biblioteka()
{
    
    for(auto it = b.korisnici.begin(); it != b.korisnici.end(); ++it)
        korisnici[it-&gt;first] = new Korisnik(*(it-&gt;second));
        
    for(auto it = b.knjige.begin(); it != b.knjige.end(); ++it)
        knjige[it-&gt;first] = new Knjiga(*(it-&gt;second));
    
}

void IspisiKorisnika(const Korisnik&amp; k)
{
    std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; k.ime &lt;&lt; " " &lt;&lt; k.prezime;
    std::cout &lt;&lt; "\nAdresa: " &lt;&lt; k.adresa;
    std::cout &lt;&lt; "\nBroj telefona: " &lt;&lt; k.telefon &lt;&lt; "\n\n";
}

int main ()
{
	Biblioteka libary;
	for (;;) {
		std::cout &lt;&lt; "MENI:\n1. Registruj clana\n2. Registruj knjigu\n3. Nadjite clana\n4. Nadjite knjigu\n5. Prikazi sve clanove\n";
		std::cout &lt;&lt; "6. Prikazi sve knjige\n7. Zaduzi knjigu\n8. Razduzi knjigu\n9. Prikazi zaduzenja\n10. Izlaz\nIzaberite: ";
		int izbor;
		std::cin &gt;&gt; izbor;
		std::cin.ignore (10000, '\n');
		if (izbor == 1) {
			int EBC;
			std::cout &lt;&lt; "Unesite evidencijski broj clana: ";
			std::cin &gt;&gt; EBC;
			std::cin.ignore (10000, '\n');
			std::string ime, prezime, adresa, broj_telefona;
			std::cout &lt;&lt; "Unesite ime: ";
			std::getline (std::cin, ime);
			std::cout &lt;&lt; "Unesite prezime: ";
</font>			std::getline (std::cin, prezime);
			std::cout &lt;&lt; "Unesite adresu: ";
<a name="1"></a><font color="#00FF00"><a href="match36-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_25.gif"/></a>

			std::getline (std::cin, adresa);
			std::cout &lt;&lt; "Unesite broj teleofona: ";
			std::getline (std::cin, broj_telefona);
			try {
				libary.RegistrirajNovogKorisnika (EBC, ime, prezime, adresa, broj_telefona);
			} catch (std::domain_error e) {
				std::cout &lt;&lt; e.what();
				continue;
			}
			std::cout &lt;&lt; "Uspjesno ste unijeli clana!\n";
			continue;
		}
		if (izbor == 2) {
			int EBK, GI;
			std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
			std::cin &gt;&gt; EBK;
			std::cout &lt;&lt; "Unesite godinu izdavanja: ";
			std::cin &gt;&gt; GI;
			std::cin.ignore (10000, '\n');
			std::cout &lt;&lt; "Unsite ime pisca: ";
			std::string ime_pisca, zanr, naslov;
			std::getline (std::cin, ime_pisca);
			std::cout &lt;&lt; "Unsite ime zanr: ";
			std::getline (std::cin, zanr);
			std::cout &lt;&lt; "Unsite ime naslov: ";
			std::getline (std::cin, naslov);
			try {
				libary.RegistrirajNovuKnjigu (EBK, naslov, ime_pisca, zanr, GI);
			} catch (std::domain_error e) {
				std::cout &lt;&lt; e.what();
				continue;
			}
			std::cout &lt;&lt; "Uspjesno ste dodali knjigu!\n";
			continue;
		}
		if (izbor == 3) {
			std::cout &lt;&lt; "Unsite evidencijski broj clana kojeg zelite naci: ";
			int EBC;
			std::cin &gt;&gt; EBC;
			std::cout &lt;&lt; "Informacije o clanu:\n";
			try {
				IspisiKorisnika(libary.NadjiKorisnika (EBC));
			} catch (std::domain_error r) {
				std::cout &lt;&lt; r.what();
				continue;
			}
		}
		if (izbor == 4) {
			std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
			int EBK;
			std::cin &gt;&gt; EBK;
			std::cout &lt;&lt; "Informacije o knjizi:\n";
			try {
				IspisiKnjigu(libary.NadjiKnjigu (EBK));
			} catch (std::domain_error r) {
				std::cout &lt;&lt; r.what();
				continue;
			}
			continue;
		}
		if (izbor == 5) {
			libary.IzlistajKorisnike();
			continue;
		}
		if (izbor == 6) {
			libary.IzlistajKnjige();
			continue;
		}
		if (izbor == 7) {
			std::cout &lt;&lt; "Unesite evidencijski broj clana: ";
			int EBC;
			std::cin &gt;&gt; EBC;
			std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
			int EBK;
			std::cin &gt;&gt; EBK;
			try {
				libary.ZaduziKnjigu (EBK, EBC);
			} catch (std::domain_error e) {
				std::cout &lt;&lt; e.what();
				continue;
			}
			std::cout &lt;&lt; "Zaduzili ste knjigu!\n";
			continue;
		}
		if (izbor == 8) {
			std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
			int EBK;
			std::cin &gt;&gt; EBK;
			try {
				libary.RazduziKnjigu (EBK);
			} catch (std::domain_error e) {
				std::cout &lt;&lt; e.what();
				continue;
			}
			std::cout &lt;&lt; "Uspjesno ste razduzili knjigu!\n";
			continue;
		}
		if (izbor == 9) {
			std::cout &lt;&lt; "Unesite evidencijski broj clana: ";
			int EBC;
			std::cin &gt;&gt; EBC;
			try {
				std::cout &lt;&lt; "Zaduzenja clana su:\n";
				libary.PrikaziZaduzenja (EBC);
			} catch (std::domain_error e) {
				std::cout &lt;&lt; e.what();
				continue;
			}
			continue;
		}
		if (izbor == 10)
			break;
</font>	}
	return 0;
}</pre>
</body>
</html>
