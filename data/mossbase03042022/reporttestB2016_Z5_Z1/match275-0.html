<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2664.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2664.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match275-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

/B16/17 (Zadaća 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include&lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
using namespace std;
struct Korisnik{
    string ime, prezime, adresa,telefon;
};
class Knjiga{
    string naslov_knjige,ime_pisca,zanr;
    int godina_izdavanja;
    Korisnik *zaduzenje;
</font>    public:
    Knjiga(string n_k, string i_p, string z, int g_i): zaduzenje(nullptr) { //konstruktor sa 4 parametra
        naslov_knjige=n_k;
        ime_pisca=i_p;
        zanr=z;
        godina_izdavanja=g_i;
}
    void Postavi(string n_k, string i_p, string z, int g_i){ 
        naslov_knjige=n_k;
        ime_pisca=i_p;
        zanr=z;
        godina_izdavanja=g_i;
        zaduzenje=nullptr;
    }
    string DajNaslov() const{ return naslov_knjige;}
    string DajAutora() const{ return ime_pisca;}
    string DajZanr() const { return zanr;}
    int DajGodinuIzdavanja() const { return godina_izdavanja;}
    Korisnik *DajKodKogaJe() const { return zaduzenje;}
    void ZaduziKnjigu (Korisnik &amp;k) { zaduzenje=&amp;k;} // postavlja pokazivac zaduzenje na korisnika koji poslan kao parametar
    void RazduziKnjigu() { zaduzenje=nullptr;} // postavlja pokazivac na nullptr jer je korisnik razduzio knjigu
<a name="5"></a><font color="#FF0000"><a href="match275-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    bool DaLiJeZaduzena(){ if(zaduzenje==nullptr) return false; else return true;} //vraca 0 ako nije zaduzena, 1 ako je zaduzena
};
class Biblioteka{
    map&lt;int, Korisnik*&gt; korisnik; //atributi mape, gdje je kljuc identifikacioni broj, a pridruzena vrijednost dinamicki alocirani objekat
    map&lt;int, Knjiga*&gt; knjiga; 
    public:
    Biblioteka(); //Objekti tipa “Biblioteka” moraju se moći kreirati ne navodeći nikakve dopunske informacije
    Biblioteka(const Biblioteka &amp;b); // kopirajuci konstruktor
</font>    Biblioteka &amp;operator=(const Biblioteka &amp;b); // operator dodjele
<a name="2"></a><font color="#0000FF"><a href="match275-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    ~Biblioteka(); //destruktor
    void RegistrirajNovogKorisnika(int clanskibr, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu(int evidencijskibr, string naslov_knjige, string ime_pisca, string zanr, int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int clanskibr);
    Knjiga &amp;NadjiKnjigu(int evidencijskibr);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const; 
    void ZaduziKnjigu(int evidencijskibr, int clanskibr);
    void RazduziKnjigu(int evidencijskibr);
    void PrikaziZaduzenja(int clanskibr);
};
Biblioteka::Biblioteka(){ //konstruktor bez parametra
</font>    Korisnik* k=new Korisnik;
    (*k).ime="\0";
    (*k).prezime="\0";
    (*k).adresa="\0";
    (*k).telefon="\0";
    Knjiga* k1=new Knjiga("\0","\0","\0",0);
    delete k;
    delete k1;
}
Biblioteka::Biblioteka(const Biblioteka &amp;b){ //kopirajuci konstruktor
    try{
    for(auto it=b.korisnik.begin(); it!=b.korisnik.end(); it++){
        Korisnik* k=new Korisnik;
        (*k).ime=it-&gt;second-&gt;ime;
        (*k).prezime=it-&gt;second-&gt;prezime;
        (*k).adresa=it-&gt;second-&gt;adresa;
        (*k).telefon=it-&gt;second-&gt;telefon;
        pair&lt;int,Korisnik*&gt;p(it-&gt;first, k);
        korisnik.insert(p);
    }
    for(auto it=b.knjiga.begin(); it!=b.knjiga.end(); it++){
        Knjiga* k=new Knjiga(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja());
        pair&lt;int,Knjiga*&gt;p(it-&gt;first, k);
        knjiga.insert(p);
    }
    }
    catch(...){
    for(auto it=b.korisnik.begin(); it!=b.korisnik.end(); it++) delete it-&gt;second; 
    for(auto it=b.knjiga.begin(); it!=b.knjiga.end(); it++) delete it-&gt;second;
    throw;
    }
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){ // operator dodjele
if(korisnik.size()&lt;b.korisnik.size()){
   try{
    Korisnik* k=new Korisnik;
    for(auto i=korisnik.size(); i&lt;b.korisnik.size(); i++){
        auto it1=b.korisnik.begin();
        (*k).ime=it1-&gt;second-&gt;ime;
        (*k).prezime=it1-&gt;second-&gt;prezime;
        (*k).adresa=it1-&gt;second-&gt;adresa;
        (*k).telefon=it1-&gt;second-&gt;telefon;
        pair&lt;int,Korisnik*&gt;p(it1-&gt;first, k);
        auto it=korisnik.end();
        korisnik.insert(it,p);
        it1++;
        it++;
    }
    delete k;
   }
   catch(...){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second;  
    throw;
   }
}
else {
   for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second; 
}
if(korisnik.size()&lt;b.korisnik.size()){
    try{
    for(auto i=knjiga.size(); i&lt;b.knjiga.size(); i++){
        auto it1=b.knjiga.begin();
        Knjiga* k=new Knjiga(it1-&gt;second-&gt;DajNaslov(),it1-&gt;second-&gt;DajAutora(),it1-&gt;second-&gt;DajZanr(),it1-&gt;second-&gt;DajGodinuIzdavanja());
        pair&lt;int,Knjiga*&gt;p(it1-&gt;first, k);
        auto it=knjiga.end();
        knjiga.insert(it,p);
        it1++;
        it++;
    }
    }
    catch(...){
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) delete it-&gt;second;
    throw;
}
}
else {
<a name="1"></a><font color="#00FF00"><a href="match275-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

   for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second; 
}
    return *this;
}
Biblioteka::~Biblioteka(){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++) delete it-&gt;second; 
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) delete it-&gt;second;
}
void Biblioteka::RegistrirajNovogKorisnika(int clanskibr, string ime, string prezime, string adresa, string telefon){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
            if(it-&gt;first==clanskibr) throw logic_error ("Korisnik vec postoji");
</font>        }
    try{
        Korisnik* k=new Korisnik;
        (*k).ime=ime;
        (*k).prezime=prezime;
        (*k).adresa=adresa;
        (*k).telefon=telefon;
        pair&lt;int,Korisnik*&gt;p(clanskibr, k);
        korisnik.insert(p);
    }
<a name="3"></a><font color="#00FFFF"><a href="match275-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    catch(...){ throw;}
}
void Biblioteka::RegistrirajNovuKnjigu(int evidencijskibr, string naslov_knjige, string ime_pisca, string zanr, int godina_izdavanja){
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
            if(it-&gt;first==evidencijskibr) throw logic_error ("Knjiga vec postoji");}
</font>      try{
        Knjiga* k;
        k=new Knjiga(naslov_knjige, ime_pisca, zanr, godina_izdavanja);
        pair&lt;int,Knjiga*&gt;p(evidencijskibr, k);
        knjiga.insert(p);
    }
    catch(...){ throw;}
}
Korisnik k;
<a name="7"></a><font color="#0000FF"><a href="match275-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibr){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++) if(it-&gt;first==clanskibr) {
    k.ime=it-&gt;second-&gt;ime;
</font>    k.prezime=it-&gt;second-&gt;prezime;
    k.adresa=it-&gt;second-&gt;adresa;
    k.telefon=it-&gt;second-&gt;telefon;
    return k;
    }
    throw logic_error("Korisnik nije nadjen");
}
Knjiga k1("\0","\0","\0",0);
<a name="8"></a><font color="#00FFFF"><a href="match275-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

 Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijskibr){
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) if(it-&gt;first==evidencijskibr){ 
     k1.Postavi(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja());
</font><a name="0"></a><font color="#FF0000"><a href="match275-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

    return k1;
 }
 throw logic_error("Knjiga nije nadjena");
 }
 void Biblioteka::IzlistajKorisnike()const {
     for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
         cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
         cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
         cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
         cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
         cout&lt;&lt;endl;
     }
 }
 void Biblioteka::IzlistajKnjige() const{
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
</font>        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="6"></a><font color="#00FF00"><a href="match275-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()==1){
</font>            Korisnik *k=it-&gt;second-&gt;DajKodKogaJe();
         cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;k-&gt;ime&lt;&lt;" "&lt;&lt;k-&gt;prezime&lt;&lt;endl;}
        cout&lt;&lt;endl;
 }
 }
Korisnik k2;
void Biblioteka::ZaduziKnjigu(int evidencijskibr, int clanskibr){
int jeste=0;
for(auto it1=korisnik.begin(); it1!=korisnik.end(); it1++){
    jeste=0;
    if(clanskibr==it1-&gt;first) {
        k2.ime=it1-&gt;second-&gt;ime;
        k2.prezime=it1-&gt;second-&gt;prezime;
        k2.adresa=it1-&gt;second-&gt;adresa;
        k2.telefon=it1-&gt;second-&gt;telefon;
        jeste=1; break;
    }
}
if(jeste==0) throw logic_error("Korisnik nije nadjen");
jeste=0;
for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        if(evidencijskibr==it-&gt;first){
            jeste=1;
            if(it-&gt;second-&gt;DaLiJeZaduzena()==1) throw logic_error("Knjiga vec zaduzena");
            it-&gt;second-&gt;ZaduziKnjigu(k2); break;}
}
if(jeste==0) throw logic_error("Knjiga nije nadjena");
}
void Biblioteka::RazduziKnjigu(int evidencijskibr){
    int jeste=0;
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        jeste=0;
        if(it-&gt;first==evidencijskibr){
            jeste=1;
            if(it-&gt;second-&gt;DaLiJeZaduzena()==0) throw logic_error("Knjiga nije zaduzena");
            it-&gt;second-&gt;RazduziKnjigu(); break;}
    }
     if(jeste==0) throw logic_error("Knjiga nije nadjena");
}
void Biblioteka::PrikaziZaduzenja(int clanskibr){
    int jeste=0;
    Korisnik k;
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
    jeste=0;
    if(it-&gt;first==clanskibr){
        jeste=1;
        k.ime=it-&gt;second-&gt;ime;
        k.prezime=it-&gt;second-&gt;prezime;
        k.adresa=it-&gt;second-&gt;adresa;
        k.telefon=it-&gt;second-&gt;telefon;
        break;
    }
    }
    if(jeste==0) throw logic_error("Korisnik nije nadjen");
    jeste=0;
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        if(it-&gt;second-&gt;DaLiJeZaduzena()){
          Korisnik *k1=it-&gt;second-&gt;DajKodKogaJe(); 
          if(k1-&gt;ime==k.ime &amp;&amp; k1-&gt;prezime==k.prezime) { jeste=1; 
      cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        cout&lt;&lt;endl;
          }
        }
    }
    if(jeste==0) cout&lt;&lt;"Nema zaduzenja za tog korisnika!"&lt;&lt;endl;
}

int main ()
{
Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata etfovaca 3b", "037/654-321");
b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
Biblioteka b2(b);                                           
b2.PrikaziZaduzenja(4312);
	return 0;
}</pre>
</body>
</html>
