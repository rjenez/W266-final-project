<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6707.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1758.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

struct Korisnik {   
    std::string ime, prezime, adresa, telefon;    
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *pok;
public:
    Knjiga (std::string n, std::string i_p, std::string z, int g_i) : naslov(n), ime_pisca(i_p), zanr(z), godina_izdavanja(g_i), pok(nullptr) {}
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return ime_pisca; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    Korisnik *DajKodKogaJe() const { return pok; }
    void ZaduziKnjigu(Korisnik &amp;korisnik) { pok=&amp;korisnik; }
    void RazduziKnjigu() { pok=nullptr; }
    bool DaLiJeZaduzena() const { if(pok==nullptr) return false; return true; }
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
    Biblioteka() {}
    ~Biblioteka();
    Biblioteka(Biblioteka &amp;biblioteka);
    Biblioteka operator=(Biblioteka &amp;biblioteka);
    Biblioteka(Biblioteka &amp;&amp;biblioteka);
    Biblioteka operator=(Biblioteka &amp;&amp;biblioteka);
    void RegistrirajNovogKorisnika(int clanski_broj, std::string i, std::string p, std::string a, std::string br_t);
    void RegistrirajNovuKnjigu(int broj_knjige, std::string n, std::string i_p, std::string z, int g_i);
    Korisnik &amp;NadjiKorisnika(int clanski_broj) const;
    Knjiga &amp;NadjiKnjigu(int broj_knjige) const;
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int broj_knjige, int clanski_broj);
    void RazduziKnjigu(int broj_knjige);
    void PrikaziZaduzenja(int clanski_broj) const;
};

Biblioteka::~Biblioteka() {
    for(auto x: korisnici) {
        delete x.second;
    }
    for(auto x: knjige) {
        delete x.second;
    }
}

Biblioteka::Biblioteka(Biblioteka &amp;biblioteka) {
    for(auto x: biblioteka.korisnici) {  
        korisnici.insert(std::make_pair(x.first, new Korisnik(*(x.second))));
    }
    for(auto x: biblioteka.knjige) {
        knjige.insert(std::make_pair(x.first, new Knjiga(*(x.second))));
    }
}

Biblioteka Biblioteka::operator=(Biblioteka &amp;biblioteka) {
    for(auto x: biblioteka.korisnici) {
        korisnici.insert(std::make_pair(x.first, new Korisnik(*(x.second))));
        biblioteka.korisnici.erase(x.first);
    }
    for(auto x: biblioteka.knjige) {
        knjige.insert(std::make_pair(x.first, new Knjiga(*(x.second))));
        biblioteka.knjige.erase(x.first);
    }
    return *this;
}

Biblioteka::Biblioteka(Biblioteka &amp;&amp;biblioteka) {
    swap(korisnici, biblioteka.korisnici);
    swap(knjige, biblioteka.knjige);
}

Biblioteka Biblioteka::operator=(Biblioteka &amp;&amp;biblioteka) {
    swap(korisnici, biblioteka.korisnici);
    swap(knjige, biblioteka.knjige);
    return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string i, std::string p, std::string a, std::string br_t) {
    auto it(korisnici.find(clanski_broj));
    if(it!=korisnici.end()) {
        throw std::logic_error("Korisnik vec postoji");
    }
    Korisnik k;
    k.ime=i; k.prezime=p; k.adresa=a; k.telefon=br_t;
    Korisnik *pk=&amp;k;
    korisnici.insert(std::make_pair(clanski_broj, new Korisnik(*(pk))));
}

void Biblioteka::RegistrirajNovuKnjigu(int broj_knjige, std::string n, std::string i_p, std::string z, int g_i) {
    auto it(knjige.find(broj_knjige));
    if(it!=knjige.end()) {
        throw std::logic_error("Knjiga vec postoji");
    }
    Knjiga k(n, i_p, z, g_i);
    Knjiga *pk=&amp;k;
    knjige.insert(std::make_pair(broj_knjige, new Knjiga(*(pk))));
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) const {
<a name="7"></a><font color="#0000FF"><a href="match745-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    auto it(korisnici.find(clanski_broj));
    if(it==korisnici.end()) {
        throw std::logic_error("Korisnik nije nadjen");
    }
    return *it-&gt;second;
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int broj_knjige) const {
</font><a name="5"></a><font color="#FF0000"><a href="match745-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    auto it(knjige.find(broj_knjige));
    if(it==knjige.end()) {
        throw std::logic_error("Knjiga nije nadjena");
    }
    return *it-&gt;second;
}

void Biblioteka::IzlistajKorisnike() const {
    for (auto x: korisnici) {
</font>        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; x.first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; x.second-&gt;ime &lt;&lt; " " &lt;&lt; x.second-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; x.second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; x.second-&gt;telefon &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::IzlistajKnjige() const {
    for(auto x: knjige) {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; x.second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; x.second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; x.second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; x.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        auto pok=x.second-&gt;DajKodKogaJe();
        if(pok!=nullptr) {
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; pok-&gt;ime &lt;&lt; " " &lt;&lt; pok-&gt;prezime &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; std::endl;
    }
}

<a name="6"></a><font color="#00FF00"><a href="match745-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

void Biblioteka::ZaduziKnjigu(int broj_knjige, int clanski_broj) {
    auto it1(knjige.find(broj_knjige));
    if(it1==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    auto it2(korisnici.find(clanski_broj));
</font>    if(it2==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    if((it1-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    else (it1-&gt;second)-&gt;ZaduziKnjigu(*korisnici[clanski_broj]);
}

<a name="4"></a><font color="#FF00FF"><a href="match745-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

void Biblioteka::RazduziKnjigu(int broj_knjige) {
    auto it1(knjige.find(broj_knjige));
    if(it1==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    if((it1-&gt;second)-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
</font>    (it1-&gt;second)-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) const {
    auto it(korisnici.find(clanski_broj));
    if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    bool zaduzen(false);
    for(auto x: knjige) {
        if(x.second-&gt;DajKodKogaJe()==it-&gt;second) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; x.second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; x.second-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; x.second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; x.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
            zaduzen=true;
        }
    }
    if(zaduzen==false) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
}

int main () {
    Biblioteka b;
    while(1) {
        std::cout &lt;&lt; "Izaberite opciju(1-unesi novog korisnika, 2-unesi novu knjigu, 3- nadji korisnika, 4-nadji knjigu, 5-zaduzi knjigu, 6-razduzi knjigu, 7-kraj): ";
        int broj;
        std::cin &gt;&gt; broj;
<a name="0"></a><font color="#FF0000"><a href="match745-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        if(broj==1) {
            int clanski_broj;
            std::string ime, prezime, adresa, telefon;
            std::cout &lt;&lt; "Unesite clanski broj: "; std::cin &gt;&gt; clanski_broj;
            std::cout &lt;&lt; "Unesite ime: "; std::cin &gt;&gt; ime;
            std::cout &lt;&lt; "Unesite prezime: "; std::cin &gt;&gt; prezime &gt;&gt; std::ws;
</font>            std::cout &lt;&lt; "Unesite adresu: "; std::getline(std::cin, adresa);
            std::cout &lt;&lt; "Unesite telefon: "; std::cin &gt;&gt; telefon;
<a name="2"></a><font color="#0000FF"><a href="match745-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            b.RegistrirajNovogKorisnika(clanski_broj, ime, prezime, adresa, telefon);
        }
        else if(broj==2) {
            int broj_knjige, godina_izdavanja;
            std::string naslov, ime_pisca, zanr;
            std::cout &lt;&lt; "Unesite broj: "; std::cin &gt;&gt; broj_knjige;
            std::cout &lt;&lt; "Unesite naslov: "; std::cin &gt;&gt; std::ws; std::getline(std::cin, naslov);
</font>            std::cout &lt;&lt; "Unesite ime pisca: "; std::cin &gt;&gt; std::ws; std::getline(std::cin, ime_pisca);
<a name="3"></a><font color="#00FFFF"><a href="match745-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            std::cout &lt;&lt; "Unesite zanr: "; std::cin &gt;&gt; zanr;
            std::cout &lt;&lt; "Unesite godinu izdavanja: "; std::cin &gt;&gt; godina_izdavanja;
            b.RegistrirajNovuKnjigu(broj_knjige, naslov, ime_pisca, zanr, godina_izdavanja);
</font>        }
        else if(broj==3) {
            int clanski_broj;
            std::cout &lt;&lt; "Unesite clanski broj korisnika kojeg zelite naci: "; std::cin &gt;&gt; clanski_broj;
            b.NadjiKorisnika(clanski_broj);
            b.PrikaziZaduzenja(clanski_broj);
        }
        else if(broj==4) {
            int broj_knjige;
            std::cout &lt;&lt; "Unesite broj knjige koju zelite naci: "; std::cin &gt;&gt; broj_knjige;
            b.NadjiKnjigu(broj_knjige);
        }
<a name="1"></a><font color="#00FF00"><a href="match745-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        else if(broj==5) {
            int broj_knjige, clanski_broj;
            std::cout &lt;&lt; "Unesite broj knjige koju zelite zaduziti: "; std::cin &gt;&gt; broj_knjige;
            std::cout &lt;&lt; "Unesite clanski broj korisnika koji zaduzuje knjigu: "; std::cin &gt;&gt; clanski_broj;
            b.ZaduziKnjigu(broj_knjige, clanski_broj);
        }
        else if(broj==6) {
</font>            int broj_knjige;
            std::cout &lt;&lt; "Unesite broj knjige koju zelite razduziti: "; std::cin &gt;&gt; broj_knjige;
            b.RazduziKnjigu(broj_knjige);
        }
        else if(broj==7) {
            std::cout &lt;&lt; "Knjige: " &lt;&lt; std::endl;
            b.IzlistajKnjige();
            std::cout &lt;&lt; "Korisnici: " &lt;&lt; std::endl;
            b.IzlistajKorisnike();
            break;
        }
        else {
            std::cout &lt;&lt; "Pogresan broj" &lt;&lt; std::endl;
            continue;
        }
    }
    Biblioteka k=b;
    k.IzlistajKorisnike();
	return 0;
}</pre>
</body>
</html>
