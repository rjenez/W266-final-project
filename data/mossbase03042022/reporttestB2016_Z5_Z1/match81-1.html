<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3386.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8085.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match81-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_50.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;


using std::map;
using std::string;
using std::cout;

struct Korisnik
{
    string ime,prezime,adresa,telefon;
    //Korisnik(string ime,string prezime,string adresa,string telefon):ime(ime),prezime(prezime),adresa(adresa),telefon(telefon){}
};
class Knjiga
{
    string naslov,ime_pisca,zanr;
    int godina;
    Korisnik *pok;
    public:
    Knjiga(string n,string i_p,string z,int godina):naslov(n),ime_pisca(i_p),zanr(z),godina(godina),pok(nullptr){}
    string DajNaslov(){return naslov;}
    string DajAutora(){return ime_pisca;}
    string DajZanr(){return zanr;}
    int DajGodinuIzdavanja(){return godina;}
    Korisnik *DajKodKogaJe(){return pok;}
    void ZaduziKnjigu(Korisnik &amp;ja_sam){pok=&amp;ja_sam;}
    void RazduziKnjigu(){pok=nullptr;}
    bool DaLiJeZaduzena(){return pok!=nullptr;}
};
class Biblioteka
{
    map&lt;int,Korisnik*&gt; korisnici;
    map&lt;int,Knjiga*&gt; knjige;
    void Imal_knjige(int br)
    {
        if(!knjige.count(br))
            throw std::logic_error("Knjiga nije nadjena");
    }
    void Imal_korisnika(int br)
    {
        if(!korisnici.count(br))
            throw std::logic_error("Korisnik nije nadjen");
    }
    public:
    Biblioteka(){}
    void RegistrirajNovogKorisnika(int cl_br,string ime,string prezime,string adresa,string broj_tel)
    {
        if(korisnici.count(cl_br))
            throw std::logic_error("Korisnik vec postoji");
        korisnici[cl_br]=new Korisnik{ime,prezime,adresa,broj_tel};
    }
    void RegistrirajNovuKnjigu(int br_knj,string n,string i_p,string z,int god)
    {
        if(knjige.count(br_knj))
            throw std::logic_error("Knjiga vec postoji");
        knjige[br_knj]=new Knjiga(n,i_p,z,god);
    }
    ~Biblioteka()
    {
        for(auto a:korisnici)
            delete a.second;
        korisnici.clear();
        for(auto a:knjige)
            delete a.second;
        knjige.clear();
    }
    Korisnik &amp;NadjiKorisnika(int cl_br)
    {
        Imal_korisnika(cl_br);
        return *korisnici[cl_br];
    }
    Knjiga &amp;NadjiKnjigu(int br_knj)
    {
        Imal_knjige(br_knj);
        return *knjige[br_knj];
    }
    void IzlistajKorisnike()const
    {
        for(auto a:korisnici)
        {
            auto b=*(a.second);
            cout&lt;&lt;"Clanski broj: "&lt;&lt;a.first&lt;&lt;"\n";
            cout&lt;&lt;"Ime i prezime: "&lt;&lt;b.ime&lt;&lt;" "&lt;&lt;b.prezime&lt;&lt;"\n";
            cout&lt;&lt;"Adresa: "&lt;&lt;b.adresa&lt;&lt;"\n";
            cout&lt;&lt;"Broj telefona: "&lt;&lt;b.telefon&lt;&lt;"\n";
            cout&lt;&lt;"\n";
        }
    }
    void IzlistajKnjige()const
    {
        for(auto a:knjige)
        {
            auto b=*(a.second);
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;a.first&lt;&lt;"\n";
            cout&lt;&lt;"Naslov: "&lt;&lt;b.DajNaslov()&lt;&lt;"\n";
            cout&lt;&lt;"Pisac: "&lt;&lt;b.DajAutora()&lt;&lt;"\n";
            cout&lt;&lt;"Zanr: "&lt;&lt;b.DajZanr()&lt;&lt;"\n";
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;b.DajGodinuIzdavanja()&lt;&lt;"\n";
            if(b.DaLiJeZaduzena())
            {
                auto c=*(b.DajKodKogaJe());
                cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;c.ime&lt;&lt;" "&lt;&lt;c.prezime&lt;&lt;"\n";
            }
            cout&lt;&lt;"\n";
        }
    }
    void ZaduziKnjigu(int br_knj,int cl_br)
    {
        Imal_knjige(br_knj);
        Imal_korisnika(cl_br);
        if(knjige[br_knj]-&gt;DaLiJeZaduzena())
            throw std::logic_error("Knjiga je vec zaduzena");
        knjige[br_knj]-&gt;ZaduziKnjigu(*(korisnici[cl_br]));
    }
    void RazduziKnjigu(int br_knj)
    {
        Imal_knjige(br_knj);
        if(!knjige[br_knj]-&gt;DaLiJeZaduzena())
            throw std::logic_error("Knjiga nije zaduzena");
        knjige[br_knj]-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int cl_br)
    {
        auto korisnik(NadjiKorisnika(cl_br));
        bool bio=false;
        for(auto a:knjige)
        {
            auto knjiga=(*(a.second));
            if(knjiga.DaLiJeZaduzena())
            {    
                auto provjera=*(knjiga.DajKodKogaJe());
                if(provjera.ime == korisnik.ime and provjera.prezime == korisnik.prezime and provjera.adresa == korisnik.adresa and provjera.telefon == korisnik.telefon)
                {
                    bio=true;
                    cout&lt;&lt;"Evidencijski broj: "&lt;&lt;a.first&lt;&lt;"\n";
                    cout&lt;&lt;"Naslov: "&lt;&lt;knjiga.DajNaslov()&lt;&lt;"\n";
                    cout&lt;&lt;"Pisac: "&lt;&lt;knjiga.DajAutora()&lt;&lt;"\n";
                    cout&lt;&lt;"Zanr: "&lt;&lt;knjiga.DajZanr()&lt;&lt;"\n";
                    cout&lt;&lt;"Godina izdavanja: "&lt;&lt;knjiga.DajGodinuIzdavanja()&lt;&lt;"\n\n";
                }
            }
        }
        if(!bio)
            cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    }
    Biblioteka(const Biblioteka &amp;b)
    {
        for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++)
            korisnici[it-&gt;first]=new Korisnik(*(it-&gt;second));
</font><a name="1"></a><font color="#00FF00"><a href="match81-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_47.gif"/></a>

        for(auto it=b.knjige.begin();it!=b.knjige.end();it++)
            knjige[it-&gt;first] = new Knjiga(*(it-&gt;second));
        for(auto a:knjige)
        {
            auto &amp;knjiga=*(a.second);
            if(knjiga.DaLiJeZaduzena())
            {
                auto b=*(knjiga.DajKodKogaJe());
                auto korisnik=std::find_if(korisnici.begin(),korisnici.end(),[b](std::pair&lt;int,Korisnik*&gt; d)
                {
                    auto novi=*(d.second);
                    return novi.ime==b.ime and novi.prezime==b.prezime and novi.adresa==b.adresa and novi.telefon==b.telefon;
                });
                if(korisnik!=korisnici.end())
                    knjiga.ZaduziKnjigu((*(*korisnik).second));
            }
        }
    }
    Biblioteka(Biblioteka &amp;&amp;b)
    {
        korisnici=b.korisnici;
        knjige=b.knjige;
    }
    Biblioteka &amp;operator=(const Biblioteka &amp;b)
    {
        if(this!=&amp;b)
        {
            for(auto a:korisnici)
                delete a.second;
            korisnici.clear();
            for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++)
                korisnici[it-&gt;first]=new Korisnik(*(it-&gt;second));
            for(auto a:knjige)
                delete a.second;
            knjige.clear();
            for(auto it=b.knjige.begin();it!=b.knjige.end();it++)
                knjige[it-&gt;first]=new Knjiga(*(it-&gt;second));
            for(auto a:knjige)
            {
                auto &amp;knjiga=*(a.second);
                if(knjiga.DaLiJeZaduzena())
                {
                    auto b=*(knjiga.DajKodKogaJe());
                    auto korisnik=std::find_if(korisnici.begin(),korisnici.end(),[b](std::pair&lt;int,Korisnik*&gt; d)
                    {
                        auto novi=*(d.second);
                        return novi.ime==b.ime and novi.prezime==b.prezime and novi.adresa==b.adresa and novi.telefon==b.telefon;
                    });
                    if(korisnik!=korisnici.end())
                        knjiga.ZaduziKnjigu((*(*korisnik).second));
                }
            }
            
        }
        return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b)
    {
        if(this!=&amp;b)
        {
            for(auto a:korisnici)
                delete a.second;
            korisnici.clear();
            korisnici=std::move(b.korisnici);
            for(auto a:knjige)
                delete a.second;
            knjige.clear();
            knjige=std::move(b.knjige);
        }
        return *this;
    }

};
int main ()
{
    /*
    Biblioteka c;
    c.RegistrirajNovogKorisnika(4,"Nejla","Nanic","Kosevo?","062490222");
    c.RegistrirajNovuKnjigu(1,"40 pravila ljubavi","Elif Safak","Vjerska?",2009);
    c.RegistrirajNovuKnjigu(2,"Alhemicar","Paulo Coelho","Drama",1988);
    c.RegistrirajNovuKnjigu(3,"11 minutes","Paulo Coelho","Romansa",2003);
    c.ZaduziKnjigu(1,4);
    c.ZaduziKnjigu(2,4);
    c.ZaduziKnjigu(3,4);
    c.IzlistajKnjige();
    c.IzlistajKorisnike();*/
    using std::cin;
    Biblioteka c;
    int i=0;
    int j=0;
    for(;;)
    {
        cout&lt;&lt;"\nGlavni meni, izaberite neku od sljedecih opcija:\n"
        &lt;&lt; "1 za dodavanje novog korisnika\n2 za dodavanje nove knjige\n3 za izlistavanje svih korisnika\n"
        &lt;&lt; "4 za izlistavanje svih knjiga\n5 za zaduzivanje knjige\n6 za razduzivanje knjige\n0 za kraj\n";
        int n;
        cin&gt;&gt;n;
        if(n==1)
        {
            i++;
            cin.ignore(1000,'\n');
            cout&lt;&lt;"Unesite ime: ";
            string s;
            getline(cin,s);
            cout&lt;&lt;"Unesite prezime: ";
            string p;
            getline(cin,p);
            cout&lt;&lt;"Unesite adresu: ";
            string a;
            getline(cin,a);
            cout&lt;&lt;"Unesite broj telefona: ";
            string b;
            getline(cin,b);
            c.RegistrirajNovogKorisnika(i,s,p,a,b);
        }
        else if(n==2)
        {
            j++;
            cin.ignore(10000,'\n');
            string s;
            cout&lt;&lt;"Unesite ime knjige: ";
            getline(cin,s);
            cout&lt;&lt;"Unesite ime i prezime autora: ";
            string a;
            getline(cin,a);
            cout&lt;&lt;"Unesite zanr: ";
            string z;
            getline(cin,z);
            cout&lt;&lt;"Unesite godinu izdavanja: ";
            int god;
            cin&gt;&gt;god;
            c.RegistrirajNovuKnjigu(j,s,a,z,god);
        }
        else if(n==3)
            c.IzlistajKorisnike();
        else if(n==4)
            c.IzlistajKnjige();
        else if(n==5)
        {
            try{
            cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite zaduziti: ";
            int a;
            cin&gt;&gt;a;
            auto knjiga=c.NadjiKnjigu(a);
            cout&lt;&lt;"Unesite clanski broj osobe koja zaduzuje knjigu: ";
            int b;
            cin&gt;&gt;b;
            auto osoba=c.NadjiKorisnika(b);
            c.ZaduziKnjigu(a,b);
            }
            catch(std::logic_error e)
            {
                cout&lt;&lt;e.what()&lt;&lt;"\nPokusajte ponovno\n";
            }
        }
        else if(n==6)
        {
            cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite razduziti: ";
            int a;
            cin&gt;&gt;a;
            c.RazduziKnjigu(a);
        }
        else if(n==0)
            break;
</font>    }
    
	return 0;
}</pre>
</body>
</html>
