<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7457.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5860.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};
class Knjiga {
    std::string naslovKnjige, imePisca, zanr;
    int godinaIzdavanja;
<a name="1"></a><font color="#00FF00"><a href="match177-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    Korisnik *dugovaoc;
public:
    Knjiga(std::string naslov, std::string pisac, std::string genre, int godina) : dugovaoc {nullptr} {
        naslovKnjige = naslov;
        imePisca = pisac;
        zanr = genre;
        godinaIzdavanja = godina;
    }
    std::string DajNaslov () const {
        return naslovKnjige;
    }
    std::string DajAutora () const {
        return imePisca;
    }
    std::string DajZanr () const {
</font>        return zanr;
    }
    int DajGodinuIzdavanja () const {
        return godinaIzdavanja;
    }
<a name="0"></a><font color="#FF0000"><a href="match177-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_82.gif"/></a>

    Korisnik * DajKodKogaJe () const {
        return dugovaoc;
    }
    void ZaduziKnjigu (Korisnik &amp; zaduzitelj) {
        dugovaoc = &amp; zaduzitelj;
    }
    void RazduziKnjigu () {
        dugovaoc = nullptr;
    }
    bool DaLiJeZaduzena () {
        return dugovaoc != nullptr;
        //true  !nullptr, zaduzena je
        //false nullptr, nije zaduzena
    }
};

class Biblioteka {
    //U petljama koje trebaju da urade nesto sa svakim clanom koristim "x" kao ime posebnog korisnika
    // kao korisnik X ili knjiga X. Veoma mastovito ime
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;

    static void ispisiKorisnika(int evBroj, Korisnik k);
    static void ispisiKnjigu(int evBroj, Knjiga k, bool blaa);
public:
    Biblioteka() : korisnici(), knjige() {}
    Biblioteka(const Biblioteka &amp; bib);
    /*
    //kopiranje, dodjeljivanje vec postojecih biblioteka novim sa dubokim kopiranjem
    //sve knjige se kopiraju a korisnici registriraju u novu biblioteku
    //veliki dogadjaj u gradu u kojem se otvara nova biblioteka
    //do sada su bili mali gradic sa samo jednom bibliotekom ali sada se otvorila nova
    //istina je da ima iste knjige kao i stara, ali svima je obecano da ce u buducnosti izbor postati veci
    //I sada svi hrle u novu bibliotekuu, ostavljajuci staru praznom
    //i tako se stara biblioteka zatvori, uniste se sve knjige u njoj i ovaj mali gradic ponovo ima samo jednu biblioteku
    //*/
    void RegistrirajNovogKorisnika (int clanskiBroj, std::string ime, std::string prezime, std::string adresa, std::string telefon);

    void RegistrirajNovuKnjigu (int evidencijskiBroj, std::string naslov, std::string pisac, std::string zanr, int godinaIzdavanja);
    ~Biblioteka();
    Korisnik &amp; NadjiKorisnika (int clanskiBroj) const {
        if(korisnici.find(clanskiBroj) == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        return *korisnici.at(clanskiBroj);
    }
    Knjiga &amp; NadjiKnjigu (int evidencijskiBroj) const {
        if(knjige.find(evidencijskiBroj) == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        return *knjige.at(evidencijskiBroj);
    }
    void IzlistajKorisnike () const;
    void IzlistajKnjige () const;
    void ZaduziKnjigu (int evBroj, int clBroj) {
        if(knjige.find(evBroj) == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        if(korisnici.find(clBroj) == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        if(knjige.at(evBroj) -&gt; DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        knjige.at(evBroj) -&gt; ZaduziKnjigu(*korisnici.at(clBroj));
    }
    void RazduziKnjigu (int evBroj) {
        if(knjige.find(evBroj) == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        if(!knjige.at(evBroj) -&gt; DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        knjige.at(evBroj) -&gt; RazduziKnjigu();
    }
    void PrikaziZaduzenja (int clBroj) const {
        if(korisnici.find(clBroj) == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");

    }
};

void Biblioteka::RegistrirajNovogKorisnika (int clanskiBroj, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
    //provjeriti da li ima vec korisnik sa istim clanskim brojem
    if(korisnici.find(clanskiBroj) != korisnici.end()) throw std::logic_error("Korisnik vec postoji");

    //postavljanje vrijednosti korisnika (knjigocitalaca)
    Korisnik * ptPomKorisnik(nullptr);
    ptPomKorisnik = new Korisnik;
    ptPomKorisnik-&gt;ime = ime;
    ptPomKorisnik-&gt;prezime = prezime;
    ptPomKorisnik-&gt;adresa = adresa;
    ptPomKorisnik-&gt;telefon = telefon;
    korisnici.insert(std::make_pair(clanskiBroj, ptPomKorisnik));
}
void Biblioteka::RegistrirajNovuKnjigu (int evidencijskiBroj, std::string naslov, std::string pisac, std::string zanr, int godinaIzdavanja) {
    if(knjige.find(evidencijskiBroj) != knjige.end()) throw std::logic_error("Knjiga vec postoji");

    Knjiga * ptPomKnjiga(nullptr);
    ptPomKnjiga = new Knjiga(naslov, pisac, zanr, godinaIzdavanja);
    knjige.insert(std::make_pair(evidencijskiBroj, ptPomKnjiga));
}
Biblioteka::~Biblioteka() {
    for(auto &amp; x : korisnici) {
        delete x.second;
    }
    for(auto &amp; x : knjige) {
        delete x.second;
    }
}
Biblioteka::Biblioteka(const Biblioteka &amp; bib) : korisnici(), knjige() {
    for(auto x : bib.korisnici) {
        Korisnik * ptPomKorisnik = new Korisnik(*x.second);
        korisnici.insert(std::make_pair(x.first, ptPomKorisnik));
    }
    for(auto x : bib.knjige) {
        Knjiga * ptPomKnjiga = new Knjiga(*x.second);
        knjige.insert(std::make_pair(x.first, ptPomKnjiga));
    }
}

void Biblioteka::ispisiKorisnika(int evBroj, Korisnik k) {
    std::cout &lt;&lt; "Clanski broj: " &lt;&lt; evBroj &lt;&lt; "\n";
    std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; k.ime &lt;&lt; " " &lt;&lt; k.prezime &lt;&lt; "\n";
    std::cout &lt;&lt; "Adresa: " &lt;&lt; k.adresa &lt;&lt; "\n";
    std::cout &lt;&lt; "Broj telefona: " &lt;&lt; k.telefon &lt;&lt; "\n";
}
void Biblioteka::IzlistajKorisnike () const {
    for(auto x : korisnici) {
        ispisiKorisnika(x.first, *x.second);
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ispisiKnjigu(int evBroj, Knjiga k, bool blaa) {
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; evBroj &lt;&lt; "\n";
    std::cout &lt;&lt; "Naslov: " &lt;&lt; k.DajNaslov() &lt;&lt; "\n";
    std::cout &lt;&lt; "Pisac: " &lt;&lt; k.DajAutora() &lt;&lt; "\n";
    std::cout &lt;&lt; "Zanr: " &lt;&lt; k.DajZanr() &lt;&lt; "\n";
    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.DajGodinuIzdavanja() &lt;&lt; "\n";
    if(blaa &amp;&amp; k.DaLiJeZaduzena()) {
        std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; k.DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; k.DajKodKogaJe()-&gt;prezime &lt;&lt; "\n";
    }
}
void Biblioteka::IzlistajKnjige () const {
    for(auto x : knjige) {
        ispisiKnjigu(x.first, *x.second, true);
        std::cout &lt;&lt; std::endl;
    }
}

int main () {
    Biblioteka test();
    for(;;) {
        std::cout &lt;&lt; "Odaberite opciju: \n";
        std::cout &lt;&lt; "1. Registriraj Novog Korisnika\n";
        std::cout &lt;&lt; "2. Registriraj Novu Knjigu\n";
        std::cout &lt;&lt; "3. Nadji Korisnika\n";
        std::cout &lt;&lt; "4. Nadji Knjigu\n";
</font>        std::cout &lt;&lt; "5. Izlistaj Korisnike\n";
<a name="2"></a><font color="#0000FF"><a href="match177-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        std::cout &lt;&lt; "6. Izlistaj Knjige\n";
        std::cout &lt;&lt; "7. Zaduzi Knjigu\n";
        std::cout &lt;&lt; "8. Razduzi Knjigu\n";
        std::cout &lt;&lt; "9. Prikazi Zaduzenja\n";
        std::cout &lt;&lt; "0. Kraj\n";
        int broj;
        std::cin &gt;&gt; broj;
        if(broj == 0) break;
</font>    }
    return 0;
}</pre>
</body>
</html>
