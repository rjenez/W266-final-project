<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4320.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student9716.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
#include &lt;utility&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;list&gt;
#include &lt;map&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga
{
    std::string naslovknjige, pisac, zanr;
    int godina;
<a name="2"></a><font color="#0000FF"><a href="match186-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_14.gif"/></a>

    Korisnik *pok;
public:
    Knjiga(std::string naslov, std::string pisac, std::string zanr, int god, Korisnik *pokk=nullptr): naslovknjige(naslov), pisac(pisac), zanr(zanr), godina(god) {
        pok=pokk;
    }
    std::string DajNaslov() const {
        return naslovknjige;
    }
    std::string DajAutora() const {
        return pisac;
    }
    std::string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godina;
    }
    Korisnik DajKodKogaJe() const {
        return *pok;
    }
    void RazduziKnjigu()  {
        pok=nullptr;
    }
    void ZaduziKnjigu(Korisnik &amp;korisnik) {
        pok=&amp;korisnik;
    }
    bool DaLiJeZaduzena() const {
        if(pok==nullptr) return false;
        return true;
    }

};

class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; mapakorisnika;
    std::map&lt;int, Knjiga*&gt; mapaknjiga;
public:
    // dodati: destruktor, kopirajuci + pomjerajuci konstruktor, razduzi i prikazizaduzenja
    void RegistrirajNovogKorisnika(int clbr, std::string ime, std::string prezime, std::string adr, std::string tel);
    void RegistrirajNovuKnjigu(int evbr, std::string naslov, std::string ime, std::string zanrr, int godina);
</font><a name="1"></a><font color="#00FF00"><a href="match186-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_27.gif"/></a>

    Korisnik &amp;NadjiKorisnika(int broj);
    Knjiga &amp;NadjiKnjigu(int broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evbr, int clbr);
    ~Biblioteka();
    void RazduziKnjigu(int evbr);
    void PrikaziZaduzenja(int clbr);
    // Biblioteka(cont Biblioteka &amp;b);
};
/*
void Biblioteka::PrikaziZaduzenja(int clbr)
{
    bool ima=false;
for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) { if(it-&gt;first==clbr) { ima=true;
    for(auto it2=mapaknjiga.begin(); it2!=mapaknjiga.end(); it2++) {
        if(it2-&gt;second-&gt;DajKodKogaJe() == it) std::cout&lt;&lt;"E..."; //ispisi
    } }
    }  if(!ima) 
throw std::logic_error("Korisnik nije nadjen"); } */


void Biblioteka::RazduziKnjigu(int evbr)
{
    bool ima=false;
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) {
        if(it-&gt;first==evbr) { ima=true; break; } }
        if(!ima) throw std::logic_error("Knjiga nije nadjena");
    
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) if(it-&gt;first==evbr) {
            if(it-&gt;second-&gt;DaLiJeZaduzena()==false)
                throw std::logic_error("Knjiga nije zaduzena");
            if(it-&gt;second-&gt;DaLiJeZaduzena()) it-&gt;second-&gt;RazduziKnjigu();
        }
}


// Biblioteka::Biblioteka(const Biblioteka &amp;b) {
//    for(int i=0; i&lt;mapaknjiga)
//}

Biblioteka::~Biblioteka()
{
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) delete it-&gt;second;
    for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) delete it-&gt;second;
}

void Biblioteka::ZaduziKnjigu(int evbr, int clbr)
{
    if(mapaknjiga[evbr]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) {
        if(it-&gt;first==evbr) break;
        if(it==mapaknjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    }

    for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) {
        if(it-&gt;first==clbr) break;
        if(it==mapakorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    }

    mapaknjiga[evbr]-&gt;ZaduziKnjigu(*mapakorisnika[clbr]);

}

void Biblioteka::IzlistajKnjige() const
{
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++)  {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match186-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe().ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe().prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
    }
}

void Biblioteka::IzlistajKorisnike() const
{
    for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) {
</font>        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match186-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_30.gif"/></a>

        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
    }
}


void Biblioteka::RegistrirajNovogKorisnika(int clbr, std::string ime, std::string prezime, std::string adr, std::string tel)
{
    for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) if(it-&gt;first==clbr)
            throw std::logic_error("Korisnik vec postoji");
    mapakorisnika[clbr]=new Korisnik {ime, prezime, adr, tel};
}

void Biblioteka::RegistrirajNovuKnjigu(int evbr, std::string naslov, std::string ime, std::string zanrr, int godina)
{
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) if(it-&gt;first==evbr)
            throw std::logic_error("Knjiga vec postoji");
    mapaknjiga[evbr]=new Knjiga {naslov, ime, zanrr, godina};
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int broj)
{
    for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) if(it-&gt;first==broj) return *mapakorisnika[broj];
    throw std::logic_error("Korisnik nije nadjen");
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int broj)
{
    for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) if(it-&gt;first==broj) return *mapaknjiga[broj];
    throw std::logic_error("Knjiga nije nadjena");
}


int main ()
{
    Biblioteka bib;
    bib.RegistrirajNovogKorisnika(100, "Ajdin", "Zo", "Adresa", "061007");
    bib.RegistrirajNovogKorisnika(10500, "Miralem", "Pjanic", "Juve", "303030");
    bib.RegistrirajNovogKorisnika(101, "Abbb", "asnjas", "alja", "606060");
 //   bib.RegistrirajNovogKorisnika(100, "akask", "af", "akka", "2929");
    bib.IzlistajKorisnike();
    bib.RegistrirajNovuKnjigu(3, "Aa", "Bbb", "Aaaaa", 1999);
    bib.RegistrirajNovuKnjigu(2, "aaaa", "alkjfa", "jaf", 2020);
    bib.IzlistajKnjige();
    bib.ZaduziKnjigu(3, 100);
    bib.IzlistajKnjige();
    bib.RazduziKnjigu(35);
    bib.IzlistajKnjige();
    return 0;
</font>}</pre>
</body>
</html>
