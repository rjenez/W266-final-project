<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7085.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7085.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;

using std::string;

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
    Korisnik(string ime, string prezime, string adresa, string telefon){
        Korisnik::ime=ime;
        Korisnik::prezime=prezime;
        Korisnik::adresa=adresa;
        Korisnik::telefon=telefon;
    }
};

class Knjiga{
    string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik* zaduzio;
    public:
    Knjiga(string naslov, string ime_pisca, string zanr,int godina_izdavanja, Korisnik* zaduzio=nullptr){
        this-&gt;naslov=naslov; this-&gt;ime_pisca=ime_pisca; this-&gt;zanr=zanr; this-&gt;godina_izdavanja=godina_izdavanja;
        this-&gt;zaduzio=nullptr;//this-&gt;zaduzio=&amp;zaduzio;
    }
    std::string DajNaslov()const{ return naslov;}
    std::string DajAutora()const{ return ime_pisca;}
    std::string DajZanr()const{ return zanr;}
    int DajGodinuIzdavanja()const{ return godina_izdavanja;}
<a name="6"></a><font color="#00FF00"><a href="match789-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    Korisnik* DajKodKogaJe()const{ return zaduzio;}
    void ZaduziKnjigu( Korisnik &amp;A){
        zaduzio=&amp;A;
    }
    void RazduziKnjigu(){ zaduzio=nullptr;}
    bool DaLiJeZaduzena()const{ 
        if(zaduzio!=nullptr) return true;
</font>        else return false;
    }
};

class Biblioteka{
    private:
    void Obrisi(std::map&lt;int,Korisnik*&gt; m1, std::map&lt;int,Knjiga*&gt;m2){
        for(auto &amp;x: m1) delete x.second;
        for(auto &amp;x: m2) delete x.second;
    }
    template&lt;typename tip&gt;
    void Dodaj(std::map&lt;int, tip*&gt; m){
<a name="7"></a><font color="#0000FF"><a href="match789-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        for(auto x: m) m.insert(std::make_pair(x.first, new tip(*x.second)));
    }
    std::map&lt;int,Korisnik*&gt; mapa1;
    std::map&lt;int, Knjiga*&gt; mapa2;
    public:
    Biblioteka()=default;
</font>    Biblioteka(Biblioteka &amp;bibl){
        //for(auto x: bibl.mapa1) mapa1.insert(std::make_pair(x.first, new Korisnik(*x.second)));
        Dodaj(mapa1);
        //for(auto x:bibl.mapa2) mapa2.insert(std::make_pair(x.first, new Knjiga(*x.second)));
        Dodaj(mapa2);
    }
    
    Biblioteka(Biblioteka &amp;&amp;bibl){
        //for(auto x:bibl.mapa2) mapa2.insert(std::make_pair(x.first, x.second));
        Dodaj(mapa2);
        //for(auto x:bibl.mapa1) mapa1.insert(std::make_pair(x.first, x.second));
        Dodaj(mapa1);
    }
    
    Biblioteka &amp;operator= (Biblioteka &amp;bibl){
        if(&amp;bibl!=this){
            for(auto &amp;x: mapa2) delete x.second;
            for(auto &amp;x:mapa1) delete x.second;
            //for(auto x:bibl.mapa1)mapa1.insert(std::make_pair(x.first, new Korisnik(*x.second)));
            //for(auto x:bibl.mapa2) mapa2.insert(std::make_pair(x.first, new Knjiga(*x.second)));
            Dodaj(mapa1);
            Dodaj(mapa2);
        }
        return *this;
    }
    Biblioteka &amp;operator= (Biblioteka &amp;&amp;bibl){
        if(&amp;bibl !=this){
            for(auto &amp;x:mapa2) delete x.second;
            for(auto &amp;x:mapa1) delete x.second;
            //for(auto x: bibl.mapa1) mapa1.insert(std::make_pair(x.first, x.second));
            //for(auto x: bibl.mapa2) mapa2.insert(std::make_pair(x.first, x.second));
            Dodaj(mapa1);
            Dodaj(mapa2);
            
        }
        return *this;
    }
    ~Biblioteka(){
        Obrisi(mapa1, mapa2);
    }
    
    void RegistrirajNovogKorisnika(int br, std::string i, std::string p, std::string a, std::string t){
        bool ima=false;
        for(auto x:mapa1) 
        if(x.first==br) ima=true;
        if(ima==true) throw std::logic_error("Korisnik vec postoji");
        mapa1.insert(std::make_pair(br, new Korisnik (i,p,a,t)));
    }
    
    void RegistrirajNovuKnjigu(int br, std::string ime, std::string pisac, std::string zanr, int godina){
        bool ima=false;
        for(auto &amp;x:mapa2)
        if(x.first==br) ima=true;
        if(ima==true) throw std::logic_error("Knjiga vec postoji");
        
        mapa2.insert(std::make_pair(br, new Knjiga(ime, pisac, zanr, godina)));
    }
    Korisnik &amp;NadjiKorisnika (int br){
        for(auto x:mapa1)
        if(x.first==br) return *x.second;
         throw std::logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu (int br){
        for(auto x:mapa2)
        if(x.first== br) return *x.second;
        throw std::logic_error("Knjiga nije nadjena");
    }
    
    void ZaduziKnjigu( int knj, int kor){
        bool ima=false;
        for(auto x: mapa2)
        if(x.first==knj){
            ima=true;
            if(x.second-&gt;DajKodKogaJe()!=nullptr)
            throw std::logic_error("Knjiga vec zaduzena");
        }
        if(ima==false) throw std::logic_error("Knjiga nije nadjena");
        ima=false;
        for(auto x:mapa1)
        if(x.first==kor) ima=true;
        if(ima==false) throw std::logic_error("Korisnik nije nadjen");
        mapa2[knj]-&gt;ZaduziKnjigu(*mapa1[kor]);
    }
    void RazduziKnjigu(int br){
        bool ima=false;
        for(auto x: mapa2)
        if(x.first== br){
            ima=true;
            if(x.second-&gt;DajKodKogaJe()==nullptr)
            throw std::logic_error("Knjiga nije zaduzena");
        }
        if(ima==false) throw std::logic_error("Knjiga nije nadjena");
        mapa2[br]-&gt;RazduziKnjigu();
        
    }
    
    void IzlistajKorisnike()const{
<a name="0"></a><font color="#FF0000"><a href="match789-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        for(auto x: mapa1)
        {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match789-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon&lt;&lt; std::endl;
            std::cout&lt;&lt;std::endl;
            
        }
    }
    void IzlistajKnjige(){
</font><a name="2"></a><font color="#0000FF"><a href="match789-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        for(auto x:mapa2){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;std::endl;
</font><a name="4"></a><font color="#FF00FF"><a href="match789-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        std::cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(x.second-&gt;DajKodKogaJe()!=nullptr)
</font><a name="1"></a><font color="#00FF00"><a href="match789-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
        }
    }
    
    void PrikaziZaduzenja(int br){
</font>        bool ima=false;
        for(auto x: mapa1)
        if(x.first == br) ima=true;
        if(ima==false) throw std::logic_error("Korisnik nije nadjen");
        for(auto x: mapa2){
            //if(*mapa1[br]==*x.second-&gt;DajKodKogaJe()){
<a name="5"></a><font color="#FF0000"><a href="match789-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;std::endl;
</font>                std::cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            }
       // }
    }
    
};

int main ()
{
    /*Korisnik a("Marko", "Markovic", "BB", "29385");
    Korisnik b("Maarko", "Markovic", "BB", "29385");
    Knjiga k("jej", "Mark Tven", "klasika", 1923);
    k.ZaduziKnjigu(b);
    std::cout&lt;&lt;k.DaLiJeZaduzena();*/
    Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata etfovaca 3b", "037/654-321");
b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
const Biblioteka b2(b);                                           
b2.IzlistajKorisnike();	return 0;
}</pre>
</body>
</html>
