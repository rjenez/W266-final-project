<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2364.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2364.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;initializer_list&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match80-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_34.gif"/></a>

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga {
    std::string naslov;
    std::string autor;
    std::string zanr;
    int godina_izdavanja;
    Korisnik *kod_koga_je;
public:
    Knjiga(std::string naslov, std::string autor, std::string zanr, int godina_izdavanja);
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return autor; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    Korisnik *DajKodKogaJe() const { return kod_koga_je; }
    void ZaduziKnjigu(Korisnik &amp;k){ kod_koga_je = &amp;k; }
    void RazduziKnjigu(){ kod_koga_je = nullptr; }
    bool DaLiJeZaduzena(){ if(kod_koga_je)return true; else return false; }
};

Knjiga::Knjiga(std::string naslov, std::string autor, std::string zanr, int godina_izdavanja) : naslov(naslov),
    autor(autor), zanr(zanr), godina_izdavanja(godina_izdavanja), kod_koga_je(nullptr) {}

class Biblioteka {
    std::map&lt;int ,Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
    Biblioteka(){}
    ~Biblioteka(){ for(int i(0); i &lt; korisnici.size(); i++) delete korisnici[i]; for(int i(0); i &lt; knjige.size(); i++) delete knjige[i]; }
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
    void RegistrirajNovuKnjigu(int ev_broj, std::string naslov, std::string autor, std::string zanr, int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int clanski_broj) const ;
    Knjiga &amp;NadjiKnjigu(int ev_broj)const ;
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int ev_broj, int clanski_broj);
    void RazduziKnjigu(int ev_broj);
    void PrikaziZaduzenja(int clanski_broj)const;
};

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string Ime, std::string Prezime, std::string Adresa, std::string Telefon){
    Korisnik *p = nullptr;
    try{
        p = new Korisnik;
    }catch(std::bad_alloc){
        throw;
    }
    auto it(korisnici.find(clanski_broj));
    if(it != korisnici.end()){ delete p; throw std::logic_error("Korisnik vec postoji"); }
    else{
        p-&gt;ime = Ime;
        p-&gt;prezime = Prezime;
        p-&gt;adresa = Adresa;
        p-&gt;telefon = Telefon;
        korisnici[clanski_broj] = p;
    }
}
void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, std::string naslov, std::string autor, std::string zanr, int godina_izdavanja){
    Knjiga *p = nullptr;
    try{
        p = new Knjiga(naslov, autor, zanr, godina_izdavanja);
    }catch(std::bad_alloc){
        throw;
    }
    auto it(knjige.find(ev_broj));
    if(it != knjige.end()){ delete p; throw std::logic_error("Knjiga vec postoji"); }
    else knjige[ev_broj] = p; 
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) const {
    auto it(korisnici.find(clanski_broj));
    if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    else return *it-&gt;second;
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj) const {
    auto it(knjige.find(ev_broj));
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    else return *it-&gt;second;
}
void Biblioteka::IzlistajKorisnike() const{
    for(auto i(korisnici.begin()); i != korisnici.end(); i++){
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; i-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; i-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; i-&gt;second-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; i-&gt;second-&gt;adresa &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match80-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; i-&gt;second-&gt;telefon &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const{
    for(auto i(knjige.begin()); i != knjige.end(); i++){
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Naslov: " &lt;&lt; i-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; i-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; i-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match80-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_12.gif"/></a>

        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; i-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if((i-&gt;second-&gt;DajKodKogaJe()) != nullptr)
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; i-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; i-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int ev_broj, int clanski_broj){
    auto knjiga(NadjiKnjigu(ev_broj));
    auto korisnik(NadjiKorisnika(clanski_broj));
    if(NadjiKnjigu(ev_broj).DaLiJeZaduzena()) throw std::logic_error("Knjiga je zaduzena");
    else
    NadjiKnjigu(ev_broj).ZaduziKnjigu(NadjiKorisnika(clanski_broj));
}
void Biblioteka::RazduziKnjigu(int ev_broj){
    auto knjiga(NadjiKnjigu(ev_broj));
    if(!(NadjiKnjigu(ev_broj).DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
    else NadjiKnjigu(ev_broj).RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski_broj) const{
    if(korisnici.find(clanski_broj) == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    int brojac{};
    for(auto i(knjige.begin()); i != knjige.end(); i++)
        if(i-&gt;second-&gt;DajKodKogaJe() == korisnici.find(clanski_broj)-&gt;second){
            ++brojac;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; i-&gt;second-&gt;DajNaslov()&lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; i-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match80-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_11.gif"/></a>

            std::cout &lt;&lt; "Zanr: " &lt;&lt; i-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; i-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        }
    if(brojac == 0) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
    }
int main(){
    Biblioteka bib8;
    try{
    std::cout &lt;&lt; "Dobro dosli u nasu biblioteku!\n";
    for(;;){
        std::cout &lt;&lt; "\nUnesite broj (1 - 8) da bi odabrali neku od opcija koju vam nudi biblioteka:\n";
        std::cout &lt;&lt; "1 - registracija novog korisnika.\n";
        std::cout &lt;&lt; "2 - registracija nove knjige.\n";
        std::cout &lt;&lt; "3 - prikaz korisnika biblioteke.\n";
        std::cout &lt;&lt; "4 - prikaz svih knjiga.\n";
        std::cout &lt;&lt; "5 - zaduzi knjigu.\n";
        std::cout &lt;&lt; "6 - razduzi knjigu.\n";
        std::cout &lt;&lt; "7 - prikaz zaduzenja korisnika.\n";
        std::cout &lt;&lt; "8 - za izlaz.\n";
        int broj;
        std::cin &gt;&gt; broj;
        while(broj &lt; 1 || broj &gt; 8){ std::cout &lt;&lt; "Pogresna opcija, molimo unesite ponovo! "; std::cin &gt;&gt; broj; }
        
        if(broj == 1){
            std::cout &lt;&lt; "Registracija novog korisnika!\n";
            std::cout &lt;&lt; "Unesite clanski broj koji bi zeljeli imati: ";
            int clanski_broj; std::cin &gt;&gt; clanski_broj;
            std::cout &lt;&lt; "Unesite ime: ";
            std::cin.ignore(1000, '\n');
            std::string ime; std::getline(std::cin, ime);
            std::cout &lt;&lt; "Unesite prezime: ";
            std::string prezime; std::getline(std::cin, prezime);
</font>            std::cout &lt;&lt; "Unesite adresu korisnika: ";
<a name="1"></a><font color="#00FF00"><a href="match80-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_25.gif"/></a>

            std::string adresa; std::getline(std::cin, adresa);
            std::cout &lt;&lt; "Unesite telefonski broj: ";
            std::string telefon; std::getline(std::cin, telefon);
            try{
                bib8.RegistrirajNovogKorisnika(clanski_broj, ime, prezime, adresa, telefon);
                std::cout &lt;&lt; "Uspjesna registracija!\n";
            }catch(std::logic_error iz){
                std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
            }
        }
        else if(broj == 2){
            std::cout &lt;&lt; "Registracija nove knjige!\n";
            std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            int ev_broj; std::cin &gt;&gt; ev_broj;
            std::cout &lt;&lt; "Unesite naslov knjige: ";
            std::cin.ignore(1000, '\n');
            std::string naslov; std::getline(std::cin, naslov);
            std::cout &lt;&lt; "Unesite autora knjige: ";
            std::string autor; std::getline(std::cin, autor);
            std::cout &lt;&lt; "Unesite zanr: ";
            std::string zanr; std::getline(std::cin, zanr);
            std::cout &lt;&lt; "Unesite godina izdavanja: ";
            int godina_izdavanja; std::cin &gt;&gt; godina_izdavanja; std::cin.ignore(1000, '\n');
            try{
                bib8.RegistrirajNovuKnjigu(ev_broj, naslov, autor, zanr, godina_izdavanja);
                std::cout &lt;&lt; "Uspjesna registracija!\n";
            }catch(std::logic_error iz){
                std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
            }
        }
        else if(broj == 3){
            std::cout &lt;&lt; "Spisak korisnika biblioteke:\n\n";
            bib8.IzlistajKorisnike();
        }
        else if(broj == 4){
            std::cout &lt;&lt; "Spisak svih knjiga biblioteke:\n\n";
            bib8.IzlistajKnjige();
        }
        else if(broj == 5){
            std::cout &lt;&lt; "Unesite evidencijski broj knjige koju zelite zaduziti, te clanski broj korisnika: ";
            int ev_broj, clanski_broj;
            std::cin &gt;&gt; ev_broj &gt;&gt; clanski_broj;
            try{
            bib8.ZaduziKnjigu(ev_broj, clanski_broj);
            std::cout &lt;&lt; "Uspjesno ste zaduzili knjigu!\n";
            }catch(std::logic_error iz){
                std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
            }
        }
        else if(broj == 6){
                std::cout &lt;&lt; "Unesite evidencijski broj knjige koju zelite razduziti: ";
                int ev_broj; std::cin &gt;&gt; ev_broj;
                try{
                    bib8.RazduziKnjigu(ev_broj);
                    std::cout &lt;&lt; "Uspjesno ste razduzili knjigu!\n";
                }catch(std::logic_error iz){
                    std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
                }
        }
        else if(broj == 7){
            std::cout &lt;&lt; "Unesite clanski broj korisnika za kojeg zelite da se prikazu zaduzenja: ";
            int clanski_broj; std::cin &gt;&gt; clanski_broj;
            try{
                bib8.PrikaziZaduzenja(clanski_broj);
            }catch(std::logic_error iz){
                std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
            }
        }
        else if(broj == 8){
            std::cout &lt;&lt; "\n\nHvala vam sto ste nas posjetili, dovidjenja :)";
            break;
        }
    
    }
    }catch(std::logic_error iz){
        std::cout &lt;&lt; iz.what();
</font>    }
    return 0;
}</pre>
</body>
</html>
