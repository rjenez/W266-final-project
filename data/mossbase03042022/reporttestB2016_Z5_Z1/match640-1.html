<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4290.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4780.cpp<p></p><pre>
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;iostream&gt;

struct Korisnik {
<a name="1"></a><font color="#00FF00"><a href="match640-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    std::string ime,prezime,adresa,telefon;
};

class Knjiga
{
    std::string naslov,autor,zanr;
    int godina_izdavanja;
    Korisnik * zaduzenje = nullptr;
public:
    Knjiga(std::string naslov,std::string autor,std::string zanr, int godina_izdavanja,Korisnik* p=nullptr):naslov(naslov),autor(autor),zanr(zanr),godina_izdavanja(godina_izdavanja),zaduzenje(p) {}
</font>    ~Knjiga() {}
    std::string DajNaslov()const {
        return naslov;
    }
    std::string DajAutora()const{
        return autor;
    }
    std::string DajZanr()const {
        return zanr;
    }
    int DajGodinuIzdavanja()const{
        return godina_izdavanja;
    }
    Korisnik* DajKodKogaJe ()const {
        return zaduzenje;
    }
    void ZaduziKnjigu(Korisnik&amp; korisnik) {
        zaduzenje=&amp;korisnik;
    }
    void RazduziKnjigu() {
        zaduzenje=nullptr;
    }
    bool DaLiJeZaduzena()const {
        if(!zaduzenje) return false;
        return true;
    }

};

class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
    Biblioteka() {}
    Biblioteka(std::map&lt;int, Korisnik*&gt;k1, std::map&lt;int, Knjiga*&gt; k2):korisnici(k1),knjige(k2) {}
    ~Biblioteka() {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) delete it-&gt;second;
        for(auto it=knjige.begin(); it!=knjige.end(); it++) delete it-&gt;second;
    }
    Biblioteka(Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
<a name="4"></a><font color="#FF00FF"><a href="match640-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int broj, std::string imee, std::string prezimee, std::string adresaa, std::string broj_telefonaa);
</font>    void RegistrirajNovuKnjigu(int broj,std::string nasloov, std::string ime_pisca, std::string zanrr , int godinaizdavanja);
    Korisnik &amp;NadjiKorisnika(int broj);
    Knjiga &amp;NadjiKnjigu(int broj);
    void IzlistajKorisnike();
    void IzlistajKnjige();
    void ZaduziKnjigu(int broj_knjige, int broj_korisnika);
<a name="5"></a><font color="#FF0000"><a href="match640-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    void PrikaziZaduzenja(int broj_korisnika);
};


Biblioteka::Biblioteka(Biblioteka &amp;b)
{
    try {
        for (auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++)
            korisnici[it-&gt;first]=new Korisnik(*(it-&gt;second));
</font>    } catch(std::bad_alloc) {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
            delete it-&gt;second;
            korisnici.erase(it-&gt;first);
<a name="6"></a><font color="#00FF00"><a href="match640-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            throw;
        }
    }
    try {
        for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++)
            knjige[it-&gt;first]=new Knjiga(*(it-&gt;second));
</font>    } catch(std::bad_alloc) {
        for(auto it=knjige.begin(); it!=knjige.end(); it++) {
            delete it-&gt;second;
            korisnici.erase(it-&gt;first);
            throw;
        }
    }
}
Biblioteka:: Biblioteka(Biblioteka &amp;&amp; b)
{
    std::swap(korisnici,b.korisnici);
    std::swap(knjige, b.knjige);
}


Biblioteka&amp; Biblioteka ::operator=(const Biblioteka &amp;b)
{
    std::map&lt;int, Korisnik*&gt;novi_korisnici;
    std::map&lt;int, Knjiga*&gt; nove_knjige;
    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++)
        novi_korisnici[it-&gt;first]=new Korisnik(*(it-&gt;second));

    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
        delete it-&gt;second;
        korisnici.erase(it-&gt;first);
    }
    for(auto it=novi_korisnici.begin(); it!=novi_korisnici.end(); it++)
        korisnici[it-&gt;first]=it-&gt;second;
    return *this;

}

Biblioteka&amp; Biblioteka ::operator =(Biblioteka &amp;&amp;b)
{
    std::swap(korisnici, b.korisnici);
    std::swap(knjige,b.knjige);
    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) b.korisnici[it-&gt;first]=nullptr;
    for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) b.knjige[it-&gt;first]=nullptr;
    return *this;
}

<a name="2"></a><font color="#0000FF"><a href="match640-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void Biblioteka:: RegistrirajNovogKorisnika(int broj, std::string imee, std::string prezimee,std::string adresaa, std::string broj_telefonaa)
{
    if(korisnici.count(broj)) throw std::logic_error("Korisnik vec postoji");
</font>    else {
        Korisnik* novi=new Korisnik;
        novi-&gt;ime=imee;
        novi-&gt;prezime=prezimee;
        novi-&gt;adresa=adresaa;
        novi-&gt;telefon=broj_telefonaa;
<a name="3"></a><font color="#00FFFF"><a href="match640-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        korisnici.insert(std::make_pair(broj,novi));

    }
}

void Biblioteka:: RegistrirajNovuKnjigu(int broj, std::string nasloov, std::string ime_pisca, std::string zanrr, int godinaizdavanja)
{
    if(knjige.count(broj)) throw std::logic_error("Knjiga vec postoji");
</font>    else {
        Knjiga * nova=new Knjiga(nasloov,ime_pisca,zanrr,godinaizdavanja);
<a name="0"></a><font color="#FF0000"><a href="match640-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        knjige.insert(std::make_pair(broj,nova));
    }
}

Korisnik &amp; Biblioteka::NadjiKorisnika(int broj)
{
    if(!korisnici.count(broj)) throw std::logic_error("Korisnik nije nadjen");
    return *(korisnici[broj]);

}

Knjiga &amp; Biblioteka::NadjiKnjigu(int broj)
{
    if(!knjige.count(broj)) throw std::logic_error("Knjiga nije nadjena");
    return *(knjige[broj]);
}

void Biblioteka:: IzlistajKorisnike()
</font>{
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
<a name="8"></a><font color="#00FFFF"><a href="match640-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        auto korisniik=korisnici[it-&gt;first];
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;korisniik-&gt;ime&lt;&lt;" "&lt;&lt;korisniik-&gt;prezime&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Adresa: "&lt;&lt;korisniik-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;korisniik-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}

void Biblioteka::IzlistajKnjige()
{
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        auto book=knjige[it-&gt;first];
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;book-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;book-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;book-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;book-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
        if (book-&gt;DaLiJeZaduzena()) {
<a name="7"></a><font color="#0000FF"><a href="match640-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;book-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;book-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;

        }
    }
}

void Biblioteka::ZaduziKnjigu(int broj_knjige, int broj_korisnika)
{
    if(!knjige.count(broj_knjige)) throw std::logic_error("Knjiga nije nadjena");
    if(knjige[broj_knjige]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
</font>    if(!korisnici.count(broj_korisnika)) throw std::logic_error("Korisnik nije nadjen");
    knjige[broj_knjige]-&gt;ZaduziKnjigu(*(korisnici[broj_korisnika]));
}

void Biblioteka:: PrikaziZaduzenja(int broj_korisnika)
{
    int brojac=0;
    if(!korisnici.count(broj_korisnika)) throw std::logic_error("Korisnik nije nadjen");
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        auto book=knjige[it-&gt;first];
        if (book-&gt;DajKodKogaJe()==korisnici[broj_korisnika]) {
            brojac++;
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;book-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;book-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;book-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;book-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;

        }
    }
    if(brojac==0) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika"&lt;&lt;std::endl;


}







int main ()
{
    int in=0;
    Biblioteka bib;
    do {
        std::cout&lt;&lt;"Unesite zeljeni broj opcije: "&lt;&lt;std::endl;
        std::cout&lt;&lt;"1 - Registracija novog korisnika"&lt;&lt;std::endl;
        std::cout&lt;&lt;"2 - Registracija nove knjige"&lt;&lt;std::endl;
        std::cout&lt;&lt;"3 - Pretraga korisnika"&lt;&lt;std::endl;
        std::cout&lt;&lt;"4 - Pretraga knjiga"&lt;&lt;std::endl;
        std::cout&lt;&lt;"5 - Izlistavanje korisnika"&lt;&lt;std::endl;
        std::cout&lt;&lt;"6 - Izlistavanje knjiga"&lt;&lt;std::endl;
        std::cout&lt;&lt;"7 - Zaduzivanje knjige"&lt;&lt;std::endl;
        std::cout&lt;&lt;"8 - Prikaz zaduzenja"&lt;&lt;std::endl;
        std::cout&lt;&lt;"0 - IZLAZ"&lt;&lt;std::endl;
        std::cin&gt;&gt;in;
        if(in==1){
            int broj;
            std::string ime, prezime,adresa , brojtelefona;
            std::cout&lt;&lt;"Unesite broj korisnika: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj;
            std::cout&lt;&lt;"Unesite ime korisnika: "&lt;&lt;std::endl;
            std::cin&gt;&gt;ime;
            std::cout&lt;&lt;"Unesite prezime: "&lt;&lt;std::endl;
            std::cin&gt;&gt;prezime;
            std::cout&lt;&lt;"Unesite adresu: "&lt;&lt;std::endl;
            std::cin&gt;&gt;adresa;
            std::cout&lt;&lt;"Unesite broj telefona"&lt;&lt;std::endl;
            std::cin&gt;&gt;brojtelefona;
            bib.RegistrirajNovogKorisnika(broj,ime,prezime,adresa,brojtelefona);
        }
        else if(in==2){
            std::string naslov, ime_pisca, zanr;
            int godina_izdavanja,broj;
            std::cout&lt;&lt;"Unesite broj knjige: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj;
            std::cout&lt;&lt;"Unesite naslov knjige: "&lt;&lt;std::endl;
            std::cin&gt;&gt;naslov;
            std::cout&lt;&lt;"Unesite ime pisca: "&lt;&lt;std::endl;
            std::cin&gt;&gt;ime_pisca;
            std::cout&lt;&lt;"Unesite zanr: "&lt;&lt;std::endl;
            std::cin&gt;&gt;zanr;
            std::cout&lt;&lt;"Unesite godinu izdavanja knjige: "&lt;&lt;std::endl;
            std::cin&gt;&gt;godina_izdavanja;
            bib.RegistrirajNovuKnjigu(broj,naslov,ime_pisca,zanr,godina_izdavanja);
        }
        else if(in==3){
            int broj_korisnika;
            std::cout&lt;&lt;"Unesite broj korisnika: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj_korisnika;
           bib.NadjiKorisnika(broj_korisnika);
        }
        
        else if(in==4){
            int broj_knjige;
            std::cout&lt;&lt;"Unesite broj knjige: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj_knjige;
            bib.NadjiKnjigu(broj_knjige);
        }
        
        else if(in==5) bib.IzlistajKorisnike();
        
        else if(in==6) bib.IzlistajKnjige();
        
        else if(in==7){
            int broj_knjige, broj_korisnika;
            std::cout&lt;&lt;"Unesite broj knjige: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj_knjige;
            std::cout&lt;&lt;"Unesite broj korisnika: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj_korisnika;
            bib.ZaduziKnjigu(broj_knjige, broj_korisnika);
        }
        
        else if(in==8){
            int broj;
            std::cout&lt;&lt;"Unesite broj korisnika: "&lt;&lt;std::endl;
            std::cin&gt;&gt;broj;
            bib.PrikaziZaduzenja(broj);
        }
        
         }while(in!=0);
        
    return 0;

}</pre>
</body>
</html>
