<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5603.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4150.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;new&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov_knjige, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *korisnik;
    public : 
    Knjiga(std::string naslov, std::string ime, std::string zanr_knjige, int godina) {
        naslov_knjige = naslov;
        ime_pisca = ime;
        zanr = zanr_knjige;
        godina_izdavanja = godina;
        korisnik = nullptr;
    }
    std::string DajNaslov() const { return naslov_knjige; }
    std::string DajAutora() const { return ime_pisca; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
<a name="3"></a><font color="#00FFFF"><a href="match848-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    Korisnik* DajKodKogaJe() const { return korisnik; }
    void ZaduziKnjigu(Korisnik &amp;korisnik1) {
        korisnik = &amp;korisnik1;
    }
    void RazduziKnjigu() {
        korisnik = nullptr;
    }
    bool DaLiJeZaduzena() const {
        if(korisnik == nullptr) return false;
</font>        else return true;
    }
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; mapa_korisnika;
    std::map&lt;int, Knjiga*&gt; mapa_knjiga;
    public: 
    Biblioteka() {}
    Biblioteka (const Biblioteka &amp;b) {
            
            for(auto it((b.mapa_korisnika).begin()); it != (b.mapa_korisnika).end(); it++) {
                std::pair&lt;int, Korisnik*&gt; korisnici;
                korisnici.first = it-&gt;first;
                korisnici.second = new Korisnik(*(it-&gt;second));
                mapa_korisnika.insert(korisnici);
            }
            for(auto it((b.mapa_knjiga).begin()); it != (b.mapa_knjiga.end()); it++) {
                mapa_knjiga.insert(std::make_pair(it-&gt;first, new Knjiga(*(it-&gt;second))));
            }
        }
    Biblioteka &amp;operator = (const Biblioteka &amp;b) {
            for(auto it = mapa_korisnika.begin(); it != mapa_korisnika.end() ; it++) {
                it-&gt;second = nullptr;
            }
                for(auto it((b.mapa_korisnika).begin()); it != ((b.mapa_korisnika).end()); it++) {
                std::pair&lt;int, Korisnik*&gt; korisnici;
                korisnici.first = (*it).first;
                korisnici.second = new Korisnik(*(it-&gt;second));
                mapa_korisnika.insert(korisnici);
            }
            for(auto it(mapa_knjiga.begin()); it != mapa_knjiga.end(); it++) {
                it-&gt;second = nullptr;
            }
            for(auto it(b.mapa_knjiga.begin()); it != (b.mapa_knjiga.end()); it++) {
                std::pair&lt;int, Knjiga*&gt; knjige;
                knjige.first = (*it).first;
                knjige.second = new Knjiga(*(it-&gt;second));
                mapa_knjiga.insert(knjige);
            }
            return *this;
        }
    Biblioteka(Biblioteka &amp;&amp;b) {
        swap(mapa_korisnika, b.mapa_korisnika);
        swap(mapa_knjiga, b.mapa_knjiga);
    }
    Biblioteka operator =(Biblioteka &amp;&amp;b) {
        swap(mapa_korisnika, b.mapa_korisnika);
        swap(mapa_knjiga, b.mapa_knjiga);
        return *this;
    }
    ~Biblioteka() {
        for(auto it(mapa_korisnika.begin()); it != mapa_korisnika.end(); it++) {
            delete it-&gt;second;
            (*it).second = nullptr;
        }
            for(auto it(mapa_knjiga.begin()); it != mapa_knjiga.end(); it++) {
                delete it-&gt;second;
                (*it).second = nullptr;
            }
    }
<a name="0"></a><font color="#FF0000"><a href="match848-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    void RegistrirajNovogKorisnika (int clanski_broj_korisnika, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
        auto it = mapa_korisnika.find(clanski_broj_korisnika);
        if(it != mapa_korisnika.end()) throw std::logic_error ("Korisnik vec postoji");
        Korisnik novi {ime, prezime, adresa, telefon};
</font>        mapa_korisnika.insert(std::make_pair(clanski_broj_korisnika, new Korisnik (novi)));
    }
<a name="1"></a><font color="#00FF00"><a href="match848-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    void RegistrirajNovuKnjigu(int evidencijski_broj_knjige, std::string naslov, std::string ime, std::string zanr, int godina) {
        auto it = mapa_knjiga.find(evidencijski_broj_knjige);
        if(it != mapa_knjiga.end()) throw std::logic_error ("Knjiga vec postoji");
        Knjiga nova{naslov, ime, zanr, godina};
</font>        mapa_knjiga.insert(std::make_pair(evidencijski_broj_knjige, new Knjiga(nova)));
    }
    Korisnik NadjiKorisnika (int clanski_broj_korisnika) {
        auto it = mapa_korisnika.find(clanski_broj_korisnika);
        if(it == mapa_korisnika.end()) throw std::logic_error ("Korisnik nije nadjen");
        return *(it-&gt;second);
    }
    Knjiga NadjiKnjigu(int evidencijski_broj_knjige) {
        auto it = mapa_knjiga.find(evidencijski_broj_knjige);
        if(it == mapa_knjiga.end()) throw std::logic_error ("Knjiga nije nadjena");
        return *(it-&gt;second);
    }
    void IzlistajKorisnike() const {
        for(auto it(mapa_korisnika.begin()); it != mapa_korisnika.end(); it++) {
            std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
            std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
        }
    }
    void IzlistajKnjige() const {
        for(auto it(mapa_knjiga.begin()); it != mapa_knjiga.end(); it++) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match848-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
           if((*(it -&gt; second)).DaLiJeZaduzena()) {
               Korisnik *vlasnik = (*(it-&gt;second)).DajKodKogaJe();
               std::cout &lt;&lt; "Zaduzena kod korisnika: "  &lt;&lt; (*vlasnik).ime &lt;&lt; " " &lt;&lt; (*vlasnik).prezime &lt;&lt; std::endl;
</font>                }
            std::cout &lt;&lt; std::endl;
        }
    }
<a name="2"></a><font color="#0000FF"><a href="match848-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    void ZaduziKnjigu(int evidencijski_broj_knjige, int clanski_broj_korisnika) {
        auto it = mapa_knjiga.find(evidencijski_broj_knjige);
        if(it == mapa_knjiga.end()) {
            throw std::logic_error ("Knjiga nije nadjena");
        }
        auto iterator = mapa_korisnika.find(clanski_broj_korisnika);
        if(iterator == mapa_korisnika.end()) {
            throw std::logic_error ("Korisnik nije nadjen");
</font>        }
        if((*it).second -&gt; DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
        (*it).second -&gt; ZaduziKnjigu(*mapa_korisnika[clanski_broj_korisnika]);
    }
    void RazduziKnjigu(int evidencijski_broj_knjige) {
        auto iterator = mapa_knjiga.find(evidencijski_broj_knjige);
        if(iterator == mapa_knjiga.end()) 
        throw std::logic_error("Knjiga nije nadjena");
        if(((*(iterator-&gt;second)).DaLiJeZaduzena()) == false) 
        throw std::logic_error("Knjiga nije zaduzena");
        (*(iterator -&gt; second)).RazduziKnjigu();
    }
    void PrikaziZaduzenja(int clanski_broj_korisnika) const {
        auto it1 = mapa_korisnika.find(clanski_broj_korisnika);
        if(it1 == mapa_korisnika.end()) 
        throw std::logic_error("Korisnik nije nadjen");
        bool knjiga(false);
        for(auto it(mapa_knjiga.begin()); it != mapa_knjiga.end(); it++) {
            if((*(it -&gt; second)).DajKodKogaJe() == (it1 -&gt; second)) {
                
                std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt; (*it).first &lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: "&lt;&lt; (*(it-&gt;second)).DajNaslov() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Pisac: " &lt;&lt; (*(it-&gt;second)).DajAutora() &lt;&lt; std::endl;
<a name="6"></a><font color="#00FF00"><a href="match848-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                std::cout &lt;&lt; "Zanr: " &lt;&lt; (*(it-&gt;second)).DajZanr() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (*(it -&gt; second)).DajGodinuIzdavanja() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
</font>                knjiga = true;
            }
        }
        if(knjiga == false) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
    }
};
int main () {
    try {
    Biblioteka b;
    while(1) {
        std::cout &lt;&lt; "Odaberite opciju: "&lt;&lt; std::endl;
        std::cout &lt;&lt; "1 - Unesi novog korisnika: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "2 - Unesi novu knjigu: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "3 - Nadji korisnika: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "4 - Nadji knjigu: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "5 - Zaduzi knjigu: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "6 - Razduzi knjigu: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "7 - Izlistaj zaduzenja: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "Unesite broj 8 za kraj!" &lt;&lt; std::endl;
        int br;
        std::cin &gt;&gt; br;
        if(br == 1) {
<a name="7"></a><font color="#0000FF"><a href="match848-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            int clanski_broj_korisnika;
            std::string ime, prezime, adresa, telefon;
            std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
            std::cin &gt;&gt; clanski_broj_korisnika; 
            std::cout &lt;&lt; "Unesite ime korisnika: ";
</font>            std::getline(std::cin, ime); 
            std::cin.clear();
            std::cin.ignore(10000, '\n');
            std::cout &lt;&lt; "Unesite prezime korisnika: "; 
            std::cin &gt;&gt; prezime;
            std::cin.clear();
            std::cin.ignore(10000, '\n');
            std::cout &lt;&lt; "Unesite adresu: "; 
            std::getline(std::cin, adresa); 
            std::cout &lt;&lt; "Unesite broj telefona korisnika: "; 
            std::cin &gt;&gt; telefon;
            std::cin.clear();
            std::cin.ignore(10000, '\n');
            b.RegistrirajNovogKorisnika(clanski_broj_korisnika, ime, prezime, adresa, telefon);
            continue;
        }
        else if(br == 2) {
<a name="5"></a><font color="#FF0000"><a href="match848-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            int evidencijski_broj_knjige, godina_izdavanja;
            std::string naslov_knjige, ime_pisca, zanr;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige: "; 
            std::cin &gt;&gt; evidencijski_broj_knjige;
            std::cin.clear();
</font>            std::cin.ignore(10000, '\n');
            std::cout &lt;&lt; "Unesite naslov knjige: "; 
            std::getline(std::cin, naslov_knjige);
            std::cout &lt;&lt; "Unesite ime pisca: "; 
            std::getline(std::cin, ime_pisca);
            std::cout &lt;&lt; "Unesite zanr knjige: ";
            std::getline(std::cin, zanr); 
            std::cout &lt;&lt; "Unesite godinu izdavanja knjige: "; std::cin &gt;&gt; godina_izdavanja; 
            b.RegistrirajNovuKnjigu(evidencijski_broj_knjige, naslov_knjige, ime_pisca, zanr, godina_izdavanja);
            continue;
        }
        else if(br == 3) {
            int clanski_broj_korisnika;
            std::cout &lt;&lt; "Unesite clanski broj korisnika: "; 
            std::cin &gt;&gt; clanski_broj_korisnika;
            std::cout &lt;&lt; std::endl;
            b.NadjiKorisnika(clanski_broj_korisnika);
            b.PrikaziZaduzenja(clanski_broj_korisnika);
            continue;
        }
        else if(br == 4) {
            int evidencijski_broj_knjige;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            std::cin &gt;&gt; evidencijski_broj_knjige;
            std::cout &lt;&lt; std::endl;
            b.NadjiKnjigu(evidencijski_broj_knjige);
            
            continue;
        }
        else if(br == 5) {
            int evidencijski_broj_knjige, clanski_broj_korisnika;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige koju zelite zaduziti: "; std::cin &gt;&gt; evidencijski_broj_knjige;
            std::cout &lt;&lt; "Unesite clanski broj korisnika koji zaduzuje knjigu: "; std::cin &gt;&gt; clanski_broj_korisnika; std::cout &lt;&lt; std::endl;
            b.ZaduziKnjigu(evidencijski_broj_knjige, clanski_broj_korisnika);
            continue;
        }
        else if(br == 6) {
            int evidencijski_broj_knjige;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige da biste je razduzili: "; std::cin &gt;&gt; evidencijski_broj_knjige; std::cout &lt;&lt; std::endl;
            b.RazduziKnjigu(evidencijski_broj_knjige);
            continue;
        }
        if(br == 7) {
            std::cout &lt;&lt; "Knjige: " &lt;&lt; std::endl;
            b.IzlistajKnjige();
            std::cout &lt;&lt; "Korisnici: " &lt;&lt; std::endl;
            b.IzlistajKorisnike();
            continue;
        }
        if(br == 8) {
            std::cout &lt;&lt; "Dovidjenja!";
            break;
        }
        else {
            std::cout &lt;&lt; "Unijeli ste pogresan broj, pokusajte ponovo!" &lt;&lt; std::endl;
            continue;
        }
    }
    }catch(std::logic_error e) {
        std::cout &lt;&lt; e.what();
    } 
    return 0;
}</pre>
</body>
</html>
