<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6357.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8387.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;


struct Korisnik{
<a name="1"></a><font color="#00FF00"><a href="match637-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    std::string ime,prezime,adresa,telefon;
};
class Knjiga{
    std::string naslov,ime_pisca,zanr;
    int godina_izdavanja;
    Korisnik *koga=nullptr;
    public:
        Knjiga(std::string n,std::string i,std::string z,int g):naslov(n),ime_pisca(i),zanr(z),godina_izdavanja(g),koga(nullptr){}
</font>        std::string DajNaslov() const{return naslov;}
        std::string DajAutora() const{return ime_pisca;}
        std::string DajZanr() const{return zanr;}
        int DajGodinuIzdavanja() const{return godina_izdavanja;}
        Korisnik DajKodKogaJe () const{return *koga;}
        void ZaduziKnjigu(Korisnik &amp;korisnik){koga=&amp;korisnik;}
        void RazduziKnjigu(){koga=nullptr;}
        bool DaLiJeZaduzena(){return koga!=nullptr;}
};
class Biblioteka{
    std::map&lt;int,Korisnik*&gt; korisnici;
    std::map&lt;int,Knjiga*&gt; knjige;
    public:
        Biblioteka()=default;
        ~Biblioteka();
        Biblioteka(Biblioteka &amp;b);
        Biblioteka(Biblioteka &amp;&amp;b);
<a name="4"></a><font color="#FF00FF"><a href="match637-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        Biblioteka &amp;operator=(Biblioteka &amp;b);
        Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
        void RegistrirajNovogKorisnika(int clbr,std::string ime,std::string prezime,std::string adresa,std::string broj);
</font>        void RegistrirajNovuKnjigu(int clbr,std::string naslov,std::string ime,std::string zanr,int godina);
        Korisnik &amp;NadjiKorisnika(int n);
        Knjiga &amp;NadjiKnjigu(int n);
        void IzlistajKorisnike()const;
        void IzlistajKnjige()const;
        void ZaduziKnjigu(int evbr,int clbr);
        void RazduziKnjigu(int evbr);
        void PrikaziZaduzenja(int clbr);
        
};
bool operator ==(const Korisnik &amp;k1,const Korisnik &amp;k2){
    return (k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon==k2.telefon);
}
Biblioteka::~Biblioteka(){
    for(auto i=korisnici.begin();i!=korisnici.end();i++)delete i-&gt;second;
<a name="5"></a><font color="#FF0000"><a href="match637-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    for(auto i=knjige.begin();i!=knjige.end();i++)delete i-&gt;second;
}
Biblioteka::Biblioteka(Biblioteka &amp;b){
    try{
        for(auto i=b.korisnici.begin();i!=b.korisnici.end();i++){
               korisnici[i-&gt;first]=new Korisnik(*(i-&gt;second)); 
</font>        }
        for(auto i=b.knjige.begin();i!=b.knjige.end();i++){
            knjige[i-&gt;first]=new Knjiga(*(i-&gt;second));
        }
    }
    catch(...){
        throw std::bad_alloc();
    }
}
<a name="6"></a><font color="#00FF00"><a href="match637-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b){
    try{
        for(auto i=b.korisnici.begin();i!=b.korisnici.end();i++){
               korisnici[i-&gt;first]=new Korisnik(*(i-&gt;second)); 
</font>        }
        for(auto i=b.knjige.begin();i!=b.knjige.end();i++){
            knjige[i-&gt;first]=new Knjiga(*(i-&gt;second));
        }
    }
    catch(...){
        throw std::bad_alloc();
    }
}
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;b){
    if(this!=&amp;b){
        for(auto i=korisnici.begin();i!=korisnici.end();i++)delete i-&gt;second;
        for(auto i=knjige.begin();i!=knjige.end();i++)delete i-&gt;second;
        
        for(auto i=b.korisnici.begin();i!=b.korisnici.end();i++){
           korisnici[i-&gt;first]=new Korisnik(*(i-&gt;second)); 
        }
        for(auto i=b.knjige.begin();i!=b.knjige.end();i++){
            knjige[i-&gt;first]=new Knjiga(*(i-&gt;second));
        }
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b){
    if(this!=&amp;b){
        for(auto i=korisnici.begin();i!=korisnici.end();i++)delete i-&gt;second;
        for(auto i=knjige.begin();i!=knjige.end();i++)delete i-&gt;second;
        for(auto i=b.korisnici.begin();i!=b.korisnici.end();i++){
           korisnici[i-&gt;first]=new Korisnik(*(i-&gt;second)); 
        }
        for(auto i=b.knjige.begin();i!=b.knjige.end();i++){
            knjige[i-&gt;first]=new Knjiga(*(i-&gt;second));
        }
    }
    return *this;
}
<a name="2"></a><font color="#0000FF"><a href="match637-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int clbr,std::string ime,std::string prezime,std::string adresa,std::string broj){
    if(korisnici.count(clbr))throw std::logic_error("Korisnik vec postoji");
</font><a name="3"></a><font color="#00FFFF"><a href="match637-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    korisnici[clbr]=new Korisnik{ime,prezime,adresa,broj};
}
void Biblioteka::RegistrirajNovuKnjigu(int clbr,std::string naslov,std::string ime,std::string zanr,int godina){
    if(knjige.count(clbr))throw std::logic_error("Korisnik vec postoji");
</font><a name="0"></a><font color="#FF0000"><a href="match637-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    knjige[clbr]=new Knjiga(naslov,ime,zanr,godina);
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int n){
    if(!korisnici.count(n))throw std::logic_error("Korisnik nije nadjen");
    return(*korisnici[n]);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int n){
    if(!knjige.count(n))throw std::logic_error("Knjiga nije nadjena");
    return(*knjige[n]);
}
void Biblioteka::IzlistajKorisnike()const{
</font>    for(auto i=korisnici.begin();i!=korisnici.end();i++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;i-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;i-&gt;second-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;i-&gt;second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;i-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige()const{
    for(auto i=knjige.begin();i!=knjige.end();i++){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(i-&gt;second-&gt;DaLiJeZaduzena())std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;i-&gt;second-&gt;DajKodKogaJe().ime&lt;&lt;" "&lt;&lt;i-&gt;second-&gt;DajKodKogaJe().prezime&lt;&lt;std::endl;
<a name="8"></a><font color="#00FFFF"><a href="match637-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evbr,int clbr){
    if(!knjige.count(evbr))throw std::logic_error("Knjiga nije nadjena");
    if(!korisnici.count(clbr))throw std::logic_error("Korisnik nije nadjen");
</font>    if(knjige[evbr]-&gt;DaLiJeZaduzena())throw std::logic_error("Knjiga vec zaduzena");
    knjige[evbr]-&gt;ZaduziKnjigu(*korisnici[clbr]);
}
void Biblioteka::RazduziKnjigu(int evbr){
    if(!knjige.count(evbr))throw std::logic_error("Knjiga nije nadjena");
    if(!(knjige[evbr]-&gt;DaLiJeZaduzena()))throw std::logic_error("Knjiga nije zaduzena");
    knjige[evbr]-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clbr){
    if(!korisnici.count(clbr))throw std::domain_error("Korisnik nije nadjen");
    int br(0);
    for(auto i=knjige.begin();i!=knjige.end();i++){
        if((i-&gt;second-&gt;DaLiJeZaduzena()==false))continue;
<a name="7"></a><font color="#0000FF"><a href="match637-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        if(i-&gt;second-&gt;DajKodKogaJe()==(*korisnici[clbr])){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Pisac: "&lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
            br++;
        }
    }
    if(br==0)std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
}
int main ()
{
    
	return 0;
}</pre>
</body>
</html>
