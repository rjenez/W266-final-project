<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5899.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5899.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;map&gt;

struct Korisnik
{
    std::string ime, prezime, adresa, telefon;
    //Korisnik(std::string ime, std::string prezime, std::string adresa, std::string br): ime(ime), prezime(prezime), adresa(adresa), telefon(br){}
};

class Knjiga
{
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *korisnik;
public:
<a name="0"></a><font color="#FF0000"><a href="match142-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_52.gif"/></a>

    Knjiga(std::string naslov, std::string autor, std::string zanr, int godina): naslov(naslov), ime_pisca(autor), zanr(zanr),godina_izdavanja(godina),korisnik(nullptr){}
    ~Knjiga() {delete korisnik;}
    std::string DajNaslov() const { return naslov;}
    std::string DajAutora() const { return ime_pisca;}
    std::string DajZanr() const { return zanr;}
    int DajGodinuIzdavanja() const { return godina_izdavanja;}
    Korisnik *DajKodKogaJe() const { return korisnik;}
    void ZaduziKnjigu(Korisnik &amp;k)
    {
        korisnik= new Korisnik{k.ime, k.prezime, k.adresa, k.telefon};
    }
    void RazduziKnjigu() { delete korisnik; korisnik=nullptr;}
    bool DaLiJeZaduzena() 
    { 
        if(korisnik!=nullptr) return true;
        return false;
    }
};

class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; korisnik;
    std::map&lt;int, Knjiga*&gt; knjiga;
public:
    friend class Knjiga;
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;b)
    {
        Korisnik *p;
        Knjiga *q;
        for(auto it=b.knjiga.begin();it!=b.knjiga.end();it++)
        {
           q=new Knjiga(it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja());
          knjiga[it-&gt;first]=q;
        }
         
        for(auto j=b.korisnik.begin();j!=b.korisnik.end();j++)
        {
                p= new Korisnik{j-&gt;second-&gt;ime, j-&gt;second-&gt;prezime,j-&gt;second-&gt;adresa,j-&gt;second-&gt;telefon};
               
               korisnik[j-&gt;first]=p;
        }
    }
    Biblioteka operator =(const Biblioteka &amp;b)
    {
       for(auto it=b.knjiga.begin();it!=b.knjiga.end();it++)
           knjiga[it-&gt;first]=new Knjiga(it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja());
        for(auto j=b.korisnik.begin();j!=b.korisnik.end();j++)
                korisnik[j-&gt;first] = new Korisnik{j-&gt;second-&gt;ime, j-&gt;second-&gt;prezime,j-&gt;second-&gt;adresa,j-&gt;second-&gt;telefon};
                return *this;
    }
          Biblioteka(const Biblioteka &amp;&amp;b)
	{
		for (auto i = knjiga.begin(); i != knjiga.end();i++)
		for (auto it = b.knjiga.begin();it != b.knjiga.end();it++)
		{
			knjiga[i-&gt;first] = it-&gt;second;
		}
		for (auto j = korisnik.begin(); j != korisnik.end();j++)
		for (auto k= b.korisnik.begin();k != b.korisnik.end();k++)
		{
			korisnik[j-&gt;first] = k-&gt;second;
		}
	}
    
    ~Biblioteka()
    {
        for(auto it=korisnik.begin();it!=korisnik.end();it++)
            delete it-&gt;second;
        for(auto it=knjiga.begin();it!=knjiga.end();it++)
            delete it-&gt;second;
    }
    void RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string br)
    {
        Korisnik *p=new Korisnik{ime, prezime, adresa, br}; //dodati u try
        auto it(korisnik.find(clanski));
        if(it!=korisnik.end()) throw std::logic_error("Korisnik vec postoji");
        
            korisnik[clanski]=p;
    }
    void RegistrirajNovuKnjigu(int evidencija, std::string naslov, std::string autor, std::string zanr, int god)
    {
        Knjiga *p= new Knjiga(naslov, autor, zanr, god);
        auto it(knjiga.find(evidencija));
        if(it!=knjiga.end()) throw std::logic_error("Knjiga vec postoji");
        
            knjiga[evidencija]=p;
    }
    
    Korisnik &amp;NadjiKorisnika(int clanski)
    {
        auto it(korisnik.find(clanski));
        if(it==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
        
            return *(it-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int evidencija)
    {
        auto it(knjiga.find(evidencija));
        if(it==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
        return *(it-&gt;second);
    }
    void IzlistajKorisnike() const 
    {
        for(auto it=korisnik.begin(); it!=korisnik.end();it++)
        {
            std::cout &lt;&lt; "Clanski broj: "&lt;&lt;it-&gt;first &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime &lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: "&lt;&lt;it-&gt;second-&gt;adresa &lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match142-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            std::cout &lt;&lt; "Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon &lt;&lt; std::endl;
            std::cout  &lt;&lt; std::endl;
        }
        
    }
    void IzlistajKnjige() const
    {
        for(auto  it=knjiga.begin(); it!=knjiga.end();it++)
        {
            std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;it-&gt;first &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match142-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_19.gif"/></a>

            std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            if(it-&gt;second-&gt;DaLiJeZaduzena()==1)
                std::cout &lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt;" "&lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
            std::cout &lt;&lt; std::endl;
        }
        
    }
    void ZaduziKnjigu(int evidencija, int clanski)
    {
        auto i(NadjiKnjigu(evidencija));
        auto j(NadjiKorisnika(clanski));
        auto it(knjiga.find(evidencija));
        if(it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        else
            it-&gt;second-&gt;ZaduziKnjigu(j);

    }
    void RazduziKnjigu(int evidencija)
    {
        auto i(NadjiKnjigu(evidencija));
        auto it(knjiga.find(evidencija));
        if(!it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        else
            it-&gt;second-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int clanski) const;
};



void Biblioteka::PrikaziZaduzenja(int clanski) const
{
    auto a(korisnik.find(clanski));
    if(a==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
    else
    {
        for(auto it=korisnik.begin();it!=korisnik.end();it++)
        {
            for(auto i=knjiga.begin(); i!=knjiga.end();i++)
            {
                if(i-&gt;second-&gt;DaLiJeZaduzena())
                {
                    if((it-&gt;second-&gt;ime== i-&gt;second-&gt;DajKodKogaJe()-&gt;ime) &amp;&amp; (it-&gt;second-&gt;prezime== i-&gt;second-&gt;DajKodKogaJe()-&gt;prezime))
                    {
                        std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;i-&gt;first &lt;&lt; std::endl;
                        std::cout &lt;&lt; "Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>                        std::cout &lt;&lt; "Pisac: " &lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match142-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

                        std::cout &lt;&lt; "Zanr: " &lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt; std::endl;
                         std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                    }
                }
                else
                {
                    throw std::logic_error("Nema zaduzenja za tog korisnika!");
                }
            }
        }
    }
}



int main ()
{
  Biblioteka b;
	b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic","Zmaja od Bosne 30", "032/444-555");
	b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
	b.IzlistajKnjige();
	Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
    bib8.IzlistajKnjige();
    b=bib8;
    b.IzlistajKnjige();

	return 0;
</font>}
</pre>
</body>
</html>
