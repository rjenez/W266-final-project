<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1502.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1502.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;


using std::cout;
using std::cin;
using std::endl;
using std::string;
using std::map;


struct Korisnik {
    string ime,prezime,adresa,telefon;
};

class Knjiga
{
    string naslov,ime_p,zanr;
    int godinaiz;
    Korisnik* zaduzenik=nullptr;
public:
    Knjiga(string naslov, string ime_p, string zanr, int godinaiz): naslov(naslov), ime_p(ime_p), zanr(zanr), godinaiz(godinaiz) {};
    string DajNaslov() const {
        return naslov;
    }
    string DajAutora() const {
        return ime_p;
    }
    string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godinaiz;
    }
    Korisnik* DajKodKogaJe() const {
        return zaduzenik;
    }
    void ZaduziKnjigu(Korisnik&amp; korisnik) {
        zaduzenik=&amp;korisnik;
    }
    void RazduziKnjigu() {
        zaduzenik=nullptr;
    }
    bool DaLiJeZaduzena() {
        if(!zaduzenik) return false;
        return true;
    }
};

class Biblioteka
{
    map&lt;int,Korisnik*&gt; korisnici;
    map&lt;int,Knjiga*&gt; knjige;
public:
    Biblioteka()=default;
    Biblioteka(const Biblioteka&amp; bib);
    Biblioteka(Biblioteka&amp;&amp; bib);
    ~Biblioteka();
    Biblioteka&amp; operator = (const Biblioteka&amp; bib);
    Biblioteka&amp; operator =(Biblioteka&amp;&amp; bib);
    void RegistrirajNovogKorisnika(int,string,string,string,string);
    void RegistrirajNovuKnjigu(int ev_br, string naslov, string ime_p, string zanr, int godinaiz);
    Korisnik&amp; NadjiKorisnika(int);
    Knjiga&amp; NadjiKnjigu(int);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int ev_br, int cb);
    void RazduziKnjigu(int);
    void PrikaziZaduzenja(int) const ;
};

<a name="0"></a><font color="#FF0000"><a href="match584-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

void Biblioteka::ZaduziKnjigu(int ev_br, int cb)
{
    if(!knjige.count(ev_br)) throw std::logic_error("Knjiga nije nadjena");
    if(!korisnici.count(cb)) throw std::logic_error("Korisnik nije nadjen");
    if(knjige[ev_br]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    knjige[ev_br]-&gt;ZaduziKnjigu(*korisnici[cb]);
}

void Biblioteka::RazduziKnjigu(int ev_br)
{
    if(!knjige.count(ev_br)) throw std::logic_error("Knjiga nije nadjena");
    if(!knjige[ev_br]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
    knjige[ev_br]-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int cb) const
</font>{
    if(!korisnici.count(cb)) throw std::logic_error("Korisnik nije nadjen");
    bool ima(false);
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        if(it-&gt;second-&gt;DajKodKogaJe()==korisnici.at(cb)) {
            ima=true;
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
            cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;" "&lt;&lt;endl;
            cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        }
    }
    if(!ima) cout&lt;&lt;"Nema zaduzenja kod korisnika"&lt;&lt;endl;
    cout&lt;&lt;endl;
}

void Biblioteka::IzlistajKorisnike() const
{
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
<a name="4"></a><font color="#FF00FF"><a href="match584-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
</font>        cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
        cout&lt;&lt;endl;
    }
}


void Biblioteka::IzlistajKnjige() const
{
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;" "&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match584-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()) {
            cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
        }
        cout&lt;&lt;endl;
</font><a name="2"></a><font color="#0000FF"><a href="match584-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    }
}

Korisnik&amp; Biblioteka::NadjiKorisnika(int cb)
{
    if(!korisnici.count(cb)) throw std::logic_error("Korisnik nije nadjen");
    return *korisnici[cb];
}

Knjiga&amp; Biblioteka::NadjiKnjigu(int ev_br)
{
    if(!knjige.count(ev_br)) throw std::logic_error("Knjiga nije nadjena");
    return *knjige[ev_br];
}

void Biblioteka::RegistrirajNovogKorisnika(int cb,string ime, string prezime, string adresa, string telefon)
</font>{
    if (korisnici.count(cb)) throw std::logic_error("Korisnik vec postoji");
    korisnici[cb]=new Korisnik {ime,prezime,adresa,telefon};
}

<a name="3"></a><font color="#00FFFF"><a href="match584-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

void Biblioteka::RegistrirajNovuKnjigu(int ev_br, string naslov, string ime_p, string zanr, int godinaiz)
{
    if(knjige.count(ev_br)) throw std::logic_error("Knjiga vec postoji");
    knjige[ev_br] = new Knjiga(naslov,ime_p,zanr,godinaiz);
</font>}

Biblioteka::~Biblioteka()
{
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        delete it-&gt;second;
    }
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
        delete it-&gt;second;
    }
}

<a name="5"></a><font color="#FF0000"><a href="match584-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

Biblioteka::Biblioteka(const Biblioteka&amp; bib)
{
    for(auto it = bib.korisnici.begin(); it!= bib.korisnici.end(); it++) {
        korisnici[it-&gt;first] = new Korisnik();
</font>        *korisnici[it-&gt;first] = *it-&gt;second;
    }
    for(auto it = bib.knjige.begin(); it!= bib.knjige.end(); it++) {
        knjige[it-&gt;first] = new Knjiga(*it-&gt;second);
    }

}
Biblioteka::Biblioteka(Biblioteka&amp;&amp; bib)
{
    std::swap(korisnici,bib.korisnici);
    std::swap(knjige,bib.knjige);
}
Biblioteka&amp; Biblioteka::operator = (const Biblioteka&amp; bib)
{
    *this=Biblioteka(bib);
    return *this;
}
Biblioteka&amp; Biblioteka::operator =(Biblioteka&amp;&amp; bib)
{
    *this=Biblioteka(std::move(bib));
    return *this;
}

int main ()
{
    Biblioteka bib;
    int opcija;
    while(true) {
        try {
            cout&lt;&lt;"Unesite opciju:\n";
            cout&lt;&lt;" 1. Registriraj novog korisnika\n 2. Registriraj novu knjigu\n 3. Izlistaj sve korisnike\n 4. Izlistaj sve knjige"&lt;&lt;endl;
            cout&lt;&lt;" 5. Zaduzi knjigu\n 6. Razduzi knjigu\n 7. Prikazi zaduzenja\n 0: kraj\n";
            cin&gt;&gt;opcija;
            switch(opcija){
                case 0: throw std::runtime_error("kraj");
                case 1: {
                    int cb;
                    string ime,prezime,adresa, telefon;
                    cout&lt;&lt;"Unesite clanski broj: ";
                    cin&gt;&gt;cb;
                    cin.ignore(10000,'\n');
                    cout&lt;&lt;"Unesite ime: ";
                    getline(cin,ime);
                    cout&lt;&lt;"Unesite prezime: ";
                    getline(cin,prezime);
                    cout&lt;&lt;"Unesite adresu: ";
                    getline(cin,adresa);
                    cout&lt;&lt;"Unesite telefon: ";
                    getline(cin,telefon);
                    bib.RegistrirajNovogKorisnika(cb,ime,prezime,adresa,telefon);
                    cout&lt;&lt;"Korisnik uspjesno registririran"&lt;&lt;endl;
                    break;
                }
                case 2:{
                    int ev_br,godina_iz;
                    string naslov,autor,zanr;
                    cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                    cin&gt;&gt;ev_br;
                    cin.ignore(10000,'\n');
                    cout&lt;&lt;"Unesite naslov: ";
                    getline(cin,naslov);
                    cout&lt;&lt;"Unesite autora: ";
                    getline(cin,autor);
                    cout&lt;&lt;"Unesite zanr: ";
                    getline(cin,zanr);
                    cout&lt;&lt;"Unesite godinu izdavanja: ";
                    cin&gt;&gt;godina_iz;
                    bib.RegistrirajNovuKnjigu(ev_br,naslov,autor,zanr,godina_iz);
                    cout&lt;&lt;"Knjiga uspjesno registrovana"&lt;&lt;endl;
                    break;                    
                }
                case 3:{
                    cout&lt;&lt;"Korisnici date biblioteke su: "&lt;&lt;endl;
                    bib.IzlistajKorisnike();
                    cout&lt;&lt;endl;
                    break;
                }
                case 4:{
                    cout&lt;&lt;"Knjige date biblioteke: "&lt;&lt;endl;
                    bib.IzlistajKnjige();
                    cout&lt;&lt;endl;
                    break;
                }
                case 5:{
                    cout&lt;&lt;"Unesite clanski broj zaduznika: ";
                    int cb,ev_br;
                    cin&gt;&gt;cb;
                    cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                    cin&gt;&gt;ev_br;
                    bib.ZaduziKnjigu(ev_br,cb);
                    cout&lt;&lt;"Knjiga uspjesno zaduzena! "&lt;&lt;endl;
                    break;
                }
                case 6:{
                    cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                    int ev_br;
                    cin&gt;&gt;ev_br;
                    bib.RazduziKnjigu(ev_br);
                    break;
                }
                case 7:{
                    cout&lt;&lt;"Unesite clanski broj korisnika: ";
                    int cb;
                    cin&gt;&gt;cb;
                    cout&lt;&lt;"Zaduzenja datog korisnika su sljedeca: "&lt;&lt;endl;
                    bib.PrikaziZaduzenja(cb);
                    cout&lt;&lt;endl;
                    break;
                }
            }

        } 
        catch(std::runtime_error e){
            break;
        }
        catch(std::logic_error e) {
            cout&lt;&lt;e.what()&lt;&lt;endl;
        }
   
    }
   
    cout&lt;&lt;"Dovidjenja! "&lt;&lt;endl;
    return 0;
}
</pre>
</body>
</html>
