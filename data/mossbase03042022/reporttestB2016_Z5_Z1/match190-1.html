<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3872.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5624.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match190-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_68.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include&lt;string&gt;
#include&lt;new&gt;
#include&lt;algorithm&gt;
#include&lt;cstring&gt;
#include&lt;map&gt;
#include&lt;stdexcept&gt;
#include&lt;iomanip&gt;
using namespace std;
struct Korisnik
{
    string ime, prezime, adresa, telefon;
};
class Knjiga
{
  string naslov, ime_pisca, zanr;
  int godina_izdavanja;
  Korisnik *zaduzenje;
  public:
  Knjiga(string naslov, string ime_pisca, string zanr, int godina_izdavanja):naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), godina_izdavanja(godina_izdavanja)
  {
      zaduzenje=nullptr;
  }
  string DajNaslov() const { return naslov;}
  string DajZanr() const { return zanr;}
  string DajAutora() const { return ime_pisca;} 
    int DajGodinuIzdavanja() const { return godina_izdavanja;}
Korisnik *DajKodKogaJe() const { return zaduzenje;}
void ZaduziKnjigu(Korisnik &amp;k) { zaduzenje=&amp;k;}
void RazduziKnjigu() { zaduzenje=nullptr;}
bool DaLiJeZaduzena()
{if(!zaduzenje) return false;
return true; }

};

class Biblioteka
{
    map&lt;int, Korisnik*&gt; korisnici;
    map&lt;int, Knjiga*&gt; knjige;
    public:
    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;b)=delete;
    void RegistrirajNovogKorisnika(int clanski_broj, string ime_korisnika, string prezime_korisnika, string adresa, string br_tel);
    void RegistrirajNovuKnjigu(int evid_broj, string naslov, string ime_pisca, string zanr, int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int broj);
    Knjiga &amp;NadjiKnjigu(int evid_broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int broj_knjige, int broj_korisnika);
    void RazduziKnjigu(int broj_knjige);
    void PrikaziZaduzenja(int id_korisnika);

~Biblioteka()
{
    for(auto it=korisnici.begin();it!=korisnici.end();it++)
    delete (*it).second;
    for(auto it=knjige.begin();it!=knjige.end();it++)
    delete (*it).second;
}
};
void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, string ime_korisnika, string prezime_korisnika, string adresa_korisnika, string br_tel)
{
    for(auto it(korisnici.begin()); it!=korisnici.end();it++)
    if(it-&gt;first==clanski_broj) throw logic_error("Korisnik vec postoji");
    try
    {
        Korisnik *pok=nullptr;
        pok=new Korisnik;
        pok-&gt;ime=ime_korisnika;
        pok-&gt;prezime=prezime_korisnika;
        pok-&gt;adresa=adresa_korisnika;
        pok-&gt;telefon=br_tel;
        korisnici.insert(make_pair(clanski_broj, pok));
    }
    catch(bad_alloc)
    {throw; }
}
void Biblioteka::RegistrirajNovuKnjigu(int evid_broj, string Naslov, string ime_pisca, string zanr_knjige, int god)
{
    for(auto it(knjige.begin());it!=knjige.end();it++)
    if(it-&gt;first==evid_broj) throw logic_error("Knjiga vec postoji");
    try
    {
        Knjiga *pok=nullptr;
        pok=new Knjiga(Naslov, ime_pisca, zanr_knjige, god);
        knjige.insert(make_pair(evid_broj, pok));
    }
    catch(bad_alloc)
    {
        throw;
    }
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int broj_korisnika)
{
    auto it(korisnici.find(broj_korisnika));
    if(it==korisnici.end()) throw logic_error("Korisnik nije nadjen");
    else return *it-&gt;second;
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int broj_knjige)
{
    auto it(knjige.find(broj_knjige));
    if(it==knjige.end()) throw logic_error("Knjiga nije nadjena");
    else return *it-&gt;second;
}
void Biblioteka::IzlistajKorisnike() const
{
    for(auto it(korisnici.begin()); it!=korisnici.end();it++)
    {
        cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
        cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
        cout&lt;&lt;endl;
    }
}
void Biblioteka::IzlistajKnjige() const

{
    for(auto it(knjige.begin());it!=knjige.end();it++)
    {
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
</font>        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match190-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_26.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()) cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;endl;
    }
}
void Biblioteka::ZaduziKnjigu(int broj_knjige, int broj_korisnika)
{
    auto it1(korisnici.find(broj_korisnika));
    auto it2(knjige.find(broj_knjige));
    if((it1==korisnici.end() &amp;&amp; it2==knjige.end()) || it2==knjige.end()) throw logic_error("Knjiga nije nadjena");
    if(it1==korisnici.end()) throw logic_error("Korisnik nije nadjen");
    if(it2-&gt;second-&gt;DaLiJeZaduzena()) throw logic_error("Knjiga vec zaduzena");
    it2-&gt;second-&gt;ZaduziKnjigu(*it1-&gt;second);
}

void Biblioteka::RazduziKnjigu(int broj)
{
    auto it(knjige.find(broj));
    if(it==knjige.end()) throw logic_error("Knjiga nije nadjena");
    else
    {
        if(it-&gt;second-&gt;DaLiJeZaduzena())
        it-&gt;second-&gt;RazduziKnjigu();
        else throw logic_error("Knjiga nije zaduzena");
    }
}

int main ()
{
	Korisnik k{"Ja", "Jahic", "Ulica Brijestova", "032/587-123"};
    Knjiga nova("Andjeli i demoni", "Leonardo da Vinci", "Roman", 1994);
    if(nova.DajKodKogaJe()==nullptr) cout&lt;&lt;"Nije zaduzena"&lt;&lt;endl;
    nova.ZaduziKnjigu(k);
    cout&lt;&lt;"Knjigu je zaduzio: "&lt;&lt;nova.DajKodKogaJe()-&gt;ime&lt;&lt;endl;
    cout&lt;&lt;nova.DaLiJeZaduzena()&lt;&lt;endl;
</font>    return 0;
    
}</pre>
</body>
</html>
