<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7735.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8337.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
    
    Korisnik(std::string ime, std::string prezime, std::string adresa, std::string telefon) : ime(ime), prezime(prezime), adresa(adresa), telefon(telefon){}
    
    std::string DajIme()const { return ime; }
    std::string DajPrezime()const { return prezime; }
    std::string DajAdresu()const { return adresa; }
    std::string DajTelefon()const { return telefon; }
    bool operator ==(const Korisnik &amp;k);
};

bool Korisnik::operator ==(const Korisnik &amp;k){
    if(k.DajIme() != ime) return false;
    if(k.DajPrezime() != prezime) return false;
    if(k.DajAdresu() != adresa) return false;
    if(k.DajTelefon() != telefon) return false;
<a name="2"></a><font color="#0000FF"><a href="match828-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    return true;
}

class Knjiga {
    std::string naslov;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    Korisnik* zaduzeni;
public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), godina_izdavanja(god_izdavanja), zaduzeni(nullptr){}
</font>    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return ime_pisca; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    Korisnik *DajKodKogaJe() const { return zaduzeni; }
    void ZaduziKnjigu(Korisnik &amp;k){ zaduzeni = &amp;k; }
    void RazduziKnjigu(){ zaduzeni = nullptr; }
    bool DaLiJeZaduzena() { if(zaduzeni){ return true; } return false; }
    
};

class Biblioteka {
<a name="5"></a><font color="#FF0000"><a href="match828-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    std::map&lt;int, Korisnik *&gt; korisnici;
    std::map&lt;int, Knjiga *&gt; knjige;
public:
    Biblioteka(){}
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
</font>    ~Biblioteka();
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona);
    void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime_pisca, std::string zanr, int godina);
    Korisnik &amp;NadjiKorisnika(int cl_broj);
<a name="0"></a><font color="#FF0000"><a href="match828-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Knjiga &amp;NadjiKnjigu(int broj_knjige);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int broj_knjige, int cl_broj);
    void RazduziKnjigu(int broj_knjige);
    void PrikaziZaduzenja(int cl_broj) const;
};

Biblioteka::Biblioteka(const Biblioteka &amp;b){
    for(auto it = (b.korisnici).begin(); it != (b.korisnici).end(); it++){
</font>        korisnici.insert( std::make_pair( it-&gt;first, new Korisnik(*(it-&gt;second)) ) );
    }
    for(auto it = (b.knjige).begin(); it != (b.knjige).end(); it++){
        knjige.insert( std::make_pair( it-&gt;first, new Knjiga(*(it-&gt;second)) ) );
    }
}

<a name="6"></a><font color="#00FF00"><a href="match828-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b){
    for(auto it = (b.korisnici).begin(); it != (b.korisnici).end(); it++){
        korisnici.insert( std::make_pair( it-&gt;first, it-&gt;second) );
</font>        it-&gt;second = nullptr;
    }
    for(auto it = (b.knjige).begin(); it != (b.knjige).end(); it++){
        knjige.insert( std::make_pair( it-&gt;first, it-&gt;second ) );
        it-&gt;second = nullptr;
    }
}

Biblioteka::~Biblioteka(){
    for(auto it = korisnici.begin(); it != korisnici.end(); it++){
        delete it-&gt;second;
    }
    for(auto it = knjige.begin(); it != knjige.end(); it++){
        delete it-&gt;second;
    }
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b){
    if(this != &amp;b){
<a name="1"></a><font color="#00FF00"><a href="match828-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        for(auto it = korisnici.begin(); it != korisnici.end(); it++){
            delete it-&gt;second;
        }
        for(auto it = knjige.begin(); it != knjige.end(); it++){
            delete it-&gt;second;
        }
        
        for(auto it = (b.korisnici).begin(); it != (b.korisnici).end(); it++){
</font>            korisnici.insert( std::make_pair( it-&gt;first, it-&gt;second) );
            it-&gt;second = nullptr;
        }
        for(auto it = (b.knjige).begin(); it != (b.knjige).end(); it++){
            knjige.insert( std::make_pair( it-&gt;first, it-&gt;second ) );
            it-&gt;second = nullptr;
        }
    }
    return *this;
}

Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b){
    if(this != &amp;b){
        for(auto it = korisnici.begin(); it != korisnici.end(); it++){
            delete it-&gt;second;
        }
        for(auto it = knjige.begin(); it != knjige.end(); it++){
            delete it-&gt;second;
        }
        
        for(auto it = (b.korisnici).begin(); it != (b.korisnici).end(); it++){
            korisnici.insert(std::make_pair(it-&gt;first, new Korisnik((it-&gt;second)-&gt;DajIme(), (it-&gt;second)-&gt;DajPrezime(), (it-&gt;second)-&gt;DajAdresu(), (it-&gt;second)-&gt;DajTelefon() )));
        }
        for(auto it = (b.knjige).begin(); it != (b.knjige).end(); it++){
            knjige.insert(std::make_pair(it-&gt;first, new Knjiga((it-&gt;second)-&gt;DajNaslov(), (it-&gt;second)-&gt;DajAutora(), (it-&gt;second)-&gt;DajZanr(), (it-&gt;second)-&gt;DajGodinuIzdavanja() )));
            if( (*(it-&gt;second)).DaLiJeZaduzena() ){
                Korisnik* k((*(it-&gt;second)).DajKodKogaJe());
                for(auto it1 = (b.korisnici).begin(); it1 != (b.korisnici).end(); it1++){
                    if( *k == *(it1-&gt;second) ){ 
                        ZaduziKnjigu(it-&gt;first, it1-&gt;first);
                        break;
                    }
                }
            }
        }
    }
    return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona){
    auto it( korisnici.find(cl_broj) );
    if(it != korisnici.end()) throw std::logic_error("Korisnik vec postoji");
    korisnici.insert(std::make_pair(cl_broj, new Korisnik(ime, prezime, adresa, broj_telefona)));
}

void Biblioteka::RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime_pisca, std::string zanr, int godina){
    auto it( knjige.find(broj_knjige) );
    if(it != knjige.end()) throw std::logic_error("Knjiga vec postoji");
    knjige.insert(std::make_pair(broj_knjige, new Knjiga(naslov, ime_pisca, zanr, godina)));
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int cl_broj){
    auto it( korisnici.find(cl_broj) );
    if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    Korisnik &amp;k(*(it-&gt;second));
    return k;
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int broj_knjige){
    auto it( knjige.find(broj_knjige) );
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    Knjiga &amp;k(*(it-&gt;second));
    return k;    
}

void Biblioteka::IzlistajKorisnike() const{
    for(auto it = korisnici.begin(); it != korisnici.end(); it++){
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;DajIme() &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;DajPrezime() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; (it-&gt;second)-&gt;DajAdresu() &lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match828-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;DajTelefon() &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::IzlistajKnjige() const{
    for(auto it = knjige.begin(); it != knjige.end(); it++){
</font>        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match828-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        if( (it-&gt;second)-&gt;DaLiJeZaduzena() ) std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; ( (it-&gt;second)-&gt;DajKodKogaJe() )-&gt;DajIme() &lt;&lt; " " &lt;&lt; ( (it-&gt;second)-&gt;DajKodKogaJe() )-&gt;DajPrezime() &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int broj_knjige, int cl_broj){
</font>    auto it( knjige.find(broj_knjige) );
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    
    auto it1( korisnici.find(cl_broj) );
    if(it1 == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    
    if( (it-&gt;second)-&gt;DaLiJeZaduzena() ) throw std::logic_error("Knjiga vec zauzeta");

    (*(it-&gt;second)).ZaduziKnjigu( NadjiKorisnika(cl_broj) );
}

void Biblioteka::RazduziKnjigu(int broj_knjige){
    auto it( knjige.find(broj_knjige) );
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    
    if( !((it-&gt;second)-&gt;DaLiJeZaduzena()) ) throw std::logic_error("Knjiga nije zauzeta");
    
    (*(it-&gt;second)).RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int cl_broj) const{
    auto it( korisnici.find(cl_broj) );
    if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    
    Korisnik korisnik(*(it-&gt;second));
    auto it2( knjige.begin() );
    while( it2 != knjige.end() ){
        if( (it2-&gt;second)-&gt;DaLiJeZaduzena() ){
            if( *((it2-&gt;second)-&gt;DajKodKogaJe()) == korisnik ){
                break;
            }
        }
        it2++;
    }
    
    if( it2 ==knjige.end() ) throw std::logic_error("Nema zaduzenja za tog korisnika");
    
    for(auto it1 = knjige.begin(); it1 != knjige.end(); it1++){
        if( (it1-&gt;second)-&gt;DaLiJeZaduzena() ){
            if( *((it1-&gt;second)-&gt;DajKodKogaJe()) == korisnik ){
                std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it1-&gt;first &lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: " &lt;&lt; (it1-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Pisac: " &lt;&lt; (it1-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Zanr: " &lt;&lt; (it1-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it1-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            }
        }
    }
}

int main ()
{
    Biblioteka b;
    while (true) {
        std::cout &lt;&lt; "Odaberite opciju: " &lt;&lt; std::endl;
        std::cout &lt;&lt; " 0 - za kraj" &lt;&lt; std::endl;
        std::cout &lt;&lt; " 1 - za registraciju korisnika" &lt;&lt; std::endl;
        std::cout &lt;&lt; " 2 - za registraciju knjige" &lt;&lt; std::endl;
        std::cout &lt;&lt; " 3 - za popis korisnika" &lt;&lt; std::endl;
        std::cout &lt;&lt; " 4 - za popis knjiga" &lt;&lt; std::endl;
        std::cout &lt;&lt; " 5 - za zaduzivanje knjige" &lt;&lt; std::endl;
<a name="7"></a><font color="#0000FF"><a href="match828-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::cout &lt;&lt; " 6 - za razduzivanje knjige" &lt;&lt; std::endl;
        std::cout &lt;&lt; " 7 - za prikaz zaduzenja" &lt;&lt; std::endl;
        int n;
        std::cin &gt;&gt; n;
</font>        if(n == 0){
            break;
        }else if(n == 1){
            int cl_broj;
            std::cout &lt;&lt; "Unesite clanski broj korisnika: " &lt;&lt; std::endl;
            std::cin &gt;&gt; cl_broj;
            std::cin.ignore(1000, '\n');
            std::string ime;
            std::cout &lt;&lt; "Unesite ime korisnika: " &lt;&lt; std::endl;
            std::getline(std::cin, ime);
            std::string prezime;
            std::cout &lt;&lt; "Unesite prezime korisnika: " &lt;&lt; std::endl;
            std::getline(std::cin, prezime);
            std::string adresa;
            std::cout &lt;&lt; "Unesite adresu korisnika: " &lt;&lt; std::endl;
            std::getline(std::cin, adresa);
            std::string telefon;
            std::cout &lt;&lt; "Unesite broj telefona korisnika: " &lt;&lt; std::endl;
            std::getline(std::cin, telefon);
            try{
                b.RegistrirajNovogKorisnika(cl_broj, ime, prezime, adresa, telefon);
                std::cout &lt;&lt; "Korisnik registrovan." &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }catch(std::logic_error izuzetak){
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }else if(n == 2){
            int broj_knjige, godina_izdavanja;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige: " &lt;&lt; std::endl;
            std::cin &gt;&gt; broj_knjige;
            std::cin.ignore(1000,'\n');
            std::string naslov;
            std::cout &lt;&lt; "Unesite naslov knjige: " &lt;&lt; std::endl;
            std::getline(std::cin, naslov);
            std::string ime_pisca;
            std::cout &lt;&lt; "Unesite ime pisca knjige: " &lt;&lt; std::endl;
            std::getline(std::cin, ime_pisca);
            std::string zanr;
            std::cout &lt;&lt; "Unesite zanr knjige: " &lt;&lt; std::endl;
            std::getline(std::cin, zanr);
            std::cout &lt;&lt; "Unesite godina izdavanja knjige: " &lt;&lt; std::endl;
            std::cin &gt;&gt; godina_izdavanja;
            try{
                b.RegistrirajNovuKnjigu(broj_knjige, naslov, ime_pisca, zanr, godina_izdavanja);
                std::cout &lt;&lt; "Knjiga registrovana." &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }catch(std::logic_error izuzetak){
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }else if(n==3){
            b.IzlistajKorisnike();
        }else if(n==4){
            b.IzlistajKnjige();
        }else if(n==5){
            int cl_broj, broj_knjige;
            std::cout &lt;&lt; "Unesite clanski broj korisnika koji zaduzuje knigu: ";
            std::cin &gt;&gt; cl_broj;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige koju zaduzuje korisnik: ";
            std::cin &gt;&gt; broj_knjige;
            try{
                b.ZaduziKnjigu(broj_knjige, cl_broj);
                std::cout &lt;&lt; "Knjiga zaduzena." &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }catch(std::logic_error izuzetak){
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }else if(n==6){
            int broj_knjige;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige koju razduzujete: ";
            std::cin &gt;&gt; broj_knjige;
            try{
                b.RazduziKnjigu(broj_knjige);
                std::cout &lt;&lt; "Knjiga razduzena." &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }catch(std::logic_error izuzetak){
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }else if(n==7){
            int cl_broj;
            std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
            std::cin &gt;&gt; cl_broj;
            try{
                std::cout &lt;&lt; std::endl;
                b.PrikaziZaduzenja(cl_broj);
                std::cout &lt;&lt; std::endl;
            }catch(std::logic_error izuzetak){
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }
    }
    
	return 0;
}</pre>
</body>
</html>
