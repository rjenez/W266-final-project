<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4639.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4639.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;

<a name="0"></a><font color="#FF0000"><a href="match108-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_51.gif"/></a>

using namespace std;


struct Korisnik {
    string ime;
    string prezime;
    string adresa;
    string telefon;
    Korisnik(string ime, string prezime, string adresa, string telefon){
        this-&gt;ime = ime;
        this-&gt;prezime = prezime;
        this-&gt;adresa = adresa;
        this-&gt;telefon = telefon;
    }

};


class Knjiga {

private:
    string naslov;
    string pisac;
    string zanr;
    string godina_izdavanja;
    Korisnik *zaduzio = nullptr;

public:
    Knjiga(string naslov, string pisac, string zanr, string godina_izdavanja, Korisnik *zaduzio);
    string DajNaslov();
    string DajAutora();
    string DajZanr();
    string DajGodinuIzdavanja();
    Korisnik&amp; DajKodKogaJe();

    void ZaduziKnjigu(Korisnik&amp; korisnik);
    void RazduziKnjigu();
    bool DaLiJeZaduzena();
};

Knjiga::Knjiga(string naslov, string pisac, string zanr, string godina_izdavanja, Korisnik *zaduzio) {

    this-&gt;naslov = naslov;
    this-&gt;pisac = pisac;
    this-&gt;godina_izdavanja = godina_izdavanja;
    this-&gt;zaduzio = zaduzio;
    this-&gt;zanr = zanr;
}

string Knjiga::DajNaslov() {
    return naslov;
}

string Knjiga::DajAutora() {
    return pisac;
}

string Knjiga::DajZanr() {
    return zanr;
}

string Knjiga::DajGodinuIzdavanja() {
    return godina_izdavanja;
}

Korisnik&amp; Knjiga::DajKodKogaJe() {
    return *zaduzio;
}

void Knjiga::ZaduziKnjigu(Korisnik&amp; korisnik) {
    if(zaduzio != nullptr)
        throw logic_error("Knjiga vec zaduzena");
    if(&amp;korisnik == nullptr)
        throw logic_error("Korisnik nije nadjen");
    zaduzio = &amp;korisnik;
}

void Knjiga::RazduziKnjigu() {
    if(zaduzio == nullptr) {
        throw logic_error("Knjiga nije zaduzena");
    }
    zaduzio = nullptr;
}

bool Knjiga::DaLiJeZaduzena() {
    return (zaduzio != nullptr);
}



class Biblioteka {

private:
    map&lt;int, Korisnik*&gt; korisnici;
    map&lt;int, Knjiga*&gt; knjige;

public:
    Biblioteka();
    Biblioteka(Biblioteka &amp;b);
    map&lt;int, Korisnik*&gt; DajKorisnike();
    map&lt;int, Knjiga*&gt; DajKnjige();
    void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu(int evidencijski_broj, string naslov, string pisac, string zanr, string godina_izdavanja);

    Korisnik&amp; NadjiKorisnika(int clanski_broj);
    Knjiga&amp; NadjiKnjigu(int evidencijski_broj);

    void IzlistajKorisnike();
    void IzlistajKnjige();

    void RazduziKnjigu(int evidencijski_broj);
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);

    void PrikaziZaduzenja(int clanski_broj);

};

Biblioteka::Biblioteka() {
    //korisnici = new map&lt;int, &amp;Korisnik&gt;();
    //knjige = new map&lt;int, &amp;Knjiga&gt;();
}
Biblioteka::Biblioteka(Biblioteka &amp;b) {
    this-&gt;korisnici = b.DajKorisnike();
    this-&gt;knjige = b.DajKnjige();
}

map&lt;int, Korisnik*&gt; Biblioteka::DajKorisnike() {
    return korisnici;
}

map&lt;int, Knjiga*&gt; Biblioteka::DajKnjige() {
    return knjige;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon) {
    if(korisnici.count(clanski_broj) &gt; 0) {
        throw logic_error("Korisnik vec postoji");
    }
    Korisnik *k = new Korisnik(ime, prezime, adresa, telefon);
    korisnici.insert({ clanski_broj, k});

}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj, string naslov, string pisac, string zanr, string godina_izdavanja) {
    if(knjige.count(evidencijski_broj) &gt; 0) {
        throw logic_error("Knjiga vec postoji");
    }
    //Korisnik *k1 = nullptr;
    Knjiga *k = new Knjiga(naslov, pisac, zanr, godina_izdavanja, nullptr);
    knjige.insert({evidencijski_broj, k});
}

Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski_broj) {
    if(korisnici.count(clanski_broj) == 0) {
        throw logic_error("Korisnik nije nadjen");
    }
    return *korisnici[clanski_broj];
}

Knjiga&amp; Biblioteka::NadjiKnjigu(int evidencijski_broj) {
    if(knjige.count(evidencijski_broj) == 0) {
        throw logic_error("Knjiga nije nadjena");
    }
    return *knjige[evidencijski_broj];
}

void Biblioteka::IzlistajKorisnike() {

    int i =0;
    for (const auto&amp; k : korisnici) {
        cout &lt;&lt; "Clanski broj: " &lt;&lt; k.first &lt;&lt; endl;
        cout &lt;&lt; "Ime i prezime: " &lt;&lt; k.second-&gt;ime &lt;&lt; " " &lt;&lt; k.second-&gt;prezime &lt;&lt; endl;
        cout &lt;&lt; "Adresa: " &lt;&lt; k.second-&gt;adresa &lt;&lt; endl;
        cout &lt;&lt; "Broj telefona: " &lt;&lt; k.second-&gt;telefon &lt;&lt; endl;
        if( i != 0 &amp;&amp; ((i%2) == 0)) {
            cout &lt;&lt; endl;
        }
        i++;
    }
}


void Biblioteka::IzlistajKnjige() {

    int i =0;
    for (const auto&amp; k : knjige) {
        cout &lt;&lt; "Evidencijski broj: " &lt;&lt; k.first &lt;&lt; endl;
        cout &lt;&lt; "Naslov: " &lt;&lt; k.second-&gt;DajNaslov() &lt;&lt; endl;
        cout &lt;&lt; "Pisac: " &lt;&lt; k.second-&gt;DajAutora() &lt;&lt; endl;
</font><a name="2"></a><font color="#0000FF"><a href="match108-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_21.gif"/></a>

        cout &lt;&lt; "Zanr: " &lt;&lt; k.second-&gt;DajZanr() &lt;&lt; endl;
        cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.second-&gt;DajZanr() &lt;&lt; endl;
        if(k.second-&gt;DaLiJeZaduzena())
            cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; k.second-&gt;DajKodKogaJe().ime &lt;&lt; " " &lt;&lt; k.second-&gt;DajKodKogaJe().prezime &lt;&lt; endl;
        if( i != 0 &amp;&amp; ((i%2) == 0)) {
            cout &lt;&lt; endl;
        }
        i++;
    }
}

void Biblioteka::RazduziKnjigu(int evidencijski_broj) {
    if(knjige.count(evidencijski_broj) == 0)
        throw logic_error("Knjiga nije nadjena");

    if(!knjige[evidencijski_broj]-&gt;DaLiJeZaduzena())
        throw logic_error("Knjiga nije zaduzena");

    knjige[evidencijski_broj]-&gt;RazduziKnjigu();

}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj) {
    if(knjige.count(evidencijski_broj) == 0)
        throw logic_error("Knjiga nije nadjena");


    if(korisnici.count(clanski_broj) == 0)
        throw logic_error("Korisnik nije nadjen");


    knjige[evidencijski_broj]-&gt;ZaduziKnjigu(*korisnici[clanski_broj]);
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) {
    if(korisnici.count(clanski_broj) == 0)
        throw logic_error("Korisnik nije nadjen");

    int i =0;
    for (const auto&amp; k : knjige) {
        if(k.second-&gt;DaLiJeZaduzena() &amp;&amp; (k.second-&gt;DajKodKogaJe().ime == korisnici[clanski_broj]-&gt;ime) &amp;&amp; (k.second-&gt;DajKodKogaJe().prezime == korisnici[clanski_broj]-&gt;prezime)&amp;&amp; (k.second-&gt;DajKodKogaJe().telefon == korisnici[clanski_broj]-&gt;telefon)
           &amp;&amp; (k.second-&gt;DajKodKogaJe().adresa == korisnici[clanski_broj]-&gt;adresa)) {
            cout &lt;&lt; "Evidencijski broj: " &lt;&lt; k.first &lt;&lt; endl;
            cout &lt;&lt; "Naslov: " &lt;&lt; k.second-&gt;DajNaslov() &lt;&lt; endl;
            cout &lt;&lt; "Pisac: " &lt;&lt; k.second-&gt;DajAutora() &lt;&lt; endl;
</font><a name="1"></a><font color="#00FF00"><a href="match108-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

            cout &lt;&lt; "Zanr: " &lt;&lt; k.second-&gt;DajZanr() &lt;&lt; endl;
            cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.second-&gt;DajZanr() &lt;&lt; endl;
            if( i != 0 &amp;&amp; ((i%2) == 0)) {
                cout &lt;&lt; endl;
            }
            i++;
        }
    }
    if(i == 0) {
        cout &lt;&lt; "Nema zaduzenja za tog korisnika!\n";
    }
}

int main() {

    string ime, prezime, adresa, telefon;
    cout &lt;&lt; "Unesite korisnika: " &lt;&lt; endl;
    cout &lt;&lt; "Ime : ";
    getline(cin, ime);
    cout &lt;&lt; "Prezime: ";
    //cin.ignore(1000, '\n');
    getline(cin, prezime);
    cout &lt;&lt; "Adresa: ";
    //cin.ignore(1000, '\n');
    getline(cin, adresa);
    cout &lt;&lt; "Telefon: ";//cin.ignore(1000, '\n');
    getline(cin, telefon);
    //cin.ignore(1000, '\n');
    Biblioteka b;
    int clanski_broj;
    cout &lt;&lt; "Registracija korisnika: ";
    cout &lt;&lt; endl &lt;&lt; "Clanski broj: ";
    cin &gt;&gt; clanski_broj;
    b.RegistrirajNovogKorisnika(clanski_broj, ime, prezime, adresa, telefon);
    cin.ignore(1000, '\n');
    cout &lt;&lt; "Unesite knjigu: " &lt;&lt; endl;
    string naslov, pisac, zanr, godina_izdavanja;
    cout &lt;&lt; "Naslov: ";
    getline(cin, naslov);
    cout &lt;&lt; "Pisac: ";//cin.ignore(1000, '\n');
    getline(cin, pisac);
    cout &lt;&lt; "Zanr: ";//cin.ignore(1000, '\n');
    getline(cin, zanr);
    cout &lt;&lt; "Godina izdavanja: ";//cin.ignore(1000, '\n');
    getline(cin, godina_izdavanja);
    int evidencijski_br;
    cout &lt;&lt; "Evidencijski broj: " &lt;&lt; endl;
    cin &gt;&gt; evidencijski_br;

    b.RegistrirajNovuKnjigu(evidencijski_br, naslov, pisac, zanr, godina_izdavanja);

    b.ZaduziKnjigu(evidencijski_br, clanski_broj);

    cout &lt;&lt; "Pretraga korisnika(Clanski broj): " &lt;&lt; endl;
    int pretraga;
    cin &gt;&gt; pretraga;
    Korisnik k = b.NadjiKorisnika(pretraga);
    if( &amp;k == nullptr) {
        cout &lt;&lt; "Korisnik nije pronadjen" &lt;&lt; endl;
    }
    else cout &lt;&lt; "Korisnik je pronadjen" &lt;&lt; endl;


    cout &lt;&lt; "Pretraga Knjige(Evidencijski broj): " &lt;&lt; endl;
    cin &gt;&gt; pretraga;
    Knjiga kg = b.NadjiKnjigu(pretraga);
    if( &amp;k == nullptr) {
        cout &lt;&lt; "Knjiga nije pronadjena" &lt;&lt; endl;
    }
    else cout &lt;&lt; "Knjiga je pronadjena" &lt;&lt; endl;

    b.IzlistajKnjige();
    b.IzlistajKorisnike();

    b.PrikaziZaduzenja(clanski_broj);

    b.RazduziKnjigu(evidencijski_br);

    b.PrikaziZaduzenja(clanski_broj);
</font>


    return 0;
}</pre>
</body>
</html>
