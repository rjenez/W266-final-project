<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6953.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6973.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov_knjige, ime_pisca, zanr;
    int godina_izdanja;
    Korisnik *pok;
    public:
    Knjiga(std::string naslov_knjige, std::string ime_pisca, std::string zanr, int godina_izdanja) :
    naslov_knjige(naslov_knjige), ime_pisca(ime_pisca), zanr(zanr), godina_izdanja(godina_izdanja) {
        pok = nullptr;
    }
    std::string DajNaslov() const { return naslov_knjige;}
    std::string DajAutora() const {return ime_pisca;}
    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdanja;}
    Korisnik *DajKodKogaJe() const{
        return pok;
    }
    void ZaduziKnjigu(Korisnik &amp;k) {
        pok = &amp;k;
    }
    void RazduziKnjigu() {
        pok = nullptr;
    }
    bool DaLiJeZaduzena() {
        if(pok == nullptr) return false;
        else {
            return true;
        }
    }
};

class Biblioteka {
    std::map&lt;int , Korisnik *&gt; mapa_korisnik;
    std::map&lt;int , Knjiga *&gt; mapa_knjiga;
    public:
    Biblioteka() {}
    ~Biblioteka() {
        for(auto i = mapa_korisnik.begin(); i != mapa_korisnik.end(); i++) {
            delete i-&gt;second;
<a name="3"></a><font color="#00FFFF"><a href="match365-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            i-&gt;second = nullptr;
        }
        for(auto i = mapa_knjiga.begin(); i != mapa_knjiga.end(); i++) {
            delete i-&gt;second;
            i-&gt;second = nullptr;
        }
    }
    Biblioteka(const Biblioteka &amp;b);
</font>    Biblioteka(Biblioteka &amp;&amp;b);
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_mobitela);
    void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime_pisca, std::string zanr, int godina);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
    Knjiga &amp;NadjiKnjigu(int broj_knjige);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int broj_knjige, int clanski_broj);
    void RazduziKnjigu(int broj_knjige);
    void PrikaziZaduzenja(int clanski_broj);
};

<a name="1"></a><font color="#00FF00"><a href="match365-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

Biblioteka::Biblioteka(const Biblioteka &amp;b) {
    try{
        for(auto it = b.mapa_korisnik.begin(); it != b.mapa_korisnik.end(); it++) {
            mapa_korisnik.insert(std::make_pair(it-&gt;first, new Korisnik(*it-&gt;second)));
        }
        try{
            for(auto it = b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); it++) {
                mapa_knjiga.insert(std::make_pair(it-&gt;first, new Knjiga(*it-&gt;second)));
            }
        }
        catch(std::bad_alloc) {
            for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++) {
                delete it-&gt;second;
                it-&gt;second = nullptr;
            }
        }
    }
    catch(std::bad_alloc) {
        for(auto it = mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
           delete it-&gt;second;
           it-&gt;second = nullptr;
</font>        }
    }
}

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b){
    mapa_knjiga = std::move(b.mapa_knjiga);
    mapa_korisnik = std::move(b.mapa_korisnik);
}

<a name="0"></a><font color="#FF0000"><a href="match365-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_11.gif"/></a>

Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b){
    if(&amp;b != this) {
        for(auto i = mapa_korisnik.begin(); i != mapa_korisnik.end(); i++) {
            delete i-&gt;second;
            i-&gt;second = nullptr;
        }
        for(auto i = mapa_knjiga.begin(); i != mapa_knjiga.end(); i++) {
            delete i-&gt;second;
            i-&gt;second = nullptr;
        }
        try{
        for(auto it = b.mapa_korisnik.begin(); it != b.mapa_korisnik.end(); it++) {
            mapa_korisnik.insert(std::make_pair(it-&gt;first, new Korisnik(*it-&gt;second)));
        }
        try{
            for(auto it = b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); it++) {
                mapa_knjiga.insert(std::make_pair(it-&gt;first, new Knjiga(*it-&gt;second)));
            }
        }
        catch(std::bad_alloc) {
            for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++) {
                delete it-&gt;second;
                it-&gt;second = nullptr;
            }
        }
    }
    catch(std::bad_alloc) {
        for(auto it = mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
           delete it-&gt;second;
           it-&gt;second = nullptr;
</font>        }
    }
    }
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b) {
    if(&amp;b != this) {
        for(auto i = mapa_korisnik.begin(); i != mapa_korisnik.end(); i++) {
            delete i-&gt;second;
            i-&gt;second = nullptr;
        }
        for(auto i = mapa_knjiga.begin(); i != mapa_knjiga.end(); i++) {
            delete i-&gt;second;
            i-&gt;second = nullptr;
        }
        mapa_knjiga = std::move(b.mapa_knjiga);
        mapa_korisnik = std::move(b.mapa_korisnik);
    }
    return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_mobitela) {
    bool ok(false);
    for(auto it = mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
        if(it-&gt;first == clanski_broj) {
            ok = true;
            break;
        }
    }
    if(ok == true) throw std::logic_error("Korisnik vec postoji");
   /* Korisnik k;
    k.ime = ime;
    k.prezime = prezime;
    k.adresa = adresa;
    k.telefon = broj_mobitela;*/
    mapa_korisnik.insert(std::make_pair(clanski_broj, new Korisnik{ime, prezime, adresa, broj_mobitela}));
}

void Biblioteka::RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime_pisca, std::string zanr, int godina){
    bool ok(false);
    for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++) {
        if(it-&gt;first == broj_knjige) {
            ok = true;
            break;
        }
    }
    if(ok == true) throw  std::logic_error("Knjiga vec postoji");
    //Knjiga k(naslov, ime_pisca, zanr, godina);
    mapa_knjiga.insert(std::make_pair(broj_knjige, new Knjiga(naslov, ime_pisca, zanr, godina)));
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) {
    bool ok(false);
    for(auto it=mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
        if(it-&gt; first == clanski_broj) {
            ok = true;
            //std::cout &lt;&lt; "aaa";
            return *(it-&gt;second);
        }
    }
    if(ok == false) throw std::logic_error("Korisnik nije nadjen");
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int broj_knjige){
    bool ok(false);
    for(auto it=mapa_knjiga.begin(); it != mapa_knjiga.end(); it++) {
        if(it-&gt; first == broj_knjige) {
            ok = true;
            return *it-&gt;second;
        }
    }
    if(ok == false) throw std::logic_error("Knjiga nije nadjen");
}

void Biblioteka::IzlistajKorisnike() const {
    for(auto it = mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt;it-&gt;second-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::IzlistajKnjige() const{
    for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++) {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena() == true || it-&gt;second-&gt;DaLiJeZaduzena() == 1) 
        std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int broj_knjige, int clanski_broj) {
    bool knjiga(false),clan(false),zaduzena(false);
    for(auto it=mapa_knjiga.begin(); it != mapa_knjiga.end(); it++) {
        if(it-&gt;first == broj_knjige) {
            knjiga = true;
        }
        /*if(it-&gt;second-&gt;DaLiJeZaduzena() == 1) {
            std::cout &lt;&lt; "aaa" &lt;&lt; std::endl;
            zaduzena = true;
        }*/
    }
    if(knjiga == false || broj_knjige &lt; 0) throw std::logic_error("Knjiga nije nadjena");
    for(auto it=mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
        if(it-&gt;first == clanski_broj) {
            clan = true;
            break;
        }
    }
    if(clan == false || clanski_broj &lt; 0) throw std::logic_error("Korisnik nije nadjena");
    if(zaduzena == true) throw std::logic_error("knjiga vec zaduzena");
    mapa_knjiga[broj_knjige]-&gt;ZaduziKnjigu(NadjiKorisnika(clanski_broj));
}

void Biblioteka::RazduziKnjigu(int broj_knjige){
    try{
        NadjiKnjigu(broj_knjige);
    }
    catch(std::logic_error) {
        throw std::logic_error("Knjiga nije nadjena");
    }
    if(mapa_knjiga[broj_knjige] == nullptr) throw std::logic_error("Knjiga nije zaduzena");
    mapa_knjiga[broj_knjige] = nullptr;
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj){
    try{
        NadjiKorisnika(clanski_broj);
    }
    catch (std::logic_error) {
        throw std::logic_error("Korisnik nije nadjen");
    }
    int br{};
<a name="2"></a><font color="#0000FF"><a href="match365-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    for(auto it=mapa_korisnik.begin(); it != mapa_korisnik.end(); it++) {
        if(it-&gt;first  == clanski_broj) {
            for(auto j=mapa_knjiga.begin(); j != mapa_knjiga.end(); j++) {
                if(it-&gt;second == j-&gt;second-&gt;DajKodKogaJe()) {
</font>                    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; j-&gt;first &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Naslov: " &lt;&lt; j-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Pisac: " &lt;&lt; j-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Zanr: " &lt;&lt; j-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; j-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                    std::cout &lt;&lt; std::endl;
                    br++;
                }
            }
        }
    }
    if(br == 0)  std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
}

int main ()
{

	return 0;
}</pre>
</body>
</html>
