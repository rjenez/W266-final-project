<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7492.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7492.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;

struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga{
    std::string naslov;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    Korisnik *pok=nullptr;
    bool zaduzena=false;
    friend class Biblioteka;
public:
    Knjiga(std::string naslov,std::string ime_pisca, std::string zanr, int godina_izdavanja): naslov(naslov), ime_pisca(ime_pisca),zanr(zanr),godina_izdavanja(godina_izdavanja){};
    std::string DajNaslov()  const{ return naslov;}
    std::string DajAutora()  const{ return ime_pisca;}
    std::string DajZanr()    const{ return zanr;}
    int DajGodinuIzdavanja() const{ return godina_izdavanja;}
    Korisnik *DajKodKogaJe() const{ return pok;}
    void ZaduziKnjigu (Korisnik &amp;korisnik) {pok=&amp;korisnik; zaduzena=true;}
    void RazduziKnjigu(){pok=nullptr; zaduzena=false;};
    bool DaLiJeZaduzena(){ return zaduzena;}
   
};

<a name="7"></a><font color="#0000FF"><a href="match453-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; mapa_korisnika;
    std::map&lt;int,Knjiga*&gt; mapa_knjiga;
public:
    Biblioteka(){};
    ~Biblioteka(){ for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end();++it){delete it-&gt;second;}
</font>                for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end();++it) delete it-&gt;second;}
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
    void RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja);
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj); 
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
    void RazduziKnjigu(int evidencijski_broj);
    void PrikaziZaduzenja(int clanski_broj);
    
};
<a name="5"></a><font color="#FF0000"><a href="match453-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
    for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end();++it){
</font>        if(it-&gt;first==clanski_broj){
<a name="6"></a><font color="#00FF00"><a href="match453-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            throw std::logic_error("Korisnik vec postoji");
        }
    }
    Korisnik *pok=new Korisnik;
    pok-&gt;ime=ime;
    pok-&gt;prezime=prezime;
    pok-&gt;adresa=adresa;
    pok-&gt;telefon=telefon;
</font><a name="2"></a><font color="#0000FF"><a href="match453-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    mapa_korisnika.insert(std::make_pair(clanski_broj,pok));
    //delete pok;
}
void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj,std::string naslov,std::string ime_pisca, std::string zanr, int godina_izdavanja){
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end();++it){
</font>        if(it-&gt;first==evidencijski_broj){
            throw std::logic_error("Knjiga vec postoji");
        }
    }
    Knjiga *pok=new Knjiga(naslov,ime_pisca,zanr,godina_izdavanja);
    mapa_knjiga.insert(std::make_pair(evidencijski_broj,pok));
    //pok=nullptr;
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj){
    bool pomoc(false);
    for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end();++it){
        if(it-&gt;first==clanski_broj){
            pomoc=true;
            break;
        }
    }
    if(pomoc==false) throw std::logic_error("Korisnik nije nadjen");
    return *mapa_korisnika[clanski_broj];
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj){
    bool pomoc(false);
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end();++it){
        if(it-&gt;first==evidencijski_broj){
            pomoc=true;
            break;
        }
    }
    if(pomoc==false) throw std::logic_error("Knjiga nije nadjena");
    return *mapa_knjiga[evidencijski_broj];
}
void Biblioteka::IzlistajKorisnike() const{
    for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end();++it){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const{
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); ++it){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()==true){
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
        }
    }
}
void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj){
    bool pomoc(false);
    bool pomoc1(false);
    for(auto it=mapa_korisnika.begin();it!=mapa_korisnika.end();++it){
        if(it-&gt;first == clanski_broj){
            pomoc=true;
            break;
        }
    }
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end();++it){
        if(it-&gt;first==evidencijski_broj){
            pomoc1=true;
            break;
        }
    }
    if(pomoc1==false) throw std::logic_error("Knjiga nije nadjena");
    if(pomoc==false) throw std::logic_error("Korisnik nije nadjen");
    if(mapa_knjiga[evidencijski_broj]-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga vec zaduzena");
    mapa_knjiga[evidencijski_broj]-&gt;ZaduziKnjigu(*mapa_korisnika[clanski_broj]);
}
void Biblioteka::RazduziKnjigu(int evidencijski_broj){
    if(mapa_knjiga[evidencijski_broj]-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
    bool pomoc(false);
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end();++it){
        if(it-&gt;first==evidencijski_broj){
            pomoc=true;
            break;
        }
    }
    if(pomoc==false) throw std::logic_error("Knjiga nije nadjena");
<a name="0"></a><font color="#FF0000"><a href="match453-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    mapa_knjiga[evidencijski_broj]-&gt;RazduziKnjigu();
}

Biblioteka::Biblioteka(const Biblioteka &amp;b){
    for(auto it=b.mapa_korisnika.begin(); it!=b.mapa_korisnika.end();it++){
        Korisnik *k=new Korisnik;
        k-&gt;ime=it-&gt;second-&gt;ime;
        k-&gt;prezime=it-&gt;second-&gt;prezime;
        k-&gt;adresa=it-&gt;second-&gt;adresa;
</font>        k-&gt;telefon=it-&gt;second-&gt;telefon;
        mapa_korisnika[it-&gt;first]=k;
    }
    for(auto it=b.mapa_knjiga.begin(); it!=b.mapa_knjiga.end();it++){
        mapa_knjiga[it-&gt;first]=new Knjiga(it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja());
    }  
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;b){
    for(auto it=b.mapa_korisnika.begin();it != b.mapa_korisnika.end();++it){
        mapa_korisnika[it-&gt;first]=it-&gt;second;
        it-&gt;second=nullptr;
    }
    for(auto it=b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); ++it){
        mapa_knjiga[it-&gt;first]=it-&gt;second;
        it-&gt;second=nullptr;
    }
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){
    if(&amp;b != this){
        for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end();++it){
            delete it-&gt;second;
            it-&gt;second=nullptr;
            mapa_korisnika.erase(it);
        }
        for(auto it=b.mapa_korisnika.begin(); it != mapa_korisnika.end();++it){
<a name="8"></a><font color="#00FFFF"><a href="match453-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

            Korisnik *k=new Korisnik;
            k-&gt;ime=it-&gt;second-&gt;ime;
            k-&gt;prezime=it-&gt;second-&gt;prezime;
            k-&gt;adresa=it-&gt;second-&gt;prezime;
</font>            k-&gt;telefon=it-&gt;second-&gt;prezime;
            mapa_korisnika.insert(std::make_pair(it-&gt;first,k));
        }
        for(auto it=mapa_knjiga.begin(); it != mapa_knjiga.end();++it){
            delete it-&gt;second;
            it-&gt;second=nullptr;
            mapa_knjiga.erase(it);
        }
        for(auto it=b.mapa_knjiga.begin(); it!=b.mapa_knjiga.end();++it){
            Knjiga *p(new Knjiga(it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja()));
            mapa_knjiga.insert(std::make_pair(it-&gt;first,p));
        }
        return *this;
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b){
    if(&amp;b != this){
        for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end();++it){
            delete it-&gt;second;
            it-&gt;second=nullptr;
            mapa_korisnika.erase(it);
        }
        for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end();++it){
            delete it-&gt;second;
            it-&gt;second=nullptr;
            mapa_knjiga.erase(it);
        }
        for(auto it=b.mapa_korisnika.begin(); it!=b.mapa_korisnika.end();++it){
            mapa_korisnika.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        for(auto it=b.mapa_knjiga.begin();it!=mapa_knjiga.end();++it){
            mapa_knjiga.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        return *this;
    }
    return *this;
}
void Biblioteka::PrikaziZaduzenja(int clanski_broj){
   
auto i = mapa_korisnika.find(clanski_broj);
if(i == mapa_korisnika.end())
    throw std::domain_error("Korisnik nije nadjen");
    bool ima = false;
    for(auto j : mapa_knjiga){
        if(j.second -&gt; DajKodKogaJe() != nullptr &amp;&amp; i-&gt;second-&gt;ime == j.second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; i-&gt;second-&gt;prezime == j.second-&gt;DajKodKogaJe()-&gt;prezime &amp;&amp; i-&gt;second-&gt;adresa == j.second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; i-&gt;second-&gt;telefon == j.second-&gt;DajKodKogaJe()-&gt;telefon){
            ima = true;
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;j.first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov "&lt;&lt;j.second-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;j.second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;j.second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;j.second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
        }}
        if(ima == false){
            std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
        }
    }

int main ()
{
    
    Biblioteka biblioteka;
    std::cout&lt;&lt;"Unesite opciju: "&lt;&lt;std::endl;
    int opcija(0);
    for(;;){
    std::cout&lt;&lt;" 0 - za kraj"&lt;&lt;std::endl&lt;&lt;" 1 - unesi novog korisnika"&lt;&lt;std::endl&lt;&lt;" 2 - unesi novu knjigu"&lt;&lt;std::endl&lt;&lt;" 3 - nadji korisnika"&lt;&lt;std::endl;
    std::cout&lt;&lt;" 4 - nadji knjigu"&lt;&lt;std::endl&lt;&lt;" 5 - izlistaj korisnike"&lt;&lt;std::endl&lt;&lt;" 6 - izlistaj knjige"&lt;&lt;std::endl&lt;&lt;" 7 - zaduzi knjigu"&lt;&lt;std::endl;
    std::cout&lt;&lt;" 8 - razduzi knjigu"&lt;&lt;std::endl&lt;&lt;" 9 - prikazi zaduzenja"&lt;&lt;std::endl;
    std::cin&gt;&gt;opcija;
    if(opcija==0) return 0;
    else if(opcija==1){
        int clanski_broj;
        std::string ime,prezime,adresa,telefon;
        try{
        std::cout&lt;&lt;"Unesite clanski broj: ";
        std::cin&gt;&gt;clanski_broj;
        std::cin.clear();
        std::cin.ignore(1000,'\n');
        std::cout&lt;&lt;"Unesite ime korisnika: ";
        std::getline(std::cin,ime);
        std::cout&lt;&lt;"Unesite prezime korisnika: ";
        std::getline(std::cin,prezime);
        std::cout&lt;&lt;"Unesite adresu korisnika: ";
<a name="3"></a><font color="#00FFFF"><a href="match453-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::getline(std::cin,adresa);
        std::cout&lt;&lt;"Unesite telefon korisnika: ";
        std::getline(std::cin,telefon);
        biblioteka.RegistrirajNovogKorisnika(clanski_broj,ime,prezime,adresa,telefon);
        std::cout&lt;&lt;"Korisnik uspjesno dodan!"&lt;&lt;std::endl;}
</font>        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==5){
        biblioteka.IzlistajKorisnike();
    }
    else if(opcija==6){
        biblioteka.IzlistajKnjige();
    }
    else if(opcija==2){
        
        int evidencijski_broj,godina_izdavanja;
        std::string naslov,ime_pisca,zanr;
        try{
        std::cout&lt;&lt;"Unesite evidencijski broj: ";
        std::cin&gt;&gt;evidencijski_broj;
        std::cin.clear();
        std::cin.ignore(1000,'\n');
        std::cout&lt;&lt;"Unesite naslov knjige: ";
        std::getline(std::cin,naslov);
        std::cout&lt;&lt;"Unesite ime autora knjige: ";
<a name="1"></a><font color="#00FF00"><a href="match453-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        std::getline(std::cin,ime_pisca);
        std::cout&lt;&lt;"Unesite zanr knjige: ";
        std::getline(std::cin,zanr);
        std::cout&lt;&lt;"Unesite godinu izdavanja: ";
        std::cin&gt;&gt;godina_izdavanja;
        biblioteka.RegistrirajNovuKnjigu(evidencijski_broj,naslov,ime_pisca,zanr,godina_izdavanja);
        std::cout&lt;&lt;"Knjiga uspjesno dodana!"&lt;&lt;std::endl;}
</font>        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==3){
        int clanski(0);
        std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
        std::cin&gt;&gt;clanski;
        try{
            Korisnik korisnik=biblioteka.NadjiKorisnika(clanski);
            std::cout&lt;&lt;"Korisnik sa clanskim brojem "&lt;&lt;clanski&lt;&lt;" je: "&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime: "&lt;&lt;korisnik.ime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Prezime: "&lt;&lt;korisnik.prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;korisnik.adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Telefon: "&lt;&lt;korisnik.telefon&lt;&lt;std::endl;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==4){
        int evidencijski(0);
        std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
        std::cin&gt;&gt;evidencijski;
        try{
            Knjiga knjiga=biblioteka.NadjiKnjigu(evidencijski);
            std::cout&lt;&lt;"Knjiga sa evidencijskim brojem "&lt;&lt;evidencijski&lt;&lt;" je: "&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;knjiga.DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime autora: "&lt;&lt;knjiga.DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;knjiga.DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;knjiga.DajGodinuIzdavanja()&lt;&lt;std::endl;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==7){
        int evidencijski_broj(0);
        int clanski_broj(0);
        try{
<a name="4"></a><font color="#FF00FF"><a href="match453-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::cout&lt;&lt;"Unesite evidencijski broj: ";
        std::cin&gt;&gt;evidencijski_broj;
        std::cout&lt;&lt;"Unesite clanski broj: ";
        std::cin&gt;&gt;clanski_broj;
        biblioteka.ZaduziKnjigu(evidencijski_broj,clanski_broj);
        std::cout&lt;&lt;"Knjiga uspjesno zaduzena!"&lt;&lt;std::endl;    
</font>        }
        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==8){
        int evidencijski_broj;
        std::cout&lt;&lt;"Unesite evidencijski broj: ";
        std::cin&gt;&gt;evidencijski_broj;
        try{
            biblioteka.RazduziKnjigu(evidencijski_broj);
            std::cout&lt;&lt;"Knjiga uspjesno razduzena!"&lt;&lt;std::endl;
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==9){
        int clanski_broj;
        std::cout&lt;&lt;"Unesite clanski broj: ";
        std::cin&gt;&gt;clanski_broj;
        try{
            biblioteka.PrikaziZaduzenja(clanski_broj);
        }
        catch(std::logic_error e){
            std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    else if(opcija==10){
        Biblioteka g;
        g.Biblioteka::operator=(biblioteka);
        g.IzlistajKorisnike();
    }
    }
	return 0;
}</pre>
</body>
</html>
