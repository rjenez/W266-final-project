<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1639.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1639.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match200-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_63.gif"/></a>

using namespace std;

struct Korisnik {
    string ime, prezime, adresa, telefon;
    Korisnik (string ime, string prezime, string adresa, string telefon) {
        Korisnik::ime=ime;
        Korisnik::prezime=prezime;
        Korisnik::adresa=adresa;
        Korisnik::telefon=telefon;
    }
};

class Knjiga {
    string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik* kod_koga_je;
    public:
    Knjiga (string naslov, string ime_pisca, string zanr, int godina_izdavanja, Korisnik*kod_koga_je=nullptr) {
        Knjiga::naslov=naslov;
        Knjiga::ime_pisca=ime_pisca;
        Knjiga::zanr=zanr;
        Knjiga::godina_izdavanja=godina_izdavanja;
        Knjiga::kod_koga_je=kod_koga_je;
    }
    string DajNaslov() const {return naslov;}
    string DajAutora() const {return ime_pisca;}
    string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdavanja;}
    Korisnik* DajKodKogaJe() const {return kod_koga_je;}
    void ZaduziKnjigu(Korisnik&amp; zaduzio) {
        kod_koga_je=&amp;zaduzio;
    }
    void RazduziKnjigu() {
        kod_koga_je=nullptr;
    }
    bool DaLiJeZaduzena() const {
        if(kod_koga_je==nullptr) return false;
        return true;
    }
    
};

class Biblioteka {
    map&lt;long int, Korisnik*&gt; korisnici;
    map&lt;long int, Knjiga*&gt; knjige;
    public:
    ~Biblioteka() {
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++)
            delete i-&gt;second;
            
        for(auto i=knjige.begin(); i!=knjige.end(); i++)
            delete i-&gt;second;
            
    }
    void RegistrirajNovogKorisnika(long int clanski_broj, string ime, string prezime, string adresa, string telefon) {
        if(korisnici.size()!=0 and korisnici.find(clanski_broj)!=korisnici.end()) throw logic_error ("Korisnik vec postoji");
        korisnici.insert(make_pair(clanski_broj, new Korisnik(ime,prezime,adresa,telefon)));
 
    }
    void RegistrirajNovuKnjigu (long int evidencijski_broj, string naslov, string ime_pisca, string zanr, int godina_izdavanja) {
        
        if(knjige.size()!=0 and knjige.find(evidencijski_broj)!=knjige.end()) throw logic_error("Knjiga vec postoji");
        knjige.insert(make_pair(evidencijski_broj, new Knjiga(naslov,ime_pisca,zanr,godina_izdavanja)));
    }
    
    Korisnik&amp; NadjiKorisnika (long int clanski_broj) const {
        if(korisnici.size()==0 or korisnici.find(clanski_broj)==korisnici.end()) throw logic_error("Korisnik nije nadjen");
        auto it (korisnici.find(clanski_broj));
        return *(it-&gt;second);
    }
    Knjiga&amp; NadjiKnjigu (long int evidencijski_broj) const {
        if(knjige.size()==0 or knjige.find(evidencijski_broj)==knjige.end()) throw logic_error("Knjiga nije nadjena");
        auto it (knjige.find(evidencijski_broj));
        return *(it-&gt;second);
    }
    void IzlistajKorisnike () const {
        for(auto i=korisnici.begin(); i!=korisnici.end(); i++) {
            cout &lt;&lt; "Clanski broj: " &lt;&lt; i-&gt;first &lt;&lt; endl &lt;&lt; "Ime i prezime: " &lt;&lt; i-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; i-&gt;second-&gt;prezime &lt;&lt; endl
            &lt;&lt; "Adresa: " &lt;&lt; i-&gt;second-&gt;adresa &lt;&lt; endl &lt;&lt; "Broj telefona: " &lt;&lt; i-&gt;second-&gt;telefon &lt;&lt; endl &lt;&lt; endl;
        } 
    }
    void IzlistajKnjige () const { 
        for(auto i=knjige.begin(); i!=knjige.end(); i++) {
            cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i-&gt;first &lt;&lt; endl &lt;&lt; "Naslov: " &lt;&lt; i-&gt;second-&gt;DajNaslov() &lt;&lt; endl &lt;&lt; "Pisac: " &lt;&lt; i-&gt;second-&gt;DajAutora()
</font><a name="1"></a><font color="#00FF00"><a href="match200-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_28.gif"/></a>

            &lt;&lt; endl &lt;&lt; "Zanr: " &lt;&lt; i-&gt;second-&gt;DajZanr() &lt;&lt; endl &lt;&lt; "Godina izdavanja: " &lt;&lt; i-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
            if(i-&gt;second-&gt;DajKodKogaJe()) cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; i-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; i-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; endl; 
            cout &lt;&lt; endl;
        }
    }
    void ZaduziKnjigu(long int evidencijski_broj, long int clanski_broj) {
        if(knjige.size()!=0 and knjige.find(evidencijski_broj)==knjige.end()) throw logic_error("Knjiga nije nadjena");
        if(korisnici.size()!=0 and korisnici.find(clanski_broj)==korisnici.end()) throw logic_error("Korisnik nije nadjen");
        if(knjige.find(evidencijski_broj)-&gt;second-&gt;DajKodKogaJe()) throw logic_error("Knjiga vec zaduzena");
        
        Knjiga&amp; knjiga(NadjiKnjigu(evidencijski_broj));
        Korisnik&amp; korisnik(NadjiKorisnika(clanski_broj));
        knjiga.Knjiga::ZaduziKnjigu(korisnik);
    }
    void RazduziKnjigu(long int evidencijski_broj) {
        if(knjige.size()!=0 and knjige.find(evidencijski_broj)==knjige.end()) throw logic_error("Knjiga nije nadjena");
        Knjiga knjiga(NadjiKnjigu(evidencijski_broj));
        knjiga.Knjiga::RazduziKnjigu();
    }
    void PrikaziZaduzenja (long int clanski_broj) {
        int brojac(0);
        for(auto i=knjige.begin(); i!=knjige.end(); i++) {
            if(i-&gt;second-&gt;DajKodKogaJe()==korisnici.find(clanski_broj)-&gt;second) {
                 cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i-&gt;first &lt;&lt; endl &lt;&lt; "Naslov: " &lt;&lt; i-&gt;second-&gt;DajNaslov() &lt;&lt; endl &lt;&lt; "Pisac: " &lt;&lt; i-&gt;second-&gt;DajAutora()
</font><a name="2"></a><font color="#0000FF"><a href="match200-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

                    &lt;&lt; endl &lt;&lt; "Zanr: " &lt;&lt; i-&gt;second-&gt;DajZanr() &lt;&lt; endl &lt;&lt; "Godina izdavanja: " &lt;&lt; i-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
                    brojac++;
                }
                
            }
       if(brojac==0) cout &lt;&lt; "Nema zaduzenja za tog korisnika!"; 
</font>   
    }
    
};

int main ()
{
	return 0;
}</pre>
</body>
</html>
