<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2386.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2386.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: student2386@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;type_traits&gt;

struct Korisnik {
  std::string ime, prezime, adresa, telefon;
};

class Knjiga {
  std::string naslov, pisac, zanr;
  int godina;
  Korisnik *zaduzenje;
public:
  Knjiga(std::string naslov, std::string pisac, std::string zanr, int godina) :
    naslov(naslov), pisac(pisac), zanr(zanr), godina(godina), zaduzenje(nullptr) {}
  std::string DajNaslov() const { return naslov; }
  std::string DajAutora() const { return pisac; }
  std::string DajZanr() const { return zanr; }
  int DajGodinuIzdavanja() const { return godina; }
<a name="0"></a><font color="#FF0000"><a href="match166-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_57.gif"/></a>

  Korisnik *DajKodKogaJe() const { return zaduzenje; }
  void ZaduziKnjigu(Korisnik &amp;ko) { zaduzenje = &amp;ko; }
  void RazduziKnjigu() { zaduzenje = nullptr; }
  bool DaLiJeZaduzena() const { return zaduzenje != nullptr; }
};

class Biblioteka {
  std::map&lt;int, Korisnik*&gt; korisnici;
  std::map&lt;int, Knjiga*&gt; knjige;
public:
  Biblioteka() = default;
  ~Biblioteka();
  Biblioteka(const Biblioteka &amp;b);
  Biblioteka(Biblioteka &amp;&amp;b) = default;
  Biblioteka &amp;operator =(Biblioteka b);
  void RegistrirajNovogKorisnika(int clanski_broj, std::string ime,
    std::string prezime, std::string adresa, std::string telefon);
  void RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov,
    std::string pisac, std::string zanr, int godina);
  Korisnik &amp;NadjiKorisnika(int clanski_broj);
  const Korisnik &amp;NadjiKorisnika(int clanski_broj) const;
  Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
  const Knjiga &amp;NadjiKnjigu(int evidencijski_broj) const;
  void IzlistajKorisnike() const;
  void IzlistajKnjige() const;
  void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
  void RazduziKnjigu(int evidencijski_broj);
  void PrikaziZaduzenja(int clanski_broj) const;
};

Biblioteka::~Biblioteka() {
  for(auto par : korisnici) delete par.second;
  for(auto par : knjige) delete par.second;
}

Biblioteka::Biblioteka(const Biblioteka &amp;b) {
  try {
    for(auto par : b.korisnici) korisnici[par.first] = new Korisnik(*par.second);
    for(auto par : b.knjige) knjige[par.first] = new Knjiga(*par.second);
  }
  catch(...) {
    for(auto par : korisnici) delete par.second;
    for(auto par : knjige) delete par.second;
  }
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka b) {
  std::swap(korisnici, b.korisnici); std::swap(knjige, b.knjige);
  return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime,
  std::string prezime, std::string adresa, std::string telefon) {
    if(korisnici.count(clanski_broj) != 0)
      throw std::logic_error("Korisnik vec postoji");
    korisnici[clanski_broj] = new Korisnik{ime, prezime, adresa, telefon};
}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov,
  std::string pisac, std::string zanr, int godina) {
    if(knjige.count(evidencijski_broj) != 0)
      throw std::logic_error("Knjiga vec postoji");
    knjige[evidencijski_broj] = new Knjiga(naslov, pisac, zanr,godina);
  }

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) {
  auto it(korisnici.find(clanski_broj));
  if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  return *(it-&gt;second);
}

const Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) const {
  auto it(korisnici.find(clanski_broj));
  if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  return *(it-&gt;second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj) {
  auto it(knjige.find(evidencijski_broj));
  if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  return *(it-&gt;second);
}

const Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj) const {
  auto it(knjige.find(evidencijski_broj));
  if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  return *(it-&gt;second);
}

void Biblioteka::IzlistajKorisnike() const {
  auto it(korisnici.begin());
  while(it != korisnici.end()) {
    std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl
      &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl
      &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl
      &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
    it++;
    if(it != korisnici.end()) std::cout &lt;&lt; std::endl;
  }
}

void Biblioteka::IzlistajKnjige() const {
  auto it(knjige.begin());
  while(it != knjige.end()) {
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl
      &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl
</font>      &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl
<a name="1"></a><font color="#00FF00"><a href="match166-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

      &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl
      &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
    if(it-&gt;second-&gt;DajKodKogaJe())
      std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime
        &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
    it++;
    if(it != knjige.end()) std::cout &lt;&lt; std::endl;
  }
}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj) {
  auto it_knjige(knjige.find(evidencijski_broj));
  if(it_knjige == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  auto it_korisnik(korisnici.find(clanski_broj));
  if(it_korisnik == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  if(it_knjige-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
  it_knjige-&gt;second-&gt;ZaduziKnjigu(*it_korisnik-&gt;second);
}

void Biblioteka::RazduziKnjigu(int evidencijski_broj) {
  auto it_knjige(knjige.find(evidencijski_broj));
  if(it_knjige == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  if(!it_knjige-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
  it_knjige-&gt;second-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) const {
  auto it1(korisnici.find(clanski_broj));
  if(it1 == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  auto it2(knjige.begin());
  bool ima_zaduzenja(false);
  while(it2 != knjige.end()) {
    if(it2-&gt;second-&gt;DajKodKogaJe() == it1-&gt;second) {
      if(ima_zaduzenja) std::cout &lt;&lt; std::endl;
      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it2-&gt;first &lt;&lt; std::endl
        &lt;&lt; "Naslov: " &lt;&lt; it2-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl
</font>        &lt;&lt; "Pisac: " &lt;&lt; it2-&gt;second-&gt;DajAutora() &lt;&lt; std::endl
<a name="2"></a><font color="#0000FF"><a href="match166-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        &lt;&lt; "Zanr: " &lt;&lt; it2-&gt;second-&gt;DajZanr() &lt;&lt; std::endl
        &lt;&lt; "Godina izdavanja: " &lt;&lt; it2-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
      ima_zaduzenja = true;
    }
    it2++;
  }
  if(!ima_zaduzenja) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
}



int main ()
{
	return 0;
</font>}</pre>
</body>
</html>
