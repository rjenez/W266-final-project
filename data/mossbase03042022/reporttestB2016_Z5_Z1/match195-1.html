<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6723.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6787.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
<a name="7"></a><font color="#0000FF"><a href="match195-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    Korisnik *pok; //informacija o zaduzenju
public:
    Knjiga(std::string naslovknjige, std::string pisac, std::string vrsta, int godina ){
        naslov=naslovknjige;
        ime_pisca=pisac;
        zanr=vrsta;
        godina_izdavanja=godina;
        pok=nullptr;
    }
    std::string DajNaslov() const {
        return naslov;
    }
    std::string DajAutora() const {
</font>        return ime_pisca;
    }
    std::string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godina_izdavanja;
    }
<a name="1"></a><font color="#00FF00"><a href="match195-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

    Korisnik *DajKodKogaJe() const {
        return pok;
    }
    void ZaduziKnjigu( Korisnik &amp;osoba) {
        pok=&amp;osoba;
    }
    void RazduziKnjigu() {
        pok=nullptr;
    }
    bool DaLiJeZaduzena() {
        if(pok==nullptr) return false;
        else return true;
    }
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string br_telefona) {
</font><a name="4"></a><font color="#FF00FF"><a href="match195-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

        auto it(korisnici.find(clanski_broj));
        if(it != korisnici.end()) throw std::logic_error("Korisnik vec postoji");
        Korisnik *pok=nullptr;
        try {
        pok=new Korisnik{ime, prezime, adresa, br_telefona};
        korisnici.insert(std::make_pair(clanski_broj, pok));
        }
        catch(...) {
            std::cout &lt;&lt; "Nedovoljno memorije";
            throw;
        }
        
    }
    void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja) {
</font><a name="3"></a><font color="#00FFFF"><a href="match195-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

        auto it(knjige.find(broj_knjige));
        if(it != knjige.end()) throw std::logic_error("Knjiga vec postoji");
        try {
        Knjiga *pok=new Knjiga(naslov, ime_pisca, zanr, godina_izdavanja);
        knjige.insert(std::make_pair(broj_knjige, pok));
        }
        catch(...) {
            std::cout &lt;&lt; "Nedovoljno memorije";
</font>            throw;
        }
        
    }
<a name="10"></a><font color="#FF0000"><a href="match195-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Korisnik &amp;NadjiKorisnika(int broj_korisnika) {
        auto it(korisnici.find(broj_korisnika));
        if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        else {
            return *it-&gt;second;
        }
    }
    Knjiga &amp;NadjiKnjigu(int broj_knjige) {
</font><a name="11"></a><font color="#00FF00"><a href="match195-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        auto it(knjige.find(broj_knjige));
        if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        else {
            return *it-&gt;second;
        }
        
    }
    void IzlistajKorisnike() {
</font>        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
            std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
            std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
        }
        
    }
    void IzlistajKnjige()  {
<a name="9"></a><font color="#FF00FF"><a href="match195-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

        for(auto it=knjige.begin(); it!=knjige.end(); it++) {
            std::cout &lt;&lt; std::endl &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="5"></a><font color="#FF0000"><a href="match195-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            if(it-&gt;second-&gt;DajKodKogaJe()!=nullptr) {
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
            }
        }
      
    }
    void ZaduziKnjigu(int ev_broj, int clanski_broj) {
</font>        auto it(knjige.find(ev_broj));
<a name="6"></a><font color="#00FF00"><a href="match195-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it1(korisnici.find(clanski_broj));
        if(it1 == korisnici.end()) throw std::logic_error("Korisnik nije nadjen"); 
        auto it2(knjige.find(ev_broj));
        if(it2-&gt;second-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga vec zaduzena");
        it2-&gt;second-&gt;ZaduziKnjigu(*(it1-&gt;second));
</font>    }
    void RazduziKnjigu(int ev_broj) {
<a name="8"></a><font color="#00FFFF"><a href="match195-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        auto it(knjige.find(ev_broj));
        if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it2(knjige.find(ev_broj));
        if(it2-&gt;second-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga vec zaduzena");
        it2-&gt;second-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int ev_broj) {
</font>            
            auto it1(korisnici.find(ev_broj));
            if(it1 == korisnici.end()) { throw std::logic_error("Korisnik nije nadjen"); } 
            while(it1!=korisnici.end()) {
<a name="12"></a><font color="#0000FF"><a href="match195-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cout &lt;&lt; std::endl &lt;&lt; "Evidencijski broj: " &lt;&lt; it1-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it1-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; it1-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; it1-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it1-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            it1=korisnici.find(ev_broj);
            }
    ~Biblioteka() {
        auto it=korisnici.begin();
        for(int i=0; i&lt;korisnici.size;i++) {
            delete it-&gt;second;
        }
    }  
    
    
};
int main ()
{
    Biblioteka nasa_biblioteka;
    int kraj=100;
    
<a name="13"></a><font color="#00FFFF"><a href="match195-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    while(kraj!=0) {
        std::cout &lt;&lt; "Unesite: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "1 za registraciju novog korisnika " &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "2 za registraciju nove knjige " &lt;&lt; std::endl;
        std::cout &lt;&lt; "3 za izlistavanje korisnika " &lt;&lt; std::endl;
        std::cout &lt;&lt; "4 za izlistavanje knjiga " &lt;&lt; std::endl;
        std::cout &lt;&lt; "5 za pronalazak korisnika " &lt;&lt; std::endl;
        std::cout &lt;&lt; "6 za pronalazak knjige " &lt;&lt; std::endl;
        std::cout &lt;&lt; "7 za zaduzivanje knjige " &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match195-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

        std::cout &lt;&lt; "8 za razduzivanje knjige " &lt;&lt; std::endl;
        std::cout &lt;&lt; "0 za kraj" &lt;&lt; std::endl;
        
        std::cin &gt;&gt; kraj;
        if(kraj==1) {
            int clanski_broj;
            std::cout &lt;&lt; "Unesite clanski broj_korisnika: ";
            std::string ime, prezime, adresa,telefon;
            std::cin &gt;&gt; clanski_broj;
            std::cin.ignore(1000, '\n');
            std::cout &lt;&lt; "Unesite ime korisnika: ";
            std::getline(std::cin, ime);
            std::cout &lt;&lt; "Unesite prezime korisnika: ";
</font>            std::getline(std::cin, prezime);
            std::cout &lt;&lt; "Unesite adresu korisnika: ";
<a name="0"></a><font color="#FF0000"><a href="match195-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_13.gif"/></a>

            std::getline(std::cin, adresa);
            std::cout &lt;&lt; "Unesite broj telefona korisnika: ";
            std::getline(std::cin, telefon);
            try {
            nasa_biblioteka.RegistrirajNovogKorisnika(clanski_broj, ime, prezime, adresa, telefon);
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
            }
            
        }
        if(kraj==2) {
            int broj_knjige;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            std::cin &gt;&gt; broj_knjige;
            std::cin.ignore(1000, '\n');
            std::string naslov, ime_pisca, zanr;
            int godina_izdavanja;
            std::cout &lt;&lt; "Unesite naslov knjige: ";
            std::getline(std::cin, naslov);
            std::cout &lt;&lt; "Unesite ime_pisca: ";
            std::getline(std::cin, ime_pisca);
            std::cout &lt;&lt; "Unesite zanr: ";
            std::getline(std::cin, zanr);
            std::cout &lt;&lt; "Unesite godinu izdavanja knjige: ";
            std::cin &gt;&gt; godina_izdavanja;
            
            nasa_biblioteka.RegistrirajNovuKnjigu(broj_knjige, naslov, ime_pisca, zanr, godina_izdavanja);
        }
        if(kraj==3) {
            nasa_biblioteka.IzlistajKorisnike();
        }
        if(kraj==4) {
            nasa_biblioteka.IzlistajKnjige();
        }
        if(kraj==7) {
</font>            std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            int ev_broj;
            std::cin &gt;&gt; ev_broj;
            std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
            int clanski_broj;
            std::cin &gt;&gt; clanski_broj;
            try {
                nasa_biblioteka.ZaduziKnjigu(ev_broj, clanski_broj);
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
            }
        }
    }
	return 0;
}</pre>
</body>
</html>
