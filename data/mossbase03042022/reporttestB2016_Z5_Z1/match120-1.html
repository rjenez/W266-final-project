<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6364.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4770.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};
class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int god_izd;
<a name="3"></a><font color="#00FFFF"><a href="match120-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_9.gif"/></a>

    Korisnik *korisnik;
public:
    Knjiga(std::string nasl, std::string ime, std::string z, int god) : korisnik(nullptr) {
        naslov = nasl; ime_pisca = ime; zanr = z; god_izd = god;
    }
    std::string DajNaslov() const {
        return naslov;
    }
    std::string DajAutora() const {
        return ime_pisca;
    }
    std::string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return god_izd;
    }
    Korisnik *DajKodKogaJe() {
        return korisnik;
    }
    void ZaduziKnjigu(Korisnik &amp;k) {
        korisnik = &amp;k;
    }
    void RazduziKnjigu() {
        korisnik = nullptr;
    }
    bool DaLiJeZaduzena() {
        return korisnik;
    }
};
class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; user;
    std::map&lt;int, Knjiga*&gt; book;
public:
    Biblioteka() {}
    Biblioteka &amp;operator = ( Biblioteka b);
    //Biblioteka &amp;operator = (Biblioteka &amp;&amp;b);
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
    ~Biblioteka();
    void RegistrirajNovogKorisnika(int clanski_br, std::string ime, std::string prezime, std::string adresa, std::string br);
</font>    void RegistrirajNovuKnjigu(int evid_br, std::string naslov, std::string ime_pisca, std::string zanr, int godina);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
<a name="5"></a><font color="#FF0000"><a href="match120-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

    Knjiga &amp;NadjiKnjigu(int ev_br);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int ev_br, int clan_br);
    void RazduziKnjigu(int ev_br);
    void PrikaziZaduzenja(int clanski_br);
    
};
void Biblioteka::PrikaziZaduzenja(int clanski_br) {
    bool ima(false), zaduzena(false);
    for(auto it = user.begin(); it != user.end(); it++)
        if(it-&gt;first == clanski_br)
            ima = true;
    if(!ima) throw std::logic_error("Korisnik nije nadjen");
    for(auto it = book.begin(); it != book.end(); it++)
        if(it-&gt;second-&gt;DajKodKogaJe() == user[clanski_br]) {
            zaduzena = true;
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match120-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    if(!zaduzena) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
}
void Biblioteka::RazduziKnjigu(int ev_br) {
    bool ima(false), zaduzena(false);
    for(auto it = book.begin(); it != book.end(); it++)
        if(it-&gt;first == ev_br)
        {
            ima = true;
            if(it-&gt;second-&gt;DaLiJeZaduzena()) zaduzena = true;
        }
    if(!ima) throw std::logic_error("Knjiga nije nadjena");
    if(!zaduzena) throw std::logic_error("Knjiga nije zaduzena");
    book[ev_br]-&gt;RazduziKnjigu();
}
void Biblioteka::ZaduziKnjigu(int ev_br, int clan_br) {
    bool ima(false), zaduzena(false);
    for(auto it = book.begin(); it != book.end(); it++)
        if(it-&gt;first == ev_br) 
        {
            ima = true;
            if(it-&gt;second-&gt;DaLiJeZaduzena()) zaduzena = true;
        }
    if(!ima) throw std::logic_error("Knjiga nije nadjena");
    ima = false;
    for(auto it = user.begin(); it != user.end(); it++) 
        if(it-&gt;first == clan_br) ima = true;
    if(!ima) throw std::logic_error("Korisnik nije nadjen");
    if(zaduzena) throw std::logic_error("Knjiga vec zaduzena");
    book[ev_br]-&gt;ZaduziKnjigu(*(user[clan_br]));
}
void Biblioteka::IzlistajKnjige() const {
    for(auto it = book.begin(); it != book.end(); it++)
    {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
<a name="6"></a><font color="#00FF00"><a href="match120-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKorisnike() const {
    for(auto it = user.begin(); it != user.end(); it++) 
</font>    {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match120-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_23.gif"/></a>

            std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_br) {
    for(auto it = book.begin(); it != book.end(); it++)
        if(it-&gt;first == ev_br) return *(it-&gt;second);
    throw std::logic_error("Knjiga nije nadjena");
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_br) {
    for(auto it = user.begin(); it != user.end(); it++)
        if(it-&gt;first == clanski_br) return *(it-&gt;second);
    throw std::logic_error("Korisnik nije nadjen");
}
void Biblioteka::RegistrirajNovogKorisnika(int clanski_br, std::string ime, std::string prezime, std::string adresa, std::string br) {
    for(auto it = user.begin(); it != user.end(); it++)
        if(it-&gt;first == clanski_br) throw std::logic_error("Korisnik vec postoji");
    user[clanski_br] = new Korisnik;
    user[clanski_br]-&gt;ime = ime; user[clanski_br]-&gt;prezime = prezime; user[clanski_br]-&gt;adresa = adresa; user[clanski_br]-&gt;telefon = br;
}
void Biblioteka::RegistrirajNovuKnjigu(int evid_br, std::string naslov, std::string ime_pisca, std::string zanr, int godina) {
    for(auto it = book.begin(); it != book.end(); it++)
        if(it-&gt;first == evid_br) throw std::logic_error("Knjiga vec postoji");
    book[evid_br] = new Knjiga(naslov, ime_pisca, zanr, godina);
}
Biblioteka::~Biblioteka() {
    for(auto it = user.begin(); it != user.end(); it++)
        delete it-&gt;second;
    user.clear();
    for(auto it = book.begin(); it != book.end(); it++)
        delete it-&gt;second;
    book.clear();
}
Biblioteka::Biblioteka (const Biblioteka &amp;b) {
    std::map&lt;int, Korisnik*&gt; tmp1;
    std::map&lt;int, Knjiga*&gt; tmp2;
    tmp1 = b.user; tmp2 = b.book;
    for(auto it = b.user.begin(); it != b.user.end(); it++)
        tmp1[it-&gt;first] = new Korisnik(*(it-&gt;second));
</font><a name="4"></a><font color="#FF00FF"><a href="match120-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_8.gif"/></a>

    for(auto it = b.book.begin(); it != b.book.end(); it++)
        tmp2[it-&gt;first] = new Knjiga(*(it-&gt;second));
    user = tmp1;
    book = tmp2;
} /*
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b) {
    std::map&lt;int, Korisnik*&gt; tmp1;
    std::map&lt;int, Knjiga*&gt; tmp2;
    for(auto it = user.begin(); it != user.end(); it++)
        delete it-&gt;second;
    user.clear();
    for(auto it = book.begin(); it != book.end(); it++)
        delete it-&gt;second;
    book.clear();
    for(auto it = b.user.begin(); it != b.user.end(); it++) {
        tmp1[it-&gt;first] = it-&gt;second;
        delete it-&gt;second;
    }
    b.user.clear();
    for(auto it = b.book.begin(); it != b.book.end(); it++) {
        tmp2[it-&gt;first] = it-&gt;second;
        delete it-&gt;second;
    }
    b.book.clear();
    return *this;
}  */
Biblioteka::Biblioteka(Biblioteka &amp;&amp;b) {
    user = std::move(b.user);
    book = std::move(b.book);
}
Biblioteka &amp;Biblioteka::operator=(Biblioteka b) {
    std::map&lt;int, Korisnik*&gt; tmp1;
    std::map&lt;int, Knjiga*&gt; tmp2;
    tmp1 = std::move(b.user);
    tmp2 = std::move(b.book);
    user = tmp1;
    book = tmp2;
    return *this;
}
void Ispisi() {
    std::cout&lt;&lt;"Dobrodosli!"&lt;&lt;std::endl;
    std::cout&lt;&lt;"- Da zaduzite knjigu unesite 1."&lt;&lt;std::endl;
</font>    std::cout&lt;&lt;"- Da razduzite knjigu unesite 2."&lt;&lt;std::endl;
    std::cout&lt;&lt;"- Za prikaz zaduzenja unesite 3."&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match120-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_10.gif"/></a>

    std::cout&lt;&lt;"- Za izlistavanje knjiga unesite 4."&lt;&lt;std::endl;
    std::cout&lt;&lt;"- Za izlistavanje korisnika unesite 5."&lt;&lt;std::endl;
    std::cout&lt;&lt;"- Da izadjete iz programa unesite ."&lt;&lt;std::endl;
}

int main ()
{
    Biblioteka b;
    for(;;) {
        Ispisi();
        int a;
        std::cin&gt;&gt;a;
        if(!std::cin) break;
        try {
            switch (a) {
                case 1: {
                    std::cout&lt;&lt;"Unesite evidencijski i clanski broj: "&lt;&lt;std::endl;
                    int ev, cl;
                    std::cin&gt;&gt;ev&gt;&gt;cl;
                    b.ZaduziKnjigu(ev, cl);
                    break;
                }
                case 2: {
                    std::cout&lt;&lt;"Unesite evidencijski broj knjige: "&lt;&lt;std::endl;
                    int ev;
                    std::cin&gt;&gt;ev;
                    b.RazduziKnjigu(ev);
                    break;
                }
                case 3: {
                    std::cout&lt;&lt;"Za prikaz zaduzenja unesite clanski broj korisnika: "&lt;&lt;std::endl;
                    int cl;
                    std::cin&gt;&gt;cl;
                    b.PrikaziZaduzenja(cl);
                    break;
                }
                case 4: {
                    b.IzlistajKnjige();
                    break;
                }
                case 5: {
                    b.IzlistajKorisnike();
                    break;
                }
                
            }
        } catch(std::logic_error &amp;i) {
            std::cout&lt;&lt;i.what()&lt;&lt;std::endl;
</font>        }
    }
    return 0;
} </pre>
</body>
</html>
