<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4614.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2437.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match90-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;iterator&gt;

    using std::cout;
    using std::endl;
    using std::cin;
    
    struct Korisnik{
        std::string ime;
        std::string prezime;
        std::string adresa;
        std::string telefon;
    };
        
    class Knjiga{
        std::string naslov;
        std::string ime_pisca;
        std::string zanr;
        int god_izdavanja;
        Korisnik *zaduzenje;
    public: 
        Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja) :
           naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), god_izdavanja(god_izdavanja), zaduzenje(nullptr) {}
</font>        std::string DajNaslov()const{
            return naslov;
        }
        std::string DajAutora()const{
            return ime_pisca;
        }
        std::string DajZanr()const{
            return zanr;
        }
        int DajGodinuIzdavanja()const{
            return god_izdavanja;
        }
<a name="1"></a><font color="#00FF00"><a href="match90-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

        Korisnik *DajKodKogaJe()const{
            return zaduzenje;
        }
        void ZaduziKnjigu(Korisnik &amp;zaduzioc){
            zaduzenje = &amp;zaduzioc;
        }
        void RazduziKnjigu(){
            zaduzenje = nullptr;
        }
        bool DaLiJeZaduzena()const{
            if(!zaduzenje) return false;
            return true;
        }
        void Ispisi()const{
            cout&lt;&lt; "Naslov: " &lt;&lt; naslov &lt;&lt; endl;
            cout&lt;&lt; "Pisac: " &lt;&lt; ime_pisca &lt;&lt; endl;
            cout&lt;&lt; "Zanr: " &lt;&lt; zanr &lt;&lt; endl;
            cout&lt;&lt; "Godina izdavanja: " &lt;&lt; god_izdavanja &lt;&lt; endl;
        }
    };
    
    class Biblioteka{
        std::map&lt;int, Korisnik*&gt;korisnik;
        std::map&lt;int, Knjiga*&gt;knjige;
    public:
        Biblioteka(){}
        Biblioteka(const Biblioteka &amp;b){
        for(auto it = b.korisnik.begin(); it != b.korisnik.end(); it++)
            korisnik[it-&gt;first] = new Korisnik(*it-&gt;second);
</font><a name="0"></a><font color="#FF0000"><a href="match90-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_80.gif"/></a>

        for(auto it = b.knjige.begin(); it != b.knjige.end(); it++)
            knjige[it-&gt;first] = new Knjiga(*it-&gt;second);
        }
        Biblioteka(Biblioteka &amp;&amp;b){
            korisnik = b.korisnik;
            knjige = b.knjige;
            b.korisnik.clear();
            b.knjige.clear();
        }
        Biblioteka &amp;operator =(Biblioteka b){
            std::swap(korisnik,b.korisnik);
            std::swap(knjige,b.knjige);
            return *this;
        }
       /* Biblioteka &amp;operator =(const Biblioteka &amp;b){
            if(korisnik.size() &lt; b.korisnik.size()){
                for(auto it = b.korisnik.begin(); it != b.korisnik.end(); it++)
                    korisnik[it-&gt;first] = new Korisnik(*it-&gt;second);
                for(auto it = korisnik.begin(); it != korisnik.end(); it++)
                    delete it-&gt;second;
                korisnik = b.korisnik;
            }
            return *this;
        }
        */
        ~Biblioteka(){
            for(auto it = korisnik.begin(); it != korisnik.end(); it++)
                delete it-&gt;second;
            for(auto it = knjige.begin(); it != knjige.end(); it++)
                delete it-&gt;second;
        }
        void RegistrirajNovogKorisnika(int clanski_broj,std::string ime, std::string prezime, std::string adresa, std::string telefon){
            for(auto it = korisnik.begin(); it != korisnik.end(); it++){
                if(it-&gt;first == clanski_broj)
                    throw std::logic_error("Korisnik vec postoji");
            }
            Korisnik* pomocni = new Korisnik{ime,prezime,adresa,telefon};
            korisnik.insert(std::make_pair(clanski_broj,pomocni));
        }
        void RegistrirajNovuKnjigu(int evid_broj, std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja){
            for(auto it = knjige.begin(); it != knjige.end(); it++){
                if(it-&gt;first == evid_broj)
                    throw std::logic_error("Knjiga vec postoji");
            }
            Knjiga *pomocni = new Knjiga(naslov,ime_pisca,zanr,god_izdavanja);
            knjige.insert(std::make_pair(evid_broj,pomocni));
        }
        Korisnik &amp;NadjiKorisnika(int clanski_broj){
            auto it(korisnik.find(clanski_broj));
            if(it == korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
            return *(it-&gt;second);
            }
        Knjiga &amp;NadjiKnjigu(int knjiga_id){
            auto it(knjige.find(knjiga_id));
            if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
            return *(it-&gt;second);
        }
        void IzlistajKorisnike(){
            for(auto it = korisnik.begin(); it != korisnik.end(); it++){
                cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; endl;
                cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; endl;
                cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; endl;
                cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; endl;
            }
        }
        void IzlistajKnjige(){
                for(auto it = knjige.begin(); it != knjige.end(); it++){
                    cout&lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; endl;
                    it-&gt;second-&gt;Ispisi();
                    if(it-&gt;second-&gt;DaLiJeZaduzena()){
                        cout &lt;&lt; "Zaduzena kod korisnika: ";
                        auto k = it-&gt;second-&gt;DajKodKogaJe();
                        cout &lt;&lt; k-&gt;ime &lt;&lt; " " &lt;&lt; k-&gt;prezime;
                    }
                    cout &lt;&lt; endl;
                }
        }
        void ZaduziKnjigu(int evid_broj, int clanski_broj){
            auto it1(knjige.find(evid_broj));
            if(it1 == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
            auto it(korisnik.find(clanski_broj));
            if(it == korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
            if(NadjiKnjigu(evid_broj).DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
            NadjiKnjigu(evid_broj).ZaduziKnjigu(NadjiKorisnika(clanski_broj));
        }
        
        void RazduziKnjigu(int evid_broj){
            auto it1(knjige.find(evid_broj));
            if(it1 == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
            if(!NadjiKnjigu(evid_broj).DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
            NadjiKnjigu(evid_broj).RazduziKnjigu();
        }
        void PrikaziZaduzenja(int clanski_broj){
            try {
                NadjiKorisnika(clanski_broj);
                bool provjera(false);
                for(auto it = knjige.begin(); it != knjige.end(); it++){
                    if(it-&gt;second-&gt;DaLiJeZaduzena()){
                        provjera = true;
                        auto gdje = it-&gt;second-&gt;DajKodKogaJe();
                        if(it-&gt;first == clanski_broj)
                            cout &lt;&lt; gdje-&gt;ime &lt;&lt; " " &lt;&lt; gdje-&gt;prezime;
                    }
                }
                if(!provjera) cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
            }
            catch (std::logic_error e) {
                throw;
            }
            
        }
        
    };
    
int main(){
    Biblioteka gradska;
    cout &lt;&lt; "*****************Dobro dosli u gradsku bibloteku*****************\n\n\n";
    while (true) {
        cout &lt;&lt; "\nIzbornik:\n\n\n1. Dodaj korisnika\n2. Dodaj knjigu\n3. Nadji korisnika\n4. Nadji knjigu\n5. Izlistaj Korisnike\n6. Izlistaj Knjige\n7. Zaduzi Knjigu\n8. Razduzi Knjigu\n9. Prikaz Zaduzenja\n10. IZLAZ\n\n\nVas izbor: ";
        int n;
        cin &gt;&gt; n;
        if(n &lt;= 0 || n &gt; 10) cout &lt;&lt; "Broj koji ste unijeli ne nalazi se u izborniku, molimo pokusajte ponovo!";
        else if(n == 1){
            cin.ignore(10, '\n');
            int clanski_broj;
            std::string ime;
            std::string prezime;
            std::string adresa;
            std::string telefon;
            cout &lt;&lt; "Unesite ime novog korisnika: ";
            std::getline(cin,ime);
            cout &lt;&lt; "Unesite prezime novog korisnika: ";
            std::getline(cin,prezime);
            cout &lt;&lt; "Unesite adresu novog korisnika: ";
            std::getline(cin,adresa);
            cout &lt;&lt; "Unesite telefon novog korisnika: ";
            std::getline(cin,telefon);
            cout &lt;&lt; "Unesite clanski broj novog korisnika: ";
            cin &gt;&gt; clanski_broj;
            try {
                gradska.RegistrirajNovogKorisnika(clanski_broj,ime,prezime,adresa,telefon);
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 2){
            cin.ignore(10, '\n');
            std::string naslov, pisac, zanr;
            int evid_broj,god_izdavanja;
            cout &lt;&lt; "Unesite naslov nove knjige: ";
            std::getline(cin,naslov);
            cout &lt;&lt; "Unesite pisca nove knjige: ";
            std::getline(cin,pisac);
            cout &lt;&lt; "Unesite zanr nove kjige: ";
            std::getline(cin,zanr);
            cout &lt;&lt; "Unesite godinu izdavanja nove knjige: ";
            cin &gt;&gt; god_izdavanja;
            cout &lt;&lt; "Unesite evidencijski broj nove knjige: ";
            cin &gt;&gt; evid_broj;
            try {
                gradska.RegistrirajNovuKnjigu(evid_broj,naslov,pisac,zanr,god_izdavanja);
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 3){
            cin.ignore(10, '\n');
            cout &lt;&lt; "Unesite clanski broj korisnika: ";
            int clanski_broj;
            cin &gt;&gt; clanski_broj;
            try {
                Korisnik nadjen = gradska.NadjiKorisnika(clanski_broj);
                cout &lt;&lt; "Korisnik sa clanskim brojem " &lt;&lt; clanski_broj &lt;&lt; " je: "&lt;&lt;nadjen.ime &lt;&lt; " " &lt;&lt; nadjen.prezime;
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 4){
            cin.ignore(10, '\n');
            cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            int evid_broj;
            cin &gt;&gt; evid_broj;
            try {
                Knjiga nadjen = gradska.NadjiKnjigu(evid_broj);
                cout &lt;&lt; "Knjiga sa evidencijskim brojem " &lt;&lt; evid_broj &lt;&lt; " je: ";
                nadjen.Ispisi();
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 5){
            cout &lt;&lt; "**********Korisnici:*************\n\n";
            gradska.IzlistajKorisnike();
        }
        else if(n == 6){
            cout&lt;&lt; "***********Knjige***********\n\n";
            gradska.IzlistajKnjige();
        }
        else if(n == 7){
            cout &lt;&lt; "Unesite evidencijski broj knjige koja se zaduzuje: ";
            int evid_broj;
            cin &gt;&gt; evid_broj;
            cout &lt;&lt; "Unesite clanski broj korisnika koji zaduzuje knjigu: ";
            int clanski_broj;
            cin &gt;&gt; clanski_broj;
            try {
                gradska.ZaduziKnjigu(evid_broj,clanski_broj);
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 8){
            cout &lt;&lt; "Unesite evidencijski broj knjige koja se razduzuje: ";
            int evid_broj;
            cin &gt;&gt; evid_broj;
            try {
                gradska.RazduziKnjigu(evid_broj);
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 9){
            cout &lt;&lt; "Unesite clanski broj korisnika za kojeg provjeravate zaduzenje: ";
            int clanski_broj;
            cin &gt;&gt; clanski_broj;
            try {
                gradska.PrikaziZaduzenja(clanski_broj);
            }
            catch (std::logic_error e) {
                cout &lt;&lt; e.what() &lt;&lt; endl;
            }
        }
        else if(n == 10) break;
</font>    }
    return 0;
}</pre>
</body>
</html>
