<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student9296.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student9296.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
struct Korisnik{
    std::string ime, prezime, adresa, telefon;
};
class Knjiga{
    std::string naslov, pisac, zanr;
    int gzad;
    Korisnik* zaduzen;
public:
    Knjiga(std::string naslov, std::string pisac, std::string zanr, int god):naslov(naslov),pisac(pisac),zanr(zanr),gzad(god),zaduzen(nullptr){}
    std::string DajNaslov()const{return naslov;}
    std::string DajAutora()const{return pisac;}
    std::string DajZanr()const{return zanr;}
    int DajGodinuIzdavanja()const{return gzad;}
    Korisnik* DajKodKogaJe()const{return zaduzen;}
    void ZaduziKnjigu(Korisnik &amp;a){zaduzen=&amp;a;}
    void RazduziKnjigu(){zaduzen=nullptr;}
    bool DaLiJeZaduzena()const{return zaduzen;}
};
class Biblioteka{
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
    Biblioteka()=default;
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
    ~Biblioteka();
    void RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string tel);
<a name="0"></a><font color="#FF0000"><a href="match670-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    void RegistrirajNovuKnjigu(int ev, std::string naslov, std::string pisac, std::string zanr, int god);
    Korisnik &amp;NadjiKorisnika(int clbr)const;
    Knjiga &amp;NadjiKnjigu(int evbr)const;
    void IzlistajKorisnike()const;
    void IzlistajKnjige()const;
    void ZaduziKnjigu(int evbr, int clbr);
    void RazduziKnjigu(int evbr);
    void PrikaziZaduzenja(int clbr)const;
};

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b){
</font>    for(auto i=korisnici.begin(); i!=korisnici.end(); i++) delete i-&gt;second;
    for(auto i=knjige.begin(); i!=knjige.end(); i++) delete i-&gt;second;
    std::swap(korisnici, b.korisnici); std::swap(knjige, b.knjige);
    return *this;
}
Biblioteka::Biblioteka(const Biblioteka &amp;b){
    for(auto i=b.korisnici.begin(); i!=b.korisnici.end(); i++) 
        korisnici.insert(std::make_pair(i-&gt;first, new Korisnik{i-&gt;second-&gt;ime, i-&gt;second-&gt;prezime,i-&gt;second-&gt;adresa,i-&gt;second-&gt;telefon}));
    for(auto i=b.knjige.begin(); i!=b.knjige.end(); i++)
        knjige.insert(std::make_pair(i-&gt;first, new Knjiga(i-&gt;second-&gt;DajNaslov(),i-&gt;second-&gt;DajAutora(),i-&gt;second-&gt;DajZanr(),i-&gt;second-&gt;DajGodinuIzdavanja())));
}
Biblioteka::~Biblioteka(){
    for(auto i=korisnici.begin(); i!=korisnici.end(); i++) delete i-&gt;second;
    for(auto i=knjige.begin(); i!=knjige.end(); i++) delete i-&gt;second;
}
<a name="3"></a><font color="#00FFFF"><a href="match670-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string tel){
    if(korisnici.count(cl_broj)) throw std::logic_error("Korisnik vec postoji");
    korisnici[cl_broj]=new Korisnik{ime, prezime, adresa, tel};
</font><a name="4"></a><font color="#FF00FF"><a href="match670-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

}
void Biblioteka::RegistrirajNovuKnjigu(int ev, std::string naslov, std::string pisac, std::string zanr, int god){
    if(knjige.count(ev)) throw std::logic_error("Knjiga vec postoji");
</font>    knjige[ev]=new Knjiga(naslov,pisac,zanr,god);
}
<a name="5"></a><font color="#FF0000"><a href="match670-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

Korisnik&amp; Biblioteka::NadjiKorisnika(int clbr)const{
    auto it(korisnici.find(clbr));
    if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    return *(it-&gt;second);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int evbr)const{
</font><a name="1"></a><font color="#00FF00"><a href="match670-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    auto it=knjige.find(evbr);
    if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    return *(it-&gt;second);
}
void Biblioteka::IzlistajKorisnike()const{
    for(auto i=korisnici.begin(); i!=korisnici.end(); i++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(i-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(i-&gt;second)-&gt;prezime&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match670-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        std::cout&lt;&lt;"Adresa: "&lt;&lt;(i-&gt;second)-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;i-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige()const{
    for(auto i=knjige.begin(); i!=knjige.end(); i++){
</font>        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(i-&gt;second-&gt;DaLiJeZaduzena()) 
<a name="6"></a><font color="#00FF00"><a href="match670-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;i-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;i-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evbr, int clbr){
</font>    NadjiKnjigu(evbr);
    NadjiKorisnika(clbr);
<a name="7"></a><font color="#0000FF"><a href="match670-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    if(knjige[evbr]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    knjige[evbr]-&gt;ZaduziKnjigu(*korisnici[clbr]);
}
void Biblioteka::RazduziKnjigu(int evbr){
</font>    NadjiKnjigu(evbr);
    if(!(knjige[evbr]-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
    knjige[evbr]-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clbr)const{
    Korisnik kor(NadjiKorisnika(clbr));
    auto i(knjige.begin());
    while(i!=knjige.end()){
        Korisnik *a(i-&gt;second-&gt;DajKodKogaJe());
        if(a-&gt;ime==kor.ime &amp;&amp; a-&gt;prezime==kor.prezime &amp;&amp; a-&gt;adresa == kor.adresa &amp;&amp; a-&gt;telefon == kor.telefon){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
        i++;
    }
    if(i==knjige.end()) throw std::logic_error("Nema zaduzenja za tog korisnika!");
}
int main ()
{
	return 0;
}</pre>
</body>
</html>
