<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8029.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match756-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
    
    
};
class Knjiga {
std::string naslov;
std::string ime_pisca;
std::string zanr;
int godina_izdavanja;
Korisnik* zaduzen=nullptr;
</font>friend class Biblioteka;
friend void IzlistajKnjigu( Knjiga k) ;
public:
Knjiga(std::string naslov_ulaz,std::string ime,std::string zanr_ulaz,int godina)
{
    naslov=naslov_ulaz;ime_pisca=ime;zanr=zanr_ulaz;godina_izdavanja=godina;
}
std::string DajNaslov() const
{
    return naslov;
}
std::string DajAutora() const{
    return ime_pisca;
}
std::string DajZanr() const{
    return zanr;
}
int DajGodinuIzdavanja() const
{
    return godina_izdavanja;
}
Korisnik* DajKodKogaJe() const{
    return zaduzen;
}

Knjiga ZaduziKnjigu( Korisnik &amp;k) 
{
    zaduzen=&amp;k;
    return *this;
}

Knjiga RazduziKnjigu(){
    zaduzen=nullptr;
    return *this;
}
bool DaLiJeZaduzena() const
{
    if(zaduzen==nullptr)
    return false;
    return true;
}
};

class Biblioteka{
<a name="6"></a><font color="#00FF00"><a href="match756-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    std::map&lt;int,Korisnik*&gt; korisnik;
    std::map&lt;int,Knjiga*&gt; knjiga;
    public:
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;l);
    Biblioteka(Biblioteka &amp;&amp;l);
</font>    Biblioteka &amp;operator =(const Biblioteka &amp;l);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;l);
    ~Biblioteka()
    {
        for(auto it=korisnik.begin();it!=korisnik.end();it++)
        {
            delete it-&gt;second;
        }
        for(auto it=knjiga.begin();it!=knjiga.end();it++)
        delete it-&gt;second;
    }
    Biblioteka RegistrirajNovogKorisnika(int broj,std::string ime,std::string prezime,std::string adresa,std::string broj_moba);
<a name="5"></a><font color="#FF0000"><a href="match756-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    Biblioteka RegistrirajNovuKnjigu(int evidencija,std::string naslov,std::string ime,std::string zanr,int godina);
    Korisnik &amp;NadjiKorisnika(int broj) const;
    Knjiga &amp;NadjiKnjigu(int broj) const;
</font>     Biblioteka IzlistajKorisnike() const;
    Biblioteka IzlistajKnjige() const;
    Biblioteka ZaduziKnjigu(int broj_knjige,int broj_korisnika);
    Biblioteka RazduziKnjigu(int broj_knjige);
    Biblioteka PrikaziZaduzenja(int broj_korisnika);
};
 Biblioteka::Biblioteka(const Biblioteka &amp;l)
{
    
    for(auto it=l.korisnik.begin();it!=l.korisnik.end();it++)
    {
        
        auto temp(new  Korisnik(*it-&gt;second));
        int br=it-&gt;first;
        korisnik.insert(std::make_pair(br,temp));
        
    }
    for(auto it=l.knjiga.begin();it!=l.knjiga.end();it++)
    {
        auto temp(new Knjiga(*it-&gt;second));
        int br=it-&gt;first;
        knjiga.insert(std::make_pair(br,temp));
    }
}
 Biblioteka::Biblioteka(Biblioteka &amp;&amp;l)
{
    korisnik=l.korisnik;
<a name="3"></a><font color="#00FFFF"><a href="match756-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    knjiga=l.knjiga;
    for(auto it=l.korisnik.begin();it!=l.korisnik.end();it++)
    {
        it-&gt;second=nullptr;
    }
    for(auto it=l.knjiga.begin();it!=knjiga.end();it++)
</font>    {
        it-&gt;second=nullptr;
    }


}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;l)
{
    for(auto it=l.korisnik.begin();it!=l.korisnik.end();it++)
    {
        this-&gt;korisnik.insert(std::make_pair(it-&gt;first,new Korisnik(*it-&gt;second)));
    }
    for(auto it=l.knjiga.begin();it!=l.knjiga.end();it++)
    {
        this-&gt;knjiga.insert(std::make_pair(it-&gt;first,new Knjiga(*it-&gt;second)));
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;l)
{
 *this=l;
  for(auto it=l.korisnik.begin();it!=l.korisnik.end();it++)
  it-&gt;second=nullptr;
  for(auto it=l.knjiga.begin();it!=l.knjiga.end();it++)
  it-&gt;second=nullptr;
    return *this;
    
    
}
<a name="4"></a><font color="#FF00FF"><a href="match756-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

Biblioteka Biblioteka::RegistrirajNovogKorisnika(int broj,std::string ime,std::string prezime,std::string adresa,std::string broj_moba)
{
    auto it(korisnik.find(broj));
    if(it!=korisnik.end())
    throw std::logic_error("Korisnik vec postoji");
</font>     Korisnik k;
    k.ime=ime;
    k.prezime=prezime;
    k.adresa=adresa;
    k.telefon=broj_moba;
    Korisnik* temp=new Korisnik(k);
    korisnik.insert(std::make_pair(broj,temp));
    return *this;
  
}
<a name="1"></a><font color="#00FF00"><a href="match756-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

Biblioteka Biblioteka:: RegistrirajNovuKnjigu(int evidencija,std::string naslov,std::string ime,std::string zanr,int godina)
{
    auto it(knjiga.find(evidencija));
    if(it!=knjiga.end())
    throw std::logic_error("Knjiga vec postoji");
    Knjiga* temp=new Knjiga(naslov,ime,zanr,godina);
</font>    knjiga.insert(std::make_pair(evidencija,temp));
    return *this;
}
<a name="0"></a><font color="#FF0000"><a href="match756-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

Korisnik&amp; Biblioteka::NadjiKorisnika(int broj) const
{
    auto it(korisnik.find(broj));
    if(it==korisnik.end())
    throw std::logic_error("Korisnik nije nadjen");
    return *it-&gt;second;
    
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int broj) const
{
    auto it(knjiga.find(broj));
    if(it==knjiga.end())
    throw std::logic_error("Knjiga nije nadjena");
    return *it-&gt;second;
</font>
}
 Biblioteka Biblioteka::IzlistajKorisnike() const
{
    for(auto it=korisnik.begin();it!=korisnik.end();it++)
    {
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;"\n";
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;"\n";
        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;"\n";
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;"\n";
        std::cout&lt;&lt;"\n";
    }
        return *this;
    
}
void IzlistajKnjigu( Knjiga k) 
{
    std::cout&lt;&lt;"Naslov: "&lt;&lt;k.naslov&lt;&lt;"\n";
    std::cout&lt;&lt;"Pisac: "&lt;&lt;k.ime_pisca&lt;&lt;"\n";
    std::cout&lt;&lt;"Zanr: "&lt;&lt;k.zanr&lt;&lt;"\n";
    std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;k.godina_izdavanja&lt;&lt;"\n";
    
    
}
Biblioteka Biblioteka::IzlistajKnjige() const
{
    for(auto it=knjiga.begin();it!=knjiga.end();it++)
    {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;"\n";
        IzlistajKnjigu(*it-&gt;second);
        if(it-&gt;second-&gt;zaduzen!=nullptr)
        {
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;zaduzen-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;zaduzen-&gt;prezime&lt;&lt;"\n";
        }
        std::cout&lt;&lt;"\n";
    }
    return *this;
}
Biblioteka Biblioteka::ZaduziKnjigu(int broj_knjige,int broj_korisnika)
{
    auto it(knjiga.find(broj_knjige));
    if(it==knjiga.end())
    throw std::logic_error("Knjiga nije nadjena");
    if(it-&gt;second-&gt;zaduzen!=nullptr)
    throw std::logic_error("Knjiga vec zaduzena");
    auto it2(korisnik.find(broj_korisnika));
    if(it2==korisnik.end())
    throw std::logic_error("Korisnik nije nadjen");
    it-&gt;second-&gt;zaduzen=it2-&gt;second;
    return *this;
    
}
Biblioteka Biblioteka::RazduziKnjigu(int broj_knjige)
{
    auto it(knjiga.find(broj_knjige));
    if(it==knjiga.end())
    throw std::logic_error("Knjiga nije nadjena");
    if(it-&gt;second-&gt;zaduzen==nullptr)
    throw std::logic_error("Knjiga nije zaduzena");
    it-&gt;second-&gt;zaduzen=nullptr;
    return *this;
 
}
Biblioteka Biblioteka::PrikaziZaduzenja(int broj_korisnika)
{
    int brojac(0);
    auto it(korisnik.find(broj_korisnika));
    if(it==korisnik.end())
    throw std::domain_error("Korisnik nije nadjen");
    for(auto it2=knjiga.begin();it2!=knjiga.end();it2++)
    {
        if(it2-&gt;second-&gt;zaduzen==it-&gt;second)
        {
            brojac++;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;"\n";
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;"\n";
        std::cout&lt;&lt;"\n";
            
        }
        
    }
    if(brojac==0)
    {
        std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    }
    
    return *this;
    
}
int main ()
{ 
	return 0;
}</pre>
</body>
</html>
