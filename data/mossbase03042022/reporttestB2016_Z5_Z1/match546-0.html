<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7735.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7735.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;

struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga{
    std::string naslov_knjige;
    std::string pisac;
    std::string zanr;
    int godina_izdavanja;
    Korisnik *zaduzio;
    public:
    Knjiga(std::string naslov,std::string ime_pisca,std::string tip_knjige,int godina){
        naslov_knjige=naslov; pisac=ime_pisca; zanr=tip_knjige; godina_izdavanja=godina;zaduzio=nullptr;}
    std::string DajNaslov(){return naslov_knjige;};
    std::string DajAutora(){return pisac;};
    std::string DajZanr(){return zanr;};
    int DajGodinuIzdavanja(){return godina_izdavanja;};
    Korisnik* DajKodKogaJe(){return zaduzio;}
    void ZaduziKnjigu(Korisnik &amp;k){if(zaduzio==nullptr)zaduzio=&amp;k; else throw std::logic_error ("Knjiga je vec zaduzena");};
    void RazduziKnjigu(){zaduzio=nullptr;};
<a name="2"></a><font color="#0000FF"><a href="match546-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    bool DaLiJeZaduzena(){if(zaduzio==nullptr)return false;else return true;};
};

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; mapa1;
    std::map&lt;int,Knjiga*&gt; mapa2;
    public:
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;bibl);
    Biblioteka(const Biblioteka &amp;&amp;bibl);
</font>    ~Biblioteka(){
        for(auto it=mapa1.begin();it!=mapa1.end();it++) delete it-&gt;second;
        for(auto itt=mapa2.begin();itt!=mapa2.end();itt++) delete itt-&gt;second;
    };
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator=(const Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int cl_broj,std::string naziv,std::string prez,std::string adr,std::string tel);
    void RegistrirajNovuKnjigu(int evidencijsk_broj,std::string naslov,std::string ime_pisca,std::string zanr,int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int cl_broj);
    Knjiga &amp;NadjiKnjigu(int evidencijsk_broj);
    void IzlistajKorisnike()const;
    void IzlistajKnjige()const;
    void ZaduziKnjigu(int evidencijsk_broj,int clanski_broj);
    void RazduziKnjigu(int evidencijsk_broj);
    void PrikaziZaduzenja(int clanski_broj)const;
};
    
Biblioteka::Biblioteka(const Biblioteka &amp;bibl){
        for(auto it=bibl.mapa1.begin();it!=bibl.mapa1.end();it++){
            Korisnik *pok(new Korisnik);
            (*pok).ime=it-&gt;second-&gt;ime;
            (*pok).prezime=it-&gt;second-&gt;prezime;
            (*pok).adresa=it-&gt;second-&gt;adresa;
<a name="5"></a><font color="#FF0000"><a href="match546-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            (*pok).telefon=it-&gt;second-&gt;telefon;
            mapa1.insert(std::make_pair(it-&gt;first,pok));
        }
        for(auto it=bibl.mapa2.begin();it!=bibl.mapa2.end();it++){
           Knjiga *pok1(new Knjiga(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()));
</font>           mapa2.insert(std::make_pair(it-&gt;first,pok1));
        }
    }
Biblioteka::Biblioteka(const Biblioteka &amp;&amp;bibl){
        for(auto it=bibl.mapa1.begin();it!=bibl.mapa1.end();it++){
            mapa1.insert(std::make_pair(it-&gt;first,it-&gt;second));
        }
<a name="3"></a><font color="#00FFFF"><a href="match546-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        for(auto it=bibl.mapa1.begin();it!=bibl.mapa1.end();it++){
            delete it-&gt;second;
        }
        for(auto it=bibl.mapa2.begin();it!=bibl.mapa2.end();it++){
</font>            mapa2.insert(std::make_pair(it-&gt;first,it-&gt;second));
        }
        for(auto it=bibl.mapa2.begin();it!=bibl.mapa2.end();it++){
            delete it-&gt;second;
        }
    }
    
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){
        for(auto it=mapa1.begin();it!=mapa1.end();it++) delete it-&gt;second;
        for(auto it=mapa2.begin();it!=mapa2.end();it++) delete it-&gt;second;
        mapa1.clear();
        for(auto it=b.mapa1.begin();it!=b.mapa1.end();it++){
            Korisnik * pok(new Korisnik);
            pok-&gt;ime=it-&gt;second-&gt;ime;
            pok-&gt;prezime=it-&gt;second-&gt;prezime;
            pok-&gt;adresa=it-&gt;second-&gt;adresa;
            pok-&gt;telefon=it-&gt;second-&gt;telefon;
            mapa1.insert(std::make_pair(it-&gt;first,pok));
     
        }
        mapa2.clear();
        for(auto it=b.mapa2.begin();it!=b.mapa2.end();it++){
            Knjiga *poko(new Knjiga(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()));
            mapa2.insert(std::make_pair(it-&gt;first,poko));
            
        }
        return *this;
    }
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;&amp;b){
    //destruktor
    for(auto it=mapa1.begin();it!=mapa1.end();it++) delete it-&gt;second;
    for(auto it=mapa2.begin();it!=mapa2.end();it++) delete it-&gt;second;
    //pomjerajuci konstruktor kopije
    for(auto it=b.mapa1.begin();it!=b.mapa1.end();it++)mapa1.insert(std::make_pair(it-&gt;first,it-&gt;second));
    for(auto it=b.mapa1.begin();it!=b.mapa1.end();it++)delete it-&gt;second;
    for(auto it=b.mapa2.begin();it!=b.mapa2.end();it++)mapa2.insert(std::make_pair(it-&gt;first,it-&gt;second));
    for(auto it=b.mapa2.begin();it!=b.mapa2.end();it++)delete it-&gt;second;
    return *this;
}

<a name="8"></a><font color="#00FFFF"><a href="match546-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int cl_broj,std::string naziv,std::string prez,std::string adr,std::string tel){
  if(mapa1.size()==0){
</font>       Korisnik *pok(new Korisnik);
            (*pok).ime=naziv;
            (*pok).prezime=prez;
            (*pok).adresa=adr;
            (*pok).telefon=tel;
            mapa1.insert(std::make_pair(cl_broj,pok));
  }
  else{
   bool dodaj=true;
   for(auto it=mapa1.begin();it!=mapa1.end();it++){
     if(cl_broj==(it-&gt;first)) dodaj=false;
     if(dodaj==false) throw std::logic_error ("Korisnik vec postoji");
    }
    if(dodaj){
        Korisnik *pok(new Korisnik);
				(*pok).ime = naziv;
				(*pok).prezime = prez;
				(*pok).adresa = adr;
				(*pok).telefon = tel;
<a name="4"></a><font color="#FF00FF"><a href="match546-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

				mapa1.insert(std::make_pair(cl_broj, pok));
    }
  
  } 
}
void Biblioteka::RegistrirajNovuKnjigu(int evidencijsk_broj,std::string naslov,std::string ime_pisca,std::string zanr,int godina_izdavanja){
       if(mapa2.size()==0){
</font>        Knjiga *pok(new Knjiga(naslov, ime_pisca, zanr, godina_izdavanja));
		mapa2.insert(std::make_pair(evidencijsk_broj, pok));
    }
    else{
        bool dodaj_knjigu=true;
        for(auto it=mapa2.begin();it!=mapa2.end();it++){
        if(evidencijsk_broj==(it-&gt;first)) dodaj_knjigu=false;
            if(dodaj_knjigu==false) throw std::logic_error ("Knjiga vec postoji");
        }
        if(dodaj_knjigu){
            Knjiga *pok(new Knjiga(naslov,ime_pisca,zanr,godina_izdavanja));
            mapa2.insert(std::make_pair(evidencijsk_broj,pok));
        }
    }
}
Korisnik&amp; Biblioteka::NadjiKorisnika(int cl_broj){
    for(auto it=mapa1.begin();it!=mapa1.end();it++){
        if(cl_broj==(it-&gt;first))return *(it-&gt;second);
    }
    throw std::logic_error("Korisnik nije nadjen");
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int evidencijsk_broj){
    for(auto it=mapa2.begin();it!=mapa2.end();it++){
        if(evidencijsk_broj==(it-&gt;first)) return *(it-&gt;second);
    }
    throw std::logic_error("Knjiga nije nadjena");
}

void Biblioteka::IzlistajKorisnike() const{
    for(auto it=mapa1.begin();it!=mapa1.end();it++){
    std::cout &lt;&lt; "Clanski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
    std::cout &lt;&lt; "Ime i prezime: "&lt;&lt; (it-&gt;second)-&gt;ime &lt;&lt;" "&lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt; std::endl;
    std::cout &lt;&lt; "Adresa: "&lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt; std::endl;
    std::cout &lt;&lt; "Broj telefona: "&lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt;std::endl;
    std::cout  &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige()const{
    for(auto it=mapa2.begin();it!=mapa2.end();it++){
        std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;(it-&gt;first) &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: "&lt;&lt; (it-&gt;second)-&gt;DajNaslov()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: "&lt;&lt; (it-&gt;second)-&gt;DajAutora()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: "&lt;&lt; (it-&gt;second)-&gt;DajZanr()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if((it-&gt;second)-&gt;DajKodKogaJe()!=nullptr){
            std::cout &lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;((it-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime &lt;&lt; std::endl;
            std::cout  &lt;&lt; std::endl;
 
        }
    }
}

void Biblioteka::ZaduziKnjigu(int evidencijsk_broj,int clanski_broj){
    Knjiga &amp;knjiga=NadjiKnjigu(evidencijsk_broj);
    Korisnik &amp;korisnik=NadjiKorisnika(clanski_broj);
    if(knjiga.DaLiJeZaduzena()){
        throw std::logic_error ("Knjiga vec zaduzena");
    }
    else{
        knjiga.ZaduziKnjigu(korisnik);
    }
    
}
void Biblioteka::RazduziKnjigu(int evidencijsk_broj){
    Knjiga &amp;knjiga=NadjiKnjigu(evidencijsk_broj);
    if(knjiga.DaLiJeZaduzena()==false){
        throw std::logic_error("Knjiga nije zaduzena");
    }
    else{
        knjiga.RazduziKnjigu();
    }
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj)const{
    int br=0;
    for(auto it1=mapa1.begin();it1!=mapa1.end();it1++){
        if(it1-&gt;first==clanski_broj){
            for(auto it2=mapa2.begin();it2!=mapa2.end();it2++){
                if((it2-&gt;second)-&gt;DaLiJeZaduzena()==true){
                    if(((it2-&gt;second)-&gt;DajKodKogaJe())-&gt;ime==((it1-&gt;second)-&gt;ime)){
                        if(((it2-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime==(it1-&gt;second)-&gt;prezime){
                            if(((it2-&gt;second)-&gt;DajKodKogaJe())-&gt;adresa==(it1-&gt;second)-&gt;adresa){
                                if(((it2-&gt;second)-&gt;DajKodKogaJe())-&gt;telefon==(it1-&gt;second)-&gt;telefon){
                                    br++;
                                    std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;(it2-&gt;first)&lt;&lt; std::endl;
                                    std::cout &lt;&lt; "Naslov: "&lt;&lt;(it2-&gt;second)-&gt;DajNaslov()&lt;&lt; std::endl;
                                    std::cout &lt;&lt; "Pisac: "&lt;&lt;(it2-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
                                    std::cout &lt;&lt; "Zanr: "&lt;&lt;(it2-&gt;second)-&gt;DajZanr()&lt;&lt; std::endl;
                                    std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;(it2-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    if(br==0)std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
}

int main ()
{
    Biblioteka biblioteka;
    for(;;){
    std::cout &lt;&lt; "Unesite 1. za registraciju novog clana" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 2. za registraciju nove knjige" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 3. za prikaz clanova" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 4. za prikaz knjiga" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 5. ako zelite zaduziti knjigu" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 6. ako zelite razduziti knjigu" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 7. za prikaz zaduzenja clnova" &lt;&lt; std::endl;
    std::cout &lt;&lt; "Unesite 0 za prekid programa" &lt;&lt; std::endl;
    std::cout &lt;&lt; std::endl;
    
        std::cout &lt;&lt; "Izaberite neku od opcija: " &lt;&lt; std::endl;
        int m;
        std::cin &gt;&gt; m;
        if(m&lt;0 || m&gt;7){std::cout &lt;&lt; "Pogresan unos" &lt;&lt; std::endl; continue;}
        if(m==1){
            std::cout &lt;&lt; "IZABRALI STE OPCIJU ZA REGISTRACIJU NOVOG CLANA"&lt;&lt; std::endl;
<a name="0"></a><font color="#FF0000"><a href="match546-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            std::cout &lt;&lt; "Unesite clanski broj: ";
            int br;std::cin &gt;&gt; br;
            std::cin.ignore(1000,'\n');
            std::cout &lt;&lt; "Unesite ime clana: ";
            std::string ime;
            std::getline(std::cin,ime);
            std::cout &lt;&lt; "Unesite prezime clana: ";
            std::string prez;
</font>            std::getline(std::cin,prez);
            std::cout &lt;&lt; "Unesite adresu clana: ";
            std::string adre;
            std::getline(std::cin,adre);
            std::cout &lt;&lt; "Unesite telefon clana: ";
            std::string telefon;
            std::getline(std::cin,telefon);
            std::cout  &lt;&lt; std::endl;
            try{
                biblioteka.RegistrirajNovogKorisnika(br,ime,prez,adre,telefon);}
            catch(std::logic_error e){std::cout &lt;&lt;  e.what() &lt;&lt;std::endl;}
            continue;
        }
        if(m==2){
            std::cout &lt;&lt; "IZABRALI STE OPCIJU ZA REGISTRACIJU NOVE KNJIGE" &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match546-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            std::cout &lt;&lt; "Unesite evidencijski broj: ";
            int br;
            std::cin &gt;&gt; br;
            std::cin.ignore(1000,'\n');
            std::cout &lt;&lt; "Unesite naslov knjige: ";
            std::string naziv;
            std::getline(std::cin,naziv);
            std::cout &lt;&lt; "Unesite autora knjige: ";
            std::string autor;
</font>            std::getline(std::cin,autor);
<a name="6"></a><font color="#00FF00"><a href="match546-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            std::cout &lt;&lt; "Unesite zanr knjige: ";
            std::string zanr;
            std::getline(std::cin,zanr);
            std::cout &lt;&lt; "Unesite godinu izdavanja knjige: ";
            int god;
            std::cin &gt;&gt; god;
            try{
</font>                biblioteka.RegistrirajNovuKnjigu(br,naziv,autor,zanr,god);}
                catch(std::logic_error e){std::cout &lt;&lt; e.what() &lt;&lt; std::endl;}
                continue;
        }
        if(m==3){std::cout&lt;&lt;"IZABRALI STE OPCIJU ZA PRIKAZ SVIH KORISNIKA"&lt;&lt;std::endl;biblioteka.IzlistajKorisnike();continue;}
        if(m==4){std::cout&lt;&lt;"IZABRALI STE OPCIJU ZA PRIKAZ SVIH KNJIGA" &lt;&lt; std::endl;biblioteka.IzlistajKnjige();continue;}
        if(m==5){
            std::cout &lt;&lt; "IZBARALI STE OPCIJU ZA ZADUZIVANJE KNJIGE " &lt;&lt; std::endl;
<a name="7"></a><font color="#0000FF"><a href="match546-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            int knj;std::cin &gt;&gt; knj;
            std::cout &lt;&lt; "Unesite clanski broj: ";
            int vlf; std::cin &gt;&gt; vlf;
            try{biblioteka.ZaduziKnjigu(knj,vlf);}
</font>            catch(std::logic_error e){std::cout &lt;&lt; e.what() &lt;&lt; std::endl;}
            continue;
        }
        if(m==6){
            std::cout &lt;&lt; "IZABRALI STE OPCIJU ZA RAZDUZIVANJE KNJIGE " &lt;&lt; std::endl;
            std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
            int kds; std::cin &gt;&gt; kds;
            try{biblioteka.RazduziKnjigu(kds);}
            catch(std::logic_error e){std::cout &lt;&lt; e.what() &lt;&lt; std::endl;}
            continue;
        }
        if(m==7){
            std::cout &lt;&lt; "IZABRALI STE OPCIJU ZA PRIKAZ ZADUZENJA CLANOVA "&lt;&lt; std::endl;
           std::cout &lt;&lt; "Unesite clanski broj korisnika: " &lt;&lt; std::endl;
           int k;
           std::cin &gt;&gt; k;
           try{biblioteka.PrikaziZaduzenja(k);} 
           catch(std::logic_error e){std::cout &lt;&lt; e.what() &lt;&lt; std::endl;}
           continue;
        }
        if(m==0){std::cout &lt;&lt; "IZABRALI STE KRAJ ";break;}
    }
	return 0;
}

</pre>
</body>
</html>
