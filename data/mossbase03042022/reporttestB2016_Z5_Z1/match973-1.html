<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2232.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4237.cpp<p></p><pre>
#include &lt;stdexcept&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
};
class Knjiga{
    std::string naslov, ime, zarn;
    int god;
<a name="0"></a><font color="#FF0000"><a href="match973-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    Korisnik* pok;
    public:
    Knjiga(std::string na, std::string im, std::string zn, int g){
        naslov=na;
        ime=im;
        zarn=zn;
        god=g;
        pok=nullptr;
    }
    std::string DajNaslov() const{
        return naslov;
    }
    std::string DajZanr() const{
</font>        return zarn;
    }
    std::string DajAutora() const{
        return ime;
    }
    int DajGodinuIzdavanja() const{
        return god;
    }
    Korisnik *DajKodKogaJe(){
        return pok;
    }
    bool DaLiJeZaduzena(){
        if(pok==nullptr) return false;
        return true;
    }
    void ZaduziKnjigu(Korisnik &amp;k){
        pok=&amp;k;
    }
    void RazduziKnjigu(){
        pok=nullptr;
    }
};

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; map1;
    std::map&lt;int,Knjiga*&gt; map2;
    public:
    Biblioteka(){}
    Biblioteka &amp;operator=(const Biblioteka &amp;b){
        for(auto it(map1.begin()); it!=map1.end(); it++){
            delete it-&gt;second;
        }
        for(auto it(map2.begin()); it!=map2.end(); it++){
            delete it-&gt;second;
        }
        map1.clear();
        map2.clear();
        for(auto it(b.map1.begin()); it!=b.map1.end(); it++){
            int a=it-&gt;first;
            auto p= new Korisnik;
            p-&gt;ime=it-&gt;second-&gt;ime;
            p-&gt;prezime=it-&gt;second-&gt;prezime;
            p-&gt;adresa=it-&gt;second-&gt;adresa;
            p-&gt;telefon=it-&gt;second-&gt;telefon;
            map1.insert ( std::pair&lt;int,Korisnik*&gt;(a,p) );
        }
        for(auto it(b.map2.begin()); it!=b.map2.end(); it++){
            int a=it-&gt;first;
            auto p= new Knjiga(*(it-&gt;second));
            map2.insert (std::pair&lt;int,Knjiga*&gt;(a,p) );
        }
        for(auto it(b.map1.begin()); it!=b.map1.end(); it++){
            delete it-&gt;second;
        }
        for(auto it(b.map2.begin()); it!=b.map2.end(); it++){
            delete it-&gt;second;
        }
        return *this;
    }
  
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b){
        for(auto it(map1.begin()); it!=map1.end(); it++){
            delete it-&gt;second;
        }
        for(auto it(map2.begin()); it!=map2.end(); it++){
            delete it-&gt;second;
        }
        map1.clear();
        map2.clear();
       for(auto it(b.map1.begin()); it!=b.map1.end(); it++){
            map1.insert ( std::pair&lt;int,Korisnik*&gt;(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        for(auto it(b.map2.begin()); it!=b.map2.end(); it++){
            map2.insert (std::pair&lt;int,Knjiga*&gt;(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        return *this;
    }
    ~Biblioteka(){
       for(auto it(map1.begin()); it!=map1.end(); it++){
            delete it-&gt;second;
        }
        for(auto it(map2.begin()); it!=map2.end(); it++){
            delete it-&gt;second;
        } 
    }
<a name="2"></a><font color="#0000FF"><a href="match973-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    void RegistrirajNovogKorisnika(int br,std::string imex, std::string prezimex, std::string adresax, std::string telefonx){
        auto it = map1.find(br);
        if(it!=map1.end()) throw std::logic_error("Korisnik vec postoji");
        auto p= new Korisnik;
</font>        p-&gt;ime=imex;
        p-&gt;prezime=prezimex;
        p-&gt;adresa=adresax;
        p-&gt;telefon=telefonx;
        map1.insert(std::pair&lt;int,Korisnik*&gt;(br,p));
    }
<a name="1"></a><font color="#00FF00"><a href="match973-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    void RegistrirajNovuKnjigu(int br,std::string na, std::string im, std::string zn, int g){
        auto it = map2.find(br);
        if(it!=map2.end()) throw std::logic_error("Knjiga vec postoji");
        auto p= new Knjiga(na,im,zn,g);
</font>        map2.insert(std::pair&lt;int,Knjiga*&gt;(br,p));
    }
<a name="5"></a><font color="#FF0000"><a href="match973-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Korisnik &amp;NadjiKorisnika(int x) const{
        auto it = map1.find(x);
        if(it==map1.end()) throw std::logic_error("Korisnik nije nadjen");
        return *(it-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int x) const{
</font><a name="6"></a><font color="#00FF00"><a href="match973-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        auto it = map2.find(x);
        if(it==map2.end()) throw std::logic_error("Knjga nije nadjen");
        return *(it-&gt;second);
</font>    }
    void IzlistajKorisnike() const {
        for(auto it(map1.begin()); it!=map1.end(); it++){
            std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first&lt;&lt; std::endl;
            std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt;std::endl;
            std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt;std::endl&lt;&lt; std::endl;
        }    
    }
    void IzlistajKnjige() const {
        for(auto it(map2.begin()); it!=map2.end(); it++){
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first&lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt;std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt;std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt;std::endl;
            if(it-&gt;second-&gt;DajKodKogaJe()!=nullptr)
                std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt; std::endl;
            std::cout  &lt;&lt; std::endl;    
        }    
    }
    void ZaduziKnjigu(int x, int y){
        if(x&lt;0 || y&lt;0) throw std::logic_error("Knjiga nije nadjena");
        NadjiKnjigu(x);
        NadjiKorisnika(y);
        if(NadjiKnjigu(x).DaLiJeZaduzena())
           throw std::logic_error("Knjiga vec zaduzena");
       NadjiKnjigu(x).ZaduziKnjigu(NadjiKorisnika(y));    
        
    }
    void RazduziKnjigu(int x){
        if(!NadjiKnjigu(x).DaLiJeZaduzena())
            throw std::logic_error("Knjiga nije zaduzena");
        NadjiKnjigu(x).RazduziKnjigu();
    }
    void PrikaziZaduzenja(int x){
        auto it1 = map1.find(x);
        if(it1==map1.end()) throw std::logic_error("Korisnik nije nadjen");
        bool nasao=false;
        for(auto it(map2.begin()); it!=map2.end(); it++){
<a name="4"></a><font color="#FF00FF"><a href="match973-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            if(it-&gt;second-&gt;DajKodKogaJe()==it1-&gt;second){
                nasao=true;
                std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first&lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>                std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt;std::endl;
                std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match973-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt;std::endl;
                std::cout  &lt;&lt; std::endl;    
            }
        }
        if(!nasao)
            std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
</font>    }
};


int main ()
{
    Biblioteka b;
    int n;
    int b1(0),b2(0);
    while(true){
        std::cout &lt;&lt; "Odaberite komandu:\nZa dodavanje novog korisnika - 1\nZa dodavanje nove knjige - 2\nZa izlistavanje svih knjige - 3\nZa izlistavanje svih korisnika - 4" &lt;&lt; std::endl;
        std::cout &lt;&lt; "Za prikaz zaduzenja odredjenog korisnika - 5\nZa razduzenje knjige - 6" &lt;&lt; std::endl;
        std::cout &lt;&lt; "Kraj - 0" &lt;&lt; std::endl;
        std::cin &gt;&gt; n;
        if(n==0) break;
        if(n==1){
            std::cin.ignore(1000, '\n');
            std:: string ime, prezime,adresa, telefon;
            std::cout &lt;&lt; "Unesite ime:  ";
            std::getline(std::cin, ime);
            std::cout &lt;&lt;"Unesite prezime: ";
            std::getline(std::cin, prezime);
            std::cout &lt;&lt; "Adresa: " ;
            std::getline(std::cin, adresa);
            std::cout &lt;&lt; "Broj telefona: " ;
            std::getline(std::cin, telefon);
            b.RegistrirajNovogKorisnika(b1, ime,prezime, adresa, telefon);
            b1++;
        }
        if(n==2){
            std::cin.ignore(1000, '\n');
            std:: string ime,zanr, naslov; int g;
            std::cout &lt;&lt; "Unesite ime autora:  ";
            std::getline(std::cin, ime);
            std::cout &lt;&lt;"Unesite naslov: ";
            std::getline(std::cin, naslov);
            std::cout &lt;&lt; "Zanr: " ;
            std::getline(std::cin, zanr);
            std::cout &lt;&lt; "Godina: " ;
            std::cin &gt;&gt; g;
            b.RegistrirajNovuKnjigu(b2,naslov,ime,zanr,g);
            b2++;
        }
        if(n==3){
            b.IzlistajKnjige();
        }
        if(n==4){
            b.IzlistajKorisnike();
        }
        if(n==5){
            int x;
            std::cout &lt;&lt; "Unesite clanski broj korisnika za kojeg zelite znati zaduzenja: " &lt;&lt; std::endl;
            std::cin &gt;&gt; x;
            b.PrikaziZaduzenja(x);
        }
        if(n==6){
            int x,y;
            std::cout &lt;&lt; "Unesite br. knjige i cl.br. korisnika koji zaduzuje knjigu: " &lt;&lt; std::endl;
            std::cin &gt;&gt; x&gt;&gt;y;
            b.ZaduziKnjigu(x,y);
        }
        
    }
	return 0;
}</pre>
</body>
</html>
