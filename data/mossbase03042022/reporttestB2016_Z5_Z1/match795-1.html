<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5172.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1477.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
<a name="2"></a><font color="#0000FF"><a href="match795-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    std::string ime, prezime, adresa, telefon;
};
class Knjiga
{
    std::string naslov, ime_pisca, zanr;
    int god;
    Korisnik* pok {nullptr};
public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int god) {
</font>        Knjiga::naslov=naslov;
        Knjiga::ime_pisca=ime_pisca;
        Knjiga::zanr=zanr;
        Knjiga::god=god;
    }
    std::string DajNaslov()const {
        return naslov;
    }
    std::string DajAutora() const {
        return ime_pisca;
    }
    std::string DajZanr()const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return god;
    }
    Korisnik *DajKodKogaJe() const {
        return pok;
    }
    void ZaduziKnjigu(Korisnik &amp;k) {
        pok=&amp;k;
    }
    void RazduziKnjigu() {
        pok=nullptr;
    }
    bool DaLiJeZaduzena()const {
        if(pok==nullptr) return 0;
        return 1;
    }
    friend class Biblioteka;

};
<a name="4"></a><font color="#FF00FF"><a href="match795-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

class Biblioteka
{
    std::map&lt;int, Korisnik*&gt;m;
    std::map&lt;int, Knjiga*&gt;m2;
public:
    Biblioteka() =default;
</font>    ~Biblioteka() {
        for(auto it=m.begin(); it!=m.end(); it++) {
            delete (it-&gt;second);
<a name="5"></a><font color="#FF0000"><a href="match795-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            (it-&gt;second)=nullptr;
        }
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            delete (it-&gt;second);
            (it-&gt;second)=nullptr;

        }
    }
    Biblioteka(const Biblioteka &amp;b) {
</font>        for(auto it=b.m.begin(); it!=b.m.end(); it++) {
            Korisnik *pomocna;
            try {
                pomocna =new Korisnik;
                pomocna-&gt;ime=it-&gt;second-&gt;ime;
                pomocna-&gt;prezime=it-&gt;second-&gt;prezime;
                pomocna-&gt;adresa=it-&gt;second-&gt;adresa;
                pomocna-&gt;telefon=it-&gt;second-&gt;telefon;
                m.insert(std::make_pair(it-&gt;first, pomocna));
            } catch(...) {
                delete pomocna;
            }

        }
        for(auto it2=b.m2.begin(); it2!=b.m2.end(); it2++) {
            Knjiga *pomocna2;
            try {
                pomocna2 =new Knjiga(it2-&gt;second-&gt;naslov,it2-&gt;second-&gt;ime_pisca,it2-&gt;second-&gt;zanr,it2-&gt;second-&gt;god);

                m2.insert(std::make_pair(it2-&gt;first, pomocna2));
            } catch(...) {
                delete pomocna2;
            }
        }
    }
    Biblioteka(Biblioteka &amp;&amp;b):m(b.m), m2(b.m2) {
        for(auto it=b.m.begin(); it!=b.m.end(); it++) it-&gt;second=nullptr;
<a name="0"></a><font color="#FF0000"><a href="match795-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        for(auto it=b.m2.begin(); it!=b.m2.end(); it++) it-&gt;second=nullptr;

    }
    Biblioteka &amp;operator=(const Biblioteka &amp;b) {
        if(&amp;b!=this){
        for(auto it=m.begin(); it!=m.end(); it++) {
            delete (it-&gt;second);
            (it-&gt;second)=nullptr;
</font>        }
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            delete (it-&gt;second);
            (it-&gt;second)=nullptr;

        }
        for(auto it=b.m.begin(); it!=b.m.end(); it++) {
            Korisnik *pomocna;
            try {
                pomocna =new Korisnik;
                pomocna-&gt;ime=it-&gt;second-&gt;ime;
                pomocna-&gt;prezime=it-&gt;second-&gt;prezime;
                pomocna-&gt;adresa=it-&gt;second-&gt;adresa;
                pomocna-&gt;telefon=it-&gt;second-&gt;telefon;
                m.insert(std::make_pair(it-&gt;first, pomocna));
            } catch(...) {
                delete pomocna;
            }

        }
        for(auto it2=b.m2.begin(); it2!=b.m2.end(); it2++) {
            Knjiga *pomocna2;
            try {
                pomocna2 =new Knjiga(it2-&gt;second-&gt;naslov,it2-&gt;second-&gt;ime_pisca,it2-&gt;second-&gt;zanr,it2-&gt;second-&gt;god);

                m2.insert(std::make_pair(it2-&gt;first, pomocna2));
            } catch(...) {
                delete pomocna2;
            }

        }
        }
        
        return *this;
    }
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b) {
        m=std::move(b.m);
        for(auto it=b.m.begin(); it!=b.m.end(); it++) it-&gt;second=nullptr;
        for(auto it=b.m2.begin(); it!=b.m2.end(); it++) it-&gt;second=nullptr;
        return *this;
    }
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
        int ima(0);
        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first==clanski_broj) {
                ima=1;
                break;
            }
        }
        if(ima) throw std::logic_error("Korisnik vec postoji");
        Korisnik *p=new Korisnik;
        p-&gt;ime=ime;
        p-&gt;prezime=prezime;
        p-&gt;adresa=adresa;
        p-&gt;telefon=telefon;
<a name="6"></a><font color="#00FF00"><a href="match795-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        m.insert(std::make_pair(clanski_broj, p));

    }
    void RegistrirajNovuKnjigu(int evid_broj, std::string naslov, std::string ime_pisca, std::string zanr, int god) {
</font>        int ima(0);
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first==evid_broj) {
                ima=1;
                break;
            }
        }
        if(ima) throw std::logic_error("Knjiga vec postoji");
        Knjiga *k=new Knjiga(naslov, ime_pisca, zanr, god);
        m2.insert(std::make_pair(evid_broj, k));
    }
    Korisnik&amp; NadjiKorisnika (int clanski_broj) {
        int ima(0);
        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first!=clanski_broj) ima=0;
            else {
                ima=1;
                break;
            }
        }
        if(ima==0) throw std::logic_error("Korisnik nije nadjen");
        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first==clanski_broj) return *(it-&gt;second);
        }
    }
    Knjiga&amp; NadjiKnjigu(int evid_broj) {
        int ima(0);
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first!=evid_broj) ima=0;
            else {
                ima=1;
                break;
            }
        }
<a name="7"></a><font color="#0000FF"><a href="match795-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        if(ima==0) throw std::logic_error("Knjiga nije nadjena");
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first==evid_broj) return (*(it-&gt;second));
</font>        }
    }
    void IzlistajKnjige()const {
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;(*(it-&gt;second)).naslov&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(*(it-&gt;second)).ime_pisca&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(*(it-&gt;second)).zanr&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*(it-&gt;second)).god&lt;&lt;std::endl;
            if(it-&gt;second-&gt;DaLiJeZaduzena()) {
<a name="1"></a><font color="#00FF00"><a href="match795-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;pok-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;pok-&gt;prezime&lt;&lt;std::endl;
            }
            std::cout&lt;&lt;std::endl;
        }
    }
    void IzlistajKorisnike()const {
        for(auto it=m.begin(); it!=m.end(); it++) {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(*(it-&gt;second)).ime&lt;&lt;" "&lt;&lt;(*(it-&gt;second)).prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(*(it-&gt;second)).adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(*(it-&gt;second)).telefon&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    void ZaduziKnjigu(int evid_broj, int clanski_broj) {
        int ima(0), ima2(0);
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first!=evid_broj) ima=0;
            else {
                ima=1;
                break;
            }
        }
        if(ima==0) throw std::logic_error("Knjiga nije nadjena");
        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first!=clanski_broj) ima2=0;
            else {
                ima2=1;
                break;
            }
        }
<a name="8"></a><font color="#00FFFF"><a href="match795-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if(ima2==0) throw std::logic_error("Korisnik nije nadjen");
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first==evid_broj &amp;&amp; (it-&gt;second)-&gt;DaLiJeZaduzena()==1) throw std::logic_error("Knjiga vec zaduzena");
</font>            else if(it-&gt;first==evid_broj &amp;&amp; (it-&gt;second)-&gt;DaLiJeZaduzena()==0) {
                Korisnik *pok2=nullptr;
                for(auto it2=m.begin(); it2!=m.end(); it2++) {
                    if(it2-&gt;first==clanski_broj) {
                        pok2=it2-&gt;second;
                        break;
                    }
                }
                (it-&gt;second)-&gt;pok=pok2;

            }
        }

    }
    void RazduziKnjigu(int evid_broj) {
        int ima(0);
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first!=evid_broj) ima=0;
            else {
                ima=1;
                break;
            }
        }
        if(ima==0) throw std::logic_error("Knjiga nije nadjena");
        for(auto it=m2.begin(); it!=m2.end(); it++) {
            if(it-&gt;first==evid_broj) {
                if((it-&gt;second)-&gt;DaLiJeZaduzena() &amp;&amp; it-&gt;second-&gt;pok==nullptr) throw std::logic_error("Knjiga nije zaduzena");
                if((it-&gt;second)-&gt;DaLiJeZaduzena())(it-&gt;second)-&gt;pok=nullptr;
            }
        }
    }
    void PrikaziZaduzenja(int clanski_broj) {
        int ima(0);
        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first!=clanski_broj) ima=0;
            else {
                ima=1;
                break;
            }
        }
        if(ima==0) throw std::logic_error("Korisnik nije nadjen");
        int ima2(0);
<a name="3"></a><font color="#00FFFF"><a href="match795-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first==clanski_broj) {
                for(auto it2=m2.begin(); it2!=m2.end(); it2++) {
                    if(it2-&gt;second-&gt;pok!=it-&gt;second) ima2=0;
</font>                    else ima2=1; break;}}}
                    if(ima2==0)throw std::logic_error("Nema zaduzenja za tog korisnika!");
        for(auto it=m.begin(); it!=m.end(); it++) {
            if(it-&gt;first==clanski_broj) {
                for(auto it2=m2.begin(); it2!=m2.end(); it2++) {
                    if(it2-&gt;second-&gt;pok==it-&gt;second) {
                        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it2-&gt;first&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Naslov: "&lt;&lt;it2-&gt;second-&gt;naslov&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Pisac: "&lt;&lt;it2-&gt;second-&gt;ime_pisca&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Zanr: "&lt;&lt;it2-&gt;second-&gt;zanr&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it2-&gt;second-&gt;god&lt;&lt;std::endl;
                        std::cout&lt;&lt;std::endl;

                    }
                }
            }
        }
    }
};
int main ()
{
    
    return 0;
}</pre>
</body>
</html>
