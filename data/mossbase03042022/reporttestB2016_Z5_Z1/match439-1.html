<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1317.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student1029.cpp<p></p><pre>
<a name="5"></a><font color="#FF0000"><a href="match439-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
using namespace std;

struct Korisnik {
  string ime, prezime, adresa, telefon;
  friend class Knjiga;
</font>};

class Knjiga
{
  string naslov_knjige;
  string ime_pisca;
  string zanr;
  int godina_izdavanja;
  Korisnik *zaduzenje;
public:
  friend struct Korisnik;
  Knjiga(string naslov_knjige, string ime_pisca, string zanr, int godina_izdavanja) {
    Knjiga::naslov_knjige=naslov_knjige;
    Knjiga::ime_pisca=ime_pisca;
    Knjiga::zanr=zanr;
    Knjiga::godina_izdavanja=godina_izdavanja;
    zaduzenje=nullptr; //na pocetku nijedna knjiga nije zaduzena
  }

  //geteri
  string DajNaslov() const {
    return naslov_knjige;
  }
  string DajAutora() const {
    return ime_pisca;
  }
  string DajZanr() const {
    return zanr;
  }
  int DajGodinuIzdavanja() const {
    return godina_izdavanja;
  }
<a name="2"></a><font color="#0000FF"><a href="match439-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

  Korisnik *DajKodKogaJe() const {
    return zaduzenje;
  }

  //seteri
  void ZaduziKnjigu (Korisnik &amp;korisnik) {
    zaduzenje = &amp;korisnik;
  }

  void RazduziKnjigu() {
    zaduzenje=nullptr;
  }

  bool DaLiJeZaduzena() const {
    if(zaduzenje!=nullptr) return true;
    return false;
  }

};

class Biblioteka
{
  map&lt;int,Korisnik*&gt; mapa_korisnika;
  map&lt;int,Knjiga*&gt; mapa_knjiga;
</font>public:
  Biblioteka() {}
  ~Biblioteka() {
    for(auto it = mapa_korisnika.begin() ; it != mapa_korisnika.end(); it++)
      delete it-&gt;second;
    mapa_korisnika.clear();
    for(auto it = mapa_knjiga.begin() ; it != mapa_knjiga.end(); it++)
      delete it-&gt;second;
    mapa_knjiga.clear();
  }

  Biblioteka(const Biblioteka &amp;b) {
    for(auto it = b.mapa_korisnika.begin(); it != b.mapa_korisnika.end(); it++)
      mapa_korisnika[it-&gt;first] = new Korisnik(*(it-&gt;second));
    for(auto it = b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); it++ )
      mapa_knjiga[it-&gt;first] = new Knjiga(*(it-&gt;second));
  }

<a name="0"></a><font color="#FF0000"><a href="match439-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

  Biblioteka(Biblioteka &amp;&amp;b) {
    for(auto it = b.mapa_korisnika.begin(); it != b.mapa_korisnika.end(); it++) {
      mapa_korisnika[it-&gt;first] = it-&gt;second;
      it-&gt;second = nullptr;
    }
    for(auto it = b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); it++ ) {
      mapa_knjiga[it-&gt;first] = it-&gt;second;
      it-&gt;second = nullptr;
</font>    }
  }

  Biblioteka &amp; operator = (const Biblioteka &amp;b) {
    if(&amp;b!=this) {
      for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++) delete it-&gt;second; //destruktor
      mapa_korisnika.clear();
      for(auto it = mapa_knjiga.begin() ; it != mapa_knjiga.end(); it++)  delete it-&gt;second; //destruktor
      mapa_knjiga.clear();
      for(auto it = b.mapa_korisnika.begin(); it != b.mapa_korisnika.end(); it++) //konstruktor kopije
        mapa_korisnika[it-&gt;first] = new Korisnik(*(it-&gt;second));
<a name="6"></a><font color="#00FF00"><a href="match439-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

      for(auto it = b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); it++ ) //konstruktor kopije
        mapa_knjiga[it-&gt;first] = new Knjiga(*(it-&gt;second));
    }
    return *this;
  }

  Biblioteka &amp; operator = (Biblioteka &amp;&amp;b) {
</font>    if(&amp;b!=this) {
      for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++) delete it-&gt;second; //destruktor
      mapa_korisnika.clear();
      for(auto it = mapa_knjiga.begin() ; it != mapa_knjiga.end(); it++)  delete it-&gt;second; //destruktor
      mapa_knjiga.clear();
      for(auto it = b.mapa_korisnika.begin(); it != b.mapa_korisnika.end(); it++) {
        mapa_korisnika[it-&gt;first] = it-&gt;second;
        it-&gt;second = nullptr;
      }
      for(auto it = b.mapa_knjiga.begin(); it != b.mapa_knjiga.end(); it++ ) {
        mapa_knjiga[it-&gt;first] = it-&gt;second;
        it-&gt;second = nullptr;
      }
    }
    return *this;
  }

  void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string br_telefona) {
    if(mapa_korisnika.find(clanski_broj)!=mapa_korisnika.end()) throw std::logic_error("Korisnik vec postoji");
    auto x = new Korisnik();
    x-&gt;ime = ime;
    x-&gt;prezime = prezime;
    x-&gt;adresa = adresa;
    x-&gt;telefon = br_telefona;
    mapa_korisnika[clanski_broj]= x;
  }

  void RegistrirajNovuKnjigu(int broj_knjige, string naslov, string ime_pisca, string zanr, int godina_izdavanja) {
    if(mapa_knjiga.find(broj_knjige)!=mapa_knjiga.end()) throw std::logic_error("Knjiga vec postoji");
    mapa_knjiga[broj_knjige]=new Knjiga(naslov, ime_pisca, zanr, godina_izdavanja);
  }

  Korisnik  &amp;NadjiKorisnika(int clanski_broj) {
    if(mapa_korisnika.find(clanski_broj)==mapa_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    return *(mapa_korisnika[clanski_broj]);
  }

  Knjiga &amp;NadjiKnjigu (int evidencijski_broj) {
    if(mapa_knjiga.find(evidencijski_broj)==mapa_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    return *(mapa_knjiga[evidencijski_broj]);
  }

  void IzlistajKorisnike() const {
    for(auto it= mapa_korisnika.begin() ; it!=mapa_korisnika.end() ; it++) {
<a name="3"></a><font color="#00FFFF"><a href="match439-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

      cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
      cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
      cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
</font>      cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
    }
  }

  void IzlistajKnjige() const {
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++) {
      cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
      cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
      cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match439-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

      cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
      cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;

      if(it-&gt;second-&gt;DaLiJeZaduzena()) cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
      cout&lt;&lt;endl;
</font>    }
  }

  void ZaduziKnjigu(int evidencijski_broj , int clanski_broj) {
    if(mapa_knjiga.find(evidencijski_broj)==mapa_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    if(mapa_korisnika.find(clanski_broj)==mapa_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    if(mapa_knjiga[evidencijski_broj]-&gt;DajKodKogaJe()!=nullptr) throw std::logic_error("Knjiga vec zaduzena");
    mapa_knjiga[evidencijski_broj]-&gt;ZaduziKnjigu(*mapa_korisnika[clanski_broj]);
  }

  void RazduziKnjigu(int evidencijski_broj) {
    if(mapa_knjiga.find(evidencijski_broj)==mapa_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    if(mapa_knjiga[evidencijski_broj]-&gt;DajKodKogaJe()==nullptr) throw std::logic_error("Knjiga nije zaduzena");
    mapa_knjiga[evidencijski_broj]-&gt;RazduziKnjigu();
  }

  void PrikaziZaduzenja (int clanski_broj) {
    if(mapa_korisnika.find(clanski_broj)==mapa_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    int br(0);
<a name="7"></a><font color="#0000FF"><a href="match439-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++) {
      if(it-&gt;second-&gt;DaLiJeZaduzena() &amp;&amp; it-&gt;second-&gt;DajKodKogaJe() == mapa_korisnika[clanski_broj]) {
</font>        br++;
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
      }
    }
    if(br==0) cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
  }

};

int main ()
{
  int n;
  Biblioteka prvi;
  Biblioteka drugi;
  do {
    cout&lt;&lt;"Dobrodosli! Izaberite opciju (1- korisnik , 2- knjiga , 0 kraj): "&lt;&lt;endl;
    cin&gt;&gt;n;
    if(n==1) {
      cout&lt;&lt;"Izaberite neku od sljedecih opcija ili 0 za kraj: "&lt;&lt;endl;
      cout&lt;&lt;"1- Registriraj novog korisnika"&lt;&lt;endl&lt;&lt;"2- nadji korisnika"&lt;&lt;endl&lt;&lt;"3-izlistaj korisnika"&lt;&lt;endl;
      int m;
      cout&lt;&lt;"Opcija: ";
      cin&gt;&gt;m;
      if(m==0) {
        cout&lt;&lt;"Hvala sto ste nas posjetili!";
        return 0;
      }
      if(m==1) {
        string ime,prezime,adresa,tel;
        int clanski_broj;
        cout&lt;&lt;"Unesite ime,prezime,adresu,telefon i clanski broj"&lt;&lt;endl;
        cin.ignore(1000, '\n');
        cout&lt;&lt;"Ime: ";
        getline(cin,ime);
<a name="4"></a><font color="#FF00FF"><a href="match439-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        cout&lt;&lt;"Prezime: ";
        getline(cin,prezime);
        cout&lt;&lt;"Adresa: ";
        getline(cin,adresa);
        cout&lt;&lt;"Telefon: ";
        getline(cin,tel);
        cout&lt;&lt;"Clanski broj: ";
        cin&gt;&gt;clanski_broj;
        prvi.RegistrirajNovogKorisnika(clanski_broj,ime,prezime,adresa,tel);
</font>      }
      if(m==2) {
        cout&lt;&lt;"Zelite da nadjete korisnika? Ukucajte clanski broj: ";
        int clanski_broj;
        cin&gt;&gt;clanski_broj;
        try {
          prvi.NadjiKorisnika(clanski_broj);
        } catch(logic_error e) {
          cout&lt;&lt;e.what()&lt;&lt;endl;
        }
      }
      if(m==3) {
        prvi.IzlistajKorisnike();
      }
    }

    if(n==2) {
      cout&lt;&lt;"Izaberite neku od sljedecih opcija ili 0 za kraj: "&lt;&lt;endl;
      cout&lt;&lt;"1- Registriraj novu knjigu"&lt;&lt;endl&lt;&lt;"2- nadji knjigu"&lt;&lt;endl&lt;&lt;"3-izlistaj knjige"&lt;&lt;endl;
      cout&lt;&lt;"4- zaduzi knjigu"&lt;&lt;endl&lt;&lt;"5- razduzi knjigu"&lt;&lt;endl&lt;&lt;"6- prikazi zaduzenja"&lt;&lt;endl;
      int m;
      cin&gt;&gt;m;
      if(m==1) {
        int broj_knjige;
        string naslov, ime_pisca, zanr;
        int godina_izdavanja;
        cout&lt;&lt;"Broj knjige:";
        cin&gt;&gt;broj_knjige;
        cin.ignore(1000,'\n');
        cout&lt;&lt;"Naslov: ";
        getline(cin,naslov);
        cout&lt;&lt;"Ime pisca: ";
        getline(cin,ime_pisca);
        cout&lt;&lt;"Zanr: ";
        getline(cin,zanr);
        cout&lt;&lt;"Godina izdavanja: ";
        cin&gt;&gt;godina_izdavanja;
        drugi.RegistrirajNovuKnjigu(broj_knjige, naslov, ime_pisca, zanr, godina_izdavanja);
      }

      if(m==2) {
        int evidencijski_broj;
        cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite da nadjete: ";
        cin&gt;&gt;evidencijski_broj;
        try {
          drugi.NadjiKnjigu(evidencijski_broj);
        } catch(logic_error e) {
          cout&lt;&lt;e.what()&lt;&lt;endl;
        }
      }

      if(m==3) {
        drugi.IzlistajKnjige();
      }

      if(m==4) {
        int a,b;
        cout&lt;&lt;"Evidencijski broj: ";
        cin&gt;&gt;a;
        cout&lt;&lt;"Clanski broj: ";
        cin&gt;&gt;b;
        try {
        drugi.ZaduziKnjigu(a,b);
        }
        catch(logic_error e) {
          cout&lt;&lt;e.what()&lt;&lt;endl;
        }
      }

      if(m==5) {
        int a;
        cout&lt;&lt;"Evidencijski broj: ";
        cin&gt;&gt;a;
        try {
          drugi.RazduziKnjigu(a);
        } catch(logic_error e) {
          cout&lt;&lt;e.what()&lt;&lt;endl;
        }
      }

      if(m==6) {
        int clanski_broj;
        cout&lt;&lt;"Clanski broj: ";
        cin&gt;&gt;clanski_broj;
        try {
          drugi.PrikaziZaduzenja(clanski_broj);
        } catch(logic_error e) {
          cout&lt;&lt;e.what()&lt;&lt;endl;
        }
      }
    }

    if(n==0) {
      cout&lt;&lt;"Dovidjenja!";
    }

  } while (n!=0);

  return 0;
}</pre>
</body>
</html>
