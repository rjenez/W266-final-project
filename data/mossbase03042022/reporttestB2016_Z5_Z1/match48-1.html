<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4850.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5435.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match48-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
    Korisnik(std::string i, std::string p, std::string a, std::string t) { ime=i; prezime=p; adresa=a; telefon=t; }
};

class Knjiga {
    std::string naslov;
    std::string autor;
    std::string zanr;
    int god_izdavanja;
    Korisnik *zaduzeno;
public:
    Knjiga(std::string s1, std::string s2, std::string s3, int g) : naslov(s1), autor(s2), zanr(s3), god_izdavanja(g) {
        zaduzeno=nullptr;
    }
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return autor; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return god_izdavanja; }
    Korisnik *DajKodKogaJe() const { return zaduzeno; }
    void ZaduziKnjigu(Korisnik &amp;k) { zaduzeno=&amp;k; }
    void RazduziKnjigu() { zaduzeno=nullptr; }
    bool DaLiJeZaduzena() const { return zaduzeno; }
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
    static void BezZaduzenja(Knjiga* it) {
        std::cout &lt;&lt; "Naslov: " &lt;&lt; (*it).DajNaslov() &lt;&lt; std::endl
                  &lt;&lt; "Pisac: " &lt;&lt; (*it).DajAutora() &lt;&lt; std::endl
                  &lt;&lt; "Zanr: " &lt;&lt; (*it).DajZanr() &lt;&lt; std::endl
                  &lt;&lt; "Godina izdavanja: " &lt;&lt; (*it).DajGodinuIzdavanja() &lt;&lt; std::endl;
    }
public:
    Biblioteka() {}
    ~Biblioteka() { for(auto it=korisnici.begin(); it!=korisnici.end(); it++) delete it-&gt;second;
                    for(auto it=knjige.begin(); it!=knjige.end(); it++) delete it-&gt;second; }



    void RegistrirajNovogKorisnika(int clanski_br, std::string ime, std::string prezime, std::string adresa, std::string br_tel) {
        auto it(korisnici.find(clanski_br));
        if(it!=korisnici.end()) throw std::logic_error ("Korisnik vec postoji");
        Korisnik* k=nullptr;
        try {
            k=new Korisnik(ime, prezime, adresa, br_tel);
            korisnici.insert(std::make_pair(clanski_br, k));
        } catch (...) {
            throw ("Nema dovoljno memorije");
        }
    }
    
    void RegistrirajNovuKnjigu(int ident_broj, std::string naslov, std::string autor, std::string zanr, int god) {
        auto it(knjige.find(ident_broj));
        if(it!=knjige.end()) throw std::logic_error ("Knjiga vec postoji");
        Knjiga* k=nullptr;
        try {
            k=new Knjiga(naslov, autor, zanr, god);
            knjige.insert(std::make_pair(ident_broj, k));
        } catch (...) {
            throw ("Nema dovoljno memorije");
        }
    }
    
    Korisnik &amp;NadjiKorisnika (int clanski_br) const {
        auto it(korisnici.find(clanski_br));
        return *(it-&gt;second);
    }
    
    Knjiga &amp;NadjiKnjigu (int ident_broj) const {
        auto it(knjige.find(ident_broj));
        return *(it-&gt;second);
    }

    void IzlistajKorisnike() const {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
            std::cout &lt;&lt; "\nClanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl
                      &lt;&lt; "Ime i prezime: " &lt;&lt; (*(it-&gt;second)).ime &lt;&lt; " " &lt;&lt; (*(it-&gt;second)).prezime &lt;&lt; std::endl
                      &lt;&lt; "Adresa: " &lt;&lt; (*(it-&gt;second)).adresa &lt;&lt; std::endl
                      &lt;&lt; "Broj telefona: " &lt;&lt; (*(it-&gt;second)).telefon &lt;&lt; std::endl;
        }
    }
    
    void IzlistajKnjige() const {
        for(auto it=knjige.begin(); it!=knjige.end(); it++) {
            std::cout &lt;&lt; "\nEvidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl
                      &lt;&lt; "Naslov: " &lt;&lt; (*(it-&gt;second)).DajNaslov() &lt;&lt; std::endl
                      &lt;&lt; "Pisac: " &lt;&lt; (*(it-&gt;second)).DajAutora() &lt;&lt; std::endl
                      &lt;&lt; "Zanr: " &lt;&lt; (*(it-&gt;second)).DajZanr() &lt;&lt; std::endl
                      &lt;&lt; "Godina izdavanja: " &lt;&lt; (*(it-&gt;second)).DajGodinuIzdavanja() &lt;&lt; std::endl;
            if((it-&gt;second)-&gt;DaLiJeZaduzena())
                std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; ((*(it-&gt;second)).DajKodKogaJe())-&gt;ime &lt;&lt; " " 
                            &lt;&lt; ((*(it-&gt;second)).DajKodKogaJe())-&gt;prezime &lt;&lt; std::endl;
        }
    }
    
    void ZaduziKnjigu(int ident_broj, int clanski_br) {
        auto it1(knjige.find(ident_broj));
        if(it1==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
        auto it2(korisnici.find(clanski_br));
        if(it2==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
        if(NadjiKnjigu(ident_broj).DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
        NadjiKnjigu(ident_broj).ZaduziKnjigu(NadjiKorisnika(clanski_br));
    }

    void RazduziKnjigu(int ident_broj) {
        auto it(knjige.find(ident_broj));
        if(it==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
        if(!(NadjiKnjigu(ident_broj).DaLiJeZaduzena())) throw std::logic_error ("Knjiga nije zaduzena");
        NadjiKnjigu(ident_broj).RazduziKnjigu();
    }
    
    void PrikaziZaduzenja(int clanski_br) const {
        auto itk(korisnici.find(clanski_br));
        if(itk==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
        Korisnik k(NadjiKorisnika(clanski_br));
        int brojac(0);
        for(auto it=knjige.begin(); it!=knjige.end(); it++) {
            Korisnik x(*((it-&gt;second)-&gt;DajKodKogaJe()));
            if(x.ime==k.ime &amp;&amp; x.prezime==k.prezime &amp;&amp; x.adresa==k.adresa &amp;&amp; x.telefon==k.telefon) {
                    brojac++;
                    std::cout &lt;&lt; "\nEvidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
                    BezZaduzenja(it-&gt;second);
            }
        }
        if(brojac==0) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika";
    }
};


int main () {
    
    Biblioteka b;
    int i(-1), j(0);
    do {
        std::cout &lt;&lt; "Odaberite opciju: 1 za manipulaciju baze knjiga, 2 za manipulaciju baze korisnika, 0 za izlaz: " ; 
        std::cin &gt;&gt; i;
        if(i==0) break;
        if(i==1) {
            std::cout &lt;&lt; "Odaberite opciju: 1 za vracanje na prethodni meni, 2 za registraciju nove knjige, 3 za zaduzenje knjige, "
            &lt;&lt; "4 za razduzenje knjige, 5 za ispis knjiga u biblioteci: ";
            std::cin &gt;&gt; j;
            if(j==1) continue;
            
            else if(j==2) {
                std::string n, a, z;
                int br, god;
                std::cout &lt;&lt; "Unesite identifikacijski broj: ";
                std::cin &gt;&gt; br;
                std::cout &lt;&lt; "Unesite naslov: ";
                std::cin.ignore(10000, '\n');
                std::getline(std::cin, n);
                std::cout &lt;&lt; "Unesite autora: ";
                std::getline(std::cin, a);
                std::cout &lt;&lt; "Unesite zanr: ";
                std::getline(std::cin, z);
                std::cout &lt;&lt; "Unesite godinu izdavanja: ";
                std::cin &gt;&gt; god;
                try {
                    b.RegistrirajNovuKnjigu(br, n, a, z, god);
                } catch(std::logic_error e) {
                    std::cout &lt;&lt; "Greska: " &lt;&lt; e.what() &lt;&lt; "\n\n";
                } catch(...) {
                    std::cout &lt;&lt; "Nije uspjela registracija nove knjige.\n\n";
                    continue;
                }
                std::cout &lt;&lt; "Knjiga je uspjesno registrirana.\n\n";
            }
            
            else if(j==3) {
                int id(-1), cl(-1);
                std::cout &lt;&lt; "Unesite identifikacijski broj knjige i clanski broj korisnika: ";
                std::cin &gt;&gt; id &gt;&gt; cl;
                try {
                    b.ZaduziKnjigu(id, cl);
                } catch(std::logic_error e) {
                    std::cout &lt;&lt; "Greska: " &lt;&lt; e.what() &lt;&lt; std::endl &lt;&lt; std::endl;
                    continue;
                }
                std::cout &lt;&lt; "Knjiga je uspjesno zaduzena.\n\n";
            }
            
            else if(j==4) {
                int id(-1);
                std::cout &lt;&lt; "Unesite identifikacijski broj knjige: ";
                std::cin &gt;&gt; id;
                try {
                    b.RazduziKnjigu(id);
                }catch(std::logic_error e) {
                    std::cout &lt;&lt; "Greska: " &lt;&lt; e.what() &lt;&lt; std::endl &lt;&lt; std::endl;
                    continue;
                }
                std::cout &lt;&lt; "Knjiga je uspjesno razduzena.\n\n";
            }
            
            else if(j==5) {
                b.IzlistajKnjige();
                std::cout &lt;&lt; "\n\n";
            }
            else {
                std::cout &lt;&lt; "Pogresan unos, probajte ponovo.\n\n";
                continue;
            }
        }
        
        if(i==2) {
            std::cout &lt;&lt; "Odaberite opciju: 1 za vracanje na prethodni meni, 2 za registraciju novog korisnika, 3 za zaduzenje korisnika, "
            &lt;&lt; "4 za ispis zaduzenja korisnika, 5 za ispis svih korisnika biblioteke: ";
            std::cin &gt;&gt; j;
            if(j==1) continue;
            
            else if(j==2) {
                std::string i, p, a, tel;
                int cl;
                std::cout &lt;&lt; "Unesite podatke novog korisika: \nClanski broj: ";
                std::cin &gt;&gt; cl;
                std::cout &lt;&lt; "Ime: ";
                std::cin.ignore(10000, '\n');
                std::getline(std::cin, i);
                std::cout &lt;&lt; "Prezime: ";
                std::getline(std::cin, p);
                std::cout &lt;&lt; "Adresa: ";
                std::getline(std::cin, a);
                std::cout &lt;&lt; "Broj telefona: ";
                std::getline(std::cin, tel);
                try {
                    b.RegistrirajNovogKorisnika(cl, i, p, a, tel);
                } catch(std::logic_error e) {
                    std::cout &lt;&lt; "Greska: " &lt;&lt; e.what() &lt;&lt; "\n\n";
                } catch(...) {
                    std::cout &lt;&lt; "Nije uspjela registracija novog korisnika.\n\n";
                    continue;
                }
                std::cout &lt;&lt; "Korisnik je uspjesno registriran.\n\n";
            }
            
            else if(j==3) {
                int id(-1), cl(-1);
                std::cout &lt;&lt; "Unesite identifikacijski broj knjige i clanski broj korisnika: ";
                std::cin &gt;&gt; id &gt;&gt; cl;
                try {
                    b.ZaduziKnjigu(id, cl);
                } catch(std::logic_error e) {
                    std::cout &lt;&lt; "Greska: " &lt;&lt; e.what() &lt;&lt; std::endl &lt;&lt; std::endl;
                    continue;
                }
                std::cout &lt;&lt; "Korisnik je uspjesno zaduzio knjigu.\n\n";
            }
            
            else if(j==4) {
                int cl;
                std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
                std::cin &gt;&gt; cl;
                b.PrikaziZaduzenja(cl);
                std::cout &lt;&lt; "\n\n";
            }
            
            else if(j==5) {
                b.IzlistajKorisnike();
                std::cout &lt;&lt; "\n\n";
            }
            
            else {
                std::cout &lt;&lt; "Pogresan unos, probajte ponovo.\n\n";
                continue;
            }
        }
        
        if(i!=1 &amp;&amp; i!=2 &amp;&amp; i!=0) {
            std::cout &lt;&lt; "Pogresan unos, probajte ponovo.\n\n";
            i=-1;
            continue;
        }
    } while(i!=0);
</font>
	return 0;
}</pre>
</body>
</html>
