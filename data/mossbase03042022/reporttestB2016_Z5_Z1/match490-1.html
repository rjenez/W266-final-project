<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2959.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2508.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;

struct Korisnik
{
    std::string ime, prezime, adresa, telefon;

};

class Knjiga
{
    friend class Biblioteka;
    std::string naslov,ime_pisca,zanr;
    int godina;
    Korisnik* korisnik;
public:

    Knjiga(std::string naslov, std::string ime_pisca,std::string zanr, int godina ):
    naslov(naslov),ime_pisca(ime_pisca),zanr(zanr),godina(godina),korisnik(nullptr){};
    
    std::string DajNaslov() const
    {
        return naslov;
    }
    
    std::string DajAutora() const
    {
        return ime_pisca;
    }
    
    std::string DajZanr() const
    {
        return zanr;
    }
    
    int DajGodinuIzdavanja() const
    {
        return godina;
    }
    
    Korisnik* DajKodKogaJe() const
    {
        return korisnik;
    }
    
    void ZaduziKnjigu(Korisnik &amp;k)
    {
        korisnik=&amp;k;
    }
    
    void RazduziKnjigu()
    {
        korisnik=nullptr;
    }
    
    bool DaLiJeZaduzena() const
    {
<a name="8"></a><font color="#00FFFF"><a href="match490-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if(!korisnik)return false;
        else return true;
    }
};

class Biblioteka
{
    std::map&lt;int,Korisnik*&gt; mkorisnik;
    std::map&lt;int,Knjiga*&gt; mknjiga;
</font>public:
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka( Biblioteka &amp;&amp;b);
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
    ~Biblioteka();
    void RegistrirajNovogKorisnika(int clbroj, std::string ime, std::string prezime, std::string adresa, std::string brtel);
    void RegistrirajNovuKnjigu(int evbroj, std::string naslov, std::string pisac, std::string zanr, int godina);
    Korisnik&amp; NadjiKorisnika(int clbroj) const;
    Knjiga&amp; NadjiKnjigu(int evbroj) const;
    void IzlistajKorisnike();
    void IzlistajKnjige();
    void ZaduziKnjigu(int evbroj, int clbroj);
    void RazduziKnjigu(int evbroj);
    void PrikaziZaduzenja(int clbroj);
};

void Biblioteka::PrikaziZaduzenja(int clbroj)
{
    int brojac(0);
    auto k(mkorisnik.find(clbroj));
    for(auto it=mknjiga.begin();it!=mknjiga.end();it++)
    {
        if((it-&gt;second-&gt;korisnik)==k-&gt;second)
        {
            brojac++;
             std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl
        &lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl
        &lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl
        &lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl
        &lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja();
        std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
            
        }
    }
    if(brojac==0)
        std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
}

void Biblioteka::ZaduziKnjigu(int evbroj, int clbroj)
{
    NadjiKnjigu(evbroj);
    NadjiKorisnika(clbroj);
    auto a(mknjiga.find(evbroj));
    auto b(mkorisnik.find(clbroj));
    if(a-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    a-&gt;second-&gt;ZaduziKnjigu(*(b-&gt;second));
}

void Biblioteka::RazduziKnjigu(int evbroj)
{
    NadjiKnjigu(evbroj);
    auto a(mknjiga.find(evbroj));
    if(!(a-&gt;second-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
<a name="6"></a><font color="#00FF00"><a href="match490-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    a-&gt;second-&gt;RazduziKnjigu();
}

void Biblioteka::IzlistajKorisnike()
{
    for(auto it=mkorisnik.begin();it!=mkorisnik.end();it++)
    {
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl
</font>        &lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl
<a name="1"></a><font color="#00FF00"><a href="match490-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        &lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl
        &lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}

void Biblioteka::IzlistajKnjige()
{
    for(auto it=mknjiga.begin();it!=mknjiga.end();it++)
    {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl
</font>        &lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl
        &lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl
        &lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl
        &lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja();
        if(((it-&gt;second)-&gt;DaLiJeZaduzena())==true)
            std::cout&lt;&lt;std::endl&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;((it-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime;
        std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}

Korisnik&amp; Biblioteka::NadjiKorisnika(int clbroj) const
{
    if(mkorisnik.find(clbroj)==mkorisnik.end())
        throw std::logic_error("Korisnik nije nadjen");
    auto it(mkorisnik.find(clbroj));
    return *(it-&gt;second);
}

Knjiga&amp; Biblioteka::NadjiKnjigu(int evbroj) const
{
    if(mknjiga.find(evbroj)==mknjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
    auto it(mknjiga.find(evbroj));
    return *(it-&gt;second);
}

<a name="7"></a><font color="#0000FF"><a href="match490-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int clbroj, std::string ime, std::string prezime, std::string adresa, std::string brtel)
{
    if(mkorisnik.find(clbroj)!=mkorisnik.end())
</font>        throw std::logic_error("Korisnik vec postoji");
    Korisnik*pok(nullptr);
    try
    {
    pok = new Korisnik{ime,prezime,adresa,brtel};
    }
    catch(...)
    {
        std::cout&lt;&lt;"Problemi sa memorijom";
    }
<a name="4"></a><font color="#FF00FF"><a href="match490-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    mkorisnik.insert(std::make_pair(clbroj,pok));
}

void Biblioteka::RegistrirajNovuKnjigu(int evbroj, std::string naslov, std::string pisac, std::string zanr, int godina)
{
    if(mknjiga.find(evbroj)!=mknjiga.end())
</font>        throw std::logic_error("Knjiga vec postoji");
    Knjiga*pok(nullptr);
    try
    {
    pok= new Knjiga(naslov,pisac,zanr,godina);
    }
    catch(...)
    {
        std::cout&lt;&lt;"Problemi sa memorijom";
    }
    mknjiga.insert(std::make_pair(evbroj,pok));
}

Biblioteka::~Biblioteka()
{
    for(auto it=mkorisnik.begin();it!=mkorisnik.end();it++)
        delete it-&gt;second;
    
    for(auto it=mknjiga.begin();it!=mknjiga.end();it++)
        delete it-&gt;second;
}

Biblioteka::Biblioteka(const Biblioteka &amp;b)
{
    try
    {
        for(auto it=b.mkorisnik.begin();it!=b.mkorisnik.end();it++)
        {
            Korisnik* pok=new Korisnik(*(it-&gt;second));
            mkorisnik.insert(std::make_pair(it-&gt;first,pok));
        }
        
        for(auto it=b.mknjiga.begin();it!=b.mknjiga.end();it++)
        {
            Knjiga* pok=new Knjiga(*(it-&gt;second));
            mknjiga.insert(std::make_pair(it-&gt;first,pok));
        }
    }
    catch(...)
    {
        for(auto it=mkorisnik.begin();it!=mkorisnik.end();it++)
        {
            delete it-&gt;second;
        }
        for(auto it=mknjiga.begin();it!=mknjiga.end();it++)
        {
            delete it-&gt;second;
        }
        std::cout&lt;&lt;"Problemi sa memorijom";
    }
};

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b)
{
    mknjiga=std::move(b.mknjiga);
    mkorisnik=std::move(b.mkorisnik);
};

Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b)
{
    mknjiga.clear();
    mkorisnik.clear();
    try
    {
        for(auto it=b.mkorisnik.begin();it!=b.mkorisnik.end();it++)
        {
            Korisnik* pok=new Korisnik(*(it-&gt;second));
            mkorisnik.insert(std::make_pair(it-&gt;first,pok));
        }
        
        for(auto it=b.mknjiga.begin();it!=b.mknjiga.end();it++)
        {
            Knjiga* pok=new Knjiga(*(it-&gt;second));
            mknjiga.insert(std::make_pair(it-&gt;first,pok));
        }
    }
    catch(...)
    {
        for(auto it=b.mkorisnik.begin();it!=b.mkorisnik.end();it++)
            delete it-&gt;second;
        for(auto it=b.mknjiga.begin();it!=b.mknjiga.end();it++)
            delete it-&gt;second;
    }
    return *this;
};

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b)
{
    std::swap(mkorisnik,b.mkorisnik);
    std::swap(mknjiga,b.mknjiga);
    return *this;
}

int main()
{
    Biblioteka b;
    for(;;)
    {
        try
        {
            std::cout&lt;&lt;"Odaberite opciju:\n1 za kraj\n2 za registriranje novog korisnika\n3 za registriranje nove knjige\n4 za pronalazak korisnika\n5 za pronalazak knjige\n6 za izlistavanje korisnika\n7 za izlistavanje knjiga\n8 za zaduzivanje knjige\n9 za razduzivanje knjige\n10 za izlistavanje zaduzenja korisnika\n";
            int odabir(0);
            std::cin&gt;&gt;odabir;
            if(odabir==1) return 0;
<a name="0"></a><font color="#FF0000"><a href="match490-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            else if(odabir==2)
            {
                std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
                int br; std::cin&gt;&gt;br;
                std::cin.ignore(10000,'\n');
                std::cout&lt;&lt;"Unesite ime korisnika: ";
                std::string ime; std::getline(std::cin,ime);
                std::cout&lt;&lt;"Unesite prezime korisnika: ";
                std::string prezime; std::getline(std::cin,prezime);
</font>                std::cout&lt;&lt;"Unesite adresu korisnika: ";
                std::string adresa; std::getline(std::cin,adresa);
                std::cout&lt;&lt;"Unesite broj telefona korisnika: ";
                std::string brtel; std::getline(std::cin,brtel);
                b.RegistrirajNovogKorisnika(br,ime,prezime,adresa,brtel);
                std::cout&lt;&lt;"Korisnik uspjesno registrovan!";
            }
            else if(odabir==3)
            {
                std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                int br; std::cin&gt;&gt;br;
                std::cin.ignore(10000,'\n');
                std::cout&lt;&lt;"Unesite naslov knjige: ";
                std::string ime; std::getline(std::cin,ime);
                std::cout&lt;&lt;"Unesite ime i prezime pisca knjige: ";
                std::string prezime; std::getline(std::cin,prezime);
<a name="2"></a><font color="#0000FF"><a href="match490-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                std::cout&lt;&lt;"Unesite zanr knjige: ";
                std::string zanr; std::getline(std::cin,zanr);
                std::cout&lt;&lt;"Unesite godinu izdavanja knjige: ";
                int god; std::cin&gt;&gt;god;
                b.RegistrirajNovuKnjigu(br,ime,prezime,zanr,god);
</font>                std::cout&lt;&lt;"Knjiga uspjesno registrovana!";
            }
<a name="3"></a><font color="#00FFFF"><a href="match490-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            else if(odabir==4)
            {
                std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
                int br; std::cin&gt;&gt;br;
                auto it(b.NadjiKorisnika(br));
                std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it.ime&lt;&lt;" "&lt;&lt;it.prezime&lt;&lt;std::endl
</font>                &lt;&lt;"Adresa: "&lt;&lt;it.adresa&lt;&lt;std::endl
                &lt;&lt;"Broj telefona: "&lt;&lt;it.telefon;
            }
<a name="5"></a><font color="#FF0000"><a href="match490-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            else if(odabir==5)
            {
                std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                int br; std::cin&gt;&gt;br;
                auto it(b.NadjiKnjigu(br));
                std::cout&lt;&lt;"Naslov: "&lt;&lt;it.DajNaslov()&lt;&lt;std::endl
</font>                &lt;&lt;"Pisac: "&lt;&lt;it.DajAutora()&lt;&lt;std::endl
                &lt;&lt;"Zanr: "&lt;&lt;it.DajZanr()&lt;&lt;std::endl
                &lt;&lt;"Godina izdavanja: "&lt;&lt;it.DajGodinuIzdavanja();
                if((it.DaLiJeZaduzena())==true)
                std::cout&lt;&lt;std::endl&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(it.DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;(it.DajKodKogaJe())-&gt;prezime;
            }
            else if(odabir==6)
            {
                b.IzlistajKorisnike();
            }
            else if(odabir==7)
            {
                b.IzlistajKnjige();
            }
            else if(odabir==8)
            {
                std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                int br; std::cin&gt;&gt;br;
                std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
                int br2; std::cin&gt;&gt;br2;
                b.ZaduziKnjigu(br,br2);
            }
            else if(odabir==9)
            {
                std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                int br; std::cin&gt;&gt;br;
                b.RazduziKnjigu(br);
            }
            else if(odabir==10)
            {
                std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
                int br; std::cin&gt;&gt;br;
                b.PrikaziZaduzenja(br);
            }
        }
        catch(std::logic_error e)
        {
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
        }
        std::cout&lt;&lt;std::endl;
    }
    return 0;
}

</pre>
</body>
</html>
