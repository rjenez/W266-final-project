<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6010.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5172.cpp<p></p><pre>
#include &lt;iostream&gt;
#include&lt;string&gt;
#include&lt;map&gt;
#include&lt;stdexcept&gt;
struct Korisnik {
    std::string ime;
    std::string prezime; 
    std::string adresa;
    std::string telefon;
};
class Knjiga
{
    std::string naslov, imepisca,  zanr;
    int godina;
    Korisnik *zauzeta{nullptr};
public:
<a name="2"></a><font color="#0000FF"><a href="match935-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    Knjiga(std::string naslov1, std::string ime_pisca, std::string zanr1, int god) {
        naslov=naslov1;
        imepisca=ime_pisca;
        zanr=zanr1;
        godina=god;
        zauzeta=nullptr;
    }
    std::string DajNaslov() const {
        return naslov;
    }
    std::string DajAutora() const {
</font>        return imepisca;
    }
    std::string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godina;
    }
    Korisnik *DajKodKogaJe() const {
        return zauzeta;
    }
    void ZaduziKnjigu(Korisnik &amp;k) {
        zauzeta=&amp;k;
    }
    void RazduziKnjigu() {
<a name="3"></a><font color="#00FFFF"><a href="match935-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        zauzeta=nullptr;
    }
    bool DaLiJeZaduzena() {
        return zauzeta!=nullptr;
    }
};
class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
</font>    Biblioteka ()=default;
    Biblioteka (const Biblioteka &amp;bib) {
        try {
            for(auto it=bib.korisnici.begin(); it!=bib.korisnici.end(); it++) {
                korisnici.insert(std::make_pair(it-&gt;first, new Korisnik(*it-&gt;second)));
            }

            try {
                for(auto it=bib.knjige.begin(); it!=bib.knjige.end(); it++) {
                    knjige.insert(std::make_pair(it-&gt;first, new Knjiga(*it-&gt;second)));
                }
            } catch(std::bad_alloc) {
                for(auto it=knjige.begin(); it!=knjige.end(); it++) {
                    delete it-&gt;second;
                    it-&gt;second=nullptr;
                }
            }
        }

        catch(std::bad_alloc) {
            for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
                delete it-&gt;second;
                it-&gt;second=nullptr;
            }
        }
    }
    ~Biblioteka() {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
            delete it-&gt;second;
            it-&gt;second=nullptr;
        }
        for(auto it=knjige.begin(); it!=knjige.end(); it++) {
            delete it-&gt;second;
            it-&gt;second=nullptr;
        }
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;bib) {
        if(&amp;bib!=this) {
            for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
                delete it-&gt;second;
                it-&gt;second=nullptr;
            }
            for(auto it=knjige.begin(); it!=knjige.end(); it++) {
                delete it-&gt;second;
                it-&gt;second=nullptr;
            }
            try {
                for(auto it=bib.korisnici.begin(); it!=bib.korisnici.end(); it++) {
                    korisnici.insert(std::make_pair(it-&gt;first, new Korisnik(*it-&gt;second)));
                }

                try {
                    for(auto it=bib.knjige.begin(); it!=bib.knjige.end(); it++) {
                        knjige.insert(std::make_pair(it-&gt;first, new Knjiga(*it-&gt;second)));
                    }
                } catch(std::bad_alloc) {
                    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
                        delete it-&gt;second;
                        it-&gt;second=nullptr;
                    }
                }
            }

            catch(std::bad_alloc) {
                for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
                    delete it-&gt;second;
                    it-&gt;second=nullptr;
                }
            }
        }
        return *this;
    }
Biblioteka &amp;operator =(const Biblioteka &amp;&amp;bib){
    if(&amp;bib!=this){
         korisnici=std::move(bib.korisnici); 
         knjige=std::move(bib.knjige); 
    }
    return *this;
}
Biblioteka(const Biblioteka &amp;&amp;bib){
     korisnici=std::move(bib.korisnici); 
        knjige=std::move(bib.knjige); 
}
void RegistrirajNovogKorisnika(int clanskibroj, std::string ime1, std::string prezime1, std::string adresa1, std::string brtelefona){
    Korisnik *pok=nullptr; 
    pok= new Korisnik; 
    pok-&gt;ime=ime1; pok-&gt;prezime=prezime1; pok-&gt;adresa=adresa1; pok-&gt;telefon=brtelefona; 
<a name="5"></a><font color="#FF0000"><a href="match935-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) if(clanskibroj==it-&gt;first) throw std::logic_error("Korisnik vec postoji"); 
    korisnici.insert(std::make_pair(clanskibroj, pok)); 
</font>    
}
void RegistrirajNovuKnjigu(int clanskibroj, std::string naslov, std::string ime, std::string zanr, int godina){
    Knjiga *pok=nullptr; 
    pok= new Knjiga(naslov, ime, zanr, godina); 
<a name="6"></a><font color="#00FF00"><a href="match935-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    for(auto it=knjige.begin(); it!=knjige.end(); it++) if(clanskibroj==it-&gt;first) throw std::logic_error("Knjiga vec postoji"); 
    knjige.insert(std::make_pair(clanskibroj, pok)); 
</font>    
}
<a name="1"></a><font color="#00FF00"><a href="match935-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

Korisnik&amp; NadjiKorisnika(int clanskibroj){
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
    if(clanskibroj==it-&gt;first) return *(it-&gt;second); 
    throw std::logic_error("Korisnik nije nadjen"); 
}
Knjiga &amp;NadjiKnjigu(int evidencijskibroj){
</font><a name="4"></a><font color="#FF00FF"><a href="match935-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    for(auto it=knjige.begin(); it!=knjige.end(); it++)
    if(evidencijskibroj==it-&gt;first) return *(it-&gt;second); 
    throw std::logic_error("Knjiga nije nadjen"); 
</font>   
}
void IzlistajKorisnike() const{
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl; 
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl; 
        std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl; 
<a name="0"></a><font color="#FF0000"><a href="match935-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl; 
        std::cout&lt;&lt;std::endl; 
    }
}
void IzlistajKnjige() const{
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl; 
</font>        std::cout&lt;&lt;"Naslov: "&lt;&lt;(*(it-&gt;second)).DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl; 
        std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl; 
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl; 
        if(it-&gt;second-&gt;DaLiJeZaduzena())
<a name="7"></a><font color="#0000FF"><a href="match935-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl; 
        std::cout&lt;&lt;std::endl; 
    }
}
void ZaduziKnjigu(int evidencijskibroj, int clanskibroj){
</font>    int ima=0; 
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        if(it-&gt;first == evidencijskibroj ) ima=1; 
        
    }
    if(ima==0) throw std::logic_error("Knjiga nije nadjena"); 
    ima=0; 
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        if(it-&gt;first == evidencijskibroj ) if(it-&gt;second-&gt;DaLiJeZaduzena()==0) ima=1;
        
    }
    if(ima==0) throw std::logic_error("Knjiga vec zaduzena"); 
    ima=0; 
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
        if(it-&gt;first == clanskibroj) ima=1; 
    }
    if(ima==0) throw std::logic_error("Korisnik nije nadjen"); 
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        if(it-&gt;first==evidencijskibroj){
            for(auto it1=korisnici.begin(); it1!=korisnici.end(); it1++){
                if(it1-&gt;first==clanskibroj){
                    it-&gt;second-&gt;ZaduziKnjigu(*(it1-&gt;second)); 
                }
            }
        }
    }
}
void RazduziKnjigu(int evidencijskibroj){
    int ima=0; 
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        if(it-&gt;first == evidencijskibroj ) ima=1; 
        
    }
    if(ima==0) throw std::logic_error("Knjiga nije nadjena");
    ima=0; 
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        if(it-&gt;first == evidencijskibroj) if(it-&gt;second-&gt;DaLiJeZaduzena()) ima=1;
        
    }
    if(ima==0) throw std::logic_error("Knjiga nije zaduzena"); 
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        if(it-&gt;first == evidencijskibroj ) it-&gt;second-&gt;RazduziKnjigu();  
    }
}
void PrikaziZaduzenja (int clanskibroj) const{
    int ima=0;
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
       if(it-&gt;first==clanskibroj){ima=1;}
    }
    if (ima==0) throw std::logic_error("Korisnik nije nadjen"); 
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
       if(it-&gt;first==clanskibroj){
           int ima1=0; 
           for(auto it1=knjige.begin(); it1!=knjige.end(); it1++){
               if(it1-&gt;second-&gt;DajKodKogaJe()==it-&gt;second){
                   ima1=1; 
                   std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it1-&gt;first&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Naslov: "&lt;&lt;it1-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Pisac: "&lt;&lt;it1-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Zanr: "&lt;&lt;it1-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it1-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
                        if(it1-&gt;second-&gt;DaLiJeZaduzena()) {
                            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
                        }
                        std::cout&lt;&lt;std::endl;
               }
           }
           if(ima1==0) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!"; 
       }
    }
}

};
int main ()
{
  
}</pre>
</body>
</html>
