<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7834.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student7834.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match818-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
using namespace std;
struct Korisnik{
    string ime,prezime,adresa,telefon;
};
class Knjiga{
</font>    string naslov,ime_pisca,zanr;
    int godina_izdavanja;
    Korisnik *zaduzenje;
    public:
    Knjiga(string naslov,string ime_pisca,string zanr,int godina_izdavanja)
    {
<a name="6"></a><font color="#00FF00"><a href="match818-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        Knjiga::naslov=naslov,Knjiga::ime_pisca=ime_pisca,Knjiga::zanr=zanr,Knjiga::godina_izdavanja=godina_izdavanja,zaduzenje=nullptr;
    }
    string DajNaslov()const{return naslov;}
    string DajAutora()const{return ime_pisca;}
    string DajZanr()const{return zanr;}
    int DajGodinuIzdavanja()const{return godina_izdavanja;}
    Korisnik* DajKodKogaJe()const{return zaduzenje;}
</font>    void ZaduziKnjigu(Korisnik &amp;k){zaduzenje=&amp;k;}
    void RazduziKnjigu(){zaduzenje=nullptr;}
    bool DaLiJeZaduzena()const{return !(zaduzenje==nullptr);}
};
class Biblioteka{
    map&lt;int,Korisnik*&gt; korisnici;
    map&lt;int,Knjiga*&gt; knjige;
    static void ProvjeraKorisnika(map&lt;int,Korisnik*&gt; k,int n){
        for(auto it=k.begin();it!=k.end();it++)if(it-&gt;first==n)throw logic_error("Korisnik vec postoji");
    }
    static void ProvjeraKnjiga(map&lt;int,Knjiga*&gt; k,int n){
        for(auto it=k.begin();it!=k.end();it++)if(it-&gt;first==n)throw logic_error("Knjiga vec postoji");
    }
    public:
   Biblioteka(){
        korisnici.insert(make_pair(0,nullptr));
        knjige.insert(make_pair(0,nullptr));
   }
    Biblioteka(const Biblioteka &amp;b) {
        Biblioteka::korisnici=b.korisnici;
        Biblioteka::knjige=b.knjige;
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;b){
        korisnici=b.korisnici;
        knjige=b.knjige;
        return *this;
    }
     ~Biblioteka(){
        for(auto x:korisnici)delete x.second;
        for(auto x:knjige)delete x.second;
    }
    void RegistrirajNovogKorisnika(int clanski_broj,string ime,string prezime,string adresa,string broj_telefona){
        Korisnik *k(new Korisnik{ime,prezime,adresa,broj_telefona});
        ProvjeraKorisnika(korisnici,clanski_broj);
        korisnici.insert(make_pair(clanski_broj,k));
    }
    void RegistrirajNovuKnjigu(int evidencijski_broj,string naslov,string ime_pisca,string zanr,int godina_izdavanja){
        Knjiga *k(new Knjiga{naslov,ime_pisca,zanr,godina_izdavanja});
        ProvjeraKnjiga(knjige,evidencijski_broj);
        knjige.insert(make_pair(evidencijski_broj,k));
    }
    Korisnik&amp; NadjiKorisnika(int clanski_broj){
        if(!korisnici.count(clanski_broj))throw logic_error("Korisnik nije nadjen");
        return *korisnici[clanski_broj];
    }
    Knjiga&amp; NadjiKnjigu(int evidencijski_broj){
        if(!knjige.count(evidencijski_broj))throw logic_error("Knjiga nije nadjena");
        return *knjige[evidencijski_broj];
    }
    void IzlistajKorisnike(){
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            if(it-&gt;first!=0){
<a name="1"></a><font color="#00FF00"><a href="match818-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
            cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;;
            cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
</font>            cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
        
        }
        cout&lt;&lt;endl;
        }
    }
    void IzlistajKnjige(){
        for(auto it=knjige.begin();it!=knjige.end();it++){
            if(it-&gt;first!=0){
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
            cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
            cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="0"></a><font color="#FF0000"><a href="match818-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

            cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
            if(it-&gt;second-&gt;DaLiJeZaduzena())cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
    }
    cout&lt;&lt;endl;
        }
        
    }
    void ZaduziKnjigu(int evidencijski_broj,int clanski_broj){
</font>        if(!evidencijski_broj || !knjige.count(evidencijski_broj))throw logic_error("Knjiga nije nadjena");
        else if(knjige[evidencijski_broj]-&gt;DaLiJeZaduzena())throw logic_error("Knjiga vec zaduzena");
        else if(!clanski_broj || !korisnici.count(clanski_broj))throw logic_error("Korisnik nije nadjen");
        NadjiKnjigu(evidencijski_broj).ZaduziKnjigu(NadjiKorisnika(clanski_broj));
    }
    void RazduziKnjigu(int evidencijski_broj){
        if(!evidencijski_broj || !knjige.count(evidencijski_broj))throw logic_error("Knjiga nije nadjena");
        else if(!knjige[evidencijski_broj]-&gt;DaLiJeZaduzena())throw logic_error("Knjiga nije zaduzena");
        NadjiKnjigu(evidencijski_broj).RazduziKnjigu();
    }
    void PrikaziZaduzenja(int clanski_broj){
        int br(0);
        if(!clanski_broj || !korisnici.count(clanski_broj))throw domain_error("Korisnik nije nadjen");
        for(auto it=knjige.begin();it!=knjige.end();it++){
            if(it-&gt;second-&gt;DajKodKogaJe()-&gt;ime==NadjiKorisnika(clanski_broj).ime &amp;&amp; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime==NadjiKorisnika(clanski_broj).prezime &amp;&amp; it-&gt;second-&gt;DajKodKogaJe()-&gt;adresa==NadjiKorisnika(clanski_broj).adresa &amp;&amp; it-&gt;second-&gt;DajKodKogaJe()-&gt;telefon==NadjiKorisnika(clanski_broj).telefon){
                cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
                cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
                cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="7"></a><font color="#0000FF"><a href="match818-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
                cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
            }
        }
        if(br==0)throw domain_error("Nema zaduzenja za tog korisnika");
</font>    }
};
int main ()
{
    Biblioteka Vogosca;
    Biblioteka Dobrinja(Vogosca);
    cout&lt;&lt;"Registracija novog korisnika: 1 "&lt;&lt;endl;
    cout&lt;&lt;"Registracija nove knjige: 2"&lt;&lt;endl;
    cout&lt;&lt;"Nadji korisnika: 3"&lt;&lt;endl;
    cout&lt;&lt;"Nadji knjigu: 4"&lt;&lt;endl;
    cout&lt;&lt;"Izlistaj korisnike: 5"&lt;&lt;endl;
    cout&lt;&lt;"Izlistaj knjige: 6"&lt;&lt;endl;
    cout&lt;&lt;"Zaduzi knjigu: 7"&lt;&lt;endl;
    cout&lt;&lt;"Razduzi knjigu: 8"&lt;&lt;endl;
    cout&lt;&lt;"Prikazi zaduzenja korisnika: 9"&lt;&lt;endl;
    cout&lt;&lt;"Prekini sa radom: 10"&lt;&lt;endl;
    int Komanda(0);
    while(Komanda!=10){
    if(Komanda==1){
        int clanski_broj;
        string ime,prezime,adresa,br_telefona;
        cout&lt;&lt;"Unesi clanski broj korisnika: "&lt;&lt;endl;
        cin&gt;&gt;clanski_broj;
        cin.clear();
        cin.ignore(1000,'\n');
        cout&lt;&lt;"Unesi ime korisnika: "&lt;&lt;endl;
        getline(cin,ime);
        cout&lt;&lt;"Unesi prezime korisnika: "&lt;&lt;endl;
        getline(cin,prezime);
        cout&lt;&lt;"Unesi adresu korisnika: "&lt;&lt;endl;
        getline(cin,adresa);
        cout&lt;&lt;"Unesi broj telefona korisnika: "&lt;&lt;endl;
        getline(cin,br_telefona);
        Dobrinja.RegistrirajNovogKorisnika(clanski_broj,ime,prezime,adresa,br_telefona);
    }
    if(Komanda==2){
        int evidencijski_broj,godina_izdavanja;
        string naslov,ime_pisca,zanr;
        cout&lt;&lt;"Unesi evidencijski broj knjige: "&lt;&lt;endl;
        cin&gt;&gt;evidencijski_broj;
        cin.clear();
        cin.ignore(1000,'\n');
        cout&lt;&lt;"Unesi naslov knjige "&lt;&lt;endl;
        getline(cin,naslov);
        cout&lt;&lt;"Unesi ime pisca: "&lt;&lt;endl;
        getline(cin,ime_pisca);
        cout&lt;&lt;"Unesi zanr knjige: "&lt;&lt;endl;
        getline(cin,zanr);
        cout&lt;&lt;"Unesi godinu izdavanja: "&lt;&lt;endl;
        cin&gt;&gt;godina_izdavanja;
        Dobrinja.RegistrirajNovuKnjigu(evidencijski_broj,naslov,ime_pisca,zanr,godina_izdavanja);
    }
    if(Komanda==3){
        int clanski_broj;
        cout&lt;&lt;"Clanski broj korisnika: "&lt;&lt;endl;
<a name="4"></a><font color="#FF00FF"><a href="match818-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        cin&gt;&gt;clanski_broj;
        try{
        Dobrinja.NadjiKorisnika(clanski_broj);
        }
        catch(logic_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
        }
    }
    if(Komanda==4){
        int evidencijski_broj;
        cout&lt;&lt;"Evidencijski broj knjige: "&lt;&lt;endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match818-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        cin&gt;&gt;evidencijski_broj;
        try{
        Dobrinja.NadjiKnjigu(evidencijski_broj);
        }
        catch(logic_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
        }
    }
    if(Komanda==5){
        Dobrinja.IzlistajKorisnike();
    }
    if(Komanda==6){
</font>        Dobrinja.IzlistajKnjige();
    }
    if(Komanda==7){
        int evidencijski_broj,clanski_broj;
        cout&lt;&lt;"Unesi evidencijski broj knjige: "&lt;&lt;endl;
        cin&gt;&gt;evidencijski_broj;
        cout&lt;&lt;"Unesi clanski broj korisnika: "&lt;&lt;endl;
<a name="5"></a><font color="#FF0000"><a href="match818-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        cin&gt;&gt;clanski_broj;
        try{
        Dobrinja.ZaduziKnjigu(evidencijski_broj,clanski_broj);
        }
        catch(logic_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
        }
    }
    if(Komanda==8){
        int evidencijski_broj;
        cout&lt;&lt;"Unesi evidencijski broj knjige: "&lt;&lt;endl;
</font>        cin&gt;&gt;evidencijski_broj;
        try{
        Dobrinja.RazduziKnjigu(evidencijski_broj);
        }
        catch(logic_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
        }
    }
    if(Komanda==9){
        int clanski_broj;
        cout&lt;&lt;"Unesi clanski broj korisnika: "&lt;&lt;endl;
        cin&gt;&gt;clanski_broj;
        try{
        Dobrinja.PrikaziZaduzenja(clanski_broj);
        }
        catch(domain_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
        }
    }
    while(true)
    {
        cout&lt;&lt;"Unesi komandu: ";
        cin&gt;&gt;Komanda;
        cin.clear();
        cin.ignore(1000,'\n');
        if(!cin || Komanda&lt;1 || Komanda&gt;10){
            cout&lt;&lt;"Neispravna komanda!"&lt;&lt;endl;
            cout&lt;&lt;"Unesi ponovo: ";
            
        }
        else break;
    }
    }
return 0;
}</pre>
</body>
</html>
