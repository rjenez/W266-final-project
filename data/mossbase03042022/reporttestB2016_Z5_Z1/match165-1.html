<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4416.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8864.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match165-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_53.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
struct Korisnik{
    std::string ime,prezime,adresa,telefon;
    friend class Biblioteka;
};
class Knjiga{
    std::string naslov,pisac,zanr;
    int godina;
    Korisnik*zaduzenje;
  public:
    Knjiga(std::string n,std::string i,std::string z,int g);
    std::string DajNaslov()const{return naslov;}
    std::string DajAutora()const{return pisac;}
    std::string DajZanr()const{return zanr;}
    int DajGodinuIzdavanja()const{return godina;}
    Korisnik* DajKodKogaJe()const{return zaduzenje;}
    void ZaduziKnjigu(Korisnik&amp;k){zaduzenje=&amp;k;}
    void RazduziKnjigu(){zaduzenje=nullptr;}
    bool DaLiJeZaduzena(){if(zaduzenje)return true; return false;}
};
Knjiga::Knjiga(std::string n,std::string i,std::string z,int g){
    zaduzenje=nullptr;
    naslov=n; pisac=i; zanr=z; godina=g;
}

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; korisnici;
    std::map&lt;int,Knjiga*&gt; knjige;
  public:
    Biblioteka(){}
    ~Biblioteka();
    Biblioteka(const Biblioteka&amp;b);
    //Biblioteka(const Biblioteka&amp;&amp;b){std::swap(korisnici,b.korisnici);std::swap(knjige,b.knjige);}
    void RegistrirajNovogKorisnika(int clanski,std::string i,std::string p,std::string a,std::string brt);
    void RegistrirajNovuKnjigu(int evid,std::string n,std::string i,std::string z,int g);
    Korisnik&amp; NadjiKorisnika(int clanski)const;
    Knjiga&amp; NadjiKnjigu(int evid)const;
    void IzlistajKorisnike();
    void IzlistajKnjige();
    void ZaduziKnjigu(int evid,int clanski);
    void RazduziKnjigu(int evid);
    void PrikaziZaduzenja(int clanski);
};
Biblioteka::~Biblioteka(){
    auto pok1(korisnici.begin());
    while(pok1!=korisnici.end()){delete(pok1-&gt;second);pok1++;}
    auto pok2(knjige.begin());
    while(pok2!=knjige.end()){delete (pok2-&gt;second);pok2++;}
}
Biblioteka::Biblioteka(const Biblioteka&amp;b){
    auto pok1=b.korisnici.begin();
    while(pok1!=b.korisnici.end()){
        korisnici.insert(std::make_pair(pok1-&gt;first,new Korisnik(*(pok1-&gt;second))));
        pok1++;
    }
    auto pok2=b.knjige.begin();
    while(pok2!=b.knjige.end()){
        knjige.insert(std::make_pair(pok2-&gt;first,new Knjiga(*(pok2-&gt;second))));
        pok2++;
    }
}
void Biblioteka::RegistrirajNovogKorisnika(int clanski,std::string i,std::string p,std::string a,std::string brt){
    if(korisnici.find(clanski)!=korisnici.end())throw std::logic_error("Korisnik vec postoji");
    Korisnik*pok=new Korisnik;
    pok-&gt;ime=i; pok-&gt;prezime=p; pok-&gt;adresa=a; pok-&gt;telefon=brt;
    korisnici.insert(std::make_pair(clanski,pok));
}
void Biblioteka::RegistrirajNovuKnjigu(int evid,std::string n,std::string i,std::string z,int g){
    if(knjige.find(evid)!=knjige.end())throw std::logic_error("Korisnik vec postoji");
    Knjiga*pok=new Knjiga(n,i,z,g);
    knjige.insert(std::make_pair(evid,pok));
}
Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski)const{
    auto pok=korisnici.find(clanski);
    if(pok==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
    return *(pok-&gt;second);
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int evid)const{
    auto pok=knjige.find(evid);
    if(pok==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    return *(pok-&gt;second);
}
void Biblioteka::IzlistajKorisnike(){
    auto pok(korisnici.begin());
    while(pok!=korisnici.end()){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;pok-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(pok-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(pok-&gt;second)-&gt;prezime&lt;&lt;std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match165-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

        std::cout&lt;&lt;"Adresa: "&lt;&lt;(pok-&gt;second)-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(pok-&gt;second)-&gt;telefon&lt;&lt;std::endl;
        pok++;
    }
}
void Biblioteka::IzlistajKnjige(){
    auto pok(knjige.begin());
    while(pok!=knjige.end()){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;pok-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;(pok-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Pisac: "&lt;&lt;(pok-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;(pok-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(pok-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if((pok-&gt;second)-&gt;DaLiJeZaduzena()){
<a name="1"></a><font color="#00FF00"><a href="match165-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_17.gif"/></a>

            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(pok-&gt;second)-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;(pok-&gt;second)-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
        }
        pok++;
    }
}
void Biblioteka::ZaduziKnjigu(int evid,int clanski){
    auto pok1(korisnici.find(clanski));
    auto pok2(knjige.find(evid));
    if(pok2==knjige.end())throw std::logic_error("Knjiga nije nadjena");
    if(pok1==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
    if((pok2-&gt;second)-&gt;DaLiJeZaduzena())throw std::logic_error("Knjiga vec zaduzena");
    (pok2-&gt;second)-&gt;ZaduziKnjigu(*(pok1-&gt;second));
}
void Biblioteka::RazduziKnjigu(int evid){
    auto pok(knjige.find(evid));
    if(pok==knjige.end())throw std::logic_error("Knjiga nije nadjena");
    if((pok-&gt;second)-&gt;DaLiJeZaduzena()==0)throw std::logic_error("Knjiga nije zaduzena");
    (pok-&gt;second)-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski){
    auto pok(korisnici.find(clanski));
    if(pok==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
    auto p(knjige.begin());
    bool zaduzio(true);
    while(p!=knjige.end()){
        if((p-&gt;second)-&gt;DajKodKogaJe()==pok-&gt;second){
            zaduzio=false;
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;p-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;(p-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Pisac: "&lt;&lt;(p-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match165-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

            std::cout&lt;&lt;"Zanr: "&lt;&lt;(p-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(p-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        }
        p++;
    }
    if(zaduzio)std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
}

int main (){
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic","Zmaja od Bosne 30", "032/444-555");
    b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1967);
    b.RegistrirajNovuKnjigu(222,"Knjiga","Pisac","Roman",1998);
    b.ZaduziKnjigu(231,1234);
    b.ZaduziKnjigu(222,1234);
    Biblioteka a(b);
    //Biblioteka c(std::move(a));
    //b.PrikaziZaduzenja(1234);
    //b.IzlistajKorisnike();
    a.IzlistajKnjige();
	return 0;
</font>}</pre>
</body>
</html>
