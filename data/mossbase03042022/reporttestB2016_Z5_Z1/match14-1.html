<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2755.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student6419.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
struct Korisnik {
    std::string ime, prezime, adresa, telefon;  
};
class Knjiga {
        std::string Naslov, ImePisca, Zanr;
        int GodinaIzdavanja;
<a name="3"></a><font color="#00FFFF"><a href="match14-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_11.gif"/></a>

        Korisnik *zaduzenje;
    public:
        Knjiga(std::string Naslov, std::string ImePisca, std::string Zanr, int GodinaIzdavanja): zaduzenje(nullptr) {
            Knjiga::Naslov=Naslov; Knjiga::ImePisca=ImePisca; Knjiga::Zanr=Zanr; Knjiga::GodinaIzdavanja=GodinaIzdavanja;
        }
        std::string DajNaslov() const { return Naslov; }
        std::string DajAutora() const { return ImePisca; }
        std::string DajZanr() const { return Zanr; }
        int DajGodinuIzdavanja() const { return GodinaIzdavanja; }
        Korisnik *DajKodKogaJe() const { return zaduzenje; }
        void ZaduziKnjigu(Korisnik &amp;korisnik) { zaduzenje=&amp;korisnik; }
        void RazduziKnjigu() { zaduzenje=nullptr; }
        bool DaLiJeZaduzena()const{ if(zaduzenje==nullptr) return false; return true; }
};
class Biblioteka {
        std::map&lt;int, Korisnik*&gt; MapaKorisnika;
        std::map&lt;int, Knjiga*&gt; MapaKnjiga;
    public:
        Biblioteka()=default;
        Biblioteka(const Biblioteka &amp;b);
        Biblioteka(Biblioteka &amp;&amp;b);
        Biblioteka &amp;operator=(const Biblioteka &amp;b);
        Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
        ~Biblioteka() {
            if(MapaKnjiga.size() != 0 &amp;&amp; MapaKorisnika.size()!=0) {
                auto it1(MapaKnjiga.begin());
                auto it2(MapaKorisnika.begin());
                for(int i(0); i&lt;MapaKnjiga.size(); i++) {
                    delete it1-&gt;second;
                    it1++;
                }
                for(int i(0); i&lt;MapaKorisnika.size(); i++) {
                     delete it2-&gt;second;
                     it2++;
                }
            }
        }
        void RegistrirajNovogKorisnika(int clanskibroj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
        void RegistrirajNovuKnjigu(int brojknjige, std::string Naslov, std::string ImePisca, std::string Zanr, int GodinaIzdavanja);
</font>        Korisnik &amp;NadjiKorisnika(int clanskibroj);
<a name="1"></a><font color="#00FF00"><a href="match14-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

        Knjiga &amp;NadjiKnjigu(int brojknjige);
        void IzlistajKorisnike()const;
        void IzlistajKnjige()const;
        void ZaduziKnjigu(int brojknjige, int clanskibroj);
        void RazduziKnjigu(int brojknjige);
        void PrikaziZaduzenja(int clanskibroj);
};
Biblioteka::Biblioteka(const Biblioteka &amp;b) {
    for(auto it(b.MapaKorisnika.begin()); it!=b.MapaKorisnika.end(); it++) {
        MapaKorisnika.insert(std::make_pair(it-&gt;first, it-&gt;second));
    }
    for(auto it(b.MapaKnjiga.begin()); it!=b.MapaKnjiga.end(); it++) {
        MapaKnjiga.insert(std::make_pair(it-&gt;first, it-&gt;second));
    }
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;b) { // ili sa : vidjet cemo
    MapaKnjiga=b.MapaKnjiga,
    MapaKorisnika=b.MapaKorisnika;
    b.MapaKnjiga.clear();
    b.MapaKorisnika.clear();
}
Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b) {
    MapaKorisnika.clear();
    MapaKnjiga.clear();
    for(auto it(b.MapaKorisnika.begin()); it!=b.MapaKorisnika.end(); it++) {
        MapaKorisnika.insert(std::make_pair(it-&gt;first, it-&gt;second));
    }
    for(auto it(b.MapaKnjiga.begin()); it!=b.MapaKnjiga.end(); it++) {
         MapaKnjiga.insert(std::make_pair(it-&gt;first, it-&gt;second));
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b) {
    std::swap(MapaKnjiga, b.MapaKnjiga); std::swap(MapaKorisnika, b.MapaKorisnika);
    return *this;
}
void Biblioteka::RegistrirajNovogKorisnika(int clanskibroj, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
    auto it(MapaKorisnika.find(clanskibroj));
    if(it==MapaKorisnika.end()) {
        Korisnik *novi= new Korisnik;
        novi-&gt;ime=ime;
        novi-&gt;prezime=prezime;
        novi-&gt;adresa=adresa;
        novi-&gt;telefon=telefon;
        MapaKorisnika.insert(std::make_pair(clanskibroj, novi));
        //delete novi;
        novi=nullptr;
    }
    else throw std::logic_error("Korisnik vec postoji");
}
void Biblioteka::RegistrirajNovuKnjigu(int brojknjige, std::string Naslov, std::string ImePisca, std::string Zanr, int GodinaIzdavanja) {
    auto it(MapaKnjiga.find(brojknjige));
    if(it==MapaKnjiga.end()) {
        Knjiga *nova=new Knjiga(Naslov, ImePisca, Zanr, GodinaIzdavanja);
        MapaKnjiga.insert(std::make_pair(brojknjige, nova));
        //delete nova;
        nova=nullptr;
    }
    else throw std::logic_error("Knjiga vec postoji");
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibroj) {
    auto it(MapaKorisnika.find(clanskibroj));
    if(it==MapaKorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    return *(MapaKorisnika[clanskibroj]);
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int brojknjige) {
    auto it(MapaKnjiga.find(brojknjige));
    if(it==MapaKnjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    return *(MapaKnjiga[brojknjige]);
}
void Biblioteka::IzlistajKorisnike() const {
    for(auto it(MapaKorisnika.begin()); it!=MapaKorisnika.end(); it++) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
<a name="5"></a><font color="#FF0000"><a href="match14-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const {
    int broj(0);
    for(auto it(MapaKnjiga.begin()); it!=MapaKnjiga.end(); it++) {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()) {
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt;
<a name="0"></a><font color="#FF0000"><a href="match14-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_25.gif"/></a>

            it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl &lt;&lt; std::endl;
            broj=1;
        }
        if(broj==0) std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int brojknjige, int clanskibroj) {
    auto it(MapaKnjiga.find(brojknjige));
    if(it==MapaKnjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    auto at(MapaKorisnika.find(clanskibroj));
    if(at==MapaKorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    if(it-&gt;second-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga vec zaduzena");
    it-&gt;second-&gt;ZaduziKnjigu(*MapaKorisnika[clanskibroj]);
}
void Biblioteka::RazduziKnjigu(int brojknjige) {
    auto it(MapaKnjiga.find(brojknjige));
    if(it==MapaKnjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    if(it-&gt;second-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
    it-&gt;second-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanskibroj) {
    auto it(MapaKorisnika.find(clanskibroj));
    if(it==MapaKorisnika.end()) throw std::domain_error("Korisnik nije nadjen");
    std::vector&lt;Knjiga&gt; knjige;
    std::vector&lt;int&gt; brojknjiga;
    //std::map&lt;int, Knjiga*&gt; knjige;
    Korisnik duzbenik=NadjiKorisnika(clanskibroj);
    //int brojac(0);
    for(auto at(MapaKnjiga.begin()); at!=MapaKnjiga.end(); at++) {
        if(duzbenik.ime==at-&gt;second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; duzbenik.prezime==at-&gt;second-&gt;DajKodKogaJe()-&gt;prezime) { // &amp;&amp; duzbenik.adresa==at-&gt;second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; duzbenik.telefon==at-&gt;second-&gt;DajKodKogaJe()-&gt;telefon) {
            knjige.push_back(*(at-&gt;second));
            brojknjiga.push_back(at-&gt;first);
            //knjige.insert(std::make_pair(at-&gt;first, at-&gt;second));
            //brojac++;
        }
    }
    if(knjige.size()==0) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika" &lt;&lt; std::endl;
    else {
        /*for(auto it(knjige.begin()); it!=knjige.end(); it++) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
        }*/
        for(int i(0); i&lt;knjige.size(); i++) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; brojknjiga[i] &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; knjige[i].DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; knjige[i].DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; knjige[i].DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; knjige[i].DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
        }
    }
}
int main (){
    Biblioteka bajbuk;
    for(;;) {
        std::cout &lt;&lt; "Odaberite opciju: " &lt;&lt; std::endl;
        std::cout &lt;&lt; " 1 - Registriraj novog korisnika" &lt;&lt; std::endl &lt;&lt; " 2 - Registriraj novu knjigu" &lt;&lt; std::endl &lt;&lt; " 0 - Kraj registracija" &lt;&lt; std::endl;
        int opcija;
        std::cin &gt;&gt; opcija;
        if(!std::cin &amp;&amp; opcija!=1 &amp;&amp; opcija!=2 &amp;&amp; opcija!=0) std::cout &lt;&lt; "Ponovo pokreni program! Pazi sta unosis";
        if(opcija==1) {
            std::cout &lt;&lt; "Unesite podatke za korisnika: " &lt;&lt; std::endl;
            std::string ime, prezime, adresa, telefon;
            int clanskibroj;
            std::cout &lt;&lt; "Unesite clanski broj: ";
            std::cin &gt;&gt; clanskibroj;
            std::cin.ignore(100000, '\n');
            std::cout &lt;&lt; "Unesite ime: ";
            std::getline(std::cin, ime);
            std::cout &lt;&lt; "Unesite prezime: ";
            std::getline(std::cin, prezime);
</font>            std::cout &lt;&lt; "Unesite adresu: ";
<a name="4"></a><font color="#FF00FF"><a href="match14-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_9.gif"/></a>

            std::getline(std::cin, adresa);
            std::cout &lt;&lt; "Unesite broj telefona: ";
            std::getline(std::cin, telefon);
            bajbuk.RegistrirajNovogKorisnika(clanskibroj, ime, prezime, adresa, telefon);
        }
        if(opcija==2) {
            std::cout &lt;&lt; "Unesite podatke za knjigu: " &lt;&lt; std::endl;
            int brojknjige, GodinaIzdavanja;
            std::string Naslov, ImePisca, Zanr;
            std::cin.ignore(10000, '\n');
            std::cout &lt;&lt; "Unesite broj knjige: ";
            std::cin &gt;&gt; brojknjige;
            std::cin.ignore(10000, '\n');
            std::cout &lt;&lt; "Unesite naslov: ";
            std::getline(std::cin, Naslov);
            std::cout &lt;&lt; "Unesite autora: ";
            std::getline(std::cin, ImePisca);
            std::cout &lt;&lt; "Unesite zanr: ";
            std::getline(std::cin, Zanr);
            std::cout &lt;&lt; "Unesite godinu izdavanja: ";
            std::cin &gt;&gt; GodinaIzdavanja;
            bajbuk.RegistrirajNovuKnjigu(brojknjige, Naslov, ImePisca, Zanr, GodinaIzdavanja);
        }
        if(opcija==0) break;
    }
    /*if(bajbuk.MapaKnjiga.size()==0 &amp;&amp; bajbuk.MapaKorisnika.size()==0) {
        std::cout &lt;&lt; "Niste nista unijeli!";
        return 0;
    }*/
    for(;;) {
        int opcija;
        std::cout &lt;&lt; "Unesite opciju: " &lt;&lt; std::endl;
        std::cout &lt;&lt; " 1 - Nadji korisnika" &lt;&lt; std::endl &lt;&lt; " 2 - Nadji knjigu" &lt;&lt; std::endl &lt;&lt; " 3 - Izlistaj korisnike" &lt;&lt; std::endl
</font><a name="2"></a><font color="#0000FF"><a href="match14-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_15.gif"/></a>

         &lt;&lt; " 4 - Izlistaj knjige" &lt;&lt; std::endl &lt;&lt; " 5 - Zaduzi knjigu" &lt;&lt; std::endl &lt;&lt; " 6 - Razduzi knjigu" &lt;&lt; std::endl &lt;&lt; " 7 - Prikazi zaduzenja" &lt;&lt; std::endl &lt;&lt; " 0 - kraj" &lt;&lt; std::endl;
        std::cin &gt;&gt; opcija;
        if(!std::cin &amp;&amp; opcija!=1 &amp;&amp; opcija!=2 &amp;&amp; opcija!=3 &amp;&amp; opcija!=4 &amp;&amp; opcija!=5 &amp;&amp; opcija!=6 &amp;&amp; opcija!=7 &amp;&amp; opcija!=0) std::cout &lt;&lt; "Ponovo!" &lt;&lt; std::endl;
        if(opcija==1) {
            int clanskibroj;
            std::cout &lt;&lt; "Unesite clanski broj: ";
            std::cin &gt;&gt; clanskibroj;
            auto Korisnik=bajbuk.NadjiKorisnika(clanskibroj);
            std::cout &lt;&lt; "Korisnik: " &lt;&lt; Korisnik.ime &lt;&lt; " " &lt;&lt; Korisnik.prezime &lt;&lt; " " &lt;&lt; Korisnik.adresa &lt;&lt; " " &lt;&lt; Korisnik.telefon &lt;&lt; std::endl;
        }
        if(opcija==2) {
            int brojknjige;
            std::cout &lt;&lt; "Unesite broj knjige: ";
            std::cin &gt;&gt; brojknjige;
            auto Knjiga=bajbuk.NadjiKnjigu(brojknjige);
            std::cout &lt;&lt; "Knjiga: " &lt;&lt; Knjiga.DajNaslov() &lt;&lt; " " &lt;&lt; Knjiga.DajAutora() &lt;&lt; " " &lt;&lt; Knjiga.DajZanr() &lt;&lt; " " &lt;&lt; Knjiga.DajGodinuIzdavanja() &lt;&lt; std::endl;
        }
        if(opcija==3) bajbuk.IzlistajKorisnike();
        if(opcija==4) bajbuk.IzlistajKnjige();
        if(opcija==5) {
            std::cout &lt;&lt; "Unesite broj knjige i clanski broj korisnika: ";
            int brojknjige, clanskibroj;
            std::cin &gt;&gt; brojknjige &gt;&gt; clanskibroj;
            bajbuk.ZaduziKnjigu(brojknjige, clanskibroj);
        }
        if(opcija==6) {
            std::cout &lt;&lt; "Unesite broj knjige: ";
            int brojknjige;
            std::cin &gt;&gt; brojknjige;
            bajbuk.RazduziKnjigu(brojknjige);
        }
        if(opcija==7) {
            std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
            int clanskibroj;
            std::cin &gt;&gt; clanskibroj;
            bajbuk.PrikaziZaduzenja(clanskibroj);
        }
        if(opcija==0) return 0;
    }
	return 0; 
</font>}</pre>
</body>
</html>
