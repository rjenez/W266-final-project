<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5268.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student9823.cpp<p></p><pre>
/B16/17 (Zadaća 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
  std::string ime, prezime;
  std::string adresa, telefon;
};

class Knjiga {
  std::string naslov, imePisca, zanr;
  int godinaIzdavanja;
  Korisnik *pok;
public:
<a name="1"></a><font color="#00FF00"><a href="match627-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

  Knjiga(std::string naslov, std::string imePisca, std::string zanr, int godinaIzdavanja) : naslov(naslov), imePisca(imePisca), zanr(zanr), godinaIzdavanja(godinaIzdavanja) {
     pok = nullptr; 
  }
  std::string DajNaslov() const { return naslov; }
  std::string DajAutora() const { return imePisca; }
  std::string DajZanr() const { return zanr; }
</font>  int DajGodinuIzdavanja() const { return godinaIzdavanja; }
  Korisnik* DajKodKogaJe() const { return pok; } 
  void ZaduziKnjigu(Korisnik &amp;novi) { pok = &amp;novi;  }
  void RazduziKnjigu() { pok = nullptr; }
  bool DaLiJeZaduzena() const { if(pok != nullptr) return true; else return false; }
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; Korisnici;
    std::map&lt;int, Knjiga*&gt; Knjige;
public:
    Biblioteka() { }
    Biblioteka(const Biblioteka &amp;k){
        for(auto it = k.Korisnici.begin(); it != k.Korisnici.end(); it++){
            Korisnik *novi =  nullptr;
            novi = new Korisnik();
<a name="4"></a><font color="#FF00FF"><a href="match627-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            novi-&gt;ime = (it-&gt;second)-&gt;ime; novi-&gt;prezime = (it-&gt;second)-&gt;prezime; novi-&gt;adresa = (it-&gt;second)-&gt;adresa; novi-&gt;telefon = (it-&gt;second)-&gt;telefon;
            Korisnici.insert(std::make_pair(it-&gt;first, novi));
        }
        for(auto it = k.Knjige.begin(); it != k.Knjige.end(); it++){
</font>            Knjiga *novi = nullptr;
<a name="5"></a><font color="#FF0000"><a href="match627-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            novi = new Knjiga((it-&gt;second)-&gt;DajNaslov(), (it-&gt;second)-&gt;DajAutora(), (it-&gt;second)-&gt;DajZanr(), (it-&gt;second)-&gt;DajGodinuIzdavanja());
            Knjige.insert(std::make_pair(it-&gt;first, novi));
</font>        }
    }
    Biblioteka(Biblioteka &amp;&amp;k){
         std::swap(Korisnici, k.Korisnici);
         std::swap(Knjige, k.Knjige);
    }
    Biblioteka &amp;operator = (const Biblioteka &amp;k) {
        Biblioteka nova(k);
        // kreirali novu brišemo sad
        for(auto it = Korisnici.begin(); it != Korisnici.end(); it++){
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
        for(auto it = Knjige.begin(); it != Knjige.end(); it++){
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
        
        std::swap(Korisnici, nova.Korisnici);
        std::swap(Knjige, nova.Knjige);
        return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;k) {
        for(auto it = Korisnici.begin(); it != Korisnici.end(); it++){
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
        for(auto it = Knjige.begin(); it != Knjige.end(); it++){
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
        std::swap(Korisnici, k.Korisnici);
        std::swap(Knjige, k.Knjige);
        return *this;
    }
    
    ~Biblioteka() {
        for(auto it = Korisnici.begin(); it != Korisnici.end(); it++){
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
        for(auto it = Knjige.begin(); it != Knjige.end(); it++){
            delete it-&gt;second;
            it-&gt;second = nullptr;
        }
    }
<a name="3"></a><font color="#00FFFF"><a href="match627-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    void RegistrirajNovogKorisnika(int clanskiBroj, std::string ime, std::string prezime, std::string adresa, std::string brTel){
        auto it(Korisnici.find(clanskiBroj));
        if(it != Korisnici.end()) throw std::logic_error("Korisnik vec postoji");
        Korisnik *novi =  nullptr;
</font>        novi = new Korisnik();
<a name="0"></a><font color="#FF0000"><a href="match627-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        novi-&gt;ime = ime; novi-&gt;prezime = prezime; novi-&gt;adresa = adresa; novi-&gt;telefon = brTel;
        Korisnici.insert(std::make_pair(clanskiBroj, novi));
    }
    void RegistrirajNovuKnjigu(int evidencijskiBroj, std::string naslov, std::string imepsica, std::string zanr, int godinaIZD){
        auto it(Knjige.find(evidencijskiBroj));
        if(it != Knjige.end()) throw std::logic_error("Knjiga vec postoji");
</font>        Knjiga *novi = nullptr;
<a name="2"></a><font color="#0000FF"><a href="match627-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        novi = new Knjiga(naslov, imepsica, zanr, godinaIZD);
        Knjige.insert(std::make_pair(evidencijskiBroj, novi));
    }
    Korisnik &amp;NadjiKorisnika(int clBroj){
        auto it(Korisnici.find(clBroj));
        if(it == Korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
</font>        else return *(it-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int clBroj) const {
        auto it(Knjige.find(clBroj));
        if(it == Knjige.end()) throw std::logic_error("Knjiga nije nadjena");
<a name="7"></a><font color="#0000FF"><a href="match627-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        else return *(it-&gt;second);
    }
    void IzlistajKorisnike() const {
        for(auto it = Korisnici.begin(); it != Korisnici.end(); it++){
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first  &lt;&lt; std::endl 
</font>        &lt;&lt; "Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;ime  &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt; std::endl 
        &lt;&lt; "Adresa: " &lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt; std::endl
<a name="6"></a><font color="#00FF00"><a href="match627-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        &lt;&lt; "Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt; std::endl;
        }
    }
    void IzlistajKnjige() const {
        for(auto it = Knjige.begin(); it != Knjige.end(); it++){
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first  &lt;&lt; std::endl 
</font>        &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov()  &lt;&lt; std::endl 
        &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl
        &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl
        &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if((it-&gt;second)-&gt;DaLiJeZaduzena()){
            auto it3 = (it-&gt;second)-&gt;DajKodKogaJe();
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it3-&gt;ime &lt;&lt; " " &lt;&lt; it3-&gt;prezime &lt;&lt; std::endl;
        }
      }
    }
    void ZaduziKnjigu(int evBroj, int clBroj) {
        try {
            NadjiKnjigu(evBroj);
        } catch (...){
            throw std::logic_error("Knjiga nije nadjena");
        }
        auto it(Knjige.find(evBroj));
        if((it-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        
        try {
            NadjiKorisnika(clBroj);
        } catch (...){
            throw std::logic_error("Korisnik nije nadjen");
        }
        (it-&gt;second)-&gt;ZaduziKnjigu(NadjiKorisnika(clBroj));
    }
    void RazduziKnjigu(int evBroj) {
         try {
            NadjiKnjigu(evBroj);
        } catch (...){
            throw std::logic_error("Knjiga nije nadjena");
        }
        auto it(Knjige.find(evBroj));
        if(!(it-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        (it-&gt;second)-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int clBroj);
};

void Biblioteka::PrikaziZaduzenja(int clBroj) {
    auto it1(Korisnici.find(clBroj));
    if(it1 == Korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    bool ima(false);
    
    for(auto it = Knjige.begin(); it != Knjige.end(); it++){
        if(it1-&gt;second == (it-&gt;second)-&gt;DajKodKogaJe()){
            ima = true;
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first  &lt;&lt; std::endl 
        &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov()  &lt;&lt; std::endl 
        &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl
        &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl
        &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        }
    }
    if(!ima) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
}

int main ()
{
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic","Zmaja od Bosne 30", "032/444-555");
    b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic","Trg neznalica 111", "030/111-222");
    b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic","Studenata etfovaca 3b", "037/654-321");
    b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
    b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
    b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
    b.ZaduziKnjigu(231, 1234);
    b.ZaduziKnjigu(136, 1234);
    b.IzlistajKnjige();
	return 0;
}</pre>
</body>
</html>
