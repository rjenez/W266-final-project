<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2160.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student2567.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
struct Korisnik
{
<a name="3"></a><font color="#00FFFF"><a href="match79-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    std::string ime, prezime, adresa, telefon;  
};

class Knjiga
{
    std::string naslov, pisac, zanr;
    int god;
    Korisnik *zad = nullptr;
public:
    Knjiga(std::string naslov, std::string pisac, std::string zanr, int god) : naslov(naslov), pisac(pisac), zanr(zanr), god(god) {}
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return pisac; }
</font>    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return god; }
<a name="0"></a><font color="#FF0000"><a href="match79-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_39.gif"/></a>

    Korisnik *DajKodKogaJe() const { return zad; }
    void ZaduziKnjigu (Korisnik &amp;k) { zad = &amp;k; }
    void RazduziKnjigu() { zad = nullptr; }
    bool DaLiJeZaduzena() const
    { 
        if(zad == nullptr) 
            return false; 
            
        return true; 
    }
};

class Biblioteka
{
    std::map&lt;int, Korisnik *&gt; korisnik;
    std::map&lt;int, Knjiga *&gt; knjiga;
public:
    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;b)
    {
        for(auto i : b.korisnik)
        {
            Korisnik *novi = new Korisnik;
            novi-&gt;ime = i.second-&gt;ime;
            novi-&gt;prezime = i.second-&gt;prezime;
            novi-&gt;adresa = i.second-&gt;adresa;
            novi-&gt;telefon = i.second-&gt;telefon;
            korisnik.insert(std::make_pair(i.first, novi));
        }
        for(auto i : b.knjiga)
        {
            Knjiga *nova = new Knjiga(i.second-&gt;DajNaslov(), i.second-&gt;DajAutora(), i.second-&gt;DajZanr(), i.second-&gt;DajGodinuIzdavanja());
            knjiga.insert(std::make_pair(i.first, nova));
        }
    }
    ~Biblioteka() 
    {
        for(auto i : korisnik)
            delete i.second;
            
        for(auto i : knjiga)
            delete i.second;
    }
    Biblioteka &amp;operator = (const Biblioteka &amp;b)
    {
        if(this == &amp;b)
            return *this;
            
        for(auto i : korisnik)
            delete i.second;
            
        for(auto i : knjiga)
            delete i.second;
        
        for(auto i : b.korisnik)
        {
            Korisnik *novi = new Korisnik;
            novi-&gt;ime = i.second-&gt;ime;
            novi-&gt;prezime = i.second-&gt;prezime;
            novi-&gt;adresa = i.second-&gt;adresa;
            novi-&gt;telefon = i.second-&gt;telefon;
            korisnik.insert(std::make_pair(i.first, novi));
        }
        for(auto i : b.knjiga)
        {
            Knjiga *nova = new Knjiga(i.second-&gt;DajNaslov(), i.second-&gt;DajAutora(), i.second-&gt;DajZanr(), i.second-&gt;DajGodinuIzdavanja());
            knjiga.insert(std::make_pair(i.first, nova));
        }
        return *this;
    }
    void RegistrirajNovogKorisnika(int id, std::string ime, std::string prezime, std::string adresa, std::string tel);
    void RegistrirajNovuKnjigu(int id, std::string naslov, std::string pisac, std::string zanr, int god);
    Korisnik &amp;NadjiKorisnika(int id)
    {
        auto i = korisnik.find(id);
        if(i == korisnik.end())
            throw std::logic_error("Korisnik nije nadjen");
        return *i-&gt;second;
    }
    Knjiga NadjiKnjigu(int id)
    {
        auto i = knjiga.find(id);
        if(i == knjiga.end())
            throw std::logic_error("Knjiga nije nadjena");
            
        return *i-&gt;second;
    }
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int id1, int id2);
    void RazduziKnjigu(int id);
    void PrikaziZaduzenja(int id) const;
};
void Biblioteka::RegistrirajNovogKorisnika(int id, std::string ime, std::string prezime, std::string adresa, std::string tel)
{
    if(korisnik.count(id) != 0)
        throw std::logic_error("Korisnik vec postoji");
        
    Korisnik *k = nullptr;
    k = new Korisnik{ime, prezime, adresa, tel};
    korisnik[id] = k;
}
void Biblioteka::RegistrirajNovuKnjigu(int id, std::string naslov, std::string pisac, std::string zanr, int god)
{
    if(knjiga.count(id) != 0)
        throw std::logic_error("Knjiga vec postoji");
        
    Knjiga *k = nullptr;
    k = new Knjiga(naslov, pisac, zanr, god);
    knjiga[id] = k;
}
void Biblioteka::IzlistajKorisnike() const
{
    for(auto i : korisnik)
    {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; i.first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; i.second-&gt;ime &lt;&lt; " " &lt;&lt; i.second-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; i.second-&gt;adresa &lt;&lt; std::endl;
</font><a name="4"></a><font color="#FF00FF"><a href="match79-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; i.second-&gt;telefon &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const
{
    for(auto i : knjiga)
    {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i.first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; i.second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; i.second-&gt;DajAutora() &lt;&lt; std::endl;
</font><a name="1"></a><font color="#00FF00"><a href="match79-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_19.gif"/></a>

        std::cout &lt;&lt; "Zanr: " &lt;&lt; i.second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; i.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        
        if(i.second-&gt;DaLiJeZaduzena())
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; i.second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; i.second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
            
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int id1, int id2)
{
    auto i = knjiga.find(id1);
    if(i == knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
        
    if((*i).second-&gt;DaLiJeZaduzena())
        throw std::logic_error("Knjiga vec zaduzena");
        
    auto j = korisnik.find(id2);
    if(j == korisnik.end())
        throw std::logic_error("Korisnik nije nadjen");
    
    i-&gt;second-&gt;ZaduziKnjigu(*j-&gt;second);
}
void Biblioteka::RazduziKnjigu(int id)
{
    auto i = knjiga.find(id);
    if(i == knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
    
    if(!(*i).second-&gt;DaLiJeZaduzena())
        throw std::logic_error("Knjiga nije zaduzena");
        
    (*i).second-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int id) const
{
    auto i = korisnik.find(id);
    if(i == korisnik.end())
        throw std::domain_error("Korisnik nije nadjen");
    
    bool ima = false;
    for(auto j : knjiga)
    {
        if(j.second-&gt;DajKodKogaJe() != nullptr &amp;&amp; i-&gt;second-&gt;ime == j.second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; i-&gt;second-&gt;prezime == j.second-&gt;DajKodKogaJe()-&gt;prezime
            &amp;&amp; i-&gt;second-&gt;adresa == j.second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; i-&gt;second-&gt;telefon == j.second-&gt;DajKodKogaJe()-&gt;telefon)
        {
            ima = true;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; j.first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; j.second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; j.second-&gt;DajAutora() &lt;&lt; std::endl;
</font><a name="2"></a><font color="#0000FF"><a href="match79-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_14.gif"/></a>

            std::cout &lt;&lt; "Zanr: " &lt;&lt; j.second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; j.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
        }
    }
    if(ima == false)
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
}
int main_at ()
{
    Korisnik kor{"Meho", "Mehic", "Dobojska 15", "033/123-456"};
    Knjiga knj("Tvrdjava", "Mesa Selimovic", "Roman", 1965);
    if(knj.DajKodKogaJe() == nullptr) std::cout &lt;&lt; "Nije zaduzena\n";
    std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
    knj.ZaduziKnjigu(kor);
    std::cout &lt;&lt; "Knjigu je zaduzio " &lt;&lt; knj.DajKodKogaJe()-&gt;ime &lt;&lt; std::endl;
    std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;

	return 0;
}
int main_at2()
{
    Biblioteka bib5;
    bib5.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib5.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    std::cout &lt;&lt; bib5.NadjiKnjigu(2).DajNaslov();
    return 0;
}

int main_at3()
{
    Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
    bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    bib8.ZaduziKnjigu(2, 1);
    bib8.IzlistajKnjige();

}
int main_at4()
{
    Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
</font>"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata etfovaca 3b", "037/654-321");
b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
<a name="5"></a><font color="#FF0000"><a href="match79-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
b.PrikaziZaduzenja(1234);
}

int main()
{
    
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
    "Zmaja od Bosne 30", "032/444-555");
    b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
</font>    "Trg neznalica 111", "030/111-222");
    b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
    "Studenata etfovaca 3b", "037/654-321");
    b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
<a name="6"></a><font color="#00FF00"><a href="match79-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
    b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
    b.ZaduziKnjigu(231, 1234);
    b.ZaduziKnjigu(136, 1234);
    b.PrikaziZaduzenja(1234);
</font>}</pre>
</body>
</html>
