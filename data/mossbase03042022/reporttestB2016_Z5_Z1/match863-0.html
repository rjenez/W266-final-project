<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8599.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8599.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, pisac, zanr;
    int godina;
    Korisnik *pok;
    friend class Biblioteka;
    public:
    Knjiga(std::string naslov1, std::string pisac1, std::string zanr1, int godina1):
        naslov(naslov1), pisac(pisac1), zanr(zanr1), godina(godina1), pok(nullptr) {}
    std::string DajNaslov() const { return naslov;}
    std::string DajAutora() const { return pisac; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina; }
    Korisnik* DajKodKogaJe() const { return pok; }
    void ZaduziKnjigu(Korisnik &amp;k){ pok=&amp;k; }
    void RazduziKnjigu() { pok=nullptr; }
    bool DaLiJeZaduzena() const { return !(pok==nullptr);}
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; m_korisnika;
    std::map&lt;int, Knjiga*&gt; m_knjiga;
    public:
    ~Biblioteka() {for(auto it=m_korisnika.begin(); it!=m_korisnika.end(); it++) delete it-&gt;second;  
        for(auto it=m_knjiga.begin(); it!=m_knjiga.end(); it++) delete it-&gt;second; 
    }
    void RegistrirajNovogKorisnika(int cl_broj, std::string ime1,std::string prezime1,std::string adresa1,std::string telefon1);
    void RegistrirajNovuKnjigu(int br_knjige, std::string naslov, std::string pisac1, std::string zanr, int godina1);
    Korisnik &amp;NadjiKorisnika(int cl_broj);
    Knjiga &amp;NadjiKnjigu(int br_knjige);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int br_knjige, int cl_broj);
    void RazduziKnjigu(int br_knjige) const;
    void PrikaziZaduzenja(int cl_broj) const;
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
   // Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
};
void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, std::string ime1, std::string prezime1, std::string adresa1, std::string telefon1){
    
    Korisnik* k;
    try {
        k=new Korisnik;
    auto it(m_korisnika.find(cl_broj));
    if(it!=m_korisnika.end()) throw std::logic_error("Korisnik vec postoji");
    k-&gt;ime=ime1;
    k-&gt;prezime=prezime1;
    k-&gt;adresa=adresa1;
    k-&gt;telefon=telefon1;
    m_korisnika.insert(std::make_pair(cl_broj, k));
    }
    catch(std::bad_alloc){
<a name="1"></a><font color="#00FF00"><a href="match863-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        delete k;
    }
}
void Biblioteka::RegistrirajNovuKnjigu(int br_knjige, std::string naslov1, std::string pisac1, std::string zanr1, int godina1){
    auto it(m_knjiga.find(br_knjige));
    if(it!=m_knjiga.end()) throw std::logic_error("Knjiga vec postoji");
</font>    Knjiga* k;
    try{
    k=new Knjiga(naslov1, pisac1, zanr1, godina1);
    m_knjiga.insert(std::make_pair(br_knjige, k));
    }
    catch(std::bad_alloc){
        delete k;
    }
}
<a name="0"></a><font color="#FF0000"><a href="match863-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_10.gif"/></a>

 Korisnik &amp;Biblioteka::NadjiKorisnika(int cl_broj){
     auto it(m_korisnika.find(cl_broj));
     if(it==m_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
     return *(it-&gt;second);
 }
 Knjiga &amp;Biblioteka::NadjiKnjigu(int br_knjige){
     auto it(m_knjiga.find(br_knjige));
     if(it==m_knjiga.end()) throw std::logic_error ("Knjiga nije nadjena");
     return *(it-&gt;second);
 }
 void Biblioteka::IzlistajKorisnike() const{
     for(auto it=m_korisnika.begin(); it!=m_korisnika.end(); it++){
         std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
         std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (*(it-&gt;second)).ime &lt;&lt; " " &lt;&lt; (*(it-&gt;second)).prezime &lt;&lt; std::endl;
         std::cout &lt;&lt; "Adresa: " &lt;&lt; (*(it-&gt;second)).adresa &lt;&lt; std::endl;
</font>         std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (*(it-&gt;second)).telefon &lt;&lt; std::endl &lt;&lt; std::endl;
     }
 }
 void Biblioteka::IzlistajKnjige() const {
<a name="2"></a><font color="#0000FF"><a href="match863-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

     for(auto it=m_knjiga.begin(); it!=m_knjiga.end(); it++){
         std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
         std::cout &lt;&lt; "Naslov: " &lt;&lt; (*(it-&gt;second)).naslov &lt;&lt; std::endl;
</font>         std::cout &lt;&lt; "Pisac: " &lt;&lt; (*(it-&gt;second)).pisac &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match863-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

         std::cout &lt;&lt; "Zanr: " &lt;&lt; (*(it-&gt;second)).zanr &lt;&lt; std::endl;
         std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (*(it-&gt;second)).godina &lt;&lt; std::endl;
         if((*(it-&gt;second)).pok!=nullptr) 
</font><a name="3"></a><font color="#00FFFF"><a href="match863-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

           std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; (*((*(it-&gt;second)).pok)).ime &lt;&lt; " " &lt;&lt; (*((*(it-&gt;second)).pok)).prezime;
           std::cout &lt;&lt; std::endl;
     }
 }
 void Biblioteka::ZaduziKnjigu(int br_knjige, int cl_broj){
     auto it(m_knjiga.find(br_knjige));
     if(it==m_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
</font>     if((*(it-&gt;second)).pok!=nullptr) throw std::logic_error ("Knjiga vec zaduzena");
     auto it2(m_korisnika.find(cl_broj));
     if(it2==m_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
     (*(it-&gt;second)).pok=it2-&gt;second;
  }

void Biblioteka::RazduziKnjigu(int br_knjige) const{
    auto it(m_knjiga.find(br_knjige));
    if(it==m_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
    if((*(it-&gt;second)).pok==nullptr) throw std::logic_error ("Knjiga nije zaduzena");
    delete (*(it-&gt;second)).pok;
    (*(it-&gt;second)).pok=nullptr;
}
void Biblioteka::PrikaziZaduzenja(int cl_broj) const {
    auto it(m_korisnika.find(cl_broj));
    int brojac(0);
    if(it==m_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
    
    for(auto it2=m_knjiga.begin(); it2!=m_knjiga.end(); it2++){
        if((it-&gt;second)==(*(it2-&gt;second)).pok){
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it2-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; (*(it2-&gt;second)).naslov &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; (*(it2-&gt;second)).pisac &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; (*(it2-&gt;second)).zanr &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (*(it2-&gt;second)).godina &lt;&lt; std::endl &lt;&lt; std::endl;
            brojac++;
        }
    }
    if(brojac==0)
    std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
}

Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){
  //  std::map&lt;int,Korisnik*&gt; x1;
    //std::map&lt;int,Knjiga*&gt; x2;
    
    int br_ko(b.m_korisnika.size());
    int br_knj(b.m_knjiga.size());
    Korisnik **ko=nullptr;
    Knjiga **knj=nullptr;
    try{
        ko=new Korisnik*[br_ko]{};
        knj=new Knjiga*[br_knj]{};
        for(int i=0; i&lt;br_ko; i++){
            ko[i]=new Korisnik;
        }
        for(auto it=b.m_knjiga.begin(); it!=b.m_knjiga.end(); it++){
            this-&gt;=new Knjiga();
        
}
catch(...){
    for(int i=0; i&lt;br_ko; i++){
        delete ko[i];
        delete[] ko;
}
}}

int main ()
{
    //AT4 (c9): testira DajKodKogaJe metodu

Biblioteka k;
Biblioteka d;
d=k;

	return 0;
}</pre>
</body>
</html>
