<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8199.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5673.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match153-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_38.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;

using namespace std;

struct Korisnik
{
    string ime, prezime, adresa, telefon;
    Korisnik(string i, string p, string a, string t)
    {
        ime = i;
        prezime = p;
        adresa = a;
        telefon = t;
    }
    Korisnik(){}
};

class Knjiga
{
    string naslov, pisac, zanr;
    int godina;
    Korisnik *pok;
    
    public:
    Knjiga(string n, string p, string z, int g):naslov(n), pisac(p), zanr(z), godina(g)
    {
        pok = nullptr;
    }
    
    ~Knjiga()
    {
        delete pok;
    }
    
    string DajNaslov() {return naslov;}
    string DajAutora() {return pisac;}
    string DajZanr() {return zanr;}
    int DajGodinuIzdavanja() {return godina;}
    Korisnik *DajKodKogaJe() {return pok;}
    
    void ZaduziKnjigu(Korisnik k)
    {
        pok = new Korisnik(k);
    }
    
    void RazduziKnjigu()
    {
        delete pok;
        pok = nullptr;
    }
    
    bool DaLiJeZaduzena()
    {
        return pok;
    }
};

class Biblioteka
{
    map&lt;int, Korisnik*&gt; korisnici;
    map&lt;int, Knjiga*&gt; knjige;
    
    public:
    Biblioteka() {}
    
    Biblioteka(Biblioteka &amp;b)
    {
        auto iter1 = b.korisnici.begin();
        while (iter1 != b.korisnici.end())
        {
            korisnici.insert(*iter1);
            iter1++;
        }
        
        auto iter2 = b.knjige.begin();
        while (iter2 != b.knjige.end())
        {
            knjige.insert(*iter2);
            iter2++;
        }
    }
    
    void RegistrirajNovogKorisnika(int id, string i, string p, string a, string t)
    {
        if (korisnici.find(id) != korisnici.end()) throw logic_error ("Korisnik vec postoji");
        korisnici.insert(make_pair(id, new Korisnik(i, p, a, t)));
    }
    
    void RegistrirajNovuKnjigu(int id, string i, string p, string z, int g)
    {
        if (knjige.find(id) != knjige.end()) throw logic_error ("Knjiga vec postoji");
        knjige.insert(make_pair(id, new Knjiga(i, p, z, g)));
    }
    
    void IzlistajKorisnike()
    {
        auto iter = korisnici.begin();
        while (iter != korisnici.end())
        {
            cout &lt;&lt; "Clanski broj: " &lt;&lt; iter-&gt;first &lt;&lt; endl;
            cout &lt;&lt; "Ime i prezime: " &lt;&lt; iter-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; iter-&gt;second-&gt;prezime &lt;&lt; endl;
            cout &lt;&lt; "Adresa: " &lt;&lt; iter-&gt;second-&gt;adresa &lt;&lt; endl;
            cout &lt;&lt; "Broj telefona: " &lt;&lt; iter-&gt;second-&gt;telefon &lt;&lt; endl;
            iter++;
        }
    }
    
    void IzlistajKnjige()
    {
        auto iter = knjige.begin();
        while (iter != knjige.end())
        {
            cout &lt;&lt; "Evidencijski broj: " &lt;&lt; iter-&gt;first &lt;&lt; endl;
            cout &lt;&lt; "Naslov: " &lt;&lt; iter-&gt;second-&gt;DajNaslov() &lt;&lt; endl;
</font>            cout &lt;&lt; "Pisac: " &lt;&lt; iter-&gt;second-&gt;DajAutora() &lt;&lt; endl;
<a name="2"></a><font color="#0000FF"><a href="match153-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

            cout &lt;&lt; "Zanr: " &lt;&lt; iter-&gt;second-&gt;DajZanr() &lt;&lt; endl;
            cout &lt;&lt; "Godina izdavanja: " &lt;&lt; iter-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
            if (iter-&gt;second-&gt;DaLiJeZaduzena()) cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; iter-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; iter-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; endl;
            iter++;
        }
    }
    
    Korisnik NadjiKorisnika(int id)
    {
        if (korisnici.find(id) == korisnici.end()) throw logic_error ("Knjiga ne postoji");
        auto iter = korisnici.find(id);
        return *iter-&gt;second;
    }
    
    Knjiga NadjiKnjigu(int id)
    {
        if (knjige.find(id) == knjige.end()) throw logic_error ("Knjiga ne postoji");
        return *knjige.find(id)-&gt;second;
    }
    
    void PrikaziZaduzenja(int id)
    {
        if (korisnici.find(id)==korisnici.end()) throw logic_error("Korisnik nije nadjen");
        auto iter = knjige.begin();
        int br = 0;
        while (iter != knjige.end())
        {
            if(iter-&gt;second-&gt;DaLiJeZaduzena())
            {
                if(iter-&gt;second-&gt;DajKodKogaJe() != korisnici[id])
                {
                    cout &lt;&lt; "Evidencijski broj: " &lt;&lt; iter-&gt;first &lt;&lt; endl;
                    cout &lt;&lt; "Naslov: " &lt;&lt; iter-&gt;second-&gt;DajNaslov() &lt;&lt; endl;
</font>                    cout &lt;&lt; "Pisac: " &lt;&lt; iter-&gt;second-&gt;DajAutora() &lt;&lt; endl;
<a name="0"></a><font color="#FF0000"><a href="match153-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_39.gif"/></a>

                    cout &lt;&lt; "Zanr: " &lt;&lt; iter-&gt;second-&gt;DajZanr() &lt;&lt; endl;
                    cout &lt;&lt; "Godina izdavanja: " &lt;&lt; iter-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
                    br++;
                }
            }
            iter++;
        }
        
        if (!br) throw logic_error("Nema zaduzenja za tog korisnika!");
    }
    
    ~Biblioteka()
    {
        auto iter1 = knjige.begin();
        while(iter1 != knjige.end())
        {
            delete iter1-&gt;second;
            iter1++;
        }
        auto iter2 = korisnici.begin();
        while(iter2 != korisnici.end())
        {
            delete iter2-&gt;second;
            iter2++;
        }
    }
    
    void ZaduziKnjigu(int id1, int id2)
    {
        if (korisnici.find(id2) == korisnici.end()) throw logic_error ("Knjiga ne postoji");
        if (knjige.find(id1) == knjige.end()) throw logic_error ("Knjiga ne postoji");
        if (knjige[id1]-&gt;DaLiJeZaduzena()) throw logic_error ("Knjiga vec zaduzena");
        knjige[id1]-&gt;ZaduziKnjigu(*korisnici[id2]);
    }
    
    void RazduziKnjigu(int id1, int id2)
    {
        if (korisnici.find(id2) == korisnici.end()) throw logic_error ("Knjiga ne postoji");
        if (knjige.find(id1) == knjige.end()) throw logic_error ("Knjiga ne postoji");
        knjige[id1]-&gt;RazduziKnjigu();
    }
};

int main ()
{
    Biblioteka b;
    try{
        do
        {
            cout &lt;&lt; "0 - izlaz, 1 - dodajte knjigu, 2 - dodajte korisnika, 3 - zaduzite knjigu, 4 - razduzite knjigu, 5 - ispiste knjige, 6 - ispiste korisnike" &lt;&lt; endl;
            int n;
            cin &gt;&gt; n;
            if (n == 0) return 0;
            
            if (n == 1)
            {
                cout &lt;&lt; "Unesite evidencijski broj: ";
                int id;
                cin &gt;&gt; id;
                cin.ignore(10000, '\n');
                cout &lt;&lt; "Unesite ime knjige: ";
                string knjiga;
                getline(cin, knjiga);
                cout &lt;&lt; "Unesite ime autora: ";
                string autor;
                getline(cin, autor);
                cout &lt;&lt; "Unesite zanr: ";
                string zanr;
                getline(cin, zanr);
                cout &lt;&lt; "Unesite godinu izdavanja: ";
                int g;
                cin &gt;&gt; g;
                b.RegistrirajNovuKnjigu(id, knjiga, autor, zanr, g);
            }
            
            if (n == 2)
            {
                cout &lt;&lt; "Unesite clanski broj: ";
                int id;
                cin &gt;&gt; id;
                cin.ignore(1000, '\n');
                cout &lt;&lt; "Unesite ime korisnika: ";
                string ime, prezime;
                getline(cin, ime);
                cout &lt;&lt; "Unesite prezime korisnika: ";
                getline(cin, prezime);
                cout &lt;&lt; "Unesite adresu korisnika: ";
                string adresa;
                getline(cin, adresa);
                cout &lt;&lt; "Unesite broj telefona korisnika: ";
                string telefon;
                getline(cin, telefon);
                
                b.RegistrirajNovogKorisnika(id, ime, prezime, adresa, telefon);
            }
            
            if (n == 3)
            {
                cout &lt;&lt; "Unesite clanski broj korisnika: ";
                int id1;
                cin &gt;&gt; id1;
                cout &lt;&lt; "Unesite evidencijski broj knjige: ";
                int id2;
                cin &gt;&gt; id2;
                
                b.ZaduziKnjigu(id2, id1);
            }
            
            if (n == 4)
            {
                cout &lt;&lt; "Unesite clanski broj korisnika: ";
                int id1;
                cin &gt;&gt; id1;
                cout &lt;&lt; "Unesite evidencijski broj knjige: ";
                int id2;
                cin &gt;&gt; id2;
                
                b.RazduziKnjigu(id2, id1);
            }
            
            if (n == 5) b.IzlistajKnjige();
            
            if (n == 6) b.IzlistajKorisnike();
        }
        while (true);
    }
    catch(logic_error e) {
        cout &lt;&lt; e.what();
        
    }
	return 0;
</font>}</pre>
</body>
</html>
