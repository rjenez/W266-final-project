<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4415.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student4415.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match179-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga
{
    std::string naslov;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    Korisnik* kod_koga_je;
public :
    Knjiga (std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), godina_izdavanja(godina_izdavanja),kod_koga_je(nullptr) {}
</font>
    std::string DajNaslov () const {
        return naslov;
    }
    std::string DajAutora () const {
        return ime_pisca;
    }
    std::string DajZanr () const {
        return zanr;
    }
    int DajGodinuIzdavanja () const {
        return godina_izdavanja;
    }
<a name="1"></a><font color="#00FF00"><a href="match179-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

    Korisnik* DajKodKogaJe () const {
        return kod_koga_je;
    }
    void ZaduziKnjigu (Korisnik &amp;k) {
        kod_koga_je = &amp;k;
    }
    void RazduziKnjigu ()  {
        kod_koga_je = nullptr;
    }
    bool DaLiJeZaduzena () const {
        return kod_koga_je;
    }
};

class Biblioteka
{
    std::map&lt;int,Knjiga*&gt; knjige;
    std::map&lt;int,Korisnik*&gt; korisnici;
    static void Ispis_knjige(const Knjiga &amp;k,int broj_k,bool test=true) {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; broj_k &lt;&lt;std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; k.DajNaslov() &lt;&lt;std::endl;
</font>        std::cout &lt;&lt; "Pisac: " &lt;&lt; k.DajAutora() &lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match179-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_75.gif"/></a>

        std::cout &lt;&lt; "Zanr: " &lt;&lt; k.DajZanr() &lt;&lt;std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.DajGodinuIzdavanja() &lt;&lt;std::endl;    
        if (test and k.DaLiJeZaduzena()) {
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; k.DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; k.DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
        }
    }
    static void Ispis_korisnika(const Korisnik &amp;k,int broj_k) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; broj_k &lt;&lt;std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; k.ime &lt;&lt; " "  &lt;&lt; k.prezime &lt;&lt;std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; k.adresa &lt;&lt;std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; k.telefon &lt;&lt;std::endl;
        
    }
public :
    ~Biblioteka() {
        for (auto &amp;i : korisnici) {
            delete i.second;
        }
        for (auto &amp;i : knjige) {
            delete i.second;
        }
    }
    Biblioteka() = default;
    Biblioteka (const Biblioteka &amp;b);
    Biblioteka operator = (Biblioteka b) {
        std::swap(knjige,b.knjige);
        std::swap(korisnici,b.korisnici);
        return *this;
    }
    Biblioteka &amp;operator = (Biblioteka &amp;&amp;b) = default;
    void RegistrirajNovogKorisnika (int clanski_broj, std::string ime,std::string prezime, std::string adresa,std::string telefon) {
        if(korisnici.count(clanski_broj)) throw std::logic_error ("Korisnik vec postoji");
        korisnici.insert(std::make_pair(clanski_broj,new Korisnik{ime,prezime,adresa,telefon}));
    }
    void RegistrirajNovuKnjigu (int clanski_broj, std::string naslov,std::string ime_pisca, std::string zanr,int godina_izdavanja) {
        if(knjige.count(clanski_broj)) throw std::logic_error ("Knjiga vec postoji");
        knjige.insert(std::make_pair(clanski_broj,new Knjiga(naslov,ime_pisca,zanr,godina_izdavanja)));
    }
    Korisnik &amp;NadjiKorisnika(int clanski_broj) {
        if(korisnici.count(clanski_broj) == 0) throw std::logic_error ("Korisnik nije nadjen");
        return *(korisnici.find(clanski_broj))-&gt;second;
    }
    Knjiga &amp;NadjiKnjigu(int clanski_broj) {
        if(knjige.count(clanski_broj) == 0) throw std::logic_error ("Knjiga nije nadjena");
        return *(knjige.find(clanski_broj))-&gt;second;
    }
    void IzlistajKnjige() {
        for (auto &amp;i : knjige) {
            Ispis_knjige(*i.second,i.first); std::cout  &lt;&lt; std::endl;
        }
    }
    void IzlistajKorisnike() {
        for (auto &amp;i : korisnici) {
            Ispis_korisnika(*i.second,i.first); std::cout  &lt;&lt; std::endl;
        }
    }
    void ZaduziKnjigu (int broj_knjige, int broj_korisnika) {
        
        for (auto &amp;j : korisnici) {
            if(j.first == broj_korisnika) {
                for (auto &amp;i : knjige) {
                    if (i.first == broj_knjige) {
                        if (i.second-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
                        i.second-&gt;ZaduziKnjigu(*j.second);
                        return;
                    }
                } // Trazimo knjigu
                throw std::logic_error ("Knjiga nije nadjena");
            } 
        } 
        throw std::logic_error ("Korisnik nije nadjen");
    }
    void RazduziKnjigu(int broj_knjige) {
        for (auto &amp;i : knjige) {
            if(i.first == broj_knjige) {
                if (!i.second-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga nije zaduzena");
                i.second-&gt;RazduziKnjigu();
                return;
            }
        }
        throw std::logic_error ("Knjiga nije nadjena");
    }
    void PrikaziZaduzenja (int broj_korisnika) {
        bool flag(false);
        auto t(korisnici.find(broj_korisnika));
        if(korisnici.find(broj_korisnika) == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        for (auto &amp;i : knjige) {
            if(i.second-&gt;DajKodKogaJe() and i.second-&gt;DajKodKogaJe() == t-&gt;second) {
                if(!flag) flag = true;
                Ispis_knjige(*i.second,i.first,false); std::cout &lt;&lt; std::endl;
            }
        }
        if (!flag) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
    }

};
Biblioteka::Biblioteka (const Biblioteka &amp;b)
{
    for (auto &amp;i : b.knjige) {
        knjige.insert(std::make_pair(i.first,nullptr));
    }
    for (auto &amp;i : b.korisnici) {
        korisnici.insert(std::make_pair(i.first,nullptr));
    }
    try  {
        auto j(b.knjige.begin());
        auto k(b.korisnici.begin());
        for (auto i = knjige.begin(); i != knjige.end(); i++) {
            i-&gt;second = new Knjiga (*(j-&gt;second));
            j++;
        }
        for (auto i = korisnici.begin(); i != korisnici.end(); i++) {
            i-&gt;second = new Korisnik(*(k-&gt;second));
            k++;
        }
    } catch (...) {
        for (auto i : knjige) {
            delete i.second;
        }
         for (auto i : korisnici) {
            delete i.second;
        }
    }
}

int main ()
</font>{
    
    return 0;
}</pre>
</body>
</html>
