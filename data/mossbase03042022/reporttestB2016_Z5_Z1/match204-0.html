<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5904.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student5904.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match204-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;

struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};
class Knjiga{
    std::string naslov;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    Korisnik *pok;
    public:
    Knjiga(std::string naslov,std::string ime,std::string zanr,int godina): naslov(naslov),ime_pisca(ime),zanr(zanr),godina_izdavanja(godina){
        pok=nullptr;
    }
    std::string DajNaslov()const{
        return naslov;
    }
    std::string DajAutora()const{
        return ime_pisca;
    }
    std::string DajZanr()const{
        return zanr;
    }
    int DajGodinuIzdavanja()const{
        return godina_izdavanja;
    }
    Korisnik* DajKodKogaJe()const{
        return pok;
    }
    /////Daj kod koga je fali
    void ZaduziKnjigu(Korisnik &amp;korisnik){
        pok=&amp;korisnik;
    }
    void RazduziKnjigu(){
        pok=nullptr;
    }
    bool DaLiJeZaduzena()const{
        if( pok!=nullptr) return true;
        else return false;
    }
};
class Biblioteka{
  
    std::map&lt;int, Korisnik *&gt; korisnici;//prebaciti na glupe pok
    std::map&lt;int, Knjiga*&gt; knjige;
    public:
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;bib);
    Biblioteka &amp;operator=(const Biblioteka &amp;x)=delete;
    void RegistrirajNovogKorisnika(int cl_br,std::string ime,std::string prezime,std::string adresa,std::string broj_tel){
        for(auto &amp;x:korisnici)
            if(x.first==cl_br) throw std::logic_error("Korisnik vec postoji");
        try
        {
            Korisnik *kor=nullptr;
            kor=new Korisnik;
            kor-&gt;ime=ime;
            kor-&gt;prezime=prezime;
            kor-&gt;adresa=adresa;
            kor-&gt;telefon=broj_tel;
            korisnici.insert(std::make_pair(cl_br,kor));
        }
        catch(std::bad_alloc)
        {
            throw;
        }
    }
    void RegistrirajNovuKnjigu(int ev_br,std::string naziv, std::string ime_pisca,std::string zanr,int godina){
        for(auto &amp;x:knjige){
            if(x.first==ev_br) throw std::logic_error("Knjiga vec postoji");
    
        }
        try
        {
            Knjiga *k=nullptr;
            k=new Knjiga(naziv,ime_pisca,zanr,godina);
            knjige.insert(std::make_pair(ev_br,k));
        }
        catch(std::bad_alloc)
        {
            throw;
        }
    }
    Korisnik &amp;NadjiKorisnika(int br){
        for(auto &amp;x: korisnici)
            if(x.first==br) return *x.second;//promijeniti
        throw std::logic_error("Korisnik nije nadjen");
        
    }
   Knjiga &amp;NadjiKnjigu(int br){
        for(auto &amp;x: knjige)
             if(x.first==br) return *(x.second);
        throw std::logic_error("Knjiga nije nadjena");
    }
   void IzlistajKorisnike()const{
      for(auto&amp;x:korisnici)
      {
          std::cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;"\n";
          std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;"\n";
          std::cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;"\n";
          std::cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon&lt;&lt;"\n\n";
          
      }
   }
   void IzlistajKnjige() const{
       for(auto &amp;x:knjige)
       {
           std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;"\n";
           std::cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;"\n";
           std::cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;"\n";
           std::cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;"\n";
           std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;"\n";
           if(x.second-&gt;DaLiJeZaduzena())
           {
               std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;"\n";
           }
           std::cout&lt;&lt;"\n";
       }
   }
   void RazduziKnjigu(int broj){
       Knjiga *k=nullptr;
        for (auto &amp;x:knjige)
        {
            if(x.first==broj)
            {
                k=x.second;
            }
        }
        if(k==nullptr) throw std::logic_error("Knjiga nije nadjena");
        if(!k-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        k-&gt;RazduziKnjigu();
    }
    void ZaduziKnjigu(int knjiga,int korisnik)
    {
        Knjiga *k=nullptr;
        Korisnik *kor=nullptr;
        for(auto &amp;x:knjige)
        {
            if (knjiga==x.first)
            {
               k=x.second;
            }
        }
        if (k==nullptr) throw std::logic_error("Knjiga nije nadjena");
        for(auto &amp;x:korisnici)
        {
            if(korisnik==x.first)
            {
                kor=x.second;
            }
        }
        if(kor==nullptr) throw std::logic_error("Korisnik nije nadjen");
        if (k-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        k-&gt;ZaduziKnjigu(*kor);
    }
     ~Biblioteka()
     {
         for(auto &amp;x:korisnici)
         {
             delete x.second;
         }
         for(auto &amp;x:knjige)
         {
             delete x.second;
</font>         }
     }
};
int main ()
{
	return 0;
}</pre>
</body>
</html>
