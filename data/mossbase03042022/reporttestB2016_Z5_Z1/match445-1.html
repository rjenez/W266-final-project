<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student3841.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z1/student8444.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;utility&gt;

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga {
    std::string naslovKnjige;
    std::string autorKnjige;
    std::string zanrKnjige;
    int godinaIzdavanjaKnjige;
    Korisnik *zaduzioKorisnik=nullptr;
    
    public:
    Knjiga(std::string naslovKnjige, std::string autorKnjige, std::string zanrKnjige, int godinaIzdavanjaKnjige){
        this-&gt;naslovKnjige=naslovKnjige;
        this-&gt;autorKnjige=autorKnjige;
        this-&gt;zanrKnjige=zanrKnjige;
        this-&gt;godinaIzdavanjaKnjige=godinaIzdavanjaKnjige;
    }
    
    std::string DajNaslov(){return naslovKnjige;}
    std::string DajAutora(){return autorKnjige;}
    std::string DajZanr(){return zanrKnjige;}
    int DajGodinuIzdavanja(){return godinaIzdavanjaKnjige;}
    Korisnik *DajKodKogaJe(){return zaduzioKorisnik;}
    void ZaduziKnjigu(Korisnik &amp;korisnik){ zaduzioKorisnik=&amp;korisnik;}
    void RazduziKnjigu(){zaduzioKorisnik=nullptr;}
    bool DaLiJeZaduzena(){
        if(zaduzioKorisnik==nullptr) return false;
        return true;
    }
    
};

class Biblioteka {
    std::map&lt;int, Korisnik*&gt; sviKorisnici;
    std::map&lt;int, Knjiga*&gt; sveKnjige;
    
    public:
    ~Biblioteka(){
         for(auto knjiga: sveKnjige){
            delete knjiga.second;
            knjiga.second=nullptr;
        }
        sveKnjige.erase(sveKnjige.begin(), sveKnjige.end());
        
        for(auto korisnik: sviKorisnici){
            delete korisnik.second;
            korisnik.second=nullptr;
        }
        sviKorisnici.erase(sviKorisnici.begin(), sviKorisnici.end());
    }
    Biblioteka() {}
    Biblioteka(Biblioteka &amp;biblioteka){
        for(auto knjiga: biblioteka.sveKnjige){
            int id = knjiga.first;
<a name="5"></a><font color="#FF0000"><a href="match445-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            Knjiga *novaKnjiga=new Knjiga(knjiga.second-&gt;DajNaslov(), knjiga.second-&gt;DajAutora(), knjiga.second-&gt;DajZanr(), knjiga.second-&gt;DajGodinuIzdavanja());
</font>        
            if(knjiga.second-&gt;DaLiJeZaduzena()==true){
                Korisnik kodKorisnika=*(knjiga.second-&gt;DajKodKogaJe());
                novaKnjiga-&gt;ZaduziKnjigu(kodKorisnika);
            }
            sveKnjige.insert(std::make_pair(id,novaKnjiga));
        }
        
        for(auto korisnik: biblioteka.sviKorisnici){
            int id=korisnik.first;
<a name="1"></a><font color="#00FF00"><a href="match445-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            Korisnik *noviKorisnik=new Korisnik();
            noviKorisnik-&gt;ime=korisnik.second-&gt;ime;
            noviKorisnik-&gt;prezime=korisnik.second-&gt;prezime;
            noviKorisnik-&gt;adresa=korisnik.second-&gt;adresa;
            noviKorisnik-&gt;telefon=korisnik.second-&gt;telefon;
            
            sviKorisnici.insert(std::make_pair(id,noviKorisnik));
</font>        }
    }
    
    Biblioteka &amp;operator= (Biblioteka &amp;biblioteka){
        if(&amp;biblioteka==this) return *this;
        //desktruktor
        for(auto knjiga: sveKnjige){
            delete knjiga.second;
            knjiga.second=nullptr;
        }
        sveKnjige.erase(sveKnjige.begin(), sveKnjige.end());
        
        for(auto korisnik: sviKorisnici){
            delete korisnik.second;
            korisnik.second=nullptr;
        }
        sviKorisnici.erase(sviKorisnici.begin(), sviKorisnici.end());
        //kopirajuci konstruktor
        for(auto knjiga: biblioteka.sveKnjige){
            int id = knjiga.first;
<a name="6"></a><font color="#00FF00"><a href="match445-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            Knjiga *novaKnjiga=new Knjiga(knjiga.second-&gt;DajNaslov(), knjiga.second-&gt;DajAutora(), knjiga.second-&gt;DajZanr(), knjiga.second-&gt;DajGodinuIzdavanja());
</font>        
            if(((knjiga.second)-&gt;DaLiJeZaduzena())==true){
                Korisnik kodKorisnika=*(knjiga.second-&gt;DajKodKogaJe());
                novaKnjiga-&gt;ZaduziKnjigu(kodKorisnika);
            }
            sveKnjige.insert(std::make_pair(id,novaKnjiga));
        }
        
        for(auto korisnik: biblioteka.sviKorisnici){
            int id=korisnik.first;
<a name="2"></a><font color="#0000FF"><a href="match445-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            Korisnik *noviKorisnik=new Korisnik();
            noviKorisnik-&gt;ime=korisnik.second-&gt;ime;
            noviKorisnik-&gt;prezime=korisnik.second-&gt;prezime;
            noviKorisnik-&gt;adresa=korisnik.second-&gt;adresa;
            noviKorisnik-&gt;telefon=korisnik.second-&gt;telefon;
            
            sviKorisnici.insert(std::make_pair(id,noviKorisnik));
</font><a name="8"></a><font color="#00FFFF"><a href="match445-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        }
        return *this;
        
    }
    
    void RegistrirajNovogKorisnika(int clanskiBroj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
</font>        for(auto korisnik: sviKorisnici){
            if(korisnik.first == clanskiBroj) throw std::logic_error("Korisnik vec postoji");
        }
        
            Korisnik *noviKorisnik=new Korisnik();
            noviKorisnik-&gt;ime=ime;
            noviKorisnik-&gt;prezime=prezime;
            noviKorisnik-&gt;adresa=adresa;
            noviKorisnik-&gt;telefon=telefon;
            
            sviKorisnici[clanskiBroj]=noviKorisnik;
            noviKorisnik=nullptr;
    }
    
    void RegistrirajNovuKnjigu(int evidencijskiBrojKnjige, std::string naslovKnjige, std::string autorKnjige, std::string zanrKnjige, int godinaIzdavanjaKnjige){
        for(auto knjiga: sveKnjige){
            if(knjiga.first==evidencijskiBrojKnjige) throw std::logic_error("Knjiga vec postoji");
        }
        Knjiga *novaKnjiga=new Knjiga(naslovKnjige,autorKnjige,zanrKnjige,godinaIzdavanjaKnjige);
        sveKnjige.insert(std::make_pair(evidencijskiBrojKnjige,novaKnjiga));
        novaKnjiga=nullptr;
        
        
        
    }
    
    Korisnik &amp;NadjiKorisnika(int clanskiBroj){
        for(auto korisnik: sviKorisnici){
            if(korisnik.first==clanskiBroj) return *(sviKorisnici[clanskiBroj]);
        }
        throw std::logic_error("Korisnik nije nadjen");
    }
    
    Knjiga &amp;NadjiKnjigu(int evidencijskiBrojKnjige){
        for(auto knjiga: sveKnjige){
            if(knjiga.first==evidencijskiBrojKnjige) return *(sveKnjige[evidencijskiBrojKnjige]);
        }
        throw std::logic_error("Knjiga nije nadjena");
    }
    
    void IzlistajKorisnike(){
<a name="0"></a><font color="#FF0000"><a href="match445-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        for(auto korisnik: sviKorisnici){
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;korisnik.first&lt;&lt;std::endl;
            //IspisiKorisnika(*(korisnik.second));
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(korisnik.second)-&gt;ime&lt;&lt;" "&lt;&lt;(korisnik.second)-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(korisnik.second)-&gt;adresa&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(korisnik.second)-&gt;telefon&lt;&lt;std::endl;
           // std::cout&lt;&lt;std::endl;
        }
    }
    
    void IzlistajKnjige(){
<a name="3"></a><font color="#00FFFF"><a href="match445-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        for(auto knjiga: sveKnjige){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;knjiga.first&lt;&lt;std::endl;
            
            //IspisiKorisnika(*(korisnik.second));
            std::cout&lt;&lt;"Naslov: "&lt;&lt;(knjiga.second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(knjiga.second)-&gt;DajAutora()&lt;&lt;std::endl;
</font><a name="7"></a><font color="#0000FF"><a href="match445-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cout&lt;&lt;"Zanr: "&lt;&lt;(knjiga.second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(knjiga.second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            if((knjiga.second)-&gt;DaLiJeZaduzena()==true){
</font>                Korisnik kodKorisnika=*(knjiga.second)-&gt;DajKodKogaJe();
                for(auto korisnik: sviKorisnici){
                    if((korisnik.second)-&gt;ime==kodKorisnika.ime &amp;&amp; (korisnik.second)-&gt;prezime==kodKorisnika.prezime &amp;&amp; (korisnik.second)-&gt;adresa==kodKorisnika.adresa &amp;&amp; (korisnik.second)-&gt;telefon==kodKorisnika.telefon)
                        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;kodKorisnika.ime&lt;&lt;" "&lt;&lt;kodKorisnika.prezime&lt;&lt;std::endl;
                }
            }
            std::cout&lt;&lt;std::endl;
        }
    }
    
    void ZaduziKnjigu(int evidencijskiBrojKnjige, int clanskiBroj){
        bool daLiPostoji=false;
        for(auto knjiga:sveKnjige){
            if(knjiga.first==evidencijskiBrojKnjige){
                daLiPostoji=true;
                break;
            }
        }
            if(daLiPostoji==false) throw std::logic_error("Knjiga nije nadjena");
            daLiPostoji=false;
            for(auto korisnik:sviKorisnici){
                if(korisnik.first==clanskiBroj){
                    daLiPostoji=true;
                    break;
                }
            }
                if(daLiPostoji==false) throw std::domain_error("Korisnik nije nadjen");
                if(sveKnjige[evidencijskiBrojKnjige]-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga vec zaduzena");
                sveKnjige[evidencijskiBrojKnjige]-&gt;ZaduziKnjigu(*(sviKorisnici[clanskiBroj]));
            }
            
    void RazduziKnjigu(int evidencijskiBrojKnjige){
        bool daLiPostoji=false;
        for (auto knjiga:sveKnjige){
            if(knjiga.first==evidencijskiBrojKnjige){
                if(((knjiga.second)-&gt;DaLiJeZaduzena())==true) {
                    (knjiga.second)-&gt;RazduziKnjigu();
                    daLiPostoji=true;
                    break;
                }
                else throw std::logic_error("Knjiga nije zaduzena");
            }
        }
        if(daLiPostoji==false) throw std::logic_error("Knjiga nije nadjena");
    }
    
    void PrikaziZaduzenja(int clanskiBroj){
        bool daLiPostoji=false;
        for(auto korisnik:sviKorisnici){
            if(korisnik.first==clanskiBroj){
                daLiPostoji=true;
                break;
            }
        }
        if(daLiPostoji==false) throw std::logic_error("Korisnik nije nadjen");
        Korisnik k=*(sviKorisnici[clanskiBroj]);
        bool posjeduje=false;
        for(auto knjiga:sveKnjige){
               if((knjiga.second)-&gt;DaLiJeZaduzena()==true){
                Korisnik kodKorisnika=*(knjiga.second)-&gt;DajKodKogaJe();
               
<a name="4"></a><font color="#FF00FF"><a href="match445-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

                    if(k.ime==kodKorisnika.ime &amp;&amp; k.prezime==kodKorisnika.prezime &amp;&amp; k.adresa==kodKorisnika.adresa &amp;&amp; k.telefon==kodKorisnika.telefon){
                        posjeduje=true;
                        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;knjiga.first&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Naslov: "&lt;&lt;(knjiga.second)-&gt;DajNaslov()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Pisac: "&lt;&lt;(knjiga.second)-&gt;DajAutora()&lt;&lt;std::endl;
</font>                        std::cout&lt;&lt;"Zanr: "&lt;&lt;(knjiga.second)-&gt;DajZanr()&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(knjiga.second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            
                        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;k.ime&lt;&lt;" "&lt;&lt;k.prezime&lt;&lt;std::endl;
                }
            }
            std::cout&lt;&lt;std::endl;
        }
        if(posjeduje==false) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika"&lt;&lt;std::endl;
    }
    
    
};
 


int main ()
{
	return 0;
}</pre>
</body>
</html>
