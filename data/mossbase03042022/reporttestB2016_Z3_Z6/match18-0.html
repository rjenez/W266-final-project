<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z6/student1422.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z6/student1422.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match18-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 5

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
#include &lt;set&gt;

struct Dijete{
    std::string ime;
    std::shared_ptr&lt;Dijete&gt; sljedeci;
};

std::shared_ptr&lt;Dijete&gt; napravilistu(std::vector&lt;std::string&gt; v){
    std::shared_ptr&lt;Dijete&gt; temp;
    std::shared_ptr&lt;Dijete&gt; prvi;
    std::vector&lt;std::shared_ptr&lt;Dijete&gt;&gt; q;
    try{
    for(int i(0);i&lt;v.size();i++){
        std::shared_ptr&lt;Dijete&gt; p=std::make_shared&lt;Dijete&gt;();
        q.push_back(p);
        p-&gt;ime=v[i];
        if(!prvi) prvi=p;
        if(temp) temp-&gt;sljedeci=p;
        temp=p;
        p-&gt;sljedeci=temp;
        if(i==v.size()-1) p-&gt;sljedeci=prvi;
        
    }
    }
    catch(std::bad_alloc){
        for(int i(0);i&lt;q.size();i++){
            q[i]-&gt;sljedeci=nullptr;
            q[i]=nullptr;
        }
        throw;
    }
    return prvi;
    
}
/*
void unisti(Dijete *pok){
    std::shared_ptr&lt;Dijete&gt; pamti=pok;
    if(pok==nullptr) return;
    do{
        auto temp=pok;
        delete pok;
        pok=temp;
        pok=pok-&gt;sljedeci;
        
    }while(pok!=pamti);
}
*/
std::vector&lt;int&gt; brojclanovautimu(int n, int k){ // k broj timova, n broj ljudi
    std::vector&lt;int&gt; v;
    int o=n%k;
    for(int i(0);i&lt;o;i++){
        v.push_back(int(n/k)+1);
    }
    o=k-o;
    for(int i(0);i&lt;o;i++){
        v.push_back(int(n/k));
    }
    return v;
}

bool dalijeslovo(char c){
    if((c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z')) return true;
    return false;
}

bool dalijebroj(char c){
    return c&gt;='0' &amp;&amp; c&lt;='9';
}

int brojslovaimena(std::string s){
    int br(0);
    for(int i(0);i&lt;s.size();i++){
        if(!(dalijebroj(s[i])) &amp;&amp; !(dalijeslovo(s[i]))) br++;
    }
    return s.size()-br;
}

std::shared_ptr&lt;Dijete&gt; dajprethodnika(std::shared_ptr&lt;Dijete&gt; p){
    auto temp=p;
    while(temp-&gt;sljedeci.get()!=p.get()){
        temp=temp-&gt;sljedeci;
    }
    return temp;
}

std::vector&lt;std::set&lt;std::string&gt;&gt; Razvrstavanje (std::vector&lt;std::string&gt; vs, int k){ //k je broj timova
if(k&lt;1 || k&gt;vs.size()) throw std::logic_error("Razvrstavanje nemoguce");
    std::shared_ptr&lt;Dijete&gt; p;
    int brojclanova=vs.size();
    std::vector&lt;int&gt; v(brojclanovautimu(brojclanova,k)); // v[0] brojclanova 1. tima, v[1] drugog...
    std::vector&lt;std::set&lt;std::string&gt;&gt; w(k); //ovo vracam, push_back(w[j]);
    int j(0);
    p=napravilistu(vs);
    int s;
    auto it=p;
    int x(0);
    while(it){
        s=brojslovaimena(it-&gt;ime);
        w[j].insert(it-&gt;ime);
        auto temp=it-&gt;sljedeci;
        auto t(dajprethodnika(it));
        if(t-&gt;sljedeci==t) {
            it-&gt;sljedeci = nullptr;
            it = nullptr;
            
        }
        else {
            it=temp;
            t-&gt;sljedeci=temp;
        }
        if(!it) break;
        x++;
        if(x==v[j]){
            x=0;
            j++;
        }
        for(int i(0);i&lt;s-1;i++){
            it=it-&gt;sljedeci;
        }
        
    }
    
    
    return w;
    
}


int main ()
{
    std::cout &lt;&lt; "Unesite broj djece: ";
    int a;
    std::cin &gt;&gt; a;
    std::vector&lt;std::string&gt; v ;
    std::string s;
    std::cout &lt;&lt; "Unesite imena djece:" &lt;&lt; std::endl;
    std::cin.ignore(10000,'\n');
    for(int i(0);i&lt;a;i++){
        std::getline(std::cin,s);
        v.push_back(s);
    }
    
    std::cout &lt;&lt; "Unesite broj timova: ";
    int n;
    std::cin&gt;&gt; n;
    try{
    auto vs=Razvrstavanje(v,n);
    for(int i(0);i&lt;vs.size();i++){
        std::cout &lt;&lt; "Tim "&lt;&lt;i+1&lt;&lt;": ";
        bool prvi=true;
        for(auto j:vs[i]){
            if(prvi) prvi=false;
            else std::cout &lt;&lt; ", ";
            std::cout &lt;&lt; j ;
    }
    std::cout &lt;&lt;  std::endl;
    }
    }
    catch(std::logic_error izuzetak){
        std::cout &lt;&lt; "Izuzetak: "&lt;&lt; izuzetak.what();
    }
    catch(std::bad_alloc){
        return 0;
    }
	return 0;
</font>}</pre>
</body>
</html>
