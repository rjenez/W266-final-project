<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student3116.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student6960.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match87-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iterator&gt;
#include &lt;iomanip&gt;

class Berza
{
    int max_cijena, min_cijena;
    std::vector&lt;int&gt; cijene;
public:
    Berza (int min_cijena, int max_cijena);
    explicit Berza (int max_cijena);
    void RegistrirajCijenu (int cijena);
    int DajBrojRegistriranihCijena () const {
        return cijene.size();
    }
    void BrisiSve () {
        cijene.resize(0);
    }

    int DajMinimalnuCijenu () const;
    int DajMaksimalnuCijenu () const;

    friend bool operator !(const Berza &amp;b);

    int DajBrojCijenaVecihOd (int cijena) const;

    void Ispisi () const ;

    int operator [] (int indeks);

    friend Berza &amp;operator ++ (Berza &amp;b);                                       //prefiksni
    friend Berza operator ++ (Berza &amp;b, int);                                   //postfiksni
    friend Berza &amp;operator -- (Berza &amp;b);                                       //prefiksni
    friend Berza operator -- (Berza &amp;b, int);                                   //postfiksni

    friend Berza operator + (const Berza &amp;b, int y);
    friend  Berza operator +(int y, const Berza &amp;b);
    friend Berza operator - (const Berza &amp;b, int y);
    friend Berza operator - (const Berza &amp;b);
    friend Berza &amp;operator +=(Berza &amp;b, int y);
    friend Berza &amp;operator -=(Berza &amp;b, int y);
    friend bool operator == (const Berza &amp;b1, const Berza &amp;b2);
    friend bool operator != (const Berza &amp;b1, const Berza &amp;b2);
};

Berza operator - (const Berza &amp;b) {
    Berza pomocna(b);
    int zbir=b.max_cijena+b.min_cijena;
    std::transform(pomocna.cijene.begin(), pomocna.cijene.end(), pomocna.cijene.begin(),
        std::bind(zbir, std::minus&lt;int&gt;(),std::placeholders::_1, ));
    return pomocna;
}

Berza &amp;operator -=(Berza &amp;b, int y)
{
    b=b-y;
    return b;
}

Berza &amp;operator +=(Berza &amp;b, int y)
{
    b=b+y;
    return b;
}

Berza operator + (const Berza &amp;b, int y)
{
    Berza rezultat(b.DajMinimalnuCijenu(), b.DajMaksimalnuCijenu());
    rezultat.cijene.resize(b.DajBrojRegistriranihCijena());
    std::copy(b.cijene.begin(), b.cijene.end(), rezultat.cijene.begin());
    std::transform(rezultat.cijene.begin(), rezultat.cijene.end(), rezultat.cijene.begin(),
                   std::bind(std::plus&lt;int&gt;(), std::placeholders::_1,y));
    auto tmp1=std::find_if(rezultat.cijene.begin(), rezultat.cijene.end(),
                           std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, b.DajMaksimalnuCijenu()));
    if(tmp1!=rezultat.cijene.end())
        throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
    auto tmp2=std::find_if(rezultat.cijene.begin(), rezultat.cijene.end(), std::bind(std::less&lt;int&gt;(), std::placeholders::_1, b.min_cijena));
    if(tmp2!=rezultat.cijene.end())
        throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
    return rezultat;
}

Berza operator +(int y, const Berza &amp;b)
{
    auto rezultat=b+y;
    return rezultat;
}

Berza operator - (const Berza &amp;b, int y)
{
    Berza rezultat(b.DajMinimalnuCijenu(), b.DajMaksimalnuCijenu());
    rezultat.cijene.resize(b.DajBrojRegistriranihCijena());
    std::copy(b.cijene.begin(), b.cijene.end(), rezultat.cijene.begin());
    std::transform(rezultat.cijene.begin(), rezultat.cijene.end(), rezultat.cijene.begin(),
                   std::bind(std::minus&lt;int&gt;(), std::placeholders::_1,y));
    auto tmp1=std::find_if(rezultat.cijene.begin(), rezultat.cijene.end(), 
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, b.DajMaksimalnuCijenu()));
    if(tmp1!=rezultat.cijene.end())
        throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
    auto tmp2=std::find_if(rezultat.cijene.begin(), rezultat.cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, b.min_cijena));
    if(tmp2!=rezultat.cijene.end())
        throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
    return rezultat;
}

int Berza::operator [] (int indeks)
{
    if(indeks&lt;1 || indeks&gt;DajBrojRegistriranihCijena()-1)
        throw std::range_error("Neispravan indeks");
    auto it=cijene.begin();
    std::advance(it, indeks-1);
    int rezultat(*it);
    return rezultat;
}

bool operator == (const Berza &amp;b1, const Berza &amp;b2)
{
    if(b1.DajBrojRegistriranihCijena()!=b2.DajBrojRegistriranihCijena()
            || b1.DajMaksimalnuCijenu()!=b2.DajMaksimalnuCijenu() || 
                b1.DajMinimalnuCijenu()!=b2.DajMinimalnuCijenu()) return false;
    else if(!std::equal(b1.cijene.begin(), b1.cijene.end(), b2.cijene.begin())) return false;
    return true;
}

bool operator != (const Berza &amp;b1, const Berza &amp;b2)
{
    return !(b1==b2);
}

Berza &amp;operator ++ (Berza &amp;b)
{
    Berza pomocna(b);
    std::transform(pomocna.cijene.begin(), pomocna.cijene.end(), pomocna.cijene.begin(),
                   std::bind(std::plus&lt;int&gt; (), std::placeholders::_1, 100));
    if(pomocna.DajBrojCijenaVecihOd(b.max_cijena)!=0)
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    b.cijene=pomocna.cijene;
    return b;
}

Berza operator ++ (Berza &amp;b, int)
{
    Berza pomocna(b);
    ++b;
    return pomocna;
}

Berza &amp;operator -- (Berza &amp;b)
{
    Berza pomocna(b);
    std::transform(pomocna.cijene.begin(), pomocna.cijene.end(), pomocna.cijene.begin(),
                   std::bind(std::minus&lt;int&gt; (), std::placeholders::_1, 100));
     auto tmp2=std::find_if(pomocna.cijene.begin(), pomocna.cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, b.min_cijena));
    if(tmp2!=pomocna.cijene.end())
        throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
    b.cijene=pomocna.cijene;
    return b;
}

Berza operator -- (Berza &amp;b, int)
{
    Berza pomocna(b);
    --b;
    return pomocna;
}

void Berza::Ispisi () const
{
    Berza pomocna(*this);
    std::vector&lt;int&gt; novi_v;
    std::sort(pomocna.cijene.begin(), pomocna.cijene.end(), std::greater&lt;int&gt;()); //nije dobro
    /*std::for_each(pomocna.cijene.begin(), pomocna.cijene.end(), [] (int cijena) {
        cijena/=1000;
    });*/
    //std::transform(pomocna.cijene.begin(), pomocna.cijene.end(), novi_v, std::bind1st(std::divides&lt;double&gt;(), 1));
    std::for_each(pomocna.cijene.begin(), pomocna.cijene.end(), [] (int cijena) {
        std::cout&lt;&lt;std::fixed&lt;&lt;std::setprecision(2)&lt;&lt;double(cijena/100)&lt;&lt;std::endl;
    });
    //std::copy(pomocna.cijene.begin(), pomocna.cijene.end(), std::ostream_iterator&lt;int&gt; (std::cout) );

}

int Berza::DajBrojCijenaVecihOd (int cijena) const
{
    if(DajBrojRegistriranihCijena()==0)
        throw std::range_error("Nema registriranih cijena");
    int rezultat=std::count_if(cijene.begin(), cijene.end(), std::bind(std::greater&lt;int&gt; (), std::placeholders::_1, cijena));
    return rezultat;
}

bool operator !(const Berza &amp;b)
{
    return b.DajBrojRegistriranihCijena()==0;
}

int Berza::DajMinimalnuCijenu () const
{
    if(cijene.size()==0)
        throw std::range_error("Nema registriranih cijena");
    return *(std::min_element(cijene.begin(), cijene.end()));
}

int Berza::DajMaksimalnuCijenu () const
{
    if(cijene.size()==0)
        throw std::range_error("Nema registriranih cijena");
    return *(std::max_element(cijene.begin(), cijene.end()));
}

void Berza::RegistrirajCijenu (int cijena)
{
    if(cijena&gt;max_cijena || cijena&lt;min_cijena)
        throw std::range_error("Ilegalna cijena");
    cijene.push_back(cijena);
}

Berza::Berza (int min_cijena, int max_cijena)
{
    if(max_cijena&lt;0 || min_cijena&lt;0)
        throw::std::range_error("Ilegalne granicne cijene");
    Berza::max_cijena=max_cijena;
    Berza::min_cijena=min_cijena;
}

Berza::Berza (int max_cijena)
{
    if(max_cijena&lt;0)
        throw::std::range_error("Ilegalne granicne cijene");
    Berza::max_cijena=max_cijena;
    Berza::min_cijena=0;
}

int main ()
{
    Berza b1 = Berza(1000,4000);
    b1.RegistrirajCijenu(2500);
    b1.RegistrirajCijenu(2000);
    Berza b2(1000,4000);
    b2.RegistrirajCijenu(2500);
    b2.RegistrirajCijenu(2000);
    Berza nova(-b1);
    nova.Ispisi();
</font>    /*std::cout&lt;&lt;b1[1]&lt;&lt;std::endl;
    std::cout&lt;&lt;b1.DajBrojCijenaVecihOd(1100)&lt;&lt;std::endl;
    b1++;
    b1.Ispisi();
    b2--;
    b2.Ispisi();
    if(b1==b2) {
        std::cout&lt;&lt;b1.DajMinimalnuCijenu()&lt;&lt;" "&lt;&lt;b1.DajMaksimalnuCijenu();
    } else std::cout&lt;&lt;"Klase nisu iste!";
    b1.BrisiSve();
    b2.BrisiSve();*/
    return 0;
}
</pre>
</body>
</html>
