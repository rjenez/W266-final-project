<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student3171.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student3171.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match97-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iomanip&gt;

class Berza
{
  std::vector&lt;int&gt; cijene_dionica;
  int max_cijena,min_cijena;

  public:
  Berza(int, int);
  explicit Berza(int);
  void RegistrirajCijenu(int);
  int DajBrojRegistriranihCijena()const;
  void BrisiSve();
  int DajMinimalnuCijenu()const;
  int DajMaksimalnuCijenu()const;
  bool operator!();
  int DajBrojCijenaVecihOd(const int&amp;);
  void Ispisi()const;
  int operator[](int)const;
  friend Berza operator+(Berza, int);//
  friend Berza operator+(int,Berza);//
  friend Berza operator-(Berza,int);//
  friend Berza operator-(int,Berza);//
  friend Berza&amp; operator+=(Berza&amp;,int);//
  friend Berza&amp; operator-=(Berza&amp;,int);//
  friend bool operator ==(const Berza&amp;, const Berza&amp;);
  friend bool operator!=(const Berza&amp;,const Berza&amp;);
  friend Berza operator-(Berza,Berza);//
  friend Berza operator-(Berza);//
  friend Berza&amp; operator++(Berza&amp;);//
  friend Berza operator++(Berza);//
  friend Berza operator--(Berza);//
  friend Berza&amp; operator--(Berza&amp;);//
};

int main ()
{
  Berza a(0,10000);
  for(int i=100;i&lt;10000;i+=100)
  {
    a.RegistrirajCijenu(i); 
  }
  a.Ispisi();
  Berza b(a);
  if(a==b)b.Ispisi();
  Berza c(0,20000);
  try{
    c=a-b;
    c.Ispisi();
  }catch(std::range_error izuzetak)
  {
    std::cout&lt;&lt;izuzetak.what();
  }
  catch(...)
  {
    std::cout&lt;&lt;"puff";
  }
	return 0;
}

bool operator!=(const Berza &amp;a,const Berza &amp;b)
{
  return !(a==b);
}
bool operator==(const Berza &amp;a, const Berza &amp;b)
{
  return (a.cijene_dionica==b.cijene_dionica);
}
Berza&amp; operator +=(Berza &amp;a, int b)
{
  a=a+b;
  return a;
}
Berza&amp; operator-=(Berza&amp; a,int b)
{
  a=a-b;
  return a;
}


Berza operator-(Berza a,Berza b)
{
  Berza c(a);
  if(a.cijene_dionica.size()!=b.cijene_dionica.size() || a.max_cijena!=b.max_cijena || a.min_cijena!=b.min_cijena)throw std::domain_error("Nesaglasni operandi");
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),b.cijene_dionica.begin(),a.cijene_dionica.begin(),std::minus&lt;int&gt;());
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}

Berza operator-(Berza a,int b)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::minus&lt;int&gt;(),b,std::placeholders::_1));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}
Berza operator-(int b,Berza a)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::minus&lt;int&gt;(),std::placeholders::_1,-b));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}
Berza operator+(int b, Berza a)
{
  return a+b;
}
Berza operator+(Berza a,int b)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::plus&lt;int&gt;(),std::placeholders::_1,b));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}
Berza operator-(Berza a)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::minus&lt;int&gt;(),-a.max_cijena-a.min_cijena,std::placeholders::_1));
  return a;
}
Berza operator++(Berza a)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::plus&lt;int&gt;(),std::placeholders::_1,100));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}  
Berza operator --(Berza a)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::plus&lt;int&gt;(),std::placeholders::_1,-100));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}
Berza&amp; operator++(Berza &amp;a)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::plus&lt;int&gt;(),std::placeholders::_1,100));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}  
Berza&amp; operator --(Berza &amp;a)
{
  std::transform(a.cijene_dionica.begin(),a.cijene_dionica.end(),a.cijene_dionica.begin(),std::bind(std::plus&lt;int&gt;(),std::placeholders::_1,-100));
  if(a.DajBrojCijenaVecihOd(a.max_cijena) || a.DajBrojCijenaVecihOd(a.min_cijena)-a.DajBrojRegistriranihCijena()&gt;0 )throw std::domain_error("Prekoracen dozvoljeni opseg cijena");
  return a;
}

Berza::Berza(int poc, int kraj)
{
  if(poc&lt;0 || kraj&lt;0 || (poc&gt;kraj))throw std::range_error("Ilegalne granicne cijene");
  max_cijena=kraj;
  min_cijena=poc;
}
Berza::Berza(int kraj)
{
  if(kraj&lt;0)throw std::range_error("Ilegalne granicne cijene");
  min_cijena=0;max_cijena=kraj;
}
void Berza::RegistrirajCijenu(int a)
{
  if(a&lt;min_cijena || a&gt;max_cijena)throw std::range_error("Ilegalna cijena");
  cijene_dionica.push_back(a);
//  std::sort(cijene_dionica.begin(),cijene_dionica.end(),std::greater&lt;int&gt;());
}
int Berza::DajBrojRegistriranihCijena()const
{
  return cijene_dionica.size();
}
void Berza::BrisiSve()
{
 cijene_dionica.clear();
}
int Berza::DajMinimalnuCijenu()const
{
  return *min_element(cijene_dionica.begin(),cijene_dionica.end());
}
int Berza::DajMaksimalnuCijenu()const
{
  return *max_element(cijene_dionica.begin(),cijene_dionica.end());
}
bool Berza::operator!()
{
  return !static_cast&lt;bool&gt;(cijene_dionica.size());
}
int Berza::DajBrojCijenaVecihOd(const int&amp; a)
{
  if(cijene_dionica.size()==0)throw std::range_error("Nema registriranih cijena");
  return std::count_if(cijene_dionica.begin(),cijene_dionica.end(),std::bind(std::less&lt;int&gt;(),a,std::placeholders::_1));
  return 0;
}
void Berza::Ispisi()const
{
  std::vector&lt;int&gt; temp(cijene_dionica);
  std::sort(temp.begin(),temp.end(),std::greater&lt;int&gt;());
  std::function&lt;double(int)&gt; f = std::bind(std::divides&lt;double&gt;(),std::placeholders::_1,100.);
  std::cout.precision(2);
  for(int i=0;i&lt;DajBrojRegistriranihCijena();i++)
  {
    std::cout&lt;&lt;std::fixed&lt;&lt;f(temp[i])&lt;&lt;std::endl;
  }
}

int Berza::operator[](int a)const
{
  if(a&gt;=DajBrojRegistriranihCijena())throw std::range_error("Neispravan indeks");
  return cijene_dionica[a];
</font>}</pre>
</body>
</html>
