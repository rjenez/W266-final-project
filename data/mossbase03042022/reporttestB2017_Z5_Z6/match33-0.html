<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student9676.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student9676.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match33-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iomanip&gt;

using std::bind;
using std::transform;
using std::count_if;
using std::min_element;
using std::max_element;
using std::sort;
using std::equal;

class Berza {
    std::vector&lt;int&gt; cijene;
    int max_cijena;
    int min_cijena;
public:
    explicit Berza(int);
    Berza(int, int);
    void RegistrirajCijenu(int);
    int DajBrojRegistriranihCijena() const { return cijene.size(); }
    void BrisiSve() { cijene.resize(0); }
    int DajMinimalnuCijenu() const;
    int DajMaksimalnuCijenu() const;
    bool operator !() const { return cijene.size() == 0; }
    int DajBrojCijenaVecihOd(int) const;
    void Ispisi() const;
    int operator [](int) const;
    friend Berza&amp; operator ++(Berza&amp;);
    friend Berza operator ++(Berza&amp;, int);
    Berza&amp; operator --();
    Berza operator --(int);
    Berza operator -();
    friend Berza operator +(const Berza&amp;, const Berza&amp;);
    friend Berza operator +(const Berza&amp;, int);
    friend Berza operator +(int, const Berza&amp;);
    friend Berza operator -(const Berza&amp;, const Berza&amp;);
    friend Berza operator -(const Berza&amp;, int);
    friend Berza operator -(int, const Berza&amp;);
    friend Berza&amp; operator +=(Berza&amp;, int);
    friend Berza&amp; operator +=(Berza&amp;, const Berza&amp;);
    friend Berza&amp; operator -=(Berza&amp;, int);
    friend Berza&amp; operator -=(Berza&amp;, const Berza&amp;);
    friend bool operator ==(const Berza&amp;, const Berza&amp;);
    friend bool operator !=(const Berza&amp; b1, const Berza&amp; b2) { return !(b1 == b2); }
};

Berza::Berza(int max_cijena) {
    this -&gt; min_cijena = 0;
    if(max_cijena &lt; 1)
        throw std::range_error("Ilegalne granicne cijene");
    this -&gt; max_cijena = max_cijena;
}

Berza::Berza(int min_cijena, int max_cijena) {
    if(min_cijena &lt; 1 || max_cijena &lt; 1)
        throw std::range_error("Ilegalne granicne cijene");
    this -&gt; max_cijena = max_cijena;
    this -&gt; min_cijena = min_cijena;
}

void Berza::RegistrirajCijenu(int nova_cijena) {
    if(nova_cijena &lt; min_cijena || nova_cijena &gt; max_cijena)
        throw std::range_error("Ilegalna cijena");
    cijene.push_back(nova_cijena);
}

int Berza::DajMinimalnuCijenu() const {
    if(cijene.size() == 0)
        throw std::range_error("Nema registriranih cijena");
    return *(min_element(
        cijene.begin(), cijene.end(), std::less&lt;int&gt;()
        ));
}

int Berza::DajMaksimalnuCijenu() const {
    if(cijene.size() == 0)
        throw std::range_error("Nema registriranih cijena");
    return *(min_element(
        cijene.begin(), cijene.end(), std::greater&lt;int&gt;()
        ));
}

int Berza::DajBrojCijenaVecihOd(int cijena) const {
    if(cijene.size() == 0)
        throw std::range_error("Nema registriranih cijena");
    return count_if(
        cijene.begin(), cijene.end(),
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, cijena)
        );
}

void Berza::Ispisi() const {
    std::vector&lt;int&gt; ispis(cijene);
    sort(
        ispis.begin(), ispis.end(), std::greater&lt;int&gt;()
        );
    for(int x : ispis)
        std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; x / 100. &lt;&lt; "\n";
}

int Berza::operator [](int i) const {
    if(i &lt; 1 || i &gt; cijene.size())
        throw std::range_error("Neispravan indeks");
    return cijene[i - 1];
}

Berza&amp; operator ++(Berza&amp; berza) {
    transform(
        berza.cijene.begin(), berza.cijene.end(),
        berza.cijene.begin(), std::bind(std::plus&lt;int&gt;(), std::placeholders::_1, 100)
        );
    if(count_if(
        berza.cijene.begin(), berza.cijene.end(),
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, berza.max_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return berza;    
}

Berza operator ++(Berza&amp; berza, int) {
    Berza nova_berza(berza);
    transform(
        berza.cijene.begin(), berza.cijene.end(),
        berza.cijene.begin(), std::bind(std::plus&lt;int&gt;(), 100, std::placeholders::_1)
        );
    if(count_if(
        berza.cijene.begin(), berza.cijene.end(),
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, berza.max_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return nova_berza;  
}

Berza&amp; Berza::operator --() {
    transform(
        cijene.begin(), cijene.end(),
        cijene.begin(), std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, 100)
        );
    if(count_if(
        cijene.begin(), cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, min_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
        return *this;
}

Berza Berza::operator --(int) {
    Berza nova_berza(*this);
    transform(
        cijene.begin(), cijene.end(),
        cijene.begin(), std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, 100)
        );
    if(count_if(
        cijene.begin(), cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, min_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return nova_berza;
}

Berza Berza::operator -() {
    transform(
        cijene.begin(), cijene.end(),
        cijene.begin(), std::bind(std::minus&lt;int&gt;(), max_cijena + min_cijena, std::placeholders::_1)
        );
    return *this;
}

Berza operator +(const Berza&amp; berza1, const Berza&amp; berza2) {
    if(berza1.DajBrojRegistriranihCijena() != berza2.DajBrojRegistriranihCijena() || 
        berza1.max_cijena != berza2.max_cijena ||
        berza1.min_cijena != berza2.min_cijena)
            throw std::domain_error("Nesaglasni operandi");
    Berza nova_berza(berza1);
    nova_berza += berza2;
    return nova_berza;
}

Berza operator +(const Berza&amp; berza, int iznos) {
    Berza nova_berza(berza);
    nova_berza += iznos;
    return nova_berza;
}

Berza operator +(int iznos, const Berza&amp; berza) {
    Berza nova_berza(berza);
    nova_berza += iznos;
    return nova_berza;
}

Berza operator -(const Berza&amp; berza1, const Berza&amp; berza2) {
    if(berza1.DajBrojRegistriranihCijena() != berza2.DajBrojRegistriranihCijena() || 
        berza1.max_cijena != berza2.max_cijena ||
        berza1.min_cijena != berza2.min_cijena)
            throw std::domain_error("Nesaglasni operandi");
    Berza nova_berza(berza1);
    nova_berza -= berza2;
    return nova_berza;
}

Berza operator -(const Berza&amp; berza, int iznos) {
    Berza nova_berza(berza);
    nova_berza -= iznos;
    return nova_berza;
}

Berza operator -(int iznos, const Berza&amp; berza) {
    Berza nova_berza(berza);
    transform(
        berza.cijene.begin(), berza.cijene.end(),
        nova_berza.cijene.begin(), std::bind(std::minus&lt;int&gt;(), iznos, std::placeholders::_1)
        );
    if(count_if(
        nova_berza.cijene.begin(), nova_berza.cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, nova_berza.min_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    if(count_if(
        nova_berza.cijene.begin(), nova_berza.cijene.end(), 
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, nova_berza.max_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return nova_berza;
}

Berza&amp; operator +=(Berza&amp; berza, int iznos) {
    transform(
        berza.cijene.begin(), berza.cijene.end(),
        berza.cijene.begin(), std::bind(std::plus&lt;int&gt;(), std::placeholders::_1, iznos)
    );
    if(count_if(
        berza.cijene.begin(), berza.cijene.end(), 
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, berza.max_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return berza;
}

Berza&amp; operator +=(Berza&amp; berza1, const Berza&amp; berza2) {
    transform(
        berza1.cijene.begin(), berza1.cijene.end(),
        berza2.cijene.begin(), berza1.cijene.begin(), std::plus&lt;int&gt;()
    );
    if(count_if(
        berza1.cijene.begin(), berza1.cijene.end(), 
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, berza1.max_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return berza1;
}

Berza&amp; operator -=(Berza&amp; berza, int iznos) {
    transform(
        berza.cijene.begin(), berza.cijene.end(),
        berza.cijene.begin(), std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, iznos)
    );
    if(count_if(
        berza.cijene.begin(), berza.cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, berza.min_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return berza;
}

Berza&amp; operator -=(Berza&amp; berza1, const Berza&amp; berza2) {
    transform(
        berza1.cijene.begin(), berza1.cijene.end(),
        berza2.cijene.begin(), berza1.cijene.begin(), std::minus&lt;int&gt;()
    );
    if(count_if(
        berza1.cijene.begin(), berza1.cijene.end(), 
        std::bind(std::less&lt;int&gt;(), std::placeholders::_1, berza1.min_cijena)
        ) &gt; 0)
            throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return berza1;
}

bool operator ==(const Berza&amp; berza1, const Berza&amp; berza2) {
    return (berza1.cijene.size() == berza2.cijene.size() &amp;&amp;
                equal(
                    berza1.cijene.begin(), berza1.cijene.end(),
                    berza2.cijene.begin(), std::equal_to&lt;int&gt;()
                )
            );
}

int main ()
{
    try {
        Berza b(12000);
        b.RegistrirajCijenu(2000);
        b.RegistrirajCijenu(5000);
        b.RegistrirajCijenu(800);
        b.RegistrirajCijenu(1999);
        b.RegistrirajCijenu(270);
        b.RegistrirajCijenu(870);
        b.RegistrirajCijenu(1630);
        b.RegistrirajCijenu(3110);
        b.RegistrirajCijenu(9160);
        b.RegistrirajCijenu(1000);
        b.RegistrirajCijenu(1050);
        (--b)--;
        b.Ispisi();
        Berza b2(100, 22720);
        b2.RegistrirajCijenu(740);
        b2.RegistrirajCijenu(930);
        b2.RegistrirajCijenu(5430);
        b2.RegistrirajCijenu(1111); 
        Berza b3(80000);
        b3 = b2 += 600;
        b3++;
        b3--;
        b2 -= 150;
        b2 += 150;
        b3.Ispisi();
        b2.Ispisi();
        if(b2 == b3)
            std::cout &lt;&lt; "OK\n";
        std::cout &lt;&lt; b2.DajBrojRegistriranihCijena() &lt;&lt; " " &lt;&lt; b3.DajBrojRegistriranihCijena() &lt;&lt; " ";
        std::cout &lt;&lt; b2.DajMaksimalnuCijenu() &lt;&lt; " " &lt;&lt; b3.DajMaksimalnuCijenu() &lt;&lt; " ";
        std::cout &lt;&lt; b2.DajMinimalnuCijenu() &lt;&lt; " " &lt;&lt; b3.DajMinimalnuCijenu() &lt;&lt; std::endl;
        (b3 - b2).Ispisi();
    }
    catch(std::domain_error err) {
        std::cout &lt;&lt; err.what();
    }
    catch(std::range_error err) {
        std::cout &lt;&lt; err.what();
</font>    }
	return 0;
}
</pre>
</body>
</html>
