<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student2675.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student2675.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match74-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iterator&gt;
#include &lt;iomanip&gt;

class Berza
{
    std::vector&lt;int&gt; tekuce_cijene;
    int min_cijena, max_cijena;
public:
    Berza(int min_cijena, int max_cijena) {
        if (min_cijena &lt; 0 || max_cijena &lt; 0)
            throw std::range_error ("Ilegalne granicne cijene");
        Berza::min_cijena = min_cijena;
        Berza::max_cijena = max_cijena;
    }
    explicit Berza(int max_cijena){
        if(max_cijena &lt; 0) 
            throw std::range_error ("Ilegalne granicne cijene");
        Berza::max_cijena = max_cijena;
        min_cijena = 0;
    }
    void RegistrirajCijenu(int cijena);
    int DajBrojRegistriranihCijena() const {
        return tekuce_cijene.size();
    }
    void BrisiSve(){
        tekuce_cijene.resize(0);
    }
    int DajMinimalnuCijenu() const;
    int DajMaksimalnuCijenu() const;
    bool operator !();
    int DajBrojCijenaVecihOd(int x) const;
    void Ispisi() const;
    int operator [](int i){
        if(i&lt;1 || i&gt; tekuce_cijene.size())
            throw std::range_error ("Neispravan indeks");
        return tekuce_cijene[i-1];
    }
    Berza&amp; operator ++ ();
    Berza operator ++ (int);
    Berza&amp; operator -- ();
    Berza operator -- (int);
    Berza operator + (int y);
    Berza operator - (int y);
    friend Berza operator + (const Berza &amp;b1, const Berza &amp;b2);
    friend Berza operator - (const Berza &amp;b1, const Berza &amp;b2);
    Berza&amp; operator += (int y);
    Berza&amp; operator -= (int y);
    Berza&amp; operator += (const Berza &amp;b);
    Berza&amp; operator -= (const Berza &amp;b);
    friend bool operator == (const Berza &amp;b1, const Berza &amp;b2);
    friend bool operator != (const Berza &amp;b1, const Berza &amp;b2);

};


int main ()
{
    Berza b1(150,10000), b2(1500);
    b1.RegistrirajCijenu(257);
    b1.RegistrirajCijenu(265);
    b2.RegistrirajCijenu(220);
    b2.RegistrirajCijenu(275);
    std::cout &lt;&lt; b1.DajBrojRegistriranihCijena() &lt;&lt; std::endl;
    std::cout &lt;&lt; b1.DajMaksimalnuCijenu() &lt;&lt; std::endl;
    std::cout &lt;&lt; b1.DajMinimalnuCijenu() &lt;&lt; std::endl;
    std::cout &lt;&lt; b2.DajBrojCijenaVecihOd(50) &lt;&lt; std::endl;
    std::cout &lt;&lt; !b2 &lt;&lt; std::endl;
    b1++;
    b1--;
    b1.Ispisi();
    --b2;
    b2.Ispisi();
    //(b1+b2).Ispisi(); Nesaglasni operandi 
    //b1+=b2;
    b1.Ispisi();
    b1.BrisiSve();
    b2.BrisiSve();
    b1.Ispisi(); 
    b2.Ispisi();
    return 0;
}

//Implementacija
void Berza::RegistrirajCijenu(int cijena){
    if(cijena &lt; min_cijena || cijena &gt; max_cijena) 
        throw std::range_error ("Ilegalna cijena");
    tekuce_cijene.push_back(cijena);
}
int Berza::DajMinimalnuCijenu() const{
    if(tekuce_cijene.size() == 0) 
        throw std::range_error ("Nema registriranih cijena");
    auto min(std::min_element(tekuce_cijene.begin(), tekuce_cijene.end(), 
        [](int a, int b){
            return a &lt; b;
        }));
    return *min;
}
int Berza::DajMaksimalnuCijenu() const{
    if(tekuce_cijene.size() == 0) 
        throw std::range_error ("Nema registriranih cijena");
    auto maks(std::max_element(tekuce_cijene.begin(), tekuce_cijene.end(), 
        [](int a, int b){
            return a &lt; b;
        }));
    return *maks;
}

bool Berza::operator !(){
    return tekuce_cijene.size() == 0;
}

int Berza::DajBrojCijenaVecihOd(int x) const{
    if(tekuce_cijene.size() == 0) 
        throw std::range_error ("Nema registriranih cijena");
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, x)));
    return br;
}

void Berza::Ispisi() const{
    std::vector&lt;int&gt; tmp(tekuce_cijene);
    std::sort(tmp.begin(), tmp.end(), std::greater&lt;int&gt;());
    std::cout.precision(2);
    std::transform(tmp.begin(), tmp.end(), tmp.begin(), std::bind(std::divides&lt;double&gt;(), std::placeholders::_1, double(100)));
    std::copy(tmp.begin(), tmp.end(), std::ostream_iterator&lt;double&gt;(std::cout&lt;&lt;std::fixed&lt;&lt;std::setprecision(2) , "\n"));
}

Berza&amp; Berza::operator ++(){
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::greater_equal&lt;int&gt;(), std::placeholders::_1, max_cijena-100)));
    if(br != 0)
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::transform(tekuce_cijene.begin(), tekuce_cijene.end(), tekuce_cijene.begin(),
    std::bind(std::plus&lt;int&gt;(), std::placeholders::_1, 100));
    return *this;
}

Berza Berza::operator ++(int){
    Berza pomocna(*this);
    ++(*this);
    return pomocna;
}

Berza&amp; Berza::operator --(){
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::less_equal&lt;int&gt;(), std::placeholders::_1, min_cijena+100)));
    if(br != 0)
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::transform(tekuce_cijene.begin(), tekuce_cijene.end(), tekuce_cijene.begin(),
    std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, 100));
    return *this;
}

Berza Berza::operator --(int){
   Berza pomocna(*this);
    --(*this);
    return pomocna;
}

Berza Berza::operator + (int y){
    Berza b(*this);
    b+=y;
    return b;
}
Berza Berza::operator - (int y){
    Berza b(*this);
    b-=y;
    return b;
}
Berza operator + (const Berza &amp;b1, const Berza &amp;b2){
    if(b1.tekuce_cijene.size() != b2.tekuce_cijene.size() || 
        b1.max_cijena != b2.max_cijena || b1.min_cijena != b2.min_cijena)
            throw std::domain_error ("Nesaglasni operandi");
    Berza b(b1);
    b+=b2;
    return b;
}
Berza operator - (const Berza &amp;b1, const Berza &amp;b2){
    if(b1.tekuce_cijene.size() != b2.tekuce_cijene.size() || 
        b1.max_cijena != b2.max_cijena || b1.min_cijena != b2.min_cijena)
            throw std::domain_error ("Nesaglasni operandi");
    Berza b(b1);
    b-=b2;
    return b;
}

Berza&amp; Berza::operator += (int y){
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::less_equal&lt;int&gt;(), std::placeholders::_1, min_cijena+y)));
    if(br != 0)
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::transform(tekuce_cijene.begin(), tekuce_cijene.end(), tekuce_cijene.begin(),
    std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, y));
    return *this;
}
Berza&amp; Berza::operator -= (int y){
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::less_equal&lt;int&gt;(), std::placeholders::_1, min_cijena+y)));
    if(br != 0)
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::transform(tekuce_cijene.begin(), tekuce_cijene.end(), tekuce_cijene.begin(),
    std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, y));
    return *this;
}
Berza&amp; Berza::operator += (const Berza &amp;b){
    Berza tmp(*this);
    if(tekuce_cijene.size() != b.tekuce_cijene.size() || 
        max_cijena != b.max_cijena || min_cijena != b.min_cijena)
            throw std::domain_error ("Nesaglasni operandi");
    std::transform(tekuce_cijene.begin(), tekuce_cijene.end(), b.tekuce_cijene.begin(), 
    tekuce_cijene.begin(), std::plus&lt;int&gt;());
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::greater_equal&lt;int&gt;(), std::placeholders::_1, max_cijena)));
    if(br != 0){
        *this = tmp;
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    }
    return *this;
}
Berza&amp; Berza::operator -= (const Berza &amp;b){
    Berza tmp(*this);
    if(tekuce_cijene.size() != b.tekuce_cijene.size() || 
        max_cijena != b.max_cijena || min_cijena != b.min_cijena)
            throw std::domain_error ("Nesaglasni operandi");
    std::transform(tekuce_cijene.begin(), tekuce_cijene.end(), b.tekuce_cijene.begin(), 
    tekuce_cijene.begin(), std::minus&lt;int&gt;());
    int br(std::count_if(tekuce_cijene.begin(), tekuce_cijene.end(), 
        std::bind(std::less_equal&lt;int&gt;(), std::placeholders::_1, min_cijena)));
    if(br != 0){
        *this = tmp;
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    }
    return *this;
}

bool operator == (const Berza &amp;b1, const Berza &amp;b2){
    return b1.tekuce_cijene.size() == b2.tekuce_cijene.size() &amp;&amp;
    std::equal(b1.tekuce_cijene.begin(), b1.tekuce_cijene.end(), b2.tekuce_cijene.begin());
}

bool operator != (const Berza &amp;b1, const Berza &amp;b2){
    return !(b1 == b2);
</font>}


</pre>
</body>
</html>
