<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student5939.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z6/student7196.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match63-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iomanip&gt;

class Berza {
    std::vector&lt;int&gt; cijene;
    int min_cijena, max_cijena;
    bool IspravanIndeks(int indeks) const {
        return indeks&gt;=1 &amp;&amp; indeks&lt;=cijene.size();
    }
public:
    Berza(int min_cijena, int max_cijena) : 
    min_cijena(min_cijena), max_cijena(max_cijena) {
        if (min_cijena&lt;=0 || max_cijena&lt;=0)
            throw std::range_error("Ilegalne granicne cijene");
    }
    explicit Berza(int max_cijena) : 
    min_cijena(0), max_cijena(max_cijena) {
        if (max_cijena&lt;=0)
            throw std::range_error("Ilegalne granicne cijene");
    }
    void RegistrirajCijenu(int cijena);
    int DajBrojRegistriranihCijena() const {
        return cijene.size();
    }
    void BrisiSve() {
        cijene.resize(0);
    }
    int DajMinimalnuCijenu() const;
    int DajMaksimalnuCijenu() const;
    bool operator !() const;
    int DajBrojCijenaVecihOd(int cijena) const;
    void Ispisi() const;
    int operator [](int indeks) const;
    Berza operator -() const;
    Berza &amp;operator ++();
    Berza operator ++(int);
    Berza &amp;operator --();
    Berza operator --(int);
    Berza &amp;operator +=(int broj);
    Berza &amp;operator -=(int broj);
    Berza &amp;operator -=(const Berza &amp;b);
    friend Berza operator +(const Berza &amp;b, int broj);
    friend Berza operator -(const Berza &amp;b, int broj);
    friend Berza operator +(int broj, const Berza &amp;b);
    friend Berza operator -(int broj, const Berza &amp;b);
    friend Berza operator -(const Berza &amp;b1, const Berza &amp;b2);
    friend bool operator ==(const Berza &amp;b1, const Berza &amp;b2);
    friend bool operator !=(const Berza &amp;b1, const Berza &amp;b2);
};

Berza &amp;Berza::operator +=(int broj) {
    std::vector&lt;int&gt; vektor_cijena;
    vektor_cijena.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), vektor_cijena.begin());
    std::transform(vektor_cijena.begin(), vektor_cijena.end(), vektor_cijena.begin(), 
     std::bind(std::plus&lt;int&gt;(), std::placeholders::_1, broj));
    auto iter=std::find_if(vektor_cijena.begin(), vektor_cijena.end(), 
     std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, max_cijena));
    if (iter!=vektor_cijena.end()) throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::copy(vektor_cijena.begin(), vektor_cijena.end(), cijene.begin());
    return *this;
}

Berza &amp;Berza::operator -=(int broj) {
    std::vector&lt;int&gt; vektor_cijena;
    vektor_cijena.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), vektor_cijena.begin());
    std::transform(vektor_cijena.begin(), vektor_cijena.end(), vektor_cijena.begin(), 
     std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, broj));
    auto iter=std::find_if(vektor_cijena.begin(), vektor_cijena.end(), 
     std::bind(std::less&lt;int&gt;(), std::placeholders::_1, min_cijena));
    if (iter!=vektor_cijena.end()) throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::copy(vektor_cijena.begin(), vektor_cijena.end(), cijene.begin());
    return *this;
}

Berza &amp;Berza::operator -=(const Berza &amp;b) {
    if (DajBrojRegistriranihCijena()!=b.DajBrojRegistriranihCijena())
        throw std::domain_error("Nesaglasni operandi");
    if (min_cijena!=b.min_cijena || max_cijena!=b.max_cijena)
        throw std::domain_error("Nesaglasni operandi");
    std::vector&lt;int&gt; vektor_cijena;
    vektor_cijena.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), vektor_cijena.begin());
    std::transform(vektor_cijena.begin(), vektor_cijena.end(), b.cijene.begin(), 
     vektor_cijena.begin(), std::minus&lt;int&gt;());
    auto iter=std::find_if(vektor_cijena.begin(), vektor_cijena.end(), 
     std::bind(std::less&lt;int&gt;(), std::placeholders::_1, min_cijena));
    if (iter!=vektor_cijena.end()) throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::copy(vektor_cijena.begin(), vektor_cijena.end(), cijene.begin());
    return *this;
}

Berza operator +(const Berza &amp;b, int broj) {
    Berza berza(b);
    berza+=broj;
    return berza;
}

Berza operator -(const Berza &amp;b, int broj) {
    Berza berza(b);
    berza-=broj;
    return berza;
}

Berza operator +(int broj, const Berza &amp;b) {
    return b+broj;
}

Berza operator -(int broj, const Berza &amp;b) {
    Berza berza(b);
    std::transform(berza.cijene.begin(), berza.cijene.end(), berza.cijene.begin(), 
     std::bind(std::minus&lt;int&gt;(), broj, std::placeholders::_1));
    auto iter=std::find_if(berza.cijene.begin(), berza.cijene.end(), 
     std::bind(std::less&lt;int&gt;(), std::placeholders::_1, b.min_cijena));
    if (iter!=berza.cijene.end())
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    return berza;
}

Berza operator -(const Berza &amp;b1, const Berza &amp;b2) {
    Berza berza(b1);
    berza-=b2;
    return berza;
}

bool operator !=(const Berza &amp;b1, const Berza &amp;b2) {
    return !(b1==b2);
}

Berza &amp;Berza::operator ++() {
    std::vector&lt;int&gt; vektor_cijena;
    vektor_cijena.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), vektor_cijena.begin());
    std::transform(vektor_cijena.begin(), vektor_cijena.end(), vektor_cijena.begin(), 
     std::bind(std::plus&lt;int&gt;(), std::placeholders::_1, 100));
    auto iter=std::find_if(vektor_cijena.begin(), vektor_cijena.end(), 
     std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, max_cijena));
    if (iter!=vektor_cijena.end())
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::copy(vektor_cijena.begin(), vektor_cijena.end(), cijene.begin());
    return *this;
}

Berza Berza::operator ++(int) {
    Berza pomocna(*this);
    ++(*this);
    return pomocna;
}

Berza &amp;Berza::operator --() {
    std::vector&lt;int&gt; vektor_cijena;
    vektor_cijena.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), vektor_cijena.begin());
    std::transform(vektor_cijena.begin(), vektor_cijena.end(), vektor_cijena.begin(), 
     std::bind(std::minus&lt;int&gt;(), std::placeholders::_1, 100));
    auto iter=std::find_if(vektor_cijena.begin(), vektor_cijena.end(), 
     std::bind(std::less&lt;int&gt;(), std::placeholders::_1, min_cijena));
    if (iter!=vektor_cijena.end())
        throw std::range_error("Prekoracen dozvoljeni opseg cijena");
    std::copy(vektor_cijena.begin(), vektor_cijena.end(), cijene.begin());
    return *this;
}

Berza Berza::operator --(int) {
    Berza pomocna(*this);
    --(*this);
    return pomocna;
}

Berza Berza::operator -() const {
    Berza b(min_cijena, max_cijena);
    b.cijene.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), b.cijene.begin());
    int suma_cijena(min_cijena+max_cijena);
    std::transform(b.cijene.begin(), b.cijene.end(), b.cijene.begin(), 
     std::bind(std::minus&lt;int&gt;(), suma_cijena, std::placeholders::_1));
    return b;
}

bool operator ==(const Berza &amp;b1, const Berza &amp;b2) {
    return b1.cijene.size()==b2.cijene.size() 
     &amp;&amp; std::equal(b1.cijene.begin(), b1.cijene.end(), b2.cijene.begin(), std::equal_to&lt;int&gt;());
}

int Berza::operator [](int i) const {
    if (!IspravanIndeks(i)) throw std::range_error("Neispravan indeks");
    return cijene[i-1];
}

void Berza::Ispisi() const {
    std::vector&lt;int&gt; vektor_cijena;
    vektor_cijena.resize(cijene.size());
    std::copy(cijene.begin(), cijene.end(), vektor_cijena.begin());
    std::sort(vektor_cijena.begin(), vektor_cijena.end(), std::greater&lt;int&gt;());
    for (auto iter=vektor_cijena.begin(); iter!=vektor_cijena.end(); iter++) {
        std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(2) &lt;&lt; (*iter)/100.;
        std::cout &lt;&lt; std::endl;
    }
}

int Berza::DajBrojCijenaVecihOd(int cijena) const {
    if (cijene.size()==0) throw std::range_error("Nema registriranih cijena");
    return std::count_if(cijene.begin(), cijene.end(), 
     std::bind(std::greater&lt;int&gt;(), std::placeholders::_1, cijena));
}

bool Berza::operator !() const {
    if (DajBrojRegistriranihCijena()==0) return true;
    return false;
}

void Berza::RegistrirajCijenu(int cijena) {
    if (cijena&lt;min_cijena || cijena&gt;max_cijena)
        throw std::range_error("Ilegalna cijena");
    cijene.push_back(cijena);
}

int Berza::DajMinimalnuCijenu() const {
    if (cijene.size()==0)
        throw std::range_error("Nema registriranih cijena");
    return *std::min_element(cijene.begin(), cijene.end(), std::less&lt;int&gt;());
}

int Berza::DajMaksimalnuCijenu() const {
    if (cijene.size()==0)
        throw std::range_error("Nema registriranih cijena");
    return *std::max_element(cijene.begin(), cijene.end(), std::less&lt;int&gt;());
}


int main ()
</font>{
	return 0;
}
</pre>
</body>
</html>
