<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z5/student8993.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z5/student3402.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match93-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 5
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

struct Dijete{
    std::string ime;
    Dijete *sljedeci;
};

int duzina_imena(std::string s){
    int br(0);
    for(int i=0; i&lt;s.length(); i++)
        if((s[i]&gt;47 &amp;&amp; s[i]&lt;58) || ( s[i]&gt;64 &amp;&amp; s[i]&lt;91) || (s[i]&gt;96 &amp;&amp; s[i]&lt;123)) br++;
    return br;
}

std::vector&lt;std::set&lt;std::string&gt;&gt; Razvrstavanje (const std::vector&lt;std::string&gt; &amp;v, int k){
    int n(v.size());
    if(k&gt;n || k&lt;1) throw std::logic_error("Izuzetak: Razvrstavanje nemoguce");
    
    Dijete *pocetak(nullptr), *prethodni(nullptr);
    std::vector&lt;std::set&lt;std::string&gt;&gt; timovi(k);
    try {
        for(int i=0; i&lt;n; i++){
            Dijete *novo(new Dijete);
            novo-&gt;ime = v[i];
            novo-&gt;sljedeci=nullptr;
            if(!pocetak) pocetak=novo;
            else prethodni-&gt;sljedeci=novo;
            prethodni=novo;
        }
        if (prethodni) prethodni-&gt;sljedeci=pocetak;
        Dijete *p=pocetak;
        
        for(int i=0; i&lt;k; i++){
            int tim_i(0);
            if(i&lt;n%k) tim_i=n/k + 1;
            else tim_i=n/k;
            for(int j=0; j&lt;tim_i; j++){
                timovi[i].insert(p-&gt;ime);
                int brslova(duzina_imena(p-&gt;ime));
                if(prethodni-&gt;sljedeci==pocetak) pocetak=pocetak-&gt;sljedeci;
                if(prethodni-&gt;sljedeci==prethodni){ delete prethodni-&gt;sljedeci; prethodni=nullptr; p=nullptr; pocetak=nullptr; break;}
                p=p-&gt;sljedeci;
                delete prethodni-&gt;sljedeci;
                prethodni-&gt;sljedeci=p;
                for(int l=1; l&lt;brslova; l++) {
                    p=p-&gt;sljedeci;
                    prethodni=prethodni-&gt;sljedeci;
                }
            }
        }
    }
    catch (std::bad_alloc) {
        if(pocetak){
            Dijete *p=pocetak;
            while (p-&gt;sljedeci != pocetak){
                prethodni=p-&gt;sljedeci;
                delete p;
                p=prethodni;
            }
            delete p;
        }
        throw;
    }
    return timovi;
    
}


int main ()
{
    try{
        int djece, timova;
        std::cout &lt;&lt; "Unesite broj djece: " ;
        std::cin&gt;&gt;djece;
        std::cout &lt;&lt; "Unesite imena djece: " &lt;&lt; std::endl;
        std::vector&lt;std::string&gt; imena;
        imena.resize(djece);
        for(int i=0; i&lt;imena.size(); i++){ std::getline(std::cin&gt;&gt;std::ws, imena[i]);  }
        std::cout &lt;&lt; "Unesite broj timova: " ;
        std::cin&gt;&gt;timova;
        auto rez(Razvrstavanje(imena, timova));
        for(int i=0; i&lt;rez.size(); i++) {
            std::cout &lt;&lt; "Tim "&lt;&lt;i+1&lt;&lt;": " ;
            auto skup_it(rez[i].begin());
            for(int k=0; k&lt;rez[i].size(); k++){
                std::cout &lt;&lt; *skup_it;
                if(k!=rez[i].size()-1) std::cout&lt;&lt;", ";
                skup_it++;
            }
            std::cout &lt;&lt; std::endl;
        }
    }
    catch (std::bad_alloc){
        std::cout &lt;&lt; "Nema memorije" &lt;&lt; std::endl;
    }
    catch(std::logic_error i){
        std::cout &lt;&lt; i.what() &lt;&lt; std::endl;
    }
	return 0;
</font>}</pre>
</body>
</html>
