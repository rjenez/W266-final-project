<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z1/student1303.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z1/student5162.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 1
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
	
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;complex&gt;

enum class Polje {
 Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina
};
enum class Smjerovi {
 GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo
};
enum class Status {
 NijeKraj, KrajPoraz, KrajPobjeda
};
enum class KodoviGresaka {
 PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar
};
enum class Komande {
 PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu,
 ZavrsiIgru, KreirajIgru
};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

<a name="2"></a><font color="#0000FF"><a href="match50-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_16.gif"/></a>

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine){
	Tabla m(n, std::vector&lt;Polje&gt;(n));
	for(int i(0); i&lt;m.size(); i++){
		for(int j(0); j&lt;m[i].size(); j++){
			m[i][j]=Polje::Prazno;
		}
	}
	try{
		for(int i(1); i&lt;mine.size(); i++){
			if(mine[0].size()!=mine[i].size()) throw std::domain_error ("Ilegalan format zadavanja mina");
		}
		for(int i(0); i&lt;mine.size(); i++){
			for(int j(0); j&lt;mine[i].size(); j++){
				if(mine[i][j]&lt;0 || mine[i][j]&gt;=n) throw std::domain_error("Ilegalne pozicije mina");
			}
		}
		for(int i(0); i&lt;mine.size(); i++){
			int x(mine[i][0]);
			int y(mine[i][1]);
			m[x][y]=Polje::Mina;
		}
		
	}
	
	catch(...){
		throw;
}
return m;
}
int Prebroj(const Tabla &amp;polja, int x, int y){
	int brojac(0);
	for(int i(-1); i&lt;2; i++){
		for(int j(-1); j&lt;2; j++){
			if(i!=0 || j!=0){
				if((x+i)&lt;0 || (y+j)&lt;0 || (x+i)&gt;=polja.size() || (y+j)&gt;=polja.size());
				else if (polja[x+i][y+j]==Polje::Mina ||polja[x+i][y+j]==Polje::BlokiranoMina) brojac++;
			}
		}
	}
	return brojac;
}
std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y){
	try{
		if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;polja.size()) {
                std::string izuzetak;
                izuzetak=std::string("Polje (") + char(x+'0') +  std::string(",") + char(y+'0') + std::string(") ne postoji");
                throw std::domain_error (izuzetak);
        }
		std::vector&lt;std::vector&lt;int&gt;&gt; mat(3, std::vector&lt;int&gt; (3));
		for(int i(-1); i&lt;2; i++){
			for(int j(-1); j&lt;2; j++){
				mat[i+1][j+1]=Prebroj(polja, x+i, y+j);
			}
		}
		return mat;
	}
	catch(...){
		throw;
	}
}
void BlokirajPolje(Tabla &amp;polja, int x, int y){
	try{
		if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;polja.size()) {
                std::string izuzetak;
                izuzetak=std::string("Polje (") + char(x+'0') +  std::string(",") + char(y+'0') + std::string(") ne postoji");
                throw std::domain_error (izuzetak);
        }
		else if(polja[x][y]==Polje::Mina) polja[x][y]=Polje::BlokiranoMina;
</font>		else if(polja[x][y]==Polje::Prazno) polja[x][y]=Polje::BlokiranoPrazno;
<a name="3"></a><font color="#00FFFF"><a href="match50-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		else if(polja[x][y]==Polje::Posjeceno) polja[x][y]=Polje::BlokiranoPosjeceno;
	}
	catch(...){
		throw;
	}
}
void DeblokirajPolje(Tabla &amp;polja, int x, int y){
	try{
		if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;polja.size()) {
                std::string izuzetak;
                izuzetak=std::string("Polje (") + char(x+'0') +  std::string(",") + char(y+'0') + std::string(") ne postoji");
                throw std::domain_error (izuzetak);
        }
		else if(polja[x][y]==Polje::BlokiranoMina) polja[x][y]=Polje::Mina;
</font>		else if(polja[x][y]==Polje::BlokiranoPrazno) polja[x][y]=Polje::Prazno;
<a name="1"></a><font color="#00FF00"><a href="match50-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_28.gif"/></a>

		else if(polja[x][y]==Polje::BlokiranoPosjeceno) polja[x][y]=Polje::Posjeceno;
	}
	catch(...){
		throw;
	}
}
Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer){
	polja[x][y]=Polje::Posjeceno;
	try{
	if(x==0 &amp;&amp; ( smjer==Smjerovi::Gore ||  smjer==Smjerovi::GoreLijevo ||  smjer==Smjerovi::GoreDesno)) throw std::out_of_range ("Izlazak van igrace table");
	if(x==polja.size()-1  &amp;&amp; ( smjer==Smjerovi::Dolje ||  smjer==Smjerovi::DoljeLijevo ||  smjer==Smjerovi::DoljeDesno)) throw std::out_of_range ("Izlazak van igrace table");
	if(y==0 &amp;&amp; ( smjer==Smjerovi::Lijevo ||  smjer==Smjerovi::GoreLijevo ||  smjer==Smjerovi::DoljeLijevo)) throw std::out_of_range ("Izlazak van igrace table");
	if(y==polja.size()-1  &amp;&amp; ( smjer==Smjerovi::Desno ||  smjer==Smjerovi::GoreDesno ||  smjer==Smjerovi::DoljeDesno)) throw std::out_of_range ("Izlazak van igrace table");
	
	if(smjer==Smjerovi::GoreLijevo){
		x--, y--;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			x++;
			y++;
			throw std::logic_error ("Blokirano polje");
		}
	} 
	else if(smjer==Smjerovi::Gore){
		x--;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			x++;
			throw std::logic_error ("Blokirano polje");
		}
	}
	else if(smjer==Smjerovi::GoreDesno){
		x--;
		y++;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			x++;
			y--;
			throw std::logic_error ("Blokirano polje");
		}
	}
	else if(smjer==Smjerovi::Lijevo){
		y--;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			y++;
			throw std::logic_error ("Blokirano polje");
		}
	} 
	else if(smjer==Smjerovi::Desno){
		y++;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			y--;
			throw std::logic_error ("Blokirano polje");
		}
	}
	else if(smjer==Smjerovi::DoljeLijevo){
		x++,y--;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			x--;
			y++;
			throw std::logic_error ("Blokirano polje");
		}
	}
	else if(smjer==Smjerovi::Dolje){
		x++;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			x--;
			throw std::logic_error ("Blokirano polje");
		}
	}
	else if(smjer==Smjerovi::DoljeDesno) {
		x++, y++;
		if (polja[x][y]==Polje::BlokiranoPosjeceno || polja[x][y]==Polje::BlokiranoPrazno || polja[x][y]==Polje::BlokiranoMina){
			x--;
			y--;
			throw std::logic_error ("Blokirano polje");
		}
	}
	if( polja[x][y]==Polje::Mina){
			for(int i(0); i&lt;polja.size(); i++){
				for(int j(0); j&lt;polja[i].size(); j++){
					polja[i][j]=Polje::Prazno;
				}
			}
			return Status::KrajPoraz;
		} 
	int i;
	for(i=0; i&lt;polja.size(); i++){
		for(int j(0); j&lt;polja.size(); j++){
			if(polja[x][y]==Polje::Prazno) return Status::NijeKraj;
		}
	}
	return Status::KrajPobjeda;
}
catch(...) {
	throw;
}

}
		

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y){
	try{
		if(novi_x&lt;0 || novi_x&gt;=polja.size() || novi_y&lt;0 ||novi_y&gt;=polja.size()) throw std::out_of_range ("Izlazak van igrace table");
		else if (polja[novi_x][novi_y]==Polje::BlokiranoPosjeceno || polja[novi_x][novi_y]==Polje::BlokiranoPrazno || polja[novi_x][novi_y]==Polje::BlokiranoMina) throw std::logic_error ("Blokirano polje");
		x=novi_x;
		y=novi_y;
		if( polja[x][y]==Polje::Mina){
			for(int i(0); i&lt;polja.size(); i++){
				for(int j(0); j&lt;polja[i].size(); j++){
					polja[i][j]=Polje::Prazno;
				}
			}
			return Status::KrajPoraz;
		} 
		for(int i(0); i&lt;polja.size(); i++){
			for(int j(0); j&lt;polja.size(); j++){
				if(polja[x][y]==Polje::Prazno) return Status::NijeKraj;
			}
		}
		return Status::KrajPobjeda;
	}
	catch(...){
		throw;
	}
}
void PrijaviGresku(KodoviGresaka greska){
	if(greska==KodoviGresaka::PogresnaKomanda) std::cout&lt;&lt;"Nerazumljiva komanda!"&lt;&lt;std::endl;
	if(greska==KodoviGresaka::NedostajeParametar) std::cout&lt;&lt;"Komanda trazi parametar koji nije naveden!"&lt;&lt;std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match50-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_44.gif"/></a>

	if(greska==KodoviGresaka::NeispravanParametar) std::cout&lt;&lt;"Parametar komande nije ispravan!"&lt;&lt;std::endl;
	if(greska==KodoviGresaka::SuvisanParametar) std::cout&lt;&lt;"Zadan je suvisan parametar nakon komande!"&lt;&lt;std::endl;
}
bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska){
	std::string s;
	std::getline(std::cin, s);
	try{
		int gr(0);
	for(int i(0); i&lt;s.size(); i++){
		while(s.at(i)==' ' &amp;&amp; i&lt;s.size()-1) i++;
		if(s.substr(i,2)=="P1"){
			int brojac(0);//dobili smo komandu, sad trazimo smjer
			komanda=Komande::PomjeriJednoMjesto;
			while(i&lt;s.size()-1 &amp;&amp; s.at(i)==' ') i++;
			if(s.substr(i,2)=="GL") {smjer=Smjerovi::GoreLijevo; i+=2; brojac++;}
			else if(s.at(i)=='G') {smjer=Smjerovi::Gore; i++; brojac++;}
			else if(s.substr(i,2)=="GD") {smjer=Smjerovi::GoreDesno; i+=2; brojac++;}
			else if(s.at(i)=='D') {smjer=Smjerovi::Desno; i++; brojac++;}
			else if(s.substr(i,3)=="DoD") {smjer=Smjerovi::DoljeDesno; i+=3; brojac++;}
			else if(s.substr(i,2)=="Do") {smjer=Smjerovi::Dolje; i+=2; brojac++;}
			else if(s.substr(i,3)=="DoL"){ smjer=Smjerovi::DoljeLijevo; i+=3; brojac++;}
			else if(s.at(i)=='L') {smjer=Smjerovi::Lijevo; i++; brojac++;}
			else{
				while(s.at(i)==' ' &amp;&amp; i&lt;s.size()-1 ) i++;
				if(s.at(i)!=s.at(s.size()-1) &amp;&amp; brojac&gt;0) greska=KodoviGresaka::SuvisanParametar, gr++;
				if(s.at(i)==s.at(s.size()-1) &amp;&amp; brojac==0) greska=KodoviGresaka::NedostajeParametar, gr++;
			}
		
		}
		else if(s.substr(i,2)=="P&gt;"){
			komanda=Komande::PomjeriDalje;
			int a(-1),b(-1);
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			if(i&lt;s.size() &amp;&amp; s.at(i)&gt;='0' &amp;&amp; s.at(i)&lt;='9' &amp;&amp; s.at(i+1)==' ') a=s.at(i)-'0', i++;
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			if(i&lt;s.size() &amp;&amp; s.at(i)&gt;='0' &amp;&amp; s.at(i)&lt;='9') b=s.at(i)-'0';
			if(a==-1 || b==-1) greska=KodoviGresaka::NedostajeParametar, gr++;
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			if(i!=s.size()-1) greska=KodoviGresaka::SuvisanParametar, gr++;
			x=a;
			y=b;
		
			
		}
		else if(s.at(i)=='B'){
			komanda=Komande::Blokiraj;
			int a(-1),b(-1);
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			
			if(i&lt;s.size() &amp;&amp; s.at(i)&gt;='0' &amp;&amp; s.at(i)&lt;='9' &amp;&amp; s.at(i+1)==' ') a=s.at(i)-'0', i++;
			
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			
			if(i&lt;s.size() &amp;&amp; s.at(i)&gt;='0' &amp;&amp; s.at(i)&lt;='9') b=s.at(i)-'0';
			
			if(a==-1 || b==-1) greska=KodoviGresaka::NedostajeParametar, gr++;
			
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			
			if(i!=s.size()-1) greska=KodoviGresaka::SuvisanParametar, gr++;
			x=a;
			y=b;
		
			
		}
		else if(s.at(i)=='D'){
			komanda=Komande::Deblokiraj;
			int a(-1),b(-1);
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			if(i&lt;s.size() &amp;&amp; s.at(i)&gt;='0' &amp;&amp; s.at(i)&lt;='9' &amp;&amp; s.at(i+1)==' ') a=s.at(i)-'0', i++;
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			if(i&lt;s.size() &amp;&amp; s.at(i)&gt;='0' &amp;&amp; s.at(i)&lt;='9') b=s.at(i)-'0';
			if(a==-1 || b==-1) greska=KodoviGresaka::NedostajeParametar, gr++;
			while(i&lt;s.size() &amp;&amp; s.at(i)==' ') i++;
			if(i!=s.size()-1) greska=KodoviGresaka::SuvisanParametar, gr++;
			x=a;
			y=b;
		
			
		}
		else if(s.substr(i,2)=="PO"){
			if(s.at(i+2)==' ' || i+2==s.size()) komanda=Komande::PrikaziOkolinu;
			else greska=KodoviGresaka::SuvisanParametar, gr++;
		
		} 
		else if(s.at(i)=='Z'){
			if(s.at(i+1)==' ' || i+1==s.size()) komanda=Komande::ZavrsiIgru;
			else greska=KodoviGresaka::SuvisanParametar, gr++;
		
		}
		else if(s.at(i)=='K'){
			if(s.at(i+1)==' ' || i+1==s.size()) komanda=Komande::KreirajIgru;
			else greska=KodoviGresaka::SuvisanParametar, gr++;
		
		}
		else{
			greska=KodoviGresaka::PogresnaKomanda, gr++;
		
		}
	}
	if(gr&gt;0) return false;
	return true;
	}
	catch(...){
		throw;
	}
}
void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer = Smjerovi::Gore, int p_x = 0, int p_y = 0){
	if(komanda==Komande::KreirajIgru){
		int n;
		std::cout&lt;&lt;"Unesite broj polja: ";
		std::cin&gt;&gt;n;
		std::vector&lt;std::vector&lt;int&gt;&gt; mine(n, std::vector&lt;int&gt;(2));
		
		std::cout&lt;&lt;"Unesite pozicije mina: ";
		int i(0);
		do{
			std::complex&lt;int&gt; z;
			if(std::cin&gt;&gt;z){
				if(z.real()&gt;=0 &amp;&amp; z.real()&lt;n &amp;&amp; z.imag()&gt;=0 &amp;&amp; z.imag()&lt;n){
					mine[i][0]=z.real();
					mine[i][1]=z.imag();
					i++;
				}
				else std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
			}
			else{
				std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
				std::cin.clear();
				std::cin.ignore(10000, '\n');
			}
			
			
		}while(std::cin.peek()!='.');
		
	}
	else if(komanda==Komande::ZavrsiIgru){
		for(int i(0); i&lt;polja.size(); i++){
			for(int j(0); j&lt;polja.size(); j++){
				polja[i][j]=Polje::Prazno;
				throw std::runtime_error ("Igra zavrsena");
			}
		}
	}
	else if(komanda==Komande::PomjeriJednoMjesto){
		Status a(Idi(polja, x, y, p_smjer));
		std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt; x &lt;&lt;","&lt;&lt; y &lt;&lt;")"&lt;&lt;std::endl;
		if(a==Status::KrajPobjeda) std::cout&lt;&lt;"bravo, obisli ste sva sigurna polja";
		else if(a==Status::KrajPoraz) std::cout&lt;&lt;"Nagazili ste na minu";
	}
	else if(komanda==Komande::PomjeriDalje){
		Status a(Idi(polja, x, y, p_x, p_y));
		std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
		if(a==Status::KrajPobjeda) std::cout&lt;&lt;"bravo, obisli ste sva sigurna polja";
		else if(a==Status::KrajPoraz) std::cout&lt;&lt;"Nagazili ste na minu";
	}
	
}

int main ()
{
	
	try{
		Tabla polja;
		Komande komanda;
		int x(0),y(0), p_x(0), p_y(0);
		Smjerovi smjer;
		KodoviGresaka greska;
		
	for(;;){
		std::cout&lt;&lt;"Unesite komandu: ";
		if(UnosKomande(komanda, smjer, x, y, greska)) IzvrsiKomandu(komanda, polja, x, y, smjer, p_x, p_y);
		else PrijaviGresku(greska);
		std::cout&lt;&lt;std::endl;
	}
	}
	catch(std::domain_error e){
		std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	}
	catch(std::out_of_range e){
</font>		std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	}
	
	catch(std::runtime_error e){
		std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	}
	catch(std::logic_error e){
		std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	}
	return 0;
}


/* 
Izmijeniti zadnje dvije funkcije, nie valja ovakav unos, probaj unosbez razmaka, ako se ne bude kontrolisalo, onda ce prolaziti.
a ako bude frka, probaj sa predefinisanim stringovima.
*/</pre>
</body>
</html>
