<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z1/student4599.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z1/student4599.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;exception&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;


enum class Polje { Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina};
enum class Smjerovi { GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo};
enum class Status { NijeKraj, KrajPoraz, KrajPobjeda};
enum class KodoviGresaka { PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar};
<a name="0"></a><font color="#FF0000"><a href="match95-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

enum class Komande { PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

std::string ToString(int n){
	
	std::string rez;
	
	while(n != 0){
		
		rez.push_back('0'+n%10);
		n /= 10;
	}
	
	std::reverse(rez.begin(),rez.end());
	return rez;
}

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine){
	
	Tabla t(n, std::vector&lt;Polje&gt;(n,Polje::Prazno));
	
	for(auto i:mine){
		if (i.size()!=2) throw std::domain_error ("Ilegalan format zadavanja mina");
		if(i[0]&lt;0 || i[0]&gt;=n || i[1]&lt;0 || i[1]&gt;=n) throw std::domain_error ("Ilegalne pozicije mina");
		
		t[i[0]][i[1]]=Polje::Mina;
	}
	
	return t;
}

int brojOkolnihMina (const Tabla &amp;t, int x, int y){
	
	if(x&lt;0 || y&lt;0 || x&gt;=t.size() || y&gt;=t.size()) return 0;
	
	int br(0);
	
	for(int i(-1);i&lt;=1;i++){
		for(int j(-1);j&lt;=1;j++){
			
			if (x+i&gt;=0 &amp;&amp; x+i&lt;t.size() &amp;&amp; y+j&gt;=0 &amp;&amp; y+j&lt;t.size() &amp;&amp; !(i==0 &amp;&amp; j==0) &amp;&amp; t[x+i][y+j]==Polje::Mina) br++;
		}
	}
	
	return br;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y){
	
	if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;=polja.size()){
		
		 std::string A = "Polje (";
		 A += ToString(x) + "," + ToString(y) + ") ne postoji";
		 throw std::domain_error(A);
	}
	
	std::vector&lt;std::vector&lt;int&gt;&gt; okolina (3,std::vector&lt;int&gt;(3));
	
	for(int i(-1);i&lt;=1;i++){
		for(int j(-1);j&lt;=1;j++){
			okolina[i+1][j+1]=brojOkolnihMina(polja,x+i,y+j);
		}
	}
	
	return okolina;
}


void BlokirajPolje (Tabla &amp;polja, int x, int y){
	
	std::string A = "Polje (";
	A += ToString(x) + "," + ToString(y) + ") ne postoji";
	
	if (x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;=polja.size()) throw std::domain_error (A);
	if (int (polja[x][y])&lt;3) polja[x][y]=Polje(int(polja[x][y])+3);
}

void DeblokirajPolje (Tabla &amp;polja, int x, int y){
	
	std::string A = "Polje (";
	A += ToString(x) + "," + ToString(y) + ") ne postoji";
	
	if (x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;=polja.size()) throw std::domain_error (A);
	if (int (polja[x][y])&gt;2) polja[x][y]=Polje(int(polja[x][y])-3);
}


Status Idi (Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y){
	
	if(novi_x&lt;0 || novi_y&lt;0 || novi_x&gt;=polja.size() || novi_y&gt;=polja.size())
	throw std::out_of_range ("Izlazak van igrace table");
	
	if(int(polja[novi_x][novi_y])&gt;2) throw std::logic_error ("Blokirano polje");
	
	polja[x][y]=Polje::Posjeceno;
	x=novi_x;
	y=novi_y;
	
	if(polja[x][y]==Polje::Mina) {
		polja=Tabla(polja.size(),std::vector&lt;Polje&gt;(polja.size(),Polje::Prazno));
		return Status::KrajPoraz;
	}
	
	for(int i(0);i&lt;polja.size();i++){
		for(int j(0);j&lt;polja.size();j++){
			
			if(!(i==x &amp;&amp; j==y) &amp;&amp; !(polja[i][j]==Polje::Mina || polja [i][j]==Polje::Posjeceno))
			return Status::NijeKraj;
			
		}
	}
	
	return Status::KrajPobjeda;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer){
	std::vector&lt;std::vector&lt;int&gt;&gt; v{ {-1,-1}, {-1,0},{-1,1},{0,1},{1,1},{1,0},{1,-1}, {0,-1}};
	return Idi(polja,x,y,x+v[int(smjer)][0],y+v[int(smjer)][1]);
}

void PrijaviGresku (KodoviGresaka kod){
	
	std::string s[] {"Nerazumljiva komanda!","Komanda trazi parametar koji nije naveden!", "Zadan je suvisan parametar nakon komande!",
					"Parametar komande nije ispravan!"};
	
	std::cout&lt;&lt;s[int(kod)]&lt;&lt;std::endl;
}

bool PrazanTok(){
	
	while(std::cin.peek()==' ') std::cin.get();
	if(std::cin.peek()=='\n') return 1;
	
	return 0;
}

bool IspravanTok(){
	
	if(!std::cin){
		std::cin.clear();
		std::cin.ignore(1000,'\n');
		return 0;
	}
	
	return 1;
}

bool ValidacijaKomandeP1 (KodoviGresaka &amp;greska, std::string &amp;kom, Komande &amp;komanda, Smjerovi &amp;smjer){
	
	std::vector&lt;std::string&gt; smjerovi {"GL","G","GD","D","DoD","Do","DoL","L"};
	
	if(PrazanTok()){
		
		greska=KodoviGresaka::NedostajeParametar;
		return 0;
	}
	
	std::cin&gt;&gt;kom;
	
	if(std::find(smjerovi.begin(),smjerovi.end(),kom)==smjerovi.end()) {
		
		greska=KodoviGresaka::NeispravanParametar;
		return 0;
	}
	
	
	if(!PrazanTok()){
		greska=KodoviGresaka::SuvisanParametar;
		std::cin.ignore(1000,'\n');
		return 0;
	}
	
	komanda=Komande::PomjeriJednoMjesto;
	
	smjer=Smjerovi(std::find(smjerovi.begin(),smjerovi.end(),kom)-smjerovi.begin());
	
	return 1;
}

bool ValidacijaKomandiPBD(KodoviGresaka &amp;greska, std::vector&lt;std::string&gt; &amp;komande, Komande &amp;komanda, std::string kom, int &amp;x, int &amp;y){
	
	for(int i(0); i&lt;2; i++){
		
		if(PrazanTok()){
			greska = KodoviGresaka::NedostajeParametar;
			return 0;
		}
		
		int br;
		std::cin &gt;&gt; br;
		
		if( !IspravanTok() || (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n') ){
			greska = KodoviGresaka::NeispravanParametar;
			return 0;
		}
		
		if(i==0) x = br;
		else y = br;
	}
	
	if(!PrazanTok()){
		greska = KodoviGresaka::SuvisanParametar;
		std::cin.ignore(1000,'\n');
		return 0;
	}
	
	komanda = Komande(std::find(komande.begin(), komande.end(), kom) - komande.begin());
	return 1;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska){
	
	std::vector&lt;std::string&gt; komande {"P1","P&gt;","B","D","PO","Z","K"};
	std::string kom;
	std::cin &gt;&gt; kom;
	
	if( std::find(komande.begin(), komande.end(), kom) == komande.end() ){
		greska = KodoviGresaka::PogresnaKomanda;
		return 0;
	}
	
	if(kom == "P1") return ValidacijaKomandeP1(greska, kom, komanda, smjer);
	
	else if(kom == "P&gt;" || kom == "B" || kom == "D") return ValidacijaKomandiPBD(greska, komande, komanda, kom, x, y);
	
	else{
		
		if(!PrazanTok()){
			std::cin.ignore(1000,'\n');
			greska = KodoviGresaka::SuvisanParametar;
			return 0;
		}
		
		komanda = Komande(std::find(komande.begin(), komande.end(), kom) - komande.begin());
		return 1;
	}
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer = Smjerovi::Gore, int p_x = 0, int p_y = 0){
	
	if(komanda == Komande::PomjeriJednoMjesto || komanda == Komande::PomjeriDalje) {																																																																																																																																																			
		
		Status a;
		if(komanda == Komande::PomjeriJednoMjesto) a = Idi(polja,x,y,p_smjer);
		else  a = Idi(polja,x,y,p_x,p_y);
		
		std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl;
		
		if(a == Status::KrajPobjeda) std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
		
		else if(a == Status::KrajPoraz){
			
			std::cout &lt;&lt; "Nagazili ste na minu" &lt;&lt; std::endl;
			polja = Tabla(polja.size(), std::vector&lt;Polje&gt;(polja.size(), Polje::Prazno));
			throw std::runtime_error("Igra zavrsena");
		}
	}
	
	else if(komanda == Komande::Blokiraj) BlokirajPolje(polja,p_x,p_y);
	else if(komanda == Komande::Deblokiraj) DeblokirajPolje(polja,p_x,p_y);
	
	else if(komanda == Komande::PrikaziOkolinu){
		
		auto mat = PrikaziOkolinu(polja,x,y);
		
		for(auto i: mat){
			for(auto j: i) std::cout &lt;&lt; j &lt;&lt; " ";
			std::cout &lt;&lt; std::endl;
		}
	}
	
	else if(komanda == Komande::ZavrsiIgru){
		
		polja = Tabla(polja.size(), std::vector&lt;Polje&gt;(polja.size(),Polje::Prazno));
		throw std::runtime_error("Igra zavrsena");
	}
	
	else{
		
		std::cout &lt;&lt; "Unesite broj polja: ";
		std::vector&lt;std::vector&lt;int&gt;&gt; v;
		int brojPolja;
		std::cin &gt;&gt; brojPolja;
		
		char c(' ');
		int r,k;
		std::cout &lt;&lt; "Unesite pozicije mina: ";
		
		while(1){
			
			std::cin &gt;&gt; c;
			if(c == '.') break;
			
			if(PrazanTok() || c != '('){
				std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
				std::cin.ignore(1000,'\n');
				continue;
			}
			
			std::cin &gt;&gt; r;
			if(!IspravanTok() || PrazanTok()) {std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl; continue;}
			std::cin &gt;&gt; c;
			if(PrazanTok() || c != ',' ) { std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl; continue; }
			std::cin &gt;&gt; k;
			if(!IspravanTok() || PrazanTok()) { std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl; continue; }
			std::cin &gt;&gt; c;
			if(c != ')') { std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl; continue; }
			
			if(r&lt;0 || k&lt;0 || r&gt;=brojPolja || k&gt;=brojPolja) {std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl; continue;}
			v.push_back({r,k});
		}
		
		polja = KreirajIgru(brojPolja,v);
	}
}

void IspisiTablu (std::vector&lt;std::vector&lt;Polje&gt;&gt; polja){
	
	for (int i(0);i&lt;polja.size();i++){
		for(int j(0);j&lt;polja[i].size();j++){
			std::cout&lt;&lt; int(polja[i][j])&lt;&lt;" ";
		}
		std::cout&lt;&lt;std::endl;
	}
	
}

int main ()
{
	int x(0),y(0);
	int x1(0),y1(0);
	Tabla t;
	
	while(1){
		
		try{
			Komande komanda;
			Smjerovi smjer;
			KodoviGresaka kodGreske;
			
			std::cout &lt;&lt; "Unesite komandu: ";
			bool a = UnosKomande(komanda, smjer, x1, y1, kodGreske);
			
			if(a) IzvrsiKomandu(komanda, t, x, y, smjer, x1, y1);
		}
		catch(std::runtime_error e){
			std::cout &lt;&lt; "Dovidjenja!" &lt;&lt; std::endl;
			break;
		}
		catch(std::exception &amp;e){
			std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
</font>		}
	}
	
	return 0;
}</pre>
</body>
</html>
