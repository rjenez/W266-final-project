<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z1/student2232.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z1/student2232.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 1
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
	
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

enum class Polje {
 Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina
};

enum class Smjerovi {
 GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo
};

enum class Status {
 NijeKraj, KrajPoraz, KrajPobjeda 
};

enum class KodoviGresaka {
 PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar 
};

enum class Komande {
 PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu,
 ZavrsiIgru, KreirajIgru
};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

<a name="1"></a><font color="#00FF00"><a href="match69-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_21.gif"/></a>

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine){
	Tabla mat(n,std::vector&lt;Polje&gt;(n,Polje::Prazno));
	for(int i=0;i&lt;mine.size();i++){
		if(mine[i].size()!=2) throw std::domain_error("Ilegalan format zadavanja mina");
		if(mine[i][1]&gt;=n || mine[i][0]&gt;=n) throw std::domain_error("Ilegalne pozicije mine");
		mat[mine[i][0]][mine[i][1]]=Polje::Mina;
	}
	return mat;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y){
	std::string s="Polje (";
	s+=(x+'0');
	s+=',';
	s+=(y+'0');
	s+=") ne postoji";
	if(x&gt;=polja.size() || y&gt;=polja.size() || x&lt;0 || y&lt;0) throw std::domain_error(s);
	std::vector&lt;std::vector&lt;int&gt;&gt; mat(3,std::vector&lt;int&gt;(3));
	for(int i=0;i&lt;3;i++){
		for(int j=0;j&lt;3;j++){
			int a=x-1+i,b=y-1+j;
			int brojac(0);
			if((a-1&gt;=0 &amp;&amp; a-1&lt;polja.size()) &amp;&amp; (b-1&gt;=0 &amp;&amp; b-1&lt;polja.size()) &amp;&amp; polja[a-1][b-1]==Polje::Mina) brojac++;
			if((a-1&gt;=0 &amp;&amp; a-1&lt;polja.size()) &amp;&amp; (b&gt;=0 &amp;&amp; b&lt;polja.size()) &amp;&amp; polja[a-1][b]==Polje::Mina) brojac++;
			if((a-1&gt;=0 &amp;&amp; a-1&lt;polja.size()) &amp;&amp; (b+1&gt;=0 &amp;&amp; b+1&lt;polja.size()) &amp;&amp; polja[a-1][b+1]==Polje::Mina) brojac++;
			if((a&gt;=0 &amp;&amp; a&lt;polja.size()) &amp;&amp; (b-1&gt;=0 &amp;&amp; b-1&lt;polja.size()) &amp;&amp; polja[a][b-1]==Polje::Mina) brojac++;
			if((a&gt;=0 &amp;&amp; a&lt;polja.size()) &amp;&amp; (b+1&gt;=0 &amp;&amp; b+1&lt;polja.size()) &amp;&amp; polja[a][b+1]==Polje::Mina) brojac++;
			if((a+1&gt;=0 &amp;&amp; a+1&lt;polja.size()) &amp;&amp; (b-1&gt;=0 &amp;&amp; b-1&lt;polja.size()) &amp;&amp; polja[a+1][b-1]==Polje::Mina) brojac++;
			if((a+1&gt;=0 &amp;&amp; a+1&lt;polja.size()) &amp;&amp; (b&gt;=0 &amp;&amp; b&lt;polja.size()) &amp;&amp; polja[a+1][b]==Polje::Mina) brojac++;
			if((a+1&gt;=0 &amp;&amp; a+1&lt;polja.size()) &amp;&amp; (b+1&gt;=0 &amp;&amp; b+1&lt;polja.size()) &amp;&amp; polja[a+1][b+1]==Polje::Mina) brojac++;
			mat[i][j]=brojac;
		}
	}
	return mat;
}

void BlokirajPolje(Tabla &amp;polja, int x, int y){
	std::string s="Polje (";
	s+=(x+'0');
	s+=',';
	s+=(y+'0');
	s+=") ne postoji";
	if(x&gt;=polja.size() || x&lt;0 || y&gt;=polja.size() || y&lt;0) throw std::domain_error(s);
	if(polja[x][y]==Polje::Prazno) polja[x][y]=Polje::BlokiranoPrazno;
</font>	else if(polja[x][y]==Polje::Posjeceno) polja[x][y]=Polje::BlokiranoPosjeceno;
<a name="6"></a><font color="#00FF00"><a href="match69-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

	else if(polja[x][y]==Polje::Mina) polja[x][y]=Polje::BlokiranoMina;
}

void DeblokirajPolje(Tabla &amp;polja, int x, int y){
	std::string s="Polje ("; s+=(x+'0'); s+=','; s+=(y+'0'); s+=") ne postoji";
	if(x&gt;=polja.size() || x&lt;0 || y&gt;=polja.size() || y&lt;0) throw std::domain_error(s);
	if(polja[x][y]==Polje::BlokiranoPrazno) polja[x][y]=Polje::Prazno;
</font>	else if(polja[x][y]==Polje::BlokiranoPosjeceno) polja[x][y]=Polje::Posjeceno;
<a name="4"></a><font color="#FF00FF"><a href="match69-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

	else if(polja[x][y]==Polje::BlokiranoMina) polja[x][y]=Polje::Mina;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer){
	int a(x),b(y);
	if(smjer==Smjerovi::Gore) a--;
	else if(smjer==Smjerovi::GoreDesno){ a--;b++;}
	else if(smjer==Smjerovi::GoreLijevo) {a--;b--;}
	else if(smjer==Smjerovi::Desno) b++;
	else if(smjer==Smjerovi::Lijevo) b--;
	else if(smjer==Smjerovi::DoljeDesno){a++;b++;}
	else if(smjer==Smjerovi::Dolje) a++;
	else if(smjer==Smjerovi::DoljeLijevo){a++;b--;}
	if(a&lt;0 || a&gt;=polja.size() || b&lt;0 || b&gt;=polja.size()) throw std::out_of_range("Izlazak van igrace table");
	if(polja[a][b]==Polje::BlokiranoPosjeceno || polja[a][b]==Polje::BlokiranoPrazno || polja[a][b]==Polje::BlokiranoMina) throw std::logic_error("Blokirano polje");
</font><a name="2"></a><font color="#0000FF"><a href="match69-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

	polja[x][y]=Polje::Posjeceno;
	x=a;y=b;
	if(polja[x][y]==Polje::Mina){
		for(int i=0;i&lt;polja.size();i++){
			for(int j=0;j&lt;polja[i].size();j++) polja[i][j]=Polje::Prazno;
		}
		return Status::KrajPoraz;
	}
	else if(polja[x][y]==Polje::Prazno || polja[x][y]==Polje::Posjeceno){
		bool ImaLiPrazno=true;
		for(int i=0;i&lt;polja.size();i++){
			for(int j=0;j&lt;polja[i].size();j++){
				if(polja[i][j]==Polje::Prazno &amp;&amp; i!=a &amp;&amp; j!=b) ImaLiPrazno=false;
			}
		}
		if(ImaLiPrazno) return Status::KrajPobjeda;
	}
	return Status::NijeKraj;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y){
	if(novi_x&lt;0 || novi_x&gt;=polja.size() || novi_y&lt;0 || novi_y&gt;=polja.size()) throw std::out_of_range("Izlazak van igrace table");
	if(polja[novi_x][novi_y]==Polje::BlokiranoPosjeceno || polja[novi_x][novi_y]==Polje::BlokiranoPrazno || polja[novi_x][novi_y]==Polje::BlokiranoMina) throw std::logic_error("Blokirano polje");
</font><a name="3"></a><font color="#00FFFF"><a href="match69-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

	polja[x][y]=Polje::Posjeceno;
	x=novi_x; y=novi_y;
	if(polja[x][y]==Polje::Mina){
		for(int i=0;i&lt;polja.size();i++){
			for(int j=0;j&lt;polja[i].size();j++) polja[i][j]=Polje::Prazno;
		}
		return Status::KrajPoraz;
	}
	else if(polja[x][y]==Polje::Prazno || polja[x][y]==Polje::Posjeceno){
		bool ImaLiPrazno=true;
		for(int i=0;i&lt;polja.size();i++){
			for(int j=0;j&lt;polja[i].size();j++){
				if(polja[i][j]==Polje::Prazno &amp;&amp; i!=x &amp;&amp; j!=y) ImaLiPrazno=false;
			}
		}
		if(ImaLiPrazno) return Status::KrajPobjeda;
	}
	return Status::NijeKraj;
}

void PrijaviGresku(KodoviGresaka x){
	if(x==KodoviGresaka::PogresnaKomanda) std::cout &lt;&lt; "Nerazumljiva komanda!" &lt;&lt; std::endl;
	else if(x==KodoviGresaka::NedostajeParametar) std::cout &lt;&lt; "Komanda trazi parametar koji nije naveden!" &lt;&lt; std::endl;
</font><a name="5"></a><font color="#FF0000"><a href="match69-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

	else if(x==KodoviGresaka::NeispravanParametar) std::cout &lt;&lt; "Parametar komande nije ispravan!" &lt;&lt; std::endl;
	else if(x==KodoviGresaka::SuvisanParametar) std::cout &lt;&lt; "Zadan je suvisan parametar nakon komande!" &lt;&lt; std::endl;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska){
	std::string a;
	std::cin &gt;&gt; a;
	if(a=="P1"){
		komanda=Komande::PomjeriJednoMjesto;
		std::string c;
		char s;
		while(char(std::cin.peek())==' ') s=std::cin.get();
		if(char(std::cin.peek())!='\n') std::cin&gt;&gt; c;
		if(c.size()==0){
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}else if(c=="GL") smjer=Smjerovi::GoreLijevo;
		else if(c=="GD") smjer=Smjerovi::GoreDesno;
		else if(c=="G") smjer =Smjerovi::Gore;
</font>		else if(c=="D") smjer=Smjerovi::Desno;
		else if(c=="DoD") smjer=Smjerovi::DoljeDesno;
		else if(c=="Do") smjer=Smjerovi::Dolje;
<a name="0"></a><font color="#FF0000"><a href="match69-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_42.gif"/></a>

		else if(c=="DoL") smjer=Smjerovi::DoljeLijevo;
		else if(c=="L") smjer=Smjerovi::Lijevo;
		else {
			greska=KodoviGresaka::NeispravanParametar;
			return false;
		}
		std::string kraj;
		while(char(std::cin.peek())==' ') s=std::cin.get();
		if(char(std::cin.peek())!='\n') std::cin&gt;&gt; kraj;
		if(kraj.size()&gt;0) {
			greska=KodoviGresaka::SuvisanParametar;
			return false;
		}
	}else if(a=="P&gt;" || a=="B" || a=="D"){
		if(a=="P&gt;")
		komanda=Komande::PomjeriDalje;
		else if(a=="B") komanda=Komande::Blokiraj;
		else if(a=="D") komanda=Komande::Deblokiraj;
		int a1(0),b(0);
		std::string broj1,broj2;
		char slovo;
		while(char(std::cin.peek())==' ') slovo=std::cin.get();
		if(char(std::cin.peek())!='\n') std::cin &gt;&gt; broj1;
		if(broj1.size()==0){
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}
		for(int i=0;i&lt;broj1.size();i++){
			if(broj1[i]&gt;='0' &amp;&amp; broj1[i]&lt;='9') a1=a1*10+(broj1[i]-'0');
			else{
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
		}
		x=a1;
		while(char(std::cin.peek())==' ') slovo=std::cin.get();
		if(char(std::cin.peek())!='\n') std::cin &gt;&gt; broj2;
		if(broj2.size()==0){
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}
		for(int i=0;i&lt;broj2.size();i++){
			if(broj2[i]&gt;='0' &amp;&amp; broj2[i]&lt;='9') b=b*10+(broj2[i]-'0');
			else{
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
		}
		y=b;
		std::string kraj;
		while(char(std::cin.peek())==' ') slovo=std::cin.get();
		if(char(std::cin.peek())!='\n') std::cin &gt;&gt; kraj;
		if(kraj.size()&gt;0){
			greska=KodoviGresaka::SuvisanParametar;
			return false;
		}
	}else if(a=="PO" || a=="Z" || a=="K"){
		if(a=="PO") komanda=Komande::PrikaziOkolinu;
		else if(a=="Z") komanda=Komande::ZavrsiIgru;
		else if(a=="K") komanda=Komande::KreirajIgru;
		char slovo=std::cin.get();
		while(slovo==' ') slovo=std::cin.get();
		std::string kraj;
		while(slovo!=' ' &amp;&amp; slovo!='\n'){
			kraj.push_back(slovo);
			slovo=std::cin.get();
		}
		if(kraj.size()&gt;0){
			greska=KodoviGresaka::SuvisanParametar;
			return false;
		}
	}else {
		greska=KodoviGresaka::PogresnaKomanda;
		return false;
	}
	return true;
}

void Zavrsi(Tabla &amp;polja){
	for(int i=0;i&lt;polja.size();i++){
		for(int j=0;j&lt;polja[i].size();j++){
			polja[i][j]=Polje::Prazno;
		}
	}
	throw std::runtime_error("Igra zavrsena");
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y,Smjerovi p_smjer = Smjerovi::Gore, int p_x = 0, int p_y = 0){
		if(komanda==Komande::PomjeriJednoMjesto){
			try{
				Status a=Idi(polja,x,y,p_smjer);
				if(a==Status::KrajPoraz){
					std::cout &lt;&lt; "Nagazili ste na minu"&lt;&lt; std::endl;
					Zavrsi(polja);
				}else if(a==Status::KrajPobjeda){
					std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
					Zavrsi(polja);
				}else{
					std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl;
				}
			}catch(std::out_of_range poruka){
				std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
			}catch(std::logic_error izuzetak){
				std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
			}
		}else if(komanda==Komande::PomjeriDalje){
			try{
				Status a =Idi(polja,x,y,p_x,p_y);
				if(a==Status::KrajPoraz){ 
					std::cout &lt;&lt; "Nagazili ste na minu"&lt;&lt; std::endl;
					Zavrsi(polja);
				}
				else if(a==Status::KrajPobjeda){
					std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
					Zavrsi(polja);
				}
				else 
					std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl;
			}catch(std::out_of_range poruka){
				std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
			}catch(std::logic_error izuzetak){
				std::cout &lt;&lt; izuzetak.what()&lt;&lt;std::endl;
			}
		}else if(komanda==Komande::Blokiraj){
			try{
				BlokirajPolje(polja,p_x,p_y);
			}catch(std::domain_error poruka){
				std::cout&lt;&lt; poruka.what()&lt;&lt; std::endl;
			}
		}else if(komanda==Komande::Deblokiraj){
			try{
				DeblokirajPolje(polja,p_x,p_y);
			}catch(std::domain_error izuzetak){
				std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
			}
		}else if(komanda==Komande::PrikaziOkolinu){
			try{
				std::vector&lt;std::vector&lt;int&gt;&gt; mat=PrikaziOkolinu(polja,x,y);
				for(int i=0;i&lt;mat.size();i++){
					for(int j=0;j&lt;mat[i].size();j++){
						std::cout &lt;&lt; mat[i][j] &lt;&lt; " ";
					}
					std::cout &lt;&lt; std::endl;
				}
			}catch(std::domain_error poruka){
				std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
			}
		}else if(komanda==Komande::ZavrsiIgru){
				Zavrsi(polja);
		}else if(komanda==Komande::KreirajIgru){
			int n;
			std::cout &lt;&lt; "Unesite broj polja: ";
			std::cin&gt;&gt; n;
			std::string unos;
			std::cout &lt;&lt; "Unesite pozicije mina: ";
			std::vector&lt;std::vector&lt;int&gt;&gt; mine;
			while(1){
				std::cin &gt;&gt; unos;
				if(unos==".") break;
				if(unos[0]=='('&amp;&amp; unos[unos.size()-1]==')'){
					int brojac(0),brojac2(0);
					for(int i=1;i&lt;unos.size()-1;i++){
						if(unos[i]==',') 
							brojac++;
						else if(!(unos[i]&gt;='0' &amp;&amp; unos[i]&lt;n+'0')) brojac2++;
					}
					if(brojac!=1 || brojac2!=0) std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
					else{
						int a(0),b(0);
						int i=1;
						while(unos[i]&gt;='0' &amp;&amp; unos[i]&lt;='9'){
							a=a*10+(unos[i]-'0');
							i++;
						}
						i++;
						while(unos[i]&gt;='0' &amp;&amp; unos[i]&lt;='9'){
							b=b*10+(unos[i]-'0');
							i++;
						}
						std::vector&lt;int&gt; red(2);
						red[0]=a;
						red[1]=b;
						mine.push_back(red);
					}
				}else{
					std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
				}
			}
			try{
			polja=KreirajIgru(n,mine);
			}catch(std::domain_error poruka){
				std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
			}
		}
}

int main ()
{
	try{
	Komande komanda;
	Smjerovi smjer;
	KodoviGresaka greska;
	Tabla polje;
	int x=0,y=0;
	for(;;){
		std::cout &lt;&lt; "Unesite komandu: ";
		if(UnosKomande(komanda,smjer,x,y,greska)){
			 IzvrsiKomandu(komanda,polje,x,y,smjer,x,y);
		}
		else{
			PrijaviGresku(greska);
		}
	}
	}catch(std::runtime_error){
		std::cout &lt;&lt;"Dovidjenja!"&lt;&lt; std::endl;
	}
	return 0;
</font>}</pre>
</body>
</html>
