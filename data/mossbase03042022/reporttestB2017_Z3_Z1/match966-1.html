<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1009.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student2240.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;

<a name="1"></a><font color="#00FF00"><a href="match966-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

double Testna_funkcija (double x)
{
    return x*x + std::sin(x);
}


std::function&lt;double(double)&gt; LinearnaInterpolacija (std::vector&lt;std::pair&lt;double,double&gt;&gt; parovi)
{
    return [parovi] (double x)
</font>    {

        if (parovi.size() == 0)                                                   ///Slucaj da nema parova.
            return x;

        double najmanji = parovi[0].first;
        int indeks = 0;
        double najveci = parovi[0].first;
        for (int i {}; i&lt;parovi.size(); i++)                                      ///Sortiranje vektora parova u novi vektor.
        {
            if (parovi[i].first &lt; najmanji)
            {
                najmanji = parovi[i].first;
                indeks = i;
            }

            if (parovi[i].first&gt;najveci)
                najveci = parovi[i].first;
        }

        std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
        v.push_back(parovi[indeks]);
        int k = 0;

        int n;
        for (int i {}; i&lt;parovi.size(); i++)
        {
            if (i != indeks)
            {
                if (parovi[i].first == v[0].first)
                    throw std::domain_error ("Neispravni cvorovi");

                najmanji = najveci;
                for (int j {}; j&lt;parovi.size(); j++)
                {
                    if (parovi[j].first &lt;= najmanji &amp;&amp; parovi[j].first&gt;v[k].first)
                    {
                        najmanji = parovi[j].first;
                        n = j;
                    }
                }

                v.push_back(parovi[n]);
                k++;
            }
        }


        for (int i {1}; i&lt;v.size(); i++)                                          ///Provjera da li ima istih cvorova.
        {
            if (v[i].first == v[i-1].first)
                throw std::domain_error ("Neispravni cvorovi");
        }

        if (x &lt; v[0].first || x&gt;v[v.size()-1].first)                              ///Provjera opsega.
            throw std::range_error ("Argument izvan opsega");

        for (int i {}; i&lt;v.size(); i++)                                           ///Slucaj da x ima cvornu vrijednost.
        {
            if (x == v[i].first)
                return v[i].second;
        }


        for (int i {}; i&lt;v.size()-1; i++)                                         ///Proracun interpolacije.
        {
            if (x&gt;v[i].first &amp;&amp; x&lt;v[i+1].first)
                return v[i].second + (v[i+1].second-v[i].second)*(x-v[i].first)/(v[i+1].first-v[i].first);
        }
    };
}


std::function&lt;double(double)&gt; LinearnaInterpolacija(double f (double), double x_min, double x_max, double delta_x)
{
    if (x_min &gt; x_max)
        throw std::domain_error ("Nekorektni parametri");

    if (delta_x&lt;0)
        throw std::domain_error ("Nekorektni parametri");

    if (x_min == x_max &amp;&amp; delta_x == 0)
        return f;


    return [f, x_min, x_max, delta_x] (double x)
    {

        if (x &lt; x_min || x&gt;x_max)                                                   ///Provjera opsega.
            throw std::range_error ("Argument izvan opsega");

        std::vector&lt;double&gt; rez_x;
        std::vector&lt;double&gt; rez_y;

        double suma = x_min;

        while (suma&lt;=x_max)
        {
            rez_x.push_back(suma);
            rez_y.push_back(f(suma));

            suma+=delta_x;
        }

        auto veca_x = std::lower_bound(rez_x.begin(), rez_x.end(), x);
        int razlika = veca_x-rez_x.begin();
        auto veca_y = rez_y.begin();
        for (int i {}; i&lt;razlika; i++)
            veca_y++;

        if (*veca_x == x)
            return *veca_y;


        auto manja_x = std::lower_bound(rez_x.begin(), rez_x.end(), x);
        manja_x--;
        razlika = manja_x-rez_x.begin();
        auto manja_y = rez_y.begin();
        for (int i {}; i&lt;razlika; i++)
            manja_y++;


        return *manja_y + (*veca_y-*manja_y)*(x-*manja_x)/(*veca_x-*manja_x);
    };
}




int main ()
{
    try
    {
        std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int opcija;
        std::cin&gt;&gt;opcija;

        if (opcija == 1)
        {
            std::cout&lt;&lt;"Unesite broj cvorova: ";
            int n;
            std::cin&gt;&gt;n;

            std::vector&lt;std::pair&lt;double,double&gt;&gt; v;

            std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            for (int i {}; i&lt;n; i++)
            {
                double a,b;
                std::cin&gt;&gt;a&gt;&gt;b;
                v.push_back(std::make_pair(a,b));
            }


            while (true)
            {
                auto f = LinearnaInterpolacija(v);
                if (v.size() != 0)                                              ///Test za ispravnost cvorova.
                    f(v[0].first);
                char znak = '"';
                std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt;znak&lt;&lt;"kraj"&lt;&lt;znak&lt;&lt;" za kraj): ";
                double x;
                std::cin&gt;&gt;x;
                try
                {
<a name="0"></a><font color="#FF0000"><a href="match966-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

                    if (!std::cin)
                        break;

                    std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl;
                }
                catch (std::range_error e)
                {
                    std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                }
            }
        }

        else if (opcija == 2)
        {
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double x_min, x_max, delta_x;
            std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;delta_x;
</font>

            while (true)
            {
                auto f = LinearnaInterpolacija(Testna_funkcija,x_min,x_max,delta_x);
                f(x_min);                                                       ///Test za ispravnost parametara.
                char znak = '"';
                std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt;znak&lt;&lt;"kraj"&lt;&lt;znak&lt;&lt;" za kraj): ";
                double x;
                std::cin&gt;&gt;x;
                
                try
                {
                    if (!std::cin)
                        break;

                    std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;Testna_funkcija(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl;
                }
                catch (std::range_error e)
                {
<a name="2"></a><font color="#0000FF"><a href="match966-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                    std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                }
            }
        }
    }
    catch (std::domain_error e)
    {
        std::cout&lt;&lt;e.what();
    }
    return 0;
</font>}
</pre>
</body>
</html>
