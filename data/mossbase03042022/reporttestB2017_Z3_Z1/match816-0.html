<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student3807.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student3807.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;

bool moja_funkcija(std::pair&lt;double, double&gt; a, std::pair&lt;double, double&gt; b)
{
    return (a.first&lt;b.first);
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(   //prva verzija
    std::vector&lt;std::pair&lt;double, double&gt;&gt; v)
{
    
        int vel=v.size();
        
        //vektor samo od x-eva
        std::vector&lt;double&gt; iksevi;
        for(int i(0); i&lt;v.size(); i++) { //pravimo vektor samo od x iz uredjenih parova
            iksevi.push_back(v[i].first);
        }
        int flag(0);
        for(int i(0); i&lt;iksevi.size(); i++) {
            for(int j(i+1); j&lt;iksevi.size(); j++) {
                if(iksevi[i]==iksevi[j]) flag++;
            }
        }
        if(flag!=0) {
            throw std::domain_error ("Neispravni cvorovi");
        }
    return [v,vel,iksevi] (double x) {
        int marker;
        if(x==v.at(vel-1).first) return v.at(vel-1).second;
        if(x&lt;v[0].first || x&gt;v[vel-1].first) {
            throw std::range_error ("Argument izvan opsega");
        }

        auto pos(std::lower_bound(iksevi.begin(), iksevi.end(), x)-1); //par-koji sadrzi donju granicu od x
        for(int i(0); i&lt;v.size(); i++) {
            if(*pos==v[i].first) {
                marker=i;
                break; //trazimo korespondirajuci uredjen par
            }
        }
        double povratni=v[marker].second+((v[marker+1].second-v[marker].second)/(v[marker+1].first-v[marker].first))*(x-v[marker].first);
        return povratni;
    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(  //druga verzija
    std::function&lt;double(double)&gt; f, double xmin, double xmax, double dx){
        return[xmin, xmax, dx, f] (double x){
        if(xmin&gt;xmax || dx&lt;=0) { throw std::domain_error ("Nekorektni parametri");}    
        if(x&lt;xmin || x&gt;xmax) { throw std::range_error ("Argument izvan opsega");}
        std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi(0); int brojac(0);
        std::pair&lt;double, double&gt; tekuci_par;
        for(int i(0);; i++){
            std::pair&lt;double, double&gt; tekuci_par;
            if((xmin+i*dx)==xmax){
                tekuci_par.first=xmax;
                tekuci_par.second=f(xmax);
                cvorovi.push_back(tekuci_par);
                break;
            }
            tekuci_par.first=xmin+i*dx;
            tekuci_par.second=f(tekuci_par.first);
            cvorovi.push_back(tekuci_par);
        }
        //sad imamo vektor parova sa datim korakom... moramo sortirati
        std::sort(cvorovi.begin(), cvorovi.end(), moja_funkcija);
        std::vector&lt;double&gt; iksevi2;
            for(int i(0); i&lt;cvorovi.size(); i++){  //pravimo vektor samo od x iz uredjenih parova
                iksevi2.push_back(cvorovi[i].first);
            }
        int marker2; double povratni2;
        std::vector&lt;double&gt;::iterator pos=std::lower_bound(iksevi2.begin(), iksevi2.end(), x)-1; //par-koji sadrzi donju granicu od x
            for(int i(0); i&lt;cvorovi.size(); i++){
                if(*pos==cvorovi[i].first) {
                    marker2=i;
                    break; //trazimo korespondirajuci uredjen par
                }
            }
            povratni2=cvorovi[marker2].second+((cvorovi[marker2+1].second-cvorovi[marker2].second)/(cvorovi[marker2+1].first-cvorovi[marker2].first))*(x-cvorovi[marker2].first);
            return povratni2;};}

double fun(double x){
    return x*x+std::sin(x);
}

int main (){
    try{
    int stanje;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;stanje;
    if(stanje==1){
        int br_cvorova;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        std::cin&gt;&gt;br_cvorova;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        double x, y;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; cvor(br_cvorova);
        for(int i(0); i&lt;br_cvorova; i++){
            std::cin&gt;&gt;x&gt;&gt;y;
            cvor.at(i)=std::make_pair(x,y);
        }
        auto fun(LinearnaInterpolacija(cvor));
        double argument;
        std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
<a name="1"></a><font color="#00FF00"><a href="match816-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

        while(std::cin&gt;&gt;argument){
            try{
                std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;std::endl;
            }catch(std::range_error izuzetak){
                std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;}
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
        }
    }
        else if(stanje==2){
</font>            double xmin, xmax, korak;
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            std::cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;korak;
            auto funkc(LinearnaInterpolacija(fun, xmin, xmax, korak));
            double argument;
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
<a name="0"></a><font color="#FF0000"><a href="match816-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

            while(std::cin&gt;&gt;argument){
                try{
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;funkc(argument)&lt;&lt;std::endl;
                }catch(std::range_error izuzetak){
                    std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                }
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";  
            }
        }
        
    }catch(std::domain_error izuzetak){
        std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
</font>    }
    return 0;
}
</pre>
</body>
</html>
