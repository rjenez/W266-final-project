<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8665.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8665.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;


<a name="0"></a><font color="#FF0000"><a href="match210-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_94.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; parovi)
{

    std::sort(parovi.begin(), parovi.end(), [](std::pair&lt;double, double&gt; prvi, std::pair&lt;double,double&gt; drugi) {
        return prvi.first &lt; drugi.first;
    });


    const double EPS(0.00000000000000000000001);


    for(int i=0; i&lt;parovi.size(); i++) {
        for(int j=i+1; j&lt;parovi.size(); j++) {
            if(std::fabs(parovi[i].first - parovi[j].first) &lt; EPS)
                throw std::domain_error("Neispravni cvorovi");
        }
    }

    return [parovi] (double x) {
        if((x&lt;parovi[0].first  || x&gt;parovi[parovi.size()-1].first))
            throw std::range_error("Argument izvan opsega");

        std::pair&lt;double, double&gt; pom;
        pom.first=x;
        pom.second=0;
        const double EPS(0.00000000000000000000001);
        if(std::fabs(x - parovi[parovi.size()-1].first)&lt;EPS) return parovi[parovi.size()-1].second;
        if(std::fabs(x - parovi[0].first) &lt; EPS) return parovi[0].second;
        auto pok(upper_bound(parovi.begin(), parovi.end(), pom, [](std::pair&lt;double, double&gt; prvi, std::pair&lt;double, double&gt; drugi) {
            return prvi.first &lt; drugi.first;
        }));

        auto pok2(pok-1);
        return pok2-&gt;second + ((pok-&gt;second - pok2-&gt;second)/(pok-&gt;first - pok2-&gt;first))*(x - pok2-&gt;first);
    }

    ;
}

std::function&lt;double(double)&gt;  LinearnaInterpolacija(std::function&lt;double(double)&gt;f, double min, double max, double dx)
{
    if(min &gt; max || dx &lt; 0) {
        throw std::domain_error ("Nekorektni parametri");
    }
    std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi;
    for(; min&lt;max; min+=dx) {
        std::pair&lt;double,double&gt; par(min, f(min));
        cvorovi.push_back(par);
    }
    return LinearnaInterpolacija(cvorovi);
}

double fja(double x)
{
    return pow(x,2)+std::sin(x);
}

int main ()
{
    try {
        for(;;) {
            std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): " ;
            int opcija;
            std::cin &gt;&gt; opcija;
            if(opcija == 1) {
                std::cout &lt;&lt; "Unesite broj cvorova: ";
                int broj_cvorova;
                std::cin &gt;&gt; broj_cvorova;
                std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
                std::vector&lt;std::pair&lt;double, double&gt;&gt; parovi;
                for(int i=0; i&lt;broj_cvorova; i++) {
                    std::pair&lt;double, double&gt; par;
                    std::cin &gt;&gt; par.first &gt;&gt; par.second;
                    parovi.push_back(par);
                }

                auto f(LinearnaInterpolacija(parovi));

                for(;;) {
                    try {
                        std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                        double x;
                        std::cin &gt;&gt; x;
                        if(!std::cin) {
                            return 0;
                        }

                        auto funkcija(f(x));
                        std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; funkcija &lt;&lt; std::endl;
                    } catch(std::range_error izuzetak) {
                        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                    }
                }
            } else {
                std::cout &lt;&lt; "Unesite krajeve intervala i korak: " ;

                double min, max, dx;
                std::cin &gt;&gt; min &gt;&gt; max &gt;&gt; dx;
                auto funkcija2(LinearnaInterpolacija(fja, min, max, dx));
                for(;;) {
                    try {
                        std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                        double x;
                        std::cin &gt;&gt; x;
                        if(!std::cin) return 0;

                        auto F(funkcija2(x));
                        std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; fja(x) &lt;&lt; " fapprox(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; F &lt;&lt; std::endl;


                    } catch(std::range_error izuzetak) {
                        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>                    }
                }
            }
        }
    } catch(std::domain_error izuzetak) {
        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    }
    return 0;
}
</pre>
</body>
</html>
