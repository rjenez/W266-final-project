<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8416.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8416.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

<a name="0"></a><font color="#FF0000"><a href="match197-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; v){
    try{
        for(int i=0; i&lt;v.size(); i++){
        for(int j=i+1; j&lt;v.size(); j++){
            if(i==v.size()-1) break;
            if(v[i].first==v[j].first) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::sort(v.begin(), v.end(), [](std::pair&lt;double, double&gt; a, std::pair&lt;double, double&gt; b){return a.first&lt;b.first;});
    return([v](double x){
        try{
            if(v.empty()) throw std::range_error("Argument izvan opsega");
            if(x&lt;v[0].first || x&gt;v[v.size()-1].first) throw std::range_error("Argument izvan opsega");
            if(x==v[v.size()-1].first) return v[v.size()-1].second;
            auto it(std::lower_bound(v.begin(), v.end(), std::make_pair(x,0.)));
            std::pair&lt;double, double&gt; prva(*(it-1));
            std::pair&lt;double, double&gt; druga(*(it));
            return(prva.second+((druga.second-prva.second)/(druga.first-prva.first))*(x-prva.first));

        }catch(std::range_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
            throw;
        }
    });
    }catch(std::domain_error e){
        std::cout&lt;&lt;e.what();
        throw;
    }
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::function&lt;double(double)&gt; f,  double min, double max, double delta){
    std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
    try{
        if(min&gt;max || delta&lt;=0) throw std::domain_error("Nekorektni parametri");
    int k((max-min)/delta);
    v.push_back(std::make_pair(min, f(min)));
    for(int i=1; i&lt;k; i++){
        v.push_back(std::make_pair(min+i*delta, f(min+i*delta)));
    }
    }catch(std::domain_error e){
        std::cout&lt;&lt;e.what();
        throw;
    }
    return(LinearnaInterpolacija(v));
}

int main ()
{
    try{
        std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
   std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
   int k(0);
   std::cin&gt;&gt;k;
   if(k==1){
       std::cout&lt;&lt;"Unesite broj cvorova: ";
       int a;
       std::cin&gt;&gt;a;
       std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
       for(int i=0; i&lt;a; i++){
           int b,c;
           std::cin&gt;&gt;b&gt;&gt;c;
           v.push_back(std::make_pair(b, c));
       }
       auto f(LinearnaInterpolacija(v));
       for(;;){
           try{
       std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
       double d;
       std::cin&gt;&gt;d;
       if(!std::cin) return 0;
       std::cout&lt;&lt;"f("&lt;&lt;d&lt;&lt;")"&lt;&lt;" = "&lt;&lt;f(d)&lt;&lt;std::endl;
           }catch(std::range_error e){
               //std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
               continue;
           }
       }
   }
   if(k==2){
       std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
       double e,p,h;
       std::cin&gt;&gt;e&gt;&gt;p&gt;&gt;h;
       //auto t(LinearnaInterpolacija(v));
       auto g(LinearnaInterpolacija([](double x){return x*x+std::sin(x);}, e, p, h));
        for(;;){
            try{
       std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
       double d;
       std::cin&gt;&gt;d;
       if(!std::cin) return 0;
       std::cout&lt;&lt;"f("&lt;&lt;d&lt;&lt;")"&lt;&lt;" = "&lt;&lt;d*d+std::sin(d)&lt;&lt;" "&lt;&lt;"fapprox("&lt;&lt;d&lt;&lt;") = "&lt;&lt;g(d)&lt;&lt;std::endl;
            }catch(std::range_error e){
                continue;
            }
       }
   }
    }catch(std::domain_error e){
        //std::cout&lt;&lt;e.what();
        return 0;
    }
	return 0;
</font>}</pre>
</body>
</html>
