<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5166.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5166.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match107-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
using namespace std;

double xsinx (double x){
    return x*x + sin(x);
}

double min (double a, double b){
    if (a &lt; b) return a;
    else return b;
}

double max (double a, double b){
    if (a &gt; b) return a;
    else return b;
}

double w (int n, int d, int index, double xi, const vector&lt;pair&lt;double, double&gt;&gt; &amp;x){
    double suma = 0;
    index++;
    for (int i = max(1, index-d); i&lt;=min(index, n-d); i++){
        double proizvod = 1;
        for (int j=i-1; j&lt;i+d; j++){
            if (index-1 == j) continue;
            proizvod *= (1/(xi-x[j].first));
        }
        proizvod *= pow(-1, i-1);
        suma += proizvod;
    }
    return suma;
}

function&lt;double(double)&gt;LinearnaInterpolacija(vector&lt;pair&lt;double, double&gt;&gt; v, int d){
    if (d&lt;0 || d&gt;v.size()) throw domain_error ("Argument izvan opsega");
    return [v,d](double x){
        for (int i=0; i&lt;v.size(); i++){
            if (x == v[i].first) return v[i].second;
        }
        int n = v.size();
        int i=0; 
        auto f1 (double((w(n, d, i, v[i].first, v)*(v[i].second)) / (x - v[i].first)));
        auto f2 ((w(n, d, i, v[i].first, v)) / (x - v[i].first));
        for (i=1; i&lt;n; i++){
            f1 = f1 + (w(n, d, i, v[i].first, v)*(v[i].second)) / (x-v[i].first);
            f2 = f2 + (w(n, d, i, v[i].first, v)) / (x-v[i].first);
        }
        return f1/f2;
    };
}


function&lt;double(double)&gt;LinearnaInterpolacija(function&lt;double(double)&gt; f, double x_min, double x_max, double dx, int d){
    if (x_min &gt; x_max || dx&lt;=0) throw domain_error ("Nekorektni parametri");
    vector&lt;pair&lt;double, double&gt;&gt; v;
    v.push_back(make_pair(x_min, f(x_min)));
    x_min += dx;
    for (;;){
        if (x_min &gt; x_max) break;
        v.push_back(make_pair(x_min, f(x_min)));
        x_min += dx;
    }
    return LinearnaInterpolacija(v, d);
}


int main (){
    try {
        int d;
        double x_min, x_max, dx;
        vector&lt;pair&lt;double, double&gt;&gt; v;
        do {
            bool dobro = true;
            cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
            int unos;
            cin &gt;&gt; unos;
            if (!unos) break;
            if (unos == 1){
                cout &lt;&lt; "Unesite broj cvorova: ";
                int n;
                cin &gt;&gt; n;
                cout &lt;&lt; "Unesite cvorove kao parove x y: ";
                for (int i=0; i&lt;n; i++){
                    double x, y;
                    cin &gt;&gt; x &gt;&gt; y;
                    v.push_back(make_pair(x, y));
                }
                for (int i=0; i&lt;n; i++){
                    for (int j=i+1; j&lt;n; j++){
                        if (v[i].first = v[j].first) throw domain_error ("Neispravni cvorovi");
                    }
                }
                
                do{
                    cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                    double a;
                    cin &gt;&gt; a;
                    if (!cin){
                        dobro = false;
                        break;
                    }
                    cout &lt;&lt; "f(" &lt;&lt; a &lt;&lt; ") = " &lt;&lt; LinearnaInterpolacija(v, d)(a) &lt;&lt; endl;
                } while (1);
            }
            if (!dobro) break;
            bool dobro2 = true;
            if (unos == 2){
                cout &lt;&lt; "Unesite krajeve intervala i korak: ";
                cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; dx;
                
                double x_min2 = x_min;
                v.push_back(make_pair(x_min2, xsinx(x_min2)));
                x_min2 += dx;
                for (;;){
                    if (x_min2 &gt; x_max) break;
                    v.push_back(make_pair(x_min2, xsinx(x_min2)));
                    x_min2 += dx;
                }
                do {
                    cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                    double a;
                    cin &gt;&gt; a;
                    if (!cin){
                        dobro2 = false;
                        break;
                    }
                    cout &lt;&lt; "f(" &lt;&lt; a &lt;&lt; ") = " &lt;&lt; xsinx(a) &lt;&lt; " ";
                    cout &lt;&lt; "fapprox(" &lt;&lt; a &lt;&lt; ") = " &lt;&lt; LinearnaInterpolacija(xsinx, x_min, x_max, dx, d)(a) &lt;&lt; endl;
                }while (1);
            }
            if (!dobro2) break;
            
        } while(1);
        
    }
    catch (domain_error Izuzetak){
        cout &lt;&lt; Izuzetak.what() &lt;&lt; endl;
</font>    }
    
	return 0;
}</pre>
</body>
</html>
