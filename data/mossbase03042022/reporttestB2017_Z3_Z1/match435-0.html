<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student4998.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student4998.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
//const double epsilon(0.0000001);
const double epsilon(10e-7);
double f(double x)
{
    return x*x+sin(x);
}
//Rjednaki poredi da li su dva realna broja jednaka
bool RJednaki(double x,double y)
{

    return std::fabs(x-y)&lt;epsilon;

}
//fja kriterija za binarnu pretragu sa upper_bound
bool Kriterij(std::pair&lt;double,double&gt; p,std::pair&lt;double,double&gt; m )
{
    if(RJednaki(p.first,m.first)) return false;
    return p.first&lt;m.first;
}
std::vector&lt;std::pair&lt;double,double&gt;&gt; NapraviCvor(std::function&lt;double(double)&gt;f,double xmin,double xmax,double deltax)
{
    std::vector&lt;std::pair&lt;double,double&gt;&gt;v;
    if(deltax&lt;0 || xmin&gt;xmax  || deltax&lt;epsilon ) throw std::domain_error("Nekorektni parametri");
    //VALJDA NEMA SMISLA NI KAD JE XMIN==XMAX
    if(RJednaki(xmin,xmax)) throw std::domain_error("Nekorektni parametri");
    double pom(xmin);
    while(pom&lt;=xmax) {
        v.push_back({pom,f(pom)});
        pom+=deltax;
    }
    return v;
}
//fja kriterija za sortiranje vektora
bool ManjipoPrvoj(std::pair&lt;double,double&gt;x,std::pair&lt;double,double&gt;y)
{
    if(RJednaki(x.first,y.first)) throw std::domain_error("Neispravni cvorovi");
<a name="0"></a><font color="#FF0000"><a href="match435-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    return x.first&lt;y.first;
}


std::function&lt;double(double)&gt; LinearnaInterpolacija( std::vector&lt;std::pair&lt;double,double&gt;&gt; v)
{

//ako dva elementa cvora imaju jednake koordinate baca se izuzetak
    for(int i=0; i&lt;v.size(); i++) {
        for(int j=i+1; j&lt;v.size(); j++) {
</font>            //v.at(i) je tipa pair i "pair" podrzava poredjenje na jednakost
<a name="4"></a><font color="#FF00FF"><a href="match435-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

            if(v.at(i)==v.at(j)) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::sort(v.begin(),v.end(),ManjipoPrvoj);
    return [v](double x)-&gt;double {

        if(v.size()==0 || v.at(0).first&gt;x || v.at(v.size()-1).first&lt;x) throw std::range_error("Argument izvan opsega");
</font>        if(v.size()==1 &amp;&amp; !(RJednaki(x,v.at(0).first))) throw std::range_error("Argument izvan opsega");
        if(RJednaki(x,v.at(v.size()-1).first)) return v.at(v.size()-1).second;
        //potrebno je naci interval[xi,xi+1)tako da je xi&lt;=x&lt;xi+1
        std::pair&lt;double,double&gt;prvi,drugi;
        std::pair&lt;double,double&gt; m={x,0};
        //prvi=(xi,yi) drugi=(xi+1,yi+1)
        //posto upper_bound vraca pokazivac iza elementa koji je manji ili jednak elementu koji trazimo
        //ovom naredbom dobijamo gornju,tj drugi element
        auto idrugi=std::upper_bound(v.begin(),v.end(),m,Kriterij);
        auto iprvi=idrugi-1;
        drugi=*idrugi;
        prvi=*iprvi;
        return prvi.second+((drugi.second-prvi.second)/(drugi.first-prvi.first))*(x-prvi.first);

    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::function&lt;double(double)&gt;f,double xmin,double xmax,double deltax)
{
    auto v(NapraviCvor(f,xmin,xmax,deltax));
    //Dobijemo sortiran vektor u kojem nema jednakih elemenata
    return LinearnaInterpolacija(v);
}

int main ()
{
    try {


        std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int opcija;
        std::cin&gt;&gt;opcija;
        std::cin.ignore(10000,'\n');
<a name="1"></a><font color="#00FF00"><a href="match435-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        if(opcija==1) {
            std::cout&lt;&lt;"Unesite broj cvorova: ";
            int n;
            std::cin&gt;&gt;n;
            std::vector&lt;std::pair&lt;double,double&gt;&gt;v(n);
            std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            for(int i=0; i&lt;n; i++) {
</font>                double x,y;
                std::cin&gt;&gt;x&gt;&gt;y;
                v.at(i)= {x,y};
            }
            try {
                auto f(LinearnaInterpolacija(v));
                double x;
                for(;;) {
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin&gt;&gt;x;
<a name="2"></a><font color="#0000FF"><a href="match435-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

                    if(std::cin.peek()!='\n') break;

                    try {

                        std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl;
                    } catch(std::range_error poruka) {
</font>                        std::cout&lt;&lt;poruka.what()&lt;&lt;std::endl;
                    }

                }
            } catch(std::domain_error poruka) {
                std::cout&lt;&lt;poruka.what();
            }

        }
        if(opcija==2) {
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double xmin,xmax,deltax;
            std::cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;deltax;
            std::cin.ignore(10000,'\n');
            try {
<a name="5"></a><font color="#FF0000"><a href="match435-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

                auto v=NapraviCvor(f,xmin,xmax,deltax);

                auto fapprox=LinearnaInterpolacija(f,xmin,xmax,deltax);
                for(;;) {
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    double x;
                    std::cin&gt;&gt;x;
                    if(std::cin.peek()!='\n') break;
</font><a name="3"></a><font color="#00FFFF"><a href="match435-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>


                    try {

                        std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;fapprox(x)&lt;&lt;std::endl;
</font>
                    } catch(std::range_error poruka) {
                        std::cout&lt;&lt;poruka.what()&lt;&lt;std::endl;
                    }

                }

            } catch(std::domain_error poruka) {
                std::cout&lt;&lt;poruka.what();
            }
        }
    } catch(std::domain_error poruka) {
        std::cout&lt;&lt;poruka.what();
    }
    return 0;
}
</pre>
</body>
</html>
