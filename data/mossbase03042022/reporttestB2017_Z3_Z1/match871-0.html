<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student6267.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student6267.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;map&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; vp){
    const double eps(0.001);
<a name="1"></a><font color="#00FF00"><a href="match871-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    for(int i(0);i&lt;vp.size()-1;i++){
        for(int j=i+1;j&lt;vp.size();j++){
            if(abs(vp[i].first-vp[j].first)&lt;eps) throw std::domain_error ("Nesipravni cvorovi");
</font>        }
    }
    bool sortirano(true);
    for(int i(0);i&lt;vp.size()-1;i++){
        if(vp[i].first&gt;=vp[i+1].first){
            sortirano=false;
            break;
        }
    }
    if(!sortirano){
        std::sort(vp.begin(),vp.end(),[](std::pair&lt;double,double&gt; p1, std::pair&lt;double,double&gt; p2){return p1.first&lt;p2.first;});
    }
    return [=](double x){
        if(x&lt;vp[0].first || x&gt;vp[vp.size()-1].first) throw std::range_error("Argument izvan opsega");
        if(std::abs(vp[vp.size()-1].first-x)&lt;eps) return vp[vp.size()-1].second;
        int index(0);
        for(int i(0);i&lt;vp.size()-1;i++){
            if(x&gt;=vp[i].first &amp;&amp; x&lt;vp[i+1].first) {
                index=i;
                break;
            }
        }
<a name="2"></a><font color="#0000FF"><a href="match871-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        return vp[index].second+((vp[index+1].second-vp[index].second)/(vp[index+1].first-vp[index].first))*(x-vp[index].first);
</font>    };
}
int BinarySearch(std::vector&lt;std::pair&lt;double,double&gt;&gt; vp, double broj){
int min=0;
int max=vp.size();
int mid;
while (max &gt;= min){
    mid = (min + max) / 2;

    if (vp[mid].first &lt; broj)
        min = mid + 1;
    else if (vp[mid].first &gt; broj)
        max = mid - 1;

    else return mid;

}

return min-1;
}



std::function&lt;double(double)&gt; LinearnaInterpolacija(double f(double), double xmin, double xmax, double korak){
    const double eps(0.0000001);
    if(xmin&gt;xmax || korak&lt;=0) throw std::domain_error ("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; vp;
    while(xmin&lt;=xmax){
        vp.push_back(std::make_pair(xmin,f(xmin)));
        xmin+=korak;
    }
    
   
    
    return [=](double x){
<a name="3"></a><font color="#00FFFF"><a href="match871-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        if(std::abs(x-vp[vp.size()-1].first)&lt;eps) return vp[vp.size()-1].second;
        if(x&lt;vp[0].first || x&gt;vp[vp.size()-1].first) throw std::range_error("Argument izvan opsega");
</font>        
        int index(BinarySearch(vp,x));
        return vp[index].second+((vp[index+1].second-vp[index].second)/(vp[index+1].first-vp[index].first))*(x-vp[index].first);
    };
}

double fun (double x){return x*x+sin(x);}


int main ()
{
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija(0);
    std::cin&gt;&gt;opcija;
    if(opcija==1)
        {
        std::vector&lt;std::pair&lt;double,double&gt;&gt; vp;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int br_cvorova;
        std::cin&gt;&gt;br_cvorova;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        double x,y;
        
        for(int i(0);i&lt;br_cvorova;i++){
            std::cin&gt;&gt;x&gt;&gt;y;
            vp.push_back(std::make_pair(x,y));
        }
       try{
            auto f(LinearnaInterpolacija(vp));
                
                    double arg;
                    while(1){
                    try{
<a name="0"></a><font color="#FF0000"><a href="match871-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin&gt;&gt;arg;
                    if(!std::cin) break;
                    std::cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
                    
                    }
                        catch(std::range_error e){
</font>                        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                        }
                    }
       }    
        catch(std::domain_error e){
            std::cin.clear();
            std::cout&lt;&lt;e.what();
        }
    }
    if(opcija==2)
     {
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double xmin,xmax,korak;
        std::cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;korak;
        try{
            
            auto f(LinearnaInterpolacija([](double x){return x*x+sin(x);},xmin,xmax,korak));
            
        double arg;
         while(1){
                    try{
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin&gt;&gt;arg;
                    if(!std::cin) break;
                    std::cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;fun(arg)&lt;&lt;" fapprox("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
                    
                    }
                        catch(std::range_error e){
                        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                        }
                    }
        }
        catch(std::domain_error e){
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
        }
     }
   
    
    

	return 0;
}
                                       </pre>
</body>
</html>
