<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5536.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student9307.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match213-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

typedef std::vector&lt;std::pair&lt;double,double&gt;&gt; VektorParova;

struct F {
    double x,x_i,x_ii,y_i,y_ii;
}; // struktura koja sadrzi varijable interpolacije

void Sortiraj (VektorParova &amp;cvorovi)
{
    for (int i = 0; i&lt;cvorovi.size(); i++){
        for (int j = i; j&lt;cvorovi.size()-1; j++){
            if (fabs(cvorovi.at(i).first-cvorovi.at(j+1).first)&lt;0.000001) throw std::domain_error ("Neispravni cvorovi");
        }
    }
    std::sort(cvorovi.begin(),cvorovi.end(),[](std::pair&lt;double,double&gt; x,std::pair&lt;double,double&gt; y) {
        if (x.first&gt;y.first) return false;
        return true;
    });
} // Sortira vektor i baca izuzetak ukoliko postoje dva ista elementa

double Formula (F var)  // Formula interpolacije
{
    return (var.y_i + ((var.y_ii-var.y_i)/(var.x_ii-var.x_i))*(var.x-var.x_i));
}

double Nadji (VektorParova cvorovi, double x){
    std::pair&lt;double,double&gt; par{x,0};
    VektorParova::iterator it(std::lower_bound(cvorovi.begin(),cvorovi.end(),par));  // trazi prvu x-koordinatu koja je veca od trazene tacke
    it--;
    if (fabs((*it).first-cvorovi.at(cvorovi.size()-1).first)&lt;0.000001) { return (*it).second;}   // ako nije nadjena trazena tacka onda treba da vrati samo y-koordinatu

    auto trenutni(it);   // trentuni je i it++ su dva cvora izmedju kojih je x
    it++;  // postaje sljedeci element
    return Formula({x,(*trenutni).first,(*it).first,(*trenutni).second,(*it).second});
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (VektorParova cvorovi){
    Sortiraj(cvorovi);
    return [cvorovi](double x){
        if (x&lt;cvorovi.at(0).first || x&gt;cvorovi.at(cvorovi.size()-1).first) throw std::range_error ("Argument izvan opsega");
        return Nadji(cvorovi,x);
    };
}

VektorParova LinearnaInterpolacija (double funkcija(double), double x_min, double x_max, double delta_x){
    if (x_max&lt;x_min || delta_x&lt;=0) throw std::domain_error ("Nekorektni parametri");
    VektorParova cvorovi;
    double korak(0);
    int i(1);
    while (1){
        cvorovi.resize(i);
        cvorovi.at(i-1)={x_min+korak,funkcija(x_min+korak)};
        korak+=delta_x;
        if (korak&gt;=x_max) break;
        i++;
    }
    return cvorovi;
}

void UnosCvorova (){
    std::cout&lt;&lt;"Unesite broj cvorova: ";
    int n;
    std::cin&gt;&gt;n;
    VektorParova cvorovi(n);
    std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
    for (int i = 0; i&lt;n; i++){
        double x,y;
        std::cin&gt;&gt;x&gt;&gt;y;
        cvorovi.at(i)={x,y};
    }
    Sortiraj(cvorovi);
    while (1){
        std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
        double x;
        std::cin&gt;&gt;x;
        if (!std::cin) break;
        std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;LinearnaInterpolacija(cvorovi)(x)&lt;&lt;std::endl;
    }
}

void Aproksimacija (){
    std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
    double x_min,x_max,korak;
    std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;korak;
    // uslov
    while (1){
        std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
        double x;
        std::cin&gt;&gt;x;
        if (!std::cin) break;
        try {
        std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;std::sin(x)+x*x&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;LinearnaInterpolacija(LinearnaInterpolacija([](double x){
            return (std::sin(x)+x*x);},x_min,x_max,korak))(x)&lt;&lt;std::endl;
        }
        catch (std::range_error izuzetak){
            std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
        }
    }
}

int main ()
{
    try{
   auto li2(LinearnaInterpolacija({}));

std::cout &lt;&lt; li2(1.5) &lt;&lt; std::endl;
}catch (std::range_error e)
{
    std::cout &lt;&lt; "'" &lt;&lt; e.what() &lt;&lt; "'";
}
catch (...)
{
    std::cout &lt;&lt; "Pogresan tip izuzetka";
}
    return 0;
</font>}
</pre>
</body>
</html>
