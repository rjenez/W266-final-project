<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5154.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5154.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match105-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;

using namespace std;

function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;pair&lt;double,double&gt;&gt; cvor) {

    sort(cvor.begin(),cvor.end(), [](pair&lt;double,double&gt; a, pair&lt;double,double&gt; b) {
        return a.first&lt;b.first;
    });
    
    return [cvor](double x) {
        double f(0);
        if(x&lt;cvor[0].first or x&gt;cvor[cvor.size()-1].first) throw range_error("Argument izvan opsega");
        for(int i(0);i&lt;cvor.size()-1;i++) {
            if(x==cvor[cvor.size()-1].first) {
                return cvor[cvor.size()-1].second;
            }
            if(x&gt;=cvor[i].first and x&lt;cvor[i+1].first) {
                double xi=cvor[i].first;
                double yi=cvor[i].second;
                double xii=cvor[i+1].first;
                double yii=cvor[i+1].second;
                f=yi+((yii-yi)/(xii-xi))*(x-xi);
                return f;
            }  
        }
        return f;
    };
}

function&lt;double(double)&gt; LinearnaInterpolacija(double f(double), double xmin, double xmax, double xx) {
    if(xmin&gt;xmax or xx&lt;=0) throw domain_error("Nekorektni parametri");
    std::vector&lt;pair&lt;double,double&gt;&gt; vp;
    int j(0);
    for(double i(xmin);i&lt;=xmax;i=i+j*xx) {
        vp.push_back(make_pair(i,f(i)));
        j++;
    }
    return [f,vp,xx] (double x) {
        double fun(0);
        if(x&lt;vp[0].first or x&gt;vp[vp.size()-1].first) throw range_error("Argument izvan opsega");
        if(x==vp[vp.size()-1].first) {
            return vp[vp.size()-1].second;
        }
        for(int i(0);i&lt;vp.size();i++) {
            if(i+1&lt;=vp.size()-1){
            auto it(lower_bound(vp.begin(),vp.end(),x, [] (const pair&lt;double,double&gt; &amp;a, const double &amp;b) {
                return a.first&lt;b;
            }));
            double xi=it-&gt;first;
            double yi=f(xi);
            double xii=it-&gt;first-xx;
            double yii=f(xii);
            fun=yi+((yii-yi)/(xii-xi))*(x-xi);
            return fun;
            }
        }
        return fun;
    };
}

int main ()
{
    int op;
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    cin&gt;&gt;op;
    if(op==1) {
        int bc;
        cout&lt;&lt;"Unesite broj cvorova: ";
        cin&gt;&gt;bc;
        cin.ignore(1000,'\n');
        std::vector&lt;pair&lt;double,double&gt;&gt; vp;
        pair&lt;double,double&gt; p;
        double x, y;
        try {
        cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i(0);i&lt;bc;i++) {
            cin&gt;&gt;x&gt;&gt;y;
            p=make_pair(x,y);
            vp.push_back(p);
        }
        for(int i(0);i&lt;vp.size();i++) {
        double prvi(vp[i].first);
        for(int j(0);j&lt;vp.size();j++) {
            if(i!=j) {
            if(prvi==vp[j].first) throw domain_error("Neispravni cvorovi");   
            }
        }
        }
        double xx;
        for(;;) {
            cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            cin&gt;&gt;xx;
            if(!cin) return 0;
                auto f(LinearnaInterpolacija(vp));
                cout&lt;&lt;"f("&lt;&lt;xx&lt;&lt;") = "&lt;&lt;f(xx)&lt;&lt;endl;
        }
        }
        catch (domain_error a) {
            cout&lt;&lt;a.what()&lt;&lt;endl;
        }
        catch (range_error b) {
            cout&lt;&lt;b.what()&lt;&lt;endl;
        }
        
    }
    else if(op==2) {
        double xmin,xmax,xx;
        cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;xx;
        cin.ignore(1000,'\n');
        double x;
        for(;;) {
             cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
             cin&gt;&gt;x;
             if(!cin) return 0;
             try {
                 auto f(LinearnaInterpolacija([](double x) {return x*x+sin(x);},xmin,xmax,xx));
                 cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;x*x+sin(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;endl;
             }
             catch (domain_error a) {
                cout&lt;&lt;a.what()&lt;&lt;endl;
             }
             catch (range_error b) {
                cout&lt;&lt;b.what()&lt;&lt;endl;
</font>             }
        }
    }
	return 0;
}
</pre>
</body>
</html>
