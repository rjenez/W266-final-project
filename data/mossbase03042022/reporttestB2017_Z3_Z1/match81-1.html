<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student3871.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student7834.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match81-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#define EPSILON 0.0001

double funkcija(double x)
{
 return x*x+std::sin(x);
}

bool kriterij(std::pair&lt;double,double&gt; par1, std::pair&lt;double,double&gt; par2)
{
 if(par1.first&lt;par2.first) return true;
 return false;
}

bool kriterij_binarne(std::pair&lt;double,double&gt; par1, std::pair&lt;double,double&gt; par2)
{
 if(par1.first&lt;=par2.first) return true;
 return false;
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi)
{
 for(std::pair&lt;double,double&gt; vek : cvorovi)
 {
  auto broj=std::count_if(cvorovi.begin(),cvorovi.end(),[vek](std::pair&lt;double,double&gt; x) { if(fabs(x.first-vek.first)&gt;EPSILON) return true; return false; });
  if(broj!=1) 
  {
   std::sort(cvorovi.begin(),cvorovi.end(),kriterij);
   break;
  }
 }
 for(std::pair&lt;double,double&gt; par : cvorovi)
 {
  auto prebroj=std::count_if(cvorovi.begin(),cvorovi.end(),[par](std::pair&lt;double,double&gt; x) { if(fabs(par.first-x.first)&lt;EPSILON) return true; return false; });
  if(prebroj!=1) throw std::domain_error("Neispravni cvorovi");
 }
 return[=](double x) -&gt; double
 {
  if(x&lt;cvorovi[0].first || x&gt;cvorovi[cvorovi.size()-1].first)
  {
   throw std::range_error("Argument izvan opsega");
  }
  auto par1=std::pair&lt;double,double&gt;(x,0);
  auto it=std::lower_bound(cvorovi.begin(),cvorovi.end(),par1,kriterij_binarne);
  it--;
  auto parx=it-&gt;first;
  auto pary=it-&gt;second;
  if((fabs(parx-cvorovi[cvorovi.size()-1].first)&lt;EPSILON) &amp;&amp; (fabs(pary-cvorovi[cvorovi.size()-1].second)&lt;EPSILON))
  {
   return pary;
  }
  it++;
  auto parx_plus1=it-&gt;first;
  auto pary_plus1=it-&gt;second;
  double rez;
  rez=pary+(((pary_plus1-pary)/(parx_plus1-parx))*(x-parx));
  return rez;
 };
}

template&lt;typename TipFunkcije&gt;
std::function&lt;double(double)&gt; LinearnaInterpolacija(TipFunkcije fun, double xmin, double xmax, double deltax)
{
 if(xmin&gt;xmax) throw std::domain_error("Nekorektni parametri");
 if(deltax&lt;=0) throw std::domain_error("Nekorektni parametri");
 std::vector&lt;std::pair&lt;double,double&gt;&gt; vektor;
 while(xmin&lt;xmax)
 {
  std::pair&lt;double,double&gt; pom{xmin,fun(xmin)};
  vektor.push_back(pom);
  xmin+=deltax;
 }
 return LinearnaInterpolacija(vektor);
}

int main ()
{
 int opcija1;
 std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
 std::cin &gt;&gt; opcija1;
 if(opcija1==1)
 {
  try
  {
   int broj_cvorova,unos1,unos2;
   std::cout &lt;&lt; "Unesite broj cvorova: ";
   std::cin &gt;&gt; broj_cvorova;
   std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi;
   std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
   for(int i(0);i&lt;broj_cvorova;i++)
   {
    std::cin &gt;&gt; unos1 &gt;&gt; unos2;
    cvorovi.push_back(std::make_pair(unos1,unos2));
   }
   double arg;
   do
   {
    try
    {
     auto f(LinearnaInterpolacija(cvorovi));
     std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
     std::cin &gt;&gt; arg;
     if(!std::cin) break;
     std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg);
     std::cout &lt;&lt; std::endl;
    }
    catch(std::range_error e)
    {
     std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
    }
   }while(std::cin);
  }
  catch(std::domain_error e)
  {
   std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
  }
 }
 else if(opcija1==2)
 {
  try
  {
   double kraj1,kraj2,korak;
   std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
   std::cin &gt;&gt; kraj1 &gt;&gt; kraj2 &gt;&gt; korak;
   double arg;
   do
   {
    try
    {
     auto f(LinearnaInterpolacija(funkcija,kraj1,kraj2,korak));
     std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
     std::cin &gt;&gt; arg;
     if(!std::cin) break;
     std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; funkcija(arg) &lt;&lt; " fapprox(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg);
     std::cout &lt;&lt; std::endl;
    }
    catch(std::range_error e)
    {
     std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
    }
   }while(std::cin);
  }
  catch(std::domain_error e)
  {
   std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
  }
 }
 return 0;
</font>}
</pre>
</body>
</html>
