<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1597.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1597.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;

<a name="0"></a><font color="#FF0000"><a href="match89-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; vektor) {
    std::sort(vektor.begin(), vektor.end(), [](std::pair&lt;double, double&gt; prvi, std::pair&lt;double, double&gt; drugi) {
        return prvi.first&lt;drugi.first;
    });
    for (int i=vektor.size()-1; i&gt;0; i--) {
        if (vektor.at(i).first==vektor.at(i-1).first) throw std::domain_error("Neispravni cvorovi");
    }
    double x1(0.), xn(0.);
    std::vector&lt;std::pair&lt;double, double&gt;&gt;::iterator pocetak;
    std::vector&lt;std::pair&lt;double, double&gt;&gt;::iterator kraj(vektor.end());
    if (vektor.size()!=0) {
        pocetak=vektor.begin();
        kraj=vektor.end()-1;
        x1=(*pocetak).first;
        xn=(*kraj).first;
    }
    return [x1, xn, vektor, kraj](double x) {
        if (vektor.size()==0) throw std::range_error("Argument izvan opsega");
        if (x&lt;x1) throw std::range_error("Argument izvan opsega");
        if (x&gt;xn) throw std::range_error("Argument izvan opsega");
        if (x==xn) return (*kraj).second;
        else {
            auto donji(std::upper_bound(vektor.begin(), vektor.end(), std::make_pair(x, 1.)));
            auto gornji(donji);
            donji--;
            double x_i((*donji).first);
            double x_i1((*gornji).first);
            double y_i((*donji).second);
            double y_i1((*gornji).second);
            return y_i+((y_i1-y_i)/(x_i1-x_i))*(x-x_i);
        }
    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::function&lt;double(double)&gt; fun, double prvi, double drugi, double korak) {
    if (prvi&gt;drugi) throw std::domain_error("Nekorektni parametri");
    if (korak&lt;=0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; vektor_parova;
    do {
        std::pair&lt;double, double&gt; par;
        par=std::make_pair(prvi, fun(prvi));
        vektor_parova.push_back(par);
        prvi+=korak;
    } while (prvi&lt;=drugi);
    return LinearnaInterpolacija(vektor_parova);
}

int main ()
{
    int opcija;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; opcija;
    if (opcija==1) {
        int n;
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; n;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; vektor_parova;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for (int i=0; i&lt;n; i++) {
            double prvi, drugi;
            std::cin &gt;&gt; prvi &gt;&gt; drugi;
            std::pair&lt;double, double&gt; par;
            par=std::make_pair(prvi, drugi);
            vektor_parova.push_back(par);
        }
        try {
            auto funkcija(LinearnaInterpolacija(vektor_parova));
        }
        catch(std::domain_error domenski) {
            std::cout &lt;&lt; domenski.what();
            return 1;
        }
        double argument;
        while (std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ") {
            std::cin &gt;&gt; argument;
            if (!std::cin) {
                std::cin.clear();
                std::cin.ignore(10000, '\n');
                break;
            }
            try {
                auto rezultat(LinearnaInterpolacija(vektor_parova)(argument));
                std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; rezultat;
            }
            catch(std::domain_error domenski) {
                std::cout &lt;&lt; domenski.what();
            }
            catch(std::range_error rangovski) {
                std::cout &lt;&lt; rangovski.what();
            }
            std::cout &lt;&lt; std::endl;
        }
    }
    else if (opcija==2) {
        double prvi, drugi, korak;
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        std::cin &gt;&gt; prvi &gt;&gt; drugi &gt;&gt; korak;
        try {
            auto druga(LinearnaInterpolacija([](double x) { return x*x+std::sin(x); }, prvi, drugi, korak));
        }
        catch(std::domain_error domenski) {
            std::cout &lt;&lt; domenski.what();
            return 2;
        }
        double argument;
        while (std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ") {
            std::cin &gt;&gt; argument;
            if (!std::cin) {
                std::cin.clear();
                std::cin.ignore(10000, '\n');
                break;
            }
            try {
                auto rezultat_prvi([](double x) { return x*x+std::sin(x); }(argument));
                auto rezultat_drugi(LinearnaInterpolacija([](double x) { return x*x+std::sin(x); }, prvi, drugi, korak)(argument));
                std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; rezultat_prvi;
                std::cout &lt;&lt; " ";
                std::cout &lt;&lt; "fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; rezultat_drugi;
            }
            catch(std::domain_error domenski) {
                std::cout &lt;&lt; domenski.what();
            }
            catch(std::range_error rangovski) {
                std::cout &lt;&lt; rangovski.what();
            }
            std::cout &lt;&lt; std::endl;
</font>        }
    }
	return 0;
}
</pre>
</body>
</html>
