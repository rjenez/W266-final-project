<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1044.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1616.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;math.h&gt;



<a name="0"></a><font color="#FF0000"><a href="match12-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

std::function &lt;double (double)&gt; LinearnaInterpolacija (std::vector&lt;std::pair &lt;double, double&gt;&gt; cvorovi)
{
          try 
        {
        for (int i=0; i&lt;cvorovi.size(); i++)
        {
            for (int j=i+1; j&lt;cvorovi.size(); j++)
            {
                if (cvorovi[i].first==cvorovi[j].first) throw std::domain_error ("Neispravni cvorovi");
            }
        }
        }
                    catch (std::domain_error)
            {
                std::cout&lt;&lt;"Neispravni cvorovi";
            }

    
     for (int i=0; i&lt;cvorovi.size(); i++)
    {
        for (int j=i+1; j&lt;cvorovi.size(); j++)
        {
            if (cvorovi[i]&gt;cvorovi[j]) cvorovi[i].swap (cvorovi[j]);
        }
    }
    
    return ( [cvorovi] (double x) 
    {
        

        if (x&lt;cvorovi[0].first || x&gt;cvorovi[cvorovi.size()-1].first) throw std::range_error ("Argument izvan opsega");
        
        
        if (x==cvorovi[cvorovi.size()-1].first) return cvorovi[cvorovi.size()-1].second;
        int index;
        for (int i=0; i&lt;cvorovi.size(); i++)
        {
            if (cvorovi[i].first&lt;=x &amp;&amp; cvorovi[i+1].first&gt;x)  index=i;
        }
        
        
        double rezultat=cvorovi[index].second+ ((cvorovi[index+1].second-cvorovi[index].second)/(cvorovi[index+1].first-cvorovi[index].first))*(x-cvorovi[index].first);
        return rezultat;
        
    });
    
}


std::function &lt;double (double)&gt; LinearnaInterpolacija (std::function&lt;double(double)&gt; f, double x_min, double x_max, double dx)

{
    std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi ;
    if (x_min&gt;x_max) throw std::domain_error ("Nekorektni parametri");
    
    double y= f(x_min);
    std::pair&lt;double, double&gt; novi;
    novi= std::make_pair (x_min, y);
    cvorovi.push_back(novi);

    double x_uk=x_min+dx;
    while ( x_uk&lt;x_max )
    {
        double y= f(x_uk);
        std::pair&lt;double, double&gt; novi;
        novi= std::make_pair (x_uk, y);
        cvorovi.push_back(novi);
        x_uk+=dx;
    }
    y= f(x_max);
    novi= std::make_pair (x_max, y);
    cvorovi.push_back(novi);
    

        for (int i=0; i&lt;cvorovi.size(); i++)
        {
            for (int j=i+1; j&lt;cvorovi.size(); j++)
            {
                if (cvorovi[i].first==cvorovi[j].first) throw std::domain_error ("Neispravni cvorovi");
            }
        }

    
     for (int i=0; i&lt;cvorovi.size(); i++)
    {
        for (int j=i+1; j&lt;cvorovi.size(); j++)
        {
            if (cvorovi[i]&gt;cvorovi[j]) cvorovi[i].swap (cvorovi[j]);
        }
    }
    
    return ( [cvorovi] (double x) 
    {
        

            if (x&lt;cvorovi[0].first || x&gt;cvorovi[cvorovi.size()-1].first) throw std::range_error ("Argument izvan opsega");
            

        
        if (x==cvorovi[cvorovi.size()-1].first) return cvorovi[cvorovi.size()-1].second;
        int index;
        for (int i=0; i&lt;cvorovi.size(); i++)
        {
            if (cvorovi[i].first&lt;=x &amp;&amp; cvorovi[i+1].first&gt;x)  index=i;
        }
        
        
        double rezultat=cvorovi[index].second+ ((cvorovi[index+1].second-cvorovi[index].second)/(cvorovi[index+1].first-cvorovi[index].first))*(x-cvorovi[index].first);
        return rezultat;
        
    });

}

double funkcija (double x)
{ 
    double y=x*x+sin(x);
    return y;
}

int main ()
{
    int opcija;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;opcija;
    
    if (opcija==1)
    {   
        std::vector&lt;std::pair &lt;double, double&gt;&gt; cvorovi;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int broj;
        std::cin&gt;&gt;broj;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        double x,y;
        int i=0;
        while (i&lt;broj)
        {
            std::cin.clear();
            std::cin&gt;&gt;x&gt;&gt;y;
           // std::cout&lt;&lt;std::endl;
            cvorovi.push_back(std::make_pair(x,y));
            i++;
        }
try{
        while (std::cin)
        {
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            double argument;
            std::cin.clear();
            std::cin&gt;&gt;argument;   
            if (!std::cin) break;

                std::function&lt;double(double)&gt; f= LinearnaInterpolacija(cvorovi);
                double rez=f(argument);
                std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;rez&lt;&lt;std::endl;

        }
    
            }catch (std::domain_error)
            {
                std::cout&lt;&lt;"Neispravni cvorovi";
            }
            catch (std::range_error)
            {
                std::cout&lt;&lt;"Argument izvan opsega";
            } 
}
    
    
    if (opcija==2)
    {
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        int p,k;
        double korak;
      
        std::cin.clear();
        std::cin&gt;&gt;p&gt;&gt;k&gt;&gt;korak;
       
        for (; ;)
        {
         
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            double argument;
            std::cin.clear();
            std::cin&gt;&gt;argument;   
            if (!std::cin) break;
        try 
             {
                std::function&lt;double(double)&gt; f= LinearnaInterpolacija (funkcija, p, k, korak);
                double rez=f(argument);
                std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;funkcija(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;rez&lt;&lt;std::endl;
            }
            catch (std::domain_error const &amp;x)
            {
                std::cout&lt;&lt;&amp;x; 
            }  
            catch (std::range_error)
            {
                std::cout&lt;&lt;"Argument izvan opsega";
            } 
        }
            
        

    }
    
	return 0;
</font>}
</pre>
</body>
</html>
