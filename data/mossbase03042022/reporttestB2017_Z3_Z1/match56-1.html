<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student7888.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student4882.cpp<p></p><pre>
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;deque&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;

<a name="0"></a><font color="#FF0000"><a href="match56-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

double f (double x) {
	return std::sin(x)+x*x;
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (std::vector&lt;std::pair&lt;double, double&gt;&gt; v) {
	const double eps=pow(10, -10);
	int n=v.size();
	for (int i=0; i&lt;n; i++) {
		for (int j=i+1; j&lt;n; j++) {
			if (std::fabs(v.at(i).first-v.at(j).first)&lt;eps*(std::fabs(v.at(i).first)+std::fabs(v.at(j).first))) {
				throw std::domain_error("Neispravni cvorovi");
			}
		}
	}
	std::sort(v.begin(), v.end());
	return  [v] (double t) {
		if (t&lt;v.at(0).first or t&gt;v.at(v.size()-1).first) throw std::range_error("Argument izvan opsega");
		for (int i=0; i&lt;v.size(); i++) {
			if (t==v.at(i).first) return v.at(i).second;
		}
		auto it=std::lower_bound(v.begin(), v.end(), std::make_pair(t, 0), [] (std::pair&lt;double, double&gt; jedan, std::pair&lt;double, double&gt; dva) {return jedan.first&lt;=dva.first;});
		int index=0;
		for (int i=0; i&lt;v.size(); i++) {
			if (*it==v.at(i)) index=i-1;
		}
		return v.at(index).second+(((v.at(index+1).second-v.at(index).second)/(v.at(index+1).first-v.at(index).first))*(t-v.at(index).first));
	};
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (std::function&lt;double(double)&gt; f, double xmin, double xmax, double dx) {
	if (xmin&gt;xmax or dx&lt;=0) throw std::domain_error("Nekorektni parametri");
	std::vector&lt;std::pair&lt;double, double&gt;&gt; p;
	auto temp=xmin;
	int brojac(0);
	while (temp&lt;xmax) {
		brojac++;
		p.resize(brojac);
		p.at(brojac-1).first=temp;
		p.at(brojac-1).second=f(temp);
		temp+=dx;
	}
	return LinearnaInterpolacija(p);
}

int main ()
{
	try {
		const double eps=pow(10, -10);
	    int opcija(0);
    	std::vector&lt;std::pair&lt;double, double&gt;&gt; v (0);
	    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    	std::cin &gt;&gt; opcija;
		if (opcija==1) {
		    int n;
	    	std::cout &lt;&lt; "Unesite broj cvorova: ";
		    std::cin &gt;&gt; n;
		    v.resize(n);
	    	std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
		    double k, p;
		    for (int i=0; i&lt;n; i++) {
	    	    std::cin &gt;&gt; k;
	        	std::cin &gt;&gt; p;
		        v.at(i).first=k;
		        v.at(i).second=p;
	    	}
	    	std::sort(v.begin(), v.end());
			double t;
		    while (1) {
		    	for (int i=0; i&lt;v.size(); i++) {
		    		for (int j=i+1; j&lt;v.size(); j++) {
		    			if (std::fabs(v.at(i).first-v.at(j).first)&lt;eps*(std::fabs(v.at(i).first)+std::fabs(v.at(j).first))) {
		    				throw std::domain_error("Neispravni cvorovi");
		    			}
		    		}
		    	}
	    	    std::cout &lt;&lt; "Unesite argument (ili " &lt;&lt; '"' &lt;&lt; "kraj" &lt;&lt; '"' &lt;&lt; " za kraj): ";
	        	std::cin &gt;&gt; t;
	        	if (!std::cin) break;
				try {
	        		std::cout &lt;&lt; "f(" &lt;&lt; t &lt;&lt; ") = " &lt;&lt; LinearnaInterpolacija(v)(t) &lt;&lt; std::endl;
				}
				catch (std::range_error izuzetak) {
					std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
				}
		    }
		}
		if (opcija==2) {
			double xmin, xmax, dx;
			std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
			std::cin &gt;&gt; xmin &gt;&gt; xmax &gt;&gt; dx;
			double t;
			while (1) {
				if (xmin&gt;xmax or dx&lt;=0) throw std::domain_error("Nekorektni parametri");
				std::cout &lt;&lt; "Unesite argument (ili " &lt;&lt; '"' &lt;&lt; "kraj" &lt;&lt; '"' &lt;&lt; " za kraj): ";
				std::cin &gt;&gt; t;
				if (!std::cin) break;
				try {
					std::cout &lt;&lt; "f(" &lt;&lt; t &lt;&lt; ") = " &lt;&lt; f(t) &lt;&lt; " fapprox(" &lt;&lt; t &lt;&lt; ") = " &lt;&lt;  LinearnaInterpolacija(f, xmin, xmax, dx)(t) &lt;&lt; std::endl;
				}
				catch (std::range_error izuzetak) {
					std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>				}
			}
		}
	}
	catch (std::domain_error izuzetak1) {
		std::cout &lt;&lt; izuzetak1.what() &lt;&lt; std::endl;
	}
	return 0;
}
</pre>
</body>
</html>
