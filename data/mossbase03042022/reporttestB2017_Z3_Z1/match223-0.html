<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5939.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5939.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;

<a name="0"></a><font color="#FF0000"><a href="match223-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija (std::vector&lt;std::pair&lt;double, double&gt;&gt; v) {
    
    std::sort (v.begin(), v.end(), [](std::pair&lt;double, double&gt; p1, std::pair&lt;double, double&gt; p2) {return p1.first &lt; p2.first;});
    
    for (int i = 1; i &lt; v.size(); i++) if(v[i].first == v[i-1].first) throw std::domain_error ("Neispravni cvorovi");
    
    std::function&lt;double(double)&gt; f = [v](double x)-&gt;double {
        
        double brojnik, nazivnik;
        if (x &lt; v[0].first || x &gt; v[v.size()-1].first) throw std::range_error ("Argument izvan opsega");
        auto it = lower_bound(v.begin(), v.end(), std::pair&lt;double,double&gt;(x,0))-1;
            double rez (0);
            brojnik = ((it+1)-&gt;second - it-&gt;second)*(x-it-&gt;first);
            nazivnik = ((it+1)-&gt;first - it-&gt;first);
            rez += it-&gt;second + (brojnik/nazivnik);
            
        return rez;
    };

    return f;    
}

std::function &lt;double(double)&gt; LinearnaInterpolacija(double fun (double), double x_min, double x_max, double delta_x) {
    
    std::vector&lt;std::pair&lt;double, double&gt;&gt; vp;
    if (x_min &gt; x_max || delta_x &lt;= 0) throw std::domain_error ("Nekorektni parametri");
    while (x_min &lt;= x_max) {
        
        vp.push_back({x_min, fun(x_min)});
        x_min += delta_x;
    }
    try {
        auto f=LinearnaInterpolacija(vp);
        return f;
    }
    catch(...) {
        throw;
    }
}
int main ()
{
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opt;
    std::cin &gt;&gt; opt;
    if (opt == 1) {
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        int brojac;
        std::cin &gt;&gt; brojac;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; v (brojac);
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for (int i=0; i &lt; brojac; i++) {
            std::cin &gt;&gt; v[i].first &gt;&gt; v[i].second;
        }
    try {
        auto f(LinearnaInterpolacija(v));
        for (;;) {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double argument;
            if(!(std::cin &gt;&gt; argument)) break;
            std::string s;
            std::getline(std::cin, s);
            try {
            if (s.size() != std::count (s.begin(), s.end(), ' ')) break;
            std::cout &lt;&lt; "f("&lt;&lt;argument&lt;&lt;") = " &lt;&lt; f(argument) &lt;&lt; "\n";
            }
            catch (std::range_error r) {
                std::cout &lt;&lt; r.what();
                std::cout &lt;&lt; std::endl;
            }
        }
    }
    catch (std::domain_error izuzetak) {
        std::cout &lt;&lt; izuzetak.what();
    }
    
    }
    else if (opt == 2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double min, max, korak;
        std::cin &gt;&gt; min &gt;&gt; max &gt;&gt; korak;
        auto fun = [] (double x) {return x*x+std::sin(x);};
        try {
            auto f(LinearnaInterpolacija(fun, min, max, korak));
            for(;;) {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double argument;
                if(!(std::cin &gt;&gt; argument)) break;
                std::string s;
                std::getline (std::cin, s);
                try {
                if (s.size() != std::count (s.begin(), s.end(), ' ')) break;
                std::cout &lt;&lt; "f("&lt;&lt;argument&lt;&lt;") = " &lt;&lt; fun(argument) &lt;&lt; " fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument)&lt;&lt;"\n";
                }
                catch (std::range_error r) {
                    std::cout &lt;&lt; r.what();
                    std::cout &lt;&lt; std::endl;
                }
            }
        }
        catch (std::domain_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what();
</font>        }
    }
    return 0;
}
</pre>
</body>
</html>
