<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student7293.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student6609.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match169-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#define eps pow(10,-10)

double funkcija (double x) { return x*x+std::sin(x); }

bool FunkcijaKriterija (std::pair&lt;double, double&gt; par1, std::pair&lt;double, double&gt; par2) {
    return (!(fabs(par1.first-par2.first)&lt;=eps*(fabs(par1.first)+fabs(par2.first))) &amp;&amp; par1.first&lt;par2.first);
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (std::vector&lt;std::pair&lt;double, double&gt;&gt; v) {
    std::sort(v.begin(), v.end(), FunkcijaKriterija);
    for (auto it1=v.begin(); it1!=v.end()-1; it1++) {
        for (auto it2=it1+1; it2!=v.end(); it2++) {
            if (fabs(it1-&gt;first-it2-&gt;first) &lt;= eps*(fabs(it1-&gt;first)+fabs(it2-&gt;first))) throw std::domain_error ("Neispravni cvorovi");
        }
    }
    return [v] (double x) {
                            auto pocetak(v.begin()), kraj(v.end()-1);
                            if (!(fabs(x-pocetak-&gt;first)&lt;=eps*(fabs(x)+fabs(pocetak-&gt;first))) &amp;&amp; (x&lt;pocetak-&gt;first || x&gt;kraj-&gt;first)) 
                                throw std::range_error ("Argument izvan opsega");
                            if (fabs(x-kraj-&gt;first) &lt;= eps*(fabs(x)+fabs(kraj-&gt;first))) return kraj-&gt;second;
                            std::pair&lt;double, double&gt; pomocna = std::make_pair (x,0.);
                            auto it = std::upper_bound(v.begin(), v.end(), pomocna, FunkcijaKriterija);
                            double x2 = it-&gt;first;  double y2 = it-&gt;second;
                            it--;
                            double x1 = it-&gt;first;  double y1 = it-&gt;second;
                            double izraz = y1 + ((y2-y1)/(x2-x1))*(x-x1);
                            return izraz;
                        };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (std::function&lt;double(double)&gt; fun, double x_min, double x_max, double delta_x) {
    if (x_min&gt;x_max || delta_x&lt;=0) throw std::domain_error ("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
    double x(x_min), korak(0);
    for (int i=0; ; i++) {
        x = x + korak;
        if (x&gt;x_max) break;
        korak = delta_x;
        double y = fun(x);
        std::pair&lt;double, double&gt; par = std::make_pair (x, y);
        v.push_back(par);
    }
    return LinearnaInterpolacija(v);
}

int main ()
{
    try {
        int opcija;
        std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        std::cin &gt;&gt; opcija;
        int br_cvorova;
        double kraj1, kraj2, korak;
        if (opcija==1) {
            std::cout &lt;&lt; "Unesite broj cvorova: ";
            std::cin &gt;&gt; br_cvorova;
            std::vector&lt;std::pair&lt;double, double&gt;&gt; vp;
            std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            for (int i=0; i&lt;br_cvorova; i++) {
                std::pair&lt;double, double&gt; temp;
                std::cin &gt;&gt; temp.first &gt;&gt; temp.second;
                vp.push_back(temp);
            }
            for(;;) {
                try {
                    auto f(LinearnaInterpolacija(vp));
                }
                catch (std::range_error izuzetak) {
                    std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
                }
                double argument;
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::cin &gt;&gt; argument;
                if (!std::cin) break;
                double vr = LinearnaInterpolacija(vp)(argument);
                std::cout &lt;&lt; "f("&lt;&lt; argument &lt;&lt; ") = " &lt;&lt; vr &lt;&lt; std::endl;
            }
        }
        else if (opcija==2) {
            std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
            std::cin &gt;&gt; kraj1 &gt;&gt; kraj2 &gt;&gt; korak;
            for (;;) {
                double argument;
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::cin &gt;&gt; argument;
                if (!std::cin) break;
                try {
                    auto f = LinearnaInterpolacija(funkcija, kraj1, kraj2, korak)(argument);
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; funkcija(argument) &lt;&lt; " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; f &lt;&lt; std::endl;
                }
                catch (std::range_error izuzetak) {
                    std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>                }
            }
        }
    }
    catch (std::domain_error izuzetak) {
        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    }
	return 0;
}
</pre>
</body>
</html>
