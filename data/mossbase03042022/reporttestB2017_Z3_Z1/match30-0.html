<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5829.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5829.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match30-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
using std::function;
using std::vector;
using std::cout;
using std::cin;
using std::pair;
const double EPS=1e-5;
typedef pair&lt;double,double&gt; PAR;

bool VeciManji(PAR prvi, PAR drugi)
{
    if(prvi.first-drugi.first&lt;EPS &amp;&amp; prvi.first-drugi.first&gt;-EPS) throw std::domain_error("Neispravni cvorovi");
    return prvi.first&lt;drugi.first;
}

double fun(double x)
{
    return x*x+std::sin(x);
}

function&lt;double(double)&gt; LinearnaInterpolacija(vector&lt;PAR&gt; &amp;v)
{
    std::sort(v.begin(),v.end(),VeciManji);
    return [&amp;v](double a) {
        double xi(0),xi1(0),yi(0),yi1(0);
        auto it(std::lower_bound(v.begin(),v.end(),a,[](std::pair&lt;double,double&gt; par,double a) {
            return (par.first&lt;a || (par.first-a&lt;EPS &amp;&amp; par.first-a&gt;EPS));
        }));
        if(it==v.end()) throw std::range_error("Argument izvan opsega");
        else if(it==v.begin() &amp;&amp; a&lt;it-&gt;first) throw std::range_error("Argument izvan opsega");
        else if(it-&gt;first-a&lt;EPS &amp;&amp; it-&gt;first-a&gt;EPS) {
            auto pom(it);
            pom++;
            if(pom==v.end()) return it-&gt;second;
            xi=it-&gt;first;
            yi=it-&gt;second;
            xi1=pom-&gt;first;
            yi1=pom-&gt;second;
            return yi+((yi1-yi)/(xi1-xi))*(a-xi);
        }
        auto pom(it);
        it--;
        xi=it-&gt;first;
        yi=it-&gt;second;
        xi1=pom-&gt;first;
        yi1=pom-&gt;second;
        return yi+((yi1-yi)/(xi1-xi))*(a-xi);
    };
}

function&lt;double(double)&gt; LinearnaInterpolacija(function&lt;double(double)&gt; fun,double xmin,double xmax,double dx)
{
    if(xmin&gt;xmax || dx&lt;=0) throw std::domain_error("Nekorektni parametri");
    return [fun,xmin,xmax,dx](double a) {
        vector&lt;double&gt; v;
        double min=xmin;
        while(min&lt;=xmax) {
            v.push_back(min);
            min+=dx;
        }
        auto it(std::lower_bound(v.begin(),v.end(),a));
        double xi(0),xi1(0),yi(0),yi1(0);
        if(it==v.end()) throw std::range_error("Argument izvan opsega");
        else if(it==v.begin() &amp;&amp; a&lt;*it) throw std::range_error("Argument izvan opsega");
        else if(*it-a&lt;EPS &amp;&amp; *it-a&gt;-EPS) {
            auto pom(it);
            pom++;
            if(pom==v.end()) return fun(*it);
            xi=*it;
            yi=fun(*it);
            xi1=*pom;
            yi1=fun(*pom);
            return yi+((yi1-yi)/(xi1-xi))*(a-xi);
        }
        auto pom(it);
        it--;
        xi=*it;
        yi=fun(*it);
        xi1=*pom;
        yi1=fun(*pom);
        return yi+((yi1-yi)/(xi1-xi))*(a-xi);
    };
}

int main ()
{
    int opcija(0);
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    cin&gt;&gt;opcija;
    try {
        char a('"');
        if(opcija==1) {
            int br_cvorova(0);
            cout&lt;&lt;"Unesite broj cvorova: ";
            cin&gt;&gt;br_cvorova;
            vector&lt;pair&lt;double,double&gt;&gt; vec(br_cvorova);
            cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            for(int i(0); i&lt;br_cvorova; i++) {
                cin&gt;&gt;vec[i].first;
                cin&gt;&gt;vec[i].second;
            }
            double arg(0);
            auto f(LinearnaInterpolacija(vec));
            for(;;) {
                cout&lt;&lt;"Unesite argument (ili "&lt;&lt;a&lt;&lt;"kraj"&lt;&lt;a&lt;&lt;" za kraj): ";
                cin&gt;&gt;arg;
                if(!cin) {
                    cin.clear();
                    cin.ignore(1000,'\n');
                    break;
                }
                try {
                    cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
                } catch(std::domain_error izuzetak) {
                    cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                } catch(std::range_error izuzetak) {
                    cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                }
            }

        }
        if(opcija==2) {
            double xmin(0),xmax(0),dx(0);
            cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;dx;
            double arg(0);
            auto f(LinearnaInterpolacija(fun,xmin,xmax,dx));
            for(;;) {
                cout&lt;&lt;"Unesite argument (ili "&lt;&lt;a&lt;&lt;"kraj"&lt;&lt;a&lt;&lt;" za kraj): ";
                cin&gt;&gt;arg;
                if(!cin) {
                    cin.clear();
                    cin.ignore(1000,'\n');
                    break;
                }
                try {
                    cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;arg*arg+std::sin(arg)&lt;&lt;" fapprox("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
                } catch(std::domain_error izuzetak) {
                    cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                } catch(std::range_error izuzetak) {
                    cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                }
            }
        }
    } catch(std::domain_error izuzetak) {
        cout&lt;&lt;izuzetak.what();
    } catch(std::range_error izuzetak) {
        cout&lt;&lt;izuzetak.what();
</font>    }

    return 0;
}
</pre>
</body>
</html>
