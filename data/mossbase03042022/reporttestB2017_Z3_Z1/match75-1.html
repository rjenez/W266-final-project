<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student7980.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student4155.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match75-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;

typedef std::vector&lt;std::pair&lt;double, double&gt;&gt; Parovi;

std::function&lt;double(double)&gt; LinearnaInterpolacija(Parovi v)
{
    for(int i=0; i&lt;v.size(); i++)
    {
        for(int j=i+1; j&lt;v.size(); j++)if(v[i].first==v[j].first)throw std::domain_error("Neispravni cvorovi");
    }
    std::function&lt;double(double)&gt; f = [v](double x) 
    { 
        if(x&lt;v[0].first &amp;&amp; x&gt;v[v.size()-1].first)throw std::range_error("Argument izvan opsega");
        double x1(0), y1(0), x2(0), y2(0);
        auto it1(&amp;v[0]);
        auto it2(&amp;v[1]);
       // if(v.size()==1)exit(1);
        if(x==v[v.size()-1].first)return v[v.size()-1].second;
        while(!std::binary_search(&amp;v[0].first, &amp;v[v.size()].first, x))
        {
            if(x&gt;=it1-&gt;first){x1=it1-&gt;first;y1=it1-&gt;second;}
            else it1++;
            if(x&lt;it2-&gt;first){x2=it2-&gt;first;y2=it2-&gt;second;}
            else {it1++; it2++;}
            if(x&gt;=x1 &amp;&amp; x&lt;x2)break;
        }
        return ((y1+(y2-y1)/(x2-x1)*(x-x1)));
    };
    return [f](double x){return f(x);};
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(double (*fun)(double), double start, double stop, double step)
{
    if(start&gt;stop || step&lt;=0)throw std::domain_error("Nekorektni parametri");
    Parovi v;
    for(double i=start; i&lt;stop; i+=step)v.push_back(std::make_pair(i,fun(i)));
    auto f(LinearnaInterpolacija(v));
    return [f](double x) {return f(x);};
}

int main ()
{
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija(0);
    std::cin &gt;&gt; opcija;
    Parovi v;
    if(opcija==1)
    {
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        int n;
        std::cin &gt;&gt; n;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;n; i++)
        {
            double x, y;
            std::cin &gt;&gt; x &gt;&gt; y;
            v.push_back(std::make_pair(x,y));
        }
        try
        {
            auto f(LinearnaInterpolacija(v));
        }
        catch(std::domain_error izuzetak)
        {
            std::cout &lt;&lt; izuzetak.what();
            return 0;
        }
        std::cin.clear();
        std::cin.ignore(10000,'\n');
        while(1)
        {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            std::string s;
            std::getline(std::cin,s);
            if(s=="kraj")break;
            try
            {
                if(!std::stod(s))
                throw std::invalid_argument("");
            }
            catch(std::invalid_argument izuzetak)
            {
                return 0;
            }
            auto f(LinearnaInterpolacija(v));
            try
            {
                f(std::stod(s));
            }
            catch(std::range_error izuzetak)
            {
                std::cout &lt;&lt; izuzetak.what();
                return 0;
            }
            std::cout &lt;&lt; "f(" &lt;&lt;std::stod(s) &lt;&lt;") = ";
            std::cout &lt;&lt; f(std::stod(s)) &lt;&lt; std::endl;
        }
    }  
    else if(opcija==2)
    {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double min, max, korak;
        try
        {
            std::cin &gt;&gt; min &gt;&gt; max;
            auto f(LinearnaInterpolacija([](double x){return x*x+sin(x);}, min, max, 0.1));
            std::cin &gt;&gt; korak;
            f=LinearnaInterpolacija([](double x){return x*x+sin(x);}, min, max, korak);
        }
        catch(std::domain_error izuzetak)
        {
            std::cout &lt;&lt; izuzetak.what();
            return 0;
        }
        std::cin.clear();
        std::cin.ignore(10000,'\n');
        while(1)
        {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            std::string s;
            std::getline(std::cin,s);
            if(s=="kraj")break;
            try
            {
                if(!std::stod(s))
                throw std::invalid_argument("");
            }
            catch(std::invalid_argument izuzetak)
            {
                return 0;
            }
            if(std::stod(s)&gt;max)                                               
            {
                std::cout &lt;&lt; "Argument izvan opsega " &lt;&lt; std::endl;
                continue;
            }
            std::cout &lt;&lt; "f(" &lt;&lt;std::stod(s) &lt;&lt;") = ";
            std::cout &lt;&lt; std::stod(s)*std::stod(s) + sin(std::stod(s));
            std::cout &lt;&lt; " fapprox(" &lt;&lt;std::stod(s) &lt;&lt;") = ";
            auto f(LinearnaInterpolacija([](double x){return x*x+sin(x);}, min, max, korak));
            std::cout &lt;&lt; f(std::stod(s)) &lt;&lt; std::endl;
</font>        }
    }
    return 0;
}
</pre>
</body>
</html>
