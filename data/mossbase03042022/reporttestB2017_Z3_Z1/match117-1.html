<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1916.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student4903.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match117-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;


double Aproksimacija(double x, std::pair&lt;double, double&gt; a, std::pair&lt;double, double&gt; b)
{
    double rezultat;
    rezultat=a.second+(b.second-a.second)*(x-a.first)/(b.first-a.first);
    return rezultat;
}


std::function &lt;double(double)&gt; LinearnaInterpolacija(std::function &lt;double(double)&gt; f, double x_min, double x_max, double dx)
{
    if(x_min&gt;x_max || dx&lt;0) throw std::domain_error("Nekorektni argumenti");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi;
    cvorovi.push_back(std::make_pair(x_min, f(x_min)));
    double pom=x_min+dx;
    while(pom&lt;x_max) {
        cvorovi.push_back(std::make_pair(pom, f(pom)));
        pom+=dx;
    }
    cvorovi.push_back(std::make_pair(x_max, f(x_max)));
    std::function &lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi);
    return LinearnaInterpolacija(cvorovi);
}

std::function &lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi)
{
    std::sort(cvorovi.begin(), cvorovi.end(),
    [](std::pair&lt;double, double&gt; a, std::pair&lt;double, double&gt; b) {
        if(!(std::fabs(a.first-b.first)&gt;0)) throw std::domain_error("Neispravni cvorovi");
        return a&lt;b;
    });
    return [cvorovi](double x) {
        if(x&lt;cvorovi.at(0).first || x&gt;cvorovi.at(cvorovi.size()-1).first) throw std::range_error("Argument izvan opsega");
        if(!(std::fabs(x-cvorovi.at(cvorovi.size()-1).first)&gt;0)) return cvorovi.at(cvorovi.size()-1).second;
        double rezultat;
        auto p(cvorovi.end());
        p--;
        auto gornja=std::upper_bound(cvorovi.begin(), p, std::make_pair(x, 0.0));
        auto donja(gornja);
        donja--;
        rezultat=Aproksimacija(x, *donja, *gornja);
        return rezultat;
    };
}

int main ()
{
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int n;
    std::cin &gt;&gt; n;
    if(n==1) {
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        int duzina;
        while(!(std::cin &gt;&gt; duzina), !(duzina&gt;=0));
        try {
            std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi(duzina);
            std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            for(int i(0); i&lt;duzina; i++) {
                std::cin &gt;&gt; cvorovi.at(i).first &gt;&gt; cvorovi.at(i).second;
                std::cin.ignore(2, '\n');
            }
            auto funkcija(LinearnaInterpolacija(cvorovi));
            while(true) {
                std::printf("Unesite argument (ili \"kraj\" za kraj): ");
                std::string kraj("");
                double argument;
                if(!(std::cin &gt;&gt; argument)) break;
                try {
                    double rezultat(funkcija(argument));
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt;  rezultat &lt;&lt; std::endl;
                } catch(std::domain_error p) {
                    throw;
                } catch(std::range_error p) {
                    std::cout &lt;&lt; p.what() &lt;&lt; std::endl;
                }
            }
        } catch(std::domain_error p) {
            std::cout &lt;&lt; p.what() &lt;&lt; std::endl;
        } catch(...) {
            std::cout &lt;&lt; "Nedovoljno memorije!" &lt;&lt; std::endl;
        }
    } else if(n==2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double x_min, x_max, korak;
        std::cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; korak;
        std::cin.ignore(2, '\n');
        try {
            auto f([](double x) {
                return std::pow(x, 2)+std::sin(x);
            });
            auto funkcija(LinearnaInterpolacija(f, x_min, x_max, korak));
            while(true) {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::string kraj("");
                double argument;
                if(!(std::cin &gt;&gt; argument)) break;
                try {
                    double rezultat(funkcija(argument));
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; f(argument) &lt;&lt;
                              " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; rezultat &lt;&lt; std::endl;
                } catch(std::domain_error) {
                    throw;
                } catch(std::range_error p) {
                    std::cout &lt;&lt; p.what() &lt;&lt; std::endl;
                }
            }
        } catch(std::domain_error p) {
            std::cout &lt;&lt; p.what() &lt;&lt; std::endl;
</font>        }
    }
    return 0;
}
</pre>
</body>
</html>
