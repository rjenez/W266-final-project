<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student9141.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;

<a name="1"></a><font color="#00FF00"><a href="match926-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; a){
    // prvo vektor sortiram po x koordinatama u rastucem poretku
    std::sort(a.begin(), a.end(), [](std::pair&lt;double, double&gt; x1, std::pair&lt;double, double&gt; x2){return x1.first&lt;x2.first;});
</font><a name="0"></a><font color="#FF0000"><a href="match926-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

    // ako ima dva para s istim x koordinatama baca izuzetak
    for(int i=0; i&lt;a.size(); i++){
        for(int j=i+1; j&lt;a.size(); j++){
            if((a[i]).first==(a[j]).first)throw std::domain_error("Neispravni cvorovi");
        }   
    }
    return [a](double x){ 
        if (a.size()==0 || x&lt;a[0].first || x&gt;a[a.size()-1].first)throw std::range_error("Argument izvan opsega");
</font>        double x_i, y_i, x_ip1, y_ip1;        
        //auto p1 (lower_bound(a.begin(), a.end(), std::make_pair(x,x)));
        auto p2 (upper_bound(a.begin(), a.end(), std::make_pair(x,0.)));
        //x_i=(*(--p1)).first; // vidjet ovo ovde dal ako je *p1=x da ostane to a ne da je --p1
        //y_i=(*p1).second;
        auto p1(p2);
        p1--;
        x_i=(*p1).first;
        y_i=(*p1).second;
        x_ip1=p2-&gt;first;
        y_ip1=(*p2).second;
        //std::cout &lt;&lt; "___ x_i=" &lt;&lt; x_i &lt;&lt; "   aa y_i=" &lt;&lt; y_i &lt;&lt; "   aaa x_ip1=" &lt;&lt; x_ip1 &lt;&lt; "    aa y_ip1=" &lt;&lt; y_ip1 &lt;&lt; "\n";
        return (y_i + ( (y_ip1-y_i)*(x-x_i)/(x_ip1-x_i) ));  
    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (std::function&lt;double(double)&gt; f, double x_min, double x_max, double delta_x){
    if(x_min&gt;x_max || delta_x&lt;=0)throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; a;
    int pomocna(0);
    while(x_min+delta_x*pomocna&lt;=x_max){
        //std::cout &lt;&lt; "\n1) " &lt;&lt; f(double(x_min+delta_x*pomocna)) &lt;&lt; " __pomocna=" &lt;&lt; pomocna &lt;&lt; " F(100)=" &lt;&lt; f(100) &lt;&lt; f(42) &lt;&lt; "\n";
        a.push_back(std::make_pair(x_min+delta_x*pomocna, f(x_min+delta_x*pomocna)));
        pomocna++;
    }
    
    /*std::cout &lt;&lt; "\nCvorovi: \n";
    for(int i=0; i&lt;a.size(); i++){
        std::cout &lt;&lt; a[i].first &lt;&lt; "  " &lt;&lt; a[i].second &lt;&lt; "\n";
    }*/
    return LinearnaInterpolacija(a);
    
    /*return [a](double x){
        if(a.size()==0 || x&lt;a[0].first || x&gt;a[a.size()-1].first)throw std::range_error("Argument izvan opsega");
        double x_i, y_i, x_ip1, y_ip1;
        auto p2(upper_bound(a.begin(), a.end(), std::make_pair(x,0.)));
        auto p1(p2);
        p1--;
        x_i=(*p1).first;
        y_i=(*p1).second;
        x_ip1=p2-&gt;first;
        y_ip1=(*p2).second;
        std::cout &lt;&lt; "\nx_i=" &lt;&lt; x_i &lt;&lt; " y_i=" &lt;&lt; y_i &lt;&lt; " x_ip1=" &lt;&lt; x_ip1 &lt;&lt; " y_ip1=" &lt;&lt; y_ip1 &lt;&lt; "\n";
        return (y_i + ( (y_ip1-y_i)*(x-x_i)/(x_ip1-x_i) ));
    };*/
}

int main ()
{
    int opcija, broj_cvorova;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; opcija;
    if(opcija==1){
<a name="2"></a><font color="#0000FF"><a href="match926-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; broj_cvorova;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi;
</font>        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;broj_cvorova; i++){
            double x,y;
            std::cin &gt;&gt; x &gt;&gt; y;
            cvorovi.push_back(std::make_pair(x,y));
        }
        
        try{
            auto f(LinearnaInterpolacija(cvorovi));
        
            std::cin.ignore(10000, '\n');
            for(;;){
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::string unos;
                std::getline(std::cin, unos);
                if(unos=="kraj")return 0;
                double argument(std::stod(unos));
            
                try{
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; f(argument) &lt;&lt; "\n";
                }
                catch(std::range_error &amp;e){
                    std::cout &lt;&lt; e.what() &lt;&lt; "\n";
                }
            }
        }
        catch(std::domain_error &amp;e){
            std::cout &lt;&lt; e.what();
            return 0;
        }
    }

    else if(opcija==2){
<a name="3"></a><font color="#00FFFF"><a href="match926-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        double x_min, x_max, delta_x;
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        std::cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; delta_x;
        
        try{
            //auto f(LinearnaInterpolacija([](double){return x*x+std::sin(x); };) );
            
            std::cin.ignore(10000, '\n');
</font>            for(;;){
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::string unos;
                std::getline(std::cin, unos);
                if(unos=="kraj")return 0;
                double argument(std::stod(unos));
                auto f(LinearnaInterpolacija( [](double x){ 
                    return double(x*x+std::sin(x));
                    }
                    , x_min, x_max, delta_x) );
            
                try{
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; argument*argument+std::sin(argument) &lt;&lt; " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; f(argument) &lt;&lt; "\n"; 
                }
                catch(std::range_error &amp;e){
                    std::cout &lt;&lt; e.what() &lt;&lt; "\n";
                }
            }
        }
        catch(std::domain_error &amp;e){
            std::cout &lt;&lt; e.what();
            return 0;        
        }
    }
    
	return 0;
}
</pre>
</body>
</html>
