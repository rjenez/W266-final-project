<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8100.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student9613.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

<a name="0"></a><font color="#FF0000"><a href="match288-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using namespace std;

function&lt;double(double)&gt; LinearnaInterpolacija(vector&lt;pair&lt;double, double&gt;&gt; v)
{
    if(v.size()==0)
        return [](double x) {
        throw range_error("Argument izvan opsega");
        return x;
    };

    sort(v.begin(), v.end());
    for(auto it=v.begin(); it!=v.end(); it++)
        for(auto it2=it+1; it2!=v.end(); it2++)
            if(it-&gt;first==it2-&gt;first)
                throw domain_error("Neispravni cvorovi");


    return [=](double x) {
        if(x&lt;v.begin()-&gt;first || x&gt;(v.end()-1)-&gt;first) throw range_error("Argument izvan opsega");
        if(v.size()==1) return v.begin()-&gt;second;
        if(x==v.begin()-&gt;first) return v.begin()-&gt;second;
        auto it=lower_bound(v.begin(), v.end(), pair&lt;double, double&gt;(x, 0));
        auto it2=it;
        if(it!=v.begin())
            it2--;
        return (it2-&gt;second+((it-&gt;second-it2-&gt;second)/(it-&gt;first-it2-&gt;first))*(x-it2-&gt;first));
    };
}

function&lt;double(double)&gt; LinearnaInterpolacija(function&lt;double(double)&gt; f, double xmin, double xmax, double deltax)
{
    if(xmin&gt;xmax || deltax&lt;=0)
        throw domain_error("Nekorektni parametri");

    vector&lt;pair&lt;double, double&gt;&gt; v;
    while(xmin&lt;=xmax) {
        auto p=make_pair(xmin, f(xmin));
        v.push_back(p);
        xmin=xmin+deltax;
    }
    auto fun=LinearnaInterpolacija(v);
    return fun;
}

int main ()
{
    int broj;

    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    cin&gt;&gt;broj;
    if(broj==1) {
        vector&lt;pair&lt;double, double&gt;&gt; v;
        int broj_cvorova;
        cout&lt;&lt;"Unesite broj cvorova: ";
        cin&gt;&gt;broj_cvorova;
        cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;broj_cvorova; i++) {
            double a, b;
            cin&gt;&gt;a&gt;&gt;b;
            v.push_back(make_pair(a, b));
        }
        double argument;
        try {
            auto f=LinearnaInterpolacija(v);
            cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            while(cin&gt;&gt;argument) {
                try {
                    f(argument);
                } catch(range_error e) {
                    cout&lt;&lt;e.what();
                    cout&lt;&lt;"\nUnesite argument (ili \"kraj\" za kraj): ";
                    continue;
                }
                cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument);
                cout&lt;&lt;"\nUnesite argument (ili \"kraj\" za kraj): ";
            }
        } catch(domain_error e) {
            cout&lt;&lt;e.what();
            return 2;
        }
    } else if(broj==2) {
        double xmin, xmax, deltax, noviarg;
        cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;deltax;
        try {
            auto f=LinearnaInterpolacija([](double x) {
                return x*x+sin(x);
            }, xmin, xmax, deltax);
            cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            while(cin&gt;&gt;noviarg) {
                try {
                    f(noviarg);
                } catch(range_error &amp;e) {
                    cout&lt;&lt;e.what();
                    cout&lt;&lt;"\nUnesite argument (ili \"kraj\" za kraj): ";
                    continue;
                }
                cout&lt;&lt;"f("&lt;&lt;noviarg&lt;&lt;") = "&lt;&lt;noviarg*noviarg+sin(noviarg)&lt;&lt;" fapprox("&lt;&lt;noviarg&lt;&lt;") = "&lt;&lt;f(noviarg);
                cout&lt;&lt;"\nUnesite argument (ili \"kraj\" za kraj): ";
            }
        } catch(domain_error &amp;e) {
            cout&lt;&lt;e.what();
</font>            return 1;
        }
    }
    return 0;
}
</pre>
</body>
</html>
