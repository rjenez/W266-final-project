<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1793.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student3671.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match582-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;cmath&gt;
using namespace std;

bool Jednaki(double a,double b)
</font>{
    return fabs(a-b)&lt;0.0000001;
}

function&lt;double(double)&gt;LinearnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt;cvorovi)
{
    if(!(is_sorted(cvorovi.begin(),cvorovi.end()))) {
        sort(cvorovi.begin(),cvorovi.end(),[] (pair&lt;double,double&gt;p1,pair&lt;double,double&gt;p2) {
            return p1.first&lt;p2.first;
        });
    }
    for(int i=0; i&lt;cvorovi.size()-1; i++) {
        if(Jednaki(cvorovi[i].first,cvorovi[i+1].first)) throw domain_error("Neispravni cvorovi");
    }
    return[=](double x)-&gt;double {
        vector&lt;pair&lt;double,double&gt;&gt;v=cvorovi;
        if(x&lt;v[0].first || x&gt;v[v.size()-1].first) {
            throw range_error("Argument izvan opsega");

        }
        vector&lt;pair&lt;double,double&gt;&gt;pomocni=cvorovi;
        vector&lt;pair&lt;double,double&gt;&gt;::iterator g_granica=upper_bound(pomocni.begin(),pomocni.end(),x,[] (double broj,const pair&lt;double, double&gt;&amp;p) {
            return broj&lt;=p.first;
        });
        vector&lt;pair&lt;double,double&gt;&gt;::iterator d_granica {(--g_granica)++};
        double brojnik(0),nazivnik(0);
        brojnik+=((g_granica-&gt;second-d_granica-&gt;second)*(x-d_granica-&gt;first));
        nazivnik+=g_granica-&gt;first-d_granica-&gt;first;
        return d_granica-&gt;second+(brojnik/nazivnik);
    };
}

<a name="0"></a><font color="#FF0000"><a href="match582-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

function&lt;double(double)&gt;LinearnaInterpolacija(function&lt;double(double)&gt;f,double x_min,double x_max,double x_delta)
{
    if(x_min&gt;x_max || x_delta&lt;=0) throw domain_error("Nekorektni parametri");
    vector&lt;pair&lt;double,double&gt;&gt;cvorovi;
    while(x_min&lt;=x_max) {
        cvorovi.push_back(make_pair(x_min,f(x_min)));
</font>        x_min+=x_delta;
    }
<a name="1"></a><font color="#00FF00"><a href="match582-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    return LinearnaInterpolacija(cvorovi);
}

int main ()
{
    int n;
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    cin&gt;&gt;n;
    if(n==1) {
        cout&lt;&lt;"Unesite broj cvorova: ";
        cin&gt;&gt;n;
        vector&lt;pair&lt;double,double&gt;&gt;cvorovi(n);
</font>        cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;n; i++) {
            int x,y;
            cin&gt;&gt;x&gt;&gt;y;
            cvorovi[i]=make_pair(x,y);
        }
        try {
            auto f(LinearnaInterpolacija(cvorovi));
        } catch(domain_error x) {
            cout&lt;&lt;x.what()&lt;&lt;endl;
            return 0;
        }
        while(cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ") {
            try {
                double x;
                cin&gt;&gt;x;
                if(!cin) {
                    cin.ignore(10000,'\n');
                    cin.clear();
                    break;
                }
<a name="4"></a><font color="#FF00FF"><a href="match582-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

                auto f=LinearnaInterpolacija(cvorovi);
                cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;endl;
            }  catch(range_error d) {
                cout&lt;&lt;d.what()&lt;&lt;endl;
</font>                continue;
            }
        }
    }
<a name="3"></a><font color="#00FFFF"><a href="match582-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    if(n==2) {
        cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double x_min,x_max,x_delta;
        cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;x_delta;
        try {
            auto k=LinearnaInterpolacija([] (double x) {
</font>                return x*x+sin(x);
            },x_min,x_max,x_delta);
        } catch(domain_error x) {
            cout&lt;&lt;x.what()&lt;&lt;endl;
            return 0;
        }
        while(cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ") {
            try {
                double x;
                cin&gt;&gt;x;
                if(!cin) {
                    cin.ignore(10000,'\n');
                    cin.clear();
                    break;
                }
                auto k=LinearnaInterpolacija([] (double x) {
                    return x*x+sin(x);
                },x_min,x_max,x_delta);
                cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;x*x+sin(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;k(x)&lt;&lt;endl;
            } catch(range_error d) {
                cout&lt;&lt;d.what()&lt;&lt;endl;
                continue;
            }
        }
    }
    return 0;
}</pre>
</body>
</html>
