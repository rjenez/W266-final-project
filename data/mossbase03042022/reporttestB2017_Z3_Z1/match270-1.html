<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student3406.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8035.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match270-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_91.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; &amp;VektorCvorova)
{

    for(int i=0; i&lt;VektorCvorova.size(); i++) {
        for(int j=i+1; j&lt;VektorCvorova.size(); j++) {
            if (VektorCvorova.at(j).first == VektorCvorova.at(i).first) throw std::domain_error("Neispravni cvorovi");
        }
    }

    std::sort(VektorCvorova.begin(),VektorCvorova.end());

    return [VektorCvorova] (double x) {
        if(VektorCvorova.begin()-&gt;first &gt; x || (--VektorCvorova.end())-&gt;first &lt; x) throw std::range_error("Argument izvan opsega");

        auto pom=--VektorCvorova.end();
        if(pom-&gt;first==x) return pom-&gt;second;

        for(auto it=VektorCvorova.begin(); it!=VektorCvorova.end(); it++) {

            auto gornja=std::lower_bound(it,VektorCvorova.end(),x, [] (const std::pair&lt;double,double&gt; &amp;par, const double v) {
                if(par.first&lt;v) return true;
                return false;
            });

            if (gornja-&gt;first &gt; x) {
                gornja--;
                if(gornja-&gt;first&lt;=x) {
                    auto donja=gornja;
                    gornja++;
                    return donja-&gt;second+((gornja-&gt;second-donja-&gt;second)/(gornja-&gt;first-donja-&gt;first))*(x-donja-&gt;first);
                    break;
                }
            }
        }
        return x;
    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(double f(double), double xmin, double xmax, double deltax)
{

    std::vector&lt;std::pair&lt;double,double&gt;&gt; NoviVektorCvorova;

    if(xmin&gt;xmax || deltax&lt;=0) throw std::domain_error("Nekorektrni parametri");

    int i(0);
    for(;;) {
        if ((xmin+i*deltax)&gt;xmax) break;
        NoviVektorCvorova.push_back({xmin+i*deltax, f(xmin+i*deltax)});
        i++;
    }

    return LinearnaInterpolacija(NoviVektorCvorova);
}


int main ()
{
    try {
    int odabir;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt;  odabir;

    if(odabir==1) {
        int brojcvorova;
        double x,y;
        std::vector&lt;std::pair&lt;double,double&gt;&gt; VektorCvorova;
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; brojcvorova;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        while(brojcvorova!=0) {
            std::cin &gt;&gt; x &gt;&gt; y;
            VektorCvorova.push_back({x,y});
            brojcvorova--;
        }
        
        auto f(LinearnaInterpolacija(VektorCvorova));
        while (true) {
        try {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): " ;
            double argument;
            std::cin &gt;&gt; argument;
            if(!std::cin) return 0;
           // auto f(LinearnaInterpolacija(VektorCvorova));
            std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; f(argument) &lt;&lt; std::endl;
        } catch(std::range_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        } /*catch(std::range_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        }*/
        }
    }
    

    else if(odabir==2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double xmin,xmax,deltax;
        std::cin &gt;&gt; xmin &gt;&gt; xmax &gt;&gt; deltax;

        while (true) {
            try {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): " ;
                double argument;
                std::cin &gt;&gt; argument;
                if(!std::cin) return 0;
                auto fapprox(LinearnaInterpolacija([](double x) {
                    return x*x+std::sin(x);
                },xmin,xmax,deltax));
                std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; std::pow(argument,2)+std::sin(argument) &lt;&lt;
                          " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; fapprox(argument) &lt;&lt; std::endl;
            /*} catch(std::domain_error izuzetak) {
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
            }*/ }catch(std::range_error izuzetak) {
</font>                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
            }
        }
    }
    }catch(std::domain_error izuzetak){
        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        return 0;
    }
    return 0;
}
</pre>
</body>
</html>
