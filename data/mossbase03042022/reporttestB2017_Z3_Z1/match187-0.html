<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student6776.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student6776.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match187-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_74.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;cmath&gt;

double fun(double x)
{
    return x*x+sin(x);
}

typedef std::vector&lt;std::pair&lt;double,double&gt;&gt; VektorParova;

double Aproksimacija(VektorParova v,double x)
{
    std::vector&lt;double&gt; pomocni;
    for(int i(0); i&lt;v.size(); i++) {
        pomocni.push_back(v.at(i).first);
    }
    if(x&lt;pomocni.at(0) || x&gt;pomocni.at(int(pomocni.size())-1)) throw std::range_error("Argument izvan opsega");
    auto it1(std::lower_bound(pomocni.begin(),pomocni.end(),x));
    int centralni(it1-pomocni.begin());
    int lijevi(centralni),desni(centralni);
    if(v.at(centralni).first&gt;x) {
        lijevi--;
    } else {
        if(desni+1&lt;pomocni.size()) {
            desni++;
        } else {
            lijevi--;
        }
    }
    return v.at(lijevi).second+(v.at(desni).second-v.at(lijevi).second)*(x-v.at(lijevi).first)/(v.at(desni).first-v.at(lijevi).first);
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (VektorParova &amp;v)
{
    std::sort(v.begin(),v.end()); // sortiranje za svaki slucaj
    for(int i(0); i&lt;int(v.size())-1; i++) { // ima li istih x
        if(v.at(i).first&lt;v.at(i+1).first) {
            continue;
        } else {
            throw std::domain_error("Neispravni cvorovi");
        }
    }
    return [&amp;v](double x) {
        return Aproksimacija(v,x);
    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(double fun(double),double Xmin,double Xmax,double dX)
{
    if(Xmin&gt;Xmax || !(dX&gt;0)) throw std::domain_error("Nekorektni parametri");
    VektorParova v;
    int i(0);
    while(Xmin+i*dX&lt;Xmax) {
        v.push_back({Xmin+i*dX,fun(Xmin+i*dX)});
        i++;
    }
    v.push_back({Xmax,fun(Xmax)});
    return [v] (double x) {
        return Aproksimacija(v,x);
    };
}

double UnosArgumenta()
{
    char znak('"');
    std::cout &lt;&lt; "Unesite argument (ili " &lt;&lt; znak &lt;&lt; "kraj" &lt;&lt; znak &lt;&lt; " za kraj): ";
    double argument(0);
    std::cin &gt;&gt; argument;
    if(!(std::cin) || std::cin.get()!='\n') {
        std::cin.clear();
        std::cin.ignore(10000,'\n');
        throw std::invalid_argument("Kraj.");
    }
    return argument;
}

int main ()
{

    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija(0);
    std::cin &gt;&gt; opcija;
    switch (opcija) {
    case 1: {
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        int br_cvr(0);
        std::cin &gt;&gt; br_cvr;
        VektorParova v(br_cvr);
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(auto &amp;a:v) {
            std::cin &gt;&gt; a.first &gt;&gt; a.second;
        }
        try {
            auto f(LinearnaInterpolacija(v));
            for(;;) {
                double argument(0);
                try {
                    argument=(UnosArgumenta());
                } catch(std::invalid_argument) {
                    return 0;
                }

                try {
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; f(argument) &lt;&lt; std::endl;
                } catch(std::range_error iz) {
</font><a name="1"></a><font color="#00FF00"><a href="match187-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

                    std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
                }
            }
        }

        catch(std::domain_error iz) {
            std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
        }
        break;
    }
    case 2: {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double Xmin(0),Xmax(0),dX(0);
        std::cin &gt;&gt; Xmin &gt;&gt; Xmax &gt;&gt; dX;
        try {
            auto f(LinearnaInterpolacija(fun,Xmin,Xmax,dX));
            for(;;) {
                double argument(0);
                try {
                    argument=UnosArgumenta();
                } catch(std::invalid_argument) {
                    return 0;
                }
                try {
                    double y(f(argument));
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; fun(argument);
                    std::cout &lt;&lt; " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; y &lt;&lt; std::endl;
                } catch(std::range_error iz) {
                    std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
                }
            }
        } catch(std::domain_error iz) {
            std::cout &lt;&lt; iz.what() &lt;&lt; std::endl;
        }
        break;
    }
    default: {
        std::cout &lt;&lt; "Pogresna opcija!";
        return 0;
</font>    }
    }
    return 0;
}</pre>
</body>
</html>
