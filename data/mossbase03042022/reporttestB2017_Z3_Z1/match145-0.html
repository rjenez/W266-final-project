<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student2157.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student2157.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;

<a name="0"></a><font color="#FF0000"><a href="match145-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi){
    
    std::sort(cvorovi.begin(), cvorovi.end(), [](std::pair&lt;double, double&gt; a, std::pair&lt;double, double&gt; b){return a.first&lt;b.first;});
    
    for(int i = 0; i &lt; cvorovi.size(); i++){
        for(int j = i+1; j &lt; cvorovi.size(); j++){
            if(fabs(cvorovi[i].first - cvorovi[j].first) == 0) throw std::domain_error("Neispravni cvorovi");
        }
    }
    
    return [cvorovi](double x){
        for(int i = 0; i &lt; cvorovi.size()-1; i++){
            if(cvorovi[i].first &lt;= x &amp;&amp; cvorovi[i+1].first &gt;= x){
                return (cvorovi[i].second + ((cvorovi[i + 1].second - cvorovi[i].second)/(cvorovi[i+1].first - cvorovi[i].first))*(x - cvorovi[i].first));
            }
        }
        throw std::range_error("Argument izvan opsega");
    };
}

double g(double x){
    return x*x + sin(x);
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(double g(double), double a, double b, double c){
    if(a &gt; b || c &lt;= 0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi;
    for(double i = a; i &lt; b; i+=c){
        cvorovi.push_back(std::make_pair(i, g(i)));
    }
    return [cvorovi](double x){
        for(int i = 0; i &lt; cvorovi.size()-1; i++){
            if(cvorovi[i].first &lt;= x &amp;&amp; cvorovi[i+1].first &gt;= x){
                return (cvorovi[i].second + ((cvorovi[i + 1].second - cvorovi[i].second)/(cvorovi[i+1].first - cvorovi[i].first))*(x - cvorovi[i].first));
            }
        }
        throw std::range_error("Argument izvan opsega");
    };
}
int main (){
    try{
        int p;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi;
        bool k = false;
        for(;;){
            if(k) break;
            std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
            std::cin&gt;&gt;p;
            if(p == 1){
                int broj_cvorova;
                std::cout&lt;&lt;"Unesite broj cvorova: ";
                std::cin&gt;&gt;broj_cvorova;
                std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
                for(int i = 0; i &lt; broj_cvorova; i++){
                    double a, b;
                    std::cin&gt;&gt;a&gt;&gt;b;
                    cvorovi.push_back(std::make_pair(a, b));
                }
                auto f(LinearnaInterpolacija(cvorovi));
                for(;;){
                    std::cin.clear();
                    std::cin.ignore(1000000, '\n');
                    std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt;'"'&lt;&lt;"kraj"&lt;&lt;'"'&lt;&lt;" za kraj): ";
                    double x;
                    std::cin&gt;&gt;x;
                    if(!std::cin.fail()){
                        std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl;
                    }
                    else{
                        k = true;
                        break;
                    }
                }
                break;
            }
        
       else if(p == 2){
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double a, b, c;
            std::cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
            auto f1(LinearnaInterpolacija(g, a, b, c));
            for(;;){
                std::cin.clear();
                std::cin.ignore(1000000, '\n');
                std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt;'"'&lt;&lt;"kraj"&lt;&lt;'"'&lt;&lt;" za kraj): ";
                double x;
                std::cin&gt;&gt;x;
                if(!std::cin.fail()){
                    try{
                    std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;g(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f1(x)&lt;&lt;std::endl;     
                    }catch(std::range_error e){
                        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                    }
                }
                else{
                    k = true;
                    break;
                }
            }
        }
    else break;
    }
    }catch(std::domain_error e){
        std::cout&lt;&lt;e.what();
    }catch(std::range_error e){
        std::cout&lt;&lt;e.what();
</font>    }
	return 0;
}
</pre>
</body>
</html>
