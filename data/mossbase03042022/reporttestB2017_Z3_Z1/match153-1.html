<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5979.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5366.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match153-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
double funkcija(double x){
    return x*x+sin(x);
}


std::function&lt;double(double)&gt;LinearnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi ){
    std::map&lt;double,double&gt; cv;
    int velicina=cvorovi.size();
    while (cvorovi.size()!=0) {
        cv.insert(cvorovi[0]);
        cvorovi.erase(cvorovi.begin());
    }
    if(velicina!=cv.size() || cv.size()==0)
        throw std::domain_error("Neispravni cvorovi");
    return [cv](double x)-&gt;double{
        auto zadnji=cv.end();
        zadnji--;
        if(x&lt;(*cv.begin()).first or x&gt;zadnji-&gt;first or cv.size()==0)
            throw std::range_error("Argument izvan opsega");
        if(zadnji-&gt;first==x)
            return zadnji-&gt;second;
        auto it=cv.upper_bound(x);
        auto a=*it;
        auto b=*(--it);
        return (b.second+(a.second-b.second)*(x-b.first)/(a.first-b.first));
    };
}
std::function&lt;double(double)&gt;LinearnaInterpolacija(std::function&lt;double(double)&gt; f,double xmin, double xmax,double dx ){
    if(xmin&gt;xmax or dx&lt;=0)
        throw std::domain_error("Nekorektni parametri");
    std::map&lt;double,double&gt; cv;
    for (int i = 0; xmin+i*dx&lt;xmax; i++) {
        cv.insert(std::make_pair(xmin+i*dx,f(xmin+i*dx)));
    }
    cv.insert(std::make_pair(xmax,f(xmax)));
    return [cv](double x)-&gt;double{
        auto zadnji=cv.end();
        zadnji--;
        if(x&lt;(*cv.begin()).first or x&gt;zadnji-&gt;first or cv.size()==0)
            throw std::range_error("Argument izvan opsega");
        if(zadnji-&gt;first==x)
            return zadnji-&gt;second;
        auto it=cv.upper_bound(x);
        auto a=*it;
        auto b=*(--it);
        return (b.second+(a.second-b.second)*(x-b.first)/(a.first-b.first));
    };
}
int main ()
{
   std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): " ;
   int o,n;
   std::cin &gt;&gt; o;
   if(o==1){
   std::cout &lt;&lt; "Unesite broj cvorova: " ;
   std::cin &gt;&gt;  n;
   std::cout &lt;&lt; "Unesite cvorove kao parove x y: " ;
   std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi  ;
   for (int i = 0; i &lt; n; i++) {
       double a,b;
       std::cin &gt;&gt; a&gt;&gt;b;
       cvorovi.push_back(std::make_pair(a,b));
   }
   try{
       auto f(LinearnaInterpolacija(cvorovi));
   while (1) {
    std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
    double a;
    std::cin &gt;&gt; a;
    if(!std::cin) break;
    char s(std::cin.peek());
    if(s!='\n' &amp;&amp; s!=' ' &amp;&amp; s!='\t' )
        break;
    try{
    double rezultat(f(a));
    std::cout &lt;&lt; "f("&lt;&lt;a&lt;&lt;") = "&lt;&lt;rezultat &lt;&lt; std::endl;
    }catch(std::range_error izuzetak){
        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    }
   }
       
   }
    catch(std::domain_error izuzetak){
        std::cout &lt;&lt; izuzetak.what() &lt;&lt;std::endl;
        return 0;
    }
   }else{
       std::cout &lt;&lt; "Unesite krajeve intervala i korak: " ;
       double a,b,c;
       std::cin &gt;&gt; a&gt;&gt;b&gt;&gt;c;
       try{
                auto f(LinearnaInterpolacija(funkcija,a,b,c));
       while (1) {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double u;
            std::cin &gt;&gt; u;
            if(!std::cin) break;
            char s(std::cin.peek());
            if(s!='\n' &amp;&amp; s!=' ' &amp;&amp; s!='\t' )
                break;
                try{
                    double rezultat(f(u));
                    std::cout &lt;&lt; "f("&lt;&lt;u&lt;&lt;") = "&lt;&lt;funkcija(u)&lt;&lt;" "&lt;&lt;"fapprox("&lt;&lt;u&lt;&lt;") = " &lt;&lt;rezultat &lt;&lt; std::endl;
                }catch(std::range_error izuzetak){
                    std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>                }
       }
       }
            catch(std::domain_error izuzetak){
                std::cout &lt;&lt; izuzetak.what() &lt;&lt;std::endl;
                return 0;
            }
   }
           
  
	return 0;
}
</pre>
</body>
</html>
