<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8560.cpp<p></p><pre>
#include &lt;iostream&gt;
#include&lt;functional&gt;
#include&lt;utility&gt;
#include&lt;vector&gt;
#include&lt;stdexcept&gt;
#include&lt;algorithm&gt;
#include&lt;cmath&gt;
<a name="1"></a><font color="#00FF00"><a href="match927-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi) {
    std::sort(cvorovi.begin(),cvorovi.end());
</font><a name="0"></a><font color="#FF0000"><a href="match927-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

    for(int i=0; i&lt;cvorovi.size(); i++) {
        for(int j=i+1; j&lt;cvorovi.size(); j++) {
            if(cvorovi[i].first==cvorovi[j].first) throw std::domain_error("Neispravni cvorovi");
        }
    }
    return [cvorovi] (double x) {
        if(x&lt;cvorovi.at(0).first || x&gt;cvorovi.at(cvorovi.size()-1).first) throw std::range_error("Argument izvan opsega");
</font>        double rez;
        if(x==cvorovi[cvorovi.size()-1].first) rez=cvorovi[cvorovi.size()-1].second;
        else {
            std::pair&lt;double,double&gt; prvi,drugi;
            /*     auto it(std::upper_bound(cvorovi.begin(),cvorovi.end(),x,[](double br,std::pair&lt;double,double&gt; p){return p.first&lt;br;}));
                 prvi=*it;
                 it++;
                 drugi=*it; */
            for(int i=0; i&lt;cvorovi.size()-1; i++) {
                if(cvorovi[i].first&lt;=x &amp;&amp; cvorovi[i+1].first&gt;x) {
                    prvi=cvorovi[i];
                    drugi=cvorovi[i+1];
                    break;
                }
            }
            rez=prvi.second+((drugi.second-prvi.second)/(drugi.first-prvi.first))*(x-prvi.first);
        }
        return rez;
    };
}
std::function&lt;double(double)&gt; LinearnaInterpolacija(std::function&lt;double(double)&gt; f, double x_min, double x_max, double delta_x) {
    if(x_min&gt;x_max || delta_x&lt;=0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; novi;
    for(double x=x_min; x&lt;x_max; x+=delta_x) {
        novi.push_back(std::make_pair(x,f(x)));
    }
    return LinearnaInterpolacija(novi);
}
int main () {
    try {
        int opcija;
        std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        std::cin&gt;&gt;opcija;
        if(opcija==1) {
            int broj_cvorova;
<a name="2"></a><font color="#0000FF"><a href="match927-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            std::cout&lt;&lt;"Unesite broj cvorova: ";
            std::cin&gt;&gt;broj_cvorova;
            std::vector&lt;std::pair&lt;double,double&gt;&gt; v(broj_cvorova);
</font>            std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            for(int i=0; i&lt;v.size(); i++) {
                std::cin&gt;&gt;v[i].first&gt;&gt;v[i].second;
            }
            for(;;) {
                try {
                    auto f(LinearnaInterpolacija(v));
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    double argument;
                    std::cin&gt;&gt;argument;
                    if(!std::cin) break;
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument)&lt;&lt;std::endl;
                } 
                catch(std::domain_error) {
                    throw;
                }
                catch(std::range_error izuzetak) {
                    std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                }
            }
        } 
        else if(opcija==2) {
<a name="3"></a><font color="#00FFFF"><a href="match927-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            double pocetak, kraj, korak;
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            std::cin&gt;&gt;pocetak&gt;&gt;kraj&gt;&gt;korak;
            auto funkcija([](double x) {return x*x+std::sin(x);});
</font>            for(;;) {
                try {
                    auto f(LinearnaInterpolacija(funkcija,pocetak,kraj,korak));
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    double argument;
                    std::cin&gt;&gt;argument;
                    if(!std::cin) break;
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;funkcija(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument)&lt;&lt;std::endl;
                } 
                catch(std::domain_error) {
                    throw;
                }
                catch(std::range_error izuzetak) {
                    std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                }
            }
        }
    } 
    catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    } 
    catch(std::range_error izuzetak) {
        std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    }
    return 0;
}</pre>
</body>
</html>
