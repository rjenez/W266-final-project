<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student2157.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5639.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;

<a name="2"></a><font color="#0000FF"><a href="match783-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; v)
{

    std::sort(v.begin(), v.end());
</font><a name="1"></a><font color="#00FF00"><a href="match783-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    for(int i=0; i&lt;v.size(); i++) {
        for(int j=i+1; j&lt;v.size(); j++) {
            if(fabs(v.at(i).first-v.at(j).first) &lt; 0.001) throw std::domain_error("Neispravni cvorovi");
</font>        }
    }
    return ( [v] (double x) {
        if(x &lt; v.at(0).first || x &gt; v.at(v.size() - 1).first) throw std::range_error ("Argument van opsega");
        /*   for(int i=0; i&lt;v.size()-1; i++)
               if(v.at(i).first &lt;= x &amp;&amp; v.at(i+1).first &gt;= x) // manje / manje ili jednako!! tj vece
                   return (v.at(i).second + (v.at(i+1).second-v.at(i).second)/(v.at(i+1).first-v.at(i).first)*(x-v.at(i).first));
           throw std::range_error ("Argument van opsega");
        });*/
        auto it = std::lower_bound(v.begin(), v.end(), x, [] (std::pair&lt;double, double&gt; par, double x) {
            return par.first &lt; x;
        });
        auto it1 = it;
        if(it == v.begin()) it1 = it+1;
        else it1 = it - 1;
        return (it-&gt;second + (it1 -&gt; second - it-&gt;second) / (it1-&gt;first - it-&gt;first) * (x - it-&gt;first));
    });
}

<a name="0"></a><font color="#FF0000"><a href="match783-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

std::function&lt;double(double)&gt; LinearnaInterpolacija(double f(double), double x_min, double x_max, double x_korak)
{
    if(x_min &gt; x_max || x_korak &lt;= 0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; cvor;

    for(double i=x_min; i&lt;=x_max; i+=x_korak) {
        cvor.push_back({i, f(i)});
</font>    }

    return ([cvor,f] (double x) {
        std::vector&lt;double&gt; v;
        double a;
        for(int i = 0; i&lt;cvor.size(); i++) v.push_back(cvor.at(i).first);
        auto logi=std::binary_search(v.begin(), v.end(), x);
        if(logi == 0) {
            a = LinearnaInterpolacija(cvor)(x);
        } else if(logi == 1) {
            for(int i = 0; i &lt; cvor.size(); i++) v.push_back(cvor.at(i).second);
            auto vrati = std::lower_bound(v.begin(), v.end(), f(x));
            a = *vrati;
        }
        return a;
    });
}

int main ()
{
    std::vector &lt;std::pair &lt;double, double&gt;&gt; v;
    int opcija, broj_cvorova;
    double argument, x, y, pocetak, kraj, korak;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; opcija;
    if(opcija == 1) {
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; broj_cvorova;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        try {
            while(v.size()&lt;broj_cvorova) {
                std::cin &gt;&gt; x &gt;&gt; y;
                v.push_back({x,y});
            }
            auto fja(LinearnaInterpolacija(v));
            try {

                while(std::cin) {
                    std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin &gt;&gt; argument;
                    if(!std::cin) {
                        std::cin.ignore(10000, '\n');
                        break;
                    }
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; LinearnaInterpolacija(v)(argument);
                    std::cout &lt;&lt; std::endl;
                }

<a name="3"></a><font color="#00FFFF"><a href="match783-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            } catch(std::range_error e) {
                std::cout &lt;&lt; e.what();
            }
        } catch(std::domain_error e) {
            std::cout &lt;&lt; e.what();
</font>        }
    } else if(opcija == 2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        try {
            std::cin &gt;&gt; pocetak &gt;&gt; kraj &gt;&gt; korak;
            auto fja(LinearnaInterpolacija([](double x) {
                return x*x + sin(x);
            }, pocetak, kraj, korak));
            while(std::cin) {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                do {
                    std::cin &gt;&gt; argument;
                    if(!std::cin) {
                        std::cin.ignore(10000, '\n');
                        break;
                    }
                    if(argument&lt;pocetak || argument&gt;=kraj) {
                        std::cout &lt;&lt; "Argument izvan opsega " &lt;&lt; std::endl;
                        break;
                    }
                    std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; argument*argument + sin(argument) &lt;&lt; " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; fja(argument); //LinearnaInterpolacija([](double x){return x*x + sin(x);}, pocetak, kraj, korak)(argument);
                    std::cout &lt;&lt; std::endl;
                } while(argument &lt; pocetak || argument &gt; kraj);
            }
        } catch (std::range_error e) {
            std::cout &lt;&lt; e.what();
        }
    }
    return 0;
}
</pre>
</body>
</html>
