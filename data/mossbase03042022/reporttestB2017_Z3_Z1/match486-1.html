<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student6522.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student8964.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#define epsilon 10e-7

double funkcija (double x) {
    return x*x + std::sin(x);
}

std::function&lt;double (double)&gt; LinearnaInterpolacija (std::vector&lt;std::pair &lt;double, double&gt;&gt; &amp;v) {
    for(int i(1); i &lt; v.size(); i++) {
        for(int j(0); j &lt; i; j++) {
            std::pair&lt;double, double&gt; it1 = v.at(i);
            std::pair&lt;double, double&gt; it2 = v.at(j);
            if(std::fabs(it1.first) - std::fabs(it2.first) &lt; epsilon) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::sort(v.begin(), v.end(), [](std::pair&lt;double, double&gt; p1, std::pair&lt;double, double&gt; p2) {
        return p1.first &lt; p2.first; });
    return [v] (double x) { 
        std::pair&lt;double, double&gt; pocetak = v.at(0); std::pair&lt;double, double&gt; kraj = v.at(v.size()-1);
        if(std::fabs(x - kraj.first) &lt; epsilon)     return kraj.second;
        if(!(x &gt; pocetak.first &amp;&amp; x &lt; kraj.first)) throw std::range_error("Argument izvan opsega");
        std::pair&lt;double, double&gt; uporedbena; uporedbena.first = x; uporedbena.second = 0.0;
        auto najblizi_manji = std::upper_bound(v.begin(), v.end(), uporedbena);
        najblizi_manji--;
        double xi = najblizi_manji-&gt;first;
        double yi = najblizi_manji-&gt;second;
        auto najblizi_veci = std::lower_bound(v.begin(), v.end(), uporedbena);
        double xii = najblizi_veci-&gt;first;
        double yii = najblizi_veci-&gt;second;
        return yi + ((yii - yi)/(xii - xi))*(x - xi);   
    };
}

std::function&lt;double(double)&gt; LinearnaInterpolacija (double f(double), double x_min, double x_max, double delta_x) {
    std::vector&lt;std::pair &lt;double, double&gt;&gt; cvorovi;
    int brojac(0);
    if((x_min &gt; x_max) || (delta_x &lt; 0)) throw std::domain_error("Nekorektni parametri");
    while(x_min + brojac*delta_x &lt; x_max) {
        std::pair&lt;double, double&gt; cvor{x_min + brojac*delta_x, funkcija(x_min + brojac*delta_x)};
        cvorovi.insert(cvorovi.begin()+brojac, cvor);
        brojac++;
    }
    return[cvorovi] (double x) {
        std::pair&lt;double, double&gt; pocetak = cvorovi.at(0); std::pair&lt;double, double&gt; kraj = cvorovi.at(cvorovi.size()-1);
        if(std::fabs(x - kraj.first) &lt; epsilon) return kraj.second;
        if(!(x &gt; pocetak.first &amp;&amp; x &lt; kraj.first))  throw std::range_error("Argument izvan opsega");
        std::pair&lt;double, double&gt; uporedbena; uporedbena.first = x; uporedbena.second = 0.0;
        auto najblizi_manji = std::upper_bound(cvorovi.begin(), cvorovi.end(), uporedbena);
        najblizi_manji--;
        double xi = najblizi_manji-&gt;first;
        double yi = najblizi_manji-&gt;second;
        auto najblizi_veci = std::lower_bound(cvorovi.begin(), cvorovi.end(), uporedbena);
        double xii = najblizi_veci-&gt;first;
        double yii = najblizi_veci-&gt;second;
        return yi + ((yii - yi)/(xii - xi))*(x - xi); 
    };
}

int main ()
{
    int option;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;option;
    if(option == 1) {
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int br_cvorova; std::cin&gt;&gt;br_cvorova;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi(br_cvorova);
<a name="1"></a><font color="#00FF00"><a href="match486-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

        for(int i(0); i &lt; br_cvorova; i++) std::cin&gt;&gt;cvorovi.at(i).first&gt;&gt;cvorovi.at(i).second;
        try {
            LinearnaInterpolacija(cvorovi);
            for(;;) {
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                double argument;
                if(!(std::cin&gt;&gt;argument)) {
                    std::cin.clear();
                    std::cin.ignore(10000, '\n');
                    break;
                }
                try {
                auto fun(LinearnaInterpolacija(cvorovi));
                }catch(std::domain_error e) {
                    std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
</font>                }
                try {
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;LinearnaInterpolacija(cvorovi)(argument)&lt;&lt;std::endl;
                }catch(std::range_error f) {
                    std::cout&lt;&lt;f.what()&lt;&lt;std::endl;
                }
            }
        }catch(std::domain_error q) {
            std::cout&lt;&lt;q.what()&lt;&lt;std::endl;
        }
    }
    else if(option == 2) {
<a name="0"></a><font color="#FF0000"><a href="match486-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double x_min, x_max, delta_x;
        std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;delta_x;
        try {
            LinearnaInterpolacija(funkcija, x_min, x_max, delta_x);
            for(;;) {
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                double argument;
                if(!(std::cin&gt;&gt;argument)) {
                    std::cin.clear();
                    std::cin.ignore(10000, '\n');
                    break;
                }
                try {
                    auto fun(LinearnaInterpolacija(funkcija, x_min, x_max, delta_x));
                    try {
                        std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;funkcija(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;LinearnaInterpolacija(funkcija, x_min, x_max, delta_x)(argument)&lt;&lt;std::endl;
</font>                }catch(std::range_error f) {
                    std::cout&lt;&lt;f.what()&lt;&lt;std::endl;
                }
            }catch(std::domain_error e) {
                    std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
                }
            }
        }catch(std::domain_error q) {
            std::cout&lt;&lt;q.what()&lt;&lt;std::endl;
        }
    }
	return 0;
}
</pre>
</body>
</html>
