<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student9451.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student9451.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match278-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;iomanip&gt;

using namespace std;



function&lt;double(double)&gt; LinearnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt; v)
{
    sort(v.begin(),v.end(),[](pair&lt;double,double&gt; x,pair&lt;double,double&gt; y){return x.first&lt;y.first;});
    for(int i=0; i&lt;v.size()-1; i++) 
          if(v.at(i).first==v.at(i+1).first)  throw domain_error("Neispravni cvorovi");
    return [v](double x)
    {
        //find_if (myvector.begin(), myvector.end(), IsOdd);
        //binary_search (v.begin(), v.end(), 6, myfunction)
        
        /*//find_if (myvector.begin(), myvector.end(), IsOdd);
        //binary_search (v.begin(), v.end(), 6, myfunction)
        
        pair&lt;double,double&gt;p(make_pair(x,x));
        
        pair&lt;double,double&gt; manji=v[v.size()-1];
        pair&lt;double,double&gt; veci=v[0];
        
          if(binary_search(v.begin(),v.end(),p,[&amp;manji,&amp;veci,x](pair&lt;double,double&gt; i,pair&lt;double,double&gt; j)
                                               {        cout&lt;&lt;i.first&lt;&lt;" "&lt;&lt;j.first&lt;&lt;endl;
                                                        
                                                        if( manji.first&gt;=x) manji=j;
                                                        if(veci.first&lt;=x)   veci=i;
                                    
                                                         return (manji.first&lt;x &amp;&amp; veci.first&gt;x);
                                                   
                                               }));
         */
         if(x&lt;v.at(0).first || x&gt;v.at(v.size()-1).first)throw range_error("Argument izvan opsega");
        /*for(int i=0;i&lt;v.size()-1;i++)
        {
            if(v[i].first&lt;=x &amp;&amp; v[i+1].first&gt;x)
            {   
                return v[i].second+((v[i+1].second-v[i].second)/(v[i+1].first-v[i].first))*(x-v[i].first);
            }
        }*/
        pair&lt;double,double&gt; par(x,x);
        auto a=upper_bound(v.begin(),v.end(),par);
        auto b=lower_bound(a,v.end(),par);
        
        if(b==v.end() || a==v.end()) return  v[v.size()-1].second;
       
        if(a-&gt;first==x)
        	b++;
        else 
          a--;
        
       	if(a-&gt;first&lt;=x &amp;&amp; b-&gt;first&gt;x)
        		return a-&gt;second+((b-&gt;second-a-&gt;second)/(b-&gt;first-a-&gt;first))*(x-a-&gt;first);
        return v[v.size()-1].second;
    };
}

function&lt;double(double)&gt; LinearnaInterpolacija(function&lt;double(double)&gt; fun,double xmin,double xmax,double dx)
{   
    vector&lt;pair&lt;double,double&gt;&gt; v;
    int k=0;
    if(xmin&gt;xmax || dx&lt;0) throw domain_error("Nekorektni parametri");
    while(xmin&lt;=xmax)
    {   
        v.push_back(make_pair(xmin,fun(xmin)));
        xmin+=dx;
        
    }
    return LinearnaInterpolacija(v);
}

int main ()
{   
    int n;
    try{
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
	cin&gt;&gt;n;
	
	switch(n)
	{   
	    case 1:
	    {
	        cout&lt;&lt;"Unesite broj cvorova: ";
	        int br;cin&gt;&gt;br;
	        cout&lt;&lt;"Unesite cvorove kao parove x y: ";
	        vector&lt;pair&lt;double,double&gt;&gt;v(br);
	        for(int i=0;i&lt;v.size();i++)
	        {   
	            double p,q;
	            cin&gt;&gt;p&gt;&gt;q;
	            v[i]=make_pair(p,q);
	        }
	        
	        
	        do
	        {   
	            auto f=LinearnaInterpolacija(v);
	            cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
	            double b;
	            cin&gt;&gt;b;
	            if(!cin) break;
	            try{
	            cout&lt;&lt;"f("&lt;&lt;b&lt;&lt;") = "&lt;&lt;f(b)&lt;&lt;endl;
	            }
	            catch(range_error e)
	            {
	            	cout&lt;&lt;e.what()&lt;&lt;endl;
	            }
	        }while(cin);
	        
	        break;
	   }     
	   case 2:
	   {
	        double a,b,c;
	        cout&lt;&lt;"Unesite krajeve intervala i korak: ";
	        cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
	        auto fun=[](double x){return x*x+sin(x);};
	        auto f=LinearnaInterpolacija(fun,a,b,c);
	        do
	        {   
	            cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
	            double b;
	            cin&gt;&gt;b;
	            if(!cin) break;
	            try{
	            cout&lt;&lt;"f("&lt;&lt;b&lt;&lt;") = "&lt;&lt;fun(b)&lt;&lt;" fapprox("&lt;&lt;b&lt;&lt;") = "&lt;&lt;f(b)&lt;&lt;endl;
	    		 }
	            catch(range_error e)
	            {
	            	cout&lt;&lt;e.what()&lt;&lt;endl;
	            }
	        }while(cin);
	         break;
	   }
	}
    	
    }
    catch(domain_error e) { cout&lt;&lt;e.what();}
    catch(range_error e) {cout&lt;&lt;e.what();}
</font>	return 0;
}
</pre>
</body>
</html>
