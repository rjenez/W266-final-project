<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student5915.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z1/student1016.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 1
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;utility&gt;

// Funkcija pomocu koje provjeravamo da li su dva realna broja jednaka
// Iz dodatka predavanju: "Sokantna prica o realnoj aritmetici"
template&lt;typename Tip&gt;
<a name="0"></a><font color="#FF0000"><a href="match950-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

bool JesuLiJednaki(Tip x, Tip y, double eps=1e-10) {
    if ((x&lt;0 &amp;&amp; y&gt;0) || (x&gt;0 &amp;&amp; y&lt;0)) return false;
    return std::fabs(x-y)&lt;=eps*(std::fabs(x)+std::fabs(y));
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt;cvorovi) {
</font>    for (int i=0; i&lt;cvorovi.size(); i++) {
<a name="2"></a><font color="#0000FF"><a href="match950-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        for (int j=i+1; j&lt;cvorovi.size(); j++) {
            if (JesuLiJednaki(cvorovi.at(i).first, cvorovi.at(j).first)) {
                throw std::domain_error ("Neispravni cvorovi");
</font>            }
        }
    }
    
    std::sort(cvorovi.begin(), cvorovi.end(), [](std::pair&lt;double, double&gt; parametar1, std::pair&lt;double, double&gt; parametar2){ return (parametar1.first&lt;parametar2.first); });
    
    auto povratna_fun=[cvorovi](double x) {
        if ((x&lt;cvorovi.at(0).first) || (x&gt;cvorovi.at(cvorovi.size()-1).first)) {
            throw std::range_error("Argument izvan opsega");
        }
        std::pair&lt;double, double&gt; par;
        par.first=x; par.second=0;
        if (JesuLiJednaki(x, cvorovi.at(cvorovi.size()-1).first)) return cvorovi.at(cvorovi.size()-1).second;
        if (JesuLiJednaki(x, cvorovi.at(0).first)) return cvorovi.at(0).second;
        
        auto p1(upper_bound(cvorovi.begin(), cvorovi.end(), par, [](std::pair&lt;double, double&gt; parametar1, std::pair&lt;double, double&gt; parametar2) { return (parametar1.first&lt;parametar2.first); }));
        
        auto p2(p1-1);
        auto brojnik(p1-&gt;second-p2-&gt;second);
        auto nazivnik(p1-&gt;first-p2-&gt;first);
        return (p2-&gt;second+(brojnik/nazivnik)*(x-p2-&gt;first));
    };
    return povratna_fun;
}

std::function&lt;double(double)&gt; LinearnaInterpolacija(std::function&lt;double(double)&gt;fun, double Xmin, double Xmax, double Deltax) {
    if ((Xmin&gt;Xmax) || (Deltax&lt;=0)) throw std::domain_error ("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt;pomocni;
    while (Xmin&lt;Xmax) {
        std::pair&lt;double, double&gt;par;
        par.first=Xmin; par.second=fun(Xmin);
        pomocni.push_back(par);
        Xmin+=Deltax;
    }
    return LinearnaInterpolacija(pomocni);
}


int main () {
    try {
        int unos;
        std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        std::cin&gt;&gt;unos;
        
        if (unos==1) {
            int broj_cvorova;
            std::cout&lt;&lt;"Unesite broj cvorova: ";
            std::cin&gt;&gt;broj_cvorova;
            std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            std::vector&lt;std::pair&lt;double, double&gt;&gt;cvorovi;
            for (int i=0; i&lt;broj_cvorova; i++) {
                double prvi_clan, drugi_clan;
                std::cin&gt;&gt;prvi_clan;
                std::cin&gt;&gt;drugi_clan;
                cvorovi.push_back(std::make_pair(prvi_clan, drugi_clan));
                
                for (int i=0; i&lt;cvorovi.size(); i++) {
                    for (int j=i+1; j&lt;cvorovi.size(); j++) {
                        if (JesuLiJednaki(cvorovi.at(i).first, cvorovi.at(j).first)) {
                            throw std::domain_error ("Neispravni cvorovi");
                        }
                    }
                }
                
            }   
            for(;;) {
                try {
                    double argument;
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin&gt;&gt;argument;
                    if (!std::cin) break;
                    auto fun(LinearnaInterpolacija(cvorovi));
<a name="1"></a><font color="#00FF00"><a href="match950-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;std::endl;
                } catch (std::range_error izuzetak) {
                    std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
                }
            }   
        }
    
        else if (unos==2) {
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double pocetak, kraj, korak;
            std::cin&gt;&gt;pocetak;
</font>            std::cin&gt;&gt;kraj;
            std::cin&gt;&gt;korak;
        
            for(;;) {
                try {
                    double argument;
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin&gt;&gt;argument;
                    if (!std::cin) break;
                    auto fun(LinearnaInterpolacija([](double argument) { return argument*argument+std::sin(argument); },pocetak, kraj, korak));
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;argument*argument+std::sin(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;std::endl;
                
                } catch(std::range_error izuzetak1) {
                    std::cout&lt;&lt;izuzetak1.what()&lt;&lt;std::endl;
                }
            }
        }
        else {
            return 0;
        }
    } catch (std::domain_error izuzetak2) {
        std::cout&lt;&lt;izuzetak2.what()&lt;&lt;std::endl;
    }
    
	return 0;
}
</pre>
</body>
</html>
