<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z3/student8997.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z3/student4195.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 3
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;

template &lt;typename TipElemenata&gt;
struct Matrica{
    int br_redova,br_kolona;
    
    TipElemenata **elementi=nullptr;
};

template &lt;typename TipElemenata&gt;
 void UnistiMatricu(Matrica&lt;TipElemenata&gt; mat) {
     
 if(!mat.elementi) return;
 
 for(int i = 0; i &lt; mat.br_redova; i++) delete[] mat.elementi[i];
 delete[] mat.elementi;
 
 mat.elementi = nullptr;
 }
    
    
    
template&lt;typename TipElemenata&gt;
Matrica&lt;TipElemenata&gt; StvoriMatricu (int br_redova,int br_kolona)
{
    
    Matrica&lt;TipElemenata&gt; mat;
    mat.br_kolona=br_kolona;
    mat.br_redova=br_redova;
    
    mat.elementi = new TipElemenata*[br_redova];
    
    for(int i=0;i&lt;br_redova;i++){
        mat.elementi[i]=nullptr;
        
    }
    try {
        
        for(int i=0;i&lt;br_redova;i++)
        {
<a name="2"></a><font color="#0000FF"><a href="match212-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

            mat.elementi[i] = new TipElemenata[br_kolona];
        }
        
    }
     catch(...) {
     UnistiMatricu(mat);
         throw;
 }
 return mat;
 }
 
 
 template&lt;typename TipElemenata&gt;
 void UnesiMatricu (Matrica&lt;TipElemenata&gt; &amp;m, char ime_matrice)
 {
     
     for(int i=0;i&lt;m.br_redova;i++){
         for(int j=0;j&lt;m.br_kolona;j++){
</font><a name="5"></a><font color="#FF0000"><a href="match212-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

             std::cout &lt;&lt; ime_matrice &lt;&lt; "(" &lt;&lt; i + 1 &lt;&lt; "," &lt;&lt; j + 1 &lt;&lt; ") = ";
                std::cin &gt;&gt; m.elementi[i][j];

         }
     }
}
template &lt;typename TipElemenata&gt;
 void IspisiMatricu(Matrica&lt;TipElemenata&gt; mat, int sirina_ispisa, int preciznost=6, bool treba_brisati=false)
 {
    for(int i = 0; i &lt; mat.br_redova; i++) {
</font>                for(int j = 0; j &lt; mat.br_kolona; j++){
<a name="6"></a><font color="#00FF00"><a href="match212-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

                    std::cout &lt;&lt; std::setw(sirina_ispisa) &lt;&lt; std::setprecision(preciznost) &lt;&lt; mat.elementi[i][j];

                }
                std::cout &lt;&lt; std::endl;
    }
            
    if(treba_brisati==true)  UnistiMatricu(mat);
                
     
 }

 

template &lt;typename TipElemenata&gt;
Matrica&lt;TipElemenata&gt; ZbirMatrica (const Matrica&lt;TipElemenata&gt; &amp;m1,const Matrica&lt;TipElemenata&gt; &amp;m2)
</font>    {
        if(m1.br_kolona!=m2.br_kolona || m1.br_redova!=m2.br_redova) throw std::domain_error("Matrice nemaju jednake dimenzije!");

        auto m3(StvoriMatricu&lt;TipElemenata&gt;(m1.br_redova,m1.br_kolona));
        
        
        
        for(int i=0;i&lt;m1.br_redova;i++) {
            for(int j=0;j&lt;m1.br_kolona;j++){
                m3.elementi[i][j] = m1.elementi[i][j] + m2.elementi[i][j]; 
            }
        }
        
        
        return m3;
    }
    
template&lt;typename TipElemenata&gt;
Matrica&lt;TipElemenata&gt; ProduktMatrica(const Matrica&lt;TipElemenata&gt; &amp;m1,const Matrica&lt;TipElemenata&gt; &amp;m2)
{
    
    if(m1.br_kolona!=m2.br_redova) throw std::domain_error("Matrice nisu saglasne za mnozenje");
    
    auto m3(StvoriMatricu&lt;TipElemenata&gt;(m1.br_redova,m2.br_kolona));
    for(int i=0;i&lt;m1.br_redova;i++)
<a name="7"></a><font color="#0000FF"><a href="match212-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        for(int j=0;j&lt;m2.br_kolona;j++) m3.elementi[i][j]=0;
    
    for(int i=0;i&lt;m1.br_redova;i++){
        for(int j=0;j&lt;m2.br_kolona;j++){
            for(int k=0;k&lt;m1.br_kolona;k++){
</font>                
<a name="3"></a><font color="#00FFFF"><a href="match212-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

                m3.elementi[i][j]+= m1.elementi[i][k] * m2.elementi[k][j];
            }
        }
    }
    return m3;
}




template&lt;typename TipElemenata&gt;
Matrica&lt;TipElemenata&gt;  PostaviJedinicnuMatricu(const Matrica&lt;TipElemenata&gt; &amp;m)
{
    auto m3(StvoriMatricu&lt;TipElemenata&gt;(m.br_redova,m.br_kolona));
    
    for(int i=0;i&lt;m.br_redova;i++){
</font>        for(int j=0;j&lt;m.br_kolona;j++){
            if(i==j){
<a name="4"></a><font color="#FF00FF"><a href="match212-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

                m3.elementi[i][j]=1;
            }
            else m3.elementi[i][j]=0;
        }
    }
    return m3;
    
}




template&lt;typename TipElemenata&gt;
Matrica&lt;TipElemenata&gt;  KopirajMatricu(const Matrica&lt;TipElemenata&gt; &amp;m)
{
    auto m3(StvoriMatricu&lt;TipElemenata&gt;(m.br_redova,m.br_kolona));
    
    for(int i=0;i&lt;m.br_redova;i++){
</font><a name="1"></a><font color="#00FF00"><a href="match212-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        for(int j=0;j&lt;m.br_kolona;j++){
            m3.elementi[i][j]=m.elementi[i][j];
        }
    }
    return m3;
    
}

template&lt;typename TipElemenata,typename Tip&gt;
Matrica&lt;TipElemenata&gt;  MnozenjeBrojaSaMatricom (const Matrica&lt;TipElemenata&gt; &amp;m, Tip b)
{
    auto m3(StvoriMatricu&lt;TipElemenata&gt;(m.br_redova,m.br_kolona));
    
    for(int i=0;i&lt;m.br_redova;i++){
</font>        for(int j=0;j&lt;m.br_kolona;j++){
            
<a name="0"></a><font color="#FF0000"><a href="match212-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_24.gif"/></a>

            m3.elementi[i][j]= m.elementi[i][j] * b;
            
            
        }
    }
    return m3;
    
}



template&lt;typename TipElemenata,typename Tip&gt;
Matrica&lt;TipElemenata&gt; MatricniPolinom ( Matrica&lt;TipElemenata&gt; mat, int k , Tip it)
{


    if(k&lt;0) throw std::domain_error ("Neispravan stepen polinoma");
   
        
        auto matrez = PostaviJedinicnuMatricu(mat);
        auto matrez2 = MnozenjeBrojaSaMatricom(matrez, *it);
        UnistiMatricu(matrez);

        matrez = matrez2;
        
        auto matnan = KopirajMatricu(mat);

        
        it++;
        int ii = 1;

        auto matrez3 = mat;
        auto matnan2 = mat;
        
        for(; ii&lt;=k; it++, ii++){
            

                           
           matrez3 = MnozenjeBrojaSaMatricom(matnan,*it);
           matrez2 = ZbirMatrica(matrez,matrez3);
           UnistiMatricu(matrez3);
           UnistiMatricu(matrez);
           matrez = matrez2;
           
           matnan2 = ProduktMatrica(matnan,mat);
           UnistiMatricu(matnan);
           matnan = matnan2;
        
        }
        
    UnistiMatricu(matnan);
    
    //matrez2 = nullptr;
    //matrez3 = nullptr;
    //matnan  = nullptr;
    //matnan2 = nullptr;

    return matrez;
    
    
}

    


int main ()
{
    
    Matrica&lt;double&gt; a,f;
    int preciznost;
    bool brisati=false;
    int r;
    std::vector&lt;int&gt; v;
    int n;
    int unos;
    std::cout&lt;&lt;"Unesite dimenziju kvadratne matrice: ";
    std::cin&gt;&gt;r;
   
    try {
        
        a=StvoriMatricu&lt;double&gt;(r,r);
        
        
        std::cout&lt;&lt;"Unesite elemente matrice A:\n";
        UnesiMatricu(a,'A');
    
        
        

        std::cout&lt;&lt;"Unesite red polinoma: ";
        std::cin&gt;&gt;n;
        std::cout&lt;&lt;"Unesite koeficijente polinoma: ";
        for(int i=0;i&lt;=n;i++){
            
            std::cin&gt;&gt;unos;
            v.push_back(unos);
        }
         IspisiMatricu(MatricniPolinom(a,n,v.begin()), 10 , 6 , true);
        
        
        
    }
     catch(std::bad_alloc) {
 std::cout &lt;&lt; "Nema dovoljno memorije!\n";
 }
 catch(std::domain_error izuzetak){
     std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
 }
 
  
 UnistiMatricu(a);
</font>    
	return 0;
}
</pre>
</body>
</html>
