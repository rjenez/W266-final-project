<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z3/student2210.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z3/student8552.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;vector&gt;

using namespace std;
template &lt;typename Tip&gt;
    struct Matrica{
        int redovi,kolone;
        Tip **elementi = nullptr;
    };
 
template &lt;typename Tip&gt;
    Matrica&lt;Tip&gt; StvoriMatricu(int redovi,int kolone){
        Matrica&lt;Tip&gt; prim;
        prim.redovi = redovi;prim.kolone = kolone;
        prim.elementi = new Tip*[redovi];
        for(int i=0;i&lt;redovi;i++) prim.elementi[i] = nullptr;
        try{
            for(int i=0;i&lt;redovi;i++)
                prim.elementi[i] = new Tip[kolone];
        }catch(...){
            UnistiMatricu(prim);
            throw;
        }
        return prim;
    } 
template &lt;typename Tip&gt;
    void UnesiMatricu(char ime, Matrica&lt;Tip&gt; &amp;prim){
<a name="1"></a><font color="#00FF00"><a href="match257-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

        for(int i=0;i&lt;prim.redovi;i++)
            for(int j=0;j&lt;prim.kolone;j++){
                cout &lt;&lt; ime &lt;&lt; "(" &lt;&lt; i + 1 &lt;&lt; "," &lt;&lt; j+1 &lt;&lt; ") = ";
                cin &gt;&gt; prim.elementi[i][j];
            }
    }
    
template &lt;typename Tip&gt;
    void IspisiMatricu(const Matrica&lt;Tip&gt; &amp;prim,int sirina_ispisa,int preciznost = 6,bool treba_bristati = false){
</font><a name="4"></a><font color="#FF00FF"><a href="match257-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

        for(int i=0;i&lt;prim.redovi;i++){
            for(int j=0;j&lt;prim.kolone;j++)
                cout &lt;&lt; setw(sirina_ispisa) &lt;&lt; setprecision(preciznost) &lt;&lt; prim.elementi[i][j];
            cout &lt;&lt; endl;
        }
        if(treba_bristati)UnistiMatricu(prim);
    }    
    
    
template &lt;typename Tip&gt;
</font>    void UnistiMatricu(Matrica&lt;Tip&gt; prim){
        if(!prim.elementi)return;
        for(int i=0;i&lt;prim.redovi;i++) delete[] prim.elementi[i];
        delete[] prim.elementi;
        prim.elementi = nullptr;
    }


template &lt;typename Tip&gt;
<a name="5"></a><font color="#FF0000"><a href="match257-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    Matrica&lt;Tip&gt; ZbirMatrica(const Matrica&lt;Tip&gt; &amp;prva,const Matrica&lt;Tip&gt; &amp;druga){
        if(prva.redovi != druga.redovi || prva.kolone != druga.kolone)
            throw domain_error("Matrice nemaju jednake dimenzije!");
            auto kraj(StvoriMatricu&lt;Tip&gt;(prva.redovi,prva.kolone));
            for(int i=0;i&lt;prva.redovi;i++)
</font>                for(int j=0;j&lt;prva.kolone;j++)
                    kraj.elementi[i][j] = prva.elementi[i][j] + druga.elementi[i][j];
        return kraj;
    }
    
<a name="2"></a><font color="#0000FF"><a href="match257-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

template&lt;typename Tip&gt;
void PomnoziSaSkalarom(Matrica&lt;Tip&gt; prim,double skalar){
    for(int i=0;i&lt;prim.redovi;i++)
        for(int j=0;j&lt;prim.kolone;j++)prim.elementi[i][j]*=skalar;
}    
 
template&lt;typename Tip&gt;
Matrica&lt;Tip&gt; ProduktMatrica(const Matrica&lt;Tip&gt; &amp;prva,const Matrica&lt;Tip&gt; &amp;druga){
</font><a name="6"></a><font color="#00FF00"><a href="match257-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    if(prva.kolone != druga.redovi) throw domain_error("Matrice nisu saglasne za mnozenje");
    auto kraj(StvoriMatricu&lt;Tip&gt;(prva.redovi,druga.kolone));
    for(int i=0;i&lt;prva.redovi;i++)
</font>        for(int j=0;j&lt;druga.kolone;j++){
            Tip suma=0;
            for(int k=0;k&lt;druga.redovi;k++)suma+=prva.elementi[i][k]*druga.elementi[k][j];
            kraj.elementi[i][j]=suma;
        }
    return kraj;
}

template &lt;typename Tip&gt;
<a name="7"></a><font color="#0000FF"><a href="match257-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

Matrica&lt;Tip&gt; MatricniPolinom(Matrica&lt;Tip&gt; prim,vector&lt;double&gt; v){
    if(prim.kolone != prim.redovi)throw domain_error("Matrica mora biti kvadratna");
    auto prim_polinom(StvoriMatricu&lt;Tip&gt;(prim.kolone,prim.kolone));
    for(int i=0;i&lt;prim.redovi;i++)
</font><a name="3"></a><font color="#00FFFF"><a href="match257-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

        for(int j=0;j&lt;prim.kolone;j++)prim_polinom.elementi[i][j]=0;
    for(int i=0;i &lt; v.size();i++){
        if(v[i]==0)continue;
       try{
           auto jed_matrica(StvoriMatricu&lt;Tip&gt;(prim.redovi,prim.kolone));
            for(int i=0;i&lt;prim.redovi;i++)
</font>                for(int j=0;j&lt;prim.kolone;j++){
<a name="0"></a><font color="#FF0000"><a href="match257-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_14.gif"/></a>

                    if(i == j)jed_matrica.elementi[i][j]=1;
                    else jed_matrica.elementi[i][j]=0;
                }
            for(int j=0;j&lt;i;j++){
                auto tmp(jed_matrica);
                try{
                    jed_matrica = ProduktMatrica(prim,jed_matrica);
                    UnistiMatricu(tmp);
                }catch(...){
                    UnistiMatricu(jed_matrica);
                    throw;
                }
            }
            PomnoziSaSkalarom(jed_matrica,v[i]);
            try{
                auto tmp(prim_polinom);
                prim_polinom=ZbirMatrica(prim_polinom,jed_matrica);
                UnistiMatricu(jed_matrica);
                UnistiMatricu(tmp);
            }catch(...){
                UnistiMatricu(jed_matrica);
                throw;
            }
       }catch(...){
           UnistiMatricu(prim_polinom);
           throw;
       }
    }
    return prim_polinom;
}
int main ()
{
    Matrica&lt;double&gt; matrica;
    vector&lt;double&gt; tmp;
    int a,b;
    cout &lt;&lt; "Unesite dimenziju kvadratne matrice: ";
    cin &gt;&gt; a;
   
    try{
        matrica = StvoriMatricu&lt;double&gt;(a,a);
        cout &lt;&lt; "Unesite elemente matrice A: \n";
        UnesiMatricu('A',matrica);
        cout &lt;&lt; "Unesite red polinoma: ";
        cin &gt;&gt; b;
        cout &lt;&lt; "Unesite koeficijente polinoma: ";
        for(int i=0;i&lt;=b;i++){
</font><a name="8"></a><font color="#00FFFF"><a href="match257-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            double x;
            cin &gt;&gt; x;
            tmp.push_back(x);
        }
        IspisiMatricu(MatricniPolinom(matrica,tmp),10,6,true);
        UnistiMatricu(matrica);
    }catch(...){
        UnistiMatricu(matrica);
</font>    }
   
    return 0;
}</pre>
</body>
</html>
