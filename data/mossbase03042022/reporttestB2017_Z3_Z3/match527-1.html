<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z3/student8776.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z3/student3671.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
using namespace std;

template&lt;typename Tip&gt;
struct Matrica {
    int redovi,kolone;
    Tip **elementi=nullptr;
};

template&lt;typename Tip&gt;
void UnistiMatricu(Matrica&lt;Tip&gt;mat)
{
    if(!mat.elementi) return;
    for(int i=0; i&lt;mat.redovi; i++) delete[] mat.elementi[i];
    delete[] mat.elementi;
    mat.elementi=nullptr;
}

template&lt;typename Tip&gt;
Matrica&lt;Tip&gt;StvoriMatricu(int redovi,int kolone)
{
    Matrica&lt;Tip&gt;mat;
    mat.redovi=redovi;
    mat.kolone=kolone;
    mat.elementi=new Tip*[redovi];
    for(int i=0; i&lt;redovi; i++) mat.elementi[i]=nullptr;
    try {
        for(int i=0; i&lt;redovi; i++) {
            mat.elementi[i]=new Tip[kolone];
        }
    } catch (...) {
        UnistiMatricu(mat);
        throw;
    }
    return mat;
}

template&lt;typename Tip&gt;
void UnesiMatricu(char ime,Matrica&lt;Tip&gt;&amp;m)
{
<a name="1"></a><font color="#00FF00"><a href="match527-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    for(int i=0; i&lt;m.redovi; i++) {
        for(int j=0; j&lt;m.kolone; j++) {
            cout&lt;&lt;ime&lt;&lt;"("&lt;&lt;i+1&lt;&lt;","&lt;&lt;j+1&lt;&lt;") = ";
            cin&gt;&gt;m.elementi[i][j];
        }
    }
}

template&lt;typename Tip&gt;
void IspisiMatricu(const Matrica&lt;Tip&gt;&amp;mat,int sirina_ispisa,int preciznost=6,int treba_brisati=false)
</font>{
<a name="0"></a><font color="#FF0000"><a href="match527-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

    for(int i=0; i&lt;mat.redovi; i++) {
        for(int j=0; j&lt;mat.kolone; j++) {
            cout&lt;&lt;setw(sirina_ispisa)&lt;&lt;setprecision(preciznost)&lt;&lt;mat.elementi[i][j];
        }
        cout&lt;&lt;endl;
    }
}

template&lt;typename Tip&gt;
Matrica&lt;Tip&gt; ZbirMatrica(const Matrica&lt;Tip&gt;&amp;m1,const Matrica&lt;Tip&gt;&amp;m2)
{
    if(m1.redovi!=m2.redovi || m1.kolone!=m2.kolone) {
        throw domain_error("Matrice nemaju jednake dimenzije");
    }
    auto m3(StvoriMatricu&lt;Tip&gt;(m1.redovi,m1.kolone));
    for(int i=0; i&lt;m1.redovi; i++) {
</font>        for(int j=0; j&lt;m1.kolone; j++) {
            m3.elementi[i][j]=m1.elementi[i][j]+m2.elementi[i][j];
        }
    }
    return m3;
}

template&lt;typename Tip&gt;
<a name="3"></a><font color="#00FFFF"><a href="match527-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

Matrica&lt;Tip&gt; ProduktMatrica(const Matrica&lt;Tip&gt;&amp;m1,const Matrica&lt;Tip&gt;&amp;m2)
{
    if(m1.kolone!=m2.redovi) throw domain_error("Matrice nisu saglasne za mnozenje");
    auto m3(StvoriMatricu&lt;Tip&gt;(m1.redovi,m2.kolone));
    for(int i(0); i&lt;m3.redovi; i++) {
</font>        for(int j(0); j&lt;m3.kolone; j++) {
            m3.elementi[i][j]=0;
        }
    }
    for(int i=0; i&lt;m1.redovi; i++) {
        for(int j=0; j&lt;m2.kolone; j++) {
            for(int k=0; k&lt;m1.kolone; k++) {
                m3.elementi[i][j]+=m1.elementi[i][k]*m2.elementi[k][j];
            }
        }
    }
    return m3;
}

template&lt;typename Tip,typename Itertip&gt;
<a name="2"></a><font color="#0000FF"><a href="match527-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

Matrica&lt;Tip&gt;MatricniPolinom(const Matrica&lt;Tip&gt;&amp;a,int n,Itertip it)
{
    if(n&lt;0) {
        throw domain_error("Neispravan stepen polinoma");
    }
    if(a.redovi!=a.kolone) {
        throw domain_error("Matrica mora biti kvadratna");
    }

    auto jed(StvoriMatricu&lt;Tip&gt;(a.redovi,a.kolone));
    for(int i=0; i&lt;a.redovi; i++) {
</font>        for(int j=0; j&lt;a.kolone; j++) {
            if(i==j) jed.elementi[i][j]=1;
            else jed.elementi[i][j]=0;
        }
    }

    auto m3(StvoriMatricu&lt;Tip&gt;(a.redovi,a.kolone));
    for(int i=0; i&lt;a.redovi; i++) {
        for(int j=0; j&lt;a.kolone; j++) {
            m3.elementi[i][j]=0;
        }
    }

    vector&lt;Tip&gt;koef;
    for(int i=0; i&lt;=n; i++) {
        Tip x=*it++;
        koef.push_back(x);
    }

    for(int k=0; k&lt;koef.size(); k++) {
        if(k==0) {
            for(int i=0; i&lt;a.redovi; i++) {
                for(int j=0; j&lt;a.kolone; j++) {
                    m3.elementi[i][j]+=jed.elementi[i][j]*koef[k];
                }
            }
        } else {
            auto matrica(StvoriMatricu&lt;Tip&gt;(a.redovi,a.kolone));
            for(int i=0; i&lt;a.redovi; i++) {
                for(int j=0; j&lt;a.kolone; j++) {
<a name="4"></a><font color="#FF00FF"><a href="match527-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

                    matrica.elementi[i][j]=a.elementi[i][j];
                }
            }
            for(int i=1; i&lt;k; i++) {
                auto PomZaBrisanje=matrica;
</font>                matrica=ProduktMatrica(matrica,a);
                UnistiMatricu(PomZaBrisanje);
            }
            for(int i=0; i&lt;a.redovi; i++) {
                for(int j=0; j&lt;a.kolone; j++) {
                    m3.elementi[i][j]+=matrica.elementi[i][j]*koef[k];
                }
            }
            UnistiMatricu(matrica);
        }
    }
    UnistiMatricu(jed);
    return m3;
}

int main ()
{
    Matrica&lt;double&gt;a;
    Matrica&lt;double&gt;b;
    cout&lt;&lt;"Unesite dimenziju kvadratne matrice: ";
    int n;
    cin&gt;&gt;n;
    try {
        a=StvoriMatricu&lt;double&gt;(n,n);
        cout&lt;&lt;"Unesite elemente matrice A: \n";
        UnesiMatricu('A',a);
        cout&lt;&lt;"Unesite red polinoma: ";
        cin&gt;&gt;n;
        cout&lt;&lt;"Unesite koeficijente polinoma: ";
        vector&lt;double&gt;koeficijenti;
        for(int i=0; i&lt;=n; i++) {
            double k;
            cin&gt;&gt;k;
            koeficijenti.push_back(k);
        }
        double *p=&amp;koeficijenti[0];
        IspisiMatricu(b = MatricniPolinom(a,n,p),10);
    } catch(domain_error x) {
        cout&lt;&lt;x.what()&lt;&lt;endl;
    } catch(bad_alloc) {
        cout&lt;&lt;"Nema dovoljno memorije";
    }

    UnistiMatricu(a);
    UnistiMatricu(b);
    return 0;
}
</pre>
</body>
</html>
