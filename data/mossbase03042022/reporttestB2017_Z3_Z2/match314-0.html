<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5860.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5860.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;


bool JeLiSlovo(char c) {
    if ((c &gt;= 'a' &amp;&amp; c &lt;= 'z') || (c &gt;= 'A' &amp;&amp; c &lt;= 'Z')) return true;
    else return false;
}

bool JeLiCifra(char c) {
    if (c &gt;= '0' &amp;&amp; c &lt;= '9') return true;
    else return false;
}

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; IndeksPojmova;

IndeksPojmova KreirajIndeksPojmova(Knjiga k) {
    IndeksPojmova indeks;
    if (k.size() == 0) return indeks;
    for (auto it = k.begin(); it != k.end(); it++) {
        for (int i=0; i&lt;it-&gt;second.size(); i++) {
            for (int j=0; j&lt;it-&gt;second[i].length(); j++) {
                std::string pom;
                while ((JeLiSlovo(it-&gt;second[i][j]) || JeLiCifra(it-&gt;second[i][j])) &amp;&amp; j != it-&gt;second[i].length()) {
                    pom.push_back(it-&gt;second[i][j]);
                    j++;
                }
                
                std::transform(pom.begin(), pom.end(), pom.begin(), (int(*) (int))std::tolower);
                 auto it2(indeks.find(pom));
                 if (indeks.count(pom) == 0) {
                     if (pom.length() != 0) {
<a name="3"></a><font color="#00FFFF"><a href="match314-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

                        int ind = j-pom.length();
                        indeks.insert(std::pair&lt;std::string,
                        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt;(pom, {std::make_tuple(it-&gt;first, i+1, ind)}));
</font>                     }
                 }
                 else {
                     if (pom.length() != 0) {
                         int ind = j-pom.length();
                         (it2-&gt;second).insert(std::make_tuple(it-&gt;first, i+1, ind));
                     }
                 }
                
            }
            
        }
    }
    return indeks;
}

<a name="2"></a><font color="#0000FF"><a href="match314-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string s, IndeksPojmova i) {
    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; rez;
</font>    std::transform(s.begin(), s.end(), s.begin(), (int(*) (int))std::tolower);
    auto it(i.find(s));
    if (i.count(s) == 0) throw std::logic_error("Unesena rijec nije nadjena!");
    else return it-&gt;second;
}

<a name="0"></a><font color="#FF0000"><a href="match314-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

void IspisiIndeksPojmova(IndeksPojmova i) {
    std::cout&lt;&lt;"Kreirani indeks pojmova: \n";
    for (auto it = i.begin(); it != i.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for (auto x=(it-&gt;second).begin(); x != (it-&gt;second).end(); x++) {
            if (x != (it-&gt;second).begin()) std::cout&lt;&lt;", ";
</font><a name="1"></a><font color="#00FF00"><a href="match314-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

            std::cout&lt;&lt;std::get&lt;0&gt;(*x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*x);
        }
        std::cout&lt;&lt;std::endl;
</font>    }
}

int main ()
{
    std::string poglavlje, str;
    
    Knjiga k;
    do {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::getline(std::cin, poglavlje);
        if (poglavlje == ".") break;
        std::vector&lt;std::string&gt; v;
        int i=1;
        do {
<a name="4"></a><font color="#FF00FF"><a href="match314-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::getline(std::cin, str);
            v.push_back(str);
            if (str == ".") break;
</font>            i++;
        }
        while (str != ".");
        k.insert(std::make_pair(poglavlje, v));
    }
    while (poglavlje != ".");
    std::cout&lt;&lt;std::endl;
    
    IndeksPojmova i = KreirajIndeksPojmova(k);
    IspisiIndeksPojmova(i);
    std::cout&lt;&lt;std::endl;
    
    std::string pom;
    do {
        try {
            std::cout&lt;&lt;"Unesite rijec: ";
            std::getline(std::cin, pom);
            if (pom == ".") break;
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; a = PretraziIndeksPojmova(pom, i);
            for (auto b:a) {
                std::cout&lt;&lt;std::get&lt;0&gt;(b)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(b)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(b)&lt;&lt;" ";
            }
            std::cout&lt;&lt;std::endl;
        }
        catch(std::logic_error e) {
            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }
    while (pom != ".");
	return 0;
	
}



</pre>
</body>
</html>
