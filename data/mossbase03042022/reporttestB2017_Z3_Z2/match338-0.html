<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1253.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1253.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
<a name="2"></a><font color="#0000FF"><a href="match338-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

typedef std::map&lt; std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; &gt; indeks_pojmova;


bool DaLiJeSlovoiliCifra(char znak)
{
    return( (znak&gt;='A' &amp;&amp; znak&lt;='Z') || (znak&gt;='a' &amp;&amp; znak&lt;='z') || (znak&gt;='0' &amp;&amp; znak&lt;='9') );
</font>}
void PretvoriUMala(std::string &amp;s)
{
    for(int i=0; i&lt;int(s.length()); i++) {
        if(s.at(i)&gt;='A' &amp;&amp; s.at(i)&lt;='Z') s.at(i) += 32;
    }
}

indeks_pojmova KreirajIndeksPojmova(Knjiga k)
{
    indeks_pojmova mapa;

    for(auto it = k.begin(); it != k.end(); it++) {
        for(int j=0; j&lt;(it-&gt;second).size(); j++) { //(j+1) je broj stranice
            bool nije_rijec(1);
            int pocetak(0);

            for(int i=0; i&lt;(it-&gt;second.at(j)).length(); i++) { //it-&gt;second.at(j) je cijeli sadrzaj stranice
                if( !DaLiJeSlovoiliCifra((it-&gt;second.at(j)).at(i)) ) nije_rijec = true;
                else if(nije_rijec) {
                    nije_rijec = false;
                    pocetak = i;
                    while( i&lt;(it-&gt;second.at(j)).length() &amp;&amp; DaLiJeSlovoiliCifra((it-&gt;second.at(j)).at(i)) ) i++; //dolazimo do kraja rijeci
                    std::tuple&lt;std::string, int, int&gt; t;
                    std::get&lt;0&gt;(t) = it-&gt;first; //poglavlje
                    std::get&lt;1&gt;(t) = j+1;       //stranica
                    std::get&lt;2&gt;(t) = pocetak;   //index od kojeg pocinje rijec
                    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
                    skup.insert(t);

                    std::string s;
                    s = (it-&gt;second.at(j)).substr(pocetak, i-pocetak);
                    PretvoriUMala(s);
                    auto temp(mapa.find(s));
                    if(temp == mapa.end()) mapa.insert({s, skup});
                    else {
                        (temp-&gt;second).insert(t);
                    }

                    i--;  //jer smo sa petljom otisli iza kraja rijeci

                }

            }
        }
    }
    return mapa;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string rijec,const indeks_pojmova &amp;mapa)
{
    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
    bool prazan(true);
    for(auto it = mapa.begin(); it != mapa.end(); it++) {
        if(rijec == it-&gt;first) {
            for(auto it2 = it-&gt;second.begin(); it2 != it-&gt;second.end(); it2++) skup.insert(*it2);
            prazan = false;
        }
    }
    if(prazan) throw std::logic_error("Unesena rijec nije nadjena!");
    return skup;
}

void IspisiIndeksPojmova(const indeks_pojmova &amp;mapa)
{
<a name="0"></a><font color="#FF0000"><a href="match338-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

    for(auto it = mapa.begin(); it != mapa.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int i(1);
        for(auto x : it-&gt;second) {
            std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x);
</font>            if(i&lt;int(it-&gt;second.size())) std::cout&lt;&lt;", ";
            i++;
        }
        std::cout&lt;&lt;"\n";
    }
    
}


<a name="3"></a><font color="#00FFFF"><a href="match338-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

int main ()
{
    Knjiga k;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string poglavlje;
        std::getline(std::cin, poglavlje);
        if(poglavlje==std::string(".")) break;
</font>        std::vector&lt;std::string&gt; v;
        k.insert({poglavlje, v});
        auto it(k.find(poglavlje));
        for(int i=0;; i++) {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i+1&lt;&lt;": ";
            std::string temp;
            std::getline(std::cin, temp);
            if(temp==std::string(".")) break;
            it-&gt;second.push_back(temp);
        }
    }
    indeks_pojmova m;
    m = KreirajIndeksPojmova(k);
    std::cout&lt;&lt;"\nKreirani indeks pojmova:\n";
    IspisiIndeksPojmova(m);

    for(;;) {
        std::string rijec;
        std::cout&lt;&lt;"Unesite rijec: ";
        std::getline(std::cin, rijec);
        if(rijec==std::string(".")) break;
        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; pozicija;
        try {
            pozicija = PretraziIndeksPojmova(rijec, m);
        } catch(std::logic_error izuzetak) {
            std::cout&lt;&lt;izuzetak.what();
        }
<a name="1"></a><font color="#00FF00"><a href="match338-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

        for(auto x : pozicija) std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;" ";
        std::cout&lt;&lt;std::endl;
    }

    return 0;
</font>}
</pre>
</body>
</html>
