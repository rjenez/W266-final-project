<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7597.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8257.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match162-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

using std::map;
using std::string;
using std::vector;
using std::set;
using std::tuple;

typedef map&lt;string,vector&lt;string&gt;&gt; Knjiga;

typedef map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; indeksPojmova;

bool nijeSlovoNiBroj(char x) {
    if((x&gt;='A' &amp;&amp; x&lt;='Z') || (x&gt;='a' &amp;&amp; x&lt;='z') || (x&gt;='0' &amp;&amp; x&lt;='9'))
        return false;
    return true;
}
string ToLower(string s) {
    for(char &amp;x : s) {
        if(x&gt;='A' &amp;&amp; x&lt;='Z')
            x+=32;
    }
    return s;
}
 
indeksPojmova KreirajIndeksPojmova(const Knjiga &amp;knjiga) {
    indeksPojmova indeks;
    
    for(auto it=knjiga.begin();it!=knjiga.end();it++) { 
        vector&lt;string&gt; stranice = it-&gt;second;             // Stranice jednog poglavlja
        int brStranice=0;                               // Broj trenutne stranice
        for(const string &amp;stranica : stranice) {         // Prolazi kroz svaku stranicu 
            brStranice++;
            int i=0;
            while(i&lt;stranica.size()) {                  // Prolazi kroz stranicu i pronalazi sve pojmove
                int j=i;
                while(j&lt;stranica.size() &amp;&amp; nijeSlovoNiBroj(stranica.at(j))) j++; // Sve dok nije slovo ili broj
                i=j;
                if(i==stranica.size()) break;                                       // Dosao do kraja stranice
                while(j&lt;stranica.size() &amp;&amp; !nijeSlovoNiBroj(stranica.at(j))) j++; // Prodji kroz rijec do iduceg znaka interpunkcije
                string pojam = stranica.substr(i,j-i);
                if(indeks.count(ToLower(pojam))==0)                                  // Ako ne postoji u indeksu dodaj pojam i njegovu prvu poziciju u knjizi
                    indeks.insert({ToLower(pojam),{std::make_tuple(it-&gt;first,brStranice,i)}});
                else                                                             // Ako pojam vec postoji , samo dodaj poziciju na kojoj se nalazi
                    indeks[ToLower(pojam)].insert(std::make_tuple(it-&gt;first,brStranice,i));
                i=j;                                                            // Trazi iduci pojam
            }
        }
    }
    return indeks;
}

set&lt;tuple&lt;string,int,int&gt;&gt; PretraziIndeksPojmova(string rijec , indeksPojmova indeks) {
    if(indeks.count(ToLower(rijec))==0)
        throw std::logic_error("Pojam nije nadjen");
    return indeks[ToLower(rijec)];
}

void IspisiIndeksPojmova(indeksPojmova indeks) {
    for(auto it=indeks.begin();it!=indeks.end();it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int brojac=0;
        for(const auto &amp;pozicija : it-&gt;second) {
            std::cout&lt;&lt;std::get&lt;0&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(pozicija);
            brojac++;
            if(brojac!=(it-&gt;second).size())
                std::cout&lt;&lt;", ";
        }
        std::cout&lt;&lt;std::endl;
    } 
}

int main ()
{
    Knjiga knjiga;
    while(true) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        string poglavlje;
        if(std::cin.peek()=='.') break;
        std::getline(std::cin,poglavlje);
        int brStranice=1;
        vector&lt;string&gt; stranice(0);
        while(true) {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;brStranice&lt;&lt;": ";
            if(std::cin.peek()=='.') {
                std::cin.ignore(10000,'\n'); // OCISTI SPREMNIK ( da ne bi izaslo iz unutrasnje petlje )
                break;
            }
            string stranica;
            std::getline(std::cin,stranica);
            stranice.push_back(stranica);
            brStranice++;
        }
        knjiga.insert({poglavlje,stranice});
    }
    
    indeksPojmova indeks = KreirajIndeksPojmova(knjiga);
    std::cout&lt;&lt;"\nKreirani indeks pojmova:\n";
    IspisiIndeksPojmova(indeks);
    
    std::cout&lt;&lt;std::endl;
    std::cin.ignore(10000,'\n'); // OCISTI SPREMNIK
    while(true) {
        try {
            std::cout&lt;&lt;"Unesite rijec: ";
            if(std::cin.peek()=='.') break;
            string rijec;
            std::getline(std::cin,rijec);
            auto pozicije = PretraziIndeksPojmova(rijec,indeks);
            for(const auto &amp;pozicija : pozicije)
                std::cout&lt;&lt;std::get&lt;0&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(pozicija)&lt;&lt;" ";
            std::cout&lt;&lt;std::endl;
        }
        catch(std::logic_error e) {
            std::cout&lt;&lt;"Unesena rijec nije nadjena!\n";
        }
    }
	return 0;
</font>}
</pre>
</body>
</html>
