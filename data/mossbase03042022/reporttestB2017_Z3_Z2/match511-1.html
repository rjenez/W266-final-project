<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6049.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1600.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

bool JeLiSlovo_Cifra (char znak)
{
    if((znak&gt;='a' &amp;&amp; znak&lt;='z') || (znak&gt;='A' &amp;&amp; znak&lt;='Z') || (znak&gt;='0' &amp;&amp; znak &lt;='9'))
        return true;
    else return false;
}

std::vector&lt;std::string&gt; PovadiRijeci (std::string recenica)
{
    std::vector&lt;std::string&gt; rijeci;

    if(recenica.size()==0)
        return rijeci;

    std::string pom;

    for(int i=0; i&lt;recenica.size(); i++) {

        if(JeLiSlovo_Cifra(recenica.at(i)))
            pom+=recenica.at(i);

        else {

            if(pom.size()&gt;0) {

                auto it=std::find(rijeci.begin(), rijeci.end(), pom);

                if(it==rijeci.end())
                    rijeci.push_back(pom);
            }
            pom="";
        }
    }
    if(pom.size()&gt;0) {

        auto it=std::find(rijeci.begin(), rijeci.end(), pom);
        if(it==rijeci.end())
            rijeci.push_back(pom);
    }
    return rijeci;
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga novaknjiga)
{

    for(auto it=novaknjiga.begin(); it!=novaknjiga.end(); it++) {
        for(int i=0; i&lt;(it-&gt;second).size(); i++) {
            for(int j=0; j&lt;((it-&gt;second)[i]).size(); j++)
                if(((it-&gt;second)[i])[j]&gt;='A' &amp;&amp; ((it-&gt;second)[i])[j]&lt;='Z') ((it-&gt;second)[i])[j]+=32;
        }
    }
    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; za_vratiti;

    for(auto par: novaknjiga) {
        int brojac=1;

        for(auto stranica: par.second) {
            auto v=PovadiRijeci(stranica);

            for(int i=0; i&lt;v.size(); i++) {

                for(int j=0; j&lt;=stranica.size()-v.at(i).size(); j++) {

                    std::string pom;
                    pom=stranica.substr(j, v.at(i).size());

                    if(pom==v.at(i)) {

                        std::tuple&lt;std::string, int, int&gt; za_ubaciti;
                        za_ubaciti=std::make_tuple(par.first, brojac, j);
                        za_vratiti[pom].insert(za_ubaciti);
                    }
                }
            }
            brojac++;
        }
    }
    return za_vratiti;
}

void IspisiIndeksPojmova (std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa)
{
    std::cout&lt;&lt;std::endl&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;std::endl;

    for (auto iter=mapa.begin(); iter!=mapa.end(); iter++) {

        std::cout&lt;&lt;iter-&gt;first&lt;&lt;": ";

        int brojac(iter-&gt;second.size());

        for(auto x: iter-&gt;second) {
            if(brojac!=1)
                std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;", ";
            else
                std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x);
            brojac--;
        }
        std::cout&lt;&lt;std::endl;
    }
}

<a name="3"></a><font color="#00FFFF"><a href="match511-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova (std::string rijec, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa)
{
    for(int i=0; i &lt; rijec.length(); i++)
        if(rijec[i] &gt;= 'A' &amp;&amp; rijec[i] &lt;= 'Z') rijec[i]+=32;
</font>
    auto iter(mapa.find(rijec));

    if(iter==mapa.end())
        throw std::logic_error ("Unesena rijec nije nadjena!");
    else
        return iter-&gt;second;
}


<a name="2"></a><font color="#0000FF"><a href="match511-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

int main ()
{
    Knjiga novaknjiga;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string uneseno_poglavlje;
        std::getline(std::cin, uneseno_poglavlje);
        if(uneseno_poglavlje==".")
            break;
        novaknjiga[uneseno_poglavlje];
</font>
        std::vector&lt;std::string&gt; stranice;
        int brojac=1;
        for(;;) {
<a name="1"></a><font color="#00FF00"><a href="match511-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;brojac&lt;&lt;": ";
            std::string unesena_stranica;
            std::getline(std::cin, unesena_stranica);
            if(unesena_stranica==".")
                break;
            stranice.push_back(unesena_stranica);
            brojac++;
        }
        novaknjiga[uneseno_poglavlje]=stranice;
</font>    }

    auto indeksi=KreirajIndeksPojmova(novaknjiga);
    IspisiIndeksPojmova(indeksi);
    for(;;) {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string unos;
        std::cin&gt;&gt;unos;
        if(unos==".")
            break;
        try {
<a name="0"></a><font color="#FF0000"><a href="match511-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

            auto skup=PretraziIndeksPojmova (unos, indeksi);
            for(auto x: skup) {
                std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;" ";
            }
            std::cout&lt;&lt;std::endl;
        } catch (std::logic_error e) {
</font>            std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
        }
    }


    return 0;
}
</pre>
</body>
</html>
