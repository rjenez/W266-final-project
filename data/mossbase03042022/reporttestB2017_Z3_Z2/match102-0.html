<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5979.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5979.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string,std::vector&lt;std::string&gt;&gt; Knjiga;

std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga knjiga){
<a name="0"></a><font color="#FF0000"><a href="match102-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_91.gif"/></a>

    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; finalni;
    for (auto x  : knjiga) {
        for (int  i = 0;i&lt;x.second.size();i++) {
            int razmak=1;
            std::string::iterator it=x.second[i].begin();
            while (it&lt;x.second[i].end()) {
                if(*it &lt; '0'  ||  *it &gt; '9'  &amp;&amp;  *it &lt; 'A' || *it &gt; 'Z'  &amp;&amp;  *it &lt;'a' ||  *it&gt;'z'){
                    razmak=1;
                    it++;
                }
                else if(razmak==1){
                    std::string::iterator it2=it;
                    while (it &lt;x.second[i].end() &amp;&amp;  ((*it&gt;='0' &amp;&amp;  *it &lt;= '9') || (*it &gt;= 'A'&amp;&amp; *it &lt;= 'Z') ||  (*it &gt;= 'a'&amp;&amp; *it &lt;= 'z'))) it++;
                    std::string s(x.second[i].substr(it2-x.second[i].begin(),it-it2));
                    for (char &amp; j : s) {
                        j=std::tolower(j);
                    }
                    finalni[s];
                    finalni[s].insert(std::make_tuple(x.first,i+1,int(it2-x.second[i].begin())));
                    razmak=0;
                }
            }
        }
    }
    return finalni;
}

std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(std::string rijec, std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; mapaa){
   for (int i = 0; i &lt; rijec.size(); i++) {
       rijec[i]=std::tolower(rijec[i]);
   }
    if(!mapaa.count(rijec))
        throw std::logic_error("Unesena rijec nije nadjena!");
    else 
        return((*mapaa.lower_bound(rijec)).second);
}
void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; mapaa){
    for (auto i : mapaa ) {
        std::cout &lt;&lt; i.first &lt;&lt;":";
        auto it = i.second.begin();
        for (int j=0; j &lt; i.second.size(); j++) {
            if(j&lt;i.second.size()-1)
                std::cout &lt;&lt; " "&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;"," ;
            else
                std::cout &lt;&lt; " "&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it) &lt;&lt; std::endl;
            it++;
        }   
    }
}
int main ()
{
    Knjiga knjiga;
    while (1) {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::string s;
        std::getline(std::cin,s);
        if(s[0]=='.')
            break;
        std::vector&lt;std::string&gt; vs;
        for (int i = 0;; i++) {
            std::string recenica;
            std::cout &lt;&lt; "Unesite sadrzaj stranice "&lt;&lt;i+1&lt;&lt;": ";
            std::getline(std::cin,recenica);
            if(recenica[0]=='.')
            break;
            vs.push_back(recenica);
        }
        knjiga.insert(std::make_pair(s,vs));
    }
    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indekspojmova=KreirajIndeksPojmova(knjiga);
    std::cout&lt;&lt;std::endl &lt;&lt; "Kreirani indeks pojmova:" &lt;&lt; std::endl;
    IspisiIndeksPojmova(indekspojmova);
    while (true) {
        std::cout &lt;&lt; "Unesite rijec: ";
        std::string s;
        std::getline(std::cin,s);
        if(s[0]=='.')
            break;
        std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup;
        try {
            skup=PretraziIndeksPojmova(s,indekspojmova);
            auto it=skup.begin();
            for (int i = 0; i &lt; skup.size(); i++) {
                std::cout &lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" " ;
                it++;
            }
            std::cout &lt;&lt; std::endl;
        }
        catch (std::logic_error error) {
            std::cout &lt;&lt; error.what() &lt;&lt; std::endl;
        }
        
    }
	return 0;
</font>}
</pre>
</body>
</html>
