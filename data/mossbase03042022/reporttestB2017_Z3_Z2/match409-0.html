<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2539.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2539.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

bool DaLiJeSlovo(char znak){
    return ((znak &lt;= 'Z' &amp;&amp; znak &gt;= 'A') || (znak &gt;= 'a' &amp;&amp; znak &lt;= 'z') || (znak &gt;= '0' &amp;&amp; znak &lt;= '9'));
}

std::vector&lt;std::string&gt; DajRijeci(std::string s){
    std::vector&lt;std::string&gt; rezultat;
    for(int i = 0; i &lt; s.length(); i++){
        if(DaLiJeSlovo(s.at(i))){
            int kraj = i;
            std::string rijec;
            for(;;){
                if(kraj == s.length() || (!DaLiJeSlovo(s.at(kraj)))) break;
                else kraj++;
            }
            rijec = s.substr(i,kraj-i);
            i = kraj;
            rezultat.push_back(rijec);
        }
    }
    return rezultat;
}

std::vector&lt;int&gt; PozicijeURecenici(std::string recenica, std::string rijec){
    std::vector&lt;int&gt; rezultat;
    for(int i = 0; i &lt; recenica.length(); i++){
        if(recenica.at(i) == rijec.at(0)){
            bool jeste = true;
            for(int j = 0; j &lt; rijec.length(); j++){
                if((i+j &gt;= recenica.length()) || (recenica.at(i+j) != rijec.at(j))) {
                    jeste = false;
                    break;
                }
            }
<a name="3"></a><font color="#00FFFF"><a href="match409-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            if(jeste) rezultat.push_back(i);
        }
    }
    return rezultat;
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga book){
</font>    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indeks;
    std::set&lt;std::string&gt; pogl;
    std::set&lt;int&gt; str;
    for(auto it = book.begin(); it != book.end(); it++){
        for(int i = 0; i &lt; it-&gt;second.size(); i++){
            std::string mirza = it-&gt;second.at(i);
            std::transform(mirza.begin(),mirza.end(),mirza.begin(),::tolower);
            std::vector&lt;std::string&gt; rijeci = DajRijeci(mirza);
            for(int j = 0; j &lt; rijeci.size(); j++){
                if(!indeks.count(rijeci.at(j))){
                    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; x;
                    std::vector&lt;int&gt; pozicije = PozicijeURecenici(mirza,rijeci.at(j));
                    for(auto broj : pozicije){
                         x.insert(std::make_tuple(it-&gt;first,i+1,broj));
                    }
                    indeks.insert(std::make_pair(rijeci.at(j),x));
                    
                }
                else if(str.count(i) == 0 || pogl.count(it-&gt;first) == 0){
                    auto it1(indeks.find(rijeci.at(j)));
                    std::vector&lt;int&gt; pozicije = PozicijeURecenici(mirza,rijeci.at(j));
                    for(auto broj : pozicije){
                         it1-&gt;second.insert(std::make_tuple(it-&gt;first,i+1,broj));
                    }
                }
            }
            str.insert(i); 
        }
        pogl.insert(it-&gt;first);
    }
    return indeks;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string rijec, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indeks){
    auto it(indeks.find(rijec));
    if(it == indeks.end()) throw std::logic_error("Pojam nije nadjen");
    else return it-&gt;second;
}

<a name="0"></a><font color="#FF0000"><a href="match409-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indeks){
    for(auto it = indeks.begin(); it != indeks.end(); it++){
        std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        auto nesto = it-&gt;second;
</font>        int br = 0;
        for(auto it1 = nesto.begin(); it1 != nesto.end(); it1++){
<a name="1"></a><font color="#00FF00"><a href="match409-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            if(br == nesto.size() - 1) std::cout &lt;&lt; std::get&lt;0&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it1);
</font><a name="4"></a><font color="#FF00FF"><a href="match409-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            else std::cout &lt;&lt; std::get&lt;0&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it1) &lt;&lt; ", "; 
</font>            br++;
        }
        std::cout &lt;&lt; std::endl;
    }
}

int main ()
{
    Knjiga book;
    for(;;){
        int br(1);
        std::vector&lt;std::string&gt; v;
        std::string pogl,str;
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        getline(std::cin,pogl);
        if(pogl == ".") break;
        for(;;){
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; br++ &lt;&lt; ": ";
            getline(std::cin,str);
            if(str == ".") break;
            v.push_back(str);
        }
        book.insert(std::make_pair(pogl,v));
    }
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Kreirani indeks pojmova: " &lt;&lt; std::endl;
    auto indeks = KreirajIndeksPojmova(book);
    IspisiIndeksPojmova(indeks);
    for(;;){
        std::string rijec;
        std::cout &lt;&lt; "Unesite rijec: ";
        getline(std::cin,rijec);
        if(rijec == ".") break;
        try{
            auto nesto = PretraziIndeksPojmova(rijec,indeks);
            int br = 0;
            for(auto it1 = nesto.begin(); it1 != nesto.end(); it1++){
<a name="2"></a><font color="#0000FF"><a href="match409-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                if(br == nesto.size() - 1) std::cout &lt;&lt; std::get&lt;0&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it1);
</font><a name="5"></a><font color="#FF0000"><a href="match409-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                else std::cout &lt;&lt; std::get&lt;0&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it1)&lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it1) &lt;&lt; " "; 
</font><a name="5"></a><font color="#FF0000"><a href="match409-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                br++;
</font>            }
            std::cout &lt;&lt; std::endl;
        }
        catch(std::exception &amp;e){
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
        }
    }
	return 0;
}
</pre>
</body>
</html>
