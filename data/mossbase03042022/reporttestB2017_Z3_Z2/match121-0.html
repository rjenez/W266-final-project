<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6008.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6008.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;

typedef std::map&lt;std::string, std::vector&lt;std:: string&gt;&gt; Knjiga;

std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga tekst)
{
<a name="0"></a><font color="#FF0000"><a href="match121-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_93.gif"/></a>

    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; skup;
    auto it(tekst.begin());
    int stranica(0);
    while (it!=tekst.end()) {
        auto it2((*it).second);
        for (int i=0; i&lt;it2.size(); i++) {
            for (int j=0; j&lt;(it2).at(stranica).size(); j++) {
                while (!(std::isalnum(it2.at(stranica).at(j))) &amp;&amp; j&lt;it2.at(stranica).size()) i++;
                int polozaj(j);
                std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; pomocna {std::make_tuple((*it).first,stranica+1,polozaj)};
                std::string gr;
                while (std::isalnum((it2).at(stranica).at(j)) &amp;&amp; j&lt;it2.at(stranica).size()) {
                    gr.push_back(it2.at(stranica).at(j));
                    j++;
                    if (j==it2.at(stranica).size()) break;
                }
                auto trazi(skup.find(gr));
                if (trazi==skup.end()) skup.insert({gr,pomocna});
                else skup[gr].insert({std::make_tuple((*it).first,stranica+1,polozaj)});
            }
            stranica++;
        }
        it++;
        stranica=0;
    }

    return skup;
}

std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova (std::string rijec, std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indeks)
{
    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; pozicija;
    auto it(indeks.find(rijec));
    if (it==indeks.end()) throw std::logic_error ("Unesena rijec nije nadjena!");
    else pozicija=indeks[rijec];
    return pozicija;
}

void IspisiIndeksPojmova (std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indeks)
{
    auto it(indeks.begin());
    while (it!=indeks.end()) {
        std::cout&lt;&lt;(*it).first&lt;&lt;": ";
        auto it2((*it).second);
        for (auto pom=it2.begin(); pom!=--it2.end(); ++pom) std::cout&lt;&lt;std::get&lt;0&gt;(*pom)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*pom)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*pom)&lt;&lt;", ";
        auto pom=--it2.end();
        std::cout&lt;&lt;std::get&lt;0&gt;(*pom)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*pom)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*pom);
        it++;
        std::cout&lt;&lt;std::endl;
    }
}

int main ()
{
    Knjiga knjiga;
    auto it(knjiga.begin());
    for (;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string poglavlje;
        std::getline(std::cin,poglavlje);
        if (poglavlje==".") break;
        int i(1);
        std::vector&lt;std::string&gt; pomocni;
        for (;;) {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::string stranica;
            std::getline(std::cin,stranica);
            if (stranica==".") break;
            for(int i = 0; i&lt;stranica.size(); i++) {
                stranica.at(i) = tolower(stranica.at(i));
            }
            pomocni.push_back(stranica);
            i++;
        }
        knjiga.insert({poglavlje,pomocni});
    }
    std::cout&lt;&lt;std::endl;
    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; skup;
    skup=KreirajIndeksPojmova(knjiga);
    std::cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(skup);
    for (;;) {
        try {
            std::cout&lt;&lt;"Unesite rijec: ";
            std::string rijec;
            std::getline(std::cin,rijec);
            if (rijec==".") break;
            auto pozicija(PretraziIndeksPojmova(rijec,skup));
            for (auto x:pozicija) std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;" ";
            std::cout&lt;&lt;std::endl;
        } catch (std::logic_error l) {
            std::cout&lt;&lt;l.what()&lt;&lt;std::endl;
        }
    }
    return 0;
</font>}</pre>
</body>
</html>
