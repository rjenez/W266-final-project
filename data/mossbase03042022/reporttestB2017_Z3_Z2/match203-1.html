<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8705.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5774.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;cctype&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
//Provjereno koliko je bilo moguce, jos uvijek postoje nedoumice, poslano.
//?Da li se prilikom unosa razlikuju velika i mala slova
typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
<a name="0"></a><font color="#FF0000"><a href="match203-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_95.gif"/></a>

typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; _Indeks_;
std::string &amp;sljedeca_rijec(const std::vector&lt;std::string&gt; &amp;v, int &amp;i, int &amp;j, std::string &amp;s)
{
    for (; i &lt; v.size(); ++i, j = 0)
        for (; j &lt; v.at(i).length(); ++j)
            if ((j == 0 || !std::isalnum(v.at(i).at(j-1))) &amp;&amp; std::isalnum(v.at(i).at(j)))
                for (;; s += std::tolower(v.at(i).at(j)), ++j)
                    if (j == v.at(i).length() || !std::isalnum(v.at(i).at(j))) return s;
    return s;
}
_Indeks_ KreirajIndeksPojmova(const Knjiga &amp;k)
{
    _Indeks_ mapa;
    for (const auto &amp;p : k)
    {
        int i(0), j(0);
        for (std::string s; sljedeca_rijec(p.second, i, j, s).length(); s.resize(0))
            mapa[s].insert(decltype(*mapa[s].begin()) { p.first, i+1, j - s.size() });
    }
    return mapa;
}
//?Da li se pretpostavlja da kljucna polja indeksa sadrze samo mala slova
std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(const std::string &amp;s, const _Indeks_ &amp;ind)
{
    for (auto &amp;p : ind)
        if (p.first.length() == s.length() &amp;&amp; std::equal(s.begin(), s.end(), p.first.begin(), [](char a, char b) {
            return std::tolower(a) == std::tolower(b); 
        })) return p.second;
    throw std::logic_error("Pojam nije nadjen");
}
//?Kako treba ispisati newline
void IspisiIndeksPojmova(const _Indeks_ &amp;ind)
{
    for (const auto &amp;el : ind)
    {
        std::cout &lt;&lt; (&amp;el != &amp;*ind.begin() ? "\n" : "") &lt;&lt; el.first &lt;&lt; ": ";
        for (auto it(el.second.begin()); it != el.second.end(); it++)
            std::cout &lt;&lt; (it != el.second.begin() ? ", " : "") &lt;&lt; std::get&lt;0&gt;(*it) &lt;&lt; '/' &lt;&lt; std::get&lt;1&gt;(*it) &lt;&lt; '/' &lt;&lt; std::get&lt;2&gt;(*it);
    }
}
int main()
{
    Knjiga k;
    std::string s, t;
    while (std::cout &lt;&lt; "Unesite naziv poglavlja: ", std::getline(std::cin, s), s != ".")
        for (int i(0); std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i+1 &lt;&lt; ": ", std::getline(std::cin, t), t != "."; i++)
            k[s].push_back(t);
    _Indeks_ ind(KreirajIndeksPojmova(k));
    std::cout &lt;&lt; "\nKreirani indeks pojmova:\n";
    IspisiIndeksPojmova(ind);
    while (std::cout &lt;&lt; "\nUnesite rijec: ", std::getline(std::cin, s), s != ".")
        try { for (auto &amp;el : PretraziIndeksPojmova(s, ind)) std::cout &lt;&lt; std::get&lt;0&gt;(el) &lt;&lt; '/' &lt;&lt; std::get&lt;1&gt;(el) &lt;&lt; '/' &lt;&lt; std::get&lt;2&gt;(el) &lt;&lt; ' '; }
        catch (...) { std::cout &lt;&lt; "Unesena rijec nije nadjena!"; }
</font>	return 0;
}</pre>
</body>
</html>
