<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6156.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt;  INDEKS_POJMOVA;

bool je_slovo(char a);
int n_ta_rijec(const std::string &amp;tekst, int n);
std::string extract_word(const std::string &amp;tekst, int n);
void mala_slova(std::string &amp;a);


INDEKS_POJMOVA KreirajIndeksPojmova(Knjiga naruto);
std::set&lt; std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(std::string rijec,  std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; &gt; indeks);
void IspisiIndeksPojmova( INDEKS_POJMOVA indeks);

int main ()
{
    Knjiga naruto;
    std::vector&lt;std::string&gt; stranice;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string naziv_poglavlja {},temp_stranica {};
        std::cin&gt;&gt;naziv_poglavlja;
        if(naziv_poglavlja==".")break;
        stranice.resize(0);
        std::cin.ignore(1000,'\n');
        for(int i(1);; i++) {
<a name="4"></a><font color="#FF00FF"><a href="match316-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::getline(std::cin,temp_stranica);

            //dodavanje stranice u poglavlje
            stranice.push_back(temp_stranica);
            //end
            if(temp_stranica==".")break;
</font>        }
        //dodavanje poglavlja u knjigu
        naruto[naziv_poglavlja]=stranice;
        //end
    }
    std::cout&lt;&lt;"\nKreirani indeks pojmova:";
    auto indeks(KreirajIndeksPojmova(naruto));
    IspisiIndeksPojmova(indeks);
    std::string test;
    for(;;) {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::cin&gt;&gt;test;
        if(test==".")break;
        try {
         
            auto pozicije(PretraziIndeksPojmova(test,indeks));
            for(auto i=pozicije.begin(); i!=pozicije.end(); i++) {
                std::cout&lt;&lt;std::get&lt;0&gt;(*i)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*i)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*i)&lt;&lt;" ";
            }
        } catch(...) {
            std::cout&lt;&lt; "Unesena rijec nije nadjena!";
        }
        std::cout&lt;&lt;"\n";
    }



    return 0;
}

<a name="0"></a><font color="#FF0000"><a href="match316-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

void IspisiIndeksPojmova( INDEKS_POJMOVA indeks)
{
    std::cout&lt;&lt;"\n";
    for(auto it = indeks.begin(); it != indeks.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;":";
        for(auto it2 = (it-&gt;second).begin(); it2 != (it-&gt;second).end(); it2++) {
            if(it2 == (it-&gt;second).begin()) {
</font>                std::cout&lt;&lt;" ";
            } else {
<a name="1"></a><font color="#00FF00"><a href="match316-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

                std::cout&lt;&lt;", ";
            }
            std::cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2);
        }
        std::cout&lt;&lt;std::endl;
</font>    }
}

<a name="2"></a><font color="#0000FF"><a href="match316-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

std::set&lt; std::tuple&lt;std::string,int,int&gt; &gt; PretraziIndeksPojmova(std::string rijec, INDEKS_POJMOVA indeks)
{
    std::set&lt; std::tuple&lt;std::string,int,int&gt;&gt; pozicije;
</font>   
    
    if( indeks.count(rijec) ) {
    auto it( indeks.find(rijec));
    auto y = it-&gt;second;
        for(auto it2 = y.begin(); it2 != y.end(); it2++) {
            auto var(*it2);
            pozicije.insert(var);
        }
    } else {
        throw std::logic_error("Pojam nije nadjen");
    }
    return pozicije;
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; &gt; KreirajIndeksPojmova(Knjiga naruto)
{
    INDEKS_POJMOVA mapa;
    std::string stranica {},temp {};
    for(auto it = naruto.begin(); it != naruto.end(); it++) {
        //idem kroz poglavlja
        for(int j = 0; j &lt; (it-&gt;second).size(); j++ ) {
            //idem kroz stranice
            mala_slova((it-&gt;second).at(j));
            stranica=(it-&gt;second).at(j);
            for(int i=1; n_ta_rijec(stranica,i)&lt;stranica.length(); i++) {
                //nasao i-tu rijec na stranici
                temp = extract_word(stranica,n_ta_rijec(stranica,i));
                if( mapa.count(temp)) {
                    (mapa.find(temp))-&gt;second.insert(std::tuple&lt;std::string,int,int&gt;(it-&gt;first, j+1,n_ta_rijec(stranica,i)));
                } else {
                    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; a;
<a name="3"></a><font color="#00FFFF"><a href="match316-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

                    a.insert(std::tuple&lt;std::string,int,int&gt;(it-&gt;first,j+1,n_ta_rijec(stranica,i)));
                    mapa.insert(std::pair&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt;(temp,a) );
</font>                }
            }
        }
    }
    return mapa;
}

bool je_slovo(char a)
{
    if( (a&gt;='a' &amp;&amp; a&lt;='z') || (a&gt;='A' &amp;&amp; a&lt;='Z') || ( a&gt;='0' &amp;&amp; a&lt;='9'))return true;
    return false;
}

int n_ta_rijec(const std::string &amp;tekst, int n)
{
    bool neslovo(true);
    int br_rijeci(0);
    for(int i=0; i&lt;tekst.length(); i++) {
        if(!je_slovo(tekst[i])) {
            neslovo=true;
        } else {
            if(neslovo) {
                br_rijeci++;
                if(n==br_rijeci)return i;
            }
            neslovo=false;
        }
    }
    return tekst.length();
}

std::string extract_word(const std::string &amp;tekst, int n)
{
    std::string rijec {};
    for(int i=n; i&lt;tekst.length(); i++) {
        if(!je_slovo(tekst[i]))break;
        rijec+=tekst[i];
    }
    return rijec;
}

void mala_slova(std::string &amp;a)
{
    for(int i=0; i&lt;a.length(); i++) {
        if( a[i]&gt;='A' &amp;&amp; a[i]&lt;='Z' )a[i]+='a'-'A';
    }
}



</pre>
</body>
</html>
