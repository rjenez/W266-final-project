<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7165.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3402.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;iterator&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
typedef std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; LokacijePojma;
typedef std::map&lt;std::string, LokacijePojma&gt; Pojmovi;


Pojmovi KreirajIndeksPojmova(Knjiga knjiga)
{
<a name="0"></a><font color="#FF0000"><a href="match630-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    Pojmovi indeks_pojmova;
    for(auto it(knjiga.begin()); it!=knjiga.end(); it++) {
        for(int i(0); i&lt;it-&gt;second.size(); i++) {
            for(int j(0); j&lt;it-&gt;second.at(i).size(); j++) {
</font>                while(j&lt;it-&gt;second.at(i).size() &amp;&amp; !(std::isalnum(it-&gt;second.at(i).at(j))) ) j++;
                int pozicija(j);
                std::string rijec;
                while(j&lt;it-&gt;second.at(i).size() &amp;&amp; std::isalnum(it-&gt;second.at(i).at(j))) {
                    rijec.push_back(it-&gt;second.at(i).at(j));
                    j++;
                }
                for(int k(0); k&lt;int(rijec.length()); k++) rijec.at(k)=std::tolower(rijec.at(k));
                if(std::distance(indeks_pojmova.begin(),indeks_pojmova.end())==0) indeks_pojmova.insert({rijec, {std::make_tuple(it-&gt;first, i+1, pozicija)}});
                else {
                    auto it_pojmovi(indeks_pojmova.begin());
                    bool postoji_rijec(false);
                    for(it_pojmovi=indeks_pojmova.begin(); it_pojmovi!=indeks_pojmova.end(); it_pojmovi++)
                        if(it_pojmovi-&gt;first==rijec) {
                            postoji_rijec=true;
                            break;
                        }
                    if(postoji_rijec) it_pojmovi-&gt;second.insert(std::make_tuple(it-&gt;first, i+1, pozicija));
                    else indeks_pojmova.insert({rijec, {std::make_tuple(it-&gt;first, i+1, pozicija)}});
                }
            }
        }
    }
    return indeks_pojmova;
}

LokacijePojma PretraziIndeksPojmova(std::string rijec, Pojmovi indeks_pojmova)
{
    auto it(indeks_pojmova.find(rijec));
    if(it==indeks_pojmova.end()) throw std::logic_error("Unesena rijec nije nadjena!");
    return it-&gt;second;
}

void IspisiIndeksPojmova(Pojmovi indeks_pojmova)
{
    std::cout &lt;&lt; "\nKreirani indeks pojmova:\n";
<a name="1"></a><font color="#00FF00"><a href="match630-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    for(auto i(indeks_pojmova.begin()); i!=indeks_pojmova.end(); i++) {
        std::cout &lt;&lt; i-&gt;first &lt;&lt; ":";
        for(auto j(i-&gt;second.begin()); j!=i-&gt;second.end(); j++) {
</font>            if(j!=i-&gt;second.begin()) std::cout &lt;&lt; ",";
            std::cout&lt;&lt; " " &lt;&lt; std::get&lt;0&gt;(*j) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*j) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*j);
        }
        std::cout &lt;&lt; std::endl;
    }
}

void NapraviKnjigu(Knjiga &amp;knjiga)
{
    for(;;) {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::string naziv_poglavlja;
        std::getline(std::cin, naziv_poglavlja);
        if(naziv_poglavlja==".") break;
        std::vector&lt;std::string&gt; tekst;
        for(int i(1); i&gt;0; i++) {
<a name="2"></a><font color="#0000FF"><a href="match630-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

            std::string stranica;
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i &lt;&lt; ": ";
            std::getline(std::cin, stranica);
            if(stranica==".") break;
            tekst.push_back(stranica);
        }
        knjiga.insert({naziv_poglavlja,tekst});
</font>    }
}

void UnosRijeciZaPretragu(Pojmovi indeks_pojmova){
    for(;;){
        try{
            std::string rijec;
            std::cout &lt;&lt; "Unesite rijec: "; 
            std::getline(std::cin, rijec);
            if(rijec==".") break;
            LokacijePojma lokacije(PretraziIndeksPojmova(rijec, indeks_pojmova));
<a name="3"></a><font color="#00FFFF"><a href="match630-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            for(auto i(lokacije.begin()); i!=lokacije.end(); i++)
                std::cout &lt;&lt; std::get&lt;0&gt;(*i) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*i) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*i) &lt;&lt; " ";
</font>            std::cout &lt;&lt; std::endl;
        }
        catch(std::logic_error e){
            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
        }
    }
}

int main(){
    Knjiga knjiga;
    NapraviKnjigu(knjiga);
    Pojmovi indeks_pojmova(KreirajIndeksPojmova(knjiga));
    IspisiIndeksPojmova(indeks_pojmova);
    UnosRijeciZaPretragu(indeks_pojmova);
    return 0;
}
</pre>
</body>
</html>
