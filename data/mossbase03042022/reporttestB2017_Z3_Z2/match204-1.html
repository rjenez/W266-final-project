<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6787.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9099.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
<a name="1"></a><font color="#00FF00"><a href="match204-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

typedef std::map&lt;std::string, std::vector&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; IndeksPojmova;

IndeksPojmova KreirajIndeksPojmova(Knjiga knjiga)
{
    IndeksPojmova noviIndeks;
    for(auto itK = knjiga.begin(); itK != knjiga.end(); itK++)
    {
        auto stranica = itK-&gt;second;
        for(auto i = 0; i &lt; stranica.size(); i++)
        {
            std::string tekstStranice = stranica[i];
            std::string rijec = "";
            for(auto j = 0; j &lt;= tekstStranice.size(); j++)
            {
                if(!isalnum(tekstStranice[j]) || tekstStranice[j] == '\0')
                {
                    if(rijec != "")
                    {
                        std::tuple&lt;std::string, int, int&gt; podaciORijeci = std::make_tuple(itK-&gt;first, i + 1, j - rijec.length());
                        auto checkIT(noviIndeks.find(rijec));
                        
                        if(checkIT == noviIndeks.end())
                            noviIndeks.insert({rijec, {podaciORijeci}});
                        else
                            checkIT-&gt;second.push_back(podaciORijeci);
                            
                        rijec = "";
                    }
                }
                else
                    rijec += tolower(tekstStranice[j]);
            }
            
        }
    }
    return noviIndeks;
</font>}
<a name="3"></a><font color="#00FFFF"><a href="match204-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_12.gif"/></a>

std::vector&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(std::string kljuc, IndeksPojmova index)
{
    //pretvoriti u lowercase
    std::string kljucTransf = "";
    for(auto i = 0; i &lt; kljuc.length(); i++)
        kljucTransf += tolower(kljuc[i]);
        
    if(index.count(kljucTransf))
    {
        std::vector&lt;std::tuple&lt;std::string, int, int&gt;&gt; pozicije = index[kljucTransf];
        return pozicije;
    }
    else
        throw std::logic_error("Unesena rijec nije nadjena!");
</font>}
<a name="2"></a><font color="#0000FF"><a href="match204-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

void IspisiIndeksPojmova(IndeksPojmova index)
{
    for(auto it = index.begin(); it != index.end(); it++)
    {
        std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        for(auto i = 0; i &lt; it-&gt;second.size(); i++)
        {
            std::cout &lt;&lt; std::get&lt;0&gt;(it-&gt;second[i]) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(it-&gt;second[i])
            &lt;&lt;"/" &lt;&lt; std::get&lt;2&gt;(it-&gt;second[i]);
            if(i &lt; it-&gt;second.size() - 1)
                std::cout &lt;&lt; ", ";
        }
        std::cout &lt;&lt; std::endl;
</font>    }
}
<a name="0"></a><font color="#FF0000"><a href="match204-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_34.gif"/></a>

int main ()
{
    Knjiga knjiga;
    std::string poglavlje = "", sadrzaj = "", kljuc = "";
    int brStranica = 0;
    
    do {
     std::cout &lt;&lt;"Unesite naziv poglavlja: ";
     std::getline(std::cin, poglavlje);
     
     if(poglavlje != ".")
     {
         do {
             std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; ++brStranica&lt;&lt; ": ";
             std::getline(std::cin, sadrzaj);
             if(sadrzaj != ".")
                knjiga[poglavlje].push_back(sadrzaj);
         } while(sadrzaj != ".");
     }
    } while(poglavlje != ".");
    
    IndeksPojmova noviIndeks = KreirajIndeksPojmova(knjiga);
    std::cout &lt;&lt;"\nKreirani indeks pojmova:\n";
    IspisiIndeksPojmova(noviIndeks);
    
    do{
        std::cout &lt;&lt; "Unesite rijec: ";
        std::cin &gt;&gt; kljuc;
        
        if(kljuc != ".")
        {
            try
            {
                auto rezultatPretrage = PretraziIndeksPojmova(kljuc,noviIndeks);
                for(auto i = 0; i &lt; rezultatPretrage.size(); i++)
                {
                    std::cout &lt;&lt; std::get&lt;0&gt;(rezultatPretrage[i]) &lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(rezultatPretrage[i])
                    &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(rezultatPretrage[i]);
                    if(i &lt; rezultatPretrage.size() - 1)
                        std::cout &lt;&lt;" ";
                }
                std::cout &lt;&lt; std::endl;
            }
            catch(std::logic_error err)
            {
                std::cout &lt;&lt; err.what() &lt;&lt; std::endl;
            }
        }
        
    }while(kljuc != ".");
    
	return 0;
</font>}
</pre>
</body>
</html>
