<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5939.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5939.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

bool daLiJeSlovo(char a){
    if(a&gt;='a' &amp;&amp; a&lt;='z') return true;
    if(a&gt;='A' &amp;&amp; a&lt;='Z') return true;
    if(a&gt;='0' &amp;&amp; a&lt;='9') return true;
    return false;
}

std::string malaSlova(std::string rec){
    for(int i=0;i&lt;rec.size();i++){
        if(rec[i]&gt;='A' &amp;&amp; rec[i]&lt;='Z'){
            rec[i]+=32;
        }
    }
    return rec;
}

std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga knjiga){
    
    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; rez;
    
    auto it=knjiga.begin();
    while(it!=knjiga.end()){//prolazimo kroz mapu knjiga 
    
    std::string oznakaP = it-&gt;first;
    std::vector&lt;std::string&gt; poglavlje=it-&gt;second;
    
    for(int i=0;i&lt;poglavlje.size();i++){ //petlja uzima stranicu po stranicu
        for(int j=0;j&lt;poglavlje[i].size();j++){
            
            int duzina=0, poc=j;
            while(j&lt;poglavlje[i].size() &amp;&amp; daLiJeSlovo(poglavlje[i][j])){
                duzina++;
                j++;
            }
            
            std::string oznaka=poglavlje[i].substr(poc,duzina);
            auto it2=rez.find(malaSlova(oznaka));
            if(it2==rez.end()){
                std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup;
                skup.insert(std::tuple&lt;std::string,int,int&gt;(oznakaP,i+1,poc));
                rez.insert(std::make_pair(malaSlova(oznaka),skup));
            }
            else{
                (it2-&gt;second).insert(std::tuple&lt;std::string,int,int&gt;(oznakaP,i+1,poc));
            }
            
        }
        
    }
    
        it++;
    }
    
    return rez;
}

<a name="3"></a><font color="#00FFFF"><a href="match862-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(std::string oznaka,std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; mapica){
    auto it(mapica.find(malaSlova(oznaka)));
</font><a name="0"></a><font color="#FF0000"><a href="match862-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    if(it==mapica.end()){
        throw std::logic_error("Unesena rijec nije nadjena!");
    }
    else{
        return it-&gt;second;
    }
}

void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; mapica){
</font>    
    auto it=mapica.begin();
    while(it!=mapica.end()){
        
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        auto skupic = it-&gt;second;
        auto it2=skupic.begin();
        while(it2!=skupic.end()){
            auto pom (it2);
            pom++;
            if (pom == skupic.end()) std::cout &lt;&lt; std::get&lt;0&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it2);
<a name="1"></a><font color="#00FF00"><a href="match862-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            else std::cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;", ";
            it2++;
        }
        
        std::cout&lt;&lt;std::endl;
</font>        it++;
    }
}

void IspisiPojmove (std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; setic) {
<a name="2"></a><font color="#0000FF"><a href="match862-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    auto it(setic.begin());
    while (it != setic.end()) {
        //auto pom (it);
       // pom++;
        //if (pom == setic.end()) 
        std::cout &lt;&lt; std::get&lt;0&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it) &lt;&lt; " ";
</font>        //else std::cout &lt;&lt; std::get&lt;0&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it) &lt;&lt; ", ";
        it++;
    }
}

int main ()
{
    
    std::string s1 ("a");
    Knjiga knjiga;
    
    while (s1 != ".") {
        std::vector&lt;std::string&gt; vs;
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::getline (std::cin, s1);
        if (s1 == ".") break;
        int brojac(0);
        std::string s2 ("a");
        while (s2 != ".") {
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; brojac+1 &lt;&lt; ": ";
            std::getline (std::cin, s2);
            if (s2 == ".") break;
            vs.push_back(s2);
            brojac++;
        }
        knjiga.insert(std::make_pair(s1,vs));
    }
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Kreirani indeks pojmova:";
    std::cout &lt;&lt; std::endl;
    auto maps (KreirajIndeksPojmova(knjiga));
    IspisiIndeksPojmova(maps);
    
    std::string sr ("a");
        while (sr != ".") {
            std::cout &lt;&lt; "Unesite rijec: ";
            std::getline (std::cin, sr);
            if (sr == ".") break;
            try {
            auto setic (PretraziIndeksPojmova(sr,maps));
            IspisiPojmove(setic);
            std::cout &lt;&lt; std::endl;
            }
            catch (std::logic_error l) {
                std::cout &lt;&lt; l.what();
                std::cout &lt;&lt; std::endl;
            }
        }
    
	return 0;
}
</pre>
</body>
</html>
