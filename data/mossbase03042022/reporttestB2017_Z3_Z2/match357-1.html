<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9613.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

using namespace std;

<a name="2"></a><font color="#0000FF"><a href="match357-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

typedef map&lt;string, vector&lt;string&gt;&gt; Knjiga;

string PretvoriUMalaSlova(string s)
{
    string pom;
    for(int i=0; i&lt;s.length(); i++)
</font>    {
        if(s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z')
            pom.push_back(s[i]+('a'-'A'));
        else
            pom.push_back(s[i]);
    }
    return pom;
}

bool SlovoIliBroj(char c)
{
    if((c&gt;='0' &amp;&amp; c&lt;='9') || (c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z'))
<a name="0"></a><font color="#FF0000"><a href="match357-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        return true;
    return false;
}

map&lt;string, set&lt;tuple&lt;string, int, int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga k)
{
    map&lt;string, set&lt;tuple&lt;string, int, int&gt;&gt;&gt; mapa;
    for(const auto &amp;x:k)
</font>    {
        for(int i=0; i&lt;x.second.size(); i++)
        {
            for(int j=0; j&lt;x.second[i].length(); j++)
            {
                int markacija;
                string pomocni;
                if(!SlovoIliBroj(x.second[i][j]) &amp;&amp; SlovoIliBroj(x.second[i][j+1]) &amp;&amp; j+1&lt;x.second[i].size())
                {
                    j++;
                    markacija=j;
                    while(SlovoIliBroj(x.second[i][j]) &amp;&amp; j&lt;x.second[i].length())
                    {
                        pomocni.push_back(x.second[i][j]);
                        j++;
                    }
            
                }
                else if(SlovoIliBroj(x.second[i][j]))
                {
                    markacija=j;
                    while(SlovoIliBroj(x.second[i][j]) &amp;&amp; j&lt;x.second[i].length())
                    {
                        pomocni.push_back(x.second[i][j]);
                        j++;
                    }
                }
                pomocni=PretvoriUMalaSlova(pomocni);
                tuple&lt;string, int, int&gt; t{x.first, i+1, markacija};
                set&lt;tuple&lt;string, int, int&gt;&gt; skup;
                skup.insert(t);
                
                auto it(mapa.find(pomocni));
                if(it==mapa.end()) mapa[pomocni]=skup;
<a name="1"></a><font color="#00FF00"><a href="match357-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

                else (it-&gt;second).insert(t);
            }
        }
    }
    return mapa;
}

set&lt;tuple&lt;string, int, int&gt;&gt; PretraziIndeksPojmova(string s, map&lt;string, set&lt;tuple&lt;string, int, int&gt;&gt;&gt; mapa)
</font>{
    /*auto it(mapa.find(PretvoriUMalaSlova(s)));
    if(it==mapa.end()) throw logic_error("Pojam nije nadjen");
    else return it-&gt;second;*/
    for(auto &amp;x:mapa)
        if(x.first.length()==s.length() &amp;&amp; equal(s.begin(), s.end(), x.first.begin(),[](char prvi, char drugi){if(tolower(prvi)==tolower(drugi)) return 1; return 0;}))
<a name="5"></a><font color="#FF0000"><a href="match357-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

            return x.second;
    throw logic_error("Pojam nije nadjen");
}

void IspisiIndeksPojmova(map&lt;string, set&lt;tuple&lt;string, int, int&gt;&gt;&gt; mapa)
{
    for(const auto &amp;x:mapa)
</font>    {
        cout&lt;&lt;x.first&lt;&lt;": ";
        for(set&lt;tuple&lt;string, int, int&gt;&gt;::iterator it=(x.second).begin(); it!=(x.second).end(); it++)
        {
            set&lt;tuple&lt;string, int, int&gt;&gt;::iterator pomit=(x.second).end();
            pomit--;
            if(it==pomit)
<a name="3"></a><font color="#00FFFF"><a href="match357-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

                cout&lt;&lt;get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;get&lt;2&gt;(*it);
</font>            else
<a name="4"></a><font color="#FF00FF"><a href="match357-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

                cout&lt;&lt;get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;get&lt;2&gt;(*it)&lt;&lt;", ";
</font><a name="4"></a><font color="#FF00FF"><a href="match357-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

        }
</font>        cout&lt;&lt;endl;
    }
}

int main ()
{
    Knjiga k;
    for(;;)
    {
        string s;
        cout&lt;&lt;"Unesite naziv poglavlja: ";
        getline(cin, s);
        if(s==".") break;
        int br(0);
        vector&lt;string&gt; v;
        for(;;)
        {
            string pom;
            br++;
            cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;br&lt;&lt;": ";
            getline(cin, pom);
            if(pom==".") break;
            v.push_back(pom);
        }
        k.insert({s, v});
    }
    map&lt;string, set&lt;tuple&lt;string, int, int&gt;&gt;&gt; Indeks=KreirajIndeksPojmova(k);
    cout&lt;&lt;endl&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;endl;
    IspisiIndeksPojmova(Indeks);
    
    for(;;)
    {
        string s;
        cout&lt;&lt;"Unesite rijec: ";
        getline(cin, s);
        if(s==".") break;
        try{
        set&lt;tuple&lt;string, int, int&gt;&gt; komp=PretraziIndeksPojmova(s, Indeks);
        for(auto &amp;x:komp)
        {
            cout&lt;&lt;get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;get&lt;2&gt;(x)&lt;&lt;" ";
        }
        }
        catch(logic_error)
        {
            cout&lt;&lt;"Unesena rijec nije nadjena!";
        }
        cout&lt;&lt;endl;
    }
    
	return 0;
}
</pre>
</body>
</html>
