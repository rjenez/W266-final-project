<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6267.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1704.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga &amp;tekst) {
    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indeks;
    for(auto it=tekst.begin(); it!=tekst.end(); it++) {
        for(int i=0; i&lt;(it-&gt;second).size(); i++) {
            for(int j=0; j&lt;(it-&gt;second)[i].length(); j++) {
                std::string rijec;
<a name="0"></a><font color="#FF0000"><a href="match328-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

                while(((it-&gt;second)[i][j]&gt;='a' &amp;&amp; (it-&gt;second)[i][j]&lt;='z') || ((it-&gt;second)[i][j]&gt;='A' &amp;&amp; (it-&gt;second)[i][j]&lt;='Z') || ((it-&gt;second)[i][j]&gt;='0' &amp;&amp; (it-&gt;second)[i][j]&lt;='9') &amp;&amp; j&lt;(it-&gt;second)[i].length()) {
</font>                    char znak;
                    if((it-&gt;second)[i][j]&gt;='A' &amp;&amp; (it-&gt;second)[i][j]&lt;='Z') znak=(it-&gt;second)[i][j]+32;
                    else znak=(it-&gt;second)[i][j];
                    rijec.push_back(znak);
                    j++;
                }
                if(rijec.length()!=0 ) {
                    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
                    bool ima(false);
                    for(auto it3(indeks.begin()); it3!=indeks.end(); it3++) 
                        if(rijec==it3-&gt;first) ima=true;
                        if(!ima){ 
                    for(auto it2(tekst.begin()); it2!=tekst.end(); it2++) {
                        for(int k=0; k&lt;(it2-&gt;second).size(); k++) {
                            for(int z=0; z&lt;(it2-&gt;second)[k].length(); z++) {
                                std::string temp;
                                while(((it2-&gt;second)[k][z]&gt;='a' &amp;&amp; (it2-&gt;second)[k][z]&lt;='z') || ((it2-&gt;second)[k][z]&gt;='A' &amp;&amp; (it2-&gt;second)[k][z]&lt;='Z') || ((it2-&gt;second)[k][z]&gt;='0' &amp;&amp; (it2-&gt;second)[k][z]&lt;='9') &amp;&amp; z&lt;(it2-&gt;second)[k].length()) {
                                    char znak2;
                                    if((it2-&gt;second)[k][z]&gt;='A' &amp;&amp; (it2-&gt;second)[k][z]&lt;='Z') znak2=(it2-&gt;second)[k][z]+32;
                                    else znak2=(it2-&gt;second)[k][z];
                                    temp.push_back(znak2);
                                    z++;
                                }
                                if(temp.length()!=0 &amp;&amp; temp==rijec) {
                                   std::tuple&lt;std::string, int, int&gt; t;
                                   t=std::make_tuple(it2-&gt;first, k+1, z-temp.length());
                                    skup.insert(t);
                                }
                            }
                        }
                    }
                    indeks.insert({rijec, skup});
                    }
                }
                }
            }
        }
    return indeks;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string pojam, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; &amp;mapa) {
    std::string temp;
    char znak;
    for(int i=0; i&lt;pojam.length(); i++) {
        if(pojam[i]&gt;='A' &amp;&amp; pojam[i]&lt;='Z') znak=pojam[i]+32;
        else znak=pojam[i];
        temp.push_back(znak);
    }
    auto it(mapa.find(temp));
    if(it==mapa.end()) throw std::logic_error("Unesena rijec nije nadjena!");
    return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; &amp;mapa) {
<a name="2"></a><font color="#0000FF"><a href="match328-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for(auto it2((it-&gt;second).begin()); it2!=(it-&gt;second).end(); it2++) {
            auto pomocni(it2);
</font>            pomocni++;
            if(pomocni!=(it-&gt;second).end()) 
            std::cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;", ";
            else std::cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2);
        }
        std::cout&lt;&lt;std::endl;
    }
}



int main ()
{
    Knjiga tekst;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string poglavlje;
        std::getline(std::cin, poglavlje);
        if(poglavlje[0]=='.' &amp;&amp; poglavlje.length()==1) break;
        int i(1);
        std::vector&lt;std::string&gt; v;
        while(1) {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::string sadrzaj;
            std::getline(std::cin, sadrzaj);
            if(sadrzaj[0]=='.' &amp;&amp; sadrzaj.length()==1) break;
            v.push_back(sadrzaj);
            i++;
        }
        tekst.insert({poglavlje, v});
    }
    auto indeks(KreirajIndeksPojmova(tekst));
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(indeks);
    
    for(;;) {
        std::string rijec;
        std::cout&lt;&lt;"Unesite rijec: ";
        std::getline(std::cin, rijec);
        if(rijec=="." &amp;&amp; rijec.length()==1) break;
<a name="3"></a><font color="#00FFFF"><a href="match328-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        try {
            auto skup(PretraziIndeksPojmova(rijec,indeks));
            for(auto it(skup.begin()); it!=skup.end(); it++) {
            std::cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
</font><a name="1"></a><font color="#00FF00"><a href="match328-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            }
            std::cout&lt;&lt;std::endl;
        }
        catch(std::logic_error poruka) {
            std::cout&lt;&lt;poruka.what()&lt;&lt;std::endl;
        }
    }
    
	return 0;
</font>}
</pre>
</body>
</html>
