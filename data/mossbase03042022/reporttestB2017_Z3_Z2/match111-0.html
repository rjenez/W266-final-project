<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7297.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7297.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;


typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
<a name="0"></a><font color="#FF0000"><a href="match111-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_94.gif"/></a>

typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; Tip;

Tip KreirajIndeksPojmova(Knjiga tekst)
{
    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa_koju_vraca;
    for(auto it=tekst.begin(); it!=tekst.end(); it++) {                                 //krece se kroz mapu
        std::string s (it-&gt;first);                                                         //s je poglavlje
        int i, j;                                                                        //uzima iz mape ime poglavlja i smjesti ga u string s
        for(i=1; i&lt;((it-&gt;second).size()); i++) {                                           //prolazi kroz vektor
            std::string pomocni((it-&gt;second)[i]);                                              //u pomocni smjesti jednu stranicu
    
            for(j=0; j&lt;pomocni.length(); ) {                                                  //ide do kraja stranice
                std::string rijec(" ");
                while(pomocni[j]==' ' &amp;&amp; j!=pomocni.length()) j++;
                while(pomocni[j]!=' ' &amp;&amp; ((pomocni[j]&gt;='A' &amp;&amp; pomocni[j]&lt;='Z') || (pomocni[j]&gt;='a' &amp;&amp; pomocni[j]&lt;='z') || (pomocni[j]&gt;='0' &amp;&amp; pomocni[j]&lt;='9')) &amp;&amp; j!=s.length()) {                             //while petlja trazi rijeci
                    rijec.push_back(pomocni[j]);
                    j++;                                                                          //trazi rijec
                }
                while(pomocni.find(rijec, 0)) {                                                   //dok ima te rijeci na toj stranici
                    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
                    std::tuple&lt;std::string, int, int&gt; ntorka;
                    std::get&lt;0&gt;(ntorka)=s;
                    std::get&lt;1&gt;(ntorka)=i;
                    std::get&lt;2&gt;(ntorka)=pomocni.find(rijec, 0);
                    skup.insert(ntorka);                                                        //umestni u ntorku poziciju rijeci
                    mapa_koju_vraca.insert({rijec, skup});              //umetni tu rijec u mapu
                }
            }

        }

    }
    return mapa_koju_vraca;
}

typedef std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; TipSkupa;

TipSkupa PretraziIndeksPojmova(std::string rijec, Tip m)
{
    TipSkupa skup;
    auto it(m.begin());
    for(it=m.begin(); it!=m.end(); it++) {
        if(rijec==(it-&gt;first)) {
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; element;
            element=(it-&gt;second);
            std::tuple&lt;std::string, int,int&gt; pomocni;
            for(std::tuple&lt;std::string, int, int&gt; x: element) {
                std::get&lt;0&gt;(pomocni)=std::get&lt;0&gt;(x);
                std::get&lt;1&gt;(pomocni)=std::get&lt;1&gt;(x);
                std::get&lt;2&gt;(pomocni)=std::get&lt;2&gt;(x);
            }
            skup.insert(pomocni);
        }
        if(it==m.end() &amp;&amp; !m.count(rijec)) throw std::logic_error("Pojam nije nadjen");
    }

    return skup;
}

void IspisiIndeksPojmova(Tip mapa)
{
    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for(std::tuple&lt;std::string, int, int&gt; x: it-&gt;second) {
            std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;", ";
        }
        std::cout&lt;&lt;std::endl;
    }
}


int main ()
{

    std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; tekst;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string naziv_poglavlja("");
        std::getline(std::cin, naziv_poglavlja);
        if(naziv_poglavlja==".") break;
        std::string sadrzaj_stranice;
        int br(1);
        std::vector&lt;std::string&gt; v;
        for(;;) {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;br&lt;&lt;": ";
            std::getline(std::cin, sadrzaj_stranice);
            if(sadrzaj_stranice==".") break;
            v.push_back(sadrzaj_stranice);
            br++;
        }
        tekst.insert({naziv_poglavlja, v});
    }
    std::cout&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;std::endl;
    Tip vracena_mapa=KreirajIndeksPojmova(tekst);
    IspisiIndeksPojmova(vracena_mapa);
    for(;;) {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string rijec;
        std::getline(std::cin, rijec);
        try {
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup=PretraziIndeksPojmova(rijec, vracena_mapa);
            for(std::tuple&lt;std::string, int, int&gt; x: skup) {
                std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x);
            }
        } catch(std::logic_error e) {
            std::cout&lt;&lt;e.what();
            break;
        }
    }
    return 0;
</font>}
</pre>
</body>
</html>
