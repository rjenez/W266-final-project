<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7485.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1202.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
using std::string;
using std::cout;
using std::endl;
using std::cin;
static int brojac_stranica(0);
typedef std::map&lt;string, std::vector&lt;string&gt;&gt; Knjiga;
std::map&lt;string,std::set&lt;std::tuple&lt;string,int,int&gt;&gt;&gt;Funkcija(string nazivP,std::vector&lt;string&gt; &amp;stranice)
{
    std::map&lt;string,std::set&lt;std::tuple&lt;string,int,int&gt;&gt;&gt; Mapa;
    //krecemo se po stranicama jednog poglavlja
    //jedna stranica jedan string       
    
    std::vector&lt;string&gt; vektorRijeci;
    std::vector&lt;int&gt; vektorStranica;
    std::vector&lt;int&gt; vektorPozicije; 
    for(int i=0; i&lt;stranice.size(); i++) {
        brojac_stranica++;
        for(int j=0; j&lt;stranice[i].length(); ) {
            //kroz citavu jednu stranicu
            string rijec;
            //preskace sve sto nije slovo niti cifra
            while (j &lt; stranice[i].length() &amp;&amp; stranice[i][j] == ' ') j++;
            while (j &lt; stranice[i].length() &amp;&amp; !(isalpha(stranice[i][j])) &amp;&amp; !(isdigit(stranice[i][j])) ) j++;


            int kontrola(0);
//kada je slovo ili broj...
            int prviPut(1);
            int indeks(0);
            while (j &lt; stranice[i].length() &amp;&amp; (isalpha(stranice[i][j]) || isdigit(stranice[i][j]))) {
                if(prviPut) indeks=j;
                prviPut=0;
                kontrola=1;
                rijec+=stranice[i][j];
                j++;
            }
            if(kontrola==1) {
                //kada nadje citavu rijec u vektor str upisuje strna kojoj se nalazi ta rijec
                vektorRijeci.push_back(rijec);
                vektorStranica.push_back(brojac_stranica);
                vektorPozicije.push_back(indeks);
            }
            //ubacuje se svaka rijec u vektor rijeci kao string zaseban
        }

    }

    //mala slova...
    for(int i=0; i&lt;vektorRijeci.size(); i++)
        std::transform(vektorRijeci[i].begin(),vektorRijeci[i].end(),vektorRijeci[i].begin(),tolower);

    
    std::tuple&lt;string,int,int&gt; par;
    std::set&lt;std::tuple&lt;string,int,int&gt;&gt; PomocniSkup;
    for(int i=0; i&lt;vektorRijeci.size(); i++) {
        if(i!=0) {
            auto it(Mapa.find(vektorRijeci[i]));
            //ako nije bilo te rijeci prije
            if(it==Mapa.end()) {
                par=std::make_tuple(nazivP,vektorStranica[i],vektorPozicije[i]);
                PomocniSkup.clear();
                PomocniSkup.insert(par);
                Mapa.insert(std::make_pair(vektorRijeci[i],PomocniSkup));
            } else {
                //ako vec postoji ta rijec u mapi,u njen skup dodaje novi tuple pozicije
                par=std::make_tuple(nazivP,vektorStranica[i],vektorPozicije[i]);
                (it-&gt;second).insert(par); //ubacujem u skup
            }

        } else {
            par=std::make_tuple(nazivP,vektorStranica[i],vektorPozicije[i]);
            PomocniSkup.clear();
            PomocniSkup.insert(par);
            Mapa.insert(std::make_pair(vektorRijeci[i],PomocniSkup));
        }
    }
    return Mapa;
}
//vracena mapa za jedno poglavlje
std::map&lt;string,std::set&lt;std::tuple&lt;string,int,int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga tekst)
{
    //kretanje kroz mapu
    //dodati uslove ako je mapa prazna...
<a name="2"></a><font color="#0000FF"><a href="match539-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    std::map&lt;string,std::set&lt;std::tuple&lt;string,int,int&gt;&gt;&gt; Mapa;
    for(auto it=tekst.begin(); it!=tekst.end(); it++) {
</font>        if(int(tekst.size())==1) {
            auto RezMapa(Funkcija(it-&gt;first,it-&gt;second));
            return RezMapa;
        } else {
            //preuzimam mapu za jedno poglavlje iz funkcije
            auto RezMapa(Funkcija(it-&gt;first,it-&gt;second));
            for(auto iterator=RezMapa.begin(); iterator!=RezMapa.end(); iterator++) {
                auto it1(Mapa.find(iterator-&gt;first));
                //ako ne postoji ta rijec prije
                if(it1==Mapa.end())
                    Mapa.insert(std::make_pair(iterator-&gt;first,iterator-&gt;second));
                else {
                    //auto something(it1-&gt;second); //skup iz mape
                    auto something2(iterator-&gt;second);//skup koji se treba dodat u postojeci
                    //otvoriti skup
                    for(auto it2=something2.begin(); it2!=something2.end(); it2++)
                        (it1-&gt;second).insert(*it2);
                    //brise se stari par..
                   // Mapa.insert(std::make_pair(iterator-&gt;first,it1-&gt;second));
                }
            }


        }

    }
    return Mapa;
}

std::set&lt;std::tuple&lt;string,int,int&gt;&gt; PretraziIndeksPojmova(string rijec,std::map&lt;string,std::set&lt;std::tuple&lt;string,int,int&gt;&gt;&gt; &amp;IndeksP)
{
    auto it(IndeksP.find(rijec));
    if(it==IndeksP.end()) throw std::logic_error ("Unesena rijec nije nadjena!");
    else
        return it-&gt;second;
}
void IspisiIndeksPojmova(std::map&lt;string,std::set&lt;std::tuple&lt;string,int,int&gt;&gt;&gt; &amp;IndeksPojmova)
{
<a name="1"></a><font color="#00FF00"><a href="match539-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    for(auto it=IndeksPojmova.begin(); it!=IndeksPojmova.end(); it++) {
        cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for(auto it2=(it-&gt;second).begin(); it2!=(it-&gt;second).end(); it2++) {
</font><a name="3"></a><font color="#00FFFF"><a href="match539-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2);
</font>            auto pomocni(it2);
            pomocni++;
            if(pomocni == (it-&gt;second).end()) break;
            cout&lt;&lt;", ";
        }
        cout&lt;&lt;endl;
    }
}

int main ()
{
     Knjiga mapa;
    
     int i(1);
     string sadrzaj;
     for(;;){
          cout&lt;&lt;"Unesite naziv poglavlja: ";
          string naziv;
            std::getline(cin,naziv);
            if(naziv==".") break;
            std::vector&lt;string&gt; stranice;
            for(;;){
            cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";

            std::getline(cin,sadrzaj);

            if(sadrzaj==".") break;
            else stranice.push_back(sadrzaj);
            i++;
            }
          mapa.insert(std::make_pair(naziv,stranice));
     }
     
   
     
     cout&lt;&lt;std::endl;
     cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
     auto Mapa( KreirajIndeksPojmova(mapa));
     IspisiIndeksPojmova(Mapa);
     cout&lt;&lt;std::endl;
     
     for(;;){
          cout&lt;&lt;"Unesite rijec: ";
          string rijec;
            std::getline(cin,rijec);
            if(rijec==".") break;
            
<a name="0"></a><font color="#FF0000"><a href="match539-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

           try{auto rez(PretraziIndeksPojmova(rijec,Mapa)); //vraca skup
           for(auto it=rez.begin();it!=rez.end();it++)
          cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
</font>           cout&lt;&lt;std::endl;
           }catch(std::logic_error e){
               cout&lt;&lt;e.what();
               cout&lt;&lt;std::endl;
   }
     }
    return 0;
}
 </pre>
</body>
</html>
