<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9081.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9081.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

bool SlovoBroj (char znak)
{
    return ((znak&gt;='A' &amp;&amp; znak&lt;='Z') || (znak&gt;='a' &amp;&amp; znak&lt;='z') || (znak&gt;='0' &amp;&amp; znak&lt;='9'));
}
std::string PretovriUMala (std::string s)
{
    std::string vrati;
    for (int i=0;i&lt;s.size();i++)
    {
        if (s.at(i)&gt;='A' &amp;&amp; s.at(i)&lt;='Z')
        s.at(i)+=('a'-'A');
        vrati.push_back(s.at(i));
    }
    return vrati;
}   
std::string IzdvojiRijec (std::string s,int n)
{
    bool neslovo(true);
    std::string vrati;
    for (int i=n;i&lt;s.size();i++) 
    {
        if (!SlovoBroj(s.at(i)))
        neslovo=true;
        else if (neslovo==true)
        {
            neslovo=false;
            while (i&lt;s.size() &amp;&amp; SlovoBroj(s.at(i)))
            {
                vrati.push_back(s.at(i));
                if (i==s.length())
                break;
                i++;
            }
            break;
        }
    }
    return vrati;
}
std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga k)
{
<a name="0"></a><font color="#FF0000"><a href="match472-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; vrati;
    for (auto it=k.begin();it!=k.end();it++)
    {
        for (int i=0;i&lt;it-&gt;second.size();i++)
        {
            for (int j=0;j&lt;it-&gt;second[i].size();)
</font>            {
                if (!SlovoBroj(it-&gt;second[i][j]))
                j++;
                else
                {
                    auto temp(IzdvojiRijec(it-&gt;second[i],j));
                    temp=PretovriUMala(temp);
                    while (SlovoBroj(it-&gt;second[i][j]) &amp;&amp; j&lt;it-&gt;second[i].size())
                    j++;
                    if (!vrati.count(temp))
                    {
                        vrati[temp];
                        std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; t;
                        for (auto poc=k.begin();poc!=k.end();poc++)
                        {
                            for (int l=0;l&lt;poc-&gt;second.size();l++)
                            {
                                for (int m=0;m&lt;poc-&gt;second[l].size();)
                                {
                                    if (!SlovoBroj(poc-&gt;second[l][m]))
                                    m++;
                                    else
                                    {
                                        auto temp2(IzdvojiRijec(poc-&gt;second[l],m));
                                        temp2=PretovriUMala(temp2);
                                        std::tuple&lt;std::string,int,int&gt; tup{poc-&gt;first,l+1,m};
                                        while (SlovoBroj(poc-&gt;second[l][m]) &amp;&amp; m&lt;poc-&gt;second[l].size())
                                        m++;
                                        if (temp==temp2)
                                        t.insert(tup);
                                    }
                                }
                            }
                        }
                        vrati[temp]=t;
                    }
                }
            }
        }
    }
    return vrati;
}
std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova (std::string s, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indeks)
{
    s=PretovriUMala(s);
    if (!indeks.count(s))
        throw std::logic_error ("Pojam nije nadjen");
    return indeks[s];
}
<a name="2"></a><font color="#0000FF"><a href="match472-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

void IspisiIndeksPojmova (std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indeks)
{
    for (auto it=indeks.begin();it!=indeks.end();it++)
    {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
</font>        int br(0);
        for (auto x=it-&gt;second.begin();x!=it-&gt;second.end();x++)
        {
<a name="3"></a><font color="#00FFFF"><a href="match472-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            std::cout&lt;&lt;std::get&lt;0&gt;(*x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*x);
            if (br!=it-&gt;second.size()-1)
</font>            std::cout&lt;&lt;", ";
            br++;
        }
        std::cout&lt;&lt;std::endl;
    }
}
int main ()
{
    Knjiga k;
    for (;;)
    {
        std::string temp;
        std::vector&lt;std::string&gt; v;
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::getline(std::cin,temp);
        if (temp==".")
        break;
        int i(1);
        for (;;)
        {
            std::string temp2;
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::getline(std::cin,temp2);
            if (temp2==".")
            break;
            i++;
            v.push_back(temp2);
        }
        k.insert({temp,v});
    }
    auto ka(KreirajIndeksPojmova(k));
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(ka);
    for (;;)
    {
        std::string rijec;
        std::cout&lt;&lt;"Unesite rijec: ";
<a name="1"></a><font color="#00FF00"><a href="match472-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        std::getline(std::cin,rijec);
        if (rijec==".")
        break;
        try 
        {
            auto skup(PretraziIndeksPojmova(rijec,ka));
            for (auto ppp=skup.begin();ppp!=skup.end();ppp++)
            {
                std::cout&lt;&lt;std::get&lt;0&gt;(*ppp)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*ppp)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*ppp)&lt;&lt;" ";
</font>            }
            std::cout&lt;&lt;std::endl;
        }
        catch (std::logic_error)
        {
            std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
        }
    }
	return 0;
}
</pre>
</body>
</html>
