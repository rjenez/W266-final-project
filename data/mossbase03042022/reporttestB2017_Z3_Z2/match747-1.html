<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5468.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8467.cpp<p></p><pre>
/B2017/2018: Zadaća 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
#include &lt;set&gt;

<a name="0"></a><font color="#FF0000"><a href="match747-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
typedef std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; Set;
typedef std::map&lt;std::string, Set&gt; Mapa;
</font>
bool Slovo(char c){
    return (c &gt;= 'a' &amp;&amp; c &lt;= 'z')||(c &gt;= 'A' &amp;&amp; c &lt;= 'Z')||(c &gt;= '0' &amp;&amp; c &lt;= '9');
}

std::string Mala(std::string s){
    std::transform(s.begin(), s.end(), s.begin(), ::tolower);
    return s;
}

std::string VratiRijec(std::string s, int &amp;i){
    std::string vrati{};
    while(i &lt; s.size() &amp;&amp; Slovo(s.at(i))){
        vrati += s.at(i);
        i++;
    }
    return vrati;
}

Mapa KreirajIndeksPojmova(Knjiga k){
    Mapa mapa;
    for(auto poglavlje(k.begin()); poglavlje != k.end(); poglavlje++){
        std::string ime_poglavlja(poglavlje-&gt;first);
        
        for(int stranica = 1; stranica &lt;= (poglavlje-&gt;second).size(); stranica++){
            std::string tekst((poglavlje-&gt;second).at(stranica - 1));
            int pomak = 0; //Koristi se kao ofset u funkciji find, kako ne bi istu riječ ponovno nalazili
            for(int i = 0; i &lt; tekst.size(); i++){
           
                if(Slovo(tekst.at(i))){
                    auto rijec(VratiRijec(tekst, i));
                    int pozicija = tekst.find(rijec, pomak);
                    //std::cout &lt;&lt; rijec &lt;&lt; pozicija &lt;&lt; std::endl;
                    auto nt = make_tuple(ime_poglavlja, stranica, pozicija); //Uređeni par;
                    //Provjerava da li već postoji riječ u mapi;
                    //Ako postoji informacije se nanodaju u set, ako ne postoji onda se stvara
                    auto it(mapa.find(Mala(rijec)));
                    
                    if(it == mapa.end()){
                        Set set {nt}; //Pravi početni set uređenih parova
                        mapa.insert({Mala(rijec), set});
                    }else{
                        (it-&gt;second).insert(nt); //Dodaje u već postojeći set
                        //std::cout &lt;&lt; rijec &lt;&lt; ime_poglavlja &lt;&lt; stranica &lt;&lt; pozicija&lt;&lt; std::endl;
                    }
                    //std::cout &lt;&lt; rijec &lt;&lt; " " &lt;&lt;  pozicija &lt;&lt; " " &lt;&lt; pomak &lt;&lt; std::endl;
                    pomak = pozicija + 1;
                }
                
            }
            
        }
    }
    return mapa;
}

Set PretraziIndeksPojmova(std::string s, Knjiga k){
    auto mapa(KreirajIndeksPojmova(k));
    auto it(mapa.find(Mala(s)));
    if(it != mapa.end()) return it-&gt;second;
    throw std::logic_error("Pojam nije nadjen");
}

void IspisiIndeksPojmova(Mapa k){
    auto kraj(k.end());
    for(auto it(k.begin()); it != k.end(); it++){
        std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        int brojac = 0;
        for(auto tapl : it-&gt;second){
            brojac++;
            std::cout &lt;&lt; std::get&lt;0&gt;(tapl) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(tapl) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(tapl);
            if(brojac &lt; (it-&gt;second).size()) std::cout &lt;&lt; ", ";
        }
        std::cout &lt;&lt; std::endl;
    }
}


int main (){
    Knjiga k;
    std::string unos;
    do{
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::getline(std::cin, unos);
        if(unos == ".") break;
        std::string tekst;
        int stranica = 1;
        std::vector&lt;std::string&gt; v;
        do{
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; stranica &lt;&lt; ": ";
<a name="1"></a><font color="#00FF00"><a href="match747-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

            std::getline(std::cin, tekst);
            if(tekst == ".") break;
            v.push_back(tekst);
            stranica++;
        }while(tekst != ".");
        
        k.insert({unos, v});
    }while(unos != ".");
</font>    std::cout &lt;&lt; std::endl;
    
    std::cout &lt;&lt; "Kreirani indeks pojmova:" &lt;&lt; std::endl;
    IspisiIndeksPojmova(KreirajIndeksPojmova(k));
    std::cout &lt;&lt; std::endl;
    
<a name="2"></a><font color="#0000FF"><a href="match747-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    std::string rijec;
    do{
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
        if(rijec == ".") break;
        try{
            auto set(PretraziIndeksPojmova(rijec, k));
            int brojac = 0;
</font><a name="3"></a><font color="#00FFFF"><a href="match747-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            for(auto tapl : set){
                std::cout &lt;&lt; std::get&lt;0&gt;(tapl) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(tapl) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(tapl);
</font>                if(brojac &lt; set.size()) std::cout &lt;&lt; " ";
                brojac++;
            }
            std::cout &lt;&lt; std::endl;
            
        }catch(...){
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
        }
        
    }while(rijec != ".");
    
	return 0;
}
</pre>
</body>
</html>
