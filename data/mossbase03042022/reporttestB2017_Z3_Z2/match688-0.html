<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9238.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9238.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt;Knjiga;
char maloslovo(char c){
    if(c&gt;='A' &amp;&amp; c&lt;='Z'){
        return c+'a'-'A';
    }
    return c;
}
std::string malaslova(std::string a){
    
    std::string b;
    for(int i=0; i&lt;a.size();i++)b.push_back(maloslovo(a[i]));
    return b;
}
bool JeLiSlovo(char c){
    
    return (c&gt;='a' &amp;&amp; c&lt;='z') ||(c&gt;='A' &amp;&amp; c&lt;='Z')||(c&gt;='0' &amp;&amp; c&lt;='9');
    
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt;KreirajIndeksPojmova(Knjiga ime_objekta){
    std::string stranica;
    std::string rijec;
<a name="1"></a><font color="#00FF00"><a href="match688-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; rezultat;
    
    for(auto it=ime_objekta.begin();it!=ime_objekta.end();it++){
        for(int i=0; i&lt;(it-&gt;second).size();i++){
</font>            
            stranica=(it-&gt;second)[i];
            int j=0;
            int pozicija;
            
            while(j&lt;stranica.size()){
                pozicija=-1;
                rijec="";
                while(j&lt;stranica.size() &amp;&amp; JeLiSlovo(stranica[j])==false)j++;
                
                if(j&lt;stranica.size())
                    pozicija=j;
              
                while(j&lt;stranica.size() &amp;&amp; JeLiSlovo(stranica[j])){
                    rijec.push_back(stranica[j]);
                    j++;
                }
                if(rijec.size()&gt;0){
                    rijec=malaslova(rijec);
                    auto iter=rezultat.find(rijec);
                    if(rezultat.size()&gt;0 &amp;&amp; iter!=rezultat.end()){
                     auto skup=iter-&gt;second;
                     std::tuple&lt;std::string, int, int&gt; t;
                     t=std::make_tuple(it-&gt;first,i+1,pozicija);
                     skup.insert(t);
                     rezultat.erase(rijec);
                     rezultat.insert({rijec,skup});
                     
                        
                        
                    }else{
                      std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; a;
                      std::tuple&lt;std::string, int, int&gt; t;
                      t=std::make_tuple(it-&gt;first,i+1,pozicija);
                      a.insert(t);
                      rezultat.insert({rijec,a});
                    }
                }
                
            }
        }
        
    }
    
    
    
    return rezultat;
}
<a name="0"></a><font color="#FF0000"><a href="match688-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string rijec,std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa){
    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; rez;
</font>    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        if(it-&gt;first==rijec) {
            return it-&gt;second;
        }
    }
    throw std::logic_error ("Pojam nije nadjen");
    return rez;
}

<a name="2"></a><font color="#0000FF"><a href="match688-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

void IspisiIneksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt;mapa) {
    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        std::cout&lt;&lt; it-&gt;first &lt;&lt; ":";
</font>        auto skup=it-&gt;second;
        int i=0;
        int brel=skup.size();
        for(auto it1=skup.begin(); it1!=skup.end(); it1++) {
            std::cout &lt;&lt; " " &lt;&lt; std::get &lt;0&gt; (*it1) &lt;&lt;  "/" &lt;&lt; std::get&lt;1&gt; (*it1) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt; (*it1);
            if(i&lt;brel-1)std::cout&lt;&lt;",";
            i++;
        }
        std::cout&lt;&lt; std:: endl;
        
    }
    
}
int main () {
    std::string naziv_poglavlja;
    Knjiga k;
    std::string s;
    while (1) {
        naziv_poglavlja="";
        std::cout&lt;&lt; "Unesite naziv poglavlja: ";
        std::getline(std::cin,naziv_poglavlja);
        
        if(naziv_poglavlja==".")break;
        std::vector&lt;std::string&gt; stranice;
        int i=1;
        while(1){
            s="";
           std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": "; 
           std::getline(std::cin,s);
           if(s!="." &amp;&amp; s.size()&gt;0){stranice.push_back(s);}
            if(s==".")break;
           i++;
        }
        k.insert({naziv_poglavlja,stranice});
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;std::endl;
    auto ind=KreirajIndeksPojmova(k);
    IspisiIneksPojmova(ind);
    std::string rijec;
    while(1){
        std::cout&lt;&lt;"Unesite rijec: ";
        rijec="";
        std::getline(std::cin,rijec);
        if(rijec==".")break;
        try{
<a name="3"></a><font color="#00FFFF"><a href="match688-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            auto p=PretraziIndeksPojmova(rijec,ind);
            for(auto it=p.begin();it!=p.end();it++)
                std::cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
</font>        }catch(std::logic_error a){std::cout&lt;&lt;"Unesena rijec nije nadjena!";}
        
        std::cout&lt;&lt;std::endl;
        
    }
	return 0;
}
</pre>
</body>
</html>
