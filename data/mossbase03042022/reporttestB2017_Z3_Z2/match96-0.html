<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4772.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4772.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match96-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

bool DaLiJeSlovoIliCifra (char c) {
    return (c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z') || (c&gt;=0 &amp;&amp; c&lt;=9);
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga k) {
</font><a name="0"></a><font color="#FF0000"><a href="match96-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_87.gif"/></a>

    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa;
    auto it = k.begin();
    for (auto it = k.begin(); it != k.end(); it++) { // it ide kroz mapu k
       std::vector&lt;std::string&gt; v = it-&gt;second;
        for (int i = 0; i &lt; v.size(); i++) { // i ide kroz clanove vektora sto predstavljaju stranice
            for (int j = 0; j &lt; v[i].length(); j++) { // j ide kroz svaku stranicu vektora (kroz tekst koji se nalazi na stranici)
                int poc, kraj;
                if (DaLiJeSlovoIliCifra(v[i][j])) {
                    poc = j;
                    while (j &lt; v[i].length() &amp;&amp; DaLiJeSlovoIliCifra(v[i][j])) j++;
                    kraj = j;
                    std::string str = v[i].substr(poc, kraj-poc);
                    std::transform (str.begin(), str.end(), str.begin(), ::tolower);
                    auto itmapa = mapa.find(str);
                    if (itmapa != mapa.end())  itmapa-&gt;second.insert (std::make_tuple(it-&gt;first, i+1, poc)); 
                    else {
                        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; set;
                        set.insert (std::make_tuple (it-&gt;first, i+1, poc));
                        mapa.insert (std::make_pair (str, set));
                    }
                }
            }
        }
    }
    return mapa;
}
 

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova (std::string rijec, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indekspojmova) {
    std::transform (rijec.begin(), rijec.end(), rijec.begin(), ::tolower);
     if (!indekspojmova.count(rijec)) throw std::logic_error ("Pojam nije nadjen");
     std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; indeksi;
     auto it = indekspojmova.find (rijec);
     indeksi = it-&gt;second;
     return indeksi;
 }
 
 
void IspisiIndeksPojmova (std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indekspojmova) {
      for (auto it = indekspojmova.begin(); it != indekspojmova.end(); it++) {
          std::cout &lt;&lt; std::endl &lt;&lt; it-&gt;first &lt;&lt; ": " ;
          auto kraj = it-&gt;second.end() --;
          kraj--;
          auto it2 = it-&gt;second.begin();
          for (it2 = it-&gt;second.begin(); it2 != kraj; it2++) {
            std::cout &lt;&lt; std::get&lt;0&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it2) &lt;&lt; ", ";
          }
          std::cout &lt;&lt; std::get&lt;0&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it2);
          
      }
  }

int main ()
{
    std::vector&lt;std::string&gt; v;
    Knjiga k;
    std::string poglavlje;
    std::string str1;
    do {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::getline (std::cin, poglavlje);
        int i = 1;
        if (poglavlje != ".") {
            do {
                std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i &lt;&lt; ": ";
                std::getline (std::cin, str1);
                if (str1 != ".") {
                   v.push_back (str1); 
                   k.insert (std::make_pair (poglavlje, v));
                } 
                i++;
            } while (str1 != ".");
        }
        
    } while (poglavlje != ".");
    std::cout &lt;&lt; std::endl &lt;&lt; "Kreirani indeks pojmova:";
    auto indeks = KreirajIndeksPojmova (k);
    IspisiIndeksPojmova (indeks);
    std::string rijec;
    do {
        std::cout &lt;&lt; std::endl &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
        if (rijec != ".") {
            try {
                auto indeksi = PretraziIndeksPojmova (rijec, indeks);
                for (auto it = indeksi.begin(); it != indeksi.end(); it++) std::cout &lt;&lt; std::get&lt;0&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it) &lt;&lt; " ";
            } catch (std::logic_error e) {
                std::cout &lt;&lt; "Unesena rijec nije nadjena!";
            }
        }
    } while (rijec != ".");
</font>    
	return 0;
}
</pre>
</body>
</html>
