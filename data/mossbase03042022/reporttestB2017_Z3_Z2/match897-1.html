<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5804.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9128.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;

using std::cin;
using std::cout;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

<a name="1"></a><font color="#00FF00"><a href="match897-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

void UMalaSlova (std::string &amp;s) {
    for(int i=0; i&lt;s.length(); i++) {
        if(s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') s[i]=s[i]+32;
</font>    }
} 

bool Slovo(char s) {
    return (s&gt;='A' &amp;&amp; s&lt;='Z') || (s&gt;='a' &amp;&amp; s&lt;='z') || (s&gt;='0' &amp;&amp; s&lt;='9');
}

bool BioUIndeksu(std::string pomocni, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; Indeks) {
    UMalaSlova(pomocni);
    auto it(Indeks.find(pomocni));
    if(it==Indeks.end()) return false;
    else return true;
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga knjiga) {
    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; Indeks;
    
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) {
        
        for(int i=0; i&lt;it-&gt;second.size(); i++) {
            bool neslovo(true);
            bool pomjerio_se(false);
            for(int j=0; j&lt;it-&gt;second.at(i).size(); j++) {
                if(!Slovo(it-&gt;second.at(i).at(j))) neslovo=true;
                else if(neslovo==true) {
                    std::string pomocni;
                    int cuvaj(j);
                    while(j&lt;it-&gt;second.at(i).size() &amp;&amp; Slovo(it-&gt;second.at(i).at(j))) {
                        pomocni.insert(pomocni.end(), it-&gt;second.at(i).at(j));
                        pomjerio_se=true;
                        j++;
                    }
                    UMalaSlova(pomocni);
                    if(!BioUIndeksu(pomocni, Indeks)) {
                        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; pomocni_set;
                        std::tuple&lt;std::string, int, int&gt; ubaci;
                        ubaci=std::make_tuple(it-&gt;first, i+1, cuvaj);
                        pomocni_set.insert(ubaci);
                        Indeks[pomocni]=pomocni_set;
                    } else {
                        auto it2(Indeks.find(pomocni));
                        std::tuple&lt;std::string, int, int&gt; ubaci;
                        ubaci=std::make_tuple(it-&gt;first, i+1, cuvaj);
                        it2-&gt;second.insert(ubaci);
                    }
                    neslovo=false;
                    if(pomjerio_se) j--;
                }
            }
        }
    }
    return Indeks;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string rijec,  std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; Indeks) {
    UMalaSlova(rijec);
    auto it(Indeks.find(rijec));
<a name="0"></a><font color="#FF0000"><a href="match897-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    if(it==Indeks.end()) throw std::logic_error("Pojam nije nadjen");
    else return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; Indeks) {
</font>    auto it(Indeks.begin());
    while(it!=Indeks.end()) {
        cout&lt;&lt;it-&gt;first&lt;&lt;":";
        auto it2(it-&gt;second.begin());
        while(it2!=it-&gt;second.end()) {
            if(std::distance(it2, it-&gt;second.end())==1) {
<a name="2"></a><font color="#0000FF"><a href="match897-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                cout&lt;&lt;" "&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2);
            } else {
                cout&lt;&lt;" "&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;",";
</font><a name="3"></a><font color="#00FFFF"><a href="match897-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            }
            it2++;
        }
        cout&lt;&lt;"\n";
</font>        it++;
    }
}

int main ()
{
    Knjiga knjiga;
    std::string pomocni;
    
    for(;;) {
        cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::getline(cin, pomocni);
        if(pomocni==".") break;
        int i(1);
        std::string stranica;
        std::vector&lt;std::string&gt; vektor_stringova;
        for(;;) {
            cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::getline(cin, stranica);
            if(stranica==".") break;
            vektor_stringova.push_back(stranica);
            i++;
        }
        knjiga[pomocni]=vektor_stringova;
    }
    
    auto indeks(KreirajIndeksPojmova(knjiga));
    
    cout&lt;&lt;"\nKreirani indeks pojmova:\n";
    IspisiIndeksPojmova(indeks);
    
    std::string rijec;
    for(;;) {
        cout&lt;&lt;"Unesite rijec: ";
        std::getline(cin, rijec);
        if(rijec==".") break;
        try {
            auto pojmovi(PretraziIndeksPojmova(rijec, indeks));
            auto it(pojmovi.begin());
            while(it!=pojmovi.end()) {
                cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
                it++;
            }
            cout&lt;&lt;"\n";
        } catch(std::logic_error izuzetak) {
            cout&lt;&lt;"Unesena rijec nije nadjena!\n";
        }
    }
	return 0;
}
</pre>
</body>
</html>
