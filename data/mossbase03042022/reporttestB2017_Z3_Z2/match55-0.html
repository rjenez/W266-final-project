<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1446.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1446.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;cctype&gt;
#include &lt;iterator&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga knjiga) {
<a name="0"></a><font color="#FF0000"><a href="match55-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_91.gif"/></a>

    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa;
    for (auto it=knjiga.begin(); it!=knjiga.end(); it++) {
        std::string naziv_poglavlja;
        naziv_poglavlja=it-&gt;first;
        std::vector&lt;std::string&gt; sadrzaj_poglavlja;
        sadrzaj_poglavlja=it-&gt;second;
        for (int broj_stranice=0; broj_stranice&lt;sadrzaj_poglavlja.size(); broj_stranice++) {
            std::string sadrzaj_stranice;
            sadrzaj_stranice=sadrzaj_poglavlja.at(broj_stranice);
            std::string rijec;
            for (int indeks=0; indeks&lt;sadrzaj_stranice.length(); indeks++) {
                while (indeks&lt;sadrzaj_stranice.length() &amp;&amp; std::isalnum(sadrzaj_stranice.at(indeks))==0) indeks++;
                int pocetni_indeks;
                if (indeks&lt;sadrzaj_stranice.length()) {
                    pocetni_indeks=indeks;
                }
                else break;
                while (indeks&lt;sadrzaj_stranice.length() &amp;&amp; std::isalnum(sadrzaj_stranice.at(indeks))!=0) {
                    rijec.push_back(char(std::tolower(sadrzaj_stranice.at(indeks))));
                    indeks++;
                }
                if (mapa.begin()==mapa.end() || mapa.find(rijec)==mapa.end()) {
                    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup_za_rijec;
                    std::tuple&lt;std::string, int, int&gt; podaci_za_rijec;
                    podaci_za_rijec=std::make_tuple(naziv_poglavlja, broj_stranice+1, pocetni_indeks);
                    skup_za_rijec.insert(podaci_za_rijec);
                    mapa[rijec]=skup_za_rijec;
                    rijec="";
                }
                else {
                    std::tuple&lt;std::string, int, int&gt; podaci_za_rijec;
                    podaci_za_rijec=std::make_tuple(naziv_poglavlja, broj_stranice+1, pocetni_indeks);
                    (mapa[rijec]).insert(podaci_za_rijec);
                    rijec="";
                }
                if (indeks==sadrzaj_stranice.length()) break;
                while (indeks&lt;sadrzaj_stranice.length() &amp;&amp; std::isalnum(sadrzaj_stranice.at(indeks))==0) indeks++;
                indeks--;
            }
        }
    }
    return mapa;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string rijec, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indeks) {
    std::string mala_rijec;
    for (int i=0; i&lt;rijec.length(); i++) mala_rijec.push_back(char(std::tolower(rijec.at(i))));
    if (indeks.find(mala_rijec)==indeks.end()) throw std::logic_error("Unesena rijec nije nadjena!");
    return indeks[mala_rijec];
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa) {
    for (auto it=mapa.begin(); it!=mapa.end(); it++) {
        std::string rijec;
        rijec=it-&gt;first;
        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup_za_rijec;
        skup_za_rijec=it-&gt;second;
        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;::iterator kraj_skupa;
        kraj_skupa=skup_za_rijec.end();
        kraj_skupa--;
        std::cout &lt;&lt; rijec &lt;&lt; ": ";
        for (auto it_skupa=skup_za_rijec.begin(); it_skupa!=kraj_skupa; it_skupa++) {
            std::tuple&lt;std::string, int, int&gt; podaci_za_rijec;
            podaci_za_rijec=(*it_skupa);
            std::cout 
            &lt;&lt; std::get&lt;0&gt;(podaci_za_rijec) &lt;&lt; "/" 
            &lt;&lt; std::get&lt;1&gt;(podaci_za_rijec) &lt;&lt; "/" 
            &lt;&lt; std::get&lt;2&gt;(podaci_za_rijec) &lt;&lt; ", ";
        }
        std::tuple&lt;std::string, int, int&gt; podaci_za_rijec;
        podaci_za_rijec=(*kraj_skupa);
        std::cout 
        &lt;&lt; std::get&lt;0&gt;(podaci_za_rijec) &lt;&lt; "/" 
        &lt;&lt; std::get&lt;1&gt;(podaci_za_rijec) &lt;&lt; "/" 
        &lt;&lt; std::get&lt;2&gt;(podaci_za_rijec);
        std::cout &lt;&lt; std::endl;
    }
}

void IspisiTuple(std::tuple&lt;std::string, int, int&gt; ntorka) {
    std::cout 
    &lt;&lt; std::get&lt;0&gt;(ntorka) &lt;&lt; "/" 
    &lt;&lt; std::get&lt;1&gt;(ntorka) &lt;&lt; "/" 
    &lt;&lt; std::get&lt;2&gt;(ntorka) &lt;&lt; " ";
}

int main ()
{
    Knjiga knjiga;
    std::string naziv_poglavlja;
    do {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::getline(std::cin, naziv_poglavlja);
        if (naziv_poglavlja==".") break;
        int brojac(1);
        std::vector&lt;std::string&gt; sadrzaj_poglavlja;
        std::string sadrzaj_stranice;
        do {
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; brojac++ &lt;&lt; ": ";
            std::getline(std::cin, sadrzaj_stranice);
            if (sadrzaj_stranice==".") break;
            sadrzaj_poglavlja.push_back(sadrzaj_stranice);
        } while (sadrzaj_stranice!=".");
        knjiga[naziv_poglavlja]=sadrzaj_poglavlja;
    } while (naziv_poglavlja!=".");
    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; indeks_pojmova;
    indeks_pojmova=KreirajIndeksPojmova(knjiga);
    std::cout &lt;&lt; std::endl &lt;&lt; "Kreirani indeks pojmova:" &lt;&lt; std::endl;
    IspisiIndeksPojmova(indeks_pojmova);
    std::string rijec;
    do {
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
        if (rijec==".") break;
        try {
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
            skup=PretraziIndeksPojmova(rijec, indeks_pojmova);
            for (auto it=skup.begin(); it!=skup.end(); it++) {
                std::tuple&lt;std::string, int, int&gt; ntorka=(*it);
                IspisiTuple(ntorka);
            }
        }
        catch(std::logic_error greska) {
            std::cout &lt;&lt; greska.what();
        }
        std::cout &lt;&lt; std::endl;
    } while (rijec!=".");
</font>	return 0;
}
</pre>
</body>
</html>
