<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3169.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3169.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match13-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_37.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

bool dalijerijec(char a)
{
    return((a&gt;='a' &amp;&amp; a&lt;='z') || (a&gt;='A' &amp;&amp; a&lt;='Z') || (a&gt;='0' &amp;&amp; a&lt;='9'));
    
}

std::string Pretvor(std::string s)
{
    std::string s2;
    for(int i(0);i&lt;s.size();i++)
    {
        if(s.at(i)&gt;='A' &amp;&amp; s.at(i)&lt;='Z')s2.push_back(tolower(s.at(i)));
        else s2.push_back(s.at(i));
    }
    return s2;
}

std::vector&lt;std::string&gt; rijeci(std::string s)
{
    s=Pretvor(s);
    std::vector&lt;std::string&gt; v;
    int j(0);
    for(int i(0);i&lt;s.size();i++)
    {
        while(s.at(i)==' ' &amp;&amp; i!=s.size()-1)i++;
        if(dalijerijec(s.at(i)))
        {
        v.resize(v.size()+1);
        while(dalijerijec(s.at(i)) &amp;&amp; i!=s.size()-1)
        {
            
            v.at(j).push_back(s.at(i));
            i++;
            
        }
        if(dalijerijec(s.at(i)) &amp;&amp; i==s.size()-1)v.at(j).push_back(s.at(i));
        j++;
        }
    } 
        for(int i(0);i&lt;v.size()-1;i++)
        {
            for(int j(i+1);j&lt;v.size();j++)
            {
                if(v.at(i)==v.at(j))v.erase(v.begin()+j);
            }
        }
    return v;
}
std::vector&lt;int&gt; Podstring(std::string podstring, std::string s)
{
    podstring=Pretvor(podstring);
    s=Pretvor(s);
    std::vector&lt;int&gt; podstringovi;
        for(int i(0);i&lt;s.size();i++)
        {
            for(int j(0);j&lt;podstring.size();j++)
            {
             while(i&lt;s.size() &amp;&amp; s.at(i)!=podstring.at(j))i++;
             int brojac(0);
             int k(i);
             while(i&lt;s.size() &amp;&amp; j&lt;podstring.size() &amp;&amp; s.at(i)==podstring.at(j))
             {
                 brojac++;
                 i++;
                 j++;
             }
             if(brojac==podstring.size() &amp;&amp; (i==s.size() || s.at(i)==' ') &amp;&amp; (k==0 || s.at(k-1)==' '))
             {
                 podstringovi.push_back(k);
             }
             else break;  
            }
            i--;
        }
        return podstringovi;
}

std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga k){
</font><a name="0"></a><font color="#FF0000"><a href="match13-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_58.gif"/></a>

    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; pojmovi;
    for(auto it=k.begin();it!=k.end();it++)
    {
        for(int i(0);i&lt;it-&gt;second.size();i++)
        {
            auto v(rijeci(it-&gt;second[i]));
            for(int k(0);k&lt;v.size();k++)
            {
                auto it1(pojmovi.find(v[k]));
                if(it1==pojmovi.end())
                {
                    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; hehe;
                    std::tuple&lt;std::string, int, int&gt;hehee;
                    auto a(Podstring(v[k],it-&gt;second[i]));
                    for(int h(0);h&lt;a.size();h++)
                    {
                    hehee=std::make_tuple(it-&gt;first, i+1, a[h]);
                    hehe.insert(hehee);
                    }
                    
                    pojmovi[v[k]]=hehe;
                }
                else
                {
                    std::tuple&lt;std::string, int, int&gt;hehee;
                    auto a(Podstring(v[k],it-&gt;second[i]));
                    for(int h(0);h&lt;a.size();h++)
                    {
                    hehee=std::make_tuple(it-&gt;first, i+1, a[h]);
                    it1-&gt;second.insert(hehee);
                    }
                }
            }
            
        }
    }
    return pojmovi;
    
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string s, std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; knjigica)
{
    auto it(knjigica.find(s));
    if(it==knjigica.end())throw std::logic_error("Pojam nije nadjen");
    else return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; knjigica)
{
    for(auto it(knjigica.begin());it!=knjigica.end();it++)
    {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        auto it2(it-&gt;second.begin());
        int i(0);
        while(i!=it-&gt;second.size()-1)
        {
            std::cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;", ";
            i++;
            it2++;
        }
        std::cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;std::endl;
    }
}

int main ()
{
   std::string poglavlje;
    Knjiga knjizurina;
    while(1)
    {
    std::cout&lt;&lt;"Unesite naziv poglavlja: ";
    std::getline(std::cin, poglavlje);
        if(poglavlje==".")break;
        std::string stranice;
        std::vector&lt;std::string&gt;pomocni;
        int i(1);
        while(1)
        {
            
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::getline(std::cin, stranice);
            if(stranice==".")break;
            pomocni.push_back(stranice);
            i++;
        }
        knjizurina[poglavlje]=pomocni;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    auto pojmovi(KreirajIndeksPojmova(knjizurina));
    IspisiIndeksPojmova(pojmovi);
    while(1)
    {
    std::cout&lt;&lt;"Unesite rijec: ";
    std::string rijec;
    std::getline(std::cin, rijec);
    if(rijec==".")break;
    try {
        auto pretrazivac(PretraziIndeksPojmova(rijec, pojmovi));
        auto it=pretrazivac.begin();
        while(it!=pretrazivac.end())
        {
            std::cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
            it++;
        }
        std::cout&lt;&lt;std::endl;
    }
    catch (std::logic_error) {
        std::cout &lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
</font>    }
    
    }
    return 0;
}
</pre>
</body>
</html>
