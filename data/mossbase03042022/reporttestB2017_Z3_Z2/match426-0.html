<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4412.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4412.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;cctype&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; IndeksPojmova;

bool SlovoIliBroj(char znak)
{
    return ((znak&gt;='A' &amp;&amp; znak&lt;='Z') || (znak&gt;='a' &amp;&amp; znak&lt;='z') || (znak&gt;='0' &amp;&amp; znak&lt;='9'));
}

bool IsteRijeci(std::string s1, std::string s2) {
    auto it1(s1.begin()), it2(s2.begin());
    while(it1!=s1.end() &amp;&amp; it2!=s2.end()) {
        char znak1(*it1), znak2(*it2);
        if(std::toupper(znak1)!=std::toupper(znak2)) return false;
        it1++; it2++;
    }
    if(it1!=s1.end() || it2!=s2.end()) return false;
    return true;
}

IndeksPojmova KreirajIndeksPojmova(Knjiga k)
{
    IndeksPojmova trazeni_ip;
    auto kroz_knjigu(k.begin()); //it na uredeni par
    while(kroz_knjigu!=k.end()) { //krecem se kroz mapu, knjigu
        //uzela sam jedan uredjeni par
        auto v(kroz_knjigu-&gt;second); //uzela sam vektor stringova
        for(int i=0; i&lt;v.size(); i++) { //uzima se string po string
            auto s(v[i]); //jedna stranica iz vektora
            auto it(s.begin()); //krecem se kroz stranicu
            auto it1=s.begin();
            for(it1; it1!=s.end(); it1++) {
                if(SlovoIliBroj(*it1)) {
                    int pozicija(it1-it);
                    std::string pomocni;
                    auto it2(it1);
                    for(it2; it2!=s.end(); it2++) {
                        if(SlovoIliBroj(*it2)) pomocni.push_back(*it2);
                        else break;
                    }
                    it1=it2-1;
                    bool vec_postoji(false);
                    auto it3(trazeni_ip.begin());
                    for(it3; it3!=trazeni_ip.end(); it3++) {
                        if(IsteRijeci(pomocni, it3-&gt;first)) {
                            it3-&gt;second.insert(std::make_tuple(kroz_knjigu-&gt;first, i+1, pozicija));
                            vec_postoji=true;
                            break;
                        }
                    }
                    if(!vec_postoji)   {
                        for(int i=0; i&lt;pomocni.length(); i++) pomocni[i]=std::tolower(pomocni[i]);
                        auto a=std::make_tuple(kroz_knjigu-&gt;first, i+1, pozicija);
                        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
                        skup.insert(a);
                        auto p=std::make_pair(pomocni, skup);
                        trazeni_ip.insert(p);
                    }            }            }        }
        kroz_knjigu++;
    }
    return trazeni_ip;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string rijec, IndeksPojmova mapa) {
    std::vector&lt;std::tuple&lt;std::string, int, int&gt;&gt; v;
    if(!mapa.count(rijec)) 
        throw std::logic_error("Unesena rijec nije nadjena!");
    else return mapa.find(rijec)-&gt;second;
}

void IspisiIndeksPojmova(IndeksPojmova mapa)   
{
<a name="3"></a><font color="#00FFFF"><a href="match426-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int brojac(0);
</font>        for(auto t: it-&gt;second) {
            std::cout&lt;&lt;std::get&lt;0&gt;(t)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(t)&lt;&lt;"/"
                     &lt;&lt;std::get&lt;2&gt;(t);
            brojac++;
            if(brojac&lt;it-&gt;second.size()) std::cout&lt;&lt;", ";
        }
        std::cout&lt;&lt;std::endl;
    }
}

<a name="2"></a><font color="#0000FF"><a href="match426-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

int main ()
{
    Knjiga unesena_knjiga;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string poglavlje;
        std::getline(std::cin, poglavlje);
        if(poglavlje==".") break;
</font>        int brojac(1);
        std::vector&lt;std::string&gt; stranica;
        for(;;) {
<a name="1"></a><font color="#00FF00"><a href="match426-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;brojac&lt;&lt;": ";
            std::string cijela_stranica;
            std::getline(std::cin, cijela_stranica);
            if(cijela_stranica==".") break;
            stranica.push_back(cijela_stranica);
            brojac++;
</font>        }
        if(stranica.size()==0) break;
        unesena_knjiga.insert(std::pair&lt;std::string, std::vector&lt;std::string&gt;&gt;(poglavlje, stranica));
    }
    IndeksPojmova trazeni_ip(KreirajIndeksPojmova(unesena_knjiga));
    std::cout&lt;&lt;std::endl&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(trazeni_ip);
    for(;;) {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string rijec;
        std::getline(std::cin, rijec);
        if(rijec==".") break;
        try {
<a name="0"></a><font color="#FF0000"><a href="match426-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

            auto v(PretraziIndeksPojmova(rijec, trazeni_ip));
           
            for(auto element: v) {
                std::cout&lt;&lt;std::get&lt;0&gt;(element)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(element)
                    &lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(element)&lt;&lt;" ";
                
            }
            std::cout&lt;&lt;std::endl;

        } catch (std::logic_error izuzetak) {
            std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
        }
    }

    return 0;
</font>}
</pre>
</body>
</html>
