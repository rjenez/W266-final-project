<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4412.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1366.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;new&gt;
#include &lt;cctype&gt;
typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
typedef std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; SkupPozicija;
typedef std::map&lt;std::string, SkupPozicija&gt; IndeksPojmova;
bool DaLiJeSlovo (char znak) {
    if ((znak&gt;='a' &amp;&amp; znak&lt;='z') || (znak&gt;='A' &amp;&amp; znak&lt;='Z') || (znak&gt;='0' &amp;&amp; znak&lt;='9')) return true;
    return false;
}
std::string MalaSlova(std::string s) {
    for (char &amp;c : s) c=std::tolower(c);
    return s;
}
std::multimap&lt;std::string, int&gt; EkstraktujRijeci (std::string recenica) {
    auto it=recenica.begin();
    auto it2=recenica.begin();
    std::multimap&lt;std::string, int&gt; SpisakRijeci;
    int i(0);
    while (it!=recenica.end()) {
        while (it2!=recenica.end() &amp;&amp; !DaLiJeSlovo(*it2)) { it2++; i++; }
        it=it2;
        while(it2!=recenica.end() &amp;&amp; DaLiJeSlovo(*it2)) it2++;
        std::string rijec;
        std::copy(it, it2, back_inserter(rijec));
        if (rijec.length()) SpisakRijeci.insert({MalaSlova(rijec), i});
        i+=it2-it;
        it=it2;
    }
    return SpisakRijeci;
}
IndeksPojmova KreirajIndeksPojmova(Knjiga knjiga) {
    IndeksPojmova indeks;
    int i(1);
    for (auto poglavlje : knjiga) {
        for (auto stranica : poglavlje.second) {
            auto spisakrijeci=EkstraktujRijeci(stranica);
            for (auto rijec : spisakrijeci) {
                if (!indeks.count(rijec.first)) {
                    SkupPozicija skup;
                    skup.insert(std::tie(poglavlje.first, i, rijec.second));
                    indeks.insert({rijec.first, skup});
                }
                else {
                    indeks[rijec.first].insert(std::tie(poglavlje.first,i,rijec.second));
                }
            }
            i++;
        }
    }
    return indeks;
}
SkupPozicija PretraziIndeksPojmova(std::string rijec, IndeksPojmova indeks) {
    if (!indeks.count(MalaSlova(rijec))) throw std::logic_error("Pojam nije nadjen");
    return indeks.at(MalaSlova(rijec));
}
void IspisiIndeksPojmova (const IndeksPojmova &amp;indeks) {
    for (auto x : indeks) {
        std::cout&lt;&lt;x.first&lt;&lt;": ";
        auto pozicije=x.second;
        int i(0);
        for (auto pozicija : pozicije) {
            std::cout&lt;&lt;std::get&lt;0&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(pozicija);
            if (i!=pozicije.size()-1) std::cout&lt;&lt;", ";
            i++;
        }
<a name="1"></a><font color="#00FF00"><a href="match481-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        std::cout&lt;&lt;std::endl;
    }
}
int main ()
{
    Knjiga knjiga;
    for(;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string nazivpoglavlja;
        std::getline(std::cin, nazivpoglavlja);
        if (nazivpoglavlja==".") break;
</font>        std::vector&lt;std::string&gt; stranice;
        for (int i=1;;i++) {
<a name="2"></a><font color="#0000FF"><a href="match481-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::string sadrzaj;
            std::getline(std::cin, sadrzaj);
            if (sadrzaj==".") break;
            stranice.push_back(sadrzaj);
</font>        }
        knjiga.insert({nazivpoglavlja, stranice});
    }
<a name="3"></a><font color="#00FFFF"><a href="match481-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    auto indekspojmova=KreirajIndeksPojmova(knjiga);
    std::cout&lt;&lt;std::endl&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;std::endl;
    IspisiIndeksPojmova(indekspojmova);
    for (;;) {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string unos, rijec;
</font>        std::getline(std::cin, unos);
        std::copy_if(unos.begin(),unos.end(),std::back_inserter(rijec), [](char x) { return x!=' ';});
        if (rijec==".") break;
        try {
<a name="0"></a><font color="#FF0000"><a href="match481-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

            auto pozicije=PretraziIndeksPojmova(MalaSlova(rijec),indekspojmova);
            for (auto pozicija : pozicije)
                std::cout&lt;&lt;std::get&lt;0&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(pozicija)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(pozicija)&lt;&lt;" ";
            std::cout&lt;&lt;std::endl;
        }
        catch(std::logic_error &amp;e) {
</font>            std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
        }
    }
	return 0;
}
</pre>
</body>
</html>
