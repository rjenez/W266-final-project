<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5413.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5413.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::vector&lt;std:: string&gt;&gt; Knjiga;
<a name="0"></a><font color="#FF0000"><a href="match118-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

typedef std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; Index;
typedef std::set&lt;std::tuple&lt;std::string,int, int&gt;&gt; SkupPozicija;

void LowerCaseFun (std::string &amp;capslock)
{
    for (int i(0); i&lt;capslock.size(); i++) {
        if (capslock.at(i)&gt;='A' &amp;&amp; capslock.at(i)&lt;='Z') capslock.at(i)+='a'-'A';
    }
}

bool DaLiJeTacka (const std::string &amp;x)
{
    if (x==".") return true;
    return false;
}

bool PocetakRijeci (const char &amp;x)
{
    if ((x&gt;='A' &amp;&amp; x&lt;='Z') || (x&gt;='a' &amp;&amp; x&lt;='z')  || (x&gt;='0' &amp;&amp; x&lt;='9')) return true;
    return false;
}

int VratiVel (const std::string &amp;str)
{
    int Velicina(0);

    for (int i(0); i&lt;str.size(); i++) {
        if (PocetakRijeci(str[i])) Velicina++;
        else break;
    }
    return Velicina;
}


Index KreirajIndeksPojmova ( Knjiga &amp;bok)
{
    Index izlazni;

    for (auto it=bok.begin(); it!=bok.end(); it++) {

        auto pitB(it-&gt;second.begin()), pitE(it-&gt;second.end());
        int brojach_stranica(0);
        while (pitB!=pitE) {
            std::string V= *pitB;
            LowerCaseFun(V);
            int VEL(V.size());
            ++brojach_stranica;
            for (int i(0); i&lt;VEL; i++) {

                if (PocetakRijeci(V[i])) {
                    std::string zaf= V.substr (i, (V.size()-i));
                    int velicina=VratiVel(zaf);
                    std::string u_str= V.substr (i, velicina);
                    std::tuple&lt;std::string,int ,int&gt; pomocni= std::make_tuple (it-&gt;first, brojach_stranica ,i );
                    izlazni[u_str].insert(pomocni);
                    i+=velicina;
                }
            }
            pitB++;
        }
    }
    return izlazni;
}

void IspisiIndeksPojmova (const Index &amp;Mapa)
{
    for (auto it=Mapa.begin(); it!=Mapa.end(); it++) {
        auto lista(it-&gt;second);
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int size(0), i(0);

        for (auto x: lista) {
            size=lista.size();
            if (i==size-1 || size==1) {
                std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x);
                break;
            }
            std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;", ";
            i++;
        }
        std::cout&lt;&lt;std::endl;
    }
}

SkupPozicija PretraziIndeksPojmova ( std::string Trazi, Index Pojmova)
{
    if (!Pojmova.count(Trazi)) throw std::logic_error("Unesena rijec nije nadjena!");

    auto it (Pojmova.find(Trazi));
    SkupPozicija Nadjeno= it-&gt;second;

    return Nadjeno;
}

int main ()
{
    Knjiga Unos;
    std::string KP;
    for (;;) {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::getline (std::cin, KP);

        if (DaLiJeTacka(KP)) break;
        std::vector&lt;std::string&gt; Stranica;
        for (int i(1); ; i++) {

            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::string KPA;
            std::getline (std::cin, KPA);


            if (DaLiJeTacka(KPA)) {
                Unos[KP]=Stranica;
                break;
            } else {
                Stranica.push_back (KPA);
            }
        }
    }

    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;std::endl;
    auto xer ( KreirajIndeksPojmova (Unos));
    IspisiIndeksPojmova (xer);
    while (1) {
        std::string trazi;
        int i(0);
        std::cout&lt;&lt;"Unesite rijec: ";
        std::getline (std::cin, trazi);
        if (DaLiJeTacka(trazi)) break;
        try {

            auto ee( PretraziIndeksPojmova(trazi, xer));
            int size= ee.size();
            for (auto x:ee) {
                if (i==size-1 || size==1) {
                    std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x);
                    break;
                }
                std::cout&lt;&lt;std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x)&lt;&lt;" ";
                i++;
            }

        } catch (std::logic_error a) {
            std::cout&lt;&lt;a.what();

        }
        std::cout&lt;&lt;std::endl;
</font>    }
    return 0;
}
</pre>
</body>
</html>
