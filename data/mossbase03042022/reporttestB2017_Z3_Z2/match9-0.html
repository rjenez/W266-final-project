<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7655.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student7655.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match9-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_31.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;map&gt;
#include &lt;set&gt;
typedef std::map&lt;std::string,std::vector&lt;std::string&gt;&gt; Knjiga;
std::string PretvoriUMala(std::string s)
{
    for(int i(0); i&lt;s.length(); i++) {
        if(s[i]&gt;='A'&amp;&amp;s[i]&lt;='Z') s[i]+='a'-'A';
    }
    return s;
}
std::string IzbaciVisak(std::string s)
{
    s=PretvoriUMala(s);
    for(int i(0); i&lt;s.length(); i++) {
        if((s.at(i)&lt;'0'||s[i]&gt;'9')&amp;&amp;(s[i]&lt;'a'||s[i]&gt;'z'))  {
            s.erase(s.begin()+i);
            if(i&gt;0) s.insert(s.begin()+i,' ');
        }
    }
    return s;
}
std::vector&lt;std::string&gt; IzbaciDuple(std::string s,std::multimap&lt;std::string,int&gt;&amp;ma)
{
    std::vector&lt;std::string&gt;v;
    std::vector&lt;int&gt;brojac ;
    s=IzbaciVisak(s);
    s.insert(s.begin()+s.length(),' ');
    std::string s1;
    bool t(false),first_time(true);
    int j(0),br(0);
    for(int i(0); i&lt;s.length(); i++) {
        if(s[i]!=' ') {
            if(first_time) brojac.push_back(br);
            s1.push_back(s[i]);
            j++;
            t=true;
            first_time=false;
            br++;
        }
        if(s[i]==' '&amp;&amp;t==true) {
            first_time=true;
            br++;
            v.push_back(s1);
            s1.resize(0);
            j=0;
            t=false;
        }
    }
    for(int i(0); i&lt;brojac.size(); i++)
        ma.insert({v[i],brojac[i]});
    for(int i(0); i&lt;v.size(); i++)
        for(int j(i+1); j&lt;v.size(); j++)
            if(v.at(i)==v.at(j)) v.erase(v.begin()+j), j--;
    std::sort(v.begin(),v.end());
    return v;
}
std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga k)
</font>{
<a name="0"></a><font color="#FF0000"><a href="match9-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_64.gif"/></a>

    std::multimap&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt;Mapa;
    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup,pocetni {};
    std::multimap&lt;std::string,int&gt;ma,po_ma {};
    std::tuple&lt;std::string,int,int&gt;t;
    std::vector&lt;std::string&gt;v,v1,v3;
    std::vector&lt;int&gt;v2;
    std::string s,s1;
    for(auto it=k.begin(); it!=k.end(); it++) 
    {
        v=it-&gt;second;
   
        for(int i(0);i&lt;v.size();i++)
        {
         s=v[i];
            v1=IzbaciDuple(s,ma);
            for(auto it1=ma.begin(); it1!=ma.end(); it1++) {
                v3.push_back(it1-&gt;first);
                v2.push_back(it1-&gt;second);
            }
            int isti,isti1(0),pom(0);
            for(int j(0); j&lt;v1.size(); j++) {
                isti=(std::count(v3.begin(),v3.end(),v1[j]));
                for(int l=isti1; l&lt;isti+isti1; l++) {
                    t=std::make_tuple(it-&gt;first,i+1,v2[l]);
                    skup.insert(t);
                    pom=l;
                }
                isti1=pom+1;
                Mapa.insert({v1[j],skup});
                skup=pocetni;
            }
            ma=po_ma;
            isti1=0;
            v3.resize(0);
            v2.resize(0);
        }
    } 
    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt;Nova ;
    bool da(false);
    auto ite(Mapa.begin()),ite1(ite);
    while (ite!=Mapa.end()) {
        std::string s;
        s=ite-&gt;first;
        {
        std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;skup ;
        //for(auto it1=it;it1!=Mapa.end();it1++)
        while (ite1!=Mapa.end()) {
            if(ite1-&gt;first==ite-&gt;first)
                for(auto x: ite1-&gt;second) 
                    skup.insert(x);
            else { da=true; ite=ite1; break; }        
                ite1++;

        }
        if(da) da=false,ite--;
        ite++;
        Nova.insert({s,skup});
        }
    }
    return Nova; 
}
void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; Mapa)
{
        std::tuple&lt;std::string,int,int&gt;zadnji ;
    for(auto it=Mapa.begin();it!=Mapa.end();it++)
    {
        for(auto x:it-&gt;second) zadnji=x;
        std::cout &lt;&lt; it-&gt;first &lt;&lt;": ";
        for(auto x: it-&gt;second) 
        {
            std::cout&lt;&lt;std::get&lt;0&gt;(x) &lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x);
            if(x!=zadnji) std::cout &lt;&lt; ", ";
        }    
        std::cout  &lt;&lt; std::endl;
    }
}

int main ()
{
    std::string stranica,s1("abc qwe stsda abc abc dhi qwe hrkw dhi"),poglavlje;
    Knjiga k;
    std::vector&lt;std::string&gt;v ;
    int i(1);
    do {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::cin &gt;&gt; poglavlje;
        std::cin.ignore(1000,'\n');
        if(poglavlje==".") break;
        do {
            std::cout &lt;&lt; "Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::getline(std::cin,stranica);
            if(stranica==".") break;
            v.push_back(stranica);
            i++;
        } while(stranica!=".");
        i=1;
    k.insert({poglavlje,v});
    v.resize(0);
    } while(poglavlje!="."); 
    auto rez=KreirajIndeksPojmova(k);
    std::cout &lt;&lt; "\nKreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(rez);
    std::string rijec;
    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;skup ;
    do
    {
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin,rijec);
        auto it(rez.find(rijec));
        if(it!=rez.end()&amp;&amp;rijec!=".")
        {
            for(auto x:it-&gt;second)
            std::cout &lt;&lt; std::get&lt;0&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(x)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(x) &lt;&lt;" ";
            std::cout  &lt;&lt; std::endl;
        } 
         if(it==rez.end()&amp;&amp;rijec!=".") std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
    }
    while (rijec!=".");
</font>
    return 0;
}
</pre>
</body>
</html>
