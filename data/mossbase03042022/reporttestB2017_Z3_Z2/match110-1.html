<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9451.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2142.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match110-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

using namespace std;

typedef std::map&lt;std::string, std::vector&lt;std:: string&gt;&gt; Knjiga;
typedef map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; Indeks;
typedef std::vector&lt;std:: string&gt; Stranica;
typedef set&lt;tuple&lt;string,int,int&gt;&gt; Skup;

bool JelSlovo(char c)
{
    return (c&gt;='0' &amp;&amp; c&lt;='9') || (tolower(c)&gt;='a' &amp;&amp; tolower(c)&lt;='z'); 
}

Stranica VratiRijeci(Stranica s)
{   
    Stranica r;
    for(int i=0;i&lt;s.size();i++)
    {   
        
        for(int j=0;j&lt;s[i].size();j++)
        {   
            int br=0;
            while(JelSlovo(s[i][j]))
            {
                br++;
                j++;
            }
            if(!JelSlovo(s[i][j]))
                r.push_back(s[i].substr(j-br,br));
        }
    }
    return r;
}

void IspisStranicu(Stranica s)
{
    for(int i=0;i&lt;s.size();i++)
    {
        cout&lt;&lt;s[i]&lt;&lt;endl;
    }
}
void IspisiIndeksPojmova(Indeks i)
{   
    //cout&lt;&lt;i.size()&lt;&lt;" ";
   // cout&lt;&lt;"Indeks: "&lt;&lt;endl;
    for(auto it=i.begin();it!=i.end();it++)
    {   
        
        cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int br=0;
        for(auto it1=it-&gt;second.begin();it1!=it-&gt;second.end();it1++,br++)
        {
            cout&lt;&lt;get&lt;0&gt;(*it1)&lt;&lt;"/";
            
            cout&lt;&lt;get&lt;1&gt;(*it1)&lt;&lt;"/";
            
            
            if(br==it-&gt;second.size()-1)
                    cout&lt;&lt;get&lt;2&gt;(*it1);
            else 
                cout&lt;&lt;get&lt;2&gt;(*it1)&lt;&lt;", ";
        }   
        cout&lt;&lt;endl;
    }
    
}

int VratiPoziciju(string s,string p)
{
    for(int i=0;i&lt;p.size();i++)
    {
        if(s==p.substr(i,s.size()))
            return i;
    }
}

Indeks KreirajIndeksPojmova(Knjiga k)
{
    Indeks i;
    
    for(auto it=k.begin();it!=k.end();it++)
    {  
        Stranica s=it-&gt;second;
        for(int j=0;j&lt;s.size();j++)
        {  
            string r;
            int duz; 
            
            for(int k=0;k&lt;s[j].size();k++)
            {
                int br=0;
                Skup skup;
                while(JelSlovo(s[j][k]))
                {
                    br++;
                    k++;
                }
                if(!JelSlovo(s[j][k]))
                    r=s[j].substr(k-br,br);
                
                for(auto &amp;a:r)
                    a=tolower(a);
                    
                bool ima=0;
                for(auto a:i)
                    if(r==a.first) ima=1;
                
                
                skup.insert(make_tuple(it-&gt;first,j+1,k-br));
                
               
                    for(int p=k;p&lt;=s[j].size();p++)
                    {       
                        if(r==s[j].substr(p-br,br))
                            skup.insert(make_tuple(it-&gt;first,j+1,p-br));
                    }
                if(ima==0)
                  i[r]=skup;
                 else
                 { 
                     for(auto a:skup)
                     i[r].insert(a);
                 }
            }
           
           
        }
        
    }
    
    return i;
}

Skup PretraziIndeksPojmova(string s,Indeks i)
{
    for(auto a:i)
    {
        if(a.first==s)
            return a.second;
    }
    throw logic_error("Unesena rijec nije nadjena!");
}

int main ()
{   
    Knjiga k;
     for(;;)
     {
          cout&lt;&lt;"Unesite naziv poglavlja: ";
          string s; getline(cin,s);
          if(s==".") break;
          vector&lt;string&gt; v;
          int br=1;
          for(;;)
          {
               cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;br++&lt;&lt;": ";
               string trojka;
               getline(cin,trojka);
               if(trojka==".") break;
               else v.push_back(trojka);
          }
          k[s]=v;
     }
     Indeks ind=KreirajIndeksPojmova(k);
     cout&lt;&lt;endl&lt;&lt;"Kreirani indeks pojmova: "&lt;&lt;endl;
     IspisiIndeksPojmova(ind);
     for(;;)
     {
          cout&lt;&lt;"Unesite rijec: ";
          string trojka; getline(cin,trojka);
          if(trojka==".") break;
          try{
          auto str=PretraziIndeksPojmova(trojka,ind);
          int i=0;
          for(auto it=str.begin(); it!=str.end(); it++,i++)
               {
                    auto trojka=*it;
                    cout&lt;&lt;get&lt;0&gt;(trojka)&lt;&lt;"/"&lt;&lt;get&lt;1&gt;(trojka)&lt;&lt;"/"&lt;&lt;get&lt;2&gt;(trojka)&lt;&lt;" ";
                    if(i==(str.size())-1) cout&lt;&lt;endl;
                    
               }
          }catch(logic_error e) {cout&lt;&lt;e.what()&lt;&lt;endl; }
</font>     }
    return 0;
}
</pre>
</body>
</html>
