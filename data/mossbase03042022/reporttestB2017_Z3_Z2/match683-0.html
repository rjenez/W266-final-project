<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2240.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2240.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;


std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga k)
{
<a name="1"></a><font color="#00FF00"><a href="match683-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; rezultat;
    
    std::vector&lt;std::string&gt; vektor_rijeci;                                     ///Pomocni vektor koji sadrzi sve rijeci - stringove.
</font>    for (auto it = k.begin(); it != k.end(); it++)                              ///Prolazak kroz knjigu i pronalazenje svih rijeci.
    {
        for (auto stranica = it-&gt;second.begin(); stranica != it-&gt;second.end(); stranica++)    ///Prolazak kroz svaki vektor i otkrivanje rijeci.
        {
            std::string s = *stranica;
            
            for (int i{};i&lt;s.length();i++)
            {
                if (s[i] != ' ')
                {
                    std::string rijec;
                    for (int j{i}; j&lt;s.length(); j++)
                    {
                        if (s[j] == ' ')
                            break;
                            
                        bool u1 = false, u2 = false, u3 = false;
                        
                        if (s[j]&gt;='0' &amp;&amp; s[j]&lt;='9')
                            u1 = true;
                            
                        if (s[j]&gt;='A' &amp;&amp; s[j]&lt;='Z')
                            u2 = true;
                            
                        if (s[j]&gt;='a' &amp;&amp; s[j]&lt;='z')
                            u3 = true;
                            
                        if (u1 == false &amp;&amp; u2 == false &amp;&amp; u3 == false)
                            break;
                        
                        
                        if (s[j]&gt;='A' &amp;&amp; s[j]&lt;='Z')
                            s[j] = s[j] + 'a' - 'A';
                            
                        rijec.push_back(s[j]);
                        
                        i = j;
                    }
                    
                    bool upisan = false;
                    for (int j{};j&lt;vektor_rijeci.size();j++)                    ///Provjera postojanja rijeci i upis u slucaju da nije otkrivena vec rijec.
                    {
                        if (vektor_rijeci[j] == rijec)
                            upisan = true;
                    }
                    
                    for (int brojac{}; brojac &lt; rijec.length(); brojac++)       ///Provjera da li je rijec ili neki znak.
                    {
                        bool u1 = false, u2 = false;
                        
                        if (rijec[brojac]&gt;='0' &amp;&amp; rijec[brojac]&lt;='9')
                            u1 = true;
                            
                        if (rijec[brojac]&gt;='A' &amp;&amp; rijec[brojac]&lt;='Z')
                            upisan = true;
                            
                        if (rijec[brojac]&gt;='a' &amp;&amp; rijec[brojac]&lt;='z')
                            u2 = true;
                            
                        if (u1 == false &amp;&amp; u2 == false)
                            upisan = true;
                    }
                    
                    if (upisan == false)
                        vektor_rijeci.push_back(rijec);
                    
                }
            }
            
        }
    }
    
    for (int l{};l&lt;vektor_rijeci.size();l++)                                    ///Trazenje svih indeksa pojmova, preko pronadjenih rijeci.
    {
        if (vektor_rijeci[l].length() == 0)                                     ///U slucaju upisanih znakova, koji su prekidali rijeci.
            continue;
            
         std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;  skup_indeksa;  
         for (auto it = k.begin(); it != k.end(); it++)                         ///Ponovni prolazak kroz knjigu, kljucna rijec je ime poglavlja.
         {
             for (auto stranica = it-&gt;second.begin(); stranica != it-&gt;second.end(); stranica++)   ///Prolazak kroz svaki vektor unutrar poglavlja (stranica == indeks vektora + 1).
             {
                 std::string s = *stranica;
                 int broj_stranice = stranica-it-&gt;second.begin()+1;
                 
                 for (int i{};i&lt;s.length();i++)
            {
                if (s[i] != ' ')
                {
                    int pocetak_rijeci = i;
                    std::string rijec;
                    for (int j{i}; j&lt;s.length(); j++)
                    {
                        if (s[j] == ' ')
                            break;
                            
                        bool u1 = false, u2 = false, u3 = false;
                        
                        if (s[j]&gt;='0' &amp;&amp; s[j]&lt;='9')
                            u1 = true;
                            
                        if (s[j]&gt;='A' &amp;&amp; s[j]&lt;='Z')
                            u2 = true;
                            
                        if (s[j]&gt;='a' &amp;&amp; s[j]&lt;='z')
                            u3 = true;
                            
                        if (u1 == false &amp;&amp; u2 == false &amp;&amp; u3 == false)
                            break;
                        
                        
                        if (s[j]&gt;='A' &amp;&amp; s[j]&lt;='Z')
                            s[j] = s[j] + 'a' - 'A';
                            
                        rijec.push_back(s[j]);
                        
                        i = j;
                    }
                    
                    
                    if (rijec == vektor_rijeci[l])                              ///Pronadjena rijec, formiranje tuple-a.
                        skup_indeksa.insert(std::make_tuple(it-&gt;first, broj_stranice, pocetak_rijeci));
                }
            }
             }
         }
         
         
        rezultat.insert(std::pair&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; (vektor_rijeci[l], skup_indeksa)); 
    }
    
    
    
    return rezultat;
}

<a name="2"></a><font color="#0000FF"><a href="match683-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova (std::string s, std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indeksi)
{
    std::string rijec;
</font>    for (int i{};i&lt;s.length();i++)                                              ///Modifikacija rijeci za prilagodbu pretrazi.
    {
        if (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')
            rijec.push_back(s[i]);
            
        else if (s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z')
            rijec.push_back(s[i]+'a'-'A');
            
        else if (s[i]&gt;='a' &amp;&amp; s[i]&lt;='z')
            rijec.push_back(s[i]);
    }
    
    auto it = indeksi.find(rijec);
    
    if (it == indeksi.end())
        throw std::logic_error ("Pojam nije nadjen");
        
    return it-&gt;second;
}


<a name="3"></a><font color="#00FFFF"><a href="match683-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

void IspisiIndeksPojmova (std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; ispis)
{
    for (auto it = ispis.begin(); it != ispis.end(); it++)
    {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
</font>        
        auto posljednji_element = it-&gt;second.end();
        posljednji_element--;
<a name="0"></a><font color="#FF0000"><a href="match683-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        for (auto skup = it-&gt;second.begin(); skup != it-&gt;second.end(); skup++)
        {
            if (skup == posljednji_element)
                std::cout&lt;&lt;std::get&lt;0&gt;(*skup)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*skup)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*skup)&lt;&lt;std::endl;
</font>            else
                std::cout&lt;&lt;std::get&lt;0&gt;(*skup)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*skup)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*skup)&lt;&lt;", ";
        }
    }
}



int main ()
{
    Knjiga k;
    
    while (true)
    {
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string poglavlje;
<a name="4"></a><font color="#FF00FF"><a href="match683-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::getline(std::cin, poglavlje);
        
        if (poglavlje == ".")
            break;
            
        std::vector&lt;std::string&gt; stranice;
        int brojac = 1;
</font>        while (true)
        {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;brojac++&lt;&lt;": ";
            std::string pomocni;
            std::getline(std::cin, pomocni);
            
            if (pomocni == ".")
                break;
                
            stranice.push_back(pomocni);
        }
        
        k.insert (std::pair&lt;std::string,std::vector&lt;std::string&gt;&gt; (poglavlje, stranice));
    }
    
    auto indeksi = KreirajIndeksPojmova(k);
    
    std::cout&lt;&lt;std::endl;
    
    std::cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(indeksi);
    
    std::cout&lt;&lt;std::endl;
    
    while (true)
    {
        try
        {
            std::cout&lt;&lt;"Unesite rijec: ";
            std::string rijec;
            std::getline(std::cin, rijec);
            
            if (rijec == ".")
                break;
                
            auto skup = PretraziIndeksPojmova(rijec, indeksi);
            for (auto it = skup.begin(); it != skup.end(); it++)
                std::cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
                
            std::cout&lt;&lt;std::endl;
        }
        catch (std::logic_error e)
        {
            std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
        }
    }
    
    
    
    
	return 0;
}
</pre>
</body>
</html>
