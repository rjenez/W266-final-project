<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5957.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8753.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match33-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
using std::vector;
using std::set;
using std::string;
using std::tuple;
using std::map;
using std::cout;
using std::cin;
typedef map&lt;string,vector&lt;string&gt;&gt; Knjiga;
typedef map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; Mapa;

void PretvoriUMala(vector&lt;string&gt; &amp;vec)
{
    for(int i(0); i&lt;vec.size(); i++) {
        for(int j(0); j&lt;vec[i].length(); j++)
            if(vec[i][j]&gt;='A' &amp;&amp; vec[i][j]&lt;='Z') vec[i][j]-='A'-'a';
    }
}

vector&lt;vector&lt;string&gt;&gt; Rastavi(vector&lt;string&gt; vec)
{
    vector&lt;vector&lt;string&gt;&gt; mat;
    vector&lt;string&gt; RastaviString(string s);
    for(int i(0); i&lt;vec.size(); i++) {
        mat.push_back(RastaviString(vec[i]));
    }
    return mat;
}

vector&lt;string&gt; RastaviString(string s)
{
    vector&lt;string&gt; vec;
    for(int i(0); i&lt;s.length(); i++) {
        if(!((s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9'))) {
            string pom;
            for(int j(i); j&lt;s.length() &amp;&amp; (!((s[j]&gt;='a' &amp;&amp; s[j]&lt;='z') || (s[j]&gt;='0' &amp;&amp; s[j]&lt;='9'))); j++) {
                pom.push_back(s[j]);
                i++;
            }
            vec.push_back(pom);
            i--;
        } else {
            string pom;
            for(int j(i); j&lt;s.length() &amp;&amp; ((s[j]&gt;='a' &amp;&amp; s[j]&lt;='z') || (s[j]&gt;='0' &amp;&amp; s[j]&lt;='9')); j++) {
                pom.push_back(s[j]);
                i++;
            }
            vec.push_back(pom);
            i--;
        }
    }
    return vec;
}

Mapa KreirajIndeksPojmova(Knjiga knjiga)
{
    for(auto it(knjiga.begin()); it!=knjiga.end(); it++) PretvoriUMala(it-&gt;second);
    map&lt;string,vector&lt;vector&lt;string&gt;&gt;&gt; pomocna_knjiga;
    for(auto it(knjiga.begin()); it!=knjiga.end(); it++)
        pomocna_knjiga[it-&gt;first]=Rastavi(it-&gt;second);
    set&lt;string&gt; rijeci;
    for(auto it(pomocna_knjiga.begin()); it!=pomocna_knjiga.end(); it++) {
        for(auto &amp;y : it-&gt;second)
            for(auto &amp;x : y)
                if((x[0]&gt;='a' &amp;&amp; x[0]&lt;='z') || (x[0]&gt;='0' &amp;&amp; x[0]&lt;='9')) rijeci.insert(x);
    }
    Mapa mapa;
    for(auto it(rijeci.begin()); it!=rijeci.end(); it++) {
        for(auto it1(pomocna_knjiga.begin()); it1!=pomocna_knjiga.end(); it1++) {
            for(int i(0); i&lt;it1-&gt;second.size(); i++) {
                int brojac(0);
                for(int j(0); j&lt;it1-&gt;second[i].size(); j++) {
                    if(it1-&gt;second[i][j]==*it) {
                        mapa[*it].insert(std::make_tuple(it1-&gt;first,i+1,brojac));
                    }
                    brojac+=it1-&gt;second[i][j].length();
                }
            }
        }
    }
    return mapa;
}

set&lt;tuple&lt;string,int,int&gt;&gt; PretraziIndeksPojmova(string s,Mapa &amp;mapa)
{
    auto it(mapa.find(s));
    if(it==mapa.end()) throw std::logic_error("Unesena rijec nije nadjena!");
    return it-&gt;second;
}

void IspisiIndeksPojmova(Mapa &amp;mapa)
{
    for(auto it1(mapa.begin()); it1!=mapa.end(); it1++) {
        cout&lt;&lt;it1-&gt;first&lt;&lt;": ";
        for(auto it2(it1-&gt;second.begin()); it2!=it1-&gt;second.end(); it2++) {
            auto it3(it2);
            it3++;
            if(it3==it1-&gt;second.end())
                cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2);
            else cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;", ";
        }
        cout&lt;&lt;std::endl;
    }
}

int main ()
{
    Knjiga knjiga;
    for(;;) {
        int i(1);
        string poglavlje;
        cout&lt;&lt;"Unesite naziv poglavlja: ";
        getline(cin,poglavlje);
        if(poglavlje==".") break;
        knjiga.insert({poglavlje,{}});
        for(;;) {
            string text;
            cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            getline(cin,text);
            if(text==".") break;
            knjiga[poglavlje].push_back(text);
            i++;
        }
    }
    Mapa mapa(KreirajIndeksPojmova(knjiga));
    cout&lt;&lt;std::endl&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(mapa);
    cout&lt;&lt;std::endl;
    for(;;) {
        string rijec;
        cout&lt;&lt;"Unesite rijec: ";
        getline(cin,rijec);
        if(rijec==".") break;
        try {
            set&lt;tuple&lt;string,int,int&gt;&gt; skup(PretraziIndeksPojmova(rijec,mapa));
            for(auto it(skup.begin()); it!=skup.end(); it++)
                cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
        } catch(std::logic_error izuzetak) {
            cout&lt;&lt;izuzetak.what();
        }
        cout&lt;&lt;std::endl;
</font>    }

    return 0;
}
</pre>
</body>
</html>
