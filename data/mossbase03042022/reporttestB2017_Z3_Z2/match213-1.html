<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3867.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3329.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;

<a name="0"></a><font color="#FF0000"><a href="match213-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

typedef std::map &lt; std::string, std::vector &lt; std::string &gt; &gt; Knjiga;

typedef std::set &lt; std::tuple &lt; std::string, long, long &gt; &gt; Pozicije;

typedef std::map &lt; std::string, Pozicije &gt; IndeksPojmova;

IndeksPojmova KreirajIndeksPojmova ( Knjiga book )
{
    int pos;
    std::string word { "" };
    IndeksPojmova pojmovi;
    for ( auto const &amp;page : book )
        for ( int i = 0; i &lt; page.second.size (); i++ )
            for ( int j = 0; j &lt; page.second.at ( i ).length (); j++ )
            {
                if ( isalnum ( page.second.at ( i ).at ( j ) ) )
                { // formiranje rijeci iz vektora
                    pos = j; // pozicija rijeci
                    while ( j != page.second.at ( i ).length () and isalnum ( page.second.at ( i ).at ( j ) ) )
                        word += page.second.at ( i ).at ( j++ );
                }
                else 
                    continue;
                
                std::transform ( word.begin (), word.end (), word.begin (), ::tolower );
                int foo = i + 1; // stranica na kojoj se nalazi rijec, 1+index
                
                pojmovi [ word ].insert ( std::tie ( page.first, foo, pos ) );
                word = "";
            }

    return pojmovi;            
}

Pozicije PretraziIndeksPojmova ( std::string s, IndeksPojmova pojmovi )
{
    IndeksPojmova::iterator it { pojmovi.find ( s ) };
    if ( it == pojmovi.end () )
        throw std::logic_error ( "Unesena rijec nije nadjena!" );
    
    return it -&gt; second;
}

void IspisiIndeksPojmova ( IndeksPojmova pojmovi )
{
    for ( auto const &amp;pojam : pojmovi )
    {
        std::cout &lt;&lt; pojam.first &lt;&lt; ":";
        unsigned long vel { pojam.second.size () }, i { 0 };
        
        for ( const std::tuple &lt; std::string, long, long &gt; &amp;tup : pojam.second )
            std::cout &lt;&lt; " " &lt;&lt; std::get &lt; 0 &gt; ( tup ) &lt;&lt; "/" &lt;&lt; std::get &lt; 1 &gt; ( tup ) &lt;&lt; "/" &lt;&lt; std::get &lt; 2 &gt; ( tup ) &lt;&lt; 
                ( ( ++i == vel ) ? "\n" : "," );
    }
}

int main ( void )
{
    std::string input, head;
    Knjiga book;
    while ( true )
    {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::getline ( std::cin, head );
        if ( head == "." )
            break;
        for ( int i = 1; ; i++ )
        {
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i &lt;&lt; ": ";
            std::getline ( std::cin, input );
            if ( input == "." )
                break;
            book [ head ].push_back ( input );
        }
    }
    
    IndeksPojmova indp { KreirajIndeksPojmova ( book ) };
    
    std::cout &lt;&lt; "\nKreirani indeks pojmova:" &lt;&lt; std::endl;
    IspisiIndeksPojmova ( indp );
    std::cout &lt;&lt; std::endl;
    
    Pozicije pos;
    while ( true )
    {
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline ( std::cin, input );
        if ( input == "." )
            break;
                
        std::transform ( input.begin (), input.end (), input.begin (), ::tolower );
        
        try { pos = PretraziIndeksPojmova ( input, indp ); }
        catch ( const std::exception &amp;e) { std::cout &lt;&lt; e.what () &lt;&lt; std::endl; continue; }

        for ( const std::tuple &lt; std::string, long, long &gt; &amp;tup : pos )
            std::cout &lt;&lt; std::get &lt; 0 &gt; ( tup ) &lt;&lt; "/" &lt;&lt; std::get &lt; 1 &gt; ( tup ) &lt;&lt; "/" &lt;&lt; std::get &lt; 2 &gt; ( tup ) &lt;&lt; " ";
        
        std::cout &lt;&lt; std::endl;
    }
    
    return 0;
</font>}</pre>
</body>
</html>
