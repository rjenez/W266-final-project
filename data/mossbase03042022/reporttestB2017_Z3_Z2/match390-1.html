<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3108.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student3217.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;
#include &lt;string&gt;
#include &lt;cctype&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;
<a name="3"></a><font color="#00FFFF"><a href="match390-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; IndeksPojmova;

std::string toLower (std::string str) {
</font>    for (auto &amp;ch : str)
        ch = tolower(ch);
    return str;
}

void UbaciUIndeksPojmova (IndeksPojmova &amp;pojmovi, std::string rijec, std::tuple&lt;std::string, int, int&gt; pozicija) {
    rijec = toLower(rijec);
    std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; pozicije;
    pozicije.insert(pozicija);
    std::pair&lt;IndeksPojmova::iterator, bool&gt; ret = pojmovi.insert({rijec, pozicije});
    if (ret.second == false)
        ret.first-&gt;second.insert(pozicija);
    return;
}

IndeksPojmova KreirajIndeksPojmova (Knjiga &amp;knjiga) {
    IndeksPojmova pojmovi;
    for (Knjiga::iterator it = knjiga.begin() ; it != knjiga.end() ; it++) {
        std::string poglavlje = it-&gt;first;
<a name="1"></a><font color="#00FF00"><a href="match390-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        std::vector&lt;std::string&gt; stranice = it-&gt;second;
        for (int i = 0 ; i &lt; stranice.size() ; i++) {
            for (int j = 0 ; j &lt; stranice[i].length() ; j++) {
                int pocetak = j;
</font>                int duzina = 0;
                while ((stranice[i][j] &gt;= 'A' &amp;&amp; stranice[i][j] &lt;= 'Z') || (stranice[i][j]  &gt;= 'a' &amp;&amp; stranice[i][j] &lt;= 'z') 
                       || (stranice[i][j] &gt;= '0' &amp;&amp; stranice[i][j] &lt;= '9')) {
                           duzina++;
                           j++;
                }
                if (duzina &gt; 0) {
                    std::string rijec = stranice[i].substr(pocetak, duzina);
                    std::tuple&lt;std::string, int, int&gt; pozicija { poglavlje, i + 1, pocetak };
<a name="2"></a><font color="#0000FF"><a href="match390-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                    UbaciUIndeksPojmova(pojmovi, rijec, pozicija);
                }
            }
        }
    }
    return pojmovi;
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova (std::string pojam, IndeksPojmova pojmovi) {
</font>    IndeksPojmova::iterator it = pojmovi.find(pojam);
    if (it == pojmovi.end())
        throw std::logic_error("Pojam nije nadjen");
    return it-&gt;second;
}

void IspisiIndeksPojmova (IndeksPojmova &amp;pojmovi) {
    for (IndeksPojmova::iterator iti = pojmovi.begin() ; iti != pojmovi.end() ; iti++) {
        std::cout &lt;&lt; iti-&gt;first &lt;&lt; ": ";
        std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;::iterator posljednjaPozicija = iti-&gt;second.end();
        posljednjaPozicija--;
<a name="0"></a><font color="#FF0000"><a href="match390-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

        for(std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;::iterator itj = iti-&gt;second.begin() ; itj != posljednjaPozicija ; itj++)
        std::cout &lt;&lt; std::get&lt;0&gt;(*itj) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*itj) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*itj) &lt;&lt; ", ";
        std::cout &lt;&lt; std::get&lt;0&gt;(*posljednjaPozicija) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*posljednjaPozicija) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*posljednjaPozicija) &lt;&lt; std::endl;
</font>        
    }
}

void IspisiPozicije (std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; pozicije) {
    for (std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;::iterator it = pozicije.begin() ; it != pozicije.end() ; it++)
        std::cout &lt;&lt; std::get&lt;0&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it) &lt;&lt; " ";
}


int main ()
{
    Knjiga knjiga;
    std::string poglavlje;
    std::cout &lt;&lt; "Unesite naziv poglavlja: ";
    std::cin &gt;&gt; poglavlje;
    std::cin.ignore(10000, '\n');
    while (poglavlje != ".") {
        std::vector&lt;std::string&gt; stranice;
        std::string stranica;
        int i = 0;
        std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i + 1 &lt;&lt; ": ";
        std::getline(std::cin, stranica);
        i++;
        while (stranica != ".") {
            stranice.push_back(stranica);  
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i + 1 &lt;&lt; ": ";
            std::getline(std::cin, stranica);
            i++;
        }
        knjiga.insert({poglavlje, stranice});
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::cin &gt;&gt; poglavlje;
        std::cin.ignore(10000, '\n');
    }
    IndeksPojmova pojmovi = KreirajIndeksPojmova(knjiga);
    std::cout &lt;&lt; std::endl &lt;&lt; "Kreirani indeks pojmova: " &lt;&lt; std::endl;
    IspisiIndeksPojmova(pojmovi);
    
    std::cout &lt;&lt; std::endl &lt;&lt; "Unesite rijec: ";
    std::string pojam;
    std::cin &gt;&gt; pojam;
    while (pojam != ".") {
        try {
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; pozicije = PretraziIndeksPojmova(pojam, pojmovi);
            IspisiPozicije(pozicije);
            std::cout &lt;&lt; std::endl;
        } catch(std::logic_error e) {
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; "Unesite rijec: ";
        std::cin &gt;&gt; pojam;
        
    }
    
	return 0;
}
</pre>
</body>
</html>
