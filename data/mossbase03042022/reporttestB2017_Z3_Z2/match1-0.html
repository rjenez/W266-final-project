<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1583.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student1583.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;set&gt;

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

<a name="0"></a><font color="#FF0000"><a href="match1-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; IndeksPojmova;

using std::cout;
using std::cin;
using std::endl;



bool jeste_slovo(const char c)
{
    return {(c&gt;='a' &amp;&amp; c&lt;='z') || (c&gt;='A' &amp;&amp; c&lt;='Z')};
}

bool jeste_cifra(const char c)
{
    return {c&gt;='0' &amp;&amp; c&lt;='9'};
}

void PretvoriUMaloSlovo(char &amp;znak)
{
    znak=std::tolower(znak);
}

bool iste_rijeci(std::string s1, std::string s2)
{
    std::for_each(s1.begin(),s1.end(),PretvoriUMaloSlovo);
    std::for_each(s2.begin(),s2.end(),PretvoriUMaloSlovo);
    return s1==s2;
}

std::string rijec_mala_slova(std::string s)
{
    std::for_each(s.begin(),s.end(),PretvoriUMaloSlovo);
    return s;
}

bool NijednoPojavljivanjeRijeciUTekstu(const std::string &amp;rijec, const std::string &amp;tekst)
{


    int i(0);

    while(i&lt;tekst.length()) {

        while(i&lt;tekst.length() &amp;&amp; !jeste_slovo(tekst.at(i)) &amp;&amp; !jeste_cifra(tekst.at(i)) ) i++;
        if(i+rijec.length()&lt;=tekst.length() &amp;&amp; std::tolower(tekst.at(i))==std::tolower(rijec.at(0))) {
            
            auto poc(&amp;tekst.at(i));
            std::string podstring;;
            const char* iza_kraja;
            if(i+rijec.length()!=tekst.length()) {
                iza_kraja=&amp;tekst.at(i+rijec.length());
                std::copy(poc,iza_kraja,std::back_inserter(podstring));
            }

            else {
                std::basic_string&lt;char&gt;::const_iterator it1(poc);
                std::basic_string&lt;char&gt;::const_iterator q(tekst.end());
                std::copy(it1,q,std::back_inserter(podstring));
            }
      
            if(iste_rijeci(rijec,podstring)) return false;



        }
        while( i&lt;tekst.length() &amp;&amp; ( jeste_slovo(tekst.at(i)) || jeste_cifra(tekst.at(i)) ) ) i++;
        //cout&lt;&lt;tekst.at(i-1)&lt;&lt;endl;
    }


    return true;
}


std::vector&lt;int&gt; VektorPolozajaRijeci(const std::string &amp;rijec, const std::string &amp;tekst)
{

    std::vector&lt;int&gt; v;
    int i(0);

    while(i&lt;tekst.length()) {

        while(i&lt;tekst.length() &amp;&amp; !jeste_slovo(tekst.at(i)) &amp;&amp; !jeste_cifra(tekst.at(i)) ) i++;

        if(i+rijec.length()&lt;=tekst.length() &amp;&amp; std::tolower(tekst.at(i))==std::tolower(rijec.at(0))) {
            //cout&lt;&lt;tekst.at(i)&lt;&lt;endl;
            auto poc(&amp;tekst.at(i));
            std::string podstring;;
            const char* iza_kraja;
            if(i+rijec.length()!=tekst.length()) {
                iza_kraja=&amp;tekst.at(i+rijec.length());
                std::copy(poc,iza_kraja,std::back_inserter(podstring));
            }

            else {
                std::basic_string&lt;char&gt;::const_iterator it1(poc);
                std::basic_string&lt;char&gt;::const_iterator q(tekst.end());
                std::copy(it1,q,std::back_inserter(podstring));
            }
            //cout&lt;&lt;rijec&lt;&lt;" "&lt;&lt;podstring&lt;&lt;endl;
            if(iste_rijeci(rijec,podstring)) v.push_back(i);


        }
        while( i&lt;tekst.length() &amp;&amp; ( jeste_slovo(tekst.at(i)) || jeste_cifra(tekst.at(i)) ) ) i++;

    }

    return v;
}



IndeksPojmova KreirajIndeksPojmova (const Knjiga &amp;knjiga)
{

    IndeksPojmova indeks_pojmova;

    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) {
        for(int i=0; i&lt;it-&gt;second.size(); i++) {
            auto stranica(it-&gt;second.at(i)); //(i+1). stranica



            int j(0);
            while(j&lt;stranica.length()) {

                while( j&lt;stranica.length() &amp;&amp; !jeste_slovo(stranica.at(j)) &amp;&amp; !jeste_cifra(stranica.at(j)) ) j++;

                if(  j&lt;stranica.length() &amp;&amp; ( jeste_slovo(stranica.at(j)) || jeste_cifra(stranica.at(j)) )  ) {

                    const char* poc(&amp;stranica.at(j));

                    int k(j);

                    while( k&lt;stranica.length() &amp;&amp; (jeste_slovo(stranica.at(k)) || jeste_cifra(stranica.at(k))) ) k++;
                    const char* iza_kraja;
                    std::string rijec;

                    if(k!=stranica.length()) {
                        iza_kraja=&amp;stranica.at(k);
                        std::copy(poc,iza_kraja,std::back_inserter(rijec));
                    }

                    else {
                        std::basic_string&lt;char&gt;::const_iterator iza_kraja_it(stranica.end());
                        std::basic_string&lt;char&gt;::const_iterator it_poc(poc);
                        std::copy(it_poc,iza_kraja_it,std::back_inserter(rijec));
                    }


                    if(k!=stranica.length()) {

                        std::string ostatak_teksta;
                        std::basic_string&lt;char&gt;::const_iterator iza_kraja_2(iza_kraja);
                        std::basic_string&lt;char&gt;::const_iterator abc(stranica.end());
                        std::copy(iza_kraja_2,abc,std::back_inserter(ostatak_teksta));
                        
                        if( NijednoPojavljivanjeRijeciUTekstu(rijec,ostatak_teksta) ) {
                            auto v(VektorPolozajaRijeci(rijec,stranica));
                            std::string mala_rijec(rijec_mala_slova(rijec));

                            for(int n=0; n&lt;v.size(); n++)
                                indeks_pojmova[mala_rijec].insert(std::make_tuple(it-&gt;first,i+1,v.at(n)));

                        }
                    } else {
                        auto v(VektorPolozajaRijeci(rijec,stranica));
                        std::string mala_rijec(rijec_mala_slova(rijec));
                        for(int n=0; n&lt;v.size(); n++)
                            indeks_pojmova[mala_rijec].insert(std::make_tuple(it-&gt;first,i+1,v.at(n)));


                    }
                }

                while(j&lt;stranica.length() &amp;&amp; ( jeste_slovo(stranica.at(j)) || jeste_cifra(stranica.at(j)) ) ) j++;
            }
        }
    }

    return indeks_pojmova;

}

std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(const std::string &amp;rijec, const IndeksPojmova &amp;indeks_pojmova)
{

    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup_pozicija;
    std::string mala_rijec(rijec);
    std::for_each(mala_rijec.begin(),mala_rijec.end(),PretvoriUMaloSlovo);
    
    auto it(indeks_pojmova.find(mala_rijec));
    if(it==indeks_pojmova.end()) throw std::logic_error("Pojam nije nadjen");
    
    for(auto it=indeks_pojmova.begin(); it!=indeks_pojmova.end(); it++)
        if(it-&gt;first==mala_rijec) skup_pozicija=it-&gt;second;


    return skup_pozicija;

}

void IspisiIndeksPojmova(const IndeksPojmova &amp;indeks_pojmova)
{

    for(auto it=indeks_pojmova.begin(); it!=indeks_pojmova.end(); it++) {
        cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for(auto it2=it-&gt;second.begin(); it2!=it-&gt;second.end(); it2++) {
            if(std::distance(it2,it-&gt;second.end())!=1)
                cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2)&lt;&lt;", ";
            else cout&lt;&lt;std::get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it2);
        }
        cout&lt;&lt;endl;
    }
}


int main()
{
    
    Knjiga knjiga;
    
    cout&lt;&lt;"Unesite naziv poglavlja: ";
    std::string naziv_poglavlja;
    std::getline(cin,naziv_poglavlja);
    
    
    while(naziv_poglavlja!="."){
        
        int cnt(0);
        
        std::vector&lt;std::string&gt; vektor_stranica;
        cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;cnt+1&lt;&lt;": ";
        std::string sadrzaj_stranice;
        std::getline(cin, sadrzaj_stranice);
        
        while(sadrzaj_stranice!="."){
        vektor_stranica.push_back(sadrzaj_stranice);
        cnt++;
        cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;cnt+1&lt;&lt;": ";
        std::getline(cin, sadrzaj_stranice);
        
        }
        
        knjiga[naziv_poglavlja]=vektor_stranica;
        
       cout&lt;&lt;"Unesite naziv poglavlja: ";
       std::getline(cin,naziv_poglavlja);
    }
    
   

    auto indeks_pojmova(KreirajIndeksPojmova(knjiga));

    cout&lt;&lt;endl&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;endl;
    IspisiIndeksPojmova(indeks_pojmova);
    
    cout&lt;&lt;endl&lt;&lt;"Unesite rijec: ";
    std::string trazena_rijec;
    std::getline(cin,trazena_rijec);
    
    while(trazena_rijec!="."){

    try {
        auto skup_pozicija_rijeci(PretraziIndeksPojmova(trazena_rijec,indeks_pojmova));
        
        for(auto it=skup_pozicija_rijeci.begin();it!=skup_pozicija_rijeci.end();it++){
            
            if(std::distance(it,skup_pozicija_rijeci.end())!=1 )
            cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
            else cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it);
            
        }
        cout&lt;&lt;endl;
    }
    catch(std::logic_error izuzetak) {
        cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;endl;
    }
    
    cout&lt;&lt;"Unesite rijec: ";
    std::getline(cin,trazena_rijec);
</font>    
    }
    
    return 0;
}
</pre>
</body>
</html>
