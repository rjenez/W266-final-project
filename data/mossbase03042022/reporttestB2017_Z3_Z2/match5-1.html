<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student6007.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5612.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match5-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

typedef std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; Knjiga;

//Funkcija koja pretvara mala slova u velika
void PretvoriUVelika(std::string &amp;s)
{
    for(int i = 0; i &lt; s.length(); i++) {
        if(s.at(i) &gt;= 'a' &amp;&amp; s.at(i) &lt;= 'z') s.at(i) -= 'a' - 'A';
    }
}
//Funkcija koja pretvara velika slova u mala
void PretvoriUMala(std::string &amp;s)
{
    for(int i = 0; i &lt; s.length(); i++) {
        if(s.at(i) &gt;= 'A' &amp;&amp; s.at(i) &lt;= 'Z') s.at(i) += 'a' - 'A';
    }
}

//Implementacija funkcije "KreirajIndeksPojmova"
std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; KreirajIndeksPojmova (Knjiga k)
{
    //Deklaracija i inicijalizacija iteratora na pocetak objekta tipa Knjiga
    std::map&lt;std::string, std::vector&lt;std::string&gt;&gt;::iterator it(k.begin());

    //Deklaracija objekta koji se vraca kao rezultat iz funkcije
    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa_koja_se_vraca;

    //Prolazak kroz knjigu
    while(it != k.end()) {

        //Deklaracija i inicijalizacija pomocnog vektora, vektorom stringova(sadrzajem stranica knjige)
        std::vector&lt;std::string&gt; pomocni_vektor(it-&gt;second);

        
        //Prolazak kroz prethodno definirani pomocni vektor stringova
        for(int i = 0; i &lt; pomocni_vektor.size(); i++) {
            //Izdvajanje rijeci iz pomocnog stringa i smjestanje istih u promijenjivu pomocna_rijec

            //Deklaracija i inicijalizacija pomocnog stringa
            std::string pomocni_string(pomocni_vektor[i]);

            //Pretvorba svih malih slova unutar pomocnog stringa, u velika slova
            PretvoriUVelika(pomocni_string);

            //Deklaracija i inicijalizacija indexa rijeci(pozicija unutar stringa)
            int pocetak(0);

            //Prolazak kroz prethodno definirani pomocni string

            for(int j = 0; j &lt; pomocni_string.length(); j++) {
                std::string pomocna_rijec;
                //Deklaracija skupa ciji su elementi trojke (naziv_poglavlja,redni_broj_stranice_index_rijeci)
                std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup_u_mapi;
                //Izdvajanje rijeci iz pomocnog stringa i smjestanje istih u promijenjivu pomocna_rijec
                if(j != 0 ) {
                    if(pomocni_string[j] &gt;= 'A' &amp;&amp; pomocni_string[j] &lt;= 'Z' || (pomocni_string[j] &gt;= 0 &amp;&amp; pomocni_string[j] &lt;= '9')) {
                        if(pomocni_string[j-1] == ' ' || (pomocni_string[j-1] &lt; 'A' || pomocni_string[j-1] &gt; 'Z')) {
                            pocetak = j;
                            while(pomocni_string[j] &gt;= 'A' &amp;&amp; pomocni_string[j] &lt;= 'Z' || (pomocni_string[j] &gt;= '0' &amp;&amp; pomocni_string[j] &lt;= '9')) {
                                pomocna_rijec.push_back(pomocni_string[j]);
                                j++;
                            }

                        }
                    }

                } else {
                    pocetak = j;
                    while(pomocni_string[j] &gt;= 'A' &amp;&amp; pomocni_string[j] &lt;= 'Z' || (pomocni_string[j] &gt;= '0' &amp;&amp; pomocni_string[j] &lt;= '9')) {
                        pomocna_rijec.push_back(pomocni_string[j]);
                        j++;
                    }

                }

                skup_u_mapi.insert(std::make_tuple(it-&gt;first,i+1,pocetak));
                for(int k = j; k &lt; pomocni_string.size(); k++) {
                    if(pomocni_string[k] == pomocna_rijec[0] &amp;&amp; (pomocni_string[k-1] == ' '
                            || pomocni_string[k-1] &lt; 'A' || pomocni_string[k-1] &gt; 'Z')) {
                        int l(0);
                        int pocetak1(k);
                        while(pomocni_string[k] == pomocna_rijec[l]) {
                            k++;
                            l++;
                            if(k == pomocni_string.size() - 1) break;
                            if(l == pomocna_rijec.size() - 1) break;
                        }
                        if(l == pomocna_rijec.size()-1) {
                            skup_u_mapi.insert(std::make_tuple(it-&gt;first,i+1,pocetak1));
                        }
                    }

                }
                PretvoriUMala(pomocna_rijec);
               
               mapa_koja_se_vraca.insert({pomocna_rijec,skup_u_mapi});
            }

        }
        
        it++;
    }
    return mapa_koja_se_vraca;
}

//Implementacija funckija "PretraziIndeksPojmova"
std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(std::string s, std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; &amp;Mapa)
{

    //Deklaracija skupa ciji su elementi trojke(naziv_poglavlja,index_stranice,index_rijeci)
    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup;

    //Deklaracija i inicijalizacija iteratora na pocetak mape koja predstavlja index pojmova
    auto it(Mapa.begin());

    //Prolazak kroz mapu koja predstavlja index pojmova
    while(it != Mapa.end()) {

        //Deklaracija i inicijalizacija pomocnog vektora, na vektor stringova(sadrzaja stranica knjige)
        std::vector&lt;std::string&gt; pomocni_vektor(it-&gt;second);

        //Prolazak kroz prethodno definirani pomocni vektor
        for(int i = 0; i &lt; pomocni_vektor.size(); i++) {

            //Deklaracija i inicijalizacija pomocnog stringa, na (i-ti) element pomocnog vektora
            std::string pomocni_string(pomocni_vektor[i]);

            //Prolazak kroz prethodno definirani pomocni string
            for(int j = 0; j &lt; pomocni_string.size(); j++) {
                if(j != 0) {
                    if(pomocni_string[j] == s[0] &amp;&amp; (pomocni_string[j-1] == ' '||
                                                     pomocni_string[j-1] &lt; 'A' || pomocni_string[j-1] &gt; 'Z')) {
                        int l(0);
                        int pocetak1(j);
                        while(pomocni_string[j] == s[l]) {
                            j++;
                            l++;
                            if(j == pomocni_string.size() - 1) break;
                            if(l == s.size() - 1) break;
                        }
                        if(l == s.size() - 1 &amp;&amp; pomocni_string[j] &gt;= 'A' &amp;&amp; pomocni_string[j] &lt;= 'Z')
                            throw std::logic_error("Unesena rijec nije nadjena!");
                        if(l == s.size() - 1) {
                            skup.insert(std::make_tuple(it-&gt;first,i+1,pocetak1));
                        }

                    }
                } else {
                    if(pomocni_string[j] == s[0]) {
                        int l(0);
                        int pocetak1(j);
                        while(pomocni_string[j] == s[l]) {
                            j++;
                            l++;
                            if(j == pomocni_string.size() - 1) break;
                            if(l == s.size() - 1) break;
                        }
                        if(l == s.size() - 1) {
                            skup.insert(std::make_tuple(it-&gt;first,i+1,pocetak1));
                        }
                    }

                }
                /*
                //Trazenje stringa s unutar pomocnog stringa
                if(pomocni_string[j] == s[0]) {
                    int k(0);
                    int pozicija(j);
                    while(pomocni_string[j] == s[k]) {
                        j++;
                        k++;
                    }
                    //Insertovanje trojke u skup(ukoliko je pronadjen trazeni string)
                    if(k == s.size() - 1) {
                        skup.insert(std::make_tuple(it-&gt;first,i,pozicija));
                    } else if(j = pomocni_string.size()) throw std::logic_error("Pojam nije nadjen");
                }
                */
            }

        }
        it++;
    }
    return skup;
}
//Implementacija funkcije "IspisiIndeksPojmova"
void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; &amp;IndexPojmova)
{

    for(auto x: IndexPojmova) {
        std::cout &lt;&lt; x.first &lt;&lt; ": ";
        int brojac_parova(0);
        for(auto y: x.second) {
            std::cout &lt;&lt; std::get&lt;0&gt;(y) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(y) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(y);
            brojac_parova++;
            if(brojac_parova == x.second.size()) continue;
            std::cout &lt;&lt; ", ";
        }
        std::cout &lt;&lt; std::endl;
    }

}
int main ()
{

    std::string naziv_poglavlja;
    std::string sadrzaj;
    std::map&lt;std::string, std::vector&lt;std::string&gt;&gt; knjiga;
    std::vector&lt;std::string&gt; pomocni;
    do {
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::getline(std::cin,naziv_poglavlja);
        if(naziv_poglavlja == ".") break;
        int i(1);
        do {
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i &lt;&lt; ": ";
            std::getline(std::cin,sadrzaj);
            if(sadrzaj == ".") break;
            pomocni.push_back(sadrzaj);
            i++;

        } while(sadrzaj != ".");
        knjiga.insert({naziv_poglavlja,pomocni});
    } while (naziv_poglavlja != ".");

    std::cout &lt;&lt; "\nKreirani indeks pojmova:\n";
    std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indekspojmova(KreirajIndeksPojmova(knjiga));
    IspisiIndeksPojmova(indekspojmova);

    try {
        std::string rijec;
        do {
            std::cout &lt;&lt; "Unesite rijec: ";
            std::getline(std::cin,rijec);
            if(rijec == ".") break;
            std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;pretraga(PretraziIndeksPojmova(rijec,knjiga));
            int brojac(0);
            for(auto x: pretraga) {
                std::cout &lt;&lt; std::get&lt;0&gt;(x) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(x) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(x);
                brojac++;
                //brojac_parova++;
                //if(brojac_parova == x.second.size()) continue;
                std::cout &lt;&lt; " ";
            }
            if(brojac == 0) std::cout &lt;&lt; "Unesena rijec nije nadjena!";
            std::cout &lt;&lt; std::endl;
        } while(rijec != ".");
    } catch(std::logic_error e) {
        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
    }
    return 0;
</font>}
</pre>
</body>
</html>
