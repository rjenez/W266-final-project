<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2148.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student2148.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::vector&lt;std:: string&gt;&gt; Knjiga;
typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; IndeksPojmova;

void Indeksi(IndeksPojmova &amp;mapa, const std::vector&lt;std::string&gt; &amp;rijeci, std::string &amp;pojmovi, const std::string &amp;poglavlje, int stranica)
{
    for(int i=0; i&lt;pojmovi.length();)
    {
        std::string rijec="";
        while((pojmovi[i]&lt;'a' || pojmovi[i]&gt;'z')&amp;&amp;(pojmovi[i]&lt;'0' || pojmovi[i]&gt;'9')&amp;&amp;(pojmovi[i]&lt;'A' || pojmovi[i]&gt;'Z')&amp;&amp;i&lt;pojmovi.length())
        {
            i++;
        }
<a name="1"></a><font color="#00FF00"><a href="match827-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        while(((pojmovi[i]&gt;='a' &amp;&amp; pojmovi[i]&lt;='z')||(pojmovi[i]&gt;='0' &amp;&amp; pojmovi[i]&lt;='9')||(pojmovi[i]&gt;='A' &amp;&amp; pojmovi[i]&lt;='Z'))&amp;&amp;i&lt;pojmovi.length())
</font>        {
            rijec+=pojmovi[i];
            i++;
        }
        for(int k=0; k&lt;rijec.length(); k++)
        {
            if(rijec[k]&gt;='A' &amp;&amp; rijec[k]&lt;='Z') rijec[k]+=('a'-'A');
        }
        auto it(mapa.find(rijec));
        if(it == mapa.end())
        {
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup;
            skup.insert(std::make_tuple(poglavlje, stranica, i-rijec.length()));
            mapa.insert(std::make_pair(rijec, skup));
        }
        else
        {
            it-&gt;second.insert(std::make_tuple(poglavlje, stranica, i-rijec.length()));
        }
    }
}

void IzdvojiRijeci(std::vector&lt;std::string&gt; &amp;rijeci, const std::string &amp;pojmovi)
{
    for(int i=0; i&lt;pojmovi.length();)
    {
        bool test(false);
        std::string rijec="";
        while((pojmovi[i]&lt;'a' || pojmovi[i]&gt;'z')&amp;&amp;(pojmovi[i]&lt;'0' || pojmovi[i]&gt;'9')&amp;&amp;(pojmovi[i]&lt;'A' || pojmovi[i]&gt;'Z')&amp;&amp;i&lt;pojmovi.length())
        {
            i++;
        }
<a name="2"></a><font color="#0000FF"><a href="match827-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        while(((pojmovi[i]&gt;='a' &amp;&amp; pojmovi[i]&lt;='z')||(pojmovi[i]&gt;='0' &amp;&amp; pojmovi[i]&lt;='9')||(pojmovi[i]&gt;='A' &amp;&amp; pojmovi[i]&lt;='Z'))&amp;&amp;i&lt;pojmovi.length())
</font>        {
            rijec+=pojmovi[i];
            i++;
        }
        for(int j=0; j&lt;rijeci.size(); j++)
        {
            if(rijeci[j]==rijec) test=true;
        }
        if(!test) rijeci.push_back(rijec);
    }
}

IndeksPojmova KreirajIndeksPojmova(Knjiga knjiga)
{
    IndeksPojmova mapa;
    std::vector&lt;std::string&gt; rijeci;
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++)
    {
        std::vector&lt;std::string&gt; stranice=it-&gt;second;
        for(int i=0; i&lt;stranice.size(); i++)
        {
            std::string pojmovi=stranice[i];
            IzdvojiRijeci(rijeci, pojmovi);
        }
    }
    for(int i=0; i&lt;rijeci.size(); i++)
    {
        for(int k=0; k&lt;rijeci[i].length(); k++)
        {
            if(rijeci[i][k]&gt;='A' &amp;&amp; rijeci[i][k]&lt;='Z') rijeci[i][k]+=('a'-'A');
        }
    }
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++)
    {
        std::vector&lt;std::string&gt; stranice=it-&gt;second;
        for(int i=0; i&lt;stranice.size(); i++)
        {
            std::string pojmovi=stranice[i];
            Indeksi(mapa, rijeci, pojmovi, it-&gt;first, i+1);
        }
    }
    return mapa;
}

void IspisiIndeksPojmova(const IndeksPojmova &amp;mapa)
{
    std::cout &lt;&lt; "Kreirani indeks pojmova:" &lt;&lt; std::endl;
<a name="0"></a><font color="#FF0000"><a href="match827-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    for(auto it=mapa.begin(); it!=mapa.end(); it++)
    {
        std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        for(auto it2=it-&gt;second.begin(); it2!=it-&gt;second.end(); it2++)
</font>        {
            std::cout &lt;&lt; std::get&lt;0&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it2) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it2);
            auto itpom=it2;
            if((++itpom)!=it-&gt;second.end() &amp;&amp; it-&gt;second.size()!=1) std::cout &lt;&lt; ", ";
        }
        std::cout &lt;&lt; std::endl;
    }
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(const std::string &amp;rijec, const IndeksPojmova &amp;mapa)
{
    auto it=mapa.find(rijec);
    if(it==mapa.end())
    {
        throw std::logic_error("Pojam nije nadjen");
    }
    else
    {
        return it-&gt;second;
    }
}

int main()
{
    Knjiga knjiga;
    for(;;)
    {
        std::string poglavlje;
        std::cout &lt;&lt; "Unesite naziv poglavlja: ";
        std::vector&lt;std::string&gt; stranice;
        std::getline(std::cin, poglavlje);
        if(poglavlje==".") break;
        int i=1;
        for(;;)
        {
            std::cout &lt;&lt; "Unesite sadrzaj stranice " &lt;&lt; i &lt;&lt; ": ";
            std::string unos;
            std::getline(std::cin, unos);
            if(unos==".") break;
            stranice.push_back(unos);
            i++;
        }
        knjiga.insert(std::make_pair(poglavlje, stranice));
    }
    IndeksPojmova mapa=KreirajIndeksPojmova(knjiga);
    std::cout &lt;&lt; std::endl;
    IspisiIndeksPojmova(mapa);
    for(;;)
    {
        try
        {
            std::string unos;
            std::cout &lt;&lt; "Unesite rijec: ";
            std::getline(std::cin, unos);
            if(unos==".") break;
            std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; skup=PretraziIndeksPojmova(unos, mapa);
            for(auto it=skup.begin(); it!=skup.end(); it++)
            {
                std::cout &lt;&lt; std::get&lt;0&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(*it) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(*it);
                auto itpom=it;
<a name="3"></a><font color="#00FFFF"><a href="match827-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

                if((itpom++)!=skup.end()) std::cout &lt;&lt; " ";
            }
            std::cout &lt;&lt; std::endl;
        }
        catch(std::logic_error e)
        {
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
</font>        }
    }
    return 0;
}
</pre>
</body>
</html>
