<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8412.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8412.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include&lt;map&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;tuple&gt;
#include&lt;set&gt;
<a name="0"></a><font color="#FF0000"><a href="match733-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

std::string mala(std::string s)
{
    for(int i=0;i&lt;s.size();i++)
    {
        if(s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') s[i]=s[i]-('A'-'a');
</font>    }
    return s;
}
typedef std::map&lt;std::string, std::vector&lt;std:: string&gt;&gt; Knjiga;
std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt;KreirajIndeksPojmova(Knjiga k)
{
    std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; mapa;
    std::vector&lt;std::tuple&lt;std::string,std::string,int,int&gt;&gt; v;
    int vel=0;
    for(auto x:k) {
        auto p=x.second.begin();
        int stranica=1;
        while(p!=x.second.end()) {
            for(int i=0; i&lt;(*p).size(); i++) {
                int u=i;
                if(((*p)[i]&gt;='a' &amp;&amp; (*p)[i]&lt;='z') or ((*p)[i]&gt;='A' &amp;&amp; (*p)[i]&lt;='Z') or ((*p)[i]&gt;='0' &amp;&amp; (*p)[i]&lt;='9')) {
                    std::string rijec;
                    for( u=i; u&lt;(*p).size(); u++) {
                        if(((*p)[u]&gt;='a' &amp;&amp; (*p)[u]&lt;='z') or ((*p)[u]&gt;='A' &amp;&amp; (*p)[u]&lt;='Z') or ((*p)[u]&gt;='0' &amp;&amp; (*p)[u]&lt;='9')) {
                            rijec.push_back((*p)[u]);
                        } else break;
                        
                    }
                    vel++;
                    v.resize(vel);
                    v[vel-1]=std::make_tuple(mala(rijec),x.first,stranica,i);
                    
                    i=u;
                }

            }
            p++;
            stranica++;
        }

    }
   
    for(int i=0; i&lt;v.size(); i++) {
        std::tuple&lt;std::string,int,int&gt; t;
        if(std::get&lt;0&gt;(v[i])!="gotovo") {
            t=std::make_tuple(std::get&lt;1&gt;(v[i]),std::get&lt;2&gt;(v[i]),std::get&lt;3&gt;(v[i]));
            mapa[std::get&lt;0&gt;(v[i])].insert(t);
            for(int j=i+1; j&lt;v.size(); j++) {
                if(mala(std::get&lt;0&gt;(v[j]))==mala(std::get&lt;0&gt;(v[i]))) {
                    t=std::make_tuple(std::get&lt;1&gt;(v[j]),std::get&lt;2&gt;(v[j]),std::get&lt;3&gt;(v[j]));
                    mapa[mala(std::get&lt;0&gt;(v[i]))].insert(t);
                    std::get&lt;0&gt;(v[j])="gotovo";
                }
            }
        }
    }

    return mapa;
}
std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; PretraziIndeksPojmova(std::string rijec,std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; mapa)
{
    std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; c;
    for(auto x: mapa) {if(rijec==x.first) return x.second;}
    return c;
}
<a name="1"></a><font color="#00FF00"><a href="match733-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt;&gt; indeks){
    auto p=indeks.begin();
    while(p!=indeks.end()){
        std::cout&lt;&lt;std::endl&lt;&lt;(*p).first&lt;&lt;": ";
</font>        auto p2((*p).second.begin());
        int br=0;
        while(p2!=(*p).second.end())
        {
            if(br+1!=(*p).second.size())
            std::cout&lt;&lt;std::get&lt;0&gt;(*(p2))&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*(p2))&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*(p2))&lt;&lt;", ";
<a name="3"></a><font color="#00FFFF"><a href="match733-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            else
            std::cout&lt;&lt;std::get&lt;0&gt;(*(p2))&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*(p2))&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*(p2));
</font>            p2++;
            br++;
        }
        
        p++;
    }
}
int main ()
{
    Knjiga k;
    do{
    int i=1;
    
    std::cout&lt;&lt;"Unesite naziv poglavlja: ";
    std::string prostor;
        
        std::getline(std::cin,prostor);
        if(prostor==".") break;
        
    do{
         std::string prostor2;
        std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
        
        std::getline(std::cin,prostor2);
       
        if(prostor2==".") break;
        k[prostor].push_back(prostor2);
        i++;
    }while(1==1);
    }while(1==1);
    std::cout&lt;&lt;"\nKreirani indeks pojmova:";
    auto indeks=KreirajIndeksPojmova(k);
    IspisiIndeksPojmova(indeks);
   do{
    std::cout&lt;&lt;"\nUnesite rijec: ";
    std::string r;
    std::getline(std::cin,r);
    if(r==".") break;
    auto d=PretraziIndeksPojmova(r,indeks);
   if(d.size()==0) std::cout&lt;&lt;"Unesena rijec nije nadjena!";
   else{
<a name="2"></a><font color="#0000FF"><a href="match733-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    auto p2=d.begin();
        while(p2!=d.end())
        {
           
            std::cout&lt;&lt;std::get&lt;0&gt;(*(p2))&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*(p2))&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*(p2))&lt;&lt;" ";
</font>            
            p2++;
          
        }
   }
   }while (true);
      
   
    return 0;
}
</pre>
</body>
</html>
