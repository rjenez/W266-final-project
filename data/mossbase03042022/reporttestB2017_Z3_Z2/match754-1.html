<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4736.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9272.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match754-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;ctype.h&gt;
using namespace std;
typedef map&lt;string,vector&lt;string&gt;&gt; Knjiga;
</font>
void PretvoriStringUMalaSlova(string &amp;s){
    for(int i=0;i&lt;s.length();i++){
        s[i]=tolower(s[i]);
    }
}

<a name="2"></a><font color="#0000FF"><a href="match754-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; KreirajIndeksPojmova(Knjiga K){
    map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; mapa;
</font>    int br_poglavlja(0);
    string poglavlje;
    for(pair&lt;string,vector&lt;string&gt;&gt; p: K){
        br_poglavlja++;                                // redni broj poglavlja
        poglavlje=p.first;                               // Ime prvog poglavlja
        for(int i=0;i&lt;p.second.size();i++){
            string str=p.second[i];                  //uzimam jednu po jednu stranicu iz poglavlja
            PretvoriStringUMalaSlova(str);                   //pretvaram string tako da sva slova u stringu budu mala tj. u jednoj stranici
            int br_stranice=i+1;                                        //pamtim koja je stranica iz doredjenog poglavlja
            for(int j=0;j&lt;str.length();j++){                                //prolazim kroz tu stranicu i trazim odgovarjuce rijeci
              string temp;
              int poz_rijeci;
              if((str[j]&gt;='a' &amp;&amp; str[j]&lt;='z') || (str[j]&gt;='0' &amp;&amp; str[j]&lt;='9')){
                poz_rijeci=j;
                while((str[j]&gt;='a' &amp;&amp; str[j]&lt;='z') || (str[j]&gt;='0' &amp;&amp; str[j]&lt;='9')){
                    temp.push_back(str[j]);
                    if(j&gt;str.size()-1) break;
                    j++;                                      
                }
             }
             else{
                 continue;                            
             }
             if(mapa.find(temp)==mapa.end()){
             pair&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; pom;                      //pomocni par koji ubacujem u krajnju mapu koju vracam iz f-je
                tuple&lt;string,int,int&gt; trojka;
                get&lt;0&gt;(trojka)=poglavlje;
                get&lt;1&gt;(trojka)=br_stranice;
                get&lt;2&gt;(trojka)=poz_rijeci;
                pom.first=temp;
                pom.second.insert(trojka);                      //ubacujem informacije o pronadjenoj rijeci u skup koji je drugi element para koji opisuje rijec
                mapa.insert(pom);
             }  
             else{
                 auto it(mapa.find(temp));
                 tuple&lt;string,int,int&gt; trojka;
                 get&lt;0&gt;(trojka)=poglavlje;
                 get&lt;1&gt;(trojka)=br_stranice;
                 get&lt;2&gt;(trojka)=poz_rijeci;
<a name="0"></a><font color="#FF0000"><a href="match754-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

                 it-&gt;second.insert(trojka);
             }
          }
        }
      }
      return mapa;
    }
set&lt;tuple&lt;string,int,int&gt;&gt; PretraziIndeksPojmova(string s, map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; m){
</font>    if(m.find(s)==m.end()) throw logic_error("Unesena rijec nije nadjena!");
    auto it(m.find(s));
<a name="1"></a><font color="#00FF00"><a href="match754-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    return it-&gt;second;
}
    
void IspisiIndeksPojmova(map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; m){
    for(auto it1=m.begin();it1!=m.end();it1++){
</font>        cout&lt;&lt;it1-&gt;first&lt;&lt;": ";
        for(auto it2=it1-&gt;second.begin(); it2!=it1-&gt;second.end(); it2++){
            auto tempit=it1-&gt;second.end();
            tempit--;
            cout&lt;&lt;get&lt;0&gt;(*it2)&lt;&lt;"/"&lt;&lt;get&lt;1&gt;(*it2)&lt;&lt;"/"&lt;&lt;get&lt;2&gt;(*it2);
            if(it2!=tempit){
            cout&lt;&lt;", ";
            }
        }
        cout&lt;&lt;endl;
    }
}

 int main (){
   Knjiga k;
    int i(1);
      for(;;){
         pair&lt;string,vector&lt;string&gt;&gt; par;
         cout&lt;&lt;"Unesite naziv poglavlja: ";
         string s1;
         getline(cin,s1);
         if(s1.size()==1 &amp;&amp; s1[0]=='.') break;
         par.first=s1;
         for(;;){
         cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
         string s2;
         getline(cin,s2);
         if(s2.size()==1 &amp;&amp; s2[0]=='.'){
         i=1;
         break;
         }
         par.second.push_back(s2);
         i++;
         }
         k.insert(par);
    }
    cout&lt;&lt;endl;
    cout&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;endl;
    map&lt;string,set&lt;tuple&lt;string,int,int&gt;&gt;&gt; mapa;
    mapa=KreirajIndeksPojmova(k);
    IspisiIndeksPojmova(mapa);
    for(;;){
        cout&lt;&lt;"Unesite rijec: ";
        string s3;
        getline(cin,s3);
        if(s3.size()==1 &amp;&amp; s3[0]=='.') break;
        set&lt;tuple&lt;string,int,int&gt;&gt; skup;
        PretvoriStringUMalaSlova(s3);
        try{
        skup=PretraziIndeksPojmova(s3,mapa);
        }
        catch(logic_error izuzetak){
            cout&lt;&lt;izuzetak.what();
        }
        for(auto it=skup.begin(); it!=skup.end(); it++){
            cout&lt;&lt;get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;get&lt;2&gt;(*it)&lt;&lt;" ";
        }
        cout&lt;&lt;endl;
    }
   return 0;
} 
</pre>
</body>
</html>
