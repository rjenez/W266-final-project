<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student4770.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student9188.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string,std::vector&lt;std::string&gt;&gt; Knjiga;
<a name="0"></a><font color="#FF0000"><a href="match109-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_87.gif"/></a>

typedef std::map&lt;std::string,std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; IndeksPojmova;
bool DaLiJeSlovo(char k)
{
    if((k &gt;= 'a' &amp;&amp; k &lt;= 'z') || (k &gt;= 'A' &amp;&amp; k &lt;= 'Z') || (k&gt;= '0' &amp;&amp; k&lt;'9')) return true;
    return false;
}
std::string PretvoriUMala(std::string s){
    auto k (s);
    std::transform(k.begin(),k.end(),k.begin(), ::tolower);
    return k;
}
IndeksPojmova KreirajIndeksPojmova(Knjiga parametar){
    IndeksPojmova vrati;
    std::vector&lt;std::string&gt; rijeci;
    int pocetak;
    for(auto it = parametar.begin(); it != parametar.end(); it++) {
        for(int i = 0; i &lt; it-&gt;second.size(); i++) {
            for(int j = 0; j &lt; it-&gt;second.at(i).size(); j++) {
                std::tuple&lt;std::string,int,int&gt; aha;
                std::set&lt;std::tuple&lt;std::string,int,int&gt;&gt; skup;

                pocetak = 0;
                std::string rijec;
                if(DaLiJeSlovo(it-&gt;second.at(i).at(j))) {
                    pocetak = j;
                    while(DaLiJeSlovo(it-&gt;second.at(i).at(j)) &amp;&amp; j&lt;it-&gt;second.at(i).size()-1) {
                        rijec.push_back(it-&gt;second.at(i).at(j));
                        j++;
                    }
                    if(j==it-&gt;second.at(i).size()-1) rijec.push_back(it-&gt;second.at(i).at(j));
                } else {
                    while(!DaLiJeSlovo(it-&gt;second.at(i).at(j)) &amp;&amp; j &lt; it-&gt; second.at(i).size()-1) j++;
                    if (j == it-&gt;second.at(i).size()-1 &amp;&amp; DaLiJeSlovo(it-&gt;second.at(i).at(j))) j++;
                }
                std::get&lt;0&gt;(aha) = it-&gt;first;
                std::get&lt;1&gt;(aha) = i+1;
                std::get&lt;2&gt;(aha) = pocetak;
                auto it1(vrati.find(rijec));
                if(it1 == vrati.end()) {
                    skup.insert(aha);
                    vrati.insert({rijec,skup});
                } else it1-&gt;second.insert(aha);
            }
        }
    }
    return vrati;
}
std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt; PretraziIndeksPojmova(std::string pojam, IndeksPojmova indekspojmova){
    if(!indekspojmova.count(pojam)) throw std::logic_error("Pojam nije nadjen");
    for(auto it = indekspojmova.begin();it != indekspojmova.end();it++){
        if(it-&gt;first == pojam)
            return it-&gt;second;
    }
    return {};
}
void IspisiIndeksPojmova(IndeksPojmova mapa){
    for(auto x : mapa){
        std::cout&lt;&lt;x.first&lt;&lt;": ";
        int brojac(0);
        for(auto y : x.second){
            if(brojac!=x.second.size()-1)
                std::cout&lt;&lt;std::get&lt;0&gt;(y)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(y)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(y)&lt;&lt;", ";
            else std::cout&lt;&lt;std::get&lt;0&gt;(y)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(y)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(y)&lt;&lt;std::endl;
            brojac++;
        }
    }
}
int main ()
{
    Knjiga a;
    int i(1);
    for(;;){
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::string poglavlje;
        std::vector&lt;std::string&gt; stranice;
        std::getline(std::cin,poglavlje);
        if(poglavlje==".") break;
        else
        for(;;){
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i++&lt;&lt;": ";
            std::string stranica;
            std::getline(std::cin,stranica);
            if(stranica!=".") stranice.push_back(PretvoriUMala(stranica));
            else break;
            
        }
        a.insert({poglavlje,stranice});
    }
    auto indekspojmova(KreirajIndeksPojmova(a));
    std::cout&lt;&lt;std::endl&lt;&lt;"Kreirani indeks pojmova:"&lt;&lt;std::endl;
    IspisiIndeksPojmova(indekspojmova);
    for(;;)
    {
        try {
    
            std::cout&lt;&lt;"Unesite rijec: ";
            std::string rijec;
            std::getline(std::cin,rijec);
            if(rijec==".") break;
            auto skup(PretraziIndeksPojmova(rijec,indekspojmova));
            //std::cout&lt;&lt;skup.size()&lt;&lt;std::endl;
            if(skup.size()==0) {
                std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
                continue;
            }
            for(auto it = skup.begin(); it!=skup.end(); it++)
                std::cout&lt;&lt;std::get&lt;0&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(*it)&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(*it)&lt;&lt;" ";
</font><a name="1"></a><font color="#00FF00"><a href="match109-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

            std::cout&lt;&lt;std::endl;
    
        } catch(std::logic_error izuzetak) {
            std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
</font>        }
    }
    
    return 0;
}
</pre>
</body>
</html>
