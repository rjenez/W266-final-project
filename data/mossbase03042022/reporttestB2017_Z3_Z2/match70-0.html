<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5904.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student5904.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match70-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;ctype.h&gt;
std::string PretvoriUMalo(std::string s)
{
    for(int i=0; i&lt;s.length(); i++) {
        s[i]=tolower(s[i]);
    }
    return s;
}
typedef std::tuple&lt;std::string,int,int&gt; Trojka;
typedef std::map&lt;std::string,std::vector&lt;std::string&gt;&gt;Knjiga;

std::map&lt;std::string,std::set&lt;Trojka&gt;&gt; KreirajIndeksPojmova(Knjiga k)
{

    std::map&lt;std::string,std::set&lt;Trojka&gt;&gt; povratna;
    std::string pomocni;
    for(auto it=k.begin(); it!=k.end(); it++) { //prolazim kroz mapu sa iteratorom
        for(int i=0; i!=it-&gt;second.size(); i++) { //obicna for petlja prolazi kroz vektor
            for(int j=0; j&lt;it-&gt;second[i].length(); j++) {//stanica
                it-&gt;second[i]= PretvoriUMalo(it-&gt;second[i]); //prolazim kroz string
                if((it-&gt;second[i][j]&gt;='A' &amp;&amp; it-&gt;second[i][j]&lt;='Z') || (it-&gt;second[i][j]&gt;='a' &amp;&amp; it-&gt;second[i][j]&lt;='z') || (it-&gt;second[i][j]&gt;='0' || it-&gt;second[i][j]&lt;='9')) {
                   int pocetak=j;
                    while(j&lt;it-&gt;second[i].length() &amp;&amp;( (it-&gt;second[i][j]&gt;='A' &amp;&amp; it-&gt;second[i][j]&lt;='Z')|| (it-&gt;second[i][j]&gt;='a' &amp;&amp; it-&gt;second[i][j]&lt;='z') || (it-&gt;second[i][j]&gt;='0' &amp;&amp; it-&gt;second[i][j]&lt;='9'))) {
                        pomocni.push_back(it-&gt;second[i][j]);
                        //i++;
                         j++;
                         
                    }

                    auto pomit= povratna.find(pomocni); //trazim string
                    if(pomit!=povratna.end()) {
                         Trojka skup;
                        skup=(std::make_tuple(it-&gt;first,i+1,pocetak));//u skup ubacujem trojku
                        
                        pomit-&gt;second.insert(skup);
                  
                    } else {
                         std::set&lt;Trojka&gt; skup;
                        skup.insert(std::make_tuple(it-&gt;first,i+1,pocetak));
                        povratna.insert(std::make_pair(pomocni,skup));
                      
                        
                    }
                    pomocni.resize(0);
                }
            }
        }
    }
      auto nekiit=povratna.begin();//mapa
    povratna.erase(nekiit-&gt;first);
    return povratna;
}

std::set&lt;Trojka&gt; PretraziIndeksPojmova(std::string s, std::map&lt;std::string,std::set&lt;Trojka&gt;&gt; indeks_pojmova){
    PretvoriUMalo(s);
    auto it = indeks_pojmova.find(s);
    if(it==indeks_pojmova.end()) throw std::logic_error("Unesena rijec nije nadjena!\n");
    else return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;Trojka&gt;&gt; indeks_pojmova){
    std::cout&lt;&lt;"\nKreirani indeks pojmova:\n";

    for( auto it=indeks_pojmova.begin(); it!=indeks_pojmova.end(); it++){
      std::cout&lt;&lt;it-&gt;first;    
      std::cout&lt;&lt;": ";
       
       auto skupit=it-&gt;second.begin();
        while(skupit!=it-&gt;second.end()){
           if(skupit!= (it-&gt;second).begin()) std::cout&lt;&lt;", ";
            std::cout&lt;&lt;std::get&lt;0&gt;(*skupit)&lt;&lt;"/";
            std::cout&lt;&lt;std::get&lt;1&gt;(*skupit)&lt;&lt;"/";
            std::cout&lt;&lt;std::get&lt;2&gt;(*skupit);
            skupit++;
        }
        
        std::cout &lt;&lt; std::endl;
    }
}
int main ()
{
    std::string tekst,t;
    Knjiga k;
    std::map&lt;std::string,std::set&lt;Trojka&gt;&gt;rezultat;
    std::vector&lt;std::string&gt; v;
    do{
        std::cout&lt;&lt;"Unesite naziv poglavlja: ";
        std::getline(std::cin,tekst);
        if(tekst == ".") break;
        int i=0;
        do{
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i+1&lt;&lt;": ";
            std::getline(std::cin,t);
            v.push_back(t);
            if(t == ".") break;
            i++;
        }while(true);
        k.insert(std::make_pair(tekst,v));
    }while(true);

        rezultat = KreirajIndeksPojmova(k);
        IspisiIndeksPojmova(rezultat);
        std::string s;
   do{
        try{
            std::cout&lt;&lt;"Unesite rijec: ";
       
            std::getline(std::cin, s);
            if(s == "." ) break;
            std::set&lt;Trojka&gt; a=PretraziIndeksPojmova(s,rezultat);
                
                auto its=a.begin();
                while(its!=a.end()){
                    if(its!=a.begin()) std::cout&lt;&lt;" ";
                    std::cout&lt;&lt;std::get&lt;0&gt;(*its)&lt;&lt;"/";
                    std::cout&lt;&lt;std::get&lt;1&gt;(*its)&lt;&lt;"/";
                    std::cout&lt;&lt;std::get&lt;2&gt;(*its);
                    its++;
            }
            std::cout&lt;&lt;std::endl;
        }
        
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what();
        }
   }while(s!="."); 
</font>    
    return 0;
}
</pre>
</body>
</html>
