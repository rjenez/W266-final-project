<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8055.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z2/student8055.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt; 
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;tuple&gt;
#include &lt;vector&gt; 
typedef std::map&lt;std::string, std::vector&lt;std:: string&gt;&gt; Knjiga;
<a name="0"></a><font color="#FF0000"><a href="match154-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_94.gif"/></a>

typedef std::map&lt;std::string, std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;&gt; mapa;
bool domen (int p, std::string s ){
    return (s.at(p)&gt;= 'A' &amp;&amp; s.at(p) &lt;= 'Z' ) || (s.at(p)&gt;='a' &amp;&amp; s.at(p) &lt;='z'); 
}
void pretvoriUmala (std::string &amp;s){
    for (int i=0; i&lt;s.size(); i++){
        if (s.at(i)&gt;= 'A' &amp;&amp; s.at(i) &lt;= 'Z') s.at(i)+='a' - 'A';
    }
}
bool rijec (std::string rijec) {
    for (int i=0; i&lt;rijec.size(); i++){
        if (!domen(i, rijec)) return false;
    }
    return true;
}


void obradiStranicu (int broj, std::string poglavlje, std::string str, mapa &amp;Mapa) {
 
    for (int i=0; i&lt;str.size(); i++){
        for (int j=1; j&lt;=str.size()-i; j++){
            auto pomocna (str.substr (i, j));
            bool pocetak(false), kraj(false); 
            if (i==0 || !domen(i-1, str)) pocetak = true; 
            if (i+j==str.size() || !domen(i+j, str)) kraj = true; 
            if (pocetak &amp;&amp; kraj &amp;&amp; rijec(pomocna)) {
               // if (i==35) std::cout&lt;&lt; "*" &lt;&lt; i; 
            pretvoriUmala (pomocna);
            auto it (Mapa.find(pomocna));
            if (it == Mapa.end()) {
            Mapa[pomocna] = {std::make_tuple(poglavlje, broj, i)};
            }
            else {
            Mapa[pomocna].insert(std::make_tuple(poglavlje, broj, i));
            }
            }
        }
    }
}


mapa KreirajIndeksPojmova (Knjiga k ){
    mapa Mapa; 
    for (auto it = k.begin(); it != k.end(); it++){
        int i(1); 
        for (auto str : it-&gt;second){
            obradiStranicu(i, it-&gt;first,  str, Mapa);
            i++; 
        }
    }
    return Mapa;
    
}

std::set&lt;std::tuple&lt;std::string, int, int&gt;&gt;  PretraziIndeksPojmova (std::string rijec, mapa &amp;m){
    auto it (m.find(rijec) );
    if (it == m.end()) throw std::logic_error ("Pojam nije nadjen");
    return it-&gt;second; 
}

void IspisiIndeksPojmova (const mapa &amp;m) {
    for (auto it= m.begin(); it!= m.end(); it++){
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": "; 
        int i(1);
        for (auto x : it-&gt;second){
            std::cout &lt;&lt; std::get&lt;0&gt;(x) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(x) &lt;&lt;"/" &lt;&lt; std::get&lt;2&gt;(x);  
            if (i!=(it-&gt;second).size()) std::cout&lt;&lt;", ";
           
            i++;
        }
          std::cout&lt;&lt;"\n";
    }
}



int main ()
{
    Knjiga k;
    // k["I"] = {"abc qwe stsda abc abc dhi qwe hrkw dhi"};
    // IspisiIndeksPojmova (KreirajIndeksPojmova(k)); 
    for ( ; ;) {
        std::string poglavlje;
        std::cout&lt;&lt;"Unesite naziv poglavlja: "; 
        std::cin&gt;&gt;poglavlje; 
        if (poglavlje==".") break;
        std::cin.ignore(1000, '\n'); 
        int i(1);
        std::vector&lt;std::string&gt; v; 
        for (; ;) {
            std::cout&lt;&lt;"Unesite sadrzaj stranice "&lt;&lt;i&lt;&lt;": ";
            std::string stranica;
            std::getline (std::cin, stranica);
         //   std::cin.ignore(1000, '\n'); 
            if (stranica==".") break; 
            i++;
            v.push_back(stranica); 
            k [poglavlje] = v; 
        }
    }
    std::cout&lt;&lt;"\nKreirani indeks pojmova:\n";
    auto m (KreirajIndeksPojmova(k));
    IspisiIndeksPojmova (m);
  //  std::cout&lt;&lt;"\n"; 
    for ( ;; ){
        std::string rijec;
        std::cout&lt;&lt;"Unesite rijec: ";
        std::cin&gt;&gt;rijec;
        if (rijec == ".") break;
        std::cin.ignore(1000,'\n');
        try { 
        auto x (PretraziIndeksPojmova (rijec, m));
        for (auto y : x) std::cout &lt;&lt; std::get&lt;0&gt;(y) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(y) &lt;&lt;"/" &lt;&lt; std::get&lt;2&gt;(y)&lt;&lt;" "; 
        std::cout&lt;&lt;"\n";
        }
        catch (...){
            std::cout&lt;&lt;"Unesena rijec nije nadjena!\n"; 
        }
    }  
	return 0;
</font>}
</pre>
</body>
</html>
