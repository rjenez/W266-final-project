<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7392.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7392.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;

struct Korisnik{
    std::string ime, prezime, adresa, telefon;  
};

class Knjiga{
    std::string naslov_knjige;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    Korisnik* zaduzio;
public:
    Knjiga(std::string naslov_knjige, std::string ime_pisca, std::string zanr, int godina_izdavanja):naslov_knjige(naslov_knjige), ime_pisca(ime_pisca), zanr(zanr), godina_izdavanja(godina_izdavanja), zaduzio(nullptr){}
    std::string DajNaslov() const{return naslov_knjige;}
    std::string DajAutora() const{return ime_pisca;}
    std::string DajZanr() const{return zanr;}
    int DajGodinuIzdavanja() const{return godina_izdavanja;}
    Korisnik* DajKodKogaJe(){return zaduzio;}
    bool DaLiJeZaduzena() const{return zaduzio!=nullptr;}
    void ZaduziKnjigu(Korisnik &amp;korisnik){
        zaduzio=&amp;korisnik;
    }
    void RazduziKnjigu(){zaduzio=nullptr;}
};

class Biblioteka{
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
public:
    Biblioteka(){}
    ~Biblioteka(){
        korisnici.clear();
        knjige.clear();
    }
    Biblioteka(const Biblioteka &amp;b){
<a name="1"></a><font color="#00FF00"><a href="match860-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        for(auto &amp;i:b.korisnici){
            korisnici[i.first]=std::make_shared&lt;Korisnik&gt;();
            korisnici[i.first]-&gt;ime=i.second-&gt;ime;
            korisnici[i.first]-&gt;prezime=i.second-&gt;prezime;
            korisnici[i.first]-&gt;adresa=i.second-&gt;adresa;
            korisnici[i.first]-&gt;telefon=i.second-&gt;telefon;
</font>        }
<a name="3"></a><font color="#00FFFF"><a href="match860-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        for(auto &amp;i:b.knjige){
            knjige[i.first]=std::make_shared&lt;Knjiga&gt;(i.second-&gt;DajNaslov(), i.second-&gt;DajAutora(), i.second-&gt;DajZanr(), i.second-&gt;DajGodinuIzdavanja());
        }
    }
    Biblioteka(Biblioteka &amp;b){
</font>        std::swap(korisnici, b.korisnici);
        std::swap(knjige, b.knjige);
    }
    Biblioteka&amp; operator =(const Biblioteka &amp;b){
        Biblioteka temp;
        for(auto &amp;i:b.korisnici){
            temp.korisnici[i.first]=std::make_shared&lt;Korisnik&gt;();
            temp.korisnici[i.first]-&gt;ime=i.second-&gt;ime;
            temp.korisnici[i.first]-&gt;prezime=i.second-&gt;prezime;
            temp.korisnici[i.first]-&gt;adresa=i.second-&gt;adresa;
            temp.korisnici[i.first]-&gt;telefon=i.second-&gt;telefon;
        }
        for(auto &amp;i:b.knjige){
            temp.knjige[i.first]=std::make_shared&lt;Knjiga&gt;(i.second-&gt;DajNaslov(), i.second-&gt;DajAutora(), i.second-&gt;DajZanr(), i.second-&gt;DajGodinuIzdavanja());
        }
        korisnici=temp.korisnici;
        knjige=temp.knjige;
        return *this;
    }
    Biblioteka&amp; operator =(Biblioteka &amp;b){
        std::swap(knjige, b.knjige);
        std::swap(korisnici, b.korisnici);
        return *this;
    }
<a name="0"></a><font color="#FF0000"><a href="match860-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona){
        if(korisnici.find(clanski_broj)!=korisnici.end())throw std::logic_error("Korisnik vec postoji");
        korisnici[clanski_broj]=std::make_shared&lt;Korisnik&gt;();
        korisnici[clanski_broj]-&gt;ime=ime;
        korisnici[clanski_broj]-&gt;prezime=prezime;
        korisnici[clanski_broj]-&gt;adresa=adresa;
        korisnici[clanski_broj]-&gt;telefon=broj_telefona;
</font>    }
<a name="2"></a><font color="#0000FF"><a href="match860-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime, std::string zanr, int godina){
        if(knjige.find(broj_knjige)!=knjige.end())throw std::logic_error("Knjiga vec postoji");
        knjige[broj_knjige]=std::make_shared&lt;Knjiga&gt;(naslov, ime, zanr, godina);
</font>    }
    Korisnik&amp; NadjiKorisnika(int clanski_broj) const{
        if(korisnici.find(clanski_broj)==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
        return *korisnici.at(clanski_broj);
    }
    Knjiga&amp; NadjiKnjigu(int broj_knjige) const{
        if(knjige.find(broj_knjige)==knjige.end())throw std::logic_error("Knjiga nije nadjena");
        return *knjige.at(broj_knjige);
    }
    void IzlistajKorisnike() const{
        for(auto &amp;i:korisnici){
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i.first&lt;&lt;"\n";
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;i.second-&gt;ime&lt;&lt;" "&lt;&lt;i.second-&gt;prezime&lt;&lt;"\n";
            std::cout&lt;&lt;"Adresa: "&lt;&lt;i.second-&gt;adresa&lt;&lt;"\n";
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;i.second-&gt;telefon&lt;&lt;"\n\n";
        }
    }
    void IzlistajKnjige() const{
        for(auto &amp;i:knjige){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;"\n";
            std::cout&lt;&lt;"Naslov: "&lt;&lt;i.second-&gt;DajNaslov()&lt;&lt;"\n";
            std::cout&lt;&lt;"Pisac: "&lt;&lt;i.second-&gt;DajAutora()&lt;&lt;"\n";
            std::cout&lt;&lt;"Zanr: "&lt;&lt;i.second-&gt;DajZanr()&lt;&lt;"\n";
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i.second-&gt;DajGodinuIzdavanja()&lt;&lt;"\n";
<a name="4"></a><font color="#FF00FF"><a href="match860-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            if(i.second-&gt;DaLiJeZaduzena()){
                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;i.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;i.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;"\n";
</font>            }
            std::cout&lt;&lt;"\n";
        }
    }
    void ZaduziKnjigu(int broj_knjige, int clanski_broj){
        if(knjige.find(broj_knjige)==knjige.end())throw std::logic_error("Knjiga nije nadjena");
        if(korisnici.find(clanski_broj)==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
        if(knjige[broj_knjige]-&gt;DaLiJeZaduzena())throw std::logic_error("Knjiga vec zaduzena");
        knjige[broj_knjige]-&gt;ZaduziKnjigu(*korisnici[clanski_broj]);
    }
    void RazduziKnjigu(int broj_knjige){
        if(knjige.find(broj_knjige)==knjige.end())throw std::logic_error("Knjiga nije nadjena");
        if(!knjige[broj_knjige]-&gt;DaLiJeZaduzena())throw std::logic_error("Knjiga nije zaduzena");
        knjige.erase(broj_knjige);
    }
    void PrikaziZaduzenja(int clanski_broj) const{
        if(korisnici.find(clanski_broj)==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
        std::vector&lt;std::pair&lt;int, Knjiga&gt;&gt;v;
        for(auto &amp;i:knjige){
            if(i.second-&gt;DajKodKogaJe()==korisnici.at(clanski_broj).get())v.push_back({i.first,*i.second});
        }
        if(v.size()==0)std::cout&lt;&lt;"Nema zaduzenja tog korisnika!";
        for(auto i:v){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;"\n";
            std::cout&lt;&lt;"Naslov: "&lt;&lt;i.second.DajNaslov()&lt;&lt;"\n";
            std::cout&lt;&lt;"Pisac: "&lt;&lt;i.second.DajAutora()&lt;&lt;"\n";
            std::cout&lt;&lt;"Zanr: "&lt;&lt;i.second.DajZanr()&lt;&lt;"\n";
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i.second.DajGodinuIzdavanja()&lt;&lt;"\n\n";
        }
    }
};

int main ()
{
    Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
    bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    const Biblioteka b=bib8;
    b.NadjiKorisnika(1).ime="5";
    b.IzlistajKorisnike();
	return 0;
}</pre>
</body>
</html>
