<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2667.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4419.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match83-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_73.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

struct Korisnik{
  std::string ime;
  std::string prezime;
  std::string adresa;
  std::string telefon;
  
};

class Knjiga {
   std::string naslov_knjige;
   std::string ime_autora_knjige;
   std::string zanr_knjige;
   int godina_izdavanja_knjige;
   Korisnik *kod_koga_je_zaduzena;
  public:
   Knjiga(std::string n, std::string i, std::string z, int g){
        kod_koga_je_zaduzena = nullptr;
        naslov_knjige = n;
        ime_autora_knjige = i;
        zanr_knjige = z;
        godina_izdavanja_knjige = g;
    }
    std::string DajNaslov(){
        std::string s = naslov_knjige;
        return s;
    }
    std::string DajAutora(){
        std::string s = ime_autora_knjige;
        return s;
    }
    std::string DajZanr(){
        std::string s = zanr_knjige;
        return s;
    }
    int DajGodinuIzdavanja(){
        int godina = godina_izdavanja_knjige;
        return godina;
    }
    Korisnik *DajKodKogaJe(){
        return kod_koga_je_zaduzena;
        
    }
    void RazduziKnjigu(){
        kod_koga_je_zaduzena = nullptr;
    }
    void ZaduziKnjigu(Korisnik &amp;k){
        kod_koga_je_zaduzena= &amp;k;
    }
    bool DaLiJeZaduzena(){
        if(kod_koga_je_zaduzena != nullptr)
        return true;
        return false;
    }
};

class Biblioteka{
   std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; mapa_korisnika;
   std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; mapa_knjiga;
  public:
   Biblioteka(){
       
   }
   
   Biblioteka(const Biblioteka &amp;biblioteka){
       for(auto it = biblioteka.mapa_knjiga.begin(); it != biblioteka.mapa_knjiga.end(); it++){
           std::shared_ptr&lt;Knjiga&gt; nova = std::make_shared&lt;Knjiga&gt;(Knjiga((it-&gt;second)-&gt;DajNaslov(), (it-&gt;second)-&gt;DajAutora() , (it-&gt;second)-&gt;DajZanr(), (it-&gt;second)-&gt;DajGodinuIzdavanja()));
            
           if((it-&gt;second)-&gt;DaLiJeZaduzena() == true){
               nova-&gt;ZaduziKnjigu(*(it-&gt;second)-&gt;DajKodKogaJe());
           }
           mapa_knjiga.insert(std::make_pair(it-&gt;first, nova));
           nova = nullptr;
           
       }
       
       for(auto it = biblioteka.mapa_korisnika.begin(); it != biblioteka.mapa_korisnika.end(); it++){
           std::shared_ptr&lt;Korisnik&gt; novi = std::make_shared&lt;Korisnik&gt;();
           novi-&gt;ime = (it-&gt;second)-&gt;ime;
           novi-&gt;prezime = (it-&gt;second)-&gt;prezime;
           novi-&gt;adresa = (it-&gt;second)-&gt;adresa;
           novi-&gt;telefon = (it-&gt;second)-&gt;telefon;
           mapa_korisnika.insert(std::make_pair(it-&gt;first, novi));
           novi = nullptr;
       }
       
   }
   
   ~Biblioteka(){
       for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++){
          
           it-&gt;second = nullptr;
       }
       
       for(auto it = mapa_korisnika.begin(); it != mapa_korisnika.end(); it++){
           //delete it-&gt;second;
           it-&gt;second = nullptr;
       }
       
       mapa_knjiga.erase(mapa_knjiga.begin(), mapa_knjiga.end());
       mapa_korisnika.erase(mapa_korisnika.begin(), mapa_korisnika.end());
       
   }
   
   Biblioteka &amp;operator =(const Biblioteka &amp;biblioteka){
       if(this == &amp;biblioteka)
       return *this;
       
       for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++){
           //delete it-&gt;second;
           it-&gt;second = nullptr;
       }
       
       for(auto it = mapa_korisnika.begin(); it != mapa_korisnika.end(); it++){
           //delete it-&gt;second;
           it-&gt;second = nullptr;
       }
       
       mapa_knjiga.erase(mapa_knjiga.begin(), mapa_knjiga.end());
       mapa_korisnika.erase(mapa_korisnika.begin(), mapa_korisnika.end());
    
    for(auto it = biblioteka.mapa_knjiga.begin(); it != biblioteka.mapa_knjiga.end(); it++){
           std::shared_ptr&lt;Knjiga&gt; nova = std::make_shared&lt;Knjiga&gt;(Knjiga((it-&gt;second)-&gt;DajNaslov(), (it-&gt;second)-&gt;DajAutora() , (it-&gt;second)-&gt;DajZanr(), (it-&gt;second)-&gt;DajGodinuIzdavanja()));
            
           if((it-&gt;second)-&gt;DaLiJeZaduzena() == true){
               nova-&gt;ZaduziKnjigu(*(it-&gt;second)-&gt;DajKodKogaJe());
           }
           mapa_knjiga.insert(std::make_pair(it-&gt;first, nova));
           nova = nullptr;
           
       }
       
       for(auto it = biblioteka.mapa_korisnika.begin(); it != biblioteka.mapa_korisnika.end(); it++){
           std::shared_ptr&lt;Korisnik&gt; novi = std::make_shared&lt;Korisnik&gt;();
           novi-&gt;ime = (it-&gt;second)-&gt;ime;
           novi-&gt;prezime = (it-&gt;second)-&gt;prezime;
           novi-&gt;adresa = (it-&gt;second)-&gt;adresa;
           novi-&gt;telefon = (it-&gt;second)-&gt;telefon;
           mapa_korisnika.insert(std::make_pair(it-&gt;first, novi));
           novi = nullptr;
       }
       
       return *this;
   }
   
   void RegistrirajNovogKorisnika(int b, std::string i, std::string p, std::string a, std::string t){
       if(ImaLiKorisnika(b) == true) throw std::logic_error("Korisnik vec postoji");
       
       std::shared_ptr&lt;Korisnik&gt; novi = std::make_shared&lt;Korisnik&gt;();
       novi-&gt;ime = i; novi-&gt;prezime = p; novi-&gt;adresa = a; novi-&gt;telefon = t;
       mapa_korisnika.insert(std::make_pair(b,novi));
        novi = nullptr;
   }
   
   void RegistrirajNovuKnjigu(int b, std::string n, std::string a, std::string z, int g){
       if(ImaLiKnjige(b) == true) throw std::logic_error("Knjiga vec postoji");
       
       std::shared_ptr&lt;Knjiga&gt; nova = std::make_shared&lt;Knjiga&gt;(n,a,z,g);
       mapa_knjiga.insert(std::make_pair(b,nova));
       nova = nullptr;
   }
   
   void ZaduziKnjigu(int br_knj, int br_kor){
       if(ImaLiKnjige(br_knj) == false) throw std::logic_error("Knjiga nije nadjena");
       if(ImaLiKorisnika(br_kor) == false) throw std::logic_error("Korisnik nije nadjen");
       if(mapa_knjiga[br_knj]-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
       mapa_knjiga[br_knj]-&gt;ZaduziKnjigu(*mapa_korisnika[br_kor]);
   }
   
   Korisnik &amp;NadjiKorisnika(int b){
       if(ImaLiKorisnika(b) == false) throw std::logic_error("Korisnik nije nadjen");
       return *mapa_korisnika[b];
   }
   
   
   Knjiga &amp;NadjiKnjigu(int b){
       if(ImaLiKnjige(b) == false) throw std::logic_error("Knjiga nije nadjena");
       return *mapa_knjiga[b];
   }
   
   void IzlistajKorisnike(){
       auto it = mapa_korisnika.begin();
       while(it != mapa_korisnika.end()){
           IspisiZaKorisnika(*it);
           std::cout &lt;&lt; std::endl;
           it++;
       }
       
   }
   
   void IzlistajKnjige(){
       auto it = mapa_knjiga.begin();
       while(it != mapa_knjiga.end()){
           IspisiZaKnjigu(*it);
           std::cout &lt;&lt; std::endl;
           it++;
       }
   }
   
   void PrikaziZaduzenja(int b){
       if(ImaLiKorisnika(b) == false) throw std::logic_error("Korisnik nije nadjen");
       
       bool postoji = false;
       
       for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++){
           if(it-&gt;second-&gt;DaLiJeZaduzena()){
               
               if(it-&gt;second-&gt;DajKodKogaJe() == mapa_korisnika[b]){
                   postoji = true;
                   std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
       std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>       std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
       std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match83-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

       std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                   std::cout &lt;&lt; std::endl;
               }
           }
       }
   }
  private:
   void IspisiZaKnjigu(std::pair&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; par){
       std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; par.first &lt;&lt; std::endl;
       std::cout &lt;&lt; "Naslov: " &lt;&lt; par.second-&gt;DajNaslov() &lt;&lt; std::endl;
       std::cout &lt;&lt; "Pisac: " &lt;&lt; par.second-&gt;DajAutora() &lt;&lt; std::endl;
</font><a name="1"></a><font color="#00FF00"><a href="match83-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

       std::cout &lt;&lt; "Zanr: " &lt;&lt; par.second-&gt;DajZanr() &lt;&lt; std::endl;
       std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; par.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if(par.second-&gt;DaLiJeZaduzena()) std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; (par.second-&gt;DajKodKogaJe())-&gt;ime &lt;&lt; " " &lt;&lt; (par.second-&gt;DajKodKogaJe())-&gt;prezime &lt;&lt;std::endl;
       
   }
   
   void IspisiZaKorisnika(std::pair&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; par){
       std::cout &lt;&lt; "Clanski broj: "&lt;&lt;par.first &lt;&lt; std::endl;
       std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; par.second-&gt;ime &lt;&lt; " " &lt;&lt;par.second-&gt;prezime &lt;&lt; std::endl;
       std::cout &lt;&lt; "Adresa: " &lt;&lt; par.second-&gt;adresa &lt;&lt; std::endl;
       std::cout &lt;&lt; "Broj telefona: " &lt;&lt; par.second-&gt;telefon &lt;&lt; std::endl;
   }
   bool ImaLiKnjige(int b){
       auto it = mapa_knjiga.begin();
       while(it!= mapa_knjiga.end()){
           if(it-&gt;first == b) return true;
           it++;
       }
       return false;
   }
   bool ImaLiKorisnika(int b){
       auto it = mapa_korisnika.begin();
       while(it != mapa_korisnika.end()){
           if(it-&gt;first == b) return true;
           it++;
       }
       return false;
   }
};
int main ()
{
    
    Biblioteka bib5;
//bib5.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
//bib5.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
//auto a = bib5.NadjiKnjigu(2).DajNaslov();
//std::cout &lt;&lt; a;
    
	return 0;
</font>}</pre>
</body>
</html>
