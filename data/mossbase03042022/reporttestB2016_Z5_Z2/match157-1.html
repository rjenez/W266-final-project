<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5122.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3071.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;utility&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
struct Korisnik{
    std::string ime, prezime, adresa, telefon;    
};

class Knjiga{
    std::string naslov, ime_pisca, zanr;
    int godina;
    Korisnik* kod_koga_je;
    public:
<a name="0"></a><font color="#FF0000"><a href="match157-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_56.gif"/></a>

    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int godina):
    naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), godina(godina)
    {
        kod_koga_je=nullptr;
    }
    std::string DajNaslov() const{return naslov;}
    std::string DajAutora() const{return ime_pisca;}
    std::string DajZanr() const{return zanr;}
    int DajGodinuIzdavanja() const{return godina;}
    Korisnik* DajKodKogaJe() const{return kod_koga_je;}
    void ZaduziKnjigu(Korisnik &amp;zaduzena){
        kod_koga_je=&amp;zaduzena;
    }
    void RazduziKnjigu(){
        kod_koga_je=nullptr;
    }
    bool DaLiJeZaduzena(){
        if(kod_koga_je!=nullptr) return true;
        else return false;
    }
};

class Biblioteka{
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; m1;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; m2;
    public:
    Biblioteka(){}
    ~Biblioteka(){
        m1.clear(); m2.clear();
    }
    Biblioteka(const Biblioteka &amp;b){
        auto it1=b.m1.begin();
        std::shared_ptr&lt;Korisnik&gt; pointer;
        try{
        for(auto it=b.m1.begin(); it!=b.m1.end(); it++){
            pointer=std::shared_ptr&lt;Korisnik&gt;(new Korisnik{it1-&gt;second-&gt;ime,it1-&gt;second-&gt;prezime,it1-&gt;second-&gt;adresa,it1-&gt;second-&gt;telefon});
            m1.insert(std::make_pair(it1-&gt;first,pointer));
        }
        }catch(std::bad_alloc){
            std::cout&lt;&lt;std::endl;
        }
        auto it2=b.m2.begin();
        std::shared_ptr&lt;Knjiga&gt; point;
        try{
        for(auto it=b.m2.begin(); it!=b.m2.end(); it++){
            point=std::make_shared&lt;Knjiga&gt;((*it2).second-&gt;DajNaslov(),(*it2).second-&gt;DajAutora(),(*it2).second-&gt;DajZanr(),(*it2).second-&gt;DajGodinuIzdavanja());
            m2.insert(std::make_pair((*it2).first,point));
        }
        }catch(std::bad_alloc){
            std::cout&lt;&lt;std::endl;
        }
    }
    Biblioteka(Biblioteka &amp;&amp;b){
        m1=b.m1;
        m2=b.m2;
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;b){
        (*this).~Biblioteka();
        m1=b.m1;
        m2=b.m2;
        return *this;
        
    }  
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b){
        (*this).~Biblioteka();
        m1=b.m1;
        m2=b.m2;
        return *this;
    }
    void RegistrirajNovogKorisnika(int broj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
        try{
        if(m1.find(broj)!=m1.end()) throw std::logic_error("Korisnik vec postoji");
            std::shared_ptr&lt;Korisnik&gt; p(nullptr);
            p=std::shared_ptr&lt;Korisnik&gt; (new Korisnik{ime, prezime, adresa, telefon});
            m1.insert(std::make_pair(broj,p));
        }catch(std::bad_alloc){
            std::cout&lt;&lt;std::endl;
        }catch(std::logic_error l){
            std::cout&lt;&lt;l.what()&lt;&lt;std::endl;
        }
    }
    void RegistrirajNovuKnjigu(int broj, std::string naslov, std::string ime_pisca,  std::string zanr, int godina){
        try{
        if(m2.find(broj)!=m2.end()) throw std::logic_error("Knjiga vec postoji");
            std::shared_ptr&lt;Knjiga&gt;k(nullptr);
            k=std::make_shared&lt;Knjiga&gt;(naslov,ime_pisca,zanr, godina);
            m2.insert(std::make_pair(broj,k));
        }catch(std::bad_alloc){
            std::cout&lt;&lt;std::endl;
        }catch(std::logic_error l){
            std::cout&lt;&lt;l.what()&lt;&lt;std::endl;
        }
    } 
    Korisnik&amp; NadjiKorisnika(int n){
        try{
            auto it(m1.find(n));
          if(it==m1.end()) throw std::logic_error("Korisnik nije nadjen");
        }catch(std::logic_error l){
            std::cout&lt;&lt;l.what()&lt;&lt;std::endl;
        } return (*(m1.find(n))-&gt;second);
    }
    Knjiga&amp; NadjiKnjigu(int e){
       try{
           auto it(m2.find(e));
          if(it==m2.end()) throw std::logic_error("Knjiga nije nadjena");
        }catch(std::logic_error l){
            std::cout&lt;&lt;l.what()&lt;&lt;std::endl;
        } return (*(m2.find(e))-&gt;second);
    }
    void IzlistajKorisnike(){
        for(auto it=m1.begin(); it!=m1.end(); it++){
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match157-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    void IzlistajKnjige(){
        for(auto it=m2.begin(); it!=m2.end(); it++){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            if(it-&gt;second-&gt;DaLiJeZaduzena()){
<a name="1"></a><font color="#00FF00"><a href="match157-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
            }
    }
    }
    void ZaduziKnjigu(int e, int n){
        try{
        auto it(m1.find(n));
        if(m2.find(e)==m2.end()) throw std::logic_error("Knjiga nije nadjena");
        if(it==m1.end()) throw std::logic_error("Korisnik nije nadjen");
        if(m2.find(e)-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        NadjiKnjigu(e).Knjiga::ZaduziKnjigu(*(m1.find(n)-&gt;second));
    }catch(std::logic_error l){
        std::cout&lt;&lt;l.what();
    }
    }
    void RazduziKnjigu(int e){
        if(e&lt;0 || m2.find(e)-&gt;second-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
        NadjiKnjigu(e).RazduziKnjigu();
    }
    void PrikaziZaduzenja(int n){
        try{
        if(n&lt;1) throw std::domain_error("Korisnik nije nadjen");
        for(auto it=m2.begin(); it!=m2.end(); it++){
            if(it-&gt;second-&gt;DajKodKogaJe()==&amp;NadjiKorisnika(n)){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match157-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }else{
            std::cout&lt;&lt;"Nema zaduzenja za tog korisnika"&lt;&lt;std::endl;
        }
    }}catch(std::domain_error e){
        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
    }
    }
};
int main ()
</font>{   
    
	return 0;
}</pre>
</body>
</html>
