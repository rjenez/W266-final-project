<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7589.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7589.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik {
  std::string ime, prezime, adresa, telefon;  
};

class Knjiga {
    std::string naslov;
    std::string pisac;
    std::string zanr;
    int godina;
    std::shared_ptr&lt;Korisnik&gt; korisnik{};
public:
    Knjiga(std::string n, std::string p, std::string z, int g) : korisnik(nullptr) {
        naslov = n;
        pisac = p;
        zanr = z;
        godina = g;
    }
    
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return pisac; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina; }
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const { return korisnik; } 
    void ZaduziKnjigu(Korisnik &amp;k) { korisnik = std::make_shared&lt;Korisnik&gt;(k); }
    void RazduziKnjigu() { korisnik = nullptr; }
    bool DaLiJeZaduzena() const { if(korisnik == nullptr) return false; return true; }
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
public:
    Biblioteka() { }
<a name="4"></a><font color="#FF00FF"><a href="match817-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Biblioteka(const Biblioteka &amp;b) {
        for(auto i = (b.korisnici).begin(); i != (b.korisnici).end(); i++) {
            korisnici.insert(std::make_pair(i-&gt;first, std::make_shared&lt;Korisnik&gt; (*(i-&gt;second))));
</font><a name="7"></a><font color="#0000FF"><a href="match817-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        }
        
        for(auto i = (b.knjige).begin(); i != (b.knjige).end(); i++) {
            knjige.insert(std::make_pair(i-&gt;first, std::make_shared&lt;Knjiga&gt; (*(i-&gt;second))));
</font>        }
    }
    
<a name="6"></a><font color="#00FF00"><a href="match817-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int cl, std::string ime, std::string prezime, std::string adresa, std::string telefon);
</font>    void RegistrirajNovuKnjigu(int cl, std::string naslov, std::string pisac, std::string zanr, int godina);
    Korisnik &amp;NadjiKorisnika(int clanski);
    Knjiga &amp;NadjiKnjigu(int clanski);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int br_knjige, int br_korisnika);
    void RazduziKnjigu(int clanski);
    void PrikaziZaduzenja(int clanski) const;
};

Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b) {
    if(&amp;b != this) {
        korisnici = b.korisnici;
        knjige = b.knjige;
    }
    return *this;
}
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b) {
    std::swap(korisnici, b.korisnici);
    std::swap(knjige, b.knjige);
    return *this;
}
<a name="0"></a><font color="#FF0000"><a href="match817-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int cl, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
    auto it = korisnici.find(cl);
    if(it != korisnici.end()) throw std::logic_error("Korisnik vec postoji");
    Korisnik novi{ime, prezime, adresa, telefon};
</font><a name="1"></a><font color="#00FF00"><a href="match817-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    korisnici[cl] = std::make_shared&lt;Korisnik&gt;(novi);
}
void Biblioteka::RegistrirajNovuKnjigu(int cl, std::string naslov, std::string pisac, std::string zanr, int godina) {
    auto it = knjige.find(cl);
    if(it != knjige.end()) throw std::logic_error("Knjiga vec postoji");
</font>    Knjiga nova(naslov, pisac, zanr, godina);
    knjige[cl] = std::make_shared&lt;Knjiga&gt;(nova);
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski) {
    auto it = korisnici.find(clanski);
    if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    return *korisnici[clanski];
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int clanski) {
    auto it = knjige.find(clanski);
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    return *knjige[clanski];
}
void Biblioteka::IzlistajKorisnike() const {
    for(auto i = korisnici.begin(); i != korisnici.end(); i++) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; i -&gt; first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (i -&gt; second) -&gt; ime &lt;&lt; " " &lt;&lt; (i -&gt; second) -&gt; prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; (i -&gt; second) -&gt; adresa &lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match817-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (i -&gt; second ) -&gt; telefon &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const {
    for(auto i = knjige.begin(); i != knjige.end(); i++) {
</font>        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; (*(i -&gt; second)).DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; (*(i -&gt; second)).DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; (*(i -&gt; second)).DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (*(i -&gt; second)).DajGodinuIzdavanja() &lt;&lt; std::endl;
        if((*(i -&gt; second)).DaLiJeZaduzena()) {
            std::shared_ptr&lt;Korisnik&gt; trenutni = (*(i-&gt;second)).DajKodKogaJe();
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; trenutni -&gt; ime &lt;&lt; " " &lt;&lt; trenutni -&gt; prezime &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int br_knjige, int br_korisnika) {
    auto it1 = knjige.find(br_knjige);
    if(it1 == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    auto it2 = korisnici.find(br_korisnika);
    if(it2 == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    if((it1-&gt;second) -&gt; DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    (it1-&gt;second) -&gt; ZaduziKnjigu(*korisnici[br_korisnika]);
}
void Biblioteka::RazduziKnjigu(int clanski) {
    auto it = knjige.find(clanski);
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    if(!(*(it-&gt;second)).DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
<a name="2"></a><font color="#0000FF"><a href="match817-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    (*(it -&gt; second)).RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski) const {
    auto it = korisnici.find(clanski);
    if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    bool zaduzio = false;
    for(auto i = knjige.begin(); i != knjige.end(); i++) {
</font><a name="5"></a><font color="#FF0000"><a href="match817-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        if((*(i -&gt; second)).DajKodKogaJe() == (it -&gt; second)) {
            zaduzio = true;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; i -&gt; first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; (*(i -&gt; second)).DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; (*(i -&gt; second)).DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; (*(i -&gt; second)).DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (*(i -&gt; second)).DajGodinuIzdavanja() &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
        }
    }
    if(!zaduzio) std::cout &lt;&lt; "Nema zaduzenja kod tog korisnika!";
}


int main ()
{
    int broj;
    //1 - registriraj novog korisnika
    //2 - registriraj novu knjigu
    //3 - nadji korisnika
    //4 - nadji knjigu
    //5 - izlistaj korisnike
    //6 - izlistaj knjige
    //7 - zaduzi knjigu
    //8 - razduzi knjigu
    //9 - prikazi zaduzenja
    Biblioteka b1;
    for(;;) {
        std::cout &lt;&lt; "Unesite opciju: ";
        std::cin &gt;&gt; broj;
        switch(broj) {
            case 0: {
                std::cout &lt;&lt; "Cao";
                return 0;
            }
            case 1: {
                int clanski;
                std::string ime, prezime, adresa, telefon;
                std::cout &lt;&lt; "Unesi clanski broj, ime, prezime, adresu i telefon: ";
                std::cin &gt;&gt; clanski; std::cin &gt;&gt; std::ws;
                std::getline(std::cin, ime); std::cin &gt;&gt; std::ws;
                std::getline(std::cin, prezime); std::cin &gt;&gt; std::ws;
                std::getline(std::cin, adresa); std::cin &gt;&gt; std::ws;
                std::getline(std::cin, telefon); 
                b1.RegistrirajNovogKorisnika(clanski, ime, prezime, adresa, telefon);
                break;
            }
            case 2: {
                int clanski, godina;
                std::string naslov, pisac, zanr;
                std::cout &lt;&lt; "Unesi evidencijski broj, naslov, pisca i godinu izdavanja knjige: ";
                std::cin &gt;&gt; clanski; std::cin &gt;&gt; std::ws;
                std::getline(std::cin, naslov); std::cin &gt;&gt; std::ws;
                std::getline(std::cin, pisac); std::cin &gt;&gt; std::ws;
                std::getline(std::cin, zanr); std::cin &gt;&gt; std::ws;
                std::cin &gt;&gt; godina; 
                b1.RegistrirajNovuKnjigu(clanski, naslov, pisac, zanr, godina);
                break;
            }
            case 3: {
                std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
                int clanski;
                std::cin &gt;&gt; clanski;
                Korisnik neki = b1.NadjiKorisnika(clanski);
                std::cout &lt;&lt; "Podaci o korisniku: " &lt;&lt; std::endl;
                std::cout &lt;&lt; neki.ime &lt;&lt; " " &lt;&lt; neki.prezime &lt;&lt; " " &lt;&lt; neki.adresa &lt;&lt; " " &lt;&lt; neki.telefon;
                break;
            }
            case 4: {
                std::cout &lt;&lt; "Unesi evidencijski broj knjige: ";
                int ev;
                std::cin &gt;&gt; ev;
                Knjiga neka = b1.NadjiKnjigu(ev);
                std::cout &lt;&lt; "Podaci o knjizi: " &lt;&lt; std::endl;
                std::cout &lt;&lt; neka.DajNaslov() &lt;&lt; " " &lt;&lt; neka.DajAutora() &lt;&lt; " " &lt;&lt; neka.DajZanr() &lt;&lt; " " &lt;&lt; neka.DajGodinuIzdavanja();
                break;
            }
            case 5: {
                std::cout &lt;&lt; "Korisnici: " &lt;&lt; std::endl;
                b1.IzlistajKorisnike();
                break;
            }
            case 6: {
                std::cout &lt;&lt; "Biblioteka: " &lt;&lt; std::endl;
                b1.IzlistajKnjige();
                break;
            }
            case 7: {
                std::cout &lt;&lt; "Unesi evidencijski broj knjige i clanski broj korisnika: ";
                int ev, br;
                std::cin &gt;&gt; ev &gt;&gt; br;
                b1.ZaduziKnjigu(ev,br);
                break;
            }
            case 8: {
                std::cout &lt;&lt; "Unesi evidencijski broj knjige: ";
                int ev;
                std::cin &gt;&gt; ev;
                b1.RazduziKnjigu(ev);
                break;
            }
            case 9: {
                std::cout &lt;&lt; "Unesi clanski broj korisnika: ";
                int clanski;
                std::cin &gt;&gt; clanski;
                b1.PrikaziZaduzenja(clanski);
                break;
            }
        }
    }
	return 0;
}</pre>
</body>
</html>
