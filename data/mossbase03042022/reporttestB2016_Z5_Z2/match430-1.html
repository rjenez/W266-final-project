<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8886.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student1317.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match430-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;iterator&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

using namespace std;

struct Korisnik
{
    string ime, prezime, adresa, telefon;
};

class Knjiga
{
    string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik* zaduzena;
</font>    
    public:
        Knjiga(string naslov, string ime, string zanr, int godina) : naslov(naslov), ime_pisca(ime), zanr(zanr), godina_izdavanja(godina), zaduzena(nullptr) {}
        string DajNaslov() const { return naslov; }
<a name="5"></a><font color="#FF0000"><a href="match430-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        string DajAutora() const { return ime_pisca; }
        string DajZanr() const { return zanr; }
        int DajGodinuIzdavanja() const { return godina_izdavanja; }
        Korisnik* DajKodKogaJe() const { return zaduzena; }
        void ZaduziKnjigu(Korisnik &amp;k) { zaduzena=&amp;k; }
</font>        void RazduziKnjigu() { zaduzena=nullptr; }
<a name="4"></a><font color="#FF00FF"><a href="match430-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        bool DaLiJeZaduzena() const { if(zaduzena!=nullptr) return true; return false; }
};

class Biblioteka
{
    map &lt;int, shared_ptr&lt;Korisnik&gt;&gt; mapa_korisnika;
    map &lt;int, shared_ptr&lt;Knjiga&gt;&gt; mapa_knjiga;
    
    public:
</font>        Biblioteka() {}
        ~Biblioteka(){}
<a name="1"></a><font color="#00FF00"><a href="match430-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        Biblioteka(const Biblioteka &amp;biblioteka);
        Biblioteka(Biblioteka &amp;&amp;biblioteka);
        Biblioteka &amp;operator =(const Biblioteka &amp;biblioteka);
        Biblioteka &amp;operator =(Biblioteka &amp;&amp;biblioteka);
        void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon);
        void RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime, string zanr, int godina);
        Korisnik &amp;NadjiKorisnika(int clanski_broj) const;
</font>        Knjiga &amp;NadjiKnjigu(int ev_broj) const;
        void IzlistajKorisnike() const;
        void IzlistajKnjige() const;
        void ZaduziKnjigu(int ev_broj, int clanski_broj);
        void RazduziKnjigu(int ev_broj);
        void PrikaziZaduzenja(int clanski_broj) const;
};

Biblioteka::Biblioteka(const Biblioteka &amp;biblioteka)
{
    try 
	{
		for(auto it=biblioteka.mapa_knjiga.begin(); it!=biblioteka.mapa_knjiga.end(); it++)
        	mapa_knjiga[it-&gt;first]=make_shared&lt;Knjiga&gt;(*it-&gt;second);
        
		for(auto it=biblioteka.mapa_korisnika.begin(); it!=biblioteka.mapa_korisnika.end(); it++)
        	mapa_korisnika[it-&gt;first]=make_shared&lt;Korisnik&gt;(*it-&gt;second);
	}
	catch(...) 
	{
		throw;
	}
}

Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;biblioteka)
{
	for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++)
    {
    	it-&gt;second=nullptr;
	}
    
	for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++)
	{
    	it-&gt;second=nullptr;
	}
	
	for(auto it=biblioteka.mapa_knjiga.begin(); it!=biblioteka.mapa_knjiga.end(); it++)
    	mapa_knjiga[it-&gt;first]=make_shared&lt;Knjiga&gt;(*it-&gt;second);
    
	for(auto it=biblioteka.mapa_korisnika.begin(); it!=biblioteka.mapa_korisnika.end(); it++)
		mapa_korisnika[it-&gt;first]=make_shared&lt;Korisnik&gt;(*it-&gt;second);
		
<a name="6"></a><font color="#00FF00"><a href="match430-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

	return *this;
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;biblioteka) 
{
    swap(mapa_knjiga, biblioteka.mapa_knjiga);
    swap(mapa_korisnika, biblioteka.mapa_korisnika);
    return *this;
</font>}

Biblioteka::Biblioteka(Biblioteka &amp;&amp;biblioteka)
{   
	for(auto it=biblioteka.mapa_knjiga.begin(); it!=biblioteka.mapa_knjiga.end(); it++)
    {
    	mapa_knjiga[it-&gt;first]=it-&gt;second;
    	it-&gt;second=nullptr;
    }
        
	for(auto it=biblioteka.mapa_korisnika.begin(); it!=biblioteka.mapa_korisnika.end(); it++)
    {
    	mapa_korisnika[it-&gt;first]=it-&gt;second;
    	it-&gt;second=nullptr;
    }
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon)
{
	auto it(mapa_korisnika.find(clanski_broj));
    if(it!=mapa_korisnika.end()) throw logic_error("Korisnik vec postoji");
	
	Korisnik k;
	k.ime=ime; k.prezime=prezime; k.adresa=adresa; k.telefon=telefon;
	mapa_korisnika[clanski_broj]=make_shared&lt;Korisnik&gt;(k);
}

void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime, string zanr, int godina)
{
	auto it(mapa_knjiga.find(ev_broj));
    if(it!=mapa_knjiga.end()) throw logic_error("Knjiga vec postoji");
	
	Knjiga k(naslov, ime, zanr, godina);
	mapa_knjiga[ev_broj]=make_shared&lt;Knjiga&gt;(k);
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) const
{
    auto it(mapa_korisnika.find(clanski_broj));
	if(it==mapa_korisnika.end()) throw logic_error("Korisnik nije nadjen");
	
	return *it-&gt;second;
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj) const
{
	auto it(mapa_knjiga.find(ev_broj));
	if(it==mapa_knjiga.end()) throw logic_error("Knjiga nije nadjena");
	
	return *it-&gt;second;
}

void Biblioteka::IzlistajKorisnike() const
{
	for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++)
    {
<a name="2"></a><font color="#0000FF"><a href="match430-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    	cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; endl;
    	cout &lt;&lt; "Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;ime &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt; endl;
    	cout &lt;&lt; "Adresa: " &lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt; endl;
</font>    	cout &lt;&lt; "Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt; endl &lt;&lt; endl;
    }
    return;
}

void Biblioteka::IzlistajKnjige() const
{
	for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++)
    {
    	cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; endl;
    	cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; endl;
    	cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; endl;
<a name="0"></a><font color="#FF0000"><a href="match430-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    	cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; endl;
    	cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
    	if((it-&gt;second)-&gt;DaLiJeZaduzena()) cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; ((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime  &lt;&lt; " " &lt;&lt; ((it-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime &lt;&lt; endl;
    	cout &lt;&lt; endl;
</font>    }
    return;
}

void Biblioteka::ZaduziKnjigu(int ev_broj, int clanski_broj)
{
	auto it1(mapa_knjiga.find(ev_broj));
	auto it2(mapa_korisnika.find(clanski_broj));
	if(it1==mapa_knjiga.end()) throw logic_error("Knjiga nije nadjena");
	if(it2==mapa_korisnika.end()) throw logic_error("Korisnik nije nadjen");
	if((it1-&gt;second)-&gt;DaLiJeZaduzena()) throw logic_error("Knjiga vec zaduzena");
	
	(it1-&gt;second)-&gt;Knjiga::ZaduziKnjigu(*(it2-&gt;second));
}

void Biblioteka::RazduziKnjigu(int ev_broj)
{
	auto it1(mapa_knjiga.find(ev_broj));
	if(it1==mapa_knjiga.end()) throw logic_error("Knjiga nije nadjena");
	if(!((it1-&gt;second)-&gt;DaLiJeZaduzena())) throw logic_error("Knjiga nije bila zaduzena");
	
	(it1-&gt;second)-&gt;Knjiga::RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) const
{
	auto it1(mapa_korisnika.find(clanski_broj));
<a name="7"></a><font color="#0000FF"><a href="match430-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

	if(it1==mapa_korisnika.end()) throw logic_error("Korisnik nije nadjen");
	
	bool zaduzen(false);
	for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++)
	{
		if((it-&gt;second)-&gt;DaLiJeZaduzena() &amp;&amp; (((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime==(it1-&gt;second)-&gt;ime) &amp;&amp; (((it-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime==(it1-&gt;second)-&gt;prezime) &amp;&amp; (((it-&gt;second)-&gt;DajKodKogaJe())-&gt;adresa==(it1-&gt;second)-&gt;adresa) &amp;&amp; (((it-&gt;second)-&gt;DajKodKogaJe())-&gt;telefon==(it1-&gt;second)-&gt;telefon))
</font>		{
<a name="8"></a><font color="#00FFFF"><a href="match430-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

			zaduzen=true;
			cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; endl;
			cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; endl;
</font>			cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; endl;
			cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; endl;
			cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
			cout &lt;&lt; endl;
		}
	}
	if(!zaduzen) cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; endl;
	return;
}

int main ()
{
	Biblioteka bib;
	
	while(1)
	{
		int opcija;
		cout &lt;&lt; "Izaberite ociju:" &lt;&lt; endl &lt;&lt; "0 - kraj" &lt;&lt; endl &lt;&lt; "1 - registriraj novog korisnika" &lt;&lt; endl &lt;&lt; "2 - registriraj novu knjigu" &lt;&lt; endl &lt;&lt; "3 - zaduzi knjigu" &lt;&lt; endl &lt;&lt; "4 - razduzi knjigu" &lt;&lt; endl &lt;&lt; "5 - izlistaj podatke" &lt;&lt; endl;
		cin &gt;&gt; opcija;
		if(!cin) cin.clear();
		cin.ignore(10000, '\n');
		if(opcija&lt;0 || opcija&gt;5) cout &lt;&lt; "Neispravna opcija. Molimo unesite ponovo." &lt;&lt; endl;
		else if(opcija==0) break;
		else if(opcija==1)
		{
			ponovo1:
			try
			{
				int broj;
				string ime, prezime, adresa, br_telefona;
				cout &lt;&lt; "Unesite clanski broj: ";
				cin &gt;&gt; broj;
				if(!cin) cin.clear();
				cin.ignore(10000, '\n');
				
				cout &lt;&lt; "Unesite ime korisnika: ";
				getline(cin, ime);
				cout &lt;&lt; "Unesite prezime korisnika: ";
				getline(cin, prezime);
				cout &lt;&lt; "Unesite adresu korisnika: ";
				getline(cin, adresa);
				cout &lt;&lt; "Unesite broj telefona korisnika: ";
				getline(cin, br_telefona);
				
				bib.RegistrirajNovogKorisnika(broj, ime, prezime, adresa, br_telefona);
				cout &lt;&lt; "Korisnik uspjesno registrovan!" &lt;&lt; endl;
			}
			catch(logic_error izuzetak)
			{
				cout &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite ponovo." &lt;&lt; endl;
				if(!cin) cin.clear();
				cin.ignore(10000, '\n');
				goto ponovo1;
			}
		}
		else if(opcija==2)
		{
			ponovo2:
			try
			{
				int ev_broj, godina;
				string naslov, ime, zanr;
				cout &lt;&lt; "Unesite evidencijski broj: ";
				cin &gt;&gt; ev_broj;
				if(!cin) cin.clear();
				cin.ignore(10000, '\n');
				
				cout &lt;&lt; "Unesite naslov knjige: ";
				getline(cin, naslov);
				cout &lt;&lt; "Unesite ime pisca: ";
				getline(cin, ime);
				cout &lt;&lt; "Unesite zanr: ";
				getline(cin, zanr);
				cout &lt;&lt; "Unesite godinu izdavanja: ";
				cin &gt;&gt; godina;
				
				bib.RegistrirajNovuKnjigu(ev_broj, naslov, ime, zanr, godina);
				cout &lt;&lt; "Knjiga uspjesno registrovana!" &lt;&lt; endl;
			}
			catch(logic_error izuzetak)
			{
				cout &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite ponovo." &lt;&lt; endl;
				if(!cin) cin.clear();
				cin.ignore(10000, '\n');
				goto ponovo2;
			}
		}
		else if(opcija==3)
		{
			try
			{
				int ev_broj, clan_broj;
				cout &lt;&lt; "Unesite evidencijski broj knjige koju zelite zaduziti: ";
				cin &gt;&gt; ev_broj;
				cout &lt;&lt; "Unesite clanski broj korisnika: ";
				cin &gt;&gt; clan_broj;
				
				bib.ZaduziKnjigu(ev_broj, clan_broj);
				cout &lt;&lt; "Knjiga uspjesno zaduzena!" &lt;&lt; endl;
			}
			catch(logic_error izuzetak)
			{
				cout &lt;&lt; izuzetak.what() &lt;&lt; endl;
			}
		}
		else if(opcija==4)
		{
			try
			{
				int ev_broj;
				cout &lt;&lt; "Unesite evidencijski broj knjige koju zelite razduziti: ";
				cin &gt;&gt; ev_broj;
				
				bib.RazduziKnjigu(ev_broj);
				cout &lt;&lt; "Knjiga uspjesno razduzena!" &lt;&lt; endl;
			}
			catch(logic_error izuzetak)
			{
				cout &lt;&lt; izuzetak.what() &lt;&lt; endl;
			}
		}
		else if(opcija==5)
		{
			while(1)
			{
				ponovo3:
				int opcija5;
				cout &lt;&lt; "Izaberite opciju:" &lt;&lt; endl &lt;&lt; "0 - nazad" &lt;&lt; endl &lt;&lt; "1 - ispisi korisnike" &lt;&lt; endl &lt;&lt; "2 - ispisi knjige" &lt;&lt; endl &lt;&lt; "3 - ispisi zaduzenja" &lt;&lt; endl;
				cin &gt;&gt; opcija5;
				if(opcija5&lt;0 || opcija5&gt;3)
				{
					cout &lt;&lt; "Neispravna opcija. Molimo unesite ponovo." &lt;&lt; endl;
					goto ponovo3;
				}
				else if(opcija5==0) break;
				else if(opcija5==1) bib.IzlistajKorisnike();
				else if(opcija5==2) bib.IzlistajKnjige();
				else if(opcija5==3)
				{
					try
					{
						int clan_broj;
						cout &lt;&lt; "Unesite clanski broj korisnika cija zaduzenja zelite vidjeti: ";
						cin &gt;&gt; clan_broj;
						cout &lt;&lt; "Zaduzenja korisnika sa tim clanskim brojem su:" &lt;&lt; endl;
						bib.PrikaziZaduzenja(clan_broj);
					}
					catch(logic_error izuzetak)
					{
						cout &lt;&lt; izuzetak.what() &lt;&lt; endl;
					}
				}
			}
		}
	}
	
	return 0;
}
</pre>
</body>
</html>
