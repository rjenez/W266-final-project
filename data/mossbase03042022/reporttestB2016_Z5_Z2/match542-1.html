<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9979.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6227.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise


#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;iterator&gt;
#include &lt;memory&gt;

struct Korisnik{
  std::string ime, prezime, adresa, telefon;
};


class Knjiga{
  std::string naslov, imepisca, zanr;
  int godinaizdavanja;
  Korisnik *budalacita;
public:
  Knjiga(std::string nas, std::string pisac, std::string tip, int godina): naslov(nas), imepisca(pisac), zanr(tip), godinaizdavanja(godina), budalacita(nullptr){}
  
  std::string DajNaslov() const{
      return naslov;
  }
  std::string DajAutora() const {
      return imepisca;
  } 
  std::string DajZanr() const {
      return zanr;
  }
  int DajGodinuIzdavanja() const {
      return godinaizdavanja;
  }
  
  Korisnik* DajKodKogaJe() const {
      return budalacita;
  }
  void ZaduziKnjigu(Korisnik &amp;k);
  void RazduziKnjigu();
  bool DaLiJeZaduzena() const;

};

void Knjiga::ZaduziKnjigu(Korisnik &amp;k){
    budalacita=&amp;k;
}
void Knjiga::RazduziKnjigu(){
    budalacita=nullptr;
}
<a name="6"></a><font color="#00FF00"><a href="match542-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

bool Knjiga::DaLiJeZaduzena() const {
    return budalacita!=nullptr;
}


class Biblioteka{
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; mapakorisnika;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; mapaknjiga;
</font>    bool dalisuisti(Korisnik konj, Korisnik koza){
        if(konj.ime!=koza.ime || konj.prezime!=koza.prezime || konj.adresa!=koza.adresa || konj.telefon!=koza.telefon) return false;
        else return true;
    }
    
public:
    Biblioteka()=default;
    
    Biblioteka(const Biblioteka &amp;biblio){
        for(auto p=biblio.mapakorisnika.begin();p!=biblio.mapakorisnika.end();p++){
            mapakorisnika[p-&gt;first]=std::shared_ptr&lt;Korisnik&gt;(new Korisnik{p-&gt;second-&gt;ime,p-&gt;second-&gt;prezime, p-&gt;second-&gt;adresa, p-&gt;second-&gt;telefon});
        }
        
        for(auto p=biblio.mapaknjiga.begin();p!=biblio.mapaknjiga.end();p++){
            mapaknjiga[p-&gt;first]=std::shared_ptr&lt;Knjiga&gt;(new Knjiga(p-&gt;second-&gt;DajNaslov(), p-&gt;second-&gt;DajAutora(), p-&gt;second-&gt;DajZanr(), p-&gt;second-&gt;DajGodinuIzdavanja()));
            if(p-&gt;second-&gt;DajKodKogaJe()!=nullptr){
            Korisnik dajdatenadem= *(p-&gt;second-&gt;DajKodKogaJe());
            for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
                if(dalisuisti(*(it-&gt;second),dajdatenadem)==true){
                    mapaknjiga[p-&gt;first]-&gt;ZaduziKnjigu(*it-&gt;second);
                    break;
                    }
                }
            }
        }
    }
    
    Biblioteka(Biblioteka &amp;&amp;biblio){
        mapakorisnika=biblio.mapakorisnika;
        mapaknjiga=biblio.mapaknjiga;
        for(auto it=biblio.mapaknjiga.begin();it!=biblio.mapaknjiga.end();it++) it-&gt;second=nullptr;
        for(auto it=biblio.mapakorisnika.begin();it!=biblio.mapakorisnika.end();it++) it-&gt;second=nullptr;
    }
    
    Biblioteka &amp;operator =(const Biblioteka &amp;biblio){
        if(&amp;biblio!=this){
            for(auto p=mapaknjiga.begin();p!=mapaknjiga.end();p++) p-&gt;second=nullptr;
            for(auto p=mapakorisnika.begin();p!=mapakorisnika.end();p++) p-&gt;second=nullptr;
            
            for(auto p=biblio.mapakorisnika.begin();p!=biblio.mapakorisnika.end();p++){
                mapakorisnika[p-&gt;first]=std::shared_ptr&lt;Korisnik&gt;(new Korisnik{p-&gt;second-&gt;ime, p-&gt;second-&gt;prezime, p-&gt;second-&gt;adresa, p-&gt;second-&gt;telefon});
            }
        
        for(auto p=biblio.mapaknjiga.begin();p!=biblio.mapaknjiga.end();p++){
            mapaknjiga[p-&gt;first]=std::shared_ptr&lt;Knjiga&gt;(new Knjiga(p-&gt;second-&gt;DajNaslov(), p-&gt;second-&gt;DajAutora(), p-&gt;second-&gt;DajZanr(), p-&gt;second-&gt;DajGodinuIzdavanja()));
            if(p-&gt;second-&gt;DajKodKogaJe()!=nullptr){
            Korisnik dajdatenadem= *(p-&gt;second-&gt;DajKodKogaJe());
            for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
                if(dalisuisti(*(it-&gt;second),dajdatenadem)==true){
                    mapaknjiga[p-&gt;first]-&gt;ZaduziKnjigu(*it-&gt;second);
                    break;
                }
            }
        }
        }
        }
    return *this;
}
    
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;biblio){
        if(&amp;biblio!=this){
            for(auto p=mapaknjiga.begin();p!=mapaknjiga.end();p++) p-&gt;second=nullptr;
            for(auto p=mapakorisnika.begin();p!=mapakorisnika.end();p++) p-&gt;second=nullptr;
            mapakorisnika=biblio.mapakorisnika;
            mapaknjiga=biblio.mapaknjiga;
            for(auto it=biblio.mapaknjiga.begin();it!=biblio.mapaknjiga.end();it++) it-&gt;second=nullptr;
            for(auto it=biblio.mapakorisnika.begin();it!=biblio.mapakorisnika.end();it++) it-&gt;second=nullptr;
        }
        
        return *this;
    }
    //ides mi na zivce 
    //daBog da proradio
    ~Biblioteka(){
        for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++){
            it-&gt;second=nullptr;
        }
        for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++){
            it-&gt;second=nullptr;
        }
        mapaknjiga.clear();
        mapakorisnika.clear();
    }
    
    void RegistrirajNovogKorisnika(int clanskibr, std::string ime, std::string prezime, std::string adresa, std::string telefon){
    
    if(!mapakorisnika.count(clanskibr)){
        std::shared_ptr&lt;Korisnik&gt; p=std::shared_ptr&lt;Korisnik&gt;(new Korisnik{ime, prezime, adresa, telefon});
        mapakorisnika.insert(std::make_pair(clanskibr,p));
    }
    else throw std::logic_error("Korisnik vec postoji");
}
    
    void RegistrirajNovuKnjigu(int evidbroj, std::string nas, std::string pis, std::string tip, int godina);
    Korisnik &amp;NadjiKorisnika(int clanskibr);
    Knjiga &amp;NadjiKnjigu(int evidbroj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evidbroj, int clanskibr);
    void RazduziKnjigu(int evidbroj);
    void PrikaziZaduzenja(int clanskibr) const;
};



<a name="3"></a><font color="#00FFFF"><a href="match542-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

int main ()
{
//AT1 (c9): testira da li je Korisnik struktura

Korisnik k1 { "Niko", "Nikic", "Zmaja od Bosne bb", "123 456"};
std::cout &lt;&lt; k1.ime &lt;&lt; " " &lt;&lt; k1.prezime &lt;&lt; " " &lt;&lt; k1.adresa &lt;&lt; " " &lt;&lt; k1.telefon;
</font><a name="2"></a><font color="#0000FF"><a href="match542-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

std::cout &lt;&lt;  std::endl;
Knjiga knj1("Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
std::cout &lt;&lt; knj1.DajNaslov() &lt;&lt; " " &lt;&lt; knj1.DajAutora() &lt;&lt; " " &lt;&lt; knj1.DajZanr() &lt;&lt; " " &lt;&lt; knj1.DajGodinuIzdavanja();
</font>if(!knj1.DaLiJeZaduzena()) std::cout &lt;&lt; "\nKnjiga je slobodna";
else std::cout &lt;&lt; "\nKnjiga je zaduzena";
std::cout &lt;&lt;  std::endl;

Korisnik k2 { "Niko", "Nikic", "Zmaja od Bosne bb", "123 456"};
Knjiga knj2("Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
knj2.ZaduziKnjigu(k2);
if(!knj2.DaLiJeZaduzena()) std::cout &lt;&lt; "Knjiga je slobodna";
else std::cout &lt;&lt; "Knjiga je zaduzena";
knj2.RazduziKnjigu();
if(!knj2.DaLiJeZaduzena()) std::cout &lt;&lt; "\nKnjiga je slobodna";
else std::cout &lt;&lt; "\nKnjiga je zaduzena";

std::cout &lt;&lt;  std::endl;

//AT4 (c9): testira DajKodKogaJe metodu

Korisnik kor{"Meho", "Mehic", "Dobojska 15", "033/123-456"};
Knjiga knj("Tvrdjava", "Mesa Selimovic", "Roman", 1965);
<a name="0"></a><font color="#FF0000"><a href="match542-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

if(knj.DajKodKogaJe() == nullptr) std::cout &lt;&lt; "Nije zaduzena\n";
std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
knj.ZaduziKnjigu(kor);
std::cout &lt;&lt; "Knjigu je zaduzio " &lt;&lt; knj.DajKodKogaJe()-&gt;ime &lt;&lt; std::endl;
std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
</font>std::cout &lt;&lt;  std::endl;
Biblioteka bib5;
bib5.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib5.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
std::cout &lt;&lt; bib5.NadjiKnjigu(2).DajNaslov();
std::cout &lt;&lt;  std::endl;

//AT6 (c9): testira metodu NadjiKorisnika

Biblioteka bib6;
bib6.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib6.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
std::cout &lt;&lt; bib6.NadjiKorisnika(1).ime;
std::cout &lt;&lt; std::endl;
std::cout &lt;&lt; std::endl;
  //AT9 (c9): testira IzlistajKnjige sa zaduzenim knjigama
  std::cout &lt;&lt;  std::endl;
  std::cout &lt;&lt;  std::endl;
<a name="1"></a><font color="#00FF00"><a href="match542-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

  Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata 3b", "037/654-321");
b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
</font>b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
b.IzlistajKorisnike();
std::cout &lt;&lt;  std::endl;
  std::cout &lt;&lt;  std::endl;
Biblioteka bib8;
bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
bib8.ZaduziKnjigu(2, 1);
bib8.IzlistajKnjige();

Biblioteka b1(bib8);
Biblioteka b2(std::move(bib8));
//Biblioteka b2;
b2=b1;
Biblioteka b3;
b3=std::move(bib8);

	return 0;
}

void Biblioteka::RegistrirajNovuKnjigu(int evidbroj, std::string nas, std::string pis, std::string tip, int godina){
    if(!mapaknjiga.count(evidbroj)){
    std::shared_ptr&lt;Knjiga&gt; p=std::shared_ptr&lt;Knjiga&gt;(new Knjiga(nas, pis, tip, godina));    
    mapaknjiga.insert(std::make_pair(evidbroj, p));
    }
    else throw std::logic_error("Knjiga vec postoji");
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibr){
    auto it(mapakorisnika.find(clanskibr));
    if(it==mapakorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
<a name="7"></a><font color="#0000FF"><a href="match542-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    else return *(it-&gt;second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int evidbroj){
    auto it(mapaknjiga.find(evidbroj));
    if(it==mapaknjiga.end()) throw std::logic_error("Knjiga nije nadjena");
</font>    else return *(it-&gt;second);
}

void Biblioteka::IzlistajKorisnike() const {
    for(auto it=mapakorisnika.begin();it!=mapakorisnika.end();it++) {
<a name="4"></a><font color="#FF00FF"><a href="match542-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::cout&lt;&lt;"Clanski broj: "&lt;&lt; it-&gt;first&lt;&lt;std::endl&lt;&lt;"Ime i prezime: "&lt;&lt; (it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt; (it-&gt;second)-&gt;prezime&lt;&lt;std::endl&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl&lt;&lt;"Broj telefona: "&lt;&lt; (it-&gt;second)-&gt;telefon&lt;&lt;std::endl;
</font>        std::cout &lt;&lt;  std::endl;
    }
}

void Biblioteka::IzlistajKnjige() const {
    for(auto it=mapaknjiga.begin();it!=mapaknjiga.end();it++){
<a name="5"></a><font color="#FF0000"><a href="match542-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; it-&gt;first&lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt; (it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt; (it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;
        (it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if((it-&gt;second)-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt; ((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;((it-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evidbroj, int clanskibr){
    if(!mapaknjiga.count(evidbroj)) throw std::logic_error("Knjiga nije nadjena: ");
    if(!mapakorisnika.count(clanskibr)) throw std::logic_error("Korisnik nije nadjen"); 
    auto it(mapaknjiga.find(evidbroj));
    if(it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    auto pok(mapakorisnika.find(clanskibr));
    it-&gt;second-&gt;ZaduziKnjigu(*(pok-&gt;second));
}

void Biblioteka::RazduziKnjigu(int evidbroj){
    if(!mapaknjiga.count(evidbroj)) throw std::logic_error("Knjiga nije nadjena");
    auto it(mapaknjiga.find(evidbroj));
    if(!(it-&gt;second-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
    else it-&gt;second-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int clanskibr) const {
    if(!mapakorisnika.count(clanskibr)) throw std::logic_error("Korisnik nije nadjen");
    std::string i,pr, a,t;
    auto it(mapakorisnika.find(clanskibr));
    i=it-&gt;second-&gt;ime;
    pr=it-&gt;second-&gt;prezime;
    a=it-&gt;second-&gt;adresa;
    t=it-&gt;second-&gt;telefon;
    int br(0);
        for(auto p(mapaknjiga.begin());p!=mapaknjiga.end();p++){
            bool seke=true;
            if(p-&gt;second-&gt;DajKodKogaJe()==nullptr) continue;
            if(p-&gt;second-&gt;DajKodKogaJe()-&gt;ime!=i || p-&gt;second-&gt;DajKodKogaJe()-&gt;prezime!=pr || p-&gt;second-&gt;DajKodKogaJe()-&gt;adresa!=a || p-&gt;second-&gt;DajKodKogaJe()-&gt;telefon!=t) seke=false;
            if(seke==true){
                br++;
                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; it-&gt;first&lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt; (p-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl&lt;&lt;"Pisac: "&lt;&lt;(p-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt; (p-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;
        (p-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            }
            
        }
    
    if(br==0) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
}</pre>
</body>
</html>
