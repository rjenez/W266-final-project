<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4806.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4806.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match155-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
    //Korisnik()=default;
};

class Knjiga
{
    std::string naslov,ime_pisca,zanr;
    int godina_izdavanja;
    Korisnik *zaduzeno=nullptr;
public:
    Knjiga(std::string naslov,std::string ime_pisca,std::string zanr,int godina_izdavanja):naslov(naslov),ime_pisca(ime_pisca),zanr(zanr),godina_izdavanja(godina_izdavanja){}
    std::string DajNaslov() const {
        return naslov;
    }
    std::string DajAutora() const {
        return ime_pisca;
</font>    }
    std::string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godina_izdavanja;
    }
<a name="2"></a><font color="#0000FF"><a href="match155-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

    Korisnik *DajKodKogaJe()const {
        return zaduzeno;
    }
    void ZaduziKnjigu(Korisnik &amp;korisnik) {
        //zaduzeno=new Korisnik(korisnik);
        zaduzeno=&amp;korisnik;
    }
    void RazduziKnjigu() {
       // delete zaduzeno;
        zaduzeno=nullptr;
    }
    bool DaLiJeZaduzena() {
        if(zaduzeno==nullptr) return false;
        return true;
    }
};
class Biblioteka
{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    Biblioteka()=default;
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
   /* ~Biblioteka(){
          for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
              delete it-&gt;second;
          }
          for(auto it=knjige.begin(); it!=knjige.end(); it++) {
              delete it-&gt;second;
          }
    }*/
    void RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa,std::string broj_telefona);
</font>    void RegistrirajNovuKnjigu(int evidecijski_broj,std::string ime_pisca,std::string naslov,std::string zanr,int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
<a name="0"></a><font color="#FF0000"><a href="match155-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_77.gif"/></a>

    Knjiga &amp;NadjiKnjigu(int evidecijski_broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evidecijski_broj,int clanski_broj);
    void RazduziKnjigu(int evidecijski_broj);
    void PrikaziZaduzenja(int clanski_broj);
};

Biblioteka::Biblioteka(const Biblioteka &amp;b)
{
    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) {
        Korisnik k;
        k=*(it-&gt;second);
        std::shared_ptr&lt;Korisnik&gt; pok(std::make_shared&lt;Korisnik&gt;(k));
        korisnici.insert(std::make_pair(it-&gt;first,pok));
    }
    for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) {
        Knjiga k(*(it-&gt;second));
        std::shared_ptr&lt;Knjiga&gt; pok(std::make_shared&lt;Knjiga&gt;(k));
        knjige.insert(std::make_pair(it-&gt;first,pok));
    }
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa,std::string broj_telefona)
{
    auto it(korisnici.find(clanski_broj));
    if(it == korisnici.end()) {
        std::shared_ptr&lt;Korisnik&gt; pok;
        Korisnik k;
        k.ime=ime;
        k.prezime=prezime;
        k.adresa=adresa;
        k.telefon=broj_telefona;
        pok=std::make_shared&lt;Korisnik&gt;(k);
        korisnici.insert(std::make_pair(clanski_broj,pok));
    } else {
        throw std::logic_error("Korisnik vec postoji");
    }
}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj,std::string ime_pisca,std::string naslov,std::string zanr,int godina_izdavanja)
{
    auto it(knjige.find(evidencijski_broj));
    if(it == knjige.end()) {
        std::shared_ptr&lt;Knjiga&gt; pok;
        pok=std::make_shared&lt;Knjiga&gt;(ime_pisca,naslov,zanr,godina_izdavanja);
        knjige.insert(std::make_pair(evidencijski_broj,pok));
    } else {
        throw std::logic_error("Knjiga vec postoji");
    }
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj)
{
    auto it(korisnici.find(clanski_broj));
    if(it == korisnici.end()) {
        throw std::logic_error("Korisnik nije nadjen");
    } else {
        Korisnik &amp;poki(*(it-&gt;second));
        return poki;
    }
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj)
{
    auto it(knjige.find(evidencijski_broj));
    if(it == knjige.end()) {
        throw std::logic_error("Knjiga nije nadjena");
    } else {
        Knjiga &amp;poki(*(it-&gt;second));
        return poki;
    }
}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj,int clanski_broj)
{
    auto it(knjige.find(evidencijski_broj));
    auto it1(korisnici.find(clanski_broj));
    if(it == knjige.end()) {
        throw std::logic_error("Knjiga nije nadjena");
    } else if(it1==korisnici.end()) {
        throw std::logic_error("Korisnik nije nadjen");
    } else {
        if(it-&gt;second-&gt;Knjiga::DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    }
    Korisnik &amp;poki(*(it1-&gt;second));
    it-&gt;second-&gt;Knjiga::ZaduziKnjigu(poki);
}


void Biblioteka::RazduziKnjigu(int evidencijski_broj)
{
     auto it(knjige.find(evidencijski_broj));
      if(it == knjige.end()) {
        throw std::logic_error("Knjiga nije nadjena");
    }else if(it-&gt;second-&gt;Knjiga::DaLiJeZaduzena()==false)
    {
        throw std::logic_error("Knjiga nije zaduzena");
    }else
    {
     it-&gt;second-&gt;Knjiga::RazduziKnjigu();   
    }
}

 void Biblioteka::IzlistajKorisnike() const{
     for(auto it = korisnici.begin(); it != korisnici.end(); it++){
      std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt;std::endl;
      std::cout&lt;&lt;"Ime i prezime: "&lt;&lt; it-&gt;second-&gt;Korisnik::ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;Korisnik::prezime&lt;&lt;std::endl;
      std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;Korisnik::adresa&lt;&lt;std::endl;
      std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;Korisnik::telefon&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
     }
 }
 
 void Biblioteka::IzlistajKnjige() const{
     for(auto it = knjige.begin(); it != knjige.end(); it++){
      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt;std::endl;
      std::cout&lt;&lt;"Naslov: "&lt;&lt; it-&gt;second-&gt;Knjiga::DajNaslov()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;Knjiga::DajAutora()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;Knjiga::DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;Knjiga::DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(it-&gt;second-&gt;Knjiga::DaLiJeZaduzena()==true){
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;Knjiga::DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;Knjiga::DajKodKogaJe()-&gt;prezime;
        }
        std::cout&lt;&lt;std::endl;
     }
     
     
 }
 
 
 
 int main(){
     Biblioteka bib8;
bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
bib8.ZaduziKnjigu(2, 1);
bib8.IzlistajKnjige();
</font>     return 0;
 }</pre>
</body>
</html>
