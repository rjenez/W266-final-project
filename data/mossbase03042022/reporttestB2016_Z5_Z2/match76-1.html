<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7823.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4280.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise


#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;memory&gt;

<a name="4"></a><font color="#FF00FF"><a href="match76-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_11.gif"/></a>

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
};
class Knjiga{
    std::string naslov, ime_pisca, zanr;
    int god_izdavanja;
    std::shared_ptr&lt;Korisnik&gt; pok_na_kor=nullptr;
public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja): naslov(naslov),
        ime_pisca(ime_pisca), zanr(zanr) , god_izdavanja(god_izdavanja) {pok_na_kor=nullptr;}
    std::string DajNaslov() const{return naslov;}
    std::string DajAutora() const{return ime_pisca;}
    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return god_izdavanja;}
    Korisnik DajKodKogaJe() const {return pok_na_kor;}
    void ZaduziKnjigu(Korisnik &amp;a) {pok_na_kor=&amp;a;}
    void RazduziKnjigu() {pok_na_kor=nullptr;}
    bool DaLiJeZaduzena () {if(!(pok_na_kor==nullptr)) return true; return false;}
};
class Biblioteka{
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
public:
    Biblioteka(){};
    ~Biblioteka();
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
</font>    void RegistrirajNovuKnjigu(int ev_broj, std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja);
    Korisnik&amp; NadjiKorisnika(int cl_broj);
<a name="0"></a><font color="#FF0000"><a href="match76-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_24.gif"/></a>

    Knjiga&amp; NadjiKnjigu(int ev_broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int ev_broj, int cl_broj);
    void RazduziKnjigu(int ev_broj);
    void PrikaziZaduzenja(int cl_broj) const;
};
Biblioteka::~Biblioteka(){
    for(auto it1(korisnici.begin()); it1!=korisnici.end(); it1++){
        delete (it1-&gt;second);
    }
    for(auto it2(knjige.begin());it2!=knjige.end();it2++){
        delete (it2-&gt;second);
    }
}
void Biblioteka::RegistrirajNovogKorisnika(int cl_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
    auto it(korisnici.find(cl_broj));
    if(it==korisnici.end()) {}
    else throw std::logic_error("Korisnik vec postoji");
    
    Korisnik tmp;
    tmp.ime=ime;
    tmp.prezime=prezime;
    tmp.adresa=adresa;
    tmp.telefon=telefon;
    
    std::shared_ptr&lt;Korisnik&gt; pok_na_kor(std::make_shared&lt;Korisnik&gt; (nullptr));
    try{
        pok_na_kor=std::make_shared&lt;Korisnik&gt; (Korisnik(tmp));
        korisnici[cl_broj]=*pok_na_kor;
    }catch(std::bad_alloc){
        throw;
        for(auto it(korisnici.begin()); it!=korisnici.end(); it++){
            delete it-&gt;second;
        }
    }
}
void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja){
    auto it(knjige.find(ev_broj));
    if(it==knjige.end()) {}
    else throw std::logic_error("Knjiga vec postoji");
    
    Knjiga tmp(naslov,ime_pisca,zanr, god_izdavanja);
    Knjiga *pok_na_knjigu(nullptr);
    try{
        pok_na_knjigu=new Knjiga(tmp);
        knjige[ev_broj]=pok_na_knjigu;
    }catch(std::bad_alloc){
        throw;
        for(auto it(knjige.begin()); it!=knjige.end(); it++){
            delete it-&gt;second;
        }
    }
}
Korisnik&amp; Biblioteka::NadjiKorisnika(int cl_broj){
        if(cl_broj&lt;=0) throw std::domain_error("Neispravan clanski broj");
        auto it(korisnici.find(cl_broj));
        if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    return *it-&gt;second;
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int ev_broj){
        if(ev_broj&lt;=0) throw std::domain_error("Neispravan evidencijski broj");
        auto it(knjige.find(ev_broj));
        if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    return *it-&gt;second;    
}
void Biblioteka::IzlistajKorisnike() const{
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
<a name="5"></a><font color="#FF0000"><a href="match76-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const{
    for(auto it=knjige.begin(); it!=knjige.end(); it++){
        Knjiga pom=*it-&gt;second;
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;pom.DajNaslov()&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Pisac: "&lt;&lt;pom.DajAutora()&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match76-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_19.gif"/></a>

        std::cout&lt;&lt;"Zanr: "&lt;&lt;pom.DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;pom.DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(pom.DaLiJeZaduzena()==true) {
            Korisnik* kor(pom.DajKodKogaJe());
            std::cout&lt;&lt;"Zaduzena kod korisnika: ";
            std::cout&lt;&lt;kor-&gt;ime;
            std::cout&lt;&lt;" ";
            std::cout&lt;&lt;kor-&gt;prezime&lt;&lt;std::endl;
        }
    }    
};
void Biblioteka::ZaduziKnjigu(int ev_broj, int cl_broj){
    if(ev_broj&lt;=0 || cl_broj&lt;=0) throw std::logic_error("Neispravni podaci");
    auto it(knjige.find(ev_broj));
    if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    
    auto it2(korisnici.find(cl_broj));
    if(it2==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    
    if(it-&gt;second-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga je vec zaduzena");

    it-&gt;second-&gt;ZaduziKnjigu(*it2-&gt;second);
}
void Biblioteka::RazduziKnjigu(int ev_broj){
    auto it(knjige.find(ev_broj));
    if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    if(it-&gt;second-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
    it-&gt;second-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int cl_broj) const {
    try{
        auto it(korisnici.find(cl_broj));
        if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        Korisnik* a;
        for(auto it2(knjige.begin()); it2!=knjige.end();it2++){
            if(it2-&gt;second-&gt;DaLiJeZaduzena()==true) {a=it2-&gt;second-&gt;DajKodKogaJe();
                if(it-&gt;second-&gt;ime==a-&gt;ime){
                    Knjiga pom=*it2-&gt;second;
                    std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it2-&gt;first&lt;&lt;std::endl;
                    std::cout&lt;&lt;"Naslov: "&lt;&lt;pom.DajNaslov()&lt;&lt;std::endl;
</font>                    std::cout&lt;&lt;"Pisac: "&lt;&lt;pom.DajAutora()&lt;&lt;std::endl;
                    std::cout&lt;&lt;"Zanr: "&lt;&lt;pom.DajZanr()&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match76-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_13.gif"/></a>

                    std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;pom.DajGodinuIzdavanja()&lt;&lt;std::endl;
                }
            std::cout&lt;&lt;std::endl;
        }
}
    }catch(...){
        throw;
    }
}

int main (){
    std::cout&lt;&lt;"    Dobrodosli!"&lt;&lt;std::endl;
    
    do{
        Biblioteka biblioteka;
        std::cout&lt;&lt;"\nOpcije su: "&lt;&lt;std::endl;
        std::cout&lt;&lt;"[1]---------&gt;Registriraj Novog Korisnika";
        std::cout&lt;&lt;"\n[2]---------&gt;Registriraj Novu Knjigu";
        std::cout&lt;&lt;"\n[3]---------&gt;Nadji Korisnika";
        std::cout&lt;&lt;"\n[4]---------&gt;Nadji Knjigu";
        std::cout&lt;&lt;"\n[5]---------&gt;Izlistaj Korisnike";
        std::cout&lt;&lt;"\n[6]---------&gt;Izlistaj Knjige";
        std::cout&lt;&lt;"\n[7]---------&gt;Zaduzi Knjigu";
        std::cout&lt;&lt;"\n[8]---------&gt;RazduziKnjigu";
        std::cout&lt;&lt;"\n\"Kraj\"---------&gt;Kraj"&lt;&lt;std::endl;
        
        std::cout&lt;&lt;"Izaberite neku opciju, unosom broja zeljene opcije: ";
        int n;
        std::cin&gt;&gt;n;
        
        while(n&lt;0 &amp;&amp; n&gt;8)   {std::cout&lt;&lt;"\nNiste unijeli validan broj. Molimo pokusajte ponovo!";}
    /**/    if(!std::cin) {std::cout&lt;&lt;"\nDovidjenja!"; return 0;}
    
        switch(n){
            case(1):{
                bool neispravno(false);
                do{
                    std::cout&lt;&lt;"\n-&gt;Za ragistraciju novog korisnika unesite njegov clanski broj, ime, prezime, adresu, i broj telefona: ";
                    
                    std::cout&lt;&lt;"\nUnesite clanski broj i ime u istom redu: ";
                    int cl_broj;
                    std::cin&gt;&gt;cl_broj;
                    
                    //std::cout&lt;&lt;"Unesite ime: ";
                    std::string ime;
                    std::getline(std::cin, ime); 
                    
                    std::cout&lt;&lt;"Unesite prezime: ";
                    std::string prezime;
                    std::getline(std::cin, prezime); 
</font>                    
                    std::cout&lt;&lt;"Unesite adresu: ";
                    std::string adresa;
<a name="2"></a><font color="#0000FF"><a href="match76-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_14.gif"/></a>

                    std::getline(std::cin, adresa); 
                    
                    std::cout&lt;&lt;"Unesite broj telefona: ";
                    std::string broj_telefona;
                    std::getline(std::cin, broj_telefona);
    
                    try{
                        biblioteka.RegistrirajNovogKorisnika(cl_broj, ime, prezime, adresa,broj_telefona);
                        break;
                    }catch(std::logic_error izu){
                        std::cout&lt;&lt;izu.what()&lt;&lt;" Molimo pokusajte ponovo";
                        neispravno=true;
                    }
                }while(neispravno==true);
                break;
            }
            case(2):{
                bool neispravno(false);
                do{
                    std::cout&lt;&lt;"\n-&gt;Za ragistraciju nove knjige unesite njen evidencijski broj, naslov, ime pisca, zanr, i godinu izdavanja: ";
                    
                    std::cout&lt;&lt;"\nUnesite evidencijski broj i naslov knjige u istom redu: ";
                    int ev_broj;
                    std::cin&gt;&gt;ev_broj;
                    
                    //std::cout&lt;&lt;"Unesite naslov: ";
                    std::string naslov;
                    std::getline(std::cin, naslov); 
                    
                    std::cout&lt;&lt;"Unesite ime pisca: ";
                    std::string ime_pisca;
                    std::getline(std::cin, ime_pisca); 
                    
                    std::cout&lt;&lt;"Unesite zanr: ";
                    std::string zanr;
                    std::getline(std::cin, zanr); 
                    
                    std::cout&lt;&lt;"Unesite godinu izdavanja: ";
                    int god_izdavanja;
                    std::cin&gt;&gt;god_izdavanja;
    
                    try{
                        biblioteka.RegistrirajNovuKnjigu(ev_broj, naslov, ime_pisca, zanr,god_izdavanja);
                    }catch(std::logic_error izu){
                        std::cout&lt;&lt;izu.what()&lt;&lt;" Molimo pokusajte ponovo";
                        neispravno=true;
                    }
                }while(neispravno==true);                
                
            }
            case(3):{
                
            }
            case(4):{
                
            }
            case(5):{
                std::cout&lt;&lt;"\nKorisnici su: ";
                biblioteka.IzlistajKorisnike();
            }
            case(6):{
                std::cout&lt;&lt;"\nKnjige su: ";
                biblioteka.IzlistajKnjige();
            }
            case(7):{
                
            }
            case(8):{
                
            }        
        }
    }while(1);
</font>
	return 0;
}</pre>
</body>
</html>
