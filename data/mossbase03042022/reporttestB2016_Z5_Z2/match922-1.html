<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7774.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student1016.cpp<p></p><pre>
/B16/17 (Zadaća 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

using std::string;
using std::cout;
using std::cin;
using std::endl;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};
class Knjiga
{
<a name="2"></a><font color="#0000FF"><a href="match922-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    std::string naslov, ime_pisca, zanr;
    int god_izd;
    Korisnik* p;
public:
    Knjiga (string naslov, string ime_pisca, string zanr, int god_izd): naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), god_izd(god_izd), p(nullptr) {};
    string DajNaslov() {
        return naslov;
    };
    string DajAutora() {
        return ime_pisca;
</font>    };
    string DajZanr() {
        return zanr;
    };
    int DajGodinuIzdavanja () {
        return god_izd;
    };
    Korisnik* DajKodKogaJe () {
        return p;
    };
    void ZaduziKnjigu (Korisnik&amp; k) {
        p=&amp;k;
    };
    void RazduziKnjigu () {
        p=nullptr;
    };
    bool DaLiJeZaduzena () {
        return !(p==nullptr);
    }
};
class Biblioteka
{
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
public:
    Biblioteka(){}
    Biblioteka (const Biblioteka&amp; b);
    Biblioteka&amp; operator = (const Biblioteka &amp;b);
    Biblioteka(Biblioteka&amp;&amp; b): knjige(b.knjige), korisnici(b.korisnici) {};
<a name="3"></a><font color="#00FFFF"><a href="match922-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    Biblioteka&amp; operator = (Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int cl_br, string ime, string prezime, string adresa, string br_tel);
    void RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime_pisca, string zanr, int godina);
    Korisnik&amp; NadjiKorisnika(int cl_br);
</font>    Knjiga&amp; NadjiKnjigu(int ev_broj);
    void IzlistajKnjige() const;
    void IzlistajKorisnike() const;
    void ZaduziKnjigu(int ev_broj, int cl_br);
    void RazduziKnjigu(int ev_broj);
    void PrikaziZaduzenja(int cl_br);
};

Biblioteka::Biblioteka (const Biblioteka&amp; b)
{
    for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) {
        knjige[it-&gt;first]=std::make_shared&lt;Knjiga&gt;(Knjiga(*(it-&gt;second)));
    }
    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) {
        korisnici[it-&gt;first]=std::make_shared&lt;Korisnik&gt;(Korisnik(*(it-&gt;second)));
    }
}
Biblioteka&amp; Biblioteka::operator = (const Biblioteka &amp;b)
{
    for(auto it=b.knjige.begin(); it!=b.knjige.end(); it++) {
        knjige[it-&gt;first]=std::make_shared&lt;Knjiga&gt;(Knjiga(*(it-&gt;second)));
    }
    for(auto it=b.korisnici.begin(); it!=b.korisnici.end(); it++) {
        korisnici[it-&gt;first]=std::make_shared&lt;Korisnik&gt;(Korisnik(*(it-&gt;second)));
    }
    return *this;
}
Biblioteka&amp; Biblioteka::operator = (Biblioteka &amp;&amp;b)
{
    knjige=b.knjige;
    korisnici=b.korisnici;
<a name="1"></a><font color="#00FF00"><a href="match922-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    return *this;
}
void Biblioteka::RegistrirajNovogKorisnika(int cl_br, string ime, string prezime, string adresa, string br_tel)
{
    if(korisnici.count(cl_br)) throw std::logic_error ("Korisnik vec postoji");
    Korisnik k;
    k.ime=ime;
    k.prezime=prezime;
    k.adresa=adresa;
    k.telefon=br_tel;
</font><a name="5"></a><font color="#FF0000"><a href="match922-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    korisnici[cl_br]=std::make_shared&lt;Korisnik&gt;(k);
}
void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime_pisca, string zanr, int godina)
{
    if(knjige.count(ev_broj)) throw std::logic_error ("Knjiga vec postoji");
    knjige[ev_broj]=std::make_shared&lt;Knjiga&gt;(Knjiga(naslov, ime_pisca, zanr, godina));
</font>}
Korisnik&amp; Biblioteka::NadjiKorisnika(int cl_br)
{
    if(!korisnici.count(cl_br)) throw std::logic_error ("Korisnik nije nadjen");
    return *korisnici[cl_br];
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int ev_broj)
{
    if(!knjige.count(ev_broj)) throw std::logic_error ("Knjiga nije nadjena");
    return *knjige[ev_broj];
}
void Biblioteka::IzlistajKorisnike() const
{
    for(auto it=korisnici.begin(); it!=korisnici.end(); it++) {
        std::cout &lt;&lt; "Clanski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
        cout&lt;&lt; "Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;ime &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt; endl;
        cout &lt;&lt; "Adresa: " &lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt; endl;
<a name="4"></a><font color="#FF00FF"><a href="match922-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        cout &lt;&lt; "Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt; endl &lt;&lt; endl;
    }
}
void Biblioteka::IzlistajKnjige() const
{
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        cout&lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov()&lt;&lt; endl;
        cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; endl;
        cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; endl;
<a name="0"></a><font color="#FF0000"><a href="match922-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
        if((it-&gt;second)-&gt;DaLiJeZaduzena()) {
            cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; ((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime &lt;&lt; " "&lt;&lt;((it-&gt;second)-&gt;DajKodKogaJe())-&gt;prezime&lt;&lt; endl;
        }
        cout &lt;&lt; endl;
    }
}
void Biblioteka::ZaduziKnjigu(int ev_broj, int cl_br)
</font>{
    if(!knjige.count(ev_broj)) throw std::logic_error ("Knjiga nije nadjena");
    if(!korisnici.count(cl_br)) throw std::logic_error ("Korisnik nije nadjen");
    if(knjige[ev_broj]-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
    knjige[ev_broj]-&gt;ZaduziKnjigu(*korisnici[cl_br]);
}
void Biblioteka::RazduziKnjigu(int ev_broj)
{
    if(!knjige.count(ev_broj)) throw std::logic_error ("Knjiga nije nadjena");
    if(!knjige[ev_broj]-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga nije zaduzena");
    knjige[ev_broj]-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int cl_br)
{
    if(!korisnici.count(cl_br)) throw std::logic_error ("Korisnik nije nadjen");
    Korisnik k1(*korisnici[cl_br]);
    bool nadjen(false);
    for(auto it=knjige.begin(); it!=knjige.end(); it++) {
        Korisnik k(*((it-&gt;second)-&gt;DajKodKogaJe()));
        Korisnik k1(*korisnici[cl_br]);
        if(k.ime==k1.ime and k.prezime==k1.prezime and k.adresa==k1.adresa and k.telefon==k1.telefon) {
            nadjen=true;
            std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
            cout&lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov()&lt;&lt; endl;
            cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; endl;
            cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; endl&lt;&lt; endl;
        }
    }
    if(!nadjen) cout &lt;&lt; "Nema zaduzenja za tog korisnika!"&lt;&lt; endl;
}
int main ()
{
   try {    
    Biblioteka bib6;
    bib6.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib6.RegistrirajNovogKorisnika(1,"Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
}
catch(std::logic_error Izuzetak){
    std::cout&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
}    
try{
    Biblioteka bib6;
    bib6.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib6.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    std::cout &lt;&lt; bib6.NadjiKorisnika(1).ime&lt;&lt;std::endl;
    
    Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Pero", "Periša", "Zmaja od Bosne bb", "123 444");
    bib8.RegistrirajNovogKorisnika(2, "Mirko", "Miki", "Čekaluša", "123 987");
    bib8.RegistrirajNovuKnjigu(1, "Pustolovine", "Mato Lovrak", "Roman2", 1941);
    bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    bib8.RegistrirajNovuKnjigu(3, "A planine su odjekivale", "Khaled Hosseini", "Roman", 2012);
    bib8.RegistrirajNovuKnjigu(4, "Hiljadu čudesnih sunaca", "Khaled Hosseini", "Roman", 2007);
    bib8.ZaduziKnjigu(2, 1);
    bib8.ZaduziKnjigu(4, 2);
    bib8.IzlistajKnjige();
    std::cout&lt;&lt;"Nakon dodjele biblioteka: "&lt;&lt;std::endl;
    bib8=bib6;
    bib8.IzlistajKnjige();
    Biblioteka bib7(bib6);
    std::cout&lt;&lt;"Nova biblioteka: "&lt;&lt;std::endl;
    bib7.IzlistajKnjige();
} catch(std::logic_error Izuzetak){
    std::cout&lt;&lt;Izuzetak.what()&lt;&lt;std::endl;
}    
    return 0;
}</pre>
</body>
</html>
