<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6656.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6656.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match116-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_66.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
using std::map;
using std::string;

struct Korisnik {
    string ime, prezime, adresa, telefon;
};

class Knjiga {
    string naslov, ime_pisca, zanr;
    int godina_izdanja;
    Korisnik *kod_koga_je;
public:
    Knjiga (string naslov, string ime_pisca, string zanr, int godina_izdanja); 
    string DajNaslov () const { return naslov; }
    string DajAutora () const { return ime_pisca; }
    string DajZanr () const { return zanr; }
    int DajGodinuIzdavanja () const { return godina_izdanja; }
    Korisnik* DajKodKogaJe () const { return kod_koga_je; }
    void ZaduziKnjigu (Korisnik &amp;korisnik);
    void RazduziKnjigu ();
    bool DaLiJeZaduzena () const;
};

class Biblioteka {
    map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
public:
    Biblioteka () {};
    Biblioteka (const Biblioteka &amp;b);
    Biblioteka (Biblioteka &amp;&amp;b);
    Biblioteka&amp; operator= (const Biblioteka &amp;b);
    void RegistrirajNovogKorisnika (int clanski_br_korisnika, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu (int evidencijski_br_knjige, string naslov, string ime_pisca, string zanr, int godina_izdanja);
    Korisnik &amp;NadjiKorisnika (int clanski_br_korisnika) const;
    Knjiga &amp;NadjiKnjigu (int evidencijski_br_knjige) const;
    void IzlistajKorisnike () const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu (int evidencijski_br_knjige, int clanski_br_korisnika);
    void RazduziKnjigu (int evidencijski_br_knjige);
    void PrikaziZaduzenja (int clanski_br_korisnika) const;
};

Knjiga::Knjiga (string naslov, string ime_pisca, string zanr, int godina_izdanja) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr),
    godina_izdanja(godina_izdanja), kod_koga_je(nullptr) {}

void Knjiga::ZaduziKnjigu (Korisnik &amp;korisnik) {
    kod_koga_je=&amp;korisnik;
}

void Knjiga::RazduziKnjigu () {
    kod_koga_je=nullptr;
}

bool Knjiga::DaLiJeZaduzena () const {
    if (!kod_koga_je)
        return false;
    return true;
}

Biblioteka::Biblioteka (const Biblioteka &amp;b) {
    for (auto it(b.korisnici.begin()); it!=b.korisnici.end(); it++) {
        std::shared_ptr&lt;Korisnik&gt; p(std::make_shared&lt;Korisnik&gt;());
        p-&gt;ime=it-&gt;second-&gt;ime;
        p-&gt;prezime=it-&gt;second-&gt;prezime;
        p-&gt;adresa=it-&gt;second-&gt;adresa;
        p-&gt;telefon=it-&gt;second-&gt;telefon;
        korisnici[it-&gt;first]=p;
    }
    for (auto it(b.knjige.begin()); it!=b.knjige.end(); it++) {
        std::shared_ptr&lt;Knjiga&gt; p(std::make_shared&lt;Knjiga&gt;(it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja()));
        knjige[it-&gt;first]=p;
    }
}

Biblioteka::Biblioteka (Biblioteka &amp;&amp;b) {
    for (auto it(b.korisnici.begin()); it!=b.korisnici.end(); it++) {
        korisnici[it-&gt;first]=it-&gt;second;
        it-&gt;second=nullptr;
    }
    for (auto it(b.knjige.begin()); it!=b.knjige.end(); it++) {
        knjige[it-&gt;first]=it-&gt;second;
        it-&gt;second=nullptr;
    }
}

Biblioteka&amp; Biblioteka::operator= (const Biblioteka &amp;b) {
    if (&amp;b!=this) {
        for (auto it(korisnici.begin()); it!=korisnici.end(); it++) {
            it-&gt;second=nullptr;
            korisnici.erase(it-&gt;first);
        }
        for (auto it(b.korisnici.begin()); it!=b.korisnici.end(); it++) {
            std::shared_ptr&lt;Korisnik&gt; p(std::make_shared&lt;Korisnik&gt;());
            p-&gt;ime=it-&gt;second-&gt;ime;
            p-&gt;prezime=it-&gt;second-&gt;prezime;
            p-&gt;adresa=it-&gt;second-&gt;adresa;
            p-&gt;telefon=it-&gt;second-&gt;telefon;
            korisnici[it-&gt;first]=p;
        }
        for (auto it(knjige.begin()); it!=knjige.end(); it++) {
            it-&gt;second=nullptr;
            knjige.erase(it-&gt;first);
        }
        for (auto it(b.knjige.begin()); it!=b.knjige.end(); it++) {
            std::shared_ptr&lt;Knjiga&gt; p(std::make_shared&lt;Knjiga&gt;(it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(), it-&gt;second-&gt;DajZanr(), it-&gt;second-&gt;DajGodinuIzdavanja()));
            knjige[it-&gt;first]=p;
            knjige[it-&gt;first]-&gt;ZaduziKnjigu(*(it-&gt;second-&gt;DajKodKogaJe()));
        }
    }
    return *this;
}

void Biblioteka::RegistrirajNovogKorisnika (int clanski_br_korisnika, string ime, string prezime, string adresa, string telefon) {
    if (korisnici.count(clanski_br_korisnika)) throw std::logic_error("Korisnik vec postoji");
    std::shared_ptr&lt;Korisnik&gt; p(std::make_shared&lt;Korisnik&gt;());
    p-&gt;ime=ime;
    p-&gt;prezime=prezime;
    p-&gt;adresa=adresa;
    p-&gt;telefon=telefon;
    korisnici[clanski_br_korisnika]=p;
}

void Biblioteka::RegistrirajNovuKnjigu (int evidencijski_br_knjige, string naslov, string ime_pisca, string zanr, int godina_izdanja) {
    if (knjige.count(evidencijski_br_knjige)) throw std::logic_error("Knjiga vec postoji");
    std::shared_ptr&lt;Knjiga&gt; p(std::make_shared&lt;Knjiga&gt;(naslov, ime_pisca, zanr, godina_izdanja));
    knjige[evidencijski_br_knjige]=p;
}

Korisnik&amp; Biblioteka::NadjiKorisnika (int clanski_br_korisnika) const {
    auto it(korisnici.find(clanski_br_korisnika));
    if (it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    return *(it-&gt;second);
}

Knjiga&amp; Biblioteka::NadjiKnjigu (int evidencijski_br_knjige) const {
    auto it(knjige.find(evidencijski_br_knjige));
    if (it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    return *(it-&gt;second);
}

void Biblioteka::IzlistajKorisnike () const {
    for (auto it(korisnici.begin()); it!=korisnici.end(); it++) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match116-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl &lt;&lt; std::endl;
    }
}

void Biblioteka::IzlistajKnjige () const {
    for (auto it(knjige.begin()); it!=knjige.end(); it++) {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if (it-&gt;second-&gt;DaLiJeZaduzena())
<a name="1"></a><font color="#00FF00"><a href="match116-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_12.gif"/></a>

            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ZaduziKnjigu (int evidencijski_br_knjige, int clanski_br_korisnika) {
    if (!knjige.count(evidencijski_br_knjige)) throw std::logic_error("Knjiga nije nadjena");
    if (!korisnici.count(clanski_br_korisnika)) throw std::logic_error("Korisnik nije nadjen");
    if (NadjiKnjigu(evidencijski_br_knjige).DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    NadjiKnjigu(evidencijski_br_knjige).ZaduziKnjigu(NadjiKorisnika(clanski_br_korisnika));
}

void Biblioteka::RazduziKnjigu (int evidencijski_br_knjige) {
    if (!knjige.count(evidencijski_br_knjige)) throw std::logic_error("Knjiga nije nadjena");
    if (!(NadjiKnjigu(evidencijski_br_knjige).DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
    NadjiKnjigu(evidencijski_br_knjige).RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja (int clanski_br_korisnika) const {
    if (!korisnici.count(clanski_br_korisnika)) throw std::logic_error("Korisnik nije nadjen");
    bool zaduzen(false);
    for (auto it(knjige.begin()); it!=knjige.end(); it++) {
        if (&amp;(*(it-&gt;second-&gt;DajKodKogaJe()))==&amp;NadjiKorisnika(clanski_br_korisnika)) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match116-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
            zaduzen=true;
        }
    }
    if (!zaduzen)
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
}

int main ()
</font>{
	return 0;
}</pre>
</body>
</html>
