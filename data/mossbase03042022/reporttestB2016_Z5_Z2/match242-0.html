<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2371.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2371.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;stdexcept&gt;
<a name="3"></a><font color="#00FFFF"><a href="match242-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

using std::cout;
using std::endl;
using std::string;
using std::shared_ptr;

struct Korisnik{
    string ime, prezime, adresa, telefon;
};
class Knjiga{
    string naslov, ime_pisca, zanr;
    int godina_izdavanja;
</font>    //Korisnik *korisnik=nullptr;
    std::shared_ptr&lt;Korisnik&gt; korisnik;
    public:
    Knjiga (string nasloov, string imepisca, string zanrr, int godinaizdavanja): naslov(nasloov), ime_pisca(imepisca), zanr(zanrr), godina_izdavanja(godinaizdavanja){}
    string DajNaslov() const {return naslov;}
    string DajAutora() const {return ime_pisca;}
    string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdavanja;}
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const {return korisnik;}
    void ZaduziKnjigu(Korisnik &amp;k){korisnik=std::make_shared&lt;Korisnik&gt;(k);} // ili korisnik=&amp;k, trebala bi oba biti dobra
    void RazduziKnjigu() {korisnik=nullptr;}
    bool DaLiJeZaduzena() const {if (korisnik==nullptr) return false; return true;}
};
class Biblioteka{
    std::map&lt;int, shared_ptr&lt;Korisnik&gt;&gt; korisnici;
<a name="2"></a><font color="#0000FF"><a href="match242-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    std::map&lt;int, shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    /*~Biblioteka(){
        for (auto it=korisnici.begin(); it!=korisnici.end(); it++){
            delete it-&gt;second;
        }
        for (auto it2=knjige.begin();it2!=knjige.end(); it2++){
            delete it2-&gt;second;
        }
    }*/
    void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime,  string adresa, string telefon){
        Korisnik l{ime, prezime, adresa, telefon};
</font>            std::shared_ptr&lt;Korisnik&gt; k(std::make_shared&lt;Korisnik&gt;(l));
            if (korisnici.count(clanski_broj)&gt;0) throw std::logic_error ("Korisnik vec postoji");
<a name="5"></a><font color="#FF0000"><a href="match242-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            else korisnici.insert(std::make_pair(clanski_broj, k));
    }
    void RegistrirajNovuKnjigu(int evid_broj_knjige, string naslov, string ime_pisca, string zanr, int godina_izdavanja){
        Knjiga l(naslov, ime_pisca, zanr, godina_izdavanja);
</font>           std::shared_ptr&lt;Knjiga&gt; k=std::make_shared&lt;Knjiga&gt;(l);
            if (knjige.count(evid_broj_knjige)&gt;0) throw std::logic_error ("Knjiga vec postoji");
            else knjige.insert(std::make_pair(evid_broj_knjige, k));
    }
    Korisnik &amp;NadjiKorisnika(int cl_broj) const {
        auto it(korisnici.find(cl_broj));
        if (it==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
       return *(it-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int broj) const {
        auto it(knjige.find(broj));
<a name="0"></a><font color="#FF0000"><a href="match242-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_25.gif"/></a>

        if (it==knjige.end()) throw std::logic_error ("Korisnik nije nadjen");
        return *(it-&gt;second);
        
    }
    void IzlistajKorisnike() const{
        for (auto it=korisnici.begin(); it!=korisnici.end(); it++){
        cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
        cout&lt;&lt;endl;
        }
    }
    void IzlistajKnjige() const {
        for (auto it=knjige.begin(); it!=knjige.end(); it++){
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
            
            if (it-&gt;second-&gt;DaLiJeZaduzena()) cout&lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
            else cout&lt;&lt;endl;
        }
    }
    void ZaduziKnjigu(int evid_broj_knjige, int cl_broj) {
        auto it(knjige.find(evid_broj_knjige));
</font>        if (it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it2(korisnici.find(cl_broj));
        if (it2==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        if (it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        it-&gt;second-&gt;ZaduziKnjigu(*(it2-&gt;second));
    }
    void RazduziKnjigu(int evid_broj_knjige){
        auto it(knjige.find(evid_broj_knjige));
        if (it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
<a name="4"></a><font color="#FF00FF"><a href="match242-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

        if (it-&gt;second-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
        it-&gt;second-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int cl_broj) const{
        bool jel=false;
        auto it2(korisnici.find(cl_broj));
        if (it2==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
</font><a name="1"></a><font color="#00FF00"><a href="match242-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

        for (auto it=knjige.begin(); it!=knjige.end(); it++){
            if ((it-&gt;second-&gt;DajKodKogaJe()-&gt;ime)==(it2-&gt;second-&gt;ime) &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime)==(it2-&gt;second-&gt;prezime) &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;adresa)==(it2-&gt;second-&gt;adresa) &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;telefon)==(it2-&gt;second-&gt;telefon) ) {
                cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
                cout&lt;&lt;endl; jel=true;
            }
        }
        if (jel==false) throw std::logic_error("Nema zaduzenja za tog korisnika!");
</font>    }
    
};
int main ()
{
	return 0;
}</pre>
</body>
</html>
