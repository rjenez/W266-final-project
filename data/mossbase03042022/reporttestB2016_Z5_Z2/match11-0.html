<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7970.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7970.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match11-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_74.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;memory&gt;

using std::cin;
using std::cout;
using std::endl;
using std::string;
using std::map;
using std::logic_error;
using std::getline;
using std::shared_ptr;
using std::unique_ptr;
using std::make_shared;

struct Korisnik
{
    string ime, prezime, adresa, telefon;
};

static bool operator==(const shared_ptr&lt;Korisnik&gt; k1, const Korisnik* k2)
{
    int broj(0);
    
    if (k1-&gt;ime==k2-&gt;ime)
    {
        broj++;
    }
    
    if (k1-&gt;prezime==k2-&gt;prezime)
    {
        broj++;
    }
    
    if (k1-&gt;adresa==k2-&gt;adresa)
    {
        broj++;
    }
    
    if(k1-&gt;telefon==k2-&gt;telefon)
    {
        broj++;
    }
    
    if (broj==4)
    {
        return true;
    }
    
    return false;
};

class Knjiga
{
    string naslov, pisac, zanr;
    int izdavanje;
    Korisnik *k;
    
    public:
    
    Knjiga (string n, string p, string z, int i)
    {
        naslov=n;
        pisac=p;
        zanr=z;
        izdavanje=i;
        k=nullptr;
    };
    
    string DajNaslov() const {return naslov;};
    string DajAutora() const {return pisac;};
    string DajZanr() const {return zanr;};
    int DajGodinuIzdavanja() const {return izdavanje;};
    Korisnik *&amp;DajKodKogaJe() {return k;};
    
    void ZaduziKnjigu(Korisnik &amp;zad){k=&amp;zad;};
    void RazduziKnjigu(){k=nullptr;};
    bool DaLiJeZaduzena() const
    {
        if (k==nullptr)
        {
            return false;
        }
        
        else
        {
            return true;
        }
    };
};
    class Biblioteka
    {
        map&lt;int,shared_ptr&lt;Korisnik&gt;&gt; korisnik;
        map&lt;int,shared_ptr&lt;Knjiga&gt;&gt; knjiga;
        
        public:
        
        Biblioteka (){};
        
        Biblioteka (map&lt;int,shared_ptr&lt;Korisnik&gt;&gt; kor)
        {
            for (auto it(kor.begin()); it!=kor.end(); it++)
            {
                korisnik[it-&gt;first]=make_shared &lt;Korisnik&gt; (*it-&gt;second);
            }
        };
        
        Biblioteka (map&lt;int,shared_ptr&lt;Knjiga&gt;&gt; knji)
        {
            for (auto it(knji.begin()); it!=knji.end(); it++)
            {
                knjiga[it-&gt;first]=make_shared &lt;Knjiga&gt; (*it-&gt;second);
            }
        };
        
        Biblioteka &amp;operator=(Biblioteka &amp;b)
        {
            for (auto it(b.korisnik.begin()); it!=b.korisnik.end(); it++)
            {
                korisnik[it-&gt;first]=make_shared &lt;Korisnik&gt; (*it-&gt;second);
            }
            
            for (auto it(b.knjiga.begin()); it!=b.knjiga.end(); it++)
            {
                knjiga[it-&gt;first]=make_shared &lt;Knjiga&gt; (*it-&gt;second);
            }
            
            return *this;
        };
        
        Biblioteka &amp;operator=(Biblioteka &amp;&amp;b)
        {
            korisnik=b.korisnik;
            knjiga=b.knjiga;
            
            for (auto it(b.korisnik.begin()); it!=b.korisnik.end(); it++)
            {
                it-&gt;second=nullptr;
            }
            
            for (auto it(b.knjiga.begin()); it!=b.knjiga.end(); it++)
            {
                it-&gt;second=nullptr;
            }
            
            return *this;
        };
        
        Biblioteka(const Biblioteka &amp;b)
        {
            for (auto it(b.korisnik.begin()); it!=b.korisnik.end(); it++)
            {
                korisnik[it-&gt;first]=make_shared &lt;Korisnik&gt; (*it-&gt;second);
            }
            
            for (auto it(b.knjiga.begin()); it!=b.knjiga.end(); it++)
            {
                knjiga[it-&gt;first]=make_shared &lt;Knjiga&gt; (*it-&gt;second);
            }
        };
        
        Biblioteka(Biblioteka &amp;&amp;b)
        {
            korisnik=b.korisnik;
            knjiga=b.knjiga;
            
            for (auto it(b.korisnik.begin()); it!=b.korisnik.end(); it++)
            {
                it-&gt;second=nullptr;
            }
            
            for (auto it(b.knjiga.begin()); it!=b.knjiga.end(); it++)
            {
                it-&gt;second=nullptr;
            }
        };
        
        
        void RegistrirajNovogKorisnika(int broj, string ime1, string prezime1, string adresa1, string telefon1)
        {
            try
            {
                for (auto it(korisnik.begin()); it!=korisnik.end(); it++)
                {
                    if (it-&gt;first==broj) throw logic_error ("Korisnik vec postoji");
                }
                shared_ptr&lt;Korisnik&gt; k=make_shared&lt;Korisnik&gt;();
 
                k-&gt;ime=ime1;
                k-&gt;prezime=prezime1;
                k-&gt;adresa=adresa1;
                k-&gt;telefon=telefon1;
                
                korisnik[broj]=k;
            }
            
            catch (logic_error izuzetak)
            {
                cout&lt;&lt;izuzetak.what();
            }
        };

        void RegistrirajNovuKnjigu(int broj, string naslov1, string pisac1, string zanr1, int izdavanje1)
        {
            try
            {
                for (auto it(knjiga.begin()); it!=knjiga.end(); it++)
                {
                    if (it-&gt;first==broj) throw logic_error ("Knjiga vec postoji");
                }
        
                shared_ptr&lt;Knjiga&gt; k=make_shared&lt;Knjiga&gt;(naslov1, pisac1, zanr1, izdavanje1);
            
                knjiga[broj]=k;
            }
            
            catch (logic_error izuzetak)
            {
                cout&lt;&lt;izuzetak.what();
            }
        };
        
        Korisnik NadjiKorisnika (int broj)
        {
            auto it(korisnik.find(broj));
            if (it==korisnik.end()) throw logic_error ("Korisnik nije nadjen");
                
            return (*it-&gt;second);
        };
        
        Knjiga NadjiKnjigu (int broj)
        {
            auto it(knjiga.find(broj));
            if (it==knjiga.end()) throw logic_error ("Knjiga nije nadjena");
                
            return (*it-&gt;second);
        };
        
        void IzlistajKorisnike() const
        {
             for (auto it(korisnik.begin()); it!=korisnik.end(); it++)
             {
                shared_ptr&lt;Korisnik&gt; k=make_shared&lt;Korisnik&gt; (*it-&gt;second);
                cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
                cout&lt;&lt;"Ime i prezime: "&lt;&lt;k-&gt;ime&lt;&lt;" "&lt;&lt;k-&gt;prezime&lt;&lt;endl;
                cout&lt;&lt;"Adresa: "&lt;&lt;k-&gt;adresa&lt;&lt;endl;
                cout&lt;&lt;"Broj telefona: "&lt;&lt;k-&gt;telefon&lt;&lt;endl;
                cout&lt;&lt;endl;
             }
        };

        void IzlistajKnjige() const
        {
             for (auto it(knjiga.begin()); it!=knjiga.end(); it++)
             {
                shared_ptr&lt;Knjiga&gt; k=make_shared&lt;Knjiga&gt; (*it-&gt;second);
                cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
                cout&lt;&lt;"Naslov: "&lt;&lt;k-&gt;DajNaslov()&lt;&lt;endl;
                cout&lt;&lt;"Pisac: "&lt;&lt;k-&gt;DajAutora()&lt;&lt;endl;
                cout&lt;&lt;"Zanr: "&lt;&lt;k-&gt;DajZanr()&lt;&lt;endl;
                cout&lt;&lt;"Godina izdavanja: "&lt;&lt;k-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
                if (k-&gt;DaLiJeZaduzena()==true)
                {
                     cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;k-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;k-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
                }
                cout&lt;&lt;endl;
             }
        };
        
        void ZaduziKnjigu(int evidencija, int clan)
        {
            try
            {
                auto it1(knjiga.find(evidencija));
                if (it1==knjiga.end()) throw logic_error ("Knjiga nije nadjena");
                
                else
                {
                    
                    auto it2(korisnik.find(clan));
                    if (it2==korisnik.end()) throw logic_error ("Korisnik nije nadjen");
                    
                    else
                    {
                        shared_ptr&lt;Knjiga&gt; k=make_shared&lt;Knjiga&gt; (*it1-&gt;second);
                        if (k-&gt;DaLiJeZaduzena()==true) throw logic_error ("Knjiga vec zaduzena");
                        
                        else
                        {
                            knjiga[evidencija]-&gt;DajKodKogaJe()=korisnik[clan].get();
                        }
                    }
                }
            }
            
            catch (logic_error izuzetak)
            {
                cout&lt;&lt;izuzetak.what();
            }
        };
        
        void RazduziKnjigu(int evidencija)
        {
            try
            {
                auto it(knjiga.find(evidencija));
                if (it==knjiga.end()) throw logic_error ("Knjiga nije nadjena");
                
                else
                {
                    shared_ptr&lt;Knjiga&gt; k=make_shared&lt;Knjiga&gt; (*it-&gt;second);
                    if (k-&gt;DaLiJeZaduzena()==false) throw logic_error ("Knjiga nije zaduzena");
                        
                    else
                    {
                        knjiga[evidencija]-&gt;DajKodKogaJe()=nullptr;
                    }
                }
            }
            
            
            catch (logic_error izuzetak)
            {
                cout&lt;&lt;izuzetak.what();
            }
        };
        
        void PrikaziZaduzenja(int clan)
        {
            try
            {
                int broj(0);
                
                auto it1(korisnik.find(clan));
                if (it1==korisnik.end()) throw logic_error ("Korisnik nije nadjen");
                
                else
                {
                    shared_ptr&lt;Korisnik&gt; kor=make_shared&lt;Korisnik&gt; (*it1-&gt;second);
                    
                    for (auto it(knjiga.begin()); it!=knjiga.end(); it++)
                    {
                        shared_ptr&lt;Knjiga&gt; k=make_shared&lt;Knjiga&gt; (*it-&gt;second);
                
                        if (k-&gt;DaLiJeZaduzena()==true)
                        {
                        
                            if (kor==k-&gt;DajKodKogaJe())
                            {
                                cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
                                cout&lt;&lt;"Naslov: "&lt;&lt;k-&gt;DajNaslov()&lt;&lt;endl;
                                cout&lt;&lt;"Pisac: "&lt;&lt;k-&gt;DajAutora()&lt;&lt;endl;
                                cout&lt;&lt;"Zanr: "&lt;&lt;k-&gt;DajZanr()&lt;&lt;endl;
                                cout&lt;&lt;"Godina izdavanja: "&lt;&lt;k-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
                                cout&lt;&lt;endl;
                                broj++;
                            }
                        }
                    }
                    
                    if (broj==0) 
                    {
                        cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
                    }
                }
            }
            
            catch (logic_error izuzetak)
            {
                cout&lt;&lt;izuzetak.what();
            }
        };
        
        ~Biblioteka() {};
    };


int main ()
{
    bool izlazak (false);
    int odabir;
    
    Biblioteka b;
    
try
{
    while (!izlazak)
    {
        cout&lt;&lt;"Odaberite jednu od sljedecih opcija: "&lt;&lt;endl;
        cout&lt;&lt;"1) Registriraj novog korisnika"&lt;&lt;endl;
        cout&lt;&lt;"2) Registriraj novu knjigu"&lt;&lt;endl;
        cout&lt;&lt;"3) Nadji nekog korisnika"&lt;&lt;endl;
</font>        cout&lt;&lt;"4) Nadji neku knjigu"&lt;&lt;endl;
        cout&lt;&lt;"5) Izlistaj korisnike"&lt;&lt;endl;
        cout&lt;&lt;"6) Izlistaj knjige"&lt;&lt;endl;
        cout&lt;&lt;"7) Zaduzi knjigu"&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match11-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

        cout&lt;&lt;"8) Razduzi knjigu"&lt;&lt;endl;
        cout&lt;&lt;"9) Prikazi zaduzenja korisnika"&lt;&lt;endl;
        cout&lt;&lt;"10) Izadji iz programa"&lt;&lt;endl;
        cin&gt;&gt;odabir;
        
        if (odabir==1)
        {  
            int broj;
            string ime, prezime, adresa, telefon;
            cout&lt;&lt;"Unesi clanski broj: ";
            cin&gt;&gt;broj;
            cout&lt;&lt;"Unesi ime: ";
            cin&gt;&gt;ime;
            cout&lt;&lt;"Unesi prezime: ";
            cin&gt;&gt;prezime;
            cin.ignore(10000,'\n');
            cout&lt;&lt;"Unesi adresu: ";
            getline(cin,adresa);
            cout&lt;&lt;"Unesi telefon: ";
            getline(cin,telefon);
            
            b.RegistrirajNovogKorisnika(broj, ime, prezime, adresa, telefon);
            cout&lt;&lt;endl;
        }
        
        if (odabir==2)
        {   
            int broj, izdavanje;
            string naslov, pisac, zanr;
            cout&lt;&lt;"Unesi evidencijski broj: ";
            cin&gt;&gt;broj;
            cin.ignore(10000,'\n');
            cout&lt;&lt;"Unesi naslov knjige: ";
            getline(cin,naslov);
            cout&lt;&lt;"Unesi ime pisca: ";
            getline(cin,pisac);
            cout&lt;&lt;"Unesi zanr: ";
            getline(cin,zanr);
            cout&lt;&lt;"Unesi godinu izdavanja: ";
            cin&gt;&gt;izdavanje;
            
            b.RegistrirajNovuKnjigu(broj, naslov, pisac, zanr, izdavanje);
            cout&lt;&lt;endl;
        }

        if (odabir==3)
        {
            int broj;
            
            cout&lt;&lt;"Unesi clanski broj: ";
            cin&gt;&gt;broj;
          
            Korisnik k(b.NadjiKorisnika(broj));
     
            cout&lt;&lt;"Ime i prezime: "&lt;&lt;k.ime&lt;&lt;" "&lt;&lt;k.prezime&lt;&lt;endl;
            cout&lt;&lt;"Adresa: "&lt;&lt;k.adresa&lt;&lt;endl;
            cout&lt;&lt;"Broj telefona: "&lt;&lt;k.telefon&lt;&lt;endl;
        }
        
        if (odabir==4)
        {
            int broj;
            
            cout&lt;&lt;"Unesi evidencijski broj: ";
            cin&gt;&gt;broj;
          
            Knjiga k(b.NadjiKnjigu(broj));
        
            cout&lt;&lt;"Naslov: "&lt;&lt;k.DajNaslov()&lt;&lt;endl;
            cout&lt;&lt;"Pisac: "&lt;&lt;k.DajAutora()&lt;&lt;endl;
            cout&lt;&lt;"Zanr: "&lt;&lt;k.DajZanr()&lt;&lt;endl;
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;k.DajGodinuIzdavanja()&lt;&lt;endl;
            if (k.DaLiJeZaduzena()==true)
            {
                cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;k.DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;k.DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
            }
        }
        
        if (odabir==5)
        {
            b.IzlistajKorisnike();
        }
        
        if (odabir==6)
        {
            b.IzlistajKnjige();
        }
     
        if (odabir==7)
        {
            int evidencija, clan;
            cout&lt;&lt;"Unesi evidencijski broj knjige: ";
            cin&gt;&gt;evidencija;
            cout&lt;&lt;"Unesi clanski broj korisnika: ";
            cin&gt;&gt;clan;
            b.ZaduziKnjigu(evidencija,clan);
        }
 
        if (odabir==8)
        {
            int evidencija;
            cout&lt;&lt;"Unesi evidencijski broj knjige:";
            cin&gt;&gt;evidencija;
            b.RazduziKnjigu(evidencija);
        }
        
        if (odabir==9)
        {
            int clan;
            cout&lt;&lt;"Unesi clanski broj korisnika: ";
            cin&gt;&gt;clan;
            b.PrikaziZaduzenja(clan);
        }
        
        if (odabir==10)
        {
            izlazak=true;
        }
    }
}

catch (logic_error izuzetak)
{
    cout&lt;&lt;izuzetak.what();
}

	return 0;
</font>}</pre>
</body>
</html>
