<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4057.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4057.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
using namespace std;

struct Korisnik
{
    string ime, prezime, adresa, telefon;
    Korisnik(string i, string p, string a, string t)
    {
        ime=i; prezime=p; adresa=a; telefon=t;
    }
    friend int poredi(Korisnik k2, Korisnik k1)
    {
        if(k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon==k2.telefon) return 1;
        else return 0;
    }
};

class Knjiga
{
    string naslov, autor, zanr;
    int god;
    Korisnik *pok;
public:
    Knjiga(string n, string a, string z, int g)
    {
        naslov=n;
        autor=a;
        zanr=z;
        god=g;
        pok=nullptr;
    }
    string DajNaslov() const
    {
        return naslov;
    }
    string DajAutora() const
    {
        return autor;
    }
    string DajZanr() const
    {
        return zanr;
    }
    int DajGodinuIzdavanja() const
    {
        return god;
    }
    void ZaduziKnjigu(Korisnik &amp;k)
    {
        pok=&amp;k;
    }
    void RazduziKnjigu()
    {
        pok=nullptr;
    }
    Korisnik *DajKodKogaJe()
    {
        return pok;
    }
    bool DaLiJeZaduzena()
    {
        if(pok==nullptr) return false;
        else return true;
    }
};

<a name="2"></a><font color="#0000FF"><a href="match697-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

class Biblioteka
{
    map&lt;int,shared_ptr&lt;Korisnik&gt;&gt; clanovi;
    map&lt;int,shared_ptr&lt;Knjiga&gt;&gt; libris;
public:
    Biblioteka() {};
    Biblioteka(Biblioteka &amp;z)
    {
        for(auto x: z.clanovi)
</font>        {
            int a=x.first;
            shared_ptr&lt;Korisnik&gt; p=make_shared&lt;Korisnik&gt;(*x.second);
            pair&lt;int, shared_ptr&lt;Korisnik&gt;&gt; pom;
            pom.first=a; pom.second=p;
            clanovi.insert(pom);
        }
        for(auto x: z.libris)
        {
            int a=x.first;
            shared_ptr&lt;Knjiga&gt; p=make_shared&lt;Knjiga&gt;(*x.second);
            pair&lt;int, shared_ptr&lt;Knjiga&gt;&gt; pom;
            pom.first=a; pom.second=p;
            libris.insert(pom);
        }
    }
    Biblioteka(Biblioteka &amp;&amp;z)
    {
        for(auto x: z.clanovi)
        {
            int a=x.first;
            shared_ptr&lt;Korisnik&gt; p=x.second;
            pair&lt;int, shared_ptr&lt;Korisnik&gt;&gt; pom;
            pom.first=a; pom.second=p;
            clanovi.insert(pom);
        }
        for(auto x: z.libris)
        {
            int a=x.first;
            shared_ptr&lt;Knjiga&gt; p=x.second;
            pair&lt;int, shared_ptr&lt;Knjiga&gt;&gt; pom;
            pom.first=a; pom.second=p;
            libris.insert(pom);
        }
    }
    Biblioteka &amp;operator =(Biblioteka &amp;z)
    {
        if(&amp;z!=this)
        {
<a name="6"></a><font color="#00FF00"><a href="match697-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            for(auto &amp;x: libris) x.second=nullptr;
            for(auto &amp;x: clanovi) x.second=nullptr;
            for(auto x: z.clanovi)
</font>            {
                int a=x.first;
            shared_ptr&lt;Korisnik&gt; p=make_shared&lt;Korisnik&gt;(*x.second);
            pair&lt;int, shared_ptr&lt;Korisnik&gt;&gt; pom;
            pom.first=a; pom.second=p;
            clanovi.insert(pom);
            }
            for(auto x: z.libris)
        {
            int a=x.first;
            shared_ptr&lt;Knjiga&gt; p=make_shared&lt;Knjiga&gt;(*x.second);
            pair&lt;int, shared_ptr&lt;Knjiga&gt;&gt; pom;
            pom.first=a; pom.second=p;
            libris.insert(pom);
        }
        }
        return *this;
    }
        Biblioteka &amp;operator = (Biblioteka &amp;&amp;z)
        {
            if(&amp;z!=this)
        {
<a name="7"></a><font color="#0000FF"><a href="match697-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            for(auto &amp;x: libris) x.second=nullptr;
            for(auto &amp;x: clanovi) x.second=nullptr;
            for(auto x: z.clanovi)
</font>        {
            int a=x.first;
            shared_ptr&lt;Korisnik&gt; p=x.second;
            pair&lt;int,shared_ptr&lt;Korisnik&gt;&gt; pom;
            pom.first=a; pom.second=p;
            clanovi.insert(pom);
        }
        for(auto x: z.libris)
        {
            int a=x.first;
            shared_ptr&lt;Knjiga&gt; p=x.second;
            pair&lt;int, shared_ptr&lt;Knjiga&gt;&gt; pom;
            pom.first=a; pom.second=p;
            libris.insert(pom);
        }
        }
        return *this;
    }
    void RegistrirajNovogKorisnika(int br, string im, string pr, string adr, string tel)
    {
        for(auto i: clanovi)
            if(br==i.first) throw logic_error("Korisnik vec postoji");
        pair&lt;int, shared_ptr&lt;Korisnik&gt;&gt; par;
        par.first=br; par.second=make_shared&lt;Korisnik&gt;(im,pr,adr,tel);
        clanovi.insert(par);
    }
    void RegistrirajNovuKnjigu(int br, string i, string au, string zan, int g)
    {
        for(auto i: libris)
            if(br==i.first) throw logic_error("Knjiga vec postoji");
        pair&lt;int, shared_ptr&lt;Knjiga&gt;&gt; par;
        par.first=br; par.second=make_shared&lt;Knjiga&gt;(i,au,zan,g);
        libris.insert(par);
    } 
<a name="5"></a><font color="#FF0000"><a href="match697-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    void PrikaziZaduzenja(int br)
    {
        bool nj=true;
        for(auto x: clanovi) if(x.first==br) nj=false;
        if(nj) throw logic_error("Korisnik nije nadjen");
        for(auto x: libris)
</font>        {
            if(poredi(*clanovi[br],*x.second-&gt;DajKodKogaJe())==1)
            {
<a name="3"></a><font color="#00FFFF"><a href="match697-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

              cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;endl;
              cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;endl;
              cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;endl;
</font>              cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;endl;
              cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl&lt;&lt;endl;
            }
        }
    }
    ~Biblioteka()
    {
        for(auto i: libris) i.second=nullptr;
        for(auto i: clanovi) i.second=nullptr;
    }
    Korisnik &amp;NadjiKorisnika(int br)
    {
        for(auto i: clanovi) if(i.first==br) return *i.second;
        throw logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu(int br)
    {
        for(auto i: libris) if(i.first==br) return *i.second;
        throw logic_error("Knjiga nije nadjena");
    }
    void RazduziKnjigu(int a)
    {
        bool nj=true;
        for(auto i: libris)
        {
            if(i.first==a)
            {
                nj=false;
                if(i.second-&gt;DajKodKogaJe()!=nullptr) throw logic_error("Knjiga vec zaduzena");
            }
        }
        if(nj==true) throw logic_error("Knjiga nije nadjena");
        libris[a]-&gt;RazduziKnjigu();
    }
    void IzlistajKnjige()
    {
        for(auto x:libris)
        {
<a name="4"></a><font color="#FF00FF"><a href="match697-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

          cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;endl;
          cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;endl;
          cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;endl;
</font><a name="1"></a><font color="#00FF00"><a href="match697-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

          cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;endl;
          cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
          if(x.second-&gt;DajKodKogaJe()!=nullptr)
          cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl&lt;&lt;endl;
</font>        }
    }
    void ZaduziKnjigu(int a, int b)
    {
        bool nj=true;
        for(auto i: libris)
        {
            if(i.first==a)
            {
                nj=false;
                if(i.second-&gt;DajKodKogaJe()!=nullptr) throw logic_error("Knjiga vec zaduzena");
            }
        }
        if(nj==true) throw logic_error("Knjiga nije nadjena");
        nj=true;
        for(auto i: clanovi)
            if(i.first==b) nj=false;
        if(nj==true) throw logic_error("Korisnik nije nadjen");
<a name="0"></a><font color="#FF0000"><a href="match697-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        libris[a]-&gt;ZaduziKnjigu(*clanovi[b]);
    }
    void IzlistajKorisnike()
    {
        for(auto x: clanovi)
        {
          cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;endl;
          cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;endl;
          cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;endl;
</font>          cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon&lt;&lt;endl;
          cout&lt;&lt;endl;
        }
    }
    
};

int main ()
{
	return 0;
}</pre>
</body>
</html>
