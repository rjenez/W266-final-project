<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5915.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5915.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, autor, zanr;
    int godina;
    Korisnik *zaduzena;
    public:
    Knjiga(std::string naslov_knjige, std::string ime_autora, std::string zanr_knjige, int godina_izdavanja);
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return autor; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina; }
    Korisnik *DajKodKogaJe() const { return zaduzena; }
    void ZaduziKnjigu(Korisnik &amp;korisnik) { zaduzena = &amp;korisnik; }
    void RazduziKnjigu() { zaduzena = nullptr; }
    bool DaLiJeZaduzena() const { return zaduzena != nullptr; }
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    Biblioteka() {};
    //~Biblioteka();
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon);
    void RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov, std::string autor, std::string zanr, int godina);
    Korisnik &amp;NadjiKorisnika (int clanski_broj) const;
    Knjiga &amp;NadjiKnjigu (int evidencijski_broj) const;
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
    void RazduziKnjigu(int evidencijski_broj);
    void PrikaziZaduzenja(int clanski_broj);
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka(Biblioteka &amp;&amp;b);
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
};

Knjiga::Knjiga(std::string naslov_knjige, std::string ime_autora, std::string zanr_knjige, int godina_izdavanja) {
    naslov = naslov_knjige;
    autor = ime_autora;
    zanr = zanr_knjige;
    godina = godina_izdavanja;
    zaduzena = nullptr;
}

/*
Biblioteka::~Biblioteka() {
    for(auto x : korisnici)
        delete x.second;
    for(auto x : knjige)
        delete x.second;
}
*/

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
    if(korisnici.find(clanski_broj) == korisnici.end()) {
        std::shared_ptr&lt;Korisnik&gt; p(new Korisnik);
        p-&gt;ime = ime;
        p-&gt;prezime = prezime;
        p-&gt;adresa = adresa;
        p-&gt;telefon = telefon;
        korisnici.insert(std::make_pair(clanski_broj, p));
    }
    else throw std::logic_error("Korisnik vec postoji");
}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov, std::string autor, std::string zanr, int godina) {
    if(knjige.find(evidencijski_broj) == knjige.end()) {
        std::shared_ptr&lt;Knjiga&gt; p(new Knjiga(naslov, autor, zanr, godina));
        knjige.insert(std::make_pair(evidencijski_broj, p));
    }
    else throw std::logic_error("Knjiga vec postoji");
}

Korisnik &amp;Biblioteka::NadjiKorisnika (int clanski_broj) const {
    auto it(korisnici.find(clanski_broj));
    if(it != korisnici.end()) return *(it-&gt;second);
    else throw std::logic_error("Korisnik nije nadjen");
}

Knjiga &amp;Biblioteka::NadjiKnjigu (int evidencijski_broj) const {
    auto it(knjige.find(evidencijski_broj));
    if(it != knjige.end()) return *(it-&gt;second);
<a name="2"></a><font color="#0000FF"><a href="match651-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    else throw std::logic_error("Knjiga nije nadjena");
}

void Biblioteka::IzlistajKorisnike() const {
    for(auto x : korisnici) {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; x.first &lt;&lt; "\n";
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (x.second)-&gt;ime &lt;&lt; " " &lt;&lt; (x.second)-&gt;prezime &lt;&lt; "\n";
        std::cout &lt;&lt; "Adresa: " &lt;&lt; (x.second)-&gt;adresa &lt;&lt; "\n";
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (x.second)-&gt;telefon &lt;&lt; "" &lt;&lt; std::endl &lt;&lt; std::endl;
</font>    }
}

<a name="0"></a><font color="#FF0000"><a href="match651-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

void Biblioteka::IzlistajKnjige() const {
    for(auto x : knjige) {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; "\n";
        std::cout &lt;&lt; "Naslov: " &lt;&lt; (x.second)-&gt;DajNaslov() &lt;&lt; "\n";
        std::cout &lt;&lt; "Pisac: " &lt;&lt; (x.second)-&gt;DajAutora() &lt;&lt; "\n";
        std::cout &lt;&lt; "Zanr: " &lt;&lt; (x.second)-&gt;DajZanr() &lt;&lt; "\n";
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (x.second)-&gt;DajGodinuIzdavanja() &lt;&lt; "\n";
        if((x.second)-&gt;DaLiJeZaduzena()) {
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; ((x.second)-&gt;DajKodKogaJe())-&gt;ime &lt;&lt; " " &lt;&lt; ((x.second)-&gt;DajKodKogaJe())-&gt;prezime;
</font>            std::cout &lt;&lt; std::endl &lt;&lt; std::endl;
        }
        else std::cout &lt;&lt; std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj) {
    auto it1(knjige.find(evidencijski_broj));
    if(it1 == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    auto it2(korisnici.find(clanski_broj));
    if(it2 == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    
    if((it1-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    else (it1-&gt;second)-&gt;ZaduziKnjigu(*(it2-&gt;second));
}

void Biblioteka::RazduziKnjigu(int evidencijski_broj) {
    auto it(knjige.find(evidencijski_broj));
    if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    if((it-&gt;second)-&gt;DaLiJeZaduzena()) (it-&gt;second)-&gt;RazduziKnjigu();
    else throw std::logic_error("Knjiga nije zaduzena");
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) {
    auto it(korisnici.find(clanski_broj));
    if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    bool ima_zaduzenja(false);
    for(auto x : knjige) {
<a name="1"></a><font color="#00FF00"><a href="match651-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        if(((x.second)-&gt;DajKodKogaJe()) == (it-&gt;second).get()) {
            ima_zaduzenja = true;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; "\n";
            std::cout &lt;&lt; "Naslov: " &lt;&lt; (x.second)-&gt;DajNaslov() &lt;&lt; "\n";
            std::cout &lt;&lt; "Pisac: " &lt;&lt; (x.second)-&gt;DajAutora() &lt;&lt; "\n";
            std::cout &lt;&lt; "Zanr: " &lt;&lt; (x.second)-&gt;DajZanr() &lt;&lt; "\n";
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (x.second)-&gt;DajGodinuIzdavanja() &lt;&lt; "\n\n";
        }
    }
    if(!ima_zaduzenja) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
</font>}

Biblioteka::Biblioteka(const Biblioteka &amp;b) : korisnici(b.korisnici), knjige(b.knjige) {
    auto it(b.korisnici.begin());
    for(auto x : korisnici) {
        x.second = std::shared_ptr&lt;Korisnik&gt;(new Korisnik);
        x.second-&gt;ime = it-&gt;second-&gt;ime;
        x.second-&gt;prezime = it-&gt;second-&gt;prezime;
        x.second-&gt;adresa = it-&gt;second-&gt;adresa;
        x.second-&gt;telefon = it-&gt;second-&gt;telefon;
        it++;
    }
    
    auto it2(b.knjige.begin());
    for(auto x : knjige) {
        x.second = std::shared_ptr&lt;Knjiga&gt;(new Knjiga(it2-&gt;second-&gt;DajNaslov(), it2-&gt;second-&gt;DajAutora(), it2-&gt;second-&gt;DajZanr(), it2-&gt;second-&gt;DajGodinuIzdavanja()));
        it2++;
    }
}

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b) : korisnici(b.korisnici), knjige(b.knjige) {
    for(auto x : b.korisnici) x.second = nullptr;
    for(auto x : b.knjige) x.second = nullptr;
}

Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b) {
    if(&amp;b != this) {
        knjige = b.knjige;
        korisnici = b.korisnici;
        
        auto it(b.korisnici.begin());
        for(auto x : korisnici) {
            x.second = std::shared_ptr&lt;Korisnik&gt;(new Korisnik);
            x.second-&gt;ime = it-&gt;second-&gt;ime;
            x.second-&gt;prezime = it-&gt;second-&gt;prezime;
            x.second-&gt;adresa = it-&gt;second-&gt;adresa;
            x.second-&gt;telefon = it-&gt;second-&gt;telefon;
            it++;
        }
    
        auto it2(b.knjige.begin());
        for(auto x : knjige) {
            x.second = std::shared_ptr&lt;Knjiga&gt;(new Knjiga(it2-&gt;second-&gt;DajNaslov(), it2-&gt;second-&gt;DajAutora(), it2-&gt;second-&gt;DajZanr(), it2-&gt;second-&gt;DajGodinuIzdavanja()));
            it2++;
        }
    }
    return *this;
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b) {
    if(&amp;b != this) {
        knjige = b.knjige;
        korisnici = b.korisnici;
        for(auto x : b.korisnici) x.second = nullptr;
        for(auto x : b.knjige) x.second = nullptr;
    }
    return *this;
}

int main ()
{
    Biblioteka gradska;
    for(;;) {
        std::cout &lt;&lt; "Izaberite opciju:\n";
        std::cout &lt;&lt; "1 - registriraj novog korisnika\n";
        std::cout &lt;&lt; "2 - registriraj novu knjigu\n";
        std::cout &lt;&lt; "3 - nadji korisnika\n";
        std::cout &lt;&lt; "4 - nadji knjigu\n";
        std::cout &lt;&lt; "5 - izlistaj korisnike\n";
        std::cout &lt;&lt; "6 - izlistaj knjige\n";
        std::cout &lt;&lt; "7 - zaduzi knjigu\n";
        std::cout &lt;&lt; "8 - razduzi knjigu\n";
        std::cout &lt;&lt; "9 - prikazi zaduzenja\n";
        std::cout &lt;&lt; "0 - izlaz\n\n";
        std::cout &lt;&lt; "Vas izbor je: ";
        int opcija;
        std::cin &gt;&gt; opcija;
        while(opcija &lt; 0 || opcija &gt; 9) {
            std::cout &lt;&lt; "Pogresna opcija!\nVas izbor je: ";
            std::cin &gt;&gt; opcija;
        }
        if(opcija == 1) {
            std::string ime, prezime, adresa, telefon;
            int clanski_broj;
            std::cout &lt;&lt; "\nUnesite clanski broj: ";
            std::cin &gt;&gt; clanski_broj;
            std::cin.get();
            std::cout &lt;&lt; "Unesite ime: ";
            std::getline(std::cin, ime);
            std::cout &lt;&lt; "Unesite prezime: ";
            std::getline(std::cin, prezime);
            std::cout &lt;&lt; "Unesite adresu: ";
            std::getline(std::cin, adresa);
            std::cout &lt;&lt; "Unesite telefon: ";
            std::getline(std::cin, telefon);
            try {
                gradska.RegistrirajNovogKorisnika(clanski_broj, ime, prezime, adresa, telefon);
                std::cout &lt;&lt; "\nUnijeli ste novog korisnika sa podacima:\n";
                std::cout &lt;&lt; "Clanski broj: " &lt;&lt; clanski_broj &lt;&lt; std::endl;
                std::cout &lt;&lt; "Ime: " &lt;&lt; ime &lt;&lt; std::endl;
                std::cout &lt;&lt; "Prezime: " &lt;&lt; prezime &lt;&lt; std::endl;
                std::cout &lt;&lt; "Adresa: " &lt;&lt; adresa &lt;&lt; std::endl;
                std::cout &lt;&lt; "Broj telefona: " &lt;&lt; telefon &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else if(opcija == 2) {
            std::string naslov, autor, zanr;
            int evidencijski_broj, godina;
            std::cout &lt;&lt; "\nUnesite evidencijski broj: ";
            std::cin &gt;&gt; evidencijski_broj;
            std::cin.get();
            std::cout &lt;&lt; "Unesite naslov: ";
            std::getline(std::cin, naslov);
            std::cout &lt;&lt; "Unesite autora: ";
            std::getline(std::cin, autor);
            std::cout &lt;&lt; "Unesite zanr: ";
            std::getline(std::cin, zanr);
            std::cout &lt;&lt; "Unesite godinu izdavanja: ";
            std::cin &gt;&gt; godina;
            try {
                gradska.RegistrirajNovuKnjigu(evidencijski_broj, naslov, autor, zanr, godina);
                std::cout &lt;&lt; "\nUnijeli ste novu knjigu sa podacima:\n";
                std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; evidencijski_broj &lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: " &lt;&lt; naslov &lt;&lt; std::endl;
                std::cout &lt;&lt; "Autor: " &lt;&lt; autor &lt;&lt; std::endl;
                std::cout &lt;&lt; "Zanr: " &lt;&lt; zanr &lt;&lt; std::endl;
                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; godina &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else if(opcija == 3) {
            int clanski_broj;
            std::cout &lt;&lt; "\nUnsite clanski broj korisnika kojeg zelite pronaci: ";
            std::cin &gt;&gt; clanski_broj;
            try {
                Korisnik p(gradska.NadjiKorisnika(clanski_broj));
                std::cout &lt;&lt; "\nPronasli ste korisnika sa podacima:\n";
                std::cout &lt;&lt; "Clanski broj: " &lt;&lt; clanski_broj &lt;&lt; std::endl;
                std::cout &lt;&lt; "Ime: " &lt;&lt; p.ime &lt;&lt; std::endl;
                std::cout &lt;&lt; "Prezime: " &lt;&lt; p.prezime &lt;&lt; std::endl;
                std::cout &lt;&lt; "Adresa: " &lt;&lt; p.adresa &lt;&lt; std::endl;
                std::cout &lt;&lt; "Broj telefona: " &lt;&lt; p.telefon &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else if(opcija == 4) {
            int evidencijski_broj;
            std::cout &lt;&lt; "\nUnsite evidencijski broj knjige koju zelite pronaci: ";
            std::cin &gt;&gt; evidencijski_broj;
            try {
                Knjiga p(gradska.NadjiKnjigu(evidencijski_broj));
                std::cout &lt;&lt; "\nPronasli ste knjigu sa podacima:\n";
                std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; evidencijski_broj &lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: " &lt;&lt; p.DajNaslov() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Autor: " &lt;&lt; p.DajAutora() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Zanr: " &lt;&lt; p.DajZanr() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; p.DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else if(opcija == 5) {
            std::cout &lt;&lt; "\nKorisnici biblioteke su: " &lt;&lt; std::endl &lt;&lt; std::endl;
            gradska.IzlistajKorisnike();
        }
        else if(opcija == 6) {
            std::cout &lt;&lt; "\nKnjige koje se nalaze u biblioteci su: " &lt;&lt; std::endl &lt;&lt; std::endl;
            gradska.IzlistajKnjige();
        }
        else if(opcija == 7) {
            int evidencijski_broj, clanski_broj;
            std::cout &lt;&lt; "\nUnesite evidencijski broj knjige koju zelite zaduziti: ";
            std::cin &gt;&gt; evidencijski_broj;
            std::cout &lt;&lt; "Unesite clanski broj korisnika kojem zaduzujete knjigu: ";
            std::cin &gt;&gt; clanski_broj;
            try {
                gradska.ZaduziKnjigu(evidencijski_broj, clanski_broj);
                std::cout &lt;&lt; "\nKnjigu sa evidencijskim brojem " &lt;&lt; evidencijski_broj &lt;&lt; " ste zaduzili korisniku sa clanskim brojem " &lt;&lt;
                clanski_broj &lt;&lt; "." &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else if(opcija == 8) {
            int evidencijski_broj;
            std::cout &lt;&lt; "\nUnesite evidencijski broj knjige koju zelite razduziti: ";
            std::cin &gt;&gt; evidencijski_broj;
            try {
                gradska.RazduziKnjigu(evidencijski_broj);
                std::cout &lt;&lt; "\nRazduzili ste knjigu sa evidencijskim brojem " &lt;&lt; evidencijski_broj &lt;&lt; "." &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else if(opcija == 9) {
            int clanski_broj;
            std::cout &lt;&lt; "\nUnesite clanski broj korisnika: ";
            std::cin &gt;&gt; clanski_broj;
            try {
                std::cout &lt;&lt; "\nKorisnik sa clanskim brojem " &lt;&lt; clanski_broj &lt;&lt; " je zaduzio sljedece knjige: " &lt;&lt; std::endl &lt;&lt; std::endl;
                gradska.PrikaziZaduzenja(clanski_broj);
                std::cout &lt;&lt; std::endl &lt;&lt; std::endl;
            }
            catch(std::logic_error izuzetak) {
                std::cout &lt;&lt; std::endl &lt;&lt; izuzetak.what() &lt;&lt; std::endl &lt;&lt; std::endl;
            }
        }
        else break;
    }
	return 0;
}</pre>
</body>
</html>
