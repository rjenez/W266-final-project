<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7425.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7425.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;

<a name="3"></a><font color="#00FFFF"><a href="match401-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

using namespace std;
struct Korisnik
{
	string ime, prezime, adresa, telefon;
	Korisnik (string i, string p, string a, string t)
	{
		ime=i;
		prezime=p;
		adresa=a;
		telefon=t;
</font>	}
<a name="4"></a><font color="#FF00FF"><a href="match401-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

	friend bool operator!=(Korisnik k1, Korisnik k2)
	{
	    if(k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon==k2.telefon) return true;
</font>	    return false;
	}
};

class Knjiga 
{
<a name="1"></a><font color="#00FF00"><a href="match401-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

	string naslov, ime_pisca, zanr;
	int god_izd;
	Korisnik *zaduzenje;
	public:
	Knjiga(string n, string ip, string z, int gi)
	{
		naslov=n;
		ime_pisca=ip;
		zanr=z;
		god_izd=gi;
		zaduzenje=nullptr;
		
	}
	string DajNaslov() const { return naslov; }
	string DajAutora() const { return ime_pisca; }
	string DajZanr() const { return zanr; }
	int DajGodinuIzdavanja() const { return god_izd; }
</font>	Korisnik* DajKodKogaJe() const { return zaduzenje; }
	void ZaduziKnjigu(Korisnik &amp;k) { zaduzenje=&amp;k; }
	void RazduziKnjigu() { zaduzenje=nullptr; }
	bool DaLiJeZaduzena() { if(zaduzenje!=nullptr) return true; return false; }
};

class Biblioteka
{
    map&lt;int, shared_ptr&lt;Korisnik&gt;&gt; m1;
    map&lt;int, shared_ptr&lt;Knjiga&gt;&gt; m2;
    public:
    Biblioteka (){};
    ~Biblioteka()
    {
        for(auto i:m1) i.second=nullptr;
        for(auto j:m2) j.second=nullptr;
    }
    Biblioteka(Biblioteka &amp;b)
    {
        for(auto i:b.m1)
            m1[i.first]=make_shared&lt;Korisnik&gt;(*i.second);
        for(auto i:b.m2)
            m2[i.first]=make_shared&lt;Knjiga&gt;(*i.second);
    }
    Biblioteka &amp;operator=(Biblioteka &amp;b)
    {
        for(auto i:m1) i.second=nullptr;
        for(auto j:m2) j.second=nullptr;
        for(auto i:b.m1)
            m1[i.first]=make_shared&lt;Korisnik&gt;(*i.second);
        for(auto i:b.m2)
            m2[i.first]=make_shared&lt;Knjiga&gt;(*i.second);
        return *this;
    }
    Biblioteka(Biblioteka &amp;&amp;b)
    {
        for(auto i:b.m1)
            m1[i.first]=i.second;
        for(auto i:b.m2)
            m2[i.first]=i.second;
    }
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b)
    {
        for(auto i:m1) i.second=nullptr;
        for(auto j:m2) j.second=nullptr;
        for(auto i:b.m1)
            m1[i.first]=i.second;
        for(auto i:b.m2)
            m2[i.first]=i.second;
<a name="7"></a><font color="#0000FF"><a href="match401-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        return *this;
    }
    void RegistrirajNovogKorisnika(int clanski, string i, string p, string a, string br_tel)
    {
        for(auto i:m1)
            if(i.first==clanski) throw logic_error("Korisnik vec postoji");
</font>        m1[clanski]=make_shared&lt;Korisnik&gt;(i, p, a, br_tel);
    }
    void RegistrirajNovuKnjigu(int br_knj, string n, string ip, string z, int gi)
    {
        for(auto i:m2)
            if(i.first==br_knj) throw logic_error("Knjiga vec postoji");
        m2[br_knj]=make_shared&lt;Knjiga&gt;(n, ip, z, gi);
    }
    Korisnik &amp;NadjiKorisnika(int cl_br)
    {
        for(auto i:m1)
            if(cl_br==i.first) return *i.second;
        throw logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu(int ev_br)
    {
        for(auto i:m2)
            if(ev_br==i.first) return *i.second;
        throw logic_error("Knjiga nije nadjena");
    }
    void IzlistajKorisnike()
    {
        for(auto x: m1)
        {
<a name="2"></a><font color="#0000FF"><a href="match401-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

          cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;endl;
          cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;endl;
          cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;endl;
</font>          cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon;
          cout&lt;&lt;endl&lt;&lt;endl;
        }
    }
    void IzlistajKnjige()
    {
        for(auto x:m2)
        {
<a name="5"></a><font color="#FF0000"><a href="match401-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

          cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;endl;
          cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;endl;
          cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;endl;
</font><a name="0"></a><font color="#FF0000"><a href="match401-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

          cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;endl;
          cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
          if(x.second-&gt;DajKodKogaJe()!=nullptr)
          cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl&lt;&lt;endl;
        }
    }
    void PrikaziZaduzenja(int br)
</font>    {
        bool cape=true;
        for(auto x: m1) if(x.first==br) cape=false;
        if(cape) throw logic_error("Korisnik nije nadjen");
        for(auto x: m2)
        {
            if(*m1[br]!=*x.second-&gt;DajKodKogaJe())
            {
<a name="6"></a><font color="#00FF00"><a href="match401-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

              cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;endl;
              cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;endl;
              cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;endl;
</font><a name="8"></a><font color="#00FFFF"><a href="match401-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

              cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;endl;
              cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl&lt;&lt;endl;
</font>            }
        }
    }
    void ZaduziKnjigu(int ev_br, int clan_br)
    {
        bool cape=true;
        for(auto i:m2)
        {
            if(i.first==ev_br) cape=false;
            if(i.first==ev_br &amp;&amp; i.second-&gt;DajKodKogaJe()!=nullptr) throw logic_error("Knjiga je vec zaduzena");
        }
        if(cape) throw logic_error("Knjiga nije nadjena");
        for(auto i:m1)
            if(i.first==clan_br) cape=true;
        if(!cape) throw logic_error("Korisnik nije nadjen");
        m2[ev_br]-&gt;ZaduziKnjigu(*m1[clan_br]);
    }
    void RazduziKnjigu(int x)
    {
        bool zile=true;
        for(auto i:m2)
        {
            if(i.first==x) zile=false;
            if(i.first==x &amp;&amp; i.second-&gt;DajKodKogaJe()!=nullptr) throw logic_error("Knjiga je vec zaduzena");
        }
        if(zile) throw logic_error("Knjiga nije nadjena");
        m2[x]-&gt;RazduziKnjigu();
    }
};
int main ()
{
	return 0;
}</pre>
</body>
</html>
