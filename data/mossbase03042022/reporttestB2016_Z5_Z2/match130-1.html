<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6913.cpp<p></p><pre>
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;memory&gt;

<a name="0"></a><font color="#FF0000"><a href="match130-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
    friend class Knjiga;
    friend class Biblioteka;
};

class Knjiga {
    std::string naslov;
    std::string pisac;
    int godina;
    std::string zanr;
    Korisnik* p;
    public:
    Knjiga (std::string n,std::string pi,std::string z,int g){
        naslov=n; pisac=pi; zanr=z; godina=g; p=nullptr;
    }
    std::string DajNaslov() const { return naslov; }
    std::string DajZanr () const { return zanr; }
    std::string DajAutora() const { return pisac; }
    int DajGodinuIzdavanja() const { return godina; }
    Korisnik* DajKodKogaJe() const { return p; }
    void ZaduziKnjigu(Korisnik &amp;k){ this-&gt;p=&amp;k; }
    void RazduziKnjigu(){ this-&gt;p=nullptr; }
    bool DaLiJeZaduzena() const {
        if(this-&gt;p==nullptr)
        return false;
        return true;
    }
    friend class Biblioteka;
};

class Biblioteka{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; Korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; Citabi;
    public:
    Biblioteka()=default;
   /* ~Biblioteka(){
        for(auto it=Korisnici.begin();it!=Korisnici.end();it++){
        auto p=it-&gt;second;
        delete p;
        }
        for(auto it=Citabi.begin();it!=Citabi.end();it++){
        auto p=it-&gt;second;
        delete p;
        }
    }*/
    Biblioteka(const Biblioteka &amp;b){
        for(auto it=b.Citabi.begin();it!=b.Citabi.end();it++){
            auto p=it-&gt;second;
            auto id=it-&gt;first;
            std::shared_ptr&lt;Knjiga&gt; k=std::make_shared&lt;Knjiga&gt;(p-&gt;naslov,p-&gt;pisac,p-&gt;zanr,p-&gt;godina);
            Citabi.insert(std::make_pair(id,k));
        }
        
          for(auto it=b.Korisnici.begin();it!=b.Korisnici.end();it++){
            auto p=it-&gt;second;
            auto id=it-&gt;first;
            Korisnik a;
            a.ime=p-&gt;ime;
            a.prezime=p-&gt;prezime;
            a.adresa=p-&gt;adresa;
            a.telefon=p-&gt;telefon;
            std::shared_ptr&lt;Korisnik&gt;j=std::make_shared&lt; Korisnik&gt;(a);
            Korisnici.insert(std::make_pair(id,j));
        }
    }
    Biblioteka &amp;operator=(Biblioteka b){
        std::swap(Korisnici, b.Korisnici);
        std::swap(Citabi, b.Citabi);
        return *this;
    }
    
    void RegistrirajNovogKorisnika(int broj,std::string im,std::string prez,std::string adr,std::string brtel){
        auto it=Korisnici.find(broj);
        if(it!=Korisnici.end()) throw std::logic_error("Korisnik vec postoji");
        auto k=std::make_shared &lt;Korisnik&gt;();
        k-&gt;ime=im;
        k-&gt;prezime=prez;
        k-&gt;adresa=adr;
        k-&gt;telefon=brtel;
        Korisnici.insert(std::make_pair(broj,k));
    }
    void RegistrirajNovuKnjigu(int broj,std::string nas,std::string pis,std::string zanr,int god){
        auto it=Citabi.find(broj);
        if(it!=Citabi.end()) throw std::logic_error("Knjiga vec postoji");
        auto c=std::make_shared&lt; Knjiga&gt;(nas,pis,zanr,god);
        Citabi.insert(std::make_pair(broj,c));
    }
  
    
    Korisnik &amp;NadjiKorisnika(int broj) const{
        auto it=Korisnici.find(broj);
        if(it==Korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        auto p=it-&gt;second;
        return *p;
    }
    Knjiga &amp;NadjiKnjigu(int broj) const {
        auto it=Citabi.find(broj);
        if(it==Citabi.end()) throw std::logic_error("Knjiga nije nadjena");
        auto p=it-&gt;second;
        return *p;
    }
    void IzlistajKorisnike(){
        for(auto it=Korisnici.begin();it!=Korisnici.end();it++){
        auto p=it-&gt;second;
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first&lt;&lt;std::endl;
        std::cout &lt;&lt; "Ime i prezime: "&lt;&lt;p-&gt;ime&lt;&lt;" "&lt;&lt;p-&gt;prezime &lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: "&lt;&lt;p-&gt;adresa &lt;&lt; std::endl;
         std::cout &lt;&lt; "Broj telefona: " &lt;&lt; p-&gt;telefon&lt;&lt; std::endl;
         std::cout&lt;&lt;std::endl;
        }
    }
    
    void IzlistajKnjige(){
        for(auto it=Citabi.begin();it!=Citabi.end();it++){
            auto pok=it-&gt;second;
            std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: "&lt;&lt;pok-&gt;naslov &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: "&lt;&lt;pok-&gt;pisac &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: "&lt;&lt;pok-&gt;zanr &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;pok-&gt;godina&lt;&lt;std::endl;
        if(pok-&gt;p!=nullptr)
            std::cout &lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;pok-&gt;p-&gt;ime&lt;&lt;" "&lt;&lt;pok-&gt;p-&gt;prezime&lt;&lt;std::endl;
            std::cout  &lt;&lt; std::endl;
        }
    }
    
     void PrikaziZaduzenja(int broj){
         auto it1=Korisnici.find(broj);
         bool knj(false);
  for(auto it=Citabi.begin();it!=Citabi.end();it++){
      auto pok=it-&gt;second;
      auto k=(it1-&gt;second).get();
      if (k==pok-&gt;p) {
          knj=true;
           std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: "&lt;&lt;pok-&gt;naslov &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: "&lt;&lt;pok-&gt;pisac &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: "&lt;&lt;pok-&gt;zanr &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;pok-&gt;godina&lt;&lt;std::endl;
      }
  }
       if(knj==false){
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!"&lt;&lt;std::endl;
        }
  }
    
    void ZaduziKnjigu(int knjiga,int citac){
        auto it1=Citabi.find(knjiga);
        if(it1==Citabi.end())
        throw std::logic_error("Knjiga nije nadjena");
        auto it2=Korisnici.find(citac);
        if(it2==Korisnici.end())
        throw std::logic_error("Korisnik nije nadjen");
        auto pok=it1-&gt;second;
        if(pok-&gt;p!=nullptr)
        throw std::logic_error("Knjiga je vec zaduzena");
        else{
        auto z((it2-&gt;second).get());
        pok-&gt;p=z;
        }
    }
    void RazduziKnjigu(int knjiga){
        auto it=Citabi.find (knjiga);
        if(it==Citabi.end())
        throw std::logic_error("Knjiga nije nadjena");
        auto pok=it-&gt;second;
        if(pok-&gt;p==nullptr)
        throw std::logic_error ("Knjiga nije zaduzena");
        else pok-&gt;p=nullptr;
    }
};
int main ()
{
    
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1,"Harun","Dzihana","Hendek 8","061060559");
    b.RegistrirajNovuKnjigu(1,"Harry Potter","J.K.Rowling","sci-fi",1997);
    {
        Biblioteka c=b;
        c.IzlistajKnjige();
    } 
    b.IzlistajKnjige();
</font>	return 0;
}</pre>
</body>
</html>
