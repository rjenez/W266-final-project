<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8329.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8329.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;memory&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik* korisnik;
    public:
        Knjiga(std::string naslov1, std::string ime_pisca1, std::string zanr1, int godina_izdavanja1){
            naslov=naslov1;
            ime_pisca=ime_pisca1;
            zanr=zanr1;
            godina_izdavanja=godina_izdavanja1;
            korisnik=nullptr;
        }
        std::string DajNaslov() const {
            return naslov;
        }
        std::string DajAutora() const {
            return ime_pisca;
        }
        std::string DajZanr() const {
            return zanr;
        }
        int DajGodinuIzdavanja() const {
            return godina_izdavanja;
        }
        void ZaduziKnjigu(Korisnik &amp;korisnik1){
            korisnik=&amp;korisnik1;
        }
        void RazduziKnjigu(){
            korisnik=nullptr;
        }
        bool DaLiJeZaduzena() const {
            if(korisnik != nullptr) return 1;
            return 0;
        }
        Korisnik* DajKodKogaJe() const {
            return korisnik;
        }
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
        Biblioteka() = default;
        
<a name="4"></a><font color="#FF00FF"><a href="match937-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

        Biblioteka(const Biblioteka &amp;biblioteka){
            korisnici = biblioteka.korisnici;
            knjige = biblioteka.knjige;
            for(auto it = korisnici.begin(); it!=korisnici.end(); it++){
                std::shared_ptr&lt;Korisnik&gt; k = std::make_shared&lt;Korisnik&gt;();
</font><a name="2"></a><font color="#0000FF"><a href="match937-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

                *k = *(it-&gt;second);
                it-&gt;second = k;
            }
            for(auto it = knjige.begin(); it!=knjige.end(); it++){
                it-&gt;second = std::make_shared&lt;Knjiga&gt;(*(it-&gt;second));
</font>            }
        }
        
        Biblioteka(Biblioteka &amp;&amp;biblioteka){
            korisnici = std::move(biblioteka.korisnici);
            knjige = std::move(biblioteka.knjige);
        }
        
        Biblioteka &amp;operator = (const Biblioteka &amp;biblioteka){
            korisnici = biblioteka.korisnici;
            knjige = biblioteka.knjige;
            for(auto it = korisnici.begin(); it!=korisnici.end(); it++){
<a name="0"></a><font color="#FF0000"><a href="match937-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

                std::shared_ptr &lt;Korisnik&gt; k = std::make_shared &lt;Korisnik&gt;();
                *k = *it-&gt;second;
                it-&gt;second = k;
            }
            for(auto it = knjige.begin(); it!=knjige.end(); it++){
                it-&gt;second = std::make_shared &lt;Knjiga&gt;(*(it-&gt;second));
            }
            return *this;
        }
        
        Biblioteka &amp;operator = (Biblioteka &amp;&amp;biblioteka){
</font><a name="6"></a><font color="#00FF00"><a href="match937-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            korisnici = std::move(biblioteka.korisnici);
            knjige = std::move(biblioteka.knjige);
            return *this;
        }
        
        void RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string telefon){
</font><a name="1"></a><font color="#00FF00"><a href="match937-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

            std::shared_ptr&lt;Korisnik&gt; k(std::make_shared &lt;Korisnik&gt;());
            Korisnik k1{ime, prezime, adresa, telefon};
            *k = k1;
</font>            if(korisnici.count(clanski)) {
                throw std::logic_error ("Korisnik vec postoji");
            }
            korisnici[clanski] = k;
        }
        
<a name="3"></a><font color="#00FFFF"><a href="match937-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        void RegistrirajNovuKnjigu(int broj, std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja){
            std::shared_ptr&lt;Knjiga&gt; k(std::make_shared &lt;Knjiga&gt;(naslov, ime_pisca, zanr, godina_izdavanja));
</font>            if(knjige.count(broj)) {
                throw std::logic_error ("Knjiga vec postoji");
            }
            knjige[broj] = k;
        }
        
        Korisnik &amp;NadjiKorisnika(int clanski) {
            if(!korisnici.count(clanski)) throw std::logic_error ("Korisnik nije nadjen");
            return *(korisnici[clanski]);
        }
        
        Knjiga &amp;NadjiKnjigu(int broj) {
            if(!knjige.count(broj)) throw std::logic_error ("Knjiga nije nadjena");
            return *(knjige[broj]);
        }
        
        void IzlistajKorisnike() const{
            for(auto x : korisnici){
                std::cout &lt;&lt; "Clanski broj: "&lt;&lt;x.first &lt;&lt; std::endl;
                std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; x.second-&gt;ime &lt;&lt; " "&lt;&lt; x.second-&gt;prezime &lt;&lt; std::endl;
                std::cout &lt;&lt; "Adresa: " &lt;&lt; x.second-&gt;adresa &lt;&lt; std::endl;
                std::cout &lt;&lt; "Broj telefona: " &lt;&lt; x.second-&gt;telefon &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }
        
        void IzlistajKnjige() const{
            for(auto x : knjige){
                std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: " &lt;&lt; x.second-&gt;DajNaslov() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Pisac: " &lt;&lt; x.second-&gt;DajAutora() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Zanr: " &lt;&lt; x.second-&gt;DajZanr() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; x.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                if(x.second-&gt;DaLiJeZaduzena()) std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; x.second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; x.second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }
        
        void ZaduziKnjigu(int broj, int clanski){
            if(!knjige.count(broj)) throw std::logic_error ("Knjiga nije nadjena");
            if(!korisnici.count(clanski)) throw std::logic_error ("Korisnik nije nadjen");
            if(knjige[broj]-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
            knjige[broj]-&gt;ZaduziKnjigu(*(korisnici[clanski]));
        }

        void RazduziKnjigu(int broj){
            if(!knjige.count(broj)) throw std::logic_error ("Knjiga nije nadjena");
            if(!knjige[broj]-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga nije zaduzena");
            knjige[broj]-&gt;RazduziKnjigu();
        }        
        
        void PrikaziZaduzenja(int clanski) {
            if(!korisnici.count(clanski)) throw std::logic_error ("Korisnik nije nadjen");
            bool zaduzena(false);
            for(auto x : knjige){
                if(x.second-&gt;DajKodKogaJe() == korisnici[clanski].get()) {
                    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Naslov: " &lt;&lt; x.second-&gt;DajNaslov() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Pisac: " &lt;&lt; x.second-&gt;DajAutora() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Zanr: " &lt;&lt; x.second-&gt;DajZanr() &lt;&lt; std::endl;
<a name="5"></a><font color="#FF0000"><a href="match937-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; x.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                    std::cout &lt;&lt; std::endl;
                    zaduzena = true;
                }
            }
            if(!zaduzena) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
        }
        
};




int main ()
</font>{
	return 0;
}</pre>
</body>
</html>
