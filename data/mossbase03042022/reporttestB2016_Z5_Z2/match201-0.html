<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4128.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4128.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
<a name="0"></a><font color="#FF0000"><a href="match201-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_50.gif"/></a>

struct Korisnik {
    std::string ime, prezime, adresa,telefon;
};
class Knjiga
{
    std::string naslov;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    //Korisnik *pok=nullptr;
    std::shared_ptr&lt;Korisnik&gt; pok=nullptr;
public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja):naslov(naslov),ime_pisca(ime_pisca),zanr(zanr),
        godina_izdavanja(godina_izdavanja) {
        pok=nullptr;
    }
    std::string DajNaslov() const {
        return naslov;
    };
    std::string DajZanr() const {
        return zanr;
    };
    std::string DajAutora() const {
        return ime_pisca;
    };
    int DajGodinuIzdavanja() const {
        return godina_izdavanja;
    };
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const {
        return pok;
    };
    void ZaduziKnjigu(Korisnik &amp;k) {
        pok=std::make_shared&lt;Korisnik&gt;(k);
    }
    void RazduziKnjigu() {
        pok=nullptr;
    }
    bool DaLiJeZaduzena() {
        if(pok==nullptr) return false;
        return true;
    }
};

class Biblioteka
{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; mapa_korisnika;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; mapa_knjiga;
public:
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
        Korisnik k{ime, prezime,adresa,telefon};
        std::shared_ptr&lt;Korisnik&gt; k1(std::make_shared&lt;Korisnik&gt;(k));
        for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++)  {
            if(it-&gt;first==clanski_broj) throw std::logic_error ("Korisnik vec postoji");
        }
        mapa_korisnika.insert(std::make_pair(clanski_broj,k1));
    }
    void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string ime_pisca,std::string zanr, int godina_izdavanja) {
        //Knjiga *k=new Knjiga (naslov,ime_pisca,zanr,godina_izdavanja);
        std::shared_ptr&lt;Knjiga&gt; k(std::make_shared&lt;Knjiga &gt; (naslov,ime_pisca,zanr,godina_izdavanja));
        for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++)  {
            if(it-&gt;first==broj_knjige) throw std::logic_error ("Knjiga vec postoji");
        }
        mapa_knjiga.insert(std::make_pair(broj_knjige,k));
    }
    Korisnik&amp; NadjiKorisnika(int clanski_broj) {
        for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++) {
            if(clanski_broj==it-&gt;first) return *it-&gt;second;
        }
        throw std::logic_error ("Korisnik nije najen.");

    }
    Knjiga&amp; NadjiKnjigu(int broj) {
        for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++) {
            if(broj==it-&gt;first) return *(it-&gt;second);
        }
        throw std::logic_error ("Knjiga nije nadjena.");

    }
    void IzlistajKorisnike () {
        for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++) {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match201-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    void IzlistajKnjige () {
        for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++) {
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match201-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

            if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    void ZaduziKnjigu(int broj_knjige, int broj_korisnika) {
        bool ima=false;
        auto it1=mapa_knjiga.begin();
        for( it1=mapa_knjiga.begin(); it1!=mapa_knjiga.end(); it1++) {

            if(it1-&gt;first==broj_knjige)  {
                ima=true;
                break;
            }

        }
        if(ima==false) throw std::logic_error ("Knjiga nije nadjena");
        bool ima1=false;
        auto it=mapa_korisnika.begin();
        for( it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++) {

            if(it-&gt;first==broj_korisnika) {
                ima1=true;
                break;
            }

        }
        if(ima1==false) throw std::logic_error ("Korisnik nije nadjen");
        if(it1-&gt;second-&gt;DaLiJeZaduzena()==false) it1-&gt;second-&gt;ZaduziKnjigu(*(it-&gt;second));
        else throw std::logic_error("Knjiga je vec zaduzena");
    }
    void RazduziKnjigu(int broj_knjige) {
        bool ima=false;
        auto it1=mapa_knjiga.begin();
        for( it1=mapa_knjiga.begin(); it1!=mapa_knjiga.end(); it1++) {

            if(it1-&gt;first==broj_knjige)  {
                ima=true;
                break;
            }

        }
        if(ima==false) throw std::logic_error ("Knjiga nije nadjena");
        if(it1-&gt;second-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
        it1-&gt;second-&gt;RazduziKnjigu();
    }
    
};



int main ()
</font>{
    

    return 0;
}</pre>
</body>
</html>
