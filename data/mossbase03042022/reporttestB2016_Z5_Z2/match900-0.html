<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3009.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3009.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
struct Korisnik{
  std::string ime,prezime,adresa,telefon;  
};
class Knjiga{
    std::string naslov,ime_pisca,zanr;
    int god_izdavanja;
    Korisnik* zaduzenje=nullptr;
    public:
    Knjiga(std::string n,std::string i_p,std::string z,int g){
        naslov=n;
        ime_pisca=i_p;
        zanr=z;
        god_izdavanja=g;
    }
    std::string DajNaslov()const{
        return naslov;
    }
    std::string DajAutora()const{
        return ime_pisca;
    }
    std::string DajZanr()const{
        return zanr;
    }
    int DajGodinuIzdavanja()const{
        return god_izdavanja;
    }
    Korisnik* DajKodKogaJe()const{
        return zaduzenje;
    }
    void ZaduziKnjigu(Korisnik &amp;k){
        //std::cout&lt;&lt;k.prezime;
        zaduzenje=&amp;k;
    }
    void RazduziKnjigu(){
        zaduzenje=0;
    }
    bool DaLiJeZaduzena()const{
        return zaduzenje!=nullptr;
    }
};
class Biblioteka{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt;korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt;knjige;
    public:
    Biblioteka(){}
//~Biblioteka();
Biblioteka(const Biblioteka &amp;b);
Biblioteka &amp;operator =(const Biblioteka &amp;b);
void RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa,std::string broj_telefona);
void RegistrirajNovuKnjigu(int ev_broj,std::string nas,std::string im_pr,std::string zan,int god);
Korisnik &amp;NadjiKorisnika(int clanski_broj);
Knjiga &amp;NadjiKnjigu(int ev_broj);
void IzlistajKorisnike()const;
void IzlistajKnjige()const;
void ZaduziKnjigu(int ev_broj,int clanski_broj);
void RazduziKnjigu(int ev_broj);
void PrikaziZaduzenja(int clanski_broj);

};
/*Biblioteka::~Biblioteka(){
    for(auto  it=korisnici.begin();it!=korisnici.end();it++){
        delete it-&gt;second;
    }
    for(auto it=knjige.begin();it!=knjige.end();it++){
        delete it-&gt;second;
    }
}*/
Biblioteka::Biblioteka(const Biblioteka &amp;b){
    //korisnici=b.korisnici;
    //knjige=b.knjige;
    for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++){
        std::shared_ptr&lt;Korisnik&gt;k(new Korisnik);
        k-&gt;ime=it-&gt;second-&gt;ime;
        k-&gt;prezime=it-&gt;second-&gt;prezime;
        k-&gt;adresa=it-&gt;second-&gt;adresa;
        k-&gt;telefon=it-&gt;second-&gt;telefon;
        Biblioteka::korisnici.insert(std::make_pair(it-&gt;first,k));
    }
    for(auto it=b.knjige.begin();it!=knjige.end();it++){
<a name="5"></a><font color="#FF0000"><a href="match900-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::shared_ptr&lt;Knjiga &gt;k(std::make_shared&lt;Knjiga&gt;(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()));
</font>        k-&gt;Knjiga::ZaduziKnjigu(*(it-&gt;second-&gt;DajKodKogaJe()));
        Biblioteka::knjige.insert(std::make_pair(it-&gt;first,k));
    }
}
Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b){
    if(&amp;b==this) return *this;
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
         it-&gt;second=nullptr;
        korisnici.erase(it);
    }
    for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++){
        std::shared_ptr&lt;Korisnik &gt;k(new Korisnik);
        k-&gt;ime=it-&gt;second-&gt;ime;
        k-&gt;prezime=it-&gt;second-&gt;prezime;
        k-&gt;adresa=it-&gt;second-&gt;adresa;
        k-&gt;telefon=it-&gt;second-&gt;telefon;
        Biblioteka::korisnici.insert(std::make_pair(it-&gt;first,k));
        //it-&gt;second=nullptr;
    }
    for(auto it=knjige.begin();it!=knjige.end();it++){
         it-&gt;second=nullptr;
        knjige.erase(it);
    }
    for(auto it=b.knjige.begin();it!=b.knjige.end();it++){
<a name="6"></a><font color="#00FF00"><a href="match900-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        std::shared_ptr&lt;Knjiga &gt;k(std::make_shared&lt;Knjiga&gt;(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()));
</font>        k-&gt;Knjiga::ZaduziKnjigu(*(it-&gt;second-&gt;DajKodKogaJe()));
        Biblioteka::knjige.insert(std::make_pair(it-&gt;first,k));
        //delete it-&gt;second;
    }
    return *this;
}
<a name="4"></a><font color="#FF00FF"><a href="match900-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa,std::string broj_telefona){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
</font>        if(clanski_broj==it-&gt;first)throw std::logic_error("Korisnik vec postoji");
    }
    std::shared_ptr&lt;Korisnik &gt;k(new Korisnik);
        k-&gt;ime=ime;
        k-&gt;prezime=prezime;
        k-&gt;adresa=adresa;
        k-&gt;telefon=broj_telefona;
<a name="1"></a><font color="#00FF00"><a href="match900-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        Biblioteka::korisnici.insert(std::make_pair(clanski_broj,k));
}
void Biblioteka::RegistrirajNovuKnjigu(int ev_broj,std::string nas,std::string im_pr,std::string zan,int god){
    for(auto it=knjige.begin();it!=knjige.end();it++){
</font>        if(ev_broj==it-&gt;first)throw std::logic_error("Knjiga vec postoji");
    }
    std::shared_ptr&lt;Knjiga &gt;k(std::make_shared&lt;Knjiga&gt;(nas,im_pr,zan,god));
        Biblioteka::knjige.insert(std::make_pair(ev_broj,k));
}
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
        if(clanski_broj==it-&gt;first)return *(it-&gt;second);
    }
    throw std::logic_error("Korisnik nije nadjen");
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj){
    for(auto it=knjige.begin();it!=knjige.end();it++){
        if(ev_broj==it-&gt;first)return *(it-&gt;second);
    }
    throw std::logic_error("Knjiga nije nadjena");
}
void Biblioteka::IzlistajKorisnike()const{
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige()const{
    for(auto it=knjige.begin();it!=knjige.end();it++){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()){
            std::cout&lt;&lt;"Zaduzena kod korisnika: "
            &lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
        }
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int ev_broj,int clanski_broj){
    try{
        Knjiga k=NadjiKnjigu(ev_broj);
        //std::cout&lt;&lt;k.DajAutora()&lt;&lt;std::endl;
        try{
        Korisnik r=NadjiKorisnika(clanski_broj);
        //std::cout&lt;&lt;r.ime&lt;&lt;std::endl;
        if(k.DaLiJeZaduzena())throw std::logic_error("Knjiga vec zaduzena");
        else{
            for(auto it1=knjige.begin();it1!=knjige.end();it1++){
                if(it1-&gt;first==ev_broj){
                    for(auto it=korisnici.begin();it!=korisnici.end();it++){
                        if(it-&gt;first==clanski_broj){
                            it1-&gt;second-&gt;ZaduziKnjigu(*(it-&gt;second));
                        }
                    }
                }
            }
        }
    }
    catch(std::logic_error e){
        throw;
    }
    }
    catch(std::logic_error e){
        throw;
    }
    
}
void Biblioteka::RazduziKnjigu(int ev_broj){
    try{
        Knjiga k=NadjiKnjigu(ev_broj);
        if(k.DaLiJeZaduzena()==false)throw std::logic_error("Knjiga nije zaduzena");
        else {
            for(auto it=knjige.begin();it!=knjige.end();it++){
                if(it-&gt;first==ev_broj)
                it-&gt;second-&gt;RazduziKnjigu();
            }
        }
    }
    catch(std::logic_error e){
        throw;
    }
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj){
    try{
        int i=0;
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            if(it-&gt;first==clanski_broj){
                for(auto it1=knjige.begin();it1!=knjige.end();it1++){
                    if(it-&gt;second-&gt;ime == it1-&gt;second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; it-&gt;second-&gt;prezime == it1-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &amp;&amp; it-&gt;second-&gt;adresa == it1-&gt;second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; it-&gt;second-&gt;telefon == it1-&gt;second-&gt;DajKodKogaJe()-&gt;telefon) {
                        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it1-&gt;first&lt;&lt;std::endl;
                        std::cout&lt;&lt;"Naslov: "&lt;&lt;it1-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;it1-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;it1-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it1-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
        i++;
                    }
                }
            }
        }
        if(i==0)throw std::logic_error("Nema zaduzenja za tog korisnika!");
    }
    catch(std::logic_error e){
        std::cout&lt;&lt;e.what();
    }
}

int main ()
{
    Biblioteka b;
    int x;
    std::cout&lt;&lt;"&gt;&gt;&gt; GLAVNI MENI &lt;&lt;&lt;"&lt;&lt;std::endl
    &lt;&lt;"1 Registruj novog korisnika"&lt;&lt;std::endl
    &lt;&lt;"2 Registruj novu knjigu"&lt;&lt;std::endl
    &lt;&lt;"3 Zaduzi knjigu"&lt;&lt;std::endl
    &lt;&lt;"4 Razduzi knjigu"&lt;&lt;std::endl
    &lt;&lt;"5 Izlistaj korsnike"&lt;&lt;std::endl
    &lt;&lt;"6 Izlistaj knjige"&lt;&lt;std::endl
    &lt;&lt;"7 Prikazi zaduzenja za zeljenog korisnika"&lt;&lt;std::endl
    &lt;&lt;"0 KRAJ"&lt;&lt;std::endl;
    do{
        std::cout&lt;&lt;"Unesi komandu: ";
        std::cin&gt;&gt;x;
        if(x==1){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; REGISTRACIJA NOVOG KORISNIKA &lt;&lt;&lt;"&lt;&lt;std::endl;
            int clanski_broj;
            std::cout&lt;&lt;"Unesi clanski broj: ";
            std::cin&gt;&gt;clanski_broj;
            std::cin.ignore(100000,'\n');
            std::cin.clear();
            std::string ime,prezime,adresa,telefon;
            std::cout&lt;&lt;"Unesi ime: ";
            std::getline(std::cin,ime);
            std::cout&lt;&lt;"Unesi prezime: ";
            std::getline(std::cin,prezime);
            std::cout&lt;&lt;"Unesi adresu: ";
<a name="2"></a><font color="#0000FF"><a href="match900-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::getline(std::cin,adresa);
            std::cout&lt;&lt;"Unesi telefon: ";
            std::getline(std::cin,telefon);
            b.RegistrirajNovogKorisnika(clanski_broj,ime,prezime,adresa,telefon);
            std::cout&lt;&lt;"KORISNIK JE REGISTROVAN"&lt;&lt;std::endl;
</font>        }
        else if(x==2){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; REGISTRACIJA NOVE KNJIGE &lt;&lt;&lt;"&lt;&lt;std::endl;
            int ev_broj,god_izdavanja;
            std::string naslov,ime_pisca,zanr;
            std::cout&lt;&lt;"Unesi evidencijski broj: ";
            std::cin&gt;&gt;ev_broj;
            std::cin.ignore(10000,'\n');
            std::cin.clear();
            std::cout&lt;&lt;"Unesi naslov knjige: ";
            std::getline(std::cin,naslov);
            std::cout&lt;&lt;"Unesi ime i prezime pisca: ";
<a name="0"></a><font color="#FF0000"><a href="match900-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            std::getline(std::cin,ime_pisca);
            std::cout&lt;&lt;"Unesi zanr: ";
            std::getline(std::cin,zanr);
            std::cout&lt;&lt;"Unesi godinu izdavanja: ";
            std::cin&gt;&gt;god_izdavanja;
            b.RegistrirajNovuKnjigu(ev_broj,naslov,ime_pisca,zanr,god_izdavanja);
            std::cout&lt;&lt;"KNJIGA JE REGISTROVANA"&lt;&lt;std::endl;
</font>        }
        else if(x==3){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; ZADUZENJE KNJIGE &lt;&lt;&lt;"&lt;&lt;std::endl;
            int ev_broj,clanski_broj;
<a name="3"></a><font color="#00FFFF"><a href="match900-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            std::cout&lt;&lt;"Unesi evidencijski broj knjige: ";
            std::cin&gt;&gt;ev_broj;
            std::cout&lt;&lt;"Unesi clanski broj korisnika: ";
            std::cin&gt;&gt;clanski_broj;
            b.ZaduziKnjigu(ev_broj,clanski_broj);
            std::cout&lt;&lt;"FILM JE ZADUZEN"&lt;&lt;std::endl;
</font>        }
        else if(x==4){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; RAZDUZENJE KNJIGE &lt;&lt;&lt;"&lt;&lt;std::endl;
            int ev_broj;
            std::cout&lt;&lt;"Unesi evidencijski broj knjige: ";
            std::cin&gt;&gt;ev_broj;
            b.RazduziKnjigu(ev_broj);
            std::cout&lt;&lt;"KNJIGA RAZDUZENA"&lt;&lt;std::endl;
        }
        else if(x==5){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; KORISNICI &lt;&lt;&lt;"&lt;&lt;std::endl;
            b.IzlistajKorisnike();
            std::cout&lt;&lt;"KORISNICI IZLISTANI"&lt;&lt;std::endl;
        }
        else if(x==6){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; KNJIGE &lt;&lt;&lt;"&lt;&lt;std::endl;
            b.IzlistajKnjige();
            std::cout&lt;&lt;"KNJIGE IZLISTANE"&lt;&lt;std::endl;
        }
        else if(x==7){
            std::cout&lt;&lt;std::endl&lt;&lt;"&gt;&gt;&gt; PRIKAZ ZADUZENJA KORISNIKA &lt;&lt;&lt;&lt;"&lt;&lt;std::endl;
            int korisnik;
            std::cout&lt;&lt;"Unesi clanski broj korisnika: ";
            std::cin&gt;&gt;korisnik;
            std::cout&lt;&lt;"Korisnik: "&lt;&lt;std::endl;
            b.PrikaziZaduzenja(korisnik);
            std::cout&lt;&lt;"PRIKAZ ZADUZENJA"&lt;&lt;std::endl;
        }
        else if(x==0)std::cout&lt;&lt;"Dovidjenja!";
        else std::cout&lt;&lt;"Neispravna komanda";
    }while(x!=0);
	return 0;
}</pre>
</body>
</html>
