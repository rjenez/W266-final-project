<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6007.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student1302.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match70-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise

#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt; 
#include &lt;memory&gt;
struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
    Korisnik(std::string im, std::string prez, std::string adr, std::string tele){
        ime = im;
        prezime = prez;
        adresa = adr;
        telefon = tele;
    }
    Korisnik (Korisnik &amp;k){
        this-&gt;ime = k.ime;
        this-&gt;prezime = k.prezime;
        this-&gt;adresa = k.adresa;
        this-&gt;telefon = k.telefon;
    }
    /*friend const bool &amp;operator == (const Korisnik &amp;k1, const Korisnik &amp;k2){
        if(k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon == k2.telefon)
            return true;
        return false;
    }*/
};
void IspisiKorisnika (Korisnik &amp;k){
    std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;k.ime&lt;&lt;" "&lt;&lt;k.prezime&lt;&lt;std::endl;
    std::cout&lt;&lt;"Adresa: "&lt;&lt;k.adresa&lt;&lt;std::endl&lt;&lt;"Broj telefona: "&lt;&lt;k.telefon&lt;&lt;std::endl;
}
class Knjiga {
    private: 
        std::string Naslov, Ime_pisca, Zanr;
        int Godina_izdavanja;
        Korisnik *p = nullptr;
    public:
        Knjiga(std::string naslov, std::string  autor, std::string zanr, int godina) :Naslov(naslov), Ime_pisca(autor), Zanr(zanr){
            Naslov = naslov;
            Ime_pisca = autor;
            Zanr = zanr;
            Godina_izdavanja = godina;
            p = nullptr;
        }
        Knjiga &amp;operator =(Knjiga &amp;k){
            if(&amp;k== this) return *this;
            Naslov = k.DajNaslov();
            Ime_pisca = k.DajAutora();
            Zanr = k.DajZanr();
            Godina_izdavanja = k.DajGodinuIzdavanja();
            Korisnik *k1 = new Korisnik(*(k.DajKodKogaJe()));
            p = k1;
            return *this;
        }
        std::string DajNaslov(){ return Naslov;}
        std::string DajAutora(){ return Ime_pisca;}
        std::string DajZanr() { return Zanr;}
        int DajGodinuIzdavanja(){ return Godina_izdavanja;}
        Korisnik *DajKodKogaJe(){ return p;}
        void ZaduziKnjigu(Korisnik &amp;k){ p=&amp;k;}
        void RazduziKnjigu() { p = nullptr;}
        bool DaLiJeZaduzena(){
            if(p==nullptr)  return false;
            else return true;
        }
};
void IspisiKnjigu(Knjiga &amp;k){
    std::cout&lt;&lt;"Naslov: "&lt;&lt;k.DajNaslov()&lt;&lt;std::endl;
    std::cout&lt;&lt;"Pisac: "&lt;&lt;k.DajAutora()&lt;&lt;std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match70-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_65.gif"/></a>

    std::cout&lt;&lt;"Zanr: "&lt;&lt;k.DajZanr()&lt;&lt;std::endl;
    std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;k.DajGodinuIzdavanja()&lt;&lt;std::endl;
}
class Biblioteka {
    private:
        std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
        std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    
        ~Biblioteka() {
        auto it1 = korisnici.begin();
        while(it1!=korisnici.end()) {
            it1-&gt;second=nullptr; 
            it1++;
        }
        auto it2 = knjige.begin();
        while(it2!=knjige.end()) {
            it2-&gt;second=nullptr;
            it2++;
        }
        }
        
        Biblioteka &amp;operator = (const Biblioteka &amp;b1) {
            if(&amp;b1==this)    
                return *this;
            auto it1 = b1.korisnici.begin();
            if(korisnici.size() != 0)
            korisnici.erase(korisnici.begin(), korisnici.end());
            if(knjige.size() !=0)
            knjige.erase(knjige.begin(),knjige.end());
            //auto it2 = korisnici.begin();
            while(it1!=b1.korisnici.end()){
                int sifra = it1-&gt;first;
                Korisnik p(it1-&gt;second-&gt;ime,it1-&gt;second-&gt;prezime,it1-&gt;second-&gt;adresa, it1-&gt;second-&gt;telefon);
                std::shared_ptr&lt;Korisnik&gt; k = std::make_shared&lt;Korisnik&gt;(p);
                korisnici.insert(std::make_pair(sifra, k));
                it1++;
            }
            auto it3 = b1.knjige.begin();
            while(it3 != b1.knjige.end()) {
                auto it4 = korisnici.begin();
                int sifra = it3-&gt;first;
                auto k = std::make_shared&lt;Knjiga&gt;(it3-&gt;second-&gt;DajNaslov(),it3-&gt;second-&gt;DajAutora(),it3-&gt;second-&gt;DajZanr(),it3-&gt;second-&gt;DajGodinuIzdavanja());
                while(it4!=korisnici.end()){
                    if(k-&gt;DaLiJeZaduzena() == true)
                    if((it4-&gt;second)-&gt;ime == k-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; (it4-&gt;second)-&gt;prezime ==k-&gt;DajKodKogaJe()-&gt;prezime  &amp;&amp; (it4-&gt;second)-&gt;adresa == k-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; (it4-&gt;second)-&gt;telefon == k-&gt;DajKodKogaJe()-&gt;telefon) 
                    k-&gt;ZaduziKnjigu(*(it4-&gt;second));
                    it4++;
                }
                knjige.insert(std::make_pair(sifra,k));
                it3++;
            }
            return *this;
        }
        void RegistrirajNovogKorisnika (int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
            Korisnik p(ime,prezime,adresa,telefon);
            if (korisnici.find(clanski_broj) == korisnici.end()){
                std::shared_ptr&lt;Korisnik&gt; k = std::make_shared&lt;Korisnik&gt;(p);
                k-&gt;ime=ime;
                k-&gt;prezime=prezime; 
                k-&gt;adresa=adresa; 
                k-&gt;telefon=telefon;
                korisnici.insert(std::make_pair(clanski_broj,k));
                //korisnici.insert(std::pair&lt;int, Korisnik*&gt;(clanski_broj,k));
            }
            else{
                throw std::logic_error("Korisnik vec postoji");
            }
        }
        void RegistrirajNovuKnjigu (int evidencijski_broj, std::string naslov, std::string ime_pisca, std::string zanr, int godina){
            if(knjige.find(evidencijski_broj) == knjige.end()){
                auto k = std::make_shared&lt;Knjiga&gt;(naslov, ime_pisca, zanr, godina);
                knjige.insert(std::make_pair(evidencijski_broj,k));
            }
            else{
                throw std::logic_error("Knjiga vec postoji");
            }
        }
        Korisnik &amp;NadjiKorisnika (int clanski_broj){
            auto it = korisnici.begin();
            it = korisnici.find(clanski_broj);
            if(it==korisnici.end())
                throw std::logic_error("Korisnik nije nadjen");
            else return *korisnici.find(clanski_broj)-&gt;second;
        }
        Knjiga &amp;NadjiKnjigu (int evidencijski_broj){
            auto it = knjige.begin();
            it = knjige.find(evidencijski_broj);
            if(it == knjige.end()) throw std::logic_error("Korisnik nije nadjen");
            else return *knjige.find(evidencijski_broj)-&gt;second;
        }
        void IzlistajKorisnike(){
            auto it = korisnici.begin();
            while(it!=korisnici.end()){
                std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                IspisiKorisnika(*it-&gt;second);
                it++;
                std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
            }
        }
        void IzlistajKnjige () const{
            auto it = knjige.begin();
            while (it!=knjige.end()){
                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                IspisiKnjigu(*it-&gt;second);
                if(((*it).second)-&gt;DaLiJeZaduzena() == true){
                    std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;((*it).second)-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;((*it).second)-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
                }
                it++;
                std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
            }
        }
        void ZaduziKnjigu(int evidencijski_broj, int clanski_broj){
            auto it1 = knjige.find(evidencijski_broj);
            auto it2 = korisnici.find(clanski_broj);
            if(it1==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
            else if(it2==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
            else if(((*it1).second)-&gt;DaLiJeZaduzena()==true) throw std::logic_error("Knjiga vec zaduzena");
            else 
                ((*it1).second)-&gt;ZaduziKnjigu(*(it2-&gt;second));
        }
        void RazduziKnjigu(int evidencijski_broj){
            auto it1 = knjige.find(evidencijski_broj);
            if(it1==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
            else if (((*it1).second)-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
            else ((*it1).second)-&gt;RazduziKnjigu();
        }
      void PrikaziZaduzenja(int clanski_broj) const {
            auto i = korisnici.find(clanski_broj);
    if(i == korisnici.end())
        throw std::domain_error("Korisnik nije nadjen");
    
    bool ima = false;
    for(auto j : knjige)
    {
        if(j.second-&gt;DajKodKogaJe() != nullptr &amp;&amp; i-&gt;second-&gt;ime == j.second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; i-&gt;second-&gt;prezime == j.second-&gt;DajKodKogaJe()-&gt;prezime
            &amp;&amp; i-&gt;second-&gt;adresa == j.second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; i-&gt;second-&gt;telefon == j.second-&gt;DajKodKogaJe()-&gt;telefon);
        {
            ima = true;
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; j.first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; j.second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; j.second-&gt;DajAutora() &lt;&lt; std::endl;
</font><a name="2"></a><font color="#0000FF"><a href="match70-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

            std::cout &lt;&lt; "Zanr: " &lt;&lt; j.second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; j.second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
        }
    }
    if(ima == false)
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
}
};
int main ()
{
   Biblioteka b = Biblioteka();
   b.RegistrirajNovogKorisnika(5, "Ilma", "Spahic", "Malta 1", "061741743");
  b.RegistrirajNovogKorisnika(4,"Ilm", "Spahi", "Malta", "061741743");
   b.RegistrirajNovuKnjigu(3,"Proces", "Kafka", "Roman", 1999);
   b.ZaduziKnjigu(3,5);
  b.PrikaziZaduzenja(5);
  b.RazduziKnjigu(3);
  //b.ZaduziKnjigu(3,5);
  b.PrikaziZaduzenja(4);
</font>  //b1.PrikaziZaduzenja(5);
   return 0;
}
</pre>
</body>
</html>
