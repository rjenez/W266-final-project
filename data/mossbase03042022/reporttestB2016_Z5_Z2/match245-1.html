<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2664.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6255.cpp<p></p><pre>
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;stdexcept&gt;
#include&lt;map&gt;
#include&lt;memory&gt;
using namespace std;

struct Korisnik{
    string ime,prezime,adresa,telefon;
};

class Knjiga{
    string naslov;
    string pisac;
    string zanr;
    int godina_izdavanja;
    shared_ptr&lt;Korisnik&gt;zaduzenje;
    public:
    Knjiga(string n,string p,string z, int g):
    zaduzenje(nullptr){ 
<a name="1"></a><font color="#00FF00"><a href="match245-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

        naslov=n; pisac=p; zanr=z; godina_izdavanja=g; }
    string DajNaslov()const{ return naslov; }
    string DajAutora()const{ return pisac; }
    string DajZanr()const{ return zanr; }
    int DajGodinuIzdavanja() const{ return godina_izdavanja; }
    shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const{ return zaduzenje; }
    void ZaduziKnjigu(Korisnik &amp;k){ 
        try{
        shared_ptr&lt;Korisnik&gt;p(new Korisnik);
        p-&gt;ime=k.ime;
        p-&gt;prezime=k.prezime;
        p-&gt;adresa=k.adresa;
        p-&gt;telefon=k.telefon;
        zaduzenje=move(p);}
        catch(...) {throw;}
        }
    void RazduziKnjigu(){ zaduzenje=nullptr; }
    bool DaLiJeZaduzena(){ if(zaduzenje==nullptr) return false; return true; } 
</font> };

class Biblioteka{
    map&lt;int,Korisnik*&gt;korisnici; //kljuc: clanski broj korisnika
    map&lt;int,Knjiga*&gt;knjige; //kljuc: evidencijski broj knjige
    public:
    Biblioteka(){} //konstruktor bez parametara
    Biblioteka(const Biblioteka &amp;b); //kopirajuci konstruktor
    //Biblioteka &amp;operator=(const Biblioteka &amp;b); //kopirajuci operator dodjele
    //Biblioteka(Biblioteka &amp;&amp;b); //pomjerajuci konstruktor
    //Biblioteka &amp;operator =(Biblioteka &amp;&amp;b); //pomjerajuci operator dodjele
<a name="2"></a><font color="#0000FF"><a href="match245-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    ~Biblioteka(); //destruktor
    void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu(int broj_knjige, string naslov, string pisac, string zanr, int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
    void IzlistajKorisnike()const;
    void IzlistajKnjige()const;
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
</font>    void RazduziKnjigu(int evidencijski_broj);
    void PrikaziZaduzenja(int clanski_broj)const;
    
};

//kopirajuci konstruktor
Biblioteka::Biblioteka(const Biblioteka &amp;b){
    for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++) korisnici[it-&gt;first]=new Korisnik{it-&gt;second-&gt;ime,it-&gt;second-&gt;prezime,it-&gt;second-&gt;adresa,it-&gt;second-&gt;telefon};
<a name="6"></a><font color="#00FF00"><a href="match245-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    for(auto it=b.knjige.begin();it!=b.knjige.end();it++) knjige[it-&gt;first]=new Knjiga{it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()};
} 

//destruktor
Biblioteka::~Biblioteka(){
</font>    for(auto it=korisnici.begin();it!=korisnici.end();it++) delete it-&gt;second; 
    for(auto it=knjige.begin();it!=knjige.end();it++) delete it-&gt;second;
}

<a name="4"></a><font color="#FF00FF"><a href="match245-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){ if(clanski_broj==it-&gt;first) throw logic_error("Korisnik vec postoji"); }
</font>    Korisnik *novi(new Korisnik); 
    novi-&gt;ime=ime; novi-&gt;prezime=prezime; novi-&gt;adresa=adresa; novi-&gt;telefon=telefon;
<a name="3"></a><font color="#00FFFF"><a href="match245-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    korisnici.insert(make_pair(clanski_broj,novi));
}

void Biblioteka::RegistrirajNovuKnjigu(int broj_knjige, string naslov, string ime_pisca, string zanr, int godina_izdavanja){
    for(auto it=knjige.begin();it!=knjige.end();it++) if(broj_knjige==it-&gt;first) throw logic_error("Knjiga vec postoji");
</font>    Knjiga *nova=new Knjiga(naslov,ime_pisca,zanr,godina_izdavanja);
    knjige.insert(make_pair(broj_knjige,nova));
}

<a name="7"></a><font color="#0000FF"><a href="match245-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){ if(it-&gt;first==clanski_broj) return *(it-&gt;second); }
</font>    throw logic_error("Korisnik nije nadjen"); 
}

<a name="8"></a><font color="#00FFFF"><a href="match245-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj){
    for(auto it=knjige.begin();it!=knjige.end();it++){ if(it-&gt;first==evidencijski_broj) return *(it-&gt;second); } 
</font><a name="0"></a><font color="#FF0000"><a href="match245-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

    throw logic_error("Knjiga nije nadjena"); 
}

void Biblioteka::IzlistajKorisnike()const{
     for(auto it=korisnici.begin();it!=korisnici.end();it++){
         cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
         cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
         cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
         cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
         cout&lt;&lt;endl;
     }
}

void Biblioteka::IzlistajKnjige()const{
    for(auto it=knjige.begin();it!=knjige.end();it++){
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
</font>        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="5"></a><font color="#FF0000"><a href="match245-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()==true)
</font>            cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
    }
    cout&lt;&lt;endl;
}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj){
     auto it3=knjige.begin();
     for(;it3!=knjige.end();it3++){
     if(it3-&gt;second-&gt;DaLiJeZaduzena()==true &amp;&amp; it3-&gt;first==evidencijski_broj) throw logic_error("Knjiga vec zaduzena"); }
    { auto it2=knjige.begin();
     while(it2!=knjige.end()){ if(it2-&gt;first==evidencijski_broj) break; else it2++; } 
     if(it2==knjige.end()) {throw logic_error("Knjiga nije nadjena"); }
 }   
 { auto it2=korisnici.begin();
     while(it2!=korisnici.end()){ if(it2-&gt;first==clanski_broj) break; else it2++; } 
     if(it2==korisnici.end()) {throw logic_error("Korisnik nije nadjen"); }
 } 
 //vrsi registraciju da je navedena knjiga zaduzena kod navedenog korisnika
 for(auto it1=knjige.begin();it1!=knjige.end();it1++){
     if(it1-&gt;first==evidencijski_broj) {
          for(auto it=korisnici.begin();it!=korisnici.end();it++) { if(it-&gt;first==clanski_broj) it1-&gt;second-&gt;Knjiga::ZaduziKnjigu(*(it-&gt;second)); break; } }
}
}

void Biblioteka::RazduziKnjigu(int evidencijski_broj){
    { auto it2=knjige.begin();
     while(it2!=knjige.end()){ if(it2-&gt;first==evidencijski_broj) break; else it2++; } 
     if(it2==knjige.end()) {throw logic_error("Knjiga nije nadjena"); }
    }
    auto it=knjige.begin();
    for(;it!=knjige.end();it++) 
         if(it-&gt;second-&gt;DaLiJeZaduzena()==false){ throw logic_error("Knjiga nije zaduzena"); }
        //registrira da knjiga nije vise zaduzena
        for(auto it=knjige.begin();it!=knjige.end();it++){ if(it-&gt;first==evidencijski_broj) it-&gt;second-&gt;RazduziKnjigu(); break;}
}


void Biblioteka::PrikaziZaduzenja(int clanski_broj)const{
   /* auto it=knjige.begin();
    for(;it!=knjige.end();it++){
    if(it-&gt;second-&gt;DaLiJeZaduzena()==false) cout&lt;&lt;"Nema zaduzenja za tog korisnika!"; } */
    for(auto it=korisnici.begin();it!=korisnici.end();it++){ if(it-&gt;first!=clanski_broj) throw logic_error("Korisnik nije nadjen"); }
    for(auto it=knjige.begin();it!=knjige.end();it++){
        cout&lt;&lt;"Evidencijski broj "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="9"></a><font color="#FF00FF"><a href="match245-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        cout&lt;&lt;"Zanr "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        cout&lt;&lt;endl;
</font>    }
}


int main(){

    return 0;
}
</pre>
</body>
</html>
