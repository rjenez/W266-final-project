<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9097.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4425.cpp<p></p><pre>
#include &lt;iostream&gt; 
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

//prekopiran Z1 i vršene tražene izmjene

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *zaduzio; //nullptr = nije zadužena
public:
    Knjiga (std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), 
            godina_izdavanja(godina_izdavanja), zaduzio(nullptr) {};
    std::string DajNaslov() const {return naslov;}
    std::string DajAutora() const {return ime_pisca;}
    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdavanja;}
    //Korisnik DajKodKogaJe() const {return *zaduzio;}
    Korisnik* DajKodKogaJe() const {return zaduzio;}
    void ZaduziKnjigu (Korisnik &amp;korisnik) {zaduzio = &amp;korisnik;}
    void RazduziKnjigu() {zaduzio = nullptr;}
<a name="4"></a><font color="#FF00FF"><a href="match902-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    bool DaLiJeZaduzena() {if (!zaduzio) return false; return true;}
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; users;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; books;
</font>public:
    //Upravljački elementi
    Biblioteka() {};
    Biblioteka (const Biblioteka &amp;biblioteka) {
        std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; kopija_users;
        auto it_korisnik((biblioteka.users).begin());
        while (it_korisnik != (biblioteka.users).end()) {
            kopija_users.insert(std::make_pair(it_korisnik-&gt;first, std::make_shared&lt;Korisnik&gt;(Korisnik(*(it_korisnik-&gt;second)))));
            it_korisnik++;
        }
        std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; kopija_books;
        auto it_knjiga((biblioteka.books).begin());
        while (it_knjiga != (biblioteka.books).end()) {
            kopija_books.insert(std::make_pair(it_knjiga-&gt;first, std::make_shared&lt;Knjiga&gt;(Knjiga(*(it_knjiga-&gt;second)))));
            it_knjiga++;
        }
        
        auto it1(users.begin()); 
        while (it1 != users.end()) {
            it1-&gt;second = nullptr;
            it1++;
        }
        auto it2(books.begin()); 
        while (it2 != books.end()) {
            it2-&gt;second = nullptr;
            it2++;
        }
        
        users.empty(); users = kopija_users;
        books.empty(); books = kopija_books;
    }
    Biblioteka (Biblioteka &amp;&amp;biblioteka) {
        auto it1(users.begin());
        while (it1 != users.end()) {
            it1-&gt;second = nullptr;
            it1++;
        }
        auto it2(books.begin());
        while (it2 != books.end()) {
            it2-&gt;second = nullptr;
            it2++;
        }
        users = biblioteka.users;
        books = biblioteka.books;
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;biblioteka) {
        if (&amp;biblioteka != this) {
            std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; kopija_users;
            auto it_korisnik((biblioteka.users).begin());
            while (it_korisnik != (biblioteka.users).end()) {
                kopija_users.insert(std::make_pair(it_korisnik-&gt;first, std::make_shared&lt;Korisnik&gt;(Korisnik(*(it_korisnik-&gt;second)))));
                it_korisnik++;
            }
            std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; kopija_books;
            auto it_knjiga((biblioteka.books).begin());
            while (it_knjiga != (biblioteka.books).end()) {
                kopija_books.insert(std::make_pair(it_knjiga-&gt;first, std::make_shared&lt;Knjiga&gt;(Knjiga(*(it_knjiga-&gt;second)))));
                it_knjiga++;
            }
            auto it1(users.begin());
            while (it1 != users.end()) {
                it1-&gt;second = nullptr;
                it1++;
            }
            auto it2(books.begin());
            while (it2 != books.end()) {
                it2-&gt;second = nullptr;
                it2++;
            }
            users.empty(); users = kopija_users;
            books.empty(); books = kopija_books;
        }
        return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;biblioteka) {
        if (&amp;biblioteka != this) {
            auto it1(users.begin());
            while (it1 != users.end()) {
                it1-&gt;second = nullptr;
                it1++;
            }
            auto it2(books.begin());
            while (it2 != books.end()) {
                it2-&gt;second = nullptr;
                it2++;
            }
<a name="2"></a><font color="#0000FF"><a href="match902-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            users = biblioteka.users;
            books = biblioteka.books;
        }
        return *this;
    }
    
    //Metode
    void RegistrirajNovogKorisnika (int clanski_broj_korisnika, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona) {
        auto it(users.find(clanski_broj_korisnika));
        if (it != users.end()) throw std::logic_error("Korisnik vec postoji");
</font>        auto novi(std::make_shared&lt;Korisnik&gt;(Korisnik{ime, prezime, adresa, broj_telefona}));
        users.insert(std::make_pair(clanski_broj_korisnika, novi));
    }
<a name="3"></a><font color="#00FFFF"><a href="match902-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    void RegistrirajNovuKnjigu (int evidencijski_broj_knjige, std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja) {
        auto it(books.find(evidencijski_broj_knjige));
        if (it != books.end()) throw std::logic_error("Knjiga vec postoji");
        auto nova(std::make_shared&lt;Knjiga&gt;(Knjiga(naslov, ime_pisca, zanr, godina_izdavanja)));
</font>        books.insert(std::make_pair(evidencijski_broj_knjige, nova));
    }
<a name="1"></a><font color="#00FF00"><a href="match902-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    Korisnik&amp; NadjiKorisnika (int clanski_broj_korisnika) const {
        auto it(users.find(clanski_broj_korisnika));
        if (it == users.end()) throw std::logic_error("Korisnik nije nadjen");
        return *(it-&gt;second);
    }
    Knjiga&amp; NadjiKnjigu (int evidencijski_broj_knjige) const {
        auto it(books.find(evidencijski_broj_knjige));
        if (it == books.end()) throw std::logic_error("Knjiga nije nadjena");
        return *(it-&gt;second);
</font>    }
    void IzlistajKorisnike() const {
        auto korisnik(users.begin());
        while (korisnik != users.end()) {
            std::cout &lt;&lt; "Clanski broj: " &lt;&lt; korisnik-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (*(korisnik-&gt;second)).ime &lt;&lt; " " &lt;&lt; (*(korisnik-&gt;second)).prezime &lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: " &lt;&lt; (*(korisnik-&gt;second)).adresa &lt;&lt; std::endl;
            std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (*(korisnik-&gt;second)).telefon &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
            korisnik++;
        }
    }
    void IzlistajKnjige() const {
        auto knjiga(books.begin());
        while (knjiga != books.end()) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; knjiga-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; (knjiga-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; (knjiga-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; (knjiga-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (knjiga-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            if ((knjiga-&gt;second)-&gt;DaLiJeZaduzena()) 
                std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; (*((knjiga-&gt;second)-&gt;DajKodKogaJe())).ime &lt;&lt; " " &lt;&lt; (*((knjiga-&gt;second)-&gt;DajKodKogaJe())).prezime &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
            knjiga++;
        }
    }
    void ZaduziKnjigu (int evidencijski_broj_knjige, int clanski_broj_korisnika) { //const?
        auto it_knjiga(books.find(evidencijski_broj_knjige));
        if (it_knjiga == books.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it_korisnik(users.find(clanski_broj_korisnika));
<a name="0"></a><font color="#FF0000"><a href="match902-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

        if (it_korisnik == users.end()) throw std::logic_error("Korisnik nije nadjen");
        if ((it_knjiga-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        (it_knjiga-&gt;second)-&gt;ZaduziKnjigu(*(it_korisnik-&gt;second));
    }
    void RazduziKnjigu (int evidencijski_broj_knjige) { //const?
        auto it(books.find(evidencijski_broj_knjige));
        if (it == books.end()) throw std::logic_error("Knjiga nije nadjena");
        if (!(it-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        (it-&gt;second)-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja (int clanski_broj_korisnika) const {
        auto it(users.find(clanski_broj_korisnika));
        if (it == users.end()) throw std::logic_error("Korisnik nije nadjen");
</font>        Korisnik renter = *(it-&gt;second);
        auto it_knjiga(books.begin());
        int count(0);
        while (it_knjiga != books.end()) {
            if ((*(it_knjiga-&gt;second)).DaLiJeZaduzena()) {
                if ((*(*(it_knjiga-&gt;second)).DajKodKogaJe()).ime     == renter.ime       &amp;&amp; 
                    (*(*(it_knjiga-&gt;second)).DajKodKogaJe()).prezime == renter.prezime   &amp;&amp; 
                    (*(*(it_knjiga-&gt;second)).DajKodKogaJe()).adresa  == renter.adresa    &amp;&amp; 
                    (*(*(it_knjiga-&gt;second)).DajKodKogaJe()).telefon == renter.telefon) {
                    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it_knjiga-&gt;first &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Naslov: " &lt;&lt; (it_knjiga-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Pisac: " &lt;&lt; (it_knjiga-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Zanr: " &lt;&lt; (it_knjiga-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
                    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it_knjiga-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                    std::cout &lt;&lt; std::endl;
                    count++;
                }
            }
            it_knjiga++;
        }
        if (count == 0) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
    }
};

int main () {
    Biblioteka b1;
    b1.RegistrirajNovogKorisnika(1234, "Denin", "Mehanovic", "Gradacacka 5", "0603004770");
    b1.RegistrirajNovogKorisnika(2345, "Sejma", "Kudic", "Gradacacka 4", "062428114");
    b1.RegistrirajNovuKnjigu(0001, "Knjiga1", "Autor1", "Zanr1", 2000);
    b1.ZaduziKnjigu(0001, 2345);
    Biblioteka b2;
    b2.RegistrirajNovogKorisnika(3456, "Elma", "Dzaferovic", "Gradacacka 4", "062428114");
    b2.RegistrirajNovuKnjigu(0002, "Knjiga2", "Autor2", "Zanr2", 2000);
    std::cout &lt;&lt; "PRIJE================================== " &lt;&lt; std::endl;
    b2.IzlistajKorisnike();
    b2.IzlistajKnjige();
    b2 = b1;
    std::cout &lt;&lt; "POSLIJE=================================\n" &lt;&lt; "b1: " &lt;&lt; std::endl;
    b1.IzlistajKnjige();
    b1.IzlistajKorisnike();
    std::cout &lt;&lt; std::endl &lt;&lt; "b2: " &lt;&lt; std::endl;
    b2.IzlistajKnjige();
    b2.IzlistajKorisnike();
    std::cout &lt;&lt; "WHATEVS==================================\n";
    b2.PrikaziZaduzenja(1234);
	return 0;
}</pre>
</body>
</html>
