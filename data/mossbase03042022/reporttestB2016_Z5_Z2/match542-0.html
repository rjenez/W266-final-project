<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9979.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9979.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik {
  std::string ime, prezime, adresa, telefon;
};

class Knjiga {
  std::string naslov, pisac, zanr;
  int godina;
  Korisnik *zaduzenje;
public:
  Knjiga(std::string naslov, std::string pisac, std::string zanr, int godina) :
    naslov(naslov), pisac(pisac), zanr(zanr), godina(godina), zaduzenje(nullptr) {}
  std::string DajNaslov() const { return naslov; }
  std::string DajAutora() const { return pisac; }
  std::string DajZanr() const { return zanr; }
  int DajGodinuIzdavanja() const { return godina; }
  Korisnik *DajKodKogaJe() const { return zaduzenje; }
  void ZaduziKnjigu(Korisnik &amp;ko) { zaduzenje = &amp;ko; }
  void RazduziKnjigu() { zaduzenje = nullptr; }
<a name="6"></a><font color="#00FF00"><a href="match542-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

  bool DaLiJeZaduzena() const { return zaduzenje != nullptr; }
};

class Biblioteka {
  std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
  std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
</font>public:
  Biblioteka() = default;
  Biblioteka(const Biblioteka &amp;b);
  Biblioteka(Biblioteka &amp;&amp;b) = default;
  Biblioteka &amp;operator =(Biblioteka b);
  void RegistrirajNovogKorisnika(int clanski_broj, std::string ime,
    std::string prezime, std::string adresa, std::string telefon);
  void RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov,
    std::string pisac, std::string zanr, int godina);
  Korisnik &amp;NadjiKorisnika(int clanski_broj);
  const Korisnik &amp;NadjiKorisnika(int clanski_broj) const;
  Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
  const Knjiga &amp;NadjiKnjigu(int evidencijski_broj) const;
  void IzlistajKorisnike() const;
  void IzlistajKnjige() const;
  void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
  void RazduziKnjigu(int evidencijski_broj);
  void PrikaziZaduzenja(int clanski_broj) const;
};

Biblioteka::Biblioteka(const Biblioteka &amp;b) {
  for(auto par : b.korisnici) korisnici[par.first] = std::make_shared&lt;Korisnik&gt;(*par.second);
  for(auto par : b.knjige) knjige[par.first] = std::make_shared&lt;Knjiga&gt;(*par.second);
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka b) {
  std::swap(korisnici, b.korisnici); std::swap(knjige, b.knjige);
  return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime,
  std::string prezime, std::string adresa, std::string telefon) {
    if(korisnici.count(clanski_broj) != 0)
      throw std::logic_error("Korisnik vec postoji");
    Korisnik k{ime, prezime, adresa, telefon};
    korisnici[clanski_broj] = std::make_shared&lt;Korisnik&gt;(k);
}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj, std::string naslov,
  std::string pisac, std::string zanr, int godina) {
    if(knjige.count(evidencijski_broj) != 0)
      throw std::logic_error("Knjiga vec postoji");
    knjige[evidencijski_broj] = std::make_shared&lt;Knjiga&gt;(naslov, pisac, zanr,godina);
  }

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) {
  auto it(korisnici.find(clanski_broj));
  if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  return *(it-&gt;second);
}

const Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) const {
  auto it(korisnici.find(clanski_broj));
  if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
<a name="7"></a><font color="#0000FF"><a href="match542-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

  return *(it-&gt;second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj) {
  auto it(knjige.find(evidencijski_broj));
  if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
</font>  return *(it-&gt;second);
}

const Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj) const {
  auto it(knjige.find(evidencijski_broj));
  if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  return *(it-&gt;second);
}

void Biblioteka::IzlistajKorisnike() const {
  auto it(korisnici.begin());
  while(it != korisnici.end()) {
<a name="4"></a><font color="#FF00FF"><a href="match542-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl
      &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl
      &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl
</font>      &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
    it++;
    if(it != korisnici.end()) std::cout &lt;&lt; std::endl;
  }
}

void Biblioteka::IzlistajKnjige() const {
  auto it(knjige.begin());
  while(it != knjige.end()) {
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl
      &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl
      &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl
<a name="5"></a><font color="#FF0000"><a href="match542-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

      &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl
      &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
    if(it-&gt;second-&gt;DajKodKogaJe())
</font>      std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime
        &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
    it++;
    if(it != knjige.end()) std::cout &lt;&lt; std::endl;
  }
}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj) {
  auto it_knjige(knjige.find(evidencijski_broj));
  if(it_knjige == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  auto it_korisnik(korisnici.find(clanski_broj));
  if(it_korisnik == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  if(it_knjige-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
  it_knjige-&gt;second-&gt;ZaduziKnjigu(*it_korisnik-&gt;second);
}

void Biblioteka::RazduziKnjigu(int evidencijski_broj) {
  auto it_knjige(knjige.find(evidencijski_broj));
  if(it_knjige == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  if(!it_knjige-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
  it_knjige-&gt;second-&gt;RazduziKnjigu();
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) const {
  auto it1(korisnici.find(clanski_broj));
  if(it1 == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  auto it2(knjige.begin());
  bool ima_zaduzenja(false);
  while(it2 != knjige.end()) {
    if(it2-&gt;second-&gt;DajKodKogaJe() == (it1-&gt;second).get()) {
      if(ima_zaduzenja) std::cout &lt;&lt; std::endl;
      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it2-&gt;first &lt;&lt; std::endl
        &lt;&lt; "Naslov: " &lt;&lt; it2-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl
        &lt;&lt; "Pisac: " &lt;&lt; it2-&gt;second-&gt;DajAutora() &lt;&lt; std::endl
        &lt;&lt; "Zanr: " &lt;&lt; it2-&gt;second-&gt;DajZanr() &lt;&lt; std::endl
        &lt;&lt; "Godina izdavanja: " &lt;&lt; it2-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
      ima_zaduzenja = true;
    }
    it2++;
  }
  if(!ima_zaduzenja) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
}

// Makro za testiranje izuzetakta (vidi Zadatak 1, Tutorijal 10)
#define TestirajIzuzetak(izuzetak, tijelo) \
  try tijelo catch(izuzetak e) { std::cout &lt;&lt; e.what() &lt;&lt; std::endl; }

<a name="3"></a><font color="#00FFFF"><a href="match542-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

int main() {
  Korisnik kor{"Meho", "Mehic", "Dobojska 15", "033/123-456"};
  std::cout &lt;&lt; kor.ime &lt;&lt; " " &lt;&lt; kor.prezime &lt;&lt; " " &lt;&lt; kor.adresa &lt;&lt; " "
    &lt;&lt; kor.telefon &lt;&lt; std::endl;
</font><a name="2"></a><font color="#0000FF"><a href="match542-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

  Knjiga knj("Tvrdjava", "Mesa Selimovic", "Roman", 1965);
  std::cout &lt;&lt; knj.DajNaslov() &lt;&lt; " " &lt;&lt; knj.DajAutora() &lt;&lt; " "
    &lt;&lt; knj.DajZanr() &lt;&lt; " " &lt;&lt; knj.DajGodinuIzdavanja() &lt;&lt; std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match542-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

  if(knj.DajKodKogaJe() == nullptr) std::cout &lt;&lt; "Nije zaduzena\n";
  std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
  knj.ZaduziKnjigu(kor);
  std::cout &lt;&lt; "Knjigu je zaduzio " &lt;&lt; knj.DajKodKogaJe()-&gt;ime &lt;&lt; std::endl;
  std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
</font>  const Knjiga knj2(knj);                                                       // Test inspektora...
  std::cout &lt;&lt; knj2.DajNaslov() &lt;&lt; " " &lt;&lt; knj2.DajAutora() &lt;&lt; " "
    &lt;&lt; knj2.DajZanr() &lt;&lt; " " &lt;&lt; knj2.DajGodinuIzdavanja() &lt;&lt; std::endl;
  std::cout &lt;&lt; "Knjigu je zaduzio " &lt;&lt; knj2.DajKodKogaJe()-&gt;ime &lt;&lt; std::endl;
  std::cout &lt;&lt; knj2.DaLiJeZaduzena() &lt;&lt; std::endl;
  knj.RazduziKnjigu();
  if(knj.DajKodKogaJe() == nullptr) std::cout &lt;&lt; "Nije zaduzena\n";
  std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match542-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

  Biblioteka b;
  b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
    "Zmaja od Bosne 30", "032/444-555");
  b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
    "Trg neznalica 111", "030/111-222");
  b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
    "Studenata ponovaca 3b", "037/654-321");
  b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
  b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
</font>  b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
  b.IzlistajKorisnike();
  b.IzlistajKnjige();
  TestirajIzuzetak(std::logic_error, {
    b.RegistrirajNovogKorisnika(1234, "Neko", "Drugi", "Bilo gdje", "");
  });
  TestirajIzuzetak(std::logic_error, {
    b.RegistrirajNovuKnjigu(555, "Neka", "Druga", "Bilo sta", 0);
  });
  std::cout &lt;&lt; b.NadjiKorisnika(4312).ime &lt;&lt; std::endl;
  TestirajIzuzetak(std::logic_error, { b.NadjiKorisnika(1111).ime; })
  std::cout &lt;&lt; b.NadjiKnjigu(231).DajNaslov() &lt;&lt; std::endl;
  TestirajIzuzetak(std::logic_error, { b.NadjiKnjigu(999).DajNaslov(); })
  b.PrikaziZaduzenja(1234);
  TestirajIzuzetak(std::logic_error, { b.PrikaziZaduzenja(5555); })
  b.ZaduziKnjigu(231, 1234);
  TestirajIzuzetak(std::logic_error, { b.ZaduziKnjigu(777, 1234); })
  TestirajIzuzetak(std::logic_error, { b.ZaduziKnjigu(231, 7777); })
  TestirajIzuzetak(std::logic_error, { b.ZaduziKnjigu(231, 1234); })
  b.ZaduziKnjigu(136, 1234);
  b.IzlistajKnjige();
  b.PrikaziZaduzenja(1234);
  b.RazduziKnjigu(136);
  b.PrikaziZaduzenja(1234);
  TestirajIzuzetak(std::logic_error, { b.RazduziKnjigu(136); })
  TestirajIzuzetak(std::logic_error, { b.RazduziKnjigu(666); })
  const Biblioteka b2(b);                                           // Test inspektora...
  b2.IzlistajKorisnike();
  b2.IzlistajKnjige();
  b2.PrikaziZaduzenja(4312);
  std::cout &lt;&lt; b2.NadjiKorisnika(4312).ime &lt;&lt; std::endl;
  std::cout &lt;&lt; b2.NadjiKnjigu(231).DajNaslov() &lt;&lt; std::endl;
}</pre>
</body>
</html>
