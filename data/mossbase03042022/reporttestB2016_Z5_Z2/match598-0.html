<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5863.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5863.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;
#include &lt;memory&gt;

struct Korisnik {
<a name="8"></a><font color="#00FFFF"><a href="match598-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    std::string ime,prezime,adresa,telefon;
};

class Knjiga {
    std::string naslov,ime_pisca,zanr;
    int godina_izdavanja;
    Korisnik *zaduzen = nullptr;
</font><a name="5"></a><font color="#FF0000"><a href="match598-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int godina) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), godina_izdavanja(godina), zaduzen(nullptr) {}
</font>    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return ime_pisca; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    Korisnik *DajKodKogaJe() const { return zaduzen; }  
    void ZaduziKnjigu( Korisnik &amp;k) {
        zaduzen = &amp;k;
    }
    void RazduziKnjigu() {
        zaduzen = nullptr;
    }
    bool DaLiJeZaduzena() {
        if( zaduzen == nullptr) return false;
        return true;
    }
    
};


class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    
    static void IspisKnjige(const std::shared_ptr&lt;Knjiga&gt; k) {
           std::cout&lt;&lt;"Naslov: "&lt;&lt;k-&gt;DajNaslov()&lt;&lt;std::endl;
           std::cout&lt;&lt;"Pisac: "&lt;&lt;k-&gt;DajAutora()&lt;&lt;std::endl;
           std::cout&lt;&lt;"Zanr: "&lt;&lt;k-&gt;DajZanr()&lt;&lt;std::endl;
           std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;k-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
    }
    
    public:

    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;b);
    Biblioteka &amp;operator =(const Biblioteka &amp;b);
    
<a name="2"></a><font color="#0000FF"><a href="match598-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    void RegistrirajNovogKorisnika(int clanski_br, std::string ime, std::string prezime, std::string adresa, std::string tel) {
     
        for(auto it = korisnici.begin(); it != korisnici.end(); it++)
        if( clanski_br == it-&gt;first) throw std::logic_error("Korisnik vec postoji");
</font>       std::shared_ptr&lt;Korisnik&gt; pok(std::make_shared&lt;Korisnik&gt;());
       pok-&gt;ime = ime;
       pok-&gt;prezime = prezime;
       pok-&gt;adresa = adresa;
       pok-&gt;telefon = tel;
     
        
        korisnici.insert(std::make_pair(clanski_br, pok));
    }
<a name="3"></a><font color="#00FFFF"><a href="match598-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    void RegistrirajNovuKnjigu(int br_knjige, std::string naslov, std::string autor, std::string zanr, int godina) {
        for(auto it = knjige.begin(); it != knjige.end(); it++)
</font>        if(br_knjige == it-&gt;first) throw std::logic_error("Knjiga vec postoji");
        
        knjige.insert(std::make_pair(br_knjige, std::make_shared&lt;Knjiga&gt;(naslov,autor,zanr,godina)));
    }
    
    Korisnik &amp;NadjiKorisnika(int clanski_br) const {
        for(auto it = korisnici.begin(); it != korisnici.end(); it++ )
           if(clanski_br == it-&gt;first) return *(it-&gt;second);
           
           throw std::logic_error("Korisnik nije nadjen");
    }
    
    Knjiga &amp;NadjiKnjigu( int br_knjige) const {
        for(auto it = knjige.begin(); it != knjige.end(); it++)
        if( it-&gt;first == br_knjige) return *(it-&gt;second); // ili nesto kao daj kopiju
        
        throw std::logic_error("Knjiga nije nadjena");
        
    }
    
    void IzlistajKorisnike() const {
       for(auto it = korisnici.begin(); it != korisnici.end(); it++) {
           std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
           std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
           std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
           std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
       }
    }

   void IzlistajKnjige() const {
       for(auto it = knjige.begin(); it != knjige.end(); it++) {
           std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
           IspisKnjige(it-&gt;second);
          if(it-&gt;second-&gt;DajKodKogaJe() != nullptr) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
               std::cout&lt;&lt;std::endl;
          
       }
   } 
   
   void ZaduziKnjigu(int ev_br_knjige, int clanski_br) const {
       if(NadjiKnjigu(ev_br_knjige).DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
       NadjiKnjigu(ev_br_knjige).ZaduziKnjigu(NadjiKorisnika(clanski_br));
   }
   
   void RazduziKnjigu(int ev_br_knjige) const {
       if(!NadjiKnjigu(ev_br_knjige).DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
       NadjiKnjigu(ev_br_knjige).RazduziKnjigu();
   }
   
   void PrikazZaduzenja(int clanski_br) const {
       auto k = NadjiKorisnika(clanski_br);
       bool jel = true;
       for(auto it = knjige.begin(); it != knjige.end(); it++)
       if( it-&gt;second-&gt;DajKodKogaJe() != nullptr) {
               if(k.ime == it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &amp;&amp; k.prezime == it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &amp;&amp; k.adresa == it-&gt;second-&gt;DajKodKogaJe()-&gt;adresa &amp;&amp; k.telefon == it-&gt;second-&gt;DajKodKogaJe()-&gt;telefon) 
                {
                     std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                     IspisKnjige(it-&gt;second);
                     jel = false;
                     std::cout&lt;&lt;std::endl;
                }
       }
       if(jel) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
      
   }
   
   
};



Biblioteka::Biblioteka(const Biblioteka &amp;b) {
    for( auto it = b.korisnici.begin(); it != b.korisnici.end(); it++ ) {
        std::shared_ptr&lt;Korisnik&gt; pok(std::make_shared&lt;Korisnik&gt;());
        pok-&gt;ime = it-&gt;second-&gt;ime;
<a name="0"></a><font color="#FF0000"><a href="match598-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        pok-&gt;prezime = it-&gt;second-&gt;prezime;
        pok-&gt;adresa = it-&gt;second-&gt;adresa;
        pok-&gt;telefon = it-&gt;second-&gt;telefon;
    korisnici.insert(std::make_pair(it-&gt;first, pok));
    }
    for(auto i = b.knjige.begin(); i != b.knjige.end(); i++)
    knjige.insert(std::make_pair(i-&gt;first, std::make_shared&lt;Knjiga&gt;(i-&gt;second-&gt;DajNaslov(), i-&gt;second-&gt;DajAutora(), i-&gt;second-&gt;DajZanr(), i-&gt;second-&gt;DajGodinuIzdavanja())));
</font><a name="6"></a><font color="#00FF00"><a href="match598-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

}
</font>
Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b) {
    for( auto it = b.korisnici.begin(); it != b.korisnici.end(); it++ ) {
        std::shared_ptr&lt;Korisnik&gt; pok(std::make_shared&lt;Korisnik&gt;());
        pok-&gt;ime = it-&gt;second-&gt;ime;
<a name="1"></a><font color="#00FF00"><a href="match598-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        pok-&gt;prezime = it-&gt;second-&gt;prezime;
        pok-&gt;adresa = it-&gt;second-&gt;adresa;
        pok-&gt;telefon = it-&gt;second-&gt;telefon;
    korisnici.insert(std::make_pair(it-&gt;first, pok));
    }
    for(auto i = b.knjige.begin(); i != b.knjige.end(); i++)
    knjige.insert(std::make_pair(i-&gt;first, std::make_shared&lt;Knjiga&gt;(i-&gt;second-&gt;DajNaslov(), i-&gt;second-&gt;DajAutora(), i-&gt;second-&gt;DajZanr(), i-&gt;second-&gt;DajGodinuIzdavanja())));
</font><a name="7"></a><font color="#0000FF"><a href="match598-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    
</font>    return *this;
}

    



int main ()
{
    try{
       Biblioteka b;
       while(true) {
       std::cout&lt;&lt;" 0 - kraj\n 1 - registruj novog korisnika\n 2 - registruj novu knjigu\n 3 - nadji korisnikan 4 - nadji knjigu\n 5 - izlistaj korisnike\n 6 - izlistaj knjige\n 7 - zaduzi knjigu\n 8 - razduzi knjigu\n 9 - prikazi zaduzenja\n";
       int opcija;
       std::cin&gt;&gt; opcija;
       if(opcija == 0) break;
       else if(opcija == 1) {
           //ime,prezime,adresa,br tel
            std::cout&lt;&lt;"Unesite clanski broj: ";
           int br;
           std::cin&gt;&gt;br;
           std::cout&lt;&lt;"Unesite ime korisnika: ";
           std::string ime;
           std::cin.ignore(1000,'\n');
           std::getline(std::cin,ime);
           std::cout&lt;&lt;"Unesite prezime korisnika: ";
           std::string prezime;
           std::getline(std::cin, prezime);
           std::cout&lt;&lt;"Unesite adresu korisnika: ";
           std::string adresa;
           std::getline(std::cin, adresa);
           std::cout&lt;&lt;"Unesite broj telefona korisnika: ";
           std::string fon;
           std::getline(std::cin,fon);
           b.RegistrirajNovogKorisnika(br,ime,prezime,adresa,fon);
       }
       else if(opcija == 2) {
           //naslov ime pisca zanr i godina izdavanja
           std::cout&lt;&lt;"Unesite evidencijski broj: ";
           int br;
           std::cin&gt;&gt;br;
           std::cout&lt;&lt;"Unesite naslov: ";
           std::string naslov;
           std::cin.ignore(1000,'\n');
           std::getline(std::cin,naslov);
           std::cout&lt;&lt;"Unesite ime pisca: ";
           std::string ime;
           std::getline(std::cin, ime);
           std::cout&lt;&lt;"Unesite zanr: ";
           std::string zanr;
           std::getline(std::cin, zanr);
           std::cout&lt;&lt;"Unesite godinu izdavanja: ";
           int god;
           std::cin&gt;&gt;god;
           b.RegistrirajNovuKnjigu(br,naslov,ime,zanr,god);
           
       }
       else if( opcija == 3) {
           //clanski broj
           std::cout&lt;&lt;"Unesite clanski broj: ";
           int br;
           std::cin&gt;&gt;br;
          auto kor = b.NadjiKorisnika(br);
          std::cout&lt;&lt;kor.ime&lt;&lt;"  "&lt;&lt;kor.prezime&lt;&lt;std::endl;
       }
       else if( opcija == 4) {
           //evidencijski broj
           std::cout&lt;&lt;"Unesite evidencijski broj: ";
           int br;
           std::cin&gt;&gt;br;
           auto knj = b.NadjiKnjigu(br);
<a name="4"></a><font color="#FF00FF"><a href="match598-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

           std::cout&lt;&lt;knj.DajNaslov()&lt;&lt;" "&lt;&lt;knj.DajAutora()&lt;&lt;std::endl;
       }
       else if( opcija == 5) {
           b.IzlistajKorisnike();
           
       }
       else if(opcija == 6) {
           b.IzlistajKnjige();
           
       }
       else if(opcija == 7) {
</font>           //ev br knjige i clnaski korisnika
            std::cout&lt;&lt;"Unesite clanski broj: ";
           int br;
           std::cin&gt;&gt;br;
           std::cout&lt;&lt;"Unesite evidencijski broj: ";
           int ev;
           std::cin&gt;&gt;ev;
           b.ZaduziKnjigu(ev,br);
       }
       else if( opcija == 8) {
           //ev br knjige
           std::cout&lt;&lt;"Unesite evidencijski broj: ";
           int ev;
           std::cin&gt;&gt;ev;
           b.RazduziKnjigu(ev);
       }
       else if( opcija == 9) {
           //clanski br korisnika
             std::cout&lt;&lt;"Unesite clanski broj: ";
           int br;
           std::cin&gt;&gt;br;
           b.PrikazZaduzenja(br);
       }
       
       }
    
    }catch(std::logic_error l) {
        std::cout &lt;&lt; l.what() &lt;&lt; std::endl;
    }
	return 0;
}</pre>
</body>
</html>
