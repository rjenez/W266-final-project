<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6363.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6363.cpp<p></p><pre>
/B16/17 (Zadaća 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
/B16/17 (Zadaća 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

<a name="2"></a><font color="#0000FF"><a href="match215-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
    
};
class Knjiga{
    std::string naslovknjige, pisac, zanr;
    int god_izdavanja;
    std::shared_ptr&lt;Korisnik&gt; poknakor;
    public:
    Knjiga (std::string naslov, std::string imepisca, std::string zanrzanr, int godina): naslovknjige(naslov), pisac(imepisca),zanr(zanrzanr),  god_izdavanja(godina),poknakor(nullptr) {}
</font>    std::string DajNaslov() const { return naslovknjige; }
<a name="3"></a><font color="#00FFFF"><a href="match215-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    std::string DajAutora() const {return pisac; }
    std::string DajZanr() const {return zanr; }
    int DajGodinuIzdavanja() const {return god_izdavanja; }
   std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const {return poknakor;}
    void ZaduziKnjigu ( Korisnik &amp;korisnik) { poknakor=std::make_shared&lt;Korisnik&gt;(korisnik); }
    void RazduziKnjigu() { poknakor=nullptr; }
    bool DaLiJeZaduzena () {
        if(poknakor == nullptr) return false;
</font>        return true;
    }
};
class Biblioteka{
<a name="5"></a><font color="#FF0000"><a href="match215-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    void RegistrirajNovogKorisnika(int indeks, std::string ime1,std::string prezime1, std::string adresa1, std::string telefon1 );
    void RegistrirajNovuKnjigu(int broj, std::string naslov, std::string imepisca, std::string zanrzanr, int godina);
</font>    Korisnik &amp;NadjiKorisnika(int clanskibroj);
<a name="0"></a><font color="#FF0000"><a href="match215-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    Knjiga &amp;NadjiKnjigu(int broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evibroj, int clbroj);
    void RazduziKnjigu(int evibroj);
    void PrikaziZaduzenja ( int clbroj);
  //  Biblioteka &amp;operator =(const Biblioteka &amp;v);
  //    Biblioteka &amp;operator =(Biblioteka &amp;&amp;v);
//    Biblioteka(const Biblioteka &amp;v);
  //  Biblioteka(Biblioteka &amp;&amp;v);
};

 void Biblioteka::RegistrirajNovogKorisnika(int indeks, std::string ime1,std::string prezime1, std::string adresa1, std::string telefon1 ){
        auto it(korisnici.find(indeks));
        if(it!=korisnici.end()) throw std::logic_error("Korisnik vec postoji");
        try{
        std::shared_ptr&lt;Korisnik&gt; korisnik(new Korisnik{ime1, prezime1, adresa1,telefon1});
</font>        korisnici[indeks]=korisnik;
        }
        catch(...)
        {
            std::cout&lt;&lt;"Problemi sa memorijom";
        }
    }
    
<a name="1"></a><font color="#00FF00"><a href="match215-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

 void Biblioteka::RegistrirajNovuKnjigu(int broj, std::string naslov, std::string imepisca, std::string zanrzanr, int godina){
     
     auto it(knjige.find(broj));
     if(it!=knjige.end()) throw std::logic_error("Knjiga vec postoji");
     try{
          std::shared_ptr&lt;Knjiga&gt; knjiga(new Knjiga(naslov, imepisca, zanrzanr,godina));
</font><a name="8"></a><font color="#00FFFF"><a href="match215-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

         knjige[broj]=knjiga;
     }
     catch(...)
     {
         std::cout&lt;&lt;"Problemi sa memorijom";
        
     }
 }    
 Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibroj){
  auto it(korisnici.find(clanskibroj));
    if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
</font><a name="12"></a><font color="#0000FF"><a href="match215-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    return *(it-&gt;second); 
 }
 
 Knjiga &amp;Biblioteka::NadjiKnjigu(int broj){
     auto it(knjige.find(broj));
     if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
</font><a name="11"></a><font color="#00FF00"><a href="match215-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

     return  *(it-&gt;second);
 }

    void Biblioteka::IzlistajKorisnike() const{
        for(auto it = korisnici.begin(); it != korisnici.end(); it++)
        {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt; it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt; it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
        }
    }
    
    void Biblioteka::IzlistajKnjige() const{
         for(auto it = knjige.begin(); it != knjige.end(); it++)
        {
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt; it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
<a name="6"></a><font color="#00FF00"><a href="match215-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
             if(it-&gt;second-&gt;DajKodKogaJe()!=nullptr){
                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
</font>            }
            std::cout&lt;&lt;std::endl;
            
        }
    }
   
<a name="7"></a><font color="#0000FF"><a href="match215-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    void Biblioteka::ZaduziKnjigu(int evibroj, int clbroj){
        auto it(knjige.find(evibroj));
     if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it1(korisnici.find(clbroj));
     if(it1==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        auto it2(knjige.find(evibroj));
</font>    // if(it2-&gt;second != nullptr) throw std::logic_error("Knjiga vec zaduzena");
     
     (*(it2-&gt;second)).Knjiga::ZaduziKnjigu(*(it1-&gt;second));   
    }
    
    void Biblioteka::RazduziKnjigu(int evibroj){
    
    auto it(knjige.find(evibroj));
    if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
    if(it-&gt;second-&gt;DaLiJeZaduzena() ==false) throw std::logic_error("Knjiga nije zaduzena");
    
     (*(it-&gt;second)).Knjiga::RazduziKnjigu();
        }

<a name="4"></a><font color="#FF00FF"><a href="match215-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

    void Biblioteka::PrikaziZaduzenja ( int clbroj){
        auto it1(korisnici.find(clbroj));
     if(it1==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        
        for(auto it = knjige.begin(); it != knjige.end(); it++)
        {
            if(it-&gt;second-&gt;DajKodKogaJe()==it1-&gt;second){
                 std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt; it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
            }
        }
        
    }

int main ()
{
    Biblioteka biblioteka;
    
    int n;
     std::cout&lt;&lt;"Izaberite jednu od mogucih opcija: "&lt;&lt;std::endl;
     std::cout&lt;&lt;"1 - Registriraj novog korisnika"&lt;&lt;std::endl;
     std::cout&lt;&lt;"2 - Registriraj novu knjigu"&lt;&lt;std::endl;
	std::cout&lt;&lt;"3 - Izlistaj korisnike"&lt;&lt;std::endl;
	std::cout&lt;&lt;"4 - Izlistaj knjige"&lt;&lt;std::endl;
	std::cout&lt;&lt;"5 - Zaduzi knjigu"&lt;&lt;std::endl;
	std::cout&lt;&lt;"6 - Razduzi knjigu"&lt;&lt;std::endl;
<a name="13"></a><font color="#00FFFF"><a href="match215-1.html#13" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

	std::cout&lt;&lt;"7 - Prikazi zaduzenja"&lt;&lt;std::endl;
	std::cout&lt;&lt;"0 - Kraj programa"&lt;&lt;std::endl;
	std::cin&gt;&gt;n;
	if(n==0) return 0;
</font>	try{
	while(n!=0)
	{
	    if(n==1){
	        int clbroj;
	        std::string ime, prezime, adresa, telefon;
	        std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
	        std::cin&gt;&gt; clbroj;
	        std::cout&lt;&lt;"Unesite ime korisnika: ";
	        std::cin&gt;&gt;ime;
	        std::cout&lt;&lt;"Unesite prezime korisnika: ";
	        std::cin&gt;&gt;prezime;
<a name="10"></a><font color="#FF0000"><a href="match215-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

	        std::cout&lt;&lt;"Unesite adresu korisnika: ";
	        std::cin&gt;&gt;adresa;
	        std::cout&lt;&lt;"Unesite broj telefona korisnika: ";
	        std::cin&gt;&gt;telefon;
	        biblioteka.RegistrirajNovogKorisnika(clbroj,ime,prezime,adresa,telefon);
</font>	    }
	    else if(n==3){
	        biblioteka.IzlistajKorisnike();
	    }
	    else if(n==2){
	        int broj,godina;
	        std::string naslov, pisac, zanr;
	        std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
	        std::cin&gt;&gt; broj;
	        std::cout&lt;&lt;"Unesite naslov knjige: ";
	        std::cin&gt;&gt;naslov;
	        std::cout&lt;&lt;"Unesite ime pisca: ";
	        std::cin&gt;&gt;pisac;
	        std::cout&lt;&lt;"Unesite zanr knjige: ";
	        std::cin&gt;&gt;zanr;
	        std::cout&lt;&lt;"Unesite godinu izdavanja: ";
	        std::cin&gt;&gt;godina;
	        biblioteka.RegistrirajNovuKnjigu(broj,naslov,pisac,zanr,godina);
	    }
	    else if(n==4){
	        biblioteka.IzlistajKnjige();
	    }
	    else if(n==5){
	        int evbroj, clbroj;
	        std::cout&lt;&lt;"Unesite evidencijski broj knjige: ";
	        std::cin&gt;&gt;evbroj;
	        std::cout&lt;&lt;"Unesite clanski broj korisnika: ";
	        std::cin&gt;&gt;clbroj;
	        biblioteka.ZaduziKnjigu(evbroj, clbroj);
	    }
	    else if(n==7)
	    {
	        std::cout&lt;&lt;"Unesite clanski broj korisnika za koji zelite vidjeti zaduzenja: ";
	        int clbroj;
	        std::cin&gt;&gt;clbroj;
	        biblioteka.PrikaziZaduzenja(clbroj);
	    }
	    else if(n==6)
	    {
	        std::cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite razduziti: ";
	        int evibroj;
	        std::cin&gt;&gt;evibroj;
<a name="9"></a><font color="#FF00FF"><a href="match215-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	        biblioteka.RazduziKnjigu(evibroj);
	    }
	    std::cout&lt;&lt;"Unesite opet zeljenu opciju: ";
	    std::cin&gt;&gt;n;
	    
	}
	}
	catch(std::logic_error s)
	{
	    std::cout&lt;&lt;s.what()&lt;&lt;std::endl;
</font>	}
	return 0;
}</pre>
</body>
</html>
