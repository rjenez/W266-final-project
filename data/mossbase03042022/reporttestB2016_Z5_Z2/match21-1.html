<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2664.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6706.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match21-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_65.gif"/></a>

/B16/17 (Zadaća 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include&lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
using namespace std;
struct Korisnik{
    string ime, prezime, adresa,telefon;
};
class Knjiga{
    string naslov_knjige,ime_pisca,zanr;
    int godina_izdavanja;
    shared_ptr&lt;Korisnik&gt;zaduzenje;
    public:
    Knjiga(string n_k, string i_p, string z, int g_i): zaduzenje(nullptr) { //konstruktor sa 4 parametra
        naslov_knjige=n_k;
        ime_pisca=i_p;
        zanr=z;
        godina_izdavanja=g_i;
}
    void Postavi(string n_k, string i_p, string z, int g_i){ 
        naslov_knjige=n_k;
        ime_pisca=i_p;
        zanr=z;
        godina_izdavanja=g_i;
        zaduzenje=nullptr;
    }
    string DajNaslov() const{ return naslov_knjige;}
    string DajAutora() const{ return ime_pisca;}
    string DajZanr() const { return zanr;}
    int DajGodinuIzdavanja() const { return godina_izdavanja;}
    shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const { return zaduzenje;}
    void ZaduziKnjigu (Korisnik &amp;k) { // postavlja pokazivac zaduzenje na korisnika koji poslan kao parametar
        try{
        shared_ptr&lt;Korisnik&gt;p(new Korisnik);
        p-&gt;ime=k.ime;
        p-&gt;prezime=k.prezime;
        p-&gt;adresa=k.adresa;
        p-&gt;telefon=k.telefon;
        zaduzenje=move(p);}
        catch(...) {throw;}
        }
    void RazduziKnjigu() { zaduzenje=nullptr;} // postavlja pokazivac na nullptr jer je korisnik razduzio knjigu
    bool DaLiJeZaduzena(){ if(zaduzenje==nullptr) return false; else return true;} //vraca 0 ako nije zaduzena, 1 ako je zaduzena
};
class Biblioteka{
    map&lt;int, shared_ptr&lt;Korisnik&gt;&gt; korisnik; //atributi mape, gdje je kljuc identifikacioni broj, a pridruzena vrijednost dinamicki alocirani objekat
    map&lt;int, shared_ptr&lt;Knjiga&gt;&gt; knjiga; 
    public:
    Biblioteka(); //Objekti tipa “Biblioteka” moraju se moći kreirati ne navodeći nikakve dopunske informacije
    Biblioteka(const Biblioteka &amp;b); // kopirajuci konstruktor
    Biblioteka &amp;operator=(const Biblioteka &amp;b); // operator dodjele
    void RegistrirajNovogKorisnika(int clanskibr, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu(int evidencijskibr, string naslov_knjige, string ime_pisca, string zanr, int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int clanskibr);
    Knjiga &amp;NadjiKnjigu(int evidencijskibr);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const; 
    void ZaduziKnjigu(int evidencijskibr, int clanskibr);
    void RazduziKnjigu(int evidencijskibr);
    void PrikaziZaduzenja(int clanskibr);
};
Biblioteka::Biblioteka(){ //konstruktor bez parametra
    shared_ptr&lt;Korisnik&gt; k(new Korisnik);
    (*k).ime="\0";
    (*k).prezime="\0";
    (*k).adresa="\0";
    (*k).telefon="\0";
    shared_ptr&lt;Knjiga&gt; k1(new Knjiga("\0","\0","\0",0));
}
Biblioteka::Biblioteka(const Biblioteka &amp;b){ //kopirajuci konstruktor
    try{
    for(auto it=b.korisnik.begin(); it!=b.korisnik.end(); it++){
        shared_ptr&lt;Korisnik&gt;k(new Korisnik);
        (*k).ime=it-&gt;second-&gt;ime;
        (*k).prezime=it-&gt;second-&gt;prezime;
        (*k).adresa=it-&gt;second-&gt;adresa;
        (*k).telefon=it-&gt;second-&gt;telefon;
        pair&lt;int,shared_ptr&lt;Korisnik&gt;&gt;p(it-&gt;first, k);
        korisnik.insert(p);
    }
    for(auto it=b.knjiga.begin(); it!=b.knjiga.end(); it++){
        shared_ptr&lt;Knjiga&gt; k(new Knjiga(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()));
        pair&lt;int,shared_ptr&lt;Knjiga&gt;&gt;p(it-&gt;first, k);
        knjiga.insert(p);
    }
    }
    catch(...){
    throw;
    }
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;b){ // operator dodjele
if(korisnik.size()&lt;b.korisnik.size()){
   try{
     shared_ptr&lt;Korisnik&gt; k(new Korisnik);
    for(auto i=korisnik.size(); i&lt;b.korisnik.size(); i++){
        auto it1=b.korisnik.begin();
        (*k).ime=it1-&gt;second-&gt;ime;
        (*k).prezime=it1-&gt;second-&gt;prezime;
        (*k).adresa=it1-&gt;second-&gt;adresa;
        (*k).telefon=it1-&gt;second-&gt;telefon;
        pair&lt;int,shared_ptr&lt;Korisnik&gt;&gt;p(it1-&gt;first, k);
        auto it=korisnik.end();
        korisnik.insert(it,p);
        it1++;
        it++;
    }
   }
    catch(...){ throw;}
   }
   if(korisnik.size()&lt;b.korisnik.size()){
     try{
    for(auto i=knjiga.size(); i&lt;b.knjiga.size(); i++){
        auto it1=b.knjiga.begin();
        shared_ptr&lt;Knjiga&gt; k(new Knjiga(it1-&gt;second-&gt;DajNaslov(),it1-&gt;second-&gt;DajAutora(),it1-&gt;second-&gt;DajZanr(),it1-&gt;second-&gt;DajGodinuIzdavanja()));
        pair&lt;int,shared_ptr&lt;Knjiga&gt;&gt;p(it1-&gt;first, k);
        auto it=knjiga.end();
        knjiga.insert(it,p);
        it1++;
        it++;
    }
    }
    catch(...){throw;}
   }
    return *this;
}
void Biblioteka::RegistrirajNovogKorisnika(int clanskibr, string ime, string prezime, string adresa, string telefon){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
            if(it-&gt;first==clanskibr) throw logic_error ("Korisnik vec postoji");
        }
    try{
        shared_ptr&lt;Korisnik&gt; k(new Korisnik);
        (*k).ime=ime;
        (*k).prezime=prezime;
        (*k).adresa=adresa;
        (*k).telefon=telefon;
        pair&lt;int,shared_ptr&lt;Korisnik&gt;&gt;p(clanskibr, k);
        korisnik.insert(p);
    }
    catch(...){ throw;}
}
void Biblioteka::RegistrirajNovuKnjigu(int evidencijskibr, string naslov_knjige, string ime_pisca, string zanr, int godina_izdavanja){
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
            if(it-&gt;first==evidencijskibr) throw logic_error ("Knjiga vec postoji");}
      try{
        shared_ptr&lt;Knjiga&gt; k(new Knjiga(naslov_knjige, ime_pisca, zanr, godina_izdavanja));
        pair&lt;int,shared_ptr&lt;Knjiga&gt;&gt;p(evidencijskibr, k);
        knjiga.insert(p);
    }
    catch(...){ throw;}
}
Korisnik k;
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibr){
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++) if(it-&gt;first==clanskibr) {
    k.ime=it-&gt;second-&gt;ime;
    k.prezime=it-&gt;second-&gt;prezime;
    k.adresa=it-&gt;second-&gt;adresa;
    k.telefon=it-&gt;second-&gt;telefon;
    return k;
    }
    throw logic_error("Korisnik nije nadjen");
}
Knjiga k1("\0","\0","\0",0);
 Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijskibr){
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++) if(it-&gt;first==evidencijskibr){ 
     k1.Postavi(it-&gt;second-&gt;DajNaslov(),it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja());
    return k1;
 }
 throw logic_error("Knjiga nije nadjena");
 }
 void Biblioteka::IzlistajKorisnike()const {
     for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
         cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
         cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
         cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
         cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl;
         cout&lt;&lt;endl;
     }
 }
 void Biblioteka::IzlistajKnjige() const{
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
</font>        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match21-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()==1){
            shared_ptr&lt;Korisnik&gt; k=it-&gt;second-&gt;DajKodKogaJe();
         cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;k-&gt;ime&lt;&lt;" "&lt;&lt;k-&gt;prezime&lt;&lt;endl;}
        cout&lt;&lt;endl;
 }
 }
Korisnik k2;
void Biblioteka::ZaduziKnjigu(int evidencijskibr, int clanskibr){
int jeste=0;
for(auto it1=korisnik.begin(); it1!=korisnik.end(); it1++){
    jeste=0;
    if(clanskibr==it1-&gt;first) {
        k2.ime=it1-&gt;second-&gt;ime;
        k2.prezime=it1-&gt;second-&gt;prezime;
        k2.adresa=it1-&gt;second-&gt;adresa;
        k2.telefon=it1-&gt;second-&gt;telefon;
        jeste=1; break;
    }
}
if(jeste==0) throw logic_error("Korisnik nije nadjen");
jeste=0;
for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        if(evidencijskibr==it-&gt;first){
            jeste=1;
            if(it-&gt;second-&gt;DaLiJeZaduzena()==1) throw logic_error("Knjiga vec zaduzena");
            it-&gt;second-&gt;ZaduziKnjigu(k2); break;}
}
if(jeste==0) throw logic_error("Knjiga nije nadjena");
}
void Biblioteka::RazduziKnjigu(int evidencijskibr){
    int jeste=0;
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        jeste=0;
        if(it-&gt;first==evidencijskibr){
            jeste=1;
            if(it-&gt;second-&gt;DaLiJeZaduzena()==0) throw logic_error("Knjiga nije zaduzena");
            it-&gt;second-&gt;RazduziKnjigu(); break;}
    }
     if(jeste==0) throw logic_error("Knjiga nije nadjena");
}
void Biblioteka::PrikaziZaduzenja(int clanskibr){
    int jeste=0;
    Korisnik k;
    for(auto it=korisnik.begin(); it!=korisnik.end(); it++){
    jeste=0;
    if(it-&gt;first==clanskibr){
        jeste=1;
        k.ime=it-&gt;second-&gt;ime;
        k.prezime=it-&gt;second-&gt;prezime;
        k.adresa=it-&gt;second-&gt;adresa;
        k.telefon=it-&gt;second-&gt;telefon;
        break;
    }
    }
    if(jeste==0) throw logic_error("Korisnik nije nadjen");
    jeste=0;
    for(auto it=knjiga.begin(); it!=knjiga.end(); it++){
        if(it-&gt;second-&gt;DaLiJeZaduzena()){
          shared_ptr&lt;Korisnik&gt; k1(it-&gt;second-&gt;DajKodKogaJe()); 
          if(k1-&gt;ime==k.ime &amp;&amp; k1-&gt;prezime==k.prezime) { jeste=1; 
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
</font>        cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="2"></a><font color="#0000FF"><a href="match21-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        cout&lt;&lt;endl;
          }
        }
    }
    if(jeste==0) cout&lt;&lt;"Nema zaduzenja za tog korisnika!"&lt;&lt;endl;
}

int main ()
{
Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata etfovaca 3b", "037/654-321");
Biblioteka a=b;
a.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
a.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
a.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
a.ZaduziKnjigu(231, 1234);
a.ZaduziKnjigu(136, 1234);
a.PrikaziZaduzenja(1234);
</font>	return 0;
}</pre>
</body>
</html>
