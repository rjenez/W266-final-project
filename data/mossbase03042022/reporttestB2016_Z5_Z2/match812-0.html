<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8428.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8428.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik
{
    std::string ime, prezime, adresa, telefon;
};
class Knjiga
{
    Korisnik* Zaduzenje = nullptr;
    std::string Naslov;
    std::string ImePisca;
    std::string Zanr;
    int GodinaIzdavanja;
public:
    Knjiga(std::string naslov, std::string imepisca, std::string zanr, int godinaizdavanja): Naslov(naslov), 
        ImePisca(imepisca), Zanr(zanr), GodinaIzdavanja(godinaizdavanja){}
    std::string DajNaslov() const {return Naslov;}
    std::string DajAutora() const {return ImePisca;}
    std::string DajZanr() const {return Zanr;}
    int DajGodinuIzdavanja() const {return GodinaIzdavanja;}
    Korisnik* DajKodKogaJe() const {return Zaduzenje;}
    void ZaduziKnjigu(Korisnik&amp; korisnik) {Zaduzenje = &amp;korisnik;}
    void RazduziKnjigu() {Zaduzenje = nullptr;}
    bool DaLiJeZaduzena() const
    {
        if(Zaduzenje == nullptr)
            return false;
        return true;
    }
};

class Biblioteka
{
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; Korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; Knjige;
    public:
    Biblioteka(){}
    void RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string broj);
<a name="0"></a><font color="#FF0000"><a href="match812-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    void RegistrirajNovuKnjigu(int brojknjige, std::string naslov, std::string ime, std::string zanr, int godina);
    Korisnik&amp; NadjiKorisnika(int clanski) const;
    Knjiga&amp; NadjiKnjigu(int brojknjige) const;
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int brojknjige, int clanski);
    void RazduziKnjigu(int brojknjige);
    void PrikaziZaduzenja(int clanski) const;
</font>};
void Biblioteka::RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string broj)
{
        auto it(Korisnici.find(clanski));
        if(it == Korisnici.end());
        else
            throw std::logic_error("Korisnik vec postoji");
        std::shared_ptr&lt;Korisnik&gt; temp = std::make_shared&lt;Korisnik&gt;();
        temp-&gt;ime = ime;
        temp-&gt;prezime = prezime;
        temp-&gt;adresa = adresa;
        temp-&gt;telefon = broj;
<a name="7"></a><font color="#0000FF"><a href="match812-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        Korisnici.insert(std::make_pair(clanski, temp));
    
}
void Biblioteka::RegistrirajNovuKnjigu(int brojknjige, std::string naslov, std::string ime, std::string zanr, int godina)
</font>{
    
        auto it(Knjige.find(brojknjige));
        if(it == Knjige.end());
        else
            throw std::logic_error("Knjiga vec postoji");
<a name="1"></a><font color="#00FF00"><a href="match812-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        auto temp = std::make_shared&lt;Knjiga&gt;(naslov, ime, zanr, godina);
        Knjige.insert(std::make_pair(brojknjige, temp));
}
Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski) const
{
    auto it(Korisnici.find(clanski));
    if(it == Korisnici.end())
        throw std::logic_error("Korisnik nije nadjen");
</font>    else
<a name="3"></a><font color="#00FFFF"><a href="match812-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        return *it-&gt;second;
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int brojknjige) const
{
    auto it(Knjige.find(brojknjige));
    if(it == Knjige.end())
        throw std::logic_error("Knjiga nije nadjena");
</font>    else
<a name="4"></a><font color="#FF00FF"><a href="match812-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        return *it-&gt;second;
}
void Biblioteka::IzlistajKorisnike() const
{
    for(auto it = Korisnici.begin(); it != Korisnici.end(); it++)
    {
        std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match812-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl &lt;&lt; std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const
{
    for(auto it = Knjige.begin(); it != Knjige.end(); it++)
</font>    {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena() == true)
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " 
<a name="6"></a><font color="#00FF00"><a href="match812-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
        
        std::cout &lt;&lt; std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int brojknjige, int clanski)
</font>{
    auto &amp;knjiga = NadjiKnjigu(brojknjige);
    auto &amp;korisnik = NadjiKorisnika(clanski);
    if(knjiga.DaLiJeZaduzena() == true)
        throw std::logic_error("Knjiga vec zaduzena");
    knjiga.ZaduziKnjigu(korisnik);
}
void Biblioteka::RazduziKnjigu(int brojknjige)
{
    auto &amp;knjiga = NadjiKnjigu(brojknjige);
    if(knjiga.DaLiJeZaduzena() != true)
        throw std::logic_error("Knjiga nije zaduzena");
    knjiga.RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanski) const
{
    auto &amp;korisnik = NadjiKorisnika(clanski);
    int temp = 0;
    for(auto it = Knjige.begin(); it != Knjige.end(); it++)
    {
        if(it-&gt;second-&gt;DajKodKogaJe() == &amp;korisnik)
        {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
<a name="5"></a><font color="#FF0000"><a href="match812-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
            temp++;
        }
    } 
    if(temp == 0)
</font>        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
}
int main ()
{
    Biblioteka niz;
    int n = 1;
    while (n != 0) {
        std::cout &lt;&lt; "0: Kraj\n1: Dodaj novog korisnika\n2: Dodaj novu knjigu\n3: Zaduzi knjigu\n4: Razduzi knjigu\n";
        std::cout &lt;&lt; "5: Prikazi zaduzenja\n6: Ispisi korisnike\n7: Ispisi knjige:\n\n";
        std::cin &gt;&gt; n;
        if(n == 1)
        {
            int clanski;
            std::cout &lt;&lt; "Unesite clanski: ";
            std::cin &gt;&gt; clanski;
            std::cin.ignore(1000, '\n');
            std::string ime, prezime, adresa, telefon;
            std::cout &lt;&lt; "Unesite redom ime, prezime, adresu i broj telefona: ";
            std::getline(std::cin, ime);
            std::getline(std::cin, prezime);
            std::getline(std::cin, adresa);
            std::getline(std::cin, telefon);
            try
            {
                niz.RegistrirajNovogKorisnika(clanski, ime, prezime, adresa, telefon);
            }
            catch(const std::exception &amp;t)
            {
                std::cout &lt;&lt; t.what() &lt;&lt; std::endl;
            }
        }
        else if(n == 2)
        {
            int clanski;
            std::cout &lt;&lt; "Unesite broj knjige: ";
            std::cin &gt;&gt; clanski;
            std::cin.ignore(1000, '\n');
            std::string naslov, ime, zanr;
            std::cout &lt;&lt; "Unesite redom naslov knjige, ime pisca, zanr knjige te godinu izdavanja";
            std::getline(std::cin, naslov);
            std::getline(std::cin, ime);
            std::getline(std::cin, zanr);
            int godina;
            std::cin &gt;&gt; godina;
            try
            {
                niz.RegistrirajNovuKnjigu(clanski, naslov, ime, zanr, godina);
            }
            catch(const std::exception &amp;t)
            {
                std::cout &lt;&lt; t.what() &lt;&lt; std::endl;
            }
        }
        else if(n == 3)
        {
            try
            {
                int broj, clanski;
                std::cout &lt;&lt; "Unesite broj knjige te clanski broj korisnika koji zaduzuje knjigu: ";
                std::cin &gt;&gt; broj;
                std::cin &gt;&gt; clanski;
                niz.ZaduziKnjigu(broj, clanski);
            }
            catch(const std::exception &amp;t)
            {
                std::cout &lt;&lt; t.what() &lt;&lt; std::endl;
            }
        }
        else if(n == 4)
        {
             try
            {
                int broj;
                std::cout &lt;&lt; "Unesite broj knjige koju zelite razduziti: ";
                std::cin &gt;&gt; broj;
                niz.RazduziKnjigu(broj);
            }
            catch(const std::exception &amp;t)
            {
                std::cout &lt;&lt; t.what() &lt;&lt; std::endl;
            }
        }
        else if(n == 5)
        {
            std::cout &lt;&lt; "Unesite clanski broj za koga zelite vidjeti zaduzenja: ";
            int clanski;
            std::cin &gt;&gt; clanski;
            niz.PrikaziZaduzenja(clanski);
        }
        else if(n == 6)
        {
            std::cout &lt;&lt; "Korisnici: " &lt;&lt; std::endl;
            niz.IzlistajKorisnike();
        }
        else if(n == 7)
        {
            std::cout &lt;&lt; "Knjige: " &lt;&lt; std::endl;
            niz.IzlistajKnjige();
        }
        else if(n == 0)
            std::cout &lt;&lt; "Dovidjenja!";
        else
            std::cout &lt;&lt; "Pogresan unos, unesite ponovo!\n";
    }
	return 0;
}</pre>
</body>
</html>
