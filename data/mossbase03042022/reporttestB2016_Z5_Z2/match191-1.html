<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7123.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3557.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;map&gt;

struct Korisnik {
<a name="3"></a><font color="#00FFFF"><a href="match191-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_7.gif"/></a>

  std::string ime, prezime, adresa, telefon;
    
};

class Knjiga {
  std::string naslov, ime_pisca, zanr;
  int godina_izdavanja;
  Korisnik *pok = (nullptr);
  public:
  Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja): naslov(naslov), ime_pisca(ime_pisca),zanr(zanr),godina_izdavanja(godina_izdavanja) {}
    std::string DajNaslov() const { return naslov; };
    std::string DajAutora() const {return ime_pisca; };
</font>    std::string DajZanr() const {return zanr;};
    int DajGodinuIzdavanja() const {return godina_izdavanja;};
<a name="2"></a><font color="#0000FF"><a href="match191-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

    Korisnik *DajKodKogaJe() const {return pok;};
    void ZaduziKnjigu( Korisnik &amp;k) { pok = &amp;k; }
    void RazduziKnjigu() { pok = nullptr; }
    bool DaLiJeZaduzena() { if(pok != nullptr) return true; else return false; }
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    void RegistrirajNovogKorisnika(int clanski_broj,std::string ime,std::string prezime,std::string adresa, std::string broj_telefona);
    void RegistrirajNovuKnjigu(int br_knjige,std::string naslov,std::string  ime,std::string zanr, int god_izdavanja);  
</font>    Korisnik &amp;NadjiKorisnika(int br_korisnika);
<a name="0"></a><font color="#FF0000"><a href="match191-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_25.gif"/></a>

    Knjiga &amp;NadjiKnjigu(int br_knjige);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int br_knjige, int br_korisnika);
    void RazduziKnjigu(int br_knjige);
    void PrikaziZaduzenja(int br_korisnika) const;
    
};

  void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj,std::string ime, std::string prezime, std::string adresa, std::string broj_telefona) {
        if(korisnici.count(clanski_broj)) throw std::logic_error("Korisnik vec postoji");
        else {
          Korisnik p;
          p.ime = ime; p.prezime = prezime; p.adresa = adresa; p.telefon = broj_telefona;
          auto p1 (std::make_shared&lt;Korisnik&gt; (p));
          korisnici.insert(std::make_pair(clanski_broj, p1));
        
        }
    }
    
  void Biblioteka::RegistrirajNovuKnjigu(int br_knjige,std::string naslov,std::string ime_pisca, std::string zanr, int god_izdavanja) {
    if(knjige.count(br_knjige)) throw std::logic_error("Knjiga vec postoji");
    else {
         Knjiga p (naslov, ime_pisca, zanr, god_izdavanja);
         auto p1 (std::make_shared&lt;Knjiga&gt; (p));
      knjige.insert(std::make_pair(br_knjige, p1));
    
    }
  }    
  
  Korisnik &amp;Biblioteka::NadjiKorisnika(int br_korisnika) {
    auto p = korisnici.find(br_korisnika);
//    std::cout &lt;&lt;"IME: "&lt;&lt; p-&gt;second-&gt;ime;
    if(korisnici.find(br_korisnika) == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
    else {
       return *p-&gt;second;
    }
  }
  
  Knjiga &amp;Biblioteka::NadjiKnjigu(int br_knjige) {
    auto p = (knjige.find(br_knjige));
    if(knjige.find(br_knjige) == knjige.end()) throw std::logic_error("Korisnik nije nadjen");
    else {
       return *p-&gt;second;
    }
  }
 
  void Biblioteka::IzlistajKorisnike() const {
    for(auto it = korisnici.begin(); it != korisnici.end(); it++) {
      std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>      std::cout &lt;&lt;"Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;ime &lt;&lt;" "&lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt;std::endl;
      std::cout &lt;&lt;"Adresa: " &lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt;std::endl;
<a name="5"></a><font color="#FF0000"><a href="match191-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

      std::cout &lt;&lt;"Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt;std::endl;
      std::cout &lt;&lt; std::endl;
    }
  }
  
  void Biblioteka::IzlistajKnjige() const {
    for(auto it = knjige.begin(); it != knjige.end(); it++) {
</font>      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
      std::cout &lt;&lt;"Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt;std::endl;
      std::cout &lt;&lt;"Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt;std::endl;
      std::cout &lt;&lt;"Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt;std::endl;
      std::cout &lt;&lt;"Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match191-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_21.gif"/></a>

      if((it-&gt;second-&gt;DaLiJeZaduzena())) std::cout &lt;&lt;"Zaduzena kod korisnika: "&lt;&lt; ((it-&gt;second)-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
      std::cout &lt;&lt; std::endl;
    }
  }
  
  void Biblioteka::ZaduziKnjigu(int br_knjige, int br_korisnika) {
    if ((knjige.count(br_knjige))==0) throw std::logic_error("Knjiga nije nadjena");
    else
    if ((korisnici.count(br_korisnika))==0) throw std::logic_error("Korisnik nije nadjen");
    else
    if (((knjige.find(br_knjige))-&gt;second-&gt;DaLiJeZaduzena()) !=0) throw std::logic_error("Knjiga vec zaduzena");
    else
   (knjige.find(br_knjige))-&gt;second-&gt;ZaduziKnjigu( *(korisnici.find(br_korisnika))-&gt;second);
  }
  
  void Biblioteka::RazduziKnjigu(int br_knjige) {
    if (!(knjige.count(br_knjige))) throw std::logic_error("Knjiga nije nadjena");
    if (((knjige.find(br_knjige))-&gt;second-&gt;DaLiJeZaduzena())==0) throw std::logic_error("Knjiga nije zaduzena");
   (knjige.find(br_knjige))-&gt;second-&gt;RazduziKnjigu();
  }
  
  void Biblioteka::PrikaziZaduzenja(int br_korisnika) const {
    if ((korisnici.count(br_korisnika))==0) throw std::logic_error("Korisnik nije nadjen");
    int br(0);
    for(auto it = knjige.begin(); it != knjige.end(); it++) {
      if(it-&gt;second-&gt;DajKodKogaJe() == korisnici.find(br_korisnika)-&gt;second.get()) {
        br++;
      std::cout &lt;&lt;"Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
      std::cout &lt;&lt;"Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt;std::endl;
</font>      std::cout &lt;&lt;"Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt;std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match191-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_7.gif"/></a>

      std::cout &lt;&lt;"Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt;std::endl;
      std::cout &lt;&lt;"Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt;std::endl;
      }
    }
    if(br == 0) std::cout &lt;&lt;"Nema zaduzenja za tog korisnika!";
  }
  
int main ()
{
//AT6 (c9): testira metodu NadjiKorisnika

Biblioteka bib6;
bib6.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib6.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
std::cout &lt;&lt; bib6.NadjiKorisnika(1).ime;

	return 0;
</font>}</pre>
</body>
</html>
