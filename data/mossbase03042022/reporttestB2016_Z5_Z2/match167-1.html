<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5244.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6040.cpp<p></p><pre>

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

<a name="0"></a><font color="#FF0000"><a href="match167-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_68.gif"/></a>

struct Korisnik{
    std::string ime, prezime, adresa, telefon;
    
};

class Knjiga{
    std::string naslov, pisac, zanr;
    int godina;
    std::shared_ptr&lt;Korisnik&gt; zaduzenje;
    
    public:
        Knjiga(std::string Naslov, std::string Pisac, std::string Zanr, int Godina){
            naslov=Naslov;
            pisac=Pisac;
            zanr=Zanr;
            godina=Godina;
            zaduzenje=nullptr;
        }
        std::string DajNaslov() const{ return naslov; }
        std::string DajAutora() const{ return pisac; }
        std::string DajZanr() const{ return zanr; }
        int DajGodinuIzdavanja() const{ return godina; }
        std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const{ return zaduzenje; }
        
        void ZaduziKnjigu(Korisnik &amp;HoceDaZaduzi){
            zaduzenje=std::make_shared&lt;Korisnik&gt; (HoceDaZaduzi);
        }
        void RazduziKnjigu(){
            zaduzenje=nullptr;
        }
        bool DaLiJeZaduzena(){
            if(zaduzenje==nullptr) return false;
            return true;
        }
};

class Biblioteka{
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; mapaKorisnika;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; mapaKnjiga;
    
    public:
        Biblioteka(){}
        //kopirajuci kontruktor
        Biblioteka(const Biblioteka &amp;b){
            for(auto it=b.mapaKorisnika.begin();it!=b.mapaKorisnika.end();it++){
              mapaKorisnika[it-&gt;first]=std::make_shared&lt;Korisnik&gt; (*(it-&gt;second));
            }
        }
        //pomjerajuci konstruktor
        Biblioteka(Biblioteka &amp;&amp;b){
            mapaKorisnika=b.mapaKorisnika;
            mapaKnjiga=b.mapaKnjiga;
        }
        //kopirajuci operator dodjele
        Biblioteka &amp;operator =(const Biblioteka &amp;b){
            if(this==&amp;b) return *this;
            for(auto it=mapaKorisnika.begin();it!=mapaKorisnika.end();it++){
                //delete it-&gt;second;
                mapaKorisnika.erase(it);
            }
            for(auto it=b.mapaKorisnika.begin();it!=b.mapaKorisnika.end();it++){
              mapaKorisnika[it-&gt;first]=std::make_shared&lt;Korisnik&gt;(*(it-&gt;second));
            }
            return *this;
        }
        //pomjerajuci operator dodjele
        Biblioteka &amp;operator =(Biblioteka &amp;&amp;b){
            std::swap(mapaKorisnika, b.mapaKorisnika);
            std::swap(mapaKnjiga, b.mapaKnjiga);
            return *this;
        }
        ~Biblioteka(){
            /*for(auto it=mapaKorisnika.begin();it!=mapaKorisnika.end();it++){
                delete it-&gt;second;
            }
            for(auto it=mapaKnjiga.begin();it!=mapaKnjiga.end();it++){
                delete it-&gt;second;
            }*/
        }
        void RegistrirajNovogKorisnika(int clanskiBroj, std::string Ime, std::string Prezime, std::string Adresa, std::string brojTelefona){
            for(auto it=mapaKorisnika.begin();it!=mapaKorisnika.end();it++){
                if(it-&gt;first==clanskiBroj) throw std::logic_error("Korisnik vec postoji");
            }
            Korisnik k={Ime, Prezime, Adresa, brojTelefona};
            mapaKorisnika[clanskiBroj]=std::make_shared&lt;Korisnik&gt;(k);
            
            
        }
        void RegistrirajNovuKnjigu(int evidencijskiBroj, std::string Naslov, std::string imePisca, std::string Zanr, int godinaIzdavanja){
            for(auto it=mapaKnjiga.begin();it!=mapaKnjiga.end();it++){
                if(it-&gt;first==evidencijskiBroj) throw std::logic_error("Knjiga vec postoji");
            }
            Knjiga k(Naslov, imePisca, Zanr, godinaIzdavanja);
            mapaKnjiga[evidencijskiBroj]=std::make_shared&lt;Knjiga&gt;(k);
            
        }
        Korisnik &amp;NadjiKorisnika(int clanskiBroj){
            for(auto it=mapaKorisnika.begin();it!=mapaKorisnika.end();it++){
                if(it-&gt;first==clanskiBroj){
                    return *(it-&gt;second);
                }
            }
            throw std::logic_error("Korisnik nije nadjen");
        }
        Knjiga &amp;NadjiKnjigu(int evidencijskiBroj){
            for(auto it=mapaKnjiga.begin();it!=mapaKnjiga.end();it++){
                if(it-&gt;first==evidencijskiBroj){
                    return *(it-&gt;second);
                }
            }
            throw std::logic_error("Knjiga nije nadjena");
        }
        void IzlistajKorisnike(){
            for(auto it=mapaKorisnika.begin();it!=mapaKorisnika.end();it++){
                std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(*(it-&gt;second)).ime&lt;&lt;" "&lt;&lt;(*(it-&gt;second)).prezime&lt;&lt;std::endl;
                std::cout&lt;&lt;"Adresa: "&lt;&lt;(*(it-&gt;second)).adresa&lt;&lt;std::endl;
                std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(*(it-&gt;second)).telefon;
                std::cout&lt;&lt;std::endl;
            }
        }
        void IzlistajKnjige(){
            for(auto it=mapaKnjiga.begin();it!=mapaKnjiga.end();it++){
                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Naslov: "&lt;&lt;(*(it-&gt;second)).DajNaslov()&lt;&lt;std::endl;
</font>                std::cout&lt;&lt;"Pisac: "&lt;&lt;(*(it-&gt;second)).DajAutora()&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match167-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_27.gif"/></a>

                std::cout&lt;&lt;"Zanr: "&lt;&lt;(*(it-&gt;second)).DajZanr()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*(it-&gt;second)).DajGodinuIzdavanja()&lt;&lt;std::endl;
                if(it-&gt;second-&gt;DaLiJeZaduzena())
                    std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
                std::cout&lt;&lt;std::endl;
            }
        }
        
        void ZaduziKnjigu(int evidencijskiBroj, int clanskiBroj){
          
          auto p=mapaKnjiga.find(evidencijskiBroj);
          auto t=mapaKorisnika.find(clanskiBroj);
          if(p==mapaKnjiga.end()) throw std::logic_error("Knjiga nije nadjena");
          if(t==mapaKorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
          if(p-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena"); 
          p-&gt;second-&gt;ZaduziKnjigu(*(t-&gt;second));
          
          
        }
        void RazduziKnjigu(int evidencijskiBroj){
            auto p=mapaKnjiga.find(evidencijskiBroj);
            if(p==mapaKnjiga.end()) throw std::logic_error("Knjiga nije nadjena");
            if(p-&gt;second-&gt;DaLiJeZaduzena()==false) throw std::logic_error("Knjiga nije zaduzena");
            (*(p-&gt;second)).RazduziKnjigu();
        }
        void PrikaziZaduzenja(int clanskiBroj){
            auto t=mapaKorisnika.find(clanskiBroj);
            if(t-&gt;second==nullptr) throw std::logic_error("Korisnik nije nadjen");
            int br(0);
            for(auto it=mapaKnjiga.begin();it!=mapaKnjiga.end();it++){
                if((*(it-&gt;second)).DajKodKogaJe()==t-&gt;second){br++; IzlistajKnjige();}
            }
            if(br==0) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!"&lt;&lt;std::endl;
        }
        
};


int main ()
{
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1, "niko", "nikic", "adresa", "343-233");
    b.RegistrirajNovuKnjigu(2, "vlak u snijegu", "mato lovrak", "roman", 1931);
    b.ZaduziKnjigu(2, 1);
    b.IzlistajKnjige();
    
	return 0;
</font>}</pre>
</body>
</html>
