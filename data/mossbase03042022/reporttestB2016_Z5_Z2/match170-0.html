<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7085.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7085.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};
class Knjiga {
   std::string naslov, ime_pisca, zanr;
   int god_izdavanja;
   Korisnik *pok;
public:
<a name="0"></a><font color="#FF0000"><a href="match170-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_34.gif"/></a>

    Knjiga(std::string naslov_knjige, std::string pisac, std::string tip, int god) : naslov(naslov_knjige), 
    ime_pisca(pisac), zanr(tip), god_izdavanja(god), pok(nullptr) {}
    std::string DajNaslov() { return naslov; }
    std::string DajAutora() { return ime_pisca; }
    std::string DajZanr() { return zanr; }
    int DajGodinuIzdavanja() { return god_izdavanja; }
    Korisnik *DajKodKogaJe() { return pok; }
    void ZaduziKnjigu(Korisnik &amp;osoba){  pok = &amp;osoba; }
    void RazduziKnjigu() { pok = nullptr; }
    bool DaLiJeZaduzena() {
        if(pok == nullptr) return false;
        return true;
    }
};
class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
public:
    Biblioteka(std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; members, std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; books) : korisnici(members), knjige(books) {}
    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;bib);
    Biblioteka &amp;operator=(const Biblioteka &amp;bib);
    Biblioteka(Biblioteka &amp;&amp;bib);
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;bib);
    void RegistrirajNovogKorisnika(int clanski_broj, std::string name, std::string surname, std::string adress, std::string mob){
        auto it(korisnici.find(clanski_broj));
        if(it != korisnici.end()) throw std::logic_error("Korisnik vec postoji"); 
        std::shared_ptr&lt;Korisnik&gt; novi_korisnik(std::make_shared&lt;Korisnik&gt;());
        novi_korisnik-&gt;ime = name;
        novi_korisnik-&gt;prezime = surname;
        novi_korisnik-&gt;adresa = adress;
        novi_korisnik-&gt;telefon = mob;
        korisnici.insert(std::make_pair(clanski_broj,novi_korisnik));
        
    }
    void RegistrirajNovuKnjigu(int broj_knjige, std::string name, std::string autor, std::string type, int god){
        auto it(knjige.find(broj_knjige));
        if(it != knjige.end()) throw std::logic_error("Knjiga vec postoji");
        std::shared_ptr&lt;Knjiga&gt; nova_knjiga(std::make_shared&lt;Knjiga&gt;(name,autor,type,god));
        knjige.insert(std::make_pair(broj_knjige,nova_knjiga));
    }
    Korisnik &amp;NadjiKorisnika(int clanski_broj){
        auto it(korisnici.find(clanski_broj));
        if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        return *(it-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int broj){
        auto it(knjige.find(broj));
        if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        return *(it-&gt;second);
    }
    void IzlistajKorisnike(){
        auto it(korisnici.begin());
        while(it!=korisnici.end()){
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match170-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl;
            std::cout&lt;&lt;std::endl;
            it++;
        }
    }
    void IzlistajKnjige(){
        auto it(knjige.begin());
        while(it!=knjige.end()){
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match170-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_19.gif"/></a>

            if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "
            &lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
            std::cout&lt;&lt;std::endl;
            it++;
        }
    }
    void ZaduziKnjigu(int broj_knjige, int clanski_broj){
        auto itt(knjige.find(broj_knjige));
        if(itt-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga je vec zaduzena");
        else if(itt == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it(korisnici.find(clanski_broj));
        if(it == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        NadjiKnjigu(broj_knjige).Knjiga::ZaduziKnjigu(NadjiKorisnika(clanski_broj));
        
    }
    void RazduziKnjigu(int broj_knjige){
        auto it(knjige.find(broj_knjige));
        if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        if(!(it-&gt;second-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
        NadjiKnjigu(broj_knjige).Knjiga::RazduziKnjigu();
    }
    void PrikaziZaduzenja(int clanski_broj){
        auto pom(korisnici.find(clanski_broj));
        if(pom == korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        else{
        auto itt(korisnici.begin());
        while(itt!=korisnici.end()){
            if(itt-&gt;first == clanski_broj) break;
            itt++;
        }
        auto it(knjige.begin());
        while(it!=knjige.end()){
            if(it-&gt;second-&gt;DaLiJeZaduzena()){
                if(it-&gt;second-&gt;DajKodKogaJe()==(itt-&gt;second).get()){
                    std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                    std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>                    std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match170-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_19.gif"/></a>

                    std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
                    std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
                }
            }
                it++;
          }
       }  
    }
};

Biblioteka::Biblioteka(const Biblioteka &amp;bib){
    auto it(bib.korisnici.begin());
    auto it2(bib.knjige.begin());
    while(it!=bib.korisnici.end()){
        korisnici.insert(std::make_pair(it-&gt;first, std::make_shared&lt;Korisnik&gt;(*(it-&gt;second))));
        it++;
    }
    while(it2!=knjige.end()){
        knjige.insert(std::make_pair(it2-&gt;first, std::make_shared&lt;Knjiga&gt;(*(it2-&gt;second))));
        it2++;
    }
}
Biblioteka &amp;Biblioteka::operator=(const Biblioteka &amp;bib){
    auto novi(bib.korisnici.begin());
    auto novi2(bib.knjige.begin());
    while(novi!=bib.korisnici.end()){
        korisnici.insert(std::make_pair(novi-&gt;first, std::make_shared&lt;Korisnik&gt;(*(novi-&gt;second))));
        novi++;
    }
    while(novi2!=knjige.end()){
        knjige.insert(std::make_pair(novi2-&gt;first, std::make_shared&lt;Knjiga&gt;(*(novi2-&gt;second))));
        novi2++;
    }
        return *this;
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;bib){
    korisnici = bib.korisnici;
    knjige = bib.knjige;
}
    
Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;bib){
    korisnici = bib.korisnici;
    knjige = bib.knjige;
        return *this;
}


    
int main ()
{
	return 0;
</font>}</pre>
</body>
</html>
