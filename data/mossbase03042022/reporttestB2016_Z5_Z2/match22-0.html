<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3219.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3219.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match22-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_55.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

using namespace std;

struct Korisnik {
    string ime, prezime, adresa, telefon;
};

class Knjiga {
    string Naslov, ImePisca, Zanr;
    int GodinaIzdavanja;
    Korisnik* pok=nullptr;
    public:
    
    Knjiga(string naslov_knjige, string ime_pisca, string zanr_knjige, int god_izdanja): Naslov(naslov_knjige), ImePisca(ime_pisca), Zanr(zanr_knjige), GodinaIzdavanja(god_izdanja) {};
    string DajNaslov() const { return Naslov; };
    string DajAutora() const { return ImePisca; };
    string DajZanr() const { return Zanr; };
    int DajGodinuIzdavanja() const { return GodinaIzdavanja; };
    Korisnik* DajKodKogaJe() const { return pok; };
    void ZaduziKnjigu(Korisnik &amp;k) { pok=&amp;k; };
    void RazduziKnjigu() { pok=nullptr; };
    bool DaLiJeZaduzena() { if(pok!=nullptr) return true; else return false; };
};

class Biblioteka {
      map&lt; int, shared_ptr&lt;Korisnik&gt; &gt; MapaKorisnika;
      map&lt; int, shared_ptr&lt;Knjiga&gt;   &gt; MapaKnjiga;
      public:
      Biblioteka() {} ;
      Biblioteka( const Biblioteka &amp;bib);
      Biblioteka( Biblioteka &amp;&amp; bib);
      Biblioteka &amp;operator =(const Biblioteka &amp;bib);
      Biblioteka &amp;operator =(Biblioteka &amp;&amp;bib);
      void RegistrirajNovogKorisnika( int clanski_broj, string ime, string prezime, string adresa, string br_telefona);
      void RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime_pisca, string z, int god_izdanja);
      Korisnik&amp; NadjiKorisnika(int clanski_broj) const;
      Knjiga&amp; NadjiKnjigu(int ev_broj) const ;
      void IzlistajKorisnike() const;
      void IzlistajKnjige() const;
      void ZaduziKnjigu(int ev_broj, int clanski_broj);
      void RazduziKnjigu(int ev_broj);
      void PrikaziZaduzenja(int clanski_broj);
};

Biblioteka::Biblioteka( const Biblioteka &amp;bib) {
    auto it=bib.MapaKorisnika.begin();
    while(it!=bib.MapaKorisnika.end()) {
        MapaKorisnika.insert(make_pair(it-&gt;first, make_shared&lt;Korisnik&gt;(*(it-&gt;second))));
        it++;
    }
    auto it2=bib.MapaKnjiga.begin();
    while(it2!=bib.MapaKnjiga.end()) {
        MapaKnjiga.insert(make_pair(it2-&gt;first, make_shared&lt;Knjiga&gt;(*(it2-&gt;second))));
        it2++;
    }
}

Biblioteka::Biblioteka( Biblioteka &amp;&amp; bib){
    auto it=bib.MapaKorisnika.begin();
    while(it!=bib.MapaKorisnika.end()) {
        MapaKorisnika.insert(make_pair(it-&gt;first, it-&gt;second));
        it-&gt;second=nullptr;
        it++;
    }
    auto it2=bib.MapaKnjiga.begin();
    while(it2!=bib.MapaKnjiga.end()) {
        MapaKnjiga.insert(make_pair(it2-&gt;first, it2-&gt;second));
        it2-&gt;second=nullptr;
        it2++;
    }
}

Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;bib) {
    if(this==&amp;bib) return *this;
    auto it=MapaKorisnika.begin();
    while(it!=MapaKorisnika.end()) { it-&gt;second=nullptr; MapaKorisnika.erase(it);  it++; }
    auto it2=MapaKnjiga.begin();
    while(it2!=MapaKnjiga.end()) { it2-&gt;second=nullptr; MapaKnjiga.erase(it2); it2++; }
   
    auto it3=bib.MapaKorisnika.begin();
    while(it3!=bib.MapaKorisnika.end()) { MapaKorisnika.insert(make_pair(it3-&gt;first, make_shared&lt;Korisnik&gt;(*(it3-&gt;second)))); it3++; }
    auto it4=bib.MapaKnjiga.begin();
    while(it4!=bib.MapaKnjiga.end()) { MapaKnjiga.insert(make_pair(it4-&gt;first, make_shared&lt;Knjiga&gt;(*(it4-&gt;second)))); it4++; }
    
    return *this;
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;bib) {
    if(this==&amp;bib) return *this;
    auto it=MapaKorisnika.begin();
    while(it!=MapaKorisnika.end()) { it-&gt;second=nullptr; MapaKorisnika.erase(it); it++; }
    auto it2=MapaKnjiga.begin();
    while(it2!=MapaKnjiga.end()) { it2-&gt;second=nullptr; MapaKnjiga.erase(it2); it2++; }
    
    auto it3=bib.MapaKorisnika.begin();
    while(it3!=bib.MapaKorisnika.end()) { MapaKorisnika.insert(make_pair(it3-&gt;first, it3-&gt;second)); it3-&gt;second=nullptr; it3++; }
    auto it4=bib.MapaKnjiga.begin();
    while(it4!=bib.MapaKnjiga.end()) { MapaKnjiga.insert(make_pair(it4-&gt;first, it4-&gt;second)); it4-&gt;second=nullptr; it4++; }
    
    return *this;
}

void Biblioteka::RegistrirajNovogKorisnika( int clanski_broj, string ime, string prezime, string adresa, string br_telefona) {
    auto it=MapaKorisnika.begin();
    while(it!=MapaKorisnika.end()) { if(it-&gt;first==clanski_broj) throw logic_error ("Korisnik vec postoji"); it++; }
    Korisnik k;
    k.ime=ime; k.prezime=prezime; k.adresa=adresa; k.telefon=br_telefona;
    MapaKorisnika.insert(make_pair(clanski_broj, make_shared&lt;Korisnik&gt;(k)));
}

void Biblioteka::RegistrirajNovuKnjigu(int ev_broj, string naslov, string ime_pisca, string z, int god_izdanja){
    auto it=MapaKnjiga.begin();
    while(it!=MapaKnjiga.end()) { if(it-&gt;first==ev_broj) throw logic_error ("Knjiga vec postoji"); it++; }
    
    Knjiga k(naslov, ime_pisca, z, god_izdanja);
    MapaKnjiga.insert(make_pair(ev_broj, make_shared&lt;Knjiga&gt;(k)));
}

Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski_broj) const {
    auto it=MapaKorisnika.begin();
    while(it!=MapaKorisnika.end()) { if(it-&gt;first==clanski_broj) return *(it-&gt;second); it++; }
    throw logic_error ("Korisnik nije nadjen");
}

Knjiga&amp; Biblioteka::NadjiKnjigu(int ev_broj) const {
    auto it=MapaKnjiga.begin();
    while(it!=MapaKnjiga.end()) { if(it-&gt;first==ev_broj) return *(it-&gt;second); it++; }
    throw logic_error ("Knjiga nije nadjena");
}

void Biblioteka::IzlistajKorisnike() const {
    auto it=MapaKorisnika.begin();
    while(it!=MapaKorisnika.end()) {
        cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl;
        cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl&lt;&lt;endl;
        it++;
    }
}

void Biblioteka::IzlistajKnjige() const {
    auto it=MapaKnjiga.begin();
    while(it!=MapaKnjiga.end()) {
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
</font>        cout&lt;&lt;"Pisac: "&lt;&lt; it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="2"></a><font color="#0000FF"><a href="match22-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        if(it-&gt;second-&gt;DaLiJeZaduzena()==true) cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;endl;
        it++;
    }
}

void Biblioteka::ZaduziKnjigu(int ev_broj, int clanski_broj) {
    auto it=MapaKnjiga.begin();
    bool ima=false;
    while(it!=MapaKnjiga.end()) {
        if(ev_broj==it-&gt;first &amp;&amp; it-&gt;second-&gt;DaLiJeZaduzena()) throw logic_error ("Knjiga vec zaduzena");
        if(ev_broj==it-&gt;first) { ima=true; break; }
        it++;
    }
    if(!ima) throw logic_error ("Knjiga nije nadjena");
    auto it2=MapaKorisnika.begin();
    ima=false;
    while(it2!=MapaKorisnika.end()) {
        if(clanski_broj==it2-&gt;first) { ima=true; break; }
        it2++;
    } 
    if(!ima) throw logic_error ("Korisnik nije nadjen");
    
    it-&gt;second-&gt;ZaduziKnjigu(*(it2-&gt;second));
    
}

void Biblioteka::RazduziKnjigu(int ev_broj) {
    auto it=MapaKnjiga.begin();
    bool ima=false;
    while(it!=MapaKnjiga.end()) {
        if(ev_broj==it-&gt;first &amp;&amp; it-&gt;second-&gt;DaLiJeZaduzena()==false) throw logic_error ("Knjiga nije zaduzena");
        if(ev_broj==it-&gt;first) { ima=true; break; }
        it++;
    }
    if(!ima) throw logic_error ("Knjiga nije nadjena");
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) {
    bool ima=false;
    auto it2=MapaKorisnika.begin();
    while(it2!=MapaKorisnika.end()) {
        if(clanski_broj==it2-&gt;first) { ima=true; break; }
    }
    if(!ima) throw logic_error ("Korisnik nije nadjen");
    
    bool zaduzena=false;
    auto it=MapaKnjiga.begin();
    while(it!=MapaKnjiga.end()) {
        if(it-&gt;second-&gt;DajKodKogaJe()==it2-&gt;second.get()) {
            zaduzena=true;
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl;
            cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl;
</font>            cout&lt;&lt;"Pisac: "&lt;&lt; it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match22-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

            cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl;
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl&lt;&lt;endl;
            
        }
        it++;
    }
    if(!zaduzena) cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    
}

int main ()
{
    Biblioteka b;
    for(;;) {
        cout&lt;&lt;"Izaberite opciju: "&lt;&lt;endl;
        cout&lt;&lt;"0 - Kraj"&lt;&lt;endl&lt;&lt;"1 - Registriraj novu knjigu"&lt;&lt;endl&lt;&lt;"2 - Registriraj novog korisnika"&lt;&lt;endl&lt;&lt;"3 - Izlistaj knjige"&lt;&lt;endl&lt;&lt;"4 - Izlistaj korisnike"&lt;&lt;endl;
        cout&lt;&lt;"5 - Zaduzi knjigu"&lt;&lt;endl&lt;&lt;"6 - Razduzi knjigu"&lt;&lt;endl&lt;&lt;"7 - Prikazi zaduzenja"&lt;&lt;endl;
        int n=0; cin&gt;&gt;n;
        if(n==0) break;
        else if(n==1) {
            cin.ignore(10000, '\n');
            cout&lt;&lt;"Unesite naslov knjige: ";
            string naslov;
            getline(cin,naslov);
            cout&lt;&lt;"Unesite Ime i Prezime pisca: ";
            string imepisca; 
            getline(cin,imepisca);
            cout&lt;&lt;"Unesite zanr knjige: ";
            string zanr;
            getline(cin,zanr);
            cout&lt;&lt;"Unesite godinu izdavanja: ";
            int god; cin&gt;&gt;god;
            cout&lt;&lt;"Unesite evidencijski broj: ";
            int ev; cin&gt;&gt;ev;
            try {
                b.RegistrirajNovuKnjigu(ev,naslov,imepisca,zanr,god);
            }catch(logic_error e)  { cout&lt;&lt;e.what()&lt;&lt;endl; }
                
        }
        else if(n==2) {
            cin.ignore(10000, '\n');
            cout&lt;&lt;"Unesite ime korisnika: ";
            string ime; getline(cin,ime);
            cout&lt;&lt;"Unesite prezime korisnika: ";
            string prezime; getline(cin,prezime);
            cout&lt;&lt;"Unesite adresu korisnika: "; 
            string adresa; getline(cin,adresa);
            cout&lt;&lt;"Unesite telefonski broj korisnika: ";
            string broj; getline(cin,broj);
            cout&lt;&lt;"Unesite clanski broj korisnika: ";
            int n; cin&gt;&gt;n;
            try {
                b.RegistrirajNovogKorisnika(n,ime,prezime,adresa,broj);
            }catch(logic_error e)  { cout&lt;&lt;e.what()&lt;&lt;endl; }
        }
        else if(n==3) {
            b.IzlistajKnjige();
        }
        else if(n==4) {
            b.IzlistajKorisnike();
        }
        else if(n==5) {
            cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite zaduziti: ";
            int broj; cin&gt;&gt;broj;
            cout&lt;&lt;"Unesite clanski broj korisnika koji zaduzuje knjigu: ";
            int broj1; cin&gt;&gt;broj1;
            try {
                b.ZaduziKnjigu(broj, broj1);
            }catch (logic_error e) { cout&lt;&lt;e.what()&lt;&lt;endl; }
        }
        else if(n==6) {
            cout&lt;&lt;"Unesite evidencijski broj knjige koju zelite razduziti: ";
            int broj; cin&gt;&gt;broj;
            try {
                b.RazduziKnjigu(broj);
            }catch(logic_error e) { cout&lt;&lt;e.what()&lt;&lt;endl;}
        }
        else if(n==7) {
            cout&lt;&lt;"Unesite clanski broj korisnika cija zaduzenja zelite vidjeti: ";
            int broj; cin&gt;&gt;broj;
            try {
                b.PrikaziZaduzenja(broj);
            }catch(logic_error e) { cout&lt;&lt;e.what()&lt;&lt;endl; }
</font>        }
    }
    
	return 0;
}</pre>
</body>
</html>
