<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8004.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8004.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match802-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

using namespace std;

struct Korisnik
{
    string ime, prezime, adresa, telefon;
    Korisnik(string ime,string prezime,string adresa,string telefon):ime(ime),prezime(prezime),adresa(adresa),telefon(telefon){};
</font>    friend bool operator == (Korisnik k1, Korisnik k2)
    {
        return k1.ime==k2.ime &amp;&amp; k1.prezime==k2.prezime &amp;&amp; k1.adresa==k2.adresa &amp;&amp; k1.telefon==k2.telefon;
    }
};

class Knjiga
{
<a name="0"></a><font color="#FF0000"><a href="match802-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    string naslov,pisac,zanr;
    int godina;
    Korisnik *z;
public:
    Knjiga (string naslov, string pisac, string zanr, int godina): naslov(naslov),pisac(pisac),zanr(zanr),godina(godina),z(nullptr) {};
    string DajNaslov () const {return naslov;}
    string DajAutora () const {return pisac;}
    string DajZanr () const {return zanr;}
    int DajGodinuIzdavanja () const {return godina;}
    Korisnik* DajKodKogaJe () const {return z;}
</font>    bool DaLiJeZaduzena () { return z!=nullptr;}
    void ZaduziKnjigu (Korisnik &amp;k) {z=&amp;k;}
    void RazduziKnjigu () { z=nullptr;}
};

class Biblioteka
{
    map&lt;int,shared_ptr&lt;Korisnik&gt;&gt; k;
    map&lt;int,shared_ptr&lt;Knjiga&gt;&gt; l;
public:
    Biblioteka(){};
    Biblioteka (Biblioteka &amp;b)
    {
        for(auto x: b.k)
        {
            k.insert(make_pair(x.first, make_shared&lt;Korisnik&gt;(*x.second)));
        }
        for(auto x: b.l)
        {
            l.insert(make_pair(x.first, make_shared&lt;Knjiga&gt;(*x.second)));
        }
    }
    Biblioteka(Biblioteka&amp;&amp;b)
    {
        for(auto x: b.k)
        {
            k.insert(make_pair(x.first, x.second));
        }
        for(auto x: b.l)
        {
            l.insert(make_pair(x.first, x.second));
        }
    }
    Biblioteka &amp;operator =(Biblioteka &amp;b)
    {
        if(&amp;b!=this)
        {
            for(auto &amp;x: l) x.second=nullptr;
            for(auto &amp;x: k) x.second=nullptr;
            for(auto x: b.k) k.insert(make_pair(x.first, make_shared&lt;Korisnik&gt;(*x.second)));
            for(auto x: b.l) l.insert(make_pair(x.first, make_shared&lt;Knjiga&gt;(*x.second)));
        }
        return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b)
    {
        if(&amp;b!=this)
        {
            for(auto &amp;x: l) x.second=nullptr;
            for(auto &amp;x: k) x.second=nullptr;
            for(auto x: b.k) k.insert(make_pair(x.first, x.second));
            for(auto x: b.l) l.insert(make_pair(x.first, x.second));
        }
        return *this;
    }
    ~Biblioteka()
    {
        for(auto &amp;x: l) x.second=nullptr;
        for(auto &amp;x: k) x.second=nullptr;
    }
    void RegistrirajNovogKorisnika(int br, string i, string p, string a, string t)
    {
        bool ima=false;
        for(auto x:k) if(x.first==br) ima=true;
        if(ima) throw logic_error("Korisnik vec postoji");
        k.insert(make_pair(br, make_shared&lt;Korisnik&gt;(i,p,a,t)));
    }
    void RegistrirajNovuKnjigu(int br,string ime,string pisac,string zanr,int godina)
    {
        bool ima=false;
        for(auto x:l) if(x.first==br) ima=true;
        if(ima) throw logic_error("Knjiga vec postoji");
        l.insert(make_pair(br, make_shared&lt;Knjiga&gt;(ime,pisac,zanr,godina)));
    }
    Korisnik &amp;NadjiKorisnika (int br)
    {
        for(auto x:k) if(x.first==br) return *x.second;
        throw logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu (int br)
    {
        for(auto x:l) if(x.first==br) return *x.second;
        throw logic_error("Knjiga nije nadjena");
    }
    void ZaduziKnjigu(int knj, int kor)
    {
        bool ima=false;
        for(auto x: l) if(x.first==knj) { ima=true; if(x.second-&gt;DajKodKogaJe()!=nullptr) throw logic_error("Knjiga vec zaduzena"); }
        if(!ima) throw logic_error("Knjiga nije nadjena");
        ima=false;
        for(auto x: k) if(x.first==kor) ima=true;
        if(!ima) throw logic_error("Korisnik nije nadjen");
        l[knj]-&gt;ZaduziKnjigu(*k[kor]);
    }
    void RazduziKnjigu(int br)
    {
        bool ima=false;
        for(auto x: l) if(x.first==br) { ima=true; if(x.second-&gt;DajKodKogaJe()==nullptr) throw logic_error("Knjiga nije zaduzena"); }
        if(!ima) throw logic_error("Knjiga nije nadjena");
        l[br]-&gt;RazduziKnjigu();
    }
<a name="1"></a><font color="#00FF00"><a href="match802-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    void IzlistajKorisnike()
    {
        for(auto x: k)
        {
          cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;endl;
          cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;endl;
          cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;endl;
</font>          cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon&lt;&lt;endl;
          cout&lt;&lt;endl;
        }
    } 
<a name="2"></a><font color="#0000FF"><a href="match802-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    void IzlistajKnjige()
    {
        for(auto x:l)
        {
          cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;endl;
          cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;endl;
          cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;endl;
</font><a name="6"></a><font color="#00FF00"><a href="match802-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

          cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;endl;
          cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
          if(x.second-&gt;DajKodKogaJe()!=nullptr)
</font><a name="3"></a><font color="#00FFFF"><a href="match802-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

          cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
          cout&lt;&lt;endl;
        }
    } 
    void PrikaziZaduzenja(int br)
</font>    {
        bool ima=false;
        for(auto x: k) if(x.first==br) ima=true;
        if(!ima) throw logic_error("Korisnik nije nadjen");
        for(auto x: l)
        {
            if(*k[br]==*x.second-&gt;DajKodKogaJe())
            {
<a name="5"></a><font color="#FF0000"><a href="match802-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

              cout&lt;&lt;"Evidencijski broj: "&lt;&lt;x.first&lt;&lt;endl;
              cout&lt;&lt;"Naslov: "&lt;&lt;x.second-&gt;DajNaslov()&lt;&lt;endl;
              cout&lt;&lt;"Pisac: "&lt;&lt;x.second-&gt;DajAutora()&lt;&lt;endl;
</font>              cout&lt;&lt;"Zanr: "&lt;&lt;x.second-&gt;DajZanr()&lt;&lt;endl;
              cout&lt;&lt;"Godina izdavanja: "&lt;&lt;x.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
              cout&lt;&lt;endl;
            }
        }
    }
};

int main ()
{
	
	return 0;
}</pre>
</body>
</html>
