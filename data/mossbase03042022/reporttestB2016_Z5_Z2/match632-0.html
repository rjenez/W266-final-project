<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9972.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9972.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match632-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
using namespace std;

struct Korisnik
{
    string ime, prezime, adresa, telefon;
};

class Knjiga
{
    string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *korisnik=nullptr;
    bool zaduzen=false;
</font>     
    public:
    
    Knjiga(string name, string ime, string vrsta, int datum)
    {
<a name="3"></a><font color="#00FFFF"><a href="match632-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        naslov=name; ime_pisca=ime; zanr=vrsta; godina_izdavanja=datum;
        korisnik=nullptr;
        zaduzen=false;
    }
    
    string DajNaslov() const {return naslov;}
    string DajAutora() const {return ime_pisca;}
    string DajZanr() const  {return zanr;}
    int DajGodinuIzdavanja() {return godina_izdavanja;}
    Korisnik* DajKodKogaJe() {return korisnik;}
</font>    
    void ZaduziKnjigu(Korisnik &amp;k) {korisnik=&amp;k; zaduzen=true;}
    void RazduziKnjigu() {korisnik=nullptr; zaduzen=false;}
<a name="7"></a><font color="#0000FF"><a href="match632-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    bool DaLiJeZaduzena() {return zaduzen;}
    
};

class Biblioteka
{
    map&lt;int, shared_ptr&lt;Korisnik&gt; &gt; korisnici;
    map&lt;int, shared_ptr&lt;Knjiga&gt; &gt; knjige;
    
    public:
</font>    
    Biblioteka() {};
    
    ~Biblioteka()
    {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
            it-&gt;second=nullptr;
        
         for(auto it=knjige.begin(); it!=knjige.end(); it++)
            it-&gt;second=nullptr;
    }
    
    Biblioteka(const Biblioteka &amp;v)
       {
           for(auto it=v.korisnici.begin();it!=v.korisnici.end();it++)
<a name="5"></a><font color="#FF0000"><a href="match632-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

           korisnici[it-&gt;first]= make_shared&lt;Korisnik&gt;(Korisnik{it-&gt;second-&gt;ime, it-&gt;second-&gt;prezime,it-&gt;second-&gt;adresa,it-&gt;second-&gt;telefon});
           
           for(auto it=knjige.begin(); it!=knjige.end(); it++)
</font>           {
              knjige[it-&gt;first]= make_shared&lt;Knjiga&gt;(Knjiga{it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()});
           }
       }
       
    Biblioteka(const Biblioteka &amp;&amp;v)
       {
         for(auto it=v.korisnici.begin();it!=v.korisnici.end();it++)
           korisnici[it-&gt;first]=nullptr;
           
          for(auto it=knjige.begin(); it!=knjige.end(); it++)
           
              knjige[it-&gt;first]=nullptr;
           
       }
    Biblioteka operator=(const Biblioteka &amp;&amp;v)
    {
        if(&amp;v==this)return *this;
     for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
            it-&gt;second=nullptr;
        
         for(auto it=knjige.begin(); it!=knjige.end(); it++)
            it-&gt;second=nullptr;
            
      for(auto it=v.korisnici.begin();it!=v.korisnici.end();it++)
           korisnici[it-&gt;first]=nullptr;
           
          for(auto it=knjige.begin(); it!=knjige.end(); it++)
           
              knjige[it-&gt;first]=nullptr;
           return *this;   
    }
       
    Biblioteka operator=(const Biblioteka &amp;v)
    {
        if(this==&amp;v)return *this;
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
            it-&gt;second=nullptr;
        
         for(auto it=knjige.begin(); it!=knjige.end(); it++)
            it-&gt;second=nullptr;
            
            for(auto it=v.korisnici.begin();it!=v.korisnici.end();it++)
<a name="6"></a><font color="#00FF00"><a href="match632-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

           korisnici[it-&gt;first]=make_shared&lt;Korisnik&gt;(Korisnik{it-&gt;second-&gt;ime, it-&gt;second-&gt;prezime,it-&gt;second-&gt;adresa,it-&gt;second-&gt;telefon});
           
           for(auto it=knjige.begin(); it!=knjige.end(); it++)
</font>           {
              knjige[it-&gt;first]=make_shared&lt;Knjiga&gt;(Knjiga{it-&gt;second-&gt;DajNaslov(), it-&gt;second-&gt;DajAutora(),it-&gt;second-&gt;DajZanr(),it-&gt;second-&gt;DajGodinuIzdavanja()});
           }
           
           return *this;
    }
    
    void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon)
    {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
            if(it-&gt;first==clanski_broj)
                throw logic_error("Korisnik vec postoji");
        korisnici[clanski_broj]=make_shared&lt;Korisnik&gt;(Korisnik{ime, prezime, adresa, telefon});
    }
    
    void RegistrirajNovuKnjigu(int evid_broj, string naziv, string pisac, string zanr, int date)
    {
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
            if(it-&gt;first==evid_broj)
                throw logic_error("Knjiga vec postoji");
        knjige[evid_broj]=make_shared&lt;Knjiga&gt;(naziv, pisac, zanr, date);
    }
    
<a name="2"></a><font color="#0000FF"><a href="match632-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    Korisnik &amp;NadjiKorisnika(int broj)
    {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
            if(it-&gt;first==broj)
                return *it-&gt;second;
        throw logic_error("Korisnik nije nadjen");
    }
    
    Knjiga &amp;NadjiKnjigu(int broj)
</font><a name="8"></a><font color="#00FFFF"><a href="match632-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    {
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
            if(it-&gt;first==broj)
                return *it-&gt;second;
</font>        throw logic_error("Knjiga nije nadjena");
    }
    
    void IzlistajKorisnike()
    {
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
        {
<a name="4"></a><font color="#FF00FF"><a href="match632-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;endl;
            cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;endl&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;endl&lt;&lt;endl;
</font>        }
    }
    
    void IzlistajKnjige()
    {
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
        {
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
<a name="0"></a><font color="#FF0000"><a href="match632-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

            cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
            if(it-&gt;second-&gt;DaLiJeZaduzena())
                cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
            cout&lt;&lt;endl;
</font>        }
    }
    
    void ZaduziKnjigu(int evid_br, int cl_br)
    {
        bool moze1=false, moze2=false;
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
        {
            if(it-&gt;first==evid_br)
                moze1=true;
            if(it-&gt;first==evid_br &amp;&amp; it-&gt;second-&gt;DaLiJeZaduzena())
                throw logic_error("Knjiga vec zaduzena");
        }
        if(!moze1) throw logic_error("Knjiga nije nadjena");
    
        for(auto it=korisnici.begin(); it!=korisnici.end(); it++)
            if(it-&gt;first==cl_br)
                moze2=true;
        if(!moze2) throw logic_error("Korisnik nije nadjen");
        
        
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
        {
            if(it-&gt;first==evid_br)
                for(auto it1=korisnici.begin(); it1!=korisnici.end(); it1++)
                    if(it1-&gt;first==cl_br)
                    {
                        it-&gt;second-&gt;ZaduziKnjigu(*it1-&gt;second);
                    }
        
        }
    }
    
    void RazduziKnjigu(int evid_br)
    {
        bool moze1=false;
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
         {
             if(it-&gt;first==evid_br)
                moze1=true;
            if(it-&gt;first==evid_br &amp;&amp; it-&gt;second-&gt;DaLiJeZaduzena()==0)
                throw logic_error("Knjiga nije zaduzena");
         }
        if(!moze1) throw logic_error("Knjiga nije nadjena");
        
        for(auto it=knjige.begin(); it!=knjige.end(); it++)
            if(it-&gt;first==evid_br)
                it-&gt;second-&gt;Knjiga::RazduziKnjigu();
    }
    
    void PrikaziZaduzenja(int cl_br)
    {
        int ima=-1;
        for(auto it1=korisnici.begin(); it1!=korisnici.end(); it1++)
            if(it1-&gt;first==cl_br)
            {
                ima=0;
                for(auto it=knjige.begin(); it!=knjige.end(); it++)
                    if(it-&gt;second-&gt;DaLiJeZaduzena())
                       if(it-&gt;second-&gt;DajKodKogaJe()-&gt;ime==it1-&gt;second-&gt;ime &amp;&amp; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime==it1-&gt;second-&gt;prezime &amp;&amp; it-&gt;second-&gt;DajKodKogaJe()-&gt;adresa==it1-&gt;second-&gt;adresa &amp;&amp; it-&gt;second-&gt;DajKodKogaJe()-&gt;telefon==it1-&gt;second-&gt;telefon)
                            {
                                cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;endl&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;endl&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;endl;
                                cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
                                cout&lt;&lt;endl;
                                ima=1;
                            }
            }
        if(ima==0) cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
        if(ima==-1) throw logic_error("Korisnik nije nadjen");
        
    }
};




int main ()
{
Korisnik k2 { "Niko", "Nikic", "Zmaja od Bosne bb", "123 456"};
Knjiga knj2("Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
knj2.ZaduziKnjigu(k2);
if(!knj2.DaLiJeZaduzena()) std::cout &lt;&lt; "Knjiga je slobodna";
else std::cout &lt;&lt; "Knjiga je zaduzena";
knj2.RazduziKnjigu();
if(!knj2.DaLiJeZaduzena()) std::cout &lt;&lt; "\nKnjiga je slobodna";
else std::cout &lt;&lt; "\nKnjiga je zaduzena";
    
    /*
    Knjiga knj1("IM2", "Huse Fatkic", "Horor", 1979);
    cout&lt;&lt;endl&lt;&lt;endl&lt;&lt;knj1.DajAutora();
    cout&lt;&lt;endl;
    Biblioteka da;
    da.RegistrirajNovogKorisnika(17392, "Suljo", "Hero", "Prozor", "2347890");
    cout&lt;&lt;endl&lt;&lt;da.NadjiKorisnika(17392).ime;
    cout&lt;&lt;endl&lt;&lt;endl;
    da.IzlistajKorisnike();
    cout&lt;&lt;endl&lt;&lt;endl;
    da.RegistrirajNovuKnjigu(1211, "Starac i more", "Hemingvej", "Avanturisticki", 1967);
    da.ZaduziKnjigu(1211, 17392);
    da.IzlistajKnjige();
    da.RazduziKnjigu(1211);
    Biblioteka d;
    d=da;
    da.PrikaziZaduzenja(17392);
    cout&lt;&lt;endl&lt;&lt;endl;
    d.IzlistajKorisnike();*/
	return 0;
}</pre>
</body>
</html>
