<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6995.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2155.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt; 
<a name="2"></a><font color="#0000FF"><a href="match111-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

struct Korisnik{
std::string ime,prezime,adresa,telefon;
};
class Knjiga{
    std::string naslov,ime_pisca,zanr;
    Korisnik *korisnik;
    int godina_izdavanja;
    public:
    Knjiga(std::string naslov,std::string ime_pisca,std::string zanr,int godina_izdavanja):
    naslov(naslov),ime_pisca(ime_pisca),zanr(zanr),godina_izdavanja(godina_izdavanja),
</font>    korisnik(nullptr){}
    std::string DajNaslov() const{return naslov;}
    std::string DajAutora() const{return ime_pisca;}
<a name="1"></a><font color="#00FF00"><a href="match111-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

    std::string DajZanr() const{return zanr;}
    int DajGodinuIzdavanja() const{return godina_izdavanja;}
    Korisnik* DajKodKogaJe() const{return korisnik;}
    void ZaduziKnjigu(Korisnik &amp;k){Knjiga::korisnik=&amp;k;}
    void RazduziKnjigu(){korisnik=nullptr;}
    bool DaLiJeZaduzena(){return korisnik;}
};
class Biblioteka{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
  public:
  Biblioteka(){}
  Biblioteka(const Biblioteka &amp;k);
  Biblioteka &amp;operator =(const Biblioteka &amp;k);
  Biblioteka(Biblioteka &amp;&amp;k):korisnici(std::move(k.korisnici)),
  knjige(std::move(k.knjige)){}
  Biblioteka &amp;operator =(Biblioteka &amp;&amp;k){
     korisnici=std::move(k.korisnici);
     knjige=std::move(k.knjige);
     return *this;
  }
  void RegistrirajNovogKorisnika(int clanski_broj,std::string ime,
  std::string prezime,std::string adresa,std::string telefon);
</font>  void RegistrirajNovuKnjigu(int evidencijski_broj,std::string naslov,
  std::string ime_pisca,std::string zanr,int godina_izdavanja);
  Korisnik &amp;NadjiKorisnika(int clanski_broj);
<a name="0"></a><font color="#FF0000"><a href="match111-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_78.gif"/></a>

  Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
  void IzlistajKorisnike() const;
  void IzlistajKnjige() const;
  void ZaduziKnjigu(int evidencijski_broj,int clanski_broj);
  void RazduziKnjigu(int evidencijski_broj);
  void PrikaziZaduzenja(int clanski_broj) const;
};
  Biblioteka::Biblioteka(const Biblioteka &amp;k){
       for(auto x:k.korisnici){
         korisnici[x.first]=std::make_shared&lt;Korisnik&gt;();
         korisnici[x.first]-&gt;ime=x.second-&gt;ime;
         korisnici[x.first]-&gt;prezime=x.second-&gt;prezime;
         korisnici[x.first]-&gt;adresa=x.second-&gt;adresa;
         korisnici[x.first]-&gt;telefon=x.second-&gt;telefon;
       }
       for(auto x:k.knjige){
         knjige[x.first]=std::make_shared&lt;Knjiga&gt;(*x.second);
       }
   }
   Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;k){
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; tmp1;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; tmp2;
       for(auto x:k.korisnici){
          tmp1[x.first]=std::make_shared&lt;Korisnik&gt;();
          tmp1[x.first]-&gt;ime=x.second-&gt;ime;
          tmp1[x.first]-&gt;prezime=x.second-&gt;prezime;
          tmp1[x.first]-&gt;adresa=x.second-&gt;adresa;
          tmp1[x.first]-&gt;telefon=x.second-&gt;telefon;
       }
       for(auto x:k.knjige){
         tmp2[x.first]=std::make_shared&lt;Knjiga&gt;(*x.second);
       }
        korisnici=std::move(tmp1);
        knjige=std::move(tmp2);
     return *this;
   }
void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj,std::string ime,
  std::string prezime,std::string adresa,std::string telefon){
      if(korisnici.find(clanski_broj) != korisnici.end())
        throw std::logic_error("Korisnik vec postoji");
    korisnici[clanski_broj] = std::make_shared&lt;Korisnik&gt;();
    korisnici[clanski_broj]-&gt;ime=ime;korisnici[clanski_broj]-&gt;prezime=prezime;
    korisnici[clanski_broj]-&gt;adresa=adresa;korisnici[clanski_broj]-&gt;telefon=telefon;
  }
 void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj,std::string naslov,
 std::string ime_pisca,std::string zanr,int godina_izdavanja){
      if(knjige.find(evidencijski_broj) != knjige.end())
        throw std::logic_error("Knjiga vec postoji");
        knjige[evidencijski_broj]=std::make_shared&lt;Knjiga&gt;(naslov,ime_pisca,zanr,godina_izdavanja);
  }
  Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj){
      auto it(korisnici.find(clanski_broj));
      if(it != korisnici.end())
        return *korisnici[clanski_broj];
      else throw std::logic_error("Korisnik nije nadjen");  
  }
  Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj){
      auto it(knjige.find(evidencijski_broj));
      if(it != knjige.end())
        return *knjige[evidencijski_broj];
      else throw std::logic_error("Knjiga nije nadjena");  
  }
  void Biblioteka::IzlistajKorisnike() const{
      for(auto it(korisnici.begin());it != korisnici.end();it++){
          if(it != korisnici.begin())std::cout &lt;&lt; "\n";
          std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; "\n";
          std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; "\n";
          std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; "\n";
          std::cout &lt;&lt; "Broj telefona: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; "\n";
      }
  }
  void Biblioteka::IzlistajKnjige() const{
      for(auto it(knjige.begin());it != knjige.end();it++){
          if(it != knjige.begin())std::cout &lt;&lt; "\n";
          std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; "\n";
          std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; "\n";
          std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; "\n";
          std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; "\n";
          std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; "\n";
          if(it-&gt;second-&gt;DaLiJeZaduzena()){
              std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; 
              it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
          }
      }
  }
  void Biblioteka::ZaduziKnjigu(int evidencijski_broj,int clanski_broj){
      auto k(knjige.find(evidencijski_broj));
      auto kor(korisnici.find(clanski_broj));
      if(k==knjige.end()){
          throw std::logic_error("Knjiga nije nadjena");
      }else if(k-&gt;second-&gt;DajKodKogaJe()){
          throw std::logic_error("Knjiga vec zaduzena");
      }else if(kor==korisnici.end()){
          throw std::logic_error("Korisnik nije nadjen");
      }
      k-&gt;second-&gt;ZaduziKnjigu(*kor-&gt;second);
  }
 void Biblioteka::RazduziKnjigu(int evidencijski_broj){
     auto k(knjige.find(evidencijski_broj));
     if(k == knjige.end())
        throw std::logic_error("Knjiga nije nadjena");
    else if(!k-&gt;second-&gt;DaLiJeZaduzena()){
        throw std::logic_error("Knjiga nije zaduzena");
    }
    k-&gt;second-&gt;RazduziKnjigu();
 }
 void Biblioteka::PrikaziZaduzenja(int clanski_broj) const{
     auto it(korisnici.find(clanski_broj));
     if(it == korisnici.end())
        throw std::logic_error("Korisnik nije nadjen");
    bool nema_zaduzenja(true);
    for(auto it1(knjige.begin());it1 != knjige.end();it1++){
        if(it1-&gt;second-&gt;DajKodKogaJe() == it-&gt;second.get()){
          if(!nema_zaduzenja)std::cout &lt;&lt; "\n";
          nema_zaduzenja=false;
          std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it1-&gt;first &lt;&lt; "\n";
          std::cout &lt;&lt; "Naslov: " &lt;&lt; it1-&gt;second-&gt;DajNaslov() &lt;&lt; "\n";
          std::cout &lt;&lt; "Pisac: " &lt;&lt; it1-&gt;second-&gt;DajAutora() &lt;&lt; "\n";
          std::cout &lt;&lt; "Zanr: " &lt;&lt; it1-&gt;second-&gt;DajZanr() &lt;&lt; "\n";
          std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; it1-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; "\n";
        }
    }
    if(nema_zaduzenja)
        std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";
 }
int main ()
{
    Knjiga a("a","a","b",1);
</font>	return 0;
}</pre>
</body>
</html>
