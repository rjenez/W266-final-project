<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3717.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3717.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;map&gt;
#include&lt;stdexcept&gt;
#include&lt;memory&gt;

struct Korisnik{
  std::string ime, prezime, adresa, telefon;
};

class Knjiga{
  std::string naslov, pisac, zanr;
  int godina_izdavanja;
  Korisnik *pok;
  public:
  Knjiga(std::string naslov1, std::string pisac1, std::string zanr1, int godina_izdavanja1): naslov(naslov1), 
  pisac(pisac1), zanr(zanr1), godina_izdavanja(godina_izdavanja1), pok(nullptr){}
  std::string DajNaslov()const{ return naslov; }
  std::string DajAutora()const{ return pisac; }
  std::string DajZanr()const{ return zanr; }
  int DajGodinuIzdavanja()const{ return godina_izdavanja; }
<a name="2"></a><font color="#0000FF"><a href="match198-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_15.gif"/></a>

  Korisnik *DajKodKogaJe()const{ return pok; }
  void ZaduziKnjigu(Korisnik &amp;k){
      pok=&amp;k;
  }
  void RazduziKnjigu(){ pok=nullptr; }
  bool DaLiJeZaduzena(){
      if(!pok) return false;
      return true;
  }
};

class Biblioteka{
  std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
  std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;  
  public:
  Biblioteka()=default;
  Biblioteka(const Biblioteka &amp;b);
  Biblioteka(Biblioteka &amp;&amp;b){
    std::swap(korisnici,b.korisnici);
    std::swap(knjige,b.knjige);
  }
  Biblioteka &amp;operator =(const Biblioteka &amp;b)=delete;
  Biblioteka &amp;operator =(Biblioteka &amp;&amp;b)=delete;
  void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona);
</font>  void RegistrirajNovuKnjigu(int evidencijki_broj, std::string naslov, std::string ime, std::string zanr, int godina_izdavanja);
  Korisnik &amp;NadjiKorisnika(int clanski_broj);
<a name="0"></a><font color="#FF0000"><a href="match198-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_40.gif"/></a>

  Knjiga &amp;NadjiKnjigu(int evidencijki_broj);
  void IzlistajKorisnike()const;
  void IzlistajKnjige()const;
  void ZaduziKnjigu(int evidencijki_broj, int clanski_broj);
  void RazduziKnjigu(int evidencijki_broj);
  void PrikaziZaduzenja(int clanski_broj)const;
};

  void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona){
    if(!korisnici.count(clanski_broj)){
      korisnici[clanski_broj] = std::make_shared&lt;Korisnik&gt;();
      korisnici[clanski_broj]-&gt;ime=ime;
      korisnici[clanski_broj]-&gt;prezime=prezime;
      korisnici[clanski_broj]-&gt;adresa=adresa;
      korisnici[clanski_broj]-&gt;telefon=broj_telefona;
    }
    else
      throw std::logic_error("Korisnik vec postoji");
  }
  
  void Biblioteka::RegistrirajNovuKnjigu(int evidencijki_broj, std::string naslov, std::string ime, std::string zanr, int godina_izdavanja){
    if(!knjige.count(evidencijki_broj)){
      knjige[evidencijki_broj] = std::make_shared&lt;Knjiga&gt;(naslov, ime, zanr, godina_izdavanja);
    }
    else
      throw std::logic_error("Knjiga vec postoji");
  }
  
  Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj){
    if(korisnici.count(clanski_broj))
      return *korisnici[clanski_broj];
    else
      throw std::logic_error("Korisnik nije nadjen");
  }
  
  Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijki_broj){
    if(knjige.count(evidencijki_broj))
      return *knjige[evidencijki_broj];
    else
      throw std::logic_error("Knjiga nije nadjena");
  }
  
  void Biblioteka::IzlistajKorisnike()const{
    for(auto x: korisnici){
      std::cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;std::endl;
      std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;std::endl;
      std::cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;std::endl;
      std::cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
  }
  
  void Biblioteka::IzlistajKnjige()const{
    for(auto y: knjige){
      std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;y.first&lt;&lt;std::endl;
      std::cout&lt;&lt;"Naslov: "&lt;&lt;y.second-&gt;DajNaslov()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Pisac: "&lt;&lt;y.second-&gt;DajAutora()&lt;&lt;std::endl;
</font><a name="1"></a><font color="#00FF00"><a href="match198-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_22.gif"/></a>

      std::cout&lt;&lt;"Zanr: "&lt;&lt;y.second-&gt;DajZanr()&lt;&lt;std::endl;
      std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;y.second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
      if(y.second-&gt;DaLiJeZaduzena()){
        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;y.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;y.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
      }
    }
  }
  
  void Biblioteka::ZaduziKnjigu(int ev_broj, int cl_broj){
    auto it(knjige.find(ev_broj));
    if(it==knjige.end())
      throw std::logic_error("Knjiga nije nadjena");
    auto it1(korisnici.find(cl_broj));
    if(it1==korisnici.end())
      throw std::logic_error("Korisnik nije nadjen");
    bool pom(NadjiKnjigu(ev_broj).DaLiJeZaduzena());
    if(pom)
      throw std::logic_error("Knjiga vec zaduzena");
    NadjiKnjigu(ev_broj).ZaduziKnjigu(NadjiKorisnika(cl_broj));
  }
  
  Biblioteka::Biblioteka(const Biblioteka &amp;b){
    for(auto it = korisnici.begin(); it != korisnici.end(); it++)
      korisnici[it-&gt;first] = std::make_shared&lt;Korisnik&gt;(*it-&gt;second);
    for(auto it = knjige.begin(); it != knjige.end(); it++)
      knjige[it-&gt;first] = std::make_shared&lt;Knjiga&gt;(*it-&gt;second);
</font>  }

  
int main (){
    
	return 0;
}</pre>
</body>
</html>
