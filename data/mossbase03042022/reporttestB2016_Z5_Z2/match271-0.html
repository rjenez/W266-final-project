<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student1579.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student1579.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include&lt;string&gt;
#include&lt;utility&gt;
#include&lt;map&gt;
#include&lt;stdexcept&gt;
#include&lt;memory&gt;
struct Korisnik {
    std::string ime,prezime,adresa,telefon;
};
class Knjiga
{
    std::string naslovknjige,imepisca,zanr;
<a name="3"></a><font color="#00FFFF"><a href="match271-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    int godinaizdavanja;
    std::shared_ptr&lt;Korisnik&gt; zaduzio=nullptr;
public:
    Knjiga (std::string naslov,std::string pisac,std::string zan,int godina):naslovknjige(naslov),imepisca(pisac),zanr(zan),godinaizdavanja(godina) {    }
</font>    std::string DajNaslov() const{
        return naslovknjige;
    }
    std::string DajAutora() const {
<a name="0"></a><font color="#FF0000"><a href="match271-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_29.gif"/></a>

        return imepisca;
    }
    std::string DajZanr() const{
        return zanr;
    }
    int DajGodinuIzdavanja()const {
        return godinaizdavanja;
    }
    std::shared_ptr&lt;Korisnik&gt;  DajKodKogaJe()const {
        return zaduzio;
    }
    void ZaduziKnjigu(Korisnik &amp;zaduzuje) {
        zaduzio=(std::make_shared&lt;Korisnik&gt;(zaduzuje));
    }
    void RazduziKnjigu() {
        zaduzio=nullptr;
    }
    bool DaLiJeZaduzena()const {
        if(zaduzio==nullptr) return false;
        return true;
    }
};
class Biblioteka
{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt; &gt; mapakorisnika;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt; &gt; mapaknjiga;
public:
  
    void RegistrirajNovogKorisnika(int x,std::string ime,std::string prezime,std::string adresa,std::string brtel) {
        Korisnik k{ime,prezime,adresa,brtel};
          std::shared_ptr&lt;Korisnik&gt;  pom(std::make_shared &lt;Korisnik&gt; (k));
          if(!mapakorisnika.count(x)) mapakorisnika[x]=pom;
        else throw std::logic_error("Korisnik vec postoji");
        
    }
    void RegistrirajNovuKnjigu(int x,std::string naslov,std::string imep, std::string zanr,int godina) {
        Knjiga k{naslov,imep,zanr,godina};
        std::shared_ptr&lt;Knjiga&gt; pom(std::make_shared &lt;Knjiga&gt; (k));
        if(!mapaknjiga.count(x)) mapaknjiga[x]=pom;
        else throw std::logic_error("Knjiga vec postoji");
    }
    Korisnik &amp;NadjiKorisnika(int x)const {
        auto it(mapakorisnika.find(x));
        if(it==mapakorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
        else {
            return *(it-&gt;second);
        }
    }
    Knjiga &amp;NadjiKnjigu(int x)const {
        auto it(mapaknjiga.find(x));
        if(it==mapaknjiga.end()) throw std::logic_error("Korisnik nije nadjen");
        else {
            return *(it-&gt;second);
        }
    }
    void IzlistajKorisnike() const{
        for(auto it=mapakorisnika.begin(); it!=mapakorisnika.end(); it++) {
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match271-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    void IzlistajKnjige()const {
        for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) {
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>            std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
            if(!it-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;std::endl;
            else
<a name="2"></a><font color="#0000FF"><a href="match271-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

                std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    void ZaduziKnjigu(int x,int y) {
        auto it(mapaknjiga.find(x));
        if(it==mapaknjiga.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it1(mapakorisnika.find(y));
</font>        if(it1==mapakorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
        if(!it-&gt;second-&gt;DaLiJeZaduzena())
            (it-&gt;second)-&gt;ZaduziKnjigu(*(it1-&gt;second));
        else {
            throw std::logic_error("Knjiga vec zaduzena");
        }
    }
<a name="1"></a><font color="#00FF00"><a href="match271-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    void RazduziKnjigu(int x) {
        auto it(mapaknjiga.find(x));
        if(it==mapaknjiga.end()) throw std::logic_error("Knjiga nije nadjena");
        if(!it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        it-&gt;second-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int x) const{
        auto it1(mapakorisnika.find(x));
</font>        bool ima=true;
        if(it1==mapakorisnika.end()) throw std::logic_error("Korisnik nije nadjen");
        for(auto it=mapaknjiga.begin(); it!=mapaknjiga.end(); it++) {
            if((it-&gt;second-&gt;DajKodKogaJe()-&gt;ime)==it1-&gt;second-&gt;ime &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime)==it1-&gt;second-&gt;prezime &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;adresa)==it1-&gt;second-&gt;adresa &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;telefon)==it1-&gt;second-&gt;telefon) {
                ima=false;
                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
            }
        }
        if(ima){
            throw std::logic_error("Nema zaduzenja za tog korisnika!");
        }
    }
};
int main ()
{
    Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
    bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    bib8.ZaduziKnjigu(2, 1);
    bib8.IzlistajKnjige();
    return 0;
}</pre>
</body>
</html>
