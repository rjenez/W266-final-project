<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4628.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4628.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

<a name="0"></a><font color="#FF0000"><a href="match192-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_47.gif"/></a>

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    std::shared_ptr&lt;Korisnik&gt; zaduzena;
public:
    Knjiga(std::string ime_knjige, std::string pisac, std::string tip, int g) {
        naslov = ime_knjige; ime_pisca = pisac; zanr = tip; godina_izdavanja = g; zaduzena = nullptr;
    }
    std::string DajNaslov() const{ return naslov; }
    std::string DajAutora() const{ return ime_pisca; }
    std::string DajZanr() const{ return zanr; }
    int DajGodinuIzdavanja() const{ return godina_izdavanja; }
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const{ return zaduzena; }
    
    void ZaduziKnjigu(Korisnik &amp;k) {
        zaduzena = std::shared_ptr&lt;Korisnik&gt;(&amp;k); 
    }
    void RazduziKnjigu() { zaduzena = nullptr; }
    bool DaLiJeZaduzena() const{ 
        if(zaduzena == nullptr) return false; 
        return true;
    }  
    friend class Biblioteka;
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; clanovi;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
public:
    //kopirajuci konstruktor i operator dodjele
/*    ~Biblioteka() {
        for(auto it = clanovi.begin(); it != clanovi.end(); it++) delete it-&gt;second;
        for(auto it = knjige.begin(); it != knjige.end(); it++) delete it-&gt;second;
    }*/
    void RegistrirajNovogKorisnika(int clanski_br, std::string ime_korisnika, std::string prezime_korisnika, std::string adresa_korisnika, std::string br_tel) {
        if(clanovi.find(clanski_br) != clanovi.end()) throw std::logic_error("Korisnik vec postoji");
        Korisnik k;
        k.ime = ime_korisnika; k.prezime = prezime_korisnika; k.adresa = adresa_korisnika; k.telefon = br_tel;
        std::shared_ptr&lt;Korisnik&gt; p = std::make_shared&lt;Korisnik&gt;(k);
        clanovi[clanski_br] = p;
    }
    void RegistrirajNovuKnjigu(int evidenciski_br, std::string ime_knjige, std::string pisac, std::string tip, int g){
        if(knjige.find(evidenciski_br) != knjige.end()) throw std::logic_error("Knjiga vec postoji");
        Knjiga k(ime_knjige, pisac, tip, g);
        std::shared_ptr&lt;Knjiga&gt; p = std::make_shared&lt;Knjiga&gt;(k);
        knjige[evidenciski_br] = p;
    }
    Korisnik &amp;NadjiKorisnika(int clanski_br) {
        auto it = clanovi.find(clanski_br);
        if(it != clanovi.end()) return *clanovi[clanski_br];
        else throw std::logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu(int evidenciski_br) {
        auto it = knjige.find(evidenciski_br);
        if(it != knjige.end()) return *knjige[evidenciski_br];
        else throw std::logic_error("Knjiga nije nadjena");
    }
    void IzlistajKorisnike() {
        auto it = clanovi.begin();
        while (it != clanovi.end()) {
            std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;ime &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Adresa: " &lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match192-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

            std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
            it++;
        }
    }
    void IzlistajKnjige() {
        auto it = knjige.begin();
        while (it != knjige.end()) {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match192-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_22.gif"/></a>

            std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            
            if((it-&gt;second)-&gt;DaLiJeZaduzena()){
                std::cout &lt;&lt; "Zaduzena kod korisnika: ";
                auto zaduzio((it-&gt;second)-&gt;zaduzena);
                std::cout &lt;&lt; zaduzio-&gt;ime &lt;&lt; " " &lt;&lt; zaduzio-&gt;prezime;
            }
            std::cout &lt;&lt; std::endl;
            it++;
        }
    }
    void ZaduziKnjigu(int evidenciski_br, int clanski_br) {
        if(knjige.find(evidenciski_br) == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        if(clanovi.find(clanski_br) == clanovi.end()) throw std::logic_error("Korisnik nije nadjen");
//        if(!(knjige[evidenciski_br]-&gt;zaduzena)) throw std::logic_error("Knjiga vec zaduzena");
        
        knjige[evidenciski_br]-&gt;zaduzena = clanovi[clanski_br];
    }
    void RazduziKnjigu(int evidenciski_br) {
        if(knjige.find(evidenciski_br) == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        if(knjige[evidenciski_br]-&gt;zaduzena) throw std::logic_error("Knjiga nije zaduzena");
       
        knjige[evidenciski_br]-&gt;zaduzena = nullptr;
    }
    void PikaziZaduzenja(int clanski_br) {
        for(auto it = knjige.begin(); it != knjige.end(); it++) {
            if((it-&gt;second)-&gt;DajKodKogaJe() == clanovi[clanski_br]) {
                std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
</font>                std::cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match192-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

                std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }
    }
    
};
int main ()
</font>{
	return 0;
}</pre>
</body>
</html>
