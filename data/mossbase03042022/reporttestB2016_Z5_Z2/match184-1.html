<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8295.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7713.cpp<p></p><pre>

<a name="0"></a><font color="#FF0000"><a href="match184-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_41.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga {
    std::string naslov;
    std::string ime_pisca;
    std::string zanr;
    int godina_izdavanja;
    std::shared_ptr&lt;Korisnik&gt; zaduzenje = nullptr;
    public:
    Knjiga(std::string naslo, std::string imep, std::string z, int god) {
        naslov = naslo;
        ime_pisca = imep;
        zanr=z;
        godina_izdavanja = god;
    }
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return ime_pisca; }
    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izdavanja; }
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const { return zaduzenje; }
    
    void ZaduziKnjigu(Korisnik &amp;k) {
        zaduzenje = std::make_shared&lt;Korisnik&gt;(k);
    }
    void RazduziKnjigu() {
        zaduzenje = nullptr;
    }
    bool DaLiJeZaduzena() const {
        if(zaduzenje == nullptr) return false;
        return true;
    }
};

class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    void RegistrirajNovogKorisnika(int clanskibr, std::string imek, std::string prezimek, std::string adresak, std::string telefonk) {
            Korisnik novi{imek,prezimek,adresak,telefonk};
            std::shared_ptr&lt;Korisnik&gt; k(std::make_shared&lt;Korisnik&gt;(novi));
            if(!korisnici.count(clanskibr)) korisnici[clanskibr] = k;
            else throw std::logic_error("Korisnik vec postoji");
        
    }
    void RegistrirajNovuKnjigu(int brknjige, std::string naslovk, std::string ime_piscak, std::string zanrk, int godina_izdavanjak) {
        Knjiga nova{naslovk,ime_piscak,zanrk,godina_izdavanjak};
            std::shared_ptr&lt;Knjiga&gt; k(std::make_shared&lt;Knjiga&gt;(nova));
            if(!knjige.count(brknjige)) knjige[brknjige] = k;
            else throw std::logic_error("Knjiga vec postoji");
    }
    
    Korisnik &amp;NadjiKorisnika(int clanskibr) const {
        auto it(korisnici.find(clanskibr));
        if(it== korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        else return *(it-&gt;second);
    }
    
    Knjiga &amp;NadjiKnjigu(int brknjige) const {
        auto it(knjige.find(brknjige));
        if(it== knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        else return *(it-&gt;second);
    }
    
    void IzlistajKorisnike() const {
        for(auto it = korisnici.begin(); it!=korisnici.end(); it++) {
        std::cout &lt;&lt; "Clanski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime &lt;&lt; " "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match184-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

        std::cout &lt;&lt; "Adresa: "&lt;&lt;it-&gt;second-&gt;adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon;
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
        }
    }
    void IzlistajKnjige() const {
        for(auto it = knjige.begin(); it!=knjige.end(); it++) {
        std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match184-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_28.gif"/></a>

        if(it-&gt;second-&gt;DaLiJeZaduzena()) std::cout &lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
        }
    }
    
    void ZaduziKnjigu(int brknjige, int clanskibr) {
        auto it(knjige.find(brknjige));
        if(it== knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        auto it1(korisnici.find(clanskibr));
        if(it1== korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        if(it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        it-&gt;second-&gt;ZaduziKnjigu(*(it1-&gt;second));
    }
    
    void RazduziKnjigu(int brknjige) {
        auto it(knjige.find(brknjige));
        if(it == knjige.end()) throw std::logic_error("Knjiga nije nadjena");
        if(!(it-&gt;second-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
        it-&gt;second-&gt;RazduziKnjigu();
    }
    
    void PrikaziZaduzenja(int clanskibr) const {
        auto it1(korisnici.find(clanskibr));
        if(it1== korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
        bool zaduzeno=false;
        for(auto it = knjige.begin(); it!=knjige.end(); it++) {
            if((*(it-&gt;second-&gt;DajKodKogaJe())).ime == (*(it1-&gt;second)).ime &amp;&amp; (*(it-&gt;second-&gt;DajKodKogaJe())).prezime == (*(it1-&gt;second)).prezime &amp;&amp; (*(it-&gt;second-&gt;DajKodKogaJe())).adresa == (*(it1-&gt;second)).adresa &amp;&amp; (*(it-&gt;second-&gt;DajKodKogaJe())).telefon == (*(it1-&gt;second)).telefon) {
                zaduzeno=true;
                std::cout &lt;&lt; "Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match184-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

                std::cout &lt;&lt; "Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja();
                std::cout &lt;&lt; std::endl;
                std::cout &lt;&lt; std::endl;
            }
        }
        if(zaduzeno == false) throw std::logic_error("Nema zaduzenja za tog korisnika!");
    }
    
};
int main() {
</font>    
    return 0;
}</pre>
</body>
</html>
