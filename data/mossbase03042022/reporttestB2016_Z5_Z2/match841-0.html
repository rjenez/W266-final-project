<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7320.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7320.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt; 
#include &lt;stdexcept&gt; 
#include &lt;memory&gt;

struct Korisnik {
  std::string ime, prezime, adresa, telefon;
};
class Knjiga {
  std::string naslov, pisac, zanr;
<a name="3"></a><font color="#00FFFF"><a href="match841-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

  int godina;
  std::shared_ptr&lt;Korisnik&gt; zaduzenje = nullptr;
  
public:
  Knjiga(std::string _n, std::string _p, std::string _z, int _g) {
</font>    naslov = _n; pisac = _p; zanr = _z; godina = _g;
    zaduzenje = nullptr;
  }
  std::string DajNaslov() { return naslov; }
  std::string DajAutora() { return pisac; }
  std::string DajZanr() { return zanr; }
  int DajGodinuIzdavanja() { return godina; }
  std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() { return zaduzenje; }
  void ZaduziKnjigu(Korisnik &amp;korisnik) {
    //zaduzenje = std::make_shared&lt;Korisnik&gt; ();
    zaduzenje.reset(&amp;korisnik);
  }
  void RazduziKnjigu() { zaduzenje = nullptr; }
  bool DaLiJeZaduzena() { return (zaduzenje != nullptr); }
};
class Biblioteka {
<a name="2"></a><font color="#0000FF"><a href="match841-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

  std::map&lt;int, std::shared_ptr&lt;Korisnik&gt; &gt; korisnici;
  std::map&lt;int, std::shared_ptr&lt;Knjiga&gt; &gt; knjige;
public:
  void RegistrirajNovogKorisnika(int clbr, std::string ime_, std::string prezime_, std::string adresa_, std::string br_tel) {
    std::shared_ptr&lt;Korisnik&gt; obj = std::make_shared&lt;Korisnik&gt;();
</font>    obj -&gt; ime = ime_; obj -&gt; prezime = prezime_;
    obj -&gt; adresa = adresa_; obj -&gt; telefon = br_tel;
<a name="1"></a><font color="#00FF00"><a href="match841-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    for (auto x = korisnici.begin(); x != korisnici.end(); x++)
      if (x -&gt; first == clbr) throw std::logic_error("Korisnik vec postoji");
    korisnici.insert(std::make_pair(clbr, obj));
    //delete obj; obj = nullptr;
  }
  void RegistrirajNovuKnjigu(int evbr, std::string naslov_, std::string imep_, std::string zanr_, int god_) {
    std::shared_ptr&lt;Knjiga&gt; obj = std::make_shared&lt;Knjiga&gt;(naslov_, imep_, zanr_, god_);
</font><a name="0"></a><font color="#FF0000"><a href="match841-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_12.gif"/></a>

    for (auto x = knjige.begin(); x != knjige.end(); x++)
      if (x -&gt; first == evbr) throw std::logic_error("Knjiga vec postoji");
    knjige.insert(std::make_pair(evbr, obj));
    //knjige[evbr] = Knjiga(obj -&gt; DajNaslov(), obj -&gt; DajAutora(), obj -&gt; DajZanr(), obj -&gt; DajGodinuIzdavanja());
    //delete obj;
  }
  Korisnik &amp;NadjiKorisnika(int clbr) {
    for (auto x = korisnici.begin(); x != korisnici.end(); x++)
      if (x -&gt; first == clbr) return *(x-&gt;second);
    throw std::logic_error("Korisnik nije nadjen");
  }
  Knjiga &amp;NadjiKnjigu(int evbr) {
    for (auto x = knjige.begin(); x != knjige.end(); x++)
      if (x -&gt; first == evbr) return *(x-&gt;second);
    throw std::logic_error("Knjiga nije nadjena");
  }
  void IzlistajKorisnike() {
    for (auto x = korisnici.begin(); x != korisnici.end(); x++) {
</font>      Korisnik kor = *(x -&gt; second);
      std::cout &lt;&lt; "Clanski broj: " &lt;&lt; x-&gt;first &lt;&lt; "\n";
      std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; kor.ime &lt;&lt; " " &lt;&lt; kor.prezime &lt;&lt; "\n";
      std::cout &lt;&lt; "Adresa: " &lt;&lt; kor.adresa &lt;&lt; "\n";
      std::cout &lt;&lt; "Broj telefona: " &lt;&lt; kor.telefon &lt;&lt; "\n";
      std::cout &lt;&lt; "\n";
    }
  }
  void IzlistajKnjige() {
    for (auto x = knjige.begin(); x != knjige.end(); x++) {
      Knjiga knj = *(x -&gt; second);
      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x-&gt;first &lt;&lt; "\n";
      std::cout &lt;&lt; "Naslov: " &lt;&lt; knj.DajNaslov() &lt;&lt; "\n";
      std::cout &lt;&lt; "Pisac: " &lt;&lt; knj.DajAutora() &lt;&lt; "\n";
      std::cout &lt;&lt; "Zanr: " &lt;&lt; knj.DajZanr() &lt;&lt; "\n";
      std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; knj.DajGodinuIzdavanja() &lt;&lt; "\n";
      if (knj.DaLiJeZaduzena()) {
        std::shared_ptr&lt;Korisnik&gt; zaduzenik = knj.DajKodKogaJe();
        std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; zaduzenik -&gt; ime &lt;&lt; " " &lt;&lt; zaduzenik -&gt; prezime &lt;&lt; "\n"; 
      }
      std::cout &lt;&lt; "\n";
    }
  }
  void ZaduziKnjigu (int evbr, int clbr) {
    bool postoji = 0;
    for (auto x = knjige.begin(); x != knjige.end(); x++)
      if (x -&gt; first == evbr) postoji = 1;
    if (!postoji) throw std::logic_error("Knjiga nije nadjena");
    postoji = 0;
    for (auto x = korisnici.begin(); x != korisnici.end(); x++)
      if (x -&gt; first == clbr) postoji = 1;
    if (!postoji) throw std::logic_error("Korisnik nije nadjen");
    if (knjige[evbr] -&gt; DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
    knjige[evbr] -&gt; ZaduziKnjigu(*korisnici[clbr]);
  }
  void RazduziKnjigu(int evbr) {
    bool postoji = 0;
    for (auto x = knjige.begin(); x != knjige.end(); x++)
      if (x -&gt; first == evbr) postoji = 1;
    if (!postoji) throw std::logic_error("Knjiga nije nadjena");
    if (knjige[evbr] -&gt; DaLiJeZaduzena() == false) throw std::domain_error("Knjiga nije zaduzena");
    knjige[evbr] -&gt; RazduziKnjigu();
  }
  void PrikaziZaduzenja(int clbr) {
    bool zaduzio = 0;
    bool postoji = 0;
    for (auto x = korisnici.begin(); x != korisnici.end(); x++)
      if (x -&gt; first == clbr) postoji = 1;
    if (!postoji) throw std::logic_error("Korisnik nije nadjen");
    for(auto x = knjige.begin(); x != knjige.end(); x++) {
      if (x -&gt; second -&gt; DajKodKogaJe() == korisnici[clbr]) {
        zaduzio = 1;
        Knjiga knj = *(x -&gt; second);
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x-&gt;first &lt;&lt; "\n";
        std::cout &lt;&lt; "Naslov: " &lt;&lt; knj.DajNaslov() &lt;&lt; "\n";
        std::cout &lt;&lt; "Pisac: " &lt;&lt; knj.DajAutora() &lt;&lt; "\n";
        std::cout &lt;&lt; "Zanr: " &lt;&lt; knj.DajZanr() &lt;&lt; "\n";
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; knj.DajGodinuIzdavanja() &lt;&lt; "\n\n";
      } 
    }
    if (!zaduzio) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!\n";
  }
};


int main () {
Biblioteka bib5;
bib5.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib5.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
std::cout &lt;&lt; bib5.NadjiKnjigu(2).DajNaslov();
	return 0;
}</pre>
</body>
</html>
