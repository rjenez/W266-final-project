<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5268.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5268.cpp<p></p><pre>
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
struct Korisnik{
    std::string ime,prezime,adresa,telefon;
   friend class Knjiga;
   friend class Biblioteka;
};
class Knjiga{
  std::string naslov,zanr,autor;
  int izdana;
   Korisnik* zaduzena;
  public:
  Knjiga(std::string n,std::string pisac,std::string z,int g):naslov(n),zanr(z),autor(pisac),izdana(g) {zaduzena=nullptr; }
  std::string DajNaslov() const { return naslov; }
  std::string DajAutora() const { return autor; }
  std::string DajZanr() const { return zanr; }
  int DajGodinuIzdavanja() const { return izdana; }
  Korisnik* DajKodKogaJe() const { return zaduzena; }
  void ZaduziKnjigu(Korisnik &amp;k){
      zaduzena=&amp;k;
  }
  void RazduziKnjigu() {
      zaduzena=nullptr;
  }
  bool DaLiJeZaduzena(){
      if(this-&gt;zaduzena==nullptr)
      return false;
      return true;
  }
  friend class Biblioteka;
};
class Biblioteka{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; clanovi;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt;    knjige;
    public:
    Biblioteka()=default;
    Biblioteka(const Biblioteka &amp;b){
        for(auto p(b.clanovi.begin());p!=b.clanovi.end();p++){
<a name="2"></a><font color="#0000FF"><a href="match865-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            std::shared_ptr&lt;Korisnik&gt; k=std::make_shared&lt;Korisnik&gt;();
            k-&gt;ime=p-&gt;second-&gt;ime;
            k-&gt;prezime=p-&gt;second-&gt;prezime;
            k-&gt;adresa=p-&gt;second-&gt;adresa;
            k-&gt;telefon=p-&gt;second-&gt;telefon;
            clanovi.insert(std::make_pair(p-&gt;first,k));
</font>        }
        for(auto p(b.knjige.begin());p!=b.knjige.end();p++){
            std::shared_ptr&lt;Knjiga&gt; k=std::make_shared&lt;Knjiga&gt;(p-&gt;second-&gt;naslov,p-&gt;second-&gt;autor,p-&gt;second-&gt;zanr,p-&gt;second-&gt;izdana);
            knjige.insert(std::make_pair(p-&gt;first,k));
        }
    }
    Biblioteka &amp;operator=(Biblioteka b){
         for(auto p(b.clanovi.begin());p!=b.clanovi.end();p++){
            std::shared_ptr&lt;Korisnik&gt; k=std::make_shared&lt;Korisnik&gt;();
            k-&gt;ime=p-&gt;second-&gt;ime;
            k-&gt;prezime=p-&gt;second-&gt;prezime;
            k-&gt;adresa=p-&gt;second-&gt;adresa;
            k-&gt;telefon=p-&gt;second-&gt;telefon;
            clanovi.insert(std::make_pair(p-&gt;first,k));
        }
        for(auto p(b.knjige.begin());p!=b.knjige.end();p++){
            std::shared_ptr&lt;Knjiga&gt; k=std::make_shared&lt;Knjiga&gt;(p-&gt;second-&gt;naslov,p-&gt;second-&gt;autor,p-&gt;second-&gt;zanr,p-&gt;second-&gt;izdana);
            knjige.insert(std::make_pair(p-&gt;first,k));
        }
<a name="5"></a><font color="#FF0000"><a href="match865-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        return *this;
    }
    void RegistrirajNovogKorisnika(int br,std::string ki,std::string kp,std::string ka,std::string kb){
        auto trazi(clanovi.find(br));
</font>        if(trazi!=clanovi.end())
        throw std::logic_error("Korisnik vec postoji!");
<a name="1"></a><font color="#00FF00"><a href="match865-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        std::shared_ptr&lt;Korisnik&gt; k= std::make_shared&lt;Korisnik&gt; ();
        k-&gt;ime=ki;
        k-&gt;prezime=kp;
        k-&gt;adresa=ka;
        k-&gt;telefon=kb;
        clanovi.insert(std::make_pair(br,k));
    }
    void RegistrirajNovuKnjigu(int br,std::string imee,std::string pisa,std::string znr,int godin){
        auto trazi(knjige.find(br));
</font>        if(trazi!=knjige.end())
        throw std::logic_error("Knjiga vec postoji");
        auto k=std::make_shared&lt;Knjiga&gt;(imee,pisa,znr,godin);
        knjige.insert(std::make_pair(br,k));
    }
<a name="0"></a><font color="#FF0000"><a href="match865-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    Korisnik &amp;NadjiKorisnika(int br){
        auto trazi(clanovi.find(br));
        if(trazi==clanovi.end())
        throw std::logic_error("Korisnik nije nadjen");
        return *(trazi-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int br){
        auto trazi(knjige.find(br));
        if(trazi==knjige.end())
        throw std::logic_error("Korisnik nije nadjen");
        return *(trazi-&gt;second);
    }
    void IzlistajKorisnike() const{
        for(auto p=clanovi.begin();p!=clanovi.end();p++){
            std::cout &lt;&lt;"Clanski broj: " &lt;&lt;p-&gt;first &lt;&lt; std::endl;
</font>            std::cout &lt;&lt;"Ime i prezime: " &lt;&lt;p-&gt;second-&gt;ime&lt;&lt;" ";
            std::cout &lt;&lt; p-&gt;second-&gt;prezime &lt;&lt; std::endl;
            std::cout &lt;&lt;"Adresa: "&lt;&lt; p-&gt;second-&gt;adresa &lt;&lt; std::endl;
            std::cout &lt;&lt;"Broj telefona: " &lt;&lt;p-&gt;second-&gt;telefon &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match865-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            std::cout  &lt;&lt; std::endl;
        }
    }
    void IzlistajKnjige() const{
        for(auto p=knjige.begin();p!=knjige.end();p++){
            std::cout &lt;&lt;"Evidencijski broj: " &lt;&lt;p-&gt;first&lt;&lt; std::endl;
</font>            std::cout &lt;&lt;"Naslov: " &lt;&lt;p-&gt;second-&gt;naslov&lt;&lt;std::endl;
            std::cout &lt;&lt;"Pisac: "&lt;&lt;p-&gt;second-&gt;autor &lt;&lt; std::endl;
            std::cout &lt;&lt;"Zanr: " &lt;&lt;p-&gt;second-&gt;zanr &lt;&lt; std::endl;
            std::cout &lt;&lt;"Godina izdavanja: "&lt;&lt; p-&gt;second-&gt;izdana &lt;&lt; std::endl;
            if(p-&gt;second-&gt;zaduzena!=nullptr)
            std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt;p-&gt;second-&gt;zaduzena-&gt;ime&lt;&lt;" "&lt;&lt;p-&gt;second-&gt;zaduzena-&gt;prezime &lt;&lt;std::endl;
            std::cout  &lt;&lt; std::endl;
        }
    }
    void ZaduziKnjigu(int knjiga,int korisnik){
        auto p(knjige.find(knjiga));
        auto s(clanovi.find(korisnik));
        if(p==knjige.end())
        throw std::logic_error("Knjiga nije nadjena!");
        if( s==clanovi.end() )
        throw std::logic_error("Korisnik nije nadjen");
        if(p-&gt;second-&gt;zaduzena!=nullptr)
        throw std::logic_error("Knjiga je vec zaduzena");
        p-&gt;second-&gt;zaduzena=s-&gt;second.get();
    }
<a name="3"></a><font color="#00FFFF"><a href="match865-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    void RazduziKnjigu(int br){
        auto p(knjige.find(br));
        if(p==knjige.end())
        throw std::logic_error("Knjiga nije nadjena");
        if(p-&gt;second-&gt;zaduzena==nullptr)
        throw std::logic_error("Knjiga nije zaduzena");
        p-&gt;second-&gt;zaduzena=nullptr;
</font>    }
    void PrikaziZaduzenja(int br){
        auto p(clanovi.find(br));
        for(auto pok(knjige.begin());pok!=knjige.end();pok++){
            if(pok-&gt;second-&gt;zaduzena==p-&gt;second.get()){
            std::cout &lt;&lt;"Evidencijski broj: " &lt;&lt;pok-&gt;first&lt;&lt; std::endl;
            std::cout &lt;&lt;"Naslov: " &lt;&lt;pok-&gt;second-&gt;naslov&lt;&lt;std::endl;
            std::cout &lt;&lt;"Pisac: "&lt;&lt;pok-&gt;second-&gt;autor &lt;&lt; std::endl;
            std::cout &lt;&lt;"Zanr: " &lt;&lt;pok-&gt;second-&gt;zanr &lt;&lt; std::endl;
            std::cout &lt;&lt;"Godina izdavanja: "&lt;&lt; pok-&gt;second-&gt;izdana &lt;&lt; std::endl;
            std::cout  &lt;&lt; std::endl;
            }
            
        }
    }
    
};
int main(){
    int br(1),hh(17);
    Biblioteka b;
      b.RegistrirajNovuKnjigu(1,"Harry Potter","J.K.Rowling","Roman",1997);
      b.RegistrirajNovuKnjigu(2,"Tvrdjava","Mesa Selimovic","Roman",1970);
      b.RegistrirajNovuKnjigu(3,"Prokleta avlija","Ivo Andric","Roman",1954);
      b.RegistrirajNovuKnjigu(4,"Gorski vijenac","P.P. Njegos","Poezija",1845);
      b.RegistrirajNovuKnjigu(5,"Crveno i crno","Stendal","Novela",1830);
      b.RegistrirajNovuKnjigu(6,"Bijeli ocnjak","Dzek London","Roman",1932);
      b.RegistrirajNovuKnjigu(7,"Dervis i smrt","Mesa Selimovic","Roman",1965);
      b.RegistrirajNovuKnjigu(8,"20000 milja ispod mora","Zil Vern","Roman",1800);
      b.RegistrirajNovuKnjigu(9,"100 godina samoce","G.G. Markez ","Psiholoski roman",1991);
      b.RegistrirajNovuKnjigu(10,"Jezeva kucica","Branko Copic","Bajke",1949);
      b.RegistrirajNovuKnjigu(11,"Jazavac pred sudom","Petar Kocic","Roman",1903);
      b.RegistrirajNovuKnjigu(12,"Spijuni su presli granicu","Djordje Licina","Roman",1972);
      b.RegistrirajNovuKnjigu(13,"Ana Karenjina","Lav Tolstoj","Roman",1877);
      b.RegistrirajNovuKnjigu(14,"Zlocin i kazna","F.Dostojevski","Roman",1932);
      b.RegistrirajNovuKnjigu(15,"Lovac u zitu","Selindzer","Roman",1932);
      b.RegistrirajNovuKnjigu(16,"Stepski vuk","Herman Hese","Roman",1927);
      std::cout &lt;&lt; "Dobro dosli u biblioteku, izaberite opciju: " &lt;&lt; std::endl;
       std::cout &lt;&lt; "Uclaniti se u biblioteku...(1)"&lt;&lt; std::endl;
          std::cout &lt;&lt; "Izlistati koje knjige imate na raspolaganju...(2)"&lt;&lt; std::endl;
          std::cout &lt;&lt; "Zaduzenje knjige...(3)"&lt;&lt; std::endl;
          std::cout &lt;&lt; "Povrat knjige...(4)"&lt;&lt; std::endl;
          std::cout &lt;&lt; "Ukoliko zelite donirati knjigu...(5)"&lt;&lt; std::endl;
           std::cout &lt;&lt; "Izlaz...(0)"&lt;&lt; std::endl;
      for(;;){
         
          int n; std::cin &gt;&gt; n;
          std::cin.clear();
          std::cin.ignore(10000,'\n');
          if(n==1){
              std::string ime,prezime,adresa,telefon;
              std::cout &lt;&lt; "Unesite ime: " &lt;&lt; std::endl;
              std::getline(std::cin,ime);
              std::cout &lt;&lt; "Unesite prezime: " &lt;&lt; std::endl;
              std::getline(std::cin,prezime);
              std::cout &lt;&lt; "Unesite adresu: " &lt;&lt; std::endl;
              std::getline(std::cin,adresa);
              std::cout &lt;&lt; "Unesite broj telefona: " &lt;&lt; std::endl;
              std::getline(std::cin,telefon);
              b.RegistrirajNovogKorisnika(br,ime,prezime,adresa,telefon);
              br++;
              std::cout &lt;&lt; "Uclanili ste se, vas clanski broj je "&lt;&lt;br-1&lt;&lt;"."&lt;&lt; std::endl;
          }
          if(n==2)
          b.IzlistajKnjige();
          if(n==3){
          Ponovo:
          std::cout &lt;&lt; "Unesite svoj id: " &lt;&lt; std::endl;
          int id; std::cin &gt;&gt;  id;
          std::cout &lt;&lt; "Unesite id knjige: " &lt;&lt; std::endl;
          int ik; std::cin&gt;&gt; ik;
          try{
          b.ZaduziKnjigu(ik,id);
          }
          catch(...){
              std::cout &lt;&lt; "Podaci nisu u redu,ponovite: " &lt;&lt; std::endl;
              goto Ponovo;
          }
          std::cout &lt;&lt; "Iznajmili ste: "&lt;&lt;b.NadjiKnjigu(ik).DajNaslov()&lt;&lt; std::endl;
          }
          if(n==4){
              std::cout &lt;&lt; "Koju knjigu zelite razduziti: " &lt;&lt; std::endl;
              int k; std::cin &gt;&gt;  k;
              b.RazduziKnjigu(k);
          }
          if(n==5){
              std::cout &lt;&lt; "Unesite naslov,pisca,zanr i godinu izdanja(ENTER poslije svakog unosa): " &lt;&lt; std::endl;
              std::string naslov,pisac,zanr;
              int godina;
              std::getline(std::cin,naslov);
               std::getline(std::cin,pisac);
                std::getline(std::cin,zanr);
                std::cin &gt;&gt; godina;
                std::cin.clear();
          std::cin.ignore(10000,'\n');
          b.RegistrirajNovuKnjigu(hh,naslov,pisac,zanr,godina);
          hh++;
          std::cout &lt;&lt; "Hvala" &lt;&lt; std::endl;
          }
     if(n==0)
     break;
     std::cout &lt;&lt; "Izaberite neku drugu opciju ili 0 za izlaz!" &lt;&lt; std::endl;
}
std::cout &lt;&lt; "Dovidjenja!" &lt;&lt; std::endl;
return 0;
}</pre>
</body>
</html>
