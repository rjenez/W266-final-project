<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3546.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3546.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

<a name="1"></a><font color="#00FF00"><a href="match24-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

using std::cin;
using std::cout;

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};

class Knjiga{
  std::string naslov,ime_pisca,zanr;
</font>  int god;
  Korisnik* zaduzio;
  public:
  Knjiga(std::string naslov1,std::string ime_pisca1,std::string zanr1,int godina):naslov(naslov1),ime_pisca(ime_pisca1),zanr(zanr1),god(godina),zaduzio(nullptr){}
  std::string DajNaslov() const{return naslov;}
  std::string DajAutora() const{return ime_pisca;}
  std::string DajZanr() const{return zanr;}
  int DajGodinuIzdavanja() const{return god;}
<a name="0"></a><font color="#FF0000"><a href="match24-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_93.gif"/></a>

  Korisnik* DajKodKogaJe() const{return zaduzio;}
  void ZaduziKnjigu(Korisnik &amp;k){zaduzio=&amp;k;}
  void RazduziKnjigu(){zaduzio=nullptr;}
  bool DaLiJeZaduzena(){if(!zaduzio) return false;return true;}
};

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    Biblioteka(){};
    Biblioteka(const Biblioteka &amp;b){
        for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++){
            auto novi=new Korisnik;
            (*novi).ime=(*(it-&gt;second)).ime;
            (*novi).prezime=(*(it-&gt;second)).prezime;
            (*novi).adresa=(*(it-&gt;second)).adresa;
            (*novi).telefon=(*(it-&gt;second)).telefon;
            korisnici.insert(std::make_pair(it-&gt;first,novi));
        }
        for(auto it=b.knjige.begin();it!=b.knjige.end();it++){
            auto nova=std::make_shared&lt;Knjiga&gt;((*(it-&gt;second)).DajNaslov(),(*(it-&gt;second)).DajAutora(),(*(it-&gt;second)).DajZanr(),(*(it-&gt;second)).DajGodinuIzdavanja());
            auto p=(*nova).DajKodKogaJe();
            p=(*(it-&gt;second)).DajKodKogaJe();
            knjige.insert(std::make_pair(it-&gt;first,nova));
        }
    }
    ~Biblioteka(){
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            delete it-&gt;second;
        }
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;b){
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            delete it-&gt;second;
        }
        for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++){
            Korisnik *novi=new Korisnik;
            (*novi).ime=(*(it-&gt;second)).ime;
            (*novi).prezime=(*(it-&gt;second)).prezime;
            (*novi).adresa=(*(it-&gt;second)).adresa;
            (*novi).telefon=(*(it-&gt;second)).telefon;
            korisnici.insert(std::make_pair(it-&gt;first,novi));
        }
        for(auto it=b.knjige.begin();it!=b.knjige.end();it++){
            auto nova=std::make_shared&lt;Knjiga&gt;((*(it-&gt;second)).DajNaslov(),(*(it-&gt;second)).DajAutora(),(*(it-&gt;second)).DajZanr(),(*(it-&gt;second)).DajGodinuIzdavanja());
            auto p=(*nova).DajKodKogaJe();
            p=(*(it-&gt;second)).DajKodKogaJe();
            knjige.insert(std::make_pair(it-&gt;first,nova));
        }
        return *this;
    }
    Biblioteka(Biblioteka &amp;&amp;b){
        for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++){
            korisnici.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        for(auto it=b.knjige.begin();it!=b.knjige.end();it++){
            knjige.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b){
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            delete it-&gt;second;
        }
        for(auto it=b.korisnici.begin();it!=b.korisnici.end();it++){
            korisnici.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        for(auto it=b.knjige.begin();it!=b.knjige.end();it++){
            knjige.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        return *this;
    }
    void RegistrirajNovogKorisnika(int clanskibr,std::string im,std::string prez,std::string adr,std::string brtel){
        Korisnik *novi=new Korisnik;
        (*novi).ime=im;
        (*novi).prezime=prez;
        (*novi).adresa=adr;
        (*novi).telefon=brtel;
        if(!korisnici.count(clanskibr))
        korisnici.insert(std::make_pair(clanskibr,novi));
        else throw std::logic_error("Korisnik vec postoji");
    }
    void RegistrirajNovuKnjigu(int brknjige,std::string naslov1,std::string autor,std::string zanr1,int godina){
        auto nova=std::make_shared&lt;Knjiga&gt;(naslov1,autor,zanr1,godina);
        if(!knjige.count(brknjige))
        knjige.insert(std::make_pair(brknjige,nova));
        else throw std::logic_error("Knjiga vec postoji");
    }
    Korisnik &amp;NadjiKorisnika(int clanskibr){
        if(korisnici.count(clanskibr))
        return *(korisnici[clanskibr]);
        else throw std::logic_error("Korisnik nije nadjen");
    }
    Knjiga &amp;NadjiKnjigu(int brknjige){
        if(knjige.count(brknjige))
        return *(knjige[brknjige]);
        else throw std::logic_error("Knjiga nije nadjena");
    }
    void IzlistajKorisnike() const{
        for(auto it=korisnici.begin();it!=korisnici.end();it++){
            cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            cout&lt;&lt;"Ime i prezime: "&lt;&lt;(*(it-&gt;second)).ime&lt;&lt;" "&lt;&lt;(*(it-&gt;second)).prezime&lt;&lt;std::endl;
            cout&lt;&lt;"Adresa: "&lt;&lt;(*(it-&gt;second)).adresa&lt;&lt;std::endl;
            cout&lt;&lt;"Broj telefona: "&lt;&lt;(*(it-&gt;second)).telefon&lt;&lt;std::endl;
            cout&lt;&lt;std::endl;
        }
    }
    void IzlistajKnjige() const{
        for(auto it=knjige.begin();it!=knjige.end();it++){
            cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
            cout&lt;&lt;"Naslov: "&lt;&lt;(*(it-&gt;second)).DajNaslov()&lt;&lt;std::endl;
            cout&lt;&lt;"Pisac: "&lt;&lt;(*(it-&gt;second)).DajAutora()&lt;&lt;std::endl;
            cout&lt;&lt;"Zanr: "&lt;&lt;(*(it-&gt;second)).DajZanr()&lt;&lt;std::endl;
            cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*(it-&gt;second)).DajGodinuIzdavanja()&lt;&lt;std::endl;
            if((*(it-&gt;second)).DajKodKogaJe())
            cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(*((*(it-&gt;second)).DajKodKogaJe())).ime&lt;&lt;" "&lt;&lt;(*((*(it-&gt;second)).DajKodKogaJe())).prezime&lt;&lt;std::endl;
            cout&lt;&lt;std::endl;
        }
    }
    void ZaduziKnjigu(int brknjige,int clanskibr){
        if(!knjige.count(brknjige)) throw std::logic_error("Knjiga nije nadjena");
        if(!korisnici.count(clanskibr)) throw std::logic_error("Korisnik nije nadjen");
        if((*(knjige[brknjige])).DajKodKogaJe()) throw std::logic_error("Knjiga vec zaduzena");
        (*(knjige[brknjige])).ZaduziKnjigu(*(korisnici[clanskibr]));
    }
    void RazduziKnjigu(int brknjige){
        if(!knjige.count(brknjige)) throw std::logic_error("Knjiga nije nadjena");
        if(!((*(knjige[brknjige])).DajKodKogaJe())) throw std::logic_error("Knjiga nije zaduzena");
        auto p=(*(knjige[brknjige])).DajKodKogaJe();
        p=nullptr;
    }
    void PrikaziZaduzenja(int clanskibr){
        int brojac(0);
        if(!korisnici.count(clanskibr)) throw std::logic_error("Korisnik nije nadjen");
        for(auto it=knjige.begin();it!=knjige.end();it++){
            if((*(it-&gt;second)).DajKodKogaJe()==nullptr)
            continue;
            if((*((*(it-&gt;second)).DajKodKogaJe())).ime==(*korisnici[clanskibr]).ime &amp;&amp; (*((*(it-&gt;second)).DajKodKogaJe())).prezime==(*korisnici[clanskibr]).prezime &amp;&amp; (*((*(it-&gt;second)).DajKodKogaJe())).adresa==(*korisnici[clanskibr]).adresa &amp;&amp; (*((*(it-&gt;second)).DajKodKogaJe())).telefon==(*korisnici[clanskibr]).telefon){
                cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                cout&lt;&lt;"Naslov: "&lt;&lt;(*(it-&gt;second)).DajNaslov()&lt;&lt;std::endl;
                cout&lt;&lt;"Pisac: "&lt;&lt;(*(it-&gt;second)).DajAutora()&lt;&lt;std::endl;
                cout&lt;&lt;"Zanr: "&lt;&lt;(*(it-&gt;second)).DajZanr()&lt;&lt;std::endl;
                cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*(it-&gt;second)).DajGodinuIzdavanja()&lt;&lt;std::endl;
                cout&lt;&lt;std::endl;
                brojac++;
            }
        }
        if(brojac==0) cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    }
};

int main ()
{
    Biblioteka bibl;
    for(;;){
        int n;
        cout&lt;&lt;"Odaberite jednu od opcija: "&lt;&lt;std::endl;
        cout&lt;&lt;"0 - za kraj"&lt;&lt;std::endl;
        cout&lt;&lt;"1 - za unos novog korisnika"&lt;&lt;std::endl;
        cout&lt;&lt;"2 - za unos nove knjige"&lt;&lt;std::endl;
        cout&lt;&lt;"3 - za zaduzenje knjige"&lt;&lt;std::endl;
        cout&lt;&lt;"4 - za razduzenje knjige"&lt;&lt;std::endl;
        cin&gt;&gt;n;
        if(n==0) break;
        if(n==1){
            cout&lt;&lt;"Unesite sljedece podatke za korisnika: "&lt;&lt;std::endl;
            cout&lt;&lt;"Clanski broj: ";
            int clanskibr;
            cin&gt;&gt;clanskibr;
            cout&lt;&lt;"Ime: ";
            std::string ime;
            cin.ignore(1000,'\n');
            std::getline(cin,ime);
            cout&lt;&lt;"Prezime: ";
            std::string prezime;
            std::getline(cin,prezime);
            cout&lt;&lt;"Adresa: ";
            std::string adresa;
            std::getline(cin,adresa);
            cout&lt;&lt;"Telefon: ";
            std::string telefon;
            std::getline(cin,telefon);
            bibl.RegistrirajNovogKorisnika(clanskibr,ime,prezime,adresa,telefon);
            bibl.IzlistajKorisnike();
        }
        if(n==2){
            cout&lt;&lt;"Unesite sljedece informacije o knjizi: "&lt;&lt;std::endl;
            cout&lt;&lt;"Evidencijski broj: ";
            int brknjige;
            cin&gt;&gt;brknjige;
            cin.ignore(1000,'\n');
            cout&lt;&lt;"Naslov: ";
            std::string naslov;
            std::getline(cin,naslov);
            cout&lt;&lt;"Autor: ";
            std::string autor;
            std::getline(cin,autor);
            cout&lt;&lt;"Zanr: ";
            std::string zanr;
            std::getline(cin,zanr);
            cout&lt;&lt;"Godina izdavanja: ";
            int godina;
            cin&gt;&gt;godina;
            cin.ignore(1000,'\n');
            bibl.RegistrirajNovuKnjigu(brknjige,naslov,autor,zanr,godina);
            bibl.IzlistajKnjige();
        }
        if(n==3){
            cout&lt;&lt;"Unesite evidencijski broj knjige i clanski broj korisnika: ";
            int brknjige,clanskibr;
            cin&gt;&gt;brknjige&gt;&gt;clanskibr;
            cin.ignore(1000,'\n');
            bibl.ZaduziKnjigu(brknjige,clanskibr);
            bibl.PrikaziZaduzenja(clanskibr);
        }
        if(n==4){
            cout&lt;&lt;"Unesite evidencijski broj knjige: ";
            int brknjige;
            cin&gt;&gt;brknjige;
            cin.ignore(1000,'\n');
            bibl.RazduziKnjigu(brknjige);
</font>        }
    }
	return 0;
}</pre>
</body>
</html>
