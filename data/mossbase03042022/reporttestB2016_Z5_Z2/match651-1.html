<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5915.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2068.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik {
  std::string ime, prezime, adresa, telefon;  
};

std::shared_ptr&lt;Korisnik&gt; StvoriKorisnika(const std::string &amp;ime, const std::string &amp;prezime, const std::string &amp;adresa, const std::string &amp;telefon) {
  std::shared_ptr&lt;Korisnik&gt; p=std::make_shared&lt;Korisnik&gt;();
  p-&gt;ime=ime; p-&gt;prezime=prezime; p-&gt;adresa=adresa; p-&gt;telefon=telefon;
  return p;
}

class Knjiga {
  std::string naslov, ime_pisca, zanr;
  int godina_izdavanja;
  std::shared_ptr&lt;Korisnik&gt; zaduzio;
public:
  Knjiga (std::string naslov, std::string ime_pisca, std::string zanr, int godina_izdavanja) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), godina_izdavanja(godina_izdavanja), zaduzio(nullptr) {}
  std::string DajNaslov() const { return naslov; }
  std::string DajAutora() const { return ime_pisca; }
  std::string DajZanr() const { return zanr; }
  int DajGodinuIzdavanja() const { return godina_izdavanja; }
  std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const { return zaduzio; }
  void ZaduziKnjigu(Korisnik&amp; k) { zaduzio=std::make_shared&lt;Korisnik&gt;(k); }
  void RazduziKnjigu() { zaduzio=nullptr; }
  bool DaLiJeZaduzena() const { return (bool)zaduzio; }
};

class Biblioteka {
  std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt;Knjige;
  std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt;Korisnici;
public:
  Biblioteka() {}
  Biblioteka(const Biblioteka&amp; druga);
  Biblioteka(Biblioteka &amp;&amp;druga);
  Biblioteka&amp; operator =(const Biblioteka &amp;druga);
  Biblioteka operator =(Biblioteka &amp;&amp;druga);
  
  void RegistrirajNovogKorisnika(int clanski_broj, const std::string &amp;ime, const std::string &amp;prezime, const std::string &amp;adresa, const std::string &amp;telefon);
  void RegistrirajNovuKnjigu(int broj, const std::string &amp;naslov, const std::string ime_pisca, const std::string &amp;zanr, int godina_izdavanja);

  Korisnik &amp;NadjiKorisnika(int clanski_broj);
  Knjiga &amp;NadjiKnjigu(int broj);
  
  void IzlistajKorisnike() const;
  void IzlistajKnjige() const;
  
  void ZaduziKnjigu(int broj, int clanski_broj);
  void RazduziKnjigu(int broj);
  
  void PrikaziZaduzenja(int clanski_broj);
};

Biblioteka::Biblioteka(const Biblioteka&amp; druga) {
  for(auto x : druga.Knjige) {
    Knjige.insert({x.first, std::make_shared&lt;Knjiga&gt;(*x.second)});
  }
  for(auto x : druga.Korisnici) {
    Korisnici.insert({x.first, std::make_shared&lt;Korisnik&gt;(*x.second)});
  }
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;druga) {
  std::swap(Knjige, druga.Knjige);
  std::swap(Korisnici, druga.Korisnici);
}
Biblioteka&amp; Biblioteka::operator =(const Biblioteka &amp;druga) {
    Knjige.clear(); Korisnici.clear();
    for(auto x : druga.Knjige) {
        Knjige.insert({x.first, std::make_shared&lt;Knjiga&gt;(*x.second)});
    }
    for(auto x : druga.Korisnici) {
        Korisnici.insert({x.first, std::make_shared&lt;Korisnik&gt;(*x.second)});
    }
    return *this;
}
Biblioteka Biblioteka::operator =(Biblioteka &amp;&amp;druga) {
  std::swap(Knjige, druga.Knjige);
  std::swap(Korisnici, druga.Korisnici);
  return *this;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, const std::string &amp;ime, const std::string &amp;prezime, const std::string &amp;adresa, const std::string &amp;telefon) {
  if(Korisnici.find(clanski_broj)!=Korisnici.end()) throw std::logic_error("Korisnik vec postoji");
  Korisnici.insert({clanski_broj, StvoriKorisnika(ime, prezime, adresa, telefon)});
}
void Biblioteka::RegistrirajNovuKnjigu(int broj, const std::string &amp;naslov, const std::string ime_pisca, const std::string &amp;zanr, int godina_izdavanja) {
  if(Knjige.find(broj)!=Knjige.end()) throw std::logic_error("Knjiga vec postoji");
  Knjige.insert({broj, std::make_shared&lt;Knjiga&gt;(naslov, ime_pisca, zanr, godina_izdavanja)});
}

Korisnik&amp; Biblioteka::NadjiKorisnika(int clanski_broj) {
  auto i=Korisnici.find(clanski_broj); if(i!=Korisnici.end()) return *i-&gt;second;
  throw std::logic_error("Korisnik nije nadjen");
}
Knjiga&amp; Biblioteka::NadjiKnjigu(int broj) {
  auto i=Knjige.find(broj); if(i!=Knjige.end()) return *i-&gt;second;
<a name="2"></a><font color="#0000FF"><a href="match651-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

  throw std::logic_error("Knjiga nije nadjena");
}

void Biblioteka::IzlistajKorisnike() const {
  for(auto x : Korisnici) {
    std::cout &lt;&lt; "Clanski broj: " &lt;&lt; x.first &lt;&lt; "\n";
    std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; x.second-&gt;ime &lt;&lt; " " &lt;&lt; x.second-&gt;prezime &lt;&lt; "\n";
    std::cout &lt;&lt; "Adresa: " &lt;&lt; x.second-&gt;adresa &lt;&lt; "\n";
    std::cout &lt;&lt; "Broj telefona: " &lt;&lt; x.second-&gt;telefon &lt;&lt; "\n\n";
</font>  }
}
<a name="0"></a><font color="#FF0000"><a href="match651-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

void Biblioteka::IzlistajKnjige() const {
  for(auto x : Knjige) {
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; "\n";
    std::cout &lt;&lt; "Naslov: " &lt;&lt; x.second-&gt;DajNaslov() &lt;&lt; "\n";
    std::cout &lt;&lt; "Pisac: " &lt;&lt; x.second-&gt;DajAutora() &lt;&lt; "\n";
    std::cout &lt;&lt; "Zanr: " &lt;&lt; x.second-&gt;DajZanr() &lt;&lt; "\n";
    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; x.second-&gt;DajGodinuIzdavanja() &lt;&lt; "\n";
    if(x.second-&gt;DaLiJeZaduzena()) std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; x.second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; x.second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; "\n\n";
</font>  }
}

void Biblioteka::ZaduziKnjigu(int broj, int clanski_broj) {
  for(auto x : Knjige) {
    if(x.first==broj) {
      if(x.second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
      for(auto y : Korisnici) {
        if(y.first==clanski_broj) {
          x.second-&gt;ZaduziKnjigu(*y.second);
          return;
        }
      }
      throw std::logic_error("Korisnik nije nadjen");
    }
  }
  throw std::logic_error("Knjiga nije nadjena");
}
void Biblioteka::RazduziKnjigu(int broj) {
  for(auto x : Knjige) {
    if(x.first==broj) {
      if(x.second-&gt;DaLiJeZaduzena()) {
        x.second-&gt;RazduziKnjigu();
        return;
      }
      throw std::logic_error("Knjiga nije zaduzena");
    }
  }
  throw std::logic_error("Knjiga nije nadjena");
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj) {
  auto K=NadjiKorisnika(clanski_broj);
  bool bar_jedan=false;
  for(auto x : Knjige) {
    auto p=x.second-&gt;DajKodKogaJe(); Korisnik novi;
    if(p) novi=*p;
<a name="1"></a><font color="#00FF00"><a href="match651-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

    if(p &amp;&amp; (novi.ime==K.ime &amp;&amp; novi.prezime==K.prezime &amp;&amp; novi.adresa==K.adresa &amp;&amp; novi.telefon==K.telefon)) {
      bar_jedan=true;
      std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; x.first &lt;&lt; "\n";
      std::cout &lt;&lt; "Naslov: " &lt;&lt; x.second-&gt;DajNaslov() &lt;&lt; "\n";
      std::cout &lt;&lt; "Pisac: " &lt;&lt; x.second-&gt;DajAutora() &lt;&lt; "\n";
      std::cout &lt;&lt; "Zanr: " &lt;&lt; x.second-&gt;DajZanr() &lt;&lt; "\n";
      std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; x.second-&gt;DajGodinuIzdavanja() &lt;&lt; "\n\n";
    }
  }
  if(!bar_jedan) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!\n";
</font>}

int main () {
	
}</pre>
</body>
</html>
