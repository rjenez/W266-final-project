<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3872.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7165.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match714-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include&lt;string&gt;
#include&lt;stdexcept&gt;
#include&lt;map&gt;
#include&lt;memory&gt;

using namespace std;


struct Korisnik {
    string ime,prezime,adresa,telefon;

};

class Knjiga
{
    string naslov;
    string ime_pisca;
    string zanr;
    int godina;
    Korisnik* zaduzenja;
public:
    Knjiga(string naslov,string ime_pisca,string zanr,int godina): naslov(naslov),ime_pisca(ime_pisca),zanr(zanr),godina(godina) {
        zaduzenja=nullptr;
    }
    string DajNaslov() {
        return naslov;
    }
    string DajAutora() {
        return ime_pisca;
    }
    string DajZanr() {
</font>        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godina;
    }
    Korisnik *DajKodKogaJe () {
        return zaduzenja;
    }
    void ZaduziKnjigu(Korisnik &amp;v) {
        zaduzenja=&amp;v;
    }
    void RazduziKnjigu() {
        zaduzenja=nullptr;
    }
    bool DaLiJeZaduzena() const {
        return zaduzenja!=nullptr;
    }
    //void Ispisi() const;
};

class Biblioteka
{
    map&lt;int,shared_ptr&lt;Korisnik&gt;&gt; mapa_korisnika;
    map&lt;int,shared_ptr&lt;Knjiga&gt;&gt;mapa_knjiga;
    Biblioteka &amp;operator=(const Biblioteka &amp;b);
    Biblioteka (const Biblioteka &amp;b);

public:
   /* Biblioteka() {};
    ~Biblioteka() {
        for (auto it = mapa_korisnika.begin(); it != mapa_korisnika.end(); ++it)
            delete it-&gt;second;
        for (auto it2 = mapa_knjiga.begin(); it2 != mapa_knjiga.end(); ++it2)
            delete it2-&gt;second;
    };*/
<a name="4"></a><font color="#FF00FF"><a href="match714-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    void RegistrirajNovogKorisnika(int clanskibr,string ime,string prezime,string adresa,string telefon );
    void RegistrirajNovuKnjigu(int ev_br_knjige,string naslov,string ime_pisca,string zanr,int godina);
    Korisnik &amp;NadjiKorisnika(int clanskibr) {
</font>        if(!mapa_korisnika.count(clanskibr)) throw logic_error("Korisnik nije nadjen");
        else
            return *mapa_korisnika[clanskibr];
    }
    Knjiga &amp;NadjiKnjigu(int ev_br_knjige) {
        if(!mapa_knjiga.count(ev_br_knjige)) throw logic_error("Knjiga nije nadjena");
        else
            return *mapa_knjiga[ev_br_knjige];
    }
<a name="3"></a><font color="#00FFFF"><a href="match714-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int ev_br_knjige,int clanskibr);
    void RazduziKnjigu(int ev_br_knjige);
    void PrikaziZaduzenja(int clanskibr);
};

void Biblioteka::RegistrirajNovogKorisnika(int clanskibr,string ime,string prezime,string adresa,string telefon )
</font>{
    
     Korisnik korisnik(ime,prezime,adresa,telefon);
    if(mapa_korisnika.count(clanskibr)==0)
        mapa_korisnika[clanskibr]=*korisnik;
    else throw logic_error("Korisnik vec postoji");


}

void Biblioteka::RegistrirajNovuKnjigu(int ev_br_knjige,string naslov,string ime_pisca,string zanr,int godina)
{
    auto knjiga=new Knjiga(naslov,ime_pisca,zanr,godina);
    if(mapa_knjiga.count(ev_br_knjige)==0)
        mapa_knjiga[ev_br_knjige]=knjiga;
    else throw logic_error ("Knjiga vec postoji");
}
void Biblioteka::IzlistajKorisnike() const
{
    for(auto it=mapa_korisnika.begin(); it!=mapa_korisnika.end(); it++) {
<a name="2"></a><font color="#0000FF"><a href="match714-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

        cout&lt;&lt;"Clanski broj: "&lt;&lt;(*it).first&lt;&lt;endl;
        cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;endl;
        cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;endl;
        cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;endl;
        cout&lt;&lt;endl;
    }
}
void Biblioteka::IzlistajKnjige() const
{
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++) {
</font>        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;(*it).first&lt;&lt;endl;
        cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;endl;
        cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;endl;
<a name="1"></a><font color="#00FF00"><a href="match714-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;endl;
        cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;endl;

        if(it-&gt;second-&gt;DaLiJeZaduzena())
            cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;

        cout&lt;&lt;endl;
    }

}
void Biblioteka::ZaduziKnjigu(int ev_br_knjige,int clanskibr)
</font>{
    auto k=mapa_knjiga[ev_br_knjige];
    auto c=mapa_korisnika[clanskibr];
    if(k==nullptr) throw logic_error("Knjiga nije nadjena");
    if(c==nullptr) throw logic_error("Korisnik nije nadjen");
    if(k-&gt;DaLiJeZaduzena()) throw logic_error ("Knjiga vec zaduzena");
    k-&gt;ZaduziKnjigu(*c);

}
void Biblioteka::RazduziKnjigu(int ev_br_knjige)
{
    auto k=mapa_knjiga[ev_br_knjige];
    if(k==nullptr) throw logic_error("Knjiga nije nadjena");
    if(!k-&gt;DaLiJeZaduzena()) throw logic_error ("Knjiga nije zaduzena");
    k-&gt;RazduziKnjigu();
}
void Biblioteka::PrikaziZaduzenja(int clanskibr)
{
    auto c=mapa_korisnika[clanskibr];
    int br=0;
    if( c==nullptr) throw logic_error("Korisnik nije nadjen");
    for(auto it=mapa_knjiga.begin(); it!=mapa_knjiga.end(); it++) {

        if(it-&gt;second-&gt;DajKodKogaJe()==c) {
            br++;
            cout&lt;&lt;"Evidencijski broj:"&lt;&lt;(*it).first&lt;&lt;endl;
            cout&lt;&lt;"Naslov"&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;endl;
            cout&lt;&lt;"Pisac"&lt;&lt;(it-&gt;second)-&gt;DajAutora()&lt;&lt;endl;
            cout&lt;&lt;"Zanr"&lt;&lt;(it-&gt;second)-&gt;DajZanr()&lt;&lt;endl;
            cout&lt;&lt;"Godina izdavanja"&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
        }
    }
    if(br==0) cout&lt;&lt;"Nema zaduzenja za tog korisnika";

}


//Biblioteka::Biblioteka(const Biblioteka &amp;b):


int main ()
{
    Biblioteka b;
    int clanski,evidencijski,godizdavanja,unos;
    string zanr,pisac,ime,prezime,adresa,broj,nazivknjige;
    while(1) {
        cout&lt;&lt;"REGISTRACIJA KORISNIKA -1"&lt;&lt;endl;
        cout&lt;&lt;"REGISTRACIJA KNJIGE -2"&lt;&lt;endl;
        cout&lt;&lt;"ZADUZIVANJE KNJIGE -3"&lt;&lt;endl;
        cout&lt;&lt;"RAZDUZIVANJE KNJIGE -4"&lt;&lt;endl;
        cout&lt;&lt;"PRIKAZ ZADUZENJA -5"&lt;&lt;endl;
        cout&lt;&lt;"IZLISTAJ SVE KORISNIKE -6"&lt;&lt;endl;
        cout&lt;&lt;"IZLISTAJ SVE KNJIGE -7"&lt;&lt;endl;
        cout&lt;&lt;"PRETRAGA KORISNIKA -8"&lt;&lt;endl;
        cout&lt;&lt;"PRETRAGA KNJIGA -9"&lt;&lt;endl;
        cout&lt;&lt;"EXIT -0"&lt;&lt;endl;
        cin&gt;&gt;unos;
        cin.clear();
        cin.ignore(1000,'\n');
        switch (unos) {
        case 1:
            cout&lt;&lt;"Unesite ime korisnika: ";
            getline(cin,ime);
            cout&lt;&lt;"Unesite prezime korisnika: ";
            getline(cin,prezime);
            cout&lt;&lt;"Unesite adresu korisnika: ";
            getline(cin,adresa);
            cout&lt;&lt;"Unesite telefonski broj: ";
            getline(cin,broj);
            cin.clear();
            cin.ignore(1000,'\n');
            b.RegistrirajNovogKorisnika(clanski,ime,prezime,adresa,broj);
            break;

        case 2:
            cout&lt;&lt;"Unesite naziv knjige: ";
            getline(cin,nazivknjige);
            cout&lt;&lt;"Unesite autora knjige: ";
            getline(cin,pisac);
            cout&lt;&lt;"Unesite zanr: ";
            getline(cin,zanr);
            cout&lt;&lt;"Unesite evidencijski broj knjige: ";
            cin&gt;&gt;evidencijski;
            cout&lt;&lt;"Unesite godinu izdavanja: ";
            cin&gt;&gt;godizdavanja;
            cin.clear();
            cin.ignore(1000,'\n');
            b.RegistrirajNovuKnjigu(evidencijski,nazivknjige,pisac,zanr,godizdavanja);
            break;

        case 3:
            cout&lt;&lt;"Unesite clanski broj korisnika: ";
            cin&gt;&gt;clanski;
            cout&lt;&lt;"Unesi evidencijski broj: ";
            cin&gt;&gt;evidencijski;
            cin.clear();
            cin.ignore(1000,'\n');
            b.ZaduziKnjigu(clanski,evidencijski);
            break;

        case 4:
            cout&lt;&lt;"Unesite evidencijski broj: ";
            cin&gt;&gt;evidencijski;
            cin.clear();
            cin.ignore(1000,'\n');
            b.RazduziKnjigu(evidencijski);
            break;

        case 5:
            cout&lt;&lt;"Unesite clanski broj: ";
            cin&gt;&gt;clanski;
            cin.clear();
            cin.ignore(1000,'\n');
            b.PrikaziZaduzenja(clanski);
            break;
            
            case 6:
            b.IzlistajKorisnike();
            break;

        case 7:
            b.IzlistajKnjige();
            break;

        case 8:
          cout&lt;&lt;"Unesite clanski broj: ";
            cin&gt;&gt;clanski;
            cin.clear();
            cin.ignore(1000,'\n');
            b.NadjiKorisnika(clanski);
            
            case 9:
             cout&lt;&lt;"Unesite evidencijski broj: ";
            cin&gt;&gt;evidencijski;
            cin.clear();
            cin.ignore(1000,'\n');
            b.NadjiKnjigu(evidencijski);
            break;
            
            case 0:
            cout&lt;&lt;"Dovidjenja.Dodjite nam opet!";
            exit(1);
        }
    } 
    return 0;
}
</pre>
</body>
</html>
