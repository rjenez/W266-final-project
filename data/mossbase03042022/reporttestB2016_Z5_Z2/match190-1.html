<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5899.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student1581.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match190-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_45.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

struct Korisnik
{
    std::string ime, prezime, adresa, telefon;
    Korisnik(std::string ime, std::string prezime, std::string adresa, std::string br): ime(ime), prezime(prezime), adresa(adresa), telefon(br){}
};

class Knjiga
{
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    //Korisnik *korisnik;
    std::shared_ptr&lt;Korisnik&gt; korisnik;
public:
    Knjiga(std::string naslov, std::string autor, std::string zanr, int godina): naslov(naslov), ime_pisca(autor), zanr(zanr),godina_izdavanja(godina),korisnik(nullptr){}
    ~Knjiga() =default;//{delete korisnik;}
    std::string DajNaslov() const { return naslov;}
    std::string DajAutora() const { return ime_pisca;}
    std::string DajZanr() const { return zanr;}
    int DajGodinuIzdavanja() const { return godina_izdavanja;}
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const { return korisnik;}
    void ZaduziKnjigu(Korisnik &amp;k)
    {
         korisnik = std::make_shared&lt;Korisnik&gt;(k.ime, k.prezime, k.adresa, k.telefon);
    }
    void RazduziKnjigu() { korisnik=nullptr;}
    bool DaLiJeZaduzena() 
    { 
        if(korisnik!=nullptr) return true;
        return false;
    }
};

class Biblioteka
{
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnik;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjiga;
public:
    friend class Knjiga;
    //kopirajuci, pomjerajuci
    ~Biblioteka()=default;
   /* {
        for(auto it=korisnik.begin();it!=korisnik.end();it++)
            delete it-&gt;second;
        for(auto it=knjiga.begin();it!=knjiga.end();it++)
            delete it-&gt;second;
    }*/
    void RegistrirajNovogKorisnika(int clanski, std::string ime, std::string prezime, std::string adresa, std::string br)
    {
        auto p= std::make_shared &lt;Korisnik&gt;(ime, prezime, adresa, br); //dodati u try
        auto it(korisnik.find(clanski));
        if(it!=korisnik.end()) throw std::logic_error("Korisnik vec postoji");
        else
            korisnik[clanski]=p;
    }
    void RegistrirajNovuKnjigu(int evidencija, std::string naslov, std::string autor, std::string zanr, int god)
    {
        auto p= std::make_shared&lt;Knjiga&gt;(naslov, autor, zanr, god);
        auto it(knjiga.find(evidencija));
        if(it!=knjiga.end()) throw std::logic_error("Knjiga vec postoji");
        else
            knjiga[evidencija]=p;
    }
    
    Korisnik &amp;NadjiKorisnika(int clanski)
    {
        auto it(korisnik.find(clanski));
        if(it==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
        else
            return *(it-&gt;second);
    }
    Knjiga &amp;NadjiKnjigu(int evidencija)
    {
        auto it(knjiga.find(evidencija));
        if(it==knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
        else
            return *(it-&gt;second);
    }
    void IzlistajKorisnike() const 
    {
        for(auto it=korisnik.begin(); it!=korisnik.end();it++)
        {
            std::cout &lt;&lt; "Clanski broj: "&lt;&lt;it-&gt;first &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime &lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: "&lt;&lt;it-&gt;second-&gt;adresa &lt;&lt; std::endl;
<a name="2"></a><font color="#0000FF"><a href="match190-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

            std::cout &lt;&lt; "Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon &lt;&lt; std::endl;
            std::cout  &lt;&lt; std::endl;
        }
        
    }
    void IzlistajKnjige() const
    {
        for(auto  it=knjiga.begin(); it!=knjiga.end();it++)
        {
            std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;it-&gt;first &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Pisac: " &lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt; std::endl;
            std::cout &lt;&lt; "Zanr: " &lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match190-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_26.gif"/></a>

            std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            if(it-&gt;second-&gt;DaLiJeZaduzena()==1)
                std::cout &lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt;" "&lt;&lt; it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
            std::cout &lt;&lt; std::endl;
        }
        
    }
    void ZaduziKnjigu(int evidencija, int clanski)
    {
        auto i(NadjiKnjigu(evidencija));
        auto j(NadjiKorisnika(clanski));
        auto it(knjiga.find(evidencija));
        if(it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
        else
            it-&gt;second-&gt;ZaduziKnjigu(j);

    }
    void RazduziKnjigu(int evidencija)
    {
        auto i(NadjiKnjigu(evidencija));
        auto it(knjiga.find(evidencija));
        if(!it-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga nije zaduzena");
        else
            it-&gt;second-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int clanski) const;
};

void Biblioteka::PrikaziZaduzenja(int clanski) const
{
    auto a(korisnik.find(clanski));
    if(a==korisnik.end()) throw std::logic_error("Korisnik nije nadjen");
    else
    {
        for(auto it=korisnik.begin();it!=korisnik.end();it++)
        {
            for(auto i=knjiga.begin(); i!=knjiga.end();i++)
            {
                if(i-&gt;second-&gt;DaLiJeZaduzena())
                {
                    if((it-&gt;second-&gt;ime== i-&gt;second-&gt;DajKodKogaJe()-&gt;ime) &amp;&amp; (it-&gt;second-&gt;prezime== i-&gt;second-&gt;DajKodKogaJe()-&gt;prezime))
                    {
                        std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;i-&gt;first &lt;&lt; std::endl;
                        std::cout &lt;&lt; "Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>                        std::cout &lt;&lt; "Pisac: " &lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match190-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

                        std::cout &lt;&lt; "Zanr: " &lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt; std::endl;
                         std::cout &lt;&lt; "Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
                    }
                }
            }
        }
    }
}

int main()
{
    std::cout &lt;&lt; "Radi" &lt;&lt; std::endl;
</font>}</pre>
</body>
</html>
