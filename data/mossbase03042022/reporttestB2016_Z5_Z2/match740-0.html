<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8638.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8638.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;

struct Korisnik{
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};

class Knjiga{
  std::string naslov;
  std::string ime_pisca;
  std::string zanr;
<a name="6"></a><font color="#00FF00"><a href="match740-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

  int godina_izdavanja;
  std::shared_ptr &lt;Korisnik&gt; pok; 
  public:  
  Knjiga(std::string nas, std::string pisac, std::string zan, int god);
</font>  std::string DajNaslov() const { return naslov; }
<a name="5"></a><font color="#FF0000"><a href="match740-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

  std::string DajAutora() const { return ime_pisca; }
  std::string DajZanr() const   { return zanr; }
  int DajGodinuIzdavanja() const{ return godina_izdavanja; }
  std::shared_ptr &lt;Korisnik&gt; DajKodKogaJe() const{ return pok; }
  void ZaduziKnjigu(Korisnik &amp;k);
</font>  void RazduziKnjigu();
  bool DaLiJeZaduzena();
};

class Biblioteka{
<a name="1"></a><font color="#00FF00"><a href="match740-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

  std::map&lt;int, std::shared_ptr &lt;Korisnik&gt;&gt; mapa_korisnika;
  std::map&lt;int, std::shared_ptr &lt;Knjiga&gt;&gt; mapa_knjiga;
  
  public:
  /*
  Biblioteka(const Biblioteka &amp;b);
  Biblioteka(Biblioteka &amp;&amp;b);
  Biblioteka &amp;operator =(const Biblioteka &amp;b);
  Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
  */
  void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona);
  void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string autor, std::string zanr, int godina_izdavanja);
</font>  Korisnik &amp;NadjiKorisnika(int clanski_broj);
  Knjiga &amp;NadjiKnjigu(int broj_knjige);
  void IzlistajKorisnike();
  void IzlistajKnjige();
  void ZaduziKnjigu(int broj_knjige, int clanski_broj);
  void RazduziKnjigu(int broj_knjige);
  void PrikaziZaduzenja(int clanski_broj);
  
};

Knjiga::Knjiga(std::string nas, std::string pisac, std::string zan, int god){
  Knjiga::naslov = nas;
  Knjiga::ime_pisca = pisac;
  Knjiga::zanr = zan;
  Knjiga::godina_izdavanja = god;
  pok = nullptr;
}

void Knjiga::ZaduziKnjigu(Korisnik &amp;k){
  Knjiga::pok = std::make_shared&lt;Korisnik&gt;(k);
}

void Knjiga::RazduziKnjigu(){
  this -&gt; pok = nullptr;
}
bool Knjiga::DaLiJeZaduzena(){
  if(pok == nullptr) return false;
  return true;
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string broj_telefona){
  std::shared_ptr &lt;Korisnik&gt; pok = std::make_shared&lt;Korisnik&gt; ();
  pok -&gt; ime = ime;
  pok -&gt; prezime = prezime;
  pok -&gt; adresa = adresa;
  pok -&gt; telefon = broj_telefona;
<a name="7"></a><font color="#0000FF"><a href="match740-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

  mapa_korisnika.insert(std::make_pair(clanski_broj, pok));
}

void Biblioteka::RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string autor, std::string zanr, int godina_izdavanja){
  std::shared_ptr &lt;Knjiga&gt; pok = std::make_shared&lt;Knjiga&gt; (Knjiga(naslov, autor, zanr, godina_izdavanja));
</font>  mapa_knjiga.insert(std::make_pair(broj_knjige, pok));
}

<a name="0"></a><font color="#FF0000"><a href="match740-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj){
  
  auto it(mapa_korisnika.find(clanski_broj));
  if(it == mapa_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
  else return *(it -&gt; second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int broj_knjige){
  
  auto it(mapa_knjiga.find(broj_knjige));
  if(it == mapa_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
  
  else return *(it -&gt; second);
}

void Biblioteka::IzlistajKorisnike(){
</font>  for(auto it = mapa_korisnika.begin(); it != mapa_korisnika.end(); it++){
      std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it -&gt; first &lt;&lt; std::endl &lt;&lt; "Ime i prezime: " &lt;&lt; it -&gt; second -&gt; ime &lt;&lt; " " &lt;&lt; it -&gt; second -&gt; prezime &lt;&lt; std::endl
      &lt;&lt; "Adresa: " &lt;&lt; it -&gt; second -&gt; adresa &lt;&lt; std::endl &lt;&lt; "Broj telefona: " &lt;&lt; it -&gt; second -&gt; telefon &lt;&lt; std::endl &lt;&lt; std::endl;
  }
}

void Biblioteka::IzlistajKnjige(){
  for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++){
    
    if(it -&gt; second -&gt; DaLiJeZaduzena() == false){
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it -&gt; first &lt;&lt; std::endl &lt;&lt; "Naslov: " &lt;&lt; it -&gt; second -&gt; DajNaslov() &lt;&lt; std::endl &lt;&lt; "Pisac: " &lt;&lt; it -&gt; second -&gt; DajAutora() &lt;&lt; 
    std::endl &lt;&lt; "Zanr: " &lt;&lt; it -&gt; second -&gt; DajZanr() &lt;&lt; std::endl &lt;&lt; "Godina izdavanja: " &lt;&lt; it -&gt; second -&gt; DajGodinuIzdavanja() &lt;&lt; std::endl;
    }
    
    else if(it -&gt; second -&gt; DaLiJeZaduzena() == true){
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it -&gt; first &lt;&lt; std::endl &lt;&lt; "Naslov: " &lt;&lt; it -&gt; second -&gt; DajNaslov() &lt;&lt; std::endl &lt;&lt; "Pisac: " &lt;&lt; it -&gt; second -&gt; DajAutora() &lt;&lt; 
    std::endl &lt;&lt; "Zanr: " &lt;&lt; it -&gt; second -&gt; DajZanr() &lt;&lt; std::endl &lt;&lt; "Godina izdavanja: " &lt;&lt; it -&gt; second -&gt; DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; "Zaduzena kod korisnika: "
     &lt;&lt; it -&gt; second -&gt; DajKodKogaJe() -&gt; ime &lt;&lt; " " &lt;&lt; it -&gt; second -&gt; DajKodKogaJe() -&gt; prezime &lt;&lt; std::endl;
    }
  }
}


<a name="4"></a><font color="#FF00FF"><a href="match740-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

void Biblioteka::ZaduziKnjigu(int broj_knjige, int clanski_broj){
  auto it1(mapa_knjiga.find(broj_knjige));
  if(it1 == mapa_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
  
  auto it2(mapa_korisnika.find(clanski_broj));
</font>  if(it2 == mapa_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
  
  if(it1 -&gt; second -&gt; DaLiJeZaduzena() == true) throw std::logic_error("Knjiga vec zaduzena");
  else{
<a name="3"></a><font color="#00FFFF"><a href="match740-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

         it1 -&gt; second -&gt; ZaduziKnjigu((*(it2 -&gt; second)));
      }
}
  
void Biblioteka::RazduziKnjigu(int broj_knjige){
  auto it1(mapa_knjiga.find(broj_knjige));
  if(it1 == mapa_knjiga.end()) throw std::logic_error("Knjiga nije nadjena");
</font>  else{
<a name="2"></a><font color="#0000FF"><a href="match740-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    if(it1 -&gt; second -&gt; DaLiJeZaduzena() == false) throw std::logic_error("Knjiga nije zaduzena");
    it1 -&gt; second -&gt; RazduziKnjigu();
  }
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj){
  auto it2(mapa_korisnika.find(clanski_broj));
    if(it2 == mapa_korisnika.end()) throw std::logic_error("Korisnik nije nadjen");
</font>    
    Korisnik k = *(it2 -&gt; second);
    bool pomocna(false);
    
for(auto it = mapa_knjiga.begin(); it != mapa_knjiga.end(); it++){
  if(it-&gt;second-&gt;DaLiJeZaduzena() == true){
    pomocna = true;
    if( it -&gt; second -&gt; DajKodKogaJe() -&gt; ime == k.ime &amp;&amp;  it -&gt; second -&gt; DajKodKogaJe() -&gt; prezime == k.prezime &amp;&amp;  it -&gt; second -&gt; DajKodKogaJe() -&gt; adresa == k.adresa &amp;&amp;  it -&gt; second -&gt; DajKodKogaJe() -&gt; telefon == k.telefon){
       std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it -&gt; first &lt;&lt; std::endl &lt;&lt; "Naslov: " &lt;&lt; it -&gt; second -&gt; DajNaslov() &lt;&lt; std::endl &lt;&lt; "Pisac: " &lt;&lt; it -&gt; second -&gt; DajAutora() &lt;&lt; 
    std::endl &lt;&lt; "Zanr: " &lt;&lt; it -&gt; second -&gt; DajZanr() &lt;&lt; std::endl &lt;&lt; "Godina izdavanja: " &lt;&lt; it -&gt; second -&gt; DajGodinuIzdavanja() &lt;&lt; std::endl &lt;&lt; std::endl;
    }
  }
}
  if(!pomocna) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!";

}

int main (){

	return 0;
}</pre>
</body>
</html>
