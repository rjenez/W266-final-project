<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3567.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3567.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

using namespace std;

struct Korisnik
{
    string ime;
    string prezime;
    string adresa;
    string telefon;
};

class Knjiga
{
    string naslov;
    string imePisca;
    string zanr;
    int godinaIzdavanja;
<a name="0"></a><font color="#FF0000"><a href="match784-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    Korisnik* zaduzena;
public:
    Knjiga(string naslov, string ime_pisca, string zanr, int godina_izdavanja) : naslov(naslov), imePisca(ime_pisca), zanr(zanr), godinaIzdavanja(godina_izdavanja), zaduzena(nullptr) {}
    string DajNaslov() const { return naslov; }
    string DajAutora() const { return imePisca; }
    string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godinaIzdavanja; }
    Korisnik* DajKodKogaJe() const { if(DaLiJeZaduzena()) return zaduzena; }
</font>    void ZaduziKnjigu(Korisnik &amp;korisnik) { zaduzena = &amp;korisnik; }
    void RazduziKnjigu() { zaduzena = nullptr; }
    bool DaLiJeZaduzena() const { return (zaduzena != nullptr); }
};

<a name="5"></a><font color="#FF0000"><a href="match784-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

class Biblioteka 
{
    map&lt;int, shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    map&lt;int, shared_ptr&lt;Knjiga&gt;&gt; knjige;
public:
    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;b)
</font>    {
        korisnici = b.korisnici;
        knjige = b.knjige;
        auto it1 = b.korisnici.begin();
        for(auto k: korisnici)
        {
            shared_ptr&lt;Korisnik&gt; korisnik(new Korisnik);
            korisnik-&gt;ime = it1-&gt;second-&gt;ime;
            korisnik-&gt;prezime = it1-&gt;second-&gt;prezime;
            korisnik-&gt;adresa = it1-&gt;second-&gt;adresa;
            korisnik-&gt;telefon = it1-&gt;second-&gt;telefon;
            k.second = korisnik;
            it1++;
        }
        
        auto it2 = b.knjige.begin();
        for(auto k: knjige)
        {
            shared_ptr&lt;Knjiga&gt; knjiga(new Knjiga(it2-&gt;second-&gt;DajNaslov(), it2-&gt;second-&gt;DajAutora(), it2-&gt;second-&gt;DajZanr(), it2-&gt;second-&gt;DajGodinuIzdavanja()));
            k.second = knjiga;
            it2++;
        }
    }
    Biblioteka &amp;operator=(const Biblioteka &amp;b)
    {
        if(this == &amp;b) return *this;
        
        korisnici = b.korisnici;
        knjige = b.knjige;
        auto it1 = b.korisnici.begin();
        for(auto k: korisnici)
        {
            shared_ptr&lt;Korisnik&gt; korisnik(new Korisnik);
            korisnik-&gt;ime = it1-&gt;second-&gt;ime;
            korisnik-&gt;prezime = it1-&gt;second-&gt;prezime;
            korisnik-&gt;adresa = it1-&gt;second-&gt;adresa;
            korisnik-&gt;telefon = it1-&gt;second-&gt;telefon;
            k.second = korisnik;
            it1++;
        }
        
        auto it2 = b.knjige.begin();
        for(auto k: knjige)
        {
            shared_ptr&lt;Knjiga&gt; knjiga(new Knjiga(it2-&gt;second-&gt;DajNaslov(), it2-&gt;second-&gt;DajAutora(), it2-&gt;second-&gt;DajZanr(), it2-&gt;second-&gt;DajGodinuIzdavanja()));
            k.second = knjiga;
            it2++;
        }
        
        return *this;
    }
    Biblioteka(const Biblioteka &amp;&amp;b)
    {
        korisnici = b.korisnici;
        knjige = b.knjige;
        
        for(auto k: b.korisnici) k.second = nullptr;
        for(auto k: b.knjige) k.second = nullptr;
    }
    Biblioteka &amp;operator=(Biblioteka &amp;&amp;b)
    {
        if(this == &amp;b) return *this;
        
        korisnici = b.korisnici;
        knjige = b.knjige;
        for(auto k: b.korisnici) k.second = nullptr;
        for(auto k: b.knjige) k.second = nullptr;
        
        return *this;
    }
    void RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu(int evidencijski_broj, string naslov, string ime_pisca, string zanr, int godina_izdavanja);
    Korisnik &amp;NadjiKorisnika(int clanski_broj);
    Knjiga &amp;NadjiKnjigu(int evidencijski_broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int evidencijski_broj, int clanski_broj);
    void RazduziKnjigu(int evidencijski_broj);
    void PrikaziZaduzenja(int clanski_broj);
};

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, string ime, string prezime, string adresa, string telefon)
{
    for(auto k: korisnici)
        if(k.first == clanski_broj) throw logic_error("Korisnik vec postoji");
    
    shared_ptr&lt;Korisnik&gt; k(new Korisnik);
    k-&gt;ime = ime;
    k-&gt;prezime = prezime;
    k-&gt;adresa = adresa;
    k-&gt;telefon = telefon;
    korisnici.insert(make_pair(clanski_broj, k));
}

void Biblioteka::RegistrirajNovuKnjigu(int evidencijski_broj, string naslov, string ime_pisca, string zanr, int godina_izdavanja)
{
    for(auto k: knjige)
        if(k.first == evidencijski_broj) throw logic_error("Knjiga vec postoji");
    
    shared_ptr&lt;Knjiga&gt; k(new Knjiga(naslov, ime_pisca, zanr, godina_izdavanja));
    knjige.insert(make_pair(evidencijski_broj, k));
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj)
{
    bool imaLiKorisnika = false;
    
    for(auto k: korisnici)
    {
        if(k.first == clanski_broj)
        {
            imaLiKorisnika = true;
            return *(k.second);
        }
    }
    
    if(!imaLiKorisnika) throw logic_error("Korisnik nije nadjen");
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int evidencijski_broj)
{
    bool imaLiKnjige = false;
    
    for(auto k: knjige)
    {
        if(k.first == evidencijski_broj)
        {
            imaLiKnjige = true;
            return *(k.second);
        }
    }
    
    if(!imaLiKnjige) throw logic_error("Knjiga nije nadjena");
}

<a name="1"></a><font color="#00FF00"><a href="match784-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

void Biblioteka::IzlistajKorisnike() const
{
    for(auto k: korisnici)
    {
        cout &lt;&lt; "Clanski broj: " &lt;&lt; k.first &lt;&lt; endl;
        cout &lt;&lt; "Ime i prezime: " &lt;&lt; k.second-&gt;ime &lt;&lt; " " &lt;&lt; k.second-&gt;prezime &lt;&lt; endl;
        cout &lt;&lt; "Adresa: " &lt;&lt; k.second-&gt;adresa &lt;&lt; endl;
</font>        cout &lt;&lt; "Broj telefona: " &lt;&lt; k.second-&gt;telefon &lt;&lt; endl;
    }
}

<a name="2"></a><font color="#0000FF"><a href="match784-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

void Biblioteka::IzlistajKnjige() const
{
    for(auto k: knjige)
    {
        cout &lt;&lt; "Evidencijski broj: " &lt;&lt; k.first &lt;&lt; endl;
        cout &lt;&lt; "Naslov: " &lt;&lt; k.second-&gt;DajNaslov() &lt;&lt; endl;
        cout &lt;&lt; "Pisac: " &lt;&lt; k.second-&gt;DajAutora() &lt;&lt; endl;
</font><a name="4"></a><font color="#FF00FF"><a href="match784-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        cout &lt;&lt; "Zanr: " &lt;&lt; k.second-&gt;DajZanr() &lt;&lt; endl;
        cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.second-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
        if(k.second-&gt;DaLiJeZaduzena())
</font><a name="6"></a><font color="#00FF00"><a href="match784-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; k.second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; k.second-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; endl; 
</font>    }
}

void Biblioteka::ZaduziKnjigu(int evidencijski_broj, int clanski_broj)
{
    bool imaLiKnjige = false, imaLiKorisnika = false;
    
    for(auto k: korisnici)
    {
        if(k.first == clanski_broj)
        {
            imaLiKorisnika = true;
            break;
        }
    }
    
    for(auto k: knjige)
    {
        if(k.first == evidencijski_broj)
        {
            imaLiKnjige = true;
            if(k.second-&gt;DaLiJeZaduzena()) throw logic_error("Knjiga vec zaduzena");
            k.second-&gt;ZaduziKnjigu(NadjiKorisnika(clanski_broj));
            break;
        }
    }
    
    if(!imaLiKnjige) throw logic_error("Knjiga nije nadjena");
    if(!imaLiKorisnika) throw logic_error("Korisnik nije nadjen");
}

<a name="7"></a><font color="#0000FF"><a href="match784-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void Biblioteka::RazduziKnjigu(int evidencijski_broj) 
{
    bool imaLiKnjige = false;
    
    for(auto k: knjige)
    {
        if(k.first == evidencijski_broj)
        {
            imaLiKnjige = true;
            if(k.second-&gt;DaLiJeZaduzena())
</font>            {
                k.second-&gt;RazduziKnjigu();
                break;
            }
            else
                throw logic_error("Knjiga nije zaduzena");
        }
    }
    
    if(!imaLiKnjige) throw logic_error("Knjiga nije nadjena");
}

void Biblioteka::PrikaziZaduzenja(int clanski_broj)
{
    bool imaLiKorisnika = false, imaLiZaduzenja = false;
    
    for(auto k: korisnici)
    {
        if(k.first == clanski_broj)
        {
            imaLiKorisnika = true;
            break;
        }
    }
    
    if(!imaLiKorisnika) throw logic_error("Korisnik nije nadjen");
    
    for(auto k: knjige)
    {
        if(k.second-&gt;DajKodKogaJe() == &amp;NadjiKorisnika(clanski_broj))
        {
            imaLiZaduzenja = true;
<a name="3"></a><font color="#00FFFF"><a href="match784-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            cout &lt;&lt; "Evidencijski broj: " &lt;&lt; k.first &lt;&lt; endl;
            cout &lt;&lt; "Naslov: " &lt;&lt; k.second-&gt;DajNaslov() &lt;&lt; endl;
            cout &lt;&lt; "Pisac: " &lt;&lt; k.second-&gt;DajAutora() &lt;&lt; endl;
</font>            cout &lt;&lt; "Zanr: " &lt;&lt; k.second-&gt;DajZanr() &lt;&lt; endl;
            cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.second-&gt;DajGodinuIzdavanja() &lt;&lt; endl;
        }
    }
    
    if(!imaLiZaduzenja)
        cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; endl;
}

int main ()
{
    Biblioteka b;
    int izbor = 0;
    
    while(izbor != 10)
    {
        cout &lt;&lt; "Meni: \n1. Registriraj novog korisnika\n2. Registriraj novu knjigu\n3. Nadji korisnika\n4. Nadji knjigu\n5. Izlistaj korisnike\n6. Izlistaj knjige\n7. Zaduzi knjigu\n8. Razduzi knjigu\n9. Prikazi zaduzeznja\n10. Izlaz\nUnesite vas izbor: ";
        cin &gt;&gt; izbor;
        
        switch(izbor)
        {
            case 1:
            {
                int clBr;
                string ime, prezime, adresa, telefon;
                cout &lt;&lt; "Unesite clanski broj: ";
                cin &gt;&gt; clBr;
                cin.ignore(10000, '\n');
                cout &lt;&lt; "Unesite ime: ";
                getline(cin, ime);
                cout &lt;&lt; "Unesite prezime: ";
                getline(cin, prezime);
                cout &lt;&lt; "Unesite adresu: ";
                getline(cin, adresa);
                cout &lt;&lt; "Unesite broj telefona: ";
                getline(cin, telefon);
                try
                {
                    b.RegistrirajNovogKorisnika(clBr, ime, prezime, adresa, telefon);
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
            }
            case 2:
            {
                int evBr, gIzdavanja;
                string naslov, autor, zanr;
                cout &lt;&lt; "Unesite evidencijski broj: ";
                cin &gt;&gt; evBr;
                cin.ignore(10000, '\n');
                cout &lt;&lt; "Unesite naslov: ";
                getline(cin, naslov);
                cout &lt;&lt; "Unesite pisca: ";
                getline(cin, autor);
                cout &lt;&lt; "Unesite zanr: ";
                getline(cin, zanr);
                cout &lt;&lt; "Unesite godinu izdavanja: ";
                cin &gt;&gt; gIzdavanja;
                try
                {
                    b.RegistrirajNovuKnjigu(evBr, naslov, autor, zanr, gIzdavanja);
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
            }
            case 3:
            {
                int clanski;
                cout &lt;&lt; "Unesite clanski broj: ";
                cin &gt;&gt; clanski;
                try
                {
                    Korisnik korisnik = b.NadjiKorisnika(clanski);
                    cout &lt;&lt; "Ime i prezime: " &lt;&lt; korisnik.ime &lt;&lt; " " &lt;&lt; korisnik.prezime &lt;&lt; endl;
                    cout &lt;&lt; "Adresa: " &lt;&lt; korisnik.adresa &lt;&lt; endl;
                    cout &lt;&lt; "Broj telefona: " &lt;&lt; korisnik.telefon &lt;&lt; endl;
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
            }
            case 4:
            {
                int evidencijski;
                cout &lt;&lt; "Unesite evidencijski broj: ";
                cin &gt;&gt; evidencijski;
                try
                {
                    Knjiga knjiga = b.NadjiKnjigu(evidencijski);
                    cout &lt;&lt; "Naslov: " &lt;&lt; knjiga.DajNaslov() &lt;&lt; endl;
                    cout &lt;&lt; "Pisac: " &lt;&lt; knjiga.DajAutora() &lt;&lt; endl;
                    cout &lt;&lt; "Zanr: " &lt;&lt; knjiga.DajZanr() &lt;&lt; endl;
                    cout &lt;&lt; "Godina izdavanja: " &lt;&lt; knjiga.DajGodinuIzdavanja() &lt;&lt; endl;
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
            }
            case 5:
            {
                b.IzlistajKorisnike();
                break;
            }
            case 6:
            {
                b.IzlistajKnjige();
                break;
            }
            case 7:
            {
                int c, e;
                cout &lt;&lt; "Unesite evidencijski broj: ";
                cin &gt;&gt; e;
                cout &lt;&lt; "Unesite clanski broj: ";
                cin &gt;&gt; c;
                try
                {
                    b.ZaduziKnjigu(e, c);
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
            }
            case 8:
            {
                int ev;
                cout &lt;&lt; "Unesite evidencijski broj: ";
                cin &gt;&gt; ev;
                try
                {
                    b.RazduziKnjigu(ev);
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
            }
            case 9:
            {
                int cl;
                cout &lt;&lt; "Unesite clanski broj: ";
                cin &gt;&gt; cl;
                try
                {
                    b.PrikaziZaduzenja(cl);
                    break;
                }
                catch(logic_error e)
                {
                    cout &lt;&lt; e.what() &lt;&lt; endl;
                }
                
            }
            case 10:
                break;
        }   
    }
    
	return 0;
}</pre>
</body>
</html>
