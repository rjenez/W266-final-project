<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9029.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

<a name="0"></a><font color="#FF0000"><a href="match120-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

struct Korisnik {
    std::string ime, prezime, adresa, telefon;   
};
class Biblioteka;
class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int god_izdavanja;
    Korisnik *pok;
    friend Biblioteka;
    public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja) : naslov(naslov), ime_pisca(ime_pisca), zanr(zanr), god_izdavanja(god_izdavanja) {this-&gt;pok=nullptr;}
    std::string DajNaslov () const { return naslov; }
    std::string DajAutora () const { return ime_pisca; }
    std::string DajZanr () const { return zanr; }
    int DajGodinuIzdavanja  () const { return god_izdavanja; }
    Korisnik * DajKodKogaJe () const { return pok; }
    void ZaduziKnjigu (Korisnik &amp; korisnik) { pok=&amp;korisnik; }
    void RazduziKnjigu () { pok=nullptr; }
    bool DaLiJeZaduzena () const { return pok!=nullptr; }
};

class Biblioteka {
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; mapa_korisnika;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; mapa_knjiga;
  
    public:
    Biblioteka(){}
    Biblioteka(Biblioteka &amp;bib);
    Biblioteka(const Biblioteka &amp;bib);
    void RegistrirajNovogKorisnika (int clanski_br, std::string ime, std::string prezima, std::string adresa, std::string telefon);
    void RegistrirajNovuKnjigu (int evid_br, std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja);
    Korisnik &amp; NadjiKorisnika (int clanski_br){   
        if(mapa_korisnika.find(clanski_br)==mapa_korisnika.end())
            throw std::logic_error ("Korisnik nije nadjen");
        else return *mapa_korisnika[clanski_br];
  }
    Knjiga &amp; NadjiKnjigu (int evid_br){   
        if(mapa_knjiga.find(evid_br)==mapa_knjiga.end())
            throw std::logic_error ("Knjiga nije nadjena");
        else return *mapa_knjiga[evid_br];
  }
    void IzlistajKorisnike () const;
    void IzlistajKnjige () const;
    void ZaduziKnjigu(int evid_br, int clanski_br);
    void RazduziKnjigu(int evid_br);
    void PrikaziZaduzenja(int clanski_br) const;
};

Biblioteka::Biblioteka(const Biblioteka &amp;bib){
    for(auto &amp;korisnik: bib.mapa_korisnika)
        RegistrirajNovogKorisnika(korisnik.first, korisnik.second-&gt;ime, korisnik.second-&gt;prezime, korisnik.second-&gt;adresa, korisnik.second-&gt;telefon);
    for(auto &amp;knjiga: bib.mapa_knjiga)
        RegistrirajNovuKnjigu(knjiga.first, knjiga.second-&gt;naslov, knjiga.second-&gt;ime_pisca, knjiga.second-&gt;zanr, knjiga.second-&gt;god_izdavanja);
        
    for(auto &amp;korisnik: bib.mapa_korisnika)
        for(auto &amp;knjiga: bib.mapa_knjiga)
            if(&amp;*korisnik.second==knjiga.second-&gt;pok)
                mapa_knjiga.at(knjiga.first)-&gt;pok=&amp;*mapa_korisnika.at(korisnik.first);
}

Biblioteka::Biblioteka(Biblioteka &amp;bib){
    for(auto &amp;korisnik: bib.mapa_korisnika)
        RegistrirajNovogKorisnika(korisnik.first, korisnik.second-&gt;ime, korisnik.second-&gt;prezime, korisnik.second-&gt;adresa, korisnik.second-&gt;telefon);
    for(auto &amp;knjiga: bib.mapa_knjiga)
        RegistrirajNovuKnjigu(knjiga.first, knjiga.second-&gt;naslov, knjiga.second-&gt;ime_pisca, knjiga.second-&gt;zanr, knjiga.second-&gt;god_izdavanja);
        
    for(auto &amp;korisnik: bib.mapa_korisnika)
        for(auto &amp;knjiga: bib.mapa_knjiga)
            if(&amp;*korisnik.second==knjiga.second-&gt;pok)
                mapa_knjiga.at(knjiga.first)-&gt;pok=&amp;*mapa_korisnika.at(korisnik.first);
}

void Biblioteka::RegistrirajNovogKorisnika (int clanski_br, std::string ime, std::string prezime, std::string adresa, std::string telefon) {
    try{
        if(mapa_korisnika.find(clanski_br)!=mapa_korisnika.end())
            throw std::logic_error ("Korisnik vec postoji");
     
        mapa_korisnika[clanski_br]=std::shared_ptr&lt;Korisnik&gt; (new Korisnik{ime,prezime, adresa, telefon});
    }catch(std::logic_error izuzetak){
        std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    }
}

void Biblioteka::RegistrirajNovuKnjigu (int evid_br, std::string naslov, std::string ime_pisca, std::string zanr, int god_izdavanja){
    try{
        if(mapa_knjiga.find(evid_br)!=mapa_knjiga.end())
            throw std::logic_error ("Knjiga vec postoji");
     
        mapa_knjiga[evid_br]=std::shared_ptr&lt;Knjiga&gt;(new Knjiga{naslov, ime_pisca, zanr, god_izdavanja});
    }catch(std::logic_error izuzetak){
        std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    }
}

void Biblioteka::IzlistajKnjige () const {
    for(auto&amp; knjiga : mapa_knjiga){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; knjiga.first&lt;&lt;std::endl
        &lt;&lt;"Naslov: "&lt;&lt; knjiga.second-&gt;naslov&lt;&lt;std::endl
        &lt;&lt;"Pisac: "&lt;&lt;knjiga.second-&gt;ime_pisca&lt;&lt;std::endl
        &lt;&lt;"Zanr: "&lt;&lt;knjiga.second-&gt;zanr&lt;&lt;std::endl
        &lt;&lt;"Godina izdavanja: "&lt;&lt;knjiga.second-&gt;god_izdavanja&lt;&lt;std::endl;
        if(knjiga.second-&gt;pok!=nullptr)
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt; knjiga.second-&gt;pok-&gt;ime&lt;&lt;" "&lt;&lt;knjiga.second-&gt;pok-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;std::endl;
    }
}

void Biblioteka::IzlistajKorisnike () const {
    for(auto&amp; korisnik : mapa_korisnika){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt; korisnik.first&lt;&lt;std::endl
        &lt;&lt;"Ime i prezime: "&lt;&lt; korisnik.second-&gt;ime&lt;&lt;" "&lt;&lt;korisnik.second-&gt;prezime&lt;&lt;std::endl
        &lt;&lt;"Adresa: "&lt;&lt;korisnik.second-&gt;adresa&lt;&lt;std::endl
        &lt;&lt;"Broj telefona: "&lt;&lt;korisnik.second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}

void Biblioteka::ZaduziKnjigu(int evid_br, int clanski_br){
    if(mapa_knjiga.find(evid_br)==mapa_knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
    if(mapa_korisnika.find(clanski_br)==mapa_korisnika.end())
        throw std::logic_error("Korisnik nije nadjen");
    if(mapa_knjiga[evid_br]-&gt;pok!=nullptr)
        throw std::logic_error("Knjiga vec zaduzena");
    mapa_knjiga[evid_br]-&gt;pok=&amp;*mapa_korisnika[clanski_br];
}

void Biblioteka::RazduziKnjigu(int evid_br){
    if(mapa_knjiga.find(evid_br)==mapa_knjiga.end())
        throw std::logic_error("Knjiga nije nadjena");
    if(mapa_knjiga[evid_br]-&gt;pok==nullptr)
        throw std::logic_error("Knjiga nije zaduzena");
    mapa_knjiga[evid_br]-&gt;pok=nullptr;
}

void Biblioteka::PrikaziZaduzenja( int clanski_br) const{
    if(mapa_korisnika.find(clanski_br)==mapa_korisnika.end())
        throw std::logic_error("Korisnik nije nadjen");
    bool zaduzenje(false);
    for(auto&amp; knjiga : mapa_knjiga){
        if(&amp;*mapa_korisnika.at(clanski_br)==knjiga.second-&gt;pok){
            zaduzenje=true;
            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; knjiga.first&lt;&lt;std::endl
            &lt;&lt;"Naslov: "&lt;&lt; knjiga.second-&gt;naslov&lt;&lt;std::endl
            &lt;&lt;"Pisac: "&lt;&lt;knjiga.second-&gt;ime_pisca&lt;&lt;std::endl
            &lt;&lt;"Zanr: "&lt;&lt;knjiga.second-&gt;zanr&lt;&lt;std::endl
            &lt;&lt;"Godina izdavanja: "&lt;&lt;knjiga.second-&gt;god_izdavanja&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    if(!zaduzenje)
        std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
</font>}

int main ()
{
	return 0;
}</pre>
</body>
</html>
