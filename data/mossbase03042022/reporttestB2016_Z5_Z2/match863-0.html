<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5659.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5659.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 1)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

struct Korisnik {
    std::string ime;
    std::string prezime;
    std::string adresa;
    std::string telefon;
};
class Knjiga
{
private:
    std::string naslov;
    std::string pisac;
    std::string zanr;
    int godina_izdavanja;
    std::shared_ptr&lt;Korisnik&gt; p;
public:
    Knjiga(std::string naslov1, std::string pisac1,std::string zanr1, int godina) {
        naslov=naslov1;
        pisac=pisac1;
        zanr=zanr1;
        godina_izdavanja=godina;
       
    }
    Knjiga() {};
    ~Knjiga() {};
    std::string DajNaslov() const {
        return naslov;
    }
    std::string DajAutora() const {
        return pisac;
    }
    std::string DajZanr() const {
        return zanr;
    }
    int DajGodinuIzdavanja() const {
        return godina_izdavanja;
    }
    void ZaduziKnjigu(Korisnik &amp;user) {
        *p=user;
    }
    void *RazduziKnjigu()  {
        p=nullptr;
    }
    std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() {
        return p;
    }
    bool DaLiJeZaduzena() {
        if(p==nullptr) {
            return false;
        } else return true;
    }
};

class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; user;
    std::map&lt;int, Knjiga*&gt; book;
public:
    void RegistrirajNovogKorisnika (int broj, std::string ime1, std::string prezime1, std::string adresa1, std::string telefon1);
<a name="3"></a><font color="#00FFFF"><a href="match863-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    void RegistrirajNovuKnjigu (int ev_broj, std::string naslov1, std::string ime_pisca1, std::string zanr1, int godina_izdavanja1);
    Korisnik &amp;NadjiKorisnika(int clanskibroj);
    Knjiga &amp;NadjiKnjigu(int evbroj);
    void IzlistajKorisnike();
    void IzlistajKnjige();
    void ZaduziKnjigu(int evbroj,int clbroj);
    void RazduziKnjigu(int evbroj);
    void PrikaziZaduzenja(int clbroj);
</font>    ~Biblioteka() {
        auto it=book.begin();
        auto it2=user.begin();
        while(it!=book.end()) {
            delete it-&gt;second;
            it-&gt;second=nullptr;
            it++;
        }
        while(it2!=user.end()) {
            delete it2-&gt;second;
            it2-&gt;second=nullptr;
            it2++;
        }
    }
};
<a name="1"></a><font color="#00FF00"><a href="match863-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

void Biblioteka::RegistrirajNovogKorisnika (int broj, std::string ime1, std::string prezime1, std::string adresa1, std::string telefon1)
{
    for(auto it = user.begin(); it != user.end(); it++)
        if(it-&gt;first==broj) throw std::logic_error ("Korisnik vec postoji");
    try {
        Korisnik *a= new Korisnik;
</font>        (*a).ime=ime1;
        (*a).prezime=prezime1;
        (*a).adresa=adresa1;
        (*a).telefon=telefon1;
        user.insert(std::make_pair(broj,a));
    } catch(...) {
        std::cout&lt;&lt;"Greska";
    }
}
<a name="4"></a><font color="#FF00FF"><a href="match863-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

void Biblioteka::RegistrirajNovuKnjigu (int ev_broj, std::string naslov1, std::string ime_pisca1, std::string zanr1, int godina_izdavanja1)
{
    for(auto it = book.begin(); it != book.end(); it++)
</font>        if((*it).first==ev_broj) throw std::logic_error ("Knjiga vec postoji");
    Knjiga *buch=new Knjiga(naslov1,ime_pisca1,zanr1,godina_izdavanja1);
    book.insert(std::make_pair(ev_broj,buch));
}
static Korisnik a;
Korisnik &amp;Biblioteka::NadjiKorisnika(int clanskibroj)
{
    for(auto it = user.begin(); it != user.end(); it++)
        if((*it).first==clanskibroj)  {
            try {

                a.ime=(*it).second-&gt;ime;
                a.prezime=(*it).second-&gt;prezime;
                a.adresa=(*it).second-&gt;adresa;
                a.telefon=(*it).second-&gt;telefon;
                return a;
            } catch(...) {
                std::cout&lt;&lt;"Greska";
            }
        } else
            throw std::logic_error ("Korisnik nije nadjen");
}
static Knjiga b;
Knjiga &amp;Biblioteka::NadjiKnjigu(int evbroj)
{
    for(auto it = book.begin(); it != book.end(); it++)
        if((*it).first==evbroj) {
            b=Knjiga((*it).second-&gt;DajNaslov(),(*it).second-&gt;DajAutora(),(*it).second-&gt;DajZanr(),(*it).second-&gt;DajGodinuIzdavanja());
            return b;
        } else
            throw std::logic_error ("Knjiga nije nadjena");
}
void Biblioteka::ZaduziKnjigu(int evbroj,int clbroj)
{
    auto it=book.begin();
    bool zaduzena=false;
    while(it!=book.end()) {
        if(evbroj==(*it).first &amp;&amp; (*it).second-&gt;DaLiJeZaduzena())
            throw std::logic_error("Knjiga zaduzena");
        if(evbroj==(*it).first) {
            zaduzena=true;
            break;
        }
        it++;
    }
    if(zaduzena==false)
        throw std::logic_error("Knjiga nije nadjena");

    auto it1=user.begin();
    zaduzena=false;
    while(it1!=user.end()) {
        if(clbroj==(*it1).first) {
            zaduzena=true;
            break;
        }
        it1++;
    }
    if(zaduzena==false)
        throw std::logic_error("Korisnik nije nadjen");
    (*it).second-&gt;ZaduziKnjigu(*((*it1).second));
}
/*for(auto it=book.begin(); it!=book.end(); it++) {
    if((*it).first==evbroj){
        for(auto it=user.begin(); it!=user.end(); it++) {
    if((*it).first==clbroj) {
       auto q=Knjiga::DajKodKogaJe();
       Knjiga::ZaduziKnjigu(q);
        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(*it).second-&gt;ime&lt;&lt;" "&lt;&lt;(*it).second-&gt;prezime;
    } else
        throw std::logic_error("Korisnik nije nadjen");
}
    }
    else
        throw std::logic_error("Knjiga nije nadjena");
}*/

void Biblioteka::IzlistajKorisnike()
{
    for(auto it = user.begin(); it != user.end(); it++) {
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt; (*it).first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(*it).second-&gt;ime&lt;&lt;" ";
<a name="2"></a><font color="#0000FF"><a href="match863-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        std::cout&lt;&lt;(*it).second-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;(*it).second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(*it).second-&gt;telefon&lt;&lt;std::endl;
</font><a name="5"></a><font color="#FF0000"><a href="match863-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige()
{
    for(auto it = book.begin(); it != book.end(); it++) {
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt; (*it).first&lt;&lt;std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match863-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        std::cout&lt;&lt;"Naslov: "&lt;&lt;(*it).second-&gt;DajNaslov()&lt;&lt;" "&lt;&lt;std::endl;
        std::cout&lt;&lt;"Pisac: "&lt;&lt;(*it).second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;(*it).second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*it).second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
</font>        Biblioteka::PrikaziZaduzenja((*it).first);
        std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::PrikaziZaduzenja(int clbroj)
{
    auto it1=user.begin();
    while(it1!=user.end()) {
        if(clbroj==(*it1).first) {
            std::cout&lt;&lt;"Knjiga je zaduzena od korisnika "&lt;&lt;(*it1).second-&gt;ime&lt;&lt;" "&lt;&lt;(*it1).second-&gt;prezime;
        }
        it1++;
    }
}
void Biblioteka::RazduziKnjigu(int evbroj)
{
    bool zaduzena=false;
    auto it=book.begin();

    while(it!=book.end()) {
        if(evbroj==(*it).first &amp;&amp; (*it).second-&gt;DaLiJeZaduzena()==false)
            throw std::logic_error("Knjiga zaduzena");
        if(evbroj==(*it).first) {
            zaduzena=true;
            break;
        }
        it++;
    }
    if(zaduzena==false)
        throw std::logic_error("Knjiga nije nadjena");
}

int main ()
{
    Biblioteka bib8;
    bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
    bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
    bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
    bib8.ZaduziKnjigu(2, 1);
    bib8.IzlistajKnjige();
    return 0;
}</pre>
</body>
</html>
