<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6248.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student6248.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;iterator&gt;
#include &lt;stdexcept&gt;

struct Korisnik
{
<a name="2"></a><font color="#0000FF"><a href="match171-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

    std::string ime,prezime,adresa,telefon;
};

class Knjiga
{
    std::string naslov,ime,zanr;
    int godina_izd;
    Korisnik *p=nullptr;
    public:
    Knjiga(std::string nas, std::string ime_p,std::string z,int godina)
    {
        naslov=nas; ime=ime_p; zanr=z; godina_izd=godina; p=nullptr;
    }
    std::string DajNaslov() const { return naslov; }
    std::string DajAutora() const { return ime; }
</font>    std::string DajZanr() const { return zanr; }
    int DajGodinuIzdavanja() const { return godina_izd; }
<a name="0"></a><font color="#FF0000"><a href="match171-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_74.gif"/></a>

    Korisnik *DajKodKogaJe() const { return p; }
    void ZaduziKnjigu(Korisnik &amp;k)
    {
        p=&amp;k;
    }
    void RazduziKnjigu()
    {
        p=nullptr;
    }
    bool DaLiJeZaduzena()
    {
        if(p==nullptr) return false;
        else return true;
    }
};

class Biblioteka
{
    std::map&lt;int, Korisnik*&gt; korisnici;
    std::map&lt;int, Knjiga*&gt; knjige;
    public:
    Biblioteka() {}
    Biblioteka(const Biblioteka &amp;b)
    {
        auto it(b.korisnici.begin());
        while(it!=b.korisnici.end())
        {
            int broj(it-&gt;first);
            Korisnik *pom(nullptr);
            try
            {
            pom=new Korisnik;
            pom-&gt;ime=it-&gt;second-&gt;ime;
            pom-&gt;prezime=it-&gt;second-&gt;prezime;
            pom-&gt;adresa=it-&gt;second-&gt;adresa;
            pom-&gt;telefon=it-&gt;second-&gt;telefon;
            korisnici.insert(std::make_pair(broj,pom));
            delete pom;
            }
            catch(...)
            {
                delete pom;
            }
            it++;
        }
        auto it2(b.knjige.begin());
        while(it2!=b.knjige.end())
        {
            int broj(it2-&gt;first);
            Knjiga *pom(nullptr);
            pom=new Knjiga(it2-&gt;second-&gt;DajNaslov(),it2-&gt;second-&gt;DajAutora(),it2-&gt;second-&gt;DajZanr(),it2-&gt;second-&gt;DajGodinuIzdavanja());
            knjige.insert(std::make_pair(broj,pom));
            delete pom;
            it2++;
        }
    }
    Biblioteka(Biblioteka &amp;&amp;b)
    {
        auto it(b.korisnici.begin());
        while(it!=b.korisnici.end())
        {
            int broj(it-&gt;first);
            Korisnik *pomocni(nullptr);
            pomocni=it-&gt;second;
            korisnici.insert(std::make_pair(broj,pomocni));
            it-&gt;second=nullptr;
            it++;
        }
        auto it2(b.knjige.begin());
        while(it2!=b.knjige.end())
        {
            int broj(it2-&gt;first);
            Knjiga *pomocni(nullptr);
            pomocni=it2-&gt;second;
            knjige.insert(std::make_pair(broj,pomocni));
            it2-&gt;second=nullptr;
            it2++;
        }
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;b)
    {
        
        return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;b)
    {
        return *this;
    }
    ~Biblioteka()
    {
        auto it(korisnici.begin());
        while(it!=korisnici.end())
        {
            delete it-&gt;second;
            it++;
        }
        auto it2(knjige.begin());
        while(it2!=knjige.end())
        {
            delete it2-&gt;second;
            it2++;
        }
    }
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon)
    {
        auto it(korisnici.begin());
        while(it!=korisnici.end())
        {
            if(clanski_broj==it-&gt;first) throw std::logic_error("Korisnik vec postoji");
            it++;
        }
        Korisnik *novi(nullptr);
        novi=new Korisnik;
        novi-&gt;ime=ime;
        novi-&gt;prezime=prezime;
        novi-&gt;adresa=adresa;
        novi-&gt;telefon=telefon;
        korisnici.insert(std::make_pair(clanski_broj,novi));
        delete novi;
    }
    void RegistrirajNovuKnjigu(int broj_knjige, std::string naslov, std::string pisac, std::string zanr, int godina)
    {
        auto it(knjige.begin());
        while(it!=knjige.end())
        {
            if(broj_knjige==it-&gt;first) throw std::logic_error("Knjiga vec postoji");
            it++;
        }
        Knjiga *nova(nullptr);
        nova=new Knjiga(naslov,pisac,zanr,godina);
        knjige.insert(std::make_pair(broj_knjige,nova));
        delete nova;
    }
    Korisnik &amp;NadjiKorisnika(int clanski_broj)
    {
        bool ima(false);
        auto it(korisnici.begin());
        while(it!=korisnici.end())
        {
            if(clanski_broj==it-&gt;first) { ima=true; break; }
            else ima=false;
            it++;
        }
        if(ima==false) throw std::logic_error("Korisnik nije nadjen");
        return *it-&gt;second;
    }
    Knjiga &amp;NadjiKnjigu(int broj_knjige)
    {
        bool ima(false);
        auto it(knjige.begin());
        while(it!=knjige.end())
        {
            if(broj_knjige==it-&gt;first) { ima=true; break; }
            else ima=false;
            it++;
        }
        if(ima==false) throw std::logic_error("Knjiga nije nadjena");
        return *it-&gt;second;
    }
    void IzlistajKorisnike() const 
    {
        auto it(korisnici.begin());
        while(it!=korisnici.end())
        {
            std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; it-&gt;second-&gt;ime &lt;&lt; it-&gt;second-&gt;prezime &lt;&lt; std::endl;
            std::cout &lt;&lt; "Adresa: " &lt;&lt; it-&gt;second-&gt;adresa &lt;&lt; std::endl &lt;&lt; "Telefon: " &lt;&lt; it-&gt;second-&gt;telefon &lt;&lt; std::endl;
            it++;
        }
    }
    void IzlistajKnjige() const
    {
        auto it(knjige.begin());
        while(it!=knjige.end())
        {
            std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
            std::cout &lt;&lt; "Naslov: " &lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
</font>            std::cout &lt;&lt; "Pisac: " &lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match171-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

            std::cout &lt;&lt; "Zanr: " &lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
            std::cout &lt;&lt; "Godina: " &lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl;
            it++;
        }
    }
};

int main ()
{
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1,"Niko","Nikic","Zmaja od Bosne bb","123 456");
    b.RegistrirajNovuKnjigu(2,"Vlak u snijegu","Mato Lovrak","Roman",1931);
    std::cout &lt;&lt; "Ime korisnika: " &lt;&lt; b.NadjiKorisnika(1).ime &lt;&lt; std::endl;
    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; b.NadjiKnjigu(2).DajGodinuIzdavanja() &lt;&lt; std::endl;
    b.IzlistajKorisnike();
    b.IzlistajKnjige();
	return 0;
</font>}</pre>
</body>
</html>
