<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2267.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2267.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

<a name="0"></a><font color="#FF0000"><a href="match134-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_35.gif"/></a>

struct Korisnik{
    std::string ime, prezime,adresa, telefon;
};

class Knjiga{
private:
  std::string naslov,ime_pisca,zanr;
  int godina_izdavanja;
  Korisnik*korisnik;
  public:
  Knjiga(std::string naslov,std::string ime_pisca,std::string zanr,int godina_izdavanja){
      Knjiga::naslov=naslov;
      Knjiga::ime_pisca=ime_pisca;
      Knjiga::zanr=zanr;
      Knjiga::godina_izdavanja=godina_izdavanja;
      korisnik=nullptr;
  }
    
   std::string DajNaslov()const{
       return naslov;
   }
   
   std::string DajAutora()const{
       return ime_pisca;
   }
   
   std::string DajZanr()const{
       return zanr;
   }
   
   int DajGodinuIzdavanja()const{
       return godina_izdavanja;
   }
    
   Korisnik *DajKodKogaJe(){
        return korisnik;
    }
    
   void ZaduziKnjigu(Korisnik &amp;k){
       korisnik=&amp;k;
   }
    
   void RazduziKnjigu(){
       korisnik=nullptr;
   }
   
   bool DaLiJeZaduzena()const{
       if(korisnik==nullptr)    return false;
       return true;
   }

};

class Biblioteka{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt;m_korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt;m_knjige;
     public:
 
   
    void RegistrirajNovogKorisnika(int cl_broj,std::string ime, std::string prezime, std::string adresa, std::string br_telefona){
        auto it=m_korisnici.find(cl_broj);
        if(it!=m_korisnici.end())   throw std::logic_error("Korisnik vec postoji");
        auto korisnik=std::make_shared&lt;Korisnik&gt;();
        korisnik-&gt;ime=ime;korisnik-&gt;prezime=prezime; korisnik-&gt;adresa=adresa; korisnik-&gt;telefon=br_telefona;
        m_korisnici.insert(std::make_pair(cl_broj,korisnik));
        
    }
    
    void RegistrirajNovuKnjigu(int ev_broj,std::string naslov,std::string ime_pisca,std::string zanr,int godina_izdavanja)
 {   
    auto it=m_knjige.find(ev_broj);
    if(it!=m_knjige.end())  throw std::logic_error("Knjiga vec postoji");
    auto knjiga=std::make_shared&lt;Knjiga&gt;(naslov,ime_pisca,zanr,godina_izdavanja);
    m_knjige.insert(std::make_pair(ev_broj,knjiga));

}
    
    Korisnik &amp;NadjiKorisnika(int cl_broj)const;
    Knjiga &amp;NadjiKnjigu(int ev_broj)const;
    void IzlistajKorisnike()const;
    void IzlistajKnjige()const;
    void ZaduziKnjigu(int ev_broj, int cl_broj);
    void RazduziKnjigu(int ev_broj);
    void PrikaziZaduzenja(int cl_broj)const;
    
};


Korisnik &amp;Biblioteka::NadjiKorisnika(int cl_broj)const{
    auto it=m_korisnici.find(cl_broj);
    if(it==m_korisnici.end())   throw std::logic_error("Korisnik nije nadjen");
    
    return *(it-&gt;second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj)const{
    
    auto it=m_knjige.find(ev_broj);
    if(it==m_knjige.end())  throw std::logic_error("Knjiga nije nadjena");
    
    return *(it-&gt;second);
    
}


void Biblioteka::IzlistajKorisnike()const{
    
    auto it=m_korisnici.begin();
    for(int i=0;i&lt;m_korisnici.size();i++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match134-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
        it++;
    }
    
}

void Biblioteka::IzlistajKnjige()const{
    
    auto it=m_knjige.begin();
    for(int i=0;i&lt;m_knjige.size();i++){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match134-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_25.gif"/></a>

        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if((it-&gt;second-&gt;DaLiJeZaduzena())==true){
        std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime;
        std::cout&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
        }
        std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
        it++;
    }
}

void Biblioteka::ZaduziKnjigu(int ev_broj,int cl_broj){
    if(ev_broj&lt;0 || ev_broj&gt;m_knjige.size())
        throw std::logic_error("Knjiga nije nadjena");
    auto it=m_knjige.find(ev_broj);
    if((it-&gt;second-&gt;DaLiJeZaduzena())==true)  throw std::logic_error("Knjiga vec zaduzena");
    if(cl_broj&lt;0 || cl_broj&gt;m_korisnici.size())
        throw std::logic_error("Korisnik nije nadjen");
    auto itt=m_korisnici.find(cl_broj);
   it-&gt;second-&gt;ZaduziKnjigu(*(itt-&gt;second)); 
    
}

void Biblioteka::RazduziKnjigu(int ev_broj){
    if(ev_broj&lt;0 || ev_broj&gt;m_knjige.size())
        throw std::logic_error("Knjiga nije nadjena");
    auto it=m_knjige.find(ev_broj);
    if((it-&gt;second-&gt;DaLiJeZaduzena())==false)   throw std::logic_error("Knjiga nije zaduzena");
    it-&gt;second-&gt;RazduziKnjigu();

}

void Biblioteka::PrikaziZaduzenja(int cl_broj)const{
   
   int brojac(0);
    if(cl_broj&lt;0 || cl_broj&gt;m_korisnici.size()) throw std::logic_error("Korisnik nije nadjen");
    auto itt=m_korisnici.find(cl_broj);
    auto s=itt;
    auto it=m_knjige.begin();
    auto p=it;
    for(int i=0;i&lt;m_knjige.size();i++){
        if((p-&gt;second.get())-&gt;DajKodKogaJe()==(s-&gt;second).get())   brojac++;
        p++;
    }
    
    if(brojac&gt;0) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    if(brojac==0){
    for(int i=0;i&lt;m_knjige.size();i++){
       
        if((it-&gt;second.get())-&gt;DajKodKogaJe()==itt-&gt;second.get()){
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match134-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_21.gif"/></a>

        std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
    }
    
    it++;
    }}

}


int main(){
    
    int x;
    std::cout&lt;&lt;"Odaberi mogucnost: (1 za unos novog korisnika, 2 za prikaz liste korisnika biblioteke,3 za trazenje korisnika,0 za kraj)";
    std::cin&gt;&gt;x;
    Biblioteka s;
    s.RegistrirajNovogKorisnika(1,"Pero","Peric","Grbavica","789/890");
    s.RegistrirajNovogKorisnika(2,"Marica","Maric","Isaka Samokovlije","765/342");
    for(;;){
    if(x==0)    return 0;
    if(x==1){
           int cl_broj;
           std::string ime;
        try{
            while(ime!="kraj"){
        std::cout&lt;&lt;"Unesite clanski broj, ime, prezime,adresu i telefon korisnika"&lt;&lt;std::endl;
        std::string prezime,adresa,telefon;
        std::cin&gt;&gt;cl_broj;
        std::cin.ignore(100,'\n');
        std::getline(std::cin,ime);
        if(ime=="kraj") break;
        std::getline(std::cin,prezime);
        std::getline(std::cin,adresa);
        std::getline(std::cin,telefon);
        s.RegistrirajNovogKorisnika(cl_broj,ime,prezime,adresa,telefon);
    }
        }
    
    catch(std::logic_error e){
        std::cout&lt;&lt;e.what();
        return 0;
    }
    }
    
    else if(x==2){
        try{
        s.IzlistajKorisnike();}
        catch(std::logic_error e){
            std::cout&lt;&lt;e.what();
        }
    }
    
    else if(x==3){
       int x;
       std::cout&lt;&lt;"Unesite clanski broj trazenog korisnika: ";
       std::cin&gt;&gt;x;
       try{
       std::cout&lt;&lt;s.NadjiKorisnika(x).ime;
       std::cout&lt;&lt;" "&lt;&lt;s.NadjiKorisnika(x).prezime;    
       }
       catch(std::logic_error e){
           std::cout&lt;&lt;e.what();
           return 0;
       }
    }
    
    }
    
    return 0;
</font>}</pre>
</body>
</html>
