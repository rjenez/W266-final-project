<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2232.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2232.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};

class Knjiga{
  std::string naziv_knjige, pisac, zanr;
  int godina_izdavanja;
  Korisnik* zaduzio;
  public:
  Knjiga(std::string ime_knjige,std::string ime_pisca, std::string zanr_knjige, int godina){
    naziv_knjige=ime_knjige; pisac=ime_pisca; zanr=zanr_knjige; godina_izdavanja=godina; zaduzio=nullptr;
  }
  std::string DajNaslov() const {return naziv_knjige;}
  std::string DajAutora() const {return pisac;}
  std::string DajZanr() const {return zanr;}
  int DajGodinuIzdavanja() const { return godina_izdavanja;}
<a name="1"></a><font color="#00FF00"><a href="match487-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

  Korisnik* DajKodKogaJe() const {return zaduzio;}
  void ZaduziKnjigu(Korisnik &amp;k) { zaduzio=&amp;k; }
  void RazduziKnjigu() { zaduzio=nullptr; }
  bool DaLiJeZaduzena() const { return zaduzio!=nullptr;}
};

class Biblioteka{
  std::map&lt;int,Korisnik*&gt; korisnici;
</font><a name="7"></a><font color="#0000FF"><a href="match487-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

  std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
  public:
  Biblioteka(){};
  Biblioteka(const Biblioteka &amp;b);
  Biblioteka(Biblioteka &amp;&amp;b);
</font>  ~Biblioteka();
<a name="5"></a><font color="#FF0000"><a href="match487-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  Biblioteka &amp;operator =(const Biblioteka &amp;b);
  Biblioteka &amp;operator =(Biblioteka &amp;&amp;b);
  void RegistrirajNovogKorisnika(int clanski_broj, std::string ime_korisnika, std::string prezime_korisnika, std::string adresa_korisnika, std::string telefon_korisnika );
</font>  void RegistrirajNovuKnjigu(int br_knjige, std::string naslov, std::string ime_pisca, std::string zanr_knjige, int godina);
  Korisnik &amp;NadjiKorisnika(int clanski_broj) const;
  Knjiga &amp;NadjiKnjigu(int br_knjige) const;
  void IzlistajKorisnike() const;
  void IzlistajKnjige() const;
  void ZaduziKnjigu(int br_knjige, int clanski_broj);
  void RazduziKnjigu(int br_knjige);
  void PrikaziZaduzenja(int clanski_broj) const;
};

void Biblioteka::PrikaziZaduzenja(int clanski_broj) const{
  auto it1=korisnici.find(clanski_broj);
  if(it1==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  bool ImaLiBaremJednoZaduzenje=false;
  for(auto it=knjige.begin();it!=knjige.end();it++){
    if(it-&gt;second-&gt;DaLiJeZaduzena()){
<a name="8"></a><font color="#00FFFF"><a href="match487-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

      if(it-&gt;second-&gt;DajKodKogaJe()==it1-&gt;second){
        ImaLiBaremJednoZaduzenje=true;
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
<a name="4"></a><font color="#FF00FF"><a href="match487-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
      }
    }
  }
  if(!ImaLiBaremJednoZaduzenje) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
</font>}

void Biblioteka::RazduziKnjigu(int br_knjige){
  auto it=knjige.find(br_knjige);
  if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  else if(!(it-&gt;second-&gt;DaLiJeZaduzena())) throw std::logic_error("Knjiga nije zaduzena");
  else{
    it-&gt;second-&gt;RazduziKnjigu();
  }
}

void Biblioteka::ZaduziKnjigu(int br_knjige, int clanski_broj){
  auto it=knjige.find(br_knjige);
  auto it1=korisnici.find(clanski_broj);
  if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  else if((it-&gt;second)-&gt;DaLiJeZaduzena()) throw std::logic_error("Knjiga vec zaduzena");
  else if(it1==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  else{
<a name="6"></a><font color="#00FF00"><a href="match487-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    it-&gt;second-&gt;ZaduziKnjigu(*(it1-&gt;second));
  }
}

void Biblioteka::IzlistajKnjige() const{
  for(auto it=knjige.begin();it!=knjige.end();it++){
    std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
</font>    std::cout &lt;&lt; "Naslov: " &lt;&lt; (it-&gt;second)-&gt;DajNaslov() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Pisac: " &lt;&lt; (it-&gt;second)-&gt;DajAutora() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Zanr: " &lt;&lt; (it-&gt;second)-&gt;DajZanr() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; (it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt; std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match487-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if((it-&gt;second)-&gt;DaLiJeZaduzena()) std::cout &lt;&lt; "Zaduzena kod korisnika: " &lt;&lt; (it-&gt;second)-&gt;DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;DajKodKogaJe()-&gt;prezime &lt;&lt; std::endl;
  }   
  std::cout &lt;&lt; std::endl;
}

void Biblioteka::IzlistajKorisnike() const {
  for(auto it=korisnici.begin();it!=korisnici.end();it++){
</font>    std::cout &lt;&lt; "Clanski broj: " &lt;&lt; it-&gt;first &lt;&lt; std::endl;
    std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; (it-&gt;second)-&gt;ime &lt;&lt; " " &lt;&lt; (it-&gt;second)-&gt;prezime &lt;&lt; std::endl;
    std::cout &lt;&lt; "Adresa: " &lt;&lt; (it-&gt;second)-&gt;adresa &lt;&lt; std::endl;
    std::cout &lt;&lt; "Broj telefona: " &lt;&lt; (it-&gt;second)-&gt;telefon &lt;&lt; std::endl;
    std::cout &lt;&lt; std::endl;
  }
}

void Biblioteka::RegistrirajNovogKorisnika(int clanski_broj, std::string ime_korisnika, std::string prezime_korisnika, std::string adresa_korisnika, std::string telefon_korisnika ){
<a name="0"></a><font color="#FF0000"><a href="match487-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

  auto it=korisnici.find(clanski_broj);
  if(it!=korisnici.end()) throw std::logic_error("Korisnik vec postoji");
  Korisnik a; a.ime=ime_korisnika; a.prezime=prezime_korisnika;a.adresa=adresa_korisnika; a.telefon=telefon_korisnika;
  auto pok=new Korisnik(a);
</font><a name="2"></a><font color="#0000FF"><a href="match487-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

  korisnici.insert(std::make_pair(clanski_broj,pok));
}

void Biblioteka::RegistrirajNovuKnjigu(int br_knjige, std::string naslov, std::string ime_pisca, std::string zanr_knjige, int godina){
  auto it=knjige.find(br_knjige);
</font>  if(it!=knjige.end()) throw std::logic_error("Knjiga vec postoji");
  auto pok=std::make_shared&lt;Knjiga&gt;(Knjiga(naslov,ime_pisca,zanr_knjige,godina));
  knjige.insert(std::make_pair(br_knjige,pok));
}

Korisnik &amp;Biblioteka::NadjiKorisnika(int clanski_broj) const{
  auto it=korisnici.find(clanski_broj);
  if(it==korisnici.end()) throw std::logic_error("Korisnik nije nadjen");
  return *(it-&gt;second);
}

Knjiga &amp;Biblioteka::NadjiKnjigu(int br_knjige) const{
  auto it=knjige.find(br_knjige);
  if(it==knjige.end()) throw std::logic_error("Knjiga nije nadjena");
  return *(it-&gt;second);
}

Biblioteka &amp;Biblioteka::operator =(Biblioteka &amp;&amp;b){
  if(&amp;b!=this){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
      delete it-&gt;second;
    }
    /*for(auto it=knjige.begin();it!=knjige.end();it++){
      delete it-&gt;second;
    }*/
    korisnici.clear(); knjige.clear();
    for(auto it=(b.korisnici).begin();it!=(b.korisnici).end();it++){
      korisnici.insert(std::make_pair(it-&gt;first,it-&gt;second));
      it-&gt;second=nullptr;
    }
    b.korisnici.clear();
    for(auto it=(b.knjige).begin();it!=(b.knjige).end();it++){
      knjige.insert(std::make_pair(it-&gt;first,it-&gt;second));
      it-&gt;second=nullptr;
    }
    b.knjige.clear();
  }
  return *this;
}

Biblioteka &amp;Biblioteka::operator =(const Biblioteka &amp;b){
  if(&amp;b!=this){
    for(auto it=korisnici.begin();it!=korisnici.end();it++){
      delete it-&gt;second;
    }
    /*for(auto it=knjige.begin();it!=knjige.end();it++){
      delete it-&gt;second;
    }*/
    korisnici.clear(); knjige.clear();
    for(auto it=(b.korisnici).begin();it!=(b.korisnici).end();it++){
<a name="9"></a><font color="#FF00FF"><a href="match487-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

      korisnici.insert(std::make_pair(it-&gt;first,new Korisnik(*(it-&gt;second))));
    }
    for(auto it=(b.knjige).begin();it!=(b.knjige).end();it++){
      knjige.insert(std::make_pair(it-&gt;first,std::make_shared&lt;Knjiga&gt;(*(it-&gt;second))));
</font>    }
  }
  return *this;
}

Biblioteka::~Biblioteka(){
  for(auto it=korisnici.begin();it!=korisnici.end();it++){
    delete it-&gt;second;
  }
  /*for(auto it=knjige.begin();it!=knjige.end();it++){
    delete it-&gt;second;
  }*/
}

Biblioteka::Biblioteka(Biblioteka &amp;&amp;b){
  for(auto it=(b.korisnici).begin();it!=(b.korisnici).end();it++){
    korisnici.insert(std::make_pair(it-&gt;first,it-&gt;second));
    it-&gt;second=nullptr;
  }
  b.korisnici.clear();
  for(auto it=(b.knjige).begin();it!=(b.knjige).end();it++){
    knjige.insert(std::make_pair(it-&gt;first,it-&gt;second));
    it-&gt;second=nullptr;
  }
  b.knjige.clear();
}

Biblioteka::Biblioteka(const Biblioteka &amp;b){
  for(auto it=(b.korisnici).begin();it!=(b.korisnici).end();it++){
<a name="10"></a><font color="#FF0000"><a href="match487-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    korisnici.insert(std::make_pair(it-&gt;first,new Korisnik(*(it-&gt;second))));
  }
  for(auto it=(b.knjige).begin();it!=(b.knjige).end();it++){
    knjige.insert(std::make_pair(it-&gt;first,std::make_shared&lt;Knjiga&gt;(*(it-&gt;second))));
</font>  }
}

int main ()
{
 
	return 0;
}</pre>
</body>
</html>
