<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8518.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8518.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include&lt;map&gt;
#include&lt;string&gt;
#include&lt;algorithm&gt;
#include&lt;memory&gt;
struct Korisnik {
  std::string ime,prezime,adresa,telefon;
};

class Knjiga
{
  std::string naslov_knjige,ime_pisca,zanr;
  int godina_izdavanja;
  Korisnik*zaduzenje;
public:

  Knjiga( std::string naslov_knjige,std::string ime_pisca, std::string zanr, int godina_izdavanja ): naslov_knjige(naslov_knjige),ime_pisca(ime_pisca),
    zanr(zanr),godina_izdavanja(godina_izdavanja),zaduzenje(nullptr) {
  }

  std::string DajNaslov()const {
    return naslov_knjige;
  }

  std::string DajAutora()const {
    return ime_pisca;
  }

  std::string DajZanr()const {
    return zanr;
  }

  int DajGodinuIzdavanja()const {
    return godina_izdavanja;
  }

<a name="0"></a><font color="#FF0000"><a href="match140-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_90.gif"/></a>

  Korisnik* DajKodKogaJe()const {
    return zaduzenje;
  }

  void ZaduziKnjigu(Korisnik &amp;k) {
    zaduzenje=&amp;k;
  }

  void RazduziKnjigu() {
    zaduzenje=nullptr;
  }

  bool DaLiJeZaduzena()const {
    if(zaduzenje!=nullptr) {
      return true;
    }
    return false;
  }

};

class Biblioteka
{
  std::map&lt;int, std::shared_ptr&lt;Korisnik&gt; &gt; korisnici;
  std::map&lt;int, std::shared_ptr&lt;Knjiga&gt; &gt; knjige;

public:

  Biblioteka() {}

  Biblioteka(const Biblioteka &amp;b) {

    for(auto &amp;x : b.korisnici) {
      korisnici[x.first]=std::make_shared&lt; Korisnik &gt;(*(x.second)) ; //prepisujemo clanski broj i alociramo prostor novi za korisnika koji inicijaliziramo na odg vrijednosti;
    }
    for(auto &amp;x : b.knjige) {
      knjige[x.first]=std::make_shared&lt; Knjiga&gt; (*(x.second) ); //prepisujemo evidencijski broj i alociramo prostor novi za knjgu koji inicijaliziramo na odg vrijednosti; sa tim da moramo pok na zaduzenje premjestiti !
      (*(knjige[x.first])).RazduziKnjigu(); // zaduzenje postavljamo na nullptr
    }
  }

  Biblioteka(Biblioteka &amp;&amp;b) {

    for(auto &amp;x : b.korisnici) {
      korisnici[x.first]=x.second; //pokazivac preuzimamo od privremene
    }

    for(auto &amp;x : b.knjige) {
      knjige[x.first]=x.second; //pokazivac preuzimamo od privremene
    }
  }

  Biblioteka &amp;operator=(const Biblioteka &amp;b) {
    if(this!=&amp;b) {
      for(auto &amp;x : b.korisnici) {
        korisnici[x.first]=std::make_shared&lt;  Korisnik &gt;(*(x.second) ); //prepisujemo clanski broj i alociramo prostor novi za korisnika koji inicijaliziramo na odg vrijednosti;
      }
      for(auto &amp;x : b.knjige) {
        knjige[x.first]=std::make_shared&lt; Knjiga &gt;(*(x.second) ); //prepisujemo evidencijski broj i alociramo prostor novi za knjgu koji inicijaliziramo na odg vrijednosti; sa tim da moramo pok na zaduzenje premjestiti !
        (*(knjige[x.first])).RazduziKnjigu(); // zaduzenje postavljamo na nullptr
      }
    }
    return *this;
  }

  Biblioteka &amp;operator=(Biblioteka &amp;&amp;b) {
    for(auto &amp;x : b.korisnici) {
      korisnici[x.first]=x.second; //pokazivac preuzimamo od privremene
    }

    for(auto &amp;x : b.knjige) {
      knjige[x.first]=x.second; //pokazivac preuzimamo od privremene
    }
    return *this;
  }



  void RegistrirajNovogKorisnika(int broj, std::string ime,std::string prezime,std::string adresa,std::string telefon) {

    if( korisnici.find(broj) != std::end(korisnici) ) {
      throw std::logic_error("Korisnik vec postoji");
    }
    korisnici[broj]=std::make_shared&lt; Korisnik&gt;();
    (*(korisnici[broj]))= {ime,prezime,adresa,telefon};
  }

  void RegistrirajNovuKnjigu(int broj, std::string naslov_knjige,std::string ime_pisca,std::string zanr,int godina_izdavanja) {

    if( knjige.find(broj) != std::end(knjige) ) {
      throw std::logic_error("Knjiga vec postoji");
    }
    knjige[broj]=std::make_shared&lt; Knjiga&gt; (naslov_knjige,ime_pisca,zanr,godina_izdavanja);

  }

  Korisnik &amp;NadjiKorisnika(int broj)const {
    auto it(korisnici.find(broj));
    if( it == std::end(korisnici) ) {
      throw std::logic_error("Korisnik nije nadjen");
    }
    return *((*it).second);
  }

  Knjiga &amp;NadjiKnjigu(int broj)const {
    auto it(knjige.find(broj));
    if( it == std::end(knjige) ) {
      throw std::logic_error("Knjiga nije nadjena");
    }
    return *((*it).second);
  }

  void IzlistajKorisnike()const {
    std::for_each(std::begin(korisnici),std::end(korisnici), [](std::pair&lt; int, std::shared_ptr&lt;Korisnik&gt; &gt;x) {
      std::cout &lt;&lt;"Clanski broj: "&lt;&lt;x.first &lt;&lt; std::endl;
      std::cout &lt;&lt; "Ime i prezime: " &lt;&lt;(*(x.second)).ime&lt;&lt;" "&lt;&lt;(*(x.second)).prezime&lt;&lt; std::endl;
      std::cout &lt;&lt; "Adresa: " &lt;&lt;(*(x.second)).adresa&lt;&lt; std::endl;
      std::cout &lt;&lt; "Broj telefona: " &lt;&lt;(*(x.second)).telefon&lt;&lt; std::endl;
      std::cout  &lt;&lt; std::endl;
    });
  }

  void IzlistajKnjige()const {
    std::for_each(std::begin(knjige),std::end(knjige), [](std::pair&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt;x) {
      std::cout &lt;&lt;"Evidencijski broj: "&lt;&lt;x.first &lt;&lt; std::endl;
      std::cout &lt;&lt; "Naslov: " &lt;&lt;(*(x.second)).DajNaslov()&lt;&lt; std::endl;
      std::cout &lt;&lt; "Pisac: " &lt;&lt;(*(x.second)).DajAutora()&lt;&lt; std::endl;
      std::cout &lt;&lt; "Zanr: " &lt;&lt;(*(x.second)).DajZanr()&lt;&lt; std::endl;
      std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt;(*(x.second)).DajGodinuIzdavanja()&lt;&lt; std::endl;
      if((*(x.second)).DaLiJeZaduzena()) {
        std::cout &lt;&lt;"Zaduzena kod korisnika: "&lt;&lt; (*(*(x.second)).DajKodKogaJe()).ime  &lt;&lt;" "&lt;&lt;(*(*(x.second)).DajKodKogaJe()).prezime &lt;&lt; std::endl;
      }
      std::cout &lt;&lt; std::endl;
    });
  }

  void ZaduziKnjigu(int evidencijski,int clanski) {
    if(NadjiKnjigu(evidencijski).DaLiJeZaduzena() ) {
      throw std::logic_error("Knjiga vec zaduzena");
    }
    NadjiKnjigu(evidencijski).ZaduziKnjigu(NadjiKorisnika(clanski));
  }

  void RazduziKnjigu(int evidencijski) {
    if(NadjiKnjigu(evidencijski).DaLiJeZaduzena() == false ) {
      throw std::logic_error("Knjiga nije zaduzena");
    }
    NadjiKnjigu(evidencijski).RazduziKnjigu();
  }


  void PrikaziZaduzenja (int clanski) {
    int brojac(0);
    for(auto x : knjige) {
      if( std::shared_ptr&lt;Korisnik&gt;( (*(x.second)).DajKodKogaJe() ) == std::shared_ptr&lt;Korisnik&gt;(&amp;NadjiKorisnika(clanski) )) {
        std::cout &lt;&lt;"Evidencijski broj: "&lt;&lt;x.first &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naslov: " &lt;&lt;(*(x.second)).DajNaslov()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt;(*(x.second)).DajAutora()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Zanr: " &lt;&lt;(*(x.second)).DajZanr()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt;(*(x.second)).DajGodinuIzdavanja()&lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;
        brojac++;
      }
    }
    if(!brojac) {
      std::cout &lt;&lt; "Nema zaduzenja za tog korisnika!" &lt;&lt; std::endl;
    }
  }
};
int main ()
{

  Biblioteka b;
  b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
                              "Zmaja od Bosne 30", "032/444-555");
  b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
                              "Trg neznalica 111", "030/111-222");
  b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
                              "Studenata etfovaca 3b", "037/654-321");
  b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
  b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
  b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
  b.ZaduziKnjigu(231, 1234);
  b.ZaduziKnjigu(136, 1234);
  b.PrikaziZaduzenja(1234);
</font>
  return 0;
}
</pre>
</body>
</html>
