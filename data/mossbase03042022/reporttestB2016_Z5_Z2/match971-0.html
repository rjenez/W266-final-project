<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5536.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student5536.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};

class Knjiga{
  std::string ime_pisca,zanr,naslov;
<a name="4"></a><font color="#FF00FF"><a href="match971-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

  int godina_izdavanja;
  std::shared_ptr&lt;Korisnik&gt; zaduzeni_korisnik;
  public:
  Knjiga(std::string naslov_knjige,std::string imepisca, std::string zanr_knjige, int godina){
</font>      naslov=naslov_knjige;
      ime_pisca=imepisca;
      zanr=zanr_knjige;
      godina_izdavanja=godina;
  }
  std::string DajNaslov() const{return naslov;}
<a name="2"></a><font color="#0000FF"><a href="match971-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

  std::string DajAutora() const{return ime_pisca;}
  std::string DajZanr() const{return zanr;}
  int DajGodinuIzdavanja() const{return godina_izdavanja;}
  std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe() const{return zaduzeni_korisnik;}
  void ZaduziKnjigu(Korisnik &amp;korisnik){
</font>      zaduzeni_korisnik=std::make_shared&lt;Korisnik&gt;(korisnik);
  }
  void RazduziKnjigu(){
      zaduzeni_korisnik=nullptr;
  }
  bool DaLiJeZaduzena(){
      if(zaduzeni_korisnik!=nullptr)return true;
      else return false;
  }
};
class Biblioteka{
  std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
  std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
  public:
  Biblioteka(){}
  void RegistrirajNovogKorisnika(int clanski_br_korisnika, std::string imekorisnika,std::string prezimekor, std::string adresakor,std::string broj_tel){
      Korisnik pom{imekorisnika, prezimekor,adresakor,broj_tel};
      std::shared_ptr&lt;Korisnik&gt; korisnik(std::make_shared&lt;Korisnik&gt;(pom));
      auto it(korisnici.find(clanski_br_korisnika));
      if(it==korisnici.end())korisnici.insert(std::make_pair(clanski_br_korisnika,korisnik));
      else throw std::logic_error("Korisnik vec postoji");
  }
<a name="3"></a><font color="#00FFFF"><a href="match971-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

  void RegistrirajNovuKnjigu(int evidencijski_br_knj,std::string naslov_knjige,std::string imepisca,std::string zanr,int godina_izdavanja){
      std::shared_ptr&lt;Knjiga&gt; nova_knjiga(std::make_shared&lt;Knjiga&gt; (naslov_knjige,imepisca,zanr,godina_izdavanja));
</font>      auto it(knjige.find(evidencijski_br_knj));
      if(it==knjige.end())knjige.insert(std::make_pair(evidencijski_br_knj,nova_knjiga));
      else throw std::logic_error("Knjiga vec postoji");
  }
<a name="5"></a><font color="#FF0000"><a href="match971-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

  Korisnik &amp;NadjiKorisnika(int clanski_broj_korisnika){
      auto it(korisnici.find(clanski_broj_korisnika));
      if(it==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
      else return *it-&gt;second;
  }
  Knjiga &amp;NadjiKnjigu(int evidencijski_br_knjige){
</font><a name="6"></a><font color="#00FF00"><a href="match971-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

      auto it(knjige.find(evidencijski_br_knjige));
      if(it==knjige.end())throw std::logic_error("Knjiga nije nadjena");
      else return *it-&gt;second;
  }
  void IzlistajKorisnike() const{
</font>      for(auto it=korisnici.begin();it!=korisnici.end();it++)
<a name="0"></a><font color="#FF0000"><a href="match971-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

      std::cout &lt;&lt; "Clanski broj: "&lt;&lt; it-&gt;first &lt;&lt;std::endl&lt;&lt;"Ime i prezime: "&lt;&lt; it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt; std::endl&lt;&lt;"Adresa: "&lt;&lt; it-&gt;second-&gt;adresa &lt;&lt;std::endl&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
      }
  void IzlistajKnjige() const{
</font>      for(auto it=knjige.begin();it!=knjige.end();it++){
<a name="1"></a><font color="#00FF00"><a href="match971-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

      std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt; it-&gt;first &lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt; it-&gt;second-&gt;DajNaslov()&lt;&lt; std::endl&lt;&lt;"Pisac: "&lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
      if(it-&gt;second-&gt;DaLiJeZaduzena()==true)std::cout &lt;&lt; "Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime &lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt; std::endl;
</font><a name="7"></a><font color="#0000FF"><a href="match971-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

      }
  }
  void ZaduziKnjigu(int evidencijski_br_knjige,int clanski_broj_korisnika){
</font>      auto it1(korisnici.find(clanski_broj_korisnika));
      auto it2(knjige.find(evidencijski_br_knjige));
      if(it2==knjige.end())throw std::logic_error("Knjiga nije nadjena");
      if(it1==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
      if(it2!=knjige.end() &amp;&amp; it2-&gt;second-&gt;DaLiJeZaduzena()==true)throw std::logic_error("Knjiga vec zaduzena");
      else it2-&gt;second-&gt;Knjiga::ZaduziKnjigu(*it1-&gt;second);
  }
  void RazduziKnjigu(int evidencijski_br_knjige){
      auto it(knjige.find(evidencijski_br_knjige));
      if(it==knjige.end())throw std::logic_error("Knjiga nije nadjena");
      if(it!=knjige.end() &amp;&amp; it-&gt;second-&gt;DaLiJeZaduzena()==false)throw std::logic_error("Knjiga nije zaduzena");
      else it-&gt;second-&gt;Knjiga::RazduziKnjigu();
  }
  void PrikaziZaduzenja(int clanski_broj_korisnika){
    auto it2(korisnici.find(clanski_broj_korisnika));
    if(it2==korisnici.end())throw std::logic_error("Korisnik nije nadjen");
    int a(0);
    for(auto it=knjige.begin();it!=knjige.end();it++){
      if(it2-&gt;second-&gt;ime==it-&gt;second-&gt;DajKodKogaJe()-&gt;ime){a=1;
      std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt; it-&gt;first &lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt; it-&gt;second-&gt;DajNaslov()&lt;&lt; std::endl&lt;&lt;"Pisac: "&lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
     }
    }
    if(a==0)throw std::logic_error("Nema zaduzenja za tog korisnika");
  }
  
};

int main ()
{
    Biblioteka bib8;
bib8.RegistrirajNovogKorisnika(1, "Niko", "Nikic", "Zmaja od Bosne bb", "123 456");
bib8.RegistrirajNovuKnjigu(1, "Vlak u snijegu2", "Mato Lovrak2", "Roman2", 1941);
bib8.RegistrirajNovuKnjigu(2, "Vlak u snijegu", "Mato Lovrak", "Roman", 1931);
bib8.ZaduziKnjigu(2, 1);
bib8.IzlistajKnjige();
	return 0;
}</pre>
</body>
</html>
