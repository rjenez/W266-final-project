<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student4057.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3116.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
using namespace std;

struct Korisnik
{
    string ime,prezime,adresa,telefon;
    Korisnik(string ime,string prezime,string adresa,string telefon):ime(ime),prezime(prezime),adresa(adresa),telefon(telefon){};
    bool JesuIsti(const Korisnik k)const
    {
        return ime==k.ime &amp;&amp; prezime==k.prezime &amp;&amp; adresa==k.adresa &amp;&amp; telefon==k.telefon;
    }
   
};

class Knjiga
{
    string Naziv,Pisac,Zanr;
    int Godina;
    Korisnik *k;
    
    public:
    Knjiga(string Naziv,string Pisac,string Zanr,int Godina):Naziv(Naziv),Pisac(Pisac),Zanr(Zanr),Godina(Godina),k(nullptr){};
    string DajNaslov()const{return Naziv;}
    string DajAutora()const{return Pisac;}
    string DajZanr()const{return Zanr;}
    int DajGodinuIzdavanja()const{return Godina;}
    Korisnik DajKodKogaJe()const{return *k;}
    Korisnik *DajKodKogaJe(){return k;}
    void ZaduziKnjigu(Korisnik &amp;k1)
    {
        k=&amp;k1;
       
    }
    void RazduziKnjigu()
    {
        k=nullptr;
   
    }
    bool DaLiJeZaduzena()
    {
        if(k==nullptr) return false;
        return true;
    }
};

<a name="2"></a><font color="#0000FF"><a href="match697-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

class Biblioteka
{
    map&lt;int,shared_ptr&lt;Korisnik&gt;&gt; klijenti;
    map&lt;int,shared_ptr&lt;Knjiga&gt;&gt; knjige;
  
  public:
  Biblioteka(){};
  Biblioteka(Biblioteka &amp;b)
  {
      for(auto i:b.klijenti)
</font>      {
          klijenti[i.first]=make_shared&lt;Korisnik&gt;(*i.second);
      }
      for(auto i:b.knjige)
      {
          knjige[i.first]=make_shared&lt;Knjiga&gt;(*i.second);
      }
  }
  Biblioteka(Biblioteka &amp;&amp;b)
  {
      for(auto i:b.klijenti)
      {
          klijenti[i.first]=i.second;
      }
      
      for(auto i:b.knjige)
      {
          knjige[i.first]=i.second;
      }
  }
  Biblioteka &amp;operator=(Biblioteka &amp;b)
  {
      if(this!=&amp;b)
      {
<a name="6"></a><font color="#00FF00"><a href="match697-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

         for(auto &amp;i:klijenti)
                i.second=nullptr;
        for(auto &amp;i:knjige)
            i.second=nullptr;
            
         for(auto i:b.klijenti)
</font>         {
             klijenti[i.first]=make_shared&lt;Korisnik&gt;(*i.second);
         }
        
      for(auto i:b.knjige)
      {
          knjige[i.first]=make_shared&lt;Knjiga&gt;(*i.second);
      }
      }
      return *this;
  }
  Biblioteka &amp;operator=(Biblioteka &amp;&amp;b)
  {
       if(this!=&amp;b)
      {
<a name="7"></a><font color="#0000FF"><a href="match697-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

         for(auto &amp;i:klijenti)
            i.second=nullptr;
        for(auto &amp;i:knjige)
            i.second=nullptr;
            
         for(auto i:b.klijenti)
</font>         {
             klijenti[i.first]=i.second;
         }
         
      for(auto i:b.knjige)
      {
          knjige[i.first]=i.second;
      }
        
      }
      return *this;
  }
  ~Biblioteka()
  {
      for(auto &amp;i:klijenti)
            i.second=nullptr;
      for(auto &amp;i:knjige)
            i.second=nullptr;
  }
  
  void RegistrirajNovogKorisnika(int br,string ime,string prezime,string adresa,string telefon)
  {
      for(auto i=klijenti.begin(); i!=klijenti.end();i++)
            if(i-&gt;first==br) throw logic_error("Korisnik vec postoji");
      klijenti[br]=make_shared&lt;Korisnik&gt;(ime,prezime,adresa,telefon);
  }
  void RegistrirajNovuKnjigu(int br,string ime,string pisac,string zanr,int godina)
  {
      for(auto i=knjige.begin(); i!=knjige.end();i++)
            if(i-&gt;first==br) throw logic_error("Knjiga vec postoji");
      knjige[br]=make_shared&lt;Knjiga&gt;(ime,pisac,zanr,godina);
  }
  Korisnik &amp;NadjiKorisnika(int br)
  {
      bool a=true;
      for(auto i=klijenti.begin(); i!=klijenti.end(); i++) if(i-&gt;first==br) a=false;
      if(a)throw logic_error("Korisnik nije nadjen");
      return *klijenti[br];
  }
  Knjiga &amp;NadjiKnjigu(int br)
  {
      bool a=true;
      for(auto i=knjige.begin(); i!=knjige.end(); i++) if(i-&gt;first==br) a=false;
      if(a)throw logic_error("Knjiga nije nadjena");
<a name="0"></a><font color="#FF0000"><a href="match697-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

      return *knjige[br];
  }
  void IzlistajKorisnike()
  {
      for(auto i:klijenti)
      {
          cout&lt;&lt;"Clanski broj: "&lt;&lt;i.first&lt;&lt;endl;
          cout&lt;&lt;"Ime i prezime: "&lt;&lt;i.second-&gt;ime&lt;&lt;" "&lt;&lt;i.second-&gt;prezime&lt;&lt;endl;
          cout&lt;&lt;"Adresa: "&lt;&lt;i.second-&gt;adresa&lt;&lt;endl;
</font>          cout&lt;&lt;"Broj telefona: "&lt;&lt;i.second-&gt;telefon&lt;&lt;endl;
          cout&lt;&lt;endl;
      }
  }
  void IzlistajKnjige()
  {
      for(auto i:knjige)
      {
<a name="3"></a><font color="#00FFFF"><a href="match697-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

          cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;endl;
          cout&lt;&lt;"Naslov: "&lt;&lt;i.second-&gt;DajNaslov()&lt;&lt;endl;
          cout&lt;&lt;"Pisac: "&lt;&lt;i.second-&gt;DajAutora()&lt;&lt;endl;
</font><a name="1"></a><font color="#00FF00"><a href="match697-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

          cout&lt;&lt;"Zanr: "&lt;&lt;i.second-&gt;DajZanr()&lt;&lt;endl;
          cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
          if(i.second-&gt;DajKodKogaJe()!=nullptr)
            cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;i.second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;i.second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;endl;
</font>          cout&lt;&lt;endl;
      }
  }
  void ZaduziKnjigu(int brK,int brU)
  {
      knjige[brK]-&gt;ZaduziKnjigu(*klijenti[brU]);
  }
  void RazduziKnjigu(int br)
  {
      knjige[br]-&gt;RazduziKnjigu();
  }
<a name="5"></a><font color="#FF0000"><a href="match697-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

  void PrikaziZaduzenja(int br)
  {
      bool a=true;
        for(auto x: klijenti) if(x.first==br) a=false;
        if(a) throw logic_error("Korisnik nije nadjen");
      for(auto i:knjige)
</font>      {
          if(klijenti[br]-&gt;JesuIsti(*i.second-&gt;DajKodKogaJe()))
          {
<a name="4"></a><font color="#FF00FF"><a href="match697-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

              cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;endl;
              cout&lt;&lt;"Naslov: "&lt;&lt;i.second-&gt;DajNaslov()&lt;&lt;endl;
              cout&lt;&lt;"Pisac: "&lt;&lt;i.second-&gt;DajAutora()&lt;&lt;endl;
</font>              cout&lt;&lt;"Zanr: "&lt;&lt;i.second-&gt;DajZanr()&lt;&lt;endl;
              cout&lt;&lt;"Godina izdavanja: "&lt;&lt;i.second-&gt;DajGodinuIzdavanja()&lt;&lt;endl;
              cout&lt;&lt;endl;
         }
      }
  }
};


int main ()
{   
    Biblioteka b;
   // Korisnik k("Helo","world","cao","12345");
   // cout&lt;&lt;k.ime&lt;&lt;"-&gt;"&lt;&lt;k.telefon&lt;&lt;endl;
    
    b.RegistrirajNovogKorisnika(1,"Bravo","Ti","Zmaj Curenja 12","023456789");
    b.RegistrirajNovogKorisnika(2,"Hello","World","put ocaja 15","061234242");
    b.RegistrirajNovogKorisnika(3,"Cao","Zdravo","Gori zeljma 10","02313131");
    b.IzlistajKorisnike();
   
    b.RegistrirajNovuKnjigu(1,"Bajke neke","Neki tamo","Fantazija",1995);
    b.RegistrirajNovuKnjigu(2,"Stihovi Sabana","Tamo neki","Biografija",1990);
    b.RegistrirajNovuKnjigu(3,"Ko to tamo mapira","Ko ce Drugi","Strucna",2015);
    b.IzlistajKnjige();
   
    b.ZaduziKnjigu(1,1);
    b.ZaduziKnjigu(2,2);
    b.ZaduziKnjigu(3,1);
    b.PrikaziZaduzenja(1);
    b.PrikaziZaduzenja(2);

    cout&lt;&lt;endl&lt;&lt;"ok"&lt;&lt;endl&lt;&lt;endl;


    b.IzlistajKnjige();
    b.RazduziKnjigu(1);
    b.IzlistajKnjige();
    
    Biblioteka b1(b);
    cout&lt;&lt;"Odavdje-&gt;&gt;&gt;"&lt;&lt;endl;
    b1.IzlistajKnjige();
    cout&lt;&lt;"&lt;&lt;&lt;-Dovdje"&lt;&lt;endl;
    
    
    Biblioteka b2=b1;
    cout&lt;&lt;"Odavdje 1-&gt;&gt;&gt;"&lt;&lt;endl;
    b2.IzlistajKnjige();
    cout&lt;&lt;"&lt;&lt;&lt;-2 Dovdje"&lt;&lt;endl;
    
    
	return 0;
}</pre>
</body>
</html>
