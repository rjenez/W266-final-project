<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7125.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2086.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
using std::cin;
using std::make_shared;
using std::ws;
struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};
class Knjiga{
  std::string naslov,ime_pisca,zanr;
  int godina_izdavanja;
  std::shared_ptr&lt;Korisnik&gt; zaduzenje;
  public:
  Knjiga(std::string n,std::string i,std::string z,int g):naslov(n),ime_pisca(i),zanr(z),godina_izdavanja(g),zaduzenje(nullptr){};
  std::string DajNaslov()const{return naslov;}
  std::string DajAutora()const{return ime_pisca;}
  std::string DajZanr()const {return zanr;}
  int DajGodinuIzdavanja()const{return godina_izdavanja;}
  std::shared_ptr&lt;Korisnik&gt; DajKodKogaJe()const{return zaduzenje;}
  void ZaduziKnjigu(Korisnik &amp;a){zaduzenje=make_shared&lt;Korisnik&gt;(a);}
  void RazduziKnjigu(){zaduzenje=nullptr;}
  bool DaLiJeZaduzena()const{return zaduzenje!=nullptr; }
};
class Biblioteka{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    Biblioteka();
    Biblioteka(const Biblioteka &amp;a);
    Biblioteka(Biblioteka &amp;&amp;a);
    Biblioteka&amp; operator=(const Biblioteka &amp;a);
    Biblioteka&amp; operator=(Biblioteka&amp;&amp;a);
    void RegistrirajNovogKorisnika(int cl_br,std::string i,std::string p,std::string adress, std::string br_tel);
    void RegistrirajNovuKnjigu(int evid_br,std::string n,std::string ime_p,std::string z,int god_izd);
    Korisnik&amp; NadjiKorisnika(int cl_br){
      if(korisnici.find(cl_br)==korisnici.end()) throw std::logic_error ("Korisnik nije nadjen");
      return *korisnici[cl_br];  
  }
    Knjiga&amp; NadjiKnjigu(int evid_br){
        if(knjige.find(evid_br)==knjige.end()) throw std::logic_error ("Knjiga nije nadjena");
        return *knjige[evid_br];
    }
    void IzlistajKorisnike();
    void IzlistajKnjige();
    void ZaduziKnjigu(int evid_br,int cl_br);
    void RazduziKnjigu(int evid_br){if (NadjiKnjigu(evid_br).DaLiJeZaduzena()) NadjiKnjigu(evid_br).RazduziKnjigu();
        else throw std::logic_error ("Knjiga nije zaduzena");
    }
    void PrikaziZaduzenja(int cl_br);
};
Biblioteka::Biblioteka(){}
Biblioteka::Biblioteka(const Biblioteka &amp;a){
    
<a name="0"></a><font color="#FF0000"><a href="match880-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    for(auto it1(a.korisnici.begin()); it1!=a.korisnici.end(); it1++){
        korisnici[it1-&gt;first]=std::make_shared&lt;Korisnik&gt; (*it1-&gt;second);
    }
    for(auto it(a.knjige.begin()); it!=a.knjige.end(); it++){
        knjige[it-&gt;first]=std::make_shared&lt;Knjiga&gt;(*it-&gt;second);
    }
}
Biblioteka::Biblioteka(Biblioteka &amp;&amp;a){
</font>    for(auto it1(a.korisnici.begin()); it1!=a.korisnici.end(); it1++){
        korisnici[it1-&gt;first]=it1-&gt;second;
        it1-&gt;second=nullptr;
    }
    for(auto it(a.knjige.begin()); it!=a.knjige.end(); it++){
        knjige[it-&gt;first]=it-&gt;second;
        it-&gt;second=nullptr;
    }
}
Biblioteka&amp; Biblioteka::operator=(const Biblioteka &amp;a){
    if(&amp;a==this) throw std::logic_error ("Destruktivna samododjela!");
    for(auto it(knjige.begin()); it!=knjige.end(); it++){
        knjige.erase(it-&gt;first);
    }
    knjige.clear();
    {
    auto it2(korisnici.begin());
    for(auto it1(a.korisnici.begin()); it1!=a.korisnici.end(); it1++){
        for(; it2!=korisnici.end(); ){
            korisnici[it1-&gt;first]=make_shared&lt;Korisnik&gt; (*it1-&gt;second);
            it2++;
            break;
    }
    }
    }
    auto it2(knjige.begin());
    for(auto it1(a.knjige.begin()); it1!=a.knjige.end(); it1++){
        for(; it2!=knjige.end(); it2++){
            it2-&gt;second=make_shared&lt;Knjiga&gt; (*it1-&gt;second);
            it2++;
            break;
    }
    }
<a name="1"></a><font color="#00FF00"><a href="match880-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    return *this;
}
Biblioteka&amp; Biblioteka::operator=(Biblioteka &amp;&amp;a){
    std::swap(korisnici,a.korisnici);
    std::swap(knjige,a.knjige);
    return *this;
}
void Biblioteka::RegistrirajNovogKorisnika(int cl_br,std::string i,std::string p,std::string adress, std::string br_tel){
</font>    if(korisnici.find(cl_br)!=korisnici.end()) throw std::logic_error ("Korisnik vec postoji");
    korisnici[cl_br]=make_shared&lt;Korisnik&gt;();
    korisnici[cl_br]-&gt;ime=i;
    korisnici[cl_br]-&gt;prezime=p;
    korisnici[cl_br]-&gt;adresa=adress;
<a name="4"></a><font color="#FF00FF"><a href="match880-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    korisnici[cl_br]-&gt;telefon=br_tel;
  //  std::cout&lt;&lt;"k";
}
void Biblioteka::RegistrirajNovuKnjigu(int evid_br,std::string n,std::string ime_p,std::string z,int god_izd){
</font>    if(knjige.find(evid_br)!=knjige.end()) throw std::logic_error ("Knjiga vec postoji");
    knjige[evid_br]=make_shared&lt;Knjiga&gt; (n,ime_p,z,god_izd);
}
void Biblioteka::IzlistajKorisnike(){
<a name="5"></a><font color="#FF0000"><a href="match880-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    for(auto it(korisnici.begin()); it!=korisnici.end(); it++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;it-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;prezime&lt;&lt;std::endl;
        std::cout&lt;&lt;"Adresa: "&lt;&lt;it-&gt;second-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;it-&gt;second-&gt;telefon&lt;&lt;std::endl&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige(){
<a name="6"></a><font color="#00FF00"><a href="match880-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    for(auto it(knjige.begin()); it!=knjige.end(); it++){
         std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>         std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
         std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
         std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
         std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
         if(it-&gt;second-&gt;DaLiJeZaduzena()){
             std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
         }
         std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int evid_br,int cl_br){
    NadjiKnjigu(evid_br);
    NadjiKorisnika(cl_br);
    if(NadjiKnjigu(evid_br).DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
    NadjiKnjigu(evid_br).ZaduziKnjigu(NadjiKorisnika(cl_br));
}
void Biblioteka::PrikaziZaduzenja(int cl_br){
    bool pom(true);
    Korisnik a=NadjiKorisnika(cl_br);
    for(auto it(knjige.begin()); it!=knjige.end(); it++){
if((it-&gt;second-&gt;DajKodKogaJe()-&gt;ime==a.ime) &amp;&amp;(it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime==a.prezime) &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;adresa==a.adresa) &amp;&amp; (it-&gt;second-&gt;DajKodKogaJe()-&gt;telefon==a.telefon)){
            pom=false;
         std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
         std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
         std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
         std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
         std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    if(pom) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika";
}
int main ()
{
    Biblioteka aleksandrijska;
   for(;;){
        std::cout&lt;&lt;"Izaberite zeljenu opciju :"&lt;&lt;std::endl&lt;&lt;"1 za unos korisnika, 2 za unos knjige, 3 za ispis biblioteke, 4 za zaduzivanje knjige, 5 za razduzivanje, 6 izlistaj knjige zaduzene od jednog korisnika, 0 za izlaz: ";
        int opcija;
        std::cin&gt;&gt;opcija;
        switch(opcija){
            case 1:{
                    std::cout&lt;&lt;"Unesite clasnki broj, ime, prezime, adresu i broj telefona: ";
                    std::string i,p,a,br_tel;
                    int clanski;
<a name="2"></a><font color="#0000FF"><a href="match880-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                    cin&gt;&gt;clanski&gt;&gt;ws&gt;&gt;i&gt;&gt;ws&gt;&gt;p&gt;&gt;ws&gt;&gt;a&gt;&gt;ws&gt;&gt;br_tel;
                    aleksandrijska.RegistrirajNovogKorisnika(clanski,i,p,a,br_tel);
                break;
            }
            case 2:{
                std::cout&lt;&lt;"Unesite evidencijski broj, naslov, ime autora, Å¾anr i godinu izdavanja: ";
</font>                std::string n,i,z;
                int ev,god;
<a name="3"></a><font color="#00FFFF"><a href="match880-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                cin&gt;&gt;ev&gt;&gt;ws&gt;&gt;n&gt;&gt;ws&gt;&gt;i&gt;&gt;ws&gt;&gt;z&gt;&gt;ws&gt;&gt;god;
                aleksandrijska.RegistrirajNovuKnjigu(ev,n,i,z,god);
                break;
            }
            case 3:{
                aleksandrijska.IzlistajKnjige();
</font>                aleksandrijska.IzlistajKorisnike();
                break;
            }
            case 4:{
                std::cout&lt;&lt;"Unesite evidencijski broj i claski broj: ";
                int ev,cl;
                cin&gt;&gt;ws&gt;&gt;ev&gt;&gt;ws&gt;&gt;cl;
                aleksandrijska.ZaduziKnjigu(ev,cl);
                break;
            }
            case 5:{
                std::cout&lt;&lt;"Unesite evidencijski broj: ";
                int ev;
                cin&gt;&gt;ev;
                aleksandrijska.RazduziKnjigu(ev);
                break;
            }
            case 6:{
                std::cout&lt;&lt;"Unesite clasnki broj: ";
                int cl;
                cin&gt;&gt;cl;
                aleksandrijska.PrikaziZaduzenja(cl);
                break;
            }
            default: goto izlaz;
        }
    }  
izlaz:        
	return 0;
}</pre>
</body>
</html>
