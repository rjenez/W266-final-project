<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student9998.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student8357.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include&lt;utility&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};

class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int god__izdavanja;
<a name="0"></a><font color="#FF0000"><a href="match169-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_62.gif"/></a>

    Korisnik *zaduzena;
    
    public:
    Knjiga (std::string naslov_knjige, std::string ime, std::string zanr_, int god);
    std::string DajNaslov () { return naslov;}
    std::string DajAutora () {return ime_pisca;}
    std::string DajZanr () {return zanr;}
    int DajGodinuIzdavanja () {return god__izdavanja;}
    Korisnik *DajKodKogaJe () { return zaduzena; }
    void ZaduziKnjigu (Korisnik &amp;k) { zaduzena=&amp;k;}
    void RazduziKnjigu () { zaduzena=nullptr;}
    bool DaLiJeZaduzena () {
        if(zaduzena==nullptr) return false;
        return true;
    }
};

Knjiga::Knjiga(std::string naslov_knjige, std::string ime, std::string zanr_, int god){
        naslov=naslov_knjige; ime_pisca=ime; zanr=zanr_, god__izdavanja=god; zaduzena=nullptr;
    }

class Biblioteka {
    std::map &lt;int, Korisnik *&gt; ko;
    std::map &lt;int, Knjiga *&gt; knj;
    
    public:
    Biblioteka () {};
    Biblioteka(const Biblioteka &amp;b){
        for(auto it=(b.ko).begin(); it!=(b.ko).end(); it++){
            ko.insert(std::make_pair ( it-&gt;first, new Korisnik(*(it-&gt;second))));
        }
        
        for(auto it=(b.knj).begin(); it!=(b.knj).end(); it++){
           knj.insert(std::make_pair ( it-&gt;first, new Knjiga(*(it-&gt;second))));
        }
        
    }
    
    Biblioteka &amp;operator = (const Biblioteka &amp;b){
        if(this==&amp;b) return *this;
        
        for(auto it=ko.begin();it!=ko.end();it++) delete it-&gt;second;
        for(auto it=knj.begin();it!=knj.end();it++) delete it-&gt;second;
        
        for(auto it=(b.ko).begin(); it!=(b.ko).end(); it++){
            ko.insert(std::make_pair ( it-&gt;first, new Korisnik(*(it-&gt;second))));
        }
        
        for(auto it=(b.knj).begin(); it!=(b.knj).end(); it++){
           knj.insert(std::make_pair ( it-&gt;first, new Knjiga(*(it-&gt;second))));
        }
    }
    
    void RegistrirajNovogKorisnika (int clanski_br, std::string ime, std::string prezime, std::string adresa, std::string br_telefona){
        Korisnik *pok;
            pok=new Korisnik;
        pok-&gt;ime=ime; pok-&gt;prezime=prezime; pok-&gt;adresa=adresa; pok-&gt;telefon=br_telefona;
        for(auto it=ko.begin(); it!=ko.end();it++)
            if(it-&gt;first==clanski_br) throw std::logic_error ("Korisnik vec postoji");

        ko.insert(std::make_pair(clanski_br,pok));
    }
    
    void RegistrirajNovuKnjigu (int evidencijski_broj, std::string naslov, std::string ime, std::string zanr, int godina){
        Knjiga *pok;
         try{
           pok=new Knjiga(naslov,ime,zanr,godina);
        }
        catch(...){
            delete pok;
        }
        //pok-&gt;DajNaslov()=naslov; pok-&gt;DajAutora()=ime; pok-&gt;DajZanr()=zanr; pok-&gt;DajGodinuIzdavanja()=godina;
        auto it (knj.find(evidencijski_broj));
        if(it==knj.end()) knj.insert (std::make_pair (evidencijski_broj,pok));
        else throw std::logic_error("Knjiga vec postoji");
       
    }
    
    Korisnik &amp;NadjiKorisnika (int broj){
       auto it(ko.find(broj));
       if (it==ko.end()) throw  std::logic_error ("Korisnik nije nadjen");
       else return *ko [broj];
    }
    
    Knjiga &amp;NadjiKnjigu (int broj){
       auto it(knj.find(broj));
       if (it==knj.end()) throw  std::logic_error ("Knjiga nije nadjena");
       else return  *knj [broj];
    }
    
    void IzlistajKorisnike () {
        for(auto i=ko.begin(); i!=ko.end(); i++){
            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl&lt;&lt;"Ime i prezime: "&lt;&lt;i-&gt;second-&gt;ime&lt;&lt;" "&lt;&lt;i-&gt;second-&gt;prezime&lt;&lt;std::endl&lt;&lt;"Adresa: "&lt;&lt;i-&gt;second-&gt;adresa&lt;&lt;std::endl&lt;&lt;"Broj telefona: "&lt;&lt;i-&gt;second-&gt;telefon;
            std::cout&lt;&lt;std::endl&lt;&lt;std::endl;
        }
    }
    
    void IzlistajKnjige () {
      for(auto i=knj.begin(); i!=knj.end(); i++){
          std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i-&gt;first&lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt;i-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl&lt;&lt;"Pisac: "&lt;&lt;i-&gt;second-&gt;DajAutora()&lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt;i-&gt;second-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;i-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match169-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

          if(i-&gt;second-&gt;DaLiJeZaduzena()) std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;i-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "&lt;&lt;i-&gt;second-&gt;DajKodKogaJe()-&gt;prezime&lt;&lt;std::endl;
</font><a name="1"></a><font color="#00FF00"><a href="match169-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_17.gif"/></a>

          std::cout&lt;&lt;std::endl;
      }  
    }
    
    void ZaduziKnjigu (int ev_broj, int cl_broj){
        Knjiga *pok1= &amp;NadjiKnjigu(ev_broj);
        if(pok1-&gt;DaLiJeZaduzena()==true) throw std::logic_error ("Knjiga vec zaduzena");
        Korisnik *pok2=&amp;NadjiKorisnika(cl_broj);
        pok1-&gt;Knjiga::ZaduziKnjigu(*pok2);
    }
    
    void RazduziKnjigu (int ev_broj){
        Knjiga *pok=&amp;NadjiKnjigu(ev_broj);
        if(pok-&gt;DaLiJeZaduzena()==false) throw std::logic_error ("Knjiga nije zaduzena");
        pok-&gt;Knjiga::RazduziKnjigu();
    }
    
    ~Biblioteka (){
        for(auto it=ko.begin();it!=ko.end();it++) delete it-&gt;second;
        for(auto it=knj.begin();it!=knj.end();it++) delete it-&gt;second;
    }
   
   void PrikaziZaduzenja (int cl_broj){
       int br=0;
       Korisnik *pok=&amp;NadjiKorisnika(cl_broj);
       for(auto it=knj.begin();it!=knj.end();it++){
           if((*it-&gt;second).DajKodKogaJe()==pok){
               br++;
               std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
</font><a name="2"></a><font color="#0000FF"><a href="match169-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

               std::cout&lt;&lt;std::endl;
           }
       }
       if(br==0) throw std::logic_error ("Nema zaduzenja za tog korisnika"); }
   
};
int main ()
{
   
	return 0;
</font>}</pre>
</body>
</html>
