<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2967.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2967.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;cmath&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;

#define TijeloIzuzetka(izuzetak, tijelo) \
try tijelo catch(izuzetak e) { std::cout &lt;&lt; e.what() &lt;&lt; std::endl; }


struct Korisnik {
    std::string ime,prezime,adresa, telefon;
};

void Ispisi(const Korisnik &amp;k)
{
    std::cout &lt;&lt; "Ime i prezime: "&lt;&lt; k.ime &lt;&lt;" "&lt;&lt; k.prezime &lt;&lt; std::endl;
    std::cout &lt;&lt; "Adresa: "&lt;&lt; k.adresa &lt;&lt; std::endl;
    std::cout &lt;&lt; "Broj telefona: "&lt;&lt; k.telefon &lt;&lt; std::endl&lt;&lt;std::endl;
}

class Knjiga
{
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik* zaduzenje;
public:
<a name="4"></a><font color="#FF00FF"><a href="match957-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Knjiga(std::string _naslov,std::string _ime_pisca, std::string _zanr, int _godina_izdavanja): naslov(_naslov),ime_pisca(_ime_pisca),zanr(_zanr),godina_izdavanja(_godina_izdavanja),zaduzenje(nullptr) {}
    ~Knjiga() {
        zaduzenje=nullptr;
    }
    std::string DajNaslov() const {
        return naslov;
    }
    std::string DajAutora() const {
        return ime_pisca;
    }
    std::string DajZanr() const {
        return zanr;
</font>    }
    int DajGodinuIzdavanja() const {
        return godina_izdavanja;
    }
    Korisnik* DajKodKogaJe()const {
        return zaduzenje;
    }
    void ZaduziKnjigu(Korisnik &amp;K) {
        zaduzenje=&amp;K;
    }
    void RazduziKnjigu() {
        zaduzenje=nullptr;
    }
    bool DaLiJeZaduzena()const {
        if(zaduzenje!=nullptr)
            return true;
        else return false;
    }

};

void Ispisi(const Knjiga &amp;k)
{
    std::cout &lt;&lt; "Naslov: "&lt;&lt; k.DajNaslov() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Pisac: "&lt;&lt; k.DajAutora() &lt;&lt; std::endl;
    std::cout &lt;&lt; "Zanr: "&lt;&lt; k.DajZanr() &lt;&lt; std::endl;
    std::cout &lt;&lt;"Godina izdavanja: "&lt;&lt; k.DajGodinuIzdavanja() &lt;&lt; std::endl;
    if(k.DajKodKogaJe()!=nullptr) std::cout &lt;&lt;"Zaduzena kod korisnika: "&lt;&lt; k.DajKodKogaJe()-&gt;ime &lt;&lt; " " &lt;&lt; k.DajKodKogaJe()-&gt;prezime  &lt;&lt; std::endl;
}

class Biblioteka
{
    std::map&lt;int,std::shared_ptr&lt;Korisnik&gt;&gt; m_korisnik; //cl broj
    std::map&lt;int,std::shared_ptr&lt;Knjiga&gt;&gt; m_knjiga; //ev broj
public:
    Biblioteka() {}
    ~Biblioteka() {
<a name="0"></a><font color="#FF0000"><a href="match957-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        for(auto it = m_korisnik.begin(); it != m_korisnik.end(); it++)
            it-&gt;second=nullptr;
        for(auto it = m_knjiga.begin(); it != m_knjiga.end(); it++)
            it-&gt;second=nullptr;
    }
    Biblioteka(const Biblioteka &amp;B) {
</font>        for(auto it = B.m_korisnik.begin(); it != B.m_korisnik.end(); it++)
<a name="5"></a><font color="#FF0000"><a href="match957-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            m_korisnik[it-&gt;first]=std::make_shared&lt;Korisnik&gt;(*it-&gt;second);
        for(auto it = B.m_knjiga.begin(); it != B.m_knjiga.end(); it++)
</font>            m_knjiga[it-&gt;first]=std::make_shared&lt;Knjiga&gt;(*it-&gt;second);
    }
    Biblioteka(Biblioteka &amp;&amp;B) {
        m_korisnik=B.m_korisnik;
        m_knjiga=B.m_knjiga;
        B.m_knjiga.erase (B.m_knjiga.begin(),B.m_knjiga.end());
        B.m_korisnik.erase (B.m_korisnik.begin(), B.m_korisnik.end());
    }
    Biblioteka &amp;operator =(const Biblioteka &amp;B) {
<a name="6"></a><font color="#00FF00"><a href="match957-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        for(auto it = m_korisnik.begin(); it != m_korisnik.end(); it++)
            it-&gt;second=nullptr;
        for(auto it = m_knjiga.begin(); it != m_knjiga.end(); it++)
            it-&gt;second=nullptr;
        m_knjiga.erase (m_knjiga.begin(),m_knjiga.end());
</font>        m_korisnik.erase (m_korisnik.begin(), m_korisnik.end());

        for(auto it = B.m_knjiga.begin(); it != B.m_knjiga.end(); it++)
<a name="7"></a><font color="#0000FF"><a href="match957-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            m_knjiga[it-&gt;first]=std::make_shared&lt;Knjiga&gt;(*it-&gt;second);
        for(auto it = B.m_korisnik.begin(); it != B.m_korisnik.end(); it++)
</font>            m_korisnik[it-&gt;first]=std::make_shared&lt;Korisnik&gt;(*it-&gt;second);
        return *this;

    }

    Biblioteka &amp;operator =(Biblioteka &amp;&amp;B) {
        m_korisnik=B.m_korisnik;
        m_knjiga=B.m_knjiga;
        B.m_knjiga.erase (B.m_knjiga.begin(),B.m_knjiga.end());
        B.m_korisnik.erase (B.m_korisnik.begin(), B.m_korisnik.end());
        return *this;
    }


<a name="1"></a><font color="#00FF00"><a href="match957-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    void RegistrirajNovogKorisnika(int cl_broj,std::string _ime, std::string _prezime,std::string _adresa, std::string _telefon) {
        auto it(m_korisnik.find(cl_broj));
        if(it!=m_korisnik.end()) throw std::logic_error ("Korisnik vec postoji");
</font>        Korisnik K({_ime,_prezime,_adresa,_telefon});
        m_korisnik.insert(std::make_pair(cl_broj, std::make_shared&lt;Korisnik&gt;(K)));
    }
<a name="2"></a><font color="#0000FF"><a href="match957-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    void RegistrirajNovuKnjigu(int ev_broj, std::string _naslov, std::string _ime_pisca, std::string _zanr, int _godina_izdavanja) {
        auto it(m_knjiga.find(ev_broj));
        if(it!=m_knjiga.end()) throw std::logic_error ("Knjiga vec postoji");
</font>        m_knjiga.insert(std::make_pair(ev_broj, std::make_shared&lt;Knjiga&gt;(_naslov,_ime_pisca,_zanr,_godina_izdavanja)));
    }
<a name="8"></a><font color="#00FFFF"><a href="match957-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    Korisnik&amp; NadjiKorisnika(int cl_broj) {
        auto it(m_korisnik.find(cl_broj));
        if(it==m_korisnik.end()) throw std::logic_error ("Korisnik nije nadjen");
        return (*it-&gt;second);
    }
    Knjiga&amp; NadjiKnjigu(int ev_broj) const {
</font>        auto it(m_knjiga.find(ev_broj));
        if(it==m_knjiga.end()) throw std::logic_error ("Knjiga nije nadjena");
        return (*it-&gt;second);
    }
    void IzlistajKorisnike() const {
        for(auto it = m_korisnik.begin(); it != m_korisnik.end(); it++) {
            std::cout &lt;&lt; "Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt; std::endl;
            Ispisi(*it-&gt;second);
        }
    }
    void IzlistajKnjige() const {
        for(auto it = m_knjiga.begin(); it != m_knjiga.end(); it++) {
            std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt; std::endl;
            Ispisi(*it-&gt;second);
        }
    }
    void ZaduziKnjigu(int ev_broj,int cl_broj) {
        auto it1(m_knjiga.find(ev_broj));
        if(it1==m_knjiga.end()) throw std::logic_error ("Knjiga nije nadjena");
        auto it2(m_korisnik.find(cl_broj));
        if(it2==m_korisnik.end()) throw std::logic_error ("Korisnik nije nadjen");
        auto it3(m_knjiga.find(ev_broj));
        if(it3-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga vec zaduzena");
        it3-&gt;second-&gt;ZaduziKnjigu(*it2-&gt;second);
    }
    void RazduziKnjigu(int ev_broj) {
        auto it1(m_knjiga.find(ev_broj));
        if(it1==m_knjiga.end()) throw std::logic_error ("Knjiga nije nadjena");
        auto it3(m_knjiga.find(ev_broj));
        if(!it3-&gt;second-&gt;DaLiJeZaduzena()) throw std::logic_error ("Knjiga nije zaduzena");
        it1-&gt;second-&gt;RazduziKnjigu();
    }
    void PrikaziZaduzenja(int cl_broj) const {
        bool nadjen(false);
        auto it1(m_korisnik.find(cl_broj));
        if(it1==m_korisnik.end()) throw std::logic_error ("Korisnik nije nadjen");
        for(auto it = m_knjiga.begin(); it != m_knjiga.end(); it++)
            if((it-&gt;second-&gt;DajKodKogaJe())==it1-&gt;second.get())
                nadjen=true;
        if(!nadjen)std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
        else for(auto it = m_knjiga.begin(); it != m_knjiga.end(); it++) {
            if((it-&gt;second-&gt;DajKodKogaJe())==it1-&gt;second.get()) {
                std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt; std::endl;
                std::cout &lt;&lt; "Naslov: "&lt;&lt; it-&gt;second-&gt;DajNaslov() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Pisac: "&lt;&lt; it-&gt;second-&gt;DajAutora() &lt;&lt; std::endl;
                std::cout &lt;&lt; "Zanr: "&lt;&lt; it-&gt;second-&gt;DajZanr() &lt;&lt; std::endl;
                std::cout &lt;&lt;"Godina izdavanja: "&lt;&lt; it-&gt;second-&gt;DajGodinuIzdavanja() &lt;&lt; std::endl&lt;&lt;std::endl;
            }
        }
    }
};




void UnesiKnjigu(Biblioteka &amp;b, const long long int &amp;ev_broj)
{
    std::cin.ignore(1000, '\n');
    std::cin.clear();
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    std::cout &lt;&lt; "Unesite naslov knjge: ";
    std::getline(std::cin, naslov);
    std::cout &lt;&lt; "Unesite ime pisca: ";
<a name="3"></a><font color="#00FFFF"><a href="match957-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    std::getline(std::cin, ime_pisca);
    std::cout &lt;&lt; "Unesite zanr knjige: ";
    std::getline(std::cin, zanr);
    std::cout &lt;&lt; "Unesite godinu_izdavanja: ";
    std::cin &gt;&gt; godina_izdavanja;
    b.RegistrirajNovuKnjigu(ev_broj, naslov, ime_pisca, zanr, godina_izdavanja);
</font>}

void UnesiKorisnika(Biblioteka &amp;b, const long long int &amp;ev_broj)
{
    std::cin.ignore(1000, '\n');
    std::cin.clear();
    std::string ime, prezime, adresa, telefon;
    std::cout &lt;&lt; "Unesite ime korisnika:  ";
    std::getline(std::cin, ime);
    std::cout &lt;&lt; "Unesite prezime korisnika: ";
    std::getline(std::cin, prezime);
    std::cout &lt;&lt; "Unesite adresu korisnika: ";
    std::getline(std::cin, adresa);
    std::cout &lt;&lt; "Unesite telefon korisnika: ";
    std::getline(std::cin, telefon);
    b.RegistrirajNovogKorisnika(ev_broj, ime, prezime, adresa, telefon);
}

void ZaduziKnjigu(Biblioteka &amp;b)
{
    long long int ev_broj, cl_broj;
    std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
    std::cin &gt;&gt; ev_broj;
    std::cout &lt;&lt; "Unesite evidencijski broj korisnika: ";
    std::cin &gt;&gt; cl_broj;
    b.ZaduziKnjigu(ev_broj, cl_broj);
}

void RazduziKnjigu(Biblioteka &amp;b)
{
    long long int ev_broj;
    std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
    std::cin &gt;&gt; ev_broj;
    b.RazduziKnjigu(ev_broj);
}

void PrikaziZaduzenja(Biblioteka &amp;b)
{
    long long int cl_broj;
    std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
    std::cin &gt;&gt; cl_broj;
    b.PrikaziZaduzenja(cl_broj);
}

void NadjiKnjigu(Biblioteka &amp;b)
{
    long long int ev_broj;
    std::cout &lt;&lt; "Unesite evidencijski broj knjige: ";
    std::cin &gt;&gt; ev_broj;
    Ispisi(b.NadjiKnjigu(ev_broj));
}

void NadjiKorisnika(Biblioteka &amp;b)
{
    long long int cl_broj;
    std::cout &lt;&lt; "Unesite clanski broj korisnika: ";
    std::cin &gt;&gt; cl_broj;
    Ispisi(b.NadjiKorisnika(cl_broj));
}


int main()
{
    Biblioteka ETF;
    std::cout &lt;&lt; "DOBRODOÅ LI U ETF BIBLIOTEKU" &lt;&lt; std::endl;
    long long int broj_knjiga {1}, broj_korisnika {1};
    while (true) {
        int komanda {-1};
        std::cout &lt;&lt; "1 - Dodaj novu knjigu" &lt;&lt; std::endl;
        std::cout &lt;&lt; "2 - Dodaj novog korisnika" &lt;&lt; std::endl;
        std::cout &lt;&lt; "3 - Zaduzi knjigu" &lt;&lt; std::endl;
        std::cout &lt;&lt; "4 - Razduzi knjigu" &lt;&lt; std::endl;
        std::cout &lt;&lt; "5 - Izlistaj sve knjige" &lt;&lt; std::endl;
        std::cout &lt;&lt; "6 - Izlistaj sve korisnike" &lt;&lt; std::endl;
        std::cout &lt;&lt; "7 - Pronadji knjigu" &lt;&lt; std::endl;
        std::cout &lt;&lt; "8 - Pronadji korisnika" &lt;&lt; std::endl;
        std::cout &lt;&lt; "9 - Prikazi zaduzenja" &lt;&lt; std::endl;
        std::cout &lt;&lt; "10 - Kraj" &lt;&lt; std::endl;
        std::cout &lt;&lt; "Izaberite opciju:";
        std::cin &gt;&gt; komanda;
        switch (komanda) {
        case 1:
            TijeloIzuzetka(std::logic_error, { UnesiKnjigu(ETF, broj_knjiga++); });
            break;
        case 2:
            TijeloIzuzetka(std::logic_error, { UnesiKorisnika(ETF, broj_korisnika++); });
            break;
        case 3:
            TijeloIzuzetka(std::logic_error, { ZaduziKnjigu(ETF); });
            break;
        case 4:
            TijeloIzuzetka(std::logic_error, { RazduziKnjigu(ETF); });
            break;
        case 5:
            ETF.IzlistajKnjige();
            break;
        case 6:
            ETF.IzlistajKorisnike();
            break;
        case 7:
            TijeloIzuzetka(std::logic_error, { NadjiKnjigu(ETF); });
            break;
        case 8:
            TijeloIzuzetka(std::logic_error, { NadjiKorisnika(ETF); });
            break;
        case 9:
            TijeloIzuzetka(std::logic_error, { PrikaziZaduzenja(ETF); });
            break;
        case 10:
            std::cout &lt;&lt; "DOVIDJENJA!!!" &lt;&lt; std::endl;
            break;
        default:
            std::cout &lt;&lt; "Unijeli ste neispravnu komandu!!!" &lt;&lt; std::endl;
            break;
        }
        if (komanda == 10) break;

    }
    return 0;
}
</pre>
</body>
</html>
