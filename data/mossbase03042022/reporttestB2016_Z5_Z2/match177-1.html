<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7643.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student2634.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;iterator&gt;

<a name="0"></a><font color="#FF0000"><a href="match177-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using namespace std;

struct Korisnik{
    string ime; 
    string prezime; 
    string adresa; 
     string telefon;
};

class Knjiga{
    string naslov; string ime_pisca; string zanr; 
    int god_izdavanja; 
    Korisnik *zaduzenje;
    public:
    Knjiga(string naslov1, string ime, string zanr2, int godina):
    naslov(naslov1), ime_pisca(ime), zanr(zanr2), god_izdavanja(godina), zaduzenje(nullptr) {}
    string DajNaslov() const{return naslov;}
    string DajAutora() const {return ime_pisca;}
    string DajZanr() const{return zanr;}
    int DajGodinuIzdavanja() const{return god_izdavanja;}
    Korisnik* DajKodKogaJe() const{return zaduzenje;}
    void ZaduziKnjigu(Korisnik &amp;n) {zaduzenje=&amp;n;}
    void RazduziKnjigu() {zaduzenje=nullptr;}
    bool DaLiJeZaduzena() const{if(zaduzenje==nullptr)return false; return true;}
    void Ispisi() const;
};

void Knjiga::Ispisi() const{
    cout&lt;&lt;"Naslov: "&lt;&lt;naslov&lt;&lt;"\n";
    cout&lt;&lt;"Pisac: "&lt;&lt;ime_pisca&lt;&lt;"\n";
    cout&lt;&lt;"Zanr: "&lt;&lt;zanr&lt;&lt;"\n";
    cout&lt;&lt;"Godina izdavanja: "&lt;&lt;god_izdavanja&lt;&lt;"\n";
}

class Biblioteka{
    map&lt;int, shared_ptr&lt;Korisnik&gt;&gt; clanovi;
    map&lt;int, shared_ptr&lt;Knjiga&gt;&gt; knjige;
    public:
    Biblioteka()=default;
    Biblioteka(const Biblioteka &amp;b)=delete;
    Biblioteka &amp;operator=(const Biblioteka &amp;b)=delete;
    Biblioteka(Biblioteka &amp;&amp;b);
    Biblioteka operator = (Biblioteka &amp;&amp;b);
    void RegistrirajNovogKorisnika(int broj, string ime, string prezime, string adresa, string telefon);
    void RegistrirajNovuKnjigu(int broj, string naslov1, string ime, string zanr2, int godina);
    Korisnik &amp;NadjiKorisnika(int broj_clana) const;
    Knjiga &amp;NadjiKnjigu(int broj_knjige) const;
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int broj_knjige, int broj_clana);
    void RazduziKnjigu(int broj);
    void PrikaziZaduzenja(int broj) const;
};
Biblioteka::Biblioteka(Biblioteka &amp;&amp;b){
    move(b.clanovi.begin(),b.clanovi.end(),inserter(clanovi, clanovi.begin()));
    move(b.knjige.begin(), b.knjige.end(), inserter(knjige, knjige.begin()));
     }

//Biblioteka &amp;Biblioteka::operator=(Biblioteka &amp;&amp;b){}
       
void Biblioteka::RegistrirajNovogKorisnika(int broj, string ime, string prezime, string adresa, string telefon) {
    if(!clanovi.count(broj)){
    shared_ptr&lt;Korisnik&gt;p=shared_ptr&lt;Korisnik&gt;(new Korisnik{ime,prezime,adresa,telefon});
    clanovi.insert(make_pair(broj,p));
    }
    else throw logic_error("Korisnik vec postoji");
}

void Biblioteka::RegistrirajNovuKnjigu(int broj, string naslov1, string ime, string zanr2, int godina) {
    if(!knjige.count(broj)){
    shared_ptr&lt;Knjiga&gt; p=shared_ptr&lt;Knjiga&gt;(new Knjiga{naslov1,ime,zanr2,godina});
    knjige.insert(make_pair(broj,p));}
    throw logic_error("Knjiga vec postoji");
    
}

Korisnik&amp; Biblioteka::NadjiKorisnika(int broj_clana)const{
    for(auto x:clanovi)
    if(x.first==broj_clana) return *(x.second);
    throw logic_error("Clan nije nadjen");
}

Knjiga&amp; Biblioteka:: NadjiKnjigu(int broj_knjige)const{
    for(auto x:knjige)
    if(x.first==broj_knjige) return *(x.second);
    throw logic_error("Knjiga nije nadjena");
}

void Biblioteka::IzlistajKorisnike() const {
    for(auto x:clanovi){
       cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;endl;
       cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "; 
       cout&lt;&lt;x.second-&gt;prezime&lt;&lt;endl;
       cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;endl;
       cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon&lt;&lt;endl&lt;&lt;endl;
        }
}

void Biblioteka::IzlistajKnjige() const{
    for(auto x:knjige) {x.second-&gt;Ispisi();cout&lt;&lt;"\n";
        if(x.second-&gt;DaLiJeZaduzena())
        cout&lt;&lt;"Zaduzena kod clana: "&lt;&lt;(x.second-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;(x.second-&gt;DajKodKogaJe())-&gt;prezime;
        cout&lt;&lt;"\n"&lt;&lt;"\n";
    }
}

void Biblioteka::ZaduziKnjigu(int broj_knjige, int broj_clana) {
    int brojac1=0, brojac2=0;
    for(auto x:knjige) {
        if(x.first==broj_knjige) {
            brojac1++;
            if(x.second-&gt;DaLiJeZaduzena()) throw logic_error("Knjiga vec zaduzena");
            for(auto y:clanovi)
            if(y.first==broj_clana)
            {x.second-&gt;ZaduziKnjigu(*y.second);brojac2++;}
        }
    }
    if(brojac1==0) throw logic_error("Knjiga nije nadjena");
    if(brojac2==0) throw logic_error("Clan nije nadjen");
}

void Biblioteka::RazduziKnjigu(int broj) {
    int brojac1=0;
    for(auto x:knjige) {
        if(x.first==broj) {
            brojac1++;
            if(!(x.second-&gt;DaLiJeZaduzena())) throw logic_error("Knjiga nije zaduzena");
            x.second-&gt;RazduziKnjigu();
        }
    }
    if(brojac1==0) throw logic_error("Knjiga nije nadjena");
}

void Biblioteka::PrikaziZaduzenja(int broj) const{
    
    for(auto x:clanovi) {
         if(x.first==broj){
            shared_ptr&lt;Korisnik&gt;cl=x.second;
            for(auto y:knjige){
                if(y.second-&gt;DajKodKogaJe()==cl.get()){
                   cout&lt;&lt;"Clanski broj: "&lt;&lt;x.first&lt;&lt;endl;
                    cout&lt;&lt;"Ime i prezime: "&lt;&lt;x.second-&gt;ime&lt;&lt;" "&lt;&lt;x.second-&gt;prezime&lt;&lt;endl;
                    cout&lt;&lt;"Adresa: "&lt;&lt;x.second-&gt;adresa&lt;&lt;endl;
                    cout&lt;&lt;"Broj telefona: "&lt;&lt;x.second-&gt;telefon;
                    for(auto z:knjige) {
                       z.second-&gt;Ispisi();
                       if(z.second-&gt;DaLiJeZaduzena()){
                          cout&lt;&lt;"Zaduzena kod clana: "&lt;&lt;(z.second-&gt;DajKodKogaJe())-&gt;ime&lt;&lt;" "&lt;&lt;(z.second-&gt;DajKodKogaJe())-&gt;prezime;
                          cout&lt;&lt;"\n"&lt;&lt;"\n";
</font>                       }
                  }
             
              }
           }
     }
 }
}

/*if(!brojac) throw domain_error("Clan nije nadjen");
    brojac=0;
    for(auto y:knjige)
    if(((y.second-&gt;DajKodKogaJe())-&gt;first)==broj) {
        brojac++;
        y.second-&gt;Ispisi();
        cout&lt;&lt;"\n"&lt;&lt;"\n";
    }
    if(brojac==0) throw domain_error("Nema zaduzenja za tog clana!");
}*/

int main() {
  /*  Biblioteka b;
    try{
        for(;;) {
            cout&lt;&lt;"\n1-Registracija novog clana"&lt;&lt;"\n"&lt;&lt;"2-Registracija nove knjige"&lt;&lt;"\n"&lt;&lt;
            "3-Pronadji clana"&lt;&lt;"\n"&lt;&lt;"4-Pronadji knjigu"&lt;&lt;"\n"&lt;&lt;"5-Izlistaj clanove"&lt;&lt;"\n"&lt;&lt;
            "6-Izlistaj knjige"&lt;&lt;"\n"&lt;&lt;"7-Zaduzi knjigu"&lt;&lt;"\n"&lt;&lt;"8-Razduzi knjigu"&lt;&lt;"\n"&lt;&lt;
            "9-Prikazi zaduzenja"&lt;&lt;"\n"&lt;&lt;"10-Izadji iz biblioteke"&lt;&lt;"\n";
            int x; 
            cin&gt;&gt;x;
            if(x==1) {
                string ime,prezime,adresa,telefon;
                int broj;
                cout&lt;&lt;"Clanski broj: ";
                cin&gt;&gt;broj;
                cout&lt;&lt;"\nIme i prezime clana: ";
                cin&gt;&gt;ime&gt;&gt;prezime;
                cout&lt;&lt;"\nAdresa: ";
                cin&gt;&gt;adresa;
                cout&lt;&lt;"\nBroj telefona: ";
                cin&gt;&gt;telefon;
                b.RegistrirajNovogClana(broj,ime,prezime,adresa,telefon);
                cout&lt;&lt;"Uspjesno ste registrovali novog clana."&lt;&lt;"\n";
            }
            if(x==2) {
                string ime,zanr,naslov;
                int broj,godina;
                cout&lt;&lt;"Unesite evidencijski broj:";
                cin&gt;&gt;broj;
                cout&lt;&lt;"\nUnesite naslov knjige: ";
                cin&gt;&gt;naslov;
                cout&lt;&lt;"\nUnesite ime pisca: ";
                cin&gt;&gt;ime;
                cout&lt;&lt;"\nUnesite zanr knjige: ";
                cin&gt;&gt;zanr;
                cout&lt;&lt;"\nUnesite godinu izdavanja: ";
                cin&gt;&gt;godina;
                b.RegistrirajNovuKnjigu(broj,naslov,ime,zanr,godina);
                cout&lt;&lt;"Uspjesno ste registrovali novu knjigu."&lt;&lt;"\n";
            }
            if(x==3){
                int x;
                cout&lt;&lt;"Unesite evidencijski broj clana ";
                cin&gt;&gt;x;
                cout&lt;&lt;"\n";
                Clan c=b.NadjiClana(2);
                cout&lt;&lt;"Clan kojeg ste trazili je "&lt;&lt;c.DajIme()&lt;&lt;c.DajPrezime();
            }
            if(x==4) {
                int x;
                cout&lt;&lt;"Unesite evidencijski broj knjige: ";
                cin&gt;&gt;x;
                cout&lt;&lt;"\n";
                Knjiga c=b.NadjiKnjigu(2);
                cout&lt;&lt;"Knjiga koju ste trazili je "&lt;&lt;c.DajNaslov();
            }
            if(x==5) {b.IzlistajClanove();}
            if(x==6) {b.IzlistajKnjige();}
            if(x==7) {
                int broj,broj2;
                cout&lt;&lt;"Unesite broj knjige i broj clana: ";
                cin&gt;&gt;broj&gt;&gt;broj2;
                b.ZaduziKnjigu(broj,broj2);
            }
            if(x==8) {
                int broj;
                cout&lt;&lt;"Unesite broj clana: ";
                cin&gt;&gt;broj;
                b.RazduziKnjigu(broj);
            }
            if(x==9){
                int broj;
                cout&lt;&lt;"Unesite broj clana: ";
                cin&gt;&gt;broj;
                b.PrikaziZaduzenja(broj);
            }
            if(x==10) {break;}
        }
        return 0;
    }
    catch(domain_error greska) {
        cout&lt;&lt;greska.what();
    }
    catch(bad_alloc) {
        cout&lt;&lt;"Nema dovoljno memorije";
    }*/
}
</pre>
</body>
</html>
