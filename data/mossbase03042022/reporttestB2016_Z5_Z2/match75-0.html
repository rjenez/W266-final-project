<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3856.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student3856.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;memory&gt;

struct Korisnik{
<a name="1"></a><font color="#00FF00"><a href="match75-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_16.gif"/></a>

    std::string ime, prezime,adresa, telefon;
};

class Knjiga{
    std::string naslov, ime_pisca, zanr;
    int godina_izdavanja;
    Korisnik *zaduzena = nullptr;
public:
    Knjiga(std::string naslov, std::string ime_pisca, std::string zanr, int godina){
        this-&gt;naslov = naslov;
        this-&gt;ime_pisca = ime_pisca;
        this-&gt;zanr = zanr;
        this-&gt;godina_izdavanja = godina;
        
    }
    std::string DajNaslov(){
        return naslov;
    }
    std::string DajAutora(){
        return ime_pisca;
    }
    std::string DajZanr(){
        return zanr;
    }
    int DajGodinuIzdavanja(){
        return godina_izdavanja;
    }
    Korisnik *DajKodKogaJe(){
        return zaduzena;
    }
    void ZaduziKnjigu(Korisnik &amp;k){
        //mozda ipak da napravim novog ili?
        zaduzena = &amp;k;
        
    }
    void RazduziKnjigu(){
        
        zaduzena = nullptr;
    }
    bool DaLiJeZaduzena(){
        
        if(zaduzena == nullptr) return false;
        return true;
    }
};

class Biblioteka{
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt;&gt; knjige;
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt;&gt; korisnici;
    
    void IspisiKorisnika(const Korisnik &amp;k){
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; k.ime &lt;&lt; " " &lt;&lt; k.prezime &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; k.adresa &lt;&lt; std::endl;
        std::cout &lt;&lt; "Broj telefona: " &lt;&lt; k.telefon &lt;&lt; std::endl;
    }
    
    void IspisiKnjigu(Knjiga &amp;k){
        std::cout &lt;&lt; "Naslov: " &lt;&lt; k.DajNaslov() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Pisac: " &lt;&lt; k.DajAutora() &lt;&lt; std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match75-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_78.gif"/></a>

        std::cout &lt;&lt; "Zanr: " &lt;&lt; k.DajZanr() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina izdavanja: " &lt;&lt; k.DajGodinuIzdavanja() &lt;&lt; std::endl;
        
        
    }
public:
    Biblioteka (){
    }
    Biblioteka(Biblioteka &amp;b){
        
        for(auto x : b.knjige){
            int broj = x.first;
            std::shared_ptr&lt;Knjiga&gt; knjiga = std::make_shared&lt;Knjiga&gt;((x.second)-&gt;DajNaslov(), (x.second)-&gt;DajAutora(), (x.second)-&gt;DajZanr(), (x.second)-&gt;DajGodinuIzdavanja());
            if((x.second)-&gt;DaLiJeZaduzena()){
                Korisnik korisnik =*(x.second)-&gt;DajKodKogaJe();
                knjiga-&gt;ZaduziKnjigu(korisnik);
                knjiga = nullptr;
            }
            knjige.insert(std::make_pair(broj,knjiga));
        }
        
        for(auto x : b.korisnici){
            int broj = x.first;
            std::shared_ptr&lt;Korisnik&gt;novi_korisnik = std::make_shared&lt;Korisnik&gt;();
            novi_korisnik-&gt;ime = (x.second)-&gt;ime;
            novi_korisnik-&gt;prezime = (x.second)-&gt;prezime;
            novi_korisnik-&gt;adresa = (x.second)-&gt;adresa;
            novi_korisnik-&gt;telefon = (x.second)-&gt;telefon;
            korisnici.insert(std::make_pair(broj,novi_korisnik));
            novi_korisnik = nullptr;
        }
        
    }
    Biblioteka &amp;operator =(Biblioteka &amp;b){
        if(&amp;b == this) return *this;
        for(auto x : knjige){
            //delete x.second;
            x.second = nullptr;
            
        }
        knjige.erase(knjige.begin(),knjige.end());
        for(auto x : korisnici){
            //delete x.second;
            x.second = nullptr;
            
        }
       for(auto x : b.knjige){
            int broj = x.first;
            std::shared_ptr&lt;Knjiga&gt; knjiga = std::make_shared&lt;Knjiga&gt;((x.second)-&gt;DajNaslov(), (x.second)-&gt;DajAutora(), (x.second)-&gt;DajZanr(), (x.second)-&gt;DajGodinuIzdavanja());
            if((x.second)-&gt;DaLiJeZaduzena()){
                Korisnik korisnik =*(x.second)-&gt;DajKodKogaJe();
                knjiga-&gt;ZaduziKnjigu(korisnik);
                knjiga = nullptr;
            }
            knjige.insert(std::make_pair(broj,knjiga));
        }
        
        for(auto x : b.korisnici){
            int broj = x.first;
            std::shared_ptr&lt;Korisnik&gt;novi_korisnik = std::make_shared&lt;Korisnik&gt;();
            novi_korisnik-&gt;ime = (x.second)-&gt;ime;
            novi_korisnik-&gt;prezime = (x.second)-&gt;prezime;
            novi_korisnik-&gt;adresa = (x.second)-&gt;adresa;
            novi_korisnik-&gt;telefon = (x.second)-&gt;telefon;
            korisnici.insert(std::make_pair(broj,novi_korisnik));
            novi_korisnik = nullptr;
        }
        return *this;
        
    }
    ~Biblioteka(){
        for(auto x : knjige){
            //delete x.second;
            x.second = nullptr;
            
        }
        knjige.erase(knjige.begin(),knjige.end());
        for(auto x : korisnici){
            //delete x.second;
            x.second = nullptr;
            
        }
        korisnici.erase(korisnici.begin(),korisnici.end());
    }
    //dodati za privremene objekte -.-'
    void RegistrirajNovogKorisnika(int clanski_broj, std::string ime, std::string prezime, std::string adresa, std::string telefon){
        for(auto x : korisnici){
            if(x.first == clanski_broj) throw std::logic_error("Korisnik vec postoji");
            
        }
        std::shared_ptr&lt;Korisnik&gt; novi_korisnik = std::make_shared&lt;Korisnik&gt;();
        novi_korisnik-&gt;ime = ime;
        novi_korisnik-&gt;prezime = prezime;
        novi_korisnik-&gt;adresa = adresa;
        novi_korisnik-&gt;telefon = telefon;
        korisnici[clanski_broj] = novi_korisnik;
        novi_korisnik = nullptr;
    }
    void RegistrirajNovuKnjigu(int ev_broj_knjige, std::string naziv, std::string autor, std::string zanr, int godina){
        for(auto x : knjige){
            if(x.first == ev_broj_knjige) throw std::logic_error("Knjiga vec postoji");
            
        }
        std::shared_ptr&lt;Knjiga&gt;knjiga = std::make_shared&lt;Knjiga&gt;(naziv, autor,zanr , godina);
        //knjige[ev_broj_knjige] = knjiga;
        knjige.insert(std::make_pair(ev_broj_knjige,knjiga));
        knjiga = nullptr;
    }
    
    Korisnik &amp;NadjiKorisnika(int clanski_broj){
       
        for(auto x : korisnici){
           if(x.first == clanski_broj){
               return *(korisnici[clanski_broj]);
           } 
        }
        throw std::logic_error("Korisnik nije nadjen");
        
        
    }
    Knjiga &amp;NadjiKnjigu(int ev_broj_knjige){
        for(auto x : knjige){
           if(x.first == ev_broj_knjige){
               return *(knjige[ev_broj_knjige]);
           } 
        }
        throw std::logic_error("Knjiga nije nadjena");
    }
    
    void ZaduziKnjigu(int ev_broj_knjige, int clanski_broj){
        bool nasao = false;
        for(auto x : knjige) 
            if(x.first == ev_broj_knjige){
                nasao = true;
                break;
            }
        if(nasao == false) throw std::logic_error("Knjiga nije nadjena");
        nasao = false;
        for(auto x : korisnici)
            if(x.first == clanski_broj) {
                nasao = true;
                break;
            }
        if(nasao == false) throw std::logic_error("Korisnik nije nadjen");
        
        if(knjige[ev_broj_knjige]-&gt;DaLiJeZaduzena() == true) throw std::logic_error("Knjiga vec zaduzena");
        
        knjige[ev_broj_knjige]-&gt;ZaduziKnjigu(*(korisnici[clanski_broj]));
    }
    
    void IzlistajKorisnike(){
        for(auto x : korisnici){
            std::cout &lt;&lt;"Clanski broj: " &lt;&lt; x.first &lt;&lt; std::endl;
            IspisiKorisnika(*(x.second));
            std::cout &lt;&lt; std::endl;
            
        }
    }
    void IzlistajKnjige(){
        for(auto x : knjige){
            std::cout &lt;&lt;"Evidencijski broj: " &lt;&lt; x.first &lt;&lt;std::endl;
            IspisiKnjigu(*(x.second));
            if(x.second-&gt;DaLiJeZaduzena()){
                Korisnik k = *(x.second)-&gt;DajKodKogaJe();
                for(auto y : korisnici) {
                    if((y.second)-&gt;ime == k.ime &amp;&amp; (y.second)-&gt;prezime == k.prezime &amp;&amp; (y.second)-&gt;adresa == k.adresa &amp;&amp; (y.second)-&gt;telefon == k.telefon) std::cout &lt;&lt;"Zaduzena kod korisnika: " &lt;&lt; k.ime &lt;&lt; " " &lt;&lt; k.prezime &lt;&lt;std::endl;
                }
            }
            std::cout &lt;&lt; std::endl;
            
        }
    }
    void PrikaziZaduzenja(int clanski_broj){
        bool nasao = false;
        for(auto x : korisnici){
            if(x.first == clanski_broj) {
                nasao = true;
                break;
            }
        }
        if(nasao == false ) throw std::logic_error("Korisnik nije nadjen");
        Korisnik k = *(korisnici[clanski_broj]);
        bool ima = false;;
        for(auto x : knjige){
            //std::cout &lt;&lt; x.first;
            //IspisiKnjigu(*(x.second));
            if(x.second-&gt;DaLiJeZaduzena()){
                Korisnik y= *(x.second)-&gt;DajKodKogaJe();
                if(y.ime == k.ime &amp;&amp; y.prezime == k.prezime &amp;&amp; y.adresa == k.adresa &amp;&amp; y.telefon == k.telefon) {
                    ima = true;
                    std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;x.first &lt;&lt;std::endl;
                    IspisiKnjigu(*(x.second));
                   // std::cout &lt;&lt;"Zaduzena kod korisnika: " &lt;&lt; k.ime &lt;&lt; " " &lt;&lt; k.prezime &lt;&lt;std::endl;
                    std::cout &lt;&lt; std::endl;
                }
            }
            
            
        }
        if(ima == false) std::cout &lt;&lt; "Nema zaduzenja za tog korisnika"&lt;&lt; std::endl;
    }
    void RazduziKnjigu(int ev_broj_knjige){
        bool nasao = false;
        for(auto x : knjige){
            if(x.first == ev_broj_knjige){
                if((x.second)-&gt;DaLiJeZaduzena() == true){
                    (x.second)-&gt;RazduziKnjigu();
                    nasao = true;
                    break;
                }
                else 
                    throw std::logic_error("Knjiga nije zaduzena");
            }
        }
        if(nasao == false) throw std::logic_error("Knjiga nije nadjena");
    }
};
int main ()
{
   /* Korisnik *k = new Korisnik();
    Biblioteka *b = new Biblioteka();
    Biblioteka c(*b);
    
    k-&gt;ime="a";
    k-&gt;prezime ="b";
    k-&gt;adresa = "c";
    k-&gt;telefon = "d";
    Knjiga *knjiga = new Knjiga("k","l","m",1);
    knjiga-&gt;ZaduziKnjigu(*k);
    std::cout &lt;&lt; knjiga-&gt;DaLiJeZaduzena();
    knjiga-&gt;RazduziKnjigu();
    std::cout &lt;&lt; knjiga-&gt;DaLiJeZaduzena();
    delete knjiga;
    delete k;
    delete b;*/
   /* Korisnik kor{"Meho", "Mehic", "Dobojska 15", "033/123-456"};
Knjiga knj("Tvrdjava", "Mesa Selimovic", "Roman", 1965);
if(knj.DajKodKogaJe() == nullptr) std::cout &lt;&lt; "Nije zaduzena\n";
std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
knj.ZaduziKnjigu(kor);
std::cout &lt;&lt; "Knjigu je zaduzio " &lt;&lt; knj.DajKodKogaJe()-&gt;ime &lt;&lt; std::endl;
std::cout &lt;&lt; knj.DaLiJeZaduzena() &lt;&lt; std::endl;
*/
Biblioteka b;
b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic",
"Zmaja od Bosne 30", "032/444-555");
b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic",
"Trg neznalica 111", "030/111-222");
b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic",
"Studenata etfovaca 3b", "037/654-321");
b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
</font>b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
b.PrikaziZaduzenja(1234);
	return 0;
}</pre>
</body>
</html>
