<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7368.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7368.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
#include &lt;map&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;

struct Korisnik {
    std::string ime, prezime, adresa, telefon;
};
class Knjiga {
    std::string naslov, ime_pisca, zanr;
    int god_izd;
<a name="4"></a><font color="#FF00FF"><a href="match68-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    Korisnik *pok;
    public:
    Knjiga (std::string Naslov, std::string pisac, std::string Zanr, int godina) {
        naslov=Naslov; ime_pisca=pisac; zanr=Zanr; god_izd=godina;
        pok=nullptr;
    }
    std::string DajNaslov()const {return naslov;}
    std::string DajAutora()const {return ime_pisca;}
</font>    std::string DajZanr()const {return zanr;}
    int DajGodinuIzdavanja() const {return god_izd;}
<a name="0"></a><font color="#FF0000"><a href="match68-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_44.gif"/></a>

    Korisnik *DajKodKogaJe() const {return pok;}
    void ZaduziKnjigu (Korisnik &amp;korisnik) { pok=&amp;korisnik;}
    void RazduziKnjigu() {pok=nullptr;}
    bool DaLiJeZaduzena() {
        if (pok==nullptr) return false;
        return true;
    }
};
class Biblioteka {
    std::map&lt;int, std::shared_ptr&lt;Korisnik&gt; &gt; korisnici;
    std::map&lt;int, std::shared_ptr&lt;Knjiga&gt; &gt;knjige;
    public:
    Biblioteka()=default;
    Biblioteka (const Biblioteka &amp;bibl) {
        for(auto it=bibl.korisnici.begin(); it!=bibl.korisnici.end(); it++){
            korisnici.insert(std::make_pair(it-&gt;first,std::make_shared&lt;Korisnik&gt;(*(it-&gt;second))));
        }
        for (auto it=bibl.knjige.begin(); it!=bibl.knjige.end(); it++) {
            knjige.insert(std::make_pair(it-&gt;first,std::make_shared&lt;Knjiga&gt;(*(it-&gt;second))));
        }
        
    }
    Biblioteka(Biblioteka &amp;&amp;bibl){
        for (auto it=bibl.korisnici.begin(); it!=bibl.korisnici.end(); it++){
            korisnici.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        for (auto it=bibl.knjige.begin(); it!=bibl.knjige.end(); it++){
            knjige.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
    }
    Biblioteka &amp;operator = (const Biblioteka &amp;bibl){
        if (this==&amp;bibl) return *this;
        for (auto it=bibl.korisnici.begin(); it!=bibl.korisnici.end(); it++){
            //it-&gt;second(nullptr);
            korisnici.erase(it);
        }
        for (auto it=bibl.knjige.begin(); it!=bibl.knjige.end(); it++){
            //it-&gt;second=nullptr;
            knjige.erase(it);
        }
        for(auto it=bibl.korisnici.begin(); it!=bibl.korisnici.end(); it++){
            korisnici.insert(std::make_pair(it-&gt;first,std::make_shared&lt;Korisnik&gt;(*(it-&gt;second))));
        }
        for (auto it=bibl.knjige.begin(); it!=bibl.knjige.end(); it++){
            knjige.insert(std::make_pair(it-&gt;first,std::make_shared&lt;Knjiga&gt;(*(it-&gt;second))));
        }
        return *this;
    }
    Biblioteka &amp;operator =(Biblioteka &amp;&amp;bibl){
        if (this==&amp;bibl) return *this;
        for (auto it=bibl.korisnici.begin(); it!=bibl.korisnici.end(); it++){
            korisnici.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        for (auto it=bibl.knjige.begin(); it!=bibl.knjige.end(); it++){
            knjige.insert(std::make_pair(it-&gt;first,it-&gt;second));
            it-&gt;second=nullptr;
        }
        return *this;
    }
    void RegistrirajNovogKorisnika (int cl_br,std::string name,std::string surname,std::string address,std::string br_tel){
        for (auto it=korisnici.begin(); it!=korisnici.end(); it++){
            if (it-&gt;first==cl_br) throw std::logic_error ("Korisnik vec postoji");
        }
        Korisnik pok;
            pok.ime=name;
            pok.prezime=surname;
            pok.adresa=address;
            pok.telefon=br_tel;
            korisnici.insert(std::make_pair(cl_br,std::make_shared&lt;Korisnik&gt;(pok)));
    }
    void RegistrirajNovuKnjigu(int ev_br, std::string Naslov, std::string autor, std::string Zanr, int godina){
        for (auto it=knjige.begin(); it!=knjige.end(); it++){
            if (it-&gt;first==ev_br) throw std::logic_error ("Korisnik vec postoji");
        }
        knjige.insert(std::make_pair(ev_br,std::make_shared&lt;Knjiga&gt;(Naslov,autor,Zanr,godina)));
    }
    Korisnik &amp;NadjiKorisnika(int cl_broj);
    Knjiga &amp;NadjiKnjigu(int ev_broj);
    void IzlistajKorisnike() const;
    void IzlistajKnjige() const;
    void ZaduziKnjigu(int ev_br, int cl_broj);
    void RazduziKnjigu(int ev_br);
    void PrikaziZaduzenja(int cl_broj){
        std::string name="";
        bool ima=false,ima1=false;
        auto it_kor=korisnici.begin();
        for (; it_kor!=korisnici.end(); it_kor++){
            if (it_kor-&gt;first==cl_broj) {
                ima=true;
                break;
            }
        }
        if (ima==false) throw std::logic_error("Korisnik nije nadjen");
        for (auto it=knjige.begin(); it!=knjige.end(); it++){
            if (it_kor-&gt;second.get()==it-&gt;second-&gt;DajKodKogaJe()){
                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Naslov: "&lt;&lt;it-&gt;second-&gt;DajNaslov()&lt;&lt;std::endl;
</font>                std::cout&lt;&lt;"Pisac: "&lt;&lt;it-&gt;second-&gt;DajAutora()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Zanr: "&lt;&lt;it-&gt;second-&gt;DajZanr()&lt;&lt;std::endl;
<a name="2"></a><font color="#0000FF"><a href="match68-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

                std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;it-&gt;second-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
                std::cout&lt;&lt;std::endl;
                ima1=true;
            }
        }
        if (ima1==false ) std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
    }
};
Korisnik &amp;Biblioteka::NadjiKorisnika(int cl_broj){
    for (auto it=korisnici.begin(); it!=korisnici.end(); it++){
        if (it-&gt;first==cl_broj) return *it-&gt;second;
    }
    throw std::logic_error ("Korisnik nije nadjen");
}
Knjiga &amp;Biblioteka::NadjiKnjigu(int ev_broj){
    for (auto it=knjige.begin(); it!=knjige.end(); it++){
        if (it-&gt;first==ev_broj) return *it-&gt;second;
    }
    throw std::logic_error ("Knjiga nije nadjena");
}
void Biblioteka::IzlistajKorisnike() const {
    int brojac=0;
    for (auto it=korisnici.begin(); it!=korisnici.end(); it++){
        std::cout&lt;&lt;"Clanski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(it-&gt;second)-&gt;ime&lt;&lt;" "&lt;&lt;(it-&gt;second)-&gt;prezime&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match68-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

        std::cout&lt;&lt;"Adresa: "&lt;&lt;(it-&gt;second)-&gt;adresa&lt;&lt;std::endl;
        std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(it-&gt;second)-&gt;telefon&lt;&lt;std::endl;
        brojac++;
        if(brojac!=0 &amp;&amp; (brojac%2==0)) std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::IzlistajKnjige() const {
    int brojac=0;
    for (auto it=knjige.begin(); it!=knjige.end(); it++){
        brojac++;
        std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;it-&gt;first&lt;&lt;std::endl;
        std::cout&lt;&lt;"Naslov: "&lt;&lt;(it-&gt;second)-&gt;DajNaslov()&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"Pisac: "&lt;&lt;(it-&gt;second)-&gt;DajAutora() &lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match68-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_26.gif"/></a>

        std::cout&lt;&lt;"Zanr: "&lt;&lt;(it-&gt;second)-&gt;DajZanr() &lt;&lt;std::endl;
        std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(it-&gt;second)-&gt;DajGodinuIzdavanja()&lt;&lt;std::endl;
        if((*it-&gt;second).DaLiJeZaduzena()) {
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;ime&lt;&lt;" "
            &lt;&lt;it-&gt;second-&gt;DajKodKogaJe()-&gt;prezime;
            std::cout&lt;&lt;std::endl;
        }
        if (brojac!=0 &amp;&amp; (brojac%2==0)) std::cout&lt;&lt;std::endl;
    }
}
void Biblioteka::ZaduziKnjigu(int ev_broj, int cl_broj){
    bool ima=false,ima1=false;
    auto it=knjige.begin();
    for (it=knjige.begin(); it!=knjige.end(); it++){
        if (it-&gt;first==ev_broj) {ima=true;break;}
    }
    auto it1=korisnici.begin();
    if (ima==false) throw std::logic_error ("Knjiga nije nadjena");
    else {
        for (it1=korisnici.begin(); it1!=korisnici.end(); it1++){
            if (it1-&gt;first==cl_broj) {
                ima1=true;
                break;
            }
        }
        if (ima1==false) throw std::logic_error ("Korisnik nije nadjen");
        else {
            it-&gt;second-&gt;ZaduziKnjigu(*it1-&gt;second);
        }
    }
}
void Biblioteka::RazduziKnjigu(int ev_broj){
    auto it=knjige.begin();
    bool ima=false;
    for (it=knjige.begin(); it!=knjige.end(); it++){
        if (it-&gt;first==ev_broj){
            ima=true; break;
        } 
    }
    if (ima==false) throw std::logic_error ("Knjiga nije nadjena");
    bool Zaduzena=it-&gt;second-&gt;DaLiJeZaduzena();
    if (Zaduzena==false) throw std::logic_error ("Knjiga nije zaduzena");
    else {
        it-&gt;second-&gt;RazduziKnjigu();
    }
}

int main ()
{
    Biblioteka b;
    b.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic","Zmaja od Bosne 30", "032/444-555");
    b.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic","Trg neznalica 111", "030/111-222");
    b.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic","Studenata 3b", "037/654-321");
    b.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
    b.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
    b.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
    b.IzlistajKnjige();
    std::cout&lt;&lt;std::endl;
    Biblioteka b1;
    b1.RegistrirajNovogKorisnika(1234, "Petar", "Petrovic","Zmaja od Bosne 30", "032/444-555");
    b1.RegistrirajNovogKorisnika(4312, "Hasan", "Hasanovic","Trg neznalica 111", "030/111-222");
    b1.RegistrirajNovogKorisnika(3124, "Mehmed", "Mehmedovic","Studenata etfovaca 3b", "037/654-321");
    b1.RegistrirajNovuKnjigu(231, "Prokleta avlija", "Ivo Andric", "Roman", 1955);
    b1.RegistrirajNovuKnjigu(555, "Grimove Bajke", "Braca Grim", "Bajke", 1927);
    b1.RegistrirajNovuKnjigu(136, "Kameni spavac", "Mak Dizdar", "Poezija", 1960);
    b1.ZaduziKnjigu(231, 1234);
    b1.ZaduziKnjigu(136, 1234);
    b1.PrikaziZaduzenja(1234);
</font>
	return 0;
}</pre>
</body>
</html>
