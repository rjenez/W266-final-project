<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7429.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z2/student7429.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 2)
//Autotestovi by Eldar Kurtic (mail: ekurtic3@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
#include &lt;utility&gt;

struct Korisnik{
    std::string ime,prezime,adresa,telefon;
};

class Knjiga{
    std::string naslov,autor,zanr;
    int godina_izdavanja;
    Korisnik* vlasnik=nullptr;
    public:
    Knjiga(std::string naslov,std::string autor,std::string zanr,int godina_izdavanja) : naslov(naslov),autor(autor),zanr(zanr),godina_izdavanja(godina_izdavanja)
    {
        
    }
    std::string DajNaslov() const {return naslov;}
    std::string DajAutora() const {return autor;}
    std::string DajZanr() const {return zanr;}
    int DajGodinuIzdavanja() const {return godina_izdavanja;}
    Korisnik* DajKodKogaJe() const {return vlasnik;}
    void ZaduziKnjigu(Korisnik &amp;vlasni){vlasnik=&amp;vlasni;}
    void RazduziKnjigu(){vlasnik=nullptr;}
    bool DaLiJeZaduzena(){return vlasnik;}
    
};

class Biblioteka{
    std::map&lt;int,Korisnik*&gt; vlasnici;
    std::map&lt;int,Knjiga*&gt; knjige;
    public:
    
    Biblioteka(){}
    
    ~Biblioteka()
    {
        for(std::pair&lt;int,Korisnik*&gt; i:vlasnici)
        delete i.second;
        for(std::pair&lt;int,Knjiga*&gt; j:knjige)
        delete j.second;
    }
    Biblioteka(const Biblioteka &amp;a)
    {
        
        vlasnici=a.vlasnici;
<a name="3"></a><font color="#00FFFF"><a href="match448-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        knjige=a.knjige;
        
    }
    
    
    
    
    
    
    
    void RegistrirajNovogKorisnika(int clanskibroj,std::string ime, std::string prezime,std::string adresa,std::string telefon)
    {
        if(vlasnici.count(clanskibroj))
</font>        throw std::logic_error("Korisnik vec postoji");
        else
        {
            try
            {
                vlasnici[clanskibroj]=new Korisnik{ime,prezime,adresa,telefon};
            }
            catch(std::bad_alloc e)
            {
                std::cout&lt;&lt;"Problemi s memorijom!";
            }
        }
    }
    void RegistrirajNovuKnjigu(int brojknjige,std::string naslov,std::string ime,std::string zanr,int godina)
    {
        if(knjige.count(brojknjige))
        throw std::logic_error("Knjiga vec postoji");
        else
        {
            try
            {
                knjige[brojknjige]=new Knjiga(naslov,ime,zanr,godina);
            }
            catch(std::bad_alloc e)
            {
                std::cout&lt;&lt;"Problemi s memorijom!";
            }
        }
    }
    Korisnik &amp;NadjiKorisnika (int broj)
    {
        if(!vlasnici.count(broj))
        throw std::logic_error("Korisnik nije nadjen");
        else
        return *vlasnici[broj];
    }
    Knjiga &amp;NadjiKnjigu (int broj)
    {
        if(!knjige.count(broj))
        throw std::logic_error("Knjiga nije nadjena");
        else
        return *knjige[broj];
    }
    void IzlistajKorisnike () 
    {
        for(std::pair&lt;int,Korisnik*&gt; i:vlasnici)
        {
<a name="2"></a><font color="#0000FF"><a href="match448-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

            std::cout&lt;&lt;"Clanski broj: "&lt;&lt;i.first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Ime i prezime: "&lt;&lt;(*i.second).ime&lt;&lt;" "&lt;&lt;(*i.second).prezime&lt;&lt;std::endl;
            std::cout&lt;&lt;"Adresa: "&lt;&lt;(*i.second).adresa&lt;&lt;std::endl;
            std::cout&lt;&lt;"Broj telefona: "&lt;&lt;(*i.second).telefon&lt;&lt;std::endl&lt;&lt;std::endl;
</font>        }
    }
    void IzlistajKnjige () 
    {
        for(std::pair&lt;int,Knjiga*&gt; i:knjige)
        {
<a name="0"></a><font color="#FF0000"><a href="match448-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_13.gif"/></a>

            std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;std::endl;
            std::cout&lt;&lt;"Naslov: "&lt;&lt;(*i.second).DajNaslov()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Pisac: "&lt;&lt;(*i.second).DajAutora()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Zanr: "&lt;&lt;(*i.second).DajZanr()&lt;&lt;std::endl;
            std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*i.second).DajGodinuIzdavanja()&lt;&lt;std::endl;
            if(((*i.second).DajKodKogaJe()))
            std::cout&lt;&lt;"Zaduzena kod korisnika: "&lt;&lt;(*((*i.second).DajKodKogaJe())).ime&lt;&lt;" "&lt;&lt;(*((*i.second).DajKodKogaJe())).prezime&lt;&lt;std::endl&lt;&lt;std::endl;
</font>        }
    }    
    void ZaduziKnjigu(int evidencijski,int clanski)
    {
        if(!knjige.count(evidencijski))
        throw std::logic_error("Knjiga nije nadjena");
        if(!vlasnici.count(clanski))
        throw std::logic_error("Korisnik nije nadjen");
        if((*knjige[evidencijski]).DajKodKogaJe())
        throw std::logic_error("Knjiga vec zaduzena");
        (*(knjige[evidencijski])).ZaduziKnjigu(*vlasnici[clanski]);
    }
    void RazduziKnjigu(int evidencijski)
    {
        if(!knjige.count(evidencijski))
        throw std::logic_error("Knjiga nije nadjena");
        if(!((*knjige[evidencijski]).DajKodKogaJe()))
        throw std::logic_error("Knjiga nije zaduzena");
        (*(knjige[evidencijski])).RazduziKnjigu();
    }
    void PrikaziZaduzenja (int clanski)
    {
        if(!vlasnici.count(clanski))
        throw std::logic_error("Korisnik nije nadjen");
        {
        bool Zaduzio(false);
        for(std::pair&lt;int,Knjiga*&gt; i:knjige)
        {
            if((*i.second).DajKodKogaJe()==vlasnici[clanski])
            {
                Zaduzio=true;
                break;
            }
        }
        if(!Zaduzio)
        std::cout&lt;&lt;"Nema zaduzenja za tog korisnika!";
        }
        
        for(std::pair&lt;int,Knjiga*&gt; i:knjige)
        {
            if((*i.second).DajKodKogaJe()==vlasnici[clanski])
            {
<a name="1"></a><font color="#00FF00"><a href="match448-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

                std::cout&lt;&lt;"Evidencijski broj: "&lt;&lt;i.first&lt;&lt;std::endl;
                std::cout&lt;&lt;"Naslov: "&lt;&lt;(*i.second).DajNaslov()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Pisac: "&lt;&lt;(*i.second).DajAutora()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Zanr: "&lt;&lt;(*i.second).DajZanr()&lt;&lt;std::endl;
                std::cout&lt;&lt;"Godina izdavanja: "&lt;&lt;(*i.second).DajGodinuIzdavanja()&lt;&lt;std::endl&lt;&lt;std::endl;
</font>            }
        }
        
    }
    
    
    
  
};









int main ()
{
	
	Knjiga a("a","d","d",3);
	a.DaLiJeZaduzena();
	Korisnik b{"a","s","s","s"};
	a.ZaduziKnjigu(b);
	return 0;
}</pre>
</body>
</html>
