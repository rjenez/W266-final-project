<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z3/student1547.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z3/student2956.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;

void Testiraj(int dan, int mjesec, int godina){
    int brojdana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((godina % 4 == 0 &amp;&amp; godina % 100 != 0) || godina % 400 == 0)
        brojdana[1]++;
    if(godina &lt; 1800 || mjesec &lt; 1 || dan &lt; 1 || mjesec &gt; 12 || dan &gt; brojdana[mjesec-1])
        throw std::domain_error("Nelegalan datum");
}

int Pretvorba(int dan, int mjesec, int godina){
    int dani, pomocna(mjesec);
    if(mjesec &lt;= 2) pomocna+=12;
    dani = (dan + 13 * (pomocna + 1) / 5 + godina + godina / 4 + godina / 400 - godina / 100) % 7;
    if (dani == 1) dani = 7;
    else dani--;
    if(pomocna &gt;= 13) dani--;
    return dani;
}


class Datum{
    int dan, mjesec, godina;
public:
    enum Mjeseci {Januar = 1, Februar, Mart, April, Maj, Juni, Juli, August, Septembar, Oktobar, Novembar, Decembar};
<a name="0"></a><font color="#FF0000"><a href="match806-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    enum Dani {Ponedjeljak = 1, Utorak, Srijeda, Cetvrtak, Petak, Subota, Nedjelja};

    Datum(int dan, int mjesec, int godina);
    
    Datum(int dan, Mjeseci mjesec, int godina);
    
    void Postavi(int dan, int mjesec, int godina);
    
    void Postavi(int dan, Mjeseci mjesec, int godina);
    
    int DajDan() const{ return dan; }
    
    Mjeseci DajMjesec() const{ return static_cast&lt;Mjeseci&gt;(mjesec); }
</font>    
    int DajGodinu() const{ return godina; }
    
    char* DajImeMjeseca() const;
    
    Dani DanUSedmici() const{ return static_cast&lt;Dani&gt;(Pretvorba(dan, mjesec, godina)); }
    
    char* DajImeDanaUSedmici() const;
    
    Datum&amp; PostaviNormalizirano(Datum &amp;datum);
    
    void Naprijed(){ Datum::dan++; }
    void Nazad(){ Datum::dan--; }
    
    friend Datum &amp;operator ++(Datum &amp;prvo);
    friend Datum &amp;operator ++(Datum &amp;prvo, int);
    friend Datum &amp;operator --(Datum &amp;prvo);
    friend Datum &amp;operator --(Datum &amp;prvo, int);
    
    friend Datum operator +(const Datum&amp; prvo, const int&amp; zakoliko);
    friend Datum operator -(const Datum&amp; prvo, const int&amp; zakoliko);
    
    friend Datum&amp; operator +=(Datum&amp; prvo, const int&amp; zakoliko);
    friend Datum&amp; operator -=(Datum&amp; prvo, const int&amp; zakoliko);
    
    friend Datum operator -(const Datum&amp; prvo, const Datum&amp; drugo);
    
    friend bool operator ==(const Datum&amp; prvo, const Datum&amp; drugo);
    friend bool operator !=(const Datum&amp; prvo, const Datum&amp; drugo);
    friend bool operator &lt;(const Datum&amp; prvo, const Datum&amp; drugo);
    friend bool operator &gt;(const Datum&amp; prvo, const Datum&amp; drugo);
    friend bool operator &lt;=(const Datum&amp; prvo, const Datum&amp; drugo);
<a name="1"></a><font color="#00FF00"><a href="match806-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    friend bool operator &gt;=(const Datum&amp; prvo, const Datum&amp; drugo);
    
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Datum &amp;prvo);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;ulaz, Datum &amp;prvo);
</font>    static std::string dani[];
    static std::string mjeseci[];
    
    operator std::string();
    explicit operator int();
    
};

std::string Datum::mjeseci[]{ "Januar", "Februar", "Mart", "April", "Maj", "Juni", "Juli", "August", "Septembar", "Oktobar", "Novembar", "Decembar"};
std::string Datum::dani[]{ "Ponedjeljak", "Utorak", "Srijeda", "Cetvrtak", "Petak", "Subota", "Nedjelja"};

Datum::Datum(int dan, int mjesec, int godina){
    Testiraj(dan, mjesec, godina);
    Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
}
    
Datum::Datum(int dan, Mjeseci mjesec, int godina){
    Testiraj(dan, mjesec, godina);
    Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
}
    
void Datum::Postavi(int dan, int mjesec, int godina){
    Testiraj(dan, mjesec, godina);
    Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
}
    
void Datum::Postavi(int dan, Mjeseci mjesec, int godina){
    Testiraj(dan, mjesec, godina);
    Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
}
    
char* Datum::DajImeMjeseca() const{
    return &amp;mjeseci[mjesec-1][0]; 
}
    
char* Datum::DajImeDanaUSedmici() const{
    return &amp;dani[DanUSedmici()-1][0]; 
}

Datum&amp; Datum::PostaviNormalizirano(Datum &amp;datum){
    int brojdana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    for(;;){
        if(datum.mjesec &gt;= 1 &amp;&amp; datum.mjesec &lt;= 12) break;
        if(datum.mjesec &lt; 1){ datum.mjesec += 12; datum.godina--; }
        else if(datum.mjesec &gt; 12){ datum.mjesec -= 12; datum.godina++; }
    }
    if(datum.dan &lt; 1){
        for(;;){
            if(datum.mjesec == 1){ datum.mjesec = 13; datum.godina--;}
            if(datum.dan &gt;= 1 &amp;&amp; datum.dan &lt;= brojdana[datum.mjesec-1]) break;
            datum.dan += brojdana[datum.mjesec - 2];
            datum.mjesec--;
            if(datum.mjesec &lt;= 1){
                datum.mjesec = 12; datum.godina--; 
                if((datum.godina % 4 == 0 &amp;&amp; datum.godina % 100 != 0) || datum.godina % 400 == 0)
                    brojdana[1] = 29;
                else brojdana[1] = 28;
            }
        }
    }
    else if(datum.dan &gt; brojdana[datum.mjesec - 1]){
        for(;;){
            if(datum.dan &gt;= 1 &amp;&amp; datum.dan &lt;= brojdana[datum.mjesec-1]) break;
            datum.dan -= brojdana[datum.mjesec - 1];
            datum.mjesec++;
            if(datum.mjesec &gt; 11){ 
                datum.mjesec = 1; datum.godina++; 
                if((datum.godina % 4 == 0 &amp;&amp; datum.godina % 100 != 0) || datum.godina % 400 == 0)
                    brojdana[1] = 29;
                else brojdana[1] = 28;
            }
        }
    }
    if(datum.godina &lt; 1800) throw std::domain_error("Nelegalan datum");
    return datum;
}

Datum &amp;operator ++(Datum &amp;prvo){
    prvo.Naprijed();
    return prvo.PostaviNormalizirano(prvo);
}

Datum &amp;operator ++(Datum &amp;prvo, int){
    prvo.Naprijed();
    return prvo.PostaviNormalizirano(prvo);
}

Datum &amp;operator --(Datum &amp;prvo){
    prvo.Nazad();
    return prvo.PostaviNormalizirano(prvo);
}

Datum &amp;operator --(Datum &amp;prvo, int){
    prvo.Nazad();
    return prvo.PostaviNormalizirano(prvo);
}

Datum operator +(const Datum&amp; prvo, const int&amp; zakoliko){
    Datum novi(prvo);
    novi.dan += zakoliko;
    return novi.PostaviNormalizirano(novi);
}

Datum operator -(const Datum&amp; prvo, const int&amp; zakoliko){
    Datum novi(prvo);
    novi.dan -= zakoliko;
    return novi.PostaviNormalizirano(novi);
}

Datum&amp; operator +=(Datum&amp; prvo, const int&amp; zakoliko){
    prvo.dan = prvo.dan + zakoliko;
    return prvo.PostaviNormalizirano(prvo);
}

Datum&amp; operator -=(Datum&amp; prvo, const int&amp; zakoliko){
    prvo.dan = prvo.dan - zakoliko;
    return prvo.PostaviNormalizirano(prvo);
}

Datum operator -(const Datum&amp; prvo, const Datum&amp; drugo){
    Datum novi(prvo);
    novi.dan -= drugo.dan; novi.godina -= drugo.godina; novi.mjesec -= drugo.mjesec;
    return novi.PostaviNormalizirano(novi);
}

<a name="2"></a><font color="#0000FF"><a href="match806-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

bool operator ==(const Datum&amp; prvo, const Datum&amp; drugo){
    return (prvo.dan == drugo.dan &amp;&amp; prvo.mjesec == drugo.mjesec &amp;&amp; prvo.godina == drugo.godina);
}

bool operator !=(const Datum&amp; prvo, const Datum&amp; drugo){
</font>    return (prvo.dan != drugo.dan || prvo.mjesec != drugo.mjesec || prvo.godina != drugo.godina);
}

bool operator &lt;(const Datum&amp; prvo, const Datum&amp; drugo){
    if(prvo.godina &lt; drugo.godina) return true;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec &lt; drugo.mjesec) return true;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec == drugo.mjesec &amp;&amp; prvo.dan &lt; drugo.dan) return true;
    return false;
}

bool operator &gt;(const Datum&amp; prvo, const Datum&amp; drugo){
    if(prvo.godina &lt; drugo.godina) return false;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec &lt; drugo.mjesec) return false;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec == drugo.mjesec &amp;&amp; prvo.dan &lt; drugo.dan) return false;
    return true;
}

bool operator &lt;=(const Datum&amp; prvo, const Datum&amp; drugo){
    if(prvo == drugo) return true;
    if(prvo.godina &lt; drugo.godina) return true;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec &lt; drugo.mjesec) return true;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec == drugo.mjesec &amp;&amp; prvo.dan &lt; drugo.dan) return true;
    return false;
}

bool operator &gt;=(const Datum&amp; prvo, const Datum&amp; drugo){
    if(prvo == drugo) return true;
    if(prvo.godina &lt; drugo.godina) return false;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec &lt; drugo.mjesec) return false;
    if(prvo.godina == drugo.godina &amp;&amp; prvo.mjesec == drugo.mjesec &amp;&amp; prvo.dan &lt; drugo.dan) return false;
    return true;
}

<a name="3"></a><font color="#00FFFF"><a href="match806-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Datum &amp;prvo){
    tok &lt;&lt; prvo.dan &lt;&lt; "." &lt;&lt; prvo.DajImeMjeseca() &lt;&lt; prvo.DajGodinu() &lt;&lt; ".(" &lt;&lt; prvo.DajImeDanaUSedmici() &lt;&lt; ")";
</font>    return tok;
}

std::istream &amp;operator &gt;&gt;(std::istream &amp;ulaz, Datum &amp;prvo){
    //std::cout &lt;&lt; prvo;
    std::string novi;
    std::string dan1, mjesec1, godina1;
    int brojac1(0), brojac2(0);
    ulaz &gt;&gt; novi;
    bool test1(false), test2(false);
    for(auto i : novi){
        if(brojac2 == 0) dan1.push_back(i);
        else if(brojac2 == 1) mjesec1.push_back(i);
        else if(brojac2 == 2) godina1.push_back(i);
        if(i &lt; '0' || i &gt; '9'){
            if(i != '/'){
                ulaz.setstate(std::ios_base::failbit);
                //std::cout &lt;&lt; "pozvana";
                break;
            }
            else if(test1 || test2){
                if(test2){ ulaz.setstate(std::ios_base::failbit); break; }
                if(test1) brojac2++;    
                //std::cout &lt;&lt; "pozvana" &lt;&lt; std::endl;
                test1 = false;
                test2 = true;
            }
        }
        else {if(!test1) brojac1++; test1 = true; test2 = false;}
        //if(brojac1 == 2 &amp;&amp; test1 == true) brojac2++;
    }
    if(brojac1 != 3 || brojac2 != 2) ulaz.setstate(std::ios_base::failbit);
    if(ulaz){
        //std::cout &lt;&lt; brojac1 &lt;&lt; " " &lt;&lt; brojac2;
        dan1.pop_back();
        mjesec1.pop_back();
        //std::cout &lt;&lt; dan1 &lt;&lt; " " &lt;&lt; mjesec1 &lt;&lt; " " &lt;&lt; godina1;
        Testiraj(std::stoi(dan1), std::stoi(mjesec1), std::stoi(godina1));
        prvo.Postavi(std::stoi(dan1), std::stoi(mjesec1), std::stoi(godina1));
    }
    return ulaz;
}

Datum::operator std::string(){
    std::string pomocna;
    pomocna += std::to_string((*this).dan);
    pomocna += "."; 
    pomocna += (*this).DajImeMjeseca();
    pomocna += std::to_string((*this).DajGodinu());
    pomocna += ".(";
    pomocna += (*this).DajImeDanaUSedmici();
    pomocna += ")";
    return pomocna;
}

Datum::operator int(){
    int brojdana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    int suma(0);
    for(int i = 1800; i &lt;= (*this).godina; i++)
        if(i &lt; (*this).godina) {
            for(int j = 0; j &lt; 12; j++){
                if((i % 4 == 0 &amp;&amp; i % 100 != 0) || i % 400 == 0)
                    brojdana[1] = 29;
                else brojdana[1] = 28;
                suma += brojdana[j];
            }
        }
        else for(int j = 0; j &lt; (*this).mjesec; j++){
            if((i % 4 == 0 &amp;&amp; i % 100 != 0) || i % 400 == 0)
                    brojdana[1] = 29;
                else brojdana[1] = 28;
                suma += brojdana[j];
        }
            
    if(((*this).godina % 4 == 0 &amp;&amp; (*this).godina % 100 != 0) || (*this).godina % 400 == 0)
        brojdana[1] = 29;
    else brojdana[1] = 28;
    suma += (*this).DajDan() - brojdana[(*this).mjesec-1];
    return suma;
}
    

int main ()
{
    //std::string mjeseci[]{ "Januar", "Februar", "Mart", "April", "Maj", "Juni", "Juli", "August", "Septembar", "Oktobar", "Novembar", "Decembar"};
    //auto novo = static_cast&lt;Mjeseci&gt;(7);
    //std::cout &lt;&lt; mjeseci[novo];
    
    Datum neki(1,1,1801), neki1(9,1,2018);
    //Datum novi;
    //std::cout &lt;&lt; neki;
    //std::cin &gt;&gt; neki;
    //std::cout &lt;&lt; neki;
    neki--;
    std::cout &lt;&lt; neki;
    
	return 0;
}
</pre>
</body>
</html>
