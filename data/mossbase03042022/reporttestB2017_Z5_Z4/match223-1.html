<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z4/student7834.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z4/student3739.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 4
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;

#include &lt;iomanip&gt;


const double pi=4*atan(1);


class FourierovRed {
    int n;
    double T;
    double** A=nullptr;
    double** B=nullptr;
  public:
  
    ~FourierovRed() {
        if (A!=nullptr) {
            for (int i=0; i&lt;n; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
        }
        if (B!=nullptr) {
            for (int i=0; i&lt;n; i++) { delete B[i]; B[i]=nullptr; }
            delete[] B; B=nullptr;
        }
    }  
  
    FourierovRed (double T, std::initializer_list&lt;double&gt; a, std::initializer_list&lt;double&gt; b) {
        int veci(0);
        if (a.size()&gt;=b.size()) veci=a.size();
        else veci=b.size()+1;
        n=veci;
        FourierovRed::T=T;
        
        try {
            A=new double*[n]{};
            B=new double*[n]{};
            
            auto it1(a.begin());
            auto it2(b.begin());
            
            for (int i=0; i&lt;n; i++) {
                
                if (it1!=a.end()) { A[i]=new double(*it1); it1++; }
                else A[i]=new double(0);
                
                if (i==0) { B[i]=new double(0); }
                else if (it2!=b.end()) { B[i]=new double(*it2); it2++; }
                else B[i]=new double(0);
            }
        }
        catch(...) {
            if (A!=nullptr) for (int i=0; i&lt;n; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
            if (B!=nullptr) for (int i=0; i&lt;n; i++) { delete B[i]; B[i]=nullptr; }
            delete[] B; B=nullptr;
        }
    }
    
    FourierovRed (int n, double T, double f1 (int), double f2(int)) {
        if (n&lt;=0) throw std::domain_error("Stepen mora biti pozitivan");
        FourierovRed::n=n+1; 
        FourierovRed::T=T;
        
        try {
            A=new double*[n+1]{};
            B=new double*[n+1]{};
            
            for (int i=0; i&lt;n+1; i++) {
                A[i]=new double(f1(i));
                if (i==0) B[i]=new double(0);
                else B[i]=new double(f2(i));
            }
        }
        catch(...) {
            if (A!=nullptr) for (int i=0; i&lt;=n; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
            if (B!=nullptr) for (int i=0; i&lt;=n; i++) { delete B[i]; B[i]=nullptr; }
            delete[] B; B=nullptr;
        }
        
    }
    
    FourierovRed (int n, double p, double q, double f(double), int M) {
        if (n&lt;=0) throw std::domain_error("Stepen mora biti pozitivan");
        if (M&lt;=0) throw std::domain_error("Broj podintervala mora biti pozitivan");
        if (!(p&lt;q)) throw std::range_error("Neispravan interval");
        
        FourierovRed::n=n+1;
        T=q-p;
        
        try {
            A=new double*[n+1]{};
            B=new double*[n+1]{};
            
            for (int i=0; i&lt;n+1; i++) {
                
                double suma1(0), suma2(0);
                
                for (int j=1; j&lt;=M-1; j++) {
<a name="4"></a><font color="#FF00FF"><a href="match223-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                    suma1+=f(p+j*T/M)*std::cos(2*i*pi*((p/T)+double(j)/M));
                    suma2+=f(p+j*T/M)*std::sin(2*i*pi*((p/T)+double(j)/M));
</font>                }
                A[i]=new double(((f(p)+f(q))/M)*std::cos(2*i*pi*p/T)+(2./M)*suma1);
                if (i==0) B[i]=new double(0);
                else B[i]=new double(((f(p)+f(q))/M)*std::sin(2*i*pi*p/T)+(2./M)*suma2);
            }
        }
        catch(...) {
            if (A!=nullptr) for (int i=0; i&lt;n+1; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
            if (B!=nullptr) for (int i=0; i&lt;n+1; i++) { delete B[i]; B[i]=nullptr; }
            delete[] B; B=nullptr;
        }
    }
    
    FourierovRed &amp;operator =(const FourierovRed &amp;red) { 
        if (&amp;red!=this) {
            if (A!=nullptr) for (int i=0; i&lt;n; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
            if (B!=nullptr) for (int i=0; i&lt;n; i++) { delete B[i]; B[i]=nullptr; }
            delete[] B; B=nullptr;
            
            n=red.n;
            T=red.T;
            
            try {
                A=new double*[n]{};
                B=new double*[n]{};
                
                for (int i=0; i&lt;n; i++) {
                    A[i]=new double(*(red.A[i]));
                    B[i]=new double(*(red.B[i]));
                }
            }
            catch(...) {
                if (A!=nullptr) for (int i=0; i&lt;n; i++) { delete A[i]; A[i]=nullptr; }
                delete[] A; A=nullptr;
                if (B!=nullptr) for (int i=0; i&lt;n; i++) { delete B[i]; B[i]=nullptr; }
                delete[] B; B=nullptr;
            }
            
        }
        return *this;
    }
  
    FourierovRed &amp;operator =(FourierovRed &amp;&amp;red) { 
        if (&amp;red!=this) {
            if (A!=nullptr) for (int i=0; i&lt;n; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
            if (B!=nullptr) for (int i=0; i&lt;n; i++) { delete B[i]; B[i]=nullptr; }
<a name="2"></a><font color="#0000FF"><a href="match223-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            delete[] B; B=nullptr;
            
            n=red.n;
            T=red.T;
            
            A=red.A;
            B=red.B;
            
            red.A=nullptr; red.B=nullptr;
</font>        }
        return *this;
    }
  
    FourierovRed(const FourierovRed &amp;red) {
        
        n=red.n;
        T=red.T;
        
        try {
            A=new double*[n]{};
            B=new double*[n]{};
            
            for (int i=0; i&lt;n; i++) {
                A[i]=new double(*(red.A[i]));
                B[i]=new double(*(red.B[i]));
            }
        }
        catch(...) {
            if (A!=nullptr) for (int i=0; i&lt;n; i++) { delete A[i]; A[i]=nullptr; }
            delete[] A; A=nullptr;
            if (B!=nullptr) for (int i=0; i&lt;n; i++) { delete B[i]; B[i]=nullptr; }
            delete[] B; B=nullptr;
        }
    }
    
<a name="3"></a><font color="#00FFFF"><a href="match223-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    FourierovRed(FourierovRed &amp;&amp;red) {
        n=red.n;
        T=red.T;
        
        A=red.A;
        B=red.B;
        
        red.A=nullptr; red.B=nullptr;
</font>    }
    
    
    double operator() (double x) const {
        double vrijednost(*A[0]/2);
<a name="0"></a><font color="#FF0000"><a href="match223-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        for (int i=1; i&lt;n; i++) {
            vrijednost+=((*A[i])*std::cos(2*i*pi*x/T)+(*B[i])*std::sin(2*i*pi*x/T));
</font>        }
<a name="5"></a><font color="#FF0000"><a href="match223-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        return vrijednost;
    }
    
    std::pair&lt;double, double&gt; operator[] (int k) const {
        if (k&lt;0 || k&gt;=n) throw std::range_error("Neispravan indeks");
</font><a name="1"></a><font color="#00FF00"><a href="match223-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        return std::make_pair(*A[k], *B[k]);
    }
    
    std::pair&lt;double &amp;, double &amp;&gt; operator[] (int k) {
        if (k&lt;0 || k&gt;=n) throw std::range_error("Neispravan indeks");
</font>        return std::make_pair(std::ref(*(A[k])), std::ref(*(B[k])));
    }
};


int main ()
{
   
	return 0;
}
</pre>
</body>
</html>
