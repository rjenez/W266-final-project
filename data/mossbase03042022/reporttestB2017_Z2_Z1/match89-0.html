<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student6029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student6029.cpp<p></p><pre>
/*B 2017/2018, Zadaća 2, Zadatak 1
	
	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!
	
	NAPOMENA: nece svi (javni) testovi sa zamgera biti 
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za 
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

<a name="1"></a><font color="#00FF00"><a href="match89-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_24.gif"/></a>

enum class Polje {
	Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina
};
typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;
enum class Smjerovi {
	GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo
};
enum class Status {
	NijeKraj, KrajPoraz, KrajPobjeda
};
enum class Komande {
	PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru
};
enum class KodoviGresaka {
	PogresnaKomanda, NedostajeParametar, NeispravanParametar, SuvisanParametar
};

Tabla KreirajIgru (int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine); //
std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y); //
void BlokirajPolje(Tabla &amp;polja, int x, int y); //
void DeblokirajPolje (Tabla &amp;polja, int x, int y); //
Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer); //
Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y); //
bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska); //
//void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer=Smjerovi::Gore, int p_x=0, int p_y=0);

Tabla KreirajIgru (int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine) {
	if(n&lt;=0) throw std::domain_error("Ilegalna veličina");
	for(int i=0;i&lt;n;i++) {
		if(mine[i].size()!=2) throw std::domain_error("Ilegalan format zadavanja mina");
	}
	Tabla t;
	for(int i=0;i&lt;n;i++){
		for(int j=0;j&lt;n;j++) {
			t[i][j]=Polje::Prazno;
		}
	}
	for(int i=0;i&lt;mine.size();i++) { //redovi po glavnom vektoru za mine
		for(int k=0;k&lt;n;k++){ //po tabli redovi
			for(int l=0;l&lt;n;l++) { //po tabli kolone
				if(i&gt;n || n&lt;2) throw std::overflow_error("Ilegalne pozicije mina");
				if(mine[i][0]==k &amp;&amp; mine[i][1]==l) {
					t[k][l]=Polje::Mina;
				}
			}
		}
	}
	return t;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y){
	if(x&gt;polja.size() || y&gt;polja.at(0).size()) throw std::domain_error("Polje (x,y) ne postoji");
	std::vector&lt;std::vector&lt;int&gt;&gt; mat; int br=0;
	mat.resize(3); mat[0].resize(3); mat[1].resize(3); mat[2].resize(3);
	for(int i=0;i&lt;polja.size();i++){
		 br=0;
		for(int j=0;j&lt;polja[i].size();j++) {
			for(int l=x-1; l&lt;=x+1;l++) {
				for(int k=y-1;k&lt;=y+1;k++) {
					if((i!=x &amp;&amp; y!=y) &amp;&amp; l&lt;=i &amp;&amp; k&lt;=j &amp;&amp; polja[l][k]==Polje::Mina) br++;
				}
			}
			mat[i][j]=br;
		}
	}
	return mat;
}

void BlokirajPolje(Tabla &amp;polja, int x, int y) {
	if(x&gt;polja.size() || y&gt;polja[x].size()) throw std::domain_error("Polje (x,y) ne postoji");
	if(polja[x][y]==Polje::Prazno) polja[x][y]=Polje::BlokiranoPrazno;
	else if(polja[x][y]==Polje::Posjeceno) polja[x][y]=Polje::BlokiranoPosjeceno;
</font><a name="3"></a><font color="#00FFFF"><a href="match89-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	else if(polja[x][y]==Polje::Mina) polja[x][y]=Polje::BlokiranoMina;
}

void DeblokirajPolje(Tabla &amp;polja, int x, int y) {
	if(x&gt;polja.size() || y&gt;polja[0].size()) throw std::domain_error("Polje (x,y) ne postoji");
	else if(polja[x][y]==Polje::BlokiranoPrazno) polja[x][y]=Polje::Prazno;
</font>	else if(polja[x][y]==Polje::BlokiranoPosjeceno) polja[x][y]=Polje::Posjeceno;
<a name="2"></a><font color="#0000FF"><a href="match89-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

	else if(polja[x][y]==Polje::BlokiranoMina) polja[x][y]=Polje::Mina;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer) {
	polja.at(x).at(y)=Polje::Posjeceno;
	if(smjer==Smjerovi::GoreLijevo) {
		x-=1;
		y-=1;
	}
	else if(smjer==Smjerovi::Gore) x-=1;
	else if(smjer==Smjerovi::GoreDesno) {
		x-=1;
		y+=1;
	}
	else if(smjer==Smjerovi::Lijevo) y-=1;
	else if(smjer==Smjerovi::Desno) y+=1;
	else if(smjer==Smjerovi::Dolje) x+=1;
	else if(smjer==Smjerovi::DoljeDesno) {
		x+=1;
		y+=1;
	}
	else if(smjer==Smjerovi::DoljeLijevo) {
		x+=1;
		y-=1;
	}
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y) {
	Status kraj;
	if(x&gt;polja.size() || y&gt;polja[x].size()) throw std::out_of_range("Izlazak van igrace table");
	if(polja[novi_x][novi_y]==Polje::BlokiranoPosjeceno || polja[novi_x][novi_y]==Polje::BlokiranoPrazno) throw std::logic_error("Blokirano polje");
	if(polja[novi_x][novi_y]==Polje::Mina){
		for(int i=0;i&lt;polja.size();i++)
			for(int j=0;j&lt;polja[i].size();j++)
				polja[i][j]=Polje::Prazno;
		return kraj=Status::KrajPoraz;
	}
	bool pobjeda(0);
	for(int i=0;i&lt;polja.size();i++) {
		for(int j=0;j&lt;polja[i].size();j++) {
			if(polja[i][j]==Polje::Posjeceno &amp;&amp; polja[i][j]!=Polje::Mina &amp;&amp; polja[i][j]!=Polje::Prazno)
				pobjeda=1;
			else if(polja[i][j]!=Polje::Posjeceno || polja[i][j]==Polje::Mina || polja[i][j]==Polje::Prazno) {
				pobjeda=0;
				break;
			}
		}
	}
	if(pobjeda) return kraj=Status::KrajPobjeda;
	return kraj=Status::NijeKraj;
}

void PrijaviGresku(KodoviGresaka kod) {
	if(kod==KodoviGresaka::PogresnaKomanda) std::cout&lt;&lt;"Nerazumljiva komanda!"&lt;&lt;std::endl;
	else if(kod==KodoviGresaka::NedostajeParametar) std::cout&lt;&lt;"Komanda trazi parametar koji nije naveden!"&lt;&lt;std::endl;
</font><a name="0"></a><font color="#FF0000"><a href="match89-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_51.gif"/></a>

	else if(kod==KodoviGresaka::NeispravanParametar) std::cout&lt;&lt;"Parametar komande nije ispravan!"&lt;&lt;std::endl;
	else if(kod==KodoviGresaka::SuvisanParametar) std::cout&lt;&lt;"Zadan je suvisan parametar nakon komande!"&lt;&lt;std::endl;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska) {
	char prvi(std::cin.get()),slj,drugi,treci,cetvrti,peti,sesti,sedmi;
	if(prvi=='P') {
		drugi=std::cin.get();
		if(drugi=='1' || drugi=='&gt;' || drugi=='O') {
				if (drugi=='1') {
					komanda=Komande::PomjeriJednoMjesto;
					treci=std::cin.get();
					if(treci==' ')
						while(treci==' ') std::cin.get();
					cetvrti=std::cin.get();
					if(cetvrti=='G') {
						peti=std::cin.get();
						sesti=std::cin.peek();
						if(peti==' ' ||peti=='\n') smjer=Smjerovi::Gore;
						else if(peti=='L' &amp;&amp; (sesti==' '|| sesti=='\n')) smjer=Smjerovi::GoreLijevo;
						else if(peti=='D' &amp;&amp; (sesti==' ' || sesti=='\n')) smjer=Smjerovi::GoreDesno;
						else greska=KodoviGresaka::SuvisanParametar;
					}
					if(cetvrti=='D'){
						peti=std::cin.get();
						char sedmi=std::cin.peek();
						if(peti==' ') smjer=Smjerovi::Desno;
						else if(peti=='o' &amp;&amp; sesti==' ') smjer=Smjerovi::Dolje;
						
						else if(peti=='o' &amp;&amp; sesti=='D' &amp;&amp; (sedmi==' ' || sedmi=='\n')) smjer=Smjerovi::DoljeDesno;
						else if(peti=='o' &amp;&amp; sesti=='L' &amp;&amp; (sedmi==' ' || sedmi=='\n')) smjer=Smjerovi::DoljeLijevo;
						else greska=KodoviGresaka::SuvisanParametar;
					}
					if(cetvrti=='L') {
						peti=std::cin.peek();
						if(peti==' ') smjer=Smjerovi::Lijevo;
						else greska=KodoviGresaka::SuvisanParametar;
					}
					else greska=KodoviGresaka::NedostajeParametar;
					komanda=Komande::PomjeriJednoMjesto;
				}
				else if(drugi=='&gt;') {
					treci=std::cin.get();
					if(treci==' ') {
						while(treci==' ') std::cin.get();
					cetvrti=std::cin.get();
					if(cetvrti&gt;='0' &amp;&amp; cetvrti&lt;='9') {
						x=cetvrti;
						char sl(std::cin.get());
						while(sl&gt;='0' &amp;&amp; sl&lt;='9') {
							x=sl;
							sl=std::cin.get();
							if(sl==' ') {
								while(sl==' ') {
									sl=std::cin.get();
									if(sl&gt;='0'&amp;&amp; sl&lt;='9') {
										y=sl;
										while(sl&gt;='0'&amp;&amp;sl&lt;='9') {
											y=sl;
											sl=std::cin.get();
										}
									}
									else greska=KodoviGresaka::PogresnaKomanda;
								}
							}
						}
					}
					else greska=KodoviGresaka::PogresnaKomanda;
					}
				komanda=Komande::PomjeriDalje;
				}
				else if(drugi=='O') {
					if(std::cin.peek()==' '|| std::cin.peek()=='\n') komanda=Komande::PrikaziOkolinu;
				}
				else greska=KodoviGresaka::PogresnaKomanda;
		}
		greska=KodoviGresaka::SuvisanParametar;
	}
	else if(prvi=='B' || prvi=='D') {
		slj=std::cin.get();
		if(slj==' ') {
			while(slj==' ') {
				slj=std::cin.get();
			}
			if(slj&gt;='0'&amp;&amp;slj&lt;='9') {
				x=slj;
				while(slj&gt;='0'&amp;&amp;slj&lt;='9') {
					x=slj;
				}
				if(slj==' '){
					while(slj==' ') {
						slj=std::cin.get();
					}
					if(slj&gt;='0' &amp;&amp; slj&lt;='9') {
						y=slj;
						while(slj&gt;='0' &amp;&amp; slj&lt;='9') {
							y=slj;
						}
					}
					else greska=KodoviGresaka::PogresnaKomanda;
				}
			}
			else greska=KodoviGresaka::PogresnaKomanda;
		}
		else greska=KodoviGresaka::SuvisanParametar;
	}
	else if(prvi=='Z'){
		slj=std::cin.peek();
		if(slj==' ' || slj=='\n') komanda=Komande::ZavrsiIgru;
		else greska=KodoviGresaka::SuvisanParametar;
	}
	else if(prvi=='K'){
		slj=std::cin.peek();
		if(slj==' '|| slj=='\n') komanda=Komande::KreirajIgru;
		else greska=KodoviGresaka::SuvisanParametar;
	}
	
	if(greska==KodoviGresaka::SuvisanParametar || greska==KodoviGresaka::NedostajeParametar|| greska==KodoviGresaka::NeispravanParametar)
		return false;
	return true;
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer=Smjerovi::Gore, int p_x=0, int p_y=0) {
	Status rez;
	bool pom_kraj(false);
	try{
	if(komanda==Komande::PomjeriJednoMjesto &amp;&amp; p_smjer==Smjerovi::Gore &amp;&amp; (p_x!=0 ||p_y!=0)) rez=Idi(polja,x,y,p_x,p_y);
	//else if(komanda==Komande::PomjeriJednoMjesto &amp;&amp; p_x==0 &amp;&amp; p_y==0)	rez=Idi(polja,x,y,p_smjer);
	if(rez==Status::KrajPobjeda) std::cout&lt;&lt;"Bravo obisli ste sva sigurna polja"&lt;&lt;std::endl;
	else if(rez==Status::KrajPoraz) {
		std::cout&lt;&lt;"Nagazili ste na minu"&lt;&lt;std::endl;
		pom_kraj=true;
	}
	else if(komanda==Komande::PrikaziOkolinu) {
		std::vector&lt;std::vector&lt;int&gt;&gt; mat(PrikaziOkolinu(polja,x,y));
		for(int i=0;i&lt;mat.size();i++) {
			for(int j=0;j&lt;mat[i].size();j++) {
				std::cout&lt;&lt;mat[i][j]&lt;&lt;" ";
			}
			std::cout&lt;&lt;std::endl;
		}
	}
	else if(komanda==Komande::Blokiraj) {
		BlokirajPolje(polja,x,y);
	}
	else if(komanda==Komande::Deblokiraj) {
		DeblokirajPolje(polja,x,y);
	}
	else if(komanda==Komande::ZavrsiIgru || pom_kraj==true) {
		for(int i=0;i&lt;polja.size();i++){
			for(int j=0;j&lt;polja[i].size();j++) {
				polja[i][j]=Polje::Prazno;
			}
		}
		throw std::runtime_error("Igra zavrsena");
	}
	else if(komanda==Komande::KreirajIgru) {
		int n;
		std::cout&lt;&lt;"Unesite broj polja: ";
		while(!(std::cin&gt;&gt;n)) {
			std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
			std::cin.clear();
			std::cin.ignore(1000,'\n');
		}
		std::cout&lt;&lt;"Unesite pozicije mina: ";
		char znak;
		bool g(0);
		while((znak=std::cin.get())!='.') {
			if(znak==' ') {
				while(znak==' ') znak=std::cin.get();
			}
			if(znak=='(') {
				if(znak=std::cin.get()==' ') {
					while((znak=std::cin.get())==' ') znak=std::cin.get();
					if(znak&gt;='0' &amp;&amp; znak&lt;='9') {
						x=znak;
						znak=std::cin.get();
						while(znak&gt;='0' &amp;&amp; znak&lt;='9') x=znak;
						if(znak==' ') 
							while(znak==' ') znak=std::cin.get();
						if(znak==',') {
							znak=std::cin.get();
							if(znak==' ') 
								while(znak==' ') znak=std::cin.get();
						if(znak&gt;='0' &amp;&amp; znak&lt;='9') {
								y=znak;
								znak=std::cin.get();
								while(znak&gt;='0'&amp;&amp; znak&lt;='9') {
									y=znak;
									znak=std::cin.get();
								}
								if(znak==' ') {
									while(znak==' ') znak=std::cin.get();
								}															
						}
						else g=true;
						}
						else g=true;
				}
				else g=true;
			}
			else g=true;
		}
		if(g) std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
		}
	}
	if(p_x!=x || p_y!=y) std::cout&lt;&lt;"Tekuća pozicija igrača je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
	}
	catch(std::exception izuzetak){
		std::cout&lt;&lt;izuzetak.what();
	}
}

int main ()
{
	try{
	std::cout&lt;&lt;"Unesite komandu: ";
	if(UnosKomande) IzvrsiKomandu;
	else PrijaviGresku;
	}
	catch(...) {
		std::cout&lt;&lt;"Dovidjenja!";
		return 0;
	}
	return 0;
</font>}</pre>
</body>
</html>
