<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student2959.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student4785.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 1

	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!

	NAPOMENA: nece svi (javni) testovi sa zamgera biti
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;complex&gt;
#include &lt;sstream&gt;

<a name="2"></a><font color="#0000FF"><a href="match98-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_19.gif"/></a>

enum class Polje
{
    Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina
};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

enum class Smjerovi
{
    GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo
};

enum class Status
{
    NijeKraj, KrajPoraz, KrajPobjeda
};

enum class KodoviGresaka
{
    PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar
};

enum class Komande
{
    PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru
};

template &lt;typename T&gt; std::string PretvoriUString(T x)
{
	std::ostringstream s;
	s&lt;&lt;x;
	return s.str();
}

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine)
{
	if(n&lt;=0) throw std::domain_error ("Ilegalna velicina");
	Tabla igraca_tabla(n,std::vector&lt;Polje&gt;(n,Polje::Prazno));
	for(auto &amp;red: mine) {
		if(red.size()!=2) throw std::domain_error ("Ilegalan format zadavanja mina");
		if(red.at(0)&lt;0 || red.at(0)&gt;=n || red.at(1)&lt;0 || red.at(1)&gt;=n) throw std::domain_error ("Ilegalne pozicije mina");
		igraca_tabla.at(red.at(0)).at(red.at(1))=Polje::Mina;
	}
	return igraca_tabla;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y)
{
	std::vector&lt;std::vector&lt;int&gt;&gt; okolina(3,std::vector&lt;int&gt;(3,0));
	int dimenzija(polja.size());
	if (x&lt;0 || x&gt;=dimenzija || y&lt;0 || y&gt;=dimenzija) throw std::domain_error("Polje ("+PretvoriUString(x)+","+PretvoriUString(y)+") ne postoji");
	for(int i=0; i&lt;3; i++) {
		for(int j=0; j&lt;3; j++) {
			int br_mina(0);
			int p=x-1+i;
			int r=y-1+j;
			for(int m=p-1; m&lt;p+2; m++) {
				if(m&lt;0 || m&gt;=dimenzija ) continue;
				for(int n=r-1; n&lt;r+2; n++) {
					if(n&lt;0 || n&gt;=dimenzija )continue;
					if(m==p &amp;&amp; n==r) continue;
					if(polja.at(m).at(n)==Polje::Mina)br_mina++;
				}
			}
			okolina.at(i).at(j)=br_mina;
		}
	}
	return okolina;
}

void BlokirajPolje(Tabla &amp;polja, int x, int y)
{
	int dimenzija(polja.size());
	if (x&lt;0 || x&gt;=dimenzija || y&lt;0 || y&gt;=dimenzija) throw std::domain_error("Polje ("+PretvoriUString(x)+","+PretvoriUString(y)+") ne postoji");
	if(polja.at(x).at(y)==Polje::Prazno) polja.at(x).at(y)=Polje::BlokiranoPrazno;
</font>	else if(polja.at(x).at(y)==Polje::Mina) polja.at(x).at(y)=Polje::BlokiranoMina;
<a name="5"></a><font color="#FF0000"><a href="match98-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	else if(polja.at(x).at(y)==Polje::Posjeceno) polja.at(x).at(y)=Polje::BlokiranoPosjeceno;
}

void DeblokirajPolje(Tabla &amp;polja, int x, int y)
{
	int dimenzija(polja.size());
	if (x&lt;0 || x&gt;=dimenzija || y&lt;0 || y&gt;=dimenzija) throw std::domain_error("Polje ("+PretvoriUString(x)+","+PretvoriUString(y)+") ne postoji");
	if(polja.at(x).at(y)==Polje::BlokiranoPrazno) polja.at(x).at(y)=Polje::Prazno;
</font><a name="1"></a><font color="#00FF00"><a href="match98-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_26.gif"/></a>

	else if(polja.at(x).at(y)==Polje::BlokiranoMina) polja.at(x).at(y)=Polje::Mina;
	else if(polja.at(x).at(y)==Polje::BlokiranoPosjeceno) polja.at(x).at(y)=Polje::Posjeceno;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer)
{
	int dimenzija(polja.size());
	int novi_x(x),novi_y(y);
	if(smjer==Smjerovi::Gore || smjer==Smjerovi::GoreDesno || smjer==Smjerovi::GoreLijevo) novi_x--;
	else if(smjer==Smjerovi::Dolje || smjer==Smjerovi::DoljeDesno || smjer==Smjerovi::DoljeLijevo) novi_x++;
	if(smjer==Smjerovi::Desno || smjer==Smjerovi::GoreDesno || smjer==Smjerovi::DoljeDesno) novi_y++;
	else if(smjer==Smjerovi::Lijevo || smjer==Smjerovi::GoreLijevo || smjer==Smjerovi::DoljeLijevo) novi_y--;

	if (novi_x&lt;0 || novi_x&gt;=dimenzija || novi_y&lt;0 || novi_y&gt;=dimenzija) throw std::out_of_range("Izlazak van igrace table");
	if (polja.at(novi_x).at(novi_y)==Polje::BlokiranoPosjeceno || polja.at(novi_x).at(novi_y)==Polje::BlokiranoMina || polja.at(novi_x).at(novi_y)==Polje::BlokiranoPrazno)
		throw std::logic_error("Blokirano polje");
	polja.at(x).at(y)=Polje::Posjeceno;
	x=novi_x;
	y=novi_y;
	if(polja.at(x).at(y)==Polje::Mina) {
		for(auto &amp;red:polja)
			for(auto &amp;j: red) j=Polje::Prazno;
		return Status::KrajPoraz;
	}
	bool kraj(true);
	for(int i=0; i&lt;dimenzija; i++) {
		for(int j=0; j&lt;dimenzija; j++) {
			if(i==x &amp;&amp; j==y) continue;
			if(polja.at(i).at(j)!=Polje::Mina &amp;&amp; polja.at(i).at(j)!=Polje::Posjeceno &amp;&amp; polja.at(i).at(j)!=Polje::BlokiranoMina) {
				kraj=false;
				break;
			}
		}
	}
	if(kraj) return Status::KrajPobjeda;
	return Status::NijeKraj;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y)
{
	int dimenzija(polja.size());
	if (novi_x&lt;0 || novi_x&gt;=dimenzija || novi_y&lt;0 || novi_y&gt;=dimenzija) throw std::out_of_range("Izlazak van igrace table");
	if (polja.at(novi_x).at(novi_y)==Polje::BlokiranoPosjeceno || polja.at(novi_x).at(novi_y)==Polje::BlokiranoMina || polja.at(novi_x).at(novi_y)==Polje::BlokiranoPrazno) 
		throw std::logic_error("Blokirano polje");
	polja.at(x).at(y)=Polje::Posjeceno;
	x=novi_x;
	y=novi_y;
	if(polja.at(x).at(y)==Polje::Mina) {
		for(auto &amp;red : polja)
			for(auto &amp;j : red) j=Polje::Prazno;
		return Status::KrajPoraz;
	}
	bool kraj(true);
	for(int i=0; i&lt;dimenzija; i++) {
		for(int j=0; j&lt;dimenzija; j++) {
			if(i==x &amp;&amp; j==y) continue;
			if(polja.at(i).at(j)!=Polje::Mina &amp;&amp; polja.at(i).at(j)!=Polje::Posjeceno &amp;&amp; polja.at(i).at(j)!=Polje::BlokiranoMina) {
				kraj=false;
				break;
			}
		}
	}
	if(kraj) return Status::KrajPobjeda;
	return Status::NijeKraj;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int&amp;y, KodoviGresaka &amp;greska)
{
	std::string prvi;
	std::cin&gt;&gt;prvi;
	if(prvi=="P1") {
		komanda=Komande::PomjeriJednoMjesto;
		while(std::cin.peek()==' ') std::cin.get();
		if(std::cin.peek()=='\n') {greska=KodoviGresaka::NedostajeParametar; return false; }
		else {
			std::string drugi;
			std::cin&gt;&gt;drugi;
			if(drugi=="GL") smjer=Smjerovi::GoreLijevo;
			else if(drugi=="GD") smjer=Smjerovi::GoreDesno;
			else if(drugi=="G") smjer=Smjerovi::Gore;
</font>			else if(drugi=="D") smjer=Smjerovi::Desno;
			else if(drugi=="DoD") smjer=Smjerovi::DoljeDesno;
			else if(drugi=="GL") smjer=Smjerovi::GoreLijevo;
			else if(drugi=="Do") smjer=Smjerovi::Dolje;
<a name="4"></a><font color="#FF00FF"><a href="match98-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

			else if(drugi=="DoL") smjer=Smjerovi::DoljeLijevo;
			else if(drugi=="L") smjer=Smjerovi::Lijevo;
			else {greska=KodoviGresaka::NeispravanParametar;std::cin.ignore(10000,'\n'); return false; }
			while(std::cin.peek()==' ') std::cin.get();
				if(std::cin.peek()!='\n') {
					greska=KodoviGresaka::SuvisanParametar;
					std::cin.ignore(10000,'\n');
					return false;
				}
		}
	} else if(prvi=="P&gt;") komanda=Komande::PomjeriDalje;
	else if(prvi=="B") komanda=Komande::Blokiraj;
	else if(prvi=="D") komanda=Komande::Deblokiraj;
</font>	else if(prvi=="PO") komanda=Komande::PrikaziOkolinu;
<a name="0"></a><font color="#FF0000"><a href="match98-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_35.gif"/></a>

	else if(prvi=="Z") komanda=Komande::ZavrsiIgru;
	else if(prvi=="K") komanda=Komande::KreirajIgru;
	else {
		greska=KodoviGresaka::PogresnaKomanda;
		std::cin.ignore(10000,'\n');
		return false;
	}

	if(prvi=="P&gt;" || prvi=="B" || prvi=="D") {
		while(std::cin.peek()==' ') std::cin.get();
		if(std::cin.peek()=='\n') {greska=KodoviGresaka::NedostajeParametar;return false; }
		else {
			std::cin&gt;&gt;x;
			if(!std::cin) {
				greska=KodoviGresaka::NeispravanParametar;
				std::cin.clear();
				std::cin.ignore(10000,'\n');
				return false;
			}
			while(std::cin.peek()==' ') std::cin.get();
			if(std::cin.peek()=='\n') {
				greska=KodoviGresaka::NedostajeParametar;
				std::cin.ignore(10000,'\n');
				return false;
			} else {
				std::cin&gt;&gt;y;
				if(!std::cin) {
					greska=KodoviGresaka::NeispravanParametar;
					std::cin.clear();
					std::cin.ignore(10000,'\n');
					return false;
				}
				while(std::cin.peek()==' ') std::cin.get();
				if(std::cin.peek()!='\n') {
					greska=KodoviGresaka::SuvisanParametar;
					std::cin.ignore(10000,'\n');
					return false;
				}
			}
		}
	}

	else if(prvi=="PO" || prvi=="Z" || prvi=="K") {
		while(std::cin.peek()==' ') std::cin.get();
		if(std::cin.peek()!='\n') {
			greska=KodoviGresaka::SuvisanParametar;
			std::cin.ignore(10000,'\n');
			return false;
		}
	}
	return true;
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer = Smjerovi::Gore, int p_x = 0, int p_y=0)
{
	try {
		Status s;
		if(komanda==Komande::PrikaziOkolinu) {
			auto matrica_okoline=PrikaziOkolinu(polja,x,y);
			for(auto &amp;red:matrica_okoline) {
				for(auto j: red) std::cout&lt;&lt;j&lt;&lt;" ";
				std::cout&lt;&lt;std::endl;
			}
		} else if(komanda==Komande::Blokiraj) BlokirajPolje(polja,p_x,p_y);
		else if(komanda==Komande::Deblokiraj) DeblokirajPolje(polja,p_x,p_y);
		else if(komanda==Komande::PomjeriJednoMjesto) s=Idi(polja,x,y,p_smjer);
		else if(komanda==Komande::PomjeriDalje) s=Idi(polja,x,y,p_x,p_y);
		else if(komanda==Komande::ZavrsiIgru) {
			for(auto &amp;red:polja)
				for(auto &amp;j: red) j=Polje::Prazno;
			throw std::runtime_error ("Igra zavrsena");
		} else if(komanda==Komande::KreirajIgru) {
			int n;
			for(;;) {
				std::cout&lt;&lt;"Unesite broj polja: ";
				std::cin&gt;&gt;n;
				if(!std::cin || n&lt;=0) {
					std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
					std::cin.clear();
					std::cin.ignore(10000,'\n');
				} else break;
			}
			std::vector&lt;std::vector&lt;int&gt;&gt; mine;
			std::cout&lt;&lt;"Unesite pozicije mina: ";
			bool kraj(false);
			mine.resize(0);
			char z;
			int a,b;
			for(;;) {
				for(;;) {
					bool neispravno(false);
					std::cin.ignore(10000,'\n');
					std::cin&gt;&gt;z;
					if(z=='.') {
						kraj=true;
						break;
					} else if(z=='(') {
						std::cin&gt;&gt;a;
						if(!std::cin || a&lt;0 || a&gt;=n) neispravno=true;
						else {
							std::cin&gt;&gt;z;
							if(z!=',') neispravno=true;
							else {
								std::cin&gt;&gt;b;
								if(!std::cin || b&lt;0 || b&gt;=n) neispravno=true;
								else {
									std::cin&gt;&gt;z;
									if(z!=')') neispravno=true;
									else if(std::cin.peek()!=' ' &amp;&amp; std::cin.peek()!='\n') neispravno=true;
								}
							}
						}
					} else neispravno=true;
					if(a==0 &amp;&amp; b==0) neispravno=true;
					if(!neispravno) break;
					else {
						std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
						std::cin.clear();
					}
				}
				if(!kraj) {
					std::vector&lt;int&gt; d(0);
					d.push_back(a);
					d.push_back(b);
					mine.push_back(d);
				} else break;
			}
			polja=KreirajIgru(n,mine);
		}
		if(komanda==Komande::PomjeriJednoMjesto || komanda==Komande::PomjeriDalje) {
			std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
			if(s==Status::KrajPobjeda) std::cout&lt;&lt;"Bravo, obisli ste sva sigurna polja"&lt;&lt;std::endl;
			else if(s==Status::KrajPoraz) {
				std::cout&lt;&lt;"Nagazili ste na minu"&lt;&lt;std::endl;
				for(auto &amp;red:polja)
					for(auto &amp;j: red) j=Polje::Prazno;
				throw std::runtime_error ("Igra zavrsena");
			}
		}
	} catch(std::exception &amp;izuzetak) {
		std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
	}
}
void PrijaviGresku(KodoviGresaka greska)
{
	if(greska==KodoviGresaka::PogresnaKomanda) std::cout&lt;&lt;"Nerazumljiva komanda!"&lt;&lt;std::endl;
	else if(greska==KodoviGresaka::NedostajeParametar) std::cout&lt;&lt;"Komanda trazi parametar koji nije naveden!"&lt;&lt;std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match98-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	else if(greska==KodoviGresaka::NeispravanParametar) std::cout&lt;&lt;"Parametar komande nije ispravan!"&lt;&lt;std::endl;
	else if(greska==KodoviGresaka::SuvisanParametar) std::cout&lt;&lt;"Zadan je suvisan parametar nakon komande!"&lt;&lt;std::endl;
}

int main ()
{
	Komande komanda;
	Smjerovi smjer;
	int x(0), y(0), novi_x(0), novi_y(0);
	KodoviGresaka greska;
	Tabla polja(0);
	for(;;) {
		std::cout&lt;&lt;"Unesite komandu: ";
		if(UnosKomande(komanda,smjer,novi_x,novi_y,greska)) {
			if(komanda==Komande::ZavrsiIgru) {
				std::cout&lt;&lt;"Dovidjenja!";
				break;
			} else IzvrsiKomandu(komanda,polja,x,y,smjer,novi_x,novi_y);
		} else PrijaviGresku(greska);
	}
	return 0;
</font>}</pre>
</body>
</html>
