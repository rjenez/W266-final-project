<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student1547.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student1547.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
enum class Polje {Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina};
enum class Smjerovi {GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo};
enum class Status {NijeKraj, KrajPoraz, KrajPobjeda};
enum class KodoviGresaka {PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar};
enum class Komande {PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru};
typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

<a name="1"></a><font color="#00FF00"><a href="match74-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_35.gif"/></a>

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine) 
{
	if(n&lt;=0) throw std::domain_error("Ilegalna veličina"); //č greška u tekstu zadatka
	for(auto v : mine)
	{
		if(v.size()!=2) throw std::domain_error("Ilegalan format zadavanja mina");
		else
		{
			if(v.at(0)&lt;0 || v.at(0)&gt;=n || v.at(1)&lt;0 || v.at(1)&gt;=n) throw std::domain_error("Ilegalne pozicije mina"); 
		}
	}
	
	Tabla polja(n,std::vector&lt;Polje&gt;(n));
	for(auto v : mine)
	{
		polja.at(v.at(0)).at(v.at(1))=Polje(2);
	}
	return polja;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y)
{
	if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;=polja.at(0).size()) 
	{
		throw std::domain_error("Polje ("+std::to_string(x)+","+std::to_string(y)+") ne postoji");	
	}
	
	std::vector&lt;std::vector&lt;int&gt;&gt; okolina(3,std::vector&lt;int&gt;(3));
	
	int broj1(0),broj2(0);
	for(int i=x-1;i&lt;=x+1;i++)
	{
		for(int j=y-1;j&lt;=y+1;j++)
		{
			int suma(0);
			for(int k=i-1;k&lt;=i+1;k++)
			{
				for(int l=j-1;l&lt;=j+1;l++)
				{
					try
					{
						if((k!=i || l!=j) &amp;&amp; polja.at(k).at(l)==Polje(2)) suma++;
					}
					catch(...){}
				}
			}
			if(broj2==3) broj2=0;
			okolina.at(broj1).at(broj2++)=suma;
		}
		broj1++;
	}
	return okolina;
}

void BlokirajPolje(Tabla &amp;polja, int x, int y)
{
	if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;=polja.at(0).size()) 
	{
		throw std::domain_error("Polje ("+std::to_string(x)+","+std::to_string(y)+") ne postoji");	
	}
	
	if((int)polja.at(x).at(y)&lt;3) polja.at(x).at(y)=Polje((int)polja.at(x).at(y)+3);
}

void DeblokirajPolje(Tabla &amp;polja, int x, int y)
{
	if(x&lt;0 || y&lt;0 || x&gt;=polja.size() || y&gt;=polja.at(0).size()) 
	{
		throw std::domain_error("Polje ("+std::to_string(x)+","+std::to_string(y)+") ne postoji");	
	}
	
	if((int)polja.at(x).at(y)&gt;=3) polja.at(x).at(y)=Polje((int)polja.at(x).at(y)-3);
}
bool Pobjeda(const Tabla &amp;polja, int a, int b)
{
	for(int i=0;i&lt;polja.size();i++)
	{
		for(int j=0;j&lt;polja.size();j++)
		{
			int x=int(polja.at(i).at(j));
			if((x==0 || x==3) &amp;&amp; (i!=a || j!=b)) return false;
		}
	}
	return true;
}
void Ocisti(Tabla &amp;polja)
{
	for(auto &amp;v : polja)
	{
		for(auto &amp;x : v)
			x=Polje(0);
	}
}
Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer)
{
	int dl(0),gd(0); //desno-lijevo, gore-dole
	bool error(false);
	if(smjer==Smjerovi(0)) { dl=-1,gd=-1; }
	else if(smjer==Smjerovi(1)) { gd=-1; }
	else if(smjer==Smjerovi(2)) { gd=-1; dl=1; }
	else if(smjer==Smjerovi(3)) { dl=1; }
	else if(smjer==Smjerovi(4)) { gd=1; dl=1; }
	else if(smjer==Smjerovi(5)) { gd=1; }
	else if(smjer==Smjerovi(6)) { gd=1; dl=-1; }
	else if(smjer==Smjerovi(7)) { dl=-1; }
	try
	{
		if(polja.at(x+gd).at(y+dl)==Polje(0) || polja.at(x+gd).at(y+dl)==Polje(1)) 
		{ 
			polja.at(x).at(y)=Polje(1); 
			x+=gd; y+=dl;
			if(Pobjeda(polja,x,y)) return Status(2);
			return Status(0);
		}
		else if(int(polja.at(x+gd).at(y+dl))&gt;=3) error=true;
		else if(polja.at(x+gd).at(y+dl)==Polje(2)) { x+=gd; y+=dl; Ocisti(polja); return Status(1); }
	}
	catch(std::logic_error izuzetak)
	{
		throw std::out_of_range("Izlazak van igrace table");
	}
	if(error) throw std::logic_error("Blokirano polje");
}
Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y)
{
	bool error(false);
	try
	{
		if(polja.at(novi_x).at(novi_y)==Polje(0) || polja.at(novi_x).at(novi_y)==Polje(1)) 
		{ 
			polja.at(x).at(y)=Polje(1); 
			x=novi_x; y=novi_y;
			if(Pobjeda(polja,x,y))  return Status(2);
			return Status(0);
		}
		else if(int(polja.at(novi_x).at(novi_y))&gt;=3) error=true;
		else if(polja.at(novi_x).at(novi_y)==Polje(2)) { x=novi_x; y=novi_y; Ocisti(polja);  return Status(1); }
	}
	catch(std::logic_error izuzetak)
	{
		throw std::out_of_range("Izlazak van igrace table");
	}
	if(error) throw std::logic_error("Blokirano polje");
}
void PrijaviGresku(KodoviGresaka greska)
{
	if(greska==KodoviGresaka::PogresnaKomanda) std::cout&lt;&lt;"Nerazumljiva komanda!"&lt;&lt;std::endl;
	else if(greska==KodoviGresaka::NedostajeParametar) std::cout&lt;&lt;"Komanda trazi parametar koji nije naveden!"&lt;&lt;std::endl;
</font><a name="2"></a><font color="#0000FF"><a href="match74-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_12.gif"/></a>

	else if(greska==KodoviGresaka::NeispravanParametar) std::cout&lt;&lt;"Parametar komande nije ispravan!"&lt;&lt;std::endl;
	else if(greska==KodoviGresaka::SuvisanParametar) std::cout&lt;&lt;"Zadan je suvisan parametar nakon komande!"&lt;&lt;std::endl;
}
bool UnosKoordinata(int &amp;x, int &amp;y, KodoviGresaka &amp;greska)
{
	int a,b;
	std::cin&gt;&gt;a;
	if(std::cin.peek()!=' ' &amp;&amp; std::cin.peek()!='\n') 
	{
		greska=KodoviGresaka::NeispravanParametar;
		std::cin.clear();
		std::cin.ignore(10000,'\n');
		return false;
	}
	while(std::cin.peek()==' ') std::cin.get();
	if(std::cin.peek()=='\n')
	{
		greska=KodoviGresaka::NedostajeParametar;
		std::cin.clear();
		std::cin.ignore(10000,'\n');
		return false;
	}
	std::cin&gt;&gt;b;
	if(std::cin.peek()!=' ' &amp;&amp; std::cin.peek()!='\n') 
	{
		greska=KodoviGresaka::NeispravanParametar;
		std::cin.clear();
		std::cin.ignore(10000,'\n');
		return false;
	}
	while(std::cin.peek()==' ') std::cin.get();
	if(std::cin.peek()!='\n')
	{
		greska=KodoviGresaka::SuvisanParametar;
		std::cin.clear();
		std::cin.ignore(10000,'\n');
		return false;
	}
	x=a;y=b;
	return true;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska)
{
	std::string unos;
	std::cin&gt;&gt;unos;
	while(std::cin.peek()==' ') std::cin.get();
	if(unos=="P1") 
	{
		if(std::cin.peek()=='\n') 
		{
			greska=KodoviGresaka::NedostajeParametar;
			std::cin.ignore(10000,'\n');
			return false;
		}
		std::string parametri;
		std::cin&gt;&gt;parametri;
		while(std::cin.peek()==' ') std::cin.get();
		if(std::cin.peek()=='\n') //Normala
		{
			if(parametri=="GL") smjer=Smjerovi::GoreLijevo;
			else if(parametri=="G") smjer=Smjerovi::Gore;
			else if(parametri=="GD") smjer=Smjerovi::GoreDesno;
</font>			else if(parametri=="D") smjer=Smjerovi::Desno;
			else if(parametri=="DoD") smjer=Smjerovi::DoljeDesno;
			else if(parametri=="Do") smjer=Smjerovi::Dolje;
<a name="0"></a><font color="#FF0000"><a href="match74-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_43.gif"/></a>

			else if(parametri=="DoL") smjer=Smjerovi::DoljeLijevo;
			else if(parametri=="L") smjer=Smjerovi::Lijevo;
			else 
			{
				greska=KodoviGresaka::NeispravanParametar;
				std::cin.ignore(10000,'\n');
				return false;
			}
			komanda=Komande::PomjeriJednoMjesto;
		}
		else //Viska parametri
		{
			greska=KodoviGresaka::SuvisanParametar;
			std::cin.ignore(10000,'\n');
			return false;
		}
	}
	else if(unos=="P&gt;")
	{
		if(std::cin.peek()=='\n') 
		{
			greska=KodoviGresaka::NedostajeParametar;
			std::cin.ignore(10000,'\n');
			return false;
		}
		int a,b;
		if(!UnosKoordinata(a,b,greska)) return false;
		x=a;
		y=b;
		komanda=Komande::PomjeriDalje;
	}
	else if(unos=="B")
	{
		if(std::cin.peek()=='\n') 
		{
			greska=KodoviGresaka::NedostajeParametar;
			std::cin.ignore(10000,'\n');
			return false;
		}
		int a,b;
		if(!UnosKoordinata(a,b,greska)) return false;
		x=a;
		y=b;
		komanda=Komande::Blokiraj;
	}
	else if(unos=="D")
	{
		if(std::cin.peek()=='\n') 
		{
			greska=KodoviGresaka::NedostajeParametar;
			std::cin.ignore(10000,'\n');
			return false;
		}
		int a,b;
		if(!UnosKoordinata(a,b,greska)) return false;
		x=a;
		y=b;
		komanda=Komande::Deblokiraj;
	}
	else if(unos=="K")
	{
		if(std::cin.peek()=='\n') //Normala
		{
			komanda=Komande::KreirajIgru;
			x=0;
			y=0;
			return true; 
		}
		else //Viska parametri
		{
			greska=KodoviGresaka::SuvisanParametar;
			std::cin.ignore(1000,'\n');
			return false;
		}
	}
	else if(unos=="PO")
	{
		if(std::cin.peek()=='\n') //Normala
		{
			komanda=Komande::PrikaziOkolinu;
			return true; 
		}
		else //Viska parametri
		{
			greska=KodoviGresaka::SuvisanParametar;
			std::cin.ignore(1000,'\n');
			return false;
		}
	}
	else if(unos=="Z")
	{
		if(std::cin.peek()=='\n') //Normala
		{
			komanda=Komande::ZavrsiIgru;
			return true; 
		}
		else //Viska parametri
		{
			greska=KodoviGresaka::SuvisanParametar;
			std::cin.ignore(1000,'\n');
			return false;
		}
	}
	else
	{
		greska=KodoviGresaka::PogresnaKomanda;
		std::cin.ignore(1000,'\n');
		return false;
	}
	std::cin.ignore(1000,'\n');
	return true;
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer = Smjerovi::Gore, int p_x = 0, int p_y = 0)
{
	if(komanda==Komande::ZavrsiIgru)
	{
		Ocisti(polja);
		throw std::runtime_error("Igra zavrsena");
	}
	else if(komanda==Komande::PrikaziOkolinu)
	{
		auto okolina=PrikaziOkolinu(polja,x,y);
		for(auto v : okolina)
		{
			for(auto x : v)
			{
				std::cout&lt;&lt;x&lt;&lt;" ";
			}
			std::cout&lt;&lt;std::endl;
		}
	}
	else if(komanda==Komande::Blokiraj)
	{
		BlokirajPolje(polja,p_x,p_y);
	}
	else if(komanda==Komande::Deblokiraj)
	{
		DeblokirajPolje(polja,p_x,p_y);
	}
	else if(komanda==Komande::PomjeriJednoMjesto)
	{
		Status stanje=Idi(polja,x,y,p_smjer);
		std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
		if(stanje==Status::KrajPoraz)
		{
			std::cout&lt;&lt;"Nagazili ste na minu"&lt;&lt;std::endl;
			
			throw std::runtime_error("Igra zavrsena");
		}
		else if(stanje==Status::KrajPobjeda)
		{
			std::cout&lt;&lt;"Bravo, obisli ste sva sigurna polja"&lt;&lt;std::endl;
			throw std::runtime_error("Igra zavrsena");
		}
	}
	else if(komanda==Komande::PomjeriDalje)
	{
		Status stanje=Idi(polja,x,y,p_x,p_y);
		std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
		if(stanje==Status::KrajPoraz)
		{
			std::cout&lt;&lt;"Nagazili ste na minu"&lt;&lt;std::endl;
			throw std::runtime_error("Igra zavrsena");
		}
		else if(stanje==Status::KrajPobjeda)
		{
			std::cout&lt;&lt;"Bravo, obisli ste sva sigurna polja"&lt;&lt;std::endl;
			throw std::runtime_error("Igra zavrsena");
		}
	}
	else if(komanda==Komande::KreirajIgru) 
	{
		int n;
		while(1)
		{
			std::cout&lt;&lt;"Unesite broj polja: ";
			std::cin&gt;&gt;n;
			if(std::cin.peek()=='\n' &amp;&amp; n&gt;0) break;
			else
			{
				std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
				std::cin.clear();
				std::cin.ignore(1000,'\n');
			}
		}
		std::vector&lt;std::vector&lt;int&gt;&gt; mine;
		std::cout&lt;&lt;"Unesite pozicije mina: "; //ako se unese mina na (0,0) sta treba uraditi jer u tekstu pise da ne moze bit na (0,0)
		int broj(0);
		while(1)
		{
			try
			{
				char c;
				int xm(0),ym(0);
				std::cin&gt;&gt;c;
				if(c=='.' &amp;&amp; std::cin.peek()=='\n') break;
				else if(c!='(') throw std::domain_error("");
				else
				{
					if(std::cin.peek()=='\n') throw std::domain_error("");
					std::cin&gt;&gt;xm;
					if(std::cin.peek()=='\n') throw std::domain_error("");
					if(!std::cin) { throw std::domain_error("");}
					while(std::cin.peek()==' ') std::cin.get();
					if(std::cin.peek()!=',') {throw std::domain_error("");}
					std::cin.get();
					if(std::cin.peek()=='\n') throw std::domain_error("");
					std::cin&gt;&gt;ym;
					if(std::cin.peek()=='\n') throw std::domain_error("");
					if(!std::cin) {throw std::domain_error("");}
					while(std::cin.peek()==' ') std::cin.get();
					if(std::cin.peek()!=')') {throw std::domain_error("");}
					std::cin.get();
					if(std::cin.peek()!='\n') throw std::domain_error("");
				}
				std::cin.ignore(10000,'\n');
				if(xm&lt;0 || xm&gt;=n || ym&lt;0 || ym&gt;=n) std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
				else if(xm==x &amp;&amp; ym==y) std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
				else
				{
					mine.push_back(std::vector&lt;int&gt;());
					mine.at(broj).push_back(xm);
					mine.at(broj).push_back(ym);
					broj++;
				}
			}
			catch(std::domain_error a)
			{
				
				std::cin.clear();
				std::cin.ignore(10000,'\n');
				std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
			}
		}
		polja=KreirajIgru(n,mine);
		if(Pobjeda(polja,x,y))
		{
			std::cout&lt;&lt;"Bravo, obisli ste sva sigurna polja"&lt;&lt;std::endl;
			throw std::runtime_error("Igra zavrsena");
		}
	}
}
int main ()
{  
	Tabla polja(0);
	int x=0,y=0;
	while(1)
	{
		try
		{
			int x_p,y_p;
			Komande komanda;
			Smjerovi smjer;
			KodoviGresaka greska;
			std::cout&lt;&lt;"Unesite komandu: ";
			bool unos=UnosKomande(komanda,smjer,x_p,y_p,greska);
			if(unos) IzvrsiKomandu(komanda,polja,x,y,smjer,x_p,y_p);
			else PrijaviGresku(greska);
		}
		catch(std::domain_error izuzetak)
		{
			std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
		}
		catch(std::range_error izuzetak)
		{
			std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
</font><a name="3"></a><font color="#00FFFF"><a href="match74-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

		}
		catch(std::logic_error izuzetak)
		{
			std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
		}
		catch(std::runtime_error izuzetak)
		{
			//std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
			break;
		}
	}
	std::cout&lt;&lt;"Dovidjenja!";
</font>	return 0;
}</pre>
</body>
</html>
