<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student3350.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student1415.cpp<p></p><pre>
/*B 2017/2018, Zadaća 2, Zadatak 1

	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!

	NAPOMENA: nece svi (javni) testovi sa zamgera biti
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

enum class Polje
{
    Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina
};

enum class Smjerovi
{
    GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo
};

enum class Status
{
    NijeKraj, KrajPoraz, KrajPobjeda
};

enum class KodoviGresaka
{
    PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar
};

enum class Komande
{
    PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru
};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

Tabla KreirajIgru (int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine)
{

<a name="1"></a><font color="#00FF00"><a href="match877-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

	if(n &lt;= 0) throw std::domain_error("Ilegalna veličina");											// Ispravnost matrica?

	for(int i = 0; i &lt; mine.size(); i++) {
		if(mine.at(i).size() != 2) throw std::domain_error("Ilegalan format zadavanja mina");

		if (mine.at(i).at(0) &gt;= n || mine.at(i).at(1) &gt;= n || mine.at(i).at(0) &lt; 0 || mine.at(i).at(1) &lt; 0)
</font>			throw std::domain_error("Ilegalne pozicije mina");
	}

	Tabla Ploca (n, std::vector&lt;Polje&gt; (n, Polje::Prazno));

	for(int i = 0; i &lt; Ploca.size(); i++) {
		for(int j = 0; j &lt; Ploca.at(i).size(); j++) {

			for(int k = 0; k &lt; mine.size(); k++) {
				if(i == mine.at(k).at(0) &amp;&amp; j == mine.at(k).at(1))
					Ploca.at(i).at(j) = Polje::Mina;
			}
		}
	}

	return Ploca;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu (const Tabla &amp;polja, int x, int y)
{

	if(x &gt;= polja.size() || y &gt;= polja.at(0).size() || x &lt; 0 || y &lt; 0) {
		std::string prvi(std::to_string(x)), drugi(std::to_string(y));
		throw std::domain_error("Polje ("  + prvi + ", " + drugi + ") ne postoji");
	}

	std::vector&lt;std::vector&lt;int&gt;&gt; Okolina (3, std::vector&lt;int&gt; (3));

	for (int i = x - 1; i &lt; x + 2 ; i++) {
		if(i &lt; 0 || i &gt;= polja.size())
			continue;

		for(int j = y - 1; j &lt; y + 2; j++) {

			if(j &lt; 0 || j &gt;= polja.at(i).size())
				continue;


			int BrojMina(0);

			for(int k = i - 1; k &lt; i + 2; k++) {
				if(k &lt; 0 || k &gt;= polja.size())

					continue;

				int l = j -1;
				for(; l &lt; j + 2; l++) {

					if(l &lt; 0 || l &gt;= polja.at(i).size())
						continue;

					if(i == k &amp;&amp; j == l)
						continue;


					if(polja.at(k).at(l) == Polje::Mina) BrojMina++;
				}

			}
			Okolina.at(i).at(j) = BrojMina;

		}
	}


	return Okolina;
}

void BlokirajPolje (Tabla &amp;polja, int x, int y)
{
	if(x &gt;= polja.size() || y &gt;= polja.size() || x &lt; 0 || y &lt; 0) {

		std::string prvi (std::to_string(x)), drugi (std::to_string(y));
		throw std::domain_error("Polje (" + prvi + ", " + drugi + ") ne postoji");
	}

	if(polja.at(x).at(y) == Polje::Prazno) polja.at(x).at(y) = Polje::BlokiranoPrazno;
	if(polja.at(x).at(y) == Polje::Posjeceno) polja.at(x).at(y) = Polje::BlokiranoPosjeceno;
	if(polja.at(x).at(y) == Polje::Mina) polja.at(x).at(y) = Polje::BlokiranoMina;
}

void DeblokirajPolje(Tabla &amp;polja, int x, int y)
{
	if(x &gt;= polja.size() || y &gt;= polja.size() || x &lt; 0 || y &lt; 0) {
		std::string prvi(std::to_string(x)), drugi(std::to_string(y));
		throw std::domain_error("Polje (" + prvi + ", " + drugi + ") ne postoji");
	}

	if(polja.at(x).at(y) == Polje::BlokiranoPosjeceno) polja.at(x).at(y) = Polje::Posjeceno;
	if(polja.at(x).at(y) == Polje::BlokiranoPrazno) polja.at(x).at(y) = Polje::Prazno;
	if(polja.at(x).at(y) == Polje::BlokiranoMina) polja.at(x).at(y) = Polje::Mina;

}

Status Idi (Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer)
{
	polja.at(x).at(y) = Polje::Posjeceno;

	if(smjer &gt;= Smjerovi::GoreLijevo &amp;&amp; smjer &lt;= Smjerovi::GoreDesno) x--;
	if(smjer &gt;= Smjerovi::DoljeDesno &amp;&amp; smjer &lt;= Smjerovi::DoljeLijevo) x++;
	if(smjer &gt;= Smjerovi::GoreDesno &amp;&amp; smjer &lt;= Smjerovi::DoljeDesno) y++;
<a name="0"></a><font color="#FF0000"><a href="match877-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

	if((smjer &gt;= Smjerovi::DoljeLijevo &amp;&amp; smjer &lt;= Smjerovi::Lijevo) || smjer == Smjerovi::GoreLijevo) y--;

	if(x &lt; 0 || x &gt;= polja.size() || y &lt; 0 || y &gt;= polja.size())
		throw std::out_of_range ("Izlazak van igrace table");

	if(polja.at(x).at(y) == Polje::BlokiranoPrazno || polja.at(x).at(y) == Polje::BlokiranoMina
	        || polja.at(x).at(y) == Polje::BlokiranoPosjeceno) throw std::logic_error("Blokirano polje");

	if(polja.at(x).at(y) == Polje::Mina) {
</font><a name="3"></a><font color="#00FFFF"><a href="match877-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

		for(int i = 0; i &lt; polja.size(); i++) {
			for(int j = 0; j &lt; polja.size(); j++)
				polja.at(i).at(j) = Polje::Prazno;
</font>		}
		return Status::KrajPoraz;
	}

	for(int i = 0; i &lt; polja.size(); i++)
		for(int j = 0; j &lt; polja.size(); j++)
			if(polja.at(i).at(j) == Polje::Prazno) return Status::NijeKraj;

	return Status::KrajPobjeda;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y)
{
	if (novi_x &lt; 0 || novi_x &gt;= polja.size() || novi_y &lt; 0 || novi_y &gt;= polja.size())
		throw std::out_of_range("Izlazak van igrace table");

	x = novi_x;
	y = novi_y;
	if(polja.at(x).at(y) &gt;= Polje::BlokiranoPrazno &amp;&amp; polja.at(x).at(y) &lt;= Polje::BlokiranoMina) throw std::logic_error("Blokirano polje");

	if(polja.at(x).at(y) == Polje::Mina) {
		for(int i = 0; i &lt; polja.size(); i++) {
			for(int j = 0; j &lt; polja.size(); j++)
				polja.at(i).at(j) = Polje::Prazno;
		}
		return Status::KrajPoraz;
	}

	for(int i = 0; i &lt; polja.size(); i++)
		for(int j = 0; j &lt; polja.size(); j++)
<a name="4"></a><font color="#FF00FF"><a href="match877-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

			if(polja.at(i).at(j) == Polje::Prazno) return Status::NijeKraj;

	return Status::KrajPobjeda;
}

void PrijaviGresku (KodoviGresaka vrsta)
{
	if(vrsta == KodoviGresaka::PogresnaKomanda) std::cout &lt;&lt; "Nerazumljiva komanda!" &lt;&lt; std::endl;
	else if (vrsta == KodoviGresaka::NedostajeParametar) std::cout &lt;&lt; "Komanda trazi parametar koji nije naveden!"&lt;&lt;std::endl;
</font>	else if (vrsta == KodoviGresaka::NeispravanParametar) std::cout &lt;&lt; "Parametar komande nije ispravan!"&lt;&lt; std::endl;
	else std::cout &lt;&lt; "Zadan je suvisan parametar nakon komande!"&lt;&lt; std::endl;
}

void ZavrsiIgru(Tabla &amp;polja)
{
	for(int i = 0; i &lt; polja.size(); i++) {
		for(int j = 0; j &lt; polja.at(i).size(); j++) {
			polja.at(i).at(j) = Polje::Prazno;
		}
	}
	throw std::runtime_error("Igra zavrsena");
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska)
{
	std::cout&lt;&lt; "Unesite komandu: ";
	std::string unos;
	std::getline(std::cin, unos);

	std::vector&lt;std::string&gt; DozvoljeneKomande {{"P1"}, {"P&gt;"}, {"B"}, {"D"}, {"PO"}, {"Z"}, {"K"}};
	std::vector&lt;std::string&gt; DozvoljeniSmjerovi {{"GL"}, {"G"}, {"GD"}, {"D"}, {"DoD"}, {"Do"}, {"DoL"}, {"L"}};

	for(int i = 0; i &lt; unos.size(); i++) {

		if(unos.at(i) == ' ') continue;

		for(int j = 0; j &lt; DozvoljeneKomande.size(); j++) {

			if(unos.at(i) == DozvoljeneKomande.at(j).at(0)) {

				for(int k = 0; i + k &lt; unos.size(); k++) {
					if(k &gt;= DozvoljeneKomande.at(j).size()) break;
					if(unos.at(k + i) != DozvoljeneKomande.at(j).at(k)) break;

					if(DozvoljeneKomande.at(j).size() - 1 == k &amp;&amp; unos.at(k + i) == DozvoljeneKomande.at(j).at(k) &amp;&amp;
					        (i == k || unos.at(i - k - 1 == ' ')) &amp;&amp; (i + k + 1 == unos.size() || unos.at(i + k + 1) == ' ')) {

						if(j &gt; 3) {

							if(i + k + 1 &gt;= unos.size()) {
								komanda = Komande(j);
								return true;
							}

							for(int p = i + k + 1; p &lt; unos.size(); p++)
								if(unos.at(p) != ' ') {
									greska = KodoviGresaka::SuvisanParametar;
									return false;
								}
							komanda = Komande(j);
							return true;

						}

						else if(j == 0) {

							if((i + k + 1) &gt;= unos.size()) {
								greska = KodoviGresaka::NedostajeParametar;
								return false;
							}

							for(int s = i + k + 1; s &lt; unos.size(); s++) {
								if(unos.at(s) == ' ') continue;

								for(int r = 0; r &lt; DozvoljeniSmjerovi.size(); r++) {

									if(unos.at(s) == DozvoljeniSmjerovi.at(r).at(0)) {

										for(int a = 0; a &lt; unos.size(); a++) {
											if(DozvoljeniSmjerovi.at(r).size() &lt;= a) break;
											if(unos.at(s + a) != DozvoljeniSmjerovi.at(r).at(a)) break;

											if(DozvoljeniSmjerovi.at(r).size() - 1 == a &amp;&amp; DozvoljeniSmjerovi.at(r).at(a) == unos.at(s + a) &amp;&amp;
											        (unos.at(s - 1) == ' ') &amp;&amp; (s + a == unos.size() - 1 || unos.at(s + a + 1) == ' ')) {
												if(s + a + 1 == unos.size()) {
													smjer = Smjerovi(r);
													komanda = Komande(j);
													return true;
												}

												for(int b = s + a + 1; b &lt; unos.size(); b++)
													if(unos.at(b) != ' ') {
														greska = KodoviGresaka::NeispravanParametar;
														return false;
													}

												smjer = Smjerovi(r);
												komanda = Komande(j);
												return true;
											}
										}
									}

								}
								if(unos.at(s)!= ' ') break;
							}

							greska = KodoviGresaka::NeispravanParametar;
							return false;
						}

						else {
							if(i + k + 1 &gt; unos.size()) {
								greska = KodoviGresaka::NedostajeParametar;
								return false;
							}

							std::string temp1, temp2;

							for(int c = i + k + 1; c &lt; unos.size(); c++) {
								if(unos.at(c) == ' ') continue;

								if(unos.at(c) &lt; '0' || unos.at(c) &gt; '9') {
									greska = KodoviGresaka::NeispravanParametar;
									return false;
								}

								if(temp1.size() == 0) {
									while(c &lt; unos.size() &amp;&amp; unos.at(c) &gt;= '0' &amp;&amp; unos.at(c) &lt;= '9') {
										temp1.push_back(unos.at(c));
										c++;
									}
								}
								if(unos.at(c) != ' ') {
									greska= KodoviGresaka::NeispravanParametar;
									return false;
								}
								while(unos.at(c) == ' ') {
									if(unos.at(c) != ' ' &amp;&amp; (unos.at(c) &lt; '0' || unos.at(c) &gt; '9')) {
										greska = KodoviGresaka::NeispravanParametar;
										return false;
									}
									c++;
								}

								if(c &gt;= unos.size() &amp;&amp; temp2.size() == 0) {
									greska = KodoviGresaka::NeispravanParametar;
									return false;
								}

								if(unos.at(c) == ' ') continue;

								if(temp2.size() == 0) {

									while(c &lt; unos.size() &amp;&amp; unos.at(c) &gt;= '0' &amp;&amp; unos.at(c) &lt;= '9') {
										temp2.push_back(unos.at(c));
										c++;
									}
								}


								if(temp1.size() != 0 &amp;&amp; temp2.size() != 0) {
									if (c == unos.size()) {
										x = std::stoi(temp1);
										y = std::stoi(temp2);
										komanda = Komande(j);
										return true;
									}

									for(int e = c; e &lt; unos.size(); e++) {
										if(unos.at(e) == ' ') continue;
										if(unos.at(e) != ' ') {
											greska = KodoviGresaka::NeispravanParametar;
											return false;
										}
									}
									x = std::stoi(temp1);
									y = std::stoi(temp2);
									komanda = Komande(j);
									return true;

								}

							}

						}

					}

				}

			}
		}

		greska = KodoviGresaka::PogresnaKomanda;
		return false;

	}
	return false;
}

bool TancnostUnosa (std::string trenutni, int &amp;x, int &amp;y)
{
	for(int i = 0; i &lt; trenutni.length(); i++) {
		if(trenutni.at(i) == ' ') continue;

		if(trenutni.at(i) == '(') {

			for(int j = i + 1; j &lt; trenutni.length(); j++) {

				if(trenutni.at(j) == ' ') continue;
				if(trenutni.at(j) &lt; '0' || trenutni.at(j) &gt; '9') return false;

				std::string temp1, temp2;
				while(j &lt; trenutni.length() &amp;&amp;  trenutni.at(j) &gt;= '0' &amp;&amp; trenutni.at(j) &lt;= '9') {
					temp1.push_back(trenutni.at(j));
					j++;
				}

				if(j &gt;= trenutni.size()) return false;
				while(j &lt; trenutni.length() &amp;&amp; trenutni.at(j) == ' ')
					j++;

				if(j &gt;= trenutni.length()) return false;
				if (trenutni.at(j) != ',') return false;
				j++;
				if(j &gt;= trenutni.length()) return false;

				while(j &lt; trenutni.length() &amp;&amp; trenutni.at(j) == ' ')j++;
				if(j &gt;= trenutni.length()) return false;

				if(trenutni.at(j) &lt;'0' || trenutni.at(j) &gt; '9') return false;

				while(j &lt; trenutni.length() &amp;&amp; trenutni.at(j) &gt;= '0' &amp;&amp; trenutni.at(j) &lt;= '9') {
					temp2.push_back(trenutni.at(j));
					j++;
				}
				if(j &gt;= trenutni.length()) return false;
				while( j &lt; trenutni.length() &amp;&amp; trenutni.at(j) == ' ' ) j++;

				if(j &gt;= trenutni.length()) return false;
				if(trenutni.at(j) != ')') return false;
				j++;
				if(j == trenutni.length()) {

					x = std::stoi(temp1);
					y = std::stoi(temp2);
					return true;
				}

				while(j &lt; trenutni.length()) {
					if(trenutni.at(j) != ' ') return false;
					j++;
				}
				x = std::stoi(temp1);
				y = std::stoi(temp2);

				return true;

			}
		}
		return false;
	}

	return false;
}

<a name="5"></a><font color="#FF0000"><a href="match877-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer = Smjerovi::Gore, int p_x = 0, int p_y = 0 )
{

	try {

		if(komanda == Komande(6)) {
</font>			int n;
			for(;;) {
				std::cout &lt;&lt; "Unesite broj polja: ";
				std::cin &gt;&gt; n;
				if(std::cin &amp;&amp; std::cin.peek() == '\n') break;
<a name="7"></a><font color="#0000FF"><a href="match877-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

				std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
				std::cin.clear();
				std::cin.ignore(10000, '\n');
			}

			std::cout &lt;&lt; "Unesite pozicije mina: ";
</font>
			std::string privremeni;
			std::getline(std::cin, privremeni);
			std::vector&lt;std::vector&lt;int&gt;&gt; Mine;

			for(;;) {

				std::getline(std::cin, privremeni);
				if(privremeni == ".") break;
				int mina_x , mina_y ;

				if(TancnostUnosa(privremeni, mina_x, mina_y)) {

					if(mina_x &gt;= n || mina_y &gt;= n || (mina_x == 0 &amp;&amp; mina_y == 0) ) {
						std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
						continue;
					}

					std::vector&lt;int&gt; TrenutnaPozicija {{mina_x}, {mina_y}};
					Mine.push_back(TrenutnaPozicija);
					continue;

				}


				std::cout &lt;&lt; "Greska, unesite ponovo!"&lt;&lt; std::endl;
			}
			polja = (KreirajIgru(n,Mine));
		}


		Status status;

		if(komanda == Komande(0)) {

<a name="2"></a><font color="#0000FF"><a href="match877-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

			status = (Idi(polja, x, y, p_smjer));
			std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt;")" &lt;&lt; std::endl;

			if(status == Status::KrajPoraz) {
				std::cout&lt;&lt; "Nagazili ste na minu"&lt;&lt; std::endl;
</font>				ZavrsiIgru(polja);
			}
			if(status == Status::KrajPobjeda) {
				std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
				ZavrsiIgru(polja);
			}

		} else if (komanda == Komande(1)) {

			status = (Idi(polja, x, y, p_x, p_y));

			if(status == Status::KrajPoraz) {
				std::cout&lt;&lt; "Nagazili ste na minu"&lt;&lt; std::endl;
				ZavrsiIgru(polja);
			}
			if(status == Status::KrajPobjeda) {
				std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
				ZavrsiIgru(polja);
			}
			std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt;")" &lt;&lt; std::endl;
		}

		else if(komanda == Komande(2)) BlokirajPolje(polja, p_x, p_y);

		else if(komanda == Komande(3)) DeblokirajPolje(polja, p_x, p_y);

		else if(komanda == Komande(4)) {

			auto matrica_mina (PrikaziOkolinu(polja, x, y));
			for(int i = 0; i &lt; matrica_mina.size(); i++) {
<a name="6"></a><font color="#00FF00"><a href="match877-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

				for (int j = 0; j &lt; matrica_mina.at(i).size(); j++) {
					std::cout &lt;&lt; matrica_mina.at(i).at(j) &lt;&lt; " ";
				}
				std::cout &lt;&lt; std::endl;
			}

		} else if(komanda == Komande(5)) ZavrsiIgru(polja);
</font>

	} catch(std::domain_error e) {
		std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
		throw;
	} catch (std::runtime_error e) {
		if(komanda == Komande(5)) throw;
		std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
		throw;
	} catch(std::logic_error e) {

		std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	}
}


int main ()
{
	Tabla igraca_ploca;
	Komande komanda;
	int x(0), y(0), p_x, p_y;
	Smjerovi smjer;
	KodoviGresaka greska;
	int brojac (0);

	try {
		for(;;) {
			if(UnosKomande(komanda, smjer, p_x, p_y, greska)) {
				if(brojac == 0 &amp;&amp; komanda != Komande::KreirajIgru) {
					std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
					continue;
				}

				IzvrsiKomandu(komanda, igraca_ploca, x, y, smjer, p_x, p_y);

			} else {
				PrijaviGresku(greska);
			}
			brojac++;
		}
	} catch(...) {
		std::cout &lt;&lt; "Dovidjenja!";
		return 0;
	}

	return 0;
}
</pre>
</body>
</html>
