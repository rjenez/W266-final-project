<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student8006.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student8006.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;	
#include &lt;string&gt;


enum class KodoviGresaka {
	PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar
};
enum class Komande {
	PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru
};
enum class Smjerovi {
	GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo
};
enum class Polje {
	Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina
};
enum class Status {
	NijeKraj, KrajPoraz, KrajPobjeda
};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

///////////////////////////////////////////////////////////////////////////////////////////////

std::string PorukaIzuzetka(int x, int y) {
	std::string poruka("Polje (");
	poruka += std::to_string(x) + "," + std::to_string(y) + ") ne postoji";
	return poruka;
}

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine) {
	if (n &lt;= 0) throw std::domain_error("Ilegalna velicina");
	Tabla t(n, std::vector&lt;Polje&gt;(n, Polje::Prazno));
	for (auto v : mine) {
		if (v.size() != 2) throw std::domain_error("Ilegalan format zadavanja mina");
		if (v[0] &lt; 0 || v[0] &gt;= n || v[1] &lt; 0 || v[1] &gt;= n) throw std::domain_error("Ilegalne pozicije mina");
		t[v[0]][v[1]] = Polje::Mina;
	}
	return t;
}

int OkolneMine(int x, int y, const Tabla &amp;t) {
	int suma = 0;
	for (int i = x - 1; i &lt;= x + 1; i++) {
		if (i &lt; 0 || i &gt;= t.size()) continue;
		for (int j = y - 1; j &lt;= y + 1; j++) {
			if (j &lt; 0 || j &gt;= t.size() ||(i == x &amp;&amp; j == y)) continue;
			if (t[i][j] == Polje::Mina) suma++;
		}
	}
	return suma;
}

<a name="7"></a><font color="#0000FF"><a href="match963-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;t, int x, int y) {
	if (x &lt; 0 || x &gt;= t.size() || y &lt; 0 || y &gt;= t.size()) throw std::domain_error(PorukaIzuzetka(x,y).c_str());	
</font>	std::vector&lt;std::vector&lt;int&gt;&gt; mine(3, std::vector&lt;int&gt;(3));
	for (int i = 0; i &lt; mine.size(); i++) 
		for (int j = 0; j &lt; mine.size(); j++) 
			mine[i][j] = OkolneMine(x+i-1, y+j-1, t);
	return mine;
}

void BlokirajPolje(Tabla &amp;t, int x, int y) {
	if (x &lt; 0 || x &gt;= t.size() || y &lt; 0 || y &gt;= t.size()) throw std::domain_error(PorukaIzuzetka(x,y).c_str());
	if (t[x][y] == Polje::Prazno) t[x][y] = Polje::BlokiranoPrazno;
	else if (t[x][y] == Polje::Mina) t[x][y] = Polje::BlokiranoMina;
	else if (t[x][y] == Polje::Posjeceno) t[x][y] = Polje::BlokiranoPosjeceno;
}

void DeblokirajPolje(Tabla &amp;t, int x, int y) {
	if (x &lt; 0 || x &gt;= t.size() || y &lt; 0 || y &gt;= t.size()) throw std::domain_error(PorukaIzuzetka(x,y).c_str());
	if (t[x][y] == Polje::BlokiranoPrazno) t[x][y] = Polje::Prazno;
	else if (t[x][y] == Polje::BlokiranoMina) t[x][y] = Polje::Mina;
	else if (t[x][y] == Polje::BlokiranoPosjeceno) t[x][y] = Polje::Posjeceno;
}

<a name="2"></a><font color="#0000FF"><a href="match963-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

bool DaLiJePobjeda(const Tabla &amp;t, int i, int j) {
	for (int m = 0; m &lt; t.size(); m++)  
		for (int n = 0; n &lt; t.size(); n++) {
</font>			if (m == i &amp;&amp; n == j) continue;
			if (t[m][n] == Polje::Prazno) return false;
		}
	return true;
}

void StaviPrazno(Tabla &amp;t) {
	for (auto &amp;x : t)
		for (auto &amp;y : x)
			y = Polje::Prazno;
}

Status Idi(Tabla &amp;t, int &amp;x, int &amp;y, Smjerovi smjer) {
	int br1(x), br2(y);
	if (smjer == Smjerovi::Gore || smjer == Smjerovi::GoreDesno || smjer == Smjerovi:: GoreLijevo) {
		if (x == 0) throw std::out_of_range("Izlazak van igrace table");
		br1--;	
	}
	if (smjer == Smjerovi::Lijevo || smjer == ::Smjerovi::GoreLijevo || smjer == Smjerovi::DoljeLijevo) {
		if (y == 0) throw std::out_of_range("Izlazak van igrace table");
		br2--;	
	}
	if (smjer == Smjerovi::Dolje || smjer == Smjerovi::DoljeDesno || smjer == Smjerovi::DoljeLijevo) {
		if (x == t.size()-1) throw std::out_of_range("Izlazak van igrace table");
		br1++;
	}
	if (smjer == Smjerovi::Desno || smjer == Smjerovi::GoreDesno || smjer == Smjerovi::DoljeDesno) {
		if (y == t.size()) throw std::out_of_range("Izlazak van igrace table");
		br2++;
	}
	if (t[br1][br2] == Polje::BlokiranoPosjeceno || t[br1][br2] == Polje::BlokiranoPrazno || t[br1][br2] == Polje::BlokiranoMina)
		throw std::logic_error("Blokirano polje");
	t[x][y] = Polje::Posjeceno;
	x = br1; y = br2;
	Status rezultat(Status::NijeKraj);
	if (t[x][y] == Polje::Mina){
		StaviPrazno(t);
		rezultat = Status::KrajPoraz;
	}
	else if (DaLiJePobjeda(t,x,y)) rezultat = Status::KrajPobjeda;
	return rezultat;		
}

Status Idi(Tabla &amp;t, int &amp;x, int &amp;y, int novi_x, int novi_y) {
	if (novi_x &lt; 0 || novi_x &gt;= t.size() || novi_y &lt; 0 || novi_y &gt;= t.size()) throw std::out_of_range("Izlazak van igrace table");
	if (t[novi_x][novi_y] == Polje::BlokiranoPosjeceno || t[novi_x][novi_y] == Polje::BlokiranoPrazno || t[novi_x][novi_y] == Polje::BlokiranoMina) throw std::logic_error("Blokirano polje");
	Status rezultat(Status::NijeKraj);
	t[x][y] = Polje::Posjeceno;
	x = novi_x; y = novi_y;
	if (t[x][y] == Polje::Mina) {
		StaviPrazno(t);
		rezultat = Status::KrajPoraz;
	}
	else if (DaLiJePobjeda(t,x,y)) rezultat = Status::KrajPobjeda;
	return rezultat;
}

<a name="8"></a><font color="#00FFFF"><a href="match963-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

void PrijaviGresku(KodoviGresaka greska) {
	if (greska == KodoviGresaka::PogresnaKomanda) std::cout &lt;&lt; "Nerazumljiva komanda!" &lt;&lt; std::endl; 
	else if (greska == KodoviGresaka::NedostajeParametar) std::cout &lt;&lt; "Komanda trazi parametar koji nije naveden!" &lt;&lt; std::endl;
</font>	else if (greska == KodoviGresaka::SuvisanParametar) std::cout &lt;&lt; "Zadan je suvisan parametar nakon komande!" &lt;&lt; std::endl;
	else std::cout &lt;&lt; "Parametar komande nije ispravan!" &lt;&lt; std::endl;
}

bool ProvjeriPraznine() {
	char s;
	while (std::cin.peek() == ' ') std::cin.get(s);
	//	std::cin.get(s);
	if (std::cin.peek() != '\n') return false;
	return true;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska) {	
	char s;
  	std::cin &gt;&gt; s;
 	if (s == 'P' &amp;&amp; std::cin.peek() == '1') {
<a name="5"></a><font color="#FF0000"><a href="match963-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

		std::cin &gt;&gt; s;
		if (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n') {
			greska = KodoviGresaka::PogresnaKomanda;
			std::cin.ignore(10000, '\n');
</font>			return false;
		}
 			if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) {
 				std::cin &gt;&gt; s;
	 			if (s == 'G') {
	 				if (std::cin.peek() == 'D' &amp;&amp; std::cin &gt;&gt; s) {
	 					if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
	 					else if (ProvjeriPraznine()) {
		 					smjer = Smjerovi::GoreDesno;
		 					komanda = Komande::PomjeriJednoMjesto;
		 					return true;
	 					}
	 				}
	 				else if (std::cin.peek() == 'L' &amp;&amp; std::cin &gt;&gt; s) {
	 					if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
	 					else if (ProvjeriPraznine()) {
		 					smjer = Smjerovi::GoreLijevo;
		 					komanda = Komande::PomjeriJednoMjesto;
		 					return true;
	 					}
	 				}
	 				else if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
	 				else if (ProvjeriPraznine()) {
	 					smjer = Smjerovi::Gore;
	 					komanda = Komande::PomjeriJednoMjesto;
	 					return true;
	 				}
	 			}
	 			else if (s == 'D') {
	 				if (std::cin.peek() == 'o') {
	 					std::cin &gt;&gt; s;
	 					if (std::cin.peek() == 'D') {
	 						std::cin &gt;&gt; s;
	 						if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
		 					else if (ProvjeriPraznine()) {
			 					smjer = Smjerovi::DoljeDesno;
			 					komanda = Komande::PomjeriJednoMjesto;
		 						return true;
		 					}
	 					}
	 					else if(std::cin.peek() == 'L') {
	 						std::cin &gt;&gt; s;
	 						if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
		 					else if (ProvjeriPraznine()) {
			 					smjer = Smjerovi::DoljeLijevo;
			 					komanda = Komande::PomjeriJednoMjesto;
		 					return true;
	 					}
	 					}
	 					else if (std::cin.peek() == ' ' || std::cin.peek() == '\n') {
	 						if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
	 						else {
			 					smjer = Smjerovi::Dolje;
			 					komanda = Komande::PomjeriJednoMjesto;
		 						return true;
		 					}
	 					}
	 				}
	 				else if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
	 				else if (ProvjeriPraznine()) {
	 					smjer = Smjerovi::Desno;
	 					komanda = Komande::PomjeriJednoMjesto;
	 					return true;
	 				}
	 			}
	 			else if (s == 'L') {
	 				if (std::cin.peek() == ' ' &amp;&amp; !ProvjeriPraznine()) {
	 						greska = KodoviGresaka::SuvisanParametar;
	 						return false;
	 				}
	 				else if (ProvjeriPraznine()) {
		 				smjer = Smjerovi::Lijevo;
		 				komanda = Komande::PomjeriJednoMjesto;
		 				return true;
	 				}
	 			}
	 			else {
	 				greska = KodoviGresaka::NeispravanParametar;
	 			}
 			}
 			else {
 				greska = KodoviGresaka::NedostajeParametar;
 			}
	}
	else if (s == 'P' &amp;&amp; std::cin.peek() == '&gt;') {
<a name="6"></a><font color="#00FF00"><a href="match963-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

		std::cin &gt;&gt; s;
		if (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n') {
			greska = KodoviGresaka::PogresnaKomanda;
			std::cin.ignore(10000, '\n');
</font>			return false;
		}
		if (ProvjeriPraznine()) 
			greska = KodoviGresaka::NedostajeParametar;
		else {
			int broj1, broj2;
			if (std::cin &gt;&gt; broj1 &amp;&amp; std::cin.peek() == ' ') {
				if (ProvjeriPraznine()) greska = KodoviGresaka::NedostajeParametar;
				else if (!(std::cin &gt;&gt; broj2)) greska = KodoviGresaka::NeispravanParametar;
				else {
					if (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n') greska = KodoviGresaka::NeispravanParametar;
					else if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
					else {
						x = broj1;
						y = broj2;
						komanda = Komande::PomjeriDalje;
						return true;
					} //unos brojeva
				}
			}
			else {
				greska = KodoviGresaka::NeispravanParametar;
			}//neispravan prvi parametar
		}
	}
	else if (s == 'B' &amp;&amp; (std::cin.peek() == ' ' || std::cin.peek() == '\n')) {
		int broj1, broj2;
		if (ProvjeriPraznine()) greska = KodoviGresaka::NedostajeParametar;
		else {
			if (!(std::cin &gt;&gt; broj1) || std::cin.peek() != ' ') greska = KodoviGresaka::NeispravanParametar;
			else {
				if (ProvjeriPraznine()) greska = KodoviGresaka::NedostajeParametar;
				else {
					if (!(std::cin &gt;&gt; broj2) || (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n')) greska = KodoviGresaka::NeispravanParametar;
					else {
						if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
						else {
							x = broj1;
							y = broj2;
							komanda = Komande::Blokiraj;
							return true;
						}
					}
				}
				
			}
		}
	}
	else if (s == 'D' &amp;&amp; (std::cin.peek() == ' ' || std::cin.peek() == '\n')) {
		int broj1, broj2;
		if (ProvjeriPraznine()) greska = KodoviGresaka::NedostajeParametar;
		else {
			if (!(std::cin &gt;&gt; broj1) || std::cin.peek() != ' ') greska = KodoviGresaka::NeispravanParametar;
			else {
				if (ProvjeriPraznine()) greska = KodoviGresaka::NedostajeParametar;
				else {
					if (!(std::cin &gt;&gt; broj2) || (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n')) greska = KodoviGresaka::NeispravanParametar;
					else {
						if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
						else {
							x = broj1;
							y = broj2;
							komanda = Komande::Deblokiraj;
							return true;
						}
					}
				}
				
			}
		}
	}
	else if (s == 'P' &amp;&amp; std::cin.peek() == 'O') {
		std::cin &gt;&gt; s;
		if (std::cin.peek() != ' ' &amp;&amp; std::cin.peek() != '\n') {
			greska = KodoviGresaka::PogresnaKomanda;
			std::cin.ignore(10000, '\n');
			return false;
		}
		if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
		else {
			komanda = Komande::PrikaziOkolinu;
			return true;
		}
	}
	else if (s == 'Z' &amp;&amp; (std::cin.peek() == ' ' || std::cin.peek() == '\n')) {
		if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
		else {
			komanda = Komande::ZavrsiIgru;
			return true;
		}
	}
	else if (s == 'K' &amp;&amp; (std::cin.peek() == ' ' || std::cin.peek() == '\n')) {
		if (!ProvjeriPraznine()) greska = KodoviGresaka::SuvisanParametar;
		else {
			komanda = Komande::KreirajIgru;
			return true;
		}
	}
	else greska = KodoviGresaka::PogresnaKomanda;
	std::cin.clear();
<a name="3"></a><font color="#00FFFF"><a href="match963-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

	std::cin.ignore(10000, '\n');
	return false;
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;t, int &amp;x, int &amp;y, Smjerovi smjer = Smjerovi::Gore, int novi_x = 0, int novi_y = 0) {
</font>	if (komanda == Komande::KreirajIgru) {
		int n(0);
		do {
			std::cout &lt;&lt; "Unesite broj polja: ";
			if (!(std::cin &gt;&gt; n) || n &lt;= 0) {
				std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
				std::cin.clear(); std::cin.ignore(1000, '\n');
			}
		} while(n &lt;= 0);
		std::cout &lt;&lt; "Unesite pozicije mina: ";
		std::vector&lt;std::vector&lt;int&gt;&gt; mine;
		char s('\n');
		while (s != '.') {
			int br1, br2;
			do {
				if (std::cin &gt;&gt; s &amp;&amp; (s == '.' || (s == '(' &amp;&amp; std::cin &gt;&gt; br1 &gt;&gt; s &amp;&amp; br1 &gt;=0 &amp;&amp; br1 &lt; n &amp;&amp; s == ',' &amp;&amp; std::cin &gt;&gt; br2 &amp;&amp; br2 &gt;=0 &amp;&amp; br2 &lt; n &amp;&amp; std::cin &gt;&gt; s &amp;&amp; s == ')')) &amp;&amp; ProvjeriPraznine()) break;
				std::cin.clear();
				std::cin.ignore(1000, '\n');
				std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
			} while (true);
			if (s == '.') break;
			mine.push_back({br1, br2});
		}
		t = KreirajIgru(n, mine);
		x = 0; y = 0;
	}
	else if (komanda == Komande::PrikaziOkolinu) {
		for (auto m : PrikaziOkolinu(t, x, y)) {
			for (auto n : m) std::cout &lt;&lt; n &lt;&lt; " ";
			std::cout &lt;&lt; std::endl;
		}
	}
	else if (komanda == Komande::ZavrsiIgru) {
		t = KreirajIgru(t.size(), {});
		throw std::runtime_error("Dovidjenja!");
	}
<a name="4"></a><font color="#FF00FF"><a href="match963-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

	else if (komanda == Komande::Blokiraj) {
		BlokirajPolje(t, novi_x, novi_y);
	}
	else if (komanda == Komande::Deblokiraj) {
		DeblokirajPolje(t, novi_x, novi_y);
	}
	else if (komanda == Komande::PomjeriJednoMjesto || komanda == Komande::PomjeriDalje) {
</font>		Status pozicija;
		if (komanda == Komande::PomjeriJednoMjesto) pozicija = Idi(t, x, y, smjer);
<a name="0"></a><font color="#FF0000"><a href="match963-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

		else pozicija = Idi(t, x, y, novi_x, novi_y);
		std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl;
		if (pozicija == Status::KrajPobjeda) {
			std::cout &lt;&lt; "Bravo, obrisali ste sva sigurna polja" &lt;&lt; std::endl;
			throw std::runtime_error("Igra zavrsena");
		}
		else if (pozicija == Status::KrajPoraz) {
			std::cout &lt;&lt; "Nagazili ste na minu" &lt;&lt; std::endl;
			throw std::runtime_error("Igra zavrsena");
</font>		}
	}
}

int main ()
{
	try {
		int x, y, novi_x, novi_y;
		Komande komanda;
		Tabla t;
		Smjerovi smjer;
		KodoviGresaka greska;
		while (true) {
			try {
				std::cout &lt;&lt; "Unesite komandu: ";
<a name="1"></a><font color="#00FF00"><a href="match963-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

				if (UnosKomande(komanda, smjer, novi_x, novi_y, greska)) IzvrsiKomandu(komanda, t, x, y, smjer, novi_x, novi_y);
				else PrijaviGresku(greska);
			}
			catch (std::domain_error izuzetak) {
				std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
			}
			catch (std::out_of_range izuzetak) {
				std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>			}
			catch (std::logic_error izuzetak) {
				std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
			}
		}
	}
	catch (std::runtime_error izuzetak) {
		std::cout &lt;&lt; izuzetak.what();
	}
//	std::cout &lt;&lt; "Dovidjenja!";
	return 0;
}</pre>
</body>
</html>
