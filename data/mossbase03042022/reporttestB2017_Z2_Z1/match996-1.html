<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student2896.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student8815.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 1
	
	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!
	
	NAPOMENA: nece svi (javni) testovi sa zamgera biti 
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za 
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

enum class Polje {Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina};
enum class Smjerovi {GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo};
enum class Status {NijeKraj, KrajPoraz, KrajPobjeda};
enum class KodoviGresaka {PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar};
enum class Komande {PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru};

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

Tabla KreirajIgru(int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine) {
	Tabla polja(n, std::vector&lt;Polje&gt; (n, Polje::Prazno));
	if(n&lt;=0) throw std::domain_error ("Ilegalna velicina");
	for(int i=0; i&lt;mine.size(); i++) if(mine[i].size()!=2) throw std::domain_error ("Ilegalan format zadavanja mina");
	for(int i=0; i&lt;mine.size(); i++) {
		if(mine[i][0]&gt;=n || mine[i][0]&lt;0  || mine[i][1]&gt;=n || mine[i][1]&lt;0)  throw std::domain_error ("Ilegalna pozicija mine");
		polja[mine[i][0]][mine[i][1]]=Polje::Mina;
	}
	return polja;
}

int BrojMina(const Tabla &amp;polje, int x, int y, int n) {
	int br(0);
	if(x-1&gt;=0) {
		if(y-1&gt;=0) if(polje[x-1][y-1]==Polje::Mina) br++;
		if(polje[x-1][y]==Polje::Mina) br++;
		if(y+1&lt;n) if(polje[x-1][y+1]==Polje::Mina) br++;
	}
	if(y-1&gt;=0) if(polje[x][y-1]==Polje::Mina) br++;
	if(y+1&lt;n) if(polje[x][y+1]==Polje::Mina) br++;
	if(x+1&lt;n) {
		if(y-1&gt;=0) if(polje[x+1][y-1]==Polje::Mina) br++;
		if(polje[x+1][y]==Polje::Mina) br++;
		if(y+1&lt;n) if(polje[x+1][y+1]==Polje::Mina) br++;
	}
	return br;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polja, int x, int y) {
	std::vector&lt;std::vector&lt;int&gt;&gt; okolina(3, std::vector&lt;int&gt; (3, 0));
	int xx(x+1), yy(y+1);
	int n=polja.size();
	int brx(2), bry;
	if(x&lt;0 || x&gt;=polja.size() || y&lt;0 || y&gt;=polja.size()) throw std::domain_error ("Polje (x,y) ne postoji");
	while(xx&gt;=0 &amp;&amp; brx&gt;=0) {
		bry=2;
		yy=y+1;
		while(yy&gt;=0 &amp;&amp; bry&gt;=0) {
			okolina[brx][bry]=BrojMina(polja, xx, yy--, n);
			bry--;
		}
		
		if(bry==0) okolina[brx][bry]=BrojMina(polja, xx, yy, n);
		xx--; brx--;
	}
	if(bry==0) okolina[brx][bry]=BrojMina(polja, xx, yy, n);
	return okolina;
}

void BlokirajPolje(Tabla &amp;polja, int x, int y) {
<a name="6"></a><font color="#00FF00"><a href="match996-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

	if(x&gt;polja.size()-1 || x&lt;0 || y&gt;polja.size()-1 || y&lt;0) throw std::domain_error("Polje (x,y) ne postoj");
	if(polja[x][y]==Polje::Prazno) polja[x][y]=Polje::BlokiranoPrazno;
	else if(polja[x][y]==Polje::Posjeceno) polja[x][y]=Polje::BlokiranoPosjeceno;
</font><a name="2"></a><font color="#0000FF"><a href="match996-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

	else if(polja[x][y]==Polje::Mina) polja[x][y]=Polje::BlokiranoMina;
}

void DeblokirajPolje(Tabla &amp;polja, int x, int y) {
	if(x&gt;polja.size()-1 || x&lt;0 || y&gt;polja.size()-1 || y&lt;0) throw std::domain_error("Polje (x,y) ne postoji");
</font><a name="7"></a><font color="#0000FF"><a href="match996-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

	if(polja[x][y]==Polje::BlokiranoPrazno) polja[x][y]=Polje::Prazno;
	else if(polja[x][y]==Polje::BlokiranoPosjeceno) polja[x][y]=Polje::Posjeceno;
</font><a name="1"></a><font color="#00FF00"><a href="match996-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

	else if(polja[x][y]==Polje::BlokiranoMina) polja[x][y]=Polje::Mina;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer) {
	int starox(x), staroy(y);
</font>	polja[x][y]=Polje::Posjeceno;
<a name="0"></a><font color="#FF0000"><a href="match996-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	if(smjer==Smjerovi::GoreLijevo) {x--; y--;}
	else if(smjer==Smjerovi::Gore) x--;
	else if(smjer==Smjerovi::GoreDesno) {x--; y++;}
	else if(smjer==Smjerovi::Desno) y++;
	else if(smjer==Smjerovi::DoljeDesno) {y++; x++;}
	else if(smjer==Smjerovi::Dolje) x++;
	else if(smjer==Smjerovi::DoljeLijevo) {x++; y--;}
	else if(smjer==Smjerovi::Lijevo) y--;
	if(x&lt;0 || y&lt;0 || x&gt;polja.size()-1 || y&gt;polja.size()-1) {
</font>		x=starox; y=staroy;
		throw std::out_of_range("Izlazak van igrace table");
	}
	if(polja[x][y]==Polje::Posjeceno) {
		x=starox; y=staroy;
		throw std::logic_error ("Blokirano polje");
	}
	if(polja[x][y]==Polje::Mina) {
		for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) polja[i][j]=Polje::Prazno;
		return Status::KrajPoraz;
	}
	polja[x][y]=Polje::Posjeceno;
	bool ima_praznih(false);
	for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) 
				if(polja[i][j]==Polje::Prazno) {
					ima_praznih=true;
					break;
				} 
	if(!ima_praznih){
		for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) polja[i][j]=Polje::Prazno; 
		return Status::KrajPobjeda;
	}	
	return Status::NijeKraj;
}

Status Idi(Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y) {
	int starox(x), staroy(y);
	polja[x][y]=Polje::Posjeceno;
	x=novi_x; 
	y=novi_y;
	if(x&lt;0 || y&lt;0 || x&gt;polja.size()-1 || y&gt;polja.size()-1) {
		x=starox; y=staroy;
		throw std::out_of_range("Izlazak van igrace table");
	}
	if(polja[x][y]==Polje::Posjeceno) {
		x=starox; y=staroy;
		throw std::logic_error ("Blokirano polje");
	}
	if(polja[x][y]==Polje::Mina) {
		for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) polja[i][j]=Polje::Prazno;
		return Status::KrajPoraz;
	}
	bool ima_praznih(false);
	polja[x][y]=Polje::Posjeceno;
	for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) 
				if(polja[i][j]==Polje::Prazno) {
					ima_praznih=true;
					break;
				} 
	if(!ima_praznih){
		for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) polja[i][j]=Polje::Prazno; 
		return Status::KrajPobjeda;
	}
	return Status::NijeKraj;
}

void PrijaviGresku(KodoviGresaka greska) {
	if(greska==KodoviGresaka::PogresnaKomanda) std::cout&lt;&lt;"Nerazumljiva komanda!"&lt;&lt;std::endl;
	else if(greska==KodoviGresaka::NedostajeParametar) std::cout&lt;&lt;"Komanda trazi parametar koji nije naveden"&lt;&lt;std::endl;
	if(greska==KodoviGresaka::NeispravanParametar) std::cout&lt;&lt;"Parametar koamnde nije ispravan!"&lt;&lt;std::endl;
	if(greska==KodoviGresaka::SuvisanParametar) std::cout&lt;&lt;"Zadan je suvisan parametar nakon komande!"&lt;&lt;std::endl;
}

bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjerovi, int &amp;x, int &amp;y, KodoviGresaka &amp;greska) {
		std::string s1, s2;
		int a(0), b(0);
		char c;
		std::cout&lt;&lt;"Unesite komandu: ";
		std::getline(std::cin, s1);
		for(int i=0; i&lt;s1.size(); i++) {
<a name="3"></a><font color="#00FFFF"><a href="match996-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

			if(s1[i]!=' ' &amp;&amp; s1[i]!='P' &amp;&amp; s1[i]!='B' &amp;&amp; s1[i]!='Z' &amp;&amp; s1[i]!='D' &amp;&amp; s1[i]!='K' &amp;&amp; (s1[i]&lt;'0' || s1[i]&gt;'9')) {
</font>					std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
					break;
				}
			if(s1[i]=='P') {
				break;
			}
			if(s1[i]=='D' || s1[i]=='B' || (s1[i]=='P' &amp;&amp; s1[i]=='&gt;')) {
				c=s1[i];
				while(i&lt;s1.size()) {
					if(s1[i]&lt;='9' &amp;&amp; s1[i]&gt;='0') {
						while(s1[i]&lt;='9' &amp;&amp; s1[i]&gt;='0') {
							a=a*10+s1[i]-'0';
							i++;
						}
					}
					if(s1[i]&lt;='9' &amp;&amp; s1[i]&gt;='0') {
						while(s1[i]&lt;='9' &amp;&amp; s1[i]&gt;='0') {
							b=b*10+s1[i]-'0';
							i++;
						}
					}
					i++;
				}
				break;
			}
		}
		if(c=='B') { 
			komanda=Komande::Blokiraj;
			x=a; y=b;
		}
		else if(c=='P') { 
			komanda=Komande::PomjeriDalje;
			x=a; y=b;
		}
		else if(c=='D') {
			komanda=Komande::Deblokiraj;
			x=a; y=b;
		}
		else if(c=='Z') komanda=Komande::ZavrsiIgru;
<a name="4"></a><font color="#FF00FF"><a href="match996-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

		else if(c=='K') komanda=Komande::KreirajIgru; 
		else {
			greska=KodoviGresaka::PogresnaKomanda;
			return false;
			}
	return true;
}

void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer = Smjerovi::Gore, int p_x=0, int p_y=0) {
</font>	Status st(Status::NijeKraj);
	if(komanda==Komande::PomjeriJednoMjesto) {
		st=Idi(polja, x, y, p_smjer);
		std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
	}
	else if(komanda==Komande::PomjeriDalje) {
		st=Idi(polja, x, y, p_x, p_y);
		std::cout&lt;&lt;"Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")"&lt;&lt;std::endl;
	}
	if(st==Status::KrajPoraz) {
		std::cout&lt;&lt;"Nagazili ste na minu"&lt;&lt;std::endl;
		throw std::runtime_error ("Igra zavrsena");
	}
	else if(st==Status::KrajPobjeda) {
		std::cout&lt;&lt;"Bravo, obisli ste sva sigurna polja"&lt;&lt;std::endl;
		throw std::runtime_error ("Igra zavrsena");
	}
<a name="5"></a><font color="#FF0000"><a href="match996-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

	if(komanda==Komande::Blokiraj) BlokirajPolje(polja, x, y);
	else if(komanda==Komande::Deblokiraj) DeblokirajPolje(polja, x, y);
	else if(komanda==Komande::PrikaziOkolinu) {
</font>		std::vector&lt;std::vector&lt;int&gt;&gt; v=PrikaziOkolinu(polja, x, y);
		for(std::vector&lt;int&gt; q : v) {
			for(int w : q) std::cout&lt;&lt;w&lt;&lt;" ";
		std::cout&lt;&lt;std::endl;
		}
	}
	else if(komanda==Komande::KreirajIgru) {
			int n;
			std::vector&lt;std::vector&lt;int&gt;&gt; pozicije_mina;
			std::cout&lt;&lt;"Unesite broj polja: ";
			while(!(std::cin&gt;&gt;n)) {
				std::cin.clear();
				std::cin.ignore(1000, '\n');
				std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl&lt;&lt;"Unesite broj polja: ";
			}
			std::cout&lt;&lt;"Unesite pozicije mina: ";
			for(;;) {
				int xx(0), yy(0);
				std::vector&lt;int&gt; mina(2);
				std::string s;
				std::getline(std::cin, s);
				if(s==".") break;
				for(int i=0; i&lt;s.size(); i++) {
					if(s[i]!=' ' &amp;&amp; s[i]!='(' &amp;&amp; s[i]!=')' &amp;&amp; s[i]!=',' &amp;&amp; (s[i]&lt;'0' || s[i]&gt;'9')) {
						std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
						break;
					}
					if(xx==0) while(s[i]&gt;='0' &amp;&amp; s[i]&lt;='9') {
							xx=xx*10+s[i]-'0';
							i++;
						}
					if(yy==0) while(s[i]&gt;='0' &amp;&amp; s[i]&lt;='9') {
							yy=yy*10+s[i]-'0';
							i++;
						}
					if(xx&gt;n-1 || yy&gt;n-1) {
						std::cout&lt;&lt;"Greska, unesite ponovo!"&lt;&lt;std::endl;
						break;	
					}
					mina[0]=xx;
					mina[1]=yy;
					pozicije_mina.push_back(mina);
				}
			}
	}
	else if(komanda==Komande::ZavrsiIgru) {
		for(int i=0; i&lt;polja.size(); i++)
			for(int j=0; j&lt;polja.size(); j++) polja[i][j]=Polje::Prazno;
		std::cout&lt;&lt;"Dovidjenja!"&lt;&lt;std::endl;
	}
}

int main ()
{
	int x(0), y(0);
	Tabla polja;
	Komande komanda;
	Smjerovi smjer;
	KodoviGresaka greska;
	for(;;) {
		if(UnosKomande(komanda, smjer, x, y, greska)) {
			if(komanda==Komande::PomjeriJednoMjesto) IzvrsiKomandu(komanda, polja, x, y, smjer);
			//else if(komanda==Komande::PomjeriDalje) IzvrsiKomandu(komanda, x, y, smjer);
			else if(komanda==Komande::Blokiraj) IzvrsiKomandu(komanda, polja, x, y);
			else if(komanda==Komande::Deblokiraj) IzvrsiKomandu(komanda, polja, x, y);
			else if(komanda==Komande::PrikaziOkolinu) IzvrsiKomandu(komanda, polja, x, y);
			else if(komanda==Komande::ZavrsiIgru){ 
				IzvrsiKomandu(komanda, polja, x, y);
				return 0;
			}
		}
		else PrijaviGresku(greska);
	}
	return 0;
}</pre>
</body>
</html>
