<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student5403.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student1476.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 1
	
	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!
	
	NAPOMENA: nece svi (javni) testovi sa zamgera biti 
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za 
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

enum class Polje {
	Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno ,BlokiranoMina 
};

enum class Smjerovi {
	GoreLijevo, Gore, GoreDesno,Desno ,DoljeDesno,Dolje,DoljeLijevo,Lijevo
};
enum class Status {
	NijeKraj,KrajPoraz,KrajPobjeda
};
enum class KodoviGresaka {
	PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar
} ;
enum class Komande{
	PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj,PrikaziOkolinu,ZavrsiIgru,KreirajIgru
};
typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla ;
Tabla KreirajIgru (int n, const std::vector&lt;std::vector&lt;int&gt;&gt;&amp;mine ){
	if(n&lt;=0) throw std::domain_error("Ilegalna velicina");
	Tabla t1(n,std::vector&lt;Polje&gt;(n,Polje::Prazno));
	for (int i = 0; i &lt; mine.size(); i++) {
		if(mine.at(i).size()!=2)
			throw std::domain_error("Ilegalan format zadavanja mina");
		int a[2]={ mine.at(i).at(0),mine.at(i).at(1)};
		if(a[1]&lt;0 or a[1]&gt;=n or a[0]&lt;0 or a[0]&gt;=n)
			throw std::domain_error("Ilegalne pozicije mina");
		t1.at(a[0]).at(a[1])=Polje::Mina;
	}
	return t1;
}
std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu(const Tabla &amp;polje,int x,int y){
	if(x&lt;0 or y&lt;0 or x&gt;=polje.size() or y&gt;=polje.size())
		throw std::domain_error("Polje ("+std::to_string(x)+","+std::to_string(y)+ ") ne postoji");
	int matrica [8][2]={{0,1},{1,0},{1,1},{-1,0},{0,-1},{-1,-1},{1,-1},{-1,1}};
	std::vector&lt;std::vector&lt;int &gt;&gt; okolina ;
	for (int  i = x-1; i &lt;x+2; i++) {
		std::vector&lt;int &gt; a;
		for (int j = y-1; j&lt;y+2; j++) {
			if(j&lt;0 or j&gt;=polje.size() or i&lt;0 or i&gt;=polje.size())
				continue;
			int broj(0);
			for (int k = 0; k &lt;8; k++) {
				int red(i),kol(j);
				red+=matrica[k][0];
				kol+=matrica[k][1];
				if(red&lt;0 or red&gt;=polje.size() or kol&lt;0 or kol&gt;=polje.size())
					continue;
				if(polje.at(red).at(kol)==Polje::Mina)
					broj++;
			}
			a.push_back(broj);
		}
		if(a.size()&gt;0)
		okolina.push_back(a);
	}
	return okolina;
}
void BlokirajPolje(Tabla &amp;polje,int x,int y){
	if(x&lt;0 or y&lt;0 or x&gt;=polje.size() or y&gt;=polje.size())
		throw std::domain_error("Polje ("+std::to_string(x)+","+std::to_string(y)+ ") ne postoji");
	int a=int(polje.at(x).at(y));
	if(a&lt;3)
		a+=3;
	polje.at(x).at(y)=Polje(a);
}
void DeblokirajPolje(Tabla &amp;polje,int x,int y){
	if(x&lt;0 or y&lt;0 or x&gt;=polje.size() or y&gt;=polje.size())
		throw std::domain_error("Polje ("+std::to_string(x)+","+std::to_string(y) +") ne postoji");
	int a=int(polje.at(x).at(y));
	if(a&gt;=3)
		a-=3;
	polje.at(x).at(y)=Polje(a);
}
Status Idi(Tabla &amp;polje, int &amp;x , int &amp;y, Smjerovi smjer){
	int pravci[8][2]= {{-1,-1},{-1,0},{-1,1},{0,1},{1,1},{1,0},{1,-1},{0,-1}};
	int a(x+pravci[int(smjer)][0]),b(y+pravci[int(smjer)][1]);
	
	if(a&lt;0 or b&lt;0 or a&gt;=polje.size() or b&gt;=polje.size())
		throw std::out_of_range("Izlazak van igrace table");
	Polje s=polje.at(a).at(b);
	if(s==Polje::Mina){
		polje=Tabla(polje.size(),std::vector&lt;Polje&gt;(polje.size(),Polje::Prazno));
		return Status::KrajPoraz;
	}
	if(s==Polje::BlokiranoPosjeceno or s==Polje::BlokiranoPrazno or s== Polje::BlokiranoMina)
		throw std::logic_error("Blokirano polje");
	polje.at(x).at(y)=Polje::Posjeceno;
	x=a;
	y=b;
	bool pobjeda=true;
	for (int i = 0; i &lt; polje.size(); i++) {
		for (int j = 0; j &lt; polje.size(); j++) {
			if(polje.at(i).at(j)==Polje::Prazno or polje.at(i).at(j)==Polje::BlokiranoPrazno ){
				pobjeda=false;
				break;
			}
		}
	}
	if(pobjeda) return Status::KrajPobjeda;
	else return Status::NijeKraj;
}
Status Idi(Tabla &amp;polje, int &amp;x , int &amp;y, int novi_x,int novi_y){


	if(novi_x&lt;0 or novi_y&lt;0 or novi_x&gt;=polje.size() or novi_y&gt;=polje.size())
		throw std::out_of_range("Izlazak van igrace table");
	Polje s=polje.at(novi_x).at(novi_y);
	if(s==Polje::Mina){
		polje=Tabla(polje.size(),std::vector&lt;Polje&gt;(polje.size(),Polje::Prazno));
		return Status::KrajPoraz;
	}
	if(s==Polje::BlokiranoPosjeceno or s==Polje::BlokiranoPrazno or s==Polje::BlokiranoMina)
		throw std::logic_error("Blokirano polje");
	polje.at(x).at(y)=Polje::Posjeceno;
	x=novi_x;
	y=novi_y;
	bool pobjeda=true;
	for (int i = 0; i &lt; polje.size(); i++) {
		for (int j = 0; j &lt; polje.size(); j++) {
			if(polje.at(i).at(j)==Polje::Prazno or polje.at(i).at(j)==Polje::BlokiranoPrazno ){
				pobjeda=false;
				break;
			}
		}
	}
	if(pobjeda) return Status::KrajPobjeda;
	else return Status::NijeKraj;
}
void PrijaviGresku(KodoviGresaka kod){
	std::vector&lt;std::string&gt; poruke{"Nerazumljiva komanda!","Komanda trazi parametar koji nije naveden!","Zadan je suvisan parametar nakon komande!","Parametar komande nije ispravan!"};
<a name="7"></a><font color="#0000FF"><a href="match811-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

	std::cout &lt;&lt; poruke.at(int(kod)) &lt;&lt; std::endl;
}
bool UnosKomande(Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska){
	std::vector&lt;std::string&gt; Lista_komandi{"P1","P&gt;","B","D","PO","Z","K"} ;
</font>	std::string s;
	
	std::getline(std::cin,s);
	int komanda_br=-1;
	for (int i = 0; i &lt; 7; i++) {
		if(0==s.find(Lista_komandi.at(i)))
			komanda_br=i;	
	}		
	if(komanda_br==-1){
		greska=KodoviGresaka::PogresnaKomanda;
		return false;
	}
	for (int i = 0; i &lt; Lista_komandi.at(komanda_br).size(); i++) {
		s.erase(s.begin());
	}if(s.size()&gt;0)
	while (s.at(0)==' ') {
		s.erase(s.begin());
	}
	int br_smjer=-1;
	int duzina_komande=0;
	if(komanda_br==0){
		std::vector&lt;std::string&gt; lista_smjerovi={"GL","G","GD","D","DoD","Do","DoL","L"};
		for (int i = 0; i &lt; 8; i++) {
			if(0==s.find(lista_smjerovi.at(i)) &amp;&amp; lista_smjerovi.at(i).size()&gt;duzina_komande){
			br_smjer=i;
			duzina_komande=lista_smjerovi.at(i).size();
			}
		}
		if(br_smjer==-1){
			if(s.size()==0){
				greska=KodoviGresaka::NedostajeParametar;
				return false;
			}else{
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
		}
		if(s.size()&gt;lista_smjerovi.at(br_smjer).size() &amp;&amp; s.at(lista_smjerovi.at(br_smjer).size())!=' '){
			greska=KodoviGresaka::NeispravanParametar;
			return false;
		}
			for (int i = lista_smjerovi.at(br_smjer).size()+1; i &lt; s.size(); i++) {
				if(s.at(i)!=' '){
					greska=KodoviGresaka::SuvisanParametar;
					return false;
				}
			}
			komanda=Komande(komanda_br);
			smjer=Smjerovi(br_smjer);
	}else if(komanda_br==1 or komanda_br==2 or komanda_br==3){
		int a(0),b(0);
		if(s.size()==0){
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}
		std::string::iterator p(s.begin()),k(s.end());
		if(*p&lt;'0' or *p&gt;'9'){
			greska=KodoviGresaka::NeispravanParametar;
			return false;
		}
		while (*p&gt;='0'&amp;&amp; *p&lt;='9' &amp;&amp;p&lt;k) {
			a=a*10+*p-'0';
			p++;
		}
		if(p==k){
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}else if(*p!=' '){
			greska=KodoviGresaka::NeispravanParametar;
			return false;
		}
		while ((*p &lt; '0' or *p &gt; '9')&amp;&amp; p&lt;k ) {
			if(*p!=' '){
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
			p++;
		}
		if(p==k){
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}
		while (*p&gt;='0'&amp;&amp; *p&lt;='9' &amp;&amp;p&lt;k) {
			b=b*10+*p-'0';
			p++;
		}
		if(k&gt;p &amp;&amp;*p!=' ' ){
			greska=KodoviGresaka::NeispravanParametar;
			return false;
		}else if(k&gt;p){
			while (p&lt;k) {
				if(*p++!= ' '){
					greska=KodoviGresaka::SuvisanParametar;
					return false;
				}
			}
		}
		x=a;
		y=b;
		komanda=Komande(komanda_br);
	}else{
		if(s.size()&gt;0){
			greska=KodoviGresaka::SuvisanParametar;
			return false;
		}
		komanda=Komande(komanda_br);
	}
	return true;
}
<a name="3"></a><font color="#00FFFF"><a href="match811-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

void IzvrsiKomandu(Komande komanda, Tabla &amp;polje, int &amp;x, int&amp;y ,Smjerovi p_smjer=Smjerovi::Gore, int p_x=0, int p_y=0){
	if(komanda==Komande::PomjeriJednoMjesto){
		try{
		Status igra=Idi(polje,x,y,p_smjer);
</font>		std::vector&lt;std:: string&gt; tekst {"Nagazili ste na minu","Bravo, obisli ste sva sigurna polja"} ;
		if(int(igra)&gt;0){
			std::cout&lt;&lt;tekst.at(int(igra)-1)&lt;&lt;std::endl;
			polje=Tabla (polje.size(),std::vector&lt;Polje&gt;(polje.size(),Polje::Prazno));
			throw std::runtime_error("Igra zavrsena");
		}else
<a name="2"></a><font color="#0000FF"><a href="match811-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

		std::cout &lt;&lt; "Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")" &lt;&lt; std::endl;
		}catch(std::out_of_range izuzetak ){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>		}catch(std::logic_error izuzetak){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}
	}else if( komanda==Komande::PomjeriDalje){
		try{
		Status igra=Idi(polje,x,y,p_x,p_y);
		std::vector&lt;std:: string&gt; tekst {"Nagazili ste na minu","Bravo, obisli ste sva sigurna polja"} ;
		if(int(igra)&gt;0){
			std::cout&lt;&lt;tekst.at(int(igra)-1)&lt;&lt;std::endl;
			polje=Tabla (polje.size(),std::vector&lt;Polje&gt;(polje.size(),Polje::Prazno));
			throw std::runtime_error("Igra zavrsena");
		}
		else
<a name="1"></a><font color="#00FF00"><a href="match811-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

		std::cout &lt;&lt; "Tekuca pozicija igraca je ("&lt;&lt;x&lt;&lt;","&lt;&lt;y&lt;&lt;")" &lt;&lt; std::endl;
		}catch(std::out_of_range izuzetak ){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}catch(std::logic_error izuzetak){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}
	}else if(komanda==Komande::PrikaziOkolinu){
</font>		try{
			std::vector&lt;std::vector&lt;int&gt; &gt; okol=PrikaziOkolinu(polje,x,y) ;
			for (int i = 0; i &lt;okol.size() ; i++) {
<a name="4"></a><font color="#FF00FF"><a href="match811-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

				for (int j = 0; j &lt; okol.size(); j++) {
					std::cout &lt;&lt; okol.at(i).at(j) &lt;&lt; " ";
				}
				std::cout  &lt;&lt; std::endl;
			}
		}catch(std::domain_error izuzetak ){
</font><a name="0"></a><font color="#FF0000"><a href="match811-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}
	}
	else if(komanda==Komande::Blokiraj){
		try{
			BlokirajPolje(polje,p_x,p_y);
		}catch(std::domain_error izuzetak ){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}
	}else if(komanda==Komande::Deblokiraj){
		try{
			DeblokirajPolje(polje,p_x,p_y);
		}catch(std::domain_error izuzetak ){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}
	}
	else if(komanda==Komande::ZavrsiIgru){
</font>		polje=Tabla (polje.size(),std::vector&lt;Polje&gt;(polje.size(),Polje::Prazno));
		throw std::runtime_error("Igra zavrsena");
	}else{
		std::cout &lt;&lt; "Unesite broj polja: ";
		int n;
		while (!(std::cin &gt;&gt; n) or n&lt;=0) {
			std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
			std::cin.clear();
			std::cin.ignore(1000,'\n');
			std::cout &lt;&lt; "Unesite broj polja: ";
		}
		std::vector&lt;std::vector&lt;int&gt;&gt; minee ;
		std::cout &lt;&lt; "Unesite pozicije mina: ";
		while (1) {
			int m1,m2;
			char b[3];
			std::cin&gt;&gt;b[0];
			if(b[0]=='.'){
			std::cin.ignore(100,'\n');
			break;
			}
			std::cin&gt;&gt;std::ws&gt;&gt;m1&gt;&gt;b[1]&gt;&gt;std::ws&gt;&gt;m2&gt;&gt;b[2];
			if(!std::cin or b[0] != '(' or b[1] != ',' or b[2] != ')' or m1 &gt;= n or m2 &gt;= n or m1 &lt; 0 or m2 &lt; 0 or(m1==0 and m2==0) ){
				std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
				std::cin.clear();
				std::cin.ignore(1000,'\n');
				continue;
			}
			std::vector&lt;int&gt; v1 {m1,m2};
<a name="5"></a><font color="#FF0000"><a href="match811-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

			minee.push_back(v1);
		}
		x=0;
		y=0;
		try{
		polje=KreirajIgru(n,minee);
		}catch(std::domain_error izuzetak){
			std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
		}
	}
}
int main ()
</font>{
	Tabla polje;
	try{
		while (1) {
			int x,y,p_x,p_y;
			Komande komanda;
			Smjerovi smjer;
			KodoviGresaka greska;
<a name="6"></a><font color="#00FF00"><a href="match811-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

			std::cout &lt;&lt; "Unesite komandu: " ;
			if(UnosKomande(komanda,smjer,p_x,p_y,greska))
				IzvrsiKomandu(komanda,polje,x,y,smjer,p_x,p_y);
			else
				PrijaviGresku(greska);
</font>			
		}
	}
		catch(std::runtime_error izuzetak){
			std::cout &lt;&lt; "Dovidjenja!" &lt;&lt; std::endl;
		}
	return 0;
}</pre>
</body>
</html>
