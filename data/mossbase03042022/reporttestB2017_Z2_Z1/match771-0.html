<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student3350.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z2/Z1/student3350.cpp<p></p><pre>
/*B 2017/2018, ZadaÄ‡a 2, Zadatak 1
	
	NAPOMENA: ulaz/izlaz za zadatke je specificiran
	javnim autotestovima. Zalbe za ne analiziranje testova
	se ne uvazavaju!
	
	NAPOMENA: nece svi (javni) testovi sa zamgera biti 
	dostupni na c9.

	Za sva ostala pitanja i nedoumice vezane za 
	autotestove javiti se na forum (c2).
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;

<a name="0"></a><font color="#FF0000"><a href="match771-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

template &lt;typename T&gt; std::string PretvoriUString(T x) {
 std::ostringstream s; s &lt;&lt; x; return s.str();
}

enum class Polje { Prazno, Posjeceno, Mina, BlokiranoPrazno, BlokiranoPosjeceno, BlokiranoMina };
enum class Smjerovi { GoreLijevo, Gore, GoreDesno, Desno, DoljeDesno, Dolje, DoljeLijevo, Lijevo };
</font>enum class Status { NijeKraj, KrajPoraz, KrajPobjeda };
enum class KodoviGresaka { PogresnaKomanda, NedostajeParametar, SuvisanParametar, NeispravanParametar };
enum class Komande { PomjeriJednoMjesto, PomjeriDalje, Blokiraj, Deblokiraj, PrikaziOkolinu, ZavrsiIgru, KreirajIgru };

typedef std::vector&lt;std::vector&lt;Polje&gt;&gt; Tabla;

Tabla KreirajIgru (int n, const std::vector&lt;std::vector&lt;int&gt;&gt; &amp;mine) {
	Tabla polja;
	
	if (n&lt;=0) throw std::domain_error("Ilegalna velicina");
	
	for (int i=0; i&lt;mine.size(); i++) {
		if (mine.at(i).size()!=2) throw std::domain_error("Ilegalan format zadavanja mina");
		if (mine.at(i).at(0)&gt;=n || mine.at(i).at(0)&lt;0 || mine.at(i).at(1)&gt;=n || mine.at(i).at(1)&lt;0) throw std::domain_error("Ilegalne pozicije mina");
	}
	
	
	polja.resize(n);
	for (int i=0; i&lt;n; i++) polja.at(i).resize(n);
	for (int i=0; i&lt;n; i++) {
		for (int j=0; j&lt;n; j++) {
			polja.at(i).at(j)=Polje::Prazno;
		}
	}
	for (int i=0; i&lt;mine.size(); i++) polja.at(mine.at(i).at(0)).at(mine.at(i).at(1))=Polje::Mina;
	
	return polja;
}

int BrojMina (const Tabla &amp;polja, int x, int y) {
	int brojac(0);
	
	for (int i=0; i&lt;polja.size(); i++) {
		for (int j=0; j&lt;polja.size(); j++) {
			
			if (std::abs(x-i)&lt;=1 &amp;&amp; std::abs(y-j)&lt;=1 &amp;&amp; polja.at(i).at(j)==Polje::Mina &amp;&amp; (x!=i || y!=j)) brojac++;
			
		}
	}
	return brojac;
}

std::vector&lt;std::vector&lt;int&gt;&gt; PrikaziOkolinu (const Tabla &amp;polja, int x, int y) {
	
<a name="8"></a><font color="#00FFFF"><a href="match771-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

	if (x&lt;0 || x&gt;=polja.size() || y&lt;0 || y&gt;=polja.size()) throw std::domain_error("Polje (" + PretvoriUString(x) + "," + PretvoriUString(y) + ") ne postoji");
	
	std::vector&lt;std::vector&lt;int&gt;&gt; okolina;
</font>	okolina.resize(3); 
	for (int i=0; i&lt;3; i++) okolina.at(i).resize(3);
	
	for (int i=0; i&lt;3; i++) {
		for (int j=0; j&lt;3; j++) {
			okolina.at(i).at(j)=BrojMina(polja, x-1+i, y-1+j);
		}
	}
	return okolina;
}

void BlokirajPolje (Tabla &amp;polja, int x, int y) {
	if (x&lt;0 || x&gt;=polja.size() || y&lt;0 || y&gt;=polja.size()) throw std::domain_error("Polje (" + PretvoriUString(x) + "," + PretvoriUString(y) + ") ne postoji");
	
	if (polja.at(x).at(y)==Polje::Prazno) polja.at(x).at(y)=Polje::BlokiranoPrazno;
<a name="9"></a><font color="#FF00FF"><a href="match771-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

	else if (polja.at(x).at(y)==Polje::Mina) polja.at(x).at(y)=Polje::BlokiranoMina;
	else if (polja.at(x).at(y)==Polje::Posjeceno) polja.at(x).at(y)=Polje::BlokiranoPosjeceno;
	
	return;
</font>}

void DeblokirajPolje (Tabla &amp;polja, int x, int y) {
	if (x&lt;0 || x&gt;=polja.size() || y&lt;0 || y&gt;=polja.size()) throw std::domain_error("Polje (" + PretvoriUString(x) + "," + PretvoriUString(y) + ") ne postoji");
	
	if (polja.at(x).at(y)==Polje::BlokiranoPrazno) polja.at(x).at(y)=Polje::Prazno;
	else if (polja.at(x).at(y)==Polje::BlokiranoMina) polja.at(x).at(y)=Polje::Mina;
	else if (polja.at(x).at(y)==Polje::BlokiranoPosjeceno) polja.at(x).at(y)=Polje::Posjeceno;
	
	return;
	
}

<a name="2"></a><font color="#0000FF"><a href="match771-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void Ocisti (Tabla &amp;polja) {
	for (int i=0; i&lt;polja.size(); i++) {
		for (int j=0; j&lt;polja.size(); j++) {
			polja.at(i).at(j)=Polje::Prazno;
</font>		}
	}
}

bool SvaPosjecena (Tabla &amp;polja, int x, int y) {
	for (int i=0; i&lt;polja.size(); i++) {
		for (int j=0; j&lt;polja.size(); j++) {
			if (i!=x &amp;&amp; j!=y &amp;&amp; polja.at(i).at(j)==Polje::Prazno) return false;
		}
	}
	return true;
}

Status Idi (Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi smjer) {
	
	polja.at(x).at(y)=Polje::Posjeceno;
	int temp_x(x), temp_y(y);
	
	if (smjer==Smjerovi::GoreLijevo) { temp_x--; temp_y--; }
	else if (smjer==Smjerovi::Gore) temp_x--;
	else if (smjer==Smjerovi::GoreDesno) { temp_x--; temp_y++; }
	else if (smjer==Smjerovi::Desno) temp_y++;
	else if (smjer==Smjerovi::DoljeDesno) { temp_x++; temp_y++; }
	else if (smjer==Smjerovi::Dolje) temp_x++;
	else if (smjer==Smjerovi::DoljeLijevo) { temp_x++; temp_y--; }
	else if (smjer==Smjerovi::Lijevo) temp_y--;
	
	if (temp_x&lt;0 || temp_x&gt;=polja.size() || temp_y&lt;0 || temp_y&gt;=polja.size()) throw std::out_of_range("Izlazak van igrace table");
	if (polja.at(temp_x).at(temp_y)==Polje::BlokiranoMina || polja.at(temp_x).at(temp_y)==Polje::BlokiranoPrazno || polja.at(temp_x).at(temp_y)==Polje::BlokiranoPosjeceno) throw std::logic_error("Blokirano polje");
	if (polja.at(temp_x).at(temp_y)==Polje::Mina) {
		Ocisti(polja);
		return Status::KrajPoraz;
	}
	x=temp_x; y=temp_y;
	
	if (SvaPosjecena(polja, x, y)) return Status::KrajPobjeda;
	
	return Status::NijeKraj;
}
Status Idi (Tabla &amp;polja, int &amp;x, int &amp;y, int novi_x, int novi_y) {
	
	polja.at(x).at(y)=Polje::Posjeceno;
	
	if (novi_x&lt;0 || novi_x&gt;=polja.size() || novi_y&lt;0 || novi_y&gt;=polja.size()) throw std::out_of_range("Izlazak van igrace table");
	if (polja.at(novi_x).at(novi_y)==Polje::BlokiranoMina || polja.at(novi_x).at(novi_y)==Polje::BlokiranoPrazno || polja.at(novi_x).at(novi_y)==Polje::BlokiranoPosjeceno) throw std::logic_error("Blokirano polje");
	
	x=novi_x; y=novi_y;
	
	if (polja.at(x).at(y)==Polje::Mina) {
		Ocisti(polja);
		return Status::KrajPoraz;
	}
	
<a name="3"></a><font color="#00FFFF"><a href="match771-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

	if (SvaPosjecena(polja, x, y)) return Status::KrajPobjeda;
	
	return Status::NijeKraj;
}

void PrijaviGresku (KodoviGresaka greska) {
	if (greska==KodoviGresaka::PogresnaKomanda) std::cout &lt;&lt; "Nerazumljiva komanda!" &lt;&lt; std::endl;
	else if (greska==KodoviGresaka::NedostajeParametar) std::cout &lt;&lt; "Komanda trazi parametar koji nije naveden!" &lt;&lt; std::endl;
</font>	else if (greska==KodoviGresaka::NeispravanParametar) std::cout &lt;&lt; "Parametar komande nije ispravan!" &lt;&lt; std::endl;
	else if (greska==KodoviGresaka::SuvisanParametar) std::cout &lt;&lt; "Zadan je suvisan parametar nakon komande!" &lt;&lt; std::endl;
}


<a name="7"></a><font color="#0000FF"><a href="match771-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

bool UnosKomande (Komande &amp;komanda, Smjerovi &amp;smjer, int &amp;x, int &amp;y, KodoviGresaka &amp;greska) {
	
	std::string s;
	std::getline(std::cin, s);
</font>	
	for (int i=0; i&lt;s.length(); i++) {
		if (s.at(i)==' ') {
			s.erase(s.begin()+i);
			i--;
		}
	}
	if (s.length()==1) {
		if (s.at(0)=='Z') komanda=Komande::ZavrsiIgru;
		else if (s.at(0)=='K') komanda=Komande::KreirajIgru;
		else if (s.at(0)=='B') {
			komanda=Komande::Blokiraj;
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}
		else if (s.at(0)=='D') {
			komanda=Komande::Deblokiraj;
			greska=KodoviGresaka::NedostajeParametar;
			return false;
		}
		else {
			greska=KodoviGresaka::PogresnaKomanda;
			return false;
		}
	}
	else if (s.length()&gt;=2) {
		if (s.at(0)=='P' &amp;&amp; s.at(1)=='1') {
			
			komanda=Komande::PomjeriJednoMjesto;
			
<a name="10"></a><font color="#FF0000"><a href="match771-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

			if (s=="P1G") smjer=Smjerovi::Gore;
			else if (s=="P1GD") smjer=Smjerovi::GoreDesno;
			else if (s=="P1GL") smjer=Smjerovi::GoreLijevo;
</font>			else if (s=="P1L") smjer=Smjerovi::Lijevo;
			else if (s=="P1D") smjer=Smjerovi::Desno;
			else if (s=="P1Do") smjer=Smjerovi::Dolje;
			else if (s=="P1DoD") smjer=Smjerovi::DoljeDesno;
			else if (s=="P1DoL") smjer=Smjerovi::DoljeLijevo;
			else if (s.length()==2) {
				greska=KodoviGresaka::NedostajeParametar;
				return false;
			}
			else if (s.substr(0, 3)=="P1G" || s.substr(0, 3)=="P1D" || s.substr(0, 4)=="P1GD" || s.substr(0, 4)=="P1GL" || s.substr(0, 3)=="P1L" || s.substr(0, 4)=="P1Do" || s.substr(0, 5)=="P1DoD" || s.substr(0,5)=="P1DoL") {
				greska=KodoviGresaka::SuvisanParametar;
				return false;
			}
			else {
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
		}
		else if (s.at(0)=='P' &amp;&amp; s.at(1)=='&gt;') {
			komanda=Komande::PomjeriDalje;
			
			if (s.length()&gt;2) {
				if (s.at(2)&lt;'0' || s.at(2)&gt;'9') {
					greska=KodoviGresaka::NeispravanParametar;
					return false;
				}
			}
			if (s.length()==2 || s.length()==3) {
				greska=KodoviGresaka::NedostajeParametar;
				return false;
			}
			else if (s.length()&gt;4) {
				greska=KodoviGresaka::SuvisanParametar;
				return false;
			}
			else if (!((s.at(2)&gt;='0' &amp;&amp; s.at(2)&lt;='9') &amp;&amp; (s.at(3)&gt;='0' &amp;&amp; s.at(3)&lt;='9'))) {
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
			else {
				x=s.at(2)-'0'; y=s.at(3)-'0';
			}
		}
		else if (s.at(0)=='B') {
			komanda=Komande::Blokiraj;
			
			if (s.length()==2) {
				if (!(s.at(1)&gt;='0' &amp;&amp; s.at(1)&lt;='9')) greska=KodoviGresaka::NeispravanParametar;
				else greska=KodoviGresaka::NedostajeParametar;
				return false;
			}
			if (!((s.at(1)&gt;='0' &amp;&amp; s.at(1)&lt;='9') &amp;&amp; (s.at(2)&gt;='0' &amp;&amp; s.at(2)&lt;='9'))) {
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
			else if (s.length()&gt;3) {
				greska=KodoviGresaka::SuvisanParametar;
				return false;
			}
			else {
				x=s.at(1)-'0'; y=s.at(2)-'0';
			}
		}
		else if (s.at(0)=='D') {
			komanda=Komande::Deblokiraj;
			
			if (s.length()==2) {
				if (!(s.at(1)&gt;='0' &amp;&amp; s.at(1)&lt;='9')) greska=KodoviGresaka::NeispravanParametar;
				else greska=KodoviGresaka::NedostajeParametar;
				return false;
			}
			
			if (!((s.at(1)&gt;='0' &amp;&amp; s.at(1)&lt;='9') &amp;&amp; (s.at(2)&gt;='0' &amp;&amp; s.at(2)&lt;='9'))) {
				greska=KodoviGresaka::NeispravanParametar;
				return false;
			}
			else if (s.length()&gt;3) {
				greska=KodoviGresaka::SuvisanParametar;
				return false;
			}
			else {
				x=s.at(1)-'0'; y=s.at(2)-'0';
			}
		}
		else if (s.at(0)=='P' &amp;&amp; s.at(1)=='O') {
			komanda=Komande::PrikaziOkolinu;
			if (s.length()&gt;2) {
				greska=KodoviGresaka::SuvisanParametar;
				return false;
			}
		}
		else if (s.at(0)=='Z') {
			komanda=Komande::ZavrsiIgru;
			greska=KodoviGresaka::SuvisanParametar;
			return false;
		}
		else if (s.at(0)=='K') {
			komanda=Komande::KreirajIgru;
			greska=KodoviGresaka::SuvisanParametar;
			return false;
		}
		else {
			greska=KodoviGresaka::PogresnaKomanda;
			return false;
		}
	}
	return true;
}


void IzvrsiKomandu(Komande komanda, Tabla &amp;polja, int &amp;x, int &amp;y, Smjerovi p_smjer=Smjerovi::Gore, int p_x=0, int p_y=0) {
	
	try {
	if (komanda==Komande::PomjeriJednoMjesto) {
		Status status(Idi(polja, x, y, p_smjer));
<a name="4"></a><font color="#FF00FF"><a href="match771-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

		std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl;
		if (status==Status::KrajPoraz) {
			std::cout &lt;&lt; "Nagazili ste na minu" &lt;&lt; std::endl;
</font>			komanda=Komande::ZavrsiIgru;
			Ocisti(polja);
			throw std::runtime_error("Igra zavrsena");
		}
		else if (status==Status::KrajPobjeda) {
			std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
			komanda=Komande::ZavrsiIgru;
			Ocisti(polja);
			throw std::runtime_error("Igra zavrsena");
		}
	}
	else if (komanda==Komande::PomjeriDalje) {
		Status status(Idi(polja, p_x, p_y, x, y));
<a name="5"></a><font color="#FF0000"><a href="match771-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

		std::cout &lt;&lt; "Tekuca pozicija igraca je (" &lt;&lt; x &lt;&lt; "," &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl;
		if (status==Status::KrajPoraz) {
			std::cout &lt;&lt; "Nagazili ste na minu" &lt;&lt; std::endl;
</font>			komanda=Komande::ZavrsiIgru;
			Ocisti(polja);
			throw std::runtime_error("Igra zavrsena");
		}
		else if (status==Status::KrajPobjeda) {
			std::cout &lt;&lt; "Bravo, obisli ste sva sigurna polja" &lt;&lt; std::endl;
			komanda=Komande::ZavrsiIgru;
			Ocisti(polja);
			throw std::runtime_error("Igra zavrsena");
		}
	}
	else if (komanda==Komande::Blokiraj) {
		BlokirajPolje(polja, x, y);
	}
	else if (komanda==Komande::Deblokiraj) {
		DeblokirajPolje(polja, x, y);
	}
	else if (komanda==Komande::PrikaziOkolinu) {
		auto matrica(PrikaziOkolinu(polja, x, y));
		for (int i=0; i&lt;3; i++) {
			for (int j=0; j&lt;3; j++) {
				std::cout &lt;&lt; matrica.at(i).at(j) &lt;&lt; " ";
			}
<a name="6"></a><font color="#00FF00"><a href="match771-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

			std::cout &lt;&lt; std::endl;
		}
	}
	else if (komanda==Komande::ZavrsiIgru) {
		Ocisti(polja);
		throw std::runtime_error("Igra zavrsena");
	}
	else if (komanda==Komande::KreirajIgru) {
		
		std::vector&lt;std::vector&lt;int&gt;&gt; mine;
</font>		int n;
		
		std::cout &lt;&lt; "Unesite broj polja: ";
		while (std::cin &gt;&gt; n, !std::cin || n&lt;=0 || std::cin.peek()!='\n') {
			std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
			std::cin.clear();
			std::cin.ignore(10000, '\n');
			std::cout &lt;&lt; "Unesite broj polja: ";
		}
		std::cin.ignore(10000, '\n');
		std::cout &lt;&lt; "Unesite pozicije mina: ";
		char znak;
		int prvi, drugi;
		while (std::cin &gt;&gt; znak, znak!='.') {
			
			if (znak!='(') std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
			else if (std::cin &gt;&gt; prvi &gt;&gt; znak, prvi&lt;0 || prvi&gt;=n || !std::cin || znak!=',') std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
			else if (std::cin &gt;&gt; drugi &gt;&gt; znak, drugi&lt;0 || drugi&gt;=n || !std::cin || znak!=')') std::cout &lt;&lt; "Greska, unesite ponovo!" &lt;&lt; std::endl;
			else mine.push_back({prvi, drugi});
			std::cin.clear();
			std::cin.ignore(10000, '\n');
		}
		
		polja=KreirajIgru(n, mine);
		std::cin.clear();
		std::cin.ignore(10000, '\n');
	}
	}
	catch(std::runtime_error) {
		throw;
	}
	catch (std::exception &amp;izuzetak) {
		std::cout &lt;&lt;  izuzetak.what() &lt;&lt; std::endl;
	}
	return;
}

int main ()
{
	Tabla polja;
	Komande komanda;
	KodoviGresaka greska;
	Smjerovi smjer;
	int x(0), y(0), poc_x(0), poc_y(0);
	try {
	for (;;) {
<a name="1"></a><font color="#00FF00"><a href="match771-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

		std::cout &lt;&lt; "Unesite komandu: ";
		if (UnosKomande(komanda, smjer, x, y, greska)) {
			IzvrsiKomandu(komanda, polja, x, y, smjer, poc_x, poc_y);
		}
		else PrijaviGresku(greska);
	} 
	} catch(...) { 
		std::cout &lt;&lt; "Dovidjenja!";
</font>	}
	return 0;
}</pre>
</body>
</html>
