<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student4195.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student4195.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;

void kompresuj(char ime_ulazne[],char ime_izlazne[])
{
	FILE *ulazna, *izlazna;
	int broj_rijeci=0,brojac=0,razmak=1,broj_ponavljanja[1001]= {0},i,indeksi_maskimalnih[10],j,max=0,temp;
	char razlicite_rijeci[1001][10],znak,neka_rijec[20];
	char kopirani_niz[1001];
	if((ulazna=fopen(ime_ulazne,"r")) == NULL) {
		printf("Greska pri otvaranju datoteke %s",ime_ulazne);
		exit(1);
	}
	while ((znak=fgetc(ulazna)) != EOF) {
		if(znak==' ' || znak=='\n'  || znak=='\t' || znak&lt;'A' || (znak&gt;'Z' &amp;&amp; znak&lt;'a') || znak&gt;'z') {
			if(brojac&gt;0 &amp;&amp; brojac&lt;10) {
				razlicite_rijeci[broj_rijeci-1][brojac] = 0;
				for(i=0; i&lt;broj_rijeci-1; i++) {
					if(!strcmp(razlicite_rijeci[i],razlicite_rijeci[broj_rijeci-1])) {
						broj_ponavljanja[i]++;
						broj_rijeci--;
						break;
					}

				}
			}
			razmak=1;
			brojac=0;
		} else if (razmak &amp;&amp; !brojac) {
			broj_rijeci++;
			broj_ponavljanja[broj_rijeci-1]=1;
			razmak=0;
		}
		if(!razmak) {
			if(brojac==10)
				continue;
			if(brojac==9) {
				for(i=0; i&lt;10; i++)
					razlicite_rijeci[broj_rijeci-1][i]=0;
				brojac++;
				broj_rijeci--;
				continue;
			}
			razlicite_rijeci[broj_rijeci-1][brojac] = znak;
			brojac++;
		}
	}
	if(!razmak &amp;&amp; brojac&gt;0 &amp;&amp; brojac&lt;11) {
		razlicite_rijeci[broj_rijeci-1][brojac]=0;
		for(i=0; i&lt;broj_rijeci-1; i++) {
			if(!strcmp(razlicite_rijeci[i],razlicite_rijeci[broj_rijeci-1])) {
				broj_ponavljanja[i]++;
				broj_rijeci--;
				break;
			}
		}
	}

	fclose(ulazna);
	brojac=0;
	for(i=0; i&lt;broj_rijeci; i++) {
		kopirani_niz[i]=broj_ponavljanja[i];
	}
	/*Pravljenje tabele */
	for(i=0; i+brojac&lt;10; i++) {
		for(j=0; j&lt;broj_rijeci; j++) {
			if(kopirani_niz[j]&gt;kopirani_niz[max])
				max=j;
		}
		indeksi_maskimalnih[i]=max;
		kopirani_niz[max]=-1;

		if(i) {
			if(indeksi_maskimalnih[i]==indeksi_maskimalnih[i-1]) {
				i--;
				brojac++;
			}
		}
	}
	/*Leksikografsko redanje*/
	for(j=0; j&lt;i-1; j++) {
		for(brojac=j+1; brojac&lt;i ; brojac++) {
			if(broj_ponavljanja[indeksi_maskimalnih[brojac]] == broj_ponavljanja[indeksi_maskimalnih[j]]) {
				if(strcmp(razlicite_rijeci[indeksi_maskimalnih[brojac]], razlicite_rijeci[indeksi_maskimalnih[j]])&lt;0) {
					temp=indeksi_maskimalnih[j];
					indeksi_maskimalnih[j]=indeksi_maskimalnih[brojac];
					indeksi_maskimalnih[brojac]=temp;
				}
			}
		}
	}

	izlazna=fopen(ime_izlazne,"w");
	ulazna = fopen(ime_ulazne,"r");

	/*Upisivanje tabele*/
	for(brojac=0; brojac&lt;i; brojac++) {
		fputs(razlicite_rijeci[indeksi_maskimalnih[brojac]],izlazna);
		fputs("\n",izlazna);
	}
	if(i&lt;10)
		fputs("\n",izlazna);
	/*Kompresiranje*/
	brojac=0;
	razmak = 1;
	while ((znak=fgetc(ulazna)) != EOF) {
		if(znak==' ' || znak=='\n'  || znak=='\t' || znak&lt;'A' || (znak&gt;'Z' &amp;&amp; znak&lt;'a') || znak&gt;'z' || brojac==10) {
			if(brojac&gt;0 &amp;&amp; brojac&lt;10) {
				neka_rijec[brojac] = 0;
				for(i=0; i&lt;broj_rijeci; i++) {
					if(!strcmp(neka_rijec,razlicite_rijeci[indeksi_maskimalnih[i]]))
						break;
				}
				if(i&lt;broj_rijeci)
					fputc((20+i),izlazna);
				else if(i==broj_rijeci)
					fputs(neka_rijec,izlazna);
			} 
			else if(brojac==10) {
				fputs(neka_rijec,izlazna);
			}
			fputc(znak,izlazna);
			brojac=0;
			razmak=1;

		} 
		else if (razmak) {
			razmak=0;
		}
		if(!razmak) {
			neka_rijec[brojac] = znak;
			brojac++;
			if(brojac==10)
				neka_rijec[10]=0;
		}
	}
	if(brojac&gt;0 &amp;&amp; brojac&lt;10) {
		neka_rijec[brojac] = 0;
		for(i=0; i&lt;broj_rijeci; i++) {
			if(!strcmp(neka_rijec,razlicite_rijeci[indeksi_maskimalnih[i]]))
				break;
		}
		if(i&lt;broj_rijeci)
			fputc((20+i),izlazna);
		else if(i==broj_rijeci)
			fputs(neka_rijec,izlazna);
	}
	else if(brojac==10)
		fputs(neka_rijec,izlazna);

	fclose(izlazna);
	fclose(ulazna);
	printf("Datoteka kompresovana.\n");
}

void dekompresuj(char ime_kompresovane[], char ime_originalne[])
{
	FILE *kompresovana, *originalna;
	int broj_rijeci=0,brojac=0,novi_red;
	char rijeci_zamjene[10][10],znak;
	if((kompresovana=fopen(ime_kompresovane,"r"))==NULL) {
		printf("Greska pri otvaranju kompresovane datoteke !");
		exit(1);
	}
	novi_red=0;
	while(((znak=fgetc(kompresovana)) !=EOF) &amp;&amp; broj_rijeci&lt;11) {
		if(znak=='\n' &amp;&amp; novi_red) {
			broj_rijeci++;
			break;
		} else if(znak=='\n' &amp;&amp; !novi_red) {
			novi_red=1;
			rijeci_zamjene[broj_rijeci][brojac]=0;
			brojac=0;
			broj_rijeci++;
			continue;
		}
		novi_red=0;
		rijeci_zamjene[broj_rijeci][brojac]=znak;
		brojac++;
	}
	originalna=fopen(ime_originalne,"w");
	while ((znak=fgetc(kompresovana)) != EOF) {
		if(znak&gt;=20 &amp;&amp; znak&lt;=20+broj_rijeci-1) {
			fprintf(originalna,"%s",rijeci_zamjene[znak-20]);
		} else
			fprintf(originalna,"%c",znak);
	}

	fclose(originalna);
	fclose(kompresovana);
	printf("Datoteka dekompresovana.\n");
}

<a name="0"></a><font color="#FF0000"><a href="match361-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

int main(){
	int ulaz;
	char ulazna[40],izlazna[40];
	do {
		printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
		scanf("%d",&amp;ulaz);
		switch(ulaz) {
		case 1:
			printf("Unesite ime ulazne datoteke: ");
			scanf("%s",ulazna);
</font>			printf("Unesite ime izlazne datoteke: ");
			scanf("%s",izlazna);
			kompresuj(ulazna,izlazna);
			break;
		case 2:
			printf("Unesite ime ulazne datoteke: ");
			scanf("%s",ulazna);
			printf("Unesite ime izlazne datoteke: ");
			scanf("%s",izlazna);
			dekompresuj(ulazna,izlazna);
			break;
		case 0:
			printf("\n");
			break;
		}
	} while(ulaz);
	return 0;
}
</pre>
</body>
</html>
