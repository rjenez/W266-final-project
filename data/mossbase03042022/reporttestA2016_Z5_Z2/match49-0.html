<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student6547.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student6547.c<p></p><pre>

#include &lt;stdio.h&gt;
#include &lt;ctype.h&gt;
#include &lt;string.h&gt;

<a name="2"></a><font color="#0000FF"><a href="match49-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_13.gif"/></a>

void unesi(char niz[], int velicina) {
	char znak=getchar();
	if(znak=='\n') znak=getchar();
	int i=0;
	while(i&lt;velicina-1 &amp;&amp; znak!='\n') {
		niz[i]=znak;
		i++;
		znak=getchar();
	}
	niz[i]='\0';
	
}

int slovo(int c) {
	if(c&gt;='A' &amp;&amp; c&lt;='Z' || c&gt;='a' &amp;&amp; c&lt;='z') return 1;
	return 0;
}

void swap(char*p , char*q) {
	char temp[100];
	strcpy(temp,p);
	strcpy(p,q);
	strcpy(q,temp);
}

void kompresuj(char*naziv, char*naziv1) {
</font><a name="6"></a><font color="#00FF00"><a href="match49-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

	FILE *ulaz=fopen(naziv,"r");
	FILE *ulaz1=fopen(naziv,"r");
	FILE *izlaz=fopen(naziv1,"w");
	
	char rijeci[1000][1000]={0};
</font><a name="5"></a><font color="#FF0000"><a href="match49-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	int brojac[1000]={0}; 
	int i, broj_rijeci=0;
	char rijec[1000];
	int duzina;
</font>	char znak=fgetc(ulaz);
	while(znak!=EOF) {
		duzina=0;
		while(slovo(znak)) {
			rijec[duzina++]=znak;
			znak=fgetc(ulaz);
		}
<a name="0"></a><font color="#FF0000"><a href="match49-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_25.gif"/></a>

		rijec[duzina]='\0';
		if(duzina&lt;10 &amp;&amp; duzina!=0) {
			int ima=0;
			int j;
			for(j=0;j&lt;broj_rijeci;j++) {
				if(strcmp(rijeci[j],rijec)==0) {
					ima=1;
					brojac[j]++;
					break;
				}
			}
			if(ima!=1) {
				strcpy(rijeci[broj_rijeci],rijec);
				brojac[broj_rijeci++]=1;
			}
		}
		znak=fgetc(ulaz);
	}
	int j;
	for(i=0;i&lt;broj_rijeci;i++) {
		for(j=i+1;j&lt;broj_rijeci;j++) {
			if(brojac[j]&gt;brojac[i] || (brojac[j]==brojac[i] &amp;&amp; strcmp(rijeci[i],rijeci[j])==1)) {
				int temp=brojac[j];
				brojac[j]=brojac[i];
				brojac[i]=temp;
				swap(rijeci[i],rijeci[j]);
			}
		}
	}
	int kraj=10;
	char novired='\n';
	if(broj_rijeci&lt;10) kraj=broj_rijeci;
	
	for(i=0;i&lt;kraj;i++) {
		fputs(rijeci[i],izlaz);
		fputc(novired,izlaz);
	}
	
	char c=fgetc(ulaz1);
	while(c!=EOF) {
		duzina=0;
		while(slovo(c)) {
			rijec[duzina++]=c;
</font>			c=fgetc(ulaz1);
		}
<a name="3"></a><font color="#00FFFF"><a href="match49-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_11.gif"/></a>

		rijec[duzina]='\0';
		int kontrola=0;
		if(duzina&lt;10 &amp;&amp; duzina!=0) {
			for(j=0;j&lt;kraj;j++) {
				if(strcmp(rijeci[j],rijec)==0) {
					char znk=j+20;
					kontrola=1;
					fputc(znk,izlaz);
					fputc(c,izlaz);
					break;
				}
			}
		}
		if(kontrola==0) {
			char*r=rijec;
			while(*r!='\0') {
				fputc(*r,izlaz);
				r++;
			}
			fputc(c,izlaz);
		}
		c=fgetc(ulaz1);
	}
	printf("Datoteka kompresovana.\n");
	fclose(ulaz);
	fclose(ulaz1);
	fclose(izlaz);
	
}

void dekompresuj(char*naziv, char*naziv1) {
</font><a name="7"></a><font color="#0000FF"><a href="match49-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	FILE *ulaz=fopen(naziv,"r");
	FILE *ulaz1=fopen(naziv,"r");
	FILE *izlaz=fopen(naziv1,"w");
	
	char rijeci[1000][1000]={0},rijec[1000];
</font>	int broj_rijeci=0, duzina=0, brojackrajeva=0;
	char znak=fgetc(ulaz);
	int kontrola=0;
	while(znak!=EOF) {
		duzina=0;
		kontrola=0;
		while(slovo(znak)) {
			rijec[duzina++]=znak;
			znak=fgetc(ulaz);
		}
<a name="4"></a><font color="#FF00FF"><a href="match49-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

		rijec[duzina]='\0';
		if(duzina&lt;10 &amp;&amp; duzina!=0) {
			strcpy(rijeci[broj_rijeci],rijec);
			int j;
			for(j=0;j&lt;broj_rijeci;j++) {
				if(strcmp(rijeci[j],rijec)==0) {
					kontrola=1;
					break;
				}
			}
			if(kontrola) break;
</font><a name="1"></a><font color="#00FF00"><a href="match49-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_19.gif"/></a>

			broj_rijeci++;
		}
		znak=fgetc(ulaz);
	}
	brojackrajeva=0;
	char c=fgetc(ulaz1);
	while(c!=EOF) {
		if(c=='\n') brojackrajeva++;
		if(brojackrajeva==broj_rijeci) break;
		c=fgetc(ulaz1);
	}
	c=fgetc(ulaz1);
	while(c!=EOF) {
		int n=0;
		if(c&gt;=20 &amp;&amp; c&lt;=30) {
			char*p=rijeci[c-20];
			n=1;
			while(*p!='\0') {
				fputc(*p,izlaz);
				p++;
			}
		}
		if(n==0)
		fputc(c,izlaz);
		c=fgetc(ulaz1);
	}
	printf("Datoteka dekompresovana.\n");
	fclose(ulaz);
	fclose(izlaz);
	fclose(ulaz1);
	
}

int main() {
	int opcija;
	char s[100], p[100];
	do {
		printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
		scanf("%d",&amp;opcija);
		switch(opcija){
			case 1: printf("Unesite ime ulazne datoteke: ");
			unesi(s,40);
			printf("Unesite ime izlazne datoteke: ");
			unesi(p,40);
			kompresuj(s,p);
			break;
			case 2:
			printf("Unesite ime ulazne datoteke: ");
			unesi(s,40);
			printf("Unesite ime izlazne datoteke: ");
			unesi(p,40);
			dekompresuj(s,p);
</font>			
			
		} 
	}while(opcija!=0);
	return 0;
}
                                                                                                                                   
               </pre>
</body>
</html>
