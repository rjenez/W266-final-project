<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student2676.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student2676.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;

void unesi(char niz[], int velicina) 
{
    int i=0;
    char znak = getchar();
    if(znak=='\n') znak=getchar();
    while(i&lt;velicina-1 &amp;&amp; znak!='\n') 
    {
        niz[i]=znak;
        i++;
        znak=getchar();
    }
    niz[i]='\0';
}

void kompresuj(char* udat, char* idat)
{
    char c, rijec[12], nizrijeci[1001][12], niz10[100][12];
    int i, j, k, brijeci=0, brputa[1001]={0}, maxindeks;
	FILE* ulaz=fopen(udat, "r");
	if(ulaz==NULL) exit(1);
	FILE* izlaz=fopen(idat, "w");
	if(izlaz==NULL) exit(1);
	c=fgetc(ulaz);
	while(!feof(ulaz))
	{
	    while(!feof(ulaz) &amp;&amp; (c&lt;'A' || (c&gt;'Z' &amp;&amp; c&lt;'a') || c&gt;'z')) c=fgetc(ulaz);
	    i=0;
	    
	    // Uzimamo rijec po rijec, uzimamo u obzir samo rijeci krace od 10 slova
	    
	    while(!feof(ulaz) &amp;&amp; i&lt;9 &amp;&amp; ((c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z')))
	    {
	        rijec[i]=c;
	        c=fgetc(ulaz);
	        i++;
	    }
	    if((c&lt;'A' || (c&gt;'Z' &amp;&amp; c&lt;'a') || c&gt;'z') &amp;&amp; i&gt;1)
	    {
<a name="0"></a><font color="#FF0000"><a href="match103-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_10.gif"/></a>

	        rijec[i]='\0';
	        for(j=0;j&lt;brijeci;j++)
	        {
	            if(strcmp(*(nizrijeci+j), rijec)==0)
	            {
	                // Biljezimo koliko se puta svaka rijec ponavlja
	                brputa[j]++;
	                break;
	            }
	        }
	        if(j==brijeci)
	        {
	            // Dodajemo novu rijec u niz rijeci
	            for(k=0;rijec[k]!='\0';k++)
	            {
	                nizrijeci[brijeci][k]=rijec[k];
	            }
	            nizrijeci[brijeci][k]=rijec[k];
	            brputa[brijeci]++;
	            brijeci++;
	        }
	    } 
	    else
	    while(!feof(ulaz) &amp;&amp; ((c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z'))) c=fgetc(ulaz);
</font>	}
	i=0;
	
	// Sada trazimo koje rijeci se najcesce pojavljuju
	
	while(i&lt;10 &amp;&amp; i&lt;brijeci)
	{
	    maxindeks=0;
	    for(j=0;j&lt;brijeci;j++)
	    {
	        if(brputa[j]&gt;brputa[maxindeks]) maxindeks=j;
	        if(brputa[j]==brputa[maxindeks])
	        {
	            if(strcmp(*(nizrijeci+j), *(nizrijeci+maxindeks))&lt;0) maxindeks=j;
	        }
	    }
	    j=0;
	    while(nizrijeci[maxindeks][j]!='\0')
	    {
	        niz10[i][j]=nizrijeci[maxindeks][j];
	        j++;
	    }
	    niz10[i][j]=nizrijeci[maxindeks][j];
	    brputa[maxindeks]=-1;
	    i++;
	}
	
	// Upisivanje tablice najcescih rijeci u izlaznu datoteku
	
	i=0;
	while(i&lt;10 &amp;&amp; i&lt;brijeci)
	{
	    fprintf(izlaz, "%s\n", niz10[i]);
	    i++;
	}
	
	// Ako ih je manje od deset ide novi red
	if(brijeci&lt;10) fprintf(izlaz, "\n");
	
	// Ponovo prolazimo kroz ulaznu datoteku i mijenjamo rijeci odgovarajucim ASCII znakovima
	
	fseek(ulaz, 0, SEEK_SET);
	c=fgetc(ulaz);
	while(!feof(ulaz))
	{
	    while(c&lt;'A' || (c&gt;'Z' &amp;&amp; c&lt;'a') || c&gt;'z')
	    {
	        if(feof(ulaz)) break;
	        fprintf(izlaz, "%c", c);
	        c=fgetc(ulaz);
	    }
	    i=0;
	    while(!feof(ulaz) &amp;&amp; ((c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z')) &amp;&amp; i&lt;9)
	    {
	        rijec[i]=c;
	        c=fgetc(ulaz);
	        i++;
	    }
	    rijec[i]='\0';
	    if(i&gt;1)
	    {
	        if(i&lt;9 || (i==9 &amp;&amp; (c&lt;'A' || (c&gt;'Z' &amp;&amp; c&lt;'a') || c&gt;'z')))
	        {
	            j=0;
	            while(j&lt;brijeci &amp;&amp; j&lt;10)
	            {
	                if(strcmp(rijec, niz10[j])==0)
	                {
	                    fprintf(izlaz,"%c", 20+j);
	                    break;
	                }
	                j++;
	            }
	            if(j==brijeci || j==10) fprintf(izlaz, "%s", rijec);
	        }
	    }
	    else
	    if(i==1) fprintf(izlaz, "%s", rijec);
	    else
	    {
	        fprintf(izlaz, "%s", rijec);
<a name="2"></a><font color="#0000FF"><a href="match103-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

	        while((c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z'))
	        {
	            if(feof(ulaz)) break;
	            fprintf(izlaz, "%c", c);
</font>	            c=fgetc(ulaz);
	        }
	    }
	}
<a name="1"></a><font color="#00FF00"><a href="match103-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

	fclose(ulaz);
	fclose(izlaz);
	printf("Datoteka kompresovana.\n");
}



void dekompresuj(char* udat, char* idat)
{
    char niz10[12][12], c;
    int i, j;
    FILE* ulaz=fopen(udat, "r");
</font>    if(ulaz==NULL) exit(1);
    FILE* izlaz=fopen(idat, "w");
    if(izlaz==NULL) exit(1);
    
    // Prvo ocitavamo tablicu
    
    c=fgetc(ulaz);
    for(i=0;i&lt;10;i++)
    {
        if(c=='\n') 
        {
            c=fgetc(ulaz);
            break;
        }
        for(j=0;c!='\n';j++)
        {
            niz10[i][j]=c;
            c=fgetc(ulaz);
        }
        niz10[i][j]='\0';
        c=fgetc(ulaz);
    }
    
    // Upisujemo rijeci, odgovarajuce ASCII znakove zamijenjujemo rijecima iz tablice
    
    while(!feof(ulaz))
    {
        if(c&gt;=20 &amp;&amp; c&lt;=29) fprintf(izlaz, "%s", niz10[c-20]);
        else fprintf(izlaz, "%c", c);
        c=fgetc(ulaz);
    }
    fclose(ulaz);
    fclose(izlaz);
    printf("Datoteka dekompresovana.\n");
}

int main() 
{
    char ulaz[1000], izlaz[1000];
    int biraj;
    do
    {
        printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
        scanf("%d", &amp;biraj);
        if(biraj)
        {
            printf("Unesite ime ulazne datoteke: ");
            unesi(ulaz, 1000);
            printf("Unesite ime izlazne datoteke: ");
            unesi(izlaz, 1000);
        }
        if(biraj==1) kompresuj(ulaz, izlaz);
        if(biraj==2) dekompresuj(ulaz, izlaz);
    }while(biraj);
	return 0;
}
</pre>
</body>
</html>
