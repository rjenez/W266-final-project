<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student7802.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student9823.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;ctype.h&gt;
#include &lt;string.h&gt;

<a name="2"></a><font color="#0000FF"><a href="match53-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_12.gif"/></a>

void unesi(char niz[], int velicina)
{
    // obicna funkcija za unos, standard
	char znak = getchar();
	if (znak == '\n') znak=getchar();
	int i = 0;
	while (i &lt; velicina-1 &amp;&amp; znak != '\n') {
		niz[i] = znak;
		i++;
		znak = getchar();
	}
	niz[i]='\0';
}

int isSlovo(int c){
    if((c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z')) return 1;
    return 0;
}

void zamjena(char *s1, char *s2){
    char temp[1000];
    strcpy(temp, s1);
    strcpy(s1, s2);
    strcpy(s2, temp);
}


void kompresuj(char *ulazna, char *izlazna){
</font>    // funkcija iz datotke u matricu upisuje rijeci po broju ponavljanja
    // onda opet prolazimo kroz datoteku i zamjenjujemo rijeci sa znacima ascii-a

<a name="5"></a><font color="#FF0000"><a href="match53-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    char rijeci[1000][1000] = {0}; // niz od 1k rijeci po 1k karaktera
    int brojac[1000] = {0}; // brojac za svaku rijec
    int i, broj_rijeci = 0;
    char rijec[1000]; // trenutna rijec koju cemo ucitati
    int velicina;
</font>    
<a name="6"></a><font color="#00FF00"><a href="match53-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    FILE *ulaz = fopen(ulazna, "r");  // otvaramo datoteku 2 puta
    FILE *ulazP = fopen(ulazna, "r");
    FILE *izlaz = fopen(izlazna, "w");
    
    char znak = fgetc(ulaz);
</font>    while(znak !=EOF){
        velicina=0;
        while(isSlovo(znak)){ // ukoliko naletimo na rijec kupimo je
            rijec[velicina] = znak;
            znak = fgetc(ulaz);
            
            if(velicina&gt;10){ 
                while(znak!=' ') znak=fgetc(ulaz);
                velicina=0; 
                break; 
                
            }
            
            velicina++;
        }
        rijec[velicina]='\0'; // terminiramo
        
        if(velicina&lt;10 &amp;&amp; velicina!=0){ 
            int postoji =0;
            int k;
<a name="0"></a><font color="#FF0000"><a href="match53-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_21.gif"/></a>

            for(k=0;k&lt;broj_rijeci; k++){
                if(strcmp(rijeci[k], rijec) == 0){ // prolazimo kroz matricu
                    postoji = 1;                   // ako ima tu rijec samo povecamo broj
                    brojac[k]++; 
                    break;
                }
            }
            
            if(postoji!=1){ // ako nema rijeci dodajemo i brojac stavljamo na 1
                strcpy(rijeci[broj_rijeci], rijec);
                brojac[broj_rijeci++] = 1;
            }
        }
        znak = fgetc(ulaz);
    }
    
    // sad imamo niz rijeci i niz brojaca
    int j;
    for(i=0;i&lt;broj_rijeci;i++){ // sotriramo nase rijeci po broju ponavljanja i leksikografski
        for(j=i+1;j&lt;broj_rijeci;j++){
            if(brojac[j]&gt;brojac[i] || (brojac[j]== brojac[i] &amp;&amp; strcmp(rijeci[i], rijeci[j])&gt;0)){
                int temp=brojac[j];    
                brojac[j]=brojac[i];
                brojac[i]=temp;
                zamjena(rijeci[i],rijeci[j]);
            }
        }
    }
    
    int kraj=10;
    char pomoc='\n';
    if(broj_rijeci&lt;10) kraj=broj_rijeci; // treba nam tacan broj rijeci
    for(i=0;i&lt;kraj;i++){ // unosimo nase rijeci u datoteku
        fputs(rijeci[i], izlaz);
        fputc(pomoc, izlaz);
    }
    
    
    char c = fgetc(ulazP); // drugi put sto smo je otvorili
    while(c!=EOF){
        velicina=0;
        while(isSlovo(c)){ // rijec po rijec
            rijec[velicina] = c;
</font>            c = fgetc(ulazP);
            velicina++;
        }
<a name="3"></a><font color="#00FFFF"><a href="match53-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_11.gif"/></a>

        rijec[velicina]='\0';
        
        
        int pomocna=0;
        if(velicina&lt;10 &amp;&amp; velicina!=0){
            for(j=0;j&lt;kraj;j++){ // ako se nalazi u nizu rijec, mjenjamo je sa znakom u zadatku zadanim
            if(strcmp(rijeci[j],rijec) == 0){
                char znakic = j+20;
                pomocna=1;
                fputc(znakic, izlaz);
                fputc(c, izlaz);
                break;
            }
                
            }
        }   
            if(pomocna==0){
                // ako je nema u nizu samo prekopiramo
                char *a = rijec;
                while(*a!='\0'){
                    fputc(*a, izlaz);
                    a++;
                }
                fputc(c, izlaz);
            }
            
            
            c = getc(ulazP);
        
    }
    printf("Datoteka kompresovana.\n");
    fclose(ulaz);
    fclose(ulazP);
    fclose(izlaz);
}


void dekompresuj(char *ulazna, char *izlazna){
</font>    // funkcija prvo uzme rijeci koje su na pocetku datoteke 
    // stavi ih u niz, i onda tek prolazi kroz datoteku i znakove mjenja sa rijecima

    char rijeci[1000][1000] = {0}; // niz od 1k rijeci po 1k karaktera
    int  broj_rijeci = 0, brojacZSK = 0;
    char pomocna[1000]; // pomocna rijec koju cemo iskoristiti 
    int velicina=0;
    
    int pomocnaZapamtit=0;
    
<a name="7"></a><font color="#0000FF"><a href="match53-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    FILE *ulaz = fopen(ulazna, "r");  // otvaramo datoteku 2 puta
    FILE *ulazP = fopen(ulazna, "r");
    FILE *izlaz = fopen(izlazna, "w");
    
    char c = fgetc(ulaz);
</font>    while(c != EOF){
        velicina=0;
        pomocnaZapamtit=0;
        
        while(isSlovo(c)){
            pomocna[velicina]=c;
            c=fgetc(ulaz);
            
            if(velicina&gt;10){ 
                while(c!=' ') c=fgetc(ulaz);
                velicina=0; 
                break; 
                
            }
            
            velicina++;
        }
<a name="4"></a><font color="#FF00FF"><a href="match53-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

        pomocna[velicina]='\0';
        
        if(velicina&lt;10 &amp;&amp; velicina!=0){
            strcpy(rijeci[broj_rijeci], pomocna);
            int i;
            for(i=0;i&lt;broj_rijeci;i++){ // gledamo ima li nase rijeci
                if(strcmp(rijeci[i], pomocna)==0)
                {
                    pomocnaZapamtit=1;
                    break;
                }
            }
                if(pomocnaZapamtit==1) break;
</font><a name="1"></a><font color="#00FF00"><a href="match53-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_18.gif"/></a>

                broj_rijeci++;
            
            
        }
        c = fgetc(ulaz);
    }
    
    brojacZSK=0; // brojimo koliko ima rijeci prije dekompresije
    char znak= fgetc(ulazP);
    while(znak!=EOF){
        if(znak=='\n') brojacZSK++;
        if(brojacZSK == broj_rijeci) break; // kad dodje do zadnje rijeci prekidamo brojanje
        znak = fgetc(ulazP);
    }
    znak = fgetc(ulazP);
    while(znak!=EOF){ // kupimo rijeci i dalje
        int pomozi=0;
        if(znak&gt;=20 &amp;&amp; znak&lt;=30){ // ascii od 20 do 30 mjenjamo
            char *pointer = rijeci[znak-20];
            pomozi=1;
        
        while(*pointer!='\0'){ // ubacujemo rijec u datoteku
            fputc(*pointer, izlaz);
            pointer++;
        }
        }
        if(pomozi==0) fputc(znak, izlaz); // ako nije znak isto kao gore prepisujemo samo
        znak = fgetc(ulazP);
        
    }
    printf("Datoteka dekompresovana.\n");
    
    fclose(ulaz);
    
    
    fclose(ulazP);
    
    
    fclose(izlaz);

}




int main(){

    int opcija;
    char string1[100], string2[100];
    do{
        printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
        scanf("%d", &amp;opcija);
        switch(opcija){
            case 1: // unosimo ime ulazne i izlazne i ide kompresija
            printf("Unesite ime ulazne datoteke: ");
            unesi(string1, 40);
            printf("Unesite ime izlazne datoteke: ");
            unesi(string2, 40);
            
            kompresuj(string1, string2);
            break;
            
            case 2: // unosimo ime ulazne i izlazne i ide dekompresija
            printf("Unesite ime ulazne datoteke: ");
            unesi(string1, 40);
            printf("Unesite ime izlazne datoteke: ");
            unesi(string2, 40);
            dekompresuj(string1, string2);
</font>            break;
        }
    }while(opcija!=0); 
    return 0;
}</pre>
</body>
</html>
