<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student7485.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student3219.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int iste_rijeci (char* r1, char* r2) {
	while (*r1 != 0 &amp;&amp; *r2 != 0) {
		if (*r1 != *r2) {
			return 0;
		}
		r1++;
		r2++;
	}
	if (*r1 == 0 &amp;&amp; *r2 == 0) {
		return 1;
	} else {
		return 0;
	}
}

int ima_li_istih(char* r, char (*rijeci)[19], int brojRijeci) {
	int i;
	for (i = 0; i &lt; brojRijeci; i++) {
		if (iste_rijeci(r+8, rijeci[i]+8)) {
			return i;
		}
	}
	return -1;
}

int slovo (char c) {
	return (c &gt;= 'a' &amp;&amp; c &lt;= 'z') || (c &gt;= 'A' &amp;&amp; c &lt;= 'Z');
}

int broj (char c) {
	return (c &gt;= '0' &amp;&amp; c &lt;= '9');
}


void zamijeni(char* r1, char* r2) {
	char x;
	int i;
	for (i = 0; i &lt; 19; i++) {
		x = r1[i];
		r1[i] = r2[i];
		r2[i] = x;
	}
}

int min (int x, int y) {
	if (x &lt; y) {
		return x;
	} else {
		return y;
	}
}

int poredi (char* r1, char* r2) {
	while (*r1 != 0 &amp;&amp; *r2 != 0) {
		if (broj(*r1) &amp;&amp; broj((*r2))) {
			if (*r1 &lt; *r2) {
				return -1;
			} else if (*r1 &gt; *r2){
				return 1;
			}
		} else {
			if (*r1 &gt; *r2) {
				return -1;
			} else if (*r1 &lt; *r2){
				return 1;
			}
		}
		r1++;
		r2++;
	}
	
	if (*r1 == 0 &amp;&amp; *r2 == 0) {
		return 0;
	} else if (*r1 == 0) {
		return -1;
	} else {
<a name="0"></a><font color="#FF0000"><a href="match430-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

		return 1;
	}
}

void kompresuj (char *ime_ulaz, char *ime_izlaz) {
	FILE *ulaz = fopen(ime_ulaz, "r");
	FILE *izlaz = fopen(ime_izlaz, "w");
</font>	char x, rijeci[1001][19], pom[20000] = {0};
	int brojRijeci = 0, brojSlova = 0, i, j, iste[1001] = {0}, n, m, f = 10000000;
	
	if (ulaz == NULL || izlaz == NULL) {
		return;
	} 
	
	do {
		brojSlova = 0;
		x = fgetc(ulaz);
		while (x != EOF &amp;&amp; slovo(x) == 0) { /* pojedem znakove izmedju rijeci */
			x = fgetc(ulaz);
		}
		
		while (x != EOF &amp;&amp; slovo(x) == 1) {
			rijeci[brojRijeci][brojSlova+8] = x;
			brojSlova++;
			x = fgetc(ulaz);
		}
		rijeci[brojRijeci][brojSlova+8] = 0;
		
		if (brojSlova &gt; 1 &amp;&amp; brojSlova &lt; 10) {
			n = ima_li_istih(rijeci[brojRijeci], rijeci, brojRijeci);
			if (n != -1) { 
				iste[n]++;
			} else {
				iste[brojRijeci]++;
				brojRijeci++;
			}
		}
	} while (x != EOF);
	
	for (i = 0; i &lt; brojRijeci; i++) {
		f = 10000000;
		n = iste[i];
		for (j = 0; j &lt; 8; j++) {
			rijeci[i][j] = n/f+48;
			n -= n/f * f;
			f /= 10;
		}
	}
	
	for (i = 1; i &lt; brojRijeci; i++) {
		for (j = 0; j &lt; brojRijeci-1; j++) {
			if (poredi(rijeci[j], rijeci[j+1]) &lt; 0) {
				zamijeni(pom, rijeci[j]);
				zamijeni(rijeci[j], rijeci[j+1]);
				zamijeni(rijeci[j+1], pom);
			}
		}
	}
	
	fclose(ulaz);
	ulaz = fopen(ime_ulaz, "r");
	
	for (i = 0; i &lt; 10 &amp;&amp; i &lt; brojRijeci; i++) {
		fprintf(izlaz, "%s\n", rijeci[i]+8);
	}
	fprintf(izlaz, "\n");
	
	do {
		x = fgetc(ulaz);
		while (x != EOF &amp;&amp; slovo(x) == 0) {
			fprintf(izlaz, "%c", x);
			x = fgetc(ulaz);
		}
		n = 0;
		while (x != EOF &amp;&amp; slovo(x) == 1) {
			pom[n+8] = x;
			n++;
			x = fgetc(ulaz);
		}
		pom[n+8] = 0;
		
		m = ima_li_istih(pom, rijeci, min(brojRijeci, 10));
		
		if (m != -1) {
			fprintf(izlaz, "%c", m + 20);
		} else {
			for (i = 0; i &lt; n; i++) {
				fprintf(izlaz, "%c", pom[i+8]);
			}
		}
		if (x != EOF) {
			fprintf(izlaz, "%c", x);
		}
	} while (x != EOF);
	
	fclose(ulaz);
	fclose(izlaz);
	printf("Datoteka kompresovana.\n");
	return;
}

void dekompresuj (char *ime_ulaz, char *ime_izlaz) {
	char rijeci[10][10], x, y, *r;
	
	FILE *ulaz = fopen(ime_ulaz, "r");
	FILE *izlaz = fopen(ime_izlaz, "w");
	int brojRijeci = 0, n = 0;
	
	if (ulaz == NULL || izlaz == NULL) {
		return;
	}
	
	do { /* petlja za rijeci, pravi break ako nadje \n jedan do drugog */
		if (n != 1)
			n = 0;
		x = fgetc(ulaz);
		while (x != EOF &amp;&amp; x != '\n') {
			rijeci[brojRijeci][n++] = x;
			x = fgetc(ulaz);
		}
		rijeci[brojRijeci][n] = 0;
		brojRijeci++;
		y = fgetc(ulaz);
		if (y == '\n') {
			brojRijeci--;
			break;
		}
		rijeci[brojRijeci][0] = y;
		n = 1;
	} while (1);
	
	do {
		x = fgetc(ulaz);
		if (x &gt;= 20 &amp;&amp; x &lt;= 29) {
			r = rijeci[x-20];
			while (*r != 0) {
				fprintf(izlaz, "%c", *r);
				r++;
			}
		} else if (x != EOF) {
			fprintf(izlaz, "%c", x);
		}
		
	} while (x != EOF);
	
	fclose(ulaz);
	fclose(izlaz);
	printf("Datoteka dekompresovana.\n");
	
	return;
}

int main() {
	
	int izbor;
	char ulazna[100], izlazna[100];
	
	do {
		printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
		scanf("%d", &amp;izbor);
		if (izbor == 0) {
			break;
		}
		printf("Unesite ime ulazne datoteke: ");
		scanf("%s", &amp;ulazna);
		printf("Unesite ime izlazne datoteke: ");
		scanf("%s", &amp;izlazna);
		if (izbor == 1) {
			kompresuj(ulazna, izlazna);
		}
		else if(izbor == 2) {
			dekompresuj(ulazna, izlazna);
		}
	} while (izbor != 0);
	
	//kompresuj("ulaz.txt", "izlaz.txt");
	//dekompresuj("izlaz.txt", "ulaz.txt");
	return 0;
}
</pre>
</body>
</html>
