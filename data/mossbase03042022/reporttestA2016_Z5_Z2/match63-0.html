<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student7485.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student7485.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;ctype.h&gt;
#include &lt;string.h&gt;
//Unos stringa
<a name="2"></a><font color="#0000FF"><a href="match63-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_9.gif"/></a>

void unesi (char niz[], int velicina){
	char znak=getchar();
	if (znak=='\n') znak=getchar();
	int i=0;
	while (i&lt;velicina-1 &amp;&amp; znak!='\n'){
		niz[i]=znak;
		i++;
		znak=getchar();
	}
	niz[i]='\0';
}
//Funkcija vraca 1 ako je znak koji je primila slovo
	int slovo(int ch){
		if ((ch&gt;='a' &amp;&amp; ch&lt;='z')||(ch&gt;='A' &amp;&amp; ch&lt;='Z'))
			return 1;
		return 0;	
	}
//funkcija primi dva stringa i zamijeni ih	
	void kompresuj(char * naziv,char* naziv1){
</font><a name="6"></a><font color="#00FF00"><a href="match63-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

		FILE *ulaz=fopen(naziv,"r");
		FILE *ulazpom=fopen(naziv,"r");
		FILE *izlaz=fopen(naziv1,"w");
		char rijeci[1000][1000]={{0}},novired,c,pomoc[100];
</font>		int brojac[1000]={0},kontrola;
		int i,broj_rijeci=0,j,kraj,ima,temp;
		char rijec[100000],znak,znk;
		int duzina=0;
<a name="5"></a><font color="#FF0000"><a href="match63-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

		znak=fgetc(ulaz);
		while(znak!=EOF){
			duzina=0;
			while (slovo(znak)){
				rijec[duzina++]=znak;
				znak=fgetc(ulaz);
			}
		rijec[duzina]='\0';
		if (duzina&lt;10 &amp;&amp; duzina!=0){
</font>			ima=0;
<a name="4"></a><font color="#FF00FF"><a href="match63-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

			for (j=0;j&lt;broj_rijeci;j++){
				if (strcmp(rijeci[j],rijec)==0){
					ima=1;
					brojac[j]++;
					break;
				}
			}
			if (ima!=1){
				strcpy(rijeci[broj_rijeci],rijec);
				brojac[broj_rijeci++]=1;
			}
		}
		znak=fgetc(ulaz);
</font><a name="3"></a><font color="#00FFFF"><a href="match63-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

		}
		//Sortiranje rijeci po broju ponavljanja i leksikografski
		for (i=0;i&lt;broj_rijeci;i++){
			for (j=i+1;j&lt;broj_rijeci;j++){
				if (brojac[j]&gt;brojac[i] || (brojac[j]==brojac[i] &amp;&amp; strcmp(rijeci[i],rijeci[j])==1)){
</font>					temp=brojac[j];
					brojac[j]=brojac[i];
					brojac[i]=temp;
					strcpy(pomoc,rijeci[i]);
					strcpy(rijeci[i],rijeci[j]);
					strcpy(rijeci[j],pomoc);
				}
			}
		}
		kraj=10;
<a name="7"></a><font color="#0000FF"><a href="match63-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		novired='\n';
		if (broj_rijeci&lt;10) kraj=broj_rijeci;
		for (i=0;i&lt;kraj;i++){
			fputs(rijeci[i],izlaz);
			fputc(novired,izlaz);
</font>		}
		
<a name="8"></a><font color="#00FFFF"><a href="match63-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		c=fgetc(ulazpom);
		while(c!=EOF){
			duzina=0;
			while (slovo(c)){
				rijec[duzina++]=c;
				c=fgetc(ulazpom);
			}
			rijec[duzina]='\0';
</font>			
<a name="9"></a><font color="#FF00FF"><a href="match63-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

			kontrola=0;
			if (duzina&lt;10 &amp;&amp; duzina!=0){
				for (j=0;j&lt;kraj;j++){
					if (strcmp(rijeci[j],rijec)==0){
</font><a name="1"></a><font color="#00FF00"><a href="match63-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_13.gif"/></a>

						znk=j+20;
						kontrola=1;
						fputc(znk,izlaz);
						fputc(c,izlaz);
						break;
					}
				}
			}
			if (kontrola==0){
				char *r=rijec;
				while(*r!='\0'){
					fputc(*r,izlaz);
					r++;
				}
				fputc(c,izlaz);
			}
			c=fgetc(ulazpom);
		}
		printf("Datoteka kompresovana.\n");
		fclose(ulaz);
		fclose(ulazpom);
		fclose(izlaz);
	}
	
	
	void dekompresuj(char*naziv,char*naziv1){
		FILE *ulaz=fopen(naziv,"r");
		FILE *ulazpom=fopen(naziv,"r");
		FILE *izlaz=fopen(naziv1,"w");
		char rijeci[1000][1000]={{0}}, rijec[1000];
		int broj_rijeci=0,duzina=0,broj_mjesta=0,j;
</font><a name="0"></a><font color="#FF0000"><a href="match63-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_21.gif"/></a>

		char znak=fgetc(ulaz);
		int kontrola=0;
		while (znak!=EOF){
			duzina=0;
			kontrola=0;
		while (slovo(znak)){
			rijec[duzina++]=znak;
			znak=fgetc(ulaz);
		}
		rijec[duzina]='\0';
		if (duzina&lt;10 &amp;&amp; duzina!=0)
		strcpy(rijeci[broj_rijeci],rijec);
		int j;
		for (j=0;j&lt;broj_rijeci;j++){
			if (strcmp(rijeci[j],rijec)==0){
				kontrola=1;
				break;
			}
			if(kontrola)
			break;
			broj_rijeci++;
		}
		znak=fgetc(ulaz);
	}
	broj_mjesta=0;
	char c=fgetc(ulazpom);
	
	while(c!=EOF){
		if (c=='\n') broj_mjesta++; //Brojimo nova mjesta
		if (broj_mjesta==broj_rijeci) break;
		c=fgetc(ulazpom);
	}
	c=fgetc(ulazpom);
	while(c!=EOF){
		int n=0;
		if (c&gt;=20 &amp;&amp; c&lt;=30){
			char *p=rijeci[c-20];
			n=1;
			while (*p!='\0'){
				fputc (*p,izlaz);
				p++;
			}
		}
		if (n==0)
		fputc(c,izlaz);
		c=fgetc(ulazpom);
	}
	printf("Datoteka dekompresovana.\n");
	fclose(ulaz);
	fclose(ulazpom);
</font>	fclose(izlaz);
	}
	
	
int main(){
	char str[100],paket[100];
	int menu;
	do{
		printf("Odaberite:1-kompresuj,2-dekompresuj,0-izlaz: ");
		scanf("%d",&amp;menu);
		switch(menu){
			case 1: //Unosi se ulazna i izlazna datoteka i kompresuje se
			{
				printf("Unesite ime ulazne datoteke: ");
<a name="10"></a><font color="#FF0000"><a href="match63-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

				unesi(str,40);
				kompresuj(str,paket);
				break;
			}
			case 2: //Unosi se ulazna i izlazna datoteka i dekompresuje se
			{
				printf("Unesite ime ulazne datoteke: ");
				unesi(str,40);
				printf("Unesite ime izlazne datoteke: ");
				unesi(paket,40);
				dekompresuj(str,paket);
</font>				break;
			}
		}
	} while(menu!=0);
	return 0;
}</pre>
</body>
</html>
