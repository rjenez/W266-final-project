<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student2142.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student7392.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

/* UNOS STRINGA */

void unesi(char niz[], int velicina){
	char znak=getchar();
	int i=0;
	while(znak==' ')znak=getchar();
    while(znak=='\n')znak=getchar();
<a name="0"></a><font color="#FF0000"><a href="match332-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    while(i&lt;velicina-1 &amp;&amp; znak!='\n') {
        niz[i]=znak;
        i++;
        znak=getchar();
    }
    niz[i]='\0';
}

/* MIJENJA DVA STRINGA */

void zamjeni(char *rijec1, char *rijec2){
</font>	int i;
	char temp;
	for(i=0;i&lt;11;i++){
		temp=rijec1[i];
		rijec1[i]=rijec2[i];
		rijec2[i]=temp;
	}
}

/* KOMPRESUJE DATOTEKU UZ POSTOVANJE PRAVILA O KOMPRESOVANJU */

void kompresuj(char *imeulazne, char *imeizlazne){
	FILE* ulaz=fopen(imeulazne, "r");
	if(ulaz==NULL)return;
	FILE* izlaz=fopen(imeizlazne, "w");
	if(izlaz==NULL){
		fclose(ulaz);
		return;
	}
	int i;
	int brojrazl=0;
	char rijeci[1000][11];
	int koliko[1000];
	for(i=0;i&lt;1000;i++){
		rijeci[i][0]='\0';
		koliko[i]=0;
	}
	char rijec[1000];
	int c;
	int j;
	int duzina=0;
	int tempint;
	/* PAMTI RAZLICITE RIJECI I CUVA BROJ NJIHOVIH PONAVLJANJA */
	do{
		c=fgetc(ulaz);
		if((c&gt;='a' &amp;&amp; c&lt;='z')||(c&gt;='A' &amp;&amp; c&lt;='Z')){
			if(duzina&gt;9){
				duzina++;
			} else {
				rijec[duzina]=c;
				duzina++;
				rijec[duzina]='\0';
			}
		} else {
			if(duzina&gt;1 &amp;&amp; duzina&lt;10){
				for(i=0;i&lt;brojrazl;i++){
					if(strcmp(rijec, rijeci[i])==0){
						koliko[i]++;
						break;
					}
				}
				if(i==brojrazl){
					strcpy(rijeci[i], rijec);
					koliko[i]=1;
					brojrazl++;
				}
			}
			duzina=0;
			rijec[0]='\0';
		}
	}while(c!=EOF);
	/* SORTIRANJE RAZLICITIH RIJECI PO BROJU PONAVLJANJA UZ OCUVANJE LEKSIKOGRAFSKOG PORETKA */
	for(i=0;i&lt;brojrazl;i++){
		for(j=i;j&lt;brojrazl;j++){
			if(koliko[i]&lt;koliko[j]){
				tempint=koliko[i];
				koliko[i]=koliko[j];
				koliko[j]=tempint;
				zamjeni(rijeci[i], rijeci[j]);
			} else if(koliko[i]==koliko[j]){
				if(strcmp(rijeci[i], rijeci[j])&gt;0){
					tempint=koliko[i];
					koliko[i]=koliko[j];
					koliko[j]=tempint;
					zamjeni(rijeci[i], rijeci[j]);
				}
			}
		}
	}
	/* ISPIS PRVIH 10/9/8/7/6/5/4/3/2/1/0 NAJUCESTALIJIH RIJECI U DATOTEKU */ 
	for(i=0;i&lt;brojrazl;i++){
		if(i&lt;10)fprintf(izlaz, "%s\n", rijeci[i]);
	}
	if(brojrazl&lt;10)fprintf(izlaz, "\n");
	fclose(ulaz);
	duzina=0;
	rijec[0]='\0';
	ulaz=fopen(imeulazne, "r");
	/* MJENJANJE NAJCESCIH RIJECI ODGOVARAJUCIM KARAKTERIMA TE POPUNJAVANJE DATOTEKE */
	do{
		c=fgetc(ulaz);
		if((c&gt;='a' &amp;&amp; c&lt;='z')||(c&gt;='A' &amp;&amp; c&lt;='Z')){
			if(duzina&gt;9){
				duzina++;
				fprintf(izlaz, "%c", c);
			} else {
				rijec[duzina]=c;
				duzina++;
				rijec[duzina]='\0';
				if(duzina==10)fprintf(izlaz, "%s", rijec);
			}
			
		} else {
			if(duzina&lt;10){
				for(i=0;i&lt;brojrazl;i++){
					if(i&lt;10 &amp;&amp; strcmp(rijec, rijeci[i])==0){
						fprintf(izlaz, "%c", 20+i);
						break;
					}
				}
				if(i==brojrazl){
					fprintf(izlaz, "%s", rijec);
				}
			}
			if(c!=EOF)fprintf(izlaz, "%c", c);
			duzina=0;
			rijec[0]='\0';
		}
	}while(c!=EOF);
	printf("Datoteka kompresovana.\n");
	fclose(ulaz);
	fclose(izlaz);
}

/* DEKOMPRESUJE DATOTEKU UZ POSTOVANJE PRAVILA O DEKOMPRESOVANJU */

void dekompresuj(char *imeulazne, char *imeizlazne){
	FILE* ulaz=fopen(imeulazne, "r");
	if(ulaz==NULL)return;
	FILE* izlaz=fopen(imeizlazne, "w");
	if(izlaz==NULL){
		fclose(ulaz);
		return;
	}
	
	char top[10][10];
	int c;
	int duzina=0;
	int brojac=0;
	/* PRIDRUZIVANJE INDEKSA NAJCESCIM RIJECIMA */
	do{
		c=fgetc(ulaz);
		if(c==EOF)break;
		if(c!='\n'){
			top[brojac][duzina]=c;
			duzina++;
		} else {
			if(duzina==0){
				break;
			}
			top[brojac][duzina]='\0';
			brojac++;
			if(brojac==10)break;
			duzina=0;
		}
	}while(c!=EOF);
	/* ISPISIVANJE DEKOMPRESOVANIH KARAKTERA U DATOTEKU */
	do{
		c=fgetc(ulaz);
		if(c==EOF)break;
		if(c&gt;=20 &amp;&amp; c&lt;=29){
			fprintf(izlaz, "%s", top[c-20]);
		} else {
			fprintf(izlaz, "%c", c);
		}
	}while(c!=EOF);
	
	fclose(ulaz);
	fclose(izlaz);
	printf("Datoteka dekompresovana.\n");
}

int main() {
	int a;
	char datoteka1[500]="gg";
	char datoteka2[500]="izlaz.txt";
	do{
		printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
		scanf("%d", &amp;a);
		if(a==1){
			printf("Unesite ime ulazne datoteke: ");
			unesi(datoteka1, 500);
			printf("Unesite ime izlazne datoteke: ");
			unesi(datoteka2, 500);
			kompresuj(datoteka1, datoteka2);
		} if(a==2){
			printf("Unesite ime ulazne datoteke: ");
			unesi(datoteka1, 500);
			printf("Unesite ime izlazne datoteke: ");
			unesi(datoteka2, 500);
			dekompresuj(datoteka1, datoteka2);
		}
	}while(a);
	return 0;
}
</pre>
</body>
</html>
