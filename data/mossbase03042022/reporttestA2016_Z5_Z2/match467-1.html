<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student3186.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student4973.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
char ucitajJednuRijec(char *buffer, FILE* datoteka){
	int i = 0;
	char c;
	while(1){
		c = getc(datoteka);
		if(!((c &gt;= 'a' &amp;&amp; c &lt;= 'z') || (c &gt;= 'A' &amp;&amp; c &lt;= 'Z')))
			break;
		if(i &lt; 500);
			buffer[i++] = c;
	}
	buffer[i] = '\0';
	return c;
}


int kompresuj(char *ulaznaDatoteka,char *izlaznaDatoteka){
	char buffer[100];
	FILE* ulaz = fopen(ulaznaDatoteka, "r");
	FILE* izlaz = fopen(izlaznaDatoteka,"w");
	char tmp[15];
	int najveca = 0,maxrijeci = 10, tmpduzina;
	if(ulaz == NULL) return 0;
	char rijeci[1000][15];
	int duzine[1000], duzina, brojrijeci = 0, pomocna, i, j;
	char c;
	while(1){
		c = ucitajJednuRijec(buffer,ulaz);
		duzina = strlen(buffer);
		if(duzina &gt; 1 &amp;&amp; duzina &lt; 10){
			pomocna = -1;
			for(i = 0; i &lt; brojrijeci; i++){
				if(strcmp(rijeci[i],buffer) == 0){
					pomocna = i;
					break;
				}
			}
			if(pomocna != -1){
				duzine[pomocna]++;
			} else {
				strcpy(rijeci[brojrijeci],buffer);
				duzine[brojrijeci] = 1;
				brojrijeci++;
			}
		}
		if(c == EOF) break;
	}
	if(brojrijeci &lt; maxrijeci) maxrijeci = brojrijeci;
	for(i = 0; i &lt; maxrijeci; i++){
		najveca = i;
		for(j = i+1; j &lt; brojrijeci; j++){
			if(duzine[najveca] &lt; duzine[j]){
				najveca = j;
			} else if( duzine[najveca] == duzine[j] &amp;&amp; strcmp(rijeci[j],rijeci[najveca]) &lt; 0){
				najveca = j;
			}
		}
		if(najveca != i){
			strcpy(tmp,rijeci[najveca]);
			strcpy(rijeci[najveca],rijeci[i]);
			strcpy(rijeci[i],tmp);
		
<a name="0"></a><font color="#FF0000"><a href="match467-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

			tmpduzina = duzine[najveca];
			duzine[najveca] = duzine[i];
			duzine[i] = tmpduzina;
		}
	}
	for(i = 0; i &lt; maxrijeci; i++){
</font>		fprintf(izlaz,"%s\n",rijeci[i]);
	}
	fprintf(izlaz,"\n");
	fclose(ulaz);
	ulaz = fopen(ulaznaDatoteka, "r");
	while(1){
		c = ucitajJednuRijec(buffer,ulaz);
		duzina = strlen(buffer);
		if(duzina &gt; 1 &amp;&amp; duzina &lt; 10){
			pomocna = -1;
			for(i = 0; i &lt; maxrijeci; i++){
				if(strcmp(rijeci[i],buffer) == 0){
					pomocna = i;
					break;
				}
			}
			if(pomocna != -1){
				fprintf(izlaz,"%c", (char)(20 +i));
			}
			else {
				fprintf(izlaz,"%s", buffer);
			}
		} else {
			fprintf(izlaz,"%s",buffer);
		}
		fprintf(izlaz, "%c", c);
		if(c == EOF) break;
		
	}
	fclose(izlaz);
	printf("Datoteka kompresovana.\n");
	return 1;
}

int dekompresuj(char *ulaznaDatoteka,char *izlaznaDatoteka){
	//return 1;
	FILE *ulaz, *izlaz;
	ulaz = fopen(ulaznaDatoteka, "r");
	if(ulaz == NULL) return 0;
	izlaz = fopen(izlaznaDatoteka,"w");
	if(izlaz == NULL){
		fclose(ulaz);
		return 0;
	}
	char c, rijeci[15][10], buffer[50];
	int i, j, brojrijeci = 0,duzina;
	while(1){
		c = ucitajJednuRijec(buffer,ulaz);
		if(buffer[0] == '\0'){
			break;
		}
		strcpy(rijeci[brojrijeci++],buffer);
	}
	while(1){
		c = ucitajJednuRijec(buffer,ulaz);
		duzina = strlen(buffer);
		if(duzina == 0 &amp;&amp; c&gt;= 20 &amp;&amp; c &lt;=29){
			fprintf(izlaz,"%s",rijeci[c - 20]);
		} else {
			fprintf(izlaz,"%s",buffer);
			
		fprintf(izlaz,"%c",c);
			
		}
		if(c == EOF) break;
	}
	fclose(ulaz);
	fclose(izlaz);
	printf("Datoteka dekompresovana.\n");
	return 1;
}

int main() {
	int pom, rezultat;
	char c;
	char ulaznaDatoteka[50],izlaznaDatoteka[50];
	do{
	printf("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
	scanf("%d", &amp;pom);
	c = getchar();
	if(pom == 0)
		return 0;
	printf("Unesite ime ulazne datoteke: ");
	scanf("%50s",ulaznaDatoteka);
	printf("Unesite ime izlazne datoteke: ");
	scanf("%50s",izlaznaDatoteka);
	if(pom == 1){
		rezultat = kompresuj(ulaznaDatoteka,izlaznaDatoteka);
	}
	if(pom == 2){
		rezultat = dekompresuj(ulaznaDatoteka,izlaznaDatoteka);
	}
	}while(pom != 0);		
	return 0;
}
</pre>
</body>
</html>
