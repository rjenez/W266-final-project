<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student5562.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z2/student5562.c<p></p><pre>
#include &lt;stdio.h&gt;

struct Rijec{
	char sadrzaj[50];
	int pon;
};

int strcmpp(char *rijec1, char *rijec2, int velikamala){
    
    while (*rijec1 != '\0' &amp;&amp; *rijec2 != '\0'){
        
        
        if (velikamala == 1){
            
            if (*rijec1 &lt; *rijec2)
                return -1;
            if (*rijec1 &gt; *rijec2)
                return 1;
            rijec1++;
            rijec2++;
        }
        else {
            if (*rijec1 + 32 &lt; *rijec2)
                return -1;
            if (*rijec1 - 32 &gt; *rijec2)
                return 1;
            rijec1++;
            rijec2++;
        }
    }
    
    if (*rijec1 == '\0' &amp;&amp; *rijec2 != '\0')
        return -1;
    
    return 0;
}

int jednake(char * prva, char* druga){
	
	char *p = prva;
	char *q = druga;
	
	while (*p != '\0' &amp;&amp; *q != '\0'){
		
		if (*p != *q)
			return 0;
		
		
		
		if (*(p + 1) == '\0' &amp;&amp; *(q + 1) == '\0')
			return 1;
		
		p++;
		q++;
		
	}
	
}

int zabiljezena (char * rijec, struct Rijec * rijeci, int i){
	
	int duz = 0;
	int j, k;
	char * p = rijec;
	
	while (*p != '\0'){
		p++;
		duz++;
	}
		
	
	
	for (j = 0; j &lt; i; j++){
		
		for (k = 0; k &lt; duz; k++){
			if (rijeci[j].sadrzaj[k] != rijec[k])
				break;
				
			if (k == duz - 1 &amp;&amp; rijeci[j].sadrzaj[k + 1] == '\0' &amp;&amp; rijec[k + 1] == '\0')
				return j + 1;
		}
	}
	return 0;
}

void kompresuj(char* imeulaz, char* imeizlaz){
	
	struct Rijec rijeci [1000];
	struct Rijec temp;
	char znak;
	char rijec[50];
	int j = 0, i = 0, k,  kraj = 0, ind, duga = 0, slova = 0, max, br = 0, ne = 0, jdn = 0;
	
	FILE * ulaz, *izlaz;
		
	ulaz = fopen(imeulaz, "r");
	izlaz = fopen(imeizlaz, "w");
		
	if (ulaz == NULL || izlaz == NULL){
		printf("Greska pri otvaranju datoteke.");
	}
	
	/*Izvuci rijeci i ponavljanja*/
	znak = fgetc(ulaz);
	while (!kraj){
		
		if ((znak &gt;= 'A' &amp;&amp; znak &lt;= 'Z') || (znak &gt;= 'a' &amp;&amp; znak &lt;= 'z')){
			rijec[j] = znak;
			j++;
			if (j &gt; 1 &amp;&amp; j &lt; 10)
				duga = 1;
			else
				duga = 0;
			slova = 1;
		}
		else {
				
			rijec[j] = '\0';
			
			
			if ((ind = zabiljezena(rijec, rijeci, i)) == 0 &amp;&amp; slova &amp;&amp; duga){
				slova = 0;
				duga = 0;
				rijeci[i].pon = 1;
				
				if (i &lt; 10){
				for (k = 0; k &lt;= j; k++)
					rijeci[i].sadrzaj[k] = rijec[k];
				
				i++;
				}
				
			}
			else{
				if (slova &amp;&amp; duga){
					rijeci[ind - 1].pon++;
					slova = 0;
					duga = 0;
				}
			}
			
			j = 0;
			
			if (znak == EOF)
				break;
		}
	
		znak = fgetc(ulaz);
		
	}
	
	/*Sort*/
	
	for (k = 0; k &lt; i; k++){
		
		max = k;
		
		for (j = k + 1; j &lt; i; j++){
			
			if (rijeci[j].pon &gt; rijeci[max].pon)
				max = j;
				
			if (rijeci[j].pon == rijeci[max].pon &amp;&amp; strcmpp(rijeci[j].sadrzaj, rijeci[max].sadrzaj, 1) == -1)
				max = j;
		}
		
<a name="0"></a><font color="#FF0000"><a href="match443-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

		temp = rijeci[k];
		rijeci[k] = rijeci[max];
		rijeci[max] = temp;
		
	}
	
	/*Print*/
	for (k = 0; k &lt; i; k++)
</font>		fprintf(izlaz, "%s\n", rijeci[k].sadrzaj);
	
	fprintf(izlaz, "\n");
	
	j = 0;
	slova = 0;
	fseek(ulaz, 0, SEEK_SET);
	znak = fgetc(ulaz);
	while (!kraj){
		
		if ((znak &lt; 'A' || znak &gt; 'z' || (znak &gt; 'Z' &amp;&amp; znak &lt; 'a')) &amp;&amp; znak != EOF)
			fprintf(izlaz, "%c", znak);
		
		if ((znak &gt;= 'A' &amp;&amp; znak &lt;= 'Z') || (znak &gt;= 'a' &amp;&amp; znak &lt;= 'z')){
			
			while (((znak &gt;= 'A' &amp;&amp; znak &lt;= 'Z') || (znak &gt;= 'a' &amp;&amp; znak &lt;= 'z')) &amp;&amp; znak != EOF){
				rijec[j] = znak;
				j++;
				znak = fgetc(ulaz);
				ne = 1;
				
			}
			rijec[j] = '\0';
			
			j = 0;
			
			for (k = 0; k &lt; i; k++){
				if (jednake(rijec, rijeci[k].sadrzaj)){
					fprintf(izlaz, "%c", (char)(k + 20));
					break;
						
				}
				
				if (k == (i - 1))
					fprintf(izlaz, "%s", rijec);
					
			}
			
		}
		
		if (znak == EOF)
			break;
		if (!ne)	
			znak = fgetc(ulaz);
		ne = 0;
		
	}
	
	fclose(izlaz);
	fclose(ulaz);
	printf("Datoteka kompresovana.\n");
}

void dekompresuj(char* imeulaz, char* imeizlaz){
	
	FILE * ulaz, *izlaz;
	int i = 0, k = 0, kraj = 0, duz = 0, duz2;
		
	ulaz = fopen(imeulaz, "r");
	izlaz = fopen(imeizlaz, "w");
		
	if (ulaz == NULL || izlaz == NULL){
		printf("Greska pri otvaranju datoteke.");
	}
	
	char znak;
	char rijeec[10][50];
	
	fseek(ulaz, 0, SEEK_SET);
	
	znak = fgetc(ulaz);
	while (znak != EOF){
		
		while (znak != '\n' &amp;&amp; znak != EOF){
			
			if (k &lt; 49){
				rijeec[i][k] = znak;
			
			k++;
			}
			znak = fgetc(ulaz);
			duz++;
		}
		rijeec[i][k] = '\0';
		if (i &lt; 9) i++; k = 0; duz2 = duz; duz = 0;
		
		if (znak == EOF){
			fseek(ulaz, -duz2, SEEK_CUR);
			break;
		}
		
		znak = fgetc(ulaz);
	}
	
	znak = fgetc(ulaz);
	while (znak != EOF){
		if ((int)znak &gt;= 20 &amp;&amp; (int)znak &lt;= 29)
			fprintf(izlaz, "%s", rijeec[(int)znak - 20]);
		else	
			fprintf(izlaz, "%c", znak);
		znak = fgetc(ulaz);
	}
	
	fclose(ulaz);
	fclose(izlaz);
	printf("Datoteka dekompresovana.\n");
	
}

int main() {
	
	int odabir = 0;
	char imeulaz[50], imeizlaz[50];
	
	FILE* ulaz = NULL, *izlaz = NULL;
	
	do{
		printf ("Odaberite: 1 - kompresuj, 2 - dekompresuj, 0 - izlaz: ");
		scanf ("%d", &amp;odabir);
		
		if (odabir == 0){
			if (ulaz != NULL &amp;&amp; izlaz != NULL){
				fclose (ulaz);
				fclose (izlaz);
			}
				return 0;
			
		}
		else if (odabir == 1){
			
			printf("Unesite ime ulazne datoteke: ");
			scanf("%s", imeulaz);
			printf("Unesite ime izlazne datoteke: ");
			scanf("%s", imeizlaz);
			
			kompresuj(imeulaz, imeizlaz);
			
		}
		else if (odabir == 2){
			printf("Unesite ime ulazne datoteke: ");
			scanf("%s", imeulaz);
			printf("Unesite ime izlazne datoteke: ");
			scanf("%s", imeizlaz);
			
			dekompresuj(imeulaz, imeizlaz);
		}
	
	} while (odabir != 0);
	
	return 0;
}
</pre>
</body>
</html>
