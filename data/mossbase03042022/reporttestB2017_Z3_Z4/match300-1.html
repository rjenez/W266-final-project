<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student6054.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9273.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;queue&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;

enum class Boje{Pik,Tref,Herc,Karo};

std::string printBoju(Boje boja);

bool DaLiJeValidan(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil){
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first!=Boje::Pik &amp;&amp; it-&gt;first!=Boje::Karo &amp;&amp; it-&gt;first!=Boje::Herc &amp;&amp; it-&gt;first!=Boje::Tref){
            return false;
            break;
        }
        if(it-&gt;second!="2" &amp;&amp; it-&gt;second!="3" &amp;&amp; it-&gt;second!="4" &amp;&amp; it-&gt;second!="5" &amp;&amp; it-&gt;second!="6" &amp;&amp; it-&gt;second!="7" &amp;&amp; it-&gt;second!="8" &amp;&amp; it-&gt;second!="9" &amp;&amp;
            it-&gt;second!="10" &amp;&amp; it-&gt;second!="J" &amp;&amp; it-&gt;second!="Q" &amp;&amp; it-&gt;second!="K" &amp;&amp; it-&gt;second!="A") {
                return false;
                break;
        }
    }
    return true;
}

std::vector&lt;std::string&gt; Elementi{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

int pretvoriUInt(std::string par){
        if(par=="J") return 11;
        else if(par=="Q") return 12;
        else if(par=="K") return 13;
        else if(par=="A") return 14;
        return std::stoi(par);
}

void sortirajSpil(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil){
    spil.sort( [](std::pair&lt;Boje, std::string&gt; &amp;a, std::pair&lt;Boje, std::string&gt; &amp;b) -&gt; bool
    {
       return pretvoriUInt(a.second) &lt; pretvoriUInt(b.second); 
    });
}

bool DaLiSuSortirani (std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil){
 
    bool gotovPik(false);
    bool gotovTref(false);
    bool gotovHerc(false);
    
    int brojPik(0);
    int brojTref(0);
    int brojHerc(0);
    int brojKaro(0);
    
    auto itPikP = spil.begin();
    auto itPikK = spil.begin();
    auto itTrefP = spil.begin();
    auto itTrefK = spil.begin();
    auto itHercP = spil.begin();
    auto itHercK = spil.begin();
    auto itKaroP = spil.begin();
    auto itKaroK = spil.begin();
    
    for(auto it = spil.begin(); it != spil.end(); it++){
        if(it-&gt;first==Boje::Pik &amp;&amp; brojPik==0){
            if(gotovPik) return false;
            itPikP = it;
            itPikK = it;
            brojPik++;
        }
        else if(it-&gt;first==Boje::Pik){
            if(gotovPik) return false;
            itPikK++;
            brojPik++;
        }
        
        if(it-&gt;first==Boje::Tref &amp;&amp; brojTref==0){
            gotovPik = true;
            if(gotovTref) return false; 
            itTrefP=it;
            itTrefK=it;
            brojTref++;
        }
        else if(it-&gt;first==Boje::Tref){
            if(gotovTref) return false;
            itTrefK++;
            brojTref++;
        }
        
        if(it-&gt;first==Boje::Herc &amp;&amp; brojHerc==0){
            gotovPik = true;
            gotovTref = true;
            if(gotovHerc) return false;
            itHercP=it;
            itHercK=it;
            brojHerc++;
        }
        else if(it-&gt;first==Boje::Herc){
            if(gotovHerc) return false;
            itHercK++;
            brojHerc++;
        }
        if(it-&gt;first==Boje::Karo &amp;&amp; brojKaro==0){
            gotovPik = true;
            gotovTref = true;
            gotovHerc = true;
            itKaroP=it;
            itKaroK=it;
            brojKaro++;
        }
        else if(it-&gt;first==Boje::Karo){
            itKaroK++;
            brojKaro++;
        }
    }
    
    if(brojPik &gt; 1){
        auto prethodni = itPikP;
       do{
            itPikP++;
            if(pretvoriUInt(itPikP-&gt;second) &lt;= pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while(itPikP!=itPikK);
    }
    
    if(brojTref&gt;1){
        auto prethodni=itTrefP;
        do{
            itTrefP++;
            if(pretvoriUInt(itTrefP-&gt;second)&lt;=pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while (itTrefP!=itTrefK); 
    }    
    if(brojHerc&gt;1){
        auto prethodni=itHercP;
        do{
            itHercP++;
            if(pretvoriUInt(itHercP-&gt;second)&lt;=pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while(itHercP!=itHercK);
    }
    
    if(brojKaro&gt;1){
        auto prethodni=itKaroP;
        do{
            itKaroP++;
            if(pretvoriUInt(itKaroP-&gt;second)&lt;=pretvoriUInt(prethodni-&gt;second))
                return false;
            prethodni++;
        }while(itKaroP!=itKaroK);
    }
    return true;
    
}

<a name="5"></a><font color="#FF0000"><a href="match300-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; KreirajSpil(){
    std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil ;
    std::pair&lt;Boje,std::string&gt; par;
</font>    for(int i=0;i&lt;4;i++){
        Boje trenutnaBoja=(Boje)i;
        for(int j=0;j&lt;Elementi.size();j++){
<a name="3"></a><font color="#00FFFF"><a href="match300-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            par={trenutnaBoja,Elementi.at(j)};
            spil.push_back(par);
        }
    }
    return spil;
}

void IzbaciKarte( std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil,  std::multimap&lt;Boje,std::string&gt; &amp;m){
</font>    if((spil.size()&gt;52) || (!DaLiSuSortirani(spil)) || (!DaLiSuSortirani(spil))) throw std::logic_error("Neispravna lista!");
   auto it=spil.begin();
    while(it!=spil.end()){
      auto iter=m.begin();
      while(iter!=m.end()){
          if( (it-&gt;first==iter-&gt;first) &amp;&amp; (it-&gt;second==iter-&gt;second) ){
              if(m.size()&gt;1)
                iter=m.erase(iter);
              else 
                m.clear();
              
              if(spil.size()&gt;1)
                it=spil.erase(it);
              else
                spil.clear();
          }
          if(m.size()&gt;0)
            iter++;
          else
            iter=m.end();
      }
      if(spil.size()&gt;0)
        it++;
      else
        it=spil.end();
   }
}

<a name="7"></a><font color="#0000FF"><a href="match300-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil,const short int &amp;r, const int &amp;b){
    if(b&lt;1 || r&lt;1 ||r&gt;52) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    if(spil.size()&gt;52 || (!DaLiJeValidan(spil)) || (!DaLiSuSortirani(spil)) ) throw std::logic_error("Neispravna lista!");
    
    std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; povratni ;
    auto it(spil.begin());
    int pozicija(0);
    int finalna;
    int pomjer;
    
    for(int i = 0; i &lt; b; i++){
        finalna=pozicija+r;
        if(finalna &gt; spil.size()){
            //pomjer = finalna - (spil.size());
            pozicija = pomjer;
        }
        else{
            pomjer = r-1;
            pozicija += r;
        }
        if(std::distance(it, spil.end()) &gt;= r){
        
            std::advance(it, pomjer);
            pozicija-=1;
        }
        else{
          
            pomjer+=1;
            std::advance(it, pomjer);
            pozicija-=1;
        }
        povratni.push(std::make_pair(printBoju(it-&gt;first),it-&gt;second));
        if(spil.size()&gt;1)
            it=spil.erase(it);
        else
            spil.clear();
    }
    return povratni;    
}

Boje vratiEnum(std::string s){
    if(s=="Pik") return Boje::Pik;
    else if(s=="Tref") return Boje::Tref;
    else if(s=="Herc") return Boje::Herc;
    else if(s=="Karo") return Boje::Karo;
    return Boje::Pik;
}

bool DaLiJeRedValidan(std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; red){
    while (!red.empty()) {
        if(red.front().first!="Pik" &amp;&amp; red.front().first!="Tref" &amp;&amp; red.front().first!="Herc" &amp;&amp; red.front().first!="Karo"){
            return false;
            break;
        }
        if(red.front().second!="2" &amp;&amp; red.front().second!="3" &amp;&amp; red.front().second!="4" &amp;&amp; red.front().second!="5" &amp;&amp; red.front().second!="6" &amp;&amp; red.front().second!="7" &amp;&amp; red.front().second!="8" &amp;&amp; 
            red.front().second!="9" &amp;&amp; red.front().second!="10" &amp;&amp; red.front().second!="J" &amp;&amp; red.front().second!="Q" &amp;&amp; red.front().second!="K" &amp;&amp; red.front().second!="A" ){
                return false;
                break;
            }
        red.pop();
    }
    return true;
}


void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil,std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;povratni, int n){
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(spil.size()&gt;52 || (!DaLiJeValidan(spil)) || (!DaLiSuSortirani(spil))) throw std::logic_error("Neispravna lista!");
    if(n&gt;povratni.size()) throw std::range_error("Nedovoljno karata u redu!");
    if(!DaLiJeRedValidan(povratni)) throw std::logic_error("Neispravne karte!");
    
    
    for(int i=0;i&lt;n;i++){
            spil.push_back(std::make_pair(vratiEnum(povratni.front().first),povratni.front().second));
            povratni.pop();
    }
    
    sortirajSpil(spil);
    
}

std::string printBoju(Boje boja){
    switch(boja) {
        case Boje::Pik:{
            return "Pik";
            break;
        }
        case Boje::Tref:{
            return "Tref";
            break;
        }
        case Boje::Herc:{
            return "Herc";
            break;
        }
        case Boje::Karo:{
            return "Karo";
            break;
        }
    }
    return "greska";
}

void ispisiMapu(std::multimap&lt;Boje, std::string&gt; m){
    if(m.size()==0) std::cout &lt;&lt; "Nema clanova u mapi!" &lt;&lt; std::endl;
    for(auto it=m.begin(); it!=m.end(); it++){
        std::cout &lt;&lt; printBoju(it-&gt;first) &lt;&lt; " " &lt;&lt; it-&gt;second &lt;&lt; std::endl;
    }
}

void ispisiQueue(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; q){
    if(q.empty()) std::cout &lt;&lt; "Nema clanova u queueu!" &lt;&lt; std::endl;
    while(!q.empty()){
        std::cout &lt;&lt; q.front().first &lt;&lt; " " &lt;&lt; q.front().second&lt;&lt; std::endl;
        q.pop();
    }
}

<a name="0"></a><font color="#FF0000"><a href="match300-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

void ispisiListu(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt;spil){
    std::cout &lt;&lt; "Pik: ";
    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Pik) std::cout &lt;&lt; it-&gt;second&lt;&lt;" ";   
    }
    std::cout &lt;&lt; std::endl;
</font>    
    std::cout &lt;&lt; "Tref: ";
<a name="1"></a><font color="#00FF00"><a href="match300-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Tref) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
</font>    
    std::cout &lt;&lt; "Herc: ";
<a name="2"></a><font color="#0000FF"><a href="match300-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Herc) std::cout &lt;&lt; it-&gt;second &lt;&lt;" ";
    }
    std::cout &lt;&lt; std::endl;
</font>    
    std::cout &lt;&lt; "Karo: ";
<a name="4"></a><font color="#FF00FF"><a href="match300-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    for(auto it=spil.begin();it!=spil.end();it++){
        if(it-&gt;first==Boje::Karo) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
</font>    }
    std::cout  &lt;&lt; std::endl;
        
}
int prebrojiKarte(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt;spil){
    int brojac(0);
    for(auto it=spil.begin();it!=spil.end();it++){
        brojac++;
    }
return brojac;
}


int main ()
{   int r,b,a;
    std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil{{Boje::Pik,"4"},{Boje::Tref,"2"}};
     
    std::multimap&lt;Boje,std::string&gt; m{{Boje::Karo,"2"},{Boje::Pik,"3"},{Boje::Tref,"3"}};
    
  try{
      
    spil=KreirajSpil();
    
    std::cout &lt;&lt; "Unesite korak razbrajanja: " ;
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: " ;
    std::cin &gt;&gt; b;
   auto queue1 = IzbaciKarteRazbrajanjem(spil, r, b);
   std::cout &lt;&lt; "U spilu trenutno ima "&lt;&lt;prebrojiKarte(spil)&lt;&lt;" karata, i to:" &lt;&lt; std::endl;
   ispisiListu(spil);
<a name="6"></a><font color="#00FF00"><a href="match300-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

   std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: " ;
   std::cin &gt;&gt; a;
   VratiPrvihNKarata(spil,queue1,a);
   std::cout &lt;&lt; "U spilu trenutno ima "&lt;&lt;prebrojiKarte(spil)&lt;&lt;" karata, i to:" &lt;&lt; std::endl;
</font>   ispisiListu(spil);
  } 
  catch(std::exception &amp;e){
      std::cout &lt;&lt; "Izuzetak: "&lt;&lt;e.what() &lt;&lt; std::endl;
  }
	return 0;
}
</pre>
</body>
</html>
