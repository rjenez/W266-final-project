<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8006.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8006.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;list&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;

<a name="0"></a><font color="#FF0000"><a href="match171-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

enum class Boje {Pik, Tref, Herc, Karo};

typedef std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; Spil;
typedef std::queue&lt;std::pair&lt;Boje, std::string&gt;&gt; Red;

int VrijednostKarte(const std::string &amp;karta) {
    if (karta == "2") return 1;
    else if (karta == "3") return 2;
    else if (karta == "4") return 3;
    else if (karta == "5") return 4;
    else if (karta == "6") return 5;
    else if (karta == "7") return 6;
    else if (karta == "8") return 7;
    else if (karta == "9") return 8;
    else if (karta == "10") return 9;
    else if (karta == "J") return 10;
    else if (karta == "Q") return 11;
    else if (karta == "K") return 12;
    else if (karta == "A") return 13;
    return 0;
}

Spil KreirajSpil() {
    Spil karte;
    const std::string vrijednost[13] {"2", "3", "4", "5", "6", "7", "8", "9",
        "10", "J", "Q", "K", "A"};
    for (int i = 0; i &lt; 4; i++) 
        for (int j = 0; j &lt; 13; j++) {
            if (i == 0) 
                karte.push_back(std::make_pair(Boje::Pik, vrijednost[j]));
            else if (i == 1)
                karte.push_back(std::make_pair(Boje::Tref, vrijednost[j]));
            else if (i == 2)
                karte.push_back(std::make_pair(Boje::Herc, vrijednost[j]));
            else 
                karte.push_back(std::make_pair(Boje::Karo, vrijednost[j]));
        }
    return karte;
}

template &lt;typename Karte&gt;
bool ProvjeraSpila(const Karte &amp;spil) {
    if (spil.size() &gt; 52) return false;
    bool ispravno(true);
    for_each(spil.begin(), spil.end(), [&amp;ispravno](std::pair&lt;Boje, std::string&gt; karta) {
        if (!VrijednostKarte(karta.second)) ispravno = false;
    });
    if (!ispravno) return false;
    for (auto it1 = spil.begin(); it1 != spil.end(); it1++) 
        for (auto it2 = it1; it2 != spil.end(); it2++) 
            if (it1-&gt;first &gt; it2-&gt;first 
            || (it1 != it2 &amp;&amp; it1-&gt;first == it2-&gt;first 
            &amp;&amp; VrijednostKarte(it1-&gt;second) &gt;= VrijednostKarte(it2-&gt;second)))
                return false;
    return true;
}

void IzbaciKarte(Spil &amp;spil, std::multimap&lt;Boje, std::string&gt; karte) {
    if (!ProvjeraSpila(spil)) throw std::logic_error("Neispravna lista!");
    for (auto it = karte.begin(); it != karte.end(); it++) {
        auto karta(std::find_if(spil.begin(), spil.end(), 
        [it] (std::pair&lt;Boje, std::string&gt; a) {
            return it-&gt;first == a.first &amp;&amp; it-&gt;second == a.second;
        }));
        if (karta != spil.end()) {
            spil.erase(karta);
            karte.erase(it--);
        }
    }
}

Red IzbaciKarteRazbrajanjem(Spil &amp;spil, short int r, int b) {
    if (!ProvjeraSpila(spil) || r &lt; 1 || r &gt; 52 || b &lt; 1)
        throw std::logic_error("Neispravni elementi za izbacivanje!");
    Red izbacene;
    if (!spil.size()) return izbacene;
    auto karta(spil.begin());
    for (int br_izbacenih = 0; br_izbacenih &lt; b; br_izbacenih++) {
        for (short int korak = 1; korak &lt; r; korak++) {
            if (karta == spil.end()) karta = spil.begin();
            karta++;
        }
        izbacene.push(*karta);
        auto obrisi(karta);
        karta++;
        spil.erase(obrisi);
    }
    return izbacene;
}

void VratiPrvihNKarata(Spil &amp;spil, Red &amp;red, int n) {
    if (n &lt; 0) throw std::domain_error("Broj n je besmislen!");
    if (n &gt; red.size()) throw std::range_error("Nedovoljno karata u redu!");
    for (int i = 0; i &lt; red.size(); i++) {
        if (!VrijednostKarte(red.front().second))
            throw std::logic_error("Neispravne karte!");
        red.push(red.front()); red.pop();
    }
    ProvjeraSpila(spil);
    int vel(red.size()), br_izbacenih(0);
    for (int i = 0; i &lt; vel; i++) {
        if (br_izbacenih == n) break;
        if (!std::binary_search(spil.begin(), spil.end(), red.front())) {
            spil.push_back(red.front());
            red.pop(); br_izbacenih++;
        }
    }
    spil.sort([](std::pair&lt;Boje, std::string&gt; a, std::pair&lt;Boje, std::string&gt; b) {
        if (a.first == b.first) 
            return VrijednostKarte(a.second) &lt; VrijednostKarte(b.second);
        return a.first &lt; b.first;
    });
}

void IspisiZaBoju(const Spil &amp;spil, Boje b) {
    for (auto it = spil.begin(); it != spil.end(); it++)
        if (it-&gt;first == b) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
    std::cout &lt;&lt; std::endl;
}

void IspisiSpil(const Spil &amp;spil) {
    std::cout &lt;&lt; "Pik: "; IspisiZaBoju(spil, Boje::Pik);
    std::cout &lt;&lt; "Tref: "; IspisiZaBoju(spil, Boje::Tref);
    std::cout &lt;&lt; "Herc: "; IspisiZaBoju(spil, Boje::Herc);
    std::cout &lt;&lt; "Karo: "; IspisiZaBoju(spil, Boje::Karo);
}

int main ()
{
    short int r;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; r;
    int b;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; b;
    try {
        auto spil(KreirajSpil());
        auto izbacene(IzbaciKarteRazbrajanjem(spil, r, b));
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:" 
            &lt;&lt; std::endl;
        IspisiSpil(spil);
        int n;
        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; n;
        VratiPrvihNKarata(spil, izbacene, n);
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:"
            &lt;&lt; std::endl;
        IspisiSpil(spil);
    }
    catch (std::domain_error e) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
    }
    catch (std::range_error e) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
    }
    catch (std::logic_error e) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
    }
    catch (...) {}
	return 0;
</font>}
</pre>
</body>
</html>
