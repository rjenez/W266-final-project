<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student5015.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9113.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match20-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;list&gt;
#include &lt;sstream&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;queue&gt;
#include &lt;iterator&gt;
enum class Boje{Pik, Tref, Herc, Karo}; 
template &lt;typename T&gt; std::string PretvoriUString(T x) {    std::ostringstream s; s &lt;&lt; x; return s.str();    }  
std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; KreirajSpil(){
    std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil;
    for(int i=0;i&lt;9;i++){
        std::pair&lt;Boje,std::string&gt; a;
        std::string broj=PretvoriUString(i+2);
        a=std::make_pair(Boje::Pik,broj);
        spil.push_back(a);
    }
    std::pair&lt;Boje,std::string&gt; a;
    a=std::make_pair(Boje::Pik,'J');
    spil.push_back(a);
    a=std::make_pair(Boje::Pik,'Q');
    spil.push_back(a);
    a=std::make_pair(Boje::Pik,'K');
    spil.push_back(a);
    a=std::make_pair(Boje::Pik,'A');
    spil.push_back(a);
     for(int i=0;i&lt;9;i++){
        std::pair&lt;Boje,std::string&gt; a;
        std::string broj=PretvoriUString(i+2);
        a=std::make_pair(Boje::Tref,broj);
        spil.push_back(a);
    }
    a=std::make_pair(Boje::Tref,'J');
    spil.push_back(a);
    a=std::make_pair(Boje::Tref,'Q');
    spil.push_back(a);
    a=std::make_pair(Boje::Tref,'K');
    spil.push_back(a);
    a=std::make_pair(Boje::Tref,'A');
    spil.push_back(a);
     for(int i=0;i&lt;9;i++){
        std::pair&lt;Boje,std::string&gt; a;
        std::string broj=PretvoriUString(i+2);
        a=std::make_pair(Boje::Herc,broj);
        spil.push_back(a);
    }
    a=std::make_pair(Boje::Herc,'J');
    spil.push_back(a);
    a=std::make_pair(Boje::Herc,'Q');
    spil.push_back(a);
    a=std::make_pair(Boje::Herc,'K');
    spil.push_back(a);
    a=std::make_pair(Boje::Herc,'A');
    spil.push_back(a);
     for(int i=0;i&lt;9;i++){
        std::pair&lt;Boje,std::string&gt; a;
        std::string broj=PretvoriUString(i+2);
        a=std::make_pair(Boje::Karo,broj);
        spil.push_back(a);
    }
    a=std::make_pair(Boje::Karo,'J');
    spil.push_back(a);
    a=std::make_pair(Boje::Karo,'Q');
    spil.push_back(a);
    a=std::make_pair(Boje::Karo,'K');
    spil.push_back(a);
    a=std::make_pair(Boje::Karo,'A');
    spil.push_back(a);
    return spil;
}
void IzbaciKarte(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil, std::multimap&lt;Boje,std::string&gt; &amp;mapica){
    auto it(spil.begin());
    int br(0);
    while(it!=spil.end()){
        br++;
        if(br&lt;=13 &amp;&amp; it-&gt;first!=Boje::Pik) throw std::logic_error("Neispravna lista");
        if(br&gt;13 &amp;&amp; br&lt;=26 &amp;&amp; it-&gt;first!=Boje::Tref) throw std::logic_error("Neispravna lista");
        if(br&gt;26 &amp;&amp; br&lt;=39 &amp;&amp; it-&gt;first!=Boje::Herc) throw std::logic_error("Neispravna lista");
        if(br&gt;39 &amp;&amp; br&lt;=52 &amp;&amp; it-&gt;first!=Boje::Karo) throw std::logic_error("Neispravna lista");
        it++;
    }
    if(br&gt;52) throw std::logic_error("Neispravna lista");
    it=spil.begin();
    while(it!=spil.end()){
        auto prva=it-&gt;first;
        auto druga=it-&gt;second;
        auto it1(mapica.find(prva));
        if(it1!=mapica.end() ) { it=spil.erase(it); it1=mapica.erase(it1);}
        it++;
    }
    
}
std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil, short int &amp;r,int &amp;b){
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
     auto it(spil.begin());
    int br(0);
    while(it!=spil.end()){
        br++;
        if(br&lt;=13 &amp;&amp; it-&gt;first!=Boje::Pik) throw std::logic_error("Neispravna lista");
        if(br&gt;13 &amp;&amp; br&lt;=26 &amp;&amp; it-&gt;first!=Boje::Tref) throw std::logic_error("Neispravna lista");
        if(br&gt;26 &amp;&amp; br&lt;=39 &amp;&amp; it-&gt;first!=Boje::Herc) throw std::logic_error("Neispravna lista");
        if(br&gt;39 &amp;&amp; br&lt;=52 &amp;&amp; it-&gt;first!=Boje::Karo) throw std::logic_error("Neispravna lista");
        it++;
    }
    if(br&gt;52) throw std::logic_error("Neispravna lista");
    std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; red;
    br=0;
    int n(52/r);
    int m(52%r);
    it=spil.begin();
    while(br&lt;b){
       /* while(it!=spil.end()){
            if(br1=r) { 
            }
            it++;*/
            if(br==n) {it=spil.begin(); std::advance(it,r-m-1); 
        std::pair&lt;std::string,std::string&gt; s; 
        if(it-&gt;first==Boje::Pik) s=std::make_pair("Pik",it-&gt;second); else if(it-&gt;first==Boje::Herc) s=std::make_pair("Herc",it-&gt;second);else if(it-&gt;first==Boje::Karo) s=std::make_pair("Karo",it-&gt;second); else if(it-&gt;first==Boje::Tref) s=std::make_pair("Tref",it-&gt;second);
        red.push(s);
        it=spil.erase(it);
        br++;
            }
        else{
          std::advance(it,r-1);            
        std::pair&lt;std::string,std::string&gt; s; 
        if(it-&gt;first==Boje::Pik) s=std::make_pair("Pik",it-&gt;second); else if(it-&gt;first==Boje::Herc) s=std::make_pair("Herc",it-&gt;second);else if(it-&gt;first==Boje::Karo) s=std::make_pair("Karo",it-&gt;second); else if(it-&gt;first==Boje::Tref) s=std::make_pair("Tref",it-&gt;second);
        red.push(s);
        it=spil.erase(it);
        //it++;
        br++;
        }
        }
    return red;
}
int Broj_Karata(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil){
    auto it(spil.begin());
    int br(0);
    while(it!=spil.end()){
        br++;
        it++;
    }
    return br;
}
void IspisiKarte(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil){
    auto it(spil.begin());
    std::cout&lt;&lt;"Pik: ";
    while(it-&gt;first==Boje::Pik &amp;&amp; it!=spil.end()) {std::cout&lt;&lt;it-&gt;second&lt;&lt;" "; it++;}
    std::cout&lt;&lt;std::endl&lt;&lt;"Tref: ";
    while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Tref){ std::cout&lt;&lt;it-&gt;second&lt;&lt;" "; it++;}
    std::cout&lt;&lt;std::endl&lt;&lt;"Herc: ";
    while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Herc){std::cout&lt;&lt;it-&gt;second&lt;&lt;" "; it++;}
    std::cout&lt;&lt;std::endl&lt;&lt;"Karo: ";
    while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Karo){std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";it++;}
}
Boje VratiBoju(std::string s){
    if(s=="Pik") return Boje::Pik;
    else if(s=="Tref") return Boje::Tref;
    else if(s=="Herc") return Boje::Herc;
    return Boje::Karo;
}
int PretvoriUBroj(std::string s){
    int br(0),k(1);
    for(int i=s.size()-1;i&gt;=0;i--){
        br+=(s[i]-'0')*k;
        k*=10;
    }
    return br;
}
bool VidiJelImaUSpilu(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil,Boje a,std::string s){
    auto it(spil.begin());
    while(it!=spil.end()){
        if(it-&gt;first==a &amp;&amp; it-&gt;second==s) return false;
        it++;
    }
    return true;
}
void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; &amp;spil, std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;red, int n){
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(red.size()&lt;n) throw std::range_error("Nedovoljno karata u redu!");
    int br(0);
    if(n!=0){
    while(!red.empty() &amp;&amp; br&lt;n){
        std::pair&lt;Boje,std::string&gt; par;
        par.first=VratiBoju(red.front().first);
        par.second=red.front().second;
        auto it(spil.begin());
        while(it-&gt;first!=par.first &amp;&amp; it!=spil.end()) it++;
        while(it-&gt;first==par.first){
            int br(PretvoriUBroj(par.second));
            if(br==2 &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)) {spil.insert(it,par);}
            if(br&gt;2 &amp;&amp; br&lt;=9){int br1(PretvoriUBroj(it-&gt;second)); if(br-1==br1 &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)){it++; spil.insert(it,par);}}
            else {
                if(par.second=="10" &amp;&amp; it-&gt;second=="9" &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)){ it++; spil.insert(it,par);}
                if(par.second=="J" &amp;&amp; it-&gt;second=="10" &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)){it++; spil.insert(it,par);}
                if(par.second=="Q" &amp;&amp; it-&gt;second=="J" &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)) {it++; spil.insert(it,par);}
                if(par.second=="K" &amp;&amp; it-&gt;second=="Q" &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)){it++; spil.insert(it,par);}
                if(par.second=="A" &amp;&amp; it-&gt;second=="K" &amp;&amp; VidiJelImaUSpilu(spil,par.first,par.second)){it++; spil.insert(it,par);}
          }
            it++;
        }
        red.pop();
        br++;
    }
    }
}
int main ()
{
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int br_razbr(0);
    std::cin&gt;&gt;br_razbr;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int br_karata(0);
    std::cin&gt;&gt;br_karata;
    try{
    std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; spil(KreirajSpil());
    std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; red (IzbaciKarteRazbrajanjem(spil,br_razbr,br_karata));
    int br(Broj_Karata(spil));
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;br&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
    IspisiKarte(spil);
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
    int n(0);
    std::cin&gt;&gt;n;
    VratiPrvihNKarata(spil,red,n);
    br=Broj_Karata(spil);
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;br&lt;&lt;" karata, i to: "&lt;&lt;std::endl; 
    IspisiKarte(spil);
    }
    catch(std::logic_error izuzetak){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }
    catch(std::range_error izuzetak){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
</font>    }
	return 0;
}
</pre>
</body>
</html>
