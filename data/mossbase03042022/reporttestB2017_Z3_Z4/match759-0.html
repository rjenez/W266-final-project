<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1253.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1253.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;


enum class Boje
{
    Pik, Tref, Herc, Karo
};
bool PravilanZnak(std::string znak)
{
    std::vector&lt;std::string&gt; znakovi {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    for(int i=0; i&lt;int(znakovi.size()); i++) {
        if(znak == znakovi.at(i)) {
            return true;
        }
    }
    return false;
}
bool PravilanRedoslijed(std::string s1, std::string s2)
{
    std::vector&lt;std::string&gt; znakovi {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    int prvi(0), drugi(0);
    for(int i=0; i&lt;int(znakovi.size()); i++) {
        if(s1 == znakovi.at(i)) prvi = i;
        if(s2 == znakovi.at(i)) drugi = i;
    }
    int razlika(prvi-drugi);
    return (razlika&lt;0);
}

std::string NazivBoje(Boje boja)
{
    std::string povratni;
    if(boja&gt;=Boje::Pik) {
        if(boja&gt;=Boje::Tref) {
            if(boja&gt;=Boje::Herc) {
                if(boja&gt;=Boje::Karo) {
                    povratni = std::string("Karo");
                } else povratni = std::string("Herc");
            } else povratni = std::string("Tref");
        } else povratni = std::string("Pik");
    }
    return povratni;
}

<a name="2"></a><font color="#0000FF"><a href="match759-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

bool IspravnaLista(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;lista)
{
    if(lista.size() &gt; 52) return 0;
</font>    Boje prethodna(Boje::Pik);
    std::string prethodni;
    bool promjena(1);
    bool pocetak;
    for(auto it=lista.begin(); it!=lista.end(); it++) {
        if(it-&gt;first != prethodna) promjena=true;
        if(promjena) {
            promjena = false;
            prethodna = it-&gt;first;   //boja
            pocetak = true;
        } else if(!promjena) {
            if(prethodna &gt; it-&gt;first) return 0;
            if(pocetak) {
                pocetak = false;
                prethodni = it-&gt;second;  //znak
                if(!PravilanZnak(prethodni)) return 0;
            } else {
                if(!PravilanZnak(it-&gt;second)) return 0;
                if(!PravilanRedoslijed(prethodni, it-&gt;second)) return 0;
            }
        }
    }
    return 1;
}

<a name="3"></a><font color="#00FFFF"><a href="match759-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

bool IspravanRed(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red)
{
    while(!red.empty()) {
        if(!PravilanZnak(red.front().second)) return 0;
</font>        if(red.front().first != NazivBoje(Boje::Pik) &amp;&amp; red.front().first != NazivBoje(Boje::Tref) &amp;&amp; red.front().first != NazivBoje(Boje::Herc) &amp;&amp; red.front().first != NazivBoje(Boje::Karo)) {
            return 0;
        }
        red.pop();
    }
    return 1;
}

std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; KreirajSpil()
{
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; lista(52);
    auto it(lista.begin());
    Boje boja;
    for(int i=0; i&lt;4; i++) {
        if(i==0) boja = Boje::Pik;
        else if(i==1) boja = Boje::Tref;
        else if(i==2) boja = Boje::Herc;
        else if(i==3) boja = Boje::Karo;
        std::vector&lt;std::string&gt; znak {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
        for(int i=0; i&lt;13; i++) {
            it-&gt;first = boja;
            it-&gt;second = znak.at(i);
            it++;
        }
        if(it==lista.end()) break;
    }
    return lista;
}


<a name="0"></a><font color="#FF0000"><a href="match759-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

void IzbaciKarte( std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;lista, std::multimap&lt;Boje, std::string&gt; &amp;m)
{
    if(!IspravnaLista(lista)) throw std::logic_error("Neispravna lista!");
    bool ima(0);
</font>    auto it2(m.begin());
    while(it2!=m.end()) {
        ima = false;
        auto it=lista.begin();
<a name="4"></a><font color="#FF00FF"><a href="match759-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        while(it!=lista.end()) {
            if(it-&gt;first == it2-&gt;first &amp;&amp; it-&gt;second == it2-&gt;second) {
                it = lista.erase(it);
                ima = true;
</font>            } else it++;
        }
        if(ima) {
            it2 = m.erase(it2);
        } else it2++;
        if( it2==m.end() ) break;
    }
}


<a name="1"></a><font color="#00FF00"><a href="match759-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;lista, short int &amp;r, const int &amp;b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(!IspravnaLista(lista)) throw std::logic_error("Neispravna lista!");
</font>    int br_karte(0);
    int br_izbacenih(0);
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;

    while(br_izbacenih&lt;b) {
        auto it=lista.begin();
        if(it==lista.end()) break;
        while(it!=lista.end() &amp;&amp; br_izbacenih&lt;b) {
            br_karte++;
            if(br_karte==r) {
                br_izbacenih++;
                br_karte=0;
                std::string s1(NazivBoje(it-&gt;first));
                std::string s2(it-&gt;second);
                red.push({s1, s2});
                it = lista.erase(it);
            } else it++;
        }
    }

    return red;
}


void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;lista, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n)
{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
<a name="5"></a><font color="#FF0000"><a href="match759-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    if(n&gt;int(red.size())) throw std::range_error("Nedovoljno karata u redu!");
    if(!IspravnaLista(lista)) throw std::logic_error("Neispravna lista!");
    if(!IspravanRed(red)) throw std::logic_error("Neispravne karte!");
    int br_vracenih(0);
</font>

    while(br_vracenih&lt;n) {
        bool ubaceno(1);
        auto it(lista.begin());
        auto temp(lista.begin());
        while(it!=lista.end() &amp;&amp; br_vracenih&lt;n) {
            if(NazivBoje(it-&gt;first) == red.front().first) {
                temp = it;  //da zapamtimo boju
                if(PravilanRedoslijed(it-&gt;second, red.front().second)) {
                    it++;
                    ubaceno = false;
                } else {
                    ubaceno = true;
                    lista.insert(it, {temp-&gt;first, red.front().second});
                    red.pop();
                    br_vracenih++;
                }
            } else {
                if(!ubaceno) {
                    lista.insert(it, {temp-&gt;first, red.front().second});
                    red.pop();
                    ubaceno = true;
                    br_vracenih++;
                }
                it++;
            }
        }
    }
}

int main ()
{
    try {
        std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; lista;
        lista = KreirajSpil();
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        short int r;
        std::cin&gt;&gt;r;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        int b;
        std::cin&gt;&gt;b;
        std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
        red = IzbaciKarteRazbrajanjem(lista, r, b);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;int(lista.size())&lt;&lt;" karata, i to:";

        Boje prethodna(Boje::Pik);
        Boje boja;
        bool pocetak(1);
        for(auto it=lista.begin(); it!=lista.end(); it++) {
            boja = it-&gt;first;
            if(boja!=prethodna || pocetak) {
                pocetak = false;
                prethodna = boja;
                std::cout&lt;&lt;"\n"&lt;&lt;NazivBoje(boja)&lt;&lt;": ";
            }
            std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        }

        std::cout&lt;&lt;"\nUnesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin&gt;&gt;n;
        VratiPrvihNKarata(lista, red, n);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;int(lista.size())&lt;&lt;" karata, i to:";
        prethodna = Boje::Pik;
        pocetak = true;
        for(auto it=lista.begin(); it!=lista.end(); it++) {
            boja = it-&gt;first;
            if(boja!=prethodna || pocetak) {
                pocetak = false;
                prethodna = boja;
                std::cout&lt;&lt;"\n"&lt;&lt;NazivBoje(boja)&lt;&lt;": ";
            }
            std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        }
        
    } catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    } catch(std::logic_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    } catch(std::range_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
    }
    return 0;
}</pre>
</body>
</html>
