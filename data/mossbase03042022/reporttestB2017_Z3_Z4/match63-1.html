<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student6900.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student5881.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match63-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_65.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;queue&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

const std::string imena[13] = {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};

std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; KreirajSpil()
{
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil(52);
    int br(0);
    auto it(spil.begin());
    for (int i = 0; i &lt; 4; i++) {
        Boje boja;
        if (i==0)
            boja=Boje::Pik;
        else if (i==1)
            boja=Boje::Tref;
        else if (i==2)
            boja=Boje::Herc;
        else
            boja=Boje::Karo;
        for (; br!=13; it++) {
            it-&gt;first=boja;
            it-&gt;second=imena[br];
            br++;
        }
        br=0;

    }
    return spil;
}

bool SpilValja(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil)
{
    if (spil.size()&gt;52)
        return false;
    auto it(spil.begin());
    for (; it!=spil.end(); it++) {
        if (it-&gt;first!=Boje::Pik &amp;&amp; it-&gt;first!=Boje::Tref &amp;&amp; it-&gt;first!=Boje::Herc &amp;&amp; it-&gt;first!=Boje::Karo)
            return false;
        int i(0);
        for (; i &lt; 13; i++)
            if (it-&gt;second==imena[i])
                break;
        if (i==13)
            return false;
    }
    if (spil.size()&lt;=1)
        return true;
    it=spil.begin();
    auto prethodni(it);
    Boje pocetna_boja(it-&gt;first);
    Boje sljedeca_boja(Boje::Karo);
    if (pocetna_boja==Boje::Pik)
        sljedeca_boja=Boje::Tref;
    else if (pocetna_boja==Boje::Tref)
        sljedeca_boja=Boje::Herc;
    else if (pocetna_boja==Boje::Herc)
        sljedeca_boja=Boje::Karo;
    int pocetni_indeks(0);
    for (int i = 0; i &lt; 13; i++) {
        if (prethodni-&gt;second==imena[i]) {
            pocetni_indeks=i;
            break;
        }
    }
    it++;
    for (; it!=spil.end(); it++) {
        if (it-&gt;first!=prethodni-&gt;first) {
            if (it-&gt;first!=sljedeca_boja)
                return false;
            pocetna_boja=it-&gt;first;
            sljedeca_boja=Boje::Karo;
            if (pocetna_boja==Boje::Pik)
                sljedeca_boja=Boje::Tref;
            else if (pocetna_boja==Boje::Tref)
                sljedeca_boja=Boje::Herc;
            else if (pocetna_boja==Boje::Herc)
                sljedeca_boja=Boje::Karo;
            pocetni_indeks=0;
        } else {
            int sljedeci_indeks(0);
            for (int i = 0; i &lt; 13; i++) {
                if (it-&gt;second==imena[i]) {
                    sljedeci_indeks=i;
                    break;
                }
            }
            if (pocetni_indeks&gt;=sljedeci_indeks)
                return false;
            pocetni_indeks=sljedeci_indeks;
        }
        prethodni++;
    }

    return true;
}

void IzbaciKarte(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::multimap&lt;Boje, std::string&gt; &amp;karte)
{
    if (!SpilValja(spil))
        throw std::logic_error("Neispravna lista!");
    for (auto it(spil.begin()); it != spil.end();) {
        bool preskoci(false);
        for (auto it2(karte.begin()); it2 != karte.end(); it2++) {
            if (*it==make_pair(it2-&gt;first, it2-&gt;second)) {
                it=spil.erase(it);
                if (it==spil.begin())
                    preskoci=true;
                else
                    it--;
                it2=karte.erase(it2);
                if (it2==karte.begin())
                    break;
            }
        }
        if (!preskoci)
            it++;
    }
}

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, short int &amp;r, const int &amp;b)
{
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; rez;
    if (r&lt;1 || r&gt;52 || b&lt;1)
        throw std::logic_error("Neispravni elementi za izbacivanje!");
    if (!SpilValja(spil))
        throw std::logic_error("Neispravna lista!");
    int br(1), br_izbacenih(0);
    for (auto it(spil.begin()); ; it++) {
        if (spil.size()==0)
            break;
        if (it==spil.end() &amp;&amp; br_izbacenih!=b)
            it=spil.begin();
        if (br==r) {
            switch (it-&gt;first) {
            case Boje::Pik :
                rez.push(std::make_pair("Pik", it-&gt;second));
                break;
            case Boje::Tref :
                rez.push(std::make_pair("Tref", it-&gt;second));
                break;
            case Boje::Herc :
                rez.push(std::make_pair("Herc", it-&gt;second));
                break;
            case Boje::Karo :
                rez.push(std::make_pair("Karo", it-&gt;second));
                break;
            }
            it = spil.erase(it);
            it--;
            br_izbacenih++;
            if (br_izbacenih==b || spil.size()==0)
                break;
            br=0;
        }
        br++;
    }
    return rez;
}

bool RedValja(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red)
{
    while(!red.empty()) {
        if (red.front().first!="Pik" &amp;&amp; red.front().first!="Tref" &amp;&amp; red.front().first!="Herc" &amp;&amp; red.front().first!="Karo")
            return false;
        int i(0);
        for (; i &lt; 13; i++)
            if (red.front().second==imena[i])
                break;
        if (i==13)
            return false;
        red.pop();
    }
    return true;
}

void IspisiSpil(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil)
{
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
    for (int i = 0; i &lt; 4; i++) {
        bool sljedeci(false);
        auto it(spil.begin());
        Boje boja;
        if (i==0) {
            std::cout &lt;&lt; "Pik:";
            boja=Boje::Pik;
        } else if (i==1) {
            std::cout &lt;&lt; "Tref:";
            boja=Boje::Tref;
        } else if (i==2) {
            std::cout &lt;&lt; "Herc:";
            boja=Boje::Herc;
        } else {
            std::cout &lt;&lt; "Karo:";
            boja=Boje::Karo;
        }
        for (; it!=spil.end(); it++) {
            if (it-&gt;first==boja) {
                std::cout &lt;&lt; " " &lt;&lt; it-&gt;second;
                sljedeci=true;
            } else if (sljedeci)
                break;
        }
        std::cout &lt;&lt; std::endl;
    }
}

void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n)
</font><a name="1"></a><font color="#00FF00"><a href="match63-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_32.gif"/></a>

{
    if (n&lt;0)
        throw std::domain_error("Broj n je besmislen!");
    if (n&gt;red.size())
        throw std::range_error("Nedovoljno karata u redu!");
    if (!RedValja(red))
        throw std::logic_error("Neispravne karte!");
    if (!SpilValja(spil))
        throw std::logic_error("Neispravna lista!");
    while(n!=0) {
        Boje b(Boje::Pik);
        if (red.front().first=="Tref")
            b=Boje::Tref;
        else if (red.front().first=="Herc")
            b=Boje::Herc;
        else if (red.front().first=="Karo")
            b=Boje::Karo;
        auto it(spil.begin());
        while (it!=spil.end() &amp;&amp; it-&gt;first!=b)
            it++;
        if (it==spil.end() &amp;&amp; b==Boje::Pik)
            it = spil.begin();
        else if (it==spil.end()) {
            if (b==Boje::Tref) {
                it=spil.begin();
                while (it!=spil.end() &amp;&amp; it-&gt;first==Boje::Pik)
                    it++;
                if (it==spil.end())
                    it=spil.begin();
            } else if (b==Boje::Herc) {
                it=spil.begin();
                while (it!=spil.end() &amp;&amp; (it-&gt;first==Boje::Tref || it-&gt;first==Boje::Pik))
                    it++;
                if (it==spil.end())
                    it=spil.begin();
            } else if (b==Boje::Karo) {
                it=spil.begin();
                while (it!=spil.end() &amp;&amp; (it-&gt;first==Boje::Herc || it-&gt;first==Boje::Tref || it-&gt;first==Boje::Pik))
                    it++;
                if (it==spil.end())
                    it=spil.begin();
            }
        }
        int j(0), k(0);
        for (; j &lt; 13; j++)
            if (red.front().second==imena[j])
                break;
        do {
            if (spil.size()==0) {
                spil.insert(it, std::make_pair(b, red.front().second));
                break;
            }
            for (; k &lt; 13; k++)
                if (it-&gt;second==imena[k])
                    break;
            if (k&gt;=j) {
                if (it-&gt;first==b &amp;&amp; it-&gt;second==red.front().second)
                    break;
                spil.insert(it, std::make_pair(b, red.front().second));
                break;
            }
            it++;
            if (spil.size()==1 || it-&gt;first!=b) {
                spil.insert(it, std::make_pair(b, red.front().second));
                break;
            }
        } while (true);
        red.pop();
        n--;
    }
}

int main ()
{
    auto spil(KreirajSpil());
    short int r;
    int b;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; b;
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
    try {
        red=IzbaciKarteRazbrajanjem(spil, r ,b);
    } catch (const std::exception &amp;greska) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; greska.what();
        return 0;
    }

    IspisiSpil(spil);
    int n;
    std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
    std::cin &gt;&gt; n;
    try {
        VratiPrvihNKarata(spil, red, n);
    } catch (const std::exception &amp;greska) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; greska.what();
        return 0;
    }
    IspisiSpil(spil);

    return 0;
</font>}
</pre>
</body>
</html>
