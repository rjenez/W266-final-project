<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student3253.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8124.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match166-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_67.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;queue&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;exception&gt;

enum class Boje { Pik, Tref, Herc, Karo };
const std::vector&lt;Boje&gt; sveBoje = { Boje::Pik, Boje::Tref, Boje::Herc, Boje::Karo };
const std::vector&lt;std::string&gt; naziviKarata = { "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A" };    

typedef std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; Spil;

std::string dajStringBoje(Boje b) {
    switch (b) {
        case Boje::Pik: return "Pik";
        case Boje::Tref: return "Tref";
        case Boje::Herc: return "Herc";
        case Boje::Karo: return "Karo";
        default: return "Nepoznato";
    }
}

void ispisiSipl_Old(Spil &amp;spil){
    for(auto karta : spil){
        std::cout&lt;&lt; dajStringBoje(karta.first) &lt;&lt; " " &lt;&lt; karta.second &lt;&lt; std::endl;
    }
}

void ispisiSpil(Spil &amp;spil){
    std::string boja = "NULL";
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:";
    for(auto karta : spil){
        if( dajStringBoje(karta.first) != boja){
            boja = dajStringBoje(karta.first);
            std::cout &lt;&lt; std::endl;
            std::cout &lt;&lt; boja &lt;&lt; ":";
        }
        std::cout&lt;&lt; " " &lt;&lt;karta.second;
    }
    std::cout &lt;&lt; std::endl;
}



void provjeriSpil(Spil &amp;spil){
    auto itSpil = spil.begin();
    auto endSpil = spil.end();
    auto spilSize = spil.size();
    if(spilSize &gt; 52){
        throw std::logic_error("Neispravna lista!");
    }
    
    for(Boje boja : sveBoje){
        for(std::string naziv : naziviKarata){
            if(itSpil == endSpil){
                return;
            }
            if(itSpil-&gt;first == boja &amp;&amp; itSpil-&gt;second == naziv){
                ++itSpil;
            }
        }
    }
    if(itSpil != endSpil){
        throw std::logic_error("Neispravna lista!");
    }
}

Spil KreirajSpil() {
    Spil spil;

    for (Boje boja: sveBoje) {
        for (std::string naziv: naziviKarata) {
            spil.push_back(std::make_pair(boja, naziv));
        }
    }    
    
    return spil;
}

void IzbaciKarte(Spil &amp;spil, std::multimap&lt;Boje, std::string&gt; &amp;crnaLista) {
    std::pair &lt;std::multimap&lt;Boje, std::string&gt;::iterator, std::multimap&lt;Boje, std::string&gt;::iterator&gt; ret;
    auto itSpil = spil.begin();

    provjeriSpil(spil);
    
    while (itSpil != spil.end()) {
        
        bool izbaciKartu = false;
        ret = crnaLista.equal_range(itSpil-&gt;first);
        for(std::multimap&lt;Boje, std::string&gt;::iterator itCL=ret.first; itCL != ret.second; ++itCL){
            if(itCL-&gt;second == itSpil-&gt;second){
                std::cout&lt;&lt;"Brisem: " &lt;&lt; dajStringBoje(itCL-&gt;first) &lt;&lt; " " &lt;&lt; itCL-&gt;second &lt;&lt; std::endl;
                crnaLista.erase(itCL);
                izbaciKartu = true;
                break;
            }
        }
        if(izbaciKartu){
            itSpil = spil.erase(itSpil);
        } else {
            itSpil++;
        }
    }
}

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(Spil &amp;spil, const short int &amp;r, const int &amp;b){
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
    auto itSpil = spil.begin();
    int korak = 1;
    int izbaceno = 0;
    
    if (r &lt; 1 || r &gt; 52 || b &lt; 1){
        throw std::logic_error("Neispravni elementi za izbacivanje!");
        // std::cout &lt;&lt; "Izuzetak: Neispravni elementi za izbacivanje!" &lt;&lt; std::endl;
    }
    provjeriSpil(spil);
    
    while(izbaceno &lt; b) {
        if(spil.begin() == spil.end()){
            return red;
        }
        
        if(korak == r){
            izbaceno++;
            red.push(std::make_pair(dajStringBoje(itSpil-&gt;first), itSpil-&gt;second));
            // std::cout &lt;&lt; "Brisem " &lt;&lt; dajStringBoje(itSpil-&gt;first) &lt;&lt; " " &lt;&lt; itSpil-&gt;second &lt;&lt; std::endl;
            itSpil = spil.erase(itSpil);
            korak = 1;
            
            if(itSpil == spil.end()) {
                itSpil = spil.begin();
            }
            
            continue;
        }
        
        if (itSpil != spil.end()) {
            ++itSpil; 
            ++korak;
        } else {
            itSpil = spil.begin();
        }
    }
    return red;
}

void provjeriValidnostReda(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red, int n){
    if(n&lt;0){
        throw std::domain_error("Broj n je besmislen!");
    }
    if(n &gt; red.size()){
        throw std::range_error("Nedovoljno karata u redu!");
    }
    while(!red.empty()){
        std::string boja = red.front().first;
        if(boja != "Pik" &amp;&amp; boja !="Tref" &amp;&amp; boja != "Herc" &amp;&amp; boja!="Karo"){
            throw std::logic_error("Neispravne karte!");
        }
        if(std::find(naziviKarata.begin(), naziviKarata.end(), red.front().second) == naziviKarata.end()){
            throw std::logic_error("Neispravne karte!");
        }
        red.pop();
    }
}

void VratiPrvihNKarata(Spil &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n){
    provjeriValidnostReda(red, n);
    
    while(n&gt;0){
        auto trenutna = red.front();
        
        auto itSpil = spil.begin();
        for(Boje boja: sveBoje) {
            for(std::string naziv: naziviKarata){
                if(itSpil-&gt;first == boja &amp;&amp; itSpil-&gt;second == naziv){
                    ++itSpil;
                } else if(trenutna.first == dajStringBoje(boja) &amp;&amp; trenutna.second == naziv){
                    spil.insert(itSpil, std::make_pair(boja, naziv));
                }
            }
        }
        red.pop();
        n--;
    }
}

int main ()
{
    Spil nepotpunSpil = {
        { Boje::Pik , "2" },
        { Boje::Pik , "3" },
        { Boje::Pik , "4" },
        { Boje::Pik , "5" },
        { Boje::Pik , "6" },
</font>        { Boje::Pik , "7" },
        { Boje::Pik , "8" },
        { Boje::Pik , "9" },
        { Boje::Pik , "10" },
        { Boje::Pik , "J" },
        { Boje::Pik , "Q" },
        { Boje::Pik , "K" },
        { Boje::Pik , "A" },
        
        { Boje::Tref , "2" },
        { Boje::Tref , "3" },
        { Boje::Tref , "4" },
        { Boje::Tref , "5" },
        { Boje::Tref , "6" },
        { Boje::Tref , "7" },
        { Boje::Tref , "8" },
        { Boje::Tref , "9" },
        { Boje::Tref , "10" },
        { Boje::Tref , "J" },
        { Boje::Tref , "Q" },
        { Boje::Tref , "K" },
        { Boje::Tref , "A" },
        
        { Boje::Herc , "2" },
        { Boje::Herc , "3" },
        { Boje::Herc , "4" },
        { Boje::Herc , "5" },
        { Boje::Herc , "6" },
        { Boje::Herc , "7" },
        { Boje::Herc , "8" },
        { Boje::Herc , "9" },
        { Boje::Herc , "10" },
        { Boje::Herc , "J" },
        { Boje::Herc , "Q" },
        { Boje::Herc , "K" },
        { Boje::Herc , "A" },
        
        { Boje::Karo , "2" },
        { Boje::Karo , "3" },
        { Boje::Karo , "4" },
        { Boje::Karo , "5" },
        { Boje::Karo , "6" },
        { Boje::Karo , "7" },
        { Boje::Karo , "8" },
        { Boje::Karo , "9" },
        { Boje::Karo , "10" },
<a name="1"></a><font color="#00FF00"><a href="match166-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

        { Boje::Karo , "J" },
        { Boje::Karo , "Q" },
        { Boje::Karo , "K" },
        { Boje::Karo , "A" },
        
    };
    
    std::multimap&lt;Boje, std::string&gt; crnaLista = {
        { Boje::Herc , "A" },
        { Boje::Herc , "Q" },
        { Boje::Karo , "9" },
        { Boje::Pik , "9" },
    };

    /*    
    std::cout &lt;&lt; std::endl &lt;&lt; "Testiranje KreirajSpil" &lt;&lt; std::endl;
    Spil spil = KreirajSpil();
    ispisiSpil(spil);
    
   Spil testSpil = nepotpunSpil;
   std::cout &lt;&lt; std::endl &lt;&lt; "Testiranje IzbaciKarte" &lt;&lt; std::endl;
   ispisiSpil(testSpil);
   std::cout &lt;&lt; "CRNA LISTA BEFORE" &lt;&lt; std::endl;
   for(auto karta: crnaLista) {
       std::cout &lt;&lt; dajStringBoje(karta.first) &lt;&lt; " " &lt;&lt; karta.second &lt;&lt; std::endl;
   }
   IzbaciKarte(testSpil, crnaLista);
   ispisiSpil(testSpil);
   std::cout &lt;&lt; "CRNA LISTA AFTER" &lt;&lt; std::endl;
   for( auto karta : crnaLista) {
       std::cout &lt;&lt; dajStringBoje(karta.first) &lt;&lt; " " &lt;&lt;karta.second &lt;&lt; std::endl;
   }
   */
   
   // std::cout &lt;&lt; std::endl &lt;&lt; "Testiranje IzbaciKarteRzbrajanjem i VratiPrvihKarata" &lt;&lt; std::endl;
   int r, b, n;
   // while(true){
   try {
       std::cout &lt;&lt; "Unesite korak razbrajanja: ";
       std::cin &gt;&gt; r;
       std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
       std::cin &gt;&gt; b;
       std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red = IzbaciKarteRazbrajanjem(nepotpunSpil, r, b);
       ispisiSpil(nepotpunSpil);
       std::cout&lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
       std::cin &gt;&gt; n;
       VratiPrvihNKarata(nepotpunSpil, red, n);
       ispisiSpil(nepotpunSpil);
       // std::cout&lt;&lt;"--------------------------------------------------" &lt;&lt; std::endl;
   } catch (std::exception &amp;ex) {
       std::cout &lt;&lt; "Izuzetak: " &lt;&lt; ex.what() &lt;&lt; std::endl;
   }
   // }
	return 0;
</font>}
</pre>
</body>
</html>
