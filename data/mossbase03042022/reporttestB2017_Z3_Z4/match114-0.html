<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9207.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9207.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match114-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
/*TODO:
    -izbaci (skontati sta zeza memorijska greska)

*/
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;iterator&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;queue&gt;
#include &lt;algorithm&gt;
using std::queue;
using std::string;
using std::pair;
using std::list;
using std::cin;
using std::cout;
using std::multimap;
enum class Boje
{
    Pik,Tref,Herc,Karo
};

bool PorediKarte(pair&lt;Boje,string&gt; a, pair&lt;Boje,string&gt; b)
{
    if(a.first!=b.first) {
        return static_cast&lt;int&gt;(a.first) &lt; static_cast&lt;int&gt;(b.first);
    } else {
        int prvi(0),drugi(0);
        if(a.second=="J") {
            prvi=11;
        } else if(a.second=="Q") {
            prvi=12;
        } else if(a.second=="K") {
            prvi=13;
        } else if(a.second=="A") {
            prvi=14;
        } else {
            prvi=std::stoi(a.second);
        }

        if(b.second=="J") {
            drugi=11;
        } else if(b.second=="Q") {
            drugi=12;
        } else if(b.second=="K") {
            drugi=13;
        } else if(b.second=="A") {
            drugi=14;
        } else {
            drugi=std::stoi(b.second);
        }
        return prvi&lt;drugi;
    }
}
list&lt;pair&lt;Boje,string&gt;&gt; KreirajSpil()
{
    Boje color;
    list&lt;pair&lt;Boje,string&gt;&gt; spil;
    string temp;
    for(int i=0; i&lt;4; i++) {
        //cout&lt;&lt;i&lt;" ";
        switch(i) {
        case 0:
            color=Boje::Pik;
            break;
        case 1:
            color=Boje::Tref;
            break;
        case 2:
            color=Boje::Herc;
            break;
        case 3:
            color=Boje::Karo;
            break;
        }
        for(int j=2; j&lt;=14; j++) {
            switch(j) {
            case 11:
                temp+=('J');
                break;
            case 12:
                temp+=('Q');
                break;
            case 13:
                temp+=('K');
                break;
            case 14:
                temp+=('A');
                break;
            default:
                temp+=std::to_string(j);
                break;
            }
            //cout&lt;&lt;temp&lt;&lt;" ";
            spil.push_back(std::make_pair(color,temp));
            temp.clear();
        }
    }
    return spil;
}

void IspisiSpil(list&lt;pair&lt;Boje,string&gt;&gt; spil)
{

    cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to:\n";
    for(int i=0; i&lt;4; i++) {
        switch(i) {
        case 0:
            cout&lt;&lt;"Pik: ";
            break;
        case 1:
            cout&lt;&lt;"Tref: ";
            break;
        case 2:
            cout&lt;&lt;"Herc: ";
            break;
        case 3:
            cout&lt;&lt;"Karo: ";
            break;
        }
        for(auto it(spil.begin()); it!=spil.end(); it++) {
            if(it-&gt;first==Boje::Pik&amp;&amp;i==0) {
                cout&lt;&lt;it-&gt;second&lt;&lt;" ";
            }
            if(it-&gt;first==Boje::Tref&amp;&amp;i==1) {
                cout&lt;&lt;it-&gt;second&lt;&lt;" ";
            }
            if(it-&gt;first==Boje::Herc&amp;&amp;i==2) {
                cout&lt;&lt;it-&gt;second&lt;&lt;" ";
            }
            if(it-&gt;first==Boje::Karo&amp;&amp;i==3) {
                cout&lt;&lt;it-&gt;second&lt;&lt;" ";
            }
        }

        cout&lt;&lt;"\n";
    }
}

void ProvjeraSpila(list&lt;pair&lt;Boje,string&gt;&gt; spil)
{
    if(spil.size()&gt;52) {
        throw std::logic_error("Neispravna lista!");
    }
    auto it2(spil.begin());
    it2++;
    auto it1(spil.begin());
    for(; it2!=spil.end(); it2++) {
        if(!PorediKarte(*it1,*it2)) {
            throw std::logic_error("Neispravna lista!");
        }
        it1++;
    }
    for(auto it(spil.begin()); it!=spil.end(); it++) {
        auto a(it-&gt;first);
        auto b(it-&gt;second);
        if(a!=Boje::Pik&amp;&amp;a!=Boje::Tref&amp;&amp;a!=Boje::Herc&amp;&amp;a!=Boje::Karo&amp;&amp;b!="J"
                &amp;&amp;b!="K"&amp;&amp;b!="Q"&amp;&amp;b!="A"&amp;&amp;b!="2"&amp;&amp;b!="3"&amp;&amp;b!="4"&amp;&amp;b!="5"&amp;&amp;b!="6"
                &amp;&amp;b!="7"&amp;&amp;b!="8"&amp;&amp;b!="9"&amp;&amp;b!="10") {
            throw std::logic_error("Neispravna lista!");
        }

    }
}

void IzbaciKarte(list&lt;pair&lt;Boje,string&gt;&gt; &amp;spil, multimap&lt;Boje,string&gt; &amp;multimapa)
{
    try {
        ProvjeraSpila(spil);
    
        for(auto it1(multimapa.begin()); it1!=multimapa.end();) {
            auto it2(std::find(spil.begin(),spil.end(),std::make_pair(it1-&gt;first,it1-&gt;second)));
            if(it2!=spil.end()) {
                it1=multimapa.erase(it1);
                spil.erase(it2);
            } else {
            it1++;
            }
        }
    } catch(...) {
        throw;
    }
}

queue&lt;pair&lt;string,string&gt;&gt; IzbaciKarteRazbrajanjem(list&lt;pair&lt;Boje,string&gt;&gt; &amp;spil, short int &amp;korak, const int &amp;broj_za_izbaciti)
{
    try {

        ProvjeraSpila(spil);
        queue&lt;pair&lt;string,string&gt;&gt; rez;
        if(korak&gt;52||korak&lt;1||broj_za_izbaciti&lt;1) {
            throw std::logic_error("Neispravni elementi za izbacivanje!");
        }
        std::multimap&lt;Boje,string&gt;multimapa;
        auto it(spil.begin());
        int brojac(0),izbaceni(0);
        while(true) {
            brojac++;
            if(it==spil.end()) {
                it=spil.begin();
                
            } 
            bool nadjen(false);
            for(auto itm(multimapa.begin());itm!=multimapa.end();itm++){
                if(pair&lt;Boje,string&gt;(itm-&gt;first,itm-&gt;second)==*it){
                    nadjen=true;
                }
            }
            if(nadjen){
                
                it++;
                nadjen=false;
            }
            if(brojac==korak) {
                multimapa.insert(*it);
                switch(it-&gt;first) {
                case Boje::Pik :
                    rez.push(std::make_pair("Pik",it-&gt;second));
                    break;
                case Boje::Tref :
                    rez.push(std::make_pair("Tref",it-&gt;second));
                    break;
                case Boje::Herc :
                    rez.push(std::make_pair("Herc",it-&gt;second));
                    break;
                case Boje::Karo :
                    rez.push(std::make_pair("Karo",it-&gt;second));
                    break;
                }

                izbaceni++;
                brojac=0;
            }

            if(izbaceni==broj_za_izbaciti||spil.size()==0) {
                break;
            }

            it++;
        }
        IzbaciKarte(spil,multimapa);
        return rez;
    } catch(...) {
        throw;
    }
}

void VratiPrvihNKarata(list&lt;pair&lt;Boje,string&gt;&gt; &amp;spil,queue&lt;pair&lt;string,string&gt;&gt; red, int n)
{
    try {
        ProvjeraSpila(spil);
        if(n&lt;0) {
            throw std::domain_error("Broj n je besmislen!");
        }
        
        if(n&gt;red.size()) {
            throw std::range_error("Nedovoljno karata u redu!");
        }
        

        pair&lt;Boje,string&gt; element;

        for(int i=0; i&lt;n; i++) {
            if(red.front().first=="Pik") {
                element=std::make_pair(Boje::Pik,red.front().second);
            } else if(red.front().first=="Tref") {
                element=std::make_pair(Boje::Tref,red.front().second);
            } else if(red.front().first=="Herc") {
                element=std::make_pair(Boje::Herc,red.front().second);
            } else if(red.front().first=="Karo") {
                element=std::make_pair(Boje::Karo,red.front().second);
            }

            if(std::find(spil.begin(),spil.end(),element)!=spil.end()) {
                red.pop();
                i--;
            }
            spil.push_back(element);
            red.pop();
        }
        spil.sort(PorediKarte);
    } catch(...) {
        throw;
    }
}

int main ()
{
    try {
        list&lt;pair&lt;Boje,string&gt;&gt; spil;
        spil=KreirajSpil();
        cout&lt;&lt;"Unesite korak razbrajanja: ";
        short int korak;
        cin&gt;&gt;korak;
        cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        int broj;
        cin&gt;&gt;broj;
        queue&lt;pair&lt;string,string&gt;&gt; red=IzbaciKarteRazbrajanjem(spil,korak,broj);
        IspisiSpil(spil);
        cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        cin&gt;&gt;broj;
        VratiPrvihNKarata(spil,red,broj);
        IspisiSpil(spil);
    } catch (std::domain_error err) {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;err.what();
    }     catch (std::logic_error err) {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;err.what();
    } catch (std::range_error err) {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;err.what();
    }
    return 0;
</font>}
</pre>
</body>
</html>
