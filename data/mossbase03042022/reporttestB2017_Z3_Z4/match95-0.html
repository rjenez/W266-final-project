<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student4469.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student4469.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
<a name="0"></a><font color="#FF0000"><a href="match95-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

enum class Boje {Pik, Tref, Herc, Karo};
typedef std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; Spil;
std::vector&lt;Boje&gt;vektorboja={Boje::Pik,Boje::Tref,Boje::Herc,Boje::Karo};
std::vector&lt;std::string&gt;vektorbrojeva ={"2","3","4","5","6","7","8","9","10","J","Q","K","A"};


bool uporedikarte(std::pair&lt;Boje,std::string&gt; prva, std::pair&lt;Boje, std::string&gt; druga) {
    
    if(prva.first&lt;druga.first)return true;
    if(prva.first==druga.first) {
        
        auto it1=vektorbrojeva.begin();
        for(;it1!=vektorbrojeva.end();it1++) {
            if(*it1==prva.second)break;
        }
        int distanca1=std::distance(it1,vektorbrojeva.end());
        
        auto it2=vektorbrojeva.begin();
        for(;it2!=vektorbrojeva.end();it2++) {
            if(*it2==druga.second)break;
        }
        int distanca2=std::distance(it2,vektorbrojeva.end());
        return distanca1&gt;distanca2;
    }
     return false;
}

void provjerispil(Spil spil) {
    if (spil.size()&gt;52) throw std::logic_error("Neispravna lista!");
    auto it=spil.begin();
    auto pomocna=*it; it++;
    for(;it!=spil.end();it++) {
       
          if(uporedikarte(*it,pomocna))throw std::logic_error("Neispravna lista!");
       
        if(std::count(vektorboja.begin(),vektorboja.end(),it-&gt;first)==0)throw std::logic_error("Neispravna lista!");
        if(std::count(vektorbrojeva.begin(),vektorbrojeva.end(),it-&gt;second)==0)throw std::logic_error("Neispravna lista!");
        pomocna=*it;
    }
    
    for(auto it=spil.begin();it!=spil.end();it++) {
    
      if(std::count_if(it,spil.end(),[it] (std::pair&lt;Boje, std::string&gt;par){
               if(it-&gt;first==par.first &amp;&amp; it-&gt;second==par.second)return true; return false;
      } )&gt;1  )throw std::logic_error("Neispravna lista!");
    }
    
}

void provjerikartu(std::pair&lt;std::string,std::string&gt; karta) {
    if(karta.first!= "Karo" &amp;&amp; karta.first!="Herc" &amp;&amp; karta.first!="Tref" &amp;&amp; karta.first!="Pik")throw std::logic_error("Neispravne karte!");
 int i=0;
 for(;i&lt;vektorbrojeva.size();i++) {
     if(vektorbrojeva[i]==karta.second)break;
 }
 if(i==vektorbrojeva.size())throw std::logic_error("Neispravne karte!");
}

Boje vratiboju(std::string rijec) {
    if(rijec=="Karo")return Boje::Karo;
    if(rijec=="Pik")return Boje::Pik;
    if(rijec=="Herc")return Boje::Herc;
    return Boje::Tref;
}
std::string vratistring(Boje boja) {
    if(boja==Boje::Pik)return("Pik");
    if(boja==Boje::Karo)return("Karo");
    if(boja==Boje::Herc)return("Herc");
    return ("Tref");
}

void sortirajspil(Spil &amp;spil) {
    
       for(int i=0;i&lt;spil.size();i++) {
   
       auto it=spil.begin(); std::advance(it,i);
       auto pomocni=*it; while(it!=spil.end()) {
           if(uporedikarte(*it,pomocni))pomocni=*it;
           it++;
       }
       it=spil.begin();std::advance(it,i);
       while(it!=spil.end()) {
           if(it-&gt;first==pomocni.first &amp;&amp;it-&gt;second==pomocni.second){it=spil.erase(it);break;}
           it++;
       }
       auto it2=spil.begin();
       while(it2!=spil.end() &amp;&amp; uporedikarte(*it2,pomocni))it2++;
       spil.insert(it2,pomocni);
   }
    
}

Spil KreirajSpil(){
    Spil spil;
    auto it=spil.begin();
    for(int i=0;i&lt;4;i++) {
        for(int j=0;j&lt;13;j++) {
            spil.insert(it,std::make_pair(vektorboja[i],vektorbrojeva[j]));
            it++;
        }
    }
   
sortirajspil(spil);
   return spil;
}

void IzbaciKarte (Spil&amp; spil, std::multimap&lt;Boje,std::string&gt; &amp;mapa){
    
   
        provjerispil(spil);
    for(auto it=spil.begin();it!=spil.end();it++){
        for(auto it2=mapa.begin();it2!=mapa.end();it2++) {
            if(it-&gt;first==it2-&gt;first &amp;&amp; it-&gt;second == it2-&gt;second) {
                spil.erase(it);
                //brisanje ostalih takvih iz multimape
                auto it3=it2;
                while(it3!=mapa.end()) { 
                    if(*it3==*it2 &amp;&amp; it3!=it2)mapa.erase(it3);
                    it3++;
                }
                mapa.erase(it2);
            }
        }
    }
}

std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Spil &amp;spil,const short int&amp;r, const int&amp;b) {
    if(r&lt;1 || r&gt;52 || b&lt;1)throw std::logic_error("Neispravni elementi za izbacivanje!");
   provjerispil(spil);
    
    std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; red;
    auto it=spil.begin();
    int brojac=0,kraj=spil.size();
    while(brojac!=b) {
        
       int broj=std::distance(it,spil.end());
       if(broj&gt;=r) {
           std::advance(it,r-1); std::string pomocni;
           pomocni=vratistring(it-&gt;first);
           red.push(std::make_pair(pomocni,it-&gt;second));
           it=spil.erase(it);brojac++;if(it==spil.end())it--; 
           if(brojac==kraj)brojac=b;
       }
        else if(broj&lt;r) {
            int broj2=r-1;
            while(broj2&gt;0) {
                it++; if(it==spil.end())it=spil.begin();
                broj2--;
            }
            std::string pomocni;
           pomocni=vratistring(it-&gt;first);
           red.push(std::make_pair(pomocni,it-&gt;second));
            it=spil.erase(it);brojac++;if(it==spil.end())it--;
            if(brojac==kraj)brojac=b;
        }
    }
    return red;
}

void VratiPrvihNKarata(Spil &amp;spil, std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;red,int n) {
    
    if(n&lt;0 || n&gt;52)throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red.size()) throw std::range_error("Nedovoljno karata u redu!");
    provjerispil(spil);
    for(int i=0;i&lt;n;i++){
       provjerikartu(red.front());
        auto it=spil.begin();
        auto pomocna=*it; pomocna.first=vratiboju(red.front().first);pomocna.second=red.front().second;
        while(it!=spil.end() &amp;&amp; uporedikarte(*it,pomocna))it++;
        if(it!=spil.end() &amp;&amp; it-&gt;first==vratiboju(red.front().first) &amp;&amp; it-&gt;second==red.front().second)red.pop();
         else if(it!=spil.end()) {
             std::pair&lt;Boje,std::string&gt; pomocni; pomocni.first=vratiboju(red.front().first);
             pomocni.second=red.front().second;
             spil.insert(it,pomocni); red.pop();
         }
    }
    sortirajspil(spil);
}

int main ()
{
    try{
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int r; std::cin&gt;&gt;r;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int b; std::cin&gt;&gt;b;
    Spil spil=KreirajSpil();
    
    std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt;red= IzbaciKarteRazbrajanjem(spil,r,b);
  
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
    auto it=spil.begin();
    while(it!=spil.end()) {
        std::string pomocni=vratistring(it-&gt;first);
        std::cout&lt;&lt;vratistring(it-&gt;first)&lt;&lt;": ";
        while(it!=spil.end()&amp;&amp;pomocni==vratistring(it-&gt;first)){std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";it++;}
        std::cout&lt;&lt;std::endl;
    }
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: "; int vracanje; std::cin&gt;&gt;vracanje;
        VratiPrvihNKarata(spil,red,vracanje);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        it=spil.begin();
        while(it!=spil.end()) {
        std::string pomocni=vratistring(it-&gt;first);
        std::cout&lt;&lt;vratistring(it-&gt;first)&lt;&lt;": ";
        while(it!=spil.end()&amp;&amp;pomocni==vratistring(it-&gt;first)){std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";it++;}
        if(it!=spil.end())std::cout&lt;&lt;std::endl;
    } 
     
  
    } 
   
   
   catch(std::range_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }
     catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
</font>    } 
     catch(std::logic_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }

	return 0;
}
</pre>
</body>
</html>
