<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student4559.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student5129.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match174-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;

#include &lt;string&gt;
#include &lt;list&gt;
#include &lt;queue&gt;
#include &lt;map&gt;

#include &lt;stdexcept&gt;

enum class Boje { Pik, Tref, Herc, Karo };
std::string BojeSlovno[]{"Pik", "Tref", "Herc", "Karo"};
std::string Vrijednosti[]{"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};

typedef std::pair&lt;Boje, std::string&gt; Karta;
typedef std::pair&lt;std::string, std::string&gt; StrPar;

// PROTOTIPI
void validateDeck(const std::list&lt;Karta&gt;&amp;);

void IspisiSpil(const std::list&lt;Karta&gt;&amp;);

std::list&lt;Karta&gt; KreirajSpil();
void IzbaciKarte(std::list&lt;Karta&gt;&amp;, std::multimap&lt;Boje, std::string&gt;&amp;);
std::queue&lt;StrPar&gt; IzbaciKarteRazbrajanjem(std::list&lt;Karta&gt;&amp;, const short int&amp;, const int&amp;);
void VratiPrvihNKarata(std::list&lt;Karta&gt;&amp;, std::queue&lt;StrPar&gt;&amp;, int);

int main ()
{
    auto spil = std::move(KreirajSpil());
    
    try {
        short int r;
        std::cout &lt;&lt; "Unesite korak razbrajanja: ";
        std::cin &gt;&gt; r;
        
        int n;
        std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
        std::cin &gt;&gt; n;
        
        auto redVracanja = std::move(IzbaciKarteRazbrajanjem(spil, r, n));
        IspisiSpil(spil);
        
        int brVracanja;
        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; brVracanja;
        
        VratiPrvihNKarata(spil, redVracanja, brVracanja);
        IspisiSpil(spil);
    }
    catch (const std::exception &amp;ex) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; ex.what() &lt;&lt; std::endl;
    }
    auto spil = std::move(KreirajSpil());
    
    
    
	return 0;
}

std::list&lt;Karta&gt; KreirajSpil()
{
    std::list&lt;Karta&gt; res;
    for (int i = 0; i &lt; 4; i++)
        for (int j = 0; j &lt; 13; j++)
            res.push_back({Boje(i), Vrijednosti[j]});
            
    return res;
}

void IzbaciKarte(std::list&lt;Karta&gt; &amp;spil, std::multimap&lt;Boje, std::string&gt; &amp;zaIzbaciti)
{
    validateDeck(spil);
    
    for (auto it = zaIzbaciti.begin(); it != zaIzbaciti.end(); it++)
    {
        auto nadjena = std::find(spil.begin(), spil.end(), std::pair&lt;Boje, std::string&gt;(*it));
        if (nadjena != spil.end())
        {
            spil.erase(nadjena);
            zaIzbaciti.erase(it--);
        }
    }
}

std::queue&lt;StrPar&gt; IzbaciKarteRazbrajanjem(std::list&lt;Karta&gt; &amp;spil, const short int &amp;korak, const int &amp;brZaIzbaciti)
{
    if (korak &lt; 1 || korak &gt; 52 || brZaIzbaciti &lt; 1)
        throw std::logic_error("Neispravni elementi za izbacivanje!");
        
    validateDeck(spil);
    
    std::queue&lt;StrPar&gt; res;
    
    auto pozicija = spil.begin();
    for (int koliko = 0; koliko &lt; brZaIzbaciti &amp;&amp; spil.size() &gt; 0; koliko++)
    {
        for (int koracanje = 1; koracanje &lt; korak; koracanje++)
        {
            pozicija++;
            if (pozicija == spil.end())
                pozicija = spil.begin();
        }
        
        res.push(std::make_pair(BojeSlovno[int(pozicija-&gt;first)], pozicija-&gt;second));
        spil.erase(pozicija++);
        if (pozicija == spil.end())
            pozicija = spil.begin();
    }
    
    return res;
}

void VratiPrvihNKarata(std::list&lt;Karta&gt; &amp;spil, std::queue&lt;StrPar&gt; &amp;zaUbaciti, int n)
{
    bool isValidCard(const Karta&amp;);
    bool cmpCards(const Karta&amp;, const Karta&amp;);
    
    if (n &gt; int(zaUbaciti.size())) // Poredjenje dovodi da n "postane" unsigned
        throw std::range_error("Nedovoljno karata u redu!");
        
    if (n &lt; 0)
        throw std::domain_error("Broj n je besmislen!");
    
    validateDeck(spil);
    
    for (int i = 0; i &lt; n; i++)
    {
        Karta ubacanje{
            Boje(std::find(BojeSlovno, BojeSlovno + 4, zaUbaciti.front().first) - BojeSlovno),
            zaUbaciti.front().second
        };
        
        if (!isValidCard(ubacanje))
            throw std::logic_error("Neispravne karte!");
          
        auto gdjeUbaciti = std::lower_bound(spil.begin(), spil.end(), ubacanje, cmpCards);
        if (gdjeUbaciti == spil.end() || *gdjeUbaciti != ubacanje)
            spil.insert(gdjeUbaciti, ubacanje);
        
        zaUbaciti.pop();
    }
}

void IspisiSpil(const std::list&lt;Karta&gt; &amp;spil)
{
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
    
    
    auto poz = spil.begin();
    for (int i = 0; i &lt; 4; i++)
    {
        std::cout &lt;&lt; BojeSlovno[i] &lt;&lt; ": ";
        
        while (poz != spil.end() &amp;&amp; poz-&gt;first == Boje(i))
        {
            std::cout &lt;&lt; poz-&gt;second &lt;&lt; " ";
            poz++;
        }
        std::cout &lt;&lt; std::endl;
    }
}

void validateDeck(const std::list&lt;Karta&gt; &amp;deck)
{
    bool validCards(const std::list&lt;Karta&gt;&amp;);
    bool isSorted(const std::list&lt;Karta&gt;&amp;);
    
    if (deck.size() &gt; 52 || !validCards(deck) || !isSorted(deck))
        throw std::logic_error("Neispravna lista!");
}

bool validCards(const std::list&lt;Karta&gt; &amp;deck)
{
    bool isValidCard(const Karta&amp;);
    
    for (const auto &amp;card : deck)
        if (!isValidCard(card))
            return false;
    
    return true;
}

bool isValidCard(const Karta &amp;card)
{
    return !(int(card.first) &lt; 0 ||
             int(card.first) &gt; 3 ||
             std::find(Vrijednosti, Vrijednosti + 13, card.second) == Vrijednosti + 13);
}

bool isSorted(const std::list&lt;Karta&gt; &amp;deck)
{
    bool cmpCards(const Karta&amp;, const Karta&amp;);
    
    auto next(deck.begin());
    next++;
    
    for (auto it = deck.begin(); next != deck.end(); it++, next++)
        if (!cmpCards(*it, *next) || *it == *next)
            return false;
                
    return true;
}

bool cmpCards(const Karta &amp;card1, const Karta &amp;card2)
{
    return card1.first &lt; card2.first || (card1.first == card2.first &amp;&amp; 
        std::find(Vrijednosti, Vrijednosti + 13, card1.second) &lt; std::find(Vrijednosti, Vrijednosti + 13, card2.second));
</font>}</pre>
</body>
</html>
