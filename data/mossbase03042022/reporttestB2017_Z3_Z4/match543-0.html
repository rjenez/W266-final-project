<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1704.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1704.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;queue&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

enum class Boje {Pik, Tref, Herc, Karo};

std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; KreirajSpil() {
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil;
    for(int i=0; i&lt;4; i++) {
        for(int j=2; j&lt;15; j++) {
            std::pair&lt;Boje, std::string&gt; par;
            par.first=Boje(i);
            if(j==11) par.second='J';
            else if(j==12) par.second='Q';
            else if(j==13) par.second='K';
            else if(j==14) par.second='A';
            else par.second=std::to_string(j);
            spil.push_back(par);
        }
    }
    return spil;
}

bool TestirajRed(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red) {
    while(!red.empty()) {
        if(!(red.front().first=="Pik" || red.front().first=="Tref" || red.front().first=="Herc" || red.front().first=="Karo")) return false;
        if(!(red.front().second=="2" || red.front().second=="3" || red.front().second=="4" || red.front().second=="5" ||
        red.front().second=="6" || red.front().second=="7" || red.front().second=="8" || red.front().second=="9" ||
        red.front().second=="10" || red.front().second=="J" || red.front().second=="Q" || red.front().second=="K" ||
        red.front().second=="A")) return false;
        red.pop();
    }
    return true;
}

<a name="3"></a><font color="#00FFFF"><a href="match543-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

bool TestirajSpil(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil) {
    if(spil.size()&gt;52) return false;
</font>    for(auto it(spil.begin()); it!=spil.end(); it++) {
        if(!(it-&gt;first==Boje::Pik || it-&gt;first==Boje::Tref || it-&gt;first==Boje::Herc || it-&gt;first==Boje::Karo)) return false;
        if(!(it-&gt;second=="2" || it-&gt;second=="3" || it-&gt;second=="4" || it-&gt;second=="5" || it-&gt;second=="6" || it-&gt;second=="7" ||
        it-&gt;second=="8" || it-&gt;second=="9" || it-&gt;second=="10" || it-&gt;second=="J" || it-&gt;second=="Q" || it-&gt;second=="K" ||
        it-&gt;second=="A")) return false;
    }
    auto it(spil.begin());
    Boje prethodni=it-&gt;first;
    while(it!=spil.end()) {
        it++;
        if(it!=spil.end()) {
            if(prethodni&gt;it-&gt;first) return false;
            prethodni=it-&gt;first;
        }
    }
    it=spil.begin();
    prethodni=it-&gt;first;
    int vrijednost1;
    if(it-&gt;second=="J") vrijednost1=11;
    else if(it-&gt;second=="Q") vrijednost1=12;
    else if(it-&gt;second=="K") vrijednost1=13;
    else if(it-&gt;second=="A") vrijednost1=14;
    else vrijednost1=std::stoi(it-&gt;second);
    while(it!=spil.end()) {
        it++;
        if(it!=spil.end()) {
            int vrijednost2;
            if(it-&gt;second=="J") vrijednost2=11;
            else if(it-&gt;second=="Q") vrijednost2=12;
            else if(it-&gt;second=="K") vrijednost2=13;
            else if(it-&gt;second=="A") vrijednost2=14;
            else vrijednost2=std::stoi(it-&gt;second);
            if(prethodni==it-&gt;first &amp;&amp; vrijednost1&gt;=vrijednost2) return false;
            prethodni=it-&gt;first;
        }
    }
    return true;
}

int DajVrijednost(std::string s) {
    int vrijednost;
    if(s=="J") vrijednost=11;
    else if(s=="Q") vrijednost=12;
    else if(s=="K") vrijednost=13;
    else if(s=="A") vrijednost=14;
    else vrijednost=std::stoi(s);
    return vrijednost;
}

<a name="2"></a><font color="#0000FF"><a href="match543-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void IzbaciKarte(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::multimap&lt;Boje, std::string&gt; &amp;mapa) {
    
    if(!TestirajSpil(spil)) throw std::logic_error("Izuzetak: Neispravna lista!");
</font>    
    auto it(spil.begin());
    auto it1(mapa.begin());
    while(it1!=mapa.end()) {
        it=spil.begin();
        while(it!=spil.end() &amp;&amp; it1!=mapa.end()) {
        if(it-&gt;first==it1-&gt;first &amp;&amp; it-&gt;second==it1-&gt;second) {
            it=spil.erase(it);
            auto it2(mapa.begin());
            Boje prva=it1-&gt;first;
            std::string druga=it1-&gt;second;
            while(it2!=mapa.end()) {
                if(it2-&gt;first==prva &amp;&amp; it2-&gt;second==druga) it2=mapa.erase(it2);
                else it2++;
            }
        }
        else it++;
        }
<a name="4"></a><font color="#FF00FF"><a href="match543-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

     it1++;
    }
}

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, const short int &amp;r, const int &amp;b) {
</font><a name="5"></a><font color="#FF0000"><a href="match543-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Izuzetak: Neispravni elementi za izbacivanje!");
    if(!TestirajSpil(spil)) throw std::logic_error("Izuzetak: Neispravna lista!");
</font>    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
    int BROJAC(0);
    auto it(spil.begin());
    while(BROJAC&lt;b) {
        int brojac(1);
        while(brojac&lt;=r) {
            if(brojac==r &amp;&amp; it!=spil.end()) {
                std::string s;
                if(it-&gt;first==Boje::Pik) s="Pik";
                else if(it-&gt;first==Boje::Tref) s="Tref";
                else if(it-&gt;first==Boje::Herc) s="Herc";
                else s="Karo";
                auto par=std::make_pair(s,it-&gt;second);
                red.push(par);
                it=spil.erase(it);
                BROJAC++;
                brojac++;
            }
            else if(brojac&lt;r &amp;&amp; it==spil.end()) {
                it=spil.begin();
            }
            else {
                brojac++;
                it++;
                if(it==spil.end()) it=spil.begin();
            }
        }
    }
    return red;
}

<a name="0"></a><font color="#FF0000"><a href="match543-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n) {
    if(n&lt;0) throw std::domain_error("Izuzetak: Broj n je besmislen!");
    if(n&gt;red.size()) throw std::range_error("Izuzetak: Nedovoljno karata u redu!");
    if(!TestirajRed(red)) throw std::logic_error("Izuzetak: Neispravne karte!");
    if(!TestirajSpil(spil)) throw std::logic_error("Izuzetak: Neispravna lista!");
</font>    
    int brojac(0);
    while(!red.empty() &amp;&amp; brojac&lt;n) {
        Boje boja;
<a name="1"></a><font color="#00FF00"><a href="match543-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        if(red.front().first=="Pik") boja=Boje::Pik;
        else if(red.front().first=="Tref") boja=Boje::Tref;
        else if(red.front().first=="Herc") boja=Boje::Herc;
</font>        else boja=Boje::Karo;
       // std::cout&lt;&lt;int(boja)&lt;&lt;" "&lt;&lt;red.front().second&lt;&lt;" "&lt;&lt;brojac&lt;&lt;std::endl;
            if(boja&lt;spil.begin()-&gt;first) {
                spil.insert(spil.begin(), {boja, red.front().second});
                brojac++;
            }
            else if(boja==spil.begin()-&gt;first &amp;&amp; DajVrijednost(red.front().second)&lt;DajVrijednost(spil.begin()-&gt;second)) {
                spil.insert(spil.begin(), {boja, red.front().second});
                brojac++;
            }
            else {
                for(auto it(spil.begin()); it!=spil.end(); it++) {
                    auto prethodni(it);
                    it++;
                    if(it!=spil.end()) {
                        auto sljedeci(it);
                        if(boja==prethodni-&gt;first &amp;&amp; boja==sljedeci-&gt;first &amp;&amp;
                        DajVrijednost(red.front().second)&gt;DajVrijednost(prethodni-&gt;second) &amp;&amp; DajVrijednost(red.front().second)&lt;DajVrijednost(sljedeci-&gt;second)) {
                            spil.insert(sljedeci, {boja, red.front().second});
                            brojac++;
                            break;
                        }
                        else if(boja==prethodni-&gt;first &amp;&amp; boja&lt;sljedeci-&gt;first &amp;&amp;
                        DajVrijednost(red.front().second)&gt;DajVrijednost(prethodni-&gt;second)) {
                            spil.insert(sljedeci, {boja, red.front().second});
                            brojac++;
                            break;
                        }
                        else if(boja&gt;prethodni-&gt;first &amp;&amp; boja==sljedeci-&gt;first &amp;&amp; 
                        DajVrijednost(red.front().second)&lt;DajVrijednost(sljedeci-&gt;second)) {
                            spil.insert(sljedeci, {boja, red.front().second});
                            brojac++;
                            break;
                        }
                    }
                    else {
                        if(boja&gt;prethodni-&gt;first) {
                            spil.insert(spil.end(), {boja, red.front().second});
                            brojac++;
                            break;
                        }
                        else if(boja==prethodni-&gt;first &amp;&amp; DajVrijednost(red.front().second)&gt;DajVrijednost(prethodni-&gt;second)) {
                            spil.insert(spil.end(), {boja, red.front().second});
                            brojac++;
                            break;
                        }
                    }
                    it--;
                }
            }
            red.pop();
        }
    }


int main ()
{
    try {
    short int r;
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    std::cin&gt;&gt;r;
    int d;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    std::cin&gt;&gt;d;
    auto spil(KreirajSpil());
    auto red(IzbaciKarteRazbrajanjem(spil, r, d));
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    auto it(spil.begin());
    std::cout&lt;&lt;"Pik: ";
        while(it-&gt;first==Boje::Pik &amp;&amp; it!=spil.end()) {
            std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
            it++;
        }
        std::cout&lt;&lt;std::endl;
        std::cout&lt;&lt;"Tref: ";
        while(it-&gt;first==Boje::Tref &amp;&amp; it!=spil.end()) {
            std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
            it++;
        }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Herc: ";
    while(it-&gt;first==Boje::Herc &amp;&amp; it!=spil.end()) {
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Karo: ";
    while(it-&gt;first==Boje::Karo &amp;&amp; it!=spil.end()) {
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
    std::cout&lt;&lt;std::endl;
    int n;
    std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
    std::cin&gt;&gt;n;
    VratiPrvihNKarata(spil, red, n);
    it=spil.begin();
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    std::cout&lt;&lt;"Pik: ";
    while(it-&gt;first==Boje::Pik &amp;&amp; it!=spil.end()) {
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Tref: ";
    while(it-&gt;first==Boje::Tref &amp;&amp; it!=spil.end()) {
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Herc: ";
    while(it-&gt;first==Boje::Herc &amp;&amp; it!=spil.end()) {
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Karo: ";
    while(it-&gt;first==Boje::Karo &amp;&amp; it!=spil.end()) {
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
    }
    catch(std::logic_error poruka) {
        std::cout&lt;&lt;poruka.what();
        return 0;
    }
    catch(std::range_error poruka) {
        std::cout&lt;&lt;poruka.what();
        return 0;
    }
    catch(std::domain_error poruka) {
        std::cout&lt;&lt;poruka.what();
    }
    
	return 0;
}
</pre>
</body>
</html>
