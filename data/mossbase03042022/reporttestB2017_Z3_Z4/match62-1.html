<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student4681.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student3819.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match62-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_42.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include "iostream"
#include "list"
#include "utility"
#include "map"
#include "stdexcept"
#include "vector"
#include "string"
#include "queue"

enum class Boje { Pik, Tref, Herc, Karo };
const std::vector&lt;std::string&gt; karte{"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};

std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; KreirajSpil() {
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil;
    for(int color = (int)Boje::Pik; color != (int)Boje::Karo + 1; color++)
        for(int i = 0; i &lt; karte.size(); i++) 
            spil.push_back(std::make_pair((Boje)color, karte.at(i)));
    return spil;
}

bool vectorFind(std::string first, std::string second) {
    int pF, pS;
    bool found(false);
    for(int i = 0; i &lt; karte.size(); i++) 
        if(first == karte.at(i)) { pF = i; found = true; break; }
    for(int i = 0; i &lt; karte.size(); i++) 
        if(second == karte.at(i)) { pS = i; found = true; break; }
    if(!found) return false;
    else {
        if(pF &lt; pS) return true;
        else return false;
    }
}

bool testList(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; testSpil) {
    if(testSpil.size() &gt; 52) return false;
    for(auto it = testSpil.begin(); it != testSpil.end(); it++) {
        auto end = it;
        ++end;
        if(end == testSpil.end()) break;
        if((int)std::get&lt;0&gt;(*it) == (int)std::get&lt;0&gt;(*end)) {
             if(vectorFind(std::get&lt;1&gt;(*it), std::get&lt;1&gt;(*end))) continue;
             else return false;
        } else if((int)std::get&lt;0&gt;(*it) &lt; (int)std::get&lt;0&gt;(*end)) continue;
        else return false;
    }
    return true;
}

void IzbaciKarte(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::multimap&lt;Boje, std::string&gt; &amp;target) {
    if(!testList(spil)) throw std::logic_error("Neispravna lista!");
    for(auto it = spil.begin(); it != spil.end(); it++) {
        if(target.find(std::get&lt;0&gt;(*it)) == target.end()) continue;
        else
            for(auto tarit = target.begin(); tarit != target.end(); tarit++)
                if(it-&gt;first == tarit-&gt;first &amp;&amp; it-&gt;second == tarit-&gt;second) {
                    auto o = it;
                    spil.erase(o);
                    it = spil.begin();
                    target.erase(tarit);
                    break;
                }
    }
}

std::string convertBoje(Boje boje) {
    if(boje == Boje::Pik) return "Pik";
    else if(boje == Boje::Tref) return "Tref";
    else if(boje == Boje::Herc) return "Herc";
    return "Karo";
}

int convertBoje(std::string boje) {
    if(boje == "Pik") return 0;
    else if(boje == "Tref") return 1;
    else if(boje == "Herc") return 2;
    return 3;
}

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, const short int &amp;korak, const int &amp;izbaciti) {
    if(korak &lt; 1 || korak &gt; 52 || izbaciti &lt; 1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(!testList(spil)) throw std::logic_error("Neispravna lista!");
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
    int izbaceno(0), Tkorak(-1);
    auto it = spil.begin();
    while(izbaceno &lt; izbaciti) {
        Tkorak += korak;
        if(spil.size() == 0) break;
        if(Tkorak &gt;= spil.size()) {
            Tkorak -= spil.size();
            it = spil.begin();
            std::advance(it, Tkorak);
        } else std::advance(it, korak - 1);
        red.push(std::make_pair(convertBoje(it-&gt;first), it-&gt;second));
        it = spil.erase(it);
        --Tkorak;
        izbaceno++;
    }
    return red;
}

void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n) {
</font><a name="0"></a><font color="#FF0000"><a href="match62-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_55.gif"/></a>

    if(n &lt; 0) throw std::logic_error("Broj n je besmislen!");
    if(n &gt; red.size()) throw std::range_error("Nedovoljno karata u redu!");
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red2 = red;
    bool tst(false);
    while(!red2.empty()) {
        if(std::get&lt;0&gt;(red2.front()) == "Herc" || std::get&lt;0&gt;(red2.front()) == "Pik" || std::get&lt;0&gt;(red2.front()) == "Tref" || std::get&lt;0&gt;(red2.front()) == "Karo") {
            for(int i = 0; i &lt; karte.size(); i++)
                if(std::get&lt;1&gt;(red2.front()) == karte.at(i)) tst = true;
        }
        else if(tst) throw std::logic_error("Neispravne karte!");
        else throw std::logic_error("Neispravne karte!");
        red2.pop();
    }
    if(!testList(spil)) throw std::logic_error("Neispravna lista!");
    for(int i = 0; i &lt; n; i++) {
        bool ima = false;
        int spilPos(-1), redPos, prev;
        for(auto j = spil.begin(); j != spil.end(); j++)
            if(j-&gt;first == (Boje)convertBoje(std::get&lt;0&gt;(red.front()))) {
                ima = true;
                if(j-&gt;second == std::get&lt;1&gt;(red.front())) {
                    --i; break;
                }
                for(int k = 0; k &lt; karte.size(); k++)
                    if(j-&gt;second == karte.at(k)) {
                        if(spilPos &lt; k) {
                            prev = spilPos;
                            spilPos = k;
                        }
                        break;
                    }
                for(int k = 0; k &lt; karte.size(); k++)
                    if(std::get&lt;1&gt;(red.front()) == karte.at(k)) {
                        redPos = k;
                        break;
                    }
                auto end = j;
                ++end;
                if((prev &lt;= redPos &amp;&amp; redPos &lt; spilPos) || (end == spil.end() &amp;&amp; prev &lt;= redPos) || end-&gt;first != j-&gt;first) {
                    if(end == spil.end()) ++j;
                    if(end-&gt;first != j-&gt;first &amp;&amp; !((prev &lt;= redPos &amp;&amp; redPos &lt; spilPos) || (end == spil.end() &amp;&amp; prev &lt;= redPos))) 
                    j = spil.insert(end, std::make_pair((Boje)convertBoje(std::get&lt;0&gt;(red.front())), std::get&lt;1&gt;(red.front())));
                    else
                    j = spil.insert(j, std::make_pair((Boje)convertBoje(std::get&lt;0&gt;(red.front())), std::get&lt;1&gt;(red.front())));
                    break;
                }
            }
            if(!ima) {
                bool tjt(false);
                int color = int((Boje)convertBoje(std::get&lt;0&gt;(red.front())));
                if(spil.size() == 0) spil.insert(spil.begin(), std::make_pair((Boje)convertBoje(std::get&lt;0&gt;(red.front())), std::get&lt;1&gt;(red.front())));
                else if(spil.size() != 0)
                for(auto it = spil.begin();; it++) {
                    if(it == spil.end()) {
                        --color;
                        if(color &lt; 0) break;
                        it = spil.begin();
                    }
                    auto end = it;
                        ++end;
                        if(it-&gt;first == (Boje)color)
                        if(it-&gt;first != end-&gt;first || end == spil.end()) {
                        spil.insert(end, std::make_pair((Boje)convertBoje(std::get&lt;0&gt;(red.front())), std::get&lt;1&gt;(red.front())));
                        tjt = true;
                        break;
                        }
                }
                else if(color == 0 &amp;&amp; !tjt) spil.insert(spil.begin(), std::make_pair((Boje)convertBoje(std::get&lt;0&gt;(red.front())), std::get&lt;1&gt;(red.front())));
            }
        red.pop();
        if(red.empty()) return;
    }
}

void ispisSpil(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil) {
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:";
    bool begin(true);
    for(auto it = spil.begin(); it != spil.end(); it++) {
        auto end = it;
        ++end;
        if(end == spil.end()) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
        else {
            if(std::get&lt;0&gt;(*it) == std::get&lt;0&gt;(*end) &amp;&amp; !begin) std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
            else if(std::get&lt;0&gt;(*it) != std::get&lt;0&gt;(*end) &amp;&amp; !begin || begin) {
                if(!begin) {
                    std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
                    std::cout &lt;&lt; "\n" + convertBoje(std::get&lt;0&gt;(*end)) + ": ";
                } else {
                    std::cout &lt;&lt; "\n" + convertBoje(std::get&lt;0&gt;(*it)) + ": ";
                    std::cout &lt;&lt; it-&gt;second &lt;&lt; " ";
                }
                begin = false;
            }
        }
    }
}

int main ()
{
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    int korakRazbrajanja;
    std::cin &gt;&gt; korakRazbrajanja;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    int izbaciti;
    std::cin &gt;&gt; izbaciti;
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil(KreirajSpil());
    try {
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red(IzbaciKarteRazbrajanjem(spil, korakRazbrajanja, izbaciti));
    ispisSpil(spil);
    std::cout &lt;&lt; "\nUnesite broj karata koje zelite vratiti u spil: ";
    int vrati;
    std::cin &gt;&gt; vrati;
    VratiPrvihNKarata(spil, red, vrati);
    } catch (std::range_error e) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt;  e.what();
        return 0;
    } catch (std::logic_error e) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
        return 0;
    }
    ispisSpil(spil);
	return 0;
</font>}
</pre>
</body>
</html>
