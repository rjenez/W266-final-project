<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8670.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8670.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;list&gt;
#include &lt;sstream&gt;
#include &lt;utility&gt;
#include &lt;iterator&gt;
#include &lt;queue&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

template &lt;typename T &gt; std::string PretvoriUString (T x)
{
    std::ostringstream s;
    s &lt;&lt; x;
    return s.str();
}

<a name="4"></a><font color="#FF00FF"><a href="match376-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; KreirajSpil ()
{
    std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; listaSpila;
    for(int i = 0; i &lt; 4; i++) {
</font>        for(int j = 2; j &lt;= 10; j++) {
            if(i == 0)
                listaSpila.push_back(std::make_pair(Boje::Pik, PretvoriUString(j)));
            else if (i == 1)
                listaSpila.push_back(std::make_pair(Boje::Tref, PretvoriUString(j)));
            else if (i == 2)
                listaSpila.push_back(std::make_pair(Boje::Herc, PretvoriUString(j)));
            else if (i == 3)
                listaSpila.push_back(std::make_pair(Boje::Karo, PretvoriUString(j)));
        }
        if (i == 0) {
<a name="0"></a><font color="#FF0000"><a href="match376-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            listaSpila.push_back(std::make_pair(Boje::Pik, "J"));
            listaSpila.push_back(std::make_pair(Boje::Pik, "Q"));
            listaSpila.push_back(std::make_pair(Boje::Pik, "K"));
            listaSpila.push_back(std::make_pair(Boje::Pik, "A"));
        } else if (i == 1) {
</font><a name="1"></a><font color="#00FF00"><a href="match376-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            listaSpila.push_back(std::make_pair(Boje::Tref, "J"));
            listaSpila.push_back(std::make_pair(Boje::Tref, "Q"));
            listaSpila.push_back(std::make_pair(Boje::Tref, "K"));
            listaSpila.push_back(std::make_pair(Boje::Tref, "A"));
        } else if (i == 2) {
</font><a name="2"></a><font color="#0000FF"><a href="match376-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            listaSpila.push_back(std::make_pair(Boje::Herc, "J"));
            listaSpila.push_back(std::make_pair(Boje::Herc, "Q"));
            listaSpila.push_back(std::make_pair(Boje::Herc, "K"));
            listaSpila.push_back(std::make_pair(Boje::Herc, "A"));
        } else if (i == 3) {
</font><a name="3"></a><font color="#00FFFF"><a href="match376-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            listaSpila.push_back(std::make_pair(Boje::Karo, "J"));
            listaSpila.push_back(std::make_pair(Boje::Karo, "Q"));
            listaSpila.push_back(std::make_pair(Boje::Karo, "K"));
            listaSpila.push_back(std::make_pair(Boje::Karo, "A"));
        }
    }

    return listaSpila;
</font>}

template &lt; class ForwardIterator &gt;
bool is_sorted (ForwardIterator prvi, ForwardIterator last)
{
    if (prvi == last) return true;
    ForwardIterator next = prvi;
    while(++next != last) {
        std::string s1 = (*next).second;
        std::string s2 = (*prvi).second;
        int a(0), b(0);
        for(int i = 0; i &lt; s1.size(); i++) {
            a*=10;
            a+=s1[i] - '0';
        }
        for(int i = 0; i &lt; s2.size(); i++) {
            b*=10;
            b+=s2[i] - '0';
        }
        if (a &lt; b &amp;&amp; (int)(*next).first == (int)(*prvi).first) {
            return false;
        } else if (a == b &amp;&amp; (int)(*next).first == (int)(*prvi).first) {
            return false;
        }
        if( (int)(*next).first &lt; (int)(*prvi).first) {
            return false;
        }
        ++prvi;
    }
    return true;
}

bool IspravnaListaSpila(std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; &amp;listaSpila)
{
    if(listaSpila.size() &gt; 52) {
        return false;
    }
    for (auto i = listaSpila.begin(); i != listaSpila.end(); i++) {
        if((*i).first != Boje::Pik &amp;&amp; (*i).first != Boje::Tref &amp;&amp; (*i).first != Boje::Herc  &amp;&amp; (*i).first != Boje::Karo) {
            return false;
        }
        if((*i).second != "2" &amp;&amp; (*i).second != "3" &amp;&amp; (*i).second != "4" &amp;&amp; (*i).second != "5" &amp;&amp; (*i).second != "6" &amp;&amp; (*i).second != "7" &amp;&amp; (*i).second != "8" &amp;&amp; (*i).second != "9" &amp;&amp; (*i).second != "10" &amp;&amp; (*i).second != "J" &amp;&amp; (*i).second != "Q" &amp;&amp; (*i).second != "K" &amp;&amp; (*i).second != "A") {
            return false;
        }
    }
    for (auto i = listaSpila.begin(); i != listaSpila.end(); i++) {
       if ((*i).second == "J" ) (*i).second = "11";
       if ((*i).second == "Q" ) (*i).second = "12";
       if ((*i).second == "K" ) (*i).second = "13";
       if ((*i).second == "A" ) (*i).second = "14";
    }

    if(! is_sorted(listaSpila.begin(), listaSpila.end())) {
        for (auto i = listaSpila.begin(); i != listaSpila.end(); i++) {
            if ((*i).second == "11" ) (*i).second = "J";
            if ((*i).second == "12" ) (*i).second = "Q";
           if ((*i).second == "13" ) (*i).second = "K";
           if ((*i).second == "14" ) (*i).second = "A";
        }
        return false;
    }
    for (auto i = listaSpila.begin(); i != listaSpila.end(); i++) {
        if ((*i).second == "11" ) (*i).second = "J";
        if ((*i).second == "12" ) (*i).second = "Q";
        if ((*i).second == "13" ) (*i).second = "K";
        if ((*i).second == "14" ) (*i).second = "A";
    }
    return true;
}

void IzbaciKarte(std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; &amp;listaSpila, std::multimap &lt; Boje, std::string &gt; &amp;multiMapa)
{
    if (! IspravnaListaSpila(listaSpila)) throw std::logic_error ("Neispravna lista!");
ponovo:
    for(auto it = multiMapa.begin(); it != multiMapa.end(); it++) {
        for(auto ot = listaSpila.begin(); ot != listaSpila.end(); ot++) {
            if(it -&gt; first == (*ot).first &amp;&amp; it -&gt; second == (*ot).second) {
                listaSpila.erase(ot);
                multiMapa.erase(it);
                goto ponovo;
            }
        }
    }
}

std::queue &lt; std::pair &lt; std::string, std::string &gt;&gt; IzbaciKarteRazbrajanjem(std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; &amp;listaSpila, const short int &amp;r, int &amp;b)
{
    if (!IspravnaListaSpila(listaSpila)) throw std::logic_error ("Neispravna lista!");
<a name="5"></a><font color="#FF0000"><a href="match376-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    if (r &lt; 1 || r &gt; 52) throw std::logic_error ("Neispravni elementi za izbacivanje!");
    if (b &lt; 1) throw std::logic_error ("Neispravni elementi za izbacivanje!");
    std::queue &lt; std::pair &lt; std::string, std::string &gt;&gt; red;
</font>    int izbaceno(0), element(0);
    for(auto i = listaSpila.begin(); ; i++) {
        if (i == listaSpila.end()) i = listaSpila.begin();
        element++;
        if(element == r) {
            if((int)(*i).first == 0)
                red.push(std::make_pair("Pik", (*i).second));
            else if((int)(*i).first == 1)
                red.push(std::make_pair("Tref", (*i).second));
            else if((int)(*i).first == 2)
                red.push(std::make_pair("Herc", (*i).second));
            else  if((int)(*i).first == 3)
                red.push(std::make_pair("Karo", (*i).second));
            auto m = i;
            m--;
            listaSpila.erase(i);
            i = m;
            izbaceno++;
            if(izbaceno == b || listaSpila.size() == 0) break;
            element = 0;
        }
    }
    return red;
}

void VratiPrvihNKarata(std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; &amp;listaSpila,std::queue &lt; std::pair &lt; std::string, std::string &gt;&gt;&amp; red, int n)
{
    if (n &lt; 0) throw std::domain_error ("Broj n je besmislen!");
    if (n &gt; red.size()) throw std::range_error ("Nedovoljno karata u redu!");
    for(int k = 0; k &lt; red.size(); k++) {
        std::string a1, a2;
        a1 = red.front().first;
        a2 = red.front().second;
        if(a1 != "Pik" &amp;&amp; a1 != "Tref" &amp;&amp; a1 != "Herc" &amp;&amp; a1 != "Karo") throw std::logic_error ("Neispravne karte!");
        if(a2 != "2" &amp;&amp; a2 != "3" &amp;&amp; a2 != "4" &amp;&amp; a2 != "5" &amp;&amp; a2 != "6" &amp;&amp; a2 != "7" &amp;&amp; a2 != "8" &amp;&amp; a2 != "9" &amp;&amp; a2 != "10"
                &amp;&amp; a2 != "J" &amp;&amp; a2 != "Q" &amp;&amp; a2 != "K" &amp;&amp; a2 != "A") throw std::logic_error ("Neispravne karte!");
        red.push(red.front());
        red.pop();
    }
    if (!IspravnaListaSpila(listaSpila)) throw std::logic_error ("Neispravna lista!");
    for (int l = 0; l &lt; n; l++) 
    {
        bool nemaKartiTogZnakaUspilu=true;
        for (auto it = listaSpila.begin(); it != listaSpila.end(); it++) 
        {
            bool PrekiniRad = false;
            std::string znak;
            if((int)(*it).first == 0) {
                znak = "Pik";
            }
            if((int)(*it).first == 1) {
                znak = "Tref";
            }
            if((int)(*it).first == 2) {
                znak = "Herc";
            }
            if((int)(*it).first == 3) {
                znak = "Karo";
            }
            if(znak == red.front().first) 
            {
                nemaKartiTogZnakaUspilu=false;
                bool najveciUznaku=false;
                while (znak == red.front().first &amp;&amp; it != listaSpila.end()) 
                {
                    std::string s1 = (*it).second;
                    std::string s2 = red.front().second;
                    int a(0), b(0);
                    if((s1[0] &gt;= '0' &amp;&amp; s1[0] &lt;= '9') &amp;&amp; (s2[0] &gt;= '0' &amp;&amp; s2[0] &lt;= '9')) 
                    {
                        for(int i = 0; i &lt; s1.size(); i++) 
                        {
                            a*=10;
                            a+=s1[i] - '0';
                        }
                        for(int i = 0; i &lt; s2.size(); i++) {
                            b*=10;
                            b+=s2[i] - '0';
                        }
                    } 
                    else 
                    {
                        if (s1 == "J" ) a= 11;
                        else if (s1 == "Q" ) a = 12;
                        else if (s1 == "K" ) a = 13;
                        else if(s1 == "A" ) a = 14;
                        if (s2 == "J" ) b = 11;
                        else if (s2== "Q" ) b = 12;
                        else if (s2 == "K" ) b = 13;
                        else if(s2 == "A" ) b = 14;
                    }
                    if (b == a) 
                    {
                        najveciUznaku=false;
                        PrekiniRad = true;
                    } 
                    else if (b &lt; a) 
                    {
                        najveciUznaku=false;
                        if (znak == "Pik")
                            listaSpila.insert(it, std::make_pair(Boje::Pik,red.front().second));
                        if (znak == "Tref")
                            listaSpila.insert(it, std::make_pair(Boje::Tref,red.front().second));
                        if (znak == "Herc")
                            listaSpila.insert(it, std::make_pair(Boje::Herc,red.front().second));
                        if (znak == "Karo")
                            listaSpila.insert(it, std::make_pair(Boje::Karo,red.front().second));
                        red.pop();
                        PrekiniRad = true;
                    }
                    else if(b&gt;a)
                    {
                        najveciUznaku=true;
                    }
                    it++;
                    if((int)(*it).first == 0) {
                        znak = "Pik";
                    }
                    if((int)(*it).first == 1) {
                        znak = "Tref";
                    }
                    if((int)(*it).first == 2) {
                        znak = "Herc";
                    }
                    if((int)(*it).first == 3) {
                        znak = "Karo";
                    }
                    if(PrekiniRad) break;
                }
                if(najveciUznaku)
                {
                    if (red.front().first == "Pik")
                            listaSpila.insert(it, std::make_pair(Boje::Pik,red.front().second));
                    if (red.front().first == "Tref")
                        listaSpila.insert(it, std::make_pair(Boje::Tref,red.front().second));
                    if (red.front().first == "Herc")
                        listaSpila.insert(it, std::make_pair(Boje::Herc,red.front().second));
                    if (red.front().first == "Karo")
                        listaSpila.insert(it, std::make_pair(Boje::Karo,red.front().second));
                    red.pop();
                    PrekiniRad = true;
                }
                it--;
            }
            else
            {
                nemaKartiTogZnakaUspilu=true;
            }
            if(PrekiniRad) break;
        }
        if(nemaKartiTogZnakaUspilu)
        {
            if(red.front().first=="Pik")
            {
                auto it=listaSpila.begin();
                for (;it!=listaSpila.end();it++) 
                {
                    if((int)(*it).first==1)
                        break;
                }
                if(it==listaSpila.end()) it=listaSpila.begin();
                listaSpila.insert(it, std::make_pair(Boje::Pik,red.front().second));
                red.pop();
            }
            else if(red.front().first=="Tref")
            {
                auto it=listaSpila.begin();
                for (;it!=listaSpila.end();it++) 
                {
                    if((int)(*it).first==2)
                        break;
                }
                if(it==listaSpila.end())
                {
                    it=listaSpila.begin();
                    while ((int)(*it).first==0 &amp;&amp; it!=listaSpila.end()) 
                    {
                        it++;
                    }
                }
                listaSpila.insert(it, std::make_pair(Boje::Tref,red.front().second));
                red.pop();
            }
            else if(red.front().first=="Herc")
            {
                auto it=listaSpila.begin();
                for (;it!=listaSpila.end();it++) 
                {
                    if((int)(*it).first==3)
                        break;
                }
                if(it==listaSpila.end()) 
                    listaSpila.push_back(std::make_pair(Boje::Herc,red.front().second));
                else listaSpila.insert(it, std::make_pair(Boje::Herc,red.front().second));
                red.pop();
            }
            else if(red.front().first=="Karo")
            {
                listaSpila.push_back(std::make_pair(Boje::Karo,red.front().second));
                red.pop();
            }
        }
    }
}

int main ()
{
    std::list &lt; std::pair &lt; Boje, std::string &gt;&gt; listaSpila = KreirajSpil();
    int korakRazbrajanja;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; korakRazbrajanja;
    int brojIzbacenihKarata;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; brojIzbacenihKarata;
    std::queue &lt; std::pair &lt; std::string, std::string &gt;&gt; redIzbacenih;
    try 
    {
        redIzbacenih = IzbaciKarteRazbrajanjem(listaSpila, korakRazbrajanja, brojIzbacenihKarata);
    }
    catch(std::logic_error c)
    {
        std::cout &lt;&lt;"Izuzetak: "&lt;&lt; c.what();
        return 0;
    }
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; listaSpila.size() &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
    if(listaSpila.size()==0)
    {
        std::cout &lt;&lt; "Pik:\nTref:\nHerc:\nKaro:";
    }
    for (auto x = listaSpila.begin(); x != listaSpila.end(); x++)
    {
        std::cout &lt;&lt; "Pik: ";
        if((*x).first == Boje::Pik)
        {
            while ((*x).first == Boje::Pik &amp;&amp; x != listaSpila.end())
            {
                std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                x++;
            }
            if(x==listaSpila.end()) x--;
        }
        std::cout &lt;&lt; "\nTref: ";
        if((*x).first == Boje::Tref)
        {
            while ((*x).first == Boje::Tref &amp;&amp; x != listaSpila.end())
            {
                std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                x++;
            }
            if(x==listaSpila.end()) x--;
        }
        std::cout &lt;&lt; "\nHerc: ";
        if((*x).first == Boje::Herc)
        {
            while ((*x).first == Boje::Herc &amp;&amp; x != listaSpila.end())
            {
                std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                x++;
            }
            if(x==listaSpila.end()) x--;
        }
        std::cout &lt;&lt; "\nKaro: ";
        if((*x).first == Boje::Karo)
        {
            while ((*x).first == Boje::Karo &amp;&amp; x != listaSpila.end())
            {
                std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                x++;
            }
            if(x==listaSpila.end()) x--;
        }
    }
        std::cout &lt;&lt; "\nUnesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin &gt;&gt; n;
        try
        {
            VratiPrvihNKarata(listaSpila, redIzbacenih, n);
        }
        catch (std::exception&amp; c)
        {
            std::cout&lt;&lt;"Izuzetak: " &lt;&lt; c.what();
            return 0;
        }
        
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; listaSpila.size() &lt;&lt; " karata, i to: " &lt;&lt; std::endl;
        if(listaSpila.size()==0)
        {
            std::cout &lt;&lt; "Pik:\nTref:\nHerc:\nKaro:";
        }
        for (auto x = listaSpila.begin(); x != listaSpila.end(); x++)
        {
            std::cout &lt;&lt; "Pik: ";
            if((*x).first == Boje::Pik)
            {
                while ((*x).first == Boje::Pik &amp;&amp; x != listaSpila.end())
                {
                    std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                    x++;
                }
                if(x==listaSpila.end()) x--;
            }
            std::cout &lt;&lt; "\nTref: ";
            if((*x).first == Boje::Tref)
            {
                while ((*x).first == Boje::Tref &amp;&amp; x != listaSpila.end())
                {
                    std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                    x++;
                }
                if(x==listaSpila.end()) x--;
            }
            std::cout &lt;&lt; "\nHerc: ";
            if((*x).first == Boje::Herc)
            {
                while ((*x).first == Boje::Herc &amp;&amp; x != listaSpila.end())
                {
                    std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                    x++;
                }
                if(x==listaSpila.end()) x--;
            }
            std::cout &lt;&lt; "\nKaro: ";
            if((*x).first == Boje::Karo)
            {
                while ((*x).first == Boje::Karo &amp;&amp; x != listaSpila.end())
                {
                    std::cout &lt;&lt; (*x).second &lt;&lt; " ";
                    x++;
                }
                if(x==listaSpila.end()) x--;
            }
        }
    return 0;
}
</pre>
</body>
</html>
