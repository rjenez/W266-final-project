<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1916.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student4903.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match109-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;queue&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

typedef std::pair&lt;Boje, std::string&gt; Karta;
typedef std::list&lt;Karta&gt; Spil;

void IspisiSpil(const Spil &amp;spil)
{
    int broj_karata(0);
    for(auto i(spil.begin()); i!=spil.end(); i++) broj_karata++;
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; broj_karata &lt;&lt; " karata, i to:\n";
    for(int i(0); i&lt;4; i++) {
        if(i==0) std::cout &lt;&lt; "Pik: ";
        if(i==1) std::cout &lt;&lt; "Tref: ";
        if(i==2) std::cout &lt;&lt; "Herc: ";
        if(i==3) std::cout &lt;&lt; "Karo: ";
        std::for_each(spil.begin(), spil.end(), [i](Karta a) {
            if(a.first==Boje(i)) std::cout &lt;&lt; a.second &lt;&lt; " ";
        });
        std::cout &lt;&lt; std::endl;
    }
}

Spil KreirajSpil()
{
    Spil spil;
    for(int i(0); i&lt;4; i++) {
        std::string broj;
        for(int j(2); j&lt;=14; j++) {
            broj=" ";
            broj.at(0)=char(j+'0');
            if(j==10) broj="10";
            if(j==11) broj="J";
            if(j==12) broj="Q";
            if(j==13) broj="K";
            if(j==14) broj="A";
            Karta a;
            a.first=Boje(i);
            a.second=broj;
            spil.push_back(a);
        }
    }
    return spil;
}

int StringUBroj(std::string a)
{
    int broj(0);
    broj+=a.at(0)-'0';
    if(a=="10") broj=10;
    if(a=="J") broj=11;
    if(a=="Q") broj=12;
    if(a=="K") broj=13;
    if(a=="A") broj=14;
    return broj;
}

std::string BojaUString(Boje boja)
{
    if(boja==Boje::Pik) return "Pik";
    if(boja==Boje::Tref) return "Tref";
    if(boja==Boje::Herc) return "Herc";
    return "Karo";
}

bool ManjaBoja(Boje a, Boje b)
{
    if((a==Boje::Pik &amp;&amp; b!=Boje::Pik) || (a==Boje::Tref &amp;&amp; (b==Boje::Herc || b==Boje::Karo)) || (a==Boje::Herc &amp;&amp;  b==Boje::Karo)) return true;
    return false;
}

bool IstaBoja(Boje a, Boje b)
{
    if((a==Boje::Pik &amp;&amp; b==Boje::Pik) || (a==Boje::Tref &amp;&amp; b==Boje::Tref) || (a==Boje::Herc &amp;&amp; b==Boje::Herc)
            || (a==Boje::Karo &amp;&amp; b==Boje::Karo)) return true;
    return false;
}

bool ManjaKarta(Karta a, Karta b)
{
    if(ManjaBoja(a.first, b.first)) return true;
    if(IstaBoja(a.first, b.first)) return StringUBroj(a.second)&lt;StringUBroj(b.second);
    return false;
}

void IzbaciKarte(Spil &amp;spil, std::multimap&lt;Boje, std::string&gt; mapa)
{
    int broj_karata(0);
    for(auto x(spil.begin()); x!=spil.end(); x++) broj_karata++;
    bool dobro_sortirana(true);
    auto pom(spil.end());
    pom--;
    for(auto x(spil.begin()); x!=pom; x++) {
        auto po(x);
        po++;
        if(ManjaKarta(*po, *x)) {
            dobro_sortirana=false;
            break;
        }
    }
    if(broj_karata&gt;52 || !dobro_sortirana) throw std::logic_error("Neispravna lista!");
    auto it(mapa.begin());
    while(it!=mapa.end()) {
        Karta karta;
        karta.first=it-&gt;first;
        karta.second=it-&gt;second;
        auto p=std::remove(spil.begin(), spil.end(), karta);
        if(p!=spil.end()) {
            p=spil.end();
            p--;
            p=spil.erase(p);
            it=mapa.erase(it);
            continue;
        }
        it++;
    }
}

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbiranjem(Spil &amp;spil, const short int &amp;korak_razbrajanja, const int &amp;broj_karata)
{
    if(korak_razbrajanja&lt;1 || korak_razbrajanja&gt;52 || broj_karata&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    int broj(0);
    auto it(spil.begin());
    for(; it!=spil.end(); it++) broj++;
    it=spil.begin();
    auto kraj(spil.end());
    kraj--;
    bool dobro_sortirana(true);
    while(it!=kraj) {
        auto pom(it);
        pom++;
        if(ManjaKarta(*pom, *it)) {
            dobro_sortirana=false;
            break;
        }
        it++;
    }
    if(broj&gt;52 || !dobro_sortirana) throw std::logic_error("Neispravna lista!");
    it=spil.begin();
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red_karata;
    for(int i(0); i&lt;broj_karata &amp;&amp; spil.size()!=0; i++) {
        broj=korak_razbrajanja;
        while(broj&gt;spil.size()) broj-=spil.size();
        for(int j(0); j&lt;broj-1; j++) {
            it++;
            if(it==spil.end()) it=spil.begin();
        }
        std::pair&lt;std::string, std::string&gt; karta(std::make_pair(BojaUString(it-&gt;first), it-&gt;second));
        red_karata.push(karta);
        it=spil.erase(it);
        if(it==spil.end()) it=spil.begin();
    }
    return red_karata;
}

bool IspravnaKartaURedu(std::pair&lt;std::string, std::string&gt; karta)
{
    std::string a;
    a=karta.first;
    if(!(a=="Pik" || a=="Tref" || a=="Herc" || a=="Karo")) return false;
    a=karta.second;
    if(!(a=="2" || a=="3" || a=="4" || a=="5" || a=="6" || a=="7" || a=="8" || a=="9"
            || a=="10" || a=="J" || a=="Q" || a=="K" || a=="A")) return false;
    return true;
}

Karta KartaIzRedaUListu(std::pair&lt;std::string, std::string&gt; a)
{
    Karta karta;
    karta.first=Boje::Pik;
    if(a.first=="Tref") karta.first=Boje::Tref;
    if(a.first=="Karo") karta.first=Boje::Karo;
    if(a.first=="Herc") karta.first=Boje::Herc;
    karta.second=a.second;
    return karta;
}

void VratiPrvihNKarata(Spil &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red_karata, int n)
{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red_karata.size()) throw std::range_error("Nedovoljno karata u redu!");
    bool ispravne_karte(true);
    for(int i(0); i&lt;red_karata.size(); i++) {
        std::pair&lt;std::string, std::string&gt; karta(red_karata.front());
        red_karata.pop();
        red_karata.push(karta);
        if(!IspravnaKartaURedu(karta)) {
            ispravne_karte=false;
            break;
        }
    }
    if(!ispravne_karte) throw std::logic_error("Neispravne karte!");
    for(int i(0); i&lt;n; i++) {
        std::pair&lt;std::string, std::string&gt; a(red_karata.front());
        red_karata.pop();
        Karta karta(KartaIzRedaUListu(a));
        auto it(spil.begin());
        for(; it!=spil.end() &amp;&amp; ManjaKarta(*it, karta); it++);
        spil.insert(it, karta);
    }
}

int main ()
{
    Spil spil;
    try {
        spil=KreirajSpil();
        std::cout &lt;&lt; "Unesite korak razbrajanja: ";
        int korak_razbrajanja;
        std::cin &gt;&gt; korak_razbrajanja;
        std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
        int broj_karata;
        std::cin &gt;&gt; broj_karata;
        std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red_karata=IzbaciKarteRazbiranjem(spil, static_cast&lt;short int&gt;(korak_razbrajanja), broj_karata);
        IspisiSpil(spil);
        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; broj_karata;
        VratiPrvihNKarata(spil, red_karata, broj_karata);
        IspisiSpil(spil);
    } catch(std::logic_error p) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; p.what() &lt;&lt; std::endl;
    } catch(std::range_error p) {
</font>        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; p.what() &lt;&lt; std::endl;
    } catch(std::domain_error p) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; p.what() &lt;&lt; std::endl;
    }
    return 0;
}
</pre>
</body>
</html>
