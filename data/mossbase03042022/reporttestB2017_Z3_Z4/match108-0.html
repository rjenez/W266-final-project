<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student7090.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student7090.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match108-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_45.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;queue&gt;
#include &lt;vector&gt;
#include &lt;iterator&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; KreirajSpil()
{
    std::vector&lt;std::string&gt; vrijednost_karte {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil;
    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;13; j++) {
            std::pair&lt;Boje, std::string&gt; tmp= {Boje(i), vrijednost_karte[j]};
            spil.push_back(tmp);
        }
    }
    return spil;
}

bool PrijeUStingu_i_PostojiUStringu(std::string s1, std::string s2);
bool DobroSortirano(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil);

int BrojKarataUSpilu(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil)
{
    int br(0);
    for(auto it=spil.begin(); it!=spil.end(); it++) br++;
    return br;
}

void IzbaciKarte(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::multimap&lt;Boje, std::string&gt; &amp;mapa)
{
    if(BrojKarataUSpilu(spil)&gt;52 || !DobroSortirano(spil)) throw std::logic_error("Neispravna lista!");
    for(auto it_mapa=mapa.begin(); it_mapa!=mapa.end(); it_mapa++)
        for(auto it_lista=spil.begin(); it_lista!=spil.end(); it_lista++)
            if(it_mapa-&gt;first==it_lista-&gt;first &amp;&amp; it_mapa-&gt;second==it_lista-&gt;second) {
                spil.erase(it_lista);
                mapa.erase(it_mapa);
            }
}

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, const short int &amp;r, const int &amp;b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(BrojKarataUSpilu(spil)&gt;52 || !DobroSortirano(spil)) throw std::logic_error("Neispravna lista!");
    int br_karata(0);
    std::vector&lt;std::string&gt; nazivi_boja {"Pik", "Tref", "Herc", "Karo"};
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
    auto it(spil.begin());
    while(br_karata&lt;b) {
        int i=0;
        while(i&lt;r-1) {
            if(it==spil.end()) it=spil.begin();
            it++;
            i++;
        }
        std::string pom(nazivi_boja[int(it-&gt;first)]);
        std::pair&lt;std::string, std::string&gt; par {pom, it-&gt;second};
        red.push(par);
        br_karata++;
        it=spil.erase(it);
        auto poc(spil.begin());
        auto kraj(spil.end());
        if(poc==kraj) return red;
    }
    return red;
}

bool NesipravneKarte(std::pair&lt;std::string, std::string&gt; par)
{
    std::vector&lt;std::string&gt; nazivi_boja {"Pik", "Tref", "Herc", "Karo"};
    std::vector&lt;std::string&gt; vrijednost_karte {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    for(int i=0; i&lt;4; i++)
        for(int j=0; j&lt;13; j++)
            if(par.first==nazivi_boja[i] &amp;&amp; par.second==vrijednost_karte[j]) return false;
    return true;
}

void VratiPrvihNKarata(std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n)
</font><a name="1"></a><font color="#00FF00"><a href="match108-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_35.gif"/></a>

{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red.size()) throw std::range_error("Nedovoljno karata u redu!");
    if(BrojKarataUSpilu(spil)&gt;52 || !DobroSortirano(spil)) throw std::logic_error("Neispravna lista!");
    for(int i=0; i&lt;n; i++) {
        std::pair&lt;std::string, std::string&gt; el_reda(red.front());
        if(NesipravneKarte(el_reda))throw std::logic_error("Neispravne karte!");
        Boje boja;
        std::vector&lt;std::string&gt; nazivi_boja {"Pik", "Tref", "Herc", "Karo"};
        for(int j=0; j&lt;nazivi_boja.size(); j++) {
            if(nazivi_boja[j]==el_reda.first) {
                boja=Boje(j);
                break;
            }
        }
        //napravili smo par koji se nalazi u redu
        std::pair&lt;Boje, std::string&gt; par=std::make_pair(boja, el_reda.second);
        auto prethodni(spil.begin());
        auto next(spil.end());
        auto sljedeci(spil.begin());
        sljedeci++;
        next--;
        if(spil.begin()==spil.end()) {
            spil.insert(spil.begin(), par);
            red.pop();
            continue;
        }
        for(auto it=spil.begin(); it!=spil.end(); it++) {
            if(par==*it) break;
            else if(it-&gt;first&gt;par.first || (it-&gt;first==par.first &amp;&amp; PrijeUStingu_i_PostojiUStringu(par.second, it-&gt;second))) {
                prethodni=spil.insert(it, par);
                break;
            } else if((it-&gt;first==par.first &amp;&amp; PrijeUStingu_i_PostojiUStringu(it-&gt;second, par.second)) &amp;&amp; it==next) {
                it=spil.insert(sljedeci, par);
                it--;
                break;
            }
            prethodni=it;
            sljedeci++;
        }
        red.pop();
    }
}

void IspisiKarte(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil)
{
    std::vector&lt;std::string&gt; nazivi_boja {"Pik", "Tref", "Herc", "Karo"};
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarataUSpilu(spil)&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    auto it(spil.begin());
    for(int i=0; i&lt;4; i++) {
        std::cout&lt;&lt;nazivi_boja[i]&lt;&lt;":";
        auto boja=Boje(i);
        while(boja==it-&gt;first &amp;&amp; it!=spil.end()) {
            std::cout&lt;&lt;" "&lt;&lt;it-&gt;second;
            it++;
        }
        std::cout&lt;&lt;std::endl;
    }
}

int main ()
{
    std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil(KreirajSpil());
    int b, br_karata;
    short int r;
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    std::cin&gt;&gt;r;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    std::cin&gt;&gt;b;
    try {
        auto red(IzbaciKarteRazbrajanjem(spil, r, b));
        IspisiKarte(spil);
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        std::cin&gt;&gt;br_karata;
        VratiPrvihNKarata(spil, red, br_karata);
        IspisiKarte(spil);
    } catch(std::domain_error iz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;iz.what()&lt;&lt;std::endl;
    } catch(std::logic_error iz) {
</font><a name="2"></a><font color="#0000FF"><a href="match108-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_15.gif"/></a>

        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;iz.what()&lt;&lt;std::endl;
    } catch(std::range_error iz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;iz.what()&lt;&lt;std::endl;
    } catch(...) {
        std::cout&lt;&lt;"Neocekivani izuzetak!"&lt;&lt;std::endl;
    }
    return 0;
}

bool PrijeUStingu_i_PostojiUStringu(std::string s1, std::string s2)
{
    std::vector&lt;std::string&gt; vrijednost_karte {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    int mjesto_s1(-1), mjesto_s2(-1);
    for(int i=0; i&lt;vrijednost_karte.size(); i++) {
        if(vrijednost_karte[i]==s1) mjesto_s1=i;
        if(vrijednost_karte[i]==s2) mjesto_s2=i;
    }
    if(mjesto_s2==-1 || mjesto_s1==-1) return false;
    return mjesto_s1&lt;mjesto_s2;
}

bool DobroSortirano(const std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; &amp;spil)
{
    auto prethodni(spil.begin());
    for(auto it=spil.begin(); it!=spil.end(); it++) {
        if(it==spil.begin()) continue;
        else {
            if(prethodni-&gt;first&gt;it-&gt;first) return false;
            if(prethodni-&gt;first==it-&gt;first) {
                if(!PrijeUStingu_i_PostojiUStringu(prethodni-&gt;second, it-&gt;second)) return false;
            }
            prethodni=it;
</font>        }
    }
    return true;
}</pre>
</body>
</html>
