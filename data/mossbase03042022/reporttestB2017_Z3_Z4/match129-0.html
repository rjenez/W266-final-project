<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9160.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9160.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match129-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;queue&gt;
#include &lt;algorithm&gt;
enum class Boje {Pik, Tref, Herc, Karo};

typedef std::pair&lt;Boje,std::string&gt; Karta;
typedef std::list&lt;Karta&gt; Spil;

bool CompCard(std::string a, std::string b){
    const std::vector&lt;std::string&gt; karte {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    auto prvi = std::find(karte.begin(),karte.end(),a);
    auto drugi = std::find(karte.begin(),karte.end(),b);
    if(std::distance(prvi,drugi) &lt;= 0)return false;
    return true;
}
bool Sortirano(Spil spil){
   auto pocetak(spil.begin()), kraj(spil.end());
   if(pocetak == kraj)return true;
   auto sljedeci(pocetak);
   while(++sljedeci!=kraj){
       if(sljedeci-&gt;first == pocetak-&gt;first &amp;&amp; CompCard(sljedeci-&gt;second,pocetak-&gt;second))
       return false;
       ++pocetak;
   }
   return true;
}
bool Sadrzaj(Spil spil){
    const std::vector&lt;std::string&gt;karte{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    for(auto x : spil){
        int brojac(0);
        for(int i(0);i&lt;karte.size();i++)
            if(x.second != karte[i])brojac++;
        if(brojac == karte.size())return false;    
    }
    return true;
}
bool ImaLi(std::string s, std::vector&lt;std::string&gt; v){
    for(int i(0);i&lt;v.size();i++)
        if(s == v.at(i))return true;
    return false;    
}
bool Sadrzaj(std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; karte){
    const std::vector&lt;std::string&gt;spil{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    const std::vector&lt;std::string&gt;boja{"Pik", "Tref", "Herc", "Karo"};
    while(!karte.empty()){
        auto x(karte.front());
        if(!ImaLi(x.first,boja) || !ImaLi(x.second,spil))return false;
        karte.pop();
    }
    return true;
}
void Testiraj(Spil spil){
    if(spil.size()&gt;52 || !Sortirano(spil) || !Sadrzaj(spil))
        throw std::logic_error("Neispravna lista!");
}
bool Isti(Karta a, Karta b){
    return a.first == b.first &amp;&amp; a.second == b.second;
}
Spil KreirajSpil(){     
  const std::vector&lt;std::string&gt;karte{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
  Spil spil;
  for(int i(0);i&lt;4;i++){
      for(int j(0);j&lt;13;j++)
            spil.push_back(std::make_pair( Boje(i), karte.at(j)));
  }
  return spil;  
}
void IzbaciKarte(Spil &amp;spil, std::multimap&lt;Boje,std::string&gt; parovi){
    Testiraj(spil);
    for(auto itList(spil.begin()); itList != spil.end(); ){
        for(auto itMap(parovi.begin()); itMap != parovi.end();){
            if(Isti(*itMap,*itList)){
                itList = spil.erase(itList);
                itMap = parovi.erase(itMap);
            }else{
                ++itMap;
            }
        }
        ++itList;
    }
}

std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(Spil &amp;spil, const short int &amp;r, int b){
    Testiraj(spil);
    if(r&lt;1 || r&gt;52 || b&lt;1)throw std::logic_error("Neispravni elementi za izbacivanje!");
    std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; pravi_pov;
    int brojac(0);
    const std::vector&lt;std::string&gt;boja{"Pik","Tref","Herc","Karo"};
    auto it(spil.begin());
    while(brojac!=b){
        for(short int i(0); i &lt; r-1; i++){
            if(std::distance(it,spil.end()) == 1)
                it = spil.begin();
            else it++;    
        }
        pravi_pov.push(std::make_pair( boja[int(it-&gt;first)] , it-&gt;second ));
        it = spil.erase(it);
        brojac++;
        if(spil.empty())break;
    }
    return pravi_pov;
}
Karta NapraviKartu(std::pair&lt;std::string,std::string&gt; k){
    const std::vector&lt;std::string&gt;boja{"Pik", "Tref", "Herc", "Karo"};
    int j(0);
    for(int i(0);i&lt;boja.size();i++)
        if(boja.at(i) == k.first) j = i;
    Boje b = Boje(j);
    Karta sklj = std::make_pair(b,k.second);
    return sklj;
}
void Ubaci(Spil &amp;spil, Karta k){
    
    for(auto it(spil.begin()); it!=spil.end();it++){
        if(it-&gt;first == k.first){
            auto stanje(CompCard(it-&gt;second,k.second));
            while (stanje){
                it++;
                stanje = CompCard(it-&gt;second,k.second);
            }
            it = spil.insert(it,k);
            return;
        }else if(it-&gt;first &lt; k.first)it++;
    }
}
void VratiPrvihNKarata(Spil &amp;spil, std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; karte, int n){
    Testiraj(spil);
    if(n &lt; 0)throw std::domain_error("Broj n je besmislen!");
    if(n &gt; karte.size())throw std::range_error("Nedovoljno karata u redu!");
    if(!Sadrzaj(karte))throw std::logic_error("Neispravne karte!");
    
    int brojac(0);
    while(brojac&lt;n){
        auto temp(karte.front());
        Karta k(NapraviKartu(temp));
        int x(std::count(spil.begin(),spil.end(),k));
        if(x == 0)Ubaci(spil,k);
        karte.pop();
        brojac++;
    }
}
void IspisiSpil(Spil spil){
    Boje prethodna(Boje::Pik);
    std::string boja[]{"Pik", "Tref", "Herc", "Karo"};
    std::cout&lt;&lt;boja[0]&lt;&lt;": ";
    for(auto it(spil.begin()); it!=spil.end();it++  ){
        if(prethodna != it-&gt;first){
            std::cout&lt;&lt;std::endl;
            std::cout&lt;&lt;boja[int(it-&gt;first)]&lt;&lt;": ";
        }
        prethodna = it-&gt;first;
        std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
    }
    std::cout&lt;&lt;std::endl;
}
int main ()
{
    try{
        Spil spil(KreirajSpil());
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        short int r; std::cin&gt;&gt;r;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        int b; std::cin&gt;&gt;b;
        auto red(IzbaciKarteRazbrajanjem(spil,r,b));
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
        IspisiSpil(spil);
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        int sdf; std::cin&gt;&gt;sdf;
        VratiPrvihNKarata(spil,red,sdf);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;spil.size()&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
        IspisiSpil(spil);
        
    }catch(std::domain_error e){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
    }catch(std::range_error e){
</font>        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
    }catch(std::logic_error e){
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
    }
    return 0;
}
</pre>
</body>
</html>
