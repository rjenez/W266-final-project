<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1624.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1624.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;queue&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};
typedef std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; Spil;
typedef std::pair&lt;Boje, std::string&gt; Karta;

<a name="2"></a><font color="#0000FF"><a href="match483-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

const std::vector&lt;std::string&gt; vrijednosti = {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
</font>
Boje StringUBoju(std::string s)
{
    if(s=="pik") return Boje::Pik;
    else if(s=="tref") return Boje::Tref;
    else if(s=="herc") return Boje::Herc;
    else return Boje::Karo;
}

std::string BojaUString(Boje boja)
{
    if(boja == Boje::Pik) return "pik";
    else if(boja == Boje::Tref) return "tref";
    else if(boja == Boje::Herc) return "herc";
    else return "karo";
}

Spil KreirajSpil()
{
    Spil s;

    std::vector&lt;Boje&gt; boje = {Boje::Pik, Boje::Tref, Boje::Herc, Boje::Karo};

    for(auto boja : boje)
        for(auto vrijednost : vrijednosti)
            s.push_back(Karta(boja,vrijednost));

    return s;
}

void IspisiSpil(Spil spil)
{
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:" &lt;&lt; std::endl;

    std::cout &lt;&lt; "Pik: ";
    for(auto karta : spil) {
        if(BojaUString(karta.first)=="pik")
            std::cout &lt;&lt; karta.second &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Tref: ";
    for(auto karta : spil) {
        if(BojaUString(karta.first)=="tref")
            std::cout &lt;&lt; karta.second &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Herc: ";
    for(auto karta : spil) {
        if(BojaUString(karta.first)=="herc")
            std::cout &lt;&lt; karta.second &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Karo: ";
    for(auto karta : spil) {
        if(BojaUString(karta.first)=="karo")
            std::cout &lt;&lt; karta.second &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
}

bool KartaComp(Karta a, Karta b)
{
    if (int(a.first) == int(b.first)) {
<a name="1"></a><font color="#00FF00"><a href="match483-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        if(a.second == b.second) return false;
        return std::find(vrijednosti.begin(), vrijednosti.end(), a.second)&lt;std::find(vrijednosti.begin(), vrijednosti.end(), b.second);
</font>    };
    return int(a.first) &lt; int(b.first);
}

bool IspravnaKarta(Karta karta)
{
    return std::find(vrijednosti.begin(), vrijednosti.end(), karta.second)!=vrijednosti.end();
}

bool IspravanSpil(Spil spil)
{
    for(auto karta : spil) {
        if(!IspravnaKarta(karta)) return false;
    }
    return spil.size()&lt;=52 &amp;&amp; std::is_sorted(spil.begin(), spil.end(), KartaComp) &amp;&amp; std::adjacent_find(spil.begin(), spil.end())==spil.end();
}

void IzbaciKarte(Spil &amp;spil, std::multimap&lt;Boje, std::string&gt; karte)
{
    if(!IspravanSpil(spil)) throw std::logic_error("Neispravna lista!");

    auto it = karte.begin();

    while(it != karte.end() &amp;&amp; spil.size()&gt;0) {
        if(std::find_if(spil.begin(), spil.end(), [it](Karta k) {
        return int(k.first) == int(it-&gt;first) &amp;&amp; k.second == it-&gt;second;
        })!=spil.end()) {
            spil.remove(*it);
            it=karte.erase(it);
            continue;
        }
        it++;
    }
    return;
}

<a name="3"></a><font color="#00FFFF"><a href="match483-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt;IzbaciKarteRazbrajanjem(Spil &amp;spil, const short int &amp;r, const int &amp;b)
</font>{
    if(!IspravanSpil(spil)) throw std::logic_error("Neispravna lista!");
<a name="4"></a><font color="#FF00FF"><a href="match483-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");

    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red;
    std::multimap&lt;Boje, std::string&gt; karte;
</font>
    int i=0;
    auto it = spil.begin();

    while(i&lt;b &amp;&amp; red.size()&lt;spil.size()) {
        bool wrap = false;
        for(int j=1; j&lt;r; j++) {
            if(it==spil.end()) {
                it=spil.begin();
                it++;
                wrap=true;
            } else it++;
        }
        if(it==spil.end()) {
            it=spil.begin();
            it++;
            wrap=true;
        }

        karte.insert(*it);
        red.push(std::pair&lt;std::string, std::string&gt;(BojaUString(it-&gt;first), it-&gt;second));
        i++;
<a name="0"></a><font color="#FF0000"><a href="match483-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        if(wrap) it++;
        it++;
    }

    try {
        IzbaciKarte(spil, karte);
    } catch(...) {
        throw;
    }
    return red;
}

void VratiPrvihNKarata(Spil &amp;spil, std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;red, int n)
</font>{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red.size()) throw std::range_error("Nedovoljno karata u redu!");
    if(!IspravanSpil(spil)) throw std::logic_error("Neispravna lista!");

    std::vector&lt;std::string&gt; boje = {"Pik", "Tref", "Herc", "Karo"};

    while(red.size()&gt;0 &amp;&amp; n&gt;0) {
        auto karta = Karta(StringUBoju(red.front().first), red.front().second);
        if(!IspravnaKarta(karta)) throw std::logic_error("Neispravne karte!");

        if(std::find_if(spil.begin(), spil.end(), [&amp;](Karta k) {
        return int(k.first) == int(karta.first) &amp;&amp; k.second == karta.second;
        })==spil.end()) {
            spil.insert(std::upper_bound(spil.begin(), spil.end(), karta, KartaComp), karta);
            n--;
        }
        red.pop();
    }
}

int main ()
{
    Spil spil = KreirajSpil();

    int r, b;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; b;

    try {
        auto red = IzbaciKarteRazbrajanjem(spil, r, b);
        IspisiSpil(spil);

        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; r;

<a name="5"></a><font color="#FF0000"><a href="match483-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        VratiPrvihNKarata(spil, red, r);
        IspisiSpil(spil);

    } catch(std::logic_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    } catch(std::range_error izuzetak) {
</font>        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
    }

    return 0;
}
</pre>
</body>
</html>
