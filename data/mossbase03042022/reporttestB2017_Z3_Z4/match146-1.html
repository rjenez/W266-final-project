<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student3542.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student9129.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match146-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 3
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;queue&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;

enum class Boje {Pik = 0, Tref = 1, Herc = 2, Karo = 3};

typedef std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; Spil;
typedef std::pair&lt;Boje, std::string&gt; Karta;
typedef std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; Red;

std::vector&lt;std::string&gt; znakovi {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
std::vector&lt;std::string&gt; boje {"Pik", "Tref", "Herc", "Karo"};

Spil KreirajSpil()
{
     Spil spil(52);
     auto it(spil.begin());
     for (int i{0}; i &lt; 4; i++)
          for (int j{0}; j &lt; 13; j++)
               *it++ = std::make_pair(Boje(i), znakovi.at(j));
     return spil;
}

Spil SortirajSpil (const Spil&amp; spil)
{
     Spil tempSpil{KreirajSpil()};
     Spil sortiranSpil{spil};
     sortiranSpil.sort ([=] (Karta x, Karta y)
                                             {
                                                  int i{0}, j{0}, k{0};
                                                  for (auto it = tempSpil.begin(); it != tempSpil.end(); it++, k++)
                                                  {
                                                       if (*it == x)
                                                            i = k;
                                                       if (*it == y)
                                                            j = k;
                                                  }
                                                  return  i &lt; j; 
                                             }
                                             );
     return sortiranSpil;
                                             
}

void Ispisi (Spil&amp; spil)
{
     spil = SortirajSpil(spil);
     auto it(spil.begin());
     
     for (int i{0}; i &lt; 4; i++)
     {
          std::cout &lt;&lt; boje.at(i) &lt;&lt; ": ";
          while ((*it).first == Boje(i) &amp;&amp; it != spil.end())
          {
               std::cout &lt;&lt; (*it).second &lt;&lt; " ";
               it++;
          }
          std::cout &lt;&lt; std::endl;
     }
               
}

void ValidirajSpil (Spil&amp; spil)
{
     if (spil != SortirajSpil(spil) || spil.size() &gt; 52)
          throw std::logic_error ("Neispravna lista!");
}

void ValidirajRed(Red&amp; red)
{
     Red temp(red);
     while (!temp.empty())
     {
          if (std::find(boje.begin(), boje.end(), temp.front().first) == boje.end()
               || std::find(znakovi.begin(), znakovi.end(), temp.front().second) == znakovi.end())
               throw std::logic_error("Neispravne karte!");
          temp.pop();
     }
}

Red IzbaciKarteRazbrajanjem(Spil &amp;spil, const short int&amp; r, const int&amp; b)
{
     if (r &lt; 1 || r &gt; 52 || b &lt; 1) 
          throw std::logic_error("Neispravni elementi za izbacivanje!");
     ValidirajSpil(spil);
     Red red;
     int brojIzbacenih{0};
     auto it(spil.begin());
     
     for (int i{0}, j{1}; i &lt; spil.size(); i++, j++)
     {
          if (brojIzbacenih == b)
               break;
          if (!(j % r) &amp;&amp; brojIzbacenih &lt; b)
          {
               red.push(std::make_pair(boje.at(int(it-&gt;first)),it-&gt;second));
               auto temp = spil.erase(it);
               it = temp;
               brojIzbacenih++;
               it--;
          }
          
          if (i + 1 &gt;= spil.size())
               i = -1;
          
          it++;
          if (it == spil.end())
               it = spil.begin();
     }
     return red;
}

void VratiPrvihNKarata (Spil&amp; spil, Red &amp;red, int n)
{
     if (n &lt; 0)
          throw std::domain_error ("Broj n je besmislen!");
          
     ValidirajRed(red);
     if (red.size() &lt; n)
          throw std::range_error ("Nedovoljno karata u redu!");
     
     ValidirajSpil(spil);
     
     while (!red.empty() &amp;&amp; n &gt; 0)
     {
          std::pair&lt;std::string, std::string&gt; karta{red.front()};
          int pozicija = std::find(boje.begin(), boje.end(), karta.first) - boje.begin();
          spil.push_back(std::make_pair(Boje(pozicija), karta.second));
          red.pop();
          n--;
     }
     spil = SortirajSpil(spil);
}

void IzbaciKarte(Spil &amp;spil, std::multimap &lt;Boje, std::string&gt;&amp; mapa)
{
     ValidirajSpil(spil);
     
     for(auto it = mapa.begin(); it != mapa.end(); )
          if (std::find (spil.begin(), spil.end(), std::make_pair((*it).first, (*it).second)) != spil.end())
          {
               spil.erase(std::find (spil.begin(), spil.end(), std::make_pair((*it).first, (*it).second)));
               it = mapa.erase(it);
          }
          else it++;
     spil = SortirajSpil(spil);
}

int main()
{
     Spil spil(KreirajSpil());
     int r{0}, b{0}, n{0};
     try
     {
          std::cout &lt;&lt; "Unesite korak razbrajanja: ";
          std::cin &gt;&gt; r;
          std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
          std::cin &gt;&gt; b;
          Red red{IzbaciKarteRazbrajanjem(spil, r, b)};
          std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
          Ispisi(spil);
          
          try
          {
               std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
               std::cin &gt;&gt; n;
               VratiPrvihNKarata(spil, red, n);
               std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; spil.size() &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
               Ispisi(spil);
          }
          catch (const std::domain_error&amp; e)
          {
               std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
          }
          catch (const std::range_error&amp; e)
          {
               std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
          }
     }
     catch (const std::logic_error&amp; e)
     {
          std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what();
     }
     
     return 0;
}




int _main1()
{
     //Test funkcije IzbaciKarte
     std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; spil = KreirajSpil();
     std::multimap &lt;Boje, std::string&gt; mapa1 {{Boje(0), "A"}, {Boje(1), "K"}, {Boje(2), "Q"}, {Boje(3), "J"}};
     IzbaciKarte(spil, mapa1);
     std::cout &lt;&lt; mapa1.size() &lt;&lt; std::endl;
     Ispisi(spil);
     
     std::multimap &lt;Boje, std::string&gt; mapa2 {{Boje(0), "A"}, {Boje(1), "K"}, {Boje(2), "A"}, {Boje(3), "K"}};
     IzbaciKarte(spil, mapa2);
     std::cout &lt;&lt; mapa2.size() &lt;&lt; std::endl;
     Ispisi(spil);
     
     std::multimap &lt;Boje, std::string&gt; mapa3 {{Boje(0), "A"}, {Boje(1), "K"}, {Boje(2), "A"}, {Boje(3), "K"}};
     IzbaciKarte(spil, mapa3);
     std::cout &lt;&lt; mapa3.size() &lt;&lt; std::endl;
     Ispisi(spil);
     
     spil = KreirajSpil();
     std::multimap &lt;Boje, std::string&gt; mapa4 {{Boje(0), "A"}, {Boje(1), "K"}, {Boje(0), "A"}, {Boje(1), "K"}};
     IzbaciKarte(spil, mapa4);
     std::cout &lt;&lt; mapa4.size() &lt;&lt; std::endl;
     Ispisi(spil);
     
     spil.resize(0);
     IzbaciKarte(spil, mapa4);
     std::cout &lt;&lt; mapa4.size() &lt;&lt; std::endl;
</font>     
     return 0;
}</pre>
</body>
</html>
