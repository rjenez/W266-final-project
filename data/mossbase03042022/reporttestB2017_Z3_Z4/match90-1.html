<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1547.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student5193.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;queue&gt;

<a name="0"></a><font color="#FF0000"><a href="match90-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

enum class Boje {Pik, Tref, Herc, Karo}; 

typedef std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; Spil;
typedef std::multimap&lt;Boje, std::string&gt; Mapa;
typedef std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; Qu;

void IspravnaLista(const Spil &amp;spil)
{
    std::vector&lt;std::string&gt; v{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    
    if(spil.size()&gt;52) throw std::logic_error("Neispravna lista!");
    auto kraj=spil.end();
    kraj--;
    for(auto it=spil.begin();it!=spil.end();it++)
    {
        auto itt=std::find(v.begin(),v.end(),it-&gt;second);
        if(itt==v.end()) throw std::logic_error("Neispravna lista!");
        if(it!=kraj)
        {
            std::pair&lt;Boje,std::string&gt; a;
            a.first=it-&gt;first;
            a.second=it-&gt;second;
            
            auto temp=it;
            temp++;
            
            std::pair&lt;Boje,std::string&gt; b;
            b.first=temp-&gt;first;
            b.second=temp-&gt;second;
            
            if(int(a.first)&gt;int(b.first)) throw std::logic_error("Neispravna lista!");
            else if(int(a.first)==int(b.first))
            {
                auto it1=std::find(v.begin(),v.end(),a.second);
                auto it2=std::find(v.begin(),v.end(),b.second);
                
                if(it1&gt;=it2) throw std::logic_error("Neispravna lista!");
            }
        }
    }
}

Spil KreirajSpil()
{
    std::vector&lt;std::string&gt; v{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    Spil spil;
    for(int i=0;i&lt;4;i++)
    {
        for(int j=0;j&lt;v.size();j++)
        {
            std::pair&lt;Boje, std::string&gt; unos;
            unos={Boje(i),v.at(j)};
            spil.insert(spil.end(),unos);
        }
    }
    return spil;
}

void IzbaciKarte(Spil &amp;spil, Mapa &amp;mapa)
{
    if(mapa.size()==0) return;
    try
    {
        IspravnaLista(spil);
    }
    catch(...)
    {
        throw;
    }
    for(auto it=spil.begin();it!=spil.end();it++)
    {
        auto itf=std::find_if(mapa.begin(),mapa.end(),
        [it](std::pair&lt;Boje,std::string&gt; par)
        {
            return (par.first==it-&gt;first &amp;&amp; par.second==it-&gt;second);
        });
        if(itf!=mapa.end())
        {
           it=spil.erase(it);
           it--;
           std::pair&lt;Boje,std::string&gt; par;
           par.first=itf-&gt;first;
           par.second=itf-&gt;second;
           
           auto itm=mapa.begin();
           while(true)
           {
               if(itm==mapa.end()) break;
               if(itm-&gt;first==par.first &amp;&amp; itm-&gt;second==par.second)
               {
                   itm=mapa.erase(itm);
               }
               else itm++;
           }
        }
    }
}

Qu IzbaciKarteRazbrajanjem(Spil &amp;spil, short int &amp;r, int &amp;b)
{
    try
    {
        IspravnaLista(spil);
    }
    catch(...)
    {
        throw;
    }
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    
    Qu red;
    int broj(0);
    auto it=spil.begin();
    std::vector&lt;std::string&gt; v{"Pik","Tref","Herc","Karo"};
    
    while(true)
    {
        for(int i=0;i&lt;r-1;i++)
        {
            it++;
            if(it==spil.end()) it=spil.begin();
        }
        std::pair&lt;std::string,std::string&gt; par;
        par.first=v.at(int(it-&gt;first));
        par.second=it-&gt;second;
        red.push(par);
        
        
        it=spil.erase(it);
        broj++;
        
        if(broj==b) break;
        if(it==spil.end())
        {
            if(broj&lt;b &amp;&amp; spil.size()&gt;0) it=spil.begin();
            else break;
        }
    }
    return red;
}

void VratiPrvihNKarata(Spil &amp;spil, Qu &amp;red, int n)
{
    int vel=red.size();
    if(n&gt;vel) throw std::range_error("Nedovoljno karata u redu!");
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    std::vector&lt;std::string&gt; v1{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    for(int i=0;i&lt;vel;i++)
    {
        auto karta=red.front();
        if(!(karta.first=="Pik" || karta.first=="Tref" || karta.first=="Herc" || karta.first=="Karo")) throw std::logic_error("â€œNeispravne karte!");
        red.pop();
        auto it=std::find(v1.begin(),v1.end(),karta.second);
        if(it==v1.end()) throw std::logic_error("Neispravne karte!");
        red.push(karta);
    }
    try
    {
        IspravnaLista(spil);
    }
    catch(...)
    {
        throw;
    }
    
    
    for(int i=0;i&lt;n;i++)
    {
        auto karta=red.front();
        red.pop();
        int broj(0);
        if(karta.first=="Pik") broj=0;
        else if(karta.first=="Tref") broj=1;
        else if(karta.first=="Herc") broj=2;
        else if(karta.first=="Karo") broj=3;
        auto it=spil.begin();
        while(true)
        {
            if(it==spil.end()) break;
            if(int(it-&gt;first)&lt;broj) it++;
            else break;
        }
        if(int(it-&gt;first)==broj)
        {
            auto itf1=std::find(v1.begin(),v1.end(),karta.second);
            auto itf2=std::find(v1.begin(),v1.end(),it-&gt;second);
            if(itf1!=itf2)
            {
                while(true)
                {
                    auto itt=std::find(v1.begin(),v1.end(),it-&gt;second);
                    auto itk=std::find(v1.begin(),v1.end(),karta.second);
                    if(itt&gt;itk) break;
                    if(int(it-&gt;first)&gt;broj) break;
                    else it++;
                }
                if(karta.second==it-&gt;second) continue;
                std::pair&lt;Boje,std::string&gt; par;
                par.first=Boje(broj);
                par.second=karta.second;
                spil.insert(it,par);
            }
        }
        else
        {
            while(true)
            {
                auto itt=std::find(v1.begin(),v1.end(),it-&gt;second);
                auto itk=std::find(v1.begin(),v1.end(),karta.second);
                if(itt&gt;itk) break;
                if(int(it-&gt;first)&gt;broj) break;
                else it++;
            }
            std::pair&lt;Boje,std::string&gt; par;
            par.first=Boje(broj);
            par.second=karta.second;
            spil.insert(it,par);
        }
        
    }

}

void Ispis(Spil &amp;spil)
{
    int n=spil.size();
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;n&lt;&lt;" karata, i to: ";
    std::cout&lt;&lt;std::endl;
    auto it=spil.begin();
    std::cout&lt;&lt;"Pik: ";
    for(int i=0;i&lt;n;i++)
    {
        if(it==spil.end()) break;
        if(int(it-&gt;first)==0) std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        else break;
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Tref: ";
    for(int i=0;i&lt;n;i++)
    {
        if(it==spil.end()) break;
        if(int(it-&gt;first)==1) std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        else break;
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Herc: ";
    for(int i=0;i&lt;n;i++)
    {
        if(it==spil.end()) break;
        if(int(it-&gt;first)==2) std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        else break;
        it++;
    }
    std::cout&lt;&lt;std::endl;
    std::cout&lt;&lt;"Karo: ";
    for(int i=0;i&lt;n;i++)
    {
        if(it==spil.end()) break;
        if(int(it-&gt;first)==3) std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        else break;
        it++;
    }
    std::cout&lt;&lt;std::endl;
}

int main ()
{
    try
    {
        short int r;
        int b;
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        std::cin&gt;&gt;r;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        std::cin&gt;&gt;b;
        Spil s;
        s=KreirajSpil();
        auto red=IzbaciKarteRazbrajanjem(s,r,b);
        Ispis(s);
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin&gt;&gt;n;
        VratiPrvihNKarata(s,red,n);
        Ispis(s);
    }
    catch(std::domain_error izuzetak)
    {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }
    catch(std::range_error izuzetak)
    {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
</font>    }
    catch(std::logic_error izuzetak)
    {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }
	return 0;
}</pre>
</body>
</html>
