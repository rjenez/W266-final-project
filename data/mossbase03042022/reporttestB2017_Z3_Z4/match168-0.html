<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8317.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student8317.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match168-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;list&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;iterator&gt;
#include &lt;queue&gt;
#include &lt;stdexcept&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};
std::string Nazivi[] {"2","3", "4", "5","6","7", "8", "9", "10", "J", "Q", "K", "A"};
typedef std::list&lt;std::pair&lt;Boje, std::string&gt;&gt; Spil;
bool kriterij(std::pair&lt;Boje, std::string&gt; prvi, std::pair&lt;Boje, std::string&gt; drugi)
{
    if(prvi.first!=drugi.first) return prvi.first&lt;drugi.first;
    int poz1(0),poz2(0);
    for(int i=0; i&lt;13; i++) {
        if(prvi.second==Nazivi[i]) poz1=i;
        if(drugi.second==Nazivi[i]) poz2=i;
    }
    return poz1&lt;poz2;
}
std::list&lt;std::pair&lt;Boje, std::string&gt;&gt;sortirano(Spil karte)
{
    karte.sort(kriterij);
    return karte;
}
Spil KreirajSpil()
{
    Spil kreirani;

    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;13; j++) kreirani.push_back(std::make_pair(Boje(i), Nazivi[j]));
    }
    return kreirani;
}
void izuzetak(std::pair&lt;Boje, std::string&gt; prvi)
{
    bool nadjeno(false),nadjeno2(false);
    for(int i=0; i&lt;4; i++) if(Boje(i)==prvi.first) nadjeno=true;
    for(int i=0; i&lt;13; i++) if(Nazivi[i]==prvi.second) nadjeno2=true;
    if(!(nadjeno &amp;&amp;nadjeno2)) throw std::logic_error("Izuzetak");
}

void provjera(Spil &amp; karte)
{
    if(!std::equal(karte.begin(), karte.end(), sortirano(karte).begin()) || karte.size()&gt;52) throw std::logic_error("Neispravna lista!");
    try {
        std::for_each(karte.begin(), karte.end(), izuzetak);
    } catch(...) {
        throw std::logic_error("Neispravna lista!");
    }
}

void IzbaciKarte(Spil &amp;karte, std::multimap&lt;Boje, std::string&gt;&amp; mapa)
{
    provjera(karte);
    bool poc(false);
     auto it=mapa.begin();
   do {
        if(poc) it=mapa.begin();
        poc=false;
      if(mapa.empty()) return;
       auto pokazivac(std::find(karte.begin(), karte.end(), std::make_pair(it-&gt;first, it-&gt;second)));
       if(pokazivac!=karte.end()) {
             auto pok(it);
                if(it!=mapa.begin()) pok--;
                
                else poc=true;
                mapa.erase(it);
                it=pok;
                karte.erase(pokazivac);
           
       } else it++;
   } while( it!=mapa.end());         
           
            }

std::queue&lt;std::pair&lt;Boje, std::string&gt;&gt; IzbaciKarteRazbrajanjem(Spil &amp; karte, const short int &amp; r,const  int &amp; b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std:: logic_error("Neispravni elementi za izbacivanje!");
    std::queue&lt;std::pair&lt;Boje, std::string&gt;&gt; red ;
    provjera(karte);

    int broj_izbacenih(0);
    auto it=karte.begin();
    int predjeno(1);
    bool pocetak(false);
    while(broj_izbacenih&lt;b &amp;&amp; karte.size()&gt;0) {
        pocetak=false;
        while(predjeno&lt;r) {
            if(it==karte.end()) it=karte.begin();
            it++;
            predjeno++;
        }
        predjeno=0;
        if(it==karte.end()) it=karte.begin();
        auto pozicija=it;
        if(pozicija!=karte.begin())    pozicija--;
        else pocetak=true;
        red.push(*it);
        karte.erase(it);
        if(pocetak) it=karte.begin();
        else it=pozicija;


        broj_izbacenih++;

    }
    return red;
}
void VratiPrvihNKarata(Spil &amp;karte, std::queue&lt;std::pair&lt;Boje, std::string&gt;&gt;&amp;red, int n)
{
    int s(red.size());
    if(n&gt;s) throw std::range_error("Nedovoljno karata u redu!");
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    for(int i=0; i&lt;red.size(); i++) {
        bool nadjeno1(false),nadjeno2(false);
        std::pair&lt;Boje, std::string&gt; pomocni(red.front());
        for(int j=0; j&lt;4; j++) if(pomocni.first==Boje(j)) nadjeno1=true;
        for(int k=0; k&lt;13; k++)
            if(pomocni.second==Nazivi[k]) nadjeno2=true;
        if(!(nadjeno2 &amp;&amp; nadjeno1)) throw std::logic_error("Neispravne karte");
        red.pop();
        red.push(pomocni);

    }
    provjera(karte);
    int broj_ubacenih(0);
    while(broj_ubacenih&lt;n) {
        if(std::find(karte.begin(),karte.end(),red.front())==karte.end())  {
            karte.insert(karte.end(), red.front());
            broj_ubacenih++;
        }
        red.pop();

    }
    karte=sortirano(karte);

}
void Ispisi(Spil karte)
{
    const char* imena[4]= {"Pik","Tref","Herc","Karo"};

    for(auto it=karte.begin(); it!=karte.end(); it++) {
        for(int i=0; i&lt;4; i++) {
            if(it-&gt;first==Boje(i)) {
                std::cout&lt;&lt;imena[i]&lt;&lt;": ";
                while(it!=karte.end() &amp;&amp; it-&gt;first==Boje(i)) {
                    std::cout&lt;&lt;it-&gt;second&lt;&lt;" ";
                    it++;
                }
                std::cout&lt;&lt;std::endl;
                it--;
            }
        }
    }
}

int main ()
{

    try {
        Spil karte(KreirajSpil());
        
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        short int r;
        int b;
        std::cin&gt;&gt;r;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        std::cin&gt;&gt;b;
        std::queue&lt;std::pair&lt;Boje, std::string&gt;&gt; red (IzbaciKarteRazbrajanjem(karte, r,b));
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;karte.size()&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        Ispisi(karte);
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        std::cin&gt;&gt;b;
        VratiPrvihNKarata(karte, red, b);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;karte.size()&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        Ispisi(karte);

        
       
    }

    catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    } catch(std::range_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
</font>    }


    catch(std::logic_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    }

    return 0;
}
</pre>
</body>
</html>
