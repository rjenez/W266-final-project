<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1583.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student1132.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match11-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: Zadaća 3, Zadatak 4
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;

using std::cout;
using std::cin;
using std::endl;



enum class Boje {Pik, Tref, Herc, Karo}; 

typedef std::list&lt;std::pair&lt;Boje,std::string&gt;&gt; SpilKarata;

typedef std::pair&lt;Boje,std::string&gt; Karta;

const std::vector&lt;std::string&gt; Nazivi_karata{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

bool SortirajPolozaj(const Karta &amp;karta1, const Karta &amp;karta2){
    
    int pozicija1,pozicija2;
    
    for(int i=0;i&lt;13;i++){
            if(karta1.second==Nazivi_karata.at(i)){
                pozicija1=i;
                break;
            }
        }
        
        for(int i=0;i&lt;13;i++){
            if(karta2.second==Nazivi_karata.at(i)){
                pozicija2=i;
                break;
            }
        }
        
        return pozicija1&lt;pozicija2;
}

template &lt;typename TipBoje&gt;
void SortirajBojuPoPolozaju(SpilKarata &amp;spil, TipBoje boja){
    
    auto it(spil.begin());
    
    while(it-&gt;first!=boja) it++;
    
    auto iza_kraja(it);
    
    while(iza_kraja-&gt;first==boja) iza_kraja++;
    
    auto it_2(it);
    
    while(it_2!=iza_kraja){
        auto it_3(it_2);
        while(it_3!=iza_kraja){
            if(!(SortirajPolozaj(*it_2,*it_3))){
                
                auto temp(*it_2);
                *it_2=*it_3;
                *it_3=temp;
                
            }
            
            
            it_3++;
        }
        
        it_2++;
    }
    
    
}

int IspredPoBoji(const Karta &amp;Karta1, const Karta &amp;Karta2){
    
    if(Karta1.first==Karta2.first) return 0;
    
    if(Karta1.first==Boje::Pik &amp;&amp; Karta2.first!=Boje::Pik) return 1;
    if(Karta1.first==Boje::Tref &amp;&amp; Karta2.first!=Boje::Pik &amp;&amp; Karta2.first!=Boje::Tref) return 1;
    if(Karta1.first==Boje::Herc &amp;&amp; Karta2.first==Boje::Karo) return 1;
    
    return -1;
}

void SortirajSpilPoBoji(SpilKarata &amp;spil){ //...... !!!!
    
    for(auto it=spil.begin();it!=spil.end();it++){
        
        
        
        
        
        
        auto it_2(it);

        it_2++;
        
        //if(it_2!=spil.end()){
        
        while(it_2!=spil.end()){
            
            if(IspredPoBoji(*it_2,*it)==1){
  
                Karta temp=*it;
                *it=*it_2;
                *it_2=temp;

                
            }
            
            it_2++;
        }
        
    //}
    

    }
    
}

SpilKarata KreirajSpil(){
    
    SpilKarata spil;
    
    for(int i=0;i&lt;52;i++){
    if(i&lt;13)
    spil.push_back(std::make_pair(Boje::Pik,Nazivi_karata.at(i)));
    if(i&gt;=13 &amp;&amp; i&lt;26)
    spil.push_back(std::make_pair(Boje::Tref,Nazivi_karata.at(i-13)));
    if(i&gt;=26 &amp;&amp; i&lt;39)
    spil.push_back(std::make_pair(Boje::Herc,Nazivi_karata.at(i-26)));
    if(i&gt;=39)
    spil.push_back(std::make_pair(Boje::Karo,Nazivi_karata.at(i-39)));
    }
    
    return spil;
}


/* U slučaju da lista sadrži više od 52 elementa, ili ukoliko elementi u listi nisu sortirani kako bi trebali biti, 
ili ukoliko elementi liste sadrže besmislene podatke, funkcija treba baciti izuzetak tipa “logic_error” uz prateći tekst “Neispravna lista!”.
*/

void IzbaciKarte(SpilKarata &amp;spil, std::multimap&lt;Boje,std::string&gt; karte_za_izbacivanje){
  
    int br_karata(0);
  
        for (auto it=spil.begin();it!=spil.end();it++){
            if(it-&gt;first!=Boje::Pik &amp;&amp; it-&gt;first!=Boje::Tref &amp;&amp; it-&gt;first!=Boje::Herc &amp;&amp; it-&gt;first!=Boje::Karo ) throw std::logic_error("Neispravna lista!");
            else {
                bool ima_naziv{false};
                for(int i=0;i&lt;13;i++){
                if(it-&gt;second==Nazivi_karata.at(i)) {ima_naziv=true; break;}
                }
                if(!ima_naziv) throw std::logic_error("Neispravna lista!");
            }
            br_karata++;
        }
        if(br_karata&gt;52) throw std::logic_error("Neispravna lista!");
        
        if(br_karata!=0){
            
        auto it_spila(spil.begin());
        auto iza_it(it_spila);
        iza_it++;
        
        while(iza_it!=spil.end()){
            
   
            if( IspredPoBoji(*it_spila,*iza_it)==-1 ) throw std::logic_error("Neispravna lista!");
            else if(IspredPoBoji(*it_spila,*iza_it)==0 &amp;&amp; !SortirajPolozaj(*it_spila,*iza_it)) throw std::logic_error("Neispravna lista!");
                
            it_spila++;
            iza_it++;
        }
        
        auto it(spil.begin());
        
        while(it!=spil.end()){
            auto it_2(karte_za_izbacivanje.find(it-&gt;first));
            if(it_2!=karte_za_izbacivanje.end() &amp;&amp; it-&gt;second==it_2-&gt;second){
                
                while(it_2!=karte_za_izbacivanje.end() &amp;&amp; it-&gt;second==it_2-&gt;second)
                it_2=karte_za_izbacivanje.erase(it_2);
                
                it=spil.erase(it);
                
            }
            
            else it++;
        }
        
        }
}

/* U slučaju da lista sadrži više od 52 elementa, ili ukoliko elementi u listi nisu sortirani kako bi trebali biti, 
ili ukoliko elementi liste sadrže besmislene podatke, funkcija treba baciti izuzetak tipa “logic_error” uz prateći tekst 
“Neispravna lista!”. U slučaju da se traži izbacivanje više karata od onog broja koliko ih zaista ima u špilu, 
postupak se prosto prekida kada špil ostane prazan (tj. izbacuje se onoliko karata koliko ih zaista ima, po opisanom postupku), 
bez prijave ikakve greške. */
 
 

std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(SpilKarata &amp;spil, const short int &amp;r, const int &amp;b){
    
    if (r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    
    
     int br_karata_poc(0);
  
        for (auto it=spil.begin();it!=spil.end();it++){
            if(it-&gt;first!=Boje::Pik &amp;&amp; it-&gt;first!=Boje::Tref &amp;&amp; it-&gt;first!=Boje::Herc &amp;&amp; it-&gt;first!=Boje::Karo ) throw std::logic_error("Neispravna lista!");
            else {
                bool ima_naziv{false};
                for(int i=0;i&lt;13;i++)
                if(it-&gt;second==Nazivi_karata.at(i)) {ima_naziv=true; break;}
                if(!ima_naziv) throw std::logic_error("Neispravna lista!");
            }
            br_karata_poc++;
        }
        if(br_karata_poc&gt;52) throw std::logic_error("Neispravna lista!");
        
        
        
        auto it_spila(spil.begin());
        auto iza_it(it_spila);
        iza_it++;
        
        while(iza_it!=spil.end()){
            
            
            if( IspredPoBoji(*it_spila,*iza_it)==-1 ) throw std::logic_error("Neispravna lista!");
            else if(IspredPoBoji(*it_spila,*iza_it)==0 &amp;&amp; !SortirajPolozaj(*it_spila,*iza_it)) throw std::logic_error("Neispravna lista!");
                
            it_spila++;
            iza_it++;
        }
    
    std::queue&lt;std::pair&lt;std::string, std::string&gt;&gt; red_izbacenih_karata;
    auto it(spil.begin());
   
    
    
    int cnt(0);
    int br_karata(0);
    for(it=spil.begin();it!=spil.end();it++) br_karata++;
    it=spil.begin();
    while(cnt!=b &amp;&amp; br_karata!=0){
        for(int i=0;i&lt;r-1;i++){
        if(it==spil.end()) it=spil.begin();
        it++;
        }
        if(it-&gt;first==Boje::Pik)
        red_izbacenih_karata.push(std::make_pair("Pik", it-&gt;second));
        else if(it-&gt;first==Boje::Tref)
        red_izbacenih_karata.push(std::make_pair("Tref", it-&gt;second));
        else if(it-&gt;first==Boje::Herc)
        red_izbacenih_karata.push(std::make_pair("Herc", it-&gt;second));
        else red_izbacenih_karata.push(std::make_pair("Karo", it-&gt;second));
        it=spil.erase(it);
        cnt++;
        br_karata--;
    }
    
    return red_izbacenih_karata;
}


 /*Ukoliko je broj n veći od broja elemenata reda, funkcija treba da baci izuzetak tipa “range_error” 
 uz prateći tekst “Nedovoljno karata u redu!”. Ukoliko broj  n ima besmislenu vrijednost, funkcija baca izuzetak tipa “domain_error” 
 sa pratećim tekstom „Broj n je besmislen!“. Ukoliko red sadrži bilo kakve besmislene podatke (tj. podatke koji 
 ne opisuju ni jednu smislenu kartu), funkcija treba da baci izuzetak tipa “logic_error” uz prateći tekst “Neispravne karte!”. 
 Također, slično kao i kod prethodne funkcije, i ovdje treba baciti izuzetak tipa “logic_error” uz prateći tekst “Neispravna lista!” 
 ukoliko lista sadrži preko 52 elemenata, ili ukoliko elementi nisu sortirani onako kako bi trebali biti, 
 ili ukoliko u listi postoje besmisleni elementi. U slučaju da se u steku nalazi neka karta koja se već nalazi u špilu, treba je prosto ignorirati. 
 */
 
void VratiPrvihNKarata(SpilKarata &amp;spil, std::queue&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;red_izbacenih_karata, int n )
{
    
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;red_izbacenih_karata.size()) throw std::range_error("Nedovoljno karata u redu!");
    
    
    for(int i=0;i&lt;red_izbacenih_karata.size();i++){
        auto it=&amp;red_izbacenih_karata.front();
        if(it-&gt;first!="Pik" &amp;&amp; it-&gt;first!="Tref" &amp;&amp; it-&gt;first!="Herc" &amp;&amp; it-&gt;first!="Karo") throw std::logic_error("Neispravne karte!");
            else {
                bool ispravna_karta {false};
                for(int i=0; i&lt;13; i++) {
                    if(it-&gt;second==Nazivi_karata.at(i)) {
                        ispravna_karta=true;
                        break;
                    }
                }
                
                if(!ispravna_karta) throw std::logic_error("Neispravne karte!");
            }
            
            red_izbacenih_karata.push(*it);
            red_izbacenih_karata.pop();
    }
    
    
    int br_karata(0);
  
        for (auto it=spil.begin();it!=spil.end();it++){
            if(it-&gt;first!=Boje::Pik &amp;&amp; it-&gt;first!=Boje::Tref &amp;&amp; it-&gt;first!=Boje::Herc &amp;&amp; it-&gt;first!=Boje::Karo ) throw std::logic_error("Neispravna lista!");
            else {
                bool ima_naziv{false};
                for(int i=0;i&lt;13;i++)
                if(it-&gt;second==Nazivi_karata.at(i)) {ima_naziv=true; break;}
                if(!ima_naziv) throw std::logic_error("Neispravna lista!");
            }
            br_karata++;
        }
        if(br_karata&gt;52) throw std::logic_error("Neispravna lista!");
        
        
        auto it_spila(spil.begin());
        auto iza_it(it_spila);
        iza_it++;
        
        while(iza_it!=spil.end()){
            
            
            if( IspredPoBoji(*it_spila,*iza_it)==-1 ) throw std::logic_error("Neispravna lista!");
            else if(IspredPoBoji(*it_spila,*iza_it)==0 &amp;&amp; !SortirajPolozaj(*it_spila,*iza_it)) throw std::logic_error("Neispravna lista!");
                
            it_spila++;
            iza_it++;
        }
        
  
    
    for(int k=0;k&lt;red_izbacenih_karata.size();k++){ 
        
        auto it_red=&amp;red_izbacenih_karata.front();
        
        if(k&lt;n){
        
    auto karta (std::make_pair(Boje::Pik,it_red-&gt;second));
  
    if(it_red-&gt;first=="Tref")
    karta = std::make_pair(Boje::Tref,it_red-&gt;second);
    
    else if(it_red-&gt;first=="Herc")
    karta = std::make_pair(Boje::Herc,it_red-&gt;second);
    
    else if(it_red-&gt;first=="Karo") 
    karta = std::make_pair(Boje::Karo,it_red-&gt;second);
    
   bool nalazi_se_u_spilu{false};
   
   for(auto it=spil.begin();it!=spil.end();it++){ 
   if(*it==karta){
       nalazi_se_u_spilu=true;
       break;
   }
   }
    if(!nalazi_se_u_spilu) //ako se karta ne nalazi u spilu
     spil.push_back(karta);// ubacujemo je u spil
     
        }
        

     red_izbacenih_karata.push(*it_red);
     red_izbacenih_karata.pop();
     
        
    }
    
   
    SortirajSpilPoBoji(spil);
    SortirajBojuPoPolozaju(spil,Boje::Pik);
     SortirajBojuPoPolozaju(spil,Boje::Tref);
      SortirajBojuPoPolozaju(spil,Boje::Herc);
       SortirajBojuPoPolozaju(spil,Boje::Karo);
    
}

int main ()
{
    auto spil(KreirajSpil());
   
    cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int r;
    cin&gt;&gt;r;
    cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int b;
    cin&gt;&gt;b;
    
    try{
    auto red_izbacenih_karata(IzbaciKarteRazbrajanjem(spil,r,b));
    
    int br_karata(0);
    for(auto it=spil.begin();it!=spil.end();it++) br_karata++;
    
    cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;br_karata&lt;&lt;" karata, i to:"&lt;&lt;endl;
    
        auto it(spil.begin());
        
        if(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Pik){
            
        cout&lt;&lt;"Pik: ";
    while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Pik){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
        }
        cout&lt;&lt;endl;
        
        if(it!= spil.end() &amp;&amp; it-&gt;first==Boje::Tref){
            cout&lt;&lt;"Tref: ";
        while(it!= spil.end() &amp;&amp; it-&gt;first==Boje::Tref){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
        }
        }
        cout&lt;&lt;endl;
        
        if(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Herc){
            cout&lt;&lt;"Herc: ";
        while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Herc){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
        }
        }
        cout&lt;&lt;endl;
        
        if(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Karo){
            cout&lt;&lt;"Karo: ";
        while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Karo){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
        }
        }
        cout&lt;&lt;endl;
        
        
        try{
           
           cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        int br_vracenih_karata;
        cin&gt;&gt;br_vracenih_karata;
           
           
        VratiPrvihNKarata(spil,red_izbacenih_karata,br_vracenih_karata); 
        
        int br_karata_2(0);
        for(auto it=spil.begin();it!=spil.end();it++) br_karata_2++;
        
        cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;br_karata_2&lt;&lt;" karata, i to:"&lt;&lt;endl;
    
        auto it (spil.begin());
        
        if(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Pik){
            
        cout&lt;&lt;"Pik: ";
    while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Pik){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
    }
        }
        cout&lt;&lt;endl;
        
        if(it!= spil.end() &amp;&amp; it-&gt;first==Boje::Tref){
            cout&lt;&lt;"Tref: ";
        while(it!= spil.end() &amp;&amp; it-&gt;first==Boje::Tref){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
        }
        }
        cout&lt;&lt;endl;
        
        if(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Herc){
            cout&lt;&lt;"Herc: ";
        while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Herc){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
        }
        }
        cout&lt;&lt;endl;
        
        if(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Karo){
            cout&lt;&lt;"Karo: ";
        while(it!=spil.end() &amp;&amp; it-&gt;first==Boje::Karo){
        cout&lt;&lt;it-&gt;second&lt;&lt;" ";
        it++;
        }
        }
        cout&lt;&lt;endl;
        
       }
       catch(std::domain_error izuzetak1){
           cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak1.what()&lt;&lt;endl;
       }
       catch(std::range_error izuzetak2){
           cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak2.what()&lt;&lt;endl;
       }
       catch(std::logic_error izuzetak3){
           cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak3.what()&lt;&lt;endl;
       }
        
        
    }
    catch(std::logic_error izuzetak){
        cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what()&lt;&lt;endl;
        
    }

    
    
    
	return 0;
</font>}
</pre>
</body>
</html>
