<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student6363.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z4/student2009.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;list&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;exception&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;queue&gt;
#include &lt;map&gt;
<a name="0"></a><font color="#FF0000"><a href="match156-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::queue;
using std::vector;
using std::string;
using std::cin;
using std::cout;
using std::endl;
using std::list;
using std::pair;
vector&lt;string&gt; TipKarata {"Pik", "Tref", "Herc", "Karo"};
vector&lt;string&gt; Karte {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
enum class Boje {
    Pik=0,Tref=1,Herc=2,Karo=3
};
typedef std::multimap&lt;Boje, std::string&gt; MMapa;
typedef list&lt;pair&lt;Boje,string&gt;&gt; Spil;
Spil KreirajSpil() {
    Spil s;
    int TipKarte=0;
    while(TipKarte&lt;=3) {
        for(int i=0; i&lt;Karte.size(); i++)
            s.push_back(std::make_pair(static_cast&lt;Boje&gt;(TipKarte),Karte.at(i)));
        TipKarte++;
    }
    return s;
}
void SortirajSpil(Spil &amp;s) {
    s.sort([](pair&lt;Boje,string&gt; x,pair&lt;Boje,string&gt; y) {
        return (int(x.first)&lt;int(y.first) || (int(x.first)==int(y.first) &amp;&amp;
                                              std::find(Karte.begin(),Karte.end(),x.second)-Karte.begin() &lt; std::find(Karte.begin(),Karte.end(),y.second)-Karte.begin()));
    });
}
bool ispravnoSortiranSpil(Spil a, const Spil &amp;b) {
    SortirajSpil(a);
    Spil::const_iterator It1 {a.begin()}, It2 {b.begin()};
    for(int i=0; i&lt;b.size(); i++,It1++,It2++)
        if(It1-&gt;first != It2-&gt;first || (It1-&gt;first==It2-&gt;first &amp;&amp; It1-&gt;second != It2-&gt;second )) return false;
    return true;
}
bool validanSpil(const Spil &amp;s) {
    Spil::const_iterator sIt {s.begin()};
    while(sIt!=s.end()) {
        bool validan {false};
        for(int i=0; i&lt;Karte.size(); i++) {
            if(int(sIt-&gt;first)&lt;0 || int(sIt-&gt;first)&gt;3) {
                validan=false;
                break;
            }
            if(sIt-&gt;second==Karte.at(i)) {
                validan=true;
                break;
            }
        }
        if(!validan) return false;
        sIt++;
    }
    return true;
}
void IzbaciKarte(Spil &amp;s, MMapa &amp;m) {
    if(s.size()&gt;52 || !ispravnoSortiranSpil(s,s) || !validanSpil(s))
        throw std::logic_error("Neispravna lista!");
    Spil::iterator sIt {s.begin()};
    vector&lt;Spil::iterator&gt; sbrisanje;
    vector&lt;MMapa::iterator&gt; mbrisanje;
    for(auto i=m.begin(); i!=m.end(); i++)
        for(auto j=s.begin(); j!=s.end(); j++)
            if(i-&gt;first == j-&gt;first &amp;&amp; i-&gt;second== j-&gt;second) {
                s.erase(j);
                mbrisanje.push_back(i);
                break;
            }
    for(int i=0; i&lt;mbrisanje.size(); i++) m.erase(mbrisanje.at(i));
}
bool validanRed(pair&lt;string,string&gt; p){
    bool validan{false};
    for(int i=0;i&lt;TipKarata.size();i++)
    if(p.first==TipKarata.at(i)) validan=true;
    if(!validan) return false;
    for(int i=0;i&lt;Karte.size();i++)
    if(p.second==Karte.at(i)) validan=true;
    if(!validan) return false;
    return true;
}
queue&lt;pair&lt;string,string&gt;&gt; IzbaciKarteRazbrajanjem(Spil &amp;s, const short int &amp;r, const int &amp;b) {
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(s.size()&gt;52 || !ispravnoSortiranSpil(s,s) || !validanSpil(s)) throw std::logic_error("Neispravna lista!");
    queue&lt;pair&lt;string,string&gt;&gt; q;
    Spil::iterator sIt {s.begin()};
    std::advance(sIt,r-1);
    int brojac=b;
    while(brojac!=0 &amp;&amp; !s.empty()) {
        short int i=r-1;
        /* cout &lt;&lt; "Brisat ce se: " &lt;&lt; TipKarata.at(int(sIt-&gt;first)) &lt;&lt; " " &lt;&lt; sIt-&gt;second &lt;&lt;endl;*/
        q.push(std::make_pair(TipKarata.at(int(sIt-&gt;first)),sIt-&gt;second));
        sIt=s.erase(sIt);
        if(sIt==s.end()) sIt=s.begin();      
        /*cout &lt;&lt; "Poslije brisanja: " &lt;&lt; TipKarata.at(int(sIt-&gt;first)) &lt;&lt; " " &lt;&lt; sIt-&gt;second &lt;&lt;endl;*/
        while(i!=0) {
            sIt++;
            if(sIt==s.end()) sIt=s.begin();
            i--;
        }
        brojac--;
    }
    return q;
}
void VratiPrvihNKarata(Spil &amp;s, queue&lt;pair&lt;string,string&gt;&gt; &amp;q, int n) {
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    else if(n&gt;q.size()) throw std::range_error("Nedovoljno karata u redu!");
    if(s.size()&gt;52 || !ispravnoSortiranSpil(s,s) || !validanSpil(s)) throw std::logic_error("Neispravna lista!");
    Spil::iterator sIt {s.begin()};
    pair&lt;Boje,string&gt; temp;
    while(n!=0) {
        int i;
        if(!validanRed(q.front())) throw std::logic_error("Neispravne karte");
        for(i=0; i&lt;4; i++) if(q.front().first==TipKarata.at(i)) break;
        temp=std::make_pair(static_cast&lt;Boje&gt;(i),q.front().second);
        if(!std::binary_search(s.begin(),s.end(),temp)) s.push_back(temp);
        SortirajSpil(s);
        n--;
        q.pop();
    }
}
void IspisSpila(Spil &amp;s) {
    Spil::iterator sIt(s.begin());
    int TipKarte {};
    do {
        cout &lt;&lt; TipKarata.at(TipKarte) &lt;&lt; ": ";
        int brojac=std::count_if(s.begin(),s.end(),[TipKarte](pair&lt;Boje,string&gt; x)-&gt;bool {return int(x.first)==TipKarte;});
        for(int i=0; i&lt;brojac; i++,sIt++) cout &lt;&lt; sIt-&gt;second &lt;&lt; " ";
        cout &lt;&lt; endl;
        TipKarte++;
    } while(TipKarte&lt;=3);
}
int main () {
    int r;
    cout &lt;&lt; "Unesite korak razbrajanja: ";
    cin &gt;&gt; r;
    int b;
    cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    cin &gt;&gt; b;
    try {
        Spil a {KreirajSpil()};
        auto q=IzbaciKarteRazbrajanjem(a,r,b);
        cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; a.size() &lt;&lt; " karata, i to:"&lt;&lt; endl;
        IspisSpila(a);
        int p;
        cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        cin &gt;&gt; p;
        VratiPrvihNKarata(a,q,p);
        cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; a.size() &lt;&lt; " karata, i to:"&lt;&lt; endl;
        IspisSpila(a);
        cout &lt;&lt; endl;
    } catch(std::exception &amp;ex) {
        cout &lt;&lt; "Izuzetak: " &lt;&lt; ex.what();
    }
    return 0;
</font>}

/*MMapa mapa {{Boje::Pik,"2"},{Boje::Pik,"3"},{Boje::Pik,"4"},{Boje::Pik,"5"},{Boje::Pik,"6"},{Boje::Pik,"7"},
         {Boje::Pik,"8"},{Boje::Pik,"9"},{Boje::Pik,"10"},{Boje::Pik,"J"},{Boje::Pik,"K"},{Boje::Pik,"A"},{Boje::Pik,"Q"},
         {Boje::Tref,"2"},{Boje::Tref,"3"},{Boje::Tref,"4"},{Boje::Tref,"5"},{Boje::Tref,"6"},{Boje::Tref,"7"},
         {Boje::Tref,"8"},{Boje::Tref,"9"},{Boje::Tref,"10"},{Boje::Tref,"J"},{Boje::Tref,"K"},{Boje::Tref,"A"},{Boje::Tref,"Q"},
         {Boje::Herc,"2"},{Boje::Herc,"3"},{Boje::Herc,"4"},{Boje::Herc,"5"},{Boje::Herc,"6"},{Boje::Herc,"7"},
         {Boje::Herc,"8"},{Boje::Herc,"9"},{Boje::Herc,"10"},{Boje::Herc,"J"},{Boje::Herc,"K"},{Boje::Herc,"A"},{Boje::Herc,"Q"},
         {Boje::Karo,"2"},{Boje::Karo,"3"},{Boje::Karo,"4"},{Boje::Karo,"5"},{Boje::Karo,"6"},{Boje::Karo,"7"},
         {Boje::Karo,"8"},{Boje::Karo,"9"},{Boje::Karo,"10"},{Boje::Karo,"J"},{Boje::Karo,"K"},{Boje::Karo,"A"},{Boje::Karo,"Q"},
         {Boje::Karo,"Q"},{Boje::Herc,"8"},{Boje::Herc,"9"},{Boje::Herc,"10"},{Boje::Herc,"J"},{Boje::Herc,"K"},{Boje::Herc,"A"},{Boje::Herc,"Q"},
         {Boje::Karo,"2"},{Boje::Karo,"3"},{Boje::Karo,"4"},{Boje::Karo,"5"},{Boje::Karo,"6"},{Boje::Karo,"7"}};*/</pre>
</body>
</html>
