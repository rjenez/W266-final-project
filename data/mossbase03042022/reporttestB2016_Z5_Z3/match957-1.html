<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2230.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student6874.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match957-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;cmath&gt;
#include &lt;sstream&gt;
class Razlomak{
  long long int brojnik, nazivnik;
  static long long int NZD (long long int p, long long int q);
</font>  static bool PrekoracenjeKodMnozenja (long long int x, long long int y);
  static bool PrekoracenjeKodSabiranja (long long int x, long long int y);
  static bool PrekoracenjeKodOduzimanja (long long int x, long long int y);
  static bool IstiDoubleovi (long double x, long double y, long double eps=1e-10);
  public:
   Razlomak(long long int br = 0, long long int naz = 1);
   long long int DajBrojnik() const {return brojnik;}
   long long int DajNazivnik() const {return nazivnik;}
   friend Razlomak operator+ (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend Razlomak operator- (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend Razlomak operator* (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend Razlomak operator/ (const Razlomak &amp;r1, const Razlomak &amp;r2);
   Razlomak &amp;operator+(){return *this;};
   Razlomak &amp;operator-();
   Razlomak &amp;operator+=(const Razlomak &amp;r);
   Razlomak &amp;operator-=(const Razlomak &amp;r);
   Razlomak &amp;operator*=(const Razlomak &amp;r);
   Razlomak &amp;operator/=(const Razlomak &amp;r);
   Razlomak &amp;operator++();
   Razlomak operator++(int);
   Razlomak &amp;operator--();
   Razlomak operator--(int);
   friend bool operator&lt; (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend bool operator&gt; (const Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="0"></a><font color="#FF0000"><a href="match957-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

   friend bool operator== (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend bool operator!= (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend bool operator&lt;= (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend bool operator&gt;= (const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend std::ostream &amp;operator&lt;&lt; (std::ostream &amp;tok, const Razlomak &amp;r);
   friend std::istream &amp;operator&gt;&gt; (std::istream &amp;tok, Razlomak &amp;r);
   operator long double() const;
   
};

Razlomak::operator long double() const{
</font>    long double raz((long double)brojnik/nazivnik);
    return raz;
}

bool Razlomak::IstiDoubleovi(long double x, long double y, long double eps){
    return (std::abs(x-y)&lt;eps);
}


Razlomak &amp;Razlomak::operator-(){
    if(PrekoracenjeKodOduzimanja(0, brojnik))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik*=(-1);
    return *this;
}

long long int Razlomak::NZD(long long int p, long long int q){
    if(q==0)
      return p;
    long long int prvi(p), drugi(q), stari_prvi(p);
    while (drugi!=0) {
        prvi = drugi;
        drugi = stari_prvi % prvi;
        stari_prvi = prvi;
    }
    return prvi;
}

Razlomak::Razlomak(long long int br, long long int naz){
    if(naz==0)
      throw std::logic_error("Nekorektan razlomak");
    long long int djelilac = Razlomak::NZD(br, naz);
    br/=djelilac; naz/=djelilac;
    if(naz&lt;0){
        naz*=(-1);
        br*=(-1);
    }
    brojnik = br; 
    nazivnik = naz;

}

bool Razlomak::PrekoracenjeKodSabiranja(long long int x, long long int y){
    long long int M, m;
    M = std::numeric_limits&lt;long long int&gt;::max();
    m = std::numeric_limits&lt;long long int&gt;::min();
    if((y&gt;0 &amp;&amp; x&gt;(M - y)) || (y&lt;0 &amp;&amp; x&lt;(m - y)))
      return true;
    return false;
}

bool Razlomak::PrekoracenjeKodMnozenja(long long int x, long long int y){
    long long int M, m;
    M = std::numeric_limits&lt;long long int&gt;::max();
    m = std::numeric_limits&lt;long long int&gt;::min();
    if(y&gt;0 &amp;&amp; (x&lt;(m/y) || x&gt;(M/y)))
      return true;
    if(y&lt;0 &amp;&amp; (x==m || (-x&gt;(M/(-y))) || (-x&lt;(m/(-y)))  )){
     
      return true;
    }
    return false;
}

bool Razlomak::PrekoracenjeKodOduzimanja(long long int x, long long int y){
    long long int M, m;
    M = std::numeric_limits&lt;long long int&gt;::max();
    m = std::numeric_limits&lt;long long int&gt;::min();
  /*  if((y&lt;0 &amp;&amp; x&gt;(M + y)) || (y&gt;0 &amp;&amp; (x&lt;(m + y))))
      return true;
    return false;*/
    return PrekoracenjeKodSabiranja(x, -y);
}

Razlomak &amp;Razlomak::operator+=(const Razlomak &amp;r2){
    Razlomak r1(brojnik, nazivnik);
    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik));
    //long long int br, naz;
    if(Razlomak::PrekoracenjeKodMnozenja(r1.brojnik, r2.nazivnik/r) || Razlomak::PrekoracenjeKodMnozenja(r2.brojnik, r1.nazivnik/r) || Razlomak::PrekoracenjeKodMnozenja(r1.nazivnik, r2.nazivnik))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(Razlomak::PrekoracenjeKodSabiranja(r1.brojnik * (r2.nazivnik/r), r2.brojnik*(r1.nazivnik/r)))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik = (r1.brojnik * (r2.nazivnik/r)) + (r2.brojnik *(r1.nazivnik/r));
    nazivnik = r1.nazivnik * (r2.nazivnik/r);
    long long int nzd(Razlomak::NZD(brojnik, nazivnik));
    brojnik/=nzd; nazivnik/=nzd;
    return *this;
    
}

inline Razlomak operator+ (const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak r3(r1);
    r3+=r2;
    return r3;
}

Razlomak &amp;Razlomak::operator-=(const Razlomak &amp;r2){
    Razlomak r1(brojnik, nazivnik);
    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik));
   // long long int br, naz;
    if(Razlomak::PrekoracenjeKodMnozenja(r1.brojnik, r2.nazivnik/r) || Razlomak::PrekoracenjeKodMnozenja(r2.brojnik, r1.nazivnik/r) || Razlomak::PrekoracenjeKodMnozenja(r1.nazivnik, r2.nazivnik))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(Razlomak::PrekoracenjeKodOduzimanja(r1.brojnik * (r2.nazivnik/r), r2.brojnik * (r1.nazivnik/r)))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik = (r1.brojnik*(r2.nazivnik/r)) - (r2.brojnik * (r1.nazivnik/r));
    nazivnik = r1.nazivnik * (r2.nazivnik/r);
    long long int nzd(Razlomak::NZD(brojnik, nazivnik));
    brojnik/=nzd; nazivnik/=nzd;
    return *this;
}

inline Razlomak operator-(const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak r3(r1);
    r3-=r2;
    return r3;
}

Razlomak &amp;Razlomak::operator*= (const Razlomak &amp;r2){
    Razlomak r1(brojnik, nazivnik);
    long long int s(NZD(brojnik, r2.nazivnik)), t(NZD(r2.brojnik, nazivnik));
    if(PrekoracenjeKodMnozenja(brojnik/s, r2.brojnik/t) || PrekoracenjeKodMnozenja(nazivnik/t, r2.nazivnik/s))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik/=s;
    brojnik*=(r2.brojnik/t);
    nazivnik/=t;
    nazivnik*=(r2.nazivnik/s);
    long long int nzd(Razlomak::NZD(brojnik, nazivnik));
    brojnik/=nzd;
    nazivnik/=nzd;
    return *this;
    
}

inline Razlomak operator* (const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak r3(r1);
    r3*=r2;
    return r3;
}

Razlomak &amp;Razlomak::operator/=(const Razlomak &amp;r2){
    long long int r(NZD(nazivnik, r2.nazivnik));
    long long int u(NZD(brojnik, r2.brojnik));
    if(PrekoracenjeKodMnozenja(brojnik/u, r2.nazivnik/r) || PrekoracenjeKodMnozenja(nazivnik/r, r2.brojnik/u))
      throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik/=u;
    brojnik*=(r2.nazivnik/r);
    nazivnik/=r;
    nazivnik*=(r2.brojnik/u);
    long long int nzd(Razlomak::NZD(brojnik,nazivnik));
    brojnik/=nzd;
    nazivnik/=nzd;
    return *this;
}

inline Razlomak operator/ (const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak r3(r1);
    r3/=r2;
    return r3;
}

Razlomak &amp;Razlomak::operator++(){
    *this+=(Razlomak(1));
    return *this;
}

inline Razlomak Razlomak::operator++(int){
    Razlomak pomocni(*this);
    ++(*this);
    return pomocni;
}

Razlomak &amp;Razlomak::operator--(){
    *this-=(Razlomak(1));
    return *this;
}

inline Razlomak Razlomak::operator--(int){
    Razlomak pomocni(*this);
    --(*this);
    return pomocni;
}

bool operator&lt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long double prvi, drugi;
    prvi = ((long double)r1.brojnik/r1.nazivnik);
    drugi = ((long double)r2.brojnik / r2.nazivnik);
    return prvi&lt;drugi;
}

bool operator&gt; (const Razlomak &amp;r1, const Razlomak &amp;r2){
    long double prvi, drugi;
    prvi = (long double)r1.brojnik/r1.nazivnik;
    drugi = (long double)r2.brojnik/r2.nazivnik;
    return prvi&gt;drugi;
}

bool operator== (const Razlomak &amp;r1, const Razlomak &amp;r2){
    long double prvi, drugi;
    prvi = (long double)r1.brojnik/r1.nazivnik;
    drugi = (long double)r2.brojnik/r2.nazivnik;
    return Razlomak::IstiDoubleovi(prvi, drugi);
}

<a name="1"></a><font color="#00FF00"><a href="match957-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

inline bool operator!= (const Razlomak &amp;r1, const Razlomak &amp;r2){
    return !(r1==r2);
}

bool operator&lt;= (const Razlomak &amp;r1, const Razlomak &amp;r2){
    return ((r1&lt;r2) || (r1==r2));
}

bool operator&gt;= (const Razlomak &amp;r1, const Razlomak &amp;r2){
    return ((r1&gt;r2) || (r1==r2));
}

std::ostream &amp;operator&lt;&lt; (std::ostream &amp;tok, const Razlomak &amp;r){
    if(r.nazivnik!=1 &amp;&amp; r.brojnik!=0){
</font>     tok&lt;&lt;r.brojnik&lt;&lt;"/"&lt;&lt;r.nazivnik;
    }
    else
      tok&lt;&lt;r.brojnik;
    return tok;
}

std::istream &amp;operator&gt;&gt; (std::istream &amp;tok, Razlomak &amp;r){
    //tok&gt;&gt; std::ws;
    tok&gt;&gt;r.brojnik;
    if(!tok)
      tok.setstate(std::ios::failbit);
    if(tok.peek()!='/'){
      r.nazivnik = 1;
      return tok;
    }
    char znak;
    tok&gt;&gt;znak&gt;&gt;r.nazivnik;
    if(!tok)
      tok.setstate(std::ios::failbit);
    if(tok.peek()!=' ' &amp;&amp; tok.peek()!='\n')
     tok.setstate(std::ios::failbit);
    long long int nzd(Razlomak::NZD(r.brojnik, r.nazivnik));
    r.brojnik/=nzd;
    r.nazivnik/=nzd;
    return tok;
}
int main ()
{
  try{
  Razlomak r1(10,7), r2(6,11);
  std::cout&lt;&lt;r1+r2&lt;&lt;" "&lt;&lt;r1-r2&lt;&lt;" "&lt;&lt;r1*r2&lt;&lt;" "&lt;&lt;r1/r2&lt;&lt;std::endl;
  r1*=2;
  std::cout&lt;&lt;+r1&lt;&lt;" "&lt;&lt;-r1&lt;&lt;" "&lt;&lt;r1&lt;&lt;std::endl;
  Razlomak r(1,2), r3;
  std::cout&lt;&lt;r&lt;&lt;"\nUnesite razlomak:\n";
  std::cin&gt;&gt;r3;
  r*=r1;
  std::cout&lt;&lt;r&lt;&lt;std::endl;
  std::cout&lt;&lt;r3&lt;&lt;std::endl;
  r3++;
  r1--;
  ++r2;
  std::cout&lt;&lt;r1&lt;&lt;" "&lt;&lt;r2&lt;&lt;" "&lt;&lt;r3&lt;&lt;std::endl;
  if((1/2)==(1/2))
  std::cout&lt;&lt;"isti su"&lt;&lt;std::endl;
  std::cout&lt;&lt;Razlomak(1,3)&lt;&lt;std::endl;
  std::cout&lt;&lt;std::boolalpha&lt;&lt;(Razlomak(1,3)&lt;Razlomak(1,2))&lt;&lt;std::endl;
  std::cout&lt;&lt;std::boolalpha&lt;&lt;(Razlomak(1,19)&gt;Razlomak(1,6))&lt;&lt;std::endl;
  std::cout&lt;&lt;std::boolalpha&lt;&lt;(Razlomak(1,2)&lt;=Razlomak(1,2))&lt;&lt;std::endl;
  std::cout&lt;&lt;(long double)r3&lt;&lt;std::endl;
  r1/=r3;
  std::cout&lt;&lt;r1&lt;&lt;std::endl;
  Razlomak r4(1,2), r5(2,1);
  r4/=r5;
  std::cout&lt;&lt;r4&lt;&lt;std::endl;
  }
  catch(std::overflow_error e){
      std::cout&lt;&lt;" Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
  }
	return 0;
}</pre>
</body>
</html>
