<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4416.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4416.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
typedef long long int lint;
typedef long double ldouble;
typedef std::numeric_limits&lt;long long int&gt; limit;
class Razlomak{
    lint brojnik,nazivnik;
    static lint NZD(lint a,lint b);
    void Postavi();
    static bool m_overflow(lint a,lint b);
    static bool s_overflow(lint a,lint b);
    static bool o_overflow(lint a,lint b);
  public:
    Razlomak(lint b,lint n);
    Razlomak(lint b=0);
    lint DajBrojnik()const{return brojnik;}
    lint DajNazivnik()const{return nazivnik;}
    friend Razlomak operator+(const Razlomak&amp;a){return a;}
    friend Razlomak operator-(Razlomak&amp;a);
    friend Razlomak operator+(const Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak operator-(const Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak operator*(const Razlomak&amp;a,const Razlomak&amp;b);
<a name="2"></a><font color="#0000FF"><a href="match418-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    friend Razlomak operator/(const Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak&amp;operator+=(Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak&amp;operator-=(Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak&amp;operator*=(Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak&amp;operator/=(Razlomak&amp;a,const Razlomak&amp;b);
    friend Razlomak&amp;operator++(Razlomak&amp;a);
</font>    friend Razlomak operator++(Razlomak&amp;a,int);
    friend Razlomak&amp;operator--(Razlomak&amp;a);
    friend Razlomak operator--(Razlomak&amp;a,int);
    friend std::ostream&amp;operator&lt;&lt;(std::ostream&amp;tok,const Razlomak&amp;a);
    friend std::istream&amp;operator&gt;&gt;(std::istream&amp;tok,Razlomak&amp;a);
    friend bool operator&lt;(const Razlomak&amp;a,const Razlomak&amp;b);
    friend bool operator&gt;(const Razlomak&amp;a,const Razlomak&amp;b);
    friend bool operator&lt;=(const Razlomak&amp;a,const Razlomak&amp;b);
    friend bool operator&gt;=(const Razlomak&amp;a,const Razlomak&amp;b);
    friend bool operator==(const Razlomak&amp;a,const Razlomak&amp;b);
    operator long double();
};
bool Razlomak::m_overflow(lint a,lint b){
    if((a&gt;0 &amp;&amp;(a&gt;limit::max()/b || a&lt;limit::lowest()/b))||(a&lt;0 &amp;&amp; (b==limit::lowest() || -b&gt;limit::max()/(-a) || -b&lt;limit::lowest()/(-a)))) return true;
    return false;    
}
bool Razlomak::s_overflow(lint a,lint b){
    if((a&gt;0 &amp;&amp; b&gt;limit::max()-a)||(a&lt;0 &amp;&amp; b&lt;limit::lowest()-a))return true;
    return false;
}
bool Razlomak::o_overflow(lint a,lint b){
    if((a&lt;0 &amp;&amp; b&gt;a-limit::lowest())||(a&gt;0 &amp;&amp; b&lt;a-limit::max()))return true;
    return false;
}
void Razlomak::Postavi(){
    lint x(NZD(brojnik,nazivnik));
    brojnik/=x;
    nazivnik/=x;
    if(nazivnik&lt;0){
        brojnik*=-1;
        nazivnik*=-1;
    }
}
lint Razlomak::NZD(lint a,lint b){
    if(b==0) return a;
    return NZD(b,a%b);
}
Razlomak::Razlomak(lint b,lint n){
    if(n==0)throw std::logic_error("Nekorektan razlomak");
    brojnik=b;nazivnik=n;
    Postavi();
}
Razlomak::Razlomak(lint b){
    brojnik=b;
    nazivnik=1;
}
Razlomak operator-(Razlomak&amp;a){
    if(a.brojnik==std::numeric_limits&lt;long long int&gt;::lowest()) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    a.brojnik*=-1; 
    return a;
}
Razlomak operator+(const Razlomak&amp;a,const Razlomak&amp;b){
<a name="0"></a><font color="#FF0000"><a href="match418-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    lint x(Razlomak::NZD(a.nazivnik,b.nazivnik));
    if(Razlomak::m_overflow(a.brojnik,b.nazivnik/x)||Razlomak::m_overflow(b.brojnik,a.nazivnik/x)||
    Razlomak::m_overflow(a.nazivnik,b.nazivnik/x)||Razlomak::s_overflow(a.brojnik*(b.nazivnik/x),b.brojnik*(a.nazivnik/x)))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
</font>    Razlomak temp(a.brojnik*(b.nazivnik/x)+b.brojnik*(a.nazivnik/x),a.nazivnik*(b.nazivnik/x));
    temp.Postavi();
    return temp;
}
Razlomak operator-(const Razlomak&amp;a,const Razlomak&amp;b){
<a name="1"></a><font color="#00FF00"><a href="match418-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    lint x(Razlomak::NZD(a.nazivnik,b.nazivnik));
    if(Razlomak::m_overflow(a.brojnik,b.nazivnik/x)||Razlomak::m_overflow(b.brojnik,a.nazivnik/x)||
    Razlomak::m_overflow(a.nazivnik,b.nazivnik/x)||Razlomak::o_overflow(a.brojnik*(b.nazivnik/x),b.brojnik*(a.nazivnik/x)))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
</font>    Razlomak temp(a.brojnik*(b.nazivnik/x)-b.brojnik*(a.nazivnik/x),a.nazivnik*(b.nazivnik/x));
    temp.Postavi();
    return temp;
}
Razlomak operator*(const Razlomak&amp;a,const Razlomak&amp;b){
    lint x(Razlomak::NZD(a.brojnik,b.nazivnik));
    lint y(Razlomak::NZD(b.brojnik,a.nazivnik));
<a name="3"></a><font color="#00FFFF"><a href="match418-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if(Razlomak::m_overflow(a.brojnik/x,b.brojnik/y)||Razlomak::m_overflow(a.nazivnik/y,b.nazivnik/x))throw std::overflow_error("Nemoguce dobiti tacan rezultat");
</font>    Razlomak temp((a.brojnik/x)*(b.brojnik/y),(a.nazivnik/y)*(b.nazivnik/x));
    temp.Postavi();
    return temp;
}
Razlomak operator/(const Razlomak&amp;a,const Razlomak&amp;b){
    lint x(Razlomak::NZD(a.brojnik,b.brojnik));
    lint y(Razlomak::NZD(a.nazivnik,b.nazivnik));
<a name="4"></a><font color="#FF00FF"><a href="match418-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    if(Razlomak::m_overflow(a.brojnik/x,b.nazivnik/y)||Razlomak::m_overflow(a.nazivnik/y,b.brojnik/x))throw std::overflow_error("Nemoguce dobiti tacan rezultat");
</font><a name="4"></a><font color="#FF00FF"><a href="match418-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Razlomak temp((a.brojnik/x)*(b.nazivnik/y),(a.nazivnik/y)*(b.brojnik/x));
</font>    temp.Postavi();
    return temp;
}
Razlomak&amp;operator+=(Razlomak&amp;a,const Razlomak&amp;b){
    return a=a+b;
}
Razlomak&amp;operator-=(Razlomak&amp;a,const Razlomak&amp;b){
    return a=a-b;
}
Razlomak&amp;operator*=(Razlomak&amp;a,const Razlomak&amp;b){
    return a=a*b;
}
Razlomak&amp;operator/=(Razlomak&amp;a,const Razlomak&amp;b){
    return a=a/b;
}
Razlomak&amp;operator++(Razlomak&amp;a){
    if(Razlomak::s_overflow(a.brojnik,a.nazivnik))throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    a.brojnik+=a.nazivnik;
    return a;
}
Razlomak operator++(Razlomak&amp;a,int){
    auto temp(a);
    ++a;
    return temp;
}
Razlomak&amp;operator--(Razlomak&amp;a){
    if(Razlomak::o_overflow(a.brojnik,a.nazivnik))throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    a.brojnik-=a.nazivnik;
    return a;
}
Razlomak operator--(Razlomak&amp;a,int){
    auto temp(a);
    --a;
    return temp;
}
std::ostream&amp;operator&lt;&lt;(std::ostream&amp;tok,const Razlomak&amp;a){
    tok&lt;&lt;a.brojnik;
    if(a.nazivnik!=1)tok&lt;&lt;"/"&lt;&lt;a.nazivnik;
    return tok;
}
std::istream&amp;operator&gt;&gt;(std::istream&amp;tok,Razlomak&amp;a){
    a.brojnik=0; a.nazivnik=1;
    char znak;
    tok&gt;&gt;a.brojnik;
    znak=tok.peek();
    if(!znak) tok.setstate(std::ios::failbit);
    else if(znak=='/'){
        tok&gt;&gt;znak&gt;&gt;std::ws&gt;&gt;a.nazivnik;
        if(tok.peek()!=' '&amp;&amp; tok.peek()!='\n' &amp;&amp; tok.peek()!=0 &amp;&amp; tok.peek()!='\r') tok.setstate(std::ios::failbit);
    }
    a.Postavi();
    return tok;
}
bool operator&lt;(const Razlomak&amp;a,const Razlomak&amp;b){
    ldouble x((ldouble)a.brojnik/a.nazivnik),y((ldouble)b.brojnik/b.nazivnik);
    return x&lt;y;
}
bool operator&gt;(const Razlomak&amp;a,const Razlomak&amp;b){
    ldouble x((ldouble)a.brojnik/a.nazivnik),y((ldouble)b.brojnik/b.nazivnik);
    return x&gt;y;
}
bool operator&lt;=(const Razlomak&amp;a,const Razlomak&amp;b){
    ldouble x((ldouble)a.brojnik/a.nazivnik),y((ldouble)b.brojnik/b.nazivnik);
    return x&lt;=y;
}
bool operator&gt;=(const Razlomak&amp;a,const Razlomak&amp;b){
    ldouble x((ldouble)a.brojnik/a.nazivnik),y((ldouble)b.brojnik/b.nazivnik);
    return x&gt;=y;
}
bool operator==(const Razlomak&amp;a,const Razlomak&amp;b){
    ldouble x((ldouble)a.brojnik/a.nazivnik),y((ldouble)b.brojnik/b.nazivnik);
    return x==y;
}
Razlomak::operator long double(){
    return static_cast&lt;long double&gt;(brojnik)/nazivnik;
}
int main (){
    try{
    std::cout&lt;&lt;"blabla\n";
    Razlomak a(-1,2);
    Razlomak b(-4611627387903);
    a+=b;
    std::cin&gt;&gt;a&gt;&gt;b;
    std::cout&lt;&lt;a&lt;&lt;" "&lt;&lt;b&lt;&lt;std::endl;
    }catch(std::overflow_error x){std::cout&lt;&lt;x.what();}
	return 0;
}</pre>
</body>
</html>
