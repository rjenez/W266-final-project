<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1547.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4473.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
constexpr long long int MIN = std::numeric_limits&lt;long long int&gt;::min();
constexpr long long int MAX = std::numeric_limits&lt;long long int&gt;::max();

class Razlomak {
    long long int brojnik;
    long long int nazivnik;
    static long long int NZD(long long int br, long long int naz) {
        long long int i = br,pomocna;
        
        
        while(true) {
        if(naz == 0) return i;
        if(i%naz == 1 ) return 1;
        pomocna = i;
        i = naz;
        naz = pomocna%naz;
        
        }
    }
    
    static void izuzetakOverflow() {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
<a name="1"></a><font color="#00FF00"><a href="match725-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    public:
    Razlomak(long long int br = 0, long long int naz = 1);
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator +(const Razlomak &amp;p, const Razlomak &amp;q);
</font>    friend Razlomak operator -(const Razlomak &amp;p, const Razlomak &amp;q);
<a name="5"></a><font color="#FF0000"><a href="match725-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    friend Razlomak operator *(const Razlomak &amp;p, const Razlomak &amp;q);
    friend Razlomak operator /(const Razlomak &amp;p, const Razlomak &amp;q);
    Razlomak &amp;operator +();
</font>    Razlomak &amp;operator -();
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    operator long double();
<a name="2"></a><font color="#0000FF"><a href="match725-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Razlomak &amp;operator +=(const Razlomak &amp;q);
    Razlomak &amp;operator -=(const Razlomak &amp;q);
    Razlomak &amp;operator *=(const Razlomak &amp;q);
    Razlomak &amp;operator /=(const Razlomak &amp;q);
    friend Razlomak &amp;operator ++(Razlomak &amp;r);
</font>    friend Razlomak operator ++(Razlomak &amp;r,int);
    friend Razlomak &amp;operator --(Razlomak &amp;r);
    friend Razlomak operator --(Razlomak &amp;r,int);
    friend bool operator &lt;(const Razlomak &amp;p, const Razlomak &amp;q);
    friend bool operator &gt;(const Razlomak &amp;p, const Razlomak &amp;q);
    friend bool operator &lt;=(const Razlomak &amp;p, const Razlomak &amp;q);
    friend bool operator &gt;=(const Razlomak &amp;p, const Razlomak &amp;q);
    friend bool operator ==(const Razlomak &amp;p, const Razlomak &amp;q);
    friend inline bool operator !=(const Razlomak &amp;p, const Razlomak &amp;q);
};
    
    Razlomak::Razlomak(long long int br, long long int naz ) {
      
        if(naz == 0) throw std::logic_error("Nekorektan razlomak");
        else if(naz &lt; 0) { br = br*(-1); naz = naz*(-1); }
        else if( br == naz) {  brojnik = 1; nazivnik = 1; }                          
        else if( br &lt; 0) { br= br*(-1); naz = naz*(-1); }
        
        if(naz == 1){ brojnik = br; nazivnik = naz; }
         else {  auto nazy =  NZD(br,naz);

             brojnik = br/nazy;
             nazivnik = naz/nazy;
         }
        
    }
   
    
   Razlomak operator +(const Razlomak &amp;p, const Razlomak &amp;q) { // trebal friend i 2 par ?
        auto r = Razlomak::NZD(p.nazivnik,q.nazivnik);
        long long int naz;
        long long int br;
        if(p.brojnik*(q.nazivnik/r) &gt; MAX - p.nazivnik*(q.brojnik/r)) Razlomak::izuzetakOverflow();
      //  else if(q.brojnik &gt; MAX/(q.nazivnik/r) || q.brojnik &lt; MIN/)
        br = p.brojnik*(q.nazivnik/r) + q.brojnik*(p.nazivnik/r);
        naz = p.nazivnik*(q.nazivnik/r);
        return {br,naz};
    }
    
     Razlomak operator -(const Razlomak &amp;p, const Razlomak &amp;q) {
        auto r = Razlomak::NZD(p.nazivnik,q.nazivnik);
        long long int naz;
        long long int br;
        br = p.brojnik*(q.nazivnik/r) - q.brojnik*(p.nazivnik/r);
        naz = p.nazivnik*(q.nazivnik/r);
        return {br,naz};
        
    }
    
   Razlomak operator *(const Razlomak &amp;p, const Razlomak &amp;q) {
        auto s =  Razlomak::NZD(p.brojnik,q.nazivnik);
        auto t =  Razlomak::NZD(q.brojnik,p.nazivnik);
        long long int naz;
        long long int br;
        br = (p.brojnik/s)*(q.brojnik/t);
        naz = (p.nazivnik/s)*(q.nazivnik/t);
        return {br,naz};
    }
    
     Razlomak operator /(const Razlomak &amp;p, const Razlomak &amp;q) {
         auto r =  Razlomak::NZD(p.nazivnik,q.nazivnik);
         auto u =  Razlomak::NZD(p.brojnik,q.brojnik);
         long long int naz;
         long long int br;
         br = (p.brojnik/u)*(q.nazivnik/r);
         naz = (p.nazivnik/r)*(q.brojnik/u);
         return {br,naz};
    }
    
    Razlomak &amp;Razlomak::operator +() {
        if(brojnik &lt; 0 &amp;&amp; brojnik &lt; MAX*(-1) )  Razlomak::izuzetakOverflow();
        if(nazivnik &lt; 0 &amp;&amp; nazivnik &lt; MAX*(-1) )  Razlomak::izuzetakOverflow(); //il svi mijenjaju znak
        
       return *this;
        
    }
    
     Razlomak &amp;Razlomak::operator -() {
      //  if( p.brojnik &gt; 0 &amp;&amp; p.brojnik &gt; MAX*(-1))  Razlomak::izuzetakOverflow(); //il min
       // if(p.nazivnik &gt; 0 &amp;&amp; p.nazivnik &gt; MAX*(-1))  Razlomak::izuzetakOverflow();
        brojnik *= -1;
        return *this;
       
        
    }
    
     std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
        if(r.nazivnik == 1) return tok &lt;&lt; r.brojnik;
        return tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik ;
    }
    
     std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,  Razlomak &amp;r) {
        char znak;
        long long int br,naz;
        tok &gt;&gt; std::ws; // pojede bjeline
        
        tok &gt;&gt; br;
        if( tok.peek() != '/') {
            r.brojnik = br;
            r.nazivnik = 1;
            return tok;
        }
        tok &gt;&gt; znak; 
        if(znak != '/') tok.setstate(std::ios::failbit);
        tok &gt;&gt; naz;
        if(tok.peek()  != '\n' &amp;&amp; tok.peek() != '\t' &amp;&amp; tok.peek() != '\f' &amp;&amp; tok.peek() != '\v' &amp;&amp; tok.peek() != ' ') tok.setstate(std::ios::failbit);
        auto de = Razlomak::NZD(br,naz);
        r.brojnik = br/de;
        r.nazivnik = naz/de;
        
        
        return tok;
    }
    
    Razlomak::operator long double() {
        return ((long double)brojnik)/nazivnik;
    }
    
     Razlomak &amp;Razlomak::operator +=( const Razlomak &amp;q) { //vracal ref na objekat ???
<a name="0"></a><font color="#FF0000"><a href="match725-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        auto r =  Razlomak::NZD(nazivnik,q.nazivnik);
        
        brojnik = brojnik*(q.nazivnik/r) + q.brojnik*(nazivnik/r);     // hocel bit dobro il ko kod trouglovaa
        nazivnik = nazivnik*(q.nazivnik/r);
        return *this;
        
    }
    
     Razlomak &amp;Razlomak::operator -=( const Razlomak &amp;q) {
        auto r =  Razlomak::NZD(nazivnik,q.nazivnik);
</font>      
<a name="3"></a><font color="#00FFFF"><a href="match725-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        brojnik = brojnik*(q.nazivnik/r) - q.brojnik*(nazivnik/r);
        nazivnik = nazivnik*(q.nazivnik/r);
        return *this;
    }
    
     Razlomak &amp;Razlomak::operator *=( const Razlomak &amp;q) {
        auto s =  Razlomak::NZD(brojnik,q.nazivnik);
</font>        auto t =  Razlomak::NZD(q.brojnik,nazivnik);
       
        brojnik = (brojnik/s)*(q.brojnik/t);
<a name="4"></a><font color="#FF00FF"><a href="match725-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        nazivnik = (nazivnik/s)*(q.nazivnik/t);
        return *this;
    }
    
     Razlomak &amp;Razlomak::operator /=( const Razlomak &amp;q) {
        auto r =  Razlomak::NZD(nazivnik,q.nazivnik);
</font>        auto u =  Razlomak::NZD(brojnik,q.brojnik);
       
        brojnik = (brojnik/u)*(q.nazivnik/r);
        nazivnik = (nazivnik/r)*(q.brojnik/u);
        return *this;
    }
    
    Razlomak &amp;operator ++(Razlomak &amp;r) { //++r prefiksni
       r += 1;
        return r;
    }  
    
     Razlomak operator ++(Razlomak &amp;r,int) { //r++
        Razlomak upomoc(r);
        r+=1;
        return upomoc;
    }
    
     Razlomak &amp;operator --(Razlomak &amp;r) {
        r -= 1;
        return r;
    }
    
     Razlomak operator --(Razlomak &amp;r,int) {
        Razlomak upomoc(r);
        r -= 1;
        return upomoc;
    }
    
    bool operator &lt;(const Razlomak &amp;p, const Razlomak &amp;q) {
        long double prvi,drugi;
        prvi = (long double)p.brojnik/p.nazivnik;
        drugi = (long double)q.brojnik/q.nazivnik;
        return prvi &lt; drugi;
    }
    
     bool operator &gt;(const Razlomak &amp;p, const Razlomak &amp;q) {
        long double prvi,drugi;
        prvi = (long double)p.brojnik/p.nazivnik;
        drugi = (long double)q.brojnik/q.nazivnik;
        return prvi &gt; drugi;
    }
    
     bool operator &lt;=(const Razlomak &amp;p, const Razlomak &amp;q) {
        long double prvi,drugi;
        prvi = (long double)p.brojnik/p.nazivnik;
        drugi = (long double)q.brojnik/q.nazivnik;
        return prvi &lt;= drugi;
    }
    
     bool operator &gt;=(const Razlomak &amp;p, const Razlomak &amp;q) {
        long double prvi,drugi;
        prvi = (long double)p.brojnik/p.nazivnik;
<a name="6"></a><font color="#00FF00"><a href="match725-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        drugi = (long double)q.brojnik/q.nazivnik;
        return prvi &gt;= drugi;
    }
    
    bool operator ==(const Razlomak &amp;p, const Razlomak &amp;q) {
        long double prvi,drugi;
</font>        prvi = (long double)p.brojnik/p.nazivnik;
        drugi = (long double)q.brojnik/q.nazivnik;
        return prvi == drugi;
    }
    
     inline bool operator != (const Razlomak &amp;p, const Razlomak &amp;q) {
        return !(p == q);
    }
    
   
    








int main ()
{
    try{
    Razlomak obj {10,20};
    Razlomak r(2,20);
    
    std::cout&lt;&lt;obj.DajBrojnik()&lt;&lt;std::endl;
    std::cout&lt;&lt;obj.DajNazivnik()&lt;&lt;std::endl;
    auto r1 = obj + r;
    std::cout&lt;&lt;r1&lt;&lt;std::endl;
    auto r2 = obj - r;
    std::cout &lt;&lt; r2 &lt;&lt; std::endl;
    auto r3 = obj*r;
    std::cout &lt;&lt; r3 &lt;&lt; std::endl;
    auto r4 = obj/r;
    std::cout &lt;&lt; r4 &lt;&lt; "     "&lt;&lt;r4.DajNazivnik()&lt;&lt;std::endl;
    auto pl = +obj;
    std::cout &lt;&lt; pl &lt;&lt; std::endl;
   auto p1 = -obj;
    std::cout &lt;&lt; p1 &lt;&lt; std::endl;
    r4 +=obj;
    std::cout &lt;&lt; r4 &lt;&lt; std::endl;
    r1 -= r;
    std::cout &lt;&lt; r1 &lt;&lt; std::endl;
    r4 *= obj;
    std::cout &lt;&lt; r4 &lt;&lt; std::endl;
    obj /=r;
    std::cout &lt;&lt; obj &lt;&lt; std::endl;
    auto m = obj++;
    std::cout&lt;&lt;obj&lt;&lt;"\n"&lt;&lt;m;
    ++obj;
    std::cout &lt;&lt; obj &lt;&lt; std::endl;
    auto o = obj--;
    std::cout &lt;&lt; obj &lt;&lt;"       "&lt;&lt;o&lt;&lt; std::endl;
    --obj;
    std::cout &lt;&lt; obj &lt;&lt; std::endl;
     if( o &lt; obj) std::cout &lt;&lt; "jes" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "nije" &lt;&lt; std::endl;
     if( o &gt; obj) std::cout &lt;&lt; "jes" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "nije" &lt;&lt; std::endl;
     if( o &lt;= obj) std::cout &lt;&lt; "jes" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "nije" &lt;&lt; std::endl;
    
     if( o &gt;= obj) std::cout &lt;&lt; "jes" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "nije" &lt;&lt; std::endl;
     --o;
     --o;
      std::cout &lt;&lt; o &lt;&lt; std::endl;
     if( o == obj) std::cout &lt;&lt; "jes" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "nije" &lt;&lt; std::endl;
     if( o != obj) std::cout &lt;&lt; "jes" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "nije" &lt;&lt; std::endl;
   
  
  
  
  
  
   /* Razlomak r(5);
    ++r;
    std::cout &lt;&lt; r &lt;&lt; std::endl;*/
    
    }catch(std::overflow_error o) {
        std::cout &lt;&lt; o.what() &lt;&lt; std::endl;
    }
    
	return 0;
}</pre>
</body>
</html>
