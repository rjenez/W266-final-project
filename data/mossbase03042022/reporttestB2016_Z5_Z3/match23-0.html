<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student6364.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student6364.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match23-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;limits&gt;
const long double Eps(1e-10); 
long long int M = std::numeric_limits&lt;long long int&gt;::max();
class Razlomak {
    long long int brojnik, nazivnik;
    static int Skrati(long long int m, long long int n);
    static bool PrekoracenjeSab(long long int x, long long int y);
    static bool PrekoracenjeOduz(long long int x, long long int y);
    static bool PrekoracenjeMnoz(long long int x, long long int y);
   // static bool PrekoracenjeDj(long long int x, long long int y);
   static void Pokrati(long long int &amp;m, long long int &amp;n) {
       long long int r = Skrati(m, n);
       m /= r; n /= r;
   }
public:
    Razlomak (long long int m = 0, long long int n = 1);
    Razlomak(std::initializer_list&lt;long long int&gt; l);
    long long int DajBrojnik() {
        return brojnik;
    }
    long long int DajNazivnik() {
        return nazivnik;
    }
    Razlomak operator+(const Razlomak &amp;r);
    Razlomak operator -(const Razlomak &amp;r);
    Razlomak operator *(const Razlomak &amp;r);
    Razlomak operator /(const Razlomak &amp;r);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, Razlomak r);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    Razlomak operator+();
    Razlomak operator-();
    Razlomak &amp;operator += (const Razlomak &amp;r);
    Razlomak &amp;operator -=(const Razlomak &amp;r);
    Razlomak &amp;operator *=(const Razlomak &amp;r);
    Razlomak &amp;operator /=(const Razlomak &amp;r);
    Razlomak &amp;operator ++();
    Razlomak operator++(int);
    Razlomak &amp;operator --();
    Razlomak operator --(int);
    bool operator &lt; (const Razlomak &amp;r);
    bool operator &lt;= (const Razlomak &amp;r);
    bool operator &gt; (const Razlomak &amp;r);
    bool operator &gt;= (const Razlomak &amp;r);
    bool operator ==(const Razlomak &amp;r);
    bool operator !=(const Razlomak &amp;r);
    operator long double();
};
Razlomak::operator long double() {
    long double a;
    a = ((long double) brojnik)/nazivnik;
    return a;
}
bool Razlomak::operator !=(const Razlomak &amp;r) {
    long double a, b;
    a = ((long double)brojnik)/nazivnik;
    b = ((long double)r.brojnik)/r.nazivnik;
    return (std::abs(a-b) &gt; Eps);
}
bool Razlomak::operator ==(const Razlomak &amp;r) {
    long double a, b;
    a = ((long double)brojnik)/nazivnik;
    b = ((long double)r.brojnik)/r.nazivnik;
    return (std::abs(a-b) &lt;= Eps);
}
bool Razlomak::operator &gt;= (const Razlomak &amp;r) {
    long double a, b;
    a = ((long double)brojnik)/nazivnik;
    b = ((long double)r.brojnik)/r.nazivnik;
    if(std::abs(a-b) &lt;= Eps) return true;
    return a &gt; b;
}
bool Razlomak::operator &gt; (const Razlomak &amp;r) {
    long double a, b;
    a = ((long double)brojnik)/nazivnik;
    b = ((long double)r.brojnik)/r.nazivnik;
    if(std::abs(a-b) &lt;= Eps) return false;
    return a &gt; b;
}
bool Razlomak::operator &lt;= (const Razlomak &amp;r) {
    long double a, b;
    a = ((long double)brojnik)/nazivnik;
    b = ((long double)r.brojnik)/r.nazivnik;
    if(std::abs(a-b) &lt;= Eps) return true;
    return a &lt; b;
}
bool Razlomak::operator &lt;(const Razlomak &amp;r) {
    long double a, b;
    a = ((long double)brojnik)/nazivnik;
    b = ((long double)r.brojnik)/r.nazivnik;
    if(std::abs(a-b) &lt;= Eps) return false;
    return a &lt; b;
}
Razlomak Razlomak::operator --(int) {
    Razlomak tmp, vrati(*this);
    try {
        tmp = *this - Razlomak(1);
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return vrati;
}
Razlomak &amp;Razlomak::operator--() {
    Razlomak tmp;
    try {
        tmp = *this - Razlomak(1);
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak Razlomak::operator ++(int) {
    Razlomak tmp, vrati(*this);
    try {
        tmp = *this + Razlomak(1);
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return vrati;
}
Razlomak &amp;Razlomak::operator++() {
    Razlomak tmp;
    try {
        tmp = *this + Razlomak(1);
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak &amp;Razlomak::operator /=(const Razlomak &amp;r) {
    Razlomak tmp;
    try {
        tmp = *this / r;
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak &amp;Razlomak::operator *=(const Razlomak &amp;r) {
    Razlomak tmp;
    try {
        tmp = *this * r;
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak &amp;Razlomak::operator -=(const Razlomak &amp;r) {
    Razlomak tmp;
    try {
        tmp = *this - r;
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak &amp;Razlomak::operator += (const Razlomak &amp;r) {
    Razlomak tmp;
    try {
        tmp = *this + r;
    } catch(...) {
        throw;
    } *this = tmp;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak Razlomak::operator -() {
    if(PrekoracenjeMnoz(brojnik, -1)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik *= -1;
    Pokrati(brojnik, nazivnik);
    return *this;
}
Razlomak Razlomak::operator +() {
    return *this;
}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
    char a;
    tok&gt;&gt;r.brojnik;
    if(tok.peek() == EOF || tok.peek() == '\n' || tok.peek() == '\t' || tok.peek() == ' ' || tok.peek() == '\r' || tok.peek() == '\f') {
        r.nazivnik = 1;
        return tok;
    }
    tok&gt;&gt;a&gt;&gt;r.nazivnik;
    if(a != '/' || tok.peek() != EOF || tok.peek() != '\n' || tok.peek() != '\t' || tok.peek() != ' ' || tok.peek() != '\r' || tok.peek() != '\f') {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    Razlomak::Pokrati(r.brojnik, r.nazivnik);
    return tok;
}
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, Razlomak r) {
    tok&lt;&lt;r.brojnik;
    if(r.nazivnik != 1) tok&lt;&lt;"/"&lt;&lt;r.nazivnik;
    return tok;
}
Razlomak Razlomak::operator /(const Razlomak &amp;r) {
    long long int u = Skrati(brojnik, r.brojnik);
    long long int k = Skrati(nazivnik, r.nazivnik);
    Razlomak rez;
    if(PrekoracenjeMnoz(brojnik/u, r.brojnik/k) || PrekoracenjeMnoz(nazivnik/k, r.brojnik/u))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    rez.brojnik = (brojnik / u) * (r.nazivnik / k);
    rez.nazivnik = (nazivnik / k) * (r.brojnik / u);
    Pokrati(rez.brojnik, rez.nazivnik);
    return rez;
}
Razlomak  Razlomak::operator *(const Razlomak &amp;r) {
    Razlomak rez;
    long long int s = Skrati(brojnik, r.nazivnik);
    long long int t = Skrati(r.brojnik, nazivnik);
    long long int a = (brojnik / s);
    long long int b = (r.brojnik / t);
    rez.brojnik = a * b;
    if(PrekoracenjeMnoz(a, b) || PrekoracenjeMnoz(nazivnik/t, r.nazivnik/s))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    rez.nazivnik = (nazivnik / t) * (r.nazivnik / s);
    Pokrati(rez.brojnik, rez.nazivnik);
    return rez;
}
Razlomak Razlomak::operator-(const Razlomak &amp;r) {
    Razlomak rez;
    long long int k = Skrati(nazivnik, r.nazivnik);
    long long int a = brojnik * (r.nazivnik / k);
    long long int b = r.brojnik * (nazivnik / k);
    if(PrekoracenjeMnoz(brojnik, r.nazivnik/k) || PrekoracenjeMnoz(r.brojnik, nazivnik/k) || PrekoracenjeOduz(a, b) || PrekoracenjeMnoz(nazivnik, r.nazivnik/k))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    rez.brojnik = a - b;
    rez.nazivnik = nazivnik * (r.nazivnik / k);
    Pokrati(rez.brojnik, rez.nazivnik);
    return rez;
}
Razlomak Razlomak::operator+ (const Razlomak &amp;r) {
    Razlomak rez;
    long long int k = Skrati(nazivnik, r.nazivnik);
    long long int a = brojnik * (r.nazivnik / k);
    long long int b = r.brojnik * (nazivnik / k);
    rez.brojnik = a + b;
    if(PrekoracenjeMnoz(brojnik, r.nazivnik/k) || PrekoracenjeMnoz(r.brojnik, nazivnik/k) || PrekoracenjeSab(a, b) || PrekoracenjeMnoz(nazivnik, r.nazivnik / k))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    rez.nazivnik = nazivnik * (r.nazivnik / k);
    Pokrati(rez.brojnik, rez.nazivnik);
    return rez;
}
bool Razlomak::PrekoracenjeMnoz(long long int x, long long int y) {
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    if(y &gt; 0 &amp;&amp; (x &lt; m / y || x &gt; M / y )) return true;
    else if(y &lt; 0 &amp;&amp; (x == m || -x &gt; M / (-y) || -x &lt; m / (-y))) return true;
    return false;
}
bool Razlomak::PrekoracenjeOduz(long long int x, long long int y) {
   // long long int M = std::numeric_limits&lt;long long int&gt;::max();
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    if(y &lt; 0 &amp;&amp; x &gt; M + y) return true;
    else if(y &gt; 0 &amp;&amp; x &lt; m + y) return true;
    return false;
}
bool Razlomak::PrekoracenjeSab(long long int x, long long int y) {
    //long long int M = std::numeric_limits&lt;long long int&gt;::max();
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    if(y &gt; 0 &amp;&amp; x &gt; M - y) return true;
    else if(y &lt; 0 &amp;&amp; x &lt; m - y) return true;
    return false;
}
Razlomak::Razlomak(std::initializer_list&lt;long long int&gt; l) {
    int a(1);
    auto pok = l.begin();
    brojnik = *pok; 
    pok++;
    nazivnik = *pok;
    if(brojnik &lt; 0 &amp;&amp; nazivnik &lt; 0) {
        brojnik *= -1; nazivnik *= -1;
    } else if(brojnik &lt; 0 || nazivnik &lt; 0) {
        a = -1;
        brojnik = std::abs(brojnik);
        nazivnik = std::abs(nazivnik);
    }
    long long int r = Skrati(brojnik, nazivnik);
    brojnik /= r; nazivnik /= r;
    brojnik *= a;
}
Razlomak::Razlomak(long long int m, long long int n) {
    if(n == 0) throw std::logic_error("Nekorektan razlomak");
    int a(1);
    if(m &lt; 0 &amp;&amp; n &lt; 0) {
        m *= -1; n *= -1;
    } else if(m &lt; 0 || n &lt; 0) {
        a = -1; m = std::abs(m); n = std::abs(n);
    }
    long long int r = Skrati(m, n);
    brojnik = a * (m / r); nazivnik = n / r;
}
int Razlomak::Skrati(long long int m, long long int n) {
    int r;

    do {
        r = m % n;
        if(r == 0) break;
        m = n;
        n = r;
    } while(true);
    return n;
}
int main ()
{
    Razlomak zzz(10, 20);
    std::cout&lt;&lt;zzz;
    Razlomak r(3, 6), t(-2, 3);
    Razlomak v;
    v = r - t;
    r += t;
    r *= t;
    v = r / t;
    v /= 2;
    if(v &lt; r) std::cout&lt;&lt;"Manji je\n";
    else std::cout&lt;&lt;"Veci je \n";
    std::cout&lt;&lt;r.DajBrojnik()&lt;&lt;"/"&lt;&lt;r.DajNazivnik();
    std::cout&lt;&lt;"Unesite razlomak: ";
    Razlomak a;
    std::cin&gt;&gt;a;
    if(a != t) a-= t;
    std::cout&lt;&lt;a;
	return 0;
</font>}</pre>
</body>
</html>
