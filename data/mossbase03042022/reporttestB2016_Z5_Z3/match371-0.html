<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student6705.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student6705.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match371-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;math.h&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
class Razlomak
{
    long long int Brojnik, Nazivnik;
    static long long int NZD(long long int p, long long int q);
</font>    static void ProvjeriSabiranje(long long int p1, long long int p2);
    static void ProvjeriOduzimanje(long long int p1, long long int p2);
    static void ProvjeriMnozenje(long long int p1, long long int p2);
    static long long int StringToInt(std::string s);
    static bool DaLiJeIspravan(std::string s);
    public:
    Razlomak(long long int brojnik = 0, long long int nazivnik = 1);
    Razlomak(int brojnik){
        Brojnik = brojnik;
        Nazivnik = 1;
    }
    long long int DajBrojnik() const {return Brojnik;}
    long long int DajNazivnik() const {return Nazivnik;}
    friend Razlomak operator +(const Razlomak &amp;r1);
    friend Razlomak operator -(const Razlomak &amp;r1);
    friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="0"></a><font color="#FF0000"><a href="match371-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator ++(Razlomak &amp;r1);
</font>    friend Razlomak operator ++(Razlomak &amp;r1, int);
    friend Razlomak &amp;operator --(Razlomak &amp;r1); 
    friend Razlomak operator --(Razlomak &amp;r1, int);
    friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt; (const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt; (const Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="5"></a><font color="#FF0000"><a href="match371-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    friend std::ostream&amp; operator &lt;&lt;(std::ostream&amp; Itok, const Razlomak &amp;r1);
    friend std::istream&amp; operator &gt;&gt;(std::istream&amp; Utok, Razlomak &amp;r1);
    operator long double () const{
        return ((long double)Brojnik)/Nazivnik;
</font>    }
};
long long int Razlomak::NZD(long long int p, long long int q)
{
    if(q == 0)
        return p;
    else
        return NZD(q, p % q);
}
void Razlomak::ProvjeriSabiranje(long long int x, long long int y)
{
    long long int M = std::numeric_limits&lt;long long int&gt;::max();
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    if(y &gt; 0)
        if(x &gt; (M - y))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(y &lt; 0)
        if(x &lt; (m - y))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
}
void Razlomak::ProvjeriOduzimanje(long long int x, long long int y)
{
    Razlomak::ProvjeriSabiranje(x, -y);
}
void Razlomak::ProvjeriMnozenje(long long int x, long long int y)
{   
    long long int M = std::numeric_limits&lt;long long int&gt;::max();
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    if(y &gt; 0)
        if(x &gt; (M / y) || x &lt; (m / y))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(y &lt; 0)
        if(x == m || -x &gt; (M / (- y)) || -x &lt; (m / (-y))) 
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
}
long long int Razlomak::StringToInt(std::string s)
{
    std::vector&lt;int&gt; v;
    for(int i(0); i &lt; s.size(); i++)
        v.push_back(s[i] - 48);
    long long int vrati(0), k(1);
    for(int i(v.size() - 1); i &gt;= 0; i--)
    {
        vrati += v[i] * k;
        k *= 10;
    }
    return vrati;
}
bool Razlomak::DaLiJeIspravan(std::string s)
{
    for(int i(0); i &lt; s.size(); i++)
        if(s[i] &gt;= '0' &amp;&amp; s[i] &lt;= '9')
            continue;
        else
            return false;
    return true;
}
Razlomak::Razlomak(long long int brojnik, long long int nazivnik)
{
    if(nazivnik == 0)
        throw std::logic_error("Nekorektan razlomak");
    if(brojnik &lt; 0 &amp;&amp; nazivnik &lt; 0)
    {
        brojnik *= -1;
        nazivnik *= -1;
        auto nzd = NZD(brojnik, nazivnik);
        Brojnik = brojnik/nzd;
        Nazivnik = nazivnik/nzd;
    }
    else if(nazivnik &gt; 0 &amp;&amp; brojnik &gt;= 0)
    {
        auto nzd = NZD(brojnik, nazivnik);
        Brojnik = brojnik/nzd;
        Nazivnik = nazivnik/nzd; 
    }
    else
    {
        if(brojnik &lt; 0)
            brojnik *= -1;
        if(nazivnik &lt; 0)
            nazivnik *= -1;
        auto nzd = NZD(brojnik, nazivnik);
        Brojnik = brojnik/nzd;
        Nazivnik = nazivnik/nzd;
        Brojnik *= -1;
    }
}
Razlomak operator +(const Razlomak &amp;r1)
{
    return r1;
}
Razlomak operator -(const Razlomak &amp;r1)
{
    if(r1.Brojnik == std::numeric_limits&lt;long long int&gt;::min())
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
<a name="2"></a><font color="#0000FF"><a href="match371-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    return Razlomak(-r1.DajBrojnik(), r1.DajNazivnik());
}
Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2)
{

    long long int p1(r1.Brojnik), p2(r2.Brojnik), q1(r1.Nazivnik), q2(r2.Nazivnik);
</font>    auto r = Razlomak::NZD(q1, q2);
    auto temp1 = q2 / r;
    auto temp2 = q1 / r;
    Razlomak::ProvjeriMnozenje(p1, temp1);
    Razlomak::ProvjeriMnozenje(p2, temp2);
    auto temp3 = p1 * temp1;
    auto temp4 = p2 * temp2;
    Razlomak::ProvjeriSabiranje(temp3, temp4);
    auto brojnik = temp3 + temp4;
    Razlomak::ProvjeriMnozenje(q1, (q2 / r));
    auto nazivnik = q1 * (q2 / r);
    return Razlomak(brojnik, nazivnik);
}
<a name="3"></a><font color="#00FFFF"><a href="match371-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    long long int p1(r1.Brojnik), p2(r2.Brojnik), q1(r1.Nazivnik), q2(r2.Nazivnik);
</font>    auto r = Razlomak::NZD(q1, q2);
    auto temp1 = q2 / r;
    auto temp2 = q1 / r;
    Razlomak::ProvjeriMnozenje(p1, temp1);
    Razlomak::ProvjeriMnozenje(p2, temp2);
    auto temp3 = p1 * temp1;
    auto temp4 = p2 * temp2;
    Razlomak::ProvjeriOduzimanje(temp3, temp4);
    auto brojnik = temp3 - temp4;
    Razlomak::ProvjeriMnozenje(q1, (q2 / r));
    auto nazivnik = q1 * (q2 / r);
    return Razlomak(brojnik, nazivnik);
}
<a name="6"></a><font color="#00FF00"><a href="match371-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    long long int p1(r1.Brojnik), p2(r2.Brojnik), q1(r1.Nazivnik), q2(r2.Nazivnik);
</font>    auto s = Razlomak::NZD(p1, q2);
    auto t = Razlomak::NZD(p2, q1);
    auto temp1 = p1 / s;
    auto temp2 = p2 / t;
    auto temp3 = q1 / t;
    auto temp4 = q2 / s;
    Razlomak::ProvjeriMnozenje(temp1, temp2);
    Razlomak::ProvjeriMnozenje(temp3, temp4);
    auto brojnik = temp1 * temp2;
    auto nazivnik = temp3 * temp4;
    return Razlomak(brojnik, nazivnik);
}
<a name="7"></a><font color="#0000FF"><a href="match371-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    long long int p1(r1.Brojnik), p2(r2.Brojnik), q1(r1.Nazivnik), q2(r2.Nazivnik);
</font>    auto r = Razlomak::NZD(q1, q2);
    auto u = Razlomak::NZD(p1, p2);
    auto temp1 = p1 / u;
    auto temp2 = q2 / r;
    auto temp3 = q1 / r;
    auto temp4 = p2 / u;
    Razlomak::ProvjeriMnozenje(temp1, temp2);
    Razlomak::ProvjeriMnozenje(temp3, temp4);
    auto brojnik = temp1 * temp2;
    auto nazivnik = temp3 * temp4;
    return Razlomak(brojnik, nazivnik);
}
Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2)
{
    return r1 = r1 + r2;
}
Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2)
{
    return r1 = r1 - r2;
}
Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2)
{
    return r1 = r1 * r2;
}
Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2)
{
    return r1 = r1 / r2;
}
Razlomak operator ++(Razlomak &amp;r1, int)
{
    Razlomak pomocni(1, 1);
    r1 += pomocni;
    return pomocni;
}
Razlomak &amp;operator ++(Razlomak &amp;r1)
{
    Razlomak pomocni(1, 1);
    r1 += pomocni;
    return r1;
}
Razlomak operator --(Razlomak &amp;r1, int)
{
    Razlomak pomocni(1, 1);
    r1 -= pomocni;
    return pomocni;
}
Razlomak &amp;operator --(Razlomak &amp;r1)
{
    Razlomak pomocni(1, 1);
    r1 -= pomocni;
    return r1;
}
bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    if(r1.Brojnik == r2.Brojnik &amp;&amp; r1.Nazivnik == r2.Nazivnik)
        return true;
    return false;
}
bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    return !(r1 == r2);
}
bool operator &gt; (const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    long double razlomak1 = ((long double)r1.Brojnik) / r1.Nazivnik;
    long double razlomak2 = ((long double)r2.Brojnik) / r2.Nazivnik;
    return razlomak1 &gt; razlomak2;
}
bool operator &lt; (const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    long double razlomak1 = ((long double)r1.Brojnik) / r1.Nazivnik;
    long double razlomak2 = ((long double)r2.Brojnik) / r2.Nazivnik;
    return razlomak1 &lt; razlomak2;
}
bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    if(r1 == r2)
        return true;
    return r1 &gt; r2;
}
bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2)
{
    if(r1 == r2)
        return true;
    return r1 &lt; r2;
}
<a name="1"></a><font color="#00FF00"><a href="match371-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

std::ostream&amp; operator &lt;&lt;(std::ostream&amp; Itok, const Razlomak &amp;r1)
{
    if(r1.Nazivnik == 1 )
        Itok &lt;&lt; r1.Brojnik;
    else
        Itok &lt;&lt; r1.Brojnik &lt;&lt; "/" &lt;&lt; r1.Nazivnik;
    return Itok;
}
std::istream&amp; operator &gt;&gt;(std::istream&amp; Utok, Razlomak &amp;r1)
</font>{
    std::string s;
    Utok &gt;&gt; s;
    std::string brojnik, nazivnik;
    int i = 0;
    while(s[i] != '/' &amp;&amp; i &lt; s.size())
    {
        brojnik += s[i];
        i++;
    }
    i++;
    while(i &lt; s.size())
    {
        nazivnik += s[i];
        i++;
    }
    
    long long int bro(0), naz(0);
    if(Razlomak::DaLiJeIspravan(brojnik))
    {
        bro = Razlomak::StringToInt(brojnik);
        if(nazivnik.size() == 0){
            Razlomak p(bro);
            r1 = p; 
            return Utok;
        }
        if(Razlomak::DaLiJeIspravan(nazivnik)){
            naz = Razlomak::StringToInt(nazivnik);
            Razlomak p1(bro, naz);
            r1 = p1;
            return Utok;
        }
    }
    Utok.setstate(std::ios::failbit);
    return Utok;
}

int main ()
{
    Razlomak r (3, 1), t (21), v;
    std::cout &lt;&lt; "r = " &lt;&lt; r &lt;&lt; ", t = " &lt;&lt; t &lt;&lt; ", v = " &lt;&lt; v &lt;&lt; std::endl;
    std::cout &lt;&lt; (r + t) &lt;&lt; std::endl;
    std::cout &lt;&lt; (t - r) &lt;&lt; std::endl;
    std::cout &lt;&lt; (r * t) &lt;&lt; std::endl;
    std::cout &lt;&lt; (t / r) &lt;&lt; std::endl;
    std::cout &lt;&lt; +r &lt;&lt; std::endl;
    std::cout &lt;&lt; -r &lt;&lt; std::endl;
    r += t;
    std::cout &lt;&lt; r &lt;&lt; std::endl;
    r -= t;
    std::cout &lt;&lt; r &lt;&lt; std::endl;
    r *= t;
    std::cout &lt;&lt; r &lt;&lt; std::endl;
    r /= t;
    r++;
    std::cout &lt;&lt; r &lt;&lt; std::endl;
    std::cout &lt;&lt; ++r &lt;&lt; std::endl;
    r--;
    std::cout &lt;&lt; r &lt;&lt; std::endl;
    std::cout &lt;&lt; --r &lt;&lt; std::endl;
    std::cout &lt;&lt; "Brojnik: " &lt;&lt; r.DajBrojnik() &lt;&lt; std::endl
                      &lt;&lt; "Nazivnik: " &lt;&lt; r.DajNazivnik() &lt;&lt; std::endl;
    Razlomak r1(2, 2), r2(5, 1), r3(7, 7), r4(1524, 50);
    std::cout &lt;&lt; "R1 == R3 " &lt;&lt; (r1 == r3) &lt;&lt; " R2 != R1 " &lt;&lt; (r2 != r1) &lt;&lt; std::endl;
    std::cout &lt;&lt; "R1 &gt; R2 " &lt;&lt; (r1 &gt; r2) &lt;&lt; " R1 &gt;= R3 " &lt;&lt; (r1 &gt;= r3) &lt;&lt; std::endl;
    std::cout &lt;&lt; "R1 &lt; R2 " &lt;&lt; (r1 &lt; r2) &lt;&lt; " R1 &lt;= R3 " &lt;&lt; (r1 &lt;= r3) &lt;&lt; std::endl;
    long double x(r4);
    std::cout &lt;&lt; x;
}</pre>
</body>
</html>
