<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9451.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9451.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match135-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;

class Razlomak
{
    long long int brojnik, nazivnik;
    static int NZD(long long int x, long long int y) {
        long long int nzd=1;
        if(fabs(x)&gt;=fabs(y) &amp;&amp; fabs(y)&gt;=2) {
            for(int i=2; i&lt;=y; i++) {
                if(x%i==0 &amp;&amp; y%i==0) nzd=i;
            }
        }
        if(fabs(y)&gt;=fabs(x) &amp;&amp; fabs(x)&gt;=2) {
            for(int i=2; i&lt;=x; i++) {
                if(x%i==0 &amp;&amp; y%i==0) nzd=i;
            }
        }
        return nzd;
    }
public:
    Razlomak(long long int p, long long int q) {
        if(q==0) throw std::logic_error ("Nekorektan razlomak");

        long long int n=NZD(p,q);
        if(n!=1) {
            p/=n;
            q/=n;
        }
        brojnik=p;
        nazivnik=q;
        if(q&lt;0) {
            nazivnik*=-1;
            brojnik*=-1;
        }
    }
    Razlomak(long long int p) {
        brojnik=p;
        nazivnik=1;
    }
    Razlomak() {
        brojnik=0;
        nazivnik=1;
    }
    long long int DajBrojnik()const {
        return brojnik;
    }
    long long int DajNazivnik()const {
        return nazivnik;
    }
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;R);

    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,  Razlomak &amp;R);

    friend Razlomak operator *(Razlomak a, Razlomak b) ;
    friend Razlomak operator +(Razlomak a, Razlomak b) ;

    friend Razlomak operator -(Razlomak a, Razlomak b);

    friend Razlomak operator /(Razlomak a, Razlomak b);
    operator long double()const {

        return (long double)brojnik/nazivnik;
    }

};

int NZD(long long int x, long long int y)
{
    long long int nzd=1;
    if(fabs(x)&gt;=fabs(y) &amp;&amp; fabs(y)&gt;=2) {
        for(int i=2; i&lt;=y; i++) {
            if(x%i==0 &amp;&amp; y%i==0) nzd=i;
        }
    }
    if(fabs(y)&gt;=fabs(x) &amp;&amp; fabs(x)&gt;=2) {
        for(int i=2; i&lt;=x; i++) {
            if(x%i==0 &amp;&amp; y%i==0) nzd=i;
        }
    }
    return nzd;
}
Razlomak operator -(Razlomak a, Razlomak b)
{
    Razlomak c;
    c.brojnik=a.DajBrojnik()*(b.DajNazivnik()/NZD(a.DajNazivnik(),b.DajNazivnik()))-b.DajBrojnik()*(a.DajNazivnik()/NZD(a.DajNazivnik(),b.DajNazivnik()));
    c.nazivnik=a.DajNazivnik()*(b.DajNazivnik()/NZD(a.DajNazivnik(),b.DajNazivnik()));
    long long int n=NZD(c.brojnik,c.nazivnik);
    if(n!=1) {
        c.brojnik/=n;
        c.nazivnik/=n;
    }
    if(c.nazivnik&lt;0) {
        c.nazivnik*=-1;
        c.brojnik*=-1;
    }
    return c;
}
Razlomak operator +(Razlomak a, Razlomak b)
{
    Razlomak c;
    c.brojnik=a.DajBrojnik()*(b.DajNazivnik()/NZD(a.DajNazivnik(),b.DajNazivnik()))+b.DajBrojnik()*(a.DajNazivnik()/NZD(a.DajNazivnik(),b.DajNazivnik()));
    c.nazivnik=a.DajNazivnik()*(b.DajNazivnik()/NZD(a.DajNazivnik(),b.DajNazivnik()));
    long long int n=NZD(c.brojnik,c.nazivnik);
    if(n!=1) {
        c.brojnik/=n;
        c.nazivnik/=n;
    }
    if(c.nazivnik&lt;0) {
        c.nazivnik*=-1;
        c.brojnik*=-1;
    }
    return c;
}
Razlomak operator *(Razlomak a, Razlomak b)
{
    Razlomak c;
    c.brojnik=(a.DajBrojnik()/NZD(a.DajBrojnik(), b.DajNazivnik()))*(b.DajBrojnik()/NZD(b.DajBrojnik(), a.DajNazivnik()));
    c.nazivnik=(a.DajNazivnik()/NZD(b.DajBrojnik(), a.DajNazivnik()))*(b.DajNazivnik()/NZD(a.DajBrojnik(), b.DajNazivnik()));
    long long int n=NZD(c.brojnik,c.nazivnik);
    if(n!=1) {
        c.brojnik/=n;
        c.nazivnik/=n;
    }
    if(c.nazivnik&lt;0) {
        c.nazivnik*=-1;
        c.brojnik*=-1;
    }
    return c;

}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,  Razlomak &amp;R)
{
    char znak;
    tok&gt;&gt;std::ws;
    tok&gt;&gt; R.brojnik;
    if(tok.peek()!='/') {
        R.nazivnik=1;
    } else {
        tok &gt;&gt; znak&gt;&gt;R.nazivnik;

        if(tok.peek()!=' ') {
            tok.setstate(std::ios::failbit);
        }

        long long int n=NZD(R.brojnik,R.nazivnik);
        if(n!=1) {
            R.brojnik/=n;
            R.nazivnik/=n;
        }
        if(R.nazivnik&lt;0) {
            R.nazivnik*=-1;
            R.brojnik*=-1;
        }
        R=Razlomak(R. brojnik,R.nazivnik);
    }

    return tok;
}
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;R)
{

    if(R.DajBrojnik()==0)return tok&lt;&lt; R.DajBrojnik();
    if(R.DajBrojnik()!=0 &amp;&amp; R.DajNazivnik()==1)return tok&lt;&lt; R.DajBrojnik();
    return tok&lt;&lt; R.DajBrojnik()&lt;&lt;"/"&lt;&lt;R.DajNazivnik();
}
Razlomak operator /(Razlomak a, Razlomak b)
{
    Razlomak c;
    c.brojnik=(a.DajBrojnik()/Razlomak::NZD(a.DajBrojnik(), b.DajBrojnik()))*(b.DajNazivnik()/Razlomak::NZD(a.DajNazivnik(),b.DajNazivnik()));
    c.nazivnik=(a.DajNazivnik()/Razlomak::NZD(a.DajNazivnik(),b.DajNazivnik()))*(b.DajBrojnik()/Razlomak::NZD(a.DajBrojnik(), b.DajBrojnik()));

    long long int n=Razlomak::NZD(c.brojnik,c.nazivnik);
    if(n!=1) {
        c.brojnik/=n;
        c.nazivnik/=n;
    }
    if(c.nazivnik&lt;0) {
        c.nazivnik*=-1;
        c.brojnik*=-1;
    }
    return c;

}
int main ()
{
    return 0;
</font>}</pre>
</body>
</html>
