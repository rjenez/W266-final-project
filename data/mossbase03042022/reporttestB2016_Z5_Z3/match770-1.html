<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student7492.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student8638.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;


class Razlomak{
  long long int brojnik;
  long long int nazivnik;
  static long long int NZD(long long int x, long long int y);
  static bool Uporedi_double(long double a, long double b);

  public:
  Razlomak(long long int brojnik=0, long long int nazivnik=1);
  long long int DajBrojnik() const { return brojnik;}
  long long int DajNazivnik() const { return nazivnik;}
  friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
  friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r); //DORADITI
  friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2);
  Razlomak operator +() const { return Razlomak(brojnik,nazivnik); }
  Razlomak operator -() { return Razlomak(-brojnik, nazivnik); }
  Razlomak operator *=(const Razlomak &amp;r2){ *this = *this * r2; return *this;}
  Razlomak operator /=(const Razlomak &amp;r2){ *this = *this / r2; return *this;}
  Razlomak operator +=(const Razlomak &amp;r2){ *this = *this + r2; return *this;}
  Razlomak operator -=(const Razlomak &amp;r2){ *this = *this - r2; return *this;}
  Razlomak operator ++() {  *this = *this + Razlomak(1); return *this;}  //prefiksni
  Razlomak operator --() {  *this = *this - Razlomak(1); return *this; }  //prefiksni
  Razlomak operator ++(int) { Razlomak temp(brojnik,nazivnik); temp = Razlomak(1) + temp; return temp; }
  Razlomak operator --(int) { Razlomak temp(brojnik,nazivnik); temp = temp - Razlomak(1); return temp; } 
  operator long double ();
  friend bool operator &lt; (Razlomak r1, Razlomak r2){ long double a = r1; long double b = r2; return a &lt; b; }
  friend bool operator &gt; (Razlomak r1, Razlomak r2){ long double a = r1; long double b = r2; return a &gt; b; }
  friend bool operator &lt;=(Razlomak r1, Razlomak r2){ long double a = r1; long double b = r2; return a &lt;= b; }
  friend bool operator &gt;=(Razlomak r1, Razlomak r2){ long double a = r1; long double b = r2; return a &gt;= b; }
  friend bool operator ==(Razlomak r1, Razlomak r2){ long double a = r1; long double b = r2; return Uporedi_double(a,b); }
  friend bool operator !=(Razlomak r1, Razlomak r2){ long double a = r1; long double b = r2; return !(Uporedi_double(a,b)); }
  
};

long long int Razlomak::NZD(long long int x, long long int y){
    long long int temp;
    while(y!=0){
        temp = x%y;
        x = y; 
        y = temp;
    }
    return x;
}

bool Razlomak::Uporedi_double(long double a, long double b){
      long double razlika = a-b;
      long double EPSILON = std::numeric_limits&lt;long double&gt;::epsilon();
      return (razlika &lt; EPSILON) &amp;&amp; (-razlika &lt; EPSILON);
  }

  
Razlomak::Razlomak(long long int brojnik, long long int nazivnik){
    if(nazivnik == 0) throw std::logic_error("Nekorektan razlomak");
    long long int nzd = Razlomak::NZD(brojnik, nazivnik);
    long long int temp1, temp2;
    
    if(nzd == 1 || nzd == -1){
        if(brojnik &lt; 0 &amp;&amp; nazivnik &lt; 0){
            temp1 = brojnik * -1;
            temp2 = nazivnik *-1;
        }
        if(brojnik &gt; 0 &amp;&amp; nazivnik &lt; 0){
            temp1 = brojnik * -1;
            temp2 = nazivnik *-1;
        }
    temp1 = brojnik;
    temp2 = nazivnik;
    }
    
    while(nzd != 1){
        temp1 = brojnik/nzd;
        temp2= nazivnik/nzd;
        nzd = Razlomak::NZD(temp1, temp2);
    }
    
    if(temp1 &gt; 0 &amp;&amp; temp2 &lt; 0){
        temp1 *=-1; temp2 *=-1;
    }
    
    if(temp1 &lt; 0 &amp;&amp; temp2 &lt; 0){
        temp1 *=-1; temp2 *=-1;
    }
    
    Razlomak::brojnik = temp1;
    Razlomak::nazivnik = temp2;
}

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r){
    if(r.nazivnik == 1) tok &lt;&lt; r.brojnik ;
    else tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik;
    return tok;
}

<a name="2"></a><font color="#0000FF"><a href="match770-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r){
    char znak;
    tok &gt;&gt; std::ws;
    tok &gt;&gt; r.brojnik;
</font>    if(tok.peek() == '/'){
        tok &gt;&gt; znak;
        tok &gt;&gt; r.nazivnik;
        r = Razlomak(r.brojnik, r.nazivnik);
    }
    else if(tok.peek() == '\n' || tok.peek() == ' '){
        r.nazivnik = 1;
        r = Razlomak(r.brojnik, r.nazivnik);
    }
    else {
        tok.setstate(std::ios::failbit);
    }
    return tok;
}

<a name="3"></a><font color="#00FFFF"><a href="match770-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2){
    
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
</font><a name="4"></a><font color="#FF00FF"><a href="match770-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    long long int nazivnik = r1.nazivnik * (r2.nazivnik/r);
    long long int brojnik = r1.brojnik * (r2.nazivnik/r) + r2.brojnik * (r1.nazivnik/r);
</font>    
    Razlomak r3(brojnik, nazivnik);
    
    return r3;
}

Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2){
    
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    long long int M =  std::numeric_limits&lt;long long int&gt;::max();
    if((r2.brojnik &lt; 0 &amp;&amp; r1 &gt; Razlomak(M) + r2) || (r2.brojnik &gt; 0 &amp;&amp; r1 &lt; Razlomak(m) + r2)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
<a name="5"></a><font color="#FF0000"><a href="match770-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    long long int nazivnik = r1.nazivnik * (r2.nazivnik/r);
    long long int brojnik = r1.brojnik * (r2.nazivnik/r) - r2.brojnik * (r1.nazivnik/r);
</font>    
<a name="6"></a><font color="#00FF00"><a href="match770-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Razlomak r3(brojnik, nazivnik);
    
    return r3;
}

Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2){
    
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
</font>    long long int M =  std::numeric_limits&lt;long long int&gt;::max();
    if( (r2.brojnik &gt; 0 &amp;&amp; !(r1 &lt; (Razlomak(m)/r2) || r1 &gt; Razlomak(M)/r2)) ||( r2.brojnik &lt; 0 &amp;&amp; (r1 == Razlomak(m) || (Razlomak(-1) * r1) &gt; Razlomak(M)/(r2*Razlomak(-1))  || (Razlomak(-1)*r1) &lt; Razlomak(m)/(Razlomak(-1) * r2)))) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    
    long long int s = Razlomak::NZD(r1.brojnik, r2.nazivnik);
    long long int t = Razlomak::NZD(r2.brojnik, r1.nazivnik);
    
<a name="0"></a><font color="#FF0000"><a href="match770-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    long long int brojnik = (r1.brojnik/s) * (r2.brojnik/t);
    long long int nazivnik = (r1.nazivnik/t) * (r2.nazivnik/s);
    
    Razlomak r3(brojnik, nazivnik);
    
    return r3;
}

Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2){
    
    
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
</font>    long long int u = Razlomak::NZD(r1.brojnik, r2.brojnik);
    
<a name="1"></a><font color="#00FF00"><a href="match770-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    long long int brojnik = (r1.brojnik/u) * (r2.nazivnik/r);
    long long int nazivnik = (r1.nazivnik/r) * (r2.brojnik/u);
    
    Razlomak r3(brojnik, nazivnik);
    
    return r3;
</font>}

Razlomak::operator long double (){
    long double decimalni;
    decimalni = static_cast&lt;long double&gt; (brojnik) / nazivnik;
    return decimalni;
}



int main (){

return 0;
}</pre>
</body>
</html>
