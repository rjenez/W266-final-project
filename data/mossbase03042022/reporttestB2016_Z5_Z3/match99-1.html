<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student8532.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student7013.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match99-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_10.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;limits&gt;
#include &lt;sstream&gt;
#include &lt;cctype&gt;

using namespace std;

#define LONGMAX numeric_limits&lt;long long int&gt;::max()
#define LONGMIN numeric_limits&lt;long long int&gt;::min()
#define EPSILON numeric_limits&lt;long double&gt;::epsilon()

class Razlomak {
    long long int brojnik, nazivnik;
    static long long int NZD(long long int, long long int);
public:
    Razlomak(long long int brojnik = 0, long long int nazivnik = 1);
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator+(const Razlomak&amp;, const Razlomak&amp;);
    friend Razlomak operator-(const Razlomak&amp;, const Razlomak&amp;);
    friend Razlomak operator*(const Razlomak&amp;, const Razlomak&amp;);
    friend Razlomak operator/(const Razlomak&amp;, const Razlomak&amp;);
    Razlomak&amp; operator+() { return *this; }
    Razlomak&amp; operator-();
    friend Razlomak&amp; operator+= (Razlomak&amp; r1, const Razlomak&amp; r2);
    friend Razlomak&amp; operator-= (Razlomak&amp; r1, const Razlomak&amp; r2);
</font><a name="0"></a><font color="#FF0000"><a href="match99-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_87.gif"/></a>

    friend Razlomak&amp; operator*= (Razlomak&amp; r1, const Razlomak&amp; r2);
    friend Razlomak&amp; operator/= (Razlomak&amp; r1, const Razlomak&amp; r2);
    Razlomak&amp; operator++();
    Razlomak operator++(int);
    Razlomak&amp; operator--();
    Razlomak operator--(int);
    friend bool operator&lt; (const Razlomak&amp;, const Razlomak&amp;);
    friend bool operator&gt; (const Razlomak&amp;, const Razlomak&amp;);
    friend bool operator&lt;= (const Razlomak&amp;, const Razlomak&amp;);
    friend bool operator&gt;= (const Razlomak&amp;, const Razlomak&amp;);
    friend bool operator== (const Razlomak&amp;, const Razlomak&amp;);
    friend bool operator!= (const Razlomak&amp;, const Razlomak&amp;);
    
    friend ostream&amp; operator&lt;&lt; (ostream&amp;, const Razlomak&amp;);
    friend istream&amp; operator&gt;&gt; (istream&amp;, Razlomak&amp;);
    
    operator long double() const { return (long double)brojnik / (long double)nazivnik; }
};

long long int Razlomak::NZD(long long int p, long long int q) {
    p = fabs(p); q = fabs(q);
    if(q == 0) return p;
    return NZD(q, p % q);
}

Razlomak::Razlomak(long long int brojnik, long long int nazivnik){
    if(nazivnik == 0) throw logic_error("Nekorektan razlomak");
    if(nazivnik &lt; 0){
        nazivnik *= -1;
        brojnik *= -1;
    }
    long long int nzd = NZD(brojnik, nazivnik);
    this-&gt;brojnik = brojnik / nzd;
    this-&gt;nazivnik = nazivnik / nzd;
}

Razlomak operator+(const Razlomak&amp; x, const Razlomak&amp; y){
    if((y.DajBrojnik() &gt; 0 &amp;&amp; x.DajBrojnik() &gt; LONGMAX - y.DajBrojnik()) || (y.DajBrojnik() &lt; 0 &amp;&amp; x.DajBrojnik() &lt; LONGMIN - y.DajBrojnik()))
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    if((y.DajNazivnik() &gt; 0 &amp;&amp; x.DajNazivnik() &gt; LONGMAX - y.DajNazivnik()) || (y.DajNazivnik() &lt; 0 &amp;&amp; x.DajNazivnik() &lt; LONGMIN - y.DajNazivnik()))
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    long long int brojnik, nazivnik;
    long long int r = Razlomak::NZD(x.DajNazivnik(), y.DajNazivnik());
    brojnik = x.DajBrojnik() * (y.DajNazivnik() / r) + y.DajBrojnik() * (x.DajNazivnik() / r);
    nazivnik = x.DajNazivnik() * (y.DajNazivnik() / r);
    return Razlomak(brojnik, nazivnik);
}

Razlomak operator-(const Razlomak&amp; x, const Razlomak&amp; y){
    Razlomak temp = y;
    return x + -temp;
}

Razlomak operator*(const Razlomak&amp; x, const Razlomak&amp; y){
    if(y.DajBrojnik() &gt; 0 &amp;&amp; (x.DajBrojnik() &lt; LONGMIN / y.DajBrojnik() || x.DajBrojnik() &gt; LONGMAX / y.DajBrojnik()))
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    if(y.DajNazivnik() &gt; 0 &amp;&amp; (x.DajNazivnik() &lt; LONGMIN / y.DajNazivnik() || x.DajNazivnik() &gt; LONGMAX / y.DajNazivnik()))
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    if(y.DajBrojnik() &lt; 0 &amp;&amp; (x.DajBrojnik() == LONGMIN || -x.DajBrojnik() &gt; LONGMAX / (-y.DajBrojnik()) || -x.DajBrojnik() &lt; LONGMIN / (-y.DajBrojnik())))
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    if(y.DajNazivnik() &lt; 0 &amp;&amp; (x.DajNazivnik() == LONGMIN || -x.DajNazivnik() &gt; LONGMAX / (-y.DajNazivnik()) || -x.DajNazivnik() &lt; LONGMIN / (-y.DajNazivnik())))
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    long long int brojnik, nazivnik;
    long long int s = Razlomak::NZD(x.DajBrojnik(), y.DajNazivnik());
    long long int t = Razlomak::NZD(y.DajBrojnik(), x.DajNazivnik());
    brojnik = (x.DajBrojnik() / s) * (y.DajBrojnik() / t);
    nazivnik = (x.DajNazivnik() / t) * (y.DajNazivnik() / s);
    return Razlomak(brojnik, nazivnik);
}

Razlomak operator/(const Razlomak&amp; x, const Razlomak&amp; y){

    long long int r = Razlomak::NZD(x.DajNazivnik(), y.DajNazivnik());
    long long int u = Razlomak::NZD(x.DajBrojnik(), y.DajBrojnik());
    //PROVJERA PROVJERA
    long long int brojnik = (x.DajBrojnik() / u) * (y.DajNazivnik() / r);
    long long int nazivnik = (x.DajNazivnik() / r) * (y.DajBrojnik() / u);
    return Razlomak(brojnik, nazivnik);
    
}

Razlomak&amp; Razlomak::operator-(){
    if(brojnik &lt; 0 &amp;&amp; -brojnik &gt;= LONGMAX)
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    if(brojnik &gt; 0 &amp;&amp; -brojnik &lt;= LONGMIN)
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik *= -1;
    return *this;
}

Razlomak&amp; operator+= (Razlomak&amp; r1, const Razlomak&amp; r2) { return r1 = r1 + r2; }
Razlomak&amp; operator-= (Razlomak&amp; r1, const Razlomak&amp; r2) { return r1 = r1 - r2; }
Razlomak&amp; operator*= (Razlomak&amp; r1, const Razlomak&amp; r2) { return r1 = r1 * r2; }
Razlomak&amp; operator/= (Razlomak&amp; r1, const Razlomak&amp; r2) { return r1 = r1 / r2; }

Razlomak&amp; Razlomak::operator++(){
    if(brojnik + 1 == LONGMIN || nazivnik + 1 == LONGMIN)
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik += 1; nazivnik += 1;
    return *this;
}

Razlomak Razlomak::operator++(int n){
    Razlomak temp(*this);
    ++(*this);
    return temp;
}

Razlomak&amp; Razlomak::operator--(){
    if(brojnik - 1 == LONGMAX || nazivnik - 1 == LONGMAX)
        throw overflow_error("Nemoguce dobiti tacan rezultat");
    brojnik -= 1; nazivnik -= 1;
    return *this;
}

Razlomak Razlomak::operator--(int n){
    Razlomak temp(*this);
    --(*this);
    return temp;
}

bool operator&lt; (const Razlomak&amp; x, const Razlomak&amp; y){
    long double r1 = (long double)x.DajBrojnik() / (long double)x.DajNazivnik();
    long double r2 = (long double)y.DajBrojnik() / (long double)y.DajNazivnik();
    return r1 &lt; r2;
}

bool operator&gt; (const Razlomak&amp; x, const Razlomak&amp; y){
    long double r1 = (long double)x.DajBrojnik() / (long double)x.DajNazivnik();
    long double r2 = (long double)y.DajBrojnik() / (long double)y.DajNazivnik();
    return r1 &gt; r2;
}

bool operator&lt;= (const Razlomak&amp; x, const Razlomak&amp; y){
    return x &lt; y || x == y;
}

bool operator&gt;= (const Razlomak&amp; x, const Razlomak&amp; y){
    return x &gt; y || x == y;
}

bool operator== (const Razlomak&amp; x, const Razlomak&amp; y){
    long double r1 = (long double)x.DajBrojnik() / (long double)x.DajNazivnik();
    long double r2 = (long double)y.DajBrojnik() / (long double)y.DajNazivnik();
    return r1 &lt; r2 ? r2 - r1 &lt; EPSILON : r1 - r2 &lt; EPSILON;
}

bool operator!= (const Razlomak&amp; x, const Razlomak&amp; y){
    return !(x == y);
}

ostream&amp; operator&lt;&lt; (ostream&amp; tok, const Razlomak&amp; r){
    r.DajNazivnik() == 1 ? tok &lt;&lt; r.DajBrojnik() : tok &lt;&lt; r.DajBrojnik() &lt;&lt; "/" &lt;&lt; r.DajNazivnik();
    return tok;
}

istream&amp; operator&gt;&gt; (istream&amp; tok, Razlomak&amp; r){
    long long int brojnik(0), nazivnik(0);
    bool bezNazivnika(true);
    tok &gt;&gt; ws &gt;&gt; brojnik;
    if(!tok){
        tok.setstate(ios_base::failbit);
        return tok;
    }
    if(tok.peek() == char_traits&lt;char&gt;::to_int_type('/')){
        bezNazivnika = false;
        tok.get();
        tok &gt;&gt; nazivnik;
        //cout &lt;&lt; "ooooooooovdje: " &lt;&lt; nazivnik &lt;&lt; endl;
        if(!tok){
            tok.setstate(ios_base::failbit);
            return tok;
        }
    }
    /*
    if(tok.peek() != std::char_traits&lt;char&gt;::to_int_type(' ') &amp;&amp; tok.peek() != std::char_traits&lt;char&gt;::eof()){
        tok.setstate(ios_base::failbit);
        return tok;
    }
    */
    if(isspace(tok.peek()) == 0 &amp;&amp; tok.peek() != std::char_traits&lt;char&gt;::eof()){
        tok.setstate(ios_base::failbit);
        return tok;
    }
    
    bezNazivnika ? r = brojnik : r = {brojnik, nazivnik};
    return tok;
}


int main ()
</font>{return 0;
        }

</pre>
</body>
</html>
