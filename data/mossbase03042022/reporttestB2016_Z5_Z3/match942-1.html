<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1943.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9897.cpp<p></p><pre>
<a name="5"></a><font color="#FF0000"><a href="match942-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;initializer_list&gt;
#include &lt;limits&gt;

class Razlomak {
    
    long long int brojnik; 
    long long int nazivnik; 
    
    static long long int NZD(long long int p, long long int q) {
</font><a name="1"></a><font color="#00FF00"><a href="match942-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        if (q==0) return p; 
        p=p%q; 
        return NZD(q,p); 
    }
    public: 
    
    Razlomak (long long int brojnik, long long int nazivnik) {
</font>        
        if (nazivnik==0) throw std::logic_error ("Nekorektan razlomak"); 
        if ((brojnik&gt;0 &amp;&amp; nazivnik&lt;0) || (brojnik&lt;0 &amp;&amp; nazivnik&lt;0)) { brojnik=-brojnik; nazivnik=-nazivnik; }
        long long int nzd=NZD(brojnik, nazivnik); 
        
        Razlomak::brojnik=brojnik/nzd; Razlomak::nazivnik=nazivnik/nzd; 
    }
    
    Razlomak(std::initializer_list&lt;long long int&gt; lista) {
        if (nazivnik==0) throw std::logic_error ("Nekorektan razlomak"); 
         if ((brojnik&gt;0 &amp;&amp; nazivnik&lt;0) || (brojnik&lt;0 &amp;&amp; nazivnik&lt;0)) { brojnik=-brojnik; nazivnik=-nazivnik; }
        long long int nzd=NZD(brojnik, nazivnik); 
        
        Razlomak::brojnik=brojnik/nzd; Razlomak::nazivnik=nazivnik/nzd; 
    }
    
    Razlomak (long long int brojnik) {
      Razlomak::nazivnik=1; Razlomak::brojnik=brojnik/nazivnik; 
    }
    Razlomak() { Razlomak::brojnik=0; Razlomak::nazivnik=1; }
    
    long long int DajBrojnik() const { return brojnik; } 
    long long int DajNazivnik() const { return nazivnik; }
    
    friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    
    friend Razlomak operator +(const Razlomak &amp;r) { return r; }
    friend Razlomak operator -(const Razlomak &amp;r);
    
    friend Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2); 
    
    friend Razlomak operator ++(Razlomak &amp;r); 
    friend Razlomak operator ++(Razlomak &amp;r, int); 
    friend Razlomak operator --(Razlomak &amp;r); 
    friend Razlomak operator --(Razlomak &amp;r, int); 
    
    friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2); 
    
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r); 
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r); 
    
    operator long double () const; 
}; 

Razlomak::operator long double() const {
    long double a=brojnik/nazivnik; 
    return a; 
}

bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double a=r1.brojnik/r1.nazivnik;
    long double b=r2.brojnik/r2.nazivnik; 
    return !((a-b)&lt;0.0001); 
}

bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double a=r1.brojnik/r2.nazivnik; 
    long double b=r2.brojnik/r2.nazivnik; 
    return (a-b)&lt;0.0001; 
}

bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double a=r1.brojnik/r1.nazivnik; 
    long double b=r2.brojnik/r2.nazivnik; 
    return a&gt;=b; 
}

bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double a=r1.brojnik/r1.nazivnik; 
    long double b=r2.brojnik/r2.nazivnik; 
    return a&gt;b; 
}

bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double a=r1.brojnik/r1.nazivnik; 
    long double b=r2.brojnik/r2.nazivnik; 
    return a&lt;=b; 
}

bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double a=r1.brojnik/r1.nazivnik; 
    long double b=r2.brojnik/r2.nazivnik; 
    return a&lt;b; 
}

Razlomak operator ++(Razlomak &amp;r) {
    r+=1; 
    return r; 
}

Razlomak operator ++(Razlomak &amp;r, int) {
    Razlomak pomocni(r); 
    r+=1; 
    return pomocni; 
}

Razlomak operator --(Razlomak &amp;r, int) {
    Razlomak pomocni(r); 
    r-=1; 
    return pomocni; 
}

Razlomak operator --(Razlomak &amp;r) {
    r-=1; 
    return r; 
}

std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
    
    long long int nzd=Razlomak::NZD(r.brojnik, r.nazivnik); 
    r.brojnik=r.brojnik/nzd; r.nazivnik=r.nazivnik/nzd; 
    char znak; 
    tok &gt;&gt; std::ws; 
    
    tok &gt;&gt; r.brojnik;
    if (tok.peek() == ' ') return tok; 
    else {
    
    tok &gt;&gt; znak; if (znak != '/') tok.setstate(std::ios::failbit); 
    tok &gt;&gt; r.nazivnik; 
    }
 
    tok &gt;&gt; std::ws; 

    return tok; 
}

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
    if (r.nazivnik==1) tok &lt;&lt; r.brojnik; 
    else tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik; 
    return tok;
}

Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int u(Razlomak::NZD(r1.brojnik, r2.brojnik));  
<a name="3"></a><font color="#00FFFF"><a href="match942-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik)); 
    
    r1.brojnik=(r1.brojnik/u)*(r2.nazivnik/r); 
    r1.nazivnik=(r1.nazivnik/r)*(r2.brojnik/u);
</font>    long long int nzd=Razlomak::NZD(r1.brojnik, r1.nazivnik); 
    r1.brojnik=r1.brojnik/nzd; r1.nazivnik=r1.nazivnik/nzd; 
    
    return r1; 
}

Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int t(Razlomak::NZD(r2.brojnik, r1.nazivnik)); 
<a name="4"></a><font color="#FF00FF"><a href="match942-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    long long int s(Razlomak::NZD(r1.brojnik, r2.nazivnik)); 
    r1.brojnik=(r1.brojnik/s)*(r2.brojnik/t);
    r1.nazivnik=(r1.nazivnik/t)*(r2.nazivnik/s); 
</font>    
    long long int nzd=Razlomak::NZD(r1.brojnik, r1.nazivnik);
    r1.brojnik=r1.brojnik/nzd; r1.nazivnik=r1.nazivnik/nzd; 
    
    return r1; 
}

Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="0"></a><font color="#FF0000"><a href="match942-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik)); 
    r1.brojnik=r1.brojnik*(r2.brojnik/r)-r2.brojnik*(r1.nazivnik/r); 
    r1.nazivnik=r1.nazivnik*(r2.nazivnik/r); 
</font>    
    long long int nzd=Razlomak::NZD(r1.brojnik, r1.nazivnik); 
    r1.brojnik=r1.brojnik/nzd; r1.nazivnik=r1.nazivnik/nzd; 
    return r1; 
}

Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="2"></a><font color="#0000FF"><a href="match942-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik)); 
    r1.brojnik=r1.brojnik*(r2.brojnik/r)+r2.brojnik*(r1.nazivnik/r); 
    r1.nazivnik=r1.nazivnik*(r2.nazivnik/r);
</font>    
    long long int nzd=Razlomak::NZD(r1.brojnik, r1.nazivnik); 
    r1.brojnik=r1.brojnik/nzd; r1.nazivnik=r1.nazivnik/nzd; 
    return r1; 
}

Razlomak operator -(const Razlomak &amp;r) {
     long long int m=std::numeric_limits&lt;long long int&gt;::min(); 
     
     Razlomak r1; 
     r1.brojnik=-r.brojnik; 
     if (r1.brojnik/r1.nazivnik&lt;m) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
     return r1; 
}

Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int u(Razlomak::NZD(r1.brojnik, r2.brojnik));
    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik)); 
    Razlomak r3; 
    r3.brojnik=(r1.brojnik/u)*(r2.nazivnik/r); 
    r3.nazivnik=(r1.nazivnik/r)*(r2.brojnik/u);
    long long int nzd=Razlomak::NZD(r3.brojnik, r3.nazivnik); 
    r3.brojnik=r3.brojnik/nzd; 
    r3.nazivnik=r3.nazivnik/nzd; 
    return r3;
}

Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int M=std::numeric_limits&lt;long long int&gt;::max(); 
    long long int m=std::numeric_limits&lt;long long int&gt;::min(); 
    
    if ((r2.brojnik/r2.nazivnik)&gt;0) { 
        if ((r1.brojnik/r1.nazivnik)&lt;m/(r2.brojnik/r2.nazivnik) || (r1.brojnik/r1.nazivnik)&gt;M/(r2.brojnik/r2.nazivnik)) 
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat"); 
    }
    else {
        if ((r1.brojnik/r1.nazivnik)==m)
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    }
    
    long long int t(Razlomak::NZD(r2.brojnik, r1.nazivnik)); 
    long long int s(Razlomak::NZD(r1.brojnik, r2.nazivnik)); 
    Razlomak r3; 
    r3.brojnik=(r1.brojnik/s)*(r2.brojnik/t); 
    r3.nazivnik=(r1.nazivnik/t)*(r2.nazivnik/s); 
    long long int nzd=Razlomak::NZD(r3.brojnik, r3.nazivnik); 
    r3.brojnik=r3.brojnik/nzd;
    r3.nazivnik=r3.nazivnik/nzd; 
    return r3;
}

Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int M=std::numeric_limits&lt;long long int&gt;::max(); 
    if ((r1.brojnik/r1.nazivnik)&gt;M-(r2.brojnik/r2.nazivnik)) 
    throw std::overflow_error ("Nemoguce dobiti tacan rezultat"); 
    
    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik));
    Razlomak r3; 
    r3.brojnik=(r1.brojnik*(r2.nazivnik/r)+r2.brojnik*(r1.nazivnik/r));
    r3.nazivnik=(r1.nazivnik*(r2.nazivnik/r)); 
    long long int nzd=Razlomak::NZD(r3.brojnik, r3.nazivnik); 
    r3.brojnik=r3.brojnik/nzd; 
    r3.nazivnik=r3.nazivnik/nzd; 
    return r3; 
}

Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int m=std::numeric_limits&lt;long long int&gt;::min(); 
    if ((r1.brojnik/r1.nazivnik)&lt;m-(r2.brojnik/r2.nazivnik)) 
    throw std::overflow_error ("Nemoguce dobiti tacan rezultat"); 
    
    long long int r(Razlomak::NZD(r1.nazivnik, r2.nazivnik)); 
    Razlomak r3; 
    r3.brojnik=(r1.brojnik*(r2.nazivnik/r)-r2.brojnik*(r1.nazivnik/r)); 
    r3.nazivnik=(r1.nazivnik*(r2.nazivnik/r));
    long long int nzd=Razlomak::NZD(r3.brojnik, r3.nazivnik); 
    r3.brojnik=r3.brojnik/nzd; 
    r3.nazivnik=r3.nazivnik/nzd; 
    return r3; 
}

int main ()
{
    Razlomak r1(1,2), r2(2,3); 
    
    std::cout &lt;&lt; r1+r2 &lt;&lt; " " &lt;&lt; r1-r2 &lt;&lt; " " &lt;&lt; r1*r2 &lt;&lt; " " &lt;&lt; r1/r2; 
    std::cout &lt;&lt; std::endl; 
    
    r1++; 
    r2--; 
    
    r1+=r2;
    std::cout &lt;&lt; r1;  
    
    r1*=r2; 
    std::cout &lt;&lt; std::endl &lt;&lt; r1; 
    
    r1/=r2; 
    std::cout &lt;&lt; std::endl &lt;&lt; r1; 
    
    r1-=r2; 
    std::cout &lt;&lt; std::endl &lt;&lt; r1; 

	return 0;
}</pre>
</body>
</html>
