<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2160.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2160.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match112-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;sstream&gt;
class Razlomak
{
    long long int brojnik, nazivnik;
    static long long int NZD(long long int b, long long int n)
    {
        if(n == 0)
            return b;
            
        return NZD(n, b % n);
    }
    static void OFSabiranje(long long int a, long long int b)
    {
        if((b &gt; 0 &amp;&amp; std::numeric_limits&lt;long long int&gt;::max() - b &lt; a) || 
           (b &lt; 0 &amp;&amp; std::numeric_limits&lt;long long int&gt;::lowest() - b &gt; a))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    static void OFOduzimanje(long long int a, long long int b)
    {
        if((b &gt; 0 &amp;&amp; std::numeric_limits&lt;long long int&gt;::max() - b &gt; a) ||
        (b &lt; 0 &amp;&amp; std::numeric_limits&lt;long long int&gt;::lowest() - b &lt; a))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    static void OFMnozenje(long long int x, long long int y)
    {
        if((y &gt; 0 &amp;&amp; (x &lt; std::numeric_limits&lt;long long int&gt;::lowest() / y 
          || x &gt; std::numeric_limits&lt;long long int&gt;::max() / y))
          || (y &lt; 0 &amp;&amp; (x &gt; std::numeric_limits&lt;long long int&gt;::lowest() / y 
          || x &lt; std::numeric_limits&lt;long long int&gt;::max() / y)))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
public:
    Razlomak(long long int b = 0, long long int n = 1)
    {
        if(n == 0)
            throw std::logic_error("Nekorektan razlomak");
        
        else if(n &lt; 0 &amp;&amp; b &lt; 0)
        {
            if(n == std::numeric_limits&lt;long long int&gt;::lowest() || b == std::numeric_limits&lt;long long int&gt;::lowest())
                throw std::overflow_error("Nemoguce dobiti tacan rezultat");
            b = -b, n = -n;
        }
            
        int a = NZD(b, n);
        brojnik = b / a; 
        nazivnik = n / a;
    }
    /*Razlomak(std::initializer_list&lt;long long int&gt; r) 
    {
        if()
        auto i = lista.begin();
        brojnik = *i;
    }*/
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak &amp;operator += (Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator -= (Razlomak &amp;r1, const Razlomak &amp;r2);
    Razlomak operator + (const Razlomak &amp;r2) const { Razlomak r3 = *this; r3 += r2; return r3; }
    Razlomak operator - (const Razlomak &amp;r2) const { Razlomak r3 = *this; r3 -= r2; return r3; }
    friend Razlomak &amp;operator *= (Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator /= (Razlomak &amp;r1, const Razlomak &amp;r2);
    Razlomak operator * (const Razlomak &amp;r2) { Razlomak r3 = *this; r3 *= r2; return r3; }
    Razlomak operator / (const Razlomak &amp;r2) { Razlomak r3 = *this; r3 /= r2; return r3;}
    Razlomak operator + () const { return *this; }
    Razlomak operator - () const 
    { 
        Razlomak r = *this; 
        if(r.brojnik == std::numeric_limits&lt;long long int&gt;::lowest()) 
            throw std::overflow_error("Nemoguce dobiti tacan rezultat"); 
        r.brojnik = -r.brojnik; 
        return r; 
    }
    Razlomak &amp;operator ++ () { return *this += 1; }
    Razlomak operator ++ (int) { Razlomak r3 = *this; ++*this; return r3; }
    Razlomak &amp;operator -- () { return *this -= 1; }
    Razlomak operator -- (int) { Razlomak r3 = *this; --*this; return r3; }
    operator long double() const { return (long double)(brojnik) / (long double)(nazivnik); }
    friend bool operator &lt; (const Razlomak &amp;r1, const Razlomak &amp;r2) { return (long double)(r1) &lt; (long double)(r2); }
    friend bool operator &gt; (const Razlomak &amp;r1, const Razlomak &amp;r2) { return (long double)(r1) &gt; (long double)(r2); }
    friend bool operator &lt;= (const Razlomak &amp;r1, const Razlomak &amp;r2) { return r1 &lt; r2 || r1 == r2; }
    friend bool operator &gt;= (const Razlomak &amp;r1, const Razlomak &amp;r2) { return r1 &gt; r2 || r1 == r2; }
    bool operator == (const Razlomak &amp;r1) { return brojnik == r1.brojnik &amp;&amp; nazivnik == r1.nazivnik; }
    bool operator != (const Razlomak &amp;r2) { return !(*this == r2); }
    friend std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok, const Razlomak &amp;r);
    friend std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, Razlomak &amp;r);
    
};
Razlomak &amp;operator += (Razlomak &amp;r1, const Razlomak &amp;r2)
{

    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    Razlomak::OFMnozenje(r1.brojnik, r2.nazivnik / r);
    Razlomak::OFMnozenje(r2.brojnik, r1.nazivnik / r);
    Razlomak::OFMnozenje(r1.nazivnik, r2.nazivnik / r);
    Razlomak::OFSabiranje(r1.brojnik * (r2.nazivnik / r), r2.brojnik * (r1.nazivnik / r));
    long double brojnik = r1.brojnik * (r2.nazivnik / r) + r2.brojnik * (r1.nazivnik / r);
    long double nazivnik = r1.nazivnik * (r2.nazivnik / r);
    Razlomak r3(brojnik, nazivnik);
    r1 = r3;
    return r1;
}
Razlomak &amp;operator -= (Razlomak &amp;r1, const Razlomak &amp;r2)
{
    r1 += -r2;
    return r1;
}
Razlomak &amp;operator *= (Razlomak &amp;r1, const Razlomak &amp;r2)
{
    long long int s = Razlomak::NZD(r1.brojnik, r2.nazivnik);
    long long int t = Razlomak::NZD(r2.brojnik, r1.nazivnik);
    Razlomak::OFMnozenje(r1.brojnik, 1 / s);
    Razlomak::OFMnozenje(r2.brojnik, 1 / t);
    Razlomak::OFMnozenje(r1.nazivnik, 1 / t);
    Razlomak::OFMnozenje(r2.nazivnik, 1 / s);
    Razlomak::OFMnozenje((r1.brojnik / s), (r2.brojnik / t));
    Razlomak::OFMnozenje((r1.nazivnik / t), (r2.nazivnik / s));
    r1.brojnik = (r1.brojnik / s) * (r2.brojnik / t);
    r1.nazivnik = (r1.nazivnik / t) * (r2.nazivnik / s);
    return r1;
} 
Razlomak &amp;operator /= (Razlomak &amp;r1, const Razlomak &amp;r2)
{
    Razlomak temp(r2.nazivnik, r2.brojnik);
    r1 *= temp;
    return r1;
}
std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, Razlomak &amp;r)
{
    char znak;
    long long int brojnik, nazivnik;
    tok &gt;&gt; std::ws;
    tok &gt;&gt; brojnik;
    if(!tok)
    {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    if(std::isspace(tok.peek()) || tok.eof())
    {
        r = Razlomak(brojnik);
        return tok;
    }
    tok &gt;&gt; znak;
    if(znak != '/' &amp;&amp; !std::isspace(znak))
    {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    tok &gt;&gt; nazivnik;
    if(!std::isspace(tok.peek()) &amp;&amp; !tok.eof())
    {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    r = Razlomak(brojnik, nazivnik);
    return tok;
}
std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok, const Razlomak &amp;r)
{
    if(r.nazivnik == 1)
        return tok &lt;&lt; r.brojnik;
        
    else
        return tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik;
}
int main ()
{
    Razlomak r;
      std::istringstream is("17/ 4"); //neispravno
    is.clear();
    is &gt;&gt; r;
    if (is.fail()) std::cout &lt;&lt; "OK, neispravno!" &lt;&lt; std::endl;
    else std::cout &lt;&lt; "Nije OK! Ovo nije ispravan unos!" &lt;&lt; std::endl;
</font>    return 0;
}</pre>
</body>
</html>
