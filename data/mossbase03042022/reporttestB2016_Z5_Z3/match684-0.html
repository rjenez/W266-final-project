<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5603.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5603.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;initializer_list&gt;
#include &lt;cmath&gt;

bool UslovSabiranje(long long int x, long long int y) {
<a name="5"></a><font color="#FF0000"><a href="match684-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    long long int m = std::numeric_limits&lt;long long int&gt;::min(), M = std::numeric_limits&lt;long long int&gt;::max();
</font>    if(y &gt; 0) 
        if(x &gt; M-y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(y &lt; 0)
        if(x &lt; m-y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return true;
}

bool UslovMnozenje(long long int x, long long int y) {
    long long int m = std::numeric_limits&lt;long long int&gt;::min(), M = std::numeric_limits&lt;long long int&gt;::max();
    if(y &gt; 0) 
        if(x &lt; m/y || x &gt; M/y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(y &lt; 0)
        if(x == m || x*(-1) &gt; M/(y*(-1)) || x*(-1) &lt; m/(y*(-1))) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return true;
}

class Razlomak {
    long long int brojnik;
    long long int nazivnik;
    static long long int NZD(long long int p, long long int q);
public:
    Razlomak() : brojnik(0), nazivnik(1) {}
    Razlomak(long long int b) : brojnik(b), nazivnik(1) {}
    Razlomak(long long int b, long long int n);
    Razlomak(std::initializer_list&lt;long long int&gt; lista);
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator+(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak operator-(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak operator*(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak operator/(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak &amp;operator+(const Razlomak &amp;r);
    friend Razlomak &amp;operator-(const Razlomak &amp;r);
    friend Razlomak &amp;operator+=(Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak &amp;operator-=(Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak &amp;operator*=(Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend Razlomak &amp;operator/=(Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend inline Razlomak &amp;operator++(Razlomak &amp;r);
    friend inline Razlomak operator++(Razlomak &amp;r, int);
    friend bool operator&lt;(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend bool operator&gt;(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend bool operator&lt;=(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend bool operator&gt;=(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend bool operator==(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
<a name="6"></a><font color="#00FF00"><a href="match684-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    friend inline bool operator!=(const Razlomak &amp;prvi, const Razlomak &amp;drugi);
    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
</font>    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    operator long double() const;
};

long long int Razlomak::NZD(long long int p, long long int q) {
    if(q == 0) return p;
    long long int n = NZD(q, p%q);
    return n;
}
Razlomak::Razlomak(long long int b, long long int n) {
    if(n == 0) throw std::logic_error("Nekorektan razlomak");
    long long int nzd = NZD(b,n);
    if(n &lt; 0) {
        n *= -1;
        b *= -1;
    }
    b /= nzd;
    n /= nzd;
    brojnik = b;
    nazivnik = n;
}
Razlomak::Razlomak(std::initializer_list&lt;long long int&gt; lista) {
    if(lista.size() == 0) { brojnik = 0; nazivnik = 1; }
    else {
        auto it = lista.begin();
        brojnik = *it;
        if(lista.size() == 2) {
            it++;
            nazivnik = *it;
        }
        else nazivnik = 1;
    }
    if(nazivnik &lt; 0) {
        nazivnik *= -1;
        brojnik *= -1;
    }
    long long int nzd = NZD(brojnik, nazivnik);
    brojnik /= nzd;
    nazivnik /= nzd;
}
Razlomak operator+(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long long int r = prvi.NZD(prvi.nazivnik, drugi.nazivnik);
    try {
        bool pom_x = UslovMnozenje(prvi.brojnik, drugi.nazivnik/r);
        bool pom_y = UslovMnozenje(drugi.brojnik, prvi.nazivnik/r);
        bool pomocna = UslovSabiranje(pom_x, pom_y);
        pomocna = UslovMnozenje(prvi.nazivnik, drugi.nazivnik/r);
    }
    catch(std::overflow_error) {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    
    
    long long int b,n;
<a name="2"></a><font color="#0000FF"><a href="match684-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    b = prvi.brojnik * (drugi.nazivnik/r) + drugi.brojnik * (prvi.nazivnik/r);
    n = prvi.nazivnik * (drugi.nazivnik/r);
    Razlomak novi(b,n);
    return novi;
</font>}
Razlomak operator-(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long long int r = prvi.NZD(prvi.nazivnik, drugi.nazivnik);
    try {
       bool pom_x = UslovMnozenje(prvi.brojnik, drugi.nazivnik/r);
       bool pom_y = UslovMnozenje(drugi.brojnik, prvi.nazivnik/r);
       bool pomocna = UslovSabiranje(pom_x, pom_y * (-1));
       pomocna = UslovMnozenje(prvi.nazivnik, drugi.nazivnik/r);
    }
    catch(std::overflow_error) {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    long long int b, n;
<a name="1"></a><font color="#00FF00"><a href="match684-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    b = prvi.brojnik * (drugi.nazivnik/r) - drugi.brojnik * (prvi.nazivnik/r);
    n = prvi.nazivnik * (drugi.nazivnik/r);
    Razlomak novi(b,n);
    return novi;
</font>}
Razlomak operator*(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long long int b, n, s = prvi.NZD(prvi.brojnik, drugi.nazivnik), t = prvi.NZD(prvi.nazivnik, drugi.brojnik);
    try {
        bool pomocna = UslovMnozenje(prvi.brojnik/s, drugi.brojnik/t);
        pomocna = UslovMnozenje(prvi.nazivnik/t, drugi.nazivnik/s);
    }
    catch(std::overflow_error) {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
<a name="3"></a><font color="#00FFFF"><a href="match684-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    b = (prvi.brojnik/s) * (drugi.brojnik/t);
    n = (prvi.nazivnik/t) * (drugi.nazivnik/s);
    Razlomak novi(b,n);
</font>    return novi;
}
Razlomak operator/(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long long int b, n, u = prvi.NZD(prvi.brojnik, prvi.nazivnik), r = prvi.NZD(drugi.brojnik, drugi.nazivnik);
    try {
       bool pomocna = UslovMnozenje(prvi.brojnik/u, drugi.nazivnik/r);
       pomocna = UslovMnozenje(prvi.nazivnik/r, drugi.brojnik/u);
    }
    catch(std::overflow_error) {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
<a name="4"></a><font color="#FF00FF"><a href="match684-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    b = (prvi.brojnik/u) * (drugi.nazivnik/r);
    n = (prvi.nazivnik/r) * (drugi.brojnik/u);
    Razlomak novi(b,n);
</font>    return novi;
}
Razlomak &amp;operator+(Razlomak &amp;r) {
    return r;
}
Razlomak &amp;operator-(Razlomak &amp;r) {
    if(r.DajBrojnik() == std::numeric_limits&lt;long long int&gt;::min()) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    Razlomak novi(r.DajBrojnik()*(-1), r.DajNazivnik());
    r = novi;
    return r;
}
Razlomak &amp;operator+=(Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    Razlomak novi(prvi.DajBrojnik(), prvi.DajNazivnik());
    prvi = novi + drugi;
    return prvi;
}
Razlomak &amp;operator-=(Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    Razlomak novi(prvi.DajBrojnik(), prvi.DajNazivnik());
    prvi = novi - drugi;
    return prvi;
}
Razlomak &amp;operator*=(Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    Razlomak novi(prvi.DajBrojnik(), prvi.DajNazivnik());
    prvi = novi * drugi;
    return prvi;
}
Razlomak &amp;operator/=(Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    Razlomak novi(prvi.DajBrojnik(), prvi.DajNazivnik());
    prvi = novi / drugi;
    return prvi;
}
inline Razlomak &amp;operator++(Razlomak &amp;r) {
    Razlomak novi(1,1);
    r += novi;
    return r;
}
inline Razlomak operator++(Razlomak &amp;r, int) {
    Razlomak pomocni(r.DajBrojnik(), r.DajNazivnik());
    Razlomak novi(1,1);
    r += novi;
    return pomocni;
}
bool operator&lt;(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long double p = prvi.DajBrojnik()/prvi.DajNazivnik();
    long double q = drugi.DajBrojnik()/drugi.DajNazivnik();
    if(p &lt; q) return true;
    return false;
}
bool operator&gt;(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long double p = (long double)prvi.DajBrojnik()/prvi.DajNazivnik();
    long double q = (long double)drugi.DajBrojnik()/drugi.DajNazivnik();
    if(p &gt; q) return true;
    return false;
}
bool operator&lt;=(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long double p = (long double)prvi.DajBrojnik()/prvi.DajNazivnik();
    long double q = (long double)drugi.DajBrojnik()/drugi.DajNazivnik();
    if(p &lt;= q) return true;
    return false;
}
bool operator&gt;=(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long double p = (long double)prvi.DajBrojnik()/prvi.DajNazivnik();
    long double q = (long double)drugi.DajBrojnik()/drugi.DajNazivnik();
    if(p &gt;= q) return true;
    return false;
}
bool operator==(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    long double p = (long double)prvi.DajBrojnik()/prvi.DajNazivnik();
    long double q = (long double)drugi.DajBrojnik()/drugi.DajNazivnik();
    if(p == q) return true;
    return false;
}
inline bool operator!=(const Razlomak &amp;prvi, const Razlomak &amp;drugi) {
    if(!(prvi == drugi)) return true;
    return false;
}
<a name="0"></a><font color="#FF0000"><a href="match684-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
    if(r.DajNazivnik() == 1) {
        tok &lt;&lt; r.DajBrojnik(); return tok;
    }
    tok &lt;&lt; r.DajBrojnik() &lt;&lt; "/" &lt;&lt; r.DajNazivnik();
    return tok;
}
std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
</font>    int c = (tok &gt;&gt; std::ws).peek();
    char znak;
    if(!std::isdigit(c)) tok.setstate(std::ios::failbit);
    tok &gt;&gt; r.brojnik;
    c = tok.peek();
    if(c == '/') {
        tok &gt;&gt; znak;
        c = tok.peek();
        if(!std::isdigit(c)) tok.setstate(std::ios::failbit);
        tok &gt;&gt; r.nazivnik;
        long long int nzd = Razlomak::NZD(r.brojnik,r.nazivnik);
        r.brojnik /= nzd;
        r.nazivnik /= nzd;
        c = tok.peek();
        if(c == '\n' || c == '\f' || c == '\t' || c == '\v' || c == ' ' || c == EOF) return tok;
        else tok.setstate(std::ios::failbit);
    }
    else if(c == '\n' || c == '\f' || c == '\t' || c == '\v' || c == ' ' || c == EOF) r.nazivnik = 1;
    
    else tok.setstate(std::ios::failbit);
    
    return tok;
}
Razlomak::operator long double() const {
    long double r = (long double)brojnik/nazivnik;
    return r;
}

int main ()
{
    Razlomak r;
    std::cout &lt;&lt; "unesi: " &lt;&lt; std::endl;
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "!- " &lt;&lt; r &lt;&lt;std::endl;
    std::cin.clear();
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "!- " &lt;&lt; r &lt;&lt; std::endl;
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; r;
	return 0;
}</pre>
</body>
</html>
