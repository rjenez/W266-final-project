<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1639.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3572.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;

#define EPS 0.0000000000000000000000000000000001

// TESTIRAJ OPERATORE NA OVERFLOW (i konstruktore)

<a name="1"></a><font color="#00FF00"><a href="match117-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_17.gif"/></a>

using namespace std;

class Razlomak {
    long long int brojnik, nazivnik;
    
    void SkratiRazlomak (long long int&amp; brojnik, long long int&amp; nazivnik);
    public:
    
    Razlomak(long long int brojnik = 0, long long int nazivnik = 1) {
        if(nazivnik==0) throw logic_error("Nekorektan razlomak");
        if(nazivnik&lt;0) { // ako je minus dolje
            Razlomak::nazivnik=abs(nazivnik);
            Razlomak::brojnik=-brojnik;
        }
        
        if(nazivnik&lt;0 and brojnik&lt;0) { // oba negativna
            Razlomak::nazivnik=abs(nazivnik);
            Razlomak::brojnik=abs(brojnik);
        }
        
         Razlomak::brojnik=brojnik;
         Razlomak::nazivnik=nazivnik;
         SkratiRazlomak(brojnik,nazivnik);
    }
    
    long long int DajNazivnik() const { return nazivnik;}
    long long int DajBrojnik() const { return brojnik;}
    
    friend long long int NZD (long long int brojnik, long long int nazivnik);
    friend ostream&amp; operator&lt;&lt; (ostream&amp; tok, const Razlomak&amp; r);
    friend istream&amp; operator&gt;&gt; (istream&amp; tok, Razlomak&amp; r);
    friend Razlomak operator+ (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend Razlomak operator- (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend Razlomak operator* (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend Razlomak operator/ (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend bool operator&lt; (const Razlomak&amp; r1, const Razlomak&amp; r2);
</font>    friend bool operator&gt; (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend bool operator&lt;= (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend bool operator&gt;= (const Razlomak&amp; r1, const Razlomak&amp; r2);
<a name="0"></a><font color="#FF0000"><a href="match117-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_78.gif"/></a>

    friend bool operator== (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend bool operator!= (const Razlomak&amp; r1, const Razlomak&amp; r2);
    friend Razlomak operator++ (const Razlomak&amp; r, int);
    friend Razlomak operator-- (const Razlomak&amp; r, int);
    friend Razlomak operator++ (const Razlomak&amp; r);
    friend Razlomak operator-- (const Razlomak&amp; r);
    friend Razlomak operator- (const Razlomak&amp; r);
    friend Razlomak operator+ (const Razlomak&amp; r);
    operator long double();
   
};

Razlomak::operator long double () {
    return (long double) brojnik/nazivnik;
}

long long int NZD (long long int p, long long int q) {
    if(q==0) return p;
    return NZD(q,p%q);
} 


void Razlomak::SkratiRazlomak (long long int&amp; brojnik, long long int&amp; nazivnik) {
    long long int a;
    while((a=NZD(brojnik,nazivnik))!=1) {
        nazivnik/=a;
        brojnik/=a;
    }
}

Razlomak operator+ (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    Razlomak r3;
    long long int r(NZD(r1.DajNazivnik(), r2.DajNazivnik())); 
    r3.brojnik=r1.brojnik*(r2.nazivnik/r)+r2.brojnik*(r1.nazivnik/r);
    r3.nazivnik=r1.nazivnik*(r2.nazivnik/r);
    
    
    r3.SkratiRazlomak(r3.brojnik, r3.nazivnik);
    return r3;
}


Razlomak operator- (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    Razlomak r3;
    long long int r(NZD(r1.DajNazivnik(), r2.DajNazivnik())); 
    r3.brojnik=r1.brojnik*(r2.nazivnik/r)-r2.brojnik*(r1.nazivnik/r);
    r3.nazivnik=r1.nazivnik*(r2.nazivnik/r);
     r3.SkratiRazlomak(r3.brojnik, r3.nazivnik);
    return r3;
}

Razlomak operator* (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    Razlomak r3;
    long long int s(NZD(r1.brojnik,r2.nazivnik)), t(NZD(r2.brojnik, r1.nazivnik));
    r3.brojnik=(r1.brojnik/s)*(r2.brojnik/t);
    r3.nazivnik=(r1.nazivnik/t)*(r2.nazivnik/s);
     r3.SkratiRazlomak(r3.brojnik, r3.nazivnik);
    return r3;
}

Razlomak operator/ (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    Razlomak r3;
    long long int r(NZD(r1.DajNazivnik(), r2.DajNazivnik())), u(NZD(r1.brojnik,r1.brojnik));
    r3.brojnik=(r1.brojnik/u)*(r2.nazivnik/r);
     r3.SkratiRazlomak(r3.brojnik, r3.nazivnik);
    return r3;
}

Razlomak operator++ (const Razlomak&amp; r) {
    Razlomak novi;
    novi.brojnik=r.brojnik+r.nazivnik;
    novi.nazivnik=r.nazivnik;
    novi.SkratiRazlomak(novi.brojnik, novi.nazivnik);
    return novi;
}

Razlomak operator-- (const Razlomak&amp; r) {
    Razlomak novi;
    novi.brojnik=r.brojnik-r.nazivnik;
    novi.nazivnik=r.nazivnik;
    novi.SkratiRazlomak(novi.brojnik, novi.nazivnik);
    return novi;
}

Razlomak operator++ (const Razlomak&amp; r, int) {
    Razlomak novi;
    novi.brojnik=r.brojnik+r.nazivnik;
    novi.nazivnik=r.nazivnik;
    return novi;
}

Razlomak operator-- (const Razlomak&amp; r, int) {
    Razlomak novi;
    novi.brojnik=r.brojnik-r.nazivnik;
    novi.nazivnik=r.nazivnik;
    return novi;
}

bool operator&lt; (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    return r1.brojnik/r1.nazivnik &lt; r2.brojnik/r2.nazivnik;
}
bool operator&gt; (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    return r1.brojnik/r1.nazivnik &gt; r2.brojnik/r2.nazivnik;
}
bool operator&lt;= (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    return r1.brojnik/r1.nazivnik &lt;= r2.brojnik/r2.nazivnik;
}
bool operator&gt;= (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    return r1.brojnik/r1.nazivnik &gt;= r2.brojnik/r2.nazivnik;
}
bool operator== (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    return (r1.brojnik/r1.nazivnik)-(r2.brojnik/r2.nazivnik) &lt; EPS;
}
bool operator!= (const Razlomak&amp; r1, const Razlomak&amp; r2) {
    return (r1.brojnik/r1.nazivnik)-(r2.brojnik/r2.nazivnik) &gt; EPS;
}

Razlomak operator- (const Razlomak&amp; r) {
    Razlomak novi;
    novi.brojnik=-r.brojnik;
    novi.nazivnik=-r.nazivnik;
    return novi;
}

Razlomak operator+ (const Razlomak&amp; r) {
    return r;
}

ostream&amp; operator&lt;&lt; (ostream&amp; tok, const Razlomak&amp; r) {
        tok &lt;&lt; r.brojnik;
        if(r.nazivnik!=1) tok &lt;&lt; "/" &lt;&lt; r.nazivnik;
    
        return tok;
    }
    
istream&amp; operator&gt;&gt; (istream&amp; tok, Razlomak&amp; r) {
        int znak;
        tok &gt;&gt; r.brojnik;
        znak = tok.peek();
        if ( znak != '\r' &amp;&amp; znak != '\n' &amp;&amp; znak != ' ' &amp;&amp; znak != EOF ) {
            char c;
            tok&gt;&gt;c;
            znak = c;
            if ( znak == '/' ) tok &gt;&gt; r.nazivnik;
            else r.nazivnik = 1;
        } else 
            r.nazivnik = 1;
            
        znak = tok.peek();
        if ( znak != EOF &amp;&amp; znak != '\n' &amp;&amp; znak != ' ' &amp;&amp; znak != '\r' ) {
            tok.setstate(ios::failbit);
        }
        
        //ako treba skratiti ovdje...
        r.SkratiRazlomak(r.brojnik, r.nazivnik);
        return tok;
}

int main ()
{  Razlomak r (17, 18), t (21), v;
            std::cout &lt;&lt; "r = " &lt;&lt; r &lt;&lt; ", t = " &lt;&lt; t &lt;&lt; ", v = " &lt;&lt; v;
              std::cout &lt;&lt;" " &lt;&lt; r &lt;&lt; " je priblizno " &lt;&lt; static_cast&lt;long double&gt;(r);
</font>	return 0;
}</pre>
</body>
</html>
