<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9463.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9463.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;sstream&gt;
class Razlomak {
    long long int brojnik;
    long long int nazivnik;
   static long long int NZD(long long int brojnik, long long int nazivnik) {
       long long int nzd(1);
       for(int i(2);i&lt;=brojnik;i++) {
           if(brojnik%i==0 &amp;&amp; nazivnik%i==0)
           nzd=i;
       }
       return nzd; 
 }
    public:
    
     Razlomak(long long int brojnik) {
        this-&gt;brojnik=brojnik;
        nazivnik=1;
    }
     Razlomak() {
        brojnik=0;
        nazivnik=1;
    }
     Razlomak(long long int brojnik, long long int nazivnik);
    long long int DajBrojnik() const {return brojnik;};
    long long int DajNazivnik() const {return nazivnik;};
    friend Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2) ; //gotovo
    friend Razlomak operator-(const Razlomak &amp;r1, const Razlomak &amp;r2) ;
    friend Razlomak operator*(const Razlomak &amp;r1, const Razlomak &amp;r2) ;
    friend Razlomak operator/(const Razlomak&amp;r1, const Razlomak &amp;r2) ;
    friend Razlomak operator +(Razlomak &amp;r) {
        return r;
    }
    friend Razlomak operator -(Razlomak &amp;r) {
        r.brojnik=-1*r.brojnik;
        return r;
    }
    friend Razlomak &amp; operator+=( Razlomak &amp;r1, const Razlomak &amp;r2) {
         return r1=r1+r2;
    }
   friend Razlomak &amp; operator-=( Razlomak &amp;r1, const Razlomak &amp;r2) {
         return r1=r1-r2;
    }
    friend Razlomak &amp; operator*=( Razlomak &amp;r1, const Razlomak &amp;r2) {
         return r1=r1*r2;
    }
    friend Razlomak &amp; operator/=( Razlomak &amp;r1, const Razlomak &amp;r2) {
         return r1=r1/r2;
    }
   friend Razlomak &amp; operator++(Razlomak &amp;r) {
      
       return r+=1;
   }
   friend Razlomak &amp; operator--(Razlomak &amp;r) {
      
       return r-=1;
   }///////////gtoootovoo
   friend Razlomak operator++(Razlomak &amp;r,int) ;
<a name="2"></a><font color="#0000FF"><a href="match632-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

   friend Razlomak operator--(Razlomak &amp;r,int) ;
   
   friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
   friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) ;
</font><a name="0"></a><font color="#FF0000"><a href="match632-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

   friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2) ;
   friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2) ;
       
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) ;
    
    friend std::istream &amp; operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) ;
    operator long double const() ;
};
Razlomak::Razlomak(long long int brojnik, long long int nazivnik) {
</font>        if(nazivnik==0) throw std::logic_error ("Nekorektan razlomak");
        if(NZD(brojnik,nazivnik)!=1) {
            long long int p=NZD(brojnik,nazivnik);
            brojnik/=p;
            nazivnik/=p;
            
        }
        if(brojnik&lt;0 &amp;&amp; nazivnik&lt;0) {
            brojnik=abs(brojnik);
            nazivnik=abs(nazivnik);
        }
        if(brojnik&gt;0 &amp;&amp; nazivnik&lt;0) {
            brojnik=-1*brojnik;
            nazivnik=abs(nazivnik);
        }
    
    this-&gt;brojnik=brojnik;
    this-&gt;nazivnik=nazivnik;
    }
Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2) {
        // provjeriti da nece doci do prekoracenja i baciti izuzetak
        long long int r=Razlomak::NZD(r1.nazivnik, r2.nazivnik);
<a name="3"></a><font color="#00FFFF"><a href="match632-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        Razlomak pomocni{r1.brojnik*(r2.nazivnik/r)+r2.brojnik*(r1.nazivnik/r), (r1.nazivnik*r2.nazivnik/r)};
        return pomocni;
    }    
Razlomak operator-(const Razlomak &amp;r1, const Razlomak &amp;r2) {
        // provjeriti da nece doci do prekoracenja i baciti izuzetak
        long long int r=Razlomak::NZD(r1.nazivnik, r2.nazivnik);
</font>       
        Razlomak pomocni{r1.brojnik*(r2.nazivnik/r)-r2.brojnik*(r1.nazivnik/r), r1.nazivnik*(r2.nazivnik/r)};
        return pomocni;
    }
Razlomak operator*(const Razlomak &amp;r1, const Razlomak &amp;r2) {
        // provjeriti da nece doci do prekoracenja i baciti izuzetak
        long long int s=Razlomak::NZD(r1.brojnik, r2.nazivnik);
        long long int t=Razlomak::NZD(r2.brojnik,r1.nazivnik);
        Razlomak pomocni {(r1.brojnik/s)*(r2.brojnik/t), (r1.nazivnik/t)*(r2.nazivnik/s)};
        return pomocni;
        
    }
Razlomak operator/(const Razlomak&amp;r1, const Razlomak &amp;r2) {
      // provjeriti da nece doci do prekoracenja i baciti izuzetak
        long long int u=Razlomak::NZD(r1.brojnik,r2.brojnik);
        long long int r=Razlomak::NZD(r1.nazivnik, r2.nazivnik);
        Razlomak pomocni {(r1.brojnik/u)*(r2.nazivnik/r), (r1.nazivnik/r)*(r2.brojnik/u)};
        return pomocni;
}
Razlomak operator++(Razlomak &amp;r,int) {
       Razlomak pomocni=r;
       r+=1;
       return pomocni;
   }
Razlomak operator--(Razlomak &amp;r,int) {
       Razlomak pomocni=r;
       r-=1;
       return pomocni;
   }
<a name="4"></a><font color="#FF00FF"><a href="match632-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

 bool operator&lt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
       long double x1=(r1.brojnik/r1.nazivnik);
       long double x2=(r2.brojnik/r2.nazivnik);
</font>       if(x1&lt;x2) return true;
       return false;
   }
<a name="5"></a><font color="#FF0000"><a href="match632-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  bool operator&gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
       long double x1=(r1.brojnik/r1.nazivnik);
       long double x2=(r2.brojnik/r2.nazivnik);
</font>       if(x1&gt;x2) return true;
       return false;
   }
<a name="6"></a><font color="#00FF00"><a href="match632-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2) {
       long double x1=(r1.brojnik/r1.nazivnik);
       long double x2=(r2.brojnik/r2.nazivnik);
</font>       if(x1==x2) return true;
<a name="1"></a><font color="#00FF00"><a href="match632-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

       return false;
   }
    bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
       long double x1=(r1.brojnik/r1.nazivnik);
       long double x2=(r2.brojnik/r2.nazivnik);
        return !(x1==x2);
</font>      }
     std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
        if(r.nazivnik==1) return tok&lt;&lt;r.brojnik;
        return tok&lt;&lt;r.brojnik&lt;&lt;"/"&lt;&lt;r.nazivnik;
    }
     std::istream &amp; operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
        tok&gt;&gt;std::ws;
        char znak;
       tok.clear();
       g:  tok&gt;&gt;r.brojnik&gt;&gt;znak;
        if(znak=='/')  {
            char znak1;
            tok&gt;&gt;r.nazivnik&gt;&gt;znak1;
          //  std::cout&lt;&lt;"USAO"&lt;&lt;std::endl;
            if(znak1!=' ' || znak1!='\n'|| znak1!='\r' ||  znak1!='\f' || znak1!='\v' || znak1!='\t')  tok.setstate(std::ios::failbit);
            if(znak==' ') goto g;
            //else {
                if(Razlomak::NZD(r.brojnik,r.nazivnik)!=1)  {
                    long long int pom=Razlomak::NZD(r.brojnik,r.nazivnik);
                    r.brojnik/=pom;
                    r.nazivnik/=pom;
               }
               // return tok;}
        }
        else if(znak=='\n'|| znak=='\r' ||  znak=='\f' || znak=='\v' || znak=='\t' || znak==' ' || znak=='\0') {
             r.nazivnik=1;
            // if(znak==' ')
             //std::cout &lt;&lt; r.nazivnik&lt;&lt;"'''''''''" &lt;&lt; std::endl;
            // goto g;
           // tok&gt;&gt;r.brojnik&gt;&gt;znak;
           
        }
        else  tok.setstate(std::ios::failbit);
        return tok;
 }
 Razlomak::operator long double const() {
        brojnik=static_cast&lt;long double&gt;(brojnik);
        nazivnik=static_cast&lt;long double&gt; (nazivnik);
        long double x=brojnik*(1./nazivnik);
        return x;
    }
int main ()
{
    
    Razlomak r, q, t;
     std::istringstream is ("10/20"); //ne mora sa \n zavrsiti
     is &gt;&gt; r;
     std::cout &lt;&lt; r &lt;&lt; std::endl;

     is.str ("173"); //samo jedan broj, 173/1
     is.clear(); //mora, radi EOF
     is &gt;&gt; r;
     std::cout &lt;&lt; r &lt;&lt; std::endl;

     is.str ("               173/50"); //ispravno, razmaci prije
     is.clear();
     is &gt;&gt; r;
     std::cout &lt;&lt; r &lt;&lt; std::endl;

     is.str ("               173/50       "); //ispravno, razmaci prije, poslije
     is.clear();
     is &gt;&gt; r;
     std::cout &lt;&lt; r &lt;&lt; std::endl;


     is.str ("173/51\n  ne zanima nas sta je nakon     "); //ispravno
     is.clear();
     is &gt;&gt; r; //sljedece citanje bi bilo neispravno
     std::cout &lt;&lt; r &lt;&lt; std::endl;

     is.str ("17/33e ali je vazno da nakon razlomka ide BJELINA"); //neispravno
     is.clear();
     is &gt;&gt; r;
     if (is.fail()) std::cout &lt;&lt; "OK, neispravno!" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "Nije OK! Ovo nije ispravan unos!" &lt;&lt; std::endl;

     //nije ispravno ni npr. 10b/20, ni 10/ 20 ni a20/5
     //necu sve testirati (barem ne u javnim :troll:)

     is.str ("a17/33"); //neispravno
     is.clear();
     is &gt;&gt; r;
     if (is.fail()) std::cout &lt;&lt; "OK, neispravno!" &lt;&lt; std::endl;
     else std::cout &lt;&lt; "Nije OK! Ovo nije ispravan unos!" &lt;&lt; std::endl;

     std::cout &lt;&lt; "VEOMA VAZNO: " &lt;&lt; std::endl;
     //treba biti MOGUCE unijeti vise razlomaka odjednom! (pazite na std::ws)
     is.str (" 1/3   5/7  4/2    nebitno"); //ispravna prva 3
     is.clear();
     is &gt;&gt; r &gt;&gt; q &gt;&gt; t;
     std::cout &lt;&lt; "r = " &lt;&lt; r &lt;&lt; ", q = " &lt;&lt; q &lt;&lt; ", t = " &lt;&lt; t;

    return 0;
}</pre>
</body>
</html>
