<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student7791.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3077.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

typedef std::numeric_limits&lt;long long int&gt; granica;
using std::cout;

class Razlomak{
  long long int brojnik, nazivnik;
<a name="0"></a><font color="#FF0000"><a href="match948-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  static long long int NZD(long long int a, long long int b); 
  public:
  Razlomak(long long int a=0, long long int b=1);
  long long int DajBrojnik() const{ return brojnik;}
  long long int DajNazivnik() const{ return nazivnik;}
  Razlomak &amp;operator+=(const Razlomak &amp;r);
</font>  Razlomak &amp;operator-=(const Razlomak &amp;r);
  Razlomak &amp;operator*=(const Razlomak &amp;r);
  Razlomak &amp;operator/=(const Razlomak &amp;r);
  Razlomak &amp;operator+(){ return *this;};
  Razlomak &amp;operator-();
  Razlomak &amp;operator++();
  Razlomak &amp;operator++(int);
  Razlomak &amp;operator--();
  Razlomak &amp;operator--(int);
  friend Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator*(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator/(const Razlomak r1, const Razlomak r2);
  friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;ispis, const Razlomak &amp;r);
  friend std::istream &amp;operator&gt;&gt;(std::istream &amp;unos, Razlomak &amp;r);
  friend bool operator&gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator&gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator&lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator&lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator==(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator!=(const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend void OverflowMnozenje(long long int br1, long long int br2, long long int nzd2, long long int nzd1);
  friend void OverflowSabiranje(const Razlomak &amp;r1, const Razlomak &amp;r2, long long int nzd);
  friend void OverflowOduzimanje(const Razlomak &amp;r1, const Razlomak &amp;r2,long long int nzd);
  operator long double() { return (long double)(this-&gt;brojnik)/this-&gt;nazivnik;} 
};

long long int Razlomak::NZD(long long int a, long long int b) {
    if(b==0) return a;
    return NZD(b,a%b);}

Razlomak::Razlomak(long long int a, long long int b){
    if(b==0) throw std::logic_error("Nekorektan razlomak");
    if(a==granica::max() &amp;&amp; b&lt;0) throw std::logic_error("Nemoguce dobiti tacan rezultat");
    if((a&lt;0 &amp;&amp; b&lt;0) || b&lt;0){
        brojnik=-a;
        nazivnik=-b;
    }
    else {
        brojnik=a;
        nazivnik=b;
    }
    long long int nzd(NZD(abs(brojnik),abs(nazivnik)));
    brojnik/=nzd;
    nazivnik/=nzd;
}


void OverflowMnozenje(long long int br1, long long int br2, long long int nzd2, long long int nzd1=1){
    if(br2&gt;0 &amp;&amp;(br1/nzd1&lt;granica::min()/(br2/nzd2) || br1/nzd1&gt;granica::max()/(br2/nzd2)))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    else if(br2&lt;0 &amp;&amp;(br1/nzd1==granica::min() || -br1/nzd1&gt;granica::max()/(-br2/nzd2) || -br1/nzd1&lt;granica::min()/(-br2/nzd2) ))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");    
}



void OverflowSabiranje(const Razlomak &amp;r1,const Razlomak &amp;r2,long long int nzd){
     OverflowMnozenje(r1.brojnik,r2.nazivnik,nzd);
     OverflowMnozenje(r2.brojnik,r1.nazivnik,nzd);
     OverflowMnozenje(r1.nazivnik, r2.nazivnik,nzd);
     if(r2.brojnik&gt;0 &amp;&amp; r1.brojnik*(r2.nazivnik/nzd)&gt;granica::max()-r2.brojnik*(r1.nazivnik/nzd))
        throw std::logic_error("Nemoguce dobiti tacan rezultat");
    else if(r2.brojnik&lt;0 &amp;&amp; r1.brojnik*(r2.nazivnik/nzd)&lt;granica::min()-r2.brojnik*(r1.nazivnik/nzd))
        throw std::logic_error("Nemoguce dobiti tacan rezultat");
}

void OverflowOduzimanje(const Razlomak &amp;r1, const Razlomak &amp;r2, long long int nzd){
    OverflowMnozenje(r1.brojnik, r2.nazivnik,nzd);
    OverflowMnozenje(r2.brojnik, r1.nazivnik,nzd);
    OverflowMnozenje(r1.nazivnik,r2.nazivnik,nzd);
    if(r2.brojnik&gt;0 &amp;&amp; r1.brojnik*(r2.nazivnik/nzd)&lt;granica::min()+r1.brojnik*(r2.nazivnik/nzd))
        throw std::logic_error("Nemoguce dobiti tacan rezultat");
    else if(r2.brojnik&lt;0 &amp;&amp; r1.brojnik*(r2.nazivnik/nzd)&gt;granica::max()+r1.brojnik*(r2.nazivnik/nzd))
        throw std::logic_error("Nemoguce dobiti tacan rezultat");
}


Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak povratni;
    long long int nzd=Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    OverflowSabiranje(r1,r2,nzd);
    povratni.brojnik=r1.brojnik*(r2.nazivnik/nzd)+r2.brojnik*(r1.nazivnik/nzd);
    povratni.nazivnik=r1.nazivnik*(r2.nazivnik/nzd);
    return povratni={povratni.brojnik,povratni.nazivnik};
}


Razlomak &amp;Razlomak::operator+=(const Razlomak &amp;r){
    long long int nzd(NZD(this-&gt;nazivnik, r.nazivnik));
    OverflowSabiranje(*this,r,nzd);
    this-&gt;brojnik=this-&gt;brojnik*(r.nazivnik/nzd)+r.brojnik*(this-&gt;nazivnik/nzd);
    this-&gt;nazivnik*=(r.nazivnik/nzd);
    return *this={this-&gt;brojnik,this-&gt;nazivnik};
}


Razlomak operator-(const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak povratni;
    long long int nzd(Razlomak::NZD(r1.nazivnik, r2.nazivnik));
<a name="5"></a><font color="#FF0000"><a href="match948-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    povratni.brojnik=r1.brojnik*(r2.nazivnik/nzd)-r2.brojnik*(r1.nazivnik/nzd);
    povratni.nazivnik=r1.nazivnik*(r2.nazivnik*nzd);
</font>    return povratni={povratni.brojnik,povratni.nazivnik};
}

Razlomak &amp;Razlomak::operator-=(const Razlomak &amp;r){
    long long int nzd(NZD(this-&gt;nazivnik,r.nazivnik));
    this-&gt;brojnik=this-&gt;brojnik*(r.nazivnik/nzd)-r.brojnik*(this-&gt;nazivnik/nzd);
    this-&gt;nazivnik*=(r.nazivnik/nzd);
    return *this={this-&gt;brojnik,this-&gt;nazivnik};
}

Razlomak operator*(const Razlomak &amp;r1, const Razlomak &amp;r2){
    Razlomak povratni;
    long long int nzd1(Razlomak::NZD(r1.brojnik, r2.nazivnik)), nzd2(Razlomak::NZD(r2.brojnik, r1.nazivnik));
    OverflowMnozenje(r1.brojnik,r2.brojnik,nzd2,nzd1);
    OverflowMnozenje(r1.nazivnik,r2.nazivnik,nzd1,nzd2);
    povratni.brojnik=(r1.brojnik/nzd1)*(r2.brojnik/nzd2);
    povratni.nazivnik=(r1.nazivnik/nzd2)*(r2.nazivnik/nzd1);
    return povratni={povratni.brojnik,povratni.nazivnik};
}


Razlomak &amp;Razlomak::operator*=(const Razlomak &amp;r){
    long long int nzd1(NZD(this-&gt;brojnik, r.nazivnik)), nzd2(NZD(r.brojnik,this-&gt;nazivnik));
    OverflowMnozenje(this-&gt;brojnik,r.brojnik,nzd2,nzd1);
    OverflowMnozenje(this-&gt;nazivnik,r.nazivnik,nzd2,nzd1);
    this-&gt;brojnik=(this-&gt;brojnik/nzd1)*(r.brojnik/nzd2);
    this-&gt;nazivnik=(this-&gt;nazivnik/nzd2)*(r.nazivnik/nzd1);
    return *this={this-&gt;brojnik,this-&gt;nazivnik};
}

Razlomak operator/(const Razlomak r1, const Razlomak r2){
    long long int nzd1(Razlomak::NZD(r1.brojnik, r2.brojnik)),nzd2(Razlomak::NZD(r1.nazivnik, r2.nazivnik));
    Razlomak povratni;
    povratni.brojnik=(r1.brojnik/nzd1)*(r2.nazivnik/nzd2);
    povratni.nazivnik=(r1.nazivnik/nzd2)*(r2.brojnik/nzd1);
    return povratni={povratni.brojnik,povratni.nazivnik};
}

Razlomak &amp;Razlomak::operator/=(const Razlomak &amp;r){
    long long int nzd1(NZD(this-&gt;brojnik, r.brojnik)), nzd2(NZD(this-&gt;nazivnik, r.nazivnik));
    this-&gt;brojnik=(this-&gt;brojnik/nzd1)*(r.nazivnik/nzd2);
    this-&gt;nazivnik=(this-&gt;nazivnik/nzd2)*(r.brojnik/nzd1);
    return *this={this-&gt;brojnik,this-&gt;nazivnik};
}


std::istream &amp;operator&gt;&gt;(std::istream &amp;unos, Razlomak &amp;r){
    char slash;
    unos&gt;&gt;std::ws;
    unos&gt;&gt;r.brojnik;
    if(unos &amp;&amp; (unos.peek()==' ' || unos.peek()=='\n')){
        r.nazivnik=1;
    }
    else{
        unos&gt;&gt;slash&gt;&gt;r.nazivnik;
        if(slash!='/' || unos.peek()!=' ' || !unos) unos.setstate(std::ios::failbit);
    }
    r={r.brojnik,r.nazivnik};
    return unos;
}

Razlomak &amp;Razlomak::operator-(){
    if(this-&gt;brojnik==granica::max()) throw std::logic_error("Nemoguce dobiti tacan rezultat");
    return *this={this-&gt;brojnik,-this-&gt;nazivnik};
}



std::ostream &amp;operator&lt;&lt;(std::ostream &amp;ispis, const Razlomak &amp;r){
    if(r.nazivnik==1)
        ispis&lt;&lt;r.brojnik;
    else if(r.brojnik==0)
        ispis&lt;&lt;r.brojnik;
    else    
        ispis&lt;&lt;r.brojnik&lt;&lt;"/"&lt;&lt;r.nazivnik;
    return ispis;
}


Razlomak &amp;Razlomak::operator++(){
    Razlomak pomocni(1,1);
    return *this+=pomocni;
}

Razlomak &amp;Razlomak::operator--(){
    Razlomak pomocni(1,1);
    return *this-=pomocni;
}

Razlomak &amp;Razlomak::operator++(int){
    Razlomak pomocna(this-&gt;brojnik, this-&gt;nazivnik);
    pomocna+={1,1};
    return *this;
}
Razlomak &amp;Razlomak::operator--(int){
    Razlomak pomocna(this-&gt;brojnik,this-&gt;nazivnik);
    pomocna-={1,1};
<a name="1"></a><font color="#00FF00"><a href="match948-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    return *this;
}


bool operator&lt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (long double)(r1.brojnik)/r1.nazivnik &lt; (long double)(r2.brojnik)/r2.nazivnik;
</font><a name="2"></a><font color="#0000FF"><a href="match948-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

}

bool operator&lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (long double)(r1.brojnik)/r1.nazivnik &lt;= (long double)(r2.brojnik)/r2.nazivnik;
</font><a name="3"></a><font color="#00FFFF"><a href="match948-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

}

bool operator&gt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (long double)(r1.brojnik)/r1.nazivnik &gt; (long double)(r2.brojnik)/r2.nazivnik;
</font><a name="4"></a><font color="#FF00FF"><a href="match948-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

}

bool operator&gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (long double)(r1.brojnik)/r1.nazivnik &gt;= (long double)(r2.brojnik)/r2.nazivnik;
</font>}

bool operator==(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (long double)(r1.brojnik)/r1.nazivnik == (long double)(r2.brojnik)/r2.nazivnik;
}

bool operator!=(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return !(r1==r2);
}
int main ()
{   try{
     Razlomak r;
     cout&lt;&lt;"Unesite razlomak: "&lt;&lt;std::endl;
     std::cin&gt;&gt;r;
     cout&lt;&lt;"Unijeli ste razlomak: "&lt;&lt;std::endl;
     cout&lt;&lt;r;
     Razlomak p{1,2}, q(1,3);
     cout&lt;&lt;"Zbir razlomaka p i q je: ";
     cout&lt;&lt;p+q;
     cout&lt;&lt;std::endl;
     cout&lt;&lt;"Nakon sto pomnozimo r i p rezultat je ";
     cout&lt;&lt;r*p;
     cout&lt;&lt;std::endl;
     cout&lt;&lt;"Podijelimo li q i r imamo: ";
     cout&lt;&lt;q/r;
     cout&lt;&lt;std::endl;
     if(p&gt;q)
        cout&lt;&lt;"Razlomak p je veci!"&lt;&lt;std::endl;
    else 
        cout&lt;&lt;"Razlomak q je veci!"&lt;&lt;std::endl;
    cout&lt;&lt;"Razlomci p i q su ocigledno ";
    if(p!=q)
        cout&lt;&lt;"razliciti"&lt;&lt;std::endl;
    else
        cout&lt;&lt;"isti?"&lt;&lt;std::endl;
    cout&lt;&lt;"Priblizne vrijednosti razlomaka su "&lt;&lt;static_cast&lt;long double&gt;(r)&lt;&lt;" "&lt;&lt;static_cast&lt;long double&gt;(p)&lt;&lt;" "&lt;&lt;static_cast&lt;long double&gt;(q)&lt;&lt;std::endl;
    cout&lt;&lt;"Pa hajmo ih na kraju i malo podijeliti...p/q=";
    cout&lt;&lt;p/q;
    cout&lt;&lt;std::endl;
    
}
    catch(std::logic_error izuzetak){
        std::cout&lt;&lt;izuzetak.what();
    }
    catch(std:: overflow_error izuzetak1){
        cout&lt;&lt;izuzetak1.what();
    }
	return 0;
}</pre>
</body>
</html>
