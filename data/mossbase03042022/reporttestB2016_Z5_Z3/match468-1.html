<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5829.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5897.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;climits&gt;
#include &lt;cmath&gt;
#define M LLONG_MAX
#define m LLONG_MIN     

class Razlomak {
    long long int brojnik, nazivnik;
    
    long long int static NZD(long long int p, long long int q) { while(q) { long long int x=q; q=p%q; p=x; } return p; }
    static void skrati(long long int &amp;brojnik, long long int &amp;nazivnik) { long long int nzd = NZD(brojnik, nazivnik); brojnik/=nzd; nazivnik/=nzd; }
    static void prekoracenje_zbrajanja(long long int x, long long int y) { if((y&gt;0 &amp;&amp; x&gt;M-y) || (y&lt;0 &amp;&amp; x&lt;m-y)) throw std::overflow_error("Nemoguce dobiti tacan rezultat"); }
    static void prekoracenje_oduzimanja(long long int x, long long int y) { if((y&gt;0 &amp;&amp; x&gt;m-y) || (y&lt;0 &amp;&amp; x&lt;M-y)) throw std::overflow_error("Nemoguce dobiti tacan rezultat"); }
    static void prekoracenje_mnozenja(long long int x, long long int y) { if((y&gt;0 &amp;&amp; (x&lt;m/y || x&gt;M/y)) || (y&lt;0 &amp;&amp; (x==m || -x&gt;M/-y || -x&lt;m/-y) )) throw std::overflow_error("Nemoguce dobiti tacan rezultat"); }
    static bool ProvjeriNaJednakost(long double a,long double b) { long double Eps = 1e-10; if(fabs(a-b) &lt;= Eps * (fabs(a)+fabs(b))) return true; return false; }

    public:
    Razlomak() {brojnik=0; nazivnik=1; }
    Razlomak(long long int brojnik) : brojnik(brojnik), nazivnik(1) {}
    Razlomak(std::initializer_list&lt;long long int&gt;  lista);
    Razlomak(long long int brojnik, long long int nazivnik);
    
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator +(Razlomak r1, const Razlomak &amp;r2);
    friend Razlomak operator -(Razlomak r1, const Razlomak &amp;r2);
    friend Razlomak operator *(Razlomak r1, const Razlomak &amp;r2);
    friend Razlomak operator /(Razlomak r1, const Razlomak &amp;r2);

    
    Razlomak operator -() const { return {-brojnik, nazivnik}; }
    Razlomak operator +() const { return {brojnik, nazivnik}; }
    friend Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="0"></a><font color="#FF0000"><a href="match468-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    friend Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator ++(Razlomak &amp;r);
    friend Razlomak operator ++(Razlomak &amp;r, int);
    friend Razlomak &amp;operator --(Razlomak &amp;r);
    friend Razlomak operator --(Razlomak &amp;r, int);
    friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2);
</font>    friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const Razlomak &amp;r);
    explicit operator long double() const { return (long double)brojnik/nazivnik; }
};

Razlomak::Razlomak(long long int brojnik, long long int nazivnik) {
        if(nazivnik&lt;0) { nazivnik*=-1; brojnik*=-1; }
        if(nazivnik==0) throw std::logic_error("Nekorektan razlomak");
        
        Razlomak::skrati(brojnik, nazivnik);
        Razlomak::brojnik=brojnik; Razlomak::nazivnik=nazivnik;
} 

Razlomak operator +(Razlomak r1, const Razlomak &amp;r2) {
    Razlomak x;
<a name="1"></a><font color="#00FF00"><a href="match468-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    x.brojnik = r1.brojnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))+r2.brojnik*(r1.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik)); x.nazivnik = r1.nazivnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik));
</font>   try{ Razlomak::prekoracenje_zbrajanja(x.brojnik, x.nazivnik); } catch(...) { throw; } 
    Razlomak::skrati(x.brojnik, x.nazivnik);
    if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }
    return x;
} 
Razlomak operator -(Razlomak r1, const Razlomak &amp;r2) {
<a name="2"></a><font color="#0000FF"><a href="match468-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Razlomak x{r1.brojnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))-r2.brojnik*(r1.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik)), r1.nazivnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))};
</font>    try{ Razlomak::prekoracenje_oduzimanja(x.brojnik, x.nazivnik); } catch(...) { throw; }
    if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }
    Razlomak::skrati(x.brojnik, x.nazivnik);
    return x;
} 
Razlomak operator *(Razlomak r1, const Razlomak &amp;r2) {
<a name="4"></a><font color="#FF00FF"><a href="match468-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    Razlomak y{(r1.brojnik/Razlomak::NZD(r1.brojnik, r2.nazivnik))*(r2.brojnik/ Razlomak::NZD(r2.brojnik, r1.nazivnik)), (r1.nazivnik/Razlomak::NZD(r2.brojnik, r1.nazivnik))*(r2.nazivnik/Razlomak::NZD(r1.brojnik, r2.nazivnik))};
</font>    try{ Razlomak::prekoracenje_mnozenja(y.brojnik, y.nazivnik); } catch(...) { throw; }
    Razlomak::skrati(y.brojnik, y.nazivnik);
        if(y.nazivnik&lt;0) { y.nazivnik*=-1; y.brojnik*=-1; }

    return y;
} 
Razlomak operator /(Razlomak r1, const Razlomak &amp;r2) {
<a name="5"></a><font color="#FF0000"><a href="match468-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    Razlomak x{(r1.brojnik/Razlomak::NZD(r1.brojnik, r2.brojnik))*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik)), (r1.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))*(r2.brojnik/Razlomak::NZD(r1.brojnik, r2.brojnik))};
    Razlomak::skrati(x.brojnik, x.nazivnik);
</font>        if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }

    return x;
}

Razlomak::Razlomak(std::initializer_list&lt;long long int&gt;  lista) {
        if(lista.size()==1) { brojnik=*lista.begin(); nazivnik=1; }
        else {
            auto iter1=lista.begin(), iter2=lista.begin()+1;
            if(*iter2==0) throw std::logic_error("Nekorektan razlomak");
            brojnik=*iter1; nazivnik=*iter2;
            Razlomak::skrati(brojnik, nazivnik);
         }
        if(nazivnik&lt;0) { nazivnik*=-1; brojnik*=-1; }
}

Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    Razlomak x;
    x.brojnik = r1.brojnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))+r2.brojnik*(r1.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik)); x.nazivnik = r1.nazivnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik));
    try{ Razlomak::prekoracenje_zbrajanja(x.brojnik, x.nazivnik); } catch(...) { throw; }
    Razlomak::skrati(x.brojnik, x.nazivnik);
    if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }

    r1=x;
    return r1;
}
Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="6"></a><font color="#00FF00"><a href="match468-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

     Razlomak y{(r1.brojnik/Razlomak::NZD(r1.brojnik, r2.nazivnik))*(r2.brojnik/ Razlomak::NZD(r2.brojnik, r1.nazivnik)), (r1.nazivnik/Razlomak::NZD(r2.brojnik, r1.nazivnik))*(r2.nazivnik/Razlomak::NZD(r1.brojnik, r2.nazivnik))};
    try{ Razlomak::prekoracenje_mnozenja(y.brojnik, y.nazivnik); } catch(...) { throw; }
</font>    Razlomak::skrati(y.brojnik, y.nazivnik);
        if(y.nazivnik&lt;0) { y.nazivnik*=-1; y.brojnik*=-1; }

    r1=y;
    return r1;
}
Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="3"></a><font color="#00FFFF"><a href="match468-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

     Razlomak x{r1.brojnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))-r2.brojnik*(r1.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik)), r1.nazivnik*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))};
</font>    try{ Razlomak::prekoracenje_oduzimanja(x.brojnik, x.nazivnik); } catch(...) { throw; }
    if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }
    Razlomak::skrati(x.brojnik, x.nazivnik);
        if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }

    r1=x;
    return r1;
}
Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2) {
        Razlomak x{r1.brojnik/Razlomak::NZD(r1.brojnik, r2.brojnik)*(r2.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik)), (r1.nazivnik/Razlomak::NZD(r1.nazivnik, r2.nazivnik))};
    Razlomak::skrati(x.brojnik, x.nazivnik);
        if(x.nazivnik&lt;0) { x.nazivnik*=-1; x.brojnik*=-1; }

    r1=x;
    return r1;
}

Razlomak &amp;operator ++(Razlomak &amp;r) {
    r.brojnik+=1; 
    try{ Razlomak::prekoracenje_zbrajanja(r.brojnik, r.nazivnik); } catch(...) { throw; }
    Razlomak::skrati(r.brojnik, r.nazivnik);
    return r;
}
Razlomak &amp;operator --(Razlomak &amp;r) {
    r.brojnik-=1;
    try{ Razlomak::prekoracenje_oduzimanja(r.brojnik, r.nazivnik); } catch(...) { throw; }
    Razlomak::skrati(r.brojnik, r.nazivnik);
    return r;
}

Razlomak operator ++(Razlomak &amp;r, int) {
    Razlomak pom(r); ++r; return pom;
}
Razlomak operator --(Razlomak &amp;r, int) {
    Razlomak pom(r); --r; return pom;
}

bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double x = (long double)r1.brojnik/r2.brojnik, y = (long double)r1.nazivnik/r2.nazivnik;
    if(Razlomak::ProvjeriNaJednakost(x,y)) return true;
    return false;
}
bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double x = (long double)r1.brojnik/r2.brojnik, y = (long double)r1.nazivnik/r2.nazivnik;
    if(!Razlomak::ProvjeriNaJednakost(x,y)) return true;
    return false;
}
    
bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    return (long double) r1.brojnik/r1.nazivnik&lt;(long double)r2.brojnik/r2.nazivnik;
}
bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    return (long double)r1.brojnik/r1.nazivnik&gt;(long double)r2.brojnik/r2.nazivnik;
}

bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double x = (long double)r1.brojnik/r1.nazivnik, y = (long double)r1.nazivnik/r2.nazivnik;
    if(x&lt;y || Razlomak::ProvjeriNaJednakost(x,y)) return true;
    return false;
}
bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double x = (long double)r1.brojnik/r1.nazivnik, y = (long double)r1.nazivnik/r2.nazivnik;
    if(x&gt;y || Razlomak::ProvjeriNaJednakost(x,y)) return true;
    return false;
}
  

std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok,const Razlomak &amp;r) {
    if(r.nazivnik==1) { tok &lt;&lt; r.brojnik; return tok; }
    tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik;
    return tok;
}
std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, Razlomak &amp;r) {
    char znak;
    
    tok &gt;&gt; std::ws;
    tok &gt;&gt; r.brojnik;
    if(tok.peek()!='/') { r.nazivnik=1; return tok; }
    tok &gt;&gt; znak;
   // if(znak!='/') tok.setstate(std::ios::failbit);
<a name="7"></a><font color="#0000FF"><a href="match468-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    tok &gt;&gt; r.nazivnik; 
    if(tok.peek()!=' ' &amp;&amp; tok.peek()!='\n' &amp;&amp; tok.peek()!='\t' &amp;&amp; tok.peek()!='\v' &amp;&amp; tok.peek()!='\f') tok.setstate(std::ios::failbit);
</font>    long long int nzd = Razlomak::NZD(r.brojnik, r.nazivnik);
    r.brojnik/=nzd; r.nazivnik/=nzd;
    return tok;
}

int main () {
    Razlomak a{21,37}, b, c(23);
    std::cin &gt;&gt; b;
    std::cout &lt;&lt; "razlomak b je jednak: " &lt;&lt; b &lt;&lt; std::endl;
    a=a+b; std::cout &lt;&lt; a &lt;&lt; std::endl;
    c=c-b; std::cout &lt;&lt; c &lt;&lt; std::endl;
    b=c*a; std::cout &lt;&lt; b &lt;&lt; std::endl;
    a=c/b; std::cout &lt;&lt; a &lt;&lt; std::endl;
    b+=c; std::cout &lt;&lt; b &lt;&lt; std::endl;
    c-=a; std::cout &lt;&lt; c &lt;&lt; std::endl;
    a*=b; std::cout &lt;&lt; a &lt;&lt; std::endl;
    b/=a; std::cout &lt;&lt; b &lt;&lt; std::endl;
    if(a&gt;b) std::cout &lt;&lt; "vece je a" &lt;&lt; std::endl;
    if(a&lt;b) std::cout &lt;&lt; "manje  je a" &lt;&lt; std::endl;
    if(a==c) std::cout &lt;&lt; "isti su" &lt;&lt; std::endl;
    if(b!=c) std::cout &lt;&lt; "razliciti su" &lt;&lt; std::endl;
    std::cout &lt;&lt; -b &lt;&lt; std::endl;
    std::cout &lt;&lt; "Pretvorba " &lt;&lt; static_cast&lt;long double&gt;(a);
  //std::cin &gt;&gt; a &gt;&gt; b;
  
  	return 0;
} 







</pre>
</body>
</html>
