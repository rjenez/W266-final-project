<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3671.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3671.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;

class Razlomak {
  long long int brojnik, nazivnik;
  static int NZD(long long int a, long long int b){
      
        while(a!=b){
            if(a &gt; b)
                a -= b;
            else b -= a;
        }
      return a;
  }
  public:
  
  Razlomak(){
      brojnik = 0;
  };
  Razlomak(const Razlomak &amp;r){ brojnik = r.brojnik; nazivnik = r.nazivnik; };
  Razlomak(long long int b, long long int n = 1){
      if(n==0) throw std::logic_error ("Nekorektan razlomak");
      
      int temp = 0;
      if((n &lt; 0 &amp;&amp; b &gt; 0) || (b &lt; 0 &amp;&amp; n &gt; 0)) 
        temp = 1;
        b = abs(b);
        n = abs(n);
      
      int a = NZD(b,n);
      b /= a;
      n /= a;
      if(temp == 1)
            b *= -1;
      brojnik = b;
      nazivnik = n;
  }
    long long int DajBrojnik() const {
       return brojnik;
   } 
    long long int DajNazivnik() const {
        return nazivnik;
    }
    
    friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2){
<a name="4"></a><font color="#FF00FF"><a href="match541-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

        int n = NZD(r1.nazivnik,r2.nazivnik);
        long long int m = r1.brojnik*(r2.nazivnik/n) + r2.brojnik*(r1.nazivnik/n);
        long long int c;
</font>        c = r1.nazivnik*(r2.nazivnik/n);
        return Razlomak(m,c);
    }
    
    friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2){
        int s = NZD(r1.brojnik,r2.nazivnik);
<a name="1"></a><font color="#00FF00"><a href="match541-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        int t = NZD(r2.brojnik,r1.nazivnik);
        long long int m = (r1.brojnik/s)*(r2.brojnik/t);
        long long int c = (r1.nazivnik/t)*(r2.nazivnik/s);
        return Razlomak(m,c);
    }
    friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2){
</font><a name="3"></a><font color="#00FFFF"><a href="match541-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

        int n = NZD(r1.nazivnik,r2.nazivnik);
        long long int m = r1.brojnik*(r2.nazivnik/n) - r2.brojnik*(r1.nazivnik/n);
        long long int c = r1.nazivnik*(r2.nazivnik/n);
</font>        return Razlomak(m,c);
    }
    friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2){
        int u = NZD(r1.brojnik,r2.brojnik);
<a name="2"></a><font color="#0000FF"><a href="match541-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

        int s = NZD(r1.nazivnik,r2.nazivnik);
        long long int m = (r1.brojnik/u)*(r2.nazivnik/s);
        long long int c = (r1.nazivnik/s)*(r2.brojnik/u);
        return Razlomak(m,c);
    }
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;cout, const Razlomak &amp;r){
</font>        if(r.brojnik == 0)
            std::cout&lt;&lt;r.DajBrojnik();
        else if(r.DajNazivnik()!=1)
            std::cout&lt;&lt;r.DajBrojnik()&lt;&lt;"/"&lt;&lt;r.DajNazivnik();
        else if(r.DajNazivnik()==1)
            std::cout&lt;&lt;r.DajBrojnik();
        return cout;
    }
    Razlomak &amp;operator +=(const Razlomak &amp;r){
        return *this=*this+r;
    }
    Razlomak &amp;operator -=(const Razlomak &amp;r){
        return *this=*this-r;
    }
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r){
            char znak1;
            long long int a, b, c;
            tok &gt;&gt; std::ws;
            if (tok.peek() &lt; '0' || tok.peek() &gt; '9') {
                tok.setstate(std::ios::failbit);
                return tok;
            }
            
            tok &gt;&gt; a;
            
            if(tok.peek()!='/'){
                c = 1;
                r = Razlomak(a,c);
            }
            
            else{
                tok &gt;&gt; znak1;
                if(znak1!='/') {
                    tok.setstate(std::ios::failbit);
                    return tok;
                }
                tok &gt;&gt; b;
                if((tok.peek() &gt;= 'a' &amp;&amp; tok.peek() &lt;= 'z') || (tok.peek() &gt;= 'Z' &amp;&amp; tok.peek() &lt;= 'Z')) { 
                    tok.setstate(std::ios::failbit);
                    return tok;
                }
                r = Razlomak(a,b);
            }
            
            return tok;
    }
    explicit operator long double () const {
        double a, b;
        a = double(brojnik);
        b = double(nazivnik);
<a name="0"></a><font color="#FF0000"><a href="match541-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

        double suma=a/b;
        return suma;
    } 
    
};

int main ()
{
        Razlomak r, p, q;
        std::cin &gt;&gt; r; //5/17
        std::cout &lt;&lt; r &lt;&lt; std::endl;
        std::cin.clear(); std::cin.ignore (100, '\n');
        //tri zaredom
        std::cin &gt;&gt; r &gt;&gt; p &gt;&gt; q; //10 20 30 -&gt; 10/1 20/1 30/1
        std::cout &lt;&lt; r &lt;&lt; " " &lt;&lt; p &lt;&lt; " " &lt;&lt; q&lt;&lt; std::endl;
    
       
	return 0;
</font>}</pre>
</body>
</html>
