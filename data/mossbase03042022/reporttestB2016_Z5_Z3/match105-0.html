<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5562.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5562.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match105-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_10.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

class Razlomak
{
    long long int brojnik, nazivnik;
    static long long int NZD(long long int p, long long int q);
    static void ImaLiPrekoracenja(long long int x, long long int y, char operacija);
    static void IgnoreSpace(std::istream &amp;tok){while (JeLiBjelina(tok)) tok.get();}
    static bool JeLiBjelina(std::istream &amp;tok){
        char z(tok.peek());
        if (z == EOF || z == '\r' || z == ' ' || z == '\f' || z == '\v' || z == '\t')
            return true;
        return false;
    }
public:
    Razlomak(long long int brojnik = 0, long long int nazivnik = 1);
    long long int DajBrojnik()const { return brojnik;}
    long long int DajNazivnik()const { return nazivnik;}
    friend Razlomak operator+(const Razlomak &amp;a, const Razlomak &amp;b);
</font>    friend Razlomak operator-(const Razlomak &amp;a, const Razlomak &amp;b);
<a name="0"></a><font color="#FF0000"><a href="match105-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_86.gif"/></a>

    friend Razlomak operator*(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator/(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator+(const Razlomak &amp;r){Razlomak r2(r); return r2;};
    friend Razlomak operator-(const Razlomak &amp;r);
    Razlomak &amp;operator+=(const Razlomak &amp;a){*this = *this + a; return *this;}
    Razlomak &amp;operator-=(const Razlomak &amp;a){*this = *this - a; return *this;}
    Razlomak &amp;operator*=(const Razlomak &amp;a){*this = *this * a; return *this;}
    Razlomak &amp;operator/=(const Razlomak &amp;a){*this = *this / a; return *this;}
    Razlomak &amp;operator++(){*this += 1; return *this;}
    Razlomak operator++(int){Razlomak r(*this); *this += 1; return r;}
    Razlomak &amp;operator--(){*this -= 1; return *this;}
    Razlomak operator--(int){Razlomak r(*this); *this -= 1; return r;}
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    friend bool operator==(const Razlomak &amp;r1, const Razlomak &amp;r2){return static_cast&lt;long double&gt; (r1.brojnik)/r1.nazivnik == static_cast&lt;long double&gt;(r2.brojnik)/r2.nazivnik;};
    friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2){return static_cast&lt;long double&gt; (r1.brojnik)/r1.nazivnik &gt; static_cast&lt;long double&gt;(r2.brojnik)/r2.nazivnik;};
    inline friend bool operator!=(const Razlomak &amp;r1, const Razlomak &amp;r2){return !(r1 == r2);}
    inline friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak&amp;r2){return r1 &gt; r2 || r1 == r2;}
    inline friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2){return !(r1 &gt;= r2);}
    inline friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){return r1 &lt; r2 || r1 == r2;}
    operator long double()const{return static_cast&lt;long double&gt;(brojnik)/nazivnik;}
};
long long int Razlomak::NZD(long long int p, long long int q)
{
    if (q != 0)
        return NZD(q, p%q);
    return p;
}
void Razlomak::ImaLiPrekoracenja(long long int x, long long int y, char operacija)
{
    long long int M(std::numeric_limits&lt;long long int&gt;::max()), m(std::numeric_limits&lt;long long int&gt;::lowest());
    bool prekoracenje(false);
    if (operacija == '+' &amp;&amp; ((y &gt; 0 &amp;&amp; x &gt; M - y) || (y &lt; 0 &amp;&amp; x &lt; m - y))) prekoracenje = true;
    else if (operacija == '-' &amp;&amp; ((y &lt; 0 &amp;&amp; x &gt; M + y) || (y &gt; 0 &amp;&amp; x &lt; m + y))) prekoracenje = true;
    else if (operacija == '*' &amp;&amp; ((y &gt; 0 &amp;&amp; x &lt; m/y) || (y &lt; 0 &amp;&amp; (x == m || -x &gt; M/(-y) || -x &lt; m/(-y))))) prekoracenje = true;
    if (prekoracenje)
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
}
Razlomak::Razlomak(long long int brojnik, long long int nazivnik)
{
    if (nazivnik == 0)
        throw std::logic_error("Nekorektan razlomak");
    long long int nzd(NZD(brojnik, nazivnik));
    brojnik /= nzd; nazivnik /= nzd;
    if (nazivnik &lt; 0)
    {
        brojnik = -brojnik;
        nazivnik = -nazivnik;
    }
    Razlomak::brojnik = brojnik; Razlomak::nazivnik = nazivnik;
}
Razlomak operator+(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long long int p1(a.brojnik), q1(a.nazivnik), p2(b.brojnik), q2(b.nazivnik), r(Razlomak::NZD(q1, q2));
    Razlomak::ImaLiPrekoracenja(p1, q2/r, '*');
    Razlomak::ImaLiPrekoracenja(p2, q1/r, '*');
    Razlomak::ImaLiPrekoracenja(p1*(q2/r), p2*(q1/r), '+');
    Razlomak::ImaLiPrekoracenja(q1, q2/r, '*');
    return Razlomak(p1*(q2/r) + p2*(q1/r), q1*(q2/r));
}
Razlomak operator-(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long long int p1(a.brojnik), q1(a.nazivnik), p2(b.brojnik), q2(b.nazivnik), r(Razlomak::NZD(q1, q2));
    Razlomak::ImaLiPrekoracenja(p1, q2/r, '*');
    Razlomak::ImaLiPrekoracenja(p2, q1/r, '*');
    Razlomak::ImaLiPrekoracenja(p1*(q2/r), p2*(q1/r), '-');
    Razlomak::ImaLiPrekoracenja(q1, q2/r, '*');
    return Razlomak(p1*(q2/r) - p2*(q1/r), q1*(q2/r));
}
Razlomak operator*(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long long int p1(a.brojnik), q1(a.nazivnik), p2(b.brojnik), q2(b.nazivnik), s(Razlomak::NZD(p1, q2)), t(Razlomak::NZD(p2, q1));
    Razlomak::ImaLiPrekoracenja(p1/s, p2/t, '*');
    Razlomak::ImaLiPrekoracenja(q1/t, q2/s, '*');
    return Razlomak((p1/s)*(p2/t), (q1/t)*(q2/s));
}
Razlomak operator/(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long long int p1(a.brojnik), q1(a.nazivnik), p2(b.brojnik), q2(b.nazivnik), r(Razlomak::NZD(q1, q2)), u(Razlomak::NZD(p1,p2));
    return Razlomak((p1/u)*(q2/r), (q1/r)*(p2/u));
}
Razlomak operator-(const Razlomak &amp;r)
{
    Razlomak::ImaLiPrekoracenja(0, -r.brojnik, '+');
    Razlomak r2(r);
    r2.brojnik = -r.brojnik;
    return r2;
}
std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok, const Razlomak &amp;r)
{
    if (r.nazivnik != 1) tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik;
    else tok &lt;&lt; r.brojnik;
    return tok;
}
std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, Razlomak &amp;r)
{
    long long int brojnik(1), nazivnik(1);
    Razlomak::IgnoreSpace(tok);
    char z(tok.peek());
    bool greska(false);
    if (!(z &gt;= '0' &amp;&amp; z &lt;= '9')) greska = true;
    else{ tok &gt;&gt; brojnik;}
    if (tok.peek()!= '/' &amp;&amp; !Razlomak::JeLiBjelina(tok) &amp;&amp; tok.peek() != '\n') greska = true;
    else if (tok.peek() != '\n' &amp;&amp; tok.peek() == '/')
    {
        tok.get();
        z = tok.peek();
        if (!(z &gt;= '0' &amp;&amp; z &lt;= '9')) greska = true;
        tok &gt;&gt; nazivnik;
        if (!Razlomak::JeLiBjelina(tok) &amp;&amp; tok.peek() != '\n') greska = true;
    }
    if (greska) tok.setstate(std::ios::failbit);
    else {r = Razlomak(brojnik, nazivnik);}
    return tok;
}

int main ()
{
    Razlomak r;
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; r.DajBrojnik() &lt;&lt; " " &lt;&lt; r.DajNazivnik() &lt;&lt; std::endl;
</font>	return 0;
}</pre>
</body>
</html>
