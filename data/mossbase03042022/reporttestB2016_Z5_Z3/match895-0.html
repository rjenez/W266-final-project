<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4163.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4163.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

class Razlomak {
 
    long long int brojnik, nazivnik;
    
    static long long int NZD(long long int a, long long int b) {
        if(b==0) return a;
        a=a%b;
        return NZD(b,a);
    }
    static bool Prekoracenje(long long int x, long long int y, char operacija) {
        long long int m(std::numeric_limits&lt;long long int&gt;::min()), M(std::numeric_limits&lt;long long int&gt;::max());
        if(operacija=='+') {
            if(y&gt;0) {
                if(x&gt;M-y) return true;
            }
            else if(x&lt;m-y) return true;
        }
        else if(operacija=='-') {
          if(y&lt;0) {
                if(x&gt;M-y) return true;
            }
            else if(x&lt;m-y) return true;  
        }
        else if(operacija=='*') {
            if(y&gt;0) {
                if(x&lt;m/y) return true;
            else if(x==m) return true;
            }
        }
        return false;
    }
    
    public:
    
    Razlomak(long long int b, long long int n);
    Razlomak(long long int b) { brojnik=b; nazivnik=1; }
<a name="4"></a><font color="#FF00FF"><a href="match895-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Razlomak() { brojnik=0; nazivnik=1; }
    
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    
    friend Razlomak operator+(const Razlomak &amp;a, const Razlomak &amp;b);
</font>    friend Razlomak operator-(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator*(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator/(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator +(const Razlomak &amp;a) { return a; }
    friend Razlomak operator-(const Razlomak &amp;a) {
        //Uz pretpostavnu da nazivnik nikad nece biti &lt;0 jer konstruktor to ne dozvoljava
        if((a.brojnik&lt;0 &amp;&amp; a.brojnik==std::numeric_limits&lt;long long int&gt;::min())) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
        return Razlomak(-a.brojnik, -a.nazivnik);
    }
    //Znam da je neefikasno i treba svugdje try catch blok
    friend Razlomak &amp;operator+=(Razlomak &amp;a, const Razlomak &amp;b) { return a=a+b; }
    friend Razlomak &amp;operator-=(Razlomak &amp;a, const Razlomak &amp;b) { return a=a-b; }
    friend Razlomak &amp;operator*=(Razlomak &amp;a, const Razlomak &amp;b) { return a=a*b; }
    friend Razlomak &amp;operator/=(Razlomak &amp;a, const Razlomak &amp;b) { return a=a/b; }
    friend Razlomak &amp;operator++(Razlomak &amp;a) { a-=1; return a; }
    friend Razlomak  operator++(Razlomak &amp;a, int) { Razlomak pom(a); a-=1; return pom; }
    friend Razlomak &amp;operator--(Razlomak &amp;a) { a-=1; return a; }
    friend Razlomak  operator--(Razlomak &amp;a, int) { Razlomak pom(a); a-=1; return pom; }
    friend bool operator==(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator!=(const Razlomak &amp;a, const Razlomak &amp;b) { return !(a==b); }
    friend bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator&lt;=(const Razlomak &amp;a, const Razlomak &amp;b) { if(a&lt;b || a==b) return true; return false; }
    friend bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b) { return !(a&lt;b); }
    friend bool operator&gt;=(const Razlomak &amp;a, const Razlomak &amp;b) { if(!(a&lt;b) || a==b) return true; return false; }
    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;a);
    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;a);
    
    operator long double() const {
        long double b(DajBrojnik()), n(DajNazivnik());
        return b/n;
    }
    
};

Razlomak::Razlomak(long long int b, long long int n) {
    if(n==0) throw std::logic_error ("Nekorektan razlomak");
    long long int nzd(NZD(n,b));
    n/=nzd; b/=nzd;
    if((n&lt;0 &amp;&amp; b&lt;0) || (n&lt;0 &amp;&amp; b&gt;0)) {
        if((b&lt;0 &amp;&amp; n&lt;0 &amp;&amp; b==std::numeric_limits&lt;long long int&gt;::min()) || (n&lt;0 &amp;&amp; n==std::numeric_limits&lt;long long int&gt;::min()))
            throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
        nazivnik=-n; brojnik=-b;
    }
    else {
        nazivnik=n; brojnik=b;
    }
}

std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;a) {
    if(a.nazivnik==1) tok&lt;&lt;a.brojnik;
    else tok&lt;&lt;a.brojnik&lt;&lt;"/"&lt;&lt;a.nazivnik;
    return tok;
}
std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;a) {
    char znak;
    long long int b,n;
    tok&gt;&gt;std::ws;
    tok&gt;&gt;b;
    if(std::cin.peek()!='/') { a.brojnik=b; a.nazivnik=1; }
    else {
        tok&gt;&gt;znak&gt;&gt;n;
        a.brojnik=b; a.nazivnik=n;
        if(znak!='/' ) tok.setstate(std::ios::failbit);
    }
    return tok;
}

Razlomak operator+(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int n,br, r(Razlomak::NZD(a.nazivnik, b.nazivnik));
    if(Razlomak::Prekoracenje(a.brojnik,b.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(b.brojnik,a.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(a.brojnik*(b.nazivnik/r),b.brojnik*(a.nazivnik/r),'+')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(a.nazivnik,b.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="1"></a><font color="#00FF00"><a href="match895-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    br=a.brojnik*(b.nazivnik/r)+b.brojnik*(a.nazivnik/r);
    n=a.nazivnik*(b.nazivnik/r);
    return Razlomak(br,n);
}
Razlomak operator-(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int n,br, r(Razlomak::NZD(a.nazivnik, b.nazivnik));
</font>    if(Razlomak::Prekoracenje(a.brojnik,b.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(b.brojnik,a.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(a.brojnik*(b.nazivnik/r),b.brojnik*(a.nazivnik/r),'+')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(a.nazivnik,b.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="0"></a><font color="#FF0000"><a href="match895-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    br=a.brojnik*(b.nazivnik/r)-b.brojnik*(a.nazivnik/r);
    n=a.nazivnik*(b.nazivnik/r);
    return Razlomak(br,n);
}
Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int n, br, s(Razlomak::NZD(a.brojnik, b.nazivnik)), t(Razlomak::NZD(a.nazivnik, b.brojnik));
</font>    if(Razlomak::Prekoracenje(a.brojnik/s,b.brojnik/t,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(a.nazivnik/t,b.nazivnik/s,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="2"></a><font color="#0000FF"><a href="match895-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    br=(a.brojnik/s)*(b.brojnik/t);
    n=(a.nazivnik/t)*(b.nazivnik/s);
    return Razlomak(br,n);
}
Razlomak operator/(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int n,br, u(Razlomak::NZD(a.brojnik, b.brojnik)), r(Razlomak::NZD(a.nazivnik, b.nazivnik));
</font>    if(Razlomak::Prekoracenje(a.brojnik/u,b.nazivnik/r,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if(Razlomak::Prekoracenje(a.nazivnik/r,b.brojnik/u,'*')) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="3"></a><font color="#00FFFF"><a href="match895-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    br=(a.brojnik/u)*(b.nazivnik/r);
    n=(a.nazivnik/r)*(b.brojnik/u);
    return Razlomak(br,n);
</font>}

bool operator==(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double prvi(a.brojnik/a.nazivnik), drugi(b.brojnik/b.nazivnik);
    if(prvi==drugi) return true;
    return false;
}
bool operator&lt;(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double prvi(a.brojnik/a.nazivnik), drugi(b.brojnik/b.nazivnik);
    if(prvi&lt;drugi) return true;
    return false;
}

int main () {

	return 0;
}</pre>
</body>
</html>
