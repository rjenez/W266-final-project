<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2157.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4419.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;math.h&gt;
class Razlomak{
  long long int brojnik;
  long long int nazivnik;
  
public:
    Razlomak(long long int br = 0, long long na = 1);
    Razlomak(const Razlomak &amp;raz);
    Razlomak &amp;operator =(const Razlomak &amp;raz);
    Razlomak &amp;operator =(Razlomak &amp;&amp;raz);
    long long int DajBrojnik() { return brojnik; }
    long long int DajNazivnik() { return nazivnik; }
    friend Razlomak operator +(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak operator -(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak operator *(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
<a name="0"></a><font color="#FF0000"><a href="match856-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    friend Razlomak operator /(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak &amp;operator +=(Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak &amp;operator -=(Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak &amp;operator *=(Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak &amp;operator /=(Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend Razlomak &amp;operator ++(Razlomak &amp;raz);
    friend Razlomak operator ++(Razlomak &amp;raz, int);
    friend Razlomak &amp;operator --(Razlomak &amp;raz);
    friend Razlomak operator --(Razlomak &amp;raz, int);
    friend bool operator ==(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
</font>    friend bool operator !=(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend bool operator &gt;(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend bool operator &lt;(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend bool operator &gt;=(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend bool operator &lt;=(const Razlomak &amp;raz1, const Razlomak &amp;raz2);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;stream, const Razlomak &amp;raz);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;stream, const Razlomak &amp;raz);
    operator long double() const { return brojnik / (long double) nazivnik; }
    
private:
    static long long int IzracunajNajmanjiZajednicki(long long int x, long long int y){
        long long int c;
        if( x &lt; y ){
            
            long long int p = y;
            long long int q = x;
            while( x != 0){
                p = y;
                q = x;
                y = q;
                x = p%q;
            }
            c=y;
        }
        else {
            long long int p = x;
            long long int q = y;
            while(y != 0){
                p = x;
                q = y;
                x = q;
                y = p%q;
                
            }
            c=x;
        }
        return c;
    }
    void skracivanjeRazlomka(){
        long long int najmanji_zajednicki = IzracunajNajmanjiZajednicki(brojnik, nazivnik); //std::cout &lt;&lt; najmanji_zajednicki;
        brojnik = brojnik/najmanji_zajednicki;
        nazivnik = nazivnik/najmanji_zajednicki;
    }
    
    static void ProvjeraPrekoracenjaZaSabiranje(long long int x, long long int y){
        long long int mini = std::numeric_limits&lt;long long int&gt;::min();
        long long int Maxi = std::numeric_limits&lt;long long int&gt;::max();
        
        if( y &gt; 0 ){
            if( x &gt; Maxi - y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        }
        else if ( y &lt; 0 )
            if( x &lt; mini - y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
            
    }
    
    static void ProvjeraPrekoracenjaZaOduzimanje(long long int x, long long int y){
        long long int mini = std::numeric_limits&lt;long long int&gt;::min();
        long long int Maxi = std::numeric_limits&lt;long long int&gt;::max();
        
        y=-y;
        if( y &gt; 0 ){
            if( x &gt; Maxi - y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        }
        else if ( y &lt; 0 )
            if( x &lt; mini - y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    
    static void ProvjeraPrekoracenjaZaMnozenje(long long int x, long long int y){
        long long int mini = std::numeric_limits&lt;long long int&gt;::min();
        long long int Maxi = std::numeric_limits&lt;long long int&gt;::max();
        
        if( y &gt; 0 ){
            if( x &lt; mini/y || x &gt; Maxi/y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        }
        
        else if ( y &lt; 0 )
            if( x == mini || -x &gt; Maxi / (-y) ) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    
};

Razlomak::Razlomak(long long int br, long long na ){
    if(na == 0) throw std::logic_error("Nekorektan razlomak");
    if(na&lt; 0) {
        na = -na;
        br = -br;
    }
    nazivnik = na;
    brojnik = br;
    skracivanjeRazlomka();
}

Razlomak::Razlomak(const Razlomak &amp;raz){
    brojnik = raz.brojnik;
    nazivnik = raz.nazivnik;
}

Razlomak  &amp;Razlomak::operator =(const Razlomak &amp;raz) {
    brojnik = raz.brojnik;
    nazivnik = raz.nazivnik;
    return *this;
}

Razlomak &amp;Razlomak::operator =(Razlomak &amp;&amp;raz){
    brojnik = raz.brojnik;
    nazivnik = raz.nazivnik;
    return *this;
}

<a name="1"></a><font color="#00FF00"><a href="match856-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;stream, const Razlomak &amp;raz){
    if(raz.nazivnik == 1) 
        stream &lt;&lt; raz.brojnik;
        
    else 
        stream &lt;&lt; raz.brojnik &lt;&lt; "/" &lt;&lt; raz.nazivnik;
    return stream;
    
}

std::istream &amp;operator &gt;&gt;(std::istream &amp;stream,  Razlomak &amp;raz){
    long long int br, na;
</font>    //std::cout &lt;&lt; "Usao";
    
    stream &gt;&gt; std::ws;
    
    stream &gt;&gt; br;
<a name="3"></a><font color="#00FFFF"><a href="match856-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    char c = stream.peek();
    if(c == '\n' || c == '\r' || c == '\t' || c == '\v' || c == '\f' || c == ' ' || c == EOF) {
</font>        na = 1;
        
    }
    else if( c == '/') {
        stream.get();
        
        stream &gt;&gt; na;
        c = stream.peek();
        if(!(c == '\n' || c == '\r' || c == '\t' || c == '\v' || c == '\f' || c == ' ' || c == EOF)) {
            stream.setstate(std::ios::failbit);
            return stream;
            
        }
        
    }
    else {
        stream.setstate(std::ios::failbit);
            return stream;
    }
    Razlomak novi(br, na);
    raz = novi;
    return stream;
}

Razlomak &amp;operator +=(Razlomak &amp;raz1, const Razlomak &amp;raz2){
    //prema formulama iz zadace
    long long int r = Razlomak::IzracunajNajmanjiZajednicki(raz1.nazivnik, raz2.nazivnik);
    
    //Moramo provjeriti prvo da li ce doci do prekoracenja kada pomnozimo brojnike sa r/odgovarajuci nazivnik
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.brojnik, raz2.nazivnik/r);
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz2.brojnik, raz1.nazivnik/r);
    
    //Moramo provjeriti da li ce u novom nazivniku doci do prekoracenja - sto je opet mnozenje dva broja
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.nazivnik/r, raz2.nazivnik);
    
    //Moramo provjeriti na kraju da li ce kada saberemo dva brojnika doci do prekoracenja
    Razlomak::ProvjeraPrekoracenjaZaSabiranje(raz1.brojnik*(raz2.nazivnik/r), raz2.brojnik*(raz1.nazivnik/r));
    
    raz1.brojnik =raz1.brojnik*(raz2.nazivnik/r) + raz2.brojnik*(raz1.nazivnik/r);
    raz1.nazivnik = (raz1.nazivnik/r)*raz2.nazivnik;
    raz1.skracivanjeRazlomka();
    return raz1;

}
Razlomak &amp;operator -=(Razlomak &amp;raz1, const Razlomak &amp;raz2){
    long long int r = Razlomak::IzracunajNajmanjiZajednicki(raz1.nazivnik, raz2.nazivnik);
    
    //Moramo provjeriti prvo da li ce doci do prekoracenja kada pomnozimo brojnike sa r/odgovarajuci nazivnik
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.brojnik, raz2.nazivnik/r);
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz2.brojnik, raz1.nazivnik/r);
    
    //Moramo provjeriti da li ce u novom nazivniku doci do prekoracenja - sto je opet mnozenje dva broja
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.nazivnik/r, raz2.nazivnik);
    
    //Moramo provjeriti na kraju da li ce kada saberemo dva brojnika doci do prekoracenja
<a name="2"></a><font color="#0000FF"><a href="match856-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Razlomak::ProvjeraPrekoracenjaZaOduzimanje(raz1.brojnik*(raz2.nazivnik/r), raz2.brojnik*(raz1.nazivnik/r));
    
    raz1.brojnik =raz1.brojnik*(raz2.nazivnik/r) - raz2.brojnik*(raz1.nazivnik/r);
</font>    raz1.nazivnik = (raz1.nazivnik/r)*raz2.nazivnik;
    raz1.skracivanjeRazlomka();
    return raz1;
}

Razlomak &amp;operator *=(Razlomak &amp;raz1, const Razlomak &amp;raz2){
    //formule iz zadace
    long long int s = Razlomak::IzracunajNajmanjiZajednicki(raz1.brojnik, raz2.nazivnik);
    long long int t = Razlomak::IzracunajNajmanjiZajednicki(raz1.nazivnik, raz2.brojnik);
    
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.brojnik/s, raz2.brojnik/t);
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.nazivnik/t, raz2.nazivnik/s);
    
    raz1.brojnik = (raz1.brojnik/s )*(raz2.brojnik/t);
    raz1.nazivnik =(raz1.nazivnik/t)*( raz2.nazivnik/s);
    raz1.skracivanjeRazlomka();
    return raz1;
}

Razlomak &amp;operator /=(Razlomak &amp;raz1, const Razlomak &amp;raz2){
    
    //formule iz zadace
long long int r = Razlomak::IzracunajNajmanjiZajednicki(raz1.nazivnik, raz2.nazivnik);
long long int u = Razlomak::IzracunajNajmanjiZajednicki(raz1.brojnik, raz2.brojnik);
    
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.brojnik/u, raz2.nazivnik/r);
    Razlomak::ProvjeraPrekoracenjaZaMnozenje(raz1.nazivnik/r, raz2.brojnik/u);
    
    raz1.brojnik = (raz1.brojnik/u )*(raz2.nazivnik/r);
    raz1.nazivnik =(raz1.nazivnik/r)*( raz2.brojnik/u);
    raz1.skracivanjeRazlomka();
    
    return raz1;
}

Razlomak &amp;operator ++(Razlomak &amp;raz){
    Razlomak pomocni (1);
    return raz+=pomocni;
    
}

Razlomak operator ++(Razlomak &amp;raz, int){
    Razlomak pomocni(raz);
    Razlomak pomocni2 (1);
    raz+=pomocni2;
    return pomocni;
    
}

Razlomak &amp;operator --(Razlomak &amp;raz){
    Razlomak pomocni (-1);
    return raz+=pomocni;
}

Razlomak operator --(Razlomak &amp;raz, int){
     Razlomak pomocni(raz);
    Razlomak pomocni2 (-1);
    raz+=pomocni2;
    return pomocni;
}

bool operator ==(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    long double prvi(static_cast&lt;long double&gt;(raz1)), drugi(static_cast&lt;long double&gt;(raz2));
    if(fabs(prvi -drugi) &lt; 0.000001) return true;
    return false;
}
bool operator !=(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    if(raz1 == raz2) return false;
    return true;
}

bool operator &gt;(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    long double prvi(static_cast&lt;long double&gt;(raz1)), drugi(static_cast&lt;long double&gt;(raz2));
    if(prvi - drugi &gt; 0.0000001) return true;
    return false;
}

bool operator &lt;(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    if(raz1 &gt; raz2) return false;
    return true;
}
bool operator &gt;=(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    if(raz1 &gt; raz2 || raz1 == raz2) return true;
    return false;
}
bool operator &lt;=(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    if(raz1 &lt; raz2 || raz1 == raz2) return true;
    return false;
}
Razlomak operator +(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    Razlomak r;
    r+=raz1;
    r+=raz2;
    return r;
}
Razlomak operator -(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    Razlomak r;
    r+=raz1;
    r-=raz2;
    return r;
}
Razlomak operator *(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    Razlomak r(1);
    r*=raz1;
    r*=raz2;
    return r;
}
Razlomak operator /(const Razlomak &amp;raz1, const Razlomak &amp;raz2){
    Razlomak r(1);
    r*=raz1;
    r/=raz2;
    return r;
}
int main ()
{
    
    Razlomak r (10, 17);
    Razlomak a;
    std::cin &gt;&gt; a;
    //a = r;
            std::cout &lt;&lt; "Brojnik: " &lt;&lt; a.DajBrojnik() &lt;&lt; std::endl
                      &lt;&lt; "Nazivnik: " &lt;&lt; a.DajNazivnik();
	return 0;
}</pre>
</body>
</html>
