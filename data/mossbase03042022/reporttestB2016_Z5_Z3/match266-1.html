<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4415.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4124.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

#define MAX std::numeric_limits&lt;long long int&gt;::max()
#define MIN std::numeric_limits&lt;long long int&gt;::min()

class Razlomak {
    long long int brojnik, nazivnik;
    static long long int NZD(const long long int &amp;x, const long long int &amp;y);
public:
    Razlomak(long long int brojnik=0, long long int nazivnik=1);
    long long int DajBrojnik() const {return brojnik;}
    long long int DajNazivnik() const {return nazivnik;}
    friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="6"></a><font color="#00FF00"><a href="match266-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator +(const Razlomak &amp;r);
    friend Razlomak operator -(const Razlomak &amp;r);
    friend Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2);
</font>    friend Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator ++(Razlomak &amp;r);
    friend Razlomak &amp;operator --(Razlomak &amp;r);
    friend Razlomak operator ++(Razlomak &amp;r, int);
    friend Razlomak operator --(Razlomak &amp;r, int);
    friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    operator long double() const {return static_cast&lt;long double&gt;(this-&gt;DajBrojnik())/this-&gt;DajNazivnik();}
};

long long int Razlomak::NZD(const long long int &amp;x, const long long int &amp;y) {
    long long int p(x), q(y), modulo(0);
    while(1) {
        modulo=p%q;
        p=q;
        q=modulo;
        if(q==0) {
            modulo=p;
            break;
        }
    }
    return p;
}

Razlomak::Razlomak(long long int brojnik, long long int nazivnik) {
    if(nazivnik==0) throw std::logic_error("Nekorektan razlomak");
    if(nazivnik&lt;0) {
        brojnik=-brojnik; nazivnik=-nazivnik;
    }
    auto temp(NZD(brojnik,nazivnik));
    brojnik/=temp; nazivnik/=temp;
    Razlomak::brojnik=brojnik;
<a name="2"></a><font color="#0000FF"><a href="match266-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Razlomak::nazivnik=nazivnik;
}

Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int r(Razlomak::NZD(q1, q2));
    if(((q2/r)&gt;0 and (p1&lt;(MIN/(q2/r)) or p1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (p1==MIN or -p1&gt;MAX/(-q2/r) or -p1&lt;MIN/(-q2/r))))
</font>        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q1/r)&gt;0 and (p2&lt;(MIN/(q1/r)) or p2&gt;(MAX/(q1/r)))) or ((q1/r)&lt;0 and (p2==MIN or -p2&gt;MAX/(-q1/r) or -p2&lt;MIN/(-q1/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q2/r)&gt;0 and (q1&lt;(MIN/(q2/r)) or q1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (q1==MIN or -q1&gt;MAX/(-q2/r) or -q1&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int temp1(p1*(q2/r)), temp2(p2*(q1/r));
    if((temp2&gt;0 and temp1&gt;MAX-temp2) or (temp2&lt;0 and temp1&lt;MIN-temp2))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
<a name="0"></a><font color="#FF0000"><a href="match266-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    return {(temp1+temp2), q1*(q2/r)};
}

Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int r(Razlomak::NZD(q1, q2));
    if(((q2/r)&gt;0 and (p1&lt;(MIN/(q2/r)) or p1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (p1==MIN or -p1&gt;MAX/(-q2/r) or -p1&lt;MIN/(-q2/r))))
</font>        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q1/r)&gt;0 and (p2&lt;(MIN/(q1/r)) or p2&gt;(MAX/(q1/r)))) or ((q1/r)&lt;0 and (p2==MIN or -p2&gt;MAX/(-q1/r) or -p2&lt;MIN/(-q1/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q2/r)&gt;0 and (q1&lt;(MIN/(q2/r)) or q1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (q1==MIN or -q1&gt;MAX/(-q2/r) or -q1&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int temp1(p1*(q2/r)), temp2(p2*(q1/r));
    if((temp2&lt;0 and temp1&gt;MAX+temp2) or (temp2&gt;0 and temp1&lt;MIN+temp2))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return {(temp1-temp2),q1*(q2/r)};
}

Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="3"></a><font color="#00FFFF"><a href="match266-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int s(Razlomak::NZD(p1, q2));
    long long int t(Razlomak::NZD(p2, q1));
    if(((p2/t)&gt;0 and ((p1/s)&lt;(MIN/(p2/t)) or (p1/s)&gt;(MAX/(p2/t)))) or ((p2/t)&lt;0 and ((p1/s)==MIN or -(p1/s)&gt;MAX/(-p2/t) or -(p1/s)&lt;MIN/(-p2/t))))
</font>        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q2/s)&gt;0 and ((q1/t)&lt;(MIN/(q2/s)) or (q1/t)&gt;(MAX/(q2/s)))) or ((q2/s)&lt;0 and ((q1/t)==MIN or -(q1/t)&gt;MAX/(-q2/s) or -(q1/t)&lt;MIN/(-q2/s))))
<a name="1"></a><font color="#00FF00"><a href="match266-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return {((p1/s)*(p2/t)),((q1/t)*(q2/s))};
}

Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
</font>    long long int r(Razlomak::NZD(q1, q2));
    long long int u(Razlomak::NZD(p1, p2));
    if(((q2/r)&gt;0 and ((p1/u)&lt;(MIN/(q2/r)) or (p1/u)&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and ((p1/u)==MIN or -(p1/u)&gt;MAX/(-q2/r) or -(p1/u)&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((p2/u)&gt;0 and ((q1/r)&lt;(MIN/(p2/u)) or (q1/r)&gt;(MAX/(p2/u)))) or ((p2/u)&lt;0 and ((q1/r)==MIN or -(q1/r)&gt;MAX/(-p2/u) or -(q1/r)&lt;MIN/(-p2/u))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return {((p1/u)*(q2/r)),((q1/r)*(p2/u))};
}

Razlomak operator +(const Razlomak &amp;r) {
    return {r.DajBrojnik(), r.DajNazivnik()};
}

Razlomak operator -(const Razlomak &amp;r) {
    if(r.DajBrojnik()==MIN)
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return {-r.DajBrojnik(), r.DajNazivnik()};
}

<a name="7"></a><font color="#0000FF"><a href="match266-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int r(Razlomak::NZD(q1, q2));
</font>    if(((q2/r)&gt;0 and (p1&lt;(MIN/(q2/r)) or p1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (p1==MIN or -p1&gt;MAX/(-q2/r) or -p1&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q1/r)&gt;0 and (p2&lt;(MIN/(q1/r)) or p2&gt;(MAX/(q1/r)))) or ((q1/r)&lt;0 and (p2==MIN or -p2&gt;MAX/(-q1/r) or -p2&lt;MIN/(-q1/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q2/r)&gt;0 and (q1&lt;(MIN/(q2/r)) or q1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (q1==MIN or -q1&gt;MAX/(-q2/r) or -q1&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int temp1(p1*(q2/r)), temp2(p2*(q1/r));
    if((temp2&gt;0 and temp1&gt;MAX-temp2) or (temp2&lt;0 and temp1&lt;MIN-temp2))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r1={temp1+temp2, q1*(q2/r)};
    return r1;
}

<a name="8"></a><font color="#00FFFF"><a href="match266-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int r(Razlomak::NZD(q1, q2));
</font>    if(((q2/r)&gt;0 and (p1&lt;(MIN/(q2/r)) or p1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (p1==MIN or -p1&gt;MAX/(-q2/r) or -p1&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q1/r)&gt;0 and (p2&lt;(MIN/(q1/r)) or p2&gt;(MAX/(q1/r)))) or ((q1/r)&lt;0 and (p2==MIN or -p2&gt;MAX/(-q1/r) or -p2&lt;MIN/(-q1/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q2/r)&gt;0 and (q1&lt;(MIN/(q2/r)) or q1&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and (q1==MIN or -q1&gt;MAX/(-q2/r) or -q1&lt;MIN/(-q2/r))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int temp1(p1*(q2/r)), temp2(p2*(q1/r));
    if((temp2&lt;0 and temp1&gt;MAX-temp2) or (temp2&gt;0 and temp1&lt;MIN-temp2))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r1={temp1-temp2, q1*(q2/r)};
    return r1;
}

Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="4"></a><font color="#FF00FF"><a href="match266-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int s(Razlomak::NZD(p1, q2));
    long long int t(Razlomak::NZD(p2, q1));
    if(((p2/t)&gt;0 and ((p1/s)&lt;(MIN/(p2/t)) or (p1/s)&gt;(MAX/(p2/t)))) or ((p2/t)&lt;0 and ((p1/s)==MIN or -(p1/s)&gt;MAX/(-p2/t) or -(p1/s)&lt;MIN/(-p2/t))))
</font>        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((q2/s)&gt;0 and ((q1/t)&lt;(MIN/(q2/s)) or (q1/t)&gt;(MAX/(q2/s)))) or ((q2/s)&lt;0 and ((q1/t)==MIN or -(q1/t)&gt;MAX/(-q2/s) or -(q1/t)&lt;MIN/(-q2/s))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r1 = {((p1/s)*(p2/t)),((q1/t)*(q2/s))};
    return r1;
}

Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2) {
<a name="5"></a><font color="#FF0000"><a href="match266-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    long long int p1(r1.DajBrojnik()), q1(r1.DajNazivnik()), p2(r2.DajBrojnik()), q2(r2.DajNazivnik());
    long long int r(Razlomak::NZD(q1, q2));
    long long int u(Razlomak::NZD(p1, p2));
    if(((q2/r)&gt;0 and ((p1/u)&lt;(MIN/(q2/r)) or (p1/u)&gt;(MAX/(q2/r)))) or ((q2/r)&lt;0 and ((p1/u)==MIN or -(p1/u)&gt;MAX/(-q2/r) or -(p1/u)&lt;MIN/(-q2/r))))
</font>        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(((p2/u)&gt;0 and ((q1/r)&lt;(MIN/(p2/u)) or (q1/r)&gt;(MAX/(p2/u)))) or ((p2/u)&lt;0 and ((q1/r)==MIN or -(q1/r)&gt;MAX/(-p2/u) or -(q1/r)&lt;MIN/(-p2/u))))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r1 = {((p1/u)*(q2/r)),((q1/r)*(p2/u))};
    return r1;
}

Razlomak &amp;operator ++(Razlomak &amp;r) {
    if((r.DajNazivnik()&gt;0 and r.DajBrojnik()&gt;MAX-r.DajNazivnik()) or (r.DajNazivnik()&lt;0 and r.DajBrojnik()&lt;MIN-r.DajNazivnik()))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r = {r.DajBrojnik()+r.DajNazivnik(), r.DajNazivnik()};
    return r;
}

Razlomak &amp;operator --(Razlomak &amp;r) {
    if((r.DajNazivnik()&lt;0 and r.DajBrojnik()&gt;MAX-r.DajNazivnik()) or (r.DajNazivnik()&gt;0 and r.DajBrojnik()&lt;MIN-r.DajNazivnik()))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r = {r.DajBrojnik()-r.DajNazivnik(), r.DajNazivnik()};
    return r;
}

Razlomak operator ++(Razlomak &amp;r, int) {
    Razlomak pomocni(r);
    if((r.DajNazivnik()&gt;0 and r.DajBrojnik()&gt;MAX-r.DajNazivnik()) or (r.DajNazivnik()&lt;0 and r.DajBrojnik()&lt;MIN-r.DajNazivnik()))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r = {r.DajBrojnik()+r.DajNazivnik(), r.DajNazivnik()};
    return pomocni;
}

Razlomak operator --(Razlomak &amp;r, int) {
    Razlomak pomocni(r);
    if((r.DajNazivnik()&lt;0 and r.DajBrojnik()&gt;MAX-r.DajNazivnik()) or (r.DajNazivnik()&gt;0 and r.DajBrojnik()&lt;MIN-r.DajNazivnik()))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r = {r.DajBrojnik()-r.DajNazivnik(), r.DajNazivnik()};
    return pomocni;
}

bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double temp1(static_cast&lt;long double&gt;(r1.DajBrojnik())/r1.DajNazivnik()),
                temp2(static_cast&lt;long double&gt;(r2.DajBrojnik())/r2.DajNazivnik());
    return temp1&lt;temp2;
}

bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double temp1(static_cast&lt;long double&gt;(r1.DajBrojnik())/r1.DajNazivnik()),
                temp2(static_cast&lt;long double&gt;(r2.DajBrojnik())/r2.DajNazivnik());
    return temp1&gt;temp2;
}

bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double temp1(static_cast&lt;long double&gt;(r1.DajBrojnik())/r1.DajNazivnik()),
                temp2(static_cast&lt;long double&gt;(r2.DajBrojnik())/r2.DajNazivnik());
    return temp1&lt;=temp2;
}

bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double temp1(static_cast&lt;long double&gt;(r1.DajBrojnik())/r1.DajNazivnik()),
                temp2(static_cast&lt;long double&gt;(r2.DajBrojnik())/r2.DajNazivnik());
    return temp1&gt;=temp2;
}

bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double temp1(static_cast&lt;long double&gt;(r1.DajBrojnik())/r1.DajNazivnik()),
                temp2(static_cast&lt;long double&gt;(r2.DajBrojnik())/r2.DajNazivnik());
    return temp1-temp2&lt;1e-14;
}

bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double temp1(static_cast&lt;long double&gt;(r1.DajBrojnik())/r1.DajNazivnik()),
                temp2(static_cast&lt;long double&gt;(r2.DajBrojnik())/r2.DajNazivnik());
    return temp1-temp2&gt;1e-14;
}

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
    if(r.DajNazivnik()==1) tok &lt;&lt; r.DajBrojnik();
    else tok &lt;&lt; r.DajBrojnik() &lt;&lt; "/" &lt;&lt; r.DajNazivnik();
    return tok;
}

std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
    char znak;
    long long int brojnik, nazivnik;
    tok &gt;&gt; std::ws;
    tok &gt;&gt; brojnik;
    if(char(tok.peek())!='/') nazivnik=1;
    else {
        tok &gt;&gt; znak &gt;&gt; nazivnik;
        if(tok.peek()!=' ' and tok.peek()!='\n' and tok.peek()!='\t')
            tok.setstate(std::ios::failbit);
    }
    if(!tok) tok.setstate(std::ios::failbit);
    r={brojnik,nazivnik};
    //tok.ignore(1000, '\n');
    //tok.clear();
    return tok;
}

int main ()
{
    std::cout &lt;&lt; "Unesite razlomke:" &lt;&lt; std::endl;
    Razlomak r1, r2;
    std::cin &gt;&gt; r1;
    std::cin &gt;&gt; r2;
    std::cout &lt;&lt; r1 &lt;&lt; " " &lt;&lt; r2 &lt;&lt; std::endl;
    std::cout &lt;&lt; r1+r2;
	return 0;
}</pre>
</body>
</html>
