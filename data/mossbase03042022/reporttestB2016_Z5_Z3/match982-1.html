<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3386.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1671.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;cmath&gt;
#include &lt;cstdlib&gt;
const long long int M(std::numeric_limits&lt;long long int&gt;::max());
const long long int m(std::numeric_limits&lt;long long int&gt;::min());

class Razlomak {
    long long int brojnik, nazivnik;
    static long long int NZD(long long int a, long long int b);
    static void OverflowSabiranje(long long int a, long long int b);
    static void OverflowOduzimanje(long long int a, long long int b);
    static void OverflowMnozenje(long long int a, long long int b);
    static bool DaLiSuJednaki(long double x, long double y);
    public:
    Razlomak(long long int brojnik = 0, long long int nazivnik = 1) {
        if (!nazivnik) throw std::logic_error ("Nekorektan razlomak");
        auto visekratnik(NZD(nazivnik, brojnik));
        Razlomak::nazivnik = nazivnik/visekratnik; Razlomak::brojnik = brojnik/visekratnik;
        if (Razlomak::nazivnik &lt; 0 &amp;&amp; Razlomak::brojnik &lt; 0) Razlomak::nazivnik = -Razlomak::nazivnik, Razlomak::brojnik = -Razlomak::brojnik;
        if (Razlomak::nazivnik &lt; 0) Razlomak::nazivnik = -Razlomak::nazivnik, Razlomak::brojnik = -Razlomak::brojnik;
    }
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b);
    Razlomak &amp;operator -();
<a name="2"></a><font color="#0000FF"><a href="match982-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Razlomak &amp;operator +() { return *this; }
    Razlomak &amp;operator +=(const Razlomak &amp;r);
    Razlomak &amp;operator -=(const Razlomak &amp;r);
    Razlomak &amp;operator *=(const Razlomak &amp;r);
    Razlomak &amp;operator /=(const Razlomak &amp;r);
</font>    Razlomak &amp;operator++() { return *this = *this + Razlomak(1); }
    Razlomak operator++(int);
    Razlomak &amp;operator--() { return *this = *this - Razlomak(1); }
    Razlomak operator--(int);
    friend bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b);
<a name="1"></a><font color="#00FF00"><a href="match982-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    friend bool operator ==(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator !=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    operator long double() const { return brojnik/(long double)nazivnik; };
</font>};
Razlomak Razlomak::operator--(int) {
    Razlomak pom(DajBrojnik(), DajNazivnik());
    (*this)--;
    return pom;
}
Razlomak Razlomak::operator++(int) {
    Razlomak pom(this-&gt;DajBrojnik(), this-&gt;DajNazivnik());
    (*this)++;
    return pom;
}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
    tok &gt;&gt; std::ws;
    if (!(tok.peek() &gt;= '0' &amp;&amp; tok.peek() &lt;= '9')) {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    tok &gt;&gt; r.brojnik;
    char c(tok.peek());
    if (c == EOF || c == '\t' || c == '\n' || c == '\f' || c == '\v' || c == '\r' || c == ' ') {
        r = {r.brojnik};
    }
    else if (c != '/') {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    else {
        char znak;
        tok &gt;&gt; znak;
        if (!(tok.peek() &gt;= '0' &amp;&amp; tok.peek() &lt;= '9')) {
            tok.setstate(std::ios::failbit);
            return tok;
        }
        tok &gt;&gt; r.nazivnik;
        char p(tok.peek());
        if (p != EOF &amp;&amp; p != '\t' &amp;&amp; p != '\v' &amp;&amp; p != '\f' &amp;&amp; p != '\r' &amp;&amp; p != '\n' &amp;&amp; p != ' ') {
            tok.setstate(std::ios::failbit);
            return tok;
        }
        r = Razlomak(r.brojnik, r.nazivnik);
    }
    return tok;
}
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
    tok &lt;&lt; r.DajBrojnik();
    if (r.DajNazivnik() != 1) tok &lt;&lt; "/" &lt;&lt; r.DajNazivnik();
    return tok;
}
bool Razlomak::DaLiSuJednaki(long double x, long double y) {
    return std::fabs(x - y) &lt;= 1e-10 * (std::fabs(x) + std::fabs(y));
}
bool operator !=(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double x(a.DajBrojnik()/a.DajNazivnik()), y(b.DajBrojnik()/b.DajNazivnik());
    return !Razlomak::DaLiSuJednaki(x, y);
}
bool operator ==(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double x(a.DajBrojnik()/a.DajNazivnik()), y(b.DajBrojnik()/b.DajNazivnik());
    return Razlomak::DaLiSuJednaki(x, y);
}
bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double x(a.DajBrojnik()/a.DajNazivnik()), y(b.DajBrojnik()/b.DajNazivnik());
    return (x &lt; y || Razlomak::DaLiSuJednaki(x, y));
} 
bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double x(a.DajBrojnik()/a.DajNazivnik()), y(b.DajBrojnik()/b.DajNazivnik());
    return (x &gt; y || Razlomak::DaLiSuJednaki(x, y));
}
bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double x(a.DajBrojnik()/a.DajNazivnik()), y(b.DajBrojnik()/b.DajNazivnik());
    return (x &gt; y &amp;&amp; !Razlomak::DaLiSuJednaki(x, y));
}
bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b) {
    long double x(a.DajBrojnik()/a.DajNazivnik()), y(b.DajBrojnik()/b.DajNazivnik());
    return (x &lt; y &amp;&amp; !Razlomak::DaLiSuJednaki(x, y));
}
Razlomak &amp;Razlomak::operator /=(const Razlomak &amp;r) {
    *this = *this/r;
    return *this;
}
Razlomak &amp;Razlomak::operator *=(const Razlomak &amp;r) {
    *this = *this * r;
    return *this;
}
Razlomak &amp;Razlomak::operator +=(const Razlomak &amp;r) {
    *this = *this + r;
    return *this;
}
Razlomak &amp;Razlomak::operator -=(const Razlomak &amp;r) {
    *this = *this - r;
    return *this;
}
Razlomak &amp;Razlomak::operator -() {
    if (this-&gt;DajBrojnik() == m || this-&gt;DajNazivnik() == m || this-&gt;DajBrojnik()/(this-&gt;DajNazivnik()) == m) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    return *this;
}
void Razlomak::OverflowMnozenje(long long int x, long long int y) {
    if (y &gt; 0 &amp;&amp; (x &lt; m/y || x &gt; M/y)) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    if (y &lt; 0 &amp;&amp; (std::fabs(x - m) &lt; 1e-10 || -x &gt; M/(-y) || -x &lt; m/(-y))) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");   
}
void Razlomak::OverflowOduzimanje(long long int x, long long int y) {
    if ((y &lt; 0 &amp;&amp; x &gt; M + y) || (y &gt; 0 &amp;&amp; x &lt; m + y)) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
}
void Razlomak::OverflowSabiranje(long long int x, long long int y) {
    if ((y &lt; 0 &amp;&amp; x &lt; m - y) || (y &gt; 0 &amp;&amp; x &gt; M - y)) throw std::overflow_error ("Nemoguce dobiti tacan rezultat");  
}
Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int r(Razlomak::NZD(a.DajNazivnik(), b.DajNazivnik()));
    long long int u(Razlomak::NZD(a.DajBrojnik(), b.DajBrojnik()));
    long long int brojnik{(a.DajBrojnik()/u) * (b.DajNazivnik()/r)};
    long long int nazivnik{(a.DajNazivnik()/r) * (b.DajBrojnik()/u)};
    return {brojnik, nazivnik};
}
Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b) {
    auto s(Razlomak::NZD(a.DajBrojnik(), b.DajNazivnik()));
    auto t(Razlomak::NZD(a.DajNazivnik(), b.DajBrojnik()));
    Razlomak::OverflowMnozenje(a.DajBrojnik()/s, b.DajBrojnik()/t);
    Razlomak::OverflowMnozenje(a.DajNazivnik()/t, b.DajNazivnik()/s);
    long long int brojnik{(a.DajBrojnik()/s) * (b.DajBrojnik()/t)};
    long long int nazivnik{(a.DajNazivnik()/t) * (b.DajNazivnik()/s)};
    return {brojnik, nazivnik};
}
Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b) {
    auto r(Razlomak::NZD(a.DajNazivnik(), b.DajNazivnik()));
    Razlomak::OverflowMnozenje(a.DajBrojnik(), b.DajNazivnik()/r);
    Razlomak::OverflowMnozenje(b.DajBrojnik(), a.DajNazivnik()/r);
    Razlomak::OverflowOduzimanje(a.DajBrojnik() * (b.DajNazivnik()/r), b.DajBrojnik() * (a.DajNazivnik()/r));
    Razlomak::OverflowMnozenje(a.DajNazivnik(), b.DajNazivnik()/r);
    long long int brojnik{a.DajBrojnik() * (b.DajNazivnik()/r) - b.DajBrojnik() * (a.DajNazivnik()/r)};
    long long int nazivnik{a.DajNazivnik() * (b.DajNazivnik()/r)};
    return {brojnik, nazivnik};
}
Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b) {
    auto nzd(Razlomak::NZD(a.DajNazivnik(), b.DajNazivnik()));
    Razlomak::OverflowMnozenje(a.DajBrojnik(), b.DajNazivnik()/nzd);
    Razlomak::OverflowMnozenje(b.DajBrojnik(), a.DajNazivnik()/nzd);
    Razlomak::OverflowSabiranje(a.DajBrojnik() * (b.DajNazivnik()/nzd), b.DajBrojnik() * (a.DajNazivnik()/nzd));
    Razlomak::OverflowMnozenje(a.DajNazivnik(), b.DajNazivnik()/nzd);
    long long int brojnik{a.DajBrojnik() * (b.DajNazivnik()/nzd) + b.DajBrojnik() * (a.DajNazivnik()/nzd)};
    long long int nazivnik{a.DajNazivnik() * (b.DajNazivnik()/nzd)};
    return {brojnik, nazivnik}; 
}

long long int Razlomak::NZD(long long int a, long long int b) {
    if (!b) return a;
<a name="0"></a><font color="#FF0000"><a href="match982-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    return Razlomak::NZD(b, a%b);
}
/*int main2() {
    {//AT7 (c9): op-, op/, op konverzije, kracenje
         //za _r pogledati 'globalni opseg' komentar i AT6
         std::cout &lt;&lt; 10_r / 7_r - 6_r / 11_r; // 10/7 - 6/11
         std::cout &lt;&lt; std::endl;
         std::cout &lt;&lt; (10_r / 7_r) / (6_r / 11_r); // 10/7 / 6/11
         std::cout &lt;&lt; std::endl;
         Razlomak r = 124_r / 4_r;
         std::cout &lt;&lt; r;
         r = r - 11_r / 77_r;
         std::cout &lt;&lt; std::endl;
         std::cout &lt;&lt; r &lt;&lt; " je priblizno " &lt;&lt; static_cast&lt;long double&gt;(r);
        }
}*/
int main_ () {
       Razlomak r, p, q;
        std::cin &gt;&gt; r; //5/17
        std::cout &lt;&lt; r &lt;&lt; std::endl;
        std::cin.clear(); std::cin.ignore (100, '\n');
        //tri zaredom
        std::cin &gt;&gt; r &gt;&gt; p &gt;&gt; q; //10 20 30 -&gt; 10/1 20/1 30/1
        std::cout &lt;&lt; r &lt;&lt; " " &lt;&lt; p &lt;&lt; " " &lt;&lt; q &lt;&lt; std::endl;
        std::cin.clear(); std::cin.ignore (100, '\n');
        std::cin &gt;&gt; r;
        std::cout &lt;&lt; r;
</font>    return 0;
}
int main ()
{
	Razlomak r(15, 10);
	Razlomak q(9);
	std::cout &lt;&lt; "Razlomak r: " &lt;&lt; r.DajBrojnik() &lt;&lt; "/" &lt;&lt; r.DajNazivnik() &lt;&lt; std::endl;
	std::cout &lt;&lt; "Razlomak q: " &lt;&lt; q &lt;&lt; std::endl;
	try {
	    std::cout &lt;&lt; r &lt;&lt; " + " &lt;&lt; q &lt;&lt; " = " &lt;&lt; r + q &lt;&lt; std::endl;
	    std::cout &lt;&lt; r &lt;&lt; " - " &lt;&lt; q &lt;&lt; " = " &lt;&lt; r - q &lt;&lt; std::endl;
	    std::cout &lt;&lt; r &lt;&lt; " * " &lt;&lt; q &lt;&lt; " = " &lt;&lt; r * q &lt;&lt; std::endl;
	    std::cout &lt;&lt; r &lt;&lt; " / " &lt;&lt; q &lt;&lt; " = " &lt;&lt; r / q &lt;&lt; std::endl;
	    --r;
	    std::cout &lt;&lt; ++r &lt;&lt; std::endl;
	    Razlomak a, b;
	    std::cout &lt;&lt; "Unesite razlomak a: ";
	    std::cin &gt;&gt; a;
	    std::cout &lt;&lt; "Unesite razlomak b: ";
	    std::cin &gt;&gt; b;
	    if (a &gt; b) std::cout &lt;&lt; a &lt;&lt; " je vece od " &lt;&lt; b;
	    else if (a &lt; b) std::cout &lt;&lt; a &lt;&lt; " je manje od " &lt;&lt; b;
	    else std::cout &lt;&lt; a &lt;&lt; " i " &lt;&lt; b &lt;&lt; " su jednaki";
	    std::cout &lt;&lt; std::endl;
	}
	catch(std::logic_error e) {
	    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	}
	catch(std::overflow_error e) {
	    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	}
	return 0; 
}</pre>
</body>
</html>
