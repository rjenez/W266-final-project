<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2908.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2908.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

const double eps(1e-10);



 long long int M=std::numeric_limits&lt;long long int&gt;::max();
     long long int m=std::numeric_limits&lt;long long int&gt;::lowest();
        
class Razlomak{
    
    static bool Jednakii(double x,double y){
		if(std::fabs(x-y)&lt;=eps*(std::fabs(x)+std::fabs(y))) {return true;}
		return false;
    }
    
    static int NZD(long long int br,long long int nz){
        for(;;){
            if(br==0) return nz;
            nz%=br;
            if(nz==0) return br;
            br%=nz;
        }
    }
    static void OverPlusMinus(long long int operand_1,long long int operand_2){
        if((operand_2&gt;0 &amp;&amp; operand_1&gt;M-operand_2) || ( operand_2&lt;0 &amp;&amp;  operand_1&lt;m-operand_2)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    static void Overputa(long long int operand_1,long long int operand_2){
        if(( operand_2&gt;0 &amp;&amp; (operand_1&lt;(m/operand_2) || operand_1&gt;(M/operand_2))) || ((operand_2&lt;0 &amp;&amp; (operand_1==m || -operand_1&gt;(M/operand_2) || -operand_1&lt;(m/-operand_2) )) ))  throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    long long int brojnik,nazivnik;
    public:
    Razlomak (long long int x,long long int y){Postavi (x,y);}
    Razlomak(long long int jedan) { brojnik=jedan; nazivnik=1;}
    Razlomak (){brojnik=0; nazivnik=1;}
    Razlomak(const Razlomak &amp;r){   Postavi(r.brojnik,r.nazivnik);}
     void Postavi(long long int a,long long int b);
    void Ispisi() const {std::cout&lt;&lt;"("&lt;&lt;brojnik&lt;&lt;","&lt;&lt;nazivnik&lt;&lt;")";}
    long long int DajBrojnik() const {return brojnik;}
    long long int DajNazivnik() const { return nazivnik;}
    friend std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok,const Razlomak &amp;r);
    friend Razlomak operator +(const Razlomak &amp;r1,const Razlomak &amp;r2);
    friend Razlomak operator -(const Razlomak &amp;r1,const Razlomak &amp;r2);
<a name="1"></a><font color="#00FF00"><a href="match786-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    friend Razlomak operator *(const Razlomak &amp;r1,const Razlomak &amp;r2);
    friend Razlomak operator /(const Razlomak &amp;r1,const Razlomak &amp;r2);
    friend std::istream &amp;operator &gt;&gt; (std::istream &amp;tok,Razlomak &amp;r);
</font>    friend Razlomak operator + (const Razlomak &amp;r) { return r;}
    friend Razlomak operator -(const Razlomak &amp;r){ if((-r.brojnik&gt;M || -r.brojnik&lt;m ) || (-r.nazivnik&gt;M || -r.nazivnik&lt;m)) throw std::overflow_error("Nemoguce dobiti tacan rezultat"); else return Razlomak(-r.brojnik,-r.nazivnik);}
    friend Razlomak operator +=(Razlomak &amp;r1,const Razlomak &amp;r2);
    friend Razlomak operator -=(Razlomak &amp;r1,const Razlomak &amp;r2);
    friend Razlomak operator *=(Razlomak &amp;r1,const Razlomak &amp;r2);
    friend Razlomak operator /=(Razlomak &amp;r1,const Razlomak &amp;r2);
    friend Razlomak &amp;operator ++(Razlomak &amp;r){
        Razlomak pomocni(1);
        r+=pomocni;
        return r;
    }
    friend Razlomak operator ++(Razlomak &amp;r,int){
        Razlomak pomochni(r);
       /* Razlomak pomoc(1);
        r+=pomoc;*/
       return pomochni;
    }
    
      friend Razlomak &amp;operator --(Razlomak &amp;r){
        Razlomak pomocni(1);
        r-=pomocni;
        return r;
    }
    friend Razlomak operator --(Razlomak &amp;r,int){
        Razlomak pomochni(r);
       /* Razlomak pomoc(1);
        r+=pomoc;*/
        return pomochni;
    }
    
    friend bool operator &lt; (const Razlomak &amp;r1,const Razlomak &amp;r2){
        return (((long double)r1.brojnik/r1.nazivnik&lt;(long double)r2.brojnik/r2.nazivnik) &amp;&amp; !Jednakii((long double)r1.brojnik/r1.nazivnik,(long double)r2.brojnik/r2.nazivnik) );
    }
    
    friend bool operator &gt; (const Razlomak &amp;r1,const Razlomak &amp;r2){
        return (((long double)r1.brojnik/r1.nazivnik&gt;(long double)r2.brojnik/r2.nazivnik) &amp;&amp; !Jednakii((long double)r1.brojnik/r1.nazivnik,(long double)r2.brojnik/r2.nazivnik) );
    }
    friend bool operator &lt;= (const Razlomak &amp;r1,const Razlomak &amp;r2){
        return (((long double)r1.brojnik/r1.nazivnik&lt;=(long double)r2.brojnik/r2.nazivnik) || Jednakii((long double)r1.brojnik/r1.nazivnik,(long double)r2.brojnik/r2.nazivnik) );
    }
    
    friend bool operator &gt;= (const Razlomak &amp;r1,const Razlomak &amp;r2){
        return (((long double)r1.brojnik/r1.nazivnik&gt;=(long double)r2.brojnik/r2.nazivnik) || Jednakii((long double)r1.brojnik/r1.nazivnik,(long double)r2.brojnik/r2.nazivnik) );
    }
    
    friend bool operator == (const Razlomak &amp;r1,const Razlomak &amp;r2){
        return (Jednakii((long double)r1.brojnik/r1.nazivnik,(long double)r2.brojnik/r2.nazivnik) );
    }
    operator long double() const;
    
 
     
    
    

   
};
<a name="5"></a><font color="#FF0000"><a href="match786-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;a) { 
      char znak; 
      tok &gt;&gt; std::ws;      
         tok &gt;&gt;  a.brojnik ;
</font>         znak=std::cin.get();
         if(znak=='/'){
         tok&gt;&gt; a.nazivnik;
         }
         else if(znak!='\n'){
             a.nazivnik=1;
         }
         else{
              tok.setstate(std::ios::failbit);
         }
     return tok; 
    }
    
       void Razlomak::Postavi(long long int a,long long int b) {
        if(b==0) throw std::logic_error("Nekorektan razlomak");
        if(b&lt;0 &amp;&amp; a&gt;0 ) { brojnik=-(a/NZD(a,b)); nazivnik=std::abs(b/NZD(a,b));}
        if(b&lt;0 &amp;&amp; a&lt;0) { brojnik=std::abs(a/NZD(a,b)); nazivnik=std::abs(b/NZD(a,b)); }
        if(a&lt;0 &amp;&amp; b&gt;0) {    brojnik=-(a/NZD(a,b)); nazivnik=b/NZD(a,b);}
        else brojnik=a/NZD(a,b); nazivnik=b/NZD(a,b);
    }
    


    
    
    Razlomak operator +(const Razlomak &amp;r1,const Razlomak &amp;r2){
        int r=Razlomak::NZD(r1.nazivnik,r2.nazivnik);
<a name="3"></a><font color="#00FFFF"><a href="match786-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        Razlomak::OverPlusMinus((r1.brojnik/r1.nazivnik),(r2.brojnik/r2.nazivnik));
        return Razlomak((r1.brojnik*(r2.nazivnik/r)+r2.brojnik*(r1.nazivnik/r)),(r1.nazivnik*(r2.nazivnik/r)));
    }
    
    Razlomak operator -(const Razlomak &amp;r1,const Razlomak &amp;r2){
</font>        int r=Razlomak::NZD(r1.nazivnik,r2.nazivnik);
<a name="4"></a><font color="#FF00FF"><a href="match786-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

         Razlomak::OverPlusMinus((r1.brojnik/r1.nazivnik),(r2.brojnik/r2.nazivnik));
        return Razlomak((r1.brojnik*(r2.nazivnik/r)-r2.brojnik*(r1.nazivnik/r)),(r1.nazivnik*(r2.nazivnik/r)));
    }
    
</font><a name="0"></a><font color="#FF0000"><a href="match786-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    Razlomak operator *(const Razlomak &amp;r1,const Razlomak &amp;r2){
        int s=Razlomak::NZD(r1.brojnik,r2.nazivnik);
        int t=Razlomak::NZD(r2.brojnik,r1.nazivnik);
        return Razlomak((r1.brojnik/s)*(r2.brojnik/t),(r1.nazivnik/t)*(r2.nazivnik/s));
</font>    }
    
      
    Razlomak operator / (const Razlomak &amp;r1,const Razlomak &amp;r2){
        int s=Razlomak::NZD(r1.brojnik,r2.nazivnik);
        int t=Razlomak::NZD(r2.brojnik,r1.nazivnik);
<a name="2"></a><font color="#0000FF"><a href="match786-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        int r=Razlomak::NZD(r1.nazivnik,r2.nazivnik);
        int u=Razlomak::NZD(r1.brojnik,r2.brojnik);
        return Razlomak((r1.brojnik/u)*(r2.nazivnik/r),(r1.nazivnik/r)*(r2.brojnik/u));
</font>    }
    
     std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok,const Razlomak &amp;r){
      int t=Razlomak::NZD(r.brojnik,r.nazivnik);
      long long int prvi,drugi;
      prvi=r.brojnik/t; drugi=r.nazivnik/t;
       if(r.brojnik==0  ) {tok&lt;&lt;0;}
       if(r.brojnik&gt;=1 &amp;&amp; drugi==1) {tok&lt;&lt;prvi;}
       if(r.brojnik!=0 &amp;&amp; drugi&gt;1){ tok&lt;&lt;prvi&lt;&lt;"/"&lt;&lt;drugi;}
       return tok;
    }
     Razlomak operator +=(Razlomak &amp;r1,const Razlomak &amp;r2){
        int r=Razlomak::NZD(r1.nazivnik,r2.nazivnik);
        Razlomak::OverPlusMinus((r1.brojnik/r1.nazivnik),(r2.brojnik/r2.nazivnik));
        r1=Razlomak((r1.brojnik*(r2.nazivnik/r)+r2.brojnik*(r1.nazivnik/r)),(r1.nazivnik*(r2.nazivnik/r)));
        return r1;
    }
    Razlomak operator -=(Razlomak &amp;r1,const Razlomak &amp;r2){
         int r=Razlomak::NZD(r1.nazivnik,r2.nazivnik);
          Razlomak::OverPlusMinus((r1.brojnik/r1.nazivnik),(r2.brojnik/r2.nazivnik));
        r1= Razlomak((r1.brojnik*(r2.nazivnik/r)-r2.brojnik*(r1.nazivnik/r)),(r1.nazivnik*(r2.nazivnik/r)));
        return r1;
    }
    Razlomak operator *=(Razlomak &amp;r1,const Razlomak &amp;r2){
        int s=Razlomak::NZD(r1.brojnik,r2.nazivnik);
        int t=Razlomak::NZD(r2.brojnik,r1.nazivnik);
        Razlomak::Overputa((r1.brojnik/r1.nazivnik),(r2.brojnik/r2.nazivnik));
        r1=Razlomak((r1.brojnik/s)*(r2.brojnik/t),(r1.nazivnik/t)*(r2.nazivnik/s));
        return r1;
    }
    Razlomak operator /=(Razlomak &amp;r1,const Razlomak &amp;r2){
        int s=Razlomak::NZD(r1.brojnik,r2.nazivnik);
        int t=Razlomak::NZD(r2.brojnik,r1.nazivnik);
        int r=Razlomak::NZD(r1.nazivnik,r2.nazivnik);
        int u=Razlomak::NZD(r1.brojnik,r2.brojnik);
        r1= Razlomak((r1.brojnik/u)*(r2.nazivnik/r),(r1.nazivnik/r)*(r2.brojnik/u));
        return r1;
    }
    
       
    Razlomak::operator long double () const{
    return (long double)brojnik/nazivnik;
   }
   
    
    
    
int main ()
{
   Razlomak r;
        std::cin &gt;&gt; r;
        long double p=r;
        std::cout &lt;&lt; p&lt;&lt;std::endl;

    
	return 0;
}</pre>
</body>
</html>
