<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2213.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2213.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match116-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;exception&gt;

using namespace std;

long long int m = -9223372036854775807;
long long int M =  9223372036854775807;

static long long int NZD(long long int a, long long int b){
    if(b == 0) return a;
    else NZD(b, a%b);
}

class Razlomak{
      long long int brojnik;
      long long int nazivnik;
      
    public:
        Razlomak(long long int _brojnik, long long int _nazivnik):brojnik(_brojnik), nazivnik(_nazivnik){
            if(_nazivnik == 0) throw logic_error("Nekorektan razlomak");
            
            long long int djelilac = NZD(brojnik, nazivnik);
            
            if(djelilac != 0){
                brojnik /= djelilac;
                nazivnik /= djelilac;
            }
            
            if(nazivnik &lt; 0){
                nazivnik *= -1;
                brojnik *= -1;
            }
        }
        
        Razlomak(long long int _brojnik){
            brojnik = _brojnik;
            nazivnik = 1;
        }
        
        Razlomak(){
            brojnik = 0;
            nazivnik = 1;
        }
        
        
        long long int DajBrojnik(){
            return brojnik;
        }
        
        long long int DajNazivnik(){
            return nazivnik;
        }
        
        friend istream&amp; operator &gt;&gt; (istream&amp; in, Razlomak &amp;raz);
        operator long double();
        Razlomak&amp; operator++();
        Razlomak&amp; operator--();
        Razlomak operator++(int);
        Razlomak operator--(int);
        friend bool operator&lt;(Razlomak lijevi, Razlomak desni);
        friend bool operator&gt;(Razlomak lijevi, Razlomak densi);
        friend bool operator&lt;=(Razlomak lijevi, Razlomak desni);
        friend bool operator&gt;=(Razlomak lijevi, Razlomak desni);
        friend bool operator==(Razlomak lijevi, Razlomak desni);
        friend bool operator!=(Razlomak lijevi, Razlomak desni);
};

static long long int ProvjerenoSabiranje(long long int x, long long int y){
    if (y &gt; 0){
        if(x &gt; M - y) throw overflow_error("Nemoguce dobiti tacan rezultat");
    }
    else{
        if(x &lt; m - y) throw overflow_error("Nemoguce dobiti tacan rezultat");
    }
    return (x + y);
}

static long long int ProvjerenoOduzimanje(long long int x, long long int y){
    if(y &gt; 0){
        if(x &gt; M + y) throw overflow_error("Nemoguce dobiti tacan rezultat");
    }
    else{
        if(x &lt; m + y) throw overflow_error("Nemoguce dobiti tacan rezultat");
    }
    return (x - y);
}

static long long int ProvjerenoMnozenje(long long int x, long long int y){
    if (y &gt; 0){
        if (x &lt; m / y || x &gt; M / y) throw overflow_error("Nemoguce dobiti tacan rezultat");
    } 
    else{
        if (x == m || -x &gt; M / (-y) || -x &lt; m / (-y)) throw overflow_error("Nemoguce dobiti tacan rezultat");
    }
    return (x*y);
}

Razlomak operator+(Razlomak lijevi, Razlomak desni ){
    long long int r = NZD(lijevi.DajNazivnik(), desni.DajNazivnik());
    
    long long int p1 = lijevi.DajBrojnik();
    long long int q1 = lijevi.DajNazivnik();
    long long int p2 = desni.DajBrojnik();
    long long int q2 = desni.DajNazivnik();
    
    long long int _brojnik = ProvjerenoSabiranje(ProvjerenoMnozenje(p1,(q2/r)),ProvjerenoMnozenje(p2, (q1/r)));
    long long int _nazivnik = ProvjerenoMnozenje(q1, (q2/r));
    
    return Razlomak(_brojnik, _nazivnik);
}

Razlomak operator -(Razlomak raz){
    long long int _brojnik = raz.DajBrojnik() * -1;
    long long int _nazivnik = raz.DajNazivnik();
    return Razlomak( _brojnik, _nazivnik);     
}

Razlomak operator +(Razlomak raz){
    long long int _brojnik = raz.DajBrojnik();
    long long int _nazivnik = raz.DajNazivnik();
    return Razlomak(_brojnik, _nazivnik);
}

Razlomak operator-(Razlomak lijevi, Razlomak desni){
    return(lijevi+(-desni));
}

Razlomak operator*(Razlomak lijevi, Razlomak desni){
    long long int s = NZD(desni.DajNazivnik(), lijevi.DajNazivnik());
    long long int t = NZD(desni.DajBrojnik(), lijevi.DajNazivnik());
    
    long long int p1 = lijevi.DajBrojnik();
    long long int q1 = lijevi.DajNazivnik();
    long long int p2 = desni.DajBrojnik();
    long long int q2 = desni.DajNazivnik();
    
    long long int _brojnik = ProvjerenoMnozenje((p1/s),(p2/t));
    long long int _nazivnik = ProvjerenoMnozenje((q1/t),(q2/s));
    
    return Razlomak(_brojnik, _nazivnik);
}

Razlomak operator/(Razlomak lijevi, Razlomak desni){
    long long int u = NZD(lijevi.DajBrojnik(), desni.DajBrojnik());
    long long int r = NZD(lijevi.DajNazivnik(), desni.DajNazivnik());
    
    long long int p1 = lijevi.DajBrojnik();
    long long int q1 = lijevi.DajNazivnik();
    long long int p2 = desni.DajBrojnik();
    long long int q2 = desni.DajNazivnik();
    
    long long int _brojnik = ProvjerenoMnozenje((p1/u),(q2/r));
    long long int _nazivnik = ProvjerenoMnozenje((q1/r),(p2/u));
    
    return Razlomak(_brojnik, _nazivnik);
}

Razlomak:: operator long double(){
    return static_cast&lt;long double&gt;((long double)brojnik/(long double)nazivnik);
}

ostream&amp; operator&lt;&lt;(ostream&amp; out, Razlomak raz1){
    
    Razlomak raz(raz1.DajBrojnik(), raz1.DajNazivnik());
    if(raz.DajBrojnik()%raz.DajNazivnik() == 0) return out &lt;&lt; raz.DajBrojnik()/raz.DajNazivnik();
    else if(raz.DajBrojnik() != 0 &amp;&amp; raz.DajNazivnik() != 1) return out &lt;&lt; raz.DajBrojnik() &lt;&lt; "/" &lt;&lt; raz.DajNazivnik();
    else return out &lt;&lt; raz.DajBrojnik();
}

istream&amp; operator&gt;&gt;(istream&amp; in, Razlomak &amp;raz){
    char c;
    in &gt;&gt; ws;
    in&gt;&gt;raz.brojnik;
    if(in.peek() != '/'){
        raz.nazivnik = 1;
    }
    else{
        in&gt;&gt;c;
        in&gt;&gt;raz.nazivnik;
    }
    if(in.peek() != ' ') in.setstate(ios::failbit);
    return in;
}

Razlomak operator+=(Razlomak lijevi, Razlomak desni){
    return lijevi + desni;
}

Razlomak operator-=(Razlomak lijevi, Razlomak desni){
    return lijevi - desni;
}

Razlomak operator*=(Razlomak lijevi, Razlomak desni){
    return lijevi * desni;
}

Razlomak operator/=(Razlomak lijevi, Razlomak desni){
    return lijevi / desni;
}

Razlomak&amp; Razlomak:: operator++(){
    brojnik += nazivnik;
}

Razlomak&amp; Razlomak:: operator--(){
    brojnik -= nazivnik;
}

Razlomak Razlomak:: operator++(int){
    Razlomak privremeni(brojnik, nazivnik);
    
    ++(*this);
    
    return privremeni;
}

Razlomak Razlomak:: operator--(int){
    Razlomak privremeni(brojnik, nazivnik);
    --(*this);
    return privremeni;
}

bool operator&lt;(Razlomak lijevi, Razlomak desni){
    long double left = lijevi;
    long double right = desni;
    return (left &lt; right);
}

bool operator&gt;(Razlomak lijevi, Razlomak desni){
    long double left = lijevi;
    long double right = desni;
    return(left &gt; right);
}

bool operator&lt;=(Razlomak lijevi, Razlomak desni){
    long double left = lijevi;
    long double right = desni;
    return (left&lt;=right);
}

bool operator&gt;=(Razlomak lijevi, Razlomak desni){
    long double left = lijevi;
    long double right = desni;
    return (left&gt;=right);
}

bool operator==(Razlomak lijevi, Razlomak desni){
    long double left = lijevi;
    long double right = desni;
    return(left == right);
}

bool operator !=(Razlomak lijevi, Razlomak desni){
    long double left = lijevi; 
    long double right = desni;
    return(left != right);
}

int main ()
{
    Razlomak r1, r2, r3, r4, r5, r6;
    cin &gt;&gt; r1 &gt;&gt; r2 &gt;&gt; r3 &gt;&gt; r4 &gt;&gt; r5 &gt;&gt; r6;
    cout &lt;&lt; r1 +r2;
    ++r3;
    cout &lt;&lt; (r3) &lt;&lt; endl;
    cout &lt;&lt; (r4) &lt;&lt; endl;
    cout &lt;&lt; (r3 + (r4++)) &lt;&lt; endl;
    cout &lt;&lt; (r4) &lt;&lt; endl;
    cout &lt;&lt; (r5*r6) &lt;&lt; endl;
    cout &lt;&lt; (r6 &gt; r1) &lt;&lt; endl;
    cout &lt;&lt; (r6 == r4) &lt;&lt; endl;
    cout &lt;&lt; (r3 != r6) &lt;&lt; endl;
    cout &lt;&lt; (r3 += r2) &lt;&lt; endl;
    
	return 0;
</font>}</pre>
</body>
</html>
