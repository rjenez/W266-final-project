<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student5172.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1477.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;climits&gt;
class Razlomak
{
    long long int brojnik, nazivnik;
    static long long int NZD(long long int x, long long int y);
public:
    Razlomak(int x=0, int y=1);
    long long int DajBrojnik()const {
        return brojnik;
    }
    long long int DajNazivnik()const {
        return nazivnik;
    }
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, Razlomak r);
    friend Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator +(const Razlomak &amp;a);
    friend Razlomak operator -(const Razlomak &amp;a);
    friend Razlomak &amp;operator +=(Razlomak &amp;a, const Razlomak &amp;b) {
        a.brojnik+=b.brojnik;
        a.nazivnik+=b.nazivnik;
        return a;
    }
    friend Razlomak &amp;operator -=( Razlomak &amp;a, const Razlomak &amp;b) {
        a.brojnik-=b.brojnik;
        a.nazivnik-=b.nazivnik;
        return a;
    }
    friend Razlomak &amp;operator *=( Razlomak &amp;a, const Razlomak &amp;b) {
        a.brojnik*=b.brojnik;
        a.nazivnik*=b.nazivnik;
        return a;
    }
    friend Razlomak &amp;operator /=( Razlomak &amp;a, const Razlomak &amp;b) {
        a.brojnik/=b.brojnik;
        a.nazivnik/=b.nazivnik;
        return a;
    }
<a name="2"></a><font color="#0000FF"><a href="match164-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    friend Razlomak &amp;operator++(Razlomak &amp;r) {
        Razlomak p(1);
        Razlomak x=r+p;
        r.brojnik=x.brojnik;
        r.nazivnik=x.nazivnik;
        return r;
    }
    friend	Razlomak operator ++(Razlomak &amp;r, int) {
        Razlomak pomocni(r);
        Razlomak p(1);
        Razlomak x=r+p;
        r.brojnik=x.brojnik;
        r.nazivnik=x.nazivnik;
        return pomocni;
    }
    friend Razlomak &amp;operator--(Razlomak &amp;r) {
        Razlomak p(1);
</font>        Razlomak x=r-p;
<a name="10"></a><font color="#FF0000"><a href="match164-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        r.brojnik=x.brojnik;
        r.nazivnik=x.nazivnik;
        return r;
    }
    friend Razlomak operator --(Razlomak &amp;r, int) {
        Razlomak pomocni(r);
        Razlomak p(1);
</font>        Razlomak x=r-p;
<a name="9"></a><font color="#FF00FF"><a href="match164-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        r.brojnik=x.brojnik;
        r.nazivnik=x.nazivnik;
        return pomocni;
    }
    friend bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b);
</font>    friend bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator ==(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator !=(const Razlomak &amp;a, const Razlomak &amp;b);
<a name="5"></a><font color="#FF0000"><a href="match164-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    operator long double() const;


/*    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
         char znak;
         r:
         tok &gt;&gt; std::ws; // "Progutaj" razmake...
             tok &gt;&gt; r.brojnik;
             r.nazivnik = 1;
             tok &gt;&gt; znak;
             if(znak != '/') tok.setstate(std::ios::failbit);
             else tok &gt;&gt; r.nazivnik;
                     if(znak=='\n') return tok;

             tok &gt;&gt; std::ws; // "Progutaj" razmake...
             tok&gt;&gt;znak;
             if(znak&gt;='0' &amp;&amp; znak&lt;='9') goto r;
             if(znak!='\n' || !(znak&gt;='0' &amp;&amp; znak&lt;='9')) tok.setstate(std::ios::failbit);

     }*/
};
long long int Razlomak::NZD(long long int x, long long int y)
{
    while(y!=0) {
        long long int p(x);
        x=y;
        y=p%y;
        p=x;
        if(y==0) break;
    }
    return x;
}
Razlomak::Razlomak(int x, int y)
</font>{
    if(y==0) throw std::logic_error("Nekorektan razlomak");
    if(x&gt;0 &amp;&amp; y&lt;0) {
        x*=-1;
        y*=-1;
    }
    if(x&lt;0 &amp;&amp; y&lt;0) {
        x*=-1;
        y*=-1;
    }
    long long int p(x);
    long long int q(y);
    if(NZD(x, q)&lt;=x &amp;&amp; NZD(x, q)&lt;=y) {
        x=x/NZD(x, q);
        y=y/NZD(p, q);
    }
    Razlomak::brojnik=x;
    Razlomak::nazivnik=y;
}
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, Razlomak r)
{
    if(r.DajBrojnik()==0 || r.DajNazivnik()==1) tok&lt;&lt;r.DajBrojnik();
<a name="0"></a><font color="#FF0000"><a href="match164-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    else tok&lt;&lt;r.DajBrojnik()&lt;&lt;"/"&lt;&lt;r.DajNazivnik();
    return tok;
}
Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b)
{
    if(b.brojnik&gt;0 &amp;&amp; b.nazivnik&gt;0) {
        if(double(a.brojnik)/a.nazivnik&gt;(LLONG_MAX-double(b.brojnik)/b.nazivnik)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");

    }
    if(b.brojnik&lt;0 || b.nazivnik&lt;0) {
        if(double(a.brojnik)/a.nazivnik&lt;(LLONG_MIN-double(b.brojnik)/b.nazivnik)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");

    }
    long long int r=Razlomak::NZD(a.DajNazivnik(), b.DajNazivnik());
</font><a name="3"></a><font color="#00FFFF"><a href="match164-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    return {static_cast&lt;int&gt;(a.DajBrojnik()*(b.DajNazivnik()/r)+b.DajBrojnik()*(a.DajNazivnik()/r)),static_cast&lt;int&gt;(a.DajNazivnik()*(b.DajNazivnik()/r))};
}
Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b)
</font><a name="1"></a><font color="#00FF00"><a href="match164-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

{
    if(b.brojnik&gt;0 &amp;&amp; b.nazivnik&gt;0) {
        if(double(a.brojnik)/a.nazivnik&lt;(LLONG_MIN-double(b.brojnik)/b.nazivnik)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");

    }
    if(b.brojnik&lt;0 || b.nazivnik&lt;0) {
        if(double(a.brojnik)/a.nazivnik&gt;(LLONG_MAX-double(b.brojnik)/b.nazivnik)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");

    }
    long long int r=Razlomak::NZD(a.DajNazivnik(), b.DajNazivnik());
</font><a name="4"></a><font color="#FF00FF"><a href="match164-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    return {static_cast&lt;int&gt;(a.DajBrojnik()*(b.DajNazivnik()/r)-b.DajBrojnik()*(a.DajNazivnik()/r)),static_cast&lt;int&gt;(a.DajNazivnik()*(b.DajNazivnik()/r))};
}
Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b)
</font>{
    if(b.brojnik&gt;0 &amp;&amp; b.nazivnik&gt;0) {
<a name="8"></a><font color="#00FFFF"><a href="match164-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if((double(a.brojnik)/a.nazivnik&lt;(LLONG_MIN/double(b.brojnik)/b.nazivnik)) ||(double(a.brojnik)/a.nazivnik&gt;(LLONG_MAX/double(b.brojnik)/b.nazivnik)))throw std::overflow_error("Nemoguce dobiti tacan rezultat");

    }
    if(b.brojnik&lt;0 || b.nazivnik&lt;0) {
        if(double(a.brojnik)/a.nazivnik==LLONG_MIN ||((double(a.brojnik)/a.nazivnik)*-1)&gt;(LLONG_MAX/double(((b.brojnik)/b.nazivnik)*(-1)))||((double(a.brojnik)/a.nazivnik)*-1)&lt;(LLONG_MIN/double(((b.brojnik)/b.nazivnik)*(-1))))throw std::overflow_error("Nemoguce dobiti tacan rezultat");
</font>
    }
    long long int s=Razlomak::NZD(a.DajBrojnik(), b.DajNazivnik());
<a name="6"></a><font color="#00FF00"><a href="match164-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    long long int t=Razlomak::NZD(b.DajBrojnik(), a.DajNazivnik());
    return {static_cast&lt;int&gt;((a.DajBrojnik()/s)*(b.DajBrojnik()/t)),static_cast&lt;int&gt;((a.DajNazivnik()/t)*(b.DajNazivnik()/s))};
}
Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b)
</font>{
    long long int u=Razlomak::NZD(a.DajBrojnik(), b.DajBrojnik());
<a name="7"></a><font color="#0000FF"><a href="match164-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    long long int r=Razlomak::NZD(a.DajNazivnik(), b.DajNazivnik());
    return {static_cast&lt;int&gt;((a.DajBrojnik()/u)*(b.DajNazivnik()/r)),static_cast&lt;int&gt;((a.DajNazivnik()/r)*(b.DajBrojnik()/u))};
}
Razlomak operator +(const Razlomak &amp;a)
</font>{
    return a;
}
Razlomak operator -(const Razlomak &amp;a)
{
    return {static_cast&lt;int&gt;(a.brojnik)*-1, static_cast&lt;int&gt;(a.nazivnik)*-1};
}

bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long double x=(static_cast&lt;long double&gt;(a.brojnik))/a.nazivnik;
    long double y=(static_cast&lt;long double&gt;(b.brojnik))/b.nazivnik;
    return x&lt;y;
}
bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long double x=(static_cast&lt;long double&gt;(a.brojnik))/a.nazivnik;
    long double y=(static_cast&lt;long double&gt;(b.brojnik))/b.nazivnik;
    return x&gt;y;
}
bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long double x=(static_cast&lt;long double&gt;(a.brojnik))/a.nazivnik;
    long double y=(static_cast&lt;long double&gt;(b.brojnik))/b.nazivnik;
    return (x&lt;y || x==y);
}
bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long double x=(static_cast&lt;long double&gt;(a.brojnik))/a.nazivnik;
    long double y=(static_cast&lt;long double&gt;(b.brojnik))/b.nazivnik;
    return (x&gt;y || x==y);
}
bool operator ==(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long double x=(static_cast&lt;long double&gt;(a.brojnik))/a.nazivnik;
    long double y=(static_cast&lt;long double&gt;(b.brojnik))/b.nazivnik;
    return x==y;

}
bool operator !=(const Razlomak &amp;a, const Razlomak &amp;b)
{
    long double x=(static_cast&lt;long double&gt;(a.brojnik))/a.nazivnik;
    long double y=(static_cast&lt;long double&gt;(b.brojnik))/b.nazivnik;
    return !(x==y);
}
Razlomak::operator long double()const
{
    long double x=static_cast&lt;long double&gt;(brojnik)/nazivnik;
    return x;
}
int main ()
{
    return 0;
}</pre>
</body>
</html>
