<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9998.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1571.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;
#include &lt;limits&gt;

class Razlomak {
  long long int brojnik, nazivnik;
  static int NZD (long long int brojnik, long long int nazivnik) {
      if (nazivnik == 0) return brojnik;
      return NZD (nazivnik, (brojnik % nazivnik));
  }
  static bool DaLiSuIsti (long double a, long double b) {
    double eps (1e-10);
    return std::fabs (a - b) &lt;= eps * (std::fabs(a) + std::fabs(b));
  }
  static bool OverflowZaSabiranje (long long int x, long long int y) {
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    long long int M = std::numeric_limits&lt;long long int&gt;::max();
    bool uslov(false);
    if (y &gt; 0) {
      if (x &gt; M - y) uslov = true;
    }
    else if (y &lt; 0) {
      if (x &lt; m - y) uslov = true;
    }
    return uslov;
  }
  static bool OverflowZaOduzimanje (long long int x, long long int y) {
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    long long int M = std::numeric_limits&lt;long long int&gt;::max();
    bool uslov = false;
    if (y &lt; 0) {
      if (x &lt; m - y) uslov = true;
    }
    else if (y &gt; 0) {
      if (x &gt; M - y) uslov =  true;
    }
    return uslov;
  }
  static bool OverflowZaMnozenje (long long int x, long long int y) {
    long long int m = std::numeric_limits&lt;long long int&gt;::min();
    long long int M = std::numeric_limits&lt;long long int&gt;::max();
    bool uslov(false);
    if (y &gt; 0) {
      if ((x &lt; m / y) || (x &gt; M / y)) uslov = true;
    }
    else if (y &lt; 0) {
      if ((x == m) || (-x &gt; M / (-y)) || -x &lt; m / (-y)) uslov = true;
    }
    return uslov;
  }
  public:
  Razlomak (long long int brojnik = 0, long long int nazivnik = 1);
  long long int DajBrojnik() const { return brojnik; }
  long long int DajNazivnik() const { return nazivnik; }
  operator long double();
<a name="6"></a><font color="#00FF00"><a href="match521-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

  friend Razlomak operator+ (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak &amp;operator+= (Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak &amp;operator-= (Razlomak &amp;r1, const Razlomak &amp;r2);
</font>  friend Razlomak operator- (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator* (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak &amp;operator*= (Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator/ (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak &amp;operator/= (Razlomak &amp;r1, const Razlomak &amp;r2);
  friend Razlomak operator+ (const Razlomak &amp;r1) { return r1; }
  friend Razlomak &amp;operator- (Razlomak &amp;r1); 
  friend Razlomak &amp;operator-- (Razlomak &amp;r1) { return r1-=1; }
  friend Razlomak &amp;operator++ (Razlomak &amp;r1) { return r1+=1; }
  friend Razlomak operator--  (Razlomak &amp;r1, int n);
  friend Razlomak operator++  (Razlomak &amp;r1, int n);
  friend bool operator&lt;  (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator&gt;  (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator== (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator!= (const Razlomak &amp;r1, const Razlomak &amp;r2) { return !(r1 == r2); }
  friend bool operator&lt;= (const Razlomak &amp;r1, const Razlomak &amp;r2);
  friend bool operator&gt;= (const Razlomak &amp;r1, const Razlomak &amp;r2); 
  //friend std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok, Razlomak &amp;r);
  friend std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, Razlomak &amp;r);
};
Razlomak::Razlomak (long long int brojnik, long long int nazivnik) {
    if (brojnik &lt; 0 &amp;&amp; nazivnik &lt; 0) {
      brojnik *= -1;
      nazivnik *= -1;
      Razlomak::brojnik = brojnik;
      Razlomak::nazivnik = nazivnik;
    }
    else if (brojnik &lt; 0) {
      Razlomak::brojnik = brojnik;
      Razlomak::nazivnik = nazivnik;
    }
    else if (nazivnik &lt; 0) {
      brojnik *= -1;
      nazivnik *= -1;
      Razlomak::brojnik = brojnik;
      Razlomak::nazivnik = nazivnik;
    }
    else if (nazivnik == 0) throw std::logic_error ("Nekorektan razlomak");
    
    if (NZD(brojnik, nazivnik) == 1) {
        Razlomak::brojnik = brojnik;
        Razlomak::nazivnik = nazivnik;
    }
    else {
        Razlomak::brojnik = brojnik / (std::abs(NZD (brojnik, nazivnik)));
        Razlomak::nazivnik = nazivnik /(std::abs(NZD (brojnik, nazivnik)));
    }
}
Razlomak operator+ (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  if (Razlomak::OverflowZaSabiranje(r1.DajBrojnik(), r1.DajNazivnik()) || Razlomak::OverflowZaSabiranje(r2.DajBrojnik(), r2.DajNazivnik())) 
    throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="1"></a><font color="#00FF00"><a href="match521-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

  int r(Razlomak::NZD(r1.DajNazivnik(), r2.DajNazivnik()));
  return {r1.DajBrojnik() * (r2.DajNazivnik() / r) + r2.DajBrojnik() * (r1.DajNazivnik() / r), r1.DajNazivnik() * (r2.DajNazivnik() / r)};
}
Razlomak &amp;operator+= (Razlomak &amp;r1, const Razlomak &amp;r2) {
</font>  if (Razlomak::OverflowZaSabiranje(r1.DajBrojnik(), r1.DajNazivnik()) || Razlomak::OverflowZaSabiranje(r2.DajBrojnik(), r2.DajNazivnik()))
    throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="3"></a><font color="#00FFFF"><a href="match521-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

  int r(Razlomak::NZD (r1.DajNazivnik(), r2.DajNazivnik()));
  r1.brojnik = r1.DajBrojnik() * (r2.DajNazivnik() / r) + r2.DajBrojnik() * (r1.DajNazivnik() / r);
  r1.nazivnik =r1.DajNazivnik() * (r2.DajNazivnik() / r);
</font>  long long int a(r1.brojnik), b(r1.nazivnik);
  Razlomak pomocni(a, b);
  r1 = pomocni;
  return r1;
}
Razlomak operator- (const Razlomak &amp;r1, const Razlomak &amp;r2) {
 if (Razlomak::OverflowZaOduzimanje(r1.DajBrojnik(), r1.DajNazivnik()) || Razlomak::OverflowZaOduzimanje(r2.DajBrojnik(), r2.DajNazivnik()))
   throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="2"></a><font color="#0000FF"><a href="match521-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

  int r(Razlomak::NZD (r1.DajNazivnik(), r2.DajNazivnik()));
  return {r1.DajBrojnik() * (r2.DajNazivnik() / r) - r2.DajBrojnik() * (r1.DajNazivnik() / r), r1.DajNazivnik() *  (r2.DajNazivnik() / r)};
</font>}
Razlomak &amp;operator-= (Razlomak &amp;r1, const Razlomak &amp;r2) {
  if (Razlomak::OverflowZaOduzimanje(r1.DajBrojnik(), r1.DajNazivnik()) || Razlomak::OverflowZaOduzimanje(r2.DajBrojnik(), r2.DajNazivnik()))
     throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="0"></a><font color="#FF0000"><a href="match521-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  int r(Razlomak::NZD (r1.DajNazivnik(), r2.DajNazivnik()));
  r1.brojnik = r1.DajBrojnik() * (r2.DajNazivnik() / r) - r2.DajBrojnik() * (r1.DajNazivnik() / r);
  r1.nazivnik = r1.DajNazivnik() * (r2.DajNazivnik() / r);
  Razlomak pomocni (r1.brojnik, r1.nazivnik);
</font>  r1 = pomocni;
  return r1;
}
Razlomak operator* (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  if (Razlomak::OverflowZaMnozenje(r1.DajBrojnik(), r1.DajNazivnik()) || Razlomak::OverflowZaMnozenje(r2.DajBrojnik(), r2.DajNazivnik()))
    throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="4"></a><font color="#FF00FF"><a href="match521-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

  int s (Razlomak::NZD (r1.DajBrojnik(), r2.DajNazivnik())), t (Razlomak::NZD (r2.DajBrojnik(), r1.DajNazivnik()));
  return {((r1.DajBrojnik() / s) * (r2.DajBrojnik() / t)), ((r1.DajNazivnik() / t) * (r2.DajNazivnik() /s))};
</font>}
Razlomak &amp;operator*= (Razlomak &amp;r1, const Razlomak &amp;r2) {
  if (Razlomak::OverflowZaMnozenje(r1.DajBrojnik(), r1.DajNazivnik()) || Razlomak::OverflowZaMnozenje(r2.DajBrojnik(), r2.DajNazivnik()))
    throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
<a name="5"></a><font color="#FF0000"><a href="match521-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  int s(Razlomak::NZD (r1.DajBrojnik(), r2.DajNazivnik())), t(Razlomak::NZD (r2.DajBrojnik(), r1.DajNazivnik()));
  r1.brojnik = (r1.DajBrojnik() / s) * (r2.DajBrojnik() / t);
  r1.nazivnik = (r1.DajNazivnik() / t) * (r2.DajNazivnik() / s);
</font>  Razlomak pomocni (r1.brojnik, r1.nazivnik);
  r1 = pomocni;
  return r1;
}
Razlomak operator/ (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  int u (Razlomak::NZD(r1.DajBrojnik(), r2.DajBrojnik())), r(Razlomak::NZD (r1.DajNazivnik(), r2.DajNazivnik()));
  return {((r1.DajBrojnik() / u) * (r2.DajNazivnik() / r)), ((r1.DajNazivnik() /r) * (r2.DajBrojnik() / u))};
}
Razlomak &amp;operator/= (Razlomak &amp;r1, const Razlomak &amp;r2) {
  int u(Razlomak::NZD (r1.DajBrojnik(), r2.DajBrojnik())), r(Razlomak::NZD (r1.DajNazivnik(), r2.DajNazivnik()));
  r1.brojnik = (r1.DajBrojnik() / u) * (r2.DajNazivnik() / r);
  r1.nazivnik = (r1.DajNazivnik() / r) * (r2.DajBrojnik() / u);
  Razlomak pomocni (r1.brojnik, r1.nazivnik);
  r1 = pomocni;
  return r1;
}
Razlomak &amp;operator- (Razlomak &amp;r1) {
  Razlomak pom (-r1.DajBrojnik(), r1.DajNazivnik());
  r1 = pom;
  return r1;
}
std::ostream  &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
  if (r.DajNazivnik() == 1) std::cout &lt;&lt; r.DajBrojnik();
  else std::cout &lt;&lt;r.DajBrojnik() &lt;&lt; "/" &lt;&lt; r.DajNazivnik();
  return tok;
}
std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, Razlomak &amp;r) {
  char znak;
  long long int a, b;
  tok &gt;&gt; std::ws;
  tok &gt;&gt; a;
  if (tok.peek() != '/') {
    r.brojnik = a;
    r.nazivnik = 1;
    return tok;
  }
  tok &gt;&gt; znak;
  if (znak != '/') tok.setstate (std::ios::failbit);
  tok &gt;&gt; b;
  if (tok.peek() != '\n' &amp;&amp; tok.peek() != '\t' &amp;&amp; tok.peek() != '\v' &amp;&amp; tok.peek() != ' ' &amp;&amp; tok.peek() != '\f') tok.setstate (std::ios::failbit);
  if (Razlomak::NZD(a, b) == 1) {
    r.brojnik = a;
    r.nazivnik = b;
    return tok;
  }
  else {
    r.brojnik = a / (Razlomak::NZD (a, b));
    r.nazivnik = b / (Razlomak::NZD (a, b));
    return tok;
  }
}
Razlomak::operator long double() {
  long double rezultat = (static_cast&lt;long double&gt; (brojnik)) / nazivnik;
  return rezultat;
}
Razlomak operator++ (Razlomak &amp;r1, int n) {
  Razlomak pomocni (r1);
  ++r1;
  return pomocni;
}
Razlomak operator-- (Razlomak &amp;r1, int n) {
  Razlomak pomocni (r1);
  --r1;
  return pomocni;
}
bool operator&lt; (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  long double vr1 = (static_cast&lt;long double&gt; (r1.brojnik)) / r1.nazivnik;
  long double vr2 = (static_cast&lt;long double&gt; (r2.brojnik)) / r2.nazivnik;
  return vr1 &lt; vr2;
}
bool operator &gt; (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  long double vr1 = (static_cast&lt;long double&gt; (r1.brojnik)) / r1.nazivnik;
  long double vr2 = (static_cast&lt;long double&gt; (r2.brojnik)) / r2.nazivnik;
  return vr1 &gt; vr2;
}
bool operator== (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  long double vr1 = (static_cast&lt;long double&gt; (r1.brojnik)) / r1.nazivnik;
  long double vr2 = (static_cast&lt;long double&gt; (r2.brojnik)) / r2.nazivnik;
  return Razlomak::DaLiSuIsti(vr1, vr2);
}
bool operator&lt;= (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  long double vr1 = (static_cast&lt;long double&gt; (r1.brojnik)) / r1.nazivnik;
  long double vr2 = (static_cast&lt;long double&gt; (r2.brojnik)) / r2.nazivnik;
  return vr1 &lt;= vr2;
}
bool operator &gt;= (const Razlomak &amp;r1, const Razlomak &amp;r2) {
  long double vr1 = (static_cast&lt;long double&gt; (r1.brojnik)) / r1.nazivnik;
  long double vr2 = (static_cast&lt;long double&gt; (r2.brojnik)) / r2.nazivnik;
  return vr1 &gt;= vr2;
}
int main ()
{
    try {
      Razlomak r(1,-2),p{1,2}; // konstruktori
      std::cout &lt;&lt; r + p; // operator+s
      std::cout &lt;&lt; std::endl &lt;&lt; r - p; // operator-
      std::cout &lt;&lt; std::endl &lt;&lt; r * p &lt;&lt; std::endl; // operator*
      std::cout &lt;&lt; r/p &lt;&lt; std::endl; // operator/
      if (r &lt; p) std::cout &lt;&lt; "Manji je!"; // operator &lt;
      else std::cout &lt;&lt; "Nije manji!"; 
      if (p &gt; r) std::cout &lt;&lt; std::endl &lt;&lt; "Veci je!"; // operator &gt;
      else std::cout &lt;&lt; std::endl&lt;&lt; "Nije veci!";
      std::cout &lt;&lt; std::endl &lt;&lt; --r; // operator-- prefiksni
      std::cout &lt;&lt; std::endl &lt;&lt; ++r; // operator++ prefiksni
      r += p; // operator +=
      std::cout &lt;&lt; std::endl &lt;&lt; r;
      r -= p; // operator -=
      std::cout &lt;&lt; std::endl &lt;&lt; r;
      r *= p; // operator *=
      std::cout &lt;&lt; std::endl &lt;&lt; r;
      r /= p; // operator /=
      std::cout &lt;&lt; std::endl &lt;&lt; r &lt;&lt; std::endl;
      Razlomak a;
      std::cin &gt;&gt; a;
      std::cout &lt;&lt; a;
      -r;
      std::cout &lt;&lt; r;
  }
  catch (std::overflow_error por) {
    std::cout &lt;&lt; por.what();
  }
  catch (std::logic_error por) {
    std::cout &lt;&lt; por.what();
  }
	return 0;
}</pre>
</body>
</html>
