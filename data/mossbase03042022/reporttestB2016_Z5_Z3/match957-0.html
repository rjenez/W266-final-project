<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2230.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2230.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match957-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;cmath&gt;

#define epsilon 0.00000001

class Razlomak{
  long long int brojnik,nazivnik;
  static long long int NZD(long long int a, long long int b){
</font>      if(a&lt;b){
          long long int tmp=a;
          a=b;
          b=tmp;
      }
      while(b!=0){
          long long int c(a);
          long long int d(b);
          a=d;
          b=c%d;
      }
      return a;
  }
  const static long long int m=std::numeric_limits&lt;long long int&gt;::min();
  const static long long int M=std::numeric_limits&lt;long long int&gt;::max();
  static void IzvanSabiranja(long long int x, long long int y){
      if(y&gt;0){
          if(x&gt;M-y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
      }
      else{
          if(x&lt;m-y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
      }
  }
  static void IzvanOduzimanja(long long int x, long long int y){
      IzvanSabiranja(x,(-1)*y);
  }
  static void IzvanMnozenja(long long int x, long long int y){
      if(y&gt;0){
          if(x&lt;m/y || x&gt;M/y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
      }
      else{
          if(x==m || (-1)*x&gt;M/((-1)*y) || (-1)*x&lt;m/((-1)*y)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
      }
  }
public:
    Razlomak(long long int brojnik=0,long long int nazivnik=1):brojnik(brojnik), nazivnik(nazivnik){
        if(nazivnik==0) throw std::logic_error("Nekorektan razlomak");
        if(nazivnik&lt;0 &amp;&amp; brojnik&gt;0) {Razlomak::nazivnik=(-1)*nazivnik; Razlomak::brojnik=(-1)*brojnik;}
        if(nazivnik&lt;0 &amp;&amp; brojnik&lt;0) {Razlomak::nazivnik=(-1)*nazivnik; Razlomak::brojnik=(-1)*brojnik;}
        
        long long int broj=NZD(brojnik,nazivnik);
        brojnik/=broj;
        this-&gt;brojnik=brojnik;
        nazivnik/=broj;
        this-&gt;nazivnik=nazivnik;
    };
    Razlomak(const Razlomak &amp;a){
        this-&gt;brojnik=a.brojnik;
        this-&gt;nazivnik=a.nazivnik;
    }
    void Ispisi() const;
    long long int DajBrojnik() const {return brojnik;}
    long long int DajNazivnik() const {return nazivnik;}
    friend Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b); 
    friend Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator +(const Razlomak &amp;a){ return a;}
    friend Razlomak operator -(const Razlomak &amp;a){ return {-a.brojnik,a.nazivnik};}
    friend Razlomak &amp;operator +=(Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak &amp;operator -=(Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak &amp;operator *=(Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak &amp;operator /=(Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak &amp;operator ++(Razlomak &amp;a);
    friend Razlomak operator ++(Razlomak &amp;a, int);
    friend Razlomak &amp;operator --(Razlomak &amp;a);
    friend Razlomak operator --(Razlomak &amp;a, int);
    friend bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b);
<a name="0"></a><font color="#FF0000"><a href="match957-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    friend bool operator ==(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator !=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;a);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;a);
    operator long double() const{return brojnik/(long double) nazivnik;}
</font>    
};
void Razlomak::Ispisi()const{
    std::cout&lt;&lt;DajBrojnik()&lt;&lt;" "&lt;&lt;DajNazivnik();
}
Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b){
    long long int r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik,b.nazivnik/r);
    Razlomak::IzvanMnozenja(b.brojnik,a.nazivnik/r);
    Razlomak::IzvanMnozenja(a.nazivnik,b.nazivnik/r);
    long long int brojnik=a.brojnik*(b.nazivnik/r)+b.brojnik*(a.nazivnik/r);
    long long int nazivnik=(a.nazivnik*(b.nazivnik/r));
    Razlomak::IzvanSabiranja(brojnik,nazivnik);
    Razlomak novi(brojnik,nazivnik);
    return novi;
}
Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b){
    long long int r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik,b.nazivnik/r);
    Razlomak::IzvanMnozenja(b.brojnik,a.nazivnik/r);
    Razlomak::IzvanMnozenja(a.nazivnik,b.nazivnik/r);
    long long int brojnik=a.brojnik*(b.nazivnik/r)-b.brojnik*(a.nazivnik/r);
    long long int nazivnik=a.nazivnik*(b.nazivnik/r);
    Razlomak::IzvanOduzimanja(brojnik,nazivnik);
    Razlomak novi(brojnik,nazivnik);
    return novi;
}
Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b){
    long long int s=Razlomak::NZD(a.brojnik,b.nazivnik);
    long long int t=Razlomak::NZD(b.brojnik,a.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik/s,b.brojnik/t);
    Razlomak::IzvanMnozenja(a.nazivnik/t,b.nazivnik/s);
    long long int brojnik=(a.brojnik/s)*(b.brojnik/t);
    long long int nazivnik=(a.nazivnik/t)*(b.nazivnik/s);
    Razlomak novi(brojnik,nazivnik);
    return novi;
}
Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b){
    long long int u=Razlomak::NZD(a.brojnik,b.brojnik);
    long long int r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik/u,b.nazivnik/r);
    Razlomak::IzvanMnozenja(a.nazivnik/r,b.brojnik/u);
    long long int brojnik=(a.brojnik/u)*(b.nazivnik/r);
    long long int nazivnik=(a.nazivnik/r)*(b.brojnik/u);
    Razlomak novi(brojnik,nazivnik);
    return novi;
}
Razlomak &amp;operator +=(Razlomak &amp;a, const Razlomak &amp;b){
    long long int r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik,b.nazivnik/r);
    Razlomak::IzvanMnozenja(b.brojnik,a.nazivnik/r);
    Razlomak::IzvanMnozenja(a.nazivnik,b.nazivnik/r);
    Razlomak::IzvanSabiranja(a.brojnik*(b.nazivnik/r),b.brojnik*(a.nazivnik/r));
    a.brojnik=a.brojnik*(b.nazivnik/r)+b.brojnik*(a.nazivnik/r);
    a.nazivnik=a.nazivnik*(b.nazivnik/r);
    
    long long int broj=Razlomak::NZD(a.brojnik,a.nazivnik);
    a.brojnik/=broj;
    a.nazivnik/=broj;
    return a;
}
Razlomak &amp;operator -=(Razlomak &amp;a, const Razlomak &amp;b){
    long long int r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik,b.nazivnik/r);
    Razlomak::IzvanMnozenja(b.brojnik,a.nazivnik/r);
    Razlomak::IzvanMnozenja(a.nazivnik,b.nazivnik/r);
    Razlomak::IzvanOduzimanja(a.brojnik*(b.nazivnik/r),b.brojnik*(a.nazivnik/r));
    
    a.brojnik=a.brojnik*(b.nazivnik/r) + b.brojnik*(a.nazivnik/r);
    a.nazivnik=a.nazivnik *(b.nazivnik/r);
    
    long long int broj=Razlomak::NZD(a.brojnik,a.nazivnik);
    a.brojnik/=broj;
    a.nazivnik/=broj;
    
    return a;
}
Razlomak &amp;operator *=(Razlomak &amp;a, const Razlomak &amp;b){
    long long int s=Razlomak::NZD(a.brojnik,b.nazivnik);
    long long int t=Razlomak::NZD(b.brojnik,a.nazivnik);
    Razlomak::IzvanMnozenja(a.brojnik/s,b.brojnik/t);
    Razlomak::IzvanMnozenja(a.nazivnik/t,b.nazivnik/s);
    a.brojnik=(a.brojnik/s)*(b.brojnik/t);
    a.nazivnik=(a.nazivnik/t)*(b.nazivnik/s);
    long long int broj=Razlomak::NZD(a.brojnik,a.nazivnik);
    a.brojnik/=broj;
    a.nazivnik/=broj;
    return a;
}
Razlomak &amp;operator /=(Razlomak &amp;a, const Razlomak &amp;b){
    long long int r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    long long int u=Razlomak::NZD(a.brojnik,b.brojnik);
    Razlomak::IzvanMnozenja(a.brojnik/u,b.nazivnik/r);
    Razlomak::IzvanMnozenja(a.nazivnik/r, b.brojnik/u);
    a.brojnik=(a.brojnik/u)*(b.nazivnik/r);
    a.nazivnik=(a.nazivnik/r)*(b.brojnik/u);
    long long int broj=Razlomak::NZD(a.brojnik,a.nazivnik);
    a.brojnik/=broj;
    a.nazivnik/=broj;
    return a;
}
Razlomak &amp;operator ++(Razlomak &amp;a){
    Razlomak pomocni(1,1);
    a=pomocni+a;
    return a;
}
Razlomak operator ++(Razlomak &amp;a,int){
    Razlomak pomocni=a;
    ++a;
    return pomocni;
}
Razlomak &amp;operator --(Razlomak &amp;a){
    Razlomak pomocni(1,1);
    a=a-pomocni;
    return a;
}
Razlomak operator --(Razlomak &amp;a,int){
    Razlomak pomocni=a;
    --a;
    return pomocni;
}
bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b){
    long double prvi=a.brojnik/a.nazivnik;
    long double drugi=b.brojnik/b.nazivnik;
    if(prvi-drugi&lt;0) return true;
    else return false;
}
bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b){
    long double prvi=a.brojnik/a.nazivnik;
    long double drugi=b.brojnik/b.nazivnik;
    if(prvi-drugi&gt;0) return true;
    else return false;
}
bool operator ==(const Razlomak &amp;a, const Razlomak &amp;b){
    long double prvi=a.brojnik/a.nazivnik;
    long double drugi=b.brojnik/b.nazivnik;
    if(fabs(prvi-drugi)&lt;epsilon) return true;
    else return false;
}
<a name="1"></a><font color="#00FF00"><a href="match957-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

bool operator !=(const Razlomak &amp;a, const Razlomak &amp;b){
    return !(a==b);
}
bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b){
    return (a&lt;b || a==b);
}
bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b){
    return (a&gt;b || a==b);
}
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;a){
    if(a.nazivnik==1){
</font>        return tok&lt;&lt;a.brojnik;
    }
    else{
        return tok&lt;&lt;a.brojnik&lt;&lt;"/"&lt;&lt;a.nazivnik;
    }
}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;a){
    char znak;
    tok&gt;&gt;std::ws;
    tok&gt;&gt;a.brojnik&gt;&gt;znak;
    if(znak!='/') tok.setstate(std::ios::failbit);
    tok&gt;&gt;a.nazivnik;
    return tok;
}
int main ()
{
    Razlomak razlomak{10,15};
    razlomak.Ispisi();
	return 0;
}</pre>
</body>
</html>
