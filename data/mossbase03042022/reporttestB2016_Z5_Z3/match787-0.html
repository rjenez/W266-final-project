<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2364.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2364.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;limits&gt;

const long long int MAX(std::numeric_limits&lt;long long int&gt;::max());
const long long int MIN(std::numeric_limits&lt;long long int&gt;::min());

class Razlomak {
    long long int brojnik;
    long long int nazivnik;
    static int Nzd(long long int p = 0, long long int q = 1);
<a name="2"></a><font color="#0000FF"><a href="match787-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    static long long int Saberi(long long int x, long long int y);
    static long long int Oduzmi(long long int x, long long int y);
    static long long int Mnozi(long long int x, long long int y);
</font>public:
    Razlomak(long long int p, long long int q);
    Razlomak(long double p) { brojnik = p; nazivnik = 1; }
    Razlomak() { brojnik = 0; nazivnik = 1; }
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    operator long double ()const;
    Razlomak operator -(){ if(this-&gt;brojnik == MIN) throw std::overflow_error("Nemoguce dobiti tacan rezultat"); return {-(this-&gt;brojnik), this-&gt;nazivnik}; }
    Razlomak operator +(){ return *this; }
    Razlomak &amp;operator ++(){ return *this+=1; }
    Razlomak operator ++(int){ Razlomak k = *this; *this+=1; return k; }
    Razlomak &amp;operator --(){ return *this-=1; }
    Razlomak operator --(int){ Razlomak k = *this; *this-=1; return k; }
    friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator+=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="0"></a><font color="#FF0000"><a href="match787-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    friend Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
</font>    friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
};
Razlomak::Razlomak(long long int p, long long int q){
    if(q == 0) throw std::logic_error("Nekorektan razlomak");
    long long int djelilac(Nzd(p,q));
    if(p &lt; 0 &amp;&amp; q &lt; 0) { p = -p;  q = -q; }
    else if(q &lt; 0) { p = -p; q = -q; }
    brojnik = p/djelilac; nazivnik = q/djelilac;
}
int Razlomak::Nzd(long long int p, long long int q){
    if(p &lt; 0) p = -p; else if(q &lt; 0) q = -q;
    if(p &lt; q){
        long long int temp = p;
        p = q;
        q = temp;
    }
    long long int nzd(1);
    if(q == 0){
        nzd = p;
        return p;
    }
    else return Razlomak::Nzd(q, p % q);
}
long long int Razlomak::Saberi(long long int x, long long int y){
    if(y &gt; 0)
        if(x &gt; MAX-y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(y &lt; 0)
        if(x &lt; MIN-y) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return x + y;
}
long long int Razlomak::Oduzmi(long long int x, long long int y){
    return Razlomak::Saberi(x, -y);
}
long long int Razlomak::Mnozi(long long int x, long long int y){
    if(y &gt; 0)
        if((x &lt; MIN / y) || (x &gt; MAX / y))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    if(y &lt; 0)
        if((x == -MAX - 1) ||(-x &gt; MAX / (-y)) || (-x &lt; MIN / (-y)))
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return x * y;
}
<a name="3"></a><font color="#00FFFF"><a href="match787-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long long int r = Razlomak::Nzd(r1.nazivnik, r2.nazivnik);
    long long int gornji, donji;
</font>    try{
<a name="4"></a><font color="#FF00FF"><a href="match787-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    gornji = Razlomak::Saberi(Razlomak::Mnozi(r1.brojnik,(r2.nazivnik/r)), Razlomak::Mnozi(r2.brojnik,(r1.nazivnik/r)));
</font>    donji = Razlomak::Mnozi(r1.nazivnik,r2.nazivnik / r);
    }catch(...){
        throw;
    }
    Razlomak r3(gornji, donji);
    return r3;
}
Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long long int r(Razlomak::Nzd(r1.nazivnik, r2.nazivnik));
    long long int gornji, donji;
    try{
<a name="5"></a><font color="#FF0000"><a href="match787-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    gornji = Razlomak::Oduzmi(Razlomak::Mnozi(r1.brojnik, (r2.nazivnik/r)), Razlomak::Mnozi(r2.brojnik, (r1.nazivnik/r)));
</font>    donji = Razlomak::Mnozi(r1.nazivnik, r2.nazivnik / r);
    }catch(...){
        throw;
    }
    Razlomak r3(gornji, donji);
    return r3;
}
Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long long int s(Razlomak::Nzd(r1.brojnik, r2.nazivnik));
    long long int t(Razlomak::Nzd(r2.brojnik, r1.nazivnik));
    long long int gornji, donji;
    try{
    gornji = Razlomak::Mnozi((r1.brojnik/s), (r2.brojnik/t));
    donji = Razlomak::Mnozi((r1.nazivnik/t), (r2.nazivnik/s));
    }catch(...){
        throw;
    }
    Razlomak r3(gornji, donji);
    return r3;
}
Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long long int u(Razlomak::Nzd(r1.brojnik, r2.brojnik));
    long long int r(Razlomak::Nzd(r1.nazivnik, r2.nazivnik));
    long long int gornji, donji;
    try{
    gornji = Razlomak::Mnozi((r1.brojnik/u), (r2.nazivnik/r));
    donji = Razlomak::Mnozi((r1.nazivnik/r), (r2.brojnik/u));
    }catch(...){
        throw;
    }
    Razlomak r3(gornji, donji);
    return r3;
}
Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak &amp;r2){
    return r1 = r1 * r2;
}
Razlomak &amp;operator+=(Razlomak &amp;r1, const Razlomak &amp;r2){
    return r1 = r1 + r2;
}
Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak &amp;r2){
    return r1 = r1 - r2;
}
Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak &amp;r2){
    return r1 = r1 / r2;
}
bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long double p(r1.brojnik / (long double)r1.nazivnik); long double q(r2.brojnik / (long double)r2.nazivnik); return p &lt; q;
}
bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long double p(r1.brojnik / (long double)r1.nazivnik); long double q(r2.brojnik / (long double)r2.nazivnik); return p &gt; q;
}
bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){
    if(r1 &gt; r2)return false; return true;
}
bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){
    if(r1 &lt; r2)return false; return true;
}
<a name="1"></a><font color="#00FF00"><a href="match787-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r){
    if(r.nazivnik == 1){
        tok &lt;&lt; r.brojnik;
    }
    else{
        tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik;
    }
    return tok;
}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r){
</font>    tok &gt;&gt; std::ws;
    char znak = tok.peek();
    if(!(znak &gt;= '0' &amp;&amp; znak &lt;='9')) tok.setstate(std::ios::failbit);
    else{
    tok &gt;&gt; r.brojnik;
    r.nazivnik = 1;
    znak = tok.peek();
    if(znak == ' ' || znak == tok.eof() ||znak == '\n'){
        return tok;
    }
    else if(znak == '/'){
        tok.get();
        if(tok.peek())
        r.nazivnik = 1;
        tok &gt;&gt; r.nazivnik;
        if(tok.peek() != ' ' &amp;&amp; tok.peek() != '\n' &amp;&amp; tok.peek() != tok.eof()) tok.setstate(std::ios::failbit);
        }
    }
    r = Razlomak(r.brojnik, r.nazivnik);
    return tok;
}
bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (r1.brojnik == r2.brojnik &amp;&amp; r1.nazivnik == r2.nazivnik);
}
bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2){
    return (!(r1 == r2));
}
Razlomak::operator long double() const {
    long double novi;
    novi = (long double)this-&gt;brojnik / this-&gt;nazivnik;
    return novi;
}
int main ()
{
   try{
       Razlomak c{-1, MIN};
       std::cout &lt;&lt; c; 
   }catch(std::logic_error iz){
       std::cout &lt;&lt; iz.what();
   }catch(std::overflow_error iz){
       std::cout &lt;&lt; iz.what();
   }
	return 0;
}</pre>
</body>
</html>
