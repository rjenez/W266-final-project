<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student8794.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2068.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;sstream&gt;

#define eps 1E-10

class Razlomak {
    long long int brojnik, nazivnik;
<a name="3"></a><font color="#00FFFF"><a href="match600-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    static long long int NZD(long long int a, long long int b) { if(b==0) return a; return NZD(b, a%b); }
</font>    static long long int Sabiranje(long long int a, long long int b) { 
        if((b&gt;0 &amp;&amp; a&gt;(std::numeric_limits&lt;long long int&gt;::max()-b)) || (b&lt;0 &amp;&amp; a&lt;(std::numeric_limits&lt;long long int&gt;::lowest()-b))) throw std::overflow_error("Nemoguce dobiti tacan rezultat"); 
        return a+b;
    }
    static long long int Mnozenje(long long int a, long long int b) {
        bool s=false;
        if(b&gt;0 &amp;&amp; (a&lt;(std::numeric_limits&lt;long long int&gt;::lowest()/b) || a&gt;(std::numeric_limits&lt;long long int&gt;::max()/b))) s=true;
        else if(b&lt;0 &amp;&amp; (a==std::numeric_limits&lt;long long int&gt;::lowest() || (-1*a)&gt;(std::numeric_limits&lt;long long int&gt;::max()/(-1*b)) || (-1*a)&lt;(std::numeric_limits&lt;long long int&gt;::lowest()/(-1*b)))) s=true;
        if(s) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        return a*b;
    }
public:
    Razlomak(long long int a=0, long long int b=1);
<a name="0"></a><font color="#FF0000"><a href="match600-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_12.gif"/></a>

    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    
    Razlomak&amp; operator +=(const Razlomak &amp;drugi) { return *this=*this+drugi; }
    Razlomak&amp; operator -=(const Razlomak &amp;drugi) { return *this=*this-drugi; }
    Razlomak&amp; operator *=(const Razlomak &amp;drugi) { return *this=*this*drugi; }
    Razlomak&amp; operator /=(const Razlomak &amp;drugi) { return *this=*this/drugi; }
    
    Razlomak&amp; operator ++() { return *this+=1; }
    Razlomak&amp; operator --() { return *this-=1; }
    Razlomak operator ++(int) { auto pomocna(*this); *this+=1; return pomocna; }
    Razlomak operator --(int) { auto pomocna(*this); *this-=1; return pomocna; }
    
    friend Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b);
</font>    friend Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b);
<a name="1"></a><font color="#00FF00"><a href="match600-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    friend Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b);
    friend Razlomak operator +(const Razlomak &amp;a);
    friend Razlomak operator -(const Razlomak &amp;a);
    
    friend bool operator &lt;(const Razlomak &amp;a, const Razlomak &amp;b) { long double x=a.brojnik/a.nazivnik, y=b.brojnik/b.nazivnik; return x&lt;y; }
</font>    friend bool operator &lt;=(const Razlomak &amp;a, const Razlomak &amp;b) { return a&lt;b || (a.brojnik==b.brojnik &amp;&amp; a.nazivnik==b.nazivnik); }
    friend bool operator &gt;(const Razlomak &amp;a, const Razlomak &amp;b) { return !(a&lt;=b); }
    friend bool operator &gt;=(const Razlomak &amp;a, const Razlomak &amp;b) { return !(a&lt;b); }
    
<a name="2"></a><font color="#0000FF"><a href="match600-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    friend std::ostream&amp; operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;a) { tok &lt;&lt; a.brojnik; if(a.nazivnik!=1) tok &lt;&lt; "/" &lt;&lt; a.nazivnik; return tok; }
    friend std::istream&amp; operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;a);
</font>    
    operator long double() { return brojnik/nazivnik; }
};

Razlomak::Razlomak(long long int a, long long int b) {
    if(b&lt;0) { b*=-1; a*=-1; }
    else if(fabs(b)&lt;eps) throw std::logic_error("Nekorektan razlomak");
    long long int p=NZD(a, b);
    brojnik=a/=p; nazivnik=b/=p;
}

Razlomak operator +(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int r=Razlomak::NZD(a.nazivnik, b.nazivnik);
    long long int prvi=b.nazivnik/r, drugi=a.nazivnik/r;
    return Razlomak(Razlomak::Sabiranje(Razlomak::Mnozenje(a.brojnik,prvi),Razlomak::Mnozenje(b.brojnik,drugi)), Razlomak::Mnozenje(a.nazivnik,prvi));
}
Razlomak operator -(const Razlomak &amp;a, const Razlomak &amp;b) { return a+(-b); }
Razlomak operator *(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int s=Razlomak::NZD(a.brojnik, b.nazivnik), t=Razlomak::NZD(b.brojnik, a.nazivnik);
    return Razlomak(Razlomak::Mnozenje(a.brojnik/s, b.brojnik/t),Razlomak::Mnozenje(a.nazivnik/t, b.nazivnik/s));
}
Razlomak operator /(const Razlomak &amp;a, const Razlomak &amp;b) {
    long long int r=Razlomak::NZD(a.nazivnik, b.nazivnik), u=Razlomak::NZD(a.brojnik, b.brojnik);
    return Razlomak(Razlomak::Mnozenje(a.brojnik/u, b.nazivnik/r), Razlomak::Mnozenje(a.nazivnik/r, b.brojnik/u));
}

Razlomak operator +(const Razlomak &amp;a) { return a; }
Razlomak operator -(const Razlomak &amp;a) { return Razlomak(Razlomak::Mnozenje(a.DajBrojnik(),-1), a.DajNazivnik()); }

bool DaLiJeBjelina(char c) {
    if(c=='\n' || c=='\t' || c=='\f' || c=='\v' || c==' ') return true;
    return false;
}

std::istream&amp; operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;a) {
    tok &gt;&gt; std::ws; char c; long long int x, y;
    tok &gt;&gt; x;
    if(tok.peek()=='/') tok &gt;&gt; c &gt;&gt; y;
    else y=1;
    if(!DaLiJeBjelina(tok.peek())) tok.setstate(std::ios::failbit);
    a=Razlomak(x, y);
    return tok;
}

int main() {
    Razlomak x(4,5); std::cout &lt;&lt; x;
    std::cin &gt;&gt; x; std::cout &lt;&lt; x;
}</pre>
</body>
</html>
