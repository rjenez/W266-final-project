<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2247.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student4150.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;
#include &lt;cmath&gt;
#include &lt;initializer_list&gt;
bool ProvjeraMnozenja(long long int br1, long long int br2) {
    long long int M(std::numeric_limits&lt;long long int&gt;::max());
    long long int m(std::numeric_limits&lt;long long int&gt;::min());
    if(br2 &lt; 0) {
        if(br1 &lt; m - br2) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    if(br2 &gt; 0) {
        if(br1 &gt; M - br2) throw std::overflow_error ("Nemoguce dobiti rezultat");
    }
    return true;
}
bool ProvjeraSabiranja(long long int br1, long long int br2) {
    long long int M(std::numeric_limits&lt;long long int&gt;::max());
    long long int m(std::numeric_limits&lt;long long int&gt;::min());
    if(br2 &lt; 0) {
        if(br1 == m || br1 *(-1) &lt; m/(br2*(-1)) || br1*(-1) &gt; M/(br2*(-1))) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    if(br2 &gt; 0) {
        if(br1 &lt; m/br2 || br1 &gt; M/br2) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
    return true;
}
class Razlomak {
    long long int brojnik;
    long long int nazivnik;
    static long long int NZD(long long int br1, long long int br2) {
        if(br2 == 0) return br1;
        long long int nzd = NZD(br2, br1%br2);
           return nzd;
    }
    public: 
    Razlomak(long long int br, long long int naz) {
        if(naz == 0) throw std::logic_error("Nekorektan razlomak");
        int nzd(NZD(br, naz));
        if(br &gt; 0 &amp;&amp; naz &lt; 0) { br *= -1; naz *= -1; }
        if(br &lt; 0 &amp;&amp; naz &lt; 0) { br *= -1; naz *= -1; }
        brojnik = br/nzd;
        nazivnik = naz/nzd;
    }
    Razlomak(long long int br) {
        brojnik = br;
        nazivnik = 1;
    }
    Razlomak() {
        brojnik = 0;
        nazivnik = 1;
    }
    Razlomak(std::initializer_list&lt;long long int&gt; l) {
        if(l.size() == 0) { brojnik = 0; nazivnik = 1; }
        else {
            auto it = l.begin();
            brojnik = *it;
            if(l.size() == 2) {
                it++;
                nazivnik = *it;
            }
            else nazivnik = 1;
        }
        if(nazivnik &lt; 0) {
            nazivnik *= -1;
            brojnik *= -1;
        }
        long long int nzd = NZD(brojnik, nazivnik);
        brojnik /= nzd;
        nazivnik /= nzd;
    }
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="5"></a><font color="#FF0000"><a href="match279-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator +(const Razlomak &amp;r);
    friend Razlomak operator -(const Razlomak &amp;r);
    friend Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak r2);
</font>    friend Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak r2);
    friend Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak r2);
    friend Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak r2);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const Razlomak &amp;r);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    return r1.brojnik == r2.brojnik &amp;&amp; r1.nazivnik == r2.nazivnik;
    }
    friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
        return r1.brojnik != r2.brojnik || r1.nazivnik != r2.nazivnik;
    }
    friend inline Razlomak operator++(Razlomak &amp;r, int);
    friend Razlomak &amp;operator++(Razlomak &amp;r) {
        Razlomak r1(1, 1);
        r += r1;
        return r;
    }
    operator long double() const;
};
 std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r) {
    if(r.nazivnik == 1) tok &lt;&lt; r.brojnik;
    else tok &lt;&lt; r.brojnik &lt;&lt; "/" &lt;&lt; r.nazivnik;
    return tok;
}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r) {
      if(tok.peek() &lt; '0' &amp;&amp; tok.peek() &gt; '9') {
          tok.setstate(std::ios::failbit); 
          return tok;
      }
      tok &gt;&gt; std::ws &gt;&gt; r.brojnik;
      if(tok.peek() != '/') {
          r.nazivnik = 1;
               }
        else {
          if(tok.peek() != '/') {
              tok.setstate(std::ios::failbit);
              return tok;
              }
              char znak('/');
              tok &gt;&gt; znak;
              if(tok.peek() &lt; '0' &amp;&amp; tok.peek() &gt; '9') {
                  tok.setstate(std::ios::failbit);
                  return tok;
              }
              tok &gt;&gt; std::ws;
<a name="8"></a><font color="#00FFFF"><a href="match279-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

              tok &gt;&gt; r.nazivnik;
              if(tok.peek() != '\t' &amp;&amp; tok.peek() != '\v' &amp;&amp; tok.peek()!= '\f' &amp;&amp; tok.peek() != '\n' &amp;&amp; tok.peek() != ' ' )
</font>              tok.setstate(std::ios::failbit);
      
            r = Razlomak(r.brojnik, r.nazivnik);
        }
            return tok;
       }
Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    Razlomak r3(r1.brojnik, r1.nazivnik);
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    try {
        bool proizvod1 = ProvjeraMnozenja(r1.brojnik, (r2.nazivnik/r));
        bool proizvod2 = ProvjeraMnozenja(r2.brojnik, (r1.nazivnik/r));
        bool zbir1 = ProvjeraSabiranja(proizvod1, proizvod2);
        bool proizvod3 = ProvjeraMnozenja(r1.nazivnik, (r2.nazivnik,r));
    } catch(std::overflow_error) {
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    }
<a name="2"></a><font color="#0000FF"><a href="match279-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    r3.brojnik = (r1.brojnik * (r2.nazivnik/r) + r2.brojnik * (r1.nazivnik/r));
    r3.nazivnik = (r1.nazivnik * (r2.nazivnik/r));
    r3 = Razlomak(r3.brojnik, r3.nazivnik);
    return r3;
}
Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2) {
</font>    Razlomak r3(r1.brojnik, r1.nazivnik);
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    try {
        bool proizvod1 = ProvjeraMnozenja(r1.brojnik, (r2.nazivnik/r));
        bool proizvod2 = ProvjeraMnozenja(r2.brojnik, (r1.nazivnik/r));
        bool zbir1 = ProvjeraSabiranja(proizvod1, proizvod2);
        bool proizvod3 = ProvjeraMnozenja(r1.nazivnik, (r2.nazivnik/r));
    } catch(std::overflow_error) {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
<a name="0"></a><font color="#FF0000"><a href="match279-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    r3.brojnik = (r1.brojnik * (r2.nazivnik/r) - r2.brojnik * (r1.nazivnik/r));
    r3.nazivnik = (r1.nazivnik * (r2.nazivnik/r));
    r3 = Razlomak(r3.brojnik, r3.nazivnik);
    return r3;
}
Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2) {
</font>    Razlomak r3(r1.brojnik, r1.nazivnik);
    long long int s = Razlomak::NZD(r1.brojnik, r2.nazivnik);
    long long int t = Razlomak::NZD(r2.brojnik, r1.nazivnik);
    try {
        bool proizvod1 = ((r1.brojnik/s) * (r2.brojnik/t));
        bool proizvod2 = ((r1.nazivnik/t) * (r2.nazivnik/s));
    } catch (std::overflow_error) {
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    }
<a name="3"></a><font color="#00FFFF"><a href="match279-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    r3.brojnik = (r1.brojnik/s) * (r2.brojnik/t);
    r3.nazivnik = (r1.nazivnik/t) * (r2.nazivnik/s);
    r3 = Razlomak(r3.brojnik, r3.nazivnik);
    return r3;
}
Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2) {
</font>    Razlomak r3(r1.brojnik, r1.nazivnik);
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    long long int u = Razlomak::NZD(r1.brojnik, r2.brojnik);
    try {
        bool proizvod1 = ((r1.brojnik/u) * (r2.nazivnik/r));
        bool proizvod2 = ((r1.nazivnik/r) * (r2.brojnik/u));
    } catch (std::overflow_error) {
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    }
<a name="1"></a><font color="#00FF00"><a href="match279-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    r3.brojnik = (r1.brojnik/u) * (r2.nazivnik/r);
    r3.nazivnik = (r1.nazivnik/r) * (r2.brojnik/u);
    r3 = Razlomak(r3.brojnik, r3.nazivnik);
    return r3;
}
Razlomak operator +(const Razlomak &amp;r) {
    return r;
    }
Razlomak operator -(const Razlomak &amp;r) {
</font>    Razlomak r1(r.brojnik, r.nazivnik);
    r1.brojnik *= -1;
    return r1;
}
Razlomak &amp;operator +=(Razlomak &amp;r1, const Razlomak r2) {
  long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
  try {
      bool proizvod1 = ProvjeraMnozenja(r1.brojnik, (r2.nazivnik/r));
      bool proizvod2 = ProvjeraMnozenja(r2.brojnik, (r1.nazivnik/r));
      bool zbir = ProvjeraSabiranja(proizvod1, proizvod2);
      bool proizvod3 = ProvjeraMnozenja(r1.nazivnik, (r2.nazivnik/r));
      
  } catch(std::overflow_error) {
      throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
  }
<a name="4"></a><font color="#FF00FF"><a href="match279-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

  r1.brojnik = (r1.brojnik * (r2.nazivnik/r) + r2.brojnik * (r1.nazivnik/r));
  r1.nazivnik = (r1.nazivnik * (r2.nazivnik/r));
  r1 = Razlomak(r1.brojnik, r1.nazivnik);
</font>   return r1;
}
Razlomak &amp;operator -=(Razlomak &amp;r1, const Razlomak r2) {
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    try {
        bool proizvod1 = ProvjeraMnozenja(r1.brojnik, (r2.nazivnik/r));
        bool proizvod2 = ProvjeraMnozenja(r2.brojnik, (r1.nazivnik/r));
        bool zbir1 = ProvjeraSabiranja(proizvod1, proizvod2);
        bool proizvod3 = (r1.nazivnik, (r2.nazivnik/r));
    } catch(std::overflow_error) {
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    }
    r1.brojnik = (r1.brojnik * (r2.nazivnik/r) - r2.brojnik * (r1.nazivnik/r));
    r1.nazivnik = (r1.nazivnik * (r2.nazivnik/r));
    r1 = Razlomak(r1.brojnik, r1.nazivnik);
        return r1;
}
Razlomak &amp;operator *=(Razlomak &amp;r1, const Razlomak r2) {
    long long int s = Razlomak::NZD(r1.brojnik, r2.nazivnik);
    long long int t = Razlomak::NZD(r2.brojnik, r1.nazivnik);
    try {
        bool proizvod1 = ((r1.brojnik/s) * (r2.brojnik/t));
        bool proizvod2 = ((r1.nazivnik/t) * (r2.nazivnik/s));
    } catch (std::overflow_error) {
        throw std::overflow_error ("Nemoguce dobiti tacan rezultat");
    }
<a name="6"></a><font color="#00FF00"><a href="match279-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    r1.brojnik = (r1.brojnik/s) * (r2.brojnik/t);
    r1.nazivnik = (r1.nazivnik/t) * (r2.nazivnik/s);
    r1 = Razlomak(r1.brojnik, r1.nazivnik);
</font>    return r1;
}
Razlomak &amp;operator /=(Razlomak &amp;r1, const Razlomak r2) {
    long long int r = Razlomak::NZD(r1.nazivnik, r2.nazivnik);
    long long int u = Razlomak::NZD(r1.brojnik, r2.brojnik);
    try {
        bool proizvod1 = ((r1.brojnik/u) * (r2.nazivnik/r));
        bool proizvod2 = ((r1.nazivnik/r) * (r2.brojnik/u));
    } catch(std::overflow_error) {
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    }
<a name="7"></a><font color="#0000FF"><a href="match279-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    r1.brojnik = (r1.brojnik/u) * (r2.nazivnik/r);
    r1.nazivnik = (r1.nazivnik/r) * (r2.brojnik/u);
    r1 = Razlomak(r1.brojnik, r1.nazivnik);
</font>    return r1;
}
bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double kolicnik1(r1.brojnik/r1.nazivnik);
    long double kolicnik2(r2.brojnik/r2.nazivnik);
    return kolicnik1 &lt; kolicnik2;
}
bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double kolicnik1(r1.brojnik/r1.nazivnik);
    long double kolicnik2(r2.brojnik/r2.nazivnik);
    return kolicnik1 &gt; kolicnik2;
}
bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double kolicnik1(r1.brojnik/r1.nazivnik);
    long double kolicnik2(r2.brojnik/r2.nazivnik);
    return kolicnik1 &lt;= kolicnik2;
}
bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double kolicnik1(r1.brojnik/r1.nazivnik);
    long double kolicnik2(r2.brojnik/r2.nazivnik);
    return kolicnik1 &gt;= kolicnik2;
}
inline Razlomak operator ++(Razlomak &amp;r, int) {
    Razlomak r1(1,1);
    r += r1;
    return r;
}
Razlomak::operator long double() const {
    return (brojnik*(1.))/nazivnik;
}

int main () {
    try {
    Razlomak r1, r2;
        std::cout &lt;&lt; "Unesite dva razlomka: ";
    std::cin &gt;&gt; r1 &gt;&gt; r2;
    std::cout &lt;&lt; r1 + r2 &lt;&lt;" " &lt;&lt; r1 - r2 &lt;&lt; std::endl;
    std::cout &lt;&lt; r1 * r2 &lt;&lt; " " &lt;&lt; r1 / r2 &lt;&lt; std::endl;
    std::cout &lt;&lt; +r1 &lt;&lt; " " &lt;&lt; -r1 &lt;&lt; std::endl;
    std::cout &lt;&lt; ++r1 &lt;&lt;" "&lt;&lt; r1++ &lt;&lt; " "&lt;&lt; r2++ &lt;&lt; " "&lt;&lt; ++r2 &lt;&lt; std::endl;
    }catch (std::overflow_error e) {
        std::cout &lt;&lt; e.what();
    }
   	return 0;
}</pre>
</body>
</html>
