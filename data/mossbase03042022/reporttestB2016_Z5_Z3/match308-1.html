<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3899.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student7597.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;limits&gt;
#include &lt;stdexcept&gt;
#include &lt;sstream&gt;
#include &lt;cmath&gt;
class Razlomak{
    long long int brojnik;
    long long int nazivnik;
    static long long int nzd(long long int a,long long int b){
    if(b==0) return std::abs(a);                                    
    return nzd(b,a%b);                                     
    }
    public:
     Razlomak(long long int brojnik,long long int nazivnik);
    Razlomak():brojnik(0),nazivnik(1){}
     Razlomak(long long int brojnik):brojnik(brojnik),nazivnik(1){}
     Razlomak&amp; operator =(const Razlomak &amp;b);
    long long int DajBrojnik()const { return brojnik;}
    long long int DajNazivnik()const{return nazivnik;}
    Razlomak&amp; operator =(Razlomak &amp;&amp;b);
    Razlomak(const Razlomak &amp;a);
    Razlomak(Razlomak &amp;&amp;a);
    operator long double() const { return (long double)(this-&gt;brojnik)/this-&gt;nazivnik; }
    friend Razlomak&amp; operator +=(Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator +(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator -(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator *(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator /(Razlomak a,const Razlomak b);
    friend Razlomak&amp; operator-=(Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak&amp; operator *=(Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak&amp; operator /=(Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator-(const Razlomak &amp;a);
    friend Razlomak operator+(const Razlomak &amp;a);
    friend  bool operator ==(const Razlomak &amp;a,const Razlomak &amp;b);
    friend  bool operator &gt;=(const Razlomak &amp;a,const Razlomak &amp;b);
    friend  bool operator &lt;=(const Razlomak &amp;a,const Razlomak &amp;b);
    friend  bool operator &gt;(const Razlomak &amp;a,const Razlomak &amp;b);
    friend  bool operator &lt;(const Razlomak &amp;a,const Razlomak &amp;b);
    friend bool operator !=(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator++(Razlomak &amp;a,int);
    friend Razlomak operator--(Razlomak &amp;a,int);
    friend Razlomak&amp; operator++(Razlomak &amp;a);
    friend Razlomak&amp; operator--(Razlomak &amp;a);
    friend  std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const Razlomak &amp;a);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,Razlomak &amp;a);
};
Razlomak::Razlomak(const Razlomak &amp;a){ this-&gt;brojnik=a.brojnik; this-&gt;nazivnik=a.nazivnik;}
Razlomak::Razlomak(Razlomak &amp;&amp;a){ this-&gt;brojnik=a.brojnik; this-&gt;nazivnik=a.nazivnik;}
Razlomak operator-(const Razlomak &amp;a){
    if(a.brojnik==std::numeric_limits&lt;long long int&gt;::min()) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return Razlomak(-(a.DajBrojnik()),a.DajNazivnik());
}
 Razlomak operator+(const Razlomak &amp;a){
    return a;
}
bool testoverflowsab(long long int a,long long int b){
    if(b&gt;0)return a&gt;(std::numeric_limits&lt;long long int&gt;::max()-b);
    return a&lt;std::numeric_limits&lt;long long int&gt;::min()-b;
}
bool testoverflowmnozenje(long long int a,long long int b){
    if(b&gt;0&amp;&amp;a&gt;(std::numeric_limits&lt;long long int&gt;::max()/b) || b&gt;0&amp;&amp;a&lt;(std::numeric_limits&lt;long long int&gt;::min()/b)) return true;
    if(a==std::numeric_limits&lt;long long int&gt;::min()&amp;&amp;b&lt;0 ||
    b&lt;0&amp;&amp;(-a)&gt;(std::numeric_limits&lt;long long int&gt;::max()/(-b)) || b&lt;0&amp;&amp;(-a)&lt;(std::numeric_limits&lt;long long int&gt;::min()/(-b))) return true; return false;
}
<a name="7"></a><font color="#0000FF"><a href="match308-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

Razlomak::Razlomak(long long int brojnik,long long int nazivnik){
    if(nazivnik==0) throw std::logic_error("Nekorektan razlomak");
    auto NZD(nzd(brojnik,nazivnik));
</font>    Razlomak::brojnik=brojnik/NZD; Razlomak::nazivnik=nazivnik/NZD;
    if(Razlomak::nazivnik&lt;0) {Razlomak::brojnik*=-1; Razlomak::nazivnik*=-1; }
}
<a name="0"></a><font color="#FF0000"><a href="match308-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

Razlomak operator +(const Razlomak &amp;a,const Razlomak &amp;b){
       auto a1(a); return a1+=b;
}
Razlomak operator -(const Razlomak &amp;a,const Razlomak &amp;b){
      auto a1(a); return a1-=b;
}
Razlomak operator * (const Razlomak &amp;a,const Razlomak &amp;b){
     auto a1(a); return a1*=b;
}
Razlomak operator /(Razlomak a,const Razlomak b){
</font>      return a*=Razlomak(b.DajNazivnik(),b.DajBrojnik());
}
<a name="5"></a><font color="#FF0000"><a href="match308-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

 Razlomak&amp; operator +=(Razlomak &amp;a,const Razlomak &amp;b){
     auto r(Razlomak::nzd(a.nazivnik,b.nazivnik));
    if(testoverflowmnozenje(a.brojnik,b.nazivnik/r)||testoverflowmnozenje(b.brojnik,a.nazivnik/r)||testoverflowmnozenje(a.nazivnik,b.nazivnik/r)||
</font><a name="8"></a><font color="#00FFFF"><a href="match308-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    testoverflowsab(a.brojnik*(b.nazivnik/r),(b.brojnik*(a.nazivnik/r)))) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    auto tmp1=(a.brojnik*(b.nazivnik/r))+(b.brojnik*(a.nazivnik/r)); 
</font>    auto tmp2=a.nazivnik*(b.nazivnik/r);
    auto NZD=Razlomak::nzd(tmp1,tmp2); a.brojnik=tmp1/NZD; a.nazivnik=tmp2/NZD;
    return a;
 }
 Razlomak&amp; operator-=(Razlomak &amp;a,const Razlomak &amp;b){
     return a+=Razlomak((-b.brojnik),b.nazivnik);
 }
<a name="3"></a><font color="#00FFFF"><a href="match308-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

 Razlomak&amp; operator *=(Razlomak &amp;a,const Razlomak &amp;b){
    auto s=Razlomak::nzd(a.brojnik,b.nazivnik); auto t=Razlomak::nzd(b.brojnik,a.nazivnik);
</font>    if(testoverflowmnozenje((a.brojnik/s),(b.brojnik/t))||testoverflowmnozenje(a.nazivnik/t,b.nazivnik/s)) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    auto tmp1=(a.brojnik/s)*(b.brojnik/t); auto tmp2=(a.nazivnik/t)*(b.nazivnik/s); auto tmp3=Razlomak::nzd(tmp1,tmp2);
    a.brojnik=tmp1/tmp3; a.nazivnik=tmp2/tmp3;
    return a;
 }
  Razlomak&amp; Razlomak::operator =(const Razlomak &amp;b){ this-&gt;brojnik=b.brojnik;this-&gt;nazivnik=b.nazivnik; return *this; }
  Razlomak&amp; Razlomak::operator =(Razlomak &amp;&amp;b){ this-&gt;brojnik=b.brojnik;this-&gt;nazivnik=b.nazivnik; return *this; }
 Razlomak&amp; operator /=(Razlomak &amp;a,const Razlomak &amp;b){
     return a*=Razlomak(b.DajNazivnik(),b.DajBrojnik());
 }
 Razlomak&amp; operator++(Razlomak &amp;a){
     a+=Razlomak(1); return a;
 }
 Razlomak&amp; operator--(Razlomak &amp;a){
     a-=Razlomak(1); return a;
 }
 Razlomak operator++(Razlomak &amp;a,int){
     auto tmp(a);
     a+=Razlomak(1); return tmp;
 }
 Razlomak operator--(Razlomak &amp;a,int){
     auto tmp(a);
     a-=(Razlomak(1)); return tmp;
 }
<a name="6"></a><font color="#00FF00"><a href="match308-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

 bool operator==(const Razlomak &amp;a,const Razlomak &amp;b){
     return (a.brojnik==b.brojnik&amp;&amp;a.nazivnik==b.nazivnik);
</font> }
 bool operator &gt;(const Razlomak &amp;a,const Razlomak &amp;b){
     auto r=Razlomak::nzd(a.brojnik,b.brojnik); auto s=Razlomak::nzd(a.nazivnik,b.nazivnik);
     if(testoverflowmnozenje(a.brojnik/r,b.nazivnik/s)||testoverflowmnozenje(b.brojnik/r,(a.nazivnik/s))) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
<a name="1"></a><font color="#00FF00"><a href="match308-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

     return (a.brojnik/r)*(b.nazivnik/s)&gt;(b.brojnik/r)*(a.nazivnik/s);
 }
  bool operator &lt;(const Razlomak &amp;a,const Razlomak &amp;b){
     auto r=Razlomak::nzd(a.brojnik,b.brojnik); auto s=Razlomak::nzd(a.nazivnik,b.nazivnik);
</font>     if(testoverflowmnozenje(a.brojnik/r,b.nazivnik/s)||testoverflowmnozenje(b.brojnik/r,(a.nazivnik/s))) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
<a name="2"></a><font color="#0000FF"><a href="match308-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

     return ((a.brojnik/r)*(b.nazivnik/s)&lt;(b.brojnik/r)*(a.nazivnik/s));
 }
 bool operator &gt;=(const Razlomak &amp;a,const Razlomak &amp;b){
     return (a==b||a&gt;b);
</font> }
 bool operator &lt;=(const Razlomak &amp;a,const Razlomak &amp;b){
     return (a==b||a&lt;b);
 }
 bool operator !=(const Razlomak &amp;a,const Razlomak &amp;b){
     return (a.brojnik!=b.brojnik||a.nazivnik!=b.nazivnik);
 }
 std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const Razlomak &amp;a){
     tok&lt;&lt;a.brojnik;
     if(a.nazivnik!=1){ tok&lt;&lt;"/"; tok&lt;&lt;a.nazivnik; }
     return tok;
 }
 std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,Razlomak &amp;a){
     tok&gt;&gt;std::ws;
     char znak;
     if(!(tok&gt;&gt;a.brojnik)){tok.setstate(std::ios::failbit); return tok;}
     a.nazivnik=1;
     if(tok.peek()=='/'){
         tok&gt;&gt;znak;
         if(!(tok&gt;&gt;a.nazivnik)){tok.setstate(std::ios::failbit); return tok;}
<a name="4"></a><font color="#FF00FF"><a href="match308-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

         if(tok.peek()!=' '&amp;&amp;tok.peek()!='\n'&amp;&amp;tok.peek()!='\t'&amp;&amp;tok.peek()!='\v'&amp;&amp;tok.peek()!='\f'&amp;&amp;tok.peek()!=EOF){tok.setstate(std::ios::failbit); return tok;}
</font><a name="4"></a><font color="#FF00FF"><a href="match308-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

     }
</font>     a=Razlomak(a.brojnik,a.nazivnik);
     return tok;
 }
int main()
{
    std::cout&lt;&lt;"Unesite dva razlomka formata a/b: "&lt;&lt;std::endl;
    Razlomak a,b;
    std::cin&gt;&gt;a&gt;&gt;b;
    std::cout&lt;&lt;"Zbir: "&lt;&lt;a+b&lt;&lt;std::endl;
    std::cout&lt;&lt;"Proizvod: "&lt;&lt;a*b&lt;&lt;std::endl;
    std::cout&lt;&lt;"Razlika: "&lt;&lt;a-b&lt;&lt;std::endl;
    std::cout&lt;&lt;"Kolicnik: "&lt;&lt;a/b&lt;&lt;std::endl;
}
      
</pre>
</body>
</html>
