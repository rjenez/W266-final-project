<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9972.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student9972.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;climits&gt;
using namespace std;


class Razlomak{
  
  long long int brojnik, nazivnik;
public:

    Razlomak(long long int br=0, long long int naz=1):
    brojnik(br),nazivnik(naz)
    {
        if(naz==0)throw logic_error("Nekorektan razlomak");
        int djelilac; 
       // cout&lt;&lt;br&lt;&lt;" "&lt;&lt;naz&lt;&lt;endl;
        djelilac=nzd(br,naz);
        brojnik=br/djelilac;
        nazivnik=naz/djelilac;
        if(brojnik&gt;0 &amp;&amp; nazivnik&lt;0){brojnik=brojnik*(-1); nazivnik=nazivnik*(-1);}
        
    }
    long long int DajBrojnik() const{return brojnik;}
    long long int DajNazivnik() const{return nazivnik;}
 

static  int nzd(long long int  brojnik, long long int nazivnik)
 {   
     
     if(nazivnik==0){return brojnik;}
        else
            return nzd(nazivnik,brojnik%nazivnik);
 }
 
 friend ostream &amp;operator&lt;&lt;(ostream &amp;cout, const Razlomak &amp;v);
 friend istream &amp;operator&gt;&gt;(istream &amp;cin, Razlomak &amp;v);
 friend Razlomak operator+(const Razlomak &amp;a, const Razlomak &amp;b);
 friend Razlomak operator-(const Razlomak &amp;a, const Razlomak &amp;b);
 friend Razlomak operator* (const Razlomak &amp;v1,const Razlomak &amp;v2);
 friend Razlomak operator /(const Razlomak &amp;v1,const Razlomak &amp;v2);
 Razlomak &amp;operator +=(const Razlomak &amp;v);
 Razlomak &amp;operator -=(const Razlomak &amp;v);
 Razlomak &amp;operator *=(const Razlomak &amp;v);
 Razlomak &amp;operator /=(const Razlomak &amp;v);
 Razlomak operator-() const {return {-brojnik,-nazivnik};} 
<a name="0"></a><font color="#FF0000"><a href="match465-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

 Razlomak operator+(Razlomak &amp;v);
 friend Razlomak &amp;operator++ (Razlomak &amp;v);
 friend Razlomak operator ++(Razlomak &amp;v,int);
 friend Razlomak &amp;operator-- (Razlomak &amp;v);
 friend Razlomak operator --(Razlomak &amp;v,int);
 friend bool operator ==(const Razlomak &amp;v1, const Razlomak &amp;v2);
 friend bool operator &lt;=(const Razlomak &amp;v1, const Razlomak &amp;v2);
</font> friend bool operator &gt;=(const Razlomak &amp;v1, const Razlomak &amp;v2);
 friend bool operator &lt;(const Razlomak &amp;v1, const Razlomak &amp;v2);
 friend bool operator &gt;(const Razlomak &amp;v1, const Razlomak &amp;v2);
 
 operator long double() const;
 
 static void overflow1(long long int x, long long int y)
 {
  long long int M(9223372036854775807), m(-9223372036854775807);
  if(y&gt;0 &amp;&amp; x&gt;M-y)throw overflow_error("Nemoguce dobiti tacan rezultat");
  if(y&lt;0 &amp;&amp; x&lt;m-y)throw overflow_error("Nemoguce dobiti tacan rezultat");
 }
 static void overflow2(long long int x, long long int  y)
 {
  long long int M(9223372036854775807), m(-9223372036854775807);
  if(y&gt;0 &amp;&amp; x&lt;m+y)throw overflow_error("Nemoguce dobiti tacan rezultat");
  if(y&lt;0 &amp;&amp; x&gt;M+y)throw overflow_error("Nemoguce dobiti tacan rezultat");
 }
 static void overflow3(long long int x, long long int y)
 {
  long long int M(9223372036854775807), m;
  m=-M-1;
  if(y&gt;0 &amp;&amp; (x&lt;m/y || x&gt;M/y))throw overflow_error("Nemoguce dobiti tacan rezultat");
  if(y&lt;0 &amp;&amp; (x==m ||-x&gt;M/(-y) || -x&lt;m/(-y)))throw overflow_error("Nemoguce dobiti tacan rezultat");
 }
};
 Razlomak &amp;operator++ (Razlomak &amp;v){v.brojnik++; v.nazivnik++; return v;}
 Razlomak operator ++(Razlomak &amp;v,int){ Razlomak pomocni(v); v.brojnik++; v.nazivnik++; return pomocni;}
 Razlomak &amp;operator-- (Razlomak &amp;v){ v.brojnik--; v.nazivnik--; return v;}
 Razlomak operator --(Razlomak &amp;v,int){ Razlomak pomocni(v); v.brojnik--; v.nazivnik--; return pomocni;}
 
 Razlomak Razlomak:: operator+(Razlomak &amp;v)
 {
  Razlomak::overflow1(brojnik*v.nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))+(v.brojnik*nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))),nazivnik*(v.nazivnik/Razlomak::nzd(v.brojnik,v.nazivnik)));
  return {brojnik*v.nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))+(v.brojnik*nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))),nazivnik*(v.nazivnik/Razlomak::nzd(v.brojnik,v.nazivnik))};
 }
 bool operator ==(const Razlomak &amp;v1, const Razlomak &amp;v2)
 {
   return v1.brojnik==v2.brojnik &amp;&amp; v1.nazivnik==v2.nazivnik;
 }
 bool operator &lt;=(const Razlomak &amp;v1, const Razlomak &amp;v2)
 {
  long double a,b;
  a=v1.brojnik; b=v2.brojnik;
  a=a/v1.nazivnik; b=b/v2.nazivnik;
   return a&lt;=b;
 }
 bool operator &gt;=(const Razlomak &amp;v1, const Razlomak &amp;v2)
 {
  long double a,b;
  a=v1.brojnik; b=v2.brojnik;
  a=a/v1.nazivnik; b=b/v2.nazivnik;
   return a&gt;=b;
 }
 bool operator &lt;(const Razlomak &amp;v1, const Razlomak &amp;v2)
 {
  long double a,b;
  a=v1.brojnik; b=v2.brojnik;
  a=a/v1.nazivnik; b=b/v2.nazivnik;
   return a&lt;b;
 }
 bool operator &gt;(const Razlomak &amp;v1, const Razlomak &amp;v2)
 {
  long double a,b;
  a=v1.brojnik; b=v2.brojnik;
  a=a/v1.nazivnik; b=b/v2.nazivnik;
   return a&gt;b;
 }
 
 
 Razlomak &amp;Razlomak::operator +=(const Razlomak &amp;v)
 {
   overflow1(brojnik*v.nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik)),(v.brojnik*nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))));
     brojnik=brojnik*v.nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))+(v.brojnik*nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik)));
     nazivnik=nazivnik*(v.nazivnik/Razlomak::nzd(v.brojnik,v.nazivnik));
     return *this;
 }
 
 Razlomak &amp;Razlomak::operator -=(const Razlomak &amp;v)
 {
   overflow2(brojnik*v.nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik)),(v.brojnik*nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))));
     brojnik=brojnik*v.nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik))-(v.brojnik*nazivnik/(Razlomak::nzd(v.brojnik,v.nazivnik)));
     nazivnik=nazivnik*(v.nazivnik/Razlomak::nzd(v.brojnik,v.nazivnik));
     return *this;
 }
 Razlomak &amp;Razlomak::operator *=(const Razlomak &amp;v)
 {
 Razlomak::overflow3(brojnik/Razlomak::nzd(brojnik,v.nazivnik),(v.brojnik/Razlomak::nzd(v.brojnik,nazivnik)));
    brojnik=(brojnik/Razlomak::nzd(brojnik,v.nazivnik)*(v.brojnik/Razlomak::nzd(v.brojnik,nazivnik)));
    nazivnik=((nazivnik/Razlomak::nzd(v.brojnik,nazivnik)*(v.nazivnik/Razlomak::nzd(brojnik,v.nazivnik))));
    return *this;
 }
 
 Razlomak &amp;Razlomak::operator /=(const Razlomak &amp;v)
 {
    brojnik=(brojnik/Razlomak::nzd(brojnik,v.brojnik)*(v.nazivnik/(Razlomak::nzd(nazivnik,v.nazivnik))));
    nazivnik=((nazivnik/Razlomak::nzd(nazivnik,v.nazivnik)*(v.brojnik/Razlomak::nzd(brojnik,v.brojnik))));
    return *this;
 }
Razlomak  operator+(const Razlomak &amp;a,const Razlomak &amp;b)
 {
     long long int br,raz;
    Razlomak::overflow1(a.brojnik*b.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik)),(b.brojnik*a.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik))));
<a name="1"></a><font color="#00FF00"><a href="match465-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

     br=(a.brojnik*b.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik))+(b.brojnik*a.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik))));
     raz=(a.nazivnik*(b.nazivnik/Razlomak::nzd(b.brojnik,b.nazivnik)));
</font>     Razlomak c(br,raz);
     return c;
 }
 
 Razlomak  operator-(const Razlomak &amp;a,const Razlomak &amp;b)
 {
<a name="3"></a><font color="#00FFFF"><a href="match465-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

  Razlomak::overflow2(a.brojnik*b.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik)),(b.brojnik*a.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik))));
</font>     long long int br,raz;
<a name="2"></a><font color="#0000FF"><a href="match465-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

     br=(a.brojnik*b.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik))-(b.brojnik*a.nazivnik/(Razlomak::nzd(b.brojnik,b.nazivnik))));
</font>     raz=(a.nazivnik*(b.nazivnik/Razlomak::nzd(b.brojnik,b.nazivnik)));
     Razlomak c(br,raz);
     return c;
 }
 Razlomak operator*(const Razlomak &amp;v1, const Razlomak &amp;v2) 
{
<a name="4"></a><font color="#FF00FF"><a href="match465-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Razlomak::overflow3(v1.brojnik/Razlomak::nzd(v1.brojnik,v2.nazivnik),(v2.brojnik/Razlomak::nzd(v2.brojnik,v1.nazivnik)));
</font>    int br, naz;
    br=(v1.brojnik/Razlomak::nzd(v1.brojnik,v2.nazivnik)*(v2.brojnik/Razlomak::nzd(v2.brojnik,v1.nazivnik)));
<a name="5"></a><font color="#FF0000"><a href="match465-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    naz=((v1.nazivnik/Razlomak::nzd(v2.brojnik,v1.nazivnik)*(v2.nazivnik/Razlomak::nzd(v1.brojnik,v2.nazivnik))));
    Razlomak v(br,naz);
</font>    
    return v;
}

Razlomak operator /(const Razlomak &amp;v1,const Razlomak &amp;v2)
{
    int br, naz;
    
<a name="6"></a><font color="#00FF00"><a href="match465-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    br=(v1.brojnik/Razlomak::nzd(v1.brojnik,v2.brojnik)*(v2.nazivnik/(Razlomak::nzd(v1.nazivnik,v2.nazivnik))));
    naz=((v1.nazivnik/Razlomak::nzd(v1.nazivnik,v2.nazivnik)*(v2.brojnik/Razlomak::nzd(v1.brojnik,v2.brojnik))));
</font>    Razlomak v(br,naz);
   // cout&lt;&lt;v.brojnik&lt;&lt;" "&lt;&lt;v.nazivnik&lt;&lt;endl;
    return v;
}
 ostream &amp;operator&lt;&lt;(ostream &amp;cout, const Razlomak &amp;v)
 {
     if(v.nazivnik==1)cout&lt;&lt;v.brojnik;
     else 
     cout&lt;&lt;v.brojnik&lt;&lt;"/"&lt;&lt;v.nazivnik;
     return cout;
 }

istream &amp;operator&gt;&gt;(istream &amp;cin, Razlomak &amp;v)
 {
     
     v.nazivnik=1;
     char znak;
     cin&gt;&gt;ws;
     if(cin.peek()!='\n' || cin.peek()!='\r' || cin.peek()!='\f' || cin.peek()!= '\v' ||  cin.peek()!='\t' || cin.peek()!=' ') 
     { cin&gt;&gt;ws;
        cin&gt;&gt;v.brojnik;
        
        if(cin.peek()=='/')
        {
            
<a name="7"></a><font color="#0000FF"><a href="match465-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        cin&gt;&gt;znak&gt;&gt;v.nazivnik;
        
        if(cin.peek()!='\n' &amp;&amp; cin.peek()!='\r' &amp;&amp; cin.peek()!='\f' &amp;&amp; cin.peek()!= '\v' &amp;&amp;  cin.peek()!='\t' &amp;&amp; cin.peek()!=' ')
</font>         cin.setstate(ios::failbit);
            
        }
        
     }
     else
     {
         cin.setstate(ios::failbit);
         
     }
     
     int a;
     
     a=Razlomak::nzd(v.brojnik,v.nazivnik);
     v.brojnik=v.brojnik/a;
     v.nazivnik=v.nazivnik/a;
     return cin;
 }
 Razlomak:: operator long double() const
 {
     long double a;
     a=brojnik;
     a=a/nazivnik;
     return a;
 }

 //da se malo igramo, da razlomke zadajemo u formatu: a / b.
//da bude moguce 'Razlomak r = a / b', gdje su 'a' i 'b' specijalni 'brojevi'
//mozemo nauciti 'user-defined' literale iako se na predavanjima ne rade
/*struct RazlomakBroj {
long long int x; 
RazlomakBroj (long long int x) : x(x) {}
    };
Razlomak operator / (const RazlomakBroj &amp;b, const RazlomakBroj &amp;n) { return {b.x, n.x};}
RazlomakBroj operator "" _r (unsigned long long int x) { return RazlomakBroj(x);}
*/
int main ()
{
   Razlomak r, q(10,7),c(98),t;
   cin&gt;&gt;r;
   try
   {
    cout&lt;&lt;r&lt;&lt;endl;
    c=r+q;
    cout&lt;&lt;c&lt;&lt;endl;
    r=c-q;
    q*=c;
    cout&lt;&lt; c&lt;&lt;" "&lt;&lt;q&lt;&lt;" "&lt;&lt;r&lt;&lt;endl;
    c+=2;
    t=r/c;
    t-=2;
    cout&lt;&lt;++r&lt;&lt;" "&lt;&lt; c++&lt;&lt;" "&lt;&lt;--t&lt;&lt;" "&lt;&lt; q--&lt;&lt;endl;
    cout&lt;&lt;static_cast &lt;long double&gt;(q)&lt;&lt;endl;
    cout&lt;&lt;r+t&lt;&lt;" "&lt;&lt; t-c&lt;&lt;endl;
   }
   catch(overflow_error e)
   {
    cout&lt;&lt;e.what()&lt;&lt;endl;
   }
        
    
	return 0;
}</pre>
</body>
</html>
