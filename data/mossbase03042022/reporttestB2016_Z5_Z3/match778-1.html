<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3442.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student1758.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;limits&gt;

bool Sabiranje(long long int x, long long y) {
    long long int M(std::numeric_limits&lt;long long int&gt;::max());
    long long int m(std::numeric_limits&lt;long long int&gt;::min());
    if(y&gt;0 &amp;&amp; x&gt;M-y) return false;
    if(y&lt;0 &amp;&amp; x&lt;m-y) return false;
    return true;
}

bool Oduzimanje(long long int x, long long int y) {
    long long int M(std::numeric_limits&lt;long long int&gt;::max());
    long long int m(std::numeric_limits&lt;long long int&gt;::min());
    if(y&lt;0 &amp;&amp; x&gt;M+y) return false;
    if(y&gt;0 &amp;&amp; x&lt;m+y) return false;
    return true;
}

bool Mnozenje(long long int x, long long int y) {
    long long int M(std::numeric_limits&lt;long long int&gt;::max());
    long long int m(std::numeric_limits&lt;long long int&gt;::min());
    if(y&gt;0 &amp;&amp; (x&lt;m/y || x&gt;M/y)) return false;
    if(y&lt;0 &amp;&amp; (x==m || -x&gt;M/(-y) || -x&lt;m/(-y))) return false;
    return true;
}

class Razlomak {
    long long int brojnik, nazivnik;    
    static int NZD(long long int p, long long int q);
public: 
    Razlomak() : brojnik(0), nazivnik(1) {}
<a name="0"></a><font color="#FF0000"><a href="match778-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Razlomak(long long int b) : brojnik(b), nazivnik(1) {}
    Razlomak(long long int b, long long int n);
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2);
</font>    friend Razlomak operator-(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator*(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak operator/(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator+(Razlomak &amp;r) { return r; }
<a name="3"></a><font color="#00FFFF"><a href="match778-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    friend Razlomak &amp;operator-(Razlomak &amp;r);
    friend Razlomak &amp;operator+=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator-=(Razlomak &amp;r1, const Razlomak &amp;r2);
</font>    friend Razlomak &amp;operator*=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator/=(Razlomak &amp;r1, const Razlomak &amp;r2);
    friend Razlomak &amp;operator++(Razlomak &amp;r);
    friend Razlomak operator++(Razlomak &amp;r, int);
    friend Razlomak &amp;operator--(Razlomak &amp;r);
<a name="4"></a><font color="#FF00FF"><a href="match778-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    friend Razlomak operator--(Razlomak &amp;r, int);
    friend bool operator&lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator&gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
</font>    friend bool operator&lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator&gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="1"></a><font color="#00FF00"><a href="match778-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    friend bool operator==(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend bool operator!=(const Razlomak &amp;r1, const Razlomak &amp;r2);
    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
</font>    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
    operator long double() const;
};

<a name="6"></a><font color="#00FF00"><a href="match778-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

int Razlomak::NZD(long long int p, long long int q) {
    if(q==0) return p;
    return NZD(q, p%q);
}

Razlomak::Razlomak(long long int b, long long int n) {
</font>    if(n==0) throw std::logic_error("Nekorektan razlomak");
    int nzd(NZD(b,n));
    if(n&lt;0) { n*=-1; b*=-1; }
    brojnik=b/nzd; nazivnik=n/nzd;
}

Razlomak operator+(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    int r(r1.NZD(r1.nazivnik, r2.nazivnik));
    bool x(Mnozenje(r1.brojnik, r2.nazivnik/r));
    bool y(Mnozenje(r2.brojnik, r1.nazivnik/r));
    bool z(Sabiranje(x, y));
    bool k(Mnozenje(r1.nazivnik, r2.nazivnik/r));
    if(z==false || k==false) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int b(r1.brojnik*int(r2.nazivnik/r)+r2.brojnik*int(r1.nazivnik/r));
    long long int n(r1.nazivnik*int(r2.nazivnik/r));
    Razlomak zbir(b, n);
    return zbir;
}

Razlomak operator-(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    int r(r1.NZD(r1.nazivnik, r2.nazivnik));
    bool x(Mnozenje(r1.brojnik, r2.nazivnik/r));
    bool y(Mnozenje(r2.brojnik, r1.nazivnik/r));
    bool z(Oduzimanje(x, y));
    bool k(Mnozenje(r1.nazivnik, r2.nazivnik/r));
    if(z==false || k==false) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int b(r1.brojnik*int(r2.nazivnik/r)-r2.brojnik*int(r1.nazivnik/r));
    long long int n(r1.nazivnik*int(r2.nazivnik/r));
    Razlomak razlika(b, n);
    return razlika;
}

Razlomak operator*(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    int s(r1.NZD(r1.brojnik, r2.nazivnik));
    int t(r1.NZD(r2.brojnik, r1.nazivnik));
    bool x(Mnozenje(r1.brojnik/s, r2.brojnik/t));
    bool y(Mnozenje(r1.nazivnik/t, r2.nazivnik/s));
    if(x==false || y==false) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int b(int(r1.brojnik/s)*int(r2.brojnik/t)); 
    long long int n(int(r1.nazivnik/t)*int(r2.nazivnik/s));
    Razlomak proizvod(b, n);
    return proizvod;
}

Razlomak operator/(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    int r(r1.NZD(r1.nazivnik, r2.nazivnik));
    int u(r1.NZD(r1.brojnik, r2.brojnik));
    bool x(Mnozenje(r1.brojnik/u, r2.nazivnik/r));
    bool y(Mnozenje(r1.nazivnik/r, r2.brojnik/u));
    if(x==false || y==false) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    long long int b(int(r1.brojnik/u)*int(r2.nazivnik/r));
    long long int n(int(r1.nazivnik/r)*int(r2.brojnik/u));
    Razlomak kolicnik(b, n);
    return kolicnik;
}

Razlomak &amp;operator-(Razlomak &amp;r) {
    if(r.brojnik==std::numeric_limits&lt;long long int&gt;::min()) throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    r.brojnik=-r.brojnik;
    return r;
}

Razlomak &amp;operator+=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    Razlomak pomocni(r1);
    try {
        r1=pomocni+r2;
    } catch(std::overflow_error izuzetak) {
        throw izuzetak;
    }
    return r1;
}

Razlomak &amp;operator-=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    Razlomak pomocni(r1);
    r1=pomocni-r2;
    return r1;
}

Razlomak &amp;operator*=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    Razlomak pomocni(r1);
    r1=pomocni*r2;
    return r1;
}

Razlomak &amp;operator/=(Razlomak &amp;r1, const Razlomak &amp;r2) {
    Razlomak pomocni(r1);
    r1=pomocni/r2;
    return r1;
}

Razlomak &amp;operator++(Razlomak &amp;r) {
    r+=1;
    return r;
}

Razlomak operator++(Razlomak &amp;r, int) {
    Razlomak pomocni(r);
    ++r;
    return pomocni;
}

Razlomak &amp;operator--(Razlomak &amp;r) {
    r-=1;
    return r;
}

Razlomak operator--(Razlomak &amp;r, int) {
    Razlomak pomocni(r);
    --r;
    return pomocni;
}

bool operator&lt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double razlomak1(r1.brojnik/r1.nazivnik);
    long double razlomak2(r2.brojnik/r2.nazivnik);
    return razlomak1&lt;razlomak2;
}

bool operator&gt;(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double razlomak1(r1.brojnik/r1.nazivnik);
    long double razlomak2(r2.brojnik/r2.nazivnik);
    return razlomak1&gt;razlomak2;
}

bool operator&lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double razlomak1(r1.brojnik/r1.nazivnik);
    long double razlomak2(r2.brojnik/r2.nazivnik);
    return razlomak1&lt;=razlomak2;
}

bool operator&gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    long double razlomak1(r1.brojnik/r1.nazivnik);
    long double razlomak2(r2.brojnik/r2.nazivnik);
    return razlomak1&gt;=razlomak2;
}

bool operator==(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    if(r1.brojnik==r2.brojnik &amp;&amp; r1.nazivnik==r2.nazivnik) return true;
    return false;
}

<a name="2"></a><font color="#0000FF"><a href="match778-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

inline bool operator!=(const Razlomak &amp;r1, const Razlomak &amp;r2) {
    return (!(r1==r2));
}

std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r1) {
</font>    tok &lt;&lt; r1.brojnik;
    if(r1.nazivnik==1) return tok;
    tok &lt;&lt; "/" &lt;&lt; r1.nazivnik;
    return tok;
}

std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, Razlomak &amp;r1) {
    char znak('/');
    if(tok.peek()&lt;'0' &amp;&amp; tok.peek()&gt;'9') { tok.setstate(std::ios::failbit); return tok; }
    tok &gt;&gt; std::ws &gt;&gt; r1.brojnik;
    if(tok.peek()!='/') {
        r1.nazivnik=1;
    }
    else {
        if(tok.peek()!='/') { tok.setstate(std::ios::failbit); return tok; }
        tok &gt;&gt; znak;
        if(tok.peek()&lt;'0' &amp;&amp; tok.peek()&gt;'9') { tok.setstate(std::ios::failbit); return tok; }
        tok &gt;&gt; std::ws &gt;&gt; r1.nazivnik;
<a name="5"></a><font color="#FF0000"><a href="match778-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        if(tok.peek()!='\n' &amp;&amp; tok.peek()!='\t' &amp;&amp; tok.peek()!='\v' &amp;&amp; tok.peek()!='\f' &amp;&amp; tok.peek()!=' ') tok.setstate(std::ios::failbit);
    }
    r1=Razlomak(r1.brojnik, r1.nazivnik);
</font>    return tok;
}

Razlomak::operator long double() const {
    return brojnik*(1.)/nazivnik;
}

int main () {
    Razlomak a{237, 3012};
    Razlomak b(1, 1);
    Razlomak c;
    Razlomak d(234, -8);
    std::cin &gt;&gt; c;
    std::cout &lt;&lt; c &lt;&lt; std::endl;
    Razlomak zbir(a+b), razlika(c-=b), proizvod(c*=b), kolicnik(b/a);
    std::cout &lt;&lt; zbir &lt;&lt; " " &lt;&lt; c &lt;&lt; " " &lt;&lt; -proizvod &lt;&lt; " " &lt;&lt; +kolicnik &lt;&lt; std::endl;
    if(a==b) std::cout &lt;&lt; a &lt;&lt; std::endl;
    else { std::cout &lt;&lt; b-- &lt;&lt; " " &lt;&lt; --a &lt;&lt; " " &lt;&lt; c--; }
    if(b&gt;a) std::cout &lt;&lt; b.DajBrojnik() &lt;&lt; std::endl;
	return 0;
}</pre>
</body>
</html>
