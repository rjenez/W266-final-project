<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student7197.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3701.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match58-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;climits&gt;
#define EPS 0.00000000000000001

class Razlomak {
    long long int brojnik,nazivnik;
  //  static long long int NZD(long long int a, long long int b);
    public:
    Razlomak(long long int a, long long int b);
    Razlomak(long long int a) { brojnik=a; nazivnik=1; }
    Razlomak() { brojnik=0; nazivnik=1; }
    long long int DajBrojnik() const { return brojnik; }
    long long int DajNazivnik() const { return nazivnik; }
    friend Razlomak operator + (const Razlomak &amp;x, const Razlomak &amp;y);
</font>    friend Razlomak operator - (const Razlomak &amp;x, const Razlomak &amp;y);
<a name="1"></a><font color="#00FF00"><a href="match58-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

    friend Razlomak operator * (const Razlomak &amp;x, const Razlomak &amp;y);
    friend Razlomak operator / (const Razlomak &amp;x, const Razlomak &amp;y);
    friend Razlomak operator +(Razlomak x);
    friend Razlomak operator -(Razlomak x);
    friend Razlomak operator +=(Razlomak &amp;x, const Razlomak &amp;y);
    friend Razlomak operator -=(Razlomak &amp;x, const Razlomak &amp;y);
    friend Razlomak operator *=(Razlomak &amp;x, const Razlomak &amp;y);
    friend Razlomak operator /=(Razlomak &amp;x, const Razlomak &amp;y);
    friend Razlomak operator ++(Razlomak &amp;x);
    friend Razlomak operator ++(Razlomak &amp;x, int);
    friend Razlomak operator --(Razlomak &amp;x);
    friend Razlomak operator --(Razlomak &amp;x, int);
    friend bool operator &lt;(const Razlomak &amp;x, const Razlomak &amp;y);
    friend bool operator &gt;(const Razlomak &amp;x, const Razlomak &amp;y);
</font>    friend bool operator &lt;=(const Razlomak &amp;x, const Razlomak &amp;y);
    friend bool operator &gt;=(const Razlomak &amp;x, const Razlomak &amp;y);
<a name="0"></a><font color="#FF0000"><a href="match58-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_84.gif"/></a>

    friend bool operator ==(const Razlomak &amp;x, const Razlomak &amp;y);
    friend bool operator !=(const Razlomak &amp;x, const Razlomak &amp;y);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;ispisi,const Razlomak &amp;x);
    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;upisi, Razlomak &amp;x);
    operator long double() {
        long double pom=(static_cast&lt;long double&gt;(brojnik))/nazivnik;
        return pom;
    }
};
//NZD ZA DVA BROJA
long long int NZD (long long int a, long long int b) {
    while (b!=0) {
        long long int pom=b;
        b=a%b;
        a=pom;
    }
    return a;
}
//KONSTRUKTOR
Razlomak::Razlomak(long long int a, long long int b) {
    if (a&gt;LONG_MAX || a&lt;LONG_MIN || b&gt;LONG_MAX || b&lt;LONG_MIN) throw std::overflow_error("Nemoguce dobiti tacan rezultat");//mozda moze ovako, mada sumnjam
    if (b==0) throw std::logic_error ("Nekorektan nazivnik");
    long long int dijelj(NZD(a,b));
    if ((a&lt;0 &amp;&amp; b&lt;0) || (a&gt;0 &amp;&amp; b&lt;0)) {
        brojnik=(a/dijelj)*(-1);
        nazivnik=(b/dijelj)*(-1);
    }
    else {
        brojnik=a/dijelj;
        nazivnik=b/dijelj;
    }
}
//OPERATOR SABIRANJA BINARNO +
Razlomak operator + (const Razlomak &amp;x, const Razlomak &amp;y) {
    long long int r=NZD(x.DajNazivnik(),y.DajNazivnik());
    Razlomak zbir((x.DajBrojnik()*(y.DajNazivnik()/r)+y.DajBrojnik()*(x.DajNazivnik()/r)) , (x.DajNazivnik()*(y.DajNazivnik()/r)));
    return zbir;
}
//OPERATOR BINARNO ODUZIMANJE -
Razlomak operator - (const Razlomak &amp;x, const Razlomak &amp;y) {
    long long int r=NZD(x.DajNazivnik(),y.DajNazivnik());
    Razlomak razlika((x.DajBrojnik()*(y.DajNazivnik()/r)-y.DajBrojnik()*(x.DajNazivnik()/r)) , (x.DajNazivnik()*(y.DajNazivnik()/r)));
    return razlika;
}
//OPERATOR BINARNO MNOZENJE *
Razlomak operator * (const Razlomak &amp;x,const Razlomak &amp;y) {
    long long int s=NZD(x.DajBrojnik(),y.DajNazivnik()),t=NZD(x.DajNazivnik(),y.DajBrojnik());
    Razlomak mnozenje(((x.DajBrojnik()/s)*(y.DajBrojnik()/t)),((x.DajNazivnik()/t)*(y.DajNazivnik()/s)));
    return mnozenje;
}
//OPERATOR BINARNO DIJELJENJE /
Razlomak operator / (const Razlomak &amp;x,const Razlomak &amp;y) {
    long long int u=NZD(x.DajBrojnik(),y.DajBrojnik()),r=NZD(x.DajNazivnik(),y.DajNazivnik());
    Razlomak dijeljenje(((x.DajBrojnik()/u)*(y.DajNazivnik()/r)),((x.DajNazivnik()/r)*(y.DajBrojnik()/u)));
    return dijeljenje;
}
//OPERATOR UNARNI, VRACA ISTI RAZLOMAK
Razlomak operator +(Razlomak x) {
    return x;
}
//OPARATOR UNARNI, VRACA SUPROTAN PREDZNAK
Razlomak operator -(Razlomak x) {
    return {x.DajBrojnik()*(-1),x.DajNazivnik()};
}
//OPERATOR SABIRANJA, ALI +=
Razlomak operator +=(Razlomak &amp;x, const Razlomak &amp;y) {
    if ((y.DajBrojnik()&gt;0 &amp;&amp; x.DajBrojnik()&gt;LONG_MAX-y.DajBrojnik()) || (y.DajNazivnik()&gt;0 &amp;&amp; x.DajNazivnik()&gt;LONG_MAX-y.DajNazivnik()) || 
    (y.DajBrojnik()&lt;0 &amp;&amp; x.DajBrojnik()&lt;LONG_MIN-y.DajBrojnik()) || (y.DajNazivnik()&lt;0 &amp;&amp; x.DajNazivnik()&lt;LONG_MIN-y.DajNazivnik())) 
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
//std::cout&lt;&lt;"x="&lt;&lt;x;
    x=x+y;
//std::cout&lt;&lt;" Nakon x="&lt;&lt;x;
    return x;
}
//OPERATOR ODUZIMANJA, ALI -=
Razlomak operator -=(Razlomak &amp;x, const Razlomak &amp;y) {
    if ((y.DajBrojnik()&gt;0 &amp;&amp; x.DajBrojnik()&gt;LONG_MAX+(-y.DajBrojnik())) || (y.DajNazivnik()&gt;0 &amp;&amp; x.DajNazivnik()&gt;LONG_MAX+(-y.DajNazivnik())) || (y.DajBrojnik()&lt;0 &amp;&amp; x.DajBrojnik()&lt;LONG_MIN+(-y.DajBrojnik())) || (y.DajNazivnik()&lt;0 &amp;&amp; x.DajNazivnik()&lt;LONG_MIN+(-y.DajNazivnik()))) 
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    x=x-y;
    return x;
}
//OPERATOR MNOZENJA, ALI *=
Razlomak operator *=(Razlomak &amp;x, const Razlomak &amp;y) {
    if ((y.DajBrojnik()&gt;0 &amp;&amp; x.DajBrojnik()&lt;LONG_MIN-y.DajBrojnik()) || (y.DajNazivnik()&gt;0 &amp;&amp; x.DajNazivnik()&lt;LONG_MIN-y.DajNazivnik()) || (y.DajBrojnik()&lt;0 &amp;&amp; ( (-x.DajBrojnik()&gt;(LONG_MAX/(-y.DajBrojnik()))) || (-x.DajBrojnik()&lt;(LONG_MIN/(-y.DajBrojnik()))) || x.DajBrojnik()==LONG_MIN) ) || (y.DajNazivnik()&lt;0 &amp;&amp; ( (-x.DajNazivnik()&gt;(LONG_MAX/(-y.DajNazivnik()))) || (-x.DajNazivnik()&lt;(LONG_MIN/(-y.DajNazivnik()))) || x.DajNazivnik()==LONG_MIN) ) )
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    x=x*y;
    return x;
}
//OPERATOR DIJELJENJA, ALI /=
Razlomak operator /=(Razlomak &amp;x, const Razlomak &amp;y) {
    if ((y.DajBrojnik()&gt;0 &amp;&amp; (x.DajBrojnik()/y.DajBrojnik())&gt;LONG_MAX) || (y.DajNazivnik()&gt;0 &amp;&amp; (x.DajNazivnik()/y.DajNazivnik())&gt;LONG_MAX) || (y.DajBrojnik()&lt;0 &amp;&amp; (x.DajBrojnik()/y.DajBrojnik())&lt;LONG_MIN) || (y.DajNazivnik()&lt;0 &amp;&amp; (x.DajNazivnik()/y.DajNazivnik())&lt;LONG_MIN))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    x=x/y;
    return x;
}
//OPERATOR UNARNI ++, UVECAVA ZA 1, prefiksni
Razlomak operator ++(Razlomak &amp;x) {
    Razlomak a(1);
    x+=a;
    return x;
}
//OPERATOR UNARNI ++, postfiksni
Razlomak operator ++(Razlomak &amp;x, int) {
    Razlomak a(1),pom(x);
    x+=a;
    return pom;
}

//OPERATOR UNARNI --, UMANJUJE ZA 1, prefiksni
Razlomak operator --(Razlomak &amp;x) {
    Razlomak a(1);
    x-=a;
    return x;
}
//OPERAROT UNARNI --, postfiksni
Razlomak operator --(Razlomak &amp;x, int) {
    Razlomak a(1),pom(x);
    x-=a;
    return pom;
}

//OPERATOR POREDJENJA, NA &lt;
bool operator &lt;(const Razlomak &amp;x, const Razlomak &amp;y) {
 //   long long int r=NZD(x.DajNazivnik(),y.DajNazivnik()) ,s=NZD(x.DajBrojnik(),y.DajNazivnik());
    Razlomak a(x.DajBrojnik()),b(x.DajNazivnik()),c(y.DajBrojnik()),d(y.DajNazivnik());
    if (static_cast&lt;long double&gt; (a*d) &lt; static_cast&lt;long double&gt; (b*c)) return true;
    return false;
}
//OPERATOR POREDJENJA, NA &gt;
bool operator &gt;(const Razlomak &amp;x, const Razlomak &amp;y) {
    Razlomak a(x.DajBrojnik()),b(x.DajNazivnik()),c(y.DajBrojnik()),d(y.DajNazivnik());
    if (static_cast&lt;long double&gt;(a*d) &gt; static_cast&lt;long double&gt;(b*c)) return true;
    return false;
}
//OPERATOR POREDJENJA, NA &lt;=
bool operator &lt;=(const Razlomak &amp;x, const Razlomak &amp;y) {
    if (x&lt;y || x==y) return true;
    return false;
}
//OPERATOR POREDJENJA, NA &gt;=
bool operator &gt;=(const Razlomak &amp;x, const Razlomak &amp;y) {
    if (x&gt;y || x==y) return true;
    return false;
}
//OPERATOR POREDJENJA, NA JEDNAKOST ==
bool operator ==(const Razlomak &amp;x, const Razlomak &amp;y) {
    Razlomak a(x.DajBrojnik()),b(x.DajNazivnik()),c(y.DajBrojnik()),d(y.DajNazivnik());
    if (abs(static_cast&lt;long double&gt;(a*d)-static_cast&lt;long double&gt;(b*c))&lt;EPS) return true;
    return false;
}
//OPERATOR POREDJENJA, NA RAZLICITOST !=
bool operator !=(const Razlomak &amp;x, const Razlomak &amp;y) {
    Razlomak a(x.DajBrojnik()),b(x.DajNazivnik()),c(y.DajBrojnik()),d(y.DajNazivnik());
    if (abs(static_cast&lt;long double&gt; (a*d)-static_cast&lt;long double&gt; (b*c))&gt;EPS) return true;
    return false;
}
//OPERATOR ISPISI
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;ispisi,const Razlomak &amp;x) {
    if (x.DajNazivnik()==1) return ispisi&lt;&lt;x.DajBrojnik();
    return ispisi&lt;&lt;x.DajBrojnik()&lt;&lt;"/"&lt;&lt;x.DajNazivnik();
}
//OPERATOR UPISI
std::istream &amp;operator &gt;&gt;(std::istream &amp;upisi, Razlomak &amp;x) {
    long long int a,b;
    upisi&gt;&gt;std::ws;
    upisi&gt;&gt;a;
    if (upisi.peek()!='/'){
        Razlomak pom(a);
        x=pom;
        return upisi;
    }
    char znak;
    upisi&gt;&gt;znak;
    if(znak!='/') {
        upisi.setstate(std::ios::failbit);
    }
    upisi&gt;&gt;b;
    if(upisi.peek()!='\n' &amp;&amp; upisi.peek()!='\t' &amp;&amp; upisi.peek()!=' ' &amp;&amp; upisi.peek()!='r' &amp;&amp; upisi.peek()!='v' &amp;&amp; upisi.peek()!='f') {
        upisi.setstate(std::ios::failbit);
    }
    Razlomak pom(a,b);
    x=pom;
    return upisi;
}

int main ()
{
    Razlomak a{10,50}, b(1);
    std::cout&lt;&lt;a&lt;&lt;"+"&lt;&lt;b&lt;&lt;"="&lt;&lt;a+b&lt;&lt;std::endl;
    std::cout&lt;&lt;a&lt;&lt;"-"&lt;&lt;b&lt;&lt;"="&lt;&lt;a-b&lt;&lt;std::endl;
    std::cout&lt;&lt;a&lt;&lt;"*"&lt;&lt;b&lt;&lt;"="&lt;&lt;a*b&lt;&lt;std::endl;
    std::cout&lt;&lt;a&lt;&lt;"/"&lt;&lt;b&lt;&lt;"="&lt;&lt;a/b&lt;&lt;std::endl;
    b=a--;//&lt;&lt;std::endl;
    std::cout&lt;&lt;"a="&lt;&lt;a&lt;&lt;"b="&lt;&lt;b&lt;&lt;std::endl;
    std::cout&lt;&lt;"a!=b je "&lt;&lt;(a!=b);
</font>
}</pre>
</body>
</html>
