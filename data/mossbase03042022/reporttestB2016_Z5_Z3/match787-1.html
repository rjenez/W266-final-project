<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student2364.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student6973.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;limits&gt;
#include &lt;stdexcept&gt;

const long long int M = std::numeric_limits&lt;long long int&gt;::max();
const long long int m = std::numeric_limits&lt;long long int&gt;::min();

class Razlomak{
    long long int _brojnik;
    long long int _nazivnik;
    
    static long long int nzd(long long int p,long long int q){
        if(q==0)
            return p;
        else 
            return nzd(q,p%q);
    }

<a name="2"></a><font color="#0000FF"><a href="match787-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    void PostaviRazlomak(long long int brojnik,long long int nazivnik);
    static long long int saberi(long long int x,long long int y);
    static long long int oduzmi(long long int x,long long int y);
</font>    static long long int mnozi(long long int x,long long int y);
    
    public:
        Razlomak() : _brojnik(0), _nazivnik(1) {}
        Razlomak(long long int brojnik,long long int nazivnik);
        Razlomak(long long int brojnik) : _brojnik(brojnik), _nazivnik(1) {}
        
        Razlomak(std::initializer_list&lt;long long int&gt; lista);
        long long DajBrojnik() const;
        long long DajNazivnik() const;
        void PostaviBrojnik(long long int brojnik);
        void PostaviNazivnik(long long int nazivnik);
        
        operator long double() const;
        
        friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r);
        friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r);
        friend Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2);
       
        friend Razlomak operator +=(Razlomak &amp;r1, const Razlomak &amp;r2);
        friend Razlomak operator -=(Razlomak &amp;r1, const Razlomak &amp;r2);
        friend Razlomak operator *=(Razlomak &amp;r1, const Razlomak &amp;r2);
<a name="0"></a><font color="#FF0000"><a href="match787-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        friend Razlomak operator /=(Razlomak &amp;r1, const Razlomak &amp;r2);
       
        friend bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
</font>        friend bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2);
        friend bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2);
        
};

long long Razlomak::DajBrojnik() const{
    return _brojnik;
}

long long Razlomak::DajNazivnik() const{
    return _nazivnik;
}

void Razlomak::PostaviBrojnik(long long int brojnik){
    _brojnik=brojnik;
}

void Razlomak::PostaviNazivnik(long long int nazivnik){
    _nazivnik=nazivnik;
}

Razlomak::operator long double() const {
    return (long double) this-&gt;DajBrojnik()/this-&gt;DajNazivnik();
}

void Razlomak::PostaviRazlomak(long long brojnik,long long nazivnik){
    _brojnik=brojnik;
    _nazivnik=nazivnik;
    auto r=nzd(_brojnik,_nazivnik);
    _brojnik /=r;
    _nazivnik /=r;
    
    if(nazivnik&lt;0 &amp;&amp; brojnik&gt;0){
        _brojnik=-brojnik;
        _nazivnik=-nazivnik;
    }
    else if(nazivnik&lt;0 &amp;&amp; brojnik&lt;0){
        _brojnik=-brojnik;
        _nazivnik=-nazivnik;
    }
    else if(nazivnik&gt;0 &amp;&amp; brojnik&lt;0){
        _brojnik=brojnik;
        _nazivnik=nazivnik;
    }
    else if(nazivnik==0) 
    throw std::domain_error("Nazivnik jednak 0.");
}

long long Razlomak::saberi(long long x, long long y){
    if ((y&gt;0 &amp;&amp; x&gt;M-y) || (y&lt;0 &amp;&amp; x&lt;m-y))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return x+y;
}

long long Razlomak::oduzmi(long long x, long long y){
    return saberi(x,-y);
}

long long Razlomak::mnozi(long long x, long long y){
    if(y&gt;0 &amp;&amp; (x&lt;m/y || x&gt;M/y))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    else if(y&lt;0 &amp;&amp;(x&lt;M/y || x&gt;m/y))
        throw std::overflow_error("Nemoguce dobiti tacan rezultat");
    return x*y;
}

Razlomak::Razlomak(long long int brojnik, long long int nazivnik){
    PostaviRazlomak(brojnik,nazivnik);
}

Razlomak::Razlomak(std::initializer_list&lt;long long int&gt; lista){
    
    if(lista.size() == 1){
        long long int brojnik = *lista.begin();
        PostaviRazlomak(brojnik,1);
    }
    else if(lista.size() == 2){
        long long int brojnik = *lista.begin();
        long long int nazivnik = *(lista.begin()+1);
        PostaviRazlomak(brojnik,nazivnik);
    }
    else throw std::logic_error("Nepravilno formatirana inicijalizacijska lista.");
}

<a name="1"></a><font color="#00FF00"><a href="match787-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok, const Razlomak &amp;r){
    if(r.DajNazivnik()==1)
        tok&lt;&lt;r.DajBrojnik();
    else 
    tok&lt;&lt;r.DajBrojnik()&lt;&lt;"/"&lt;&lt;r.DajNazivnik();
    return tok;
}

std::istream &amp;operator &gt;&gt;(std::istream &amp;tok, Razlomak &amp;r){
</font>    char znak(0);
    long long int brojnik(0), nazivnik(0), r1(0);
    
    tok&gt;&gt;std::ws;
        
        tok&gt;&gt;brojnik;
        
        if (tok.peek()!='\n' &amp;&amp; tok.peek()!=-1 &amp;&amp; tok.peek()!=' ') {
            tok&gt;&gt;znak;

            if (znak!='/') 
                tok.setstate(std::ios::failbit);
                
            tok&gt;&gt;nazivnik;
            if (tok.peek() &gt; '9') {
                tok.setstate(std::ios::failbit);
            }
            r1 = Razlomak::nzd(brojnik, nazivnik);
            r.PostaviBrojnik(brojnik/r1);
            r.PostaviNazivnik(nazivnik/r1);
        }
        else {
            r.PostaviBrojnik(brojnik);
            r.PostaviNazivnik(1);
        
        }
    return tok;
}


<a name="3"></a><font color="#00FFFF"><a href="match787-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

Razlomak operator +(const Razlomak &amp;r1, const Razlomak &amp;r2){
    
    long long int r = Razlomak::nzd(r1.DajNazivnik(),r2.DajNazivnik());
    long long int brojnik(Razlomak::saberi(Razlomak::mnozi(r1.DajBrojnik(),r2.DajNazivnik()/r),
</font><a name="4"></a><font color="#FF00FF"><a href="match787-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                         Razlomak::mnozi(r2.DajBrojnik(),r1.DajNazivnik()/r)));
</font>    long long int nazivnik(Razlomak::mnozi(r1.DajNazivnik(),r2.DajNazivnik()/r));
    
    return Razlomak(brojnik,nazivnik);
}
Razlomak operator -(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long long int r = Razlomak::nzd(r1.DajNazivnik(),r2.DajNazivnik());
<a name="5"></a><font color="#FF0000"><a href="match787-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    long long int brojnik(Razlomak::oduzmi(Razlomak::mnozi(r1.DajBrojnik(),r2.DajNazivnik()/r),
                         Razlomak::mnozi(r2.DajBrojnik(),r1.DajNazivnik()/r)));
</font>    long long int nazivnik(Razlomak::mnozi(r1.DajNazivnik(),r2.DajNazivnik()/r));
    
    return Razlomak(brojnik,nazivnik);
}

Razlomak operator *(const Razlomak &amp;r1, const Razlomak &amp;r2){
    long long int s = Razlomak::nzd(r1.DajBrojnik(),r2.DajNazivnik());
    long long int t = Razlomak::nzd(r2.DajNazivnik(),r1.DajNazivnik());
    
    long long int brojnik(Razlomak::mnozi(r2.DajBrojnik()/s,r2.DajBrojnik()/t));
    long long int nazivnik(Razlomak::mnozi(r1.DajNazivnik()/t,r2.DajNazivnik()/s));
    
    return Razlomak(brojnik,nazivnik);
}
        
Razlomak operator /(const Razlomak &amp;r1, const Razlomak &amp;r2){    
    long long int r = Razlomak::nzd(r1.DajNazivnik(),r2.DajNazivnik());
    long long int u = Razlomak::nzd(r1.DajBrojnik(),r2.DajBrojnik());
    
    long long int brojnik(Razlomak::mnozi(r1.DajBrojnik()/u,r2.DajNazivnik()/r));
    long long int nazivnik(Razlomak::mnozi(r1.DajNazivnik()/r,r2.DajBrojnik()/u));
    
    return Razlomak(brojnik,nazivnik);
}
       
Razlomak operator +=(Razlomak &amp;r1, const Razlomak &amp;r2){
            Razlomak pomocni(r1+r2);
            r1.PostaviBrojnik(pomocni.DajBrojnik());
            r1.PostaviNazivnik(pomocni.DajNazivnik());
            return r1;
        }
        Razlomak operator -=(Razlomak &amp;r1, const Razlomak &amp;r2){
            Razlomak pomocni(r1-r2);
            r1.PostaviBrojnik(pomocni.DajBrojnik());
            r1.PostaviNazivnik(pomocni.DajNazivnik());
            return r1;
        }
        Razlomak operator *=(Razlomak &amp;r1, const Razlomak &amp;r2){
            Razlomak pomocni(r1*r2);
            r1.PostaviBrojnik(pomocni.DajBrojnik());
            r1.PostaviNazivnik(pomocni.DajNazivnik());
            return r1;
        }
        Razlomak operator /=(Razlomak &amp;r1, const Razlomak &amp;r2){
            Razlomak pomocni(r1/r2);
            r1.PostaviBrojnik(pomocni.DajBrojnik());
            r1.PostaviNazivnik(pomocni.DajNazivnik());
            return r1;
        }
       
    bool operator ==(const Razlomak &amp;r1, const Razlomak &amp;r2){
        if(r1.DajBrojnik()==r2.DajBrojnik() &amp;&amp; r1.DajNazivnik()==r2.DajNazivnik())
            return true;
        return false;
        }
        bool operator !=(const Razlomak &amp;r1, const Razlomak &amp;r2){
            return !(r1 == r2);
        }
    bool operator &lt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
        return (long double) r1 &lt; (long double) r2;
        }
        
    bool operator &lt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){
        return r1==r2 || ((long double ) r1 &lt;(long double) r2);
        }
    
    bool operator &gt;(const Razlomak &amp;r1, const Razlomak &amp;r2){
        return (long double) r1&gt; (long double) r2;
        }
    
    bool operator &gt;=(const Razlomak &amp;r1, const Razlomak &amp;r2){
        return r1==r2 || ((long double ) r1 &gt; (long double) r2);
        }


int main ()
{
    Razlomak r, q, t;
    std::cout&lt;&lt;"Unesite razlomke: \n";
    std::cin &gt;&gt; r &gt;&gt; q;
    std::cout &lt;&lt; r*q &lt;&lt; std::endl;
    std::cout &lt;&lt; r+q &lt;&lt; std::endl;
    std::cout &lt;&lt; r/q &lt;&lt; std::endl;
    std::cout &lt;&lt; r-q &lt;&lt; std::endl;
    std::cout&lt;&lt; (r&lt;q)&lt;&lt; std::endl;
    std::cout&lt;&lt; (r&gt;=q)&lt;&lt; std::endl;
    std::cout&lt;&lt; (r==q)&lt;&lt; std::endl;
    std::cout&lt;&lt; (r!=q)&lt;&lt; std::endl;
    std::cout&lt;&lt; (r/=q)&lt;&lt; std::endl;
    
     
    
	return 0;
}</pre>
</body>
</html>
