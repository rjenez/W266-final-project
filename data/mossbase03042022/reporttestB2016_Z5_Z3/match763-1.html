<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student3186.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z3/student8085.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 3)
//Autotestovi by Enil Pajic (mail: epajic1@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;initializer_list&gt;
#include &lt;limits&gt;
#include &lt;string&gt;

using std::string;
using std::cout;
class Razlomak
{
    long long brojnik,nazivnik;
    static long long NZD(long long a,long long b)
    {
        if(b==0)
            return a;
        return NZD(b,a%b);
    }
    static void Prekoracenje(long long int x,long long int y,string s)
    {
        auto m=std::numeric_limits&lt;long long int&gt;::min();
        auto M=std::numeric_limits&lt;long long int&gt;::max();
        if(s == "*")
        {
            if(y&gt;0 and (x&lt;(m/y) or x&gt;(M/y)))
                throw std::overflow_error("Nemoguce dobiti tacan rezultat");
            else if(y&lt;0 and (x == m or -x&gt;(M/(-y)) or -x&lt;(m/(-y))))
                throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        }
        else if(s == "+")
        {
            if((y&gt;0 and x&gt;M-y) or (y&lt;0 and x&lt;m-y))
                throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        }
        else if(s == "-")
        {
            if((y&lt;0 and x&gt;M+y) or (y&gt;0 and x&lt;m+y))
                throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        }
    }
    public:
    Razlomak(long long b = 0,long long n = 1);
    friend Razlomak operator +(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator -(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator *(const Razlomak &amp;a,const Razlomak &amp;b);
    friend Razlomak operator /(const Razlomak &amp;a,const Razlomak &amp;b);
    Razlomak operator +(){return *this;};
    Razlomak operator -(){
        if(this-&gt;brojnik==std::numeric_limits&lt;long long int&gt;::min())
            throw std::overflow_error("Nemoguce dobiti tacan rezultat");
        this-&gt;brojnik=-(this-&gt;brojnik);
<a name="2"></a><font color="#0000FF"><a href="match763-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        return *this;};
    Razlomak &amp;operator +=(const Razlomak &amp;a);
    Razlomak &amp;operator -=(const Razlomak &amp;a);
    Razlomak &amp;operator *=(const Razlomak &amp;a);
    Razlomak &amp;operator /=(const Razlomak &amp;a);
    Razlomak operator ++(int);
</font>    Razlomak &amp;operator ++();
    friend bool operator &gt;(const Razlomak &amp;a,const Razlomak &amp;b);
    friend bool operator &gt;=(const Razlomak &amp;a,const Razlomak &amp;b);
    friend bool operator &lt;(const Razlomak &amp;a,const Razlomak &amp;b);
    friend bool operator &lt;=(const Razlomak &amp;a,const Razlomak &amp;b);
<a name="3"></a><font color="#00FFFF"><a href="match763-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    friend bool operator ==(const Razlomak &amp;a,const Razlomak &amp;b);
    friend bool operator !=(const Razlomak &amp;a,const Razlomak &amp;b);
    friend std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const Razlomak &amp;a);
</font>    friend std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,Razlomak &amp;a);
    operator long double()
    { return static_cast&lt;long double&gt;(this-&gt;brojnik)/this-&gt;nazivnik;}
    long long DajBrojnik()const{return brojnik;}
    long long DajNazivnik()const{return nazivnik;}
};
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const Razlomak &amp;a)
{
    if(a.nazivnik==1)
<a name="1"></a><font color="#00FF00"><a href="match763-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        tok&lt;&lt;a.brojnik;
    else
        tok&lt;&lt;a.brojnik&lt;&lt;"/"&lt;&lt;a.nazivnik;
    return tok;
}
std::istream &amp;operator &gt;&gt;(std::istream &amp;tok,Razlomak &amp;a)
{
    char znak;
    long long b,c;
</font>    if(!(tok&gt;&gt;b))
    {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    if((tok.peek()==EOF) or (tok.peek()=='\t') or (tok.peek()=='\v') or (tok.peek()=='\f') or (tok.peek()==' ') or (tok.peek()=='\n') or (tok.peek()=='\r'))
    {
        a=Razlomak(b,1);
        return tok;
    }
    else if(tok.peek()=='/')
    {
        tok&gt;&gt;znak;
        if(tok.peek()&gt;'9' or tok.peek()&lt;'0')
        {
            tok.setstate(std::ios::failbit);
            return tok;
        }
        if(!(tok&gt;&gt;c))
        {
            tok.setstate(std::ios::failbit);
            return tok;
        }
<a name="0"></a><font color="#FF0000"><a href="match763-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        if((tok.peek()!=EOF) and (tok.peek()!='\t') and (tok.peek()!='\v') and (tok.peek()!='\f') and (tok.peek()!=' ') and (tok.peek()!='\n') and (tok.peek()!='\r'))
        {
            //ZASTO MI IZ TOKA UZIMA \ PA TEK ONDA N A NE SVE ZAJEDNO KAO \N
            //ZATO MI PADA OVAJ TEST ?
            tok.setstate(std::ios::failbit);
</font>            return tok;
        }
        a=Razlomak(b,c);
        return tok;
    }
    tok.setstate(std::ios::failbit);
    return tok;
}
bool operator &gt;(const Razlomak &amp;a,const Razlomak &amp;b)
{
    return (static_cast&lt;long double&gt;(a.brojnik)/a.nazivnik) &gt; (static_cast&lt;long double&gt;(b.brojnik)/b.nazivnik);
}
bool operator &lt;(const Razlomak &amp;a,const Razlomak &amp;b)
{
    return (static_cast&lt;long double&gt;(a.brojnik)/a.nazivnik) &lt; (static_cast&lt;long double&gt;(b.brojnik)/b.nazivnik);
}
bool operator &gt;=(const Razlomak &amp;a,const Razlomak &amp;b)
{
    return (static_cast&lt;long double&gt;(a.brojnik)/a.nazivnik) &gt;= (static_cast&lt;long double&gt;(b.brojnik)/b.nazivnik);
}
bool operator &lt;=(const Razlomak &amp;a,const Razlomak &amp;b)
{
    return (static_cast&lt;long double&gt;(a.brojnik)/a.nazivnik) &gt; (static_cast&lt;long double&gt;(b.brojnik)/b.nazivnik);
}
bool operator ==(const Razlomak &amp;a,const Razlomak &amp;b)
{
    return (static_cast&lt;long double&gt;(a.brojnik)/a.nazivnik) == (static_cast&lt;long double&gt;(b.brojnik)/b.nazivnik);
}
bool operator !=(const Razlomak &amp;a,const Razlomak &amp;b)
{
    return (static_cast&lt;long double&gt;(a.brojnik)/a.nazivnik) != (static_cast&lt;long double&gt;(b.brojnik)/b.nazivnik);
}
Razlomak &amp;Razlomak::operator ++()
{
    return *this+=1;
}
Razlomak Razlomak::operator ++(int)
{
    auto pomoc(*this);
    ++(*this);
    return pomoc;
}
Razlomak &amp;Razlomak::operator +=(const Razlomak &amp;a)
{
    return *this=*this+a;
}
Razlomak &amp;Razlomak::operator *=(const Razlomak &amp;a)
{
    return *this=*this*a;
}
Razlomak &amp;Razlomak::operator -=(const Razlomak &amp;a)
{
    return *this=*this-a;
}
Razlomak &amp;Razlomak::operator /=(const Razlomak &amp;a)
{
    return *this=*this/a;
}
Razlomak::Razlomak(long long b,long long n)
{
    if(n == std::numeric_limits&lt;long long int&gt;::min() and b == n)
        n=std::numeric_limits&lt;long long int&gt;::max(),b=n;
    else if(n == std::numeric_limits&lt;long long int&gt;::min())
        n=std::numeric_limits&lt;long long int&gt;::max(),b=-b;
    long long pomoc;
    if(n == 0)
        throw std::logic_error("Nekorektan razlomak");
    if(n&lt;0)
        b=-b,n=-n;
    pomoc=NZD(b,n);
    b/=pomoc;
    n/=pomoc;
    brojnik=b;
    nazivnik=n;
}
Razlomak operator +(const Razlomak &amp;a,const Razlomak &amp;b)
{
    auto r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::Prekoracenje(a.DajNazivnik(),(b.DajNazivnik()/r),"*");
    Razlomak::Prekoracenje(b.DajBrojnik(),(a.DajNazivnik()/r),"*");
    Razlomak::Prekoracenje(a.DajNazivnik(),(b.DajNazivnik()/r),"*");
    Razlomak::Prekoracenje((a.DajBrojnik()*(b.DajNazivnik()/r)),(b.DajBrojnik()*(a.DajNazivnik()/r)),"+");
<a name="5"></a><font color="#FF0000"><a href="match763-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    return Razlomak((a.DajBrojnik()*(b.DajNazivnik()/r)+(b.DajBrojnik()*(a.DajNazivnik()/r))),(a.DajNazivnik()*(b.DajNazivnik()/r)));
}
Razlomak operator -(const Razlomak &amp;a,const Razlomak &amp;b)
</font>{
    auto r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::Prekoracenje(a.DajBrojnik(),(b.DajNazivnik()/r),"*");
    Razlomak::Prekoracenje(b.DajBrojnik(),(a.DajNazivnik()/r),"*");
    Razlomak::Prekoracenje(a.DajNazivnik(),(b.DajNazivnik()/r),"*");
    Razlomak::Prekoracenje((a.DajBrojnik()*(b.DajNazivnik()/r)),(b.DajBrojnik()*(a.DajNazivnik()/r)),"-");
<a name="4"></a><font color="#FF00FF"><a href="match763-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    return Razlomak((a.DajBrojnik()*(b.DajNazivnik()/r)-(b.DajBrojnik()*(a.DajNazivnik()/r))),(a.DajNazivnik()*(b.DajNazivnik()/r)));
}
Razlomak operator *(const Razlomak &amp;a,const Razlomak &amp;b)
</font>{
    auto s=Razlomak::NZD(a.brojnik,b.nazivnik);
    auto t=Razlomak::NZD(b.brojnik,a.nazivnik);
    Razlomak::Prekoracenje(a.brojnik/s,b.brojnik/t,"*");
    Razlomak::Prekoracenje(a.nazivnik/t,b.nazivnik/s,"*");
    return Razlomak(((a.brojnik/s)*(b.brojnik/t)),((a.nazivnik/t)*(b.nazivnik/s)));
}
Razlomak operator /(const Razlomak &amp;a,const Razlomak &amp;b)
{
    auto u=Razlomak::NZD(a.brojnik,b.brojnik);
    auto r=Razlomak::NZD(a.nazivnik,b.nazivnik);
    Razlomak::Prekoracenje(a.brojnik/u,b.nazivnik/r,"*");
    Razlomak::Prekoracenje(a.nazivnik/r,b.brojnik/u,"*");
    return Razlomak(((a.brojnik/u)*(b.nazivnik/r)),((a.nazivnik/r)*(b.brojnik/u)));
}
int main ()
{
    {//AT4 (c9): operator &gt;&gt; (2/3) (direktno iz std::cin)
     //NAPOMENA: pogledati AT3 za detaljna objasnjenja (i \R znak je bjelina, malo 'r')
        Razlomak r, p, q;
        std::cin &gt;&gt; r; //5/17
        std::cout &lt;&lt; r &lt;&lt; std::endl;
        std::cin.clear(); std::cin.ignore (100, '\n');
        //tri zaredom
        std::cin &gt;&gt; r &gt;&gt; p &gt;&gt; q; //10 20 30 -&gt; 10/1 20/1 30/1
        std::cout &lt;&lt; r &lt;&lt; " " &lt;&lt; p &lt;&lt; " " &lt;&lt; q &lt;&lt; std::endl;
        std::cin.clear(); std::cin.ignore (100, '\n');
        std::cin &gt;&gt; r;
        std::cout &lt;&lt; r;
    }
	return 0;
}</pre>
</body>
</html>
