<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student5915.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student5915.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 1
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;utility&gt;

<a name="1"></a><font color="#00FF00"><a href="match576-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

typedef std::pair&lt;double, double&gt; Tacka;

class Trougao {
    Tacka t1, t2, t3;
    static double Formula(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
</font>    public:
    Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) { Postavi(t1, t2, t3); };
    void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    void Postavi(int indeks, const Tacka &amp;t);
    static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    Tacka DajTjeme(int indeks) const;
    double DajStranicu(int indeks) const;
    double DajUgao(int indeks) const;
    Tacka DajCentar() const;
    double DajObim() const;
    double DajPovrsinu() const;
    bool DaLiJePozitivnoOrijentiran() const;
    bool DaLiJeUnutra(const Tacka &amp;t) const;
    void Ispisi() const;
    void Transliraj(double delta_x, double delta_y);
    void Centriraj(const Tacka &amp;t);
    void Rotiraj(const Tacka &amp;t, double ugao);
    void Skaliraj(const Tacka &amp;t, double faktor);
    void Rotiraj(double ugao);
    void Skaliraj(double faktor);
    friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
<a name="6"></a><font color="#00FF00"><a href="match576-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};

inline double Trougao::Formula(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
    return t1.first * (t2.second - t3.second) - t2.first * (t1.second - t3.second) + t3.first * (t1.second - t2.second);
</font>}

void Trougao::Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
    if(Orijentacija(t1, t2, t3) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
    this-&gt;t1 = t1;
    this-&gt;t2 = t2;
    this-&gt;t3 = t3;
}

void Trougao::Postavi(int indeks, const Tacka &amp;t) {
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    if(indeks == 1) t1 = t;
    else if(indeks == 2) t2 = t;
    else t3 = t;
    if(Orijentacija(t1, t2, t3) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
}

<a name="2"></a><font color="#0000FF"><a href="match576-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

int Trougao::Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
    if(Formula(t1, t2, t3) &gt; 0) return 1;
    else if(Formula(t1, t2, t3) &lt; 0) return - 1;
</font>    else return 0;
}

Tacka Trougao::DajTjeme(int indeks) const {
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    if(indeks == 1) return t1;
    else if(indeks == 2) return t2;
    else return t3;
}

double Trougao::DajStranicu(int indeks) const {
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    if(indeks == 1) return std::sqrt(std::pow(std::abs(t2.first - t3.first), 2) + std::pow(std::abs(t2.second - t3.second), 2));
    else if(indeks == 2) return std::sqrt(std::pow(std::abs(t1.first - t3.first), 2) + std::pow(std::abs(t1.second - t3.second), 2));
    else return std::sqrt(std::pow(std::abs(t2.first - t1.first), 2) + std::pow(std::abs(t2.second - t1.second), 2));
}

double Trougao::DajUgao(int indeks) const {
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    double a(DajStranicu(1)), b(DajStranicu(2)), c(DajStranicu(3));
    if(indeks == 1) return std::acos((b * b + c * c - a * a) / (2 * b * c));
    else if(indeks == 2) return std::acos((a * a + c * c - b * b) / (2 * a * c));
    else return std::acos((b * b + a * a - c * c) / (2 * b * a));
}

inline Tacka Trougao::DajCentar() const {
    return Tacka((t1.first + t2.first + t3.first) / 3, (t1.second + t2.second + t3.second) / 3);
}

inline double Trougao::DajObim() const {
    return DajStranicu(1) + DajStranicu(2) + DajStranicu(3);
}

inline double Trougao::DajPovrsinu() const{
    return std::abs(Formula(this-&gt;t1, this-&gt;t2, this-&gt;t3)) / 2;
}

inline bool Trougao::DaLiJePozitivnoOrijentiran() const {
    if(Formula(this-&gt;t1, this-&gt;t2, this-&gt;t3) &gt; 0) return true;
    else return false;
}

bool Trougao::DaLiJeUnutra(const Tacka &amp;t) const {
    if(Orijentacija(this-&gt;t1, this-&gt;t2, t) == 0 || Orijentacija(this-&gt;t2, this-&gt;t3, t) == 0 || Orijentacija(this-&gt;t1, this-&gt;t3, t) == 0)
        return false;
    if(Orijentacija(this-&gt;t1, this-&gt;t2, this-&gt;t3) == Orijentacija(this-&gt;t1, this-&gt;t2, t) == Orijentacija(this-&gt;t2, this-&gt;t3, t) == Orijentacija(this-&gt;t3, this-&gt;t1, t))
        return true;
<a name="7"></a><font color="#0000FF"><a href="match576-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    else return false;
}

inline void Trougao::Ispisi() const {
    std::cout &lt;&lt; "((" &lt;&lt; t1.first &lt;&lt; "," &lt;&lt; t1.second &lt;&lt; "),(" &lt;&lt; t2.first &lt;&lt; "," &lt;&lt; t2.second &lt;&lt; "),(" &lt;&lt; t3.first &lt;&lt; "," &lt;&lt; t3.second &lt;&lt; "))";
</font>}

void Trougao::Transliraj(double delta_x, double delta_y) {
    t1.first += delta_x;
    t2.first += delta_x;
    t3.first += delta_x;
<a name="0"></a><font color="#FF0000"><a href="match576-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    t1.second += delta_y;
    t2.second += delta_y;
    t3.second += delta_y;
}

void Trougao::Centriraj(const Tacka &amp;t) {
    double delta_x(t.first - DajCentar().first), delta_y(t.second - DajCentar().second);
    Transliraj(delta_x, delta_y);
</font>}

void Trougao::Rotiraj(const Tacka &amp;t, double ugao) {
    t1.first -= t.first;
    t1.second -= t.second;
    double novi_x = t1.first * std::cos(ugao) - t1.second * std::sin(ugao);
    double novi_y = t1.first * std::sin(ugao) + t1.second * std::cos(ugao);
    t1.first = novi_x + t.first;
    t1.second = novi_y + t.second;
    t2.first -= t.first;
    t2.second -= t.second;
    novi_x = t2.first * std::cos(ugao) - t2.second * std::sin(ugao);
    novi_y = t2.first * std::sin(ugao) + t2.second * std::cos(ugao);
    t2.first = novi_x + t.first;
    t2.second = novi_y + t.second;
    t3.first -= t.first;
    t3.second -= t.second;
    novi_x = t3.first * std::cos(ugao) - t3.second * std::sin(ugao);
    novi_y = t3.first * std::sin(ugao) + t3.second * std::cos(ugao);
    t3.first = novi_x + t.first;
    t3.second = novi_y + t.second;
}

void Trougao::Skaliraj(const Tacka &amp;t, double faktor) {
    const double Eps(1e-10);
    if(std::abs(faktor) &lt; Eps) throw std::domain_error("Nekorektan faktor skaliranja");
    t1.first = t.first + faktor * (t1.first - t.first);
    t1.second = t.second + faktor * (t1.second - t.second);
    t2.first = t.first + faktor * (t2.first - t.first);
    t2.second = t.second + faktor * (t2.second - t.second);
    t3.first = t.first + faktor * (t3.first - t.first);
    t3.second = t.second + faktor * (t3.second - t.second);
}

void Trougao::Rotiraj(double ugao) {
    Tacka t(DajCentar());
    Rotiraj(t, ugao);
}

void Trougao::Skaliraj(double faktor) {
    Tacka t(DajCentar());
    Skaliraj(t, faktor);
}

bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2) {
    std::vector&lt;double&gt; x1, x2, y1, y2;
    x1.push_back(t1.t1.first);
    x1.push_back(t1.t2.first);
    x1.push_back(t1.t3.first);
    y1.push_back(t1.t1.second);
    y1.push_back(t1.t2.second);
    y1.push_back(t1.t3.second);
    x2.push_back(t2.t1.first);
    x2.push_back(t2.t2.first);
    x2.push_back(t2.t3.first);
    y2.push_back(t2.t1.second);
    y2.push_back(t2.t2.second);
    y2.push_back(t2.t3.second);
    std::sort(x1.begin(), x1.end());
    std::sort(x2.begin(), x2.end());
    std::sort(y1.begin(), y1.end());
    std::sort(y2.begin(), y2.end());
    const double Eps(1e-10);
    if(std::abs(x1[0] - x2[0]) &lt; Eps &amp;&amp; std::abs(x1[1] - x2[1]) &lt; Eps &amp;&amp; std::abs(x1[2] - x2[2]) &lt; Eps &amp;&amp;
    std::abs(y1[0] - y2[0]) &lt; Eps &amp;&amp; std::abs(y1[1] - y2[1]) &lt; Eps &amp;&amp; std::abs(y1[2] - y2[2]) &lt; Eps) return true;
    else return false;
}

bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2) {
    std::vector&lt;double&gt; uglovi1, uglovi2, stranice1, stranice2;
    uglovi1.push_back(t1.DajUgao(1));
    uglovi1.push_back(t1.DajUgao(2));
    uglovi1.push_back(t1.DajUgao(3));
    uglovi2.push_back(t2.DajUgao(1));
    uglovi2.push_back(t2.DajUgao(2));
    uglovi2.push_back(t2.DajUgao(3));
    stranice1.push_back(t1.DajStranicu(1));
    stranice1.push_back(t1.DajStranicu(2));
    stranice1.push_back(t1.DajStranicu(3));
    stranice2.push_back(t2.DajStranicu(1));
    stranice2.push_back(t2.DajStranicu(2));
    stranice2.push_back(t2.DajStranicu(3));
   
    const double Eps(1e-10);
    
    std::vector&lt;double&gt;::iterator najveci1(std::max_element(uglovi1.begin(), uglovi1.end()));
    std::vector&lt;double&gt;::iterator najveci2(std::max_element(uglovi2.begin(), uglovi2.end()));
    if(std::abs(*najveci1 - *najveci2) &gt; Eps) return false;
    else {
        std::vector&lt;double&gt;::iterator desni1(najveci1);
        std::vector&lt;double&gt;::iterator desni2(najveci2);
        std::vector&lt;double&gt;::iterator lijevi1(najveci1);
        std::vector&lt;double&gt;::iterator lijevi2(najveci2);
        desni1++;
        if(desni1 == uglovi1.end()) desni1 = uglovi1.begin();
        desni2++;
        if(desni2 == uglovi2.end()) desni2 = uglovi2.begin();
        lijevi1--;
        if(lijevi1 &lt; uglovi1.begin()) {
            lijevi1 = uglovi1.end();
            lijevi1--;
        }
        lijevi2--;
        if(lijevi2 &lt; uglovi2.begin()) {
            lijevi2 = uglovi2.end();
            lijevi2--;
        }
        if(Trougao::Orijentacija(t1.t1, t1.t2, t1.t3) == Trougao::Orijentacija(t2.t1, t2.t2, t2.t3)) {
            if(std::abs(*desni1 - *desni2) &gt; Eps) return false;
        }
        else {
            if(std::abs(*desni1 - *lijevi2) &gt; Eps) return false;
        }
    }
    
    std::sort(uglovi1.begin(), uglovi1.end());
    std::sort(uglovi2.begin(), uglovi2.end());
    std::sort(stranice1.begin(), stranice1.end());
    std::sort(stranice2.begin(), stranice2.end());
    if(std::abs(uglovi1[0] - uglovi2[0]) &lt; Eps &amp;&amp; std::abs(uglovi1[1] - uglovi2[1]) &lt; Eps &amp;&amp; std::abs(uglovi1[2] - uglovi2[2]) &lt; Eps &amp;&amp;
    std::abs(stranice1[0] - stranice2[0]) &lt; Eps &amp;&amp; std::abs(stranice1[1] - stranice2[1]) &lt; Eps &amp;&amp; std::abs(stranice1[2] - stranice2[2]) &lt; Eps &amp;&amp;
    std::abs(t1.DajPovrsinu() - t2.DajPovrsinu()) &lt; Eps)
        return true;
    else return false;
    
}

bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2) {
    std::vector&lt;double&gt; uglovi1, uglovi2, stranice1, stranice2;
    uglovi1.push_back(t1.DajUgao(1));
    uglovi1.push_back(t1.DajUgao(2));
    uglovi1.push_back(t1.DajUgao(3));
    uglovi2.push_back(t2.DajUgao(1));
    uglovi2.push_back(t2.DajUgao(2));
    uglovi2.push_back(t2.DajUgao(3));
    stranice1.push_back(t1.DajStranicu(1));
    stranice1.push_back(t1.DajStranicu(2));
    stranice1.push_back(t1.DajStranicu(3));
    stranice2.push_back(t2.DajStranicu(1));
    stranice2.push_back(t2.DajStranicu(2));
    stranice2.push_back(t2.DajStranicu(3));
    
    const double Eps(1e-10);
    
    std::vector&lt;double&gt;::iterator najveci1(std::max_element(uglovi1.begin(), uglovi1.end()));
    std::vector&lt;double&gt;::iterator najveci2(std::max_element(uglovi2.begin(), uglovi2.end()));
    if(std::abs(*najveci1 - *najveci2) &gt; Eps) return false;
    else {
        std::vector&lt;double&gt;::iterator desni1(najveci1);
        std::vector&lt;double&gt;::iterator desni2(najveci2);
        std::vector&lt;double&gt;::iterator lijevi1(najveci1);
        std::vector&lt;double&gt;::iterator lijevi2(najveci2);
        desni1++;
        if(desni1 == uglovi1.end()) desni1 = uglovi1.begin();
        desni2++;
        if(desni2 == uglovi2.end()) desni2 = uglovi2.begin();
        lijevi1--;
        if(lijevi1 &lt; uglovi1.begin()) {
            lijevi1 = uglovi1.end();
            lijevi1--;
        }
        lijevi2--;
        if(lijevi2 &lt; uglovi2.begin()) {
            lijevi2 = uglovi2.end();
            lijevi2--;
        }
        if(Trougao::Orijentacija(t1.t1, t1.t2, t1.t3) == Trougao::Orijentacija(t2.t1, t2.t2, t2.t3)) {
            if(std::abs(*desni1 - *desni2) &gt; Eps) return false;
        }
        else {
            if(std::abs(*desni1 - *lijevi2) &gt; Eps) return false;
        }
    }
    
    std::sort(uglovi1.begin(), uglovi1.end());
    std::sort(uglovi2.begin(), uglovi2.end());
    std::sort(stranice1.begin(), stranice1.end());
    std::sort(stranice2.begin(), stranice2.end());
    if(std::abs(uglovi1[0] - uglovi2[0]) &lt; Eps &amp;&amp; std::abs(uglovi1[1] - uglovi2[1]) &lt; Eps &amp;&amp; std::abs(uglovi1[2] - uglovi2[2]) &lt; Eps &amp;&amp;
    (std::abs((stranice1[0] / stranice2[0]) -  (stranice1[1] / stranice2[1])) &lt; Eps) &amp;&amp;
    (std::abs((stranice1[0] / stranice2[0]) - (stranice1[2] / stranice2[2])) &lt; Eps))
        return true;
    else return false;
}

int main ()
{
    std::cout &lt;&lt; "Koliko zelite kreirati trouglova: ";
    int n;
    std::cin &gt;&gt; n;
    std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt; v;
    for(unsigned int i(0); i &lt; n; i++) {
        pocetak:
        std::cout &lt;&lt; "Unesite podatke za " &lt;&lt; i + 1 &lt;&lt;  ". trougao (x1 y1 x2 y2 x3 y3): ";
        Tacka t1;
        Tacka t2;
        Tacka t3;
        std::cin &gt;&gt; t1.first &gt;&gt; t1.second &gt;&gt; t2.first &gt;&gt; t2.second &gt;&gt; t3.first &gt;&gt; t3.second;
        try {
            std::shared_ptr&lt;Trougao&gt; p(new Trougao(t1, t2, t3));
            v.push_back(p);
        }
        catch(std::bad_alloc izuzetak1) {
            std::cout &lt;&lt; "Nema dovoljno memorije";
        }
        catch(std::domain_error e) {
            std::cout &lt;&lt; e.what() &lt;&lt; ", ponovite unos!" &lt;&lt; std::endl;
            goto pocetak;
        }
    }
    
    std::cout &lt;&lt; "Unesite vektor translacije (dx dy): ";
    double delta_x(0), delta_y(0);
    std::cin &gt;&gt; delta_x &gt;&gt; delta_y;
    std::cout &lt;&lt; "Unesite ugao rotacije: ";
    double ugao(0);
    std::cin &gt;&gt; ugao;
    std::cout &lt;&lt; "Unesite faktor skaliranja: ";
    double faktor(0);
    std::cin &gt;&gt; faktor;
    
    std::transform(v.begin(), v.end(), v.begin(), [delta_x, delta_y, ugao, faktor](std::shared_ptr&lt;Trougao&gt; p) {
        p-&gt;Transliraj(delta_x, delta_y);
        p-&gt;Rotiraj(ugao);
        p-&gt;Skaliraj(p-&gt;DajTjeme(1), faktor);
        return p; });
        
<a name="8"></a><font color="#00FFFF"><a href="match576-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    std::sort(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p1, std::shared_ptr&lt;Trougao&gt; p2) {
        return p1-&gt;DajPovrsinu() &lt; p2-&gt;DajPovrsinu(); } );
        
    std::cout &lt;&lt; "Trouglovi nakon obavljenih transformacija:\n";
    std::for_each(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p) { p-&gt;Ispisi(); std::cout &lt;&lt; std::endl; });
</font>    
    std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt;::iterator it = std::min_element(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p1, std::shared_ptr&lt;Trougao&gt; p2) {
        return p1-&gt;DajObim() &lt; p2-&gt;DajObim();
    });
    std::cout &lt;&lt; "Trougao sa najmanjim obimom: ";
    (*it)-&gt;Ispisi();
    std::cout &lt;&lt; std::endl;
    
    int brojac(0);
    for(unsigned int i(0); i &lt; n; i++) {
<a name="9"></a><font color="#FF00FF"><a href="match576-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

        for(unsigned int j(i + 1); j &lt; n; j++)
            if(DaLiSuIdenticni(*v[i], *v[j])) {
                brojac++;
                if(brojac == 1) std::cout &lt;&lt; "Parovi identicnih trouglova:\n";
</font><a name="3"></a><font color="#00FFFF"><a href="match576-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                v[i]-&gt;Ispisi();
                std::cout &lt;&lt; " i ";
                v[j]-&gt;Ispisi();
                std::cout &lt;&lt; std::endl;
            }
    }
    if(brojac == 0) std::cout &lt;&lt; "Nema identicnih trouglova!\n";
</font>    
    brojac = 0;
    for(unsigned int i(0); i &lt; n; i++) {
<a name="10"></a><font color="#FF0000"><a href="match576-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

        for(unsigned int j(i + 1); j &lt; n; j++)
            if(DaLiSuPodudarni(*v[i], *v[j])) {
                brojac++;
                if(brojac == 1) std::cout &lt;&lt; "Parovi podudarnih trouglova:\n";
</font><a name="4"></a><font color="#FF00FF"><a href="match576-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                v[i]-&gt;Ispisi();
                std::cout &lt;&lt; " i ";
                v[j]-&gt;Ispisi();
                std::cout &lt;&lt; std::endl;
            }
    }
    if(brojac == 0) std::cout &lt;&lt; "Nema podudarnih trouglova!\n";
</font>    
    brojac = 0;
    for(unsigned int i(0); i &lt; n; i++) {
<a name="11"></a><font color="#00FF00"><a href="match576-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        for(unsigned int j(i + 1); j &lt; n; j++)
            if(DaLiSuSlicni(*v[i], *v[j])) {
                brojac++;
                if(brojac == 1) std::cout &lt;&lt; "Parovi slicnih trouglova:\n";
</font><a name="5"></a><font color="#FF0000"><a href="match576-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                v[i]-&gt;Ispisi();
                std::cout &lt;&lt; " i ";
                v[j]-&gt;Ispisi();
                std::cout &lt;&lt; std::endl;
            }
    }
    if(brojac == 0) std::cout &lt;&lt; "Nema slicnih trouglova!\n";
</font>	return 0;
}</pre>
</body>
</html>
