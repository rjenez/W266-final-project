<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student1132.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student1132.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 1
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
typedef std::pair&lt;double, double&gt; Tacka;

class Trougao {
    
    private:
    Tacka T[3];
    static bool equals(double x, double y);
    static double udaljenost(const Tacka&amp; t1, const Tacka&amp; t2);
    static Tacka rotirana(Tacka x, Tacka c, double ugao);
    
    public:
    Trougao(const Tacka&amp; t1, const Tacka&amp; t2, const Tacka&amp; t3);
    void Postavi(const Tacka&amp; t1, const Tacka&amp; t2, const Tacka&amp; t3);
    void Postavi(int indeks, const Tacka&amp; t);
    static int Orijentacija(const Tacka&amp; t1, const Tacka&amp; t2, const Tacka&amp; t3);
    Tacka DajTjeme(int indeks) const;
    double DajStranicu(int indeks) const;
    double DajUgao(int indeks) const;
    Tacka DajCentar() const;
    double DajObim() const;
    double DajPovrsinu() const;
    bool DaLiJePozitivnoOrijentiran() const;
    bool DaLiJeUnutra(const Tacka&amp; t) const;
    void Ispisi() const;
    void Transliraj(double dx, double dy);
    void Centriraj(const Tacka&amp; t);
    void Rotiraj(const Tacka&amp; t, double ugao);
    void Skaliraj(const Tacka&amp; t, double faktor);
    void Rotiraj(double ugao);
    void Skaliraj(double faktor);
    friend bool DaLiSuIdenticni(const Trougao&amp; t1, const Trougao&amp; t2);
<a name="2"></a><font color="#0000FF"><a href="match615-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    friend bool DaLiSuPodudarni(const Trougao&amp; t1, const Trougao&amp; t2);
    friend bool DaLiSuSlicni(const Trougao&amp; t1, const Trougao&amp; t2);
};

bool Trougao::equals(double x, double y) {
    return std::fabs(x-y) &lt; 1e-10;
</font>}
double Trougao::udaljenost(const Tacka&amp; t1, const Tacka&amp; t2)
{
    return std::sqrt((t1.first-t2.first) * (t1.first-t2.first) + (t1.second-t2.second) * (t1.second-t2.second));
}
Tacka Trougao::rotirana(Tacka x, Tacka c, double ugao)
{
    return {c.first + (x.first - c.first)*std::cos(ugao) - (x.second-c.second)*std::sin(ugao), 
    c.second + (x.first - c.first) * std::sin(ugao) + (x.second-c.second)*std::cos(ugao)};
}
<a name="1"></a><font color="#00FF00"><a href="match615-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

Trougao::Trougao(const Tacka&amp; t1, const Tacka&amp; t2, const Tacka&amp; t3)
{
    if(Orijentacija(t1, t2, t3) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
    T[0] = t1; T[1] = t2; T[2] = t3;
}
void Trougao::Postavi(const Tacka&amp; t1, const Tacka&amp; t2, const Tacka&amp; t3)
</font>{
    if(Orijentacija(t1, t2, t3) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
    T[0] = t1; T[1] = t2; T[2] = t3;
}
void Trougao::Postavi(int indeks, const Tacka&amp; t)
{
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    auto aux = T[indeks - 1];
    T[indeks - 1] = t;
    if(Orijentacija(T[0], T[1], T[2]) == 0) 
    {
        T[indeks - 1] = aux;
        throw std::domain_error("Nekorektne pozicije tjemena");
    }
}
int Trougao::Orijentacija(const Tacka&amp; t1, const Tacka&amp; t2, const Tacka&amp; t3)
{
    double rey = t1.first*(t2.second - t3.second) + t2.first * (t3.second - t1.second) + t3.first * (t1.second - t2.second);
    if(Trougao::equals(rey, 0)) return 0;
    if(rey &lt; 0) return -1;
    return 1;
}
Tacka Trougao::DajTjeme(int indeks) const
{
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    return T[indeks - 1];
}
double Trougao::DajStranicu(int indeks) const
{
    if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
    std::set&lt;int&gt; s = {1,2,3};
    s.erase(indeks);
    return udaljenost(T[*s.begin() - 1], T[*s.rbegin() - 1]);
}
double Trougao::DajUgao(int indeks) const
{
     if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
     std::set&lt;int&gt; s = {1,2,3};
     s.erase(indeks);
     double a = DajStranicu(indeks), b = DajStranicu(*s.rbegin()), c = DajStranicu(*s.begin());
<a name="0"></a><font color="#FF0000"><a href="match615-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

     return std::acos( (b*b + c*c - a*a) / (2*a*b));
}
Tacka Trougao::DajCentar() const
{
    return {(T[0].first + T[1].first + T[2].first)/3, (T[0].second + T[1].second + T[2].second)/3};
}
double Trougao::DajObim() const
{
    return DajStranicu(1) + DajStranicu(2) + DajStranicu(3);
}
double Trougao::DajPovrsinu() const
{
    return std::fabs(T[0].first*(T[1].second - T[2].second) + T[1].first * (T[2].second - T[0].second) + T[2].first * (T[0].second - T[1].second))/2;
</font>}
bool Trougao::DaLiJePozitivnoOrijentiran() const
{
    return Orijentacija(T[0], T[1], T[2]) == 1;
}
bool Trougao::DaLiJeUnutra(const Tacka&amp; t) const
{
    int o1 = Orijentacija(T[0], T[1], T[2]);
<a name="6"></a><font color="#00FF00"><a href="match615-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    return (Orijentacija(T[0], T[1], t) == o1 &amp;&amp; Orijentacija(T[1], T[2], t) == o1 &amp;&amp; Orijentacija(T[2], T[0], t) == o1 );
}
void Trougao::Ispisi() const
{
    std::cout&lt;&lt; "(("&lt;&lt;T[0].first&lt;&lt;","&lt;&lt;T[0].second&lt;&lt;"),("&lt;&lt;T[1].first&lt;&lt;","&lt;&lt;T[1].second&lt;&lt;"),("&lt;&lt;T[2].first&lt;&lt;","&lt;&lt;T[2].second&lt;&lt;"))";
</font><a name="5"></a><font color="#FF0000"><a href="match615-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

}
void Trougao::Transliraj(double dx, double dy)
</font>{
    T[0] = {T[0].first + dx, T[0].second + dy};
    T[1] = {T[1].first + dx, T[1].second + dy};
    T[2] = {T[2].first + dx, T[2].second + dy};
}
void Trougao::Centriraj(const Tacka&amp; t)
{
    auto C = DajCentar();
<a name="7"></a><font color="#0000FF"><a href="match615-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    Transliraj(t.first - C.first, t.second - C.second);
}
void Trougao::Rotiraj(const Tacka&amp; t, double ugao)
</font>{
    T[0] = rotirana(T[0],t,ugao);
    T[1] = rotirana(T[1],t,ugao);
    T[2] = rotirana(T[2],t,ugao);
}
void Trougao::Skaliraj(const Tacka&amp; t, double k)
{
    if(k == 0) throw std::domain_error("Nekorektan faktor skaliranja");
    T[0] = {t.first + k*(T[0].first-t.first), t.second + k*(T[0].second-t.second)};
    T[1] = {t.first + k*(T[1].first-t.first), t.second + k*(T[1].second-t.second)};
<a name="8"></a><font color="#00FFFF"><a href="match615-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    T[2] = {t.first + k*(T[2].first-t.first), t.second + k*(T[2].second-t.second)};
}
void Trougao::Rotiraj(double ugao)
{
    Rotiraj(DajCentar(), ugao);
}
void Trougao::Skaliraj(double faktor)
{
    Skaliraj(DajCentar(), faktor);
</font>}
bool DaLiSuIdenticni(const Trougao&amp; t1, const Trougao&amp; t2)
{
    auto s1 = std::set&lt;Tacka&gt;{t1.T[0], t1.T[1], t1.T[2]};
    auto s2 = std::set&lt;Tacka&gt;{t2.T[0], t2.T[1], t2.T[2]};
    auto it = s1.begin();
    for(auto e: s2) 
        if(!Trougao::equals(it-&gt;first, e.first) || !Trougao::equals(it-&gt;second, e.second)) return false;
        else it++;
    return true;
}

bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2)
{
    std::vector&lt;std::pair&lt;double, Tacka&gt; &gt; p1, p2;
    for(int i=1; i&lt;=3; i++)
    {
        p1.push_back({t1.DajStranicu(i), t1.DajTjeme(i)});
        p2.push_back({t2.DajStranicu(i), t2.DajTjeme(i)});
    }
    std::sort(p1.begin(), p1.end());
    std::sort(p2.begin(), p2.end());
    bool ok = true;
    for(int i=0; i&lt;3; i++)
    {
        ok = ((Trougao::equals(p1[i].first, p2[i].first)) &amp;&amp; ok);
    }
    if(ok &amp;&amp; ( Trougao::equals(p1[0].first, p1[1].first) || Trougao::equals(p1[1].first, p1[2].first))) ok = true;
    else if(Trougao::Orijentacija(p1[0].second, p1[1].second, p1[2].second) != Trougao::Orijentacija(p2[0].second,p2[1].second,p2[2].second)) ok = false;
    return ok;
}
bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2)
{
    std::vector&lt;std::pair&lt;double, Tacka&gt; &gt; p1, p2;
    for(int i=1; i&lt;=3; i++)
    {
        p1.push_back({t1.DajStranicu(i), t1.DajTjeme(i)});
        p2.push_back({t2.DajStranicu(i), t2.DajTjeme(i)});
    }
    std::sort(p1.begin(), p1.end());
    std::sort(p2.begin(), p2.end());
    bool ok = true;
    double k = p1[0].first / p2[0].first;
    for(int i=0; i&lt;3; i++)
        ok = (Trougao::equals(k, p1[i].first/ p2[i].first) &amp;&amp; ok);
    if(ok &amp;&amp; ( Trougao::equals(p1[0].first/p2[0].first, p1[1].first/p2[0].first) || Trougao::equals(p1[1].first/p2[0].first, p1[2].first/p2[0].first))) ok = true;
    else if(Trougao::Orijentacija(p1[0].second, p1[1].second, p1[2].second) != Trougao::Orijentacija(p2[0].second,p2[1].second,p2[2].second)) ok = false;
    return ok;
}

int main ()
{
    std::cout&lt;&lt; "Koliko zelite kreirati trouglova: ";
    int N;
    double x1,y1,x2,y2,x3,y3;
    std::cin&gt;&gt;N;
    std::vector&lt;std::shared_ptr&lt;Trougao&gt; &gt; v(N);
    for(int i=0; i&lt;N; i++)
    {
        std::cout&lt;&lt; "Unesite podatke za "&lt;&lt; i+1 &lt;&lt;". trougao (x1 y1 x2 y2 x3 y3): ";
<a name="3"></a><font color="#00FFFF"><a href="match615-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cin&gt;&gt; x1&gt;&gt; y1&gt;&gt; x2&gt;&gt; y2&gt;&gt; x3&gt;&gt; y3;
        try
        {
            v[i] = std::make_shared&lt;Trougao&gt;(Trougao{{x1,y1}, {x2,y2}, {x3,y3}});
</font>        }
        catch(std::domain_error e)
        {
            std::cout&lt;&lt; e.what()&lt;&lt;", ponovite unos!\n";
            i--;
        }
    }
<a name="4"></a><font color="#FF00FF"><a href="match615-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    double dx, dy, alpha, k;
    std::cout&lt;&lt; "Unesite vektor translacije (dx dy): ";
    std::cin&gt;&gt; dx&gt;&gt; dy;
    std::cout&lt;&lt; "Unesite ugao rotacije: ";
    std::cin&gt;&gt; alpha;
</font>    std::cout&lt;&lt; "Unesite faktor skaliranja: ";
    std::cin&gt;&gt; k;
    std::cout &lt;&lt; "Trouglovi nakon obavljenih transformacija:\n";
    std::transform(v.begin(), v.end(),v.begin(), [dx,dy,alpha,k](std::shared_ptr&lt;Trougao&gt; p1){
        p1-&gt;Transliraj(dx, dy);
        p1-&gt;Rotiraj(alpha);
        p1-&gt;Skaliraj(p1-&gt;DajTjeme(1), k);
        return p1;
    });
    std::sort(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p1, std::shared_ptr&lt;Trougao&gt; p2){
        return p1-&gt;DajPovrsinu() &lt; p2-&gt;DajPovrsinu();
    });
    std::for_each(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p1){
       p1-&gt;Ispisi(); std::cout&lt;&lt; "\n"; 
    });
    std::cout&lt;&lt;"Trougao sa najmanjim obimom: ";
    (*min_element(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p1, std::shared_ptr&lt;Trougao&gt; p2){
        return p1-&gt;DajObim() &lt; p2-&gt;DajObim();
    }))-&gt;Ispisi();
    std::cout&lt;&lt;"\n";
    std::vector&lt;std::pair&lt;std::shared_ptr&lt;Trougao&gt;, std::shared_ptr&lt;Trougao&gt;&gt;&gt; vpsi, vpsp, vpss;
    for(int i=0;i&lt;N;i++)
    {
        for(int j = i+1; j&lt;N; j++)
        {
            if(DaLiSuIdenticni(*v[i], *v[j])) vpsi.push_back({v[i], v[j]});
            if(DaLiSuPodudarni(*v[i], *v[j])) vpsp.push_back({v[i], v[j]});
            if(DaLiSuSlicni(*v[i], *v[j])) vpss.push_back({v[i], v[j]});
        }
    }
    if(vpsi.size() == 0) std::cout&lt;&lt;"Nema identicnih trouglova!\n";
    else 
    {
        std::cout&lt;&lt;"Parovi identicnih trouglova:\n";
        std::for_each(vpsi.begin(), vpsi.end(), [](std::pair&lt;std::shared_ptr&lt;Trougao&gt;,std::shared_ptr&lt;Trougao&gt; &gt; p1){
        p1.first-&gt;Ispisi(); std::cout&lt;&lt; " i "; p1.second-&gt;Ispisi(); std::cout&lt;&lt; "\n"; 
        });
    }
    if(vpsp.size() == 0) std::cout&lt;&lt;"Nema podudarnih trouglova!\n";
    else
    {
        std::cout&lt;&lt; "Parovi podudarnih trouglova:\n";
       std::for_each(vpsp.begin(), vpsp.end(), [](std::pair&lt;std::shared_ptr&lt;Trougao&gt;,std::shared_ptr&lt;Trougao&gt; &gt; p1){
       p1.first-&gt;Ispisi(); std::cout&lt;&lt; " i "; p1.second-&gt;Ispisi(); std::cout&lt;&lt; "\n"; 
       });
    }
    if(vpss.size() == 0) std::cout&lt;&lt;"Nema slicnih trouglova!\n";
    else
    {
        std::cout&lt;&lt; "Parovi slicnih trouglova:\n";
        std::for_each(vpss.begin(), vpss.end(), [](std::pair&lt;std::shared_ptr&lt;Trougao&gt;,std::shared_ptr&lt;Trougao&gt; &gt; p1){
        p1.first-&gt;Ispisi(); std::cout&lt;&lt; " i "; p1.second-&gt;Ispisi(); std::cout&lt;&lt; "\n"; 
        });
    }
	return 0;
}</pre>
</body>
</html>
