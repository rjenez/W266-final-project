<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student8993.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student8993.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 1
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;memory&gt;
#include &lt;new&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;

typedef std::pair&lt;double,double&gt; Tacka;

class Trougao {
    std::vector&lt;Tacka&gt; trougao;
    static bool Double_cmp (double x, double y, double eps=1e-10){
        return std::fabs(x-y)&lt;=eps*(std::fabs(x)+std::fabs(y));
    }
    static constexpr double PI=3.14159;
    public:
    Trougao (const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) { 
        if(Orijentacija(t1,t2,t3)==0) throw std::domain_error("Nekorektne pozicije tjemena");
        trougao.push_back(t1); trougao.push_back(t2); trougao.push_back(t3);
    };
    void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    void Postavi(int indeks, const Tacka &amp;t);
    static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
        if(t1.first*(t2.second-t3.second)-t2.first*(t1.second-t3.second)+t3.first*(t1.second-t2.second)&gt;0) return 1;
        else if(t1.first*(t2.second-t3.second)-t2.first*(t1.second-t3.second)+t3.first*(t1.second-t2.second)&lt;0) return -1;
        return 0;
    }
    Tacka DajTjeme(int indeks) const;
    double DajStranicu(int indeks) const;
    double DajUgao(int indeks) const;
    Tacka DajCentar() const;
    double DajObim() const;
    double DajPovrsinu() const;
    bool DaLiJePozitivnoOrijentiran() const {return Orijentacija(trougao[0],trougao[1],trougao[2]);};
    bool DaLiJeUnutra(const Tacka &amp;t) const;
    void Ispisi() const;
    void Transliraj(double delta_x, double delta_y);
    void Centriraj(const Tacka &amp;t);
    void Rotiraj(const Tacka &amp;t, double ugao);
    void Skaliraj(const Tacka &amp;t, double faktor);
    void Rotiraj(double ugao);
    void Skaliraj(double faktor);
    friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};

void Trougao::Postavi (const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
    if(Orijentacija(t1,t2,t3)==0) throw std::domain_error ("Nekorektne pozicije tjemena");
    trougao[0]=t1; trougao[1]=t2; trougao[2]=t3;
    //trougao.push_back(t1); trougao.push_back(t2); trougao.push_back(t3);
}

void Trougao::Postavi(int indeks, const Tacka &amp;t){
    if(indeks&lt;1 || indeks&gt;3) throw std::range_error("Nekorektan indeks");
    try{
        if(indeks==1) this-&gt;Postavi(t,this-&gt;trougao[1], this-&gt;trougao[2]);
        else if(indeks == 2) this-&gt;Postavi( this-&gt;trougao[0], t, this-&gt;trougao[2]);
        else this-&gt;Postavi(this-&gt;trougao[0], this-&gt;trougao[1], t);
    }
    catch(...){
        throw;
    }
}

Tacka Trougao::DajTjeme ( int indeks ) const{
    if(indeks &lt;1 || indeks &gt;3) throw std::range_error ("Nekorektan indeks");
    return trougao[indeks-1];
}

double Trougao::DajStranicu(int indeks) const{
    if(indeks &lt;1 || indeks &gt;3) throw std::range_error ("Nekorektan indeks");
    if(indeks==1) return std::sqrt((trougao[1].first-trougao[2].first)*(trougao[1].first-trougao[2].first)+(trougao[1].second-trougao[2].second)*(trougao[1].second-trougao[2].second));
    else if(indeks==2) return std::sqrt((trougao[0].first-trougao[2].first)*(trougao[0].first-trougao[2].first)+(trougao[0].second-trougao[2].second)*(trougao[0].second-trougao[2].second));
    return std::sqrt((trougao[1].first-trougao[0].first)*(trougao[1].first-trougao[0].first)+(trougao[1].second-trougao[0].second)*(trougao[1].second-trougao[0].second));
}

double Trougao::DajUgao(int indeks) const{
    if(indeks &lt;1 || indeks &gt;3) throw std::range_error ("Nekorektan indeks");
    double a(DajStranicu(1)), b(DajStranicu(2)), c(DajStranicu(3));
    if(indeks==1){
        double suma(b*b+c*c-a*a);
        return std::acos(suma/(2*b*c));
    }
    else if (indeks==2){
        double suma(a*a+c*c-b*b);
        return std::acos(suma/(2*a*c));
    } 
    double suma(a*a+b*b-c*c);
    return std::acos(suma/(2*a*b));
}

Tacka Trougao::DajCentar() const{
    return Tacka ((trougao[0].first+trougao[1].first+trougao[2].first)/3, (trougao[0].second+trougao[1].second+trougao[2].second)/3);
}

double Trougao::DajObim() const{
    return DajStranicu(1)+DajStranicu(2)+DajStranicu(3);
}

double Trougao::DajPovrsinu() const{
    auto a(std::fabs(trougao[0].first*(trougao[1].second-trougao[2].second)-trougao[1].first*(trougao[0].second-trougao[2].second)+trougao[2].first*(trougao[0].second-trougao[1].second)));
    return a/2;
}

void Trougao::Ispisi() const{
    std::cout &lt;&lt; "(("&lt;&lt;trougao[0].first&lt;&lt;","&lt;&lt;trougao[0].second&lt;&lt;"),("&lt;&lt;trougao[1].first&lt;&lt;","&lt;&lt;trougao[1].second&lt;&lt;"),("&lt;&lt;trougao[2].first&lt;&lt;","&lt;&lt;trougao[2].second&lt;&lt;"))";
}

void Trougao::Transliraj(double delta_x, double delta_y){
    for(int i=0; i&lt;3; i++){
        trougao[i].first+=delta_x;
        trougao[i].second+=delta_y;
    }
}

void Trougao::Centriraj(const Tacka &amp;t){
<a name="3"></a><font color="#00FFFF"><a href="match774-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    double dx(t.first-DajCentar().first), dy(t.second-DajCentar().second);
    Transliraj(dx,dy);
}

void Trougao::Rotiraj(const Tacka &amp;t, double ugao){
</font>    if(Double_cmp(ugao,0)) return;
    for(int i=0; i&lt;3; i++){
        Tacka p(trougao[i]);
        trougao[i].first=t.first + (p.first-t.first)*std::cos(ugao)-(p.second-t.second)*std::sin(ugao);
        trougao[i].second=t.second + (p.first-t.first)*std::sin(ugao)+(p.second-t.second)*std::cos(ugao);
    }
}


void Trougao::Skaliraj(const Tacka &amp;t, double faktor){
    if(Trougao::Double_cmp(faktor, 0)) throw std::domain_error("Nekorektan faktor skaliranja");
    for(int i=0; i&lt;3; i++){
        trougao[i].first=t.first+faktor*(trougao[i].first-t.first);
        trougao[i].second=t.second+faktor*(trougao[i].second-t.second);
    }
}

void Trougao::Rotiraj(double ugao){
    Rotiraj(DajCentar(), ugao);
}


void Trougao::Skaliraj(double faktor){
    Skaliraj(DajCentar(),faktor);
}

bool Trougao::DaLiJeUnutra(const Tacka &amp;t) const{
    
    if(Orijentacija(trougao[0],trougao[1],trougao[2])==1){
        if(Orijentacija(trougao[0],trougao[1],t)==1){
            if(Orijentacija(trougao[1],trougao[2],t)==1){
                if(Orijentacija(trougao[2], trougao[0], t)==1) return true;
            }
        }
    }
    else if(Orijentacija(trougao[0],trougao[1],trougao[2])==-1){
        if(Orijentacija(trougao[0],trougao[1],t)==-1){
            if(Orijentacija(trougao[1],trougao[2],t)==-1){
                if(Orijentacija(trougao[2],trougao[0],t)==-1) return true;
            }
        }
    }
    return false;
}

bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2){
    int identicni(0);
    for(int i=0;i&lt;3; i++){
        for(int j=0; j&lt;3; j++){
            if(Trougao::Double_cmp(t1.trougao[i].first,t2.trougao[j].first) &amp;&amp; Trougao::Double_cmp(t1.trougao[i].second,t2.trougao[j].second)) identicni++;
        }
    }
    return (identicni==3);
}


bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2){
    

    bool nadjen(false);
        for(int i=1; i&lt;4; i++){
            for(int j=1; j&lt;4;j++){
                if(Trougao::Double_cmp(t1.DajStranicu(i), t2.DajStranicu(j)) &amp;&amp; Trougao::Double_cmp(t1.DajUgao(i), t2.DajUgao(j))){
                    for(int k=1; k&lt;4; k++){
                        for(int l=1; l&lt;4; l++){
                            if(k!=i &amp;&amp; l!=j){
                                if(Trougao::Double_cmp(t1.DajStranicu(k), t2.DajStranicu(l)) &amp;&amp; Trougao::Double_cmp(t1.DajUgao(k), t2.DajUgao(l))){
                                    nadjen=true; 
                                    k=l=i=j=100 ;
                                    break;
                                }
                            }
                        }
                    }
                }
            }
        }
        //for(int i=0; i&lt;3; i++) if(stranice[i]==-1 || uglovi[i]==-1) return false;
    return nadjen;
}

bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::vector&lt;bool&gt; isti(3);
    for(int i=1; i&lt;4; i++){
        for(int j=1; j&lt;4; j++){
            if(Trougao::Double_cmp(t1.DajUgao(i),t2.DajUgao(j))) isti[i-1]=true;
        }
    }
    int b(0);
    for(int i=0; i&lt;3; i++) if(isti[i]) b++;
    if(b&gt;=2) return true;
    return false;
}


int main ()
{
    int n;
    std::cout &lt;&lt; "Koliko zelite kreirati trouglova: ";
        std::cin&gt;&gt;n;
        std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt; v;
    try{
        
    
        v.resize(n);
        
        for(int i=0; i&lt;n; i++){
            std::cout &lt;&lt; "Unesite podatke za "&lt;&lt;i+1&lt;&lt;". trougao (x1 y1 x2 y2 x3 y3): " ;
            double x1,y1,x2,y2,x3,y3;
            std::cin &gt;&gt; x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2&gt;&gt;x3&gt;&gt;y3;
            try{
<a name="4"></a><font color="#FF00FF"><a href="match774-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                Trougao t(Tacka(x1,y1), Tacka(x2,y2), Tacka(x3,y3));
                v[i]=std::make_shared&lt;Trougao&gt; (Tacka(x1,y1), Tacka(x2,y2), Tacka(x3,y3));
</font>            }
            catch (std::domain_error){
                std::cout &lt;&lt; "Nekorektne pozicije tjemena, ponovite unos!" &lt;&lt; std::endl;
                i--;
            }
        }
        std::cout &lt;&lt; "Unesite vektor translacije (dx dy): ";
        double dx,dy;
        std::cin &gt;&gt; dx&gt;&gt;dy;
<a name="5"></a><font color="#FF0000"><a href="match774-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

        std::transform(v.begin(), v.end(), v.begin(), [dx,dy] (std::shared_ptr&lt;Trougao&gt; pok) { pok-&gt;Transliraj(dx,dy); return pok; } );
        
        std::cout &lt;&lt; "Unesite ugao rotacije: " ;
</font>        double ug;
        std::cin &gt;&gt; ug;
<a name="6"></a><font color="#00FF00"><a href="match774-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        std::transform(v.begin(), v.end(), v.begin(), [ug] (std::shared_ptr&lt;Trougao&gt; pok) { pok-&gt;Rotiraj(ug); return pok;});

        std::cout &lt;&lt; "Unesite faktor skaliranja: " ;
</font>        double fkt;
        std::cin &gt;&gt; fkt;
        try{
            std::transform(v.begin(), v.end(), v.begin(), [fkt] (std::shared_ptr&lt;Trougao&gt; pok) { pok-&gt;Skaliraj( pok-&gt;DajTjeme(1) ,fkt); return pok;});
        }
        catch (std::domain_error i){
            std::cout &lt;&lt; i.what() &lt;&lt; std::endl;
        }
        std::sort(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; p1, std::shared_ptr&lt;Trougao&gt; p2) {return p1-&gt;DajPovrsinu() &lt; p2-&gt;DajPovrsinu() ;});
        std::cout&lt;&lt;"Trouglovi nakon obavljenih transformacija:"&lt;&lt;std::endl;
        std::for_each(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; ptr) {ptr-&gt;Ispisi(); std::cout&lt;&lt;std::endl;});
        
        Trougao min_obim (**std::min_element(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; pok1, std::shared_ptr&lt;Trougao&gt; pok2) {return pok1-&gt;DajObim()&lt;pok2-&gt;DajObim();}));
        std::cout &lt;&lt; "Trougao sa najmanjim obimom: "; min_obim.Ispisi(); std::cout&lt;&lt;std::endl;
        bool idn(false), slicni(false), podudarni(false);
        
        for(int i=0; i&lt;v.size(); i++){
            for(int j=i+1; j&lt;v.size(); j++){
<a name="0"></a><font color="#FF0000"><a href="match774-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

                if (DaLiSuIdenticni(*v[i], *v[j])){
                    if(!idn) std::cout &lt;&lt; "Parovi identicnih trouglova:" &lt;&lt; std::endl;
                    idn=true;
                    v[i]-&gt;Ispisi();
                    std::cout &lt;&lt; " i "; v[j]-&gt;Ispisi();
                    std::cout  &lt;&lt; std::endl;
                }
            }
        }
        if(!idn) std::cout &lt;&lt; "Nema identicnih trouglova!" &lt;&lt; std::endl;
        
        for(int i=0; i&lt;v.size(); i++){
</font>            for(int j=i+1; j&lt;v.size(); j++){
<a name="1"></a><font color="#00FF00"><a href="match774-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

                if (DaLiSuPodudarni(*v[i], *v[j])){
                    if(!podudarni) std::cout &lt;&lt; "Parovi podudarnih trouglova:" &lt;&lt; std::endl;
                    podudarni=true;
                    v[i]-&gt;Ispisi();
                    std::cout &lt;&lt; " i "; v[j]-&gt;Ispisi();
                    std::cout  &lt;&lt; std::endl;
                }
            }
        }
        if(!podudarni) std::cout &lt;&lt; "Nema podudarnih trouglova!" &lt;&lt; std::endl;
        
        for(int i=0; i&lt;v.size(); i++){
</font>            for(int j=i+1; j&lt;v.size(); j++){
<a name="2"></a><font color="#0000FF"><a href="match774-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

                if (DaLiSuSlicni(*v[i], *v[j])){
                    if(!slicni) std::cout &lt;&lt; "Parovi slicnih trouglova:" &lt;&lt; std::endl;
                    slicni=true;
                    v[i]-&gt;Ispisi();
                    std::cout &lt;&lt; " i "; v[j]-&gt;Ispisi();
                    std::cout  &lt;&lt; std::endl;
                }
            }
        }
        if(!slicni) std::cout &lt;&lt; "Nema slicnih trouglova!" &lt;&lt; std::endl;
</font>
        for(int i=0; i&lt;n; i++) v[i]=nullptr;
    }
    catch(std::bad_alloc){
        std::cout &lt;&lt; "Nema memorije" &lt;&lt; std::endl;
        for(int i=0; i&lt;n; i++) v[i]=nullptr;
    }
    
	return 0;
}</pre>
</body>
</html>
