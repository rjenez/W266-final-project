<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student2472.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student2472.cpp<p></p><pre>
<a name="5"></a><font color="#FF0000"><a href="match267-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 1
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;set&gt;
#include &lt;new&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;

typedef std::pair&lt;double, double&gt; Tacka;

class Trougao{
    std::vector&lt;Tacka&gt; tacke;
</font>    static int Kolinearne(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
        double glat(t1.first*(t2.second - t3.second) - t2.first*(t1.second - t3.second) + t3.first*(t1.second - t2.second));
        if(glat &lt; 0) return -1;
        else if(glat &gt; 0) return 1;
        return 0;
    }
    double Kolinearne_1(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) const {
        return (t1.first*(t2.second - t3.second) - t2.first*(t1.second - t3.second) + t3.first*(t1.second - t2.second));
    }
    double Duzina(const Tacka &amp;t1, const Tacka &amp;t2) const {
        return std::sqrt((t1.first - t2.first)*(t1.first - t2.first) + (t1.second - t2.second)*(t1.second - t2.second));
    }
    void Nadjiindexe(int &amp;ind1, int &amp;ind2, int &amp;indeks) const {
             if(indeks == 1) {ind1 = 2; ind2 = 3;}
        else if(indeks == 2) {ind1 = 1; ind2 = 3;}
        else if(indeks == 3) {ind1 = 1; ind2 = 2;}
    }
<a name="1"></a><font color="#00FF00"><a href="match267-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    public:
    Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3):tacke(3){
        if(Kolinearne(t1, t2, t3) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
        tacke[0] = t1; tacke[1] = t2; tacke[2] = t3; 
    };
    void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
        if(Kolinearne(t1, t2, t3) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
        tacke[0] = t1; tacke[1] = t2; tacke[2] = t3; 
    };
    void Postavi(int indeks, const Tacka &amp;t){
        if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
</font>        std::vector&lt;Tacka&gt; tacke1(tacke); tacke1[indeks] = t;
        if(Kolinearne(tacke1[0], tacke1[1], tacke1[2]) == 0) throw std::domain_error("Nekorektne pozicije tjemena");
        tacke[indeks] = t; 
    };
    static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
        return Kolinearne(t1, t2, t3);
    };
<a name="4"></a><font color="#FF00FF"><a href="match267-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Tacka DajTjeme(int indeks) const{
        if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
        return tacke[indeks-1];
    };
    double DajStranicu(int indeks) const{
        if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
        if(indeks == 1) return Duzina(tacke[1], tacke[2]);
</font>        else if(indeks == 2)  return Duzina(tacke[0], tacke[2]);
        return Duzina(tacke[0], tacke[1]);
    };
    double DajUgao(int indeks) const{
        int ind1, ind2;
        Nadjiindexe(ind1, ind2, indeks);
        double kosinus_ugla;
        kosinus_ugla = (DajStranicu(ind1)*DajStranicu(ind1) + DajStranicu(ind2)*DajStranicu(ind2) - 
         DajStranicu(indeks)*DajStranicu(indeks)) / (2*DajStranicu(ind1)*DajStranicu(ind2));
        return acos(kosinus_ugla);
    };
<a name="3"></a><font color="#00FFFF"><a href="match267-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    Tacka DajCentar() const{
        Tacka centar;
        centar.first = (tacke[0].first + tacke[1].first + tacke[2].first) / 3;
        centar.second = (tacke[0].second + tacke[1].second + tacke[2].second) / 3;
        return centar;
    };
    double DajObim() const{
        return DajStranicu(1) + DajStranicu(2) + DajStranicu(3);
    };
    double DajPovrsinu() const{
        return 0.5*fabs((tacke[0].first*(tacke[1].second - tacke[2].second) - tacke[1].first*(tacke[0].second - tacke[2].second) + tacke[2].first*(tacke[0].second - tacke[1].second)));
</font><a name="2"></a><font color="#0000FF"><a href="match267-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

      //  return (1/2)*abs(Kolinearne_1(tacke[0], tacke[1], tacke[2]));
    };
    bool DaLiJePozitivnoOrijentiran() const{
        if(Kolinearne(tacke[0], tacke[1], tacke[2]) &gt; 0) return true;
</font>        return false;
    };
    bool DaLiJeUnutra(const Tacka &amp;t) const{
        double duz1(Duzina(tacke[0], t)), duz2(Duzina(tacke[1], t)), duz3(Duzina(tacke[2], t)); 
        double str1(DajStranicu(1)), str2(DajStranicu(2)), str3(DajStranicu(3));
        if(duz1 &gt; str1 || duz1 &gt; str2 || duz1 &gt; str3) return false;
        if(duz2 &gt; str1 || duz2 &gt; str2 || duz2 &gt; str3) return false;
        if(duz3 &gt; str3 || duz3 &gt; str2 || duz3 &gt; str3) return false;
        return true;
    };
    void Ispisi() const{
        std::cout &lt;&lt; "(" &lt;&lt; "("&lt;&lt;tacke[0].first&lt;&lt;","&lt;&lt;tacke[0].second&lt;&lt;")" &lt;&lt; "," &lt;&lt; "(" &lt;&lt;tacke[1].first&lt;&lt;",";
        std::cout &lt;&lt; tacke[1].second&lt;&lt; ")" &lt;&lt; "," &lt;&lt; "(" &lt;&lt;tacke[2].first&lt;&lt;","&lt;&lt;tacke[2].second&lt;&lt; ")" &lt;&lt;")";
    };
    void Transliraj(double delta_x, double delta_y){
        tacke[0].first += delta_x; tacke[0].second += delta_y;
        tacke[1].first += delta_x; tacke[1].second += delta_y;
        tacke[2].first += delta_x; tacke[2].second += delta_y;
    };
    void Centriraj(const Tacka &amp;t){
       double delta_x, delta_y;
       delta_x = t.first - this-&gt;DajCentar().first;
       delta_y = t.second - this-&gt;DajCentar().second;
<a name="0"></a><font color="#FF0000"><a href="match267-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

       this-&gt;Transliraj(delta_x, delta_y);
    };
    void Rotiraj(const Tacka &amp;t, double ugao){
        tacke[0].first = t.first + (tacke[0].first - t.first)*cos(ugao) - (tacke[0].second - t.second)*sin(ugao);
        tacke[0].second = t.second + (tacke[0].first - t.first)*sin(ugao) + (tacke[0].second - t.second)*cos(ugao);
        tacke[1].first = t.first + (tacke[1].first - t.first)*cos(ugao) - (tacke[1].second - t.second)*sin(ugao);
        tacke[1].second = t.second + (tacke[1].first - t.first)*sin(ugao) + (tacke[1].second - t.second)*cos(ugao);
        tacke[2].first = t.first + (tacke[2].first - t.first)*cos(ugao) - (tacke[2].second - t.second)*sin(ugao);
        tacke[2].second = t.second + (tacke[2].first - t.first)*sin(ugao) + (tacke[2].second - t.second)*cos(ugao);
    };
    void Skaliraj(const Tacka &amp;t, double faktor){
</font><a name="6"></a><font color="#00FF00"><a href="match267-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        if(faktor &gt; 0 &amp;&amp; faktor &lt; 0.00000000000000000001) throw std::domain_error("Nekorektan faktor skaliranja");
        tacke[0].first = t.first + faktor*(tacke[0].first - t.first);
</font>        tacke[0].second = t.second + faktor*(tacke[0].second - t.second);
        tacke[1].first = t.first + faktor*(tacke[1].first - t.first);
        tacke[1].second = t.second + faktor*(tacke[1].second - t.second);
        tacke[2].first = t.first + faktor*(tacke[2].first - t.first);
        tacke[2].second = t.second + faktor*(tacke[2].second - t.second);
    };
    void Rotiraj(double ugao){
        Tacka t; t = DajCentar();
        Rotiraj(t, ugao);
    };
    void Skaliraj(double faktor){
        Tacka t; t = DajCentar();
        Skaliraj(t, faktor);
    };
    friend bool Uporedi(const Tacka &amp;t1, const Tacka &amp;t2);
    friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};

bool Uporedi(const Tacka &amp;t1, const Tacka &amp;t2){
      if(fabs(t1.first - t2.first) &lt; 0.000000000001 &amp;&amp; fabs(t1.second - t2.second) &lt; 0.000000000001) return true;
      return false;
    }
bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2){
    int br(0);
    for(int i = 0; i&lt; 3; i++)
        for(int j= 0 ; j &lt; 3; j++)
            if(Uporedi(t1.tacke[i], t2.tacke[j]))  br++;
    if(br == 3) return true;
    return false;
}
bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::set&lt;double&gt; s1; s1.insert(t1.DajStranicu(1));s1.insert(t1.DajStranicu(2));s1.insert(t1.DajStranicu(3));
    std::set&lt;double&gt; s2; s2.insert(t2.DajStranicu(1));s2.insert(t2.DajStranicu(2));s2.insert(t2.DajStranicu(3));
    std::vector&lt;std::pair&lt;double, Tacka&gt;&gt; v3;
    std::vector&lt;std::pair&lt;double, Tacka&gt;&gt; v4;
    for(int i=0; i&lt;3; i++){
    std::pair&lt;double, Tacka&gt; par;
    par.first = t1.DajStranicu(i+1); par.second = t1.DajTjeme(i+1);
    v3.push_back(par);
    }
    std::sort(v3.begin(), v3.end());
    for(int i=0; i&lt;3; i++){
    std::pair&lt;double, Tacka&gt; par;
    par.first = t2.DajStranicu(i+1); par.second = t2.DajTjeme(i+1);
    v4.push_back(par);
    }
    std::sort(v4.begin(), v4.end());
    return (s1 == s2 &amp;&amp; Trougao::Kolinearne(v3[0].second, v3[1].second, v3[2].second) == Trougao::Kolinearne(v4[0].second, v4[1].second, v4[2].second));
}
bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::set&lt;double&gt; s1; s1.insert(t1.DajStranicu(1));s1.insert(t1.DajStranicu(2));s1.insert(t1.DajStranicu(3));
    std::set&lt;double&gt; s2; s2.insert(t2.DajStranicu(1));s2.insert(t2.DajStranicu(2));s2.insert(t2.DajStranicu(3));
    if(s1.size() != s2.size()) return false;
    auto it1=s1.begin(); auto it2=s2.begin(); double omjer(*it1 / *it2); int br(s1.size()); it1++; it2++;
    while(br != 0){
        if(fabs(*it1 / *it2 - omjer) &gt; 0.00000000001) return false;
        it1++; it2++; 
        br--;
    }
    std::vector&lt;std::pair&lt;double, Tacka&gt;&gt; v3;
    std::vector&lt;std::pair&lt;double, Tacka&gt;&gt; v4;
    for(int i=0; i&lt;3; i++){
    std::pair&lt;double, Tacka&gt; par;
    par.first = t1.DajStranicu(i+1); par.second = t1.DajTjeme(i+1);
    v3.push_back(par);
    }
    std::sort(v3.begin(), v3.end());
    for(int i=0; i&lt;3; i++){
    std::pair&lt;double, Tacka&gt; par;
    par.first = t2.DajStranicu(i+1); par.second = t2.DajTjeme(i+1);
    v4.push_back(par);
    }
    std::sort(v4.begin(), v4.end());
    return Trougao::Kolinearne(v3[0].second, v3[1].second, v3[2].second) == Trougao::Kolinearne(v4[0].second, v4[1].second, v4[2].second);
}
bool ImaUVek(std::vector&lt;std::pair&lt;int, int&gt;&gt; vek,std::pair&lt;int, int&gt; index1,std::pair&lt;int, int&gt; index2){
    for(int i=0; i&lt;vek.size(); i++)
        if(vek[i]==index1 || vek[i]==index2) return true;
    return false;
}
int main ()
{
    using std::cout; using std::cin;
    int n;
    cout &lt;&lt; "Koliko zelite kreirati trouglova: ";
    cin &gt;&gt; n;
    std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt; v(n);
    double x1, y1, x2, y2, x3, y3;
    Tacka t1, t2, t3;
    for(int i=0; i&lt;n; i++){
    cout &lt;&lt; "Unesite podatke za " &lt;&lt; i+1 &lt;&lt; ". trougao (x1 y1 x2 y2 x3 y3): ";
    cin &gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2&gt;&gt;x3&gt;&gt;y3;
    t1.first = x1; t1.second = y1; t2.first = x2; t2.second = y2; t3.first = x3; t3.second = y3;
    try{
        v[i] = std::make_shared&lt;Trougao&gt; (Trougao(t1, t2, t3));
    }
    catch(std::bad_alloc){cout &lt;&lt; "Problemi sa memorijom";}
    catch(std::domain_error cigla){cout &lt;&lt; "Nekorektne pozicije tjemena, ponovite unos!\n"; i--;}
    }
    double ugao, faktor, a, b;
    cout &lt;&lt; "Unesite vektor translacije (dx dy): ";
    cin &gt;&gt; a &gt;&gt; b;
    cout &lt;&lt; "Unesite ugao rotacije: ";
    cin &gt;&gt; ugao;
    cout &lt;&lt; "Unesite faktor skaliranja: ";
    cin &gt;&gt; faktor;
    std::transform(v.begin(), v.end(), v.begin(), [a, b, ugao, faktor](const std::shared_ptr&lt;Trougao&gt; &amp;t){
        t-&gt;Transliraj(a, b);
        t-&gt;Rotiraj(ugao);
        t-&gt;Skaliraj((*t).DajTjeme(1), faktor);
        return t;
    });
    std::sort(v.begin(), v.end(), [](const std::shared_ptr&lt;Trougao&gt; &amp;t1, const std::shared_ptr&lt;Trougao&gt; &amp;t2){
        if(t1-&gt;DajPovrsinu() &lt; t2-&gt;DajPovrsinu() &amp;&amp; std::fabs(t1-&gt;DajPovrsinu() - t2-&gt;DajPovrsinu()) &gt; 0.000000000001)
            return true;
        return false;
    });
    cout &lt;&lt; "Trouglovi nakon obavljenih transformacija:\n";
    std::for_each(v.begin(), v.end(), [](const std::shared_ptr&lt;Trougao&gt; &amp;t){(*t).Ispisi();cout&lt;&lt;std::endl;});
    cout &lt;&lt; "Trougao sa najmanjim obimom: ";
    (*std::min_element(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; t1, std::shared_ptr&lt;Trougao&gt; t2){
        if(t1-&gt;DajObim() &lt; t2-&gt;DajObim() &amp;&amp; std::fabs(t1-&gt;DajObim() - t2-&gt;DajObim()) &gt; 0.000000000001)
            return true;
        return false;
    }))-&gt;Ispisi();
    
    
    std::vector&lt;std::pair&lt;int, int&gt;&gt; vek;
    for(int i=0; i&lt;n; i++){
        for(int j=0; j&lt;n; j++){
            std::pair&lt;int,int&gt; index1; index1.first = i; index1.second = j;
            std::pair&lt;int,int&gt; index2; index2.first = j; index2.second = i;
            if(DaLiSuIdenticni(*v[i], *v[j]) &amp;&amp; i!=j &amp;&amp; !ImaUVek(vek, index1, index2)){
                vek.push_back(index1); vek.push_back(index2);
            }
        }
    }
    if(vek.size() &gt; 0){
         std::vector&lt;std::pair&lt;int, int&gt;&gt; vek;
    cout &lt;&lt; "\nParovi identicnih trouglova: \n";
    for(int i=0; i&lt;n; i++){
        for(int j=0; j&lt;n; j++){
            std::pair&lt;int,int&gt; index1; index1.first = i; index1.second = j;
            std::pair&lt;int,int&gt; index2; index2.first = j; index2.second = i;
            if(DaLiSuIdenticni(*v[i], *v[j]) &amp;&amp; i!=j &amp;&amp; !ImaUVek(vek, index1, index2)){
                vek.push_back(index1); vek.push_back(index2);
                v[i]-&gt;Ispisi(); cout&lt;&lt;" i "; v[j]-&gt;Ispisi(); cout &lt;&lt; "\n";
            }
        }
    }
    }
    else cout &lt;&lt; "\nNema identicnih trouglova!";
    
    std::vector&lt;std::pair&lt;int, int&gt;&gt; vekp;
    for(int i=0; i&lt;n; i++){
        for(int j=0; j&lt;n; j++){
            std::pair&lt;int,int&gt; index1; index1.first = i; index1.second = j;
            std::pair&lt;int,int&gt; index2; index2.first = j; index2.second = i;
            if(DaLiSuPodudarni(*v[i], *v[j]) &amp;&amp; i!=j &amp;&amp; !ImaUVek(vekp, index1, index2)){
                vekp.push_back(index1); vekp.push_back(index2);
            }
        }
    }
    if(vekp.size() &gt; 0){
    std::vector&lt;std::pair&lt;int, int&gt;&gt; vekp;
    cout &lt;&lt; "Parovi podudarnih trouglova: \n";
    for(int i=0; i&lt;n; i++){
        for(int j=0; j&lt;n; j++){
            std::pair&lt;int,int&gt; index1; index1.first = i; index1.second = j;
            std::pair&lt;int,int&gt; index2; index2.first = j; index2.second = i;
            if(DaLiSuPodudarni(*v[i], *v[j]) &amp;&amp; i!=j &amp;&amp; !ImaUVek(vekp, index1, index2)){
                vekp.push_back(index1); vekp.push_back(index2);
                v[i]-&gt;Ispisi(); cout&lt;&lt;" i "; v[j]-&gt;Ispisi(); cout &lt;&lt; "\n";
            }
        }
    }
    }
    else cout &lt;&lt; "\nNema podudarnih trouglova!";
    
    std::vector&lt;std::pair&lt;int, int&gt;&gt; veks;
    for(int i=0; i&lt;n; i++){
        for(int j=0; j&lt;n; j++){
            std::pair&lt;int,int&gt; index1; index1.first = i; index1.second = j;
            std::pair&lt;int,int&gt; index2; index2.first = j; index2.second = i;
            if(DaLiSuSlicni(*v[i], *v[j]) &amp;&amp; i!=j &amp;&amp; !ImaUVek(veks, index1, index2)){
                veks.push_back(index1); veks.push_back(index2);
            }
        }
    }
    if(veks.size() &gt; 0){
    std::vector&lt;std::pair&lt;int, int&gt;&gt; veks;
    cout &lt;&lt; "Parovi slicnih trouglova: \n";
    for(int i=0; i&lt;n; i++){
        for(int j=0; j&lt;n; j++){
            std::pair&lt;int,int&gt; index1; index1.first = i; index1.second = j;
            std::pair&lt;int,int&gt; index2; index2.first = j; index2.second = i;
            if(DaLiSuSlicni(*v[i], *v[j]) &amp;&amp; i!=j &amp;&amp; !ImaUVek(veks, index1, index2)){
                veks.push_back(index1); veks.push_back(index2);
                v[i]-&gt;Ispisi(); cout&lt;&lt;" i "; v[j]-&gt;Ispisi(); cout &lt;&lt; "\n";
            }
        }
    }
    }
    else cout &lt;&lt; "\nNema slicnih trouglova!";
    
    
	return 0;
}</pre>
</body>
</html>
