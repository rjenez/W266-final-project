<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student1336.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student1336.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match68-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_9.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 1
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;

typedef std::pair&lt;double,double&gt; Tacka;


class Trougao{
    Tacka x, y, z;
   
    static double fun(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
       return t1.first*(t2.second-t3.second)-t2.first*(t1.second-t3.second)+t3.first*(t1.second-t2.second); 
    }
    
    static bool JesuLiJednaki(double x, double y, double Eps=1e-10){
        return std::fabs(x-y)&lt;=Eps*(std::fabs(x)+std::fabs(y));
    }
   
    static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
       double temp(fun(t1,t2,t3));
        if(temp&lt;0 &amp;&amp; JesuLiJednaki(temp,0)==false) return -1;
        if(temp&gt;0 &amp;&amp; JesuLiJednaki(temp,0)==false) return 1;
        return 0;
    }
   
    public:
    
    Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    void Postavi(int indeks, const Tacka &amp;t);
    Tacka DajTjeme(int indeks) const;
    double DajStranicu(int indeks) const;
    double DajUgao(int indeks) const;
    Tacka DajCentar() const;
    double DajObim() const { return DajStranicu(1)+DajStranicu(2)+DajStranicu(3); } 
    double DajPovrsinu() const { return (1./2.)*std::fabs(fun(x,y,z)); }
    bool DaLiJePozitivnoOrijentiran() const;
    bool DaLiJeUnutra (const Tacka &amp;t) const;
    void Ispisi () const;
    void Transliraj(double delta_x,  double delta_y);
    void Centriraj(const Tacka &amp;t);
</font>    void Rotiraj (const Tacka &amp;t, double ugao);
    void Skaliraj (const Tacka &amp;t, double faktor);
    void Rotiraj(double ugao);
    void Skaliraj(double faktor);
    friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
<a name="1"></a><font color="#00FF00"><a href="match68-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_20.gif"/></a>

    friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};

Trougao::Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
    if(Orijentacija(t1,t2,t3)==0) throw std::domain_error ("Nekorektne pozicije tjemena");
    x=t1; y=t2; z=t3;
}

void Trougao::Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
    if(Orijentacija(t1,t2,t3)==0) throw std::domain_error ("Nekorektne pozicije tjemena");
    x=t1; y=t2; z=t3;
}

void Trougao::Postavi(int indeks, const Tacka &amp;t){
    if((indeks==1 || indeks==2 || indeks==3)==false) throw std::range_error("Nekorektan indeks");
    if(indeks==1 &amp;&amp; Orijentacija(t,y,z)==0) throw std::domain_error ("Nekorektne pozicije tjemena");
    if(indeks==2 &amp;&amp; Orijentacija(x,t,z)==0) throw std::domain_error ("Nekorektne pozicije tjemena");
    if(indeks==3 &amp;&amp; Orijentacija(x,y,t)==0) throw std::domain_error ("Nekorektne pozicije tjemena");
    
    if(indeks==1) x=t;
    if(indeks==2) y=t;
    if(indeks==3) z=t;
}

Tacka Trougao::DajTjeme(int indeks)const {
    if(indeks!=1 &amp;&amp; indeks!=2 &amp;&amp; indeks!=3) throw std::range_error ("Nekorektan indeks");
    if(indeks==1) return x;
    if(indeks==2) return y;
    return z;
}

double Trougao::DajStranicu(int indeks)const{
    if(indeks!=1 &amp;&amp; indeks!=2 &amp;&amp; indeks!=3) throw std::range_error("Nekorektan indeks");
    if(indeks==1) return std::sqrt((y.first-z.first)*(y.first-z.first)+(y.second-z.second)*(y.second-z.second));
    if(indeks==2) return std::sqrt((x.first-z.first)*(x.first-z.first)+(x.second-z.second)*(x.second-z.second));
                  return std::sqrt((x.first-y.first)*(x.first-y.first)+(x.second-y.second)*(x.second-y.second));
}

double Trougao::DajUgao(int indeks) const{
    if(indeks!=1 &amp;&amp; indeks!=2 &amp;&amp; indeks!=3) throw std::range_error("Nekorektan indeks");
    if(indeks==1) return std::acos((DajStranicu(2)*DajStranicu(2)+DajStranicu(3)*DajStranicu(3)-DajStranicu(1)*DajStranicu(1))/(2*DajStranicu(2)*DajStranicu(3)));
    if(indeks==2) return std::acos((DajStranicu(1)*DajStranicu(1)+DajStranicu(3)*DajStranicu(3)-DajStranicu(2)*DajStranicu(2))/(2*DajStranicu(1)*DajStranicu(3)));
                  return std::acos((DajStranicu(1)*DajStranicu(1)+DajStranicu(2)*DajStranicu(2)-DajStranicu(3)*DajStranicu(3))/(2*DajStranicu(1)*DajStranicu(2)));
}

Tacka Trougao::DajCentar() const{
    Tacka t;
    t.first=(x.first+y.first+z.first)/3;
    t.second=(x.second+y.second+z.second)/3;
    return t;
}

bool Trougao::DaLiJePozitivnoOrijentiran()const{
    if(Orijentacija(x,y,z)==1) return true;
    return false;
}

bool Trougao::DaLiJeUnutra(const Tacka &amp;t) const{
    return (Orijentacija(x,y,z)==Orijentacija(x,y,t) &amp;&amp; Orijentacija(x,y,z)==Orijentacija(y,z,t) &amp;&amp; Orijentacija(x,y,z)==Orijentacija(z,x,t));
}

void Trougao::Ispisi() const{
    std::cout&lt;&lt;"(("&lt;&lt;x.first&lt;&lt;","&lt;&lt;x.second&lt;&lt;"),("&lt;&lt;y.first&lt;&lt;","&lt;&lt;y.second&lt;&lt;"),("&lt;&lt;z.first&lt;&lt;","&lt;&lt;z.second&lt;&lt;"))";
</font>}

void Trougao::Transliraj(double delta_x, double delta_y){
    x.first+=delta_x; y.first+=delta_x; z.first+=delta_x;
<a name="3"></a><font color="#00FFFF"><a href="match68-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    x.second+=delta_y; y.second+=delta_y; z.second+=delta_y;
}

void Trougao::Centriraj(const Tacka &amp;t){
    Tacka temp(DajCentar());
    Transliraj(t.first-temp.first, t.second-temp.second);
}

void Trougao::Rotiraj(const Tacka &amp;t, double ugao){
    Tacka temp(x);
    x.first=t.first+(temp.first-t.first)*std::cos(ugao)-(temp.second-t.second)*std::sin(ugao);
</font><a name="4"></a><font color="#FF00FF"><a href="match68-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    x.second=t.second+(temp.first-t.first)*std::sin(ugao)+(temp.second-t.second)*std::cos(ugao);
    temp=y;
    y.first=t.first+(temp.first-t.first)*std::cos(ugao)-(temp.second-t.second)*std::sin(ugao);
</font><a name="5"></a><font color="#FF0000"><a href="match68-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    y.second=t.second+(temp.first-t.first)*std::sin(ugao)+(temp.second-t.second)*std::cos(ugao);
    temp=z;
    z.first=t.first+(temp.first-t.first)*std::cos(ugao)-(temp.second-t.second)*std::sin(ugao);
</font><a name="0"></a><font color="#FF0000"><a href="match68-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_57.gif"/></a>

    z.second=t.second+(temp.first-t.first)*std::sin(ugao)+(temp.second-t.second)*std::cos(ugao);
}

void Trougao::Rotiraj(double ugao){
    Rotiraj(DajCentar(), ugao);
}

void Trougao::Skaliraj(const Tacka &amp;t, double faktor){
    if(JesuLiJednaki(faktor,0)) throw std::domain_error ("Nekorektan faktor skaliranja");
    bool potrebna_rotacija(false);
    if(faktor&lt;0 &amp;&amp; !JesuLiJednaki(faktor,0)) { potrebna_rotacija=true; faktor=faktor*(-1);}
    
    Tacka temp(x);
    x.first=t.first+faktor*(temp.first-t.first); x.second=t.second+faktor*(temp.second-t.second);
    temp=y;
    y.first=t.first+faktor*(temp.first-t.first); y.second=t.second+faktor*(temp.second-t.second);
    temp=z;
    z.first=t.first+faktor*(temp.first-t.first); z.second=t.second+faktor*(temp.second-t.second);
    
    if(potrebna_rotacija) Rotiraj(t, std::atan(1)*4 );
}

void Trougao::Skaliraj(double faktor){
    Skaliraj(DajCentar(), faktor);
}

bool JesuLiIdenticni(double x, double y, double Eps=1e-10){
    return std::fabs(x-y)&lt;=Eps*(std::fabs(x)+std::fabs(y));
}

bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2){
    Tacka c1(t1.DajCentar()), c2(t2.DajCentar());
    if(!Trougao::JesuLiJednaki(c1.first,c2.first) || !Trougao::JesuLiJednaki(c1.first,c2.first) || !Trougao::JesuLiJednaki(c1.first,c2.first) ||
      !Trougao::JesuLiJednaki(c1.second,c2.second) || !Trougao::JesuLiJednaki(c1.second, c2.second) || !Trougao::JesuLiJednaki(c1.second,c2.second)) return false;
      
    std::vector&lt;Tacka&gt; tr1{t1.x, t1.y, t1.z}, tr2{t2.x,t2.y,t2.z};
    
    std::sort(tr1.begin(),tr1.end(), [](Tacka a, Tacka b){ if(JesuLiIdenticni(a.first,b.first)) return a.second&lt;b.second &amp;&amp; !JesuLiIdenticni(a.second,b.second);
                                                        return a.first&lt;b.first &amp;&amp; !JesuLiIdenticni(a.first,b.first); });
    std::sort(tr2.begin(),tr2.end(), [](Tacka a, Tacka b){ if(JesuLiIdenticni(a.first,b.first)) return a.second&lt;b.second &amp;&amp; !JesuLiIdenticni(a.second,b.second);
                                                        return a.first&lt;b.first &amp;&amp; !JesuLiIdenticni(a.first,b.first); }); 
     
    for(int i(0); i&lt;3; i++){
        if(!JesuLiIdenticni(tr1.at(i).first,tr2.at(i).first) ||!JesuLiIdenticni(tr1.at(i).second,tr2.at(i).second)) return false;
    } 
    return true;
}

bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::vector&lt;double&gt; s1{t1.DajStranicu(1),t1.DajStranicu(2), t1.DajStranicu(3)}, s2={t2.DajStranicu(1), t2.DajStranicu(2), t2.DajStranicu(3)}, s1c(s1), s2c(s2);
    std::sort(s1c.begin(), s1c.end(), [](double x, double y){return (x&lt;y &amp;&amp; !JesuLiIdenticni(x,y));}); 
    std::sort(s2c.begin(), s2c.end(), [](double x, double y){return (x&lt;y &amp;&amp; !JesuLiIdenticni(x,y)); });
    
    for(int i(0); i&lt;3; i++ ){
        if(JesuLiIdenticni(s1c.at(i),s2c.at(i))==false) return false;
    } 
    
    if(t1.Orijentacija(t1.x,t1.y,t1.z)!=t2.Orijentacija(t2.x,t2.y,t2.z)) {
        std::reverse(s2.begin(), s2.end());
    }

    int brojac(0);
    
    if(JesuLiIdenticni(s1.at(0),s2.at(0))){
        for(int i(0); i&lt;3; i++){
            if(JesuLiIdenticni(s1.at(i), s1.at(i))) brojac++;
            else break;
        }
        if(brojac==3) return true;
    }
    brojac=0;
    if(JesuLiIdenticni(s1.at(0),s2.at(1))){
        for(int i(0), j(1); i&lt;3; i++, j++){
            if(JesuLiIdenticni(s1.at(i),s2.at(j))) brojac++;
            else break;
            if(j==2) j=-1;
        }
        if(brojac==3) return true;
    }
    brojac=0;
    if(JesuLiIdenticni(s1.at(0),s2.at(2))){
        for(int i(0), j(2); i&lt;3; i++,j++){
            if(JesuLiIdenticni(s1.at(i),s2.at(j))) brojac++;
            else break;
            if(j==2) j=-1;
        }
        if(brojac==3) return true;
    }
    
    
    return false;
}

bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::vector&lt;double&gt; s1{t1.DajStranicu(1), t1.DajStranicu(2), t1.DajStranicu(3)}, s2={t2.DajStranicu(1), t2.DajStranicu(2), t2.DajStranicu(3)};
    std::sort(s1.begin(), s1.end(), [](double x, double y) {return x&lt;y &amp;&amp; !JesuLiIdenticni(x,y);} );
    std::sort(s2.begin(), s2.end(), [](double x, double y) {return x&lt;y &amp;&amp; !JesuLiIdenticni(x,y);});
    
     if((JesuLiIdenticni(s1.at(0)/s2.at(0), s1.at(1)/s2.at(1)) &amp;&amp; JesuLiIdenticni(s1.at(1)/s2.at(1), s1.at(2)/s2.at(2)) &amp;&amp; JesuLiIdenticni(s1.at(0)/s2.at(0), s1.at(2)/s1.at(2)))==false ) return false;
     
     double faktor(s1.at(0)/s2.at(0));
     
    Trougao temp(t1.x,t1.y,t1.z);
    temp.Skaliraj(faktor);
    
    if(DaLiSuPodudarni(temp,t2)) return true;
   
    
    return false;
}

int main ()
{
    int n;
    std::cout&lt;&lt;"Koliko zelite kreirati trouglova: ";
    std::cin&gt;&gt;n;
    
    std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt; v;
    
    for(int i(0); i&lt;n; i++){
        double x1, x2,y1,y2,z1,z2;
        
        std::cout&lt;&lt;"Unesite podatke za "&lt;&lt;i+1&lt;&lt;". trougao (x1 y1 x2 y2 x3 y3): ";
        std::cin&gt;&gt;x1&gt;&gt;x2&gt;&gt;y1&gt;&gt;y2&gt;&gt;z1&gt;&gt;z2;
        Tacka x(x1,x2),y(y1,y2), z(z1,z2);
        
        try{
            auto trougao(std::make_shared&lt;Trougao&gt;(x,y,z));
            v.push_back(trougao);
        }
        catch(std::domain_error izuzetak){
            std::cout&lt;&lt;izuzetak.what()&lt;&lt;", ponovite unos!"&lt;&lt;std::endl;
            i--;
        }
    }
    double delta_x , delta_y;
    std::cout&lt;&lt;"Unesite vektor translacije (dx dy): ";
    std::cin&gt;&gt;delta_x&gt;&gt;delta_y;
    double ugao;
    std::cout&lt;&lt;"Unesite ugao rotacije: ";
    double faktor;
    std::cin&gt;&gt;ugao;
    std::cout&lt;&lt;"Unesite faktor skaliranja: ";
    std::cin&gt;&gt;faktor;
    
    try{
    std::transform(v.begin(), v.end(), v.begin(), [delta_x, delta_y, ugao,faktor](std::shared_ptr&lt;Trougao&gt; t){ 
                                                    t-&gt;Transliraj(delta_x,delta_y);
                                                    
                                                    t-&gt;Rotiraj(ugao);
                                                    
                                                    t-&gt;Skaliraj(t-&gt;DajTjeme(1),faktor);
                                                    return t;});
    }
    catch(std::domain_error izuzetak){
        std::cout&lt;&lt;izuzetak.what();
    }
     
    std::sort(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; t1,std::shared_ptr&lt;Trougao&gt; t2) { return t1-&gt;DajPovrsinu()&lt;t2-&gt;DajPovrsinu() &amp;&amp; !JesuLiIdenticni(t1-&gt;DajPovrsinu(),t2-&gt;DajPovrsinu())  ; });
    std::cout&lt;&lt;"Trouglovi nakon obavljenih transformacija:"&lt;&lt;std::endl;
    std::for_each(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; t){ t-&gt;Ispisi(); std::cout&lt;&lt;std::endl; } );
   
   auto it(std::min_element(v.begin(), v.end(), [](std::shared_ptr&lt;Trougao&gt; t1, std::shared_ptr&lt;Trougao&gt; t2){ return t1-&gt;DajObim()&lt;t2-&gt;DajObim()  &amp;&amp; !JesuLiIdenticni(t1-&gt;DajObim(), t2-&gt;DajObim()) ;}));
    auto t(*it);
   
    std::cout&lt;&lt;"Trougao sa najmanjim obimom: ";
     t-&gt;Ispisi();std::cout&lt;&lt;std::endl;
    
    
    bool nije_ispisano(true), prvi_ispis(true);
    for(int i(0); i&lt;n; i++){
        for(int j(i+1); j&lt;n; j++){
            if( DaLiSuIdenticni(*(v.at(i)),*(v.at(j))) ) {
                if(prvi_ispis){ std::cout&lt;&lt;"Parovi identicnih trouglova:"; prvi_ispis=false;}
               std::cout&lt;&lt;std::endl; v.at(i)-&gt;Ispisi(); std::cout&lt;&lt;" i "; v.at(j)-&gt;Ispisi() ;
               nije_ispisano=false;
            }
        }
    }
    if(nije_ispisano) std::cout&lt;&lt;"Nema identicnih trouglova!"&lt;&lt;std::endl;
    nije_ispisano=true; prvi_ispis=true;
    
    for(int i(0); i&lt;n; i++){
        for(int j(i+1); j&lt;n; j++){
            if(DaLiSuPodudarni(*(v.at(i)), *(v.at(j)) ) ){
                if(prvi_ispis) {std::cout&lt;&lt;std::endl&lt;&lt;"Parovi podudarnih trouglova:"; prvi_ispis=false;}
                std::cout&lt;&lt;std::endl; v.at(i)-&gt;Ispisi(); std::cout&lt;&lt;" i "; v.at(j)-&gt;Ispisi();
                nije_ispisano=false;
            }
        }
    }
    if(nije_ispisano) std::cout&lt;&lt;"Nema podudarnih trouglova!"&lt;&lt;std::endl;
    
    nije_ispisano=true; prvi_ispis=true;
   
    for(int i(0); i&lt;n; i++){
        for(int j(i+1); j&lt;n; j++){
            
            if(DaLiSuSlicni( *(v.at(i)), *(v.at(j)) )){
                if(prvi_ispis) { std::cout&lt;&lt;std::endl&lt;&lt;"Parovi slicnih trouglova:"; prvi_ispis=false;}
               std::cout&lt;&lt;std::endl; v.at(i)-&gt;Ispisi(); std::cout&lt;&lt;" i "; v.at(j)-&gt;Ispisi();
                nije_ispisano=false;
            }
        }
    }
    
    if(nije_ispisano) std::cout&lt;&lt;"Nema slicnih trouglova!";
	return 0;
</font>}</pre>
</body>
</html>
