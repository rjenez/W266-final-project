<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student7001.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student7001.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 1
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;set&gt;

const double pi=4*std::atan(1);

typedef std::pair&lt;double, double&gt; Tacka;

class Trougao {
  Tacka x,y,z;
  static bool JesuLiDvaBrojaJednaka(double x, double y, double Eps=1e-10) {
      if ((x&lt;0 &amp;&amp; y&gt;0) || (x&gt;0 &amp;&amp; y&lt;0)) return false;
<a name="4"></a><font color="#FF00FF"><a href="match413-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

      return std::fabs(x-y)&lt;=Eps*(std::fabs(x)+std::fabs(y));
  }
  static bool JesuLiDvijeTackeJednake(const Tacka &amp;t1, const Tacka &amp;t2) {
</font>      if (JesuLiDvaBrojaJednaka(t1.first,t2.first) &amp;&amp; JesuLiDvaBrojaJednaka(t1.second,t2.second)) return true;
      return false;
  }
public:
    Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) { Postavi(t1,t2,t3); }
    void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
        if (!Orijentacija(t1,t2,t3)) throw std::domain_error("Nekorektne pozicije tjemena");
        x.first=t1.first; x.second=t1.second;
        y.first=t2.first; y.second=t2.second;
        z.first=t3.first; z.second=t3.second;
    }
    void Postavi(int indeks, const Tacka &amp;t) {
        switch(indeks) {
            case 1:
                if (!Orijentacija(t,y,z)) throw std::domain_error("Nekorektne pozicije tjemena");
                x.first=t.first; x.second=t.second;
            case 2:
                if (!Orijentacija(x,t,z)) throw std::domain_error("Nekorektne pozicije tjemena");
                y.first=t.first; y.second=t.second;
            case 3:
                if (!Orijentacija(x,y,t)) throw std::domain_error("Nekorektne pozicije tjemena");
                z.first=t.first; z.second=t.second;
            default:
                throw std::range_error("Nekorektan indeks");
        }
    }
    static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
        double orijentacija=t1.first*(t2.second-t3.second)-t2.first*(t1.second-t3.second)+t3.first*(t1.second-t2.second);
        if (orijentacija&gt;0) return 1;
        else if (orijentacija&lt;0) return -1;
        return 0;
    }
    Tacka DajTjeme(int indeks) const {
        switch(indeks) {
            case 1: return x;
            case 2: return y;
            case 3: return z;
            default: throw std::range_error("Nekorektan indeks");
        }
    }
    double DajStranicu(int indeks) const {
        switch(indeks) {
            case 1: return std::sqrt((y.first-z.first)*(y.first-z.first)+(y.second-z.second)*(y.second-z.second));
            case 2: return std::sqrt((x.first-z.first)*(x.first-z.first)+(x.second-z.second)*(x.second-z.second));
            case 3: return std::sqrt((x.first-y.first)*(x.first-y.first)+(x.second-y.second)*(x.second-y.second));
            default: throw std::range_error("Nekorektan indeks");
        }
    }
    double DajUgao(int indeks) const {
        switch(indeks) {
            case 1: return std::acos((DajStranicu(2)*DajStranicu(2)+DajStranicu(3)*DajStranicu(3)-DajStranicu(1)*DajStranicu(1))/(2*DajStranicu(2)*DajStranicu(3)));
            case 2: return std::acos((DajStranicu(1)*DajStranicu(1)+DajStranicu(3)*DajStranicu(3)-DajStranicu(2)*DajStranicu(2))/(2*DajStranicu(1)*DajStranicu(3)));
            case 3: return std::acos((DajStranicu(1)*DajStranicu(1)+DajStranicu(2)*DajStranicu(2)-DajStranicu(3)*DajStranicu(3))/(2*DajStranicu(1)*DajStranicu(2)));
            default: throw std::range_error("Nekorektan indeks");
        }
    }
    Tacka DajCentar() const { return {(x.first+y.first+z.first)/3., (x.second+y.second+z.second)/3.}; }
    double DajObim() const { return DajStranicu(1)+DajStranicu(2)+DajStranicu(3); }
    double DajPovrsinu() const { return std::abs(x.first*(y.second-z.second)-y.first*(x.second-z.second)+z.first*(x.second-y.second))/2.; }
    bool DaLiJePozitivnoOrijentiran() const {
        if (Orijentacija(x,y,z)==1) return true;
        return false;
    }
    bool DaLiJeUnutra(const Tacka &amp;t) const {
        if (Orijentacija(x,y,z)==Orijentacija(x,y,t) &amp;&amp; Orijentacija(x,y,z)==Orijentacija(y,z,t) &amp;&amp; Orijentacija(x,y,z)==Orijentacija(z,x,t)) return true;
        return false;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "((" &lt;&lt; x.first &lt;&lt; "," &lt;&lt; x.second &lt;&lt; "),(" &lt;&lt; y.first &lt;&lt; "," &lt;&lt; y.second &lt;&lt; "),(" &lt;&lt; z.first &lt;&lt; "," &lt;&lt; z.second &lt;&lt; "))";
    }
    void Transliraj(double delta_x, double delta_y) {
        x.first+=delta_x; y.first+=delta_x; z.first+=delta_x;
        x.second+=delta_y; y.second+=delta_y; z.second+=delta_y;
    }
    void Centriraj(const Tacka &amp;t) { Transliraj(t.first-DajCentar().first,t.second-DajCentar().second); }
    void Rotiraj(const Tacka &amp;t, double ugao);
    void Skaliraj(const Tacka &amp;t, double ugao);
    void Rotiraj(double ugao) { Rotiraj(DajCentar(),ugao); }
    void Skaliraj(double ugao) { Skaliraj(DajCentar(),ugao); }
    friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};
    
void Trougao::Rotiraj(const Tacka &amp;t, double ugao) {
    Tacka t1,t2,t3;
    t1.first=t.first+(x.first-t.first)*std::cos(ugao)-(x.second-t.second)*std::sin(ugao);
    t1.second=t.second+(x.first-t.first)*std::sin(ugao)+(x.second-t.second)*std::cos(ugao);
    t2.first=t.first+(y.first-t.first)*std::cos(ugao)-(y.second-t.second)*std::sin(ugao);
    t2.second=t.second+(y.first-t.first)*std::sin(ugao)+(y.second-t.second)*std::cos(ugao);
    t3.first=t.first+(z.first-t.first)*std::cos(ugao)-(z.second-t.second)*std::sin(ugao);
    t3.second=t.second+(z.first-t.first)*std::sin(ugao)+(z.second-t.second)*std::cos(ugao);
    Postavi(t1,t2,t3);
}
void Trougao::Skaliraj(const Tacka &amp;t, double faktor) {
    if (JesuLiDvaBrojaJednaka(faktor, 0.)) throw std::domain_error("Nekorektan faktor skaliranja");
    Tacka t1,t2,t3;
    t1.first=t.first+faktor*(x.first-t.first); t1.second=t.second+faktor*(x.second-t.second);
    t2.first=t.first+faktor*(y.first-t.first); t2.second=t.second+faktor*(y.second-t.second);
    t3.first=t.first+faktor*(z.first-t.first); t3.second=t.second+faktor*(z.second-t.second);
    Postavi(t1,t2,t3);
}

bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2) {
    if ((Trougao::JesuLiDvijeTackeJednake(t1.x,t2.x) || Trougao::JesuLiDvijeTackeJednake(t1.x,t2.y) || Trougao::JesuLiDvijeTackeJednake(t1.x,t2.z)) &amp;&amp;
    (Trougao::JesuLiDvijeTackeJednake(t1.y,t2.x) || Trougao::JesuLiDvijeTackeJednake(t1.y,t2.y) || Trougao::JesuLiDvijeTackeJednake(t1.y,t2.z)) &amp;&amp;
    (Trougao::JesuLiDvijeTackeJednake(t1.z,t2.x) || Trougao::JesuLiDvijeTackeJednake(t1.z,t2.y) || Trougao::JesuLiDvijeTackeJednake(t1.z,t2.z))) return true;
    return false;
}

bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2) {
    int brojac_jednakih_stranica=0;
    for (int i=1; i&lt;=3; i++) {
        for (int j=1; j&lt;=3; j++) {
            if (Trougao::JesuLiDvaBrojaJednaka(t1.DajStranicu(i),t2.DajStranicu(j))) {
                brojac_jednakih_stranica++;
                break;
            }
        }
    }
    if (brojac_jednakih_stranica!=3) return false;
    std::vector&lt;std::pair&lt;int,Tacka&gt;&gt; vektor_parova_stranica_i_tacaka_za_t1;
    std::vector&lt;std::pair&lt;int,Tacka&gt;&gt; vektor_parova_stranica_i_tacaka_za_t2;
    for (int i=1; i&lt;=3; i++) {
        vektor_parova_stranica_i_tacaka_za_t1.push_back(std::make_pair(i,t1.DajTjeme(i)));
        vektor_parova_stranica_i_tacaka_za_t2.push_back(std::make_pair(i,t2.DajTjeme(i)));
    }
    std::sort(vektor_parova_stranica_i_tacaka_za_t1.begin(),vektor_parova_stranica_i_tacaka_za_t1.end(),
    [t1,t2](std::pair&lt;int,Tacka&gt; par1, std::pair&lt;int,Tacka&gt; par2){ return t1.DajStranicu(par1.first)&lt;t1.DajStranicu(par2.first); });
    std::sort(vektor_parova_stranica_i_tacaka_za_t2.begin(),vektor_parova_stranica_i_tacaka_za_t2.end(),
    [t1,t2](std::pair&lt;int,Tacka&gt; par1, std::pair&lt;int,Tacka&gt; par2){ return t2.DajStranicu(par1.first)&lt;t2.DajStranicu(par2.first); });
    for (int i=0; i&lt;3; i++)
        if (!(Trougao::JesuLiDvaBrojaJednaka(t1.DajStranicu(vektor_parova_stranica_i_tacaka_za_t1[i].first),t2.DajStranicu(vektor_parova_stranica_i_tacaka_za_t2[i].first))))
            return false;
    if (t1.Orijentacija(vektor_parova_stranica_i_tacaka_za_t1[0].second, vektor_parova_stranica_i_tacaka_za_t1[1].second,
        vektor_parova_stranica_i_tacaka_za_t1[2].second)==t2.Orijentacija(vektor_parova_stranica_i_tacaka_za_t2[0].second,
        vektor_parova_stranica_i_tacaka_za_t2[1].second,vektor_parova_stranica_i_tacaka_za_t2[2].second)) return true;
    return false;
}

bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2) {
    int brojac_jednakih_ili_skaliranih_stranica=0;
    double faktor_skaliranja=t1.DajObim()/t2.DajObim();
    for (int i=1; i&lt;=3; i++) {
        for (int j=1; j&lt;=3; j++)
            if (Trougao::JesuLiDvaBrojaJednaka(t1.DajStranicu(i),t2.DajStranicu(j)) || 
            Trougao::JesuLiDvaBrojaJednaka(t1.DajStranicu(i)/t2.DajStranicu(j),faktor_skaliranja)) {
                brojac_jednakih_ili_skaliranih_stranica++;
                break;
            }
    }
    if (brojac_jednakih_ili_skaliranih_stranica==3 &amp;&amp; DaLiSuPodudarni(t1,t2)) return true;
    return false;
}

int main () {
    std::cout &lt;&lt; "Koliko zelite kreirati trouglova: ";
    int dimenzija;
    std::cin &gt;&gt; dimenzija;
    if (dimenzija&lt;0) return 0;
    std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt; vektor_trouglova(dimenzija);
    Tacka t1,t2,t3; 
    for (int i=0; i&lt;dimenzija; i++) {
        std::cout &lt;&lt; "Unesite podatke za " &lt;&lt; i+1 &lt;&lt; ". trougao (x1 y1 x2 y2 x3 y3): ";
        std::cin &gt;&gt; t1.first &gt;&gt; t1.second &gt;&gt; t2.first &gt;&gt; t2.second &gt;&gt; t3.first &gt;&gt; t3.second;
        try {
            vektor_trouglova[i]=std::make_shared&lt;Trougao&gt;(t1,t2,t3);
        }
        catch(std::domain_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what() &lt;&lt; ", ponovite unos!" &lt;&lt; std::endl;
            i--;
        }
    }
<a name="1"></a><font color="#00FF00"><a href="match413-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    double dx, dy;
    std::cout &lt;&lt; "Unesite vektor translacije (dx dy): ";
    std::cin &gt;&gt; dx &gt;&gt; dy;
    std::transform(vektor_trouglova.begin(),vektor_trouglova.end(),vektor_trouglova.begin(),[dx,dy](std::shared_ptr&lt;Trougao&gt; pok){ 
        pok-&gt;Transliraj(dx,dy);
        return pok;
    });
    double ugao_rotacije;
    std::cout &lt;&lt; "Unesite ugao rotacije: ";
    std::cin &gt;&gt; ugao_rotacije;
    std::transform(vektor_trouglova.begin(),vektor_trouglova.end(),vektor_trouglova.begin(),[ugao_rotacije](std::shared_ptr&lt;Trougao&gt; pok){ 
        pok-&gt;Rotiraj(ugao_rotacije); 
        return pok;
    });
    double faktor_skaliranja;
    std::cout &lt;&lt; "Unesite faktor skaliranja: ";
    std::cin &gt;&gt; faktor_skaliranja;
    try {
</font>        std::transform(vektor_trouglova.begin(),vektor_trouglova.end(),vektor_trouglova.begin(),
        [faktor_skaliranja](std::shared_ptr&lt;Trougao&gt; pok){ 
            pok-&gt;Skaliraj(pok-&gt;DajTjeme(1),faktor_skaliranja); 
            return pok;
        });
    }
    catch(std::domain_error izuzetak) {
        std::cout &lt;&lt; izuzetak.what() &lt;&lt; ", ponovite unos!" &lt;&lt; std::endl;
    }
    std::sort(vektor_trouglova.begin(),vektor_trouglova.end(),[](std::shared_ptr&lt;Trougao&gt; pok1, std::shared_ptr&lt;Trougao&gt; pok2){
        return pok1-&gt;DajPovrsinu()&lt;pok2-&gt;DajPovrsinu();
    });
    std::cout &lt;&lt; "Trouglovi nakon obavljenih transformacija: " &lt;&lt; std::endl;
<a name="0"></a><font color="#FF0000"><a href="match413-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    std::for_each(vektor_trouglova.begin(),vektor_trouglova.end(),[](std::shared_ptr&lt;Trougao&gt; pok){ pok-&gt;Ispisi(); std::cout &lt;&lt; std::endl; });
    std::cout &lt;&lt; "Trougao sa najmanjim obimom: ";
    auto p=std::min_element(vektor_trouglova.begin(),vektor_trouglova.end(),
    [](std::shared_ptr&lt;Trougao&gt; pok1, std::shared_ptr&lt;Trougao&gt; pok2){ return pok1-&gt;DajObim()&lt;=pok2-&gt;DajObim(); });
    (*p)-&gt;Ispisi(); 
    std::cout &lt;&lt; std::endl;
    std::vector&lt;std::pair&lt;std::shared_ptr&lt;Trougao&gt;,std::shared_ptr&lt;Trougao&gt;&gt;&gt; vektor_parova_identicnih_trouglova;
    for (int i=0; i&lt;dimenzija; i++) {
        for (int j=i+1; j&lt;dimenzija; j++) 
            if (DaLiSuIdenticni(*vektor_trouglova[i],*vektor_trouglova[j])) 
                vektor_parova_identicnih_trouglova.push_back(std::make_pair(vektor_trouglova[i],vektor_trouglova[j]));
</font>    }
    if (vektor_parova_identicnih_trouglova.size()==0) std::cout &lt;&lt; "Nema identicnih trouglova!" &lt;&lt; std::endl;
    else {
        std::cout &lt;&lt; "Parovi identicnih trouglova:" &lt;&lt; std::endl;
        for (auto x:vektor_parova_identicnih_trouglova) {
            x.first-&gt;Ispisi(); std::cout &lt;&lt; " i "; x.second-&gt;Ispisi(); std::cout &lt;&lt; std::endl;
        }
    }
<a name="2"></a><font color="#0000FF"><a href="match413-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    std::vector&lt;std::pair&lt;std::shared_ptr&lt;Trougao&gt;,std::shared_ptr&lt;Trougao&gt;&gt;&gt; vektor_parova_podudarnih_trouglova;
    for (int i=0; i&lt;dimenzija; i++) {
        for (int j=i+1; j&lt;dimenzija; j++)
            if (DaLiSuPodudarni(*vektor_trouglova[i],*vektor_trouglova[j]))
                vektor_parova_podudarnih_trouglova.push_back(std::make_pair(vektor_trouglova[i],vektor_trouglova[j]));
</font>    }
    if (vektor_parova_podudarnih_trouglova.size()==0) std::cout &lt;&lt; "Nema podudarnih trouglova!" &lt;&lt; std::endl;
    else {
        std::cout &lt;&lt; "Parovi podudarnih trouglova:" &lt;&lt; std::endl;
        for (auto x:vektor_parova_podudarnih_trouglova) {
            x.first-&gt;Ispisi(); std::cout &lt;&lt; " i "; x.second-&gt;Ispisi(); std::cout &lt;&lt; std::endl;
        }
    }
<a name="3"></a><font color="#00FFFF"><a href="match413-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    std::vector&lt;std::pair&lt;std::shared_ptr&lt;Trougao&gt;,std::shared_ptr&lt;Trougao&gt;&gt;&gt; vektor_parova_slicnih_trouglova;
    for (int i=0; i&lt;dimenzija; i++) {
        for (int j=i+1; j&lt;dimenzija; j++)
            if (DaLiSuSlicni(*vektor_trouglova[i],*vektor_trouglova[j]))
                vektor_parova_slicnih_trouglova.push_back(std::make_pair(vektor_trouglova[i],vektor_trouglova[j]));
</font>    }
    if (vektor_parova_slicnih_trouglova.size()==0) std::cout &lt;&lt; "Nema slicnih trouglova!" &lt;&lt; std::endl;
    else {
        std::cout &lt;&lt; "Parovi slicnih trouglova:" &lt;&lt; std::endl;
        for (auto x:vektor_parova_slicnih_trouglova) {
            x.first-&gt;Ispisi(); std::cout &lt;&lt; " i "; x.second-&gt;Ispisi(); std::cout &lt;&lt; std::endl;
        }
    }
    return 0;
}</pre>
</body>
</html>
