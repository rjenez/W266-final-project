<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student1132.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student2478.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;

typedef std::pair&lt;double, double&gt; Tacka;

class Trougao {
  Tacka tjemena[3];
  static bool FPJednaki(double x, double y);
  static void TestIndeksa(int indeks);
  static double PomocniIzraz(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
  static bool IsteTacke(const Tacka &amp;t1, const Tacka &amp;t2);
public:
  Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
  void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
  void Postavi(int indeks, const Tacka &amp;t);
  static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
  Tacka DajTjeme(int indeks) const;
  double DajStranicu(int indeks) const;
  double DajUgao(int indeks) const;
  Tacka DajCentar() const;
  double DajObim() const;
  double DajPovrsinu() const;
  bool DaLiJePozitivnoOrijentiran() const;
  bool DaLiJeUnutra(const Tacka &amp;t) const;
  void Ispisi() const;
  void Transliraj(double delta_x, double delta_y);
  void Centriraj(const Tacka &amp;t);
  void Rotiraj(const Tacka &amp;t, double ugao);
  void Skaliraj(const Tacka &amp;t, double faktor);
  void Rotiraj(double ugao);
  void Skaliraj(double faktor);
  friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
<a name="2"></a><font color="#0000FF"><a href="match616-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

  friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
  friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};

bool Trougao::FPJednaki(double x, double y) {
  return std::fabs(x - y) &lt; 1e-10;
</font>}

void Trougao::TestIndeksa(int indeks) {
  if(indeks &lt; 1 || indeks &gt; 3) throw std::range_error("Nekorektan indeks");
}

Trougao::Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
  Postavi(t1, t2, t3);
}

<a name="1"></a><font color="#00FF00"><a href="match616-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

void Trougao::Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
  if(Orijentacija(t1, t2, t3) == 0)
    throw std::domain_error("Nekorektne pozicije tjemena");
  tjemena[0] = t1; tjemena[1] = t2; tjemena[2] = t3;
}

// Tricky: i ova varijanta Postavi mo≈æe baciti "Nekorektne pozicije tjemena!
void Trougao::Postavi(int indeks, const Tacka &amp;t) {
</font>  TestIndeksa(indeks);
  if(Orijentacija(t, tjemena[indeks % 3], tjemena[(indeks + 1) % 3]) == 0)
    throw std::domain_error("Nekorektne pozicije tjemena");
  tjemena[indeks - 1] = t;
}
double Trougao::PomocniIzraz(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
  return t1.first * (t2.second - t3.second) - t2.first * (t1.second - t3.second)
    + t3.first * (t1.second - t2.second);
}

int Trougao::Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3) {
  double pomocna(PomocniIzraz(t1, t2, t3));
  return pomocna &gt; 0 ? 1 : pomocna &lt; 0 ? -1 : 0;
}

Tacka Trougao::DajTjeme(int indeks) const {
  TestIndeksa(indeks); return tjemena[indeks - 1];
}

double Trougao::DajStranicu(int indeks) const {
  TestIndeksa(indeks);
  Tacka t1(tjemena[indeks % 3]), t2(tjemena[(indeks + 1) % 3]);
  double dx(t2.first - t1.first), dy(t2.second - t1.second);
  return std::sqrt(dx * dx + dy * dy);
}


double Trougao::DajUgao(int indeks) const {
  TestIndeksa(indeks);
  double c(DajStranicu(indeks)), a(DajStranicu(1 + indeks % 3)),
    b(DajStranicu(1 + (indeks + 1) % 3));
<a name="0"></a><font color="#FF0000"><a href="match616-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

  return std::acos((a * a + b * b - c * c) / (2 * a * b));
}

Tacka Trougao::DajCentar() const {
  return {(tjemena[0].first + tjemena[1].first + tjemena[2].first) / 3,
    (tjemena[0].second + tjemena[1].second + tjemena[2].second) / 3};
}

double Trougao::DajObim() const {
  return DajStranicu(1) + DajStranicu(2) + DajStranicu(3);
}

double Trougao::DajPovrsinu() const {
  return std::fabs(PomocniIzraz(tjemena[0], tjemena[1], tjemena[2])) / 2;
</font>}

bool Trougao::DaLiJePozitivnoOrijentiran() const {
  return PomocniIzraz(tjemena[0], tjemena[1], tjemena[2]) &gt; 0;
}

bool Trougao::DaLiJeUnutra(const Tacka &amp;t) const {
  int referentna(Orijentacija(tjemena[0], tjemena[1], tjemena[2]));
  for(int i = 0; i &lt; 3; i++)
    if(Orijentacija(tjemena[i], tjemena[(i + 1) % 3], t) != referentna)
      return false;
<a name="6"></a><font color="#00FF00"><a href="match616-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

  return true;
}

void Trougao::Ispisi() const {
  std::cout &lt;&lt; "((" &lt;&lt; tjemena[0].first &lt;&lt; "," &lt;&lt; tjemena[0].second
</font>    &lt;&lt; "),(" &lt;&lt; tjemena[1].first &lt;&lt; "," &lt;&lt; tjemena[1].second &lt;&lt; "),("
<a name="5"></a><font color="#FF0000"><a href="match616-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    &lt;&lt; tjemena[2].first &lt;&lt; "," &lt;&lt; tjemena[2].second &lt;&lt; "))";
}

void Trougao::Transliraj(double delta_x, double delta_y) {
</font>  for(Tacka &amp;tjeme : tjemena) {
    tjeme.first += delta_x; tjeme.second += delta_y;
  }
}

void Trougao::Centriraj(const Tacka &amp;t) {
  Tacka centar(DajCentar());
<a name="7"></a><font color="#0000FF"><a href="match616-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

  Transliraj(t.first - centar.first, t.second - centar.second);
}

void Trougao::Rotiraj(const Tacka &amp;t, double ugao) {
</font>  for(Tacka &amp;tjeme : tjemena) {
    double dx(tjeme.first - t.first), dy(tjeme.second - t.second);
    double pomocna(t.first + dx * std::cos(ugao)- dy * std::sin(ugao));
    tjeme.second = t.second + dx * std::sin(ugao) + dy * std::cos(ugao);
    tjeme.first = pomocna;
  }
}

void Trougao::Skaliraj(const Tacka &amp;t, double faktor) {
  if(faktor == 0)
    throw std::domain_error("Nekorektan faktor skaliranja");
  for(Tacka &amp;tjeme : tjemena) {
    tjeme.first = t.first + faktor * (tjeme.first - t.first);
<a name="8"></a><font color="#00FFFF"><a href="match616-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    tjeme.second = t.second + faktor * (tjeme.second - t.second);
  }
}

void Trougao::Rotiraj(double ugao) {
  Rotiraj(DajCentar(), ugao);
}

void Trougao::Skaliraj(double faktor) {
  Skaliraj(DajCentar(), faktor);
</font>}

bool Trougao::IsteTacke(const Tacka &amp;t1, const Tacka &amp;t2) {
  return FPJednaki(t1.first, t2.first) &amp;&amp; FPJednaki(t1.second, t2.second);
}

bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2) {
  int perm[6][3]{{0, 1, 2}, {0, 2, 1}, {1, 0, 2}, {1, 2, 0}, {2, 0, 1}, {2, 1, 0}};
  for(int i = 0; i &lt; 6; i++) {
    bool test(true);
    for(int j = 0; j &lt; 3; j++)
      if(!Trougao::IsteTacke(t1.tjemena[j], t2.tjemena[perm[i][j]])) test = false;
    if(test) return true;
  }
  return false;
}

bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2) {
  double str1[]{t1.DajStranicu(1), t1.DajStranicu(2), t1.DajStranicu(3)};
  double str2[]{t2.DajStranicu(1), t2.DajStranicu(2), t2.DajStranicu(3)};
  int perm[6][3]{{0, 1, 2}, {2, 1, 0}, {1, 2, 0}, {0, 2, 1}, {2, 0, 1}, {1, 0, 2}};     // Redoslijed je bitan!
  int start(t1.DaLiJePozitivnoOrijentiran() != t2.DaLiJePozitivnoOrijentiran());
  for(int i = start; i &lt; 6; i += 2) {
    bool test(true);
    for(int j = 0; j &lt; 3; j++)
      if(!Trougao::FPJednaki(str1[j], str2[perm[i][j]])) test = false;
    if(test) return true;
  }
  return false;
}

bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2) {
  double str1[]{t1.DajStranicu(1), t1.DajStranicu(2), t1.DajStranicu(3)};
  double str2[]{t2.DajStranicu(1), t2.DajStranicu(2), t2.DajStranicu(3)};
  int perm[6][3]{{0, 1, 2}, {2, 1, 0}, {1, 2, 0}, {0, 2, 1}, {2, 0, 1}, {1, 0, 2}};     // Redoslijed je bitan!
  int start(t1.DaLiJePozitivnoOrijentiran() != t2.DaLiJePozitivnoOrijentiran());
  for(int i = start; i &lt; 6; i += 2) {
    double k[3];
    for(int j = 0; j &lt; 3; j++) k[j] = str1[j] / str2[perm[i][j]];
    if(Trougao::FPJednaki(k[0], k[1]) &amp;&amp; Trougao::FPJednaki(k[1], k[2])) return true;
  }
  return false;
}

typedef std::shared_ptr&lt;Trougao&gt; TPtr;

// Pomocna funkcija
void TestParova(const std::vector&lt;TPtr&gt; &amp;v,
  bool testfn(const Trougao &amp;, const Trougao &amp;), const char tekst[]) {
    int brojac(0);
    for(int i = 0; i &lt; v.size(); i++)
      for(int j = i + 1; j &lt; v.size(); j++)
        if(testfn(*v[i], *v[j])) {
          brojac++;
          if(brojac == 1) std::cout &lt;&lt; "Parovi " &lt;&lt; tekst &lt;&lt; " trouglova:\n";
          v[i]-&gt;Ispisi();
          std::cout &lt;&lt; " i ";
          v[j]-&gt;Ispisi();
          std::cout &lt;&lt; std::endl;
        }
    if(brojac == 0) std::cout &lt;&lt; "Nema " &lt;&lt; tekst &lt;&lt; " trouglova!\n";
}

int main() {
  int n;
  std::cout &lt;&lt; "Koliko zelite kreirati trouglova: ";
  std::cin &gt;&gt; n;
  std::vector&lt;TPtr&gt; v(n);
  for(int i = 0; i &lt; n; i++) {
    double x1, y1, x2, y2, x3, y3;
    std::cout &lt;&lt; "Unesite podatke za " &lt;&lt; i + 1 &lt;&lt; ". trougao (x1 y1 x2 y2 x3 y3): ";
<a name="3"></a><font color="#00FFFF"><a href="match616-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    std::cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; x3 &gt;&gt; y3;
    try {
      v[i] = std::make_shared&lt;Trougao&gt;(Tacka{x1, y1}, Tacka{x2, y2}, Tacka{x3, y3});
</font>    }
    catch(std::domain_error e) {
      std::cout &lt;&lt; e.what() &lt;&lt; ", ponovite unos!" &lt;&lt; std::endl;
      i--;
    }
  }
<a name="4"></a><font color="#FF00FF"><a href="match616-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

  double dx, dy, ugao, faktor;
  std::cout &lt;&lt; "Unesite vektor translacije (dx dy): ";
  std::cin &gt;&gt; dx &gt;&gt; dy;
  std::cout &lt;&lt; "Unesite ugao rotacije: ";
  std::cin &gt;&gt; ugao;
</font>  std::cout &lt;&lt; "Unesite faktor skaliranja: ";
  std::cin &gt;&gt; faktor;
  std::transform(v.begin(), v.end(), v.begin(), [=](TPtr p) {
    p-&gt;Transliraj(dx, dy); p-&gt;Rotiraj(ugao); p-&gt;Skaliraj(p-&gt;DajTjeme(1), faktor);
    return p;
  });
  std::sort(v.begin(), v.end(), [](TPtr p1, TPtr p2) {
    return p1-&gt;DajPovrsinu() &lt; p2-&gt;DajPovrsinu();
  });
  std::cout &lt;&lt; "Trouglovi nakon obavljenih transformacija:\n";
  std::for_each(v.begin(), v.end(), [](TPtr p) {
    p-&gt;Ispisi(); std::cout &lt;&lt; std::endl;
  });
  std::cout &lt;&lt; "Trougao sa najmanjim obimom: ";
  (*std::min_element(v.begin(), v.end(), [](TPtr p1, TPtr p2) {
    return p1-&gt;DajObim() &lt; p2-&gt;DajObim();
  }))-&gt;Ispisi();
  std::cout &lt;&lt; std::endl;
  TestParova(v, DaLiSuIdenticni, "identicnih");
  TestParova(v, DaLiSuPodudarni, "podudarnih");
  TestParova(v, DaLiSuSlicni, "slicnih");
  return 0;
}

</pre>
</body>
</html>
