<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student1132.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z1/student4195.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;

using std::string;
using std::cout;
using std::cin;
using std::endl;

typedef std::pair&lt;double, double&gt; Tacka;
constexpr double EPSILON = 0.00000000001;

class Trougao{
    Tacka tjemena[3];
    void IspravanIndeks(int indeks) const;
    void PreostaleDvije(int indeks, Tacka &amp;prva, Tacka &amp;druga) const;
    void PreostaliIndeksi(int indeks, int &amp;a, int &amp;b) const;
    static double VratiUgaoTacaka(Tacka centar, Tacka prva, Tacka druga);
    void RotirajTacku(Tacka &amp;t, const Tacka &amp;r, double ugao){
        double prva(t.first);
        t.first=r.first+(t.first-r.first)*cos(ugao) - (t.second-r.second)*sin(ugao);
        t.second=r.second+(prva-r.first)*sin(ugao) + (t.second-r.second)*cos(ugao);
    }
    void SkalirajTacku(Tacka &amp;t, const Tacka &amp;r, double k){
        t.first=r.first + k*(t.first-r.first);
        t.second=r.second+k*(t.second-r.second);
    }
    static bool DaLiSuIste(const Tacka &amp;t1, const Tacka &amp;t2) {
        return fabs(t1.first-t2.first)&lt;EPSILON and fabs(t1.second-t2.second)&lt;EPSILON;
    }
   public:
    Trougao(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
        Postavi(t1,t2,t3);
    }
    void Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    void Postavi(int indeks, const Tacka &amp;t);
    static int Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3);
    Tacka DajTjeme(int indeks) const;
    Tacka DajCentar() const;
    double DajStranicu(int indeks) const;
    double DajUgao(int indeks) const;
    double DajObim() const;
    double DajPovrsinu() const;
    bool DaLiJePozitivnoOrijentiran() const;
    bool DaLiJeUnutra(const Tacka &amp;t) const;
    void Ispisi() const;
    void Transliraj(double delta_x, double delta_y);
    void Centriraj(const Tacka &amp;t);
    void Rotiraj(const Tacka &amp;t, double ugao);
    void Skaliraj(const Tacka &amp;t, double faktor);
    void Rotiraj(double ugao);
    void Skaliraj(double faktor);
    friend bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2);
    friend bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2);
};

double Trougao::VratiUgaoTacaka(Tacka prva, Tacka centar, Tacka druga){
        try{
            Trougao tr(prva,centar,druga);
            return tr.DajUgao(2);
        }
        catch(std::domain_error){ //kolinearne
            return 4*atan(1);
        }
}
    
void Trougao::PreostaliIndeksi(int indeks, int &amp;a, int &amp;b) const{
    if(indeks==1){
        a=2; b=3;
    }
    if(indeks==2){
        a=1; b=3;
    }
    if(indeks==3){
        a=1; b=2;
    }
}

void Trougao::PreostaleDvije(int indeks, Tacka &amp;prva, Tacka &amp;druga) const {
    if(indeks==1){
        prva=tjemena[1]; druga=tjemena[2];
    }
    if(indeks==2){
        prva=tjemena[0]; druga=tjemena[2];
    }
    if (indeks==3){
        prva=tjemena[0]; druga=tjemena[1];
    }
}

<a name="3"></a><font color="#00FFFF"><a href="match968-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

void Trougao::Postavi(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
        if(Orijentacija(t1,t2,t3)==0) throw std::domain_error("Nekorektne pozicije tjemena");
        tjemena[0]=t1; tjemena[1]=t2; tjemena[2]=t3;
}

void Trougao::IspravanIndeks(int indeks) const{
</font>    if(indeks&lt;1 or indeks&gt;3)
        throw std::range_error("Nekorektan indeks");
}
void Trougao::Postavi(int indeks, const Tacka &amp;t){
    IspravanIndeks(indeks);
    if(indeks==1 and Orijentacija(t,tjemena[1],tjemena[2])==0) 
        throw std::domain_error("Nekorektne pozicije tjemena");
    else if(indeks==2 and Orijentacija(tjemena[0],t,tjemena[1])==0)
        throw std::domain_error("Nekorektne pozicije tjemena");
    else if(indeks==3 and Orijentacija(tjemena[0],tjemena[1],t)==0)
        throw std::domain_error("Nekorektne pozicije tjemena");
    tjemena[indeks-1]=t;
}
int Trougao::Orijentacija(const Tacka &amp;t1, const Tacka &amp;t2, const Tacka &amp;t3){
    double rez (t1.first*(t2.second - t3.second) - t2.first*(t1.second-t3.second)+ t3.first*(t1.second-t2.second));
    if(fabs(rez)&lt;EPSILON) return 0;
    if(rez&gt;0) return 1;
    else return -1;
}

Tacka Trougao::DajTjeme(int indeks) const {
    IspravanIndeks(indeks);
    return tjemena[indeks-1];
}

double Trougao::DajStranicu(int indeks) const{
    IspravanIndeks(indeks);
    Tacka t1,t2;
    PreostaleDvije(indeks,t1,t2);
    return sqrt(pow(t1.first-t2.first,2)+pow(t1.second-t2.second,2));
}

double Trougao::DajUgao(int indeks) const{
    IspravanIndeks(indeks);
    int t2,t3;
    PreostaliIndeksi(indeks,t2,t3);
    double a(DajStranicu(indeks)),b(DajStranicu(t2)),c(DajStranicu(t3));
<a name="0"></a><font color="#FF0000"><a href="match968-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    return acos((b*b+c*c-a*a)/(2*b*c));
}

Tacka Trougao::DajCentar() const{
    return  {(tjemena[0].first + tjemena[1].first + tjemena[2].first)/3, (tjemena[0].second + tjemena[1].second + tjemena[2].second)/3};
}

double Trougao::DajObim() const {
    return DajStranicu(1)+DajStranicu(2)+DajStranicu(3);
}

double Trougao::DajPovrsinu() const {
    return fabs(tjemena[0].first*(tjemena[1].second - tjemena[2].second) - tjemena[1].first*(tjemena[0].second-tjemena[2].second)+ tjemena[2].first*(tjemena[0].second-tjemena[1].second))/2;
</font><a name="1"></a><font color="#00FF00"><a href="match968-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

}

bool Trougao::DaLiJePozitivnoOrijentiran() const{
    return Orijentacija(tjemena[0],tjemena[1],tjemena[2])&gt;0;
</font>}
     
bool Trougao::DaLiJeUnutra(const Tacka &amp;t) const{
    return Orijentacija(tjemena[0],tjemena[1],tjemena[2])
           ==Orijentacija(tjemena[0],tjemena[1],t)
           ==Orijentacija(tjemena[1],tjemena[2],t)
<a name="5"></a><font color="#FF0000"><a href="match968-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

           ==Orijentacija(tjemena[2],tjemena[0],t);
}

void Trougao::Ispisi() const {
    std::cout&lt;&lt;"(("&lt;&lt;tjemena[0].first&lt;&lt;","&lt;&lt;tjemena[0].second&lt;&lt;"),("
</font>             &lt;&lt;tjemena[1].first&lt;&lt;","&lt;&lt;tjemena[1].second&lt;&lt;"),("
<a name="4"></a><font color="#FF00FF"><a href="match968-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

             &lt;&lt;tjemena[2].first&lt;&lt;","&lt;&lt;tjemena[2].second&lt;&lt;"))";
}

void Trougao::Transliraj(double delta_x, double delta_y){
    tjemena[0].first+=delta_x; tjemena[0].second+=delta_y; 
</font>    tjemena[1].first+=delta_x; tjemena[1].second+=delta_y; 
    tjemena[2].first+=delta_x; tjemena[2].second+=delta_y; 
}

void Trougao::Centriraj(const Tacka &amp;t){
    Tacka c(DajCentar());
    double delta_x=t.first-c.first;
    double delta_y=t.second-c.second;
    Transliraj(delta_x,delta_y);
}

void Trougao::Rotiraj(const Tacka &amp;t, double ugao){
    RotirajTacku(tjemena[0],t,ugao);
    RotirajTacku(tjemena[1],t,ugao);
    RotirajTacku(tjemena[2],t,ugao);
}

void Trougao::Skaliraj(const Tacka &amp;t, double faktor){
    if(fabs(faktor)&lt;EPSILON) throw std::domain_error("Nekorektan faktor skaliranja");
    SkalirajTacku(tjemena[0],t,faktor);
    SkalirajTacku(tjemena[1],t,faktor);
    SkalirajTacku(tjemena[2],t,faktor);
    
}
inline void Trougao::Rotiraj(double ugao){
    Rotiraj(DajCentar(),ugao);
}

inline void Trougao::Skaliraj(double faktor){
    Skaliraj(DajCentar(),faktor);
}
bool DaLiSuIdenticni(const Trougao &amp;t1, const Trougao &amp;t2){
   bool prva(Trougao::DaLiSuIste(t1.tjemena[0],t2.tjemena[0]) or Trougao::DaLiSuIste(t1.tjemena[0],t2.tjemena[1]) or Trougao::DaLiSuIste(t1.tjemena[0],t2.tjemena[2]));
   bool druga(Trougao::DaLiSuIste(t1.tjemena[1],t2.tjemena[0]) or Trougao::DaLiSuIste(t1.tjemena[1],t2.tjemena[1]) or Trougao::DaLiSuIste(t1.tjemena[1],t2.tjemena[2]));
   bool treca(Trougao::DaLiSuIste(t1.tjemena[2],t2.tjemena[0]) or Trougao::DaLiSuIste(t1.tjemena[2],t2.tjemena[1]) or Trougao::DaLiSuIste(t1.tjemena[2],t2.tjemena[2]));
   return prva and druga and treca;
}

bool JednakiDouble(double a, double b){
    if(fabs(a-b)&lt;EPSILON) return true;
    return false;
}

bool DaLiSuPodudarni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::vector&lt;double&gt; stranice1(3),stranice2(3),uglovi1(3),uglovi2(3);
    std::vector&lt;int&gt; indeksi;
    for(int i=0; i&lt;3; i++){
        stranice1.at(i)=t1.DajStranicu(i+1);
        stranice2.at(i)=t2.DajStranicu(i+1);
        uglovi1.at(i)=t1.DajUgao(i+1);
        uglovi2.at(i)=t2.DajUgao(i+1);;
    }
    for(int i=0; i&lt;3; i++){
        for(int j=0; j&lt;3; j++){
            if(JednakiDouble(stranice1.at(i),stranice2.at(j)) and JednakiDouble(uglovi1.at(i),uglovi2.at(j))){
                if(std::find(indeksi.begin(),indeksi.end(),j)==indeksi.end())
                    indeksi.push_back(j);
            }
        }
    }
    if(indeksi.size()!=3) return false;
    return t1.Orijentacija(t1.tjemena[0],t1.tjemena[1],t1.tjemena[2]) 
    == t2.Orijentacija(t2.tjemena[indeksi[0]],t2.tjemena[indeksi[1]],t2.tjemena[indeksi[2]]);
}
    
bool DaLiSuSlicni(const Trougao &amp;t1, const Trougao &amp;t2){
    std::vector&lt;double&gt; uglovi1(3),uglovi2(3);
    std::vector&lt;int&gt; indeksi;
    for(int i=0; i&lt;3; i++){
        uglovi1.at(i)=t1.DajUgao(i+1);
        uglovi2.at(i)=t2.DajUgao(i+1);;
    }
    for(int i=0; i&lt;3; i++){
        for(int j=0; j&lt;3; j++){
            if(JednakiDouble(uglovi1.at(i),uglovi2.at(j))){
                if(std::find(indeksi.begin(),indeksi.end(),j)==indeksi.end())
                    indeksi.push_back(j);
            }
        }
    }
    if(indeksi.size()!=3) return false;
    return t1.Orijentacija(t1.tjemena[0],t1.tjemena[1],t1.tjemena[2]) 
    == t2.Orijentacija(t2.tjemena[indeksi.at(0)],t2.tjemena[indeksi.at(1)],t2.tjemena[indeksi.at(2)]);
}

template &lt;typename T, typename G&gt;
void IspisujParove(T funkcija, const G &amp;trouglovi, string tip_fje){
    bool ima(false), pisi(true);
    for(int i=0; i&lt;int(trouglovi.size()-1); i++){
        for(int j=i+1; j&lt;trouglovi.size(); j++){
            if(funkcija(*(trouglovi.at(i)), *(trouglovi.at(j)) )){
                ima=true;
                if(pisi){
                    cout&lt;&lt;"Parovi "+tip_fje+" trouglova: "&lt;&lt;endl;
                    pisi=false;
                }
                trouglovi.at(i)-&gt;Ispisi();
                cout&lt;&lt;" i ";
                trouglovi.at(j)-&gt;Ispisi();
                cout&lt;&lt;endl;
            }
        }
    }
    if(!ima) cout&lt;&lt;"Nema "+tip_fje+" trouglova!"&lt;&lt;endl;
}

int main ()
{
    int n;
    cout&lt;&lt;"Koliko zelite kreirati trouglova: ";
    cin&gt;&gt;n;
    try{
        std::vector&lt;std::shared_ptr&lt;Trougao&gt;&gt; trouglovi(n);
        for(int i=0; i&lt;n; i++){
            try{
                cout&lt;&lt;"Unesite podatke za "&lt;&lt;i+1&lt;&lt;". trougao (x1 y1 x2 y2 x3 y3): ";
                double x1,y1,x2,y2,x3,y3;
                cin&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2&gt;&gt;x3&gt;&gt;y3;
                Tacka t1(x1,y1),t2(x2,y2),t3(x3,y3);
                trouglovi.at(i)=std::make_shared&lt;Trougao&gt;(t1,t2,t3);
            }
            catch(std::domain_error e){
                cout&lt;&lt;e.what()&lt;&lt;", ponovite unos!"&lt;&lt;endl;
                i--;
            }
        }
        cout&lt;&lt;"Unesite vektor translacije (dx dy): ";
        double dx,dy,fi,faktor;
        cin&gt;&gt;dx&gt;&gt;dy;
        cout&lt;&lt;"Unesite ugao rotacije: ";
        cin&gt;&gt;fi;
        cout&lt;&lt;"Unesite faktor skaliranja: ";
        cin&gt;&gt;faktor;
        auto trans_trouglovi(trouglovi);
        std::transform(trouglovi.begin(),trouglovi.end(), trouglovi.begin(), //SKALIRANJE,ROTIRANJE..
<a name="6"></a><font color="#00FF00"><a href="match968-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        [dx,dy,fi,faktor](std::shared_ptr&lt;Trougao&gt; p1){
            p1-&gt;Transliraj(dx,dy); 
            p1-&gt;Rotiraj(fi); 
            p1-&gt;Skaliraj(p1-&gt;DajTjeme(1),faktor); 
</font>            return p1;
        });
        cout&lt;&lt;"Trouglovi nakon obavljenih transformacija: "&lt;&lt;endl;
        std::sort(trouglovi.begin(),trouglovi.end(),
<a name="2"></a><font color="#0000FF"><a href="match968-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        [](std::shared_ptr&lt;Trougao&gt; p1,std::shared_ptr&lt;Trougao&gt; p2){ //SORTIRANJE
            return p1-&gt;DajPovrsinu()&lt;p2-&gt;DajPovrsinu();
        });
        
        std::for_each(trouglovi.begin(),trouglovi.end(), //ISPIS
        [](std::shared_ptr&lt;Trougao&gt; p1){p1-&gt;Ispisi(); cout&lt;&lt;endl;});
</font>        
        cout&lt;&lt;"Trougao sa najmanjim obimom: ";
        auto p(std::min_element(trouglovi.begin(),trouglovi.end(),
        [](std::shared_ptr&lt;Trougao&gt; p1,std::shared_ptr&lt;Trougao&gt; p2){return p1-&gt;DajObim()&lt;p2-&gt;DajObim(); }));
        if(p!=trouglovi.end()) (**p).Ispisi();
        cout&lt;&lt;endl;
        IspisujParove(DaLiSuIdenticni,trouglovi,"identicnih");
        IspisujParove(DaLiSuPodudarni,trouglovi,"podudarnih");
        IspisujParove(DaLiSuSlicni,trouglovi,"slicnih");
    }
    
    catch(std::bad_alloc){
        cout&lt;&lt;"Problemi s memorijom";
    }
	return 0;
}</pre>
</body>
</html>
