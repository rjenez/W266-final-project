<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student4036.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student1366.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match715-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 2
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;iterator&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;map&gt;

class Student {
	int brojindeksa;
	std::string godina_studija, imeiprezime, adresa, brojtel;
</font>	static bool DaLiJePetocifren(int broj);
	static bool DaLiJeIspravnaGodinaStudija(std::string godina_studija);
	static void ObrisiSveRazmake(std::string &amp;adresa);
	static bool DaLiJeIspravanBrojTelefona(std::string broj_telefona);
public:
	Student(int broj_indeksa, std::string godst, std::string ime, std::string adress, std::string broj);
<a name="2"></a><font color="#0000FF"><a href="match715-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

	int DajIndeks() const { return brojindeksa; }
	std::string DajGodinuStudija() const { return godina_studija; }
	std::string DajImePrezime() const { return imeiprezime; }
	std::string DajAdresu() const { return adresa; }
	std::string DajTelefon() const { return brojtel; }
</font>	void Ispisi() const;
};
class Laptop {
	int ev_broj;
	std::string naziv;
	std::string karakteristike;
	Student* kod_koga_je;
public:
	Laptop(int broj, std::string nazivlaptopa, std::string characteristics);
	int DajEvidencijskiBroj() const { return ev_broj; }
	std::string DajNaziv() const { return naziv; }
	std::string DajKarakteristike() const { return karakteristike; }
	void Zaduzi(Student &amp;student) { kod_koga_je = &amp;student; }
	void Razduzi() { kod_koga_je = nullptr; }
	bool DaLiJeZaduzen() const { return kod_koga_je != nullptr; }
	Student&amp; DajKodKogaJe() const { if (kod_koga_je == nullptr) throw std::domain_error("Laptop nije zaduzen"); return *kod_koga_je; }
	Student* DajPokKodKogaJe() const { return kod_koga_je; }
	void Ispisi() const;
};
class Administracija {
	std::map&lt;int, std::shared_ptr&lt;Student&gt;&gt; studenti;
	std::map&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; laptopi;
	bool DaLiPostojiStudent(int indeks) const { return static_cast&lt;bool&gt;(studenti.count(indeks)); }
	bool DaLiPostojiLaptop(int evbroj) const { return static_cast&lt;bool&gt;(laptopi.count(evbroj)); }
	bool DaLiJeZaduzen(int evbroj);
	bool DaLiJeVecZaduzio(int indeks) const;
<a name="5"></a><font color="#FF0000"><a href="match715-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

public:
	Administracija() {}
	Administracija(const Administracija &amp;a);
	Administracija(Administracija &amp;&amp;a);
	Administracija&amp; operator =(const Administracija &amp;a);
	Administracija&amp; operator =(Administracija &amp;&amp;);
</font><a name="0"></a><font color="#FF0000"><a href="match715-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

	~Administracija();
	void RegistrirajNovogStudenta(int broj_indeksa, std::string godst, std::string ime, std::string adress, std::string broj);
	void RegistrirajNoviLaptop(int broj, std::string nazivlaptopa, std::string characteristics);
	Student&amp; NadjiStudenta(int indeks);
</font>	Student NadjiStudenta(int indeks) const;
	Laptop&amp; NadjiLaptop(int evbroj);
	Laptop NadjiLaptop(int evbroj) const;
	void IzlistajStudente() const;
	void IzlistajLaptope() const;
	void ZaduziLaptop(int indeks, int evbroj);
	int NadjiSlobodniLaptop() const;
	void RazduziLaptop(int evbroj);
	void PrikaziZaduzenja() const;
};
int main()
{
	Administracija a;
	std::cout &lt;&lt; "Dobrodosli na ETF" &lt;&lt; std::endl;
	for (;;) {
		std::cout &lt;&lt; "Unesite jednu od opcija: " &lt;&lt; std::endl &lt;&lt; "1 - Registriraj novi laptop" &lt;&lt; std::endl &lt;&lt; "2 - Registriraj novog studenta" &lt;&lt; std::endl &lt;&lt; "3 - Izlistaj laptope" &lt;&lt; std::endl &lt;&lt; "4 - Izlistaj studente" &lt;&lt; std::endl &lt;&lt; "5 - Nadji prvi slobodni laptop" &lt;&lt; std::endl &lt;&lt; "6 - Nadji laptop" &lt;&lt; std::endl &lt;&lt; "7 - Zaduzi laptop" &lt;&lt; std::endl &lt;&lt; "8 - Razduzi laptop" &lt;&lt; std::endl &lt;&lt; "9 - Prikazi sva zaduzenja" &lt;&lt; std::endl &lt;&lt; "10 - Kraj programa" &lt;&lt; std::endl;
		int opcija;
		std::cin &gt;&gt; opcija;
		switch (opcija) {
		case 1: { std::cout &lt;&lt; "Unesite evidencijski broj: ";
			int evbroj;
			std::cin &gt;&gt; evbroj;
			std::cout &lt;&lt; "Unesite naziv i karakteristike laptopa: ";
			std::string naziv, karakteristike;
			std::cin.ignore(5, '\n');
			std::getline(std::cin, naziv); std::getline(std::cin, karakteristike);
			try {
				a.RegistrirajNoviLaptop(evbroj, naziv, karakteristike);
			}
			catch (std::domain_error e) {
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
			}
			catch (...) {
				return 0;
			}
		} break;
		case 2: { std::cout &lt;&lt; "Unesite indeks: ";
			int indeks;
			std::cin &gt;&gt; indeks;
			std::cout &lt;&lt; "Unesite godinu studija, ime, adresu i broj telefona: ";
			std::string godstud, ime, adresa, brojtel;
			std::cin.ignore(5, '\n');
			std::getline(std::cin, godstud); std::getline(std::cin, ime); std::getline(std::cin, adresa); std::getline(std::cin, brojtel);
			try {
				a.RegistrirajNovogStudenta(indeks, godstud, ime, adresa, brojtel);
			}
			catch (std::domain_error e) {
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
			}
			catch (...) {
				return 0;
			}
			break;
		}
		case 3: { a.IzlistajLaptope(); } break;
		case 4: { a.IzlistajStudente(); } break;
		case 5: { try {
			int evbroj = a.NadjiSlobodniLaptop(); std::cout &lt;&lt; "Prvi slobodni laptop je laptop sa evidencijskim brojem " &lt;&lt; evbroj;
		}
				catch (std::domain_error e) {
					std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
				}
		}
				break;
		case 6: { std::cout &lt;&lt; "Unesite evidencijski broj laptopa: ";
			int broj;
			std::cin &gt;&gt; broj;
			try {
				a.NadjiLaptop(broj).Ispisi();
			}
			catch (std::domain_error e) {
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
			}
		}
				break;
		case 7: { std::cout &lt;&lt; "Unesite evidencijski broj laptopa kojeg zelite zaduziti: ";
			int evbroj, indeks;
			std::cin &gt;&gt; evbroj;
			std::cout &lt;&lt; "Unesite broj indeksa studenta koji zaduzuje laptop: ";
			std::cin &gt;&gt; indeks;
			try {
				a.ZaduziLaptop(indeks, evbroj);
				std::cout &lt;&lt; "Laptop uspjesno zaduzen" &lt;&lt; std::endl;
			}
			catch (std::domain_error e) {
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
			}
		}
				break;
		case 8: { std::cout &lt;&lt; "Unesite evidencijski broj laptopa kojeg zelite razduziti: ";
			int evbroj;
			std::cin &gt;&gt; evbroj;
			try {
				a.RazduziLaptop(evbroj);
				std::cout &lt;&lt; "Laptop uspjesno razduzen" &lt;&lt; std::endl;
			}
			catch (std::domain_error e) {
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
			}
		} break;
		case 9: { a.PrikaziZaduzenja(); } break;
		default: { return 0; }
		}
	}
	return 0;
}

// IMPLEMENTACIJA 
//Student::private
bool Student::DaLiJePetocifren(int broj) {
	return broj &gt;= 10000 &amp;&amp; broj &lt;= 99999;
}
bool Student::DaLiJeIspravnaGodinaStudija(std::string godina_studija) {
	static const std::vector&lt;std::string&gt; godine{ "1","2","3","1/B","2/B","3/B","1/M","2/M","1/D","2/D","3/D" };
	return std::find(godine.begin(), godine.end(), godina_studija) != godine.end();
}
void Student::ObrisiSveRazmake(std::string &amp;adresa) {
	std::string s;
	auto it = adresa.begin();
	bool loga2(false);
	std::remove_copy_if(adresa.begin(), adresa.end(), std::back_inserter(s), [&amp;loga2, &amp;it, &amp;adresa](char c) { bool loga = !(c != ' ' || (it != adresa.begin() &amp;&amp; it != adresa.end() - 1 &amp;&amp; c == ' ' &amp;&amp; *(it + 1) != ' ' &amp;&amp; loga2)); if (c != ' ') loga2 = true; it++; return loga; });
	adresa = s;
}
bool Student::DaLiJeIspravanBrojTelefona(std::string broj_telefona) {
	bool daLiJeBilaCifra(false), daLiJeBilaKosa(false), daLiJeBilaCrta(false);
	for (char znak : broj_telefona) {
		if (znak &gt;= '0' &amp;&amp; znak &lt;= '9') daLiJeBilaCifra = true;
		else if (znak == '/' &amp;&amp; daLiJeBilaCifra &amp;&amp; !daLiJeBilaCrta &amp;&amp; !daLiJeBilaKosa) { daLiJeBilaKosa = true; daLiJeBilaCifra = false; }
		else if (znak == '-' &amp;&amp; daLiJeBilaCifra &amp;&amp; daLiJeBilaKosa &amp;&amp; !daLiJeBilaCrta) { daLiJeBilaCrta = true; daLiJeBilaCifra = false; }
		else return false;
	}
	if (!daLiJeBilaKosa || !daLiJeBilaCrta) return false;
	return true;
}
//Student::public
<a name="6"></a><font color="#00FF00"><a href="match715-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

Student::Student(int broj_indeksa, std::string godst, std::string ime, std::string adress, std::string broj) {
	if (!DaLiJePetocifren(broj_indeksa) || !DaLiJeIspravnaGodinaStudija(godst) || !DaLiJeIspravanBrojTelefona(broj)) throw std::domain_error("Neispravni parametri");
</font>	ObrisiSveRazmake(adress); ObrisiSveRazmake(ime);
	brojindeksa = broj_indeksa; godina_studija = godst; imeiprezime = ime; adresa = adress; brojtel = broj;
	if (godina_studija == "1" || godina_studija == "2" || godina_studija == "3") godina_studija+="/B";
}
void Student::Ispisi() const {
	std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; DajIndeks() &lt;&lt; std::endl &lt;&lt; "Godina studija: " &lt;&lt; DajGodinuStudija();
	std::cout &lt;&lt; std::endl &lt;&lt; "Ime i prezime: " &lt;&lt; DajImePrezime() &lt;&lt; std::endl &lt;&lt; "Adresa: " &lt;&lt; adresa &lt;&lt; std::endl &lt;&lt; "Telefon: " &lt;&lt; brojtel &lt;&lt; std::endl;
}

//Laptop::public
Laptop::Laptop(int broj, std::string nazivlaptopa, std::string characteristics) : kod_koga_je(nullptr) {
	if (broj &lt; 0) throw std::domain_error("Neispravni parametri");
	ev_broj = broj; naziv = nazivlaptopa; karakteristike = characteristics;
}
void Laptop::Ispisi() const {
	std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; ev_broj &lt;&lt; std::endl &lt;&lt; "Naziv: " &lt;&lt; naziv &lt;&lt; std::endl &lt;&lt; "Karakteristike: " &lt;&lt; karakteristike &lt;&lt; std::endl;
}

//Administracija::private
bool Administracija::DaLiJeVecZaduzio(int indeks) const {
	for (auto par : laptopi) {
		auto pok = par.second-&gt;DajPokKodKogaJe();
		if (pok == nullptr) continue;
		if (pok-&gt;DajIndeks() == indeks)
			return true;
	}
	return false;
}
bool Administracija::DaLiJeZaduzen(int evbroj) {
	return laptopi[evbroj]-&gt;DaLiJeZaduzen();
}
//Administracija::public
Administracija::Administracija(const Administracija &amp;a) {
	for (auto par : a.studenti) {
		studenti.emplace(par.first, std::make_shared&lt;Student&gt;(*par.second));
	}
	for (auto par : a.laptopi) {
		laptopi.emplace(par.first, std::make_shared&lt;Laptop&gt;(*par.second));
	}
}
Administracija::Administracija(Administracija &amp;&amp;a) : studenti(std::move(a.studenti)), laptopi(std::move(a.laptopi)) {
	a.studenti.clear(); a.laptopi.clear();
}
Administracija&amp; Administracija::operator =(const Administracija &amp;a) {
	if (&amp;a != this) {
		auto mapastudenata = studenti;
		auto mapalaptopa = laptopi;
		try {
			for (auto par : a.studenti)
				if (!studenti.count(par.first))
					studenti.emplace(par.first, std::make_shared&lt;Student&gt;(*par.second));
			for (auto par : a.laptopi)
				if (!laptopi.count(par.first))
					laptopi.emplace(par.first, std::make_shared&lt;Laptop&gt;(*par.second));
		}
		catch (...) {
			for (auto it = studenti.begin(); it != studenti.end(); it++) {
				if (!mapastudenata.count(it-&gt;first)) {
					it = studenti.erase(it);
				}
			}
			for (auto it = laptopi.begin(); it != laptopi.end(); it++) {
				if (!mapalaptopa.count(it-&gt;first)) {
					it = laptopi.erase(it);
				}
			}
			throw;
		}
		for (auto it = studenti.begin(); it != studenti.end(); it++) {
			if (!a.studenti.count(it-&gt;first)) {
				it = studenti.erase(it);
			}
		}
		for (auto it = laptopi.begin(); it != laptopi.end(); it++) {
			if (!a.laptopi.count(it-&gt;first)) {
				it = laptopi.erase(it);
			}
		}
	}
<a name="4"></a><font color="#FF00FF"><a href="match715-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

	return *this;
}
Administracija&amp; Administracija::operator =(Administracija &amp;&amp;a) {
	std::swap(laptopi, a.laptopi); std::swap(studenti, a.studenti);
	return *this;
</font>}
Administracija::~Administracija() { studenti.clear(); laptopi.clear(); }
void Administracija::RegistrirajNovogStudenta(int broj_indeksa, std::string godst, std::string ime, std::string adress, std::string broj) {
	if (DaLiPostojiStudent(broj_indeksa)) throw std::domain_error("Student s tim indeksom vec postoji");
<a name="3"></a><font color="#00FFFF"><a href="match715-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

	studenti.emplace(broj_indeksa, std::make_shared&lt;Student&gt;(broj_indeksa, godst, ime, adress, broj));
}
void Administracija::RegistrirajNoviLaptop(int broj, std::string nazivlaptopa, std::string characteristics) {
</font>	if (DaLiPostojiLaptop(broj)) throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
	laptopi.emplace(broj, std::make_shared&lt;Laptop&gt;(broj, nazivlaptopa, characteristics));
}
Student&amp; Administracija::NadjiStudenta(int indeks) {
	auto it = studenti.find(indeks);
	if (it == studenti.end()) throw std::domain_error("Student nije nadjen");
	return *it-&gt;second;
}
Student Administracija::NadjiStudenta(int indeks) const {
	auto it = studenti.find(indeks);
	if (it == studenti.end()) throw std::domain_error("Student nije nadjen");
	return *it-&gt;second;
}
Laptop&amp; Administracija::NadjiLaptop(int evbroj) {
	auto it = laptopi.find(evbroj);
	if (it == laptopi.end()) throw std::domain_error("Laptop nije nadjen");
	return *it-&gt;second;
}
Laptop Administracija::NadjiLaptop(int evbroj) const {
	auto it = laptopi.find(evbroj);
	if (it == laptopi.end()) throw std::domain_error("Laptop nije nadjen");
	return *it-&gt;second;
}
void Administracija::IzlistajStudente() const {
	std::for_each(studenti.begin(), studenti.end(), [](std::pair&lt;int, std::shared_ptr&lt;Student&gt;&gt; par) { par.second-&gt;Ispisi(); std::cout &lt;&lt; std::endl; });
}
void Administracija::IzlistajLaptope() const {
	std::for_each(laptopi.begin(), laptopi.end(), [](std::pair&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; par) {
		par.second-&gt;Ispisi();
		if (par.second-&gt;DaLiJeZaduzen())
			std::cout &lt;&lt; "Zaduzio(la): " &lt;&lt; par.second-&gt;DajPokKodKogaJe()-&gt;DajImePrezime() &lt;&lt; " (" &lt;&lt; par.second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() &lt;&lt; ")" &lt;&lt; std::endl;
		std::cout &lt;&lt; std::endl; });
}
void Administracija::ZaduziLaptop(int indeks, int evbroj) {
	if (!DaLiPostojiStudent(indeks)) throw std::domain_error("Student nije nadjen");
	if (!DaLiPostojiLaptop(evbroj)) throw std::domain_error("Laptop nije nadjen");
	if (DaLiJeZaduzen(evbroj)) throw std::domain_error("Laptop vec zaduzen");
	if (DaLiJeVecZaduzio(indeks)) throw std::domain_error("Student je vec zaduzio laptop");
	laptopi[evbroj]-&gt;Zaduzi(*studenti[indeks]);
}
int Administracija::NadjiSlobodniLaptop() const {
	for (auto it = laptopi.begin(); it != laptopi.end(); it++) {
		if (!it-&gt;second-&gt;DaLiJeZaduzen()) return it-&gt;first;
	}
	throw std::domain_error("Nema slobodnih laptopa");
	return -1;
}
void Administracija::RazduziLaptop(int evbroj) {
	if (!DaLiPostojiLaptop(evbroj)) throw std::domain_error("Laptop nije nadjen");
	if (!DaLiJeZaduzen(evbroj)) throw std::domain_error("Laptop nije zaduzen");
	for (auto it = laptopi.begin(); it != laptopi.end(); it++) {
		if (it-&gt;first == evbroj) it-&gt;second-&gt;Razduzi();
	}
}
void Administracija::PrikaziZaduzenja() const {
	bool postojiLiZaduzen(false);
	std::for_each(laptopi.begin(), laptopi.end(), [&amp;postojiLiZaduzen](std::pair&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; par) {
		if (par.second-&gt;DaLiJeZaduzen()) {
			std::cout &lt;&lt; "Student " &lt;&lt; par.second-&gt;DajKodKogaJe().DajImePrezime() &lt;&lt; " (" &lt;&lt; par.second-&gt;DajKodKogaJe().DajIndeks() &lt;&lt; ") zaduzio/la laptop broj " &lt;&lt; par.first &lt;&lt; std::endl;
			postojiLiZaduzen = true;
		}
	});
	if (!postojiLiZaduzen) std::cout &lt;&lt; "Nema zaduzenja" &lt;&lt; std::endl;
}
</pre>
</body>
</html>
