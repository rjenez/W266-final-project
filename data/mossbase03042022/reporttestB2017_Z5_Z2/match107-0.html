<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student2213.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student2213.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match107-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: Zadaća 5, Zadatak 2
#include &lt;iostream&gt;
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
using namespace std;
class Datum {
 int dan, mjesec, godina;
public:
 Datum(int d, int m, int g);
 void Ispisi() const { std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina; }
};
class Ucenik {
 static const int BrojPredmeta = 10; // Pri testiranju smanjite
 char ime[20], prezime[20]; // broj predmeta...
 Datum datum_rodjenja;
 int ocjene[BrojPredmeta];
 double prosjek;
 bool prolaz;
public:
 Ucenik(const char ime[], const char prezime[], int d, int m, int g);
 void PostaviOcjenu(int predmet, int ocjena);
 static int DajBrojPredmeta() { return BrojPredmeta; }
 double DajProsjek() const { return prosjek; }
 bool DaLiJeProsao() const { return prolaz; }
 void Ispisi() const;
};
class Razred {
 const int kapacitet;
 int broj_evidentiranih;
 Ucenik **ucenici;
 static bool BoljiProsjek(const Ucenik *u1, const Ucenik *u2) {
 return u1-&gt;DajProsjek() &gt; u2-&gt;DajProsjek();
 }
public:
 explicit Razred(int broj_ucenika) : kapacitet(broj_ucenika),
 broj_evidentiranih(0), ucenici(new Ucenik*[broj_ucenika]{}) {}
 
 ~Razred();
/* Razred(const Razred &amp;r) = delete; // Zabrana kopiranja
 Razred &amp;operator =(const Razred &amp;r) = delete; // Zabrana dodjele
 */
 Razred(const Razred &amp;r) : ucenici(new Ucenik*[r.kapacitet]{}),
 kapacitet(r.kapacitet), broj evidentiranih(r.broj_evidentiranih) {
 try {
 for(int i = 0; i &lt; r.broj_evidentiranih; i++)
ucenici[i] = new Ucenik(*r.ucenici[i]);
 }
 catch(...) {
 for(int i = 0; i &lt; r.broj_evidentiranih; i++) delete ucenici[i];
 delete[] ucenici; throw;
 }
}
Razred::Razred(Razred &amp;&amp;r) : ucenici(r.ucenici), kapacitet(r.kapacitet),
 broj_evidentiranih(r.broj_evidentiranih) {
 r.ucenici = nullptr; r.broj_evidentiranih = 0;
}
 &amp;Razred::operator =(Razred r) {
 if(r.kapacitet != kapacitet)
 throw std::logic_error("Razredi nesaglasnih kapaciteta!");
 std::swap(broj_evidentiranih, r.broj_evidentiranih);
 std::swap(ucenici, r.ucenici);
 return *this;
}
Razred &amp;Razred::operator =(Razred &amp;&amp;r) {
 if(r.kapacitet != kapacitet)
 throw std::logic_error("Razredi nesaglasnih kapaciteta!");
 std::swap(broj_evidentiranih, r.broj_evidentiranih);
 std::swap(ucenici, r.ucenici);
 return *this;
}


 void EvidentirajUcenika(Ucenik *ucenik);
 void UnesiNovogUcenika();
 void IspisiIzvjestaj() const;
 void SortirajUcenike() {
 std::sort(ucenici, ucenici + broj_evidentiranih, BoljiProsjek);
 }
};

Datum::Datum(int d, int m, int g) {
 int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
 if(g % 4 == 0 &amp;&amp; g % 100 != 0 || g % 400 == 0) broj_dana[1]++;
 if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m - 1])
 throw std::domain_error("Neispravan datum!");
 dan = d; mjesec = m; godina = g;
}
Ucenik::Ucenik(const char ime[], const char prezime[], int d, int m, int g) :
 datum_rodjenja(d, m, g), prosjek(1), prolaz(false) {
 if(std::strlen(ime) &gt; 19 || std::strlen(prezime) &gt; 19)
 throw std::domain_error("Predugacko ime ili prezime!");
 std::strcpy(Ucenik::ime, ime);
 std::strcpy(Ucenik::prezime, prezime);
 for(int &amp;ocjena : ocjene) ocjena = 1;
}
void Ucenik::PostaviOcjenu(int predmet, int ocjena) {
 if(ocjena &lt; 1 || ocjena &gt; 5)
 throw std::domain_error("Pogresna ocjena!");
 if(predmet &lt; 1 || predmet &gt; BrojPredmeta)
 throw std::domain_error("Pogresna sifra predmeta!");
 ocjene[predmet - 1] = ocjena;
 prosjek = 1; prolaz= false;
 double suma_ocjena(0);
 for(int ocjena : ocjene) {
 if(ocjena == 1) return;
 suma_ocjena += ocjena;
 }
 prosjek = suma_ocjena / BrojPredmeta; prolaz = true;
}
void Ucenik::Ispisi() const {
 std::cout &lt;&lt; "Ucenik " &lt;&lt; ime &lt;&lt; " " &lt;&lt; prezime &lt;&lt; " rodjen ";
 datum_rodjenja.Ispisi();
 if(DaLiJeProsao())
 std::cout &lt;&lt; " ima prosjek "
 &lt;&lt; std::setprecision(3) &lt;&lt; DajProsjek() &lt;&lt; std::endl;
 else
 std::cout &lt;&lt; " mora ponavljati razred\n";
}
Razred::~Razred() {
 for(int i = 0; i &lt; broj_evidentiranih; i++) delete ucenici[i];
 delete[] ucenici;
}
void Razred::EvidentirajUcenika(Ucenik *ucenik) {
 if(broj_evidentiranih &gt;= kapacitet)
 throw std::range_error("Previse ucenika!");
 ucenici[broj_evidentiranih++] = ucenik;
}
void Razred::UnesiNovogUcenika() {
 bool pogresan_unos(true);
 while(pogresan_unos) {
 Ucenik *ucenik(nullptr);
 try {
 char ime[20], prezime[20];
 int d, m, g;
 char znak1, znak2;
 std::cout &lt;&lt; " Ime: "; std::cin &gt;&gt; std::setw(20) &gt;&gt; ime;
 std::cout &lt;&lt; " Prezime: "; std::cin &gt;&gt; std::setw(20) &gt;&gt; prezime;
 std::cout &lt;&lt; " Datum rodjenja (D/M/G): ";
 std::cin &gt;&gt; d &gt;&gt; znak1 &gt;&gt; m &gt;&gt; znak2 &gt;&gt; g;
 if(!std::cin || znak1 != '/' || znak2 != '/')
 throw std::domain_error("Pogresan datum!");
 ucenik = new Ucenik(ime, prezime, d, m, g);
 for(int predmet = 1; predmet &lt;= Ucenik::DajBrojPredmeta(); predmet++) {
 int ocjena;
 std::cout &lt;&lt; " Ocjena iz " &lt;&lt; predmet &lt;&lt; ". predmeta: ";
 std::cin &gt;&gt; ocjena;
 if(!std::cin) throw std::domain_error("Pogresna ocjena!");
 ucenik-&gt;PostaviOcjenu(predmet, ocjena);
 }
 EvidentirajUcenika(ucenik);
 pogresan_unos = false;
 }
 catch(std::domain_error greska) {
 cout &lt;&lt; "Greska: " &lt;&lt; greska.what() &lt;&lt; "\nMolimo, ponovite unos!\n";
 std::cin.clear();std::cin.ignore(10000, '\n');
 delete ucenik; ucenik = nullptr;
 }
 }
}
void Razred::IspisiIzvjestaj() const {
 std::cout &lt;&lt; std::endl;
 for(int i = 0; i &lt; broj_evidentiranih; i++) ucenici[i]-&gt;Ispisi();
}

int main() {
 try {
 int broj_ucenika;
 std::cout &lt;&lt; "Koliko ima ucenika: ";
 std::cin &gt;&gt; broj_ucenika;
 if(!std::cin) throw ""; // Ovdje je nebitno šta bacamo...
 Razred razred(broj_ucenika);
 for(int i = 1; i &lt;= broj_ucenika; i++) {
 std::cout &lt;&lt; "Unesi podatke za " &lt;&lt; i &lt;&lt; ". ucenika:\n";
 razred.UnesiNovogUcenika();
 }
 razred.SortirajUcenike();
 razred.IspisiIzvjestaj();
 }
 catch(...) {
 std::cout &lt;&lt; "Problemi sa memorijom!\n";
</font> }
 return 0;
}</pre>
</body>
</html>
