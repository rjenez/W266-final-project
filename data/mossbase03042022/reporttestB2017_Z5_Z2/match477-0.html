<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student6168.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student6168.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;stdio.h&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

using std::cin;
using std::cout;
using std::endl;
using std::pair;

class Student {
	int br_ind;
	std::string god_studija, ime_prezime, adresa, br_tel;
	void NormalizirajImeIliAdresu(std::string &amp;s);
	bool IspravnostGodineStudija(const std::string &amp;godina_studija);
	bool IspravnostBrojaTelefona(const std::string &amp;broj_telefona);
	bool IspravnostBrojaIndeksa(const int &amp;bi) { return (bi &gt;= 10000 &amp;&amp; bi &lt;= 99999); }
	bool Broj(const char &amp;znak) { return znak &gt;= '0' &amp;&amp; znak &lt;= '9'; }
<a name="2"></a><font color="#0000FF"><a href="match477-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

public:
	Student(int br_ind, std::string god_studija, std::string ime_prezime, std::string adresa, std::string br_tel);
	int DajIndeks() const { return br_ind; }
	std::string DajGodinuStudija() const { return god_studija; }
</font>	std::string DajImePrezime() const { return ime_prezime; }
	std::string DajAdresu() const { return adresa; }
	std::string DajTelefon() const { return br_tel; }
	void Ispisi() const;
	friend class Laptop;
	friend class Administracija;
};
//KLASA "STUDENT"
void Student::NormalizirajImeIliAdresu(std::string &amp;s) {
	auto Pocetak(std::find_if(s.begin(), s.end(), [](const char &amp;znak) { return znak != ' '; }));
	auto Kraj(s.end());
	Kraj--;
	while (Kraj != Pocetak) {
		if (*Kraj != ' ')
			break;
		Kraj--;
	}
	Kraj++;
	std::string Pomocni;
	std::copy(Pocetak, Kraj, back_inserter(Pomocni));
	auto novi_kraj(std::unique(Pomocni.begin(), Pomocni.end(), [](char l, char d) { return (l == d) &amp;&amp; (l == ' '); }));
	Pomocni.erase(novi_kraj, Pomocni.end());
	s = Pomocni;
}
bool Student::IspravnostGodineStudija(const std::string &amp;s) {
<a name="4"></a><font color="#FF00FF"><a href="match477-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

	static const std::vector&lt;std::string&gt; ValidneGS{ "1", "2", "3", "1/B", "2/B", "3/B", "1/M", "2/M", "1/D", "2/D", "3/D" };
</font>	if (std::count(ValidneGS.begin(), ValidneGS.end(), s)) return true; return false;
}
bool Student::IspravnostBrojaTelefona(const std::string &amp;broj_telefona) {
	if (!Broj(broj_telefona[0])) return false;
	auto klizeci(broj_telefona.begin());
	while (klizeci != broj_telefona.end()) {
		while (Broj(*klizeci) &amp;&amp; klizeci!=broj_telefona.end()) klizeci++;
		if (*klizeci != '/') return false;
		klizeci++;
		if (!Broj(*klizeci)) return false;
		while (Broj(*klizeci) &amp;&amp; klizeci != broj_telefona.end()) klizeci++;
		if (*klizeci != '-') return false;
		klizeci++;
		if (!Broj(*klizeci)) return false;
		while (klizeci != broj_telefona.end()) {
			if (!Broj(*klizeci)) return false;
			klizeci++;
		}
	}
	return true;
}
void Student::Ispisi() const {
	cout &lt;&lt; "Broj indeksa: " &lt;&lt; DajIndeks() &lt;&lt; endl;
	cout &lt;&lt; "Godina studija: " &lt;&lt; DajGodinuStudija();
	if (DajGodinuStudija() == "1" || DajGodinuStudija() == "2" || DajGodinuStudija() == "3") cout &lt;&lt; "/B" &lt;&lt; endl;
	else cout &lt;&lt; endl; 
	cout &lt;&lt; "Ime i prezime: " &lt;&lt; DajImePrezime() &lt;&lt; endl;
	cout &lt;&lt; "Adresa: " &lt;&lt; DajAdresu() &lt;&lt; endl; 
	cout &lt;&lt; "Telefon: " &lt;&lt; DajTelefon() &lt;&lt; endl; 
}
<a name="5"></a><font color="#FF0000"><a href="match477-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

Student::Student(int br_ind, std::string god_studija, std::string ime_prezime, std::string adresa, std::string br_tel) {
	if (!IspravnostBrojaIndeksa(br_ind)) throw std::domain_error("Neispravni parametri");  
</font>	if (!IspravnostGodineStudija(god_studija)) throw std::domain_error("Neispravni parametri");
	if (!IspravnostBrojaTelefona(br_tel)) throw std::domain_error("Neispravni parametri");
	NormalizirajImeIliAdresu(adresa);
	NormalizirajImeIliAdresu(ime_prezime);
	Student::br_ind = br_ind; Student::ime_prezime = ime_prezime; Student::adresa = adresa; Student::br_tel = br_tel;
	if(god_studija=="1" || god_studija=="2" || god_studija=="3") Student::god_studija = god_studija+"/B";
	else Student::god_studija = god_studija;
}

class Laptop {
<a name="1"></a><font color="#00FF00"><a href="match477-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

	int ev_broj;
	std::string naziv, karakteristike;
	Student *kod_koga_je;
public:
	Laptop(int ev_broj, std::string naziv, std::string karakteristike);
	int DajEvidencijskiBroj() const { return ev_broj; }
	std::string DajNaziv() const { return naziv; }
	std::string DajKarakteristike() const { return karakteristike; }
	void Zaduzi(Student &amp;stud) { if (kod_koga_je != nullptr) throw std::domain_error("Laptop vec zaduzen"); *kod_koga_je = stud; }
</font>	void Razduzi() { kod_koga_je = nullptr; }
	bool DaLiJeZaduzen() { if (kod_koga_je == nullptr) return false; return true; }
	Student&amp; DajKodKogaJe() { if (kod_koga_je == nullptr) throw std::domain_error("Laptop nije zaduzen"); return *kod_koga_je; }
	Student* DajPokKodKogaJe() { return kod_koga_je; }
	void Ispisi() const;
};
//KLASA "LAPTOP"
Laptop::Laptop(int ev_broj, std::string naziv, std::string karakteristike) {
	if (ev_broj&lt;0) throw std::domain_error("Neispravni parametri");
	Laptop::ev_broj = ev_broj; Laptop::naziv = naziv; Laptop::karakteristike = karakteristike; kod_koga_je = nullptr;
}
void Laptop::Ispisi() const {
	cout &lt;&lt; "Evidencijski broj: " &lt;&lt; DajEvidencijskiBroj() &lt;&lt; endl &lt;&lt; "Naziv: " &lt;&lt; DajNaziv() &lt;&lt; endl &lt;&lt; "Karakteristike: " &lt;&lt; DajKarakteristike() &lt;&lt; endl;
}

class Administracija {
	std::map&lt;int, std::shared_ptr&lt;Student&gt;&gt; Studenti;
	std::map&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; Laptopi;

public:
	Administracija () {}
<a name="0"></a><font color="#FF0000"><a href="match477-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	Administracija (const Administracija &amp;a);
	Administracija (Administracija &amp;&amp;a);
	Administracija &amp;operator =(const Administracija &amp;a);
	Administracija &amp;operator =(Administracija &amp;&amp;a);
	void RegistrirajNovogStudenta (int br_ind, std::string god_studija, std::string ime_prezime, std::string adresa, std::string br_tel);
	void RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike);
	Student&amp; NadjiStudenta (int brind);
	Laptop&amp; NadjiLaptop(int evbr);
</font>	Student NadjiStudenta(int brind) const;
	Laptop NadjiLaptop(int evbr) const;
	void IzlistajStudente () const;
	void IzlistajLaptope () const;
	void ZaduziLaptop(int brind, int evbr);
	int NadjiSlobodniLaptop();
	void RazduziLaptop(int evbroj);
	void PrikaziZaduzenja() const;
	~Administracija() { for (auto stud : Studenti) stud.second=nullptr; for (auto lapas : Laptopi) lapas.second=nullptr; }
};
//KLASA "ADMINISTRACIJA"

Administracija::Administracija(const Administracija &amp;a) {
	for (auto its(a.Studenti.begin()); its != a.Studenti.end(); its++) 
		Studenti.emplace(its-&gt;first, its-&gt;second);
	for (auto itl(a.Laptopi.begin()); itl != a.Laptopi.end(); itl++)
		Laptopi.emplace(itl-&gt;first, itl-&gt;second);
}
Administracija::Administracija(Administracija &amp;&amp;a) {
	Administracija::Studenti = std::move(a.Studenti);
	Administracija::Laptopi = std::move(a.Laptopi);
	a.Studenti.clear(); a.Laptopi.clear();
}
void Administracija::RegistrirajNovogStudenta(int br_ind, std::string god_studija, std::string ime_prezime, std::string adresa, std::string br_tel) {
	auto Pretraga = Studenti.find(br_ind);
	if (Pretraga != Studenti.end()) throw std::domain_error("Student s tim indeksom vec postoji");
<a name="3"></a><font color="#00FFFF"><a href="match477-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

	Studenti.emplace(br_ind, std::make_shared&lt;Student&gt;(br_ind, god_studija, ime_prezime, adresa, br_tel));
}
void Administracija::RegistrirajNoviLaptop(int ev_broj, std::string naziv, std::string karakteristike) {
</font>	auto Pretraga = Laptopi.find(ev_broj);
	if (Pretraga != Laptopi.end()) throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
	Laptopi.emplace(ev_broj, std::make_shared&lt;Laptop&gt;(ev_broj, naziv, karakteristike));
}
Student &amp; Administracija::NadjiStudenta(int brind) {
	auto lokacija = Studenti.find(brind);
	if (lokacija == Studenti.end()) throw std::domain_error("Student nije nadjen");
	return *lokacija-&gt;second;
}
Student  Administracija::NadjiStudenta(int brind) const {
	auto lokacija = Studenti.find(brind);
	if (lokacija == Studenti.end()) throw std::domain_error("Student nije nadjen");
	return *lokacija-&gt;second;
}
Laptop &amp; Administracija::NadjiLaptop(int evbr) {
	auto lokacija = Laptopi.find(evbr);
	if (lokacija == Laptopi.end()) throw std::domain_error("Laptop nije nadjen");
	return *lokacija-&gt;second;
}
Laptop  Administracija::NadjiLaptop(int evbr) const {
	auto lokacija = Laptopi.find(evbr);
	if (lokacija == Laptopi.end()) throw std::domain_error("Laptop nije nadjen");
	return *lokacija-&gt;second;
}
void Administracija::IzlistajStudente() const {
	for (auto Stud : Studenti) {
		Stud.second-&gt;Ispisi(); cout &lt;&lt; endl;
	}
}
void Administracija::IzlistajLaptope() const {
	for (auto Lap : Laptopi) {
		Lap.second-&gt;Ispisi();
		if (Lap.second-&gt;DaLiJeZaduzen())
			cout &lt;&lt; "Zaduzio(la): " &lt;&lt; Lap.second-&gt;DajPokKodKogaJe()-&gt;DajImePrezime() &lt;&lt; " (" &lt;&lt; Lap.second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() &lt;&lt; ")" &lt;&lt; endl;
		else
			cout &lt;&lt; endl;
	}
}
void Administracija::ZaduziLaptop(int brind, int evbr) {
	auto RegStud(Studenti.find(brind));
	if (RegStud == Studenti.end()) throw std::domain_error("Student nije nadjen");
	auto RegLap(Laptopi.find(evbr));
	if(RegLap == Laptopi.end()) throw std::domain_error("Laptop nije nadjen");
	if (RegLap-&gt;second-&gt;DaLiJeZaduzen()) throw std::domain_error("Laptop vec zaduzen");
	for (auto laptop : Laptopi) {
		if(laptop.second-&gt;DaLiJeZaduzen())
			if(laptop.second-&gt;DajPokKodKogaJe()-&gt;DajIndeks()==brind) throw std::domain_error("Student je vec zaduzio laptop");
	}
	RegLap-&gt;second-&gt;Zaduzi(*RegStud-&gt;second);
}
int Administracija::NadjiSlobodniLaptop() {
	auto SlobodanLaptop(std::find_if(Laptopi.begin(), Laptopi.end(), [](const std::pair&lt;int, const std::shared_ptr&lt;Laptop&gt;&gt; &amp;Lap) { return !(Lap.second-&gt;DaLiJeZaduzen());}));
	if (SlobodanLaptop == Laptopi.end()) throw std::domain_error("Nema slobodnih laptopa");
	return SlobodanLaptop-&gt;second-&gt;DajEvidencijskiBroj();
}
void Administracija::RazduziLaptop(int evbroj) {
	auto ZaRazduzit(Laptopi.find(evbroj));
	if (ZaRazduzit == Laptopi.end()) throw std::domain_error("Laptop nije nadjen");
	if (!ZaRazduzit-&gt;second-&gt;DaLiJeZaduzen()) throw std::domain_error("Laptop nije zaduzen");
	ZaRazduzit-&gt;second-&gt;Razduzi();
}
void Administracija::PrikaziZaduzenja() const {
	int brojac(0);
	std::for_each(Laptopi.begin(), Laptopi.end(), [&amp;brojac](const std::pair&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; Zaduzeni) {
		if (Zaduzeni.second-&gt;DaLiJeZaduzen()) {
			cout &lt;&lt; "Student " &lt;&lt; Zaduzeni.second-&gt;DajPokKodKogaJe()-&gt;DajImePrezime() &lt;&lt; " (" &lt;&lt; Zaduzeni.second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() &lt;&lt; ") zaduzio/la laptop broj " &lt;&lt; Zaduzeni.second-&gt;DajEvidencijskiBroj() &lt;&lt; endl;
			brojac++;
		}
	});
	if (!brojac) cout &lt;&lt; "Nema zaduzenja" &lt;&lt; endl;
}
Administracija &amp;Administracija::operator =(const Administracija &amp;a) {
	for (auto Stud : Studenti)
		Stud.second=nullptr;
	Studenti.clear();
	for (auto Lap : Laptopi)
		Lap.second=nullptr;
	Laptopi.clear();
	for (auto Studd : a.Studenti)
		Studenti.emplace(Studd.first, std::make_shared&lt;Student&gt;(*Studd.second));
	for (auto Lapp : a.Laptopi)
		Laptopi.emplace(Lapp.first, std::make_shared&lt;Laptop&gt;(*Lapp.second));
	return *this;
}
Administracija &amp;Administracija::operator =(Administracija &amp;&amp;a) {
	std::swap(Studenti, a.Studenti);
	std::swap(Laptopi, a.Laptopi);
	return *this;
}


int main () {
    return 0;                  
}</pre>
</body>
</html>
