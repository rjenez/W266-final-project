<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student8006.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student8006.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

class Student {
    int indeks;
    std::string g_studija, i_p, adresa, br_tel;
    void PostaviIndeks(int indeks) {
        if (indeks &lt; 10000 || indeks &gt; 99999) 
            throw std::domain_error("Neispravni parametri");
        this-&gt;indeks = indeks;
    }
    void PostaviGodinu(const std::string &amp;god) {
        const std::string godine[11] {"1", "2", "3", "1/B", "2/B", "3/B", "1/M",
            "2/M", "1/D", "2/D", "3/D"};
        int i(0);
        for (; i &lt; 11; i++) if (god == godine[i]) break;
        if (i == 11) throw std::domain_error("Neispravni parametri");
        g_studija = god;
    }
    void PostaviIme(const std::string &amp;ime) {
        for (int i = 0; i &lt; ime.size(); i++) {
            if (ime[i] == ' ' &amp;&amp; i_p.size() == 0) continue;
            else if (i_p.size() != 0 &amp;&amp; i_p[i_p.size()-1] == ' ' &amp;&amp; ime[i] == ' ') continue;
            else {
                int j(i);
                for (; j &lt; ime.size(); j++) if (ime[j] != ' ') break;
                if (j != ime.size()) i_p.push_back(ime[i]);
            }
        }
        if (i_p.size() == 0) throw std::domain_error("Neispravni parametri");
    }
    void PostaviAdresu(const std::string &amp;adr) {
        for (int i = 0; i &lt; adr.size(); i++) {
            if (adr[i] == ' ' &amp;&amp; adresa.size() == 0) continue;
            else if (adresa.size() != 0 &amp;&amp; adresa[adresa.size()-1] == ' ' &amp;&amp; adr[i] == ' ') continue;
            else {
                int j(i);
                for (; j &lt; adr.size(); j++) if (adr[j] != ' ') break;
                if (j != adr.size()) adresa.push_back(adr[i]);
            }
        }
        if (adresa.size() == 0) throw std::domain_error("Neispravni parametri");
    }
    void PostaviTelefon(const std::string &amp;tel) {
        if (tel.size() == 0) throw;
        auto trenutni(tel.begin()), kraj(tel.end());
        while (trenutni != kraj &amp;&amp; *trenutni != '/') 
            if (*trenutni &lt; '0' || *trenutni++ &gt; '9') 
                throw std::domain_error("Neispravni parametri");
        if (trenutni == tel.begin()) throw;
        while (++trenutni != kraj &amp;&amp; *trenutni != '-')
            if (*trenutni &lt; '0' || *trenutni &gt; '9') 
                throw std::domain_error("Neispravni parametri");
        if (*(trenutni - 1) == '/' || trenutni == kraj) throw;
        while (++trenutni != kraj)
            if (*trenutni &lt; '0' || *trenutni &gt; '9') 
                throw std::domain_error("Neispravni parametri");
        br_tel = tel;
    }
public:
    Student(int indeks, const std::string &amp;g_studija, const std::string &amp;i_p,
        const std::string &amp;adresa, const std::string &amp;tel) {
            PostaviIndeks(indeks); PostaviGodinu(g_studija);
            PostaviIme(i_p); PostaviAdresu(adresa);
            PostaviTelefon(tel);
    }
    int DajIndeks() const { return indeks; }
    std::string DajGodinuStudija() const {
        if (g_studija == "1" || g_studija == "2" || g_studija == "3")
            return g_studija + "/B";
        return g_studija;
    }
<a name="3"></a><font color="#00FFFF"><a href="match748-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    std::string DajImePrezime() const { return i_p; }
    std::string DajAdresu() const { return adresa; }
    std::string DajTelefon() const { return br_tel; }
    void Ispisi() const {
        std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; DajIndeks() &lt;&lt; std::endl
</font>        &lt;&lt; "Godina studija: " &lt;&lt; DajGodinuStudija() &lt;&lt; std::endl
        &lt;&lt; "Ime i prezime: " &lt;&lt; DajImePrezime() &lt;&lt; std::endl
        &lt;&lt; "Adresa: " &lt;&lt; DajAdresu() &lt;&lt; std::endl
        &lt;&lt; "Telefon: " &lt;&lt; DajTelefon() &lt;&lt; std::endl;
    }
};

class Laptop {
    int ev_broj;
    std::string naziv, karakteristike;
    Student *kod_koga_je;
public:
    Laptop(int broj, const std::string &amp;naziv, const std::string &amp;kar) :
<a name="1"></a><font color="#00FF00"><a href="match748-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        ev_broj(broj), naziv(naziv), karakteristike(kar), kod_koga_je(nullptr) {
            if (ev_broj &lt; 0) throw std::domain_error("Neispravni parametri");    
    }
    int DajEvidencijskiBroj() const { return ev_broj; }
    std::string DajNaziv() const { return naziv; }
    std::string DajKarakteristike() const { return karakteristike; }
</font>    Laptop &amp;Zaduzi(Student &amp;s) {
        if (kod_koga_je) throw std::domain_error("Laptop vec zaduzen");
        kod_koga_je = &amp;s; return *this;
    }
    Laptop &amp;Razduzi() { kod_koga_je = nullptr; return *this; }
    bool DaLiJeZaduzen() const { return kod_koga_je != nullptr; }
    Student &amp;DajKodKogaJe() const {
        if (!kod_koga_je) throw std::domain_error("Laptop nije zaduzen");
        return *kod_koga_je; 
    }
    Student *DajPokKodKogaJe() const {
        if (!kod_koga_je) throw std::domain_error("Laptop nije zaduzen");
        return kod_koga_je;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; DajEvidencijskiBroj() &lt;&lt; std::endl
        &lt;&lt; "Naziv: " &lt;&lt; DajNaziv() &lt;&lt; std::endl
<a name="0"></a><font color="#FF0000"><a href="match748-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        &lt;&lt; "Karakteristike: " &lt;&lt; DajKarakteristike() &lt;&lt; std::endl;
    }
};

class Administracija {
    std::map&lt;int, std::shared_ptr&lt;Student&gt;&gt; studenti;
    std::map&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; laptopi;
public:
    Administracija() = default;
    Administracija(const Administracija &amp;a) {
</font>        for (auto s = a.studenti.begin(); s != a.studenti.end(); s++)
            studenti[s-&gt;first] = std::make_shared&lt;Student&gt;(*s-&gt;second);
        for (auto l = a.laptopi.begin(); l != a.laptopi.end(); l++)
            laptopi[l-&gt;first] = std::make_shared&lt;Laptop&gt;(*l-&gt;second);
    }
    Administracija(Administracija &amp;&amp;a) : studenti(a.studenti), laptopi(a.laptopi) {
        a.studenti.clear(); a.laptopi.clear();
    }
    Administracija &amp;operator = (const Administracija &amp;a) {
        std::map&lt;int, std::shared_ptr&lt;Student&gt;&gt; s;
<a name="4"></a><font color="#FF00FF"><a href="match748-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::map&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; l;
        for (auto it = a.studenti.begin(); it != a.studenti.end(); it++) 
            s[it-&gt;first] = std::make_shared&lt;Student&gt;(*it-&gt;second);
</font>        for (auto it = a.laptopi.begin(); it != a.laptopi.end(); it++)
            l[it-&gt;first] = std::make_shared&lt;Laptop&gt;(*it-&gt;second);
        studenti = s; laptopi = l;
        return *this;
    }
    Administracija &amp;operator = (Administracija &amp;&amp;a) {
        std::swap(studenti, a.studenti);
        std::swap(laptopi, a.laptopi);
        return *this;
    }
    Administracija &amp;RegistrirajNovogStudenta(int indeks, const std::string &amp;god, 
<a name="2"></a><font color="#0000FF"><a href="match748-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        const std::string &amp;i_p, const std::string &amp;adr, const std::string &amp;tel) {
            if (studenti.find(indeks) != studenti.end())
                throw std::domain_error("Student s tim indeksom vec postoji");
            studenti[indeks] = std::make_shared&lt;Student&gt;(indeks, god, i_p, adr, tel);
</font>            return *this;
        }
    Administracija &amp;RegistrirajNoviLaptop(int broj, const std::string &amp;naziv, 
<a name="5"></a><font color="#FF0000"><a href="match748-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        const std::string &amp;kar) {
            if (laptopi.find(broj) != laptopi.end())
                throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
            laptopi[broj] = std::make_shared&lt;Laptop&gt;(broj, naziv, kar);
            return *this;
</font>        }
    Student &amp;NadjiStudenta(int indeks) {
        if (studenti.find(indeks) == studenti.end())
            throw std::domain_error("Student nije nadjen");
        return *studenti[indeks];
    }
    Student NadjiStudenta(int indeks) const {
        if (studenti.find(indeks) == studenti.end())
            throw std::domain_error("Student nije nadjen");
        return *studenti.find(indeks)-&gt;second;
    }
    Laptop &amp;NadjiLaptop(int ev_broj) {
        if (laptopi.find(ev_broj) == laptopi.end())
            throw std::domain_error("Laptop nije nadjen");
        return *laptopi[ev_broj];
    }
    Laptop NadjiLaptop(int ev_broj) const {
        if (laptopi.find(ev_broj) == laptopi.end())
            throw std::domain_error("Laptop nije nadjen");
        return *laptopi.find(ev_broj)-&gt;second;
    }
    void IzlistajStudente() const {
        for (auto s : studenti) { 
            s.second-&gt;Ispisi(); std::cout &lt;&lt; std::endl;
        }
    }
    void IzlistajLaptope() const {
        for (auto l : laptopi) {
            l.second-&gt;Ispisi();
            if (l.second-&gt;DaLiJeZaduzen()) 
                std::cout &lt;&lt; "Zaduzio(la): " &lt;&lt; l.second-&gt;DajPokKodKogaJe()-&gt;DajImePrezime()
                &lt;&lt; " (" &lt;&lt; l.second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() &lt;&lt; ")" &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
        }
    }
    Administracija &amp;ZaduziLaptop(int indeks, int ev_broj) {
        Student &amp;s(NadjiStudenta(indeks));
        Laptop &amp;l(NadjiLaptop(ev_broj));
        l.Zaduzi(s);
        for (auto l1 : laptopi) {
            if (l1.first != ev_broj &amp;&amp; l1.second-&gt;DaLiJeZaduzen() &amp;&amp; l1.second-&gt;DajPokKodKogaJe()-&gt;DajIndeks() == indeks) {
                l.Razduzi(); 
                throw std::domain_error("Student je vec zaduzio laptop");
            }
        }
        return *this;
    }
    int NadjiSlobodniLaptop() const {
        auto l(laptopi.begin());
        for (; l != laptopi.end(); l++) 
            if (!(l-&gt;second-&gt;DaLiJeZaduzen())) break;
        if (l == laptopi.end()) 
            throw std::domain_error("Nema slobodnih laptopa");
        return l-&gt;second-&gt;DajEvidencijskiBroj();
    }
    Administracija &amp;Razduzi(int ev_broj) {
        Laptop &amp;l(NadjiLaptop(ev_broj));
        if (!l.DaLiJeZaduzen()) throw std::domain_error("Laptop nije zaduzen");
        l.Razduzi();
        return *this;
    }
    void PrikaziZaduzenja() const {
        bool ima_zaduzenih(false);
        for (auto l : laptopi) {
            if (l.second-&gt;DaLiJeZaduzen()) {
                auto s(l.second-&gt;DajPokKodKogaJe());
                std::cout &lt;&lt; "Student " &lt;&lt; s-&gt;DajImePrezime() &lt;&lt; " ("
                &lt;&lt; s-&gt;DajIndeks() &lt;&lt; ") zaduzio/la laptop broj " &lt;&lt; l.first &lt;&lt; std::endl;
                ima_zaduzenih = true;
            }
        }
        if (!ima_zaduzenih) std::cout &lt;&lt; "Nema zaduzenja" &lt;&lt; std::endl;
    }
};


int main ()
{
    Administracija a;
    a.RegistrirajNovogStudenta(17969, "1", "  Dino            Kopic", " Vitkovac 16   ", "062/813-845");
    a.RegistrirajNovogStudenta(11111, "2", "Emir Emirovic", "Prva", "1/1-1");
    a.RegistrirajNovogStudenta(22222, "3", "Samir Samirovic", "Druga", "2/2-2");
    a.IzlistajStudente();
    a.RegistrirajNoviLaptop(5, "HP EliteBook 2560p", "i5");
    a.IzlistajLaptope();
    a.ZaduziLaptop(17969, 5);
    Administracija b;
    b = a;
    b.RegistrirajNoviLaptop(6, "D", "P");
    b.ZaduziLaptop(22222, b.NadjiSlobodniLaptop());
    a.PrikaziZaduzenja(); b.PrikaziZaduzenja();

    
	return 0;
}
</pre>
</body>
</html>
