<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student3350.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student3350.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
class Student
{
    std::string ime_prezime,adresa,broj_telefona;
    int broj_indeksa;
    std::string godina_studija;
<a name="7"></a><font color="#0000FF"><a href="match228-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    std::vector&lt;std::string&gt;v {"1","2","3","1/B","2/B","3/B","1/M","2/M","3/M","1/D","2/D","3/D"};
</font>public:
    Student(int index,std::string gs,std::string i_p,std::string a,std::string tel) {
        int i;
        for( i=0; i&lt;v.size(); i++) {
            if(gs==v.at(i)) break;
        }
        if(i==v.size()) throw std::domain_error("Neispravni parametri");
        int pomocna(index),broj_cifara(0);
        while (pomocna!=0) {
            pomocna/=10;
            broj_cifara++;
        }
        if(broj_cifara!=5) throw std::domain_error("Neispravni parametri");
        std::string s1,s2,s3,s4,s5,dodatak;
        bool b1(true),b3(false),b5(false);
        for(int i(0); i&lt;tel.length(); i++) {
            if((tel[i]&gt;='0'&amp;&amp;tel[i]&lt;='9')&amp;&amp;b1) s1.push_back(tel[i]),b3=false,b5=false;
            if(tel[i]=='/') s2.push_back(tel[i]), b1=false, b3=true;
            if((tel[i]&gt;='0'&amp;&amp;tel[i]&lt;='9')&amp;&amp;b3) s3.push_back(tel[i]),b5=false;
            if(tel[i]=='-') s4.push_back('-'), b5=true,b3=false;
            if((tel[i]&gt;='0'&amp;&amp;tel[i]&lt;='9')&amp;&amp;b5)s5.push_back(tel[i]);
            if((tel[i]&lt;'0'||tel[i]&gt;'9')&amp;&amp;tel[i]!='/'&amp;&amp;tel[i]!='-') dodatak.push_back(tel.at(i));
        }
        if(dodatak.length()!=0||s1+s2+s3+s4+s5!=tel) throw std::domain_error("Neispravni parametri");
        if(s1.length()==0||s2.length()==0||s3.length()==0||s4.length()==0||s5.length()==0||s2.length()&gt;1||s4.length()&gt;1)
            throw std::domain_error("Neispravni parametri");
        broj_indeksa=index;
        godina_studija=gs;
        adresa=a;
        ime_prezime=i_p ;
        broj_telefona=tel;
    }
    int DajIndeks() const {
        return broj_indeksa;
    }
    std::string DajGodinuStudija() const {
        std::string gs(godina_studija);
        if(godina_studija==v.at(0)) gs=v.at(3);
        else if(godina_studija==v.at(1)) gs=v.at(4);
        else if(godina_studija==v.at(2)) gs=v.at(5);
        return gs;
    }
    std::string DajImePrezime() const {
        std::string novi,ime_prezime1(ime_prezime);
        bool t(false);
        for(int i(ime_prezime1.size()-1); i&gt;=0; i--) {
            if(ime_prezime1[i]==' ') ime_prezime1.erase(ime_prezime1.begin()+i);
            else break;
        }
        for(int i(0); i&lt;ime_prezime1.length(); i++) {
            if(ime_prezime1[i]!=' ') {
                novi.push_back(ime_prezime1[i]);
                t=true;
            } else {
                if(t) novi.push_back(' '), t=false;
            }
        }
        return novi;
    }
    std::string DajAdresu() const {
        std::string nova,adresa1(adresa);
        bool t(false);
        for(int i(adresa1.size()-1); i&gt;=0; i--) {
            if(adresa1[i]==' ') adresa1.erase(adresa1.begin()+i);
            else break;
        }
        for(int i(0); i&lt;adresa1.length(); i++) {
            if(adresa1[i]!=' ') {
                nova.push_back(adresa1[i]);
                t=true;
            } else {
                if(t) nova.push_back(' '), t=false;
            }
        }
        return nova;
    }
    std::string DajTelefon() const {
        return broj_telefona;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Broj indeksa: "&lt;&lt;this-&gt;DajIndeks() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Godina studija: "&lt;&lt;this-&gt;DajGodinuStudija() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt;this-&gt;DajImePrezime()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt;this-&gt;DajAdresu()&lt;&lt; std::endl;
        std::cout &lt;&lt; "Telefon: " &lt;&lt;this-&gt;DajTelefon()&lt;&lt; std::endl;
    }
    friend class Laptop;
    friend class Administracija;
};
<a name="3"></a><font color="#00FFFF"><a href="match228-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

class Laptop
{
    int ev_broj;
    std::string naziv;
    std::string karakteristike;
    std::shared_ptr&lt;Student&gt;kod_koga_je;
public:
    Laptop(int b,std::string n,std::string k) {
</font>        kod_koga_je = nullptr ;
        if(b&lt;0) throw std::domain_error("Neispravni parametri");
        ev_broj=b;
        naziv=n;
        karakteristike=k;
    }
    int DajEvidencijskiBroj() const {
<a name="5"></a><font color="#FF0000"><a href="match228-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        return ev_broj;
    }
    std::string DajNaziv() const {
        return naziv;
    }
    std::string DajKarakteristike() const {
        return karakteristike;
    }
    void Zaduzi(Student &amp;s) {
        if(kod_koga_je!=nullptr) throw std::domain_error("Laptop vec zaduzen");
</font>        *kod_koga_je=s;
    }
    void Razduzi() {
        if(kod_koga_je!=nullptr) kod_koga_je=nullptr;
    }
    bool DaLiJeZaduzen() const {
        if(kod_koga_je!=nullptr) return true;
        return false;
    }
    Student &amp;DajKodKogaJe() const {
        if(kod_koga_je==nullptr) throw std::domain_error("Laptop nije zaduzen");
        else
            return *kod_koga_je;
    }
    std::shared_ptr&lt;Student&gt;DajPokKodKogaJe() const {
<a name="4"></a><font color="#FF00FF"><a href="match228-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        if(kod_koga_je == nullptr) return nullptr;
        return kod_koga_je;
    }
    void Ispisi() const {
        std::cout &lt;&lt; "Evidencijski broj: "&lt;&lt;ev_broj &lt;&lt; std::endl;
        std::cout &lt;&lt; "Naziv: "&lt;&lt;naziv &lt;&lt; std::endl;
</font><a name="1"></a><font color="#00FF00"><a href="match228-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        std::cout &lt;&lt; "Karakteristike: "&lt;&lt;karakteristike &lt;&lt; std::endl;
    }

};
class Administracija
{
    std::map&lt; int, std::shared_ptr&lt;Student&gt;&gt;studenti;
    std::map&lt; int, std::shared_ptr&lt;Laptop&gt;&gt;laptopi;
</font>public:
    Administracija() {}
    Administracija(const Administracija &amp;a) {
        for(auto it(a.studenti.begin());it!=a.studenti.end();it++) {
           auto s=std::make_shared&lt;Student&gt;(*(it-&gt;second));
           studenti.insert({it-&gt;first,s});
        }
        for(auto it(a.laptopi.begin());it!=a.laptopi.end();it++) {
           auto l=std::make_shared&lt;Laptop&gt;(*(it-&gt;second));
           laptopi.insert({it-&gt;first,l});
        }
        
    }
    Administracija(Administracija&amp;&amp;a) {
        studenti=a.studenti;
        laptopi=a.laptopi;
    }
    Administracija &amp;operator = (const Administracija &amp;a) {
           for(auto it(a.studenti.begin());it!=a.studenti.end();it++) {
           auto s=std::make_shared&lt;Student&gt;(*(it-&gt;second));
           studenti.insert({it-&gt;first,s});
        }
        for(auto it(a.laptopi.begin());it!=a.laptopi.end();it++) {
           auto l=std::make_shared&lt;Laptop&gt;(*(it-&gt;second));
           laptopi.insert({it-&gt;first,l});
        }
    }
<a name="2"></a><font color="#0000FF"><a href="match228-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Administracija &amp;operator = (Administracija &amp;&amp;a);
    void RegistrirajNovogStudenta(int b_i,std::string g_s,std::string i_p,std::string a_s,std::string b_t ) {
        for(auto x : studenti) {
            if(x.first==b_i) throw std::domain_error("Student s tim indeksom vec postoji");
</font>        }
        try {
            auto s=std::make_shared&lt;Student&gt;(b_i,g_s,i_p,a_s,b_t);
            studenti.insert({b_i,s});
        } catch(...) {
            throw;
        }
    }
<a name="6"></a><font color="#00FF00"><a href="match228-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    void RegistrirajNoviLaptop(int e_b,std::string n_l,std::string k_l) {
        for(auto x : laptopi) if(x.first==e_b) throw std::domain_error("Laptop sa tim evidencijskom brojem vec postoji");
</font>        auto l=std::make_shared&lt;Laptop&gt;(e_b,n_l,k_l);
        laptopi.insert({e_b,l});
    }
    Student &amp;NadjiStudenta(int index) const {
        for(auto x: studenti)
            if(x.first==index) return *x.second;
        throw std::domain_error("Student nije nadjen");
    }
    Laptop &amp;NadjiLaptop(int ev_broj) {
<a name="0"></a><font color="#FF0000"><a href="match228-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

        for(auto x : laptopi)
            if(x.first==ev_broj) return *x.second;
        throw std::domain_error("Laptop nije nadjen");
    }
    void IzlistajStudente() const {
        for(auto x : studenti) {
            (x.second)-&gt;Ispisi();
            std::cout  &lt;&lt; std::endl;
        }
    }
    void IzlistajLaptope() const {

        for(auto x : laptopi) {
            (x.second)-&gt;Ispisi();
            if(x.second-&gt;DaLiJeZaduzen())
                std::cout &lt;&lt; "Zaduzio(la): "&lt;&lt;(x.second-&gt;DajKodKogaJe()).DajImePrezime()&lt;&lt;" ("&lt;&lt;(x.second-&gt;DajKodKogaJe().DajIndeks())&lt;&lt;")"&lt;&lt;std::endl;;
            std::cout  &lt;&lt; std::endl;
        }
    }
    void ZaduziLaptop(int index,int e_broj) {
        auto it(studenti.find(index));
</font>        if(it==studenti.end()) throw std::domain_error("Student nije nadjen");
        auto it1(laptopi.find(e_broj));
        if(it1==laptopi.end()) throw std::domain_error("Laptop nije nadjen");
        if((it1-&gt;second)-&gt;DajPokKodKogaJe()!=nullptr) throw std::domain_error("Laptop vec zaduzen");
        for(auto x: laptopi) {
            if((x.second)-&gt;DajPokKodKogaJe()==it-&gt;second)
                throw std::domain_error("Student je vec zaduzio laptop");
        }
        ((it1-&gt;second)-&gt;Zaduzi(*it-&gt;second));
    }
    int NadjiSlobodneLaptope() const {
        for(auto x : laptopi)
            if((x.second)-&gt;DajPokKodKogaJe()==nullptr) return x.first;
        throw std::domain_error("Laptop nije nadjen");
    }
    void RazduziLaptop(int e_broj) {
        bool kraj(false);
        auto it(laptopi.find(e_broj));
        if(it==laptopi.end()) throw std::domain_error("Laptop nije nadjen");
        for(auto x : laptopi) {
            if((x.first)==e_broj&amp;&amp;(x.second)-&gt;DaLiJeZaduzen())  {
                x.second-&gt;Razduzi();
                kraj=true;
            }
        }
        if(!kraj) throw std::domain_error("Laptop nije zaduzen");
    }
    void PrikaziZaduzenja() const {
        int brojac(0);
        for(auto x : laptopi)
            if((x.second)-&gt;DajPokKodKogaJe()!=nullptr) brojac++;
        if(brojac!=0) {
            for(auto x: laptopi)
                if((x.second)-&gt;DajPokKodKogaJe()!=nullptr) {
                    std::cout &lt;&lt; "Student "&lt;&lt;(x.second)-&gt;DajPokKodKogaJe()-&gt;ime_prezime&lt;&lt;" ("&lt;&lt;(x.second)-&gt;DajPokKodKogaJe()-&gt;broj_indeksa&lt;&lt;")"
                              &lt;&lt;" zaduzio/la laptop broj "&lt;&lt;x.first &lt;&lt;std::endl;
                }
        }
        else std::cout &lt;&lt; "Nema zaduzenja" &lt;&lt; std::endl;
    }
};
int main ()
{
    try {
        int izbor;
    do {
        Administracija a;
        std::cout &lt;&lt; "Odaberite jednu od sljedecih opcija: " &lt;&lt; std::endl;
        std::cout &lt;&lt; "1 - Registriraj novog studenta\n2 - Registriraj novi laptop\n3 - Ispisi studente\n4 - Ispisi laptope" &lt;&lt; std::endl;
        std::cout &lt;&lt; "5 - Zaduzi laptop\n6 - Razduzi laptop\n7 - PrikaziZaduzenja" &lt;&lt; std::endl;
        std::cin &gt;&gt; izbor;
     if(izbor==1) {
         std::string i_p,b_t,a_s,g_s;
         int b_i;
      std::cout &lt;&lt; "Unesite broj indeksa: " &lt;&lt; std::endl;   
      std::cin &gt;&gt; b_i;
      std::cout &lt;&lt; "Unesite ime i prezime: " &lt;&lt; std::endl;
      std::cin.ignore(1000,'\n');
      std::getline(std::cin,i_p);
      std::cout &lt;&lt; "Unesite godinu studija: "&lt;&lt; std::endl;
      std::getline(std::cin,g_s);
      std::cout &lt;&lt; "Unesite adresu stanovanja: " &lt;&lt; std::endl;
      std::getline(std::cin,a_s);
      std::cout &lt;&lt; "Unesite broj telefona: " &lt;&lt; std::endl;
      std::getline(std::cin,i_p);
      a.RegistrirajNovogStudenta(b_i,g_s,i_p,a_s,b_t);
     }
     if(izbor ==2) {
         int ev_broj;
         std::string naziv,karakteristike;
         std::cout &lt;&lt; "Unesite evidencijsi broj laptopa: " &lt;&lt; std::endl;
         std::cin &gt;&gt; ev_broj;
         std::cin.ignore(1000,'\n');
         std::cout &lt;&lt; "Unesite naziv laptopa: " &lt;&lt; std::endl;
         std::getline(std::cin,naziv);
         std::cout &lt;&lt; "Unesite karakteristike laptopa: " &lt;&lt; std::endl;
         std::getline(std::cin,karakteristike);
         a.RegistrirajNoviLaptop(ev_broj,naziv,karakteristike);
     }
     if(izbor==3) a.IzlistajStudente();
     if(izbor==4) a.IzlistajLaptope();
     if(izbor==5) {
         std::cout &lt;&lt; "Unesite broj indeksa studenta koji zeli zaduziti laptop: " &lt;&lt; std::endl;
         int i,e_b;
         std::cin &gt;&gt; i;
         std::cout &lt;&lt; "Unesite evidencijsi broj laptopa koji ce student zaduziti: " &lt;&lt; std::endl;
         std::cin &gt;&gt; e_b;
         a.ZaduziLaptop(i,e_b);
     }
     if(izbor==6) {
         std::cout &lt;&lt; "Unesite evidencijsi broj laptopa koji se treba razduziti: " &lt;&lt; std::endl;
         int e_b;
         std::cin &gt;&gt; e_b;
         a.RazduziLaptop(e_b);
     }
     if(izbor==7) a.PrikaziZaduzenja();
    }
    while (izbor!=0);  
    } catch(std::domain_error &amp;i) {
        std::cout &lt;&lt; i.what() &lt;&lt; std::endl;
    }
    return 0;
}
</pre>
</body>
</html>
