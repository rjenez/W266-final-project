<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student4261.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student4261.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 2

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;

class Student {
    int indeks;
    std::string godina_studija;
    std::string imeiprezime;
    std::string adresa;
    std::string br_telefona;
    
    static bool NeispravanIndeks(int ind) {
        return (ind&lt;9999 || ind&gt;99999);
    }
    
    static bool NeispravnaGodina(std::string god) {
        const char* niz[11]{ "1", "2", "3", "1/B", "2/B", "3/B", "1/M", "2/M", "1/D", "2/D", "3/D" };
        for (int i=0; i&lt;11; i++) if (niz[i]==god) return false;
        return true;
    }
    
    static bool Broj (char znak) { return znak&gt;='0' &amp;&amp; znak&lt;='9'; } 
    
    static bool NeispravanBroj(std::string broj) {
        if (broj.length()&lt;5) return true;
        std::string::iterator it(broj.begin());
        
        if (!Broj(*it)) return true;
        while (Broj(*it)) it++;
        if (it==broj.end()) return true;
        if (*it++!='/') return true;
        if (it==broj.end()) return true;
        if (!Broj(*it)) return true;
        
        while (Broj(*it)) it++;
        if (it==broj.end()) return false;
        if (*it++!='-') return true;
        if (it==broj.end()) return true;
        if (!Broj(*it)) return true;
        
        while (Broj(*it)) it++;
        if (it==broj.end()) return false;
        return true;
    }
    
    
    void IzbaciRazmake (std::string &amp;s) {
        std::string pomocni;
        bool razmak(true);
        
        for (int i=0; i&lt;s.length(); i++) {
            if (s.at(i)==' ') razmak=true;
            else if (razmak) {
                
                do {
                    pomocni.push_back(s.at(i));
                    i++;
                    if (i==s.length()) { s=pomocni; return; }
                } while (s.at(i)!=' ');
                pomocni.push_back(s.at(i));
                i--;
                razmak=false;
            }
        }
        int vel(pomocni.length());
        if (vel) {
            do {
                std::string::iterator it(pomocni.end()-1);
                if (*it!=' ') { s=pomocni; return; }
                pomocni.resize(vel-1);
                vel--;
            } while (vel);
        }
        s=pomocni;
    }
    
    
  public:
    Student(int indeks, std::string godina_studija, std::string imeiprezime, std::string adresa, std::string br_telefona) {
        if (NeispravanIndeks(indeks) || NeispravnaGodina(godina_studija) || NeispravanBroj(br_telefona)) throw std::domain_error("Neispravni parametri");
        IzbaciRazmake(imeiprezime);
        IzbaciRazmake(adresa);
        if (imeiprezime.length()==0 || adresa.length()==0) throw std::domain_error("Neispravni parametri");
        
        Student::indeks=indeks;
        Student::godina_studija=godina_studija;
        Student::imeiprezime=imeiprezime;
        Student::adresa=adresa;
        Student::br_telefona=br_telefona;
    }
    
    int DajIndeks() const { return indeks; }
    std::string DajGodinuStudija() const {
        if (godina_studija=="1") return "1/B";
        else if (godina_studija=="2") return "2/B";
        else if (godina_studija=="3") return "3/B";
        return godina_studija; 
    } 
<a name="2"></a><font color="#0000FF"><a href="match878-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    std::string DajImePrezime() const { return imeiprezime; }
    std::string DajAdresu() const { return adresa; }
    std::string DajTelefon() const { return br_telefona; }
    
    void Ispisi() const {
        std::cout &lt;&lt; "Broj indeksa: " &lt;&lt; DajIndeks() &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Godina studija: " &lt;&lt; DajGodinuStudija() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Ime i prezime: " &lt;&lt; DajImePrezime() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Adresa: " &lt;&lt; DajAdresu() &lt;&lt; std::endl;
        std::cout &lt;&lt; "Telefon: " &lt;&lt; DajTelefon() &lt;&lt; std::endl;
    }
};

class Laptop {
    int ev_broj;
    std::string naziv;
    std::string karakteristike;
    Student* kod_koga_je;
  public:
    Laptop (int ev_broj, std::string naziv, std::string karakteristike) {
        if (ev_broj&lt;0) throw std::domain_error("Neispravni parametri");
        Laptop::ev_broj=ev_broj;
        Laptop::naziv=naziv;
        Laptop::karakteristike=karakteristike;
        kod_koga_je=nullptr;
    }
    
    ~Laptop() { kod_koga_je=nullptr; }
    
    int DajEvidencijskiBroj() const { return ev_broj; }
    std::string DajNaziv() const { return naziv; }
    std::string DajKarakteristike() const { return karakteristike; }
    
    void Zaduzi(Student* s) {
        if (kod_koga_je) throw std::domain_error("Laptop vec zaduzen");
        kod_koga_je=s;
    }
    
    void Razduzi() {
        kod_koga_je=nullptr;
    }
    
    bool DaLiJeZaduzen() const { return !(kod_koga_je==nullptr); }
    
    Student &amp;DajKodKogaJe() const {
<a name="3"></a><font color="#00FFFF"><a href="match878-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if (!kod_koga_je) throw std::domain_error("Laptop nije zaduzen");
        return *kod_koga_je; 
    }
    Student* DajPokKodKogaJe() const { return kod_koga_je; }
    
    void Ispisi() const {
        std::cout &lt;&lt; "Evidencijski broj: " &lt;&lt; DajEvidencijskiBroj() &lt;&lt; std::endl;
</font>        std::cout &lt;&lt; "Naziv: " &lt;&lt; DajNaziv() &lt;&lt; std::endl;
<a name="1"></a><font color="#00FF00"><a href="match878-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        std::cout &lt;&lt; "Karakteristike: " &lt;&lt; DajKarakteristike() &lt;&lt; std::endl;
    }
};


class Administracija {
    std::map&lt;int, std::shared_ptr&lt;Student&gt;&gt; studenti;
    std::map&lt;int, std::shared_ptr&lt;Laptop&gt;&gt; laptopi;
</font>  public:
    Administracija() {}
    ~Administracija() {
        studenti.clear();
        laptopi.clear();
    }
    
    Administracija(const Administracija &amp;adm) {
        for (auto it=adm.studenti.begin(); it!=adm.studenti.end(); it++) {
            studenti.insert({it-&gt;first, std::make_shared&lt;Student&gt;(*(it-&gt;second))});
        }
        for (auto it=adm.laptopi.begin(); it!=adm.laptopi.end(); it++) {
            laptopi.insert({it-&gt;first, std::make_shared&lt;Laptop&gt;(*(it-&gt;second))});
        }
    }
    Administracija(Administracija &amp;&amp;adm) {
        std::swap(studenti, adm.studenti);
        std::swap(laptopi, adm.laptopi);
    }
    
    Administracija &amp;operator =(const Administracija &amp;adm) {
        if (this!=&amp;adm) {
            
            studenti.clear();
            laptopi.clear();
            
            for (auto it=adm.studenti.begin(); it!=adm.studenti.end(); it++) {
                studenti.insert({it-&gt;first, std::make_shared&lt;Student&gt;(*(it-&gt;second))});
            }
            for (auto it=adm.laptopi.begin(); it!=adm.laptopi.end(); it++) {
                laptopi.insert({it-&gt;first, std::make_shared&lt;Laptop&gt;(*(it-&gt;second))});
            }
        }
        return *this;
    }
    
    Administracija &amp;operator =(Administracija &amp;&amp;adm) {
        if (this!=&amp;adm) {
            
            studenti.clear();
            laptopi.clear();
            
            std::swap(studenti, adm.studenti);
            std::swap(laptopi, adm.laptopi);
        }
        return *this;
    }
    
<a name="0"></a><font color="#FF0000"><a href="match878-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    void RegistrirajNovogStudenta (int indeks, std::string godina_studija, std::string imeiprezime, std::string adresa, std::string br_telefona) {
        for (auto it=studenti.begin(); it!=studenti.end(); it++) {
            if (indeks==(*((*it).second)).DajIndeks()) throw std::domain_error("Student s tim indeksom vec postoji");
</font>        }
        std::shared_ptr&lt;Student&gt; p(std::make_shared&lt;Student&gt;(indeks, godina_studija, imeiprezime, adresa, br_telefona));
        studenti.insert({indeks, p});
        
    }
    
<a name="4"></a><font color="#FF00FF"><a href="match878-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    void RegistrirajNoviLaptop (int ev_broj, std::string naziv, std::string karakteristike) {
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if (ev_broj==(*((*it).second)).DajEvidencijskiBroj()) throw std::domain_error("Laptop s tim evidencijskim brojem vec postoji");
</font>        }
        std::shared_ptr&lt;Laptop&gt; p(std::make_shared&lt;Laptop&gt;(ev_broj, naziv, karakteristike));
        laptopi.insert({ev_broj, p});
    }
    
    Student &amp;NadjiStudenta(int indeks) {
        for (auto it=studenti.begin(); it!=studenti.end(); it++) {
            if (indeks==(*((*it).second)).DajIndeks()) return *((*it).second);
        }
        throw std::domain_error("Student nije nadjen");
    }
    
    Student NadjiStudenta (int indeks) const {
        for (auto it=studenti.begin(); it!=studenti.end(); it++) {
            if (indeks==(*((*it).second)).DajIndeks()) return *((*it).second);
        }
        throw std::domain_error("Student nije nadjen");
    }
    
    Laptop &amp;NadjiLaptop(int ev_broj) {
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if (ev_broj==(*((*it).second)).DajEvidencijskiBroj()) return *((*it).second);
        }
        throw std::domain_error("Laptop nije nadjen");
    }
    
    Laptop NadjiLaptop (int ev_broj) const {
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if (ev_broj==(*((*it).second)).DajEvidencijskiBroj()) return *((*it).second);
        }
        throw std::domain_error("Laptop nije nadjen");
    }
    
    void IzlistajStudente() const {
        for (auto it=studenti.begin(); it!=studenti.end(); it++) {
<a name="5"></a><font color="#FF0000"><a href="match878-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            (*((*it).second)).Ispisi();
            std::cout &lt;&lt; std::endl;
        }
    }
    
    void IzlistajLaptope() const {
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
</font>            (*((*it).second)).Ispisi();
            if ((*((*it).second)).DaLiJeZaduzen()) std::cout &lt;&lt; "Zaduzio(la): " &lt;&lt; (*((*it).second)).DajKodKogaJe().DajImePrezime() &lt;&lt; " (" &lt;&lt; (*((*it).second)).DajKodKogaJe().DajIndeks() &lt;&lt; ")" &lt;&lt; std::endl;
            std::cout &lt;&lt; std::endl;
        }
    }
    
    void ZaduziLaptop (int indeks, int ev_broj) {
        
        Student &amp;student(NadjiStudenta(indeks));
        Laptop &amp;laptop(NadjiLaptop(ev_broj));
        
        if (laptop.DaLiJeZaduzen()) throw std::domain_error("Laptop vec zaduzen");
        
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if ((*((*it).second)).DaLiJeZaduzen()) if ((*((*it).second)).DajKodKogaJe().DajIndeks()==indeks) throw std::domain_error("Student je vec zaduzio laptop");
        }
        
        laptop.Zaduzi(&amp;student);
    }
    
    int NadjiSlobodniLaptop() {
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if (!(*((*it).second)).DaLiJeZaduzen()) {
                return (*((*it).second)).DajEvidencijskiBroj();
            }
        }
        throw std::domain_error("Nema slobodnih laptopa");
    }
    
    void RazduziLaptop(int ev_broj) {
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if (ev_broj==(*((*it).second)).DajEvidencijskiBroj()) {
                if (!((*((*it).second)).DaLiJeZaduzen())) throw std::domain_error("Laptop nije zaduzen"); 
                (*((*it).second)).Razduzi();
                return;
            }
        }
        throw std::domain_error("Laptop nije nadjen");
    }
    
    void PrikaziZaduzenja() const {
        bool ima(false);
        for (auto it=laptopi.begin(); it!=laptopi.end(); it++) {
            if ((*((*it).second)).DaLiJeZaduzen()) {
                std::cout &lt;&lt; "Student " &lt;&lt; (*((*it).second)).DajKodKogaJe().DajImePrezime() &lt;&lt; " (" &lt;&lt; (*((*it).second)).DajKodKogaJe().DajIndeks() &lt;&lt; ") zaduzio/la laptop broj " &lt;&lt; (*((*it).second)).DajEvidencijskiBroj() &lt;&lt; std::endl; 
                ima=true;
            }
        }
        if (!ima) std::cout &lt;&lt; "Nema zaduzenja";
    }
    
};




int main ()
{
    Student s1(12345, "1/B", "Neko Nekic", "Bascarsija 1", "1/1-1");
    Student s2(12346, "1/M", "    Neko  Nekic    ", "Bascarsija 2", "1/1-1");
    Student s3(12347, "1/D", "  Neko   Nekic   ", "Bascarsija 3", "1/1-1");
    Student s4(12348, "1", "Neko   Nekic", "Bascarsija 4", "1/1-1");
    
    int i{12349};
    std::string st1{"3"}, st2{"    Neko Nekic    "}, st3{"Bascarsija 5"}, st4{"1/1-1"};
    Student s5(i, st1, st2, st3, st4);
    
    std::cout &lt;&lt; s1.DajIndeks() &lt;&lt; " " &lt;&lt; s1.DajImePrezime() &lt;&lt; " " &lt;&lt; s1.DajGodinuStudija() &lt;&lt; " " &lt;&lt; s1.DajAdresu() &lt;&lt; " " &lt;&lt; s1.DajTelefon() &lt;&lt; std::endl;
    std::cout &lt;&lt; s2.DajIndeks() &lt;&lt; " " &lt;&lt; s2.DajImePrezime() &lt;&lt; " " &lt;&lt; s2.DajGodinuStudija() &lt;&lt; " " &lt;&lt; s2.DajAdresu() &lt;&lt; " " &lt;&lt; s2.DajTelefon() &lt;&lt; std::endl;
    std::cout &lt;&lt; s3.DajIndeks() &lt;&lt; " " &lt;&lt; s3.DajImePrezime() &lt;&lt; " " &lt;&lt; s3.DajGodinuStudija() &lt;&lt; " " &lt;&lt; s3.DajAdresu() &lt;&lt; " " &lt;&lt; s3.DajTelefon() &lt;&lt; std::endl;
    std::cout &lt;&lt; s4.DajIndeks() &lt;&lt; " " &lt;&lt; s4.DajImePrezime() &lt;&lt; " " &lt;&lt; s4.DajGodinuStudija() &lt;&lt; " " &lt;&lt; s4.DajAdresu() &lt;&lt; " " &lt;&lt; s4.DajTelefon() &lt;&lt; std::endl;
    std::cout &lt;&lt; s5.DajIndeks() &lt;&lt; " " &lt;&lt; s5.DajImePrezime() &lt;&lt; " " &lt;&lt; s5.DajGodinuStudija() &lt;&lt; " " &lt;&lt; s5.DajAdresu() &lt;&lt; " " &lt;&lt; s5.DajTelefon() &lt;&lt; std::endl;
	return 0;
}</pre>
</body>
</html>
