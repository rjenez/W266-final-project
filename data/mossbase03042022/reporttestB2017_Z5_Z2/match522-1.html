<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student5562.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student5413.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 5, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

using namespace std;

class Student {
    int brIndeksa;
    string godinaStudija, imePrezime, Adresa, brTelefona;
    bool ValidirajIndeks(int broj_indeksa) {
    bool validan = true;
    int brojac = 0;
    while(broj_indeksa &gt; 0) {
        broj_indeksa /= 10;
        brojac++;
    }
    if(brojac != 5) validan = false;
    return validan;
}
    bool ValidirajBroj(string broj_telefona) {
    bool validanBroj = true;
    int brojac1 = 0, brojac2 = 0, brojac3 = 0;
    
    if(broj_telefona.size() == 0) validanBroj = false;
    
    for(int i = 0; i &lt; broj_telefona.length(); i++) 
    {
        if((int)broj_telefona[i] &gt;= 49 &amp;&amp; (int)broj_telefona[i] &lt;= 57) // 49 &gt;= 49 (T) &amp;&amp; 49 &lt;= 57 (T)
        {
            brojac1++;
        } else if(broj_telefona[i]  == '/') {
            if(brojac1 == 0)
                validanBroj = false;
            brojac1 = 0;
            brojac2++;
        } else if(broj_telefona[i] == '-') {
            if(brojac2 &gt; 1 || brojac1 == 0)
                validanBroj = false;
            brojac1 = 0;
            brojac3++;
        }
        
        
        if(brojac3 &gt; 1) validanBroj = false;
    }
    if(brojac1 == 0 || brojac3 == 0) validanBroj = false;
    return validanBroj;
}
<a name="6"></a><font color="#00FF00"><a href="match522-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    string IgnorisiRazmake(string s) {
        for(int i = 0; i &lt; s.length(); i++) {
            if(s[i] == ' ' &amp;&amp; s[i + 1] == ' ') {
</font>                s.erase(i, 1);
                i--;
            }
        }
        if(s[0] == ' ')
            s.erase(0, 1);
        if(s[s.length() - 1] == ' ')
            s.erase(s.length() - 1, 1);
    
        return s;
    }
    bool ValidirajGodinu(string g) {
    bool validnaGodina = false;
    
    if(g == "1" || g == "2" || g == "3" || g == "1/B" || g == "2/B" || g == "3/B" || g == "1/M" || g == "2/M" || g == "1/D" || g == "2/D" || g == "3/D")
        validnaGodina = true;
    
    return validnaGodina;
    }
    string VratiPunuGodinu(string g) {
        if(g == "1" || g == "2" || g == "3")
            g += "/B";
        return g;
    }
public:
    Student(int broj_indeksa, string godina_studija, string ime_prezime, string adresa, string broj_telefona) {
        if(ValidirajIndeks(broj_indeksa) == false || ValidirajGodinu(godina_studija) == false || ValidirajBroj(broj_telefona) == false)
            throw domain_error("Neispravni parametri");
        
        brIndeksa = broj_indeksa;
        godinaStudija = VratiPunuGodinu(godina_studija);
        imePrezime = IgnorisiRazmake(ime_prezime);
        Adresa = IgnorisiRazmake(adresa);
        brTelefona = broj_telefona;
    }
<a name="5"></a><font color="#FF0000"><a href="match522-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    int DajIndeks() const { return brIndeksa; }
    string DajGodinuStudija() const { return godinaStudija; }
    string DajImePrezime() const { return imePrezime; }
    string DajAdresu() const { return Adresa; }
    string DajTelefon() const { return brTelefona; }
    void Ispisi() const {
</font>        cout &lt;&lt; "Broj indeksa: " &lt;&lt; brIndeksa &lt;&lt; "\nGodina studija: " &lt;&lt; godinaStudija &lt;&lt; "\nIme i prezime: " &lt;&lt; imePrezime &lt;&lt; "\nAdresa: " &lt;&lt; Adresa &lt;&lt; "\nTelefon: " &lt;&lt; brTelefona;
    }
};

class Laptop {
    int ev_broj;
    string naziv, karakteristike;
    Student *kod_koga_je;
<a name="0"></a><font color="#FF0000"><a href="match522-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

public:
    Laptop(int eb, string n, string k) {
        if(eb &lt; 0) throw domain_error("Neispravni parametri");
        
        ev_broj = eb;
        naziv = n;
        karakteristike = k;
        kod_koga_je = nullptr;
    }
    int DajEvidencijskiBroj() const { return ev_broj; }
    string DajNaziv() const { return naziv; }
    string DajKarakteristike() const { return karakteristike; }
    void Zaduzi(Student &amp;student) { 
        if(DaLiJeZaduzen()) throw domain_error("Laptop vec zaduzen");
</font>        kod_koga_je = &amp;student; }
    void Razduzi() { kod_koga_je = nullptr; }
    bool DaLiJeZaduzen() { return kod_koga_je; }
    Student &amp;DajKodKogaJe() { 
        if(DaLiJeZaduzen()) return *kod_koga_je;
        else throw domain_error("Laptop nije zaduzen");
    }
    Student *DajPokKodKogaJe() { return kod_koga_je; }
    void Ispisi() const {
<a name="2"></a><font color="#0000FF"><a href="match522-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        cout &lt;&lt; "Evidencijski broj: " &lt;&lt; ev_broj &lt;&lt; "\nNaziv: " &lt;&lt; naziv &lt;&lt; "\nKarakteristike: " &lt;&lt; karakteristike;
    }
};

class Administracija { // treba uraditi konstruktor kopije(oba), operator dodjele(oba)
    map&lt;int, shared_ptr&lt;Student&gt;&gt; studenti;
    map&lt;int, shared_ptr&lt;Laptop&gt;&gt; laptopi;
public:
</font>    Administracija() {}
    Administracija(const Administracija &amp;a) : studenti(a.studenti), laptopi(a.laptopi)
    {
        auto it = a.studenti.begin();
        for(auto s: studenti)
        {
<a name="3"></a><font color="#00FFFF"><a href="match522-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            s.second = make_shared&lt;Student&gt;(it-&gt;second-&gt;DajIndeks(), it-&gt;second-&gt;DajGodinuStudija(), it-&gt;second-&gt;DajImePrezime(), it-&gt;second-&gt;DajAdresu(), it-&gt;second-&gt;DajTelefon());
</font>            it++;
        }
        auto it1 = a.laptopi.begin();
        for(auto l: laptopi)
        {
            l.second = make_shared&lt;Laptop&gt;(it1-&gt;second-&gt;DajEvidencijskiBroj(), it1-&gt;second-&gt;DajNaziv(), it1-&gt;second-&gt;DajKarakteristike());
            it1++;
        }
    }
    Administracija(Administracija &amp;&amp;a): studenti(a.studenti), laptopi(a.laptopi)
    {
        for(auto s: studenti) s.second = nullptr;
        for(auto l: laptopi) l.second = nullptr;
    }
    Administracija &amp;operator =(const Administracija &amp;a);
    Administracija &amp;operator =(Administracija &amp;&amp;a);
    void RegistrirajNovogStudenta(int broj_indeksa, string godina_studija, string ime_prezime, string adresa, string broj_telefona);
    void RegistrirajNoviLaptop(int eb, string n, string k);
    Student &amp;NadjiStudenta(int broj_indeksa);
    Student NadjiStudenta(int broj_indeksa) const;
    Laptop &amp;NadjiLaptop(int ev_broj);
    Laptop NadjiLaptop(int ev_broj) const;
    void IzlistajStudente() const;
    void IzlistajLaptope() const;
    void ZaduziLaptop(int broj_indeksa, int ev_broj);
    int NadjiSlobodniLaptop();
    void RazduziLaptop(int ev_broj);
    void PrikaziZaduzenja() const;
};

Administracija &amp;Administracija::operator =(const Administracija &amp;a)
{
    if(&amp;a != this)
    {
        studenti = a.studenti;
        laptopi = a.laptopi;
        
        auto it = a.studenti.begin();
        for(auto s: studenti)
        {
<a name="4"></a><font color="#FF00FF"><a href="match522-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            s.second = make_shared&lt;Student&gt;(it-&gt;second-&gt;DajIndeks(), it-&gt;second-&gt;DajGodinuStudija(), it-&gt;second-&gt;DajImePrezime(), it-&gt;second-&gt;DajAdresu(), it-&gt;second-&gt;DajTelefon());
</font>            it++;
        }
        auto it1 = a.laptopi.begin();
        for(auto l: laptopi)
        {
            l.second = make_shared&lt;Laptop&gt;(it1-&gt;second-&gt;DajEvidencijskiBroj(), it1-&gt;second-&gt;DajNaziv(), it1-&gt;second-&gt;DajKarakteristike());
            it1++;
        }
    }
    
    return *this;
}

Administracija &amp;Administracija::operator =(Administracija &amp;&amp;a)
{
    if(&amp;a != this)
    {
        studenti = a.studenti;
        laptopi = a.laptopi;
        for(auto s: a.studenti) s.second = nullptr;
        for(auto l: a.laptopi) l.second = nullptr;
    }
    
    return *this;
}

void Administracija::RegistrirajNovogStudenta(int broj_indeksa, string godina_studija, string ime_prezime, string adresa, string broj_telefona)
{
    auto it = studenti.find(broj_indeksa);
    if(it != studenti.end())
        throw domain_error("Student s tim indeksom vec postoji");
    
    shared_ptr&lt;Student&gt; student = make_shared&lt;Student&gt;(broj_indeksa, godina_studija, ime_prezime, adresa, broj_telefona);
    studenti.insert(pair&lt;int, shared_ptr&lt;Student&gt;&gt;(broj_indeksa, student));
}

void Administracija::RegistrirajNoviLaptop(int eb, string n, string k)
{
    auto it = laptopi.find(eb);
    if(it != laptopi.end())
        throw domain_error("Laptop s tim evidencijskim brojem vec postoji");
    
    shared_ptr&lt;Laptop&gt; laptop = make_shared&lt;Laptop&gt;(eb, n, k);
    laptopi.insert(pair&lt;int, shared_ptr&lt;Laptop&gt;&gt;(eb, laptop));
}

Student &amp;Administracija::NadjiStudenta(int broj_indeksa) 
{
    auto it = studenti.find(broj_indeksa);
    if(it != studenti.end()) return *it-&gt;second;
    else throw domain_error("Student nije nadjen");
}

Student Administracija::NadjiStudenta(int broj_indeksa) const
{
    auto it = studenti.find(broj_indeksa);
    if(it != studenti.end()) return *it-&gt;second;
    else throw domain_error("Student nije nadjen");
}

Laptop &amp;Administracija::NadjiLaptop(int ev_broj)
{
    auto it = laptopi.find(ev_broj);
    if(it != laptopi.end()) return *it-&gt;second;
    else throw domain_error("Laptop nije nadjen");
}

Laptop Administracija::NadjiLaptop(int ev_broj) const
{
    auto it = laptopi.find(ev_broj);
    if(it != laptopi.end()) return *it-&gt;second;
    else throw domain_error("Laptop nije nadjen");
}

void Administracija::IzlistajStudente() const
{
    auto it = studenti.begin();
    while(it != studenti.end())
    {
        it-&gt;second-&gt;Ispisi();
        cout &lt;&lt; endl &lt;&lt; endl;
        it++;
    }
}

void Administracija::IzlistajLaptope() const
{
    auto it = laptopi.begin();
    while(it != laptopi.end())
    {
        it-&gt;second-&gt;Ispisi();
        if(it-&gt;second-&gt;DaLiJeZaduzen())
            cout &lt;&lt; "\nZaduzio(la): " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe().DajImePrezime() &lt;&lt; " (" &lt;&lt; it-&gt;second-&gt;DajKodKogaJe().DajIndeks() &lt;&lt; ")";
        cout &lt;&lt; endl &lt;&lt; endl;
        it++;
    }
}

void Administracija::ZaduziLaptop(int broj_indeksa, int ev_broj)
{
    auto itS = studenti.find(broj_indeksa);
    auto itL = laptopi.find(ev_broj);
    
    if(itS == studenti.end()) 
        throw domain_error("Student nije nadjen");
        
    if(itL == laptopi.end())
        throw domain_error("Laptop nije nadjen");
    else
    {
        if(itL-&gt;second-&gt;DaLiJeZaduzen())
            throw domain_error("Laptop vec zaduzen");
    }
    
    auto it = laptopi.begin();
    while(it != laptopi.end())
    {
        if(it-&gt;second-&gt;DaLiJeZaduzen())
        {
            if(it-&gt;second-&gt;DajKodKogaJe().DajIndeks() == broj_indeksa)
                throw domain_error("Student je vec zaduzio laptop");
        }
        it++;
    }
    
    itL-&gt;second-&gt;Zaduzi(NadjiStudenta(broj_indeksa));
}

int Administracija::NadjiSlobodniLaptop()
{
    auto it = laptopi.begin();
    while(it != laptopi.end())
    {
        if(!(it-&gt;second-&gt;DaLiJeZaduzen()))
            return it-&gt;second-&gt;DajEvidencijskiBroj();
        it++;
    }
    throw domain_error("Nema slobodnih laptopa");
}

void Administracija::RazduziLaptop(int ev_broj)
{
    auto it = laptopi.find(ev_broj);
    if(it == laptopi.end())
        throw domain_error("Laptop nije nadjen");
    else
    {
        if(!(it-&gt;second-&gt;DaLiJeZaduzen()))
            throw domain_error("Laptop nije zaduzen");
    }
    
    it-&gt;second-&gt;Razduzi();
}

void Administracija::PrikaziZaduzenja() const
{
    bool zaduzenja = false;
    
    auto it = laptopi.begin();
    while(it != laptopi.end())
    {
        if(it-&gt;second-&gt;DaLiJeZaduzen())
        {
            zaduzenja = true;
            cout &lt;&lt; "Student " &lt;&lt; it-&gt;second-&gt;DajKodKogaJe().DajImePrezime() &lt;&lt; " (" &lt;&lt; it-&gt;second-&gt;DajKodKogaJe().DajIndeks() &lt;&lt; ") zaduzio/la laptop broj " &lt;&lt; it-&gt;second-&gt;DajEvidencijskiBroj() &lt;&lt; endl;
        }
        it++;
    }
    if(!zaduzenja) cout &lt;&lt; "Nema zaduzenja";
}

int main ()
{
    Administracija admin;
    for(;;)
    {
        cout &lt;&lt; "Izaberite opciju:\n";
        cout &lt;&lt; "1 - Registriraj novog studenta\n";
        cout &lt;&lt; "2 - Registriraj novi laptop\n";
        cout &lt;&lt; "3 - Nadji studenta\n";
        cout &lt;&lt; "4 - Nadji laptop\n";
        cout &lt;&lt; "5 - Izlistaj studente\n";
        cout &lt;&lt; "6 - Izlistaj laptope\n";
        cout &lt;&lt; "7 - Zaduzi laptop\n";
        cout &lt;&lt; "8 - Razduzi laptop\n";
        cout &lt;&lt; "9 - Prikazi zaduzenja\n";
        cout &lt;&lt; "0 - Kraj\n\n";
        cout &lt;&lt; "Vas izbor je: ";
        int opcija;
        cin &gt;&gt; opcija;
        while(opcija &lt; 0 || opcija &gt; 9) {
            cout &lt;&lt; "Pogresna opcija!\nVas izbor je: ";
            cin &gt;&gt; opcija;
        }
        if(opcija == 1) {
            string imeprezime, adresa, telefon, godina;
            int indeks_broj;
            cout &lt;&lt; "\nUnesite broj indeksa: ";
            cin &gt;&gt; indeks_broj;
            cin.get();
			cout &lt;&lt; "Unesite godinu studija: ";
			getline(cin, godina);
            cout &lt;&lt; "Unesite ime i prezime: ";
            getline(cin, imeprezime);
            cout &lt;&lt; "Unesite adresu: ";
            getline(cin, adresa);
            cout &lt;&lt; "Unesite telefon: ";
            getline(cin, telefon);
            try {
                admin.RegistrirajNovogStudenta(indeks_broj, godina, imeprezime, adresa, telefon);
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
        else if(opcija == 2) {
			int ev_broj;
            string naziv, karakteristike;
            cout &lt;&lt; "\nUnesite evidencijski broj: ";
            cin &gt;&gt; ev_broj;
            cin.get();
            cout &lt;&lt; "Unesite naziv: ";
            getline(cin, naziv);
            cout &lt;&lt; "Unesite karakteristike: ";
            getline(cin, karakteristike);
            try {
                admin.RegistrirajNoviLaptop(ev_broj, naziv, karakteristike);
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
        else if(opcija == 3) {
            int indeks_broj;
            cout &lt;&lt; "\nUnsite broj indeksa studenta kojeg zelite pronaci: ";
            cin &gt;&gt; indeks_broj;
            try {
                Student s(admin.NadjiStudenta(indeks_broj));
                cout &lt;&lt; "\nPronasli ste studenta sa podacima:\n";
				s.Ispisi();
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
        else if(opcija == 4) {
            int evidencijski_broj;
            cout &lt;&lt; "\nUnsite evidencijski broj laptopa kojeg zelite pronaci: ";
            cin &gt;&gt; evidencijski_broj;
            try {
                Laptop p(admin.NadjiLaptop(evidencijski_broj));
                cout &lt;&lt; "\nPronasli ste knjigu sa podacima:\n";
                p.Ispisi();
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
<a name="1"></a><font color="#00FF00"><a href="match522-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        else if(opcija == 5) {
            cout &lt;&lt; "\nRegistrovani studenti su: " &lt;&lt; endl &lt;&lt; endl;
            admin.IzlistajStudente();
        }
        else if(opcija == 6) {
            cout &lt;&lt; "\nLaptopi koji se nalaze u administraciji su: " &lt;&lt; endl &lt;&lt; endl;
            admin.IzlistajLaptope();
        }
        else if(opcija == 7) {
</font>            int indeks_broj, evidencijski_broj;
            cout &lt;&lt; "\nUnesite evidencijski broj laptopa kojeg zelite zaduziti: ";
            cin &gt;&gt; evidencijski_broj;
            cout &lt;&lt; "Unesite broj indeksa studenta kojem zaduzujete laptop: ";
            cin &gt;&gt; indeks_broj;
            try {
                admin.ZaduziLaptop(indeks_broj, evidencijski_broj);
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
        else if(opcija == 8) {
            int evidencijski_broj;
            cout &lt;&lt; "\nUnesite evidencijski broj laptopa kojeg zelite razduziti: ";
            cin &gt;&gt; evidencijski_broj;
            try {
                admin.RazduziLaptop(evidencijski_broj);
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
        else if(opcija == 9) {
            try {
                admin.PrikaziZaduzenja();
                cout &lt;&lt; endl &lt;&lt; endl;
            }
            catch(domain_error izuzetak) {
                cout &lt;&lt; endl &lt;&lt; izuzetak.what() &lt;&lt; endl &lt;&lt; endl;
            }
        }
        else break;
    }
    
	return 0;
}</pre>
</body>
</html>
