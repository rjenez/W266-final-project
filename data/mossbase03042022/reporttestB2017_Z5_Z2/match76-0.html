<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student4841.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z5/Z2/student4841.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match76-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 5, Zadatak 1
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

using namespace std;


void blanko(string &amp;s){
        for(int i=0;i&lt;s.size();i++)
        {if((s[i]==' ')&amp;&amp;(s[i+1]==' '))
         for(;;)
         {
          if(s[i+1]!=' ')
          break;
          else
         for(int j=i;j&lt;s.size();j++)
          s[j]=s[j+1];s.resize(s.size()-1);} 
         }
        int ind;
        for(int i=0; i&lt;s.size(); i++) if(s[i]!=' ') ind=i;
        s=s.substr(0,ind+1);
        for(int i=0; i&lt;s.size(); i++) if(s[i]!=' ') {ind=i; break;}
        s=s.substr(ind,s.size());
    }

class Student{
protected:
    string brtel;
    int indeks;
    string adresa;
    string godinastudija;
    string imeiprezime;

public:
    Student(int ind,string g, string iip, string adr, string brtel){
        int number=ind;
        int digits = 0;
        int bkroz=0, bcrta=0;
        if (number &lt; 0) throw domain_error("Neispravni parametri");
        while (number) {
            number /= 10;
            digits++;
        }
        for(int i=0; i&lt;brtel.size(); i++)
        {
            if(brtel[i]=='/') bkroz++;
            else if(brtel[i]=='-') bcrta++;
            else if(brtel[i]&lt;'0' || brtel[i]&gt;'9') throw domain_error("Neispravni parametri");
        }
        if(digits!=5) throw domain_error("Neispravni parametri");
        if(g!="1" &amp;&amp; g!= "2" &amp;&amp; g!= "3"&amp;&amp; g!= "1/B" &amp;&amp; g!= "2/B" &amp;&amp; g!= "3/B" &amp;&amp; g!= "1/M" &amp;&amp; g!= "2/M"&amp;&amp; g!= "1/D"&amp;&amp;g!= "2/D" &amp;&amp; g!= "3/D") throw domain_error("Neispravni parametri");
        blanko(iip); blanko(adr);
        if(g.size()==1) g+="/B";
        if(bkroz&gt;1 || bcrta&gt;1) throw domain_error("Neispravni parametri");
        
        indeks=ind; godinastudija=g; imeiprezime=iip; adresa=adr; Student::brtel=brtel;

    }
    int DajIndeks() const { return indeks;}
    void Ispisi(){
        cout&lt;&lt;"Broj indeksa: "&lt;&lt;indeks&lt;&lt;endl&lt;&lt;"Godina studija: "&lt;&lt;godinastudija&lt;&lt;endl&lt;&lt;"Ime i prezime: "&lt;&lt;imeiprezime&lt;&lt;endl;
        cout&lt;&lt;"Adresa: "&lt;&lt;adresa&lt;&lt;endl&lt;&lt;"Telefon: "&lt;&lt;brtel;

    }
    string DajAdresu() const { return adresa;}
    string DajGodinuStudija() const { return godinastudija;}
    string DajTelefon() const { return brtel;}
    string DajImePrezime() const { return imeiprezime;}
};

class Laptop{
    int ev_broj;
    string naziv, karakteristike;
    shared_ptr&lt;Student&gt;kod_koga_je;
public:
    Laptop(int ev, string naz, string kar){
        if(ev&lt;0) throw domain_error("Neispravni parametri");
        ev_broj=ev; naziv=naz; karakteristike=kar;
        kod_koga_je=nullptr;
    }
    void Zaduzi(Student &amp;s){
        if(kod_koga_je!=nullptr) throw domain_error("Laptop vec zaduzen");
        kod_koga_je=make_shared&lt;Student&gt;(s);
    }
    int DajEvidencijskiBroj() const
    {
        return ev_broj;
    }
    void Razduzi(){
        kod_koga_je=nullptr;
    }
    string DajNaziv() const
    {
        return naziv;
    }
    Student &amp;DajKodKogaJe(){
        if(kod_koga_je==nullptr) throw domain_error("Laptop nije zaduzen");
        Student &amp;s=*kod_koga_je;
        return s;
    }
    string DajKarakteristike () const
    {
        return karakteristike;
    }
    void Ispisi(){
        cout&lt;&lt;"Evidencijski broj: "&lt;&lt;ev_broj&lt;&lt;endl&lt;&lt;"Naziv: "&lt;&lt;naziv&lt;&lt;endl&lt;&lt;"Karakteristike: "&lt;&lt;karakteristike;
    }
    bool DaLiJeZaduzen() { return kod_koga_je!=nullptr;}

};

class Administracija{
    map&lt;int,shared_ptr&lt;Student&gt;&gt; m1;
    map&lt;int,shared_ptr&lt;Laptop&gt;&gt; m2;
public:
    Administracija() {}
    Administracija &amp;operator =(const Administracija &amp;a){
        if(&amp;a==this) return *this;
        for(auto i=m1.begin(); i!=m1.end(); i++)  i-&gt;second=nullptr;
        for(auto i=m2.begin(); i!=m2.end(); i++)  i-&gt;second=0;
        m1.clear(); m2.clear();
        for(auto i=a.m1.begin(); i!=a.m1.end(); i++) m1.insert(make_pair(i-&gt;first, make_shared&lt;Student&gt;(i-&gt;second-&gt;DajIndeks(),i-&gt;second-&gt;DajGodinuStudija(),i-&gt;second-&gt;DajImePrezime(), i-&gt;second-&gt;DajAdresu(),i-&gt;second-&gt;DajTelefon())));
        for(auto i=a.m2.begin(); i!=a.m2.end(); i++) m2.insert(make_pair(i-&gt;first, make_shared&lt;Laptop&gt;(i-&gt;second-&gt;DajEvidencijskiBroj(), i-&gt;second-&gt;DajNaziv(), i-&gt;second-&gt;DajKarakteristike())));
        return *this;
        
    }
    ~Administracija(){
        for(auto i=m1.begin(); i!=m1.end(); i++) i-&gt;second=nullptr;
        for(auto i=m2.begin(); i!=m2.end(); i++) i-&gt;second=nullptr;
        m1.clear(); m2.clear();
    }
    Administracija(Administracija &amp;&amp;a){
        m1=a.m1;
        m2=a.m2;
        for(int i=0; i&lt;m2.size(); i++) a.m2[i]=nullptr;
        for(int i=0; i&lt;m1.size(); i++) a.m1[i]=nullptr;
        a.m1.clear();
        a.m2.clear();

    }
    Administracija(const Administracija &amp;a){
        for(auto i=a.m1.begin(); i!=a.m1.end(); i++) m1.insert(make_pair(i-&gt;first, make_shared&lt;Student&gt;(i-&gt;second-&gt;DajIndeks(),i-&gt;second-&gt;DajGodinuStudija(),i-&gt;second-&gt;DajImePrezime(), i-&gt;second-&gt;DajAdresu(),i-&gt;second-&gt;DajTelefon())));
        for(auto i=a.m2.begin(); i!=a.m2.end(); i++) m2.insert(make_pair(i-&gt;first, make_shared&lt;Laptop&gt;(i-&gt;second-&gt;DajEvidencijskiBroj(), i-&gt;second-&gt;DajNaziv(), i-&gt;second-&gt;DajKarakteristike())));
    }
    void RegistrirajNoviLaptop(int ev, string naz, string kar){
        if(m2.find(ev)!=m2.end()) throw domain_error("Laptop s tim evidencijskim brojem vec postoji");
        m2[ev]=make_shared&lt;Laptop&gt;(ev,naz,kar);
    }
    void RegistrirajNovogStudenta(int ind,string g, string iip, string adr, string brtel){
        if(m1.find(ind)!=m1.end()) throw domain_error("Student s tim indeksom vec postoji");
        m1[ind]=make_shared&lt;Student&gt;(ind, g, iip, adr, brtel);
    }
    Laptop &amp;NadjiLaptop(int ev){
        if(m2.find(ev)==m2.end()) throw domain_error("Laptop nije nadjen");
        return *m2[ev];
    }
    Student &amp;NadjiStudenta(int ind){
        if(m1.find(ind)==m1.end()) throw domain_error("Student nije nadjen");
        return *m1[ind];
    }
    Laptop NadjiLaptop(int ev) const {
        if(m2.find(ev)==m2.end()) throw domain_error("Laptop nije nadjen");
        auto l=m2.find(ev)-&gt;second;
        return Laptop(l-&gt;DajEvidencijskiBroj(), l-&gt;DajNaziv(), l-&gt;DajKarakteristike());
    }
    Student NadjiStudenta(int ind) const {
        if(m1.find(ind)==m1.end()) throw domain_error("Student nije nadjen");
        auto s1=m1.find(ind)-&gt;second;
        Student s(s1-&gt;DajIndeks(),s1-&gt;DajGodinuStudija(),s1-&gt;DajImePrezime(), s1-&gt;DajAdresu(),s1-&gt;DajTelefon());
        return s;
    }
    void IzlistajLaptope()
    {
        for(auto i=m2.begin(); i!=m2.end(); i++)
        {
            i-&gt;second-&gt;Ispisi();
            cout&lt;&lt;endl;
            if(i-&gt;second-&gt;DaLiJeZaduzen())
            {
                Student &amp;s = i-&gt;second-&gt;DajKodKogaJe();
                cout&lt;&lt;"Zaduzio(la): "&lt;&lt;s.DajImePrezime()&lt;&lt;" ("&lt;&lt;s.DajIndeks()&lt;&lt;")"&lt;&lt;endl;
            }
            cout&lt;&lt;endl;

        }
    }
    void ZaduziLaptop(int ind, int ev){
        if(m1.find(ind)==m1.end()) throw domain_error("Student nije nadjen");
        if(m2.find(ev)==m2.end()) throw domain_error("Laptop nije nadjen");
        if((m2[ev])-&gt;DaLiJeZaduzen()) throw domain_error("Laptop vec zaduzen");
        Student pok=*m1[ind];
        for(auto it=m2.begin(); it!=m2.end(); it++){
            try{
                auto pok1=it-&gt;second-&gt;DajKodKogaJe();
                if(pok.DajImePrezime()==pok1.DajImePrezime() &amp;&amp; pok.DajIndeks()==pok1.DajIndeks() &amp;&amp; pok.DajGodinuStudija()==pok1.DajGodinuStudija() &amp;&amp; pok.DajTelefon()==pok1.DajTelefon())
                    throw domain_error("Student je vec zaduzio laptop");
            } catch(...){}
        }
        m2[ev]-&gt;Zaduzi(*m1[ind]);
    }
    void IzlistajStudente()
    {
        for(auto i=m1.begin(); i!=m1.end(); i++)
        {
            i-&gt;second-&gt;Ispisi();
            cout&lt;&lt;endl&lt;&lt;endl;
        }
    }
    void PrikaziZaduzenja(){
        auto i=find_if(m2.begin(), m2.end(), [](pair&lt;int,shared_ptr&lt;Laptop&gt;&gt; lap){
            return (lap.second-&gt;DaLiJeZaduzen());});
        if(i==m2.end()) { cout&lt;&lt;"Nema zaduzenja"; return;}
        for(auto it=m2.begin(); it!=m2.end(); it++){
            if(it-&gt;second-&gt;DaLiJeZaduzen()){
                Student &amp;s=it-&gt;second-&gt;DajKodKogaJe();
                cout&lt;&lt;"Student "&lt;&lt;s.DajImePrezime()&lt;&lt;" (";
                cout&lt;&lt;s.DajIndeks()&lt;&lt;") zaduzio/la laptop broj "&lt;&lt;it-&gt;second-&gt;DajEvidencijskiBroj()&lt;&lt;endl;
            }
        }
    }
    void RazduziLaptop(int ev){
        if(m2.find(ev)==m2.end()) throw domain_error("Laptop nije nadjen");
        if(!(m2[ev]-&gt;DaLiJeZaduzen())) throw domain_error("Laptop vec zaduzen");
        m2[ev]-&gt;Razduzi();
    }
    int NadjiSlobodniLaptop(){
        auto it=find_if(m2.begin(), m2.end(), [](pair&lt;int,shared_ptr&lt;Laptop&gt;&gt; lap){
            return !(lap.second-&gt;DaLiJeZaduzen());});
        if(it==m2.end()) throw domain_error("Nema slobodnih laptopa");
        return it-&gt;second-&gt;DajEvidencijskiBroj();
    }
};

int main ()
</font>{ 
    

	return 0;
}
</pre>
</body>
</html>
