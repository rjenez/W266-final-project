<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z3/student5860.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2016/Z5/Z3/student5860.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;



#define KAPACITET           200

#define datoteka            "C:\\Users\\damir\\Desktop\\New folder (2)\\raspored.dat"

#define VRIJEME_MAKSIMALNO				23

#define VRIJEME_MAKSIMALNO_MIN			59

#define VRIJEME_MAKSIMALNO_SEC			59






#define PRVO_VRIJEME     9
 
#define ZAVRSNO_VRIJEME     18
 
#define KRAJ_VREMENA      19

char* SEDMICA[6] = {"PON", "UTO", "SRI", "CET", "PET", "SUB"};

int PomocnaVarijabla = -1;





struct Vrijeme {

    int sati, minute, sekunde;

};



struct Cas {

    char predmet[10];

    int dan_u_sedmici;

    struct Vrijeme pocetak, kraj;

};






bool TacnoVrijeme(int sat, int minut, int sekund) {

	if(	sat &lt;= VRIJEME_MAKSIMALNO &amp;&amp; sat &gt;= 0 &amp;&amp;  minut &lt;= VRIJEME_MAKSIMALNO_MIN &amp;&amp; minut &gt;= 0 &amp;&amp;	sekund &lt;= VRIJEME_MAKSIMALNO_SEC &amp;&amp; sekund &gt;= 0)

			return true;

	else

		return false;

}





void ispisi_red(struct Cas raspored[], int broj_casova, int sat) {

	int n=0;
	int dan=0;

	bool postavljen;

	struct Cas ObjekatCasa;

	for(dan = 1; dan &lt;= 6; dan++) {

		strcpy(ObjekatCasa.predmet , "");

		postavljen = false;

		

		for(n = 0; n &lt; broj_casova; n++) {

			if(raspored[n].dan_u_sedmici == dan &amp;&amp; raspored[n].pocetak.sati &lt;= sat) {

				if (!postavljen) 

					if(raspored[n].pocetak.sati == sat) {

						ObjekatCasa = raspored[n];

						postavljen;

					}

				else {

					if((raspored[n].pocetak.sati != raspored[n].kraj.sati &amp;&amp; raspored[n].kraj.sati &gt; sat &amp;&amp; raspored[n].pocetak.sati &lt;= sat)||

						 (raspored[n].kraj.minute == 0  &amp;&amp; raspored[n].pocetak.sati == ObjekatCasa.pocetak.sati) ||

						(raspored[n].pocetak.minute &lt; ObjekatCasa.pocetak.minute &amp;&amp; raspored[n].pocetak.sati == ObjekatCasa.pocetak.sati  ) ||

						(raspored[n].kraj.minute &gt; 0 &amp;&amp; raspored[n].kraj.minute &lt;= ObjekatCasa.pocetak.minute &amp;&amp; raspored[n].pocetak.sati &lt;= sat) ||
						(raspored[n].pocetak.minute &lt; ObjekatCasa.pocetak.minute &amp;&amp; raspored[n].kraj.sati &gt;= ObjekatCasa.kraj.sati &amp;&amp; raspored[n].pocetak.sati &lt;= ObjekatCasa.pocetak.sati) 

						)

							ObjekatCasa = raspored[n];

				}

			}

		}

		printf("%-10s", ObjekatCasa.predmet);

	}

}




int ucitaj_datoteku(struct Cas raspored[]) {
	
	FILE *FajlOtvoren;
    int i = 0;

    

    if((FajlOtvoren = fopen(datoteka, "r+")) == NULL) {

       

        exit(1);

    }

    int VarijablaJedan=0;

    while ((VarijablaJedan = fscanf(FajlOtvoren, "%9s %d %d %d %d %d %d %d\n",   &amp;raspored[i].predmet, &amp;raspored[i].dan_u_sedmici,

        &amp;raspored[i].pocetak.sati, &amp;raspored[i].pocetak.minute, &amp;raspored[i].pocetak.sekunde,

        &amp;raspored[i].kraj.sati, &amp;raspored[i].kraj.minute, &amp;raspored[i].kraj.sekunde)) != EOF) {

        

		if(i &gt;= KAPACITET)

            break;

            

        if(VarijablaJedan == 8)

        	if(
        		raspored[i].pocetak.sati &lt;= raspored[i].kraj.sati &amp;&amp; 
        		
        	raspored[i].pocetak.sati &lt;= ZAVRSNO_VRIJEME	 &amp;&amp;

	        	raspored[i].dan_u_sedmici &gt;= 1 &amp;&amp;

	        	raspored[i].pocetak.sati &gt;= PRVO_VRIJEME &amp;&amp; 
	        	
	        	raspored[i].dan_u_sedmici &lt;= 6 &amp;&amp;

	        	raspored[i].kraj.sati &gt;= PRVO_VRIJEME &amp;&amp; 
	        	TacnoVrijeme(raspored[i].kraj.sati, raspored[i].kraj.minute, raspored[i].kraj.sekunde) &amp;&amp;

				TacnoVrijeme(raspored[i].pocetak.sati, raspored[i].pocetak.minute, raspored[i].pocetak.sekunde) &amp;&amp;

				raspored[i].kraj.sati &lt;= KRAJ_VREMENA
				
				) 

        			i++;

    }

    return i;

}





int zapisi_datoteku(struct Cas raspored[], int broj_casova) {

	FILE *FajlOtvoren = fopen(datoteka, "ab+");

	if (FajlOtvoren == NULL)

	{

	    

	    exit(1);

	}

	int i;

	int Sacuvano = 0;

	for(i = 0; i &lt; broj_casova; i++) {

<a name="0"></a><font color="#FF0000"><a href="match720-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

		fprintf(FajlOtvoren, "%-9s %d %d %d %d %d %d %d\n", raspored[i].predmet, raspored[i].dan_u_sedmici,

    	raspored[i].pocetak.sati, raspored[i].pocetak.minute, raspored[i].pocetak.sekunde,

        raspored[i].kraj.sati, raspored[i].kraj.minute, raspored[i].kraj.sekunde);
</font>
        fprintf(FajlOtvoren, "\n");

        Sacuvano++;

	}



	fclose(FajlOtvoren);

}





int dodaj_cas(struct Cas raspored[], int broj_casova,

    const char* predmet, int trajanje) {

	int dan;
	int j;
	int i;

	int vrijeme;

	



	bool NijeSlobodno[7][20];

	for(i = PRVO_VRIJEME; i &lt;= KRAJ_VREMENA; i++) 

		for(j = 1; j &lt;= 6; j++) 

			NijeSlobodno[j][i] = false;	

			



	for(i = 0; i &lt; broj_casova; i++) {

		if(raspored[i].predmet != "") {

			NijeSlobodno[raspored[i].dan_u_sedmici][raspored[i].pocetak.sati] = true;

			

			if(raspored[i].kraj.sati &gt; raspored[i].pocetak.sati) {

				int j;

				for(j = raspored[i].pocetak.sati; j &lt; raspored[i].kraj.sati; j++) 

					NijeSlobodno[raspored[i].dan_u_sedmici][j] = true;

				if(raspored[i].kraj.minute &gt; 0) 

					NijeSlobodno[raspored[i].dan_u_sedmici][raspored[i].kraj.sati] = true;	

			}

			else {

				if(raspored[i].kraj.minute &gt; 0) 

					NijeSlobodno[raspored[i].dan_u_sedmici][raspored[i].kraj.sati] = true;

			}

		}

	}

	



	for(dan = 1; dan &lt;= 6; dan++) {

		int Udaljenos = 0;

		vrijeme = PRVO_VRIJEME;

		while(vrijeme &lt;= ZAVRSNO_VRIJEME)

		{

			Udaljenos = 0;

			while(!NijeSlobodno[dan][vrijeme] &amp;&amp; vrijeme-trajanje &lt;= ZAVRSNO_VRIJEME) {

				Udaljenos++;

				vrijeme++;

				if(Udaljenos == trajanje &amp;&amp; vrijeme-trajanje &lt;= ZAVRSNO_VRIJEME) {

					if(broj_casova+1 &lt; KAPACITET) {

						

						struct Cas VrijemeN;

						strcpy(VrijemeN.predmet, predmet);

						VrijemeN.dan_u_sedmici = dan;

						VrijemeN.pocetak.sati = vrijeme-trajanje; VrijemeN.pocetak.minute = 0; VrijemeN.pocetak.sekunde = 0;

						VrijemeN.kraj.sati = vrijeme; VrijemeN.kraj.minute = 0; VrijemeN.kraj.sekunde = 0;

				

						raspored[broj_casova] = VrijemeN;

						return 1;

					}

					else {

					

						return 0;

					}

				}

			}

			vrijeme++;

		}

	}

	return 0;

}





int preklapanje(struct Cas raspored[], int broj_casova,

    struct Cas cas) {

	int i;

	int dan = cas.dan_u_sedmici;

	for(i = 0; i &lt; broj_casova; i++) {

		if(raspored[i].dan_u_sedmici == dan) {

		

			if(!(((cas.kraj.sati &lt; raspored[i].pocetak.sati) || ((cas.kraj.sati == raspored[i].pocetak.sati) &amp;&amp; (cas.kraj.minute &lt;= raspored[i].pocetak.minute))) ||

			((raspored[i].kraj.sati &lt; cas.pocetak.sati) || ((cas.pocetak.sati == raspored[i].kraj.sati) &amp;&amp; (cas.pocetak.minute &gt;= raspored[i].kraj.minute)))))

			{

				PomocnaVarijabla = i;

				return 1;

			}

		}

	}

	return 0;    	

}





void ispis_rasporeda(struct Cas raspored[], int broj_casova) {

	

	int i;

	printf("%-7s", "");

	for(i = 1; i &lt;= 5; i++) {

		printf("%-10s", SEDMICA[i-1]);

	}
	printf("%s", SEDMICA[5]);
	printf("\n");

	



	int sati;

	for(sati = PRVO_VRIJEME; sati &lt;= ZAVRSNO_VRIJEME; sati++) {

		if(sati == PRVO_VRIJEME) 

			printf("%d:00   ", sati);

		else

			printf("%d:00  ", sati);

			

		ispisi_red(raspored, broj_casova, sati);

		printf("\n");

	}

	printf("\n");

}





void ispisi_dan(struct Cas raspored[], int broj_casova, int dan) {

	int i;

	int NekaVarijabla = 0;

	printf("Uneseni su casovi:\n");

	for(i = 0; i &lt; broj_casova; i++)

		if(raspored[i].dan_u_sedmici == dan)  {

			NekaVarijabla++;

			printf("%d) %s (%02d:%02d-%02d:%02d)\n", NekaVarijabla, raspored[i].predmet, raspored[i].pocetak.sati, raspored[i].pocetak.minute, raspored[i].kraj.sati, raspored[i].kraj.minute);

		}

}




void promijeni_cas(struct Cas raspored[], int broj_casova, int dan,

    int redni_broj, struct Cas promjena) {

    int i = 0;

	

	bool NalaziSe = false;
<a name="1"></a><font color="#00FF00"><a href="match720-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

 int pozicija = 0;
	for(i = 0; i &lt; broj_casova; i++) {

		if(raspored[i].dan_u_sedmici == dan) {

			pozicija++;

			if(pozicija == redni_broj) {

				NalaziSe = true;
</font>
				if(preklapanje(raspored, broj_casova, promjena) == 0) {

					raspored[i] = promjena;

					

				}

				else if(PomocnaVarijabla == i) {

					raspored[i] = promjena;

					

				}

				

				break;

			} 

		} 	

	}

	if(!NalaziSe) {

		printf("Neispravan redni broj casa.\n");

	}

}





void obrisi_cas(struct Cas raspored[], int broj_casova, int dan,

    int redni_broj) {
	bool NalaziSe = false;
    

	int pozicija = 0;

	int i = 0;

	for(i = 0; i &lt; broj_casova; i++) {

		if(raspored[i].dan_u_sedmici == dan) {

			pozicija++;

			if(pozicija == redni_broj) {

				int j;

				for(j = i; j &lt; broj_casova-1; j++)

					raspored[j]=raspored[j+1];

				NalaziSe = true;

			

				PomocnaVarijabla = 1;

				break;

			} 

		} 	

	}

	if(!NalaziSe) {

		printf("Neispravan redni broj casa.\n");

	}	

}




void NapraviTabelu(struct Cas raspored[], int broj_casova) {
 int dan;
	int IzabranaVrijednost;

	int cas;

	

	printf("1) Ispis rasporeda\n2) Dodavanje casa\n3) Promjena casa\n4) Brisanje casa\n0) Kraj rada\nIzaberite opciju: ");

	scanf("%d", &amp;IzabranaVrijednost);

	

	if(IzabranaVrijednost == 1) {

		ispis_rasporeda(raspored, broj_casova);

		NapraviTabelu(raspored, broj_casova);

	}

	else if(IzabranaVrijednost == 2) {

		char naziv[10];

		int Udaljenos;

		printf("Unesite naziv predmeta: "); scanf("%9s", &amp;naziv);

		printf("Unesite broj casova: "); scanf("%d", &amp;Udaljenos);

		if(naziv == "" || Udaljenos &gt; 10 || Udaljenos &lt; 1  ) {


			NapraviTabelu(raspored, broj_casova);

		}

		else {

			int dodano = dodaj_cas(raspored, broj_casova, naziv, Udaljenos);

			if(dodano == 1) broj_casova++;

			else printf("Nema dovoljno mjesta u rasporedu za %d casova.", Udaljenos);

			ispis_rasporeda(raspored, broj_casova);

			NapraviTabelu(raspored, broj_casova);

		}

	}

	else if(IzabranaVrijednost == 3) {

	
		
		int ZadnjimM = 0;
		int ZavrsniH = 0;
		int PocetnoM = 0;
		
		int PocetnoH = 0;
		char naziv[10];
		

		printf("Unesite dan (1=ponedjeljak, 2=utorak..., 6=subota): "); scanf("%d", &amp;dan);

		if(dan &gt;= 1 &amp;&amp; dan &lt;= 6) {

			ispisi_dan(raspored, broj_casova, dan);

		}

		else {

	

			NapraviTabelu(raspored, broj_casova);	

		}

		printf("Izaberite koji cas zelite promijeniti: "); scanf("%d", &amp;cas);

		printf("Naziv predmeta: "); scanf("%s", &amp;naziv);

		printf("Vrijeme pocetka: "); scanf("%d : %d", &amp;PocetnoH, &amp;PocetnoM);

		printf("Vrijeme zavrsetka: "); scanf("%d : %d", &amp;ZavrsniH, &amp;ZadnjimM);

		if(PocetnoH &gt;= PRVO_VRIJEME &amp;&amp; PocetnoH &lt;= ZAVRSNO_VRIJEME &amp;&amp; 

			TacnoVrijeme(PocetnoH, PocetnoM, 0) &amp;&amp; TacnoVrijeme(ZavrsniH, ZadnjimM, 0) &amp;&amp; naziv != "" &amp;&amp; 

			ZavrsniH &gt;= PRVO_VRIJEME &amp;&amp; ZavrsniH &lt;= KRAJ_VREMENA) 

		{

			struct Cas VrijemeN;

			

			strcpy(VrijemeN.predmet, naziv);

			VrijemeN.dan_u_sedmici = dan;

			VrijemeN.pocetak.sati = PocetnoH; VrijemeN.pocetak.minute = PocetnoM; VrijemeN.pocetak.sekunde = 0;

			VrijemeN.kraj.sati = ZavrsniH; VrijemeN.kraj.minute = ZadnjimM; VrijemeN.kraj.sekunde = 0;

			

			promijeni_cas(raspored, broj_casova, dan, cas, VrijemeN);	

			NapraviTabelu(raspored, broj_casova);

		}

		else {

			printf("Neispravan redni broj casa.\n");

			NapraviTabelu(raspored, broj_casova);

		}	

	}

	else if(IzabranaVrijednost == 4) {

		printf("Unesite dan (1=ponedjeljak, 2=utorak..., 6=subota): "); scanf("%d", &amp;dan);

		if(dan &lt;= 6  &amp;&amp; dan &gt;= 1 ) {

			ispisi_dan(raspored, broj_casova, dan);

		}

		else {

			printf("Pogresan unos.\n");

			NapraviTabelu(raspored, broj_casova);	

		}



		printf("Izaberite koji cas zelite obrisati: "); scanf("%d", &amp;cas);

		PomocnaVarijabla = 0;

		obrisi_cas(raspored, broj_casova, dan, cas);

		if(PomocnaVarijabla == 1) broj_casova--;

		NapraviTabelu(raspored, broj_casova);

	}

	else if(IzabranaVrijednost == 0) {

		zapisi_datoteku(raspored, broj_casova);

		exit(0);

	}

	else {

		printf("Pogresan unos.");

		exit(1);

	}

}





int main() {



    exit(0);

}</pre>
</body>
</html>
