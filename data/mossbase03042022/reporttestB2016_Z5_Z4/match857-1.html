<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student2553.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student2157.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match857-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

/B16/17 (ZadaÄ‡a 5, Zadatak 4)
//Autotestovi by Ivona Ivkovic (mail: iivkovic2@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;exception&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;initializer_list&gt;
#include &lt;cmath&gt;
#include &lt;iomanip&gt;

template&lt;typename Tip&gt;
class GMatrica{
    Tip matrica[4][4];
    int br_redova,br_kolona;
    public:
    GMatrica():br_redova(0),br_kolona(0){};
    GMatrica(int red,int kolona, Tip element=Tip());
    template&lt;typename tip2&gt;
    GMatrica(const GMatrica&lt;tip2&gt; &amp;mm);
    explicit GMatrica(const Tip mm[4][4]);
</font><a name="1"></a><font color="#00FF00"><a href="match857-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    GMatrica(const std::vector&lt;std::vector&lt;Tip&gt;&gt; &amp;vm);
    GMatrica(const std::initializer_list&lt;std::initializer_list&lt;Tip&gt;&gt; &amp;vm);
    int DajBrojRedova()const{return br_redova;}
    int DajBrojKolona()const{return br_kolona;}
    template&lt;typename Tip1,typename Tip2&gt;
    friend auto operator+(GMatrica&lt;Tip1&gt; m1,GMatrica&lt;Tip2&gt; m2)-&gt;GMatrica&lt;decltype(m1.matrica[0][0]+m2.matrica[0][0])&gt;;
</font>    template&lt;typename Tip1,typename Tip2&gt;
    friend auto operator-(GMatrica&lt;Tip1&gt; m1,GMatrica&lt;Tip2&gt; m2)-&gt;GMatrica&lt;decltype(m1.matrica[0][0]+m2.matrica[0][0])&gt;;
    template&lt;typename Tip1,typename Tip2&gt;
    friend auto operator*(GMatrica&lt;Tip1&gt; m1,GMatrica&lt;Tip2&gt; m2)-&gt;GMatrica&lt;decltype(m1.matrica[0][0]*m2.matrica[0][0])&gt;;
    Tip &amp;operator() (int i,int j);
    Tip operator()(int i,int j)const;
    Tip *operator[](int i);
    const Tip* operator[](int i)const;
    GMatrica &amp;operator*=(const GMatrica&lt;Tip&gt; &amp;m1);
    GMatrica &amp;operator*=(const Tip broj);
    GMatrica &amp;operator+=(const GMatrica&lt;Tip&gt; &amp;m1);
    GMatrica &amp;operator+=(const Tip broj);
    GMatrica &amp;operator-=(const GMatrica&lt;Tip&gt; &amp;m1);
    GMatrica &amp;operator-=(const Tip broj);
    template&lt;typename Tip1,typename Tip2&gt;
    friend bool operator==(const GMatrica&lt;Tip1&gt; m1,const GMatrica&lt;Tip2&gt; m2);
    template&lt;typename Tip1,typename Tip2&gt;
    friend bool operator!=(const GMatrica&lt;Tip1&gt; m1,const GMatrica&lt;Tip2&gt; m2);
    template&lt;typename Tip1&gt;
    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;ispis,const GMatrica&lt;Tip1&gt; &amp;m);
    template&lt;typename Tip1&gt;
<a name="3"></a><font color="#00FFFF"><a href="match857-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;ulaz,GMatrica&lt;Tip1&gt; &amp;matrica1);
};
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt;::GMatrica(int red,int kolona,Tip element){
    if(red&gt;4 || red&lt;0 || kolona&gt;4 || kolona&lt;0)throw std::logic_error("Ilegalan format matrice");
</font>    br_redova=red;br_kolona=kolona;
    for(int i=0;i&lt;red;i++){
        for(int j=0;j&lt;kolona;j++){
            matrica[i][j]=element;
        }
    }
}
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt;::GMatrica(const Tip mm[4][4]){
    for(int i=0;i&lt;4;i++){
        for(int j=0;j&lt;4;j++){
            matrica[i][j]=mm[i][j];
        }
    }br_redova=4;br_kolona=4;
}
template&lt;typename Tip&gt;
template&lt;typename tip2&gt;
GMatrica&lt;Tip&gt;::GMatrica(const GMatrica&lt;tip2&gt; &amp;mm){
    if(mm.br_redova&gt;4 || mm.br_redova&lt;0 || mm.br_kolona&gt;4 || mm.br_redova&lt;0){
        throw std::logic_error("Ilegalan format matrice");}
    for(int i=0;i&lt;mm.br_redova;i++){
        for(int j=0;j&lt;mm.br_kolona;j++){
            matrica[i][j]=mm.matrica[i][j];
        }
    }br_redova=mm.br_redova;br_kolona=mm.br_kolona;
    }
<a name="10"></a><font color="#FF0000"><a href="match857-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt;::GMatrica(const std::vector&lt;std::vector&lt;Tip&gt;&gt; &amp;vm){
    if(vm.size()==0);
</font>    else if(vm.size()&gt;4){throw std::logic_error("Ilegalan format matrice");}
    else{
        for(int i=0;i&lt;vm.size();i++){
            if(vm[i].size()&gt;4 || vm[0].size()!=vm[i].size())throw std::logic_error("Ilegalan format matrice");
        }
    }
    for(int i=0;i&lt;vm.size();i++)
        for(int j=0;j&lt;vm[i].size();j++){
<a name="4"></a><font color="#FF00FF"><a href="match857-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            matrica[i][j]=vm[i][j];
        }
    br_kolona=vm.size();br_redova=vm[0].size();
}
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt;::GMatrica(const std::initializer_list&lt;std::initializer_list&lt;Tip&gt;&gt; &amp;vm){
</font>    int sluc=0;
    if(vm.size()==0);
    else if(vm.size()&gt;4){throw std::logic_error("Ilegalan format matrice");}
    else{
        for(const auto i: vm){
            if(sluc==0)sluc=i.size();
            if(vm.size()&gt;4 || sluc!=i.size() || i.size()&gt;4)throw std::logic_error("Ilegalan format matrice");
        }
    }
    int i=0;int j=0;
    for(const auto &amp;l: vm){
        for(const auto &amp;k:l){
            matrica[i][j]=k;
            j++;
        }
        i++;
        j=0;
    }
    br_kolona=sluc;br_redova=vm.size();
}
template&lt;typename tip1,typename tip2&gt;
auto operator+(GMatrica&lt;tip1&gt; m1,GMatrica&lt;tip2&gt; m2)-&gt;GMatrica&lt;decltype(m1.matrica[0][0]+m2.matrica[0][0])&gt;{
    if(m1.DajBrojKolona()!=m2.DajBrojKolona() || m1.DajBrojRedova()!=m2.DajBrojRedova()){
        throw std::domain_error("Nedozvoljena operacija");}
        GMatrica&lt;decltype(m1.matrica[0][0]+m2.matrica[0][0])&gt; a;
        a.br_kolona=m1.br_kolona;a.br_redova=m2.br_redova;
        for(int i=0;i&lt;m1.DajBrojKolona();i++){
            for(int j=0;j&lt;m1.DajBrojRedova();j++){
                a.matrica[i][j]=m2.matrica[i][j]+m1.matrica[i][j];
            }
        }
    return a;
}
template&lt;typename tip1,typename tip2&gt;
auto operator-(GMatrica&lt;tip1&gt; m1,GMatrica&lt;tip2&gt; m2)-&gt;GMatrica&lt;decltype(m1.matrica[0][0]+m2.matrica[0][0])&gt;{
    if(m1.DajBrojKolona()!=m2.DajBrojKolona() || m1.DajBrojRedova()!=m2.DajBrojRedova()){
        throw std::domain_error("Nedozvoljena operacija");}
        GMatrica&lt;decltype(m1.matrica[0][0]+m2.matrica[0][0])&gt; a;
        a.br_kolona=m1.br_kolona;a.br_redova=m2.br_redova;
        for(int i=0;i&lt;m1.DajBrojKolona();i++){
            for(int j=0;j&lt;m1.DajBrojRedova();j++){
                a.matrica[i][j]=m1.matrica[i][j]-m2.matrica[i][j];
            }
        }
    return a;
}
template&lt;typename tip1,typename tip2&gt;
auto operator*(GMatrica&lt;tip1&gt; m1,GMatrica&lt;tip2&gt; m2)-&gt;GMatrica&lt;decltype(m1.matrica[0][0]*m2.matrica[0][0])&gt;{
    if(m1.br_kolona!=m2.br_redova)throw std::domain_error("Nedozvoljena operacija");
    GMatrica&lt;decltype(m1.matrica[0][0]*m2.matrica[0][0])&gt; a;
<a name="11"></a><font color="#00FF00"><a href="match857-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    a.br_kolona=m1.br_kolona;a.br_redova=m2.br_redova;
    for(int i=0;i&lt;m1.br_redova;i++){
        for(int j=0;j&lt;m2.br_kolona;j++){
            for(int k=0;k&lt;m1.br_kolona;k++){
</font><a name="8"></a><font color="#00FFFF"><a href="match857-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

            a.matrica[i][j]+=m1.matrica[i][k]*m2.matrica[k][j];
            }
        }
    }
    return a;
}
template&lt;typename Tip&gt;
Tip &amp;GMatrica&lt;Tip&gt;::operator ()(int i ,int j){
</font>    i--;j--;
    if(i&lt;0 || j&lt;0 || i&gt;br_redova || j&gt;br_kolona)throw std::range_error("Nedozvoljen indeks");
    return matrica[i][j];
}
template&lt;typename Tip&gt;
Tip GMatrica&lt;Tip&gt;::operator ()(int i ,int j)const{
    i--;j--;
    if(i&lt;0 || j&lt;0 || i&gt;br_redova || j&gt;br_kolona)throw std::range_error("Nedozvoljen indeks");
    Tip a=matrica[i][j];
    return a;
}
template&lt;typename Tip&gt;
Tip *GMatrica&lt;Tip&gt;::operator[](int i){
    if(i&lt;0 ||  i&gt;br_redova)throw std::range_error("Nedozvoljen indeks");
    return &amp;(*matrica[i]);
}
template&lt;typename Tip&gt;
const Tip* GMatrica&lt;Tip&gt;::operator[](int i)const{
    if(i&lt;0 ||  i&gt;br_redova)throw std::range_error("Nedozvoljen indeks");
    return matrica[i];
}
<a name="5"></a><font color="#FF0000"><a href="match857-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt; &amp;GMatrica&lt;Tip&gt;::operator*=(const GMatrica&lt;Tip&gt; &amp;m1){
    if(br_kolona!=m1.br_redova)throw std::domain_error("Nedozvoljena operacija");
</font>    auto a=*this;
    a.br_kolona=br_kolona;a.br_redova=m1.br_redova;
    br_kolona=a.br_kolona;br_redova=m1.br_redova;
    for(int i=0;i&lt;a.br_redova;i++){
        for(int j=0;j&lt;m1.br_kolona;j++){
            for(int k=0;k&lt;a.br_kolona;k++){
            matrica[i][j]+=a.matrica[i][k]*m1.matrica[k][j];
            }
        }
    }
    return *this;
}
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt; &amp;GMatrica&lt;Tip&gt;::operator*=(const Tip broj){
    for(int i=0;i&lt;br_redova;i++)
<a name="13"></a><font color="#00FFFF"><a href="match857-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

        for(int j=0;j&lt;br_kolona;j++)
            matrica[i][j]*=broj;
    return *this;
}
template&lt;typename Tip&gt;
</font><a name="6"></a><font color="#00FF00"><a href="match857-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

GMatrica&lt;Tip&gt; &amp;GMatrica&lt;Tip&gt;::operator+=(const GMatrica&lt;Tip&gt; &amp;m1){
    if(br_redova!=m1.DajBrojKolona() || br_redova!=m1.DajBrojRedova()){
    throw std::domain_error("Nedozvoljena operacija");}
</font>    for(int i=0;i&lt;br_redova;i++)
        for(int j=0;j&lt;br_kolona;j++)
<a name="12"></a><font color="#0000FF"><a href="match857-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

            matrica[i][j]+=m1[i][j];
    return *this;
}
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt; &amp;GMatrica&lt;Tip&gt;::operator+=(const Tip broj){
</font><a name="2"></a><font color="#0000FF"><a href="match857-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    for(int i=0;i&lt;br_redova;i++)
        for(int j=0;j&lt;br_kolona;j++)
            matrica[i][j]+=broj;
    return *this;
}
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt; &amp;GMatrica&lt;Tip&gt;::operator-=(const GMatrica&lt;Tip&gt; &amp;m1){
</font>    if(br_redova!=m1.DajBrojKolona() || br_redova!=m1.DajBrojRedova()){
    throw std::domain_error("Nedozvoljena operacija");}
    for(int i=0;i&lt;br_redova;i++)
        for(int j=0;j&lt;br_kolona;j++)
            matrica[i][j]-=m1[i][j];
    return *this;
}
template&lt;typename Tip&gt;
GMatrica&lt;Tip&gt; &amp;GMatrica&lt;Tip&gt;::operator-=(const Tip broj){
<a name="7"></a><font color="#0000FF"><a href="match857-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    for(int i=0;i&lt;br_redova;i++)
        for(int j=0;j&lt;br_kolona;j++)
            matrica[i][j]-=broj;
    return *this;
}
template&lt;typename Tip,typename Tip1&gt;
</font>bool operator==(const GMatrica&lt;Tip&gt; m1,const GMatrica&lt;Tip1&gt; m2){
    if(m1.br_kolona!=m2.br_kolona || m1.br_redova!=m2.br_redova)return false;
    for(int i=0;i&lt;m1.br_redova;i++)
        for(int j=0;j&lt;m1.br_kolona;j++){
            if(fabs(m1.matrica[i][j]-m2.matrica[i][j])&lt;0.00000001)continue;
            else return false;
        }
    return true;
}
template&lt;typename Tip,typename Tip1&gt;
bool operator!=(const GMatrica&lt;Tip&gt; m1,const GMatrica&lt;Tip1&gt; m2){
    if(m1.br_kolona!=m2.br_kolona || m1.br_redova!=m2.br_redova)return true;
    for(int i=0;i&lt;m1.br_redova;i++)
        for(int j=0;j&lt;m1.br_kolona;j++){
            if(fabs(m1.matrica[i][j]-m2.matrica[i][j])&lt;0.00000001)continue;
            else return true;
        }
    return false;
}
template&lt;typename Tip1,typename Tip2&gt;
auto operator*(const GMatrica&lt;Tip1&gt; m1,Tip2 m2)-&gt;GMatrica&lt;decltype(m1(1,1)*m2)&gt;{
    GMatrica&lt;decltype(m2*m1(1,1))&gt; a(m1.DajBrojRedova(),m1.DajBrojKolona(),decltype(m2*m1(1,1))());
    for(int i=0;i&lt;m1.DajBrojRedova();i++){
        for(int j=0;j&lt;m1.DajBrojKolona();j++){
            a(i+1,j+1)=m1(i+1,j+1)*m2;
        }
    }
    return a;
}
template&lt;typename Tip2,typename Tip1&gt;
auto operator*(Tip2 m2,const GMatrica&lt;Tip1&gt; m1)-&gt;GMatrica&lt;decltype(m2*m1(1,1))&gt;{
    GMatrica&lt;decltype(m2*m1(1,1))&gt; a(m1.DajBrojRedova(),m1.DajBrojKolona(),decltype(m2*m1(1,1))());
    for(int i=0;i&lt;m1.DajBrojRedova();i++){
        for(int j=0;j&lt;m1.DajBrojKolona();j++){
            a(i+1,j+1)=m1(i+1,j+1)*m2;
        }
    }
    return a;
}
template&lt;typename Tip1&gt;
std::ostream &amp;operator&lt;&lt;(std::ostream &amp;ispis,const GMatrica&lt;Tip1&gt; &amp;m){
    int a(0);
<a name="9"></a><font color="#FF00FF"><a href="match857-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    if(ispis.width()==0)a=6;
    else a=ispis.width();
	for(int i = 0; i &lt; m.DajBrojRedova();i++) {
		for(int j = 0; j &lt; m.DajBrojKolona(); j++)
</font>			ispis&lt;&lt;std::setw(a)&lt;&lt;m(i+1,j+1)&lt;&lt;std::setw(a);
		ispis &lt;&lt; std::endl;
	}
	return ispis;
}
<a name="14"></a><font color="#FF00FF"><a href="match857-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

template&lt;typename Tip1&gt;
std::istream &amp;operator&gt;&gt;(std::istream &amp;ulaz,GMatrica&lt;Tip1&gt; &amp;matrica1){
    GMatrica&lt;Tip1&gt; matrica(4,4,Tip1());
</font>    int br_kol(0);
    int br_kolfix(0);
    int br_red(0);
    if(ulaz.get()=='['){
    for(int i=1;i&lt;=16;i++){
        if(br_kol&gt;=4){ulaz.setstate(std::ios::failbit);break;}
        if(br_red&gt;=4){ulaz.setstate(std::ios::failbit);break;}
        ulaz&gt;&gt;matrica[br_red][br_kol];
        char znak=char(ulaz.get());
        if(znak==','){br_kol++;}
        else if(znak==';'){
            br_red++;
            if(br_kolfix==0){br_kolfix=br_kol;}
            if(br_kolfix!=0 &amp;&amp; br_kolfix!=br_kol){ulaz.setstate(std::ios::failbit);break;}
            br_kol=0;
        }
        else if(znak==']'){
            matrica1=matrica;
            matrica1.br_kolona=br_kolfix+1;
            matrica1.br_redova=br_red+1;
            break;
        }
        else{ulaz.setstate(std::ios::failbit);break;}
    }}
    else ulaz.setstate(std::ios::failbit);
    return ulaz;
}
int main ()
{
    GMatrica&lt;double&gt; A(3,3,2);
    GMatrica&lt;double&gt;  const B(3,3,4);
    GMatrica&lt;float&gt; g(3,3,4);
    if(A!=B)std::cout&lt;&lt;"A i B nisu isti\n";
    if(B==g)std::cout&lt;&lt;"B i G su isti\n";
    auto c=operator+(A,B);
    operator==(A,B);
    std::cout&lt;&lt;"Testiranje (): "&lt;&lt;c(1,1)&lt;&lt;'\n';
    auto n=B*A;
    n=n*A;
    n=n*g;
    g=g*g;
    g+=3;
    g-=3;
    g*3;
    3*g;
    GMatrica&lt;double&gt; unesi;
    std::cout&lt;&lt;"Unesi matricu:\n";
    std::cin&gt;&gt;unesi;
    std::cout&lt;&lt;"Testiranje []: "&lt;&lt;B[0][0]&lt;&lt;"\n";
    std::cout&lt;&lt;"Testiraj mnozenje oduzimanje i sabiranje A*B-C+A: \n";
    std::cout&lt;&lt;std::setw(7)&lt;&lt;unesi;
	return 0;
}</pre>
</body>
</html>
