<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student5603.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student2526.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 4)
//Autotestovi by Ivona Ivkovic (mail: iivkovic2@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise

#include &lt;iostream&gt;
#include &lt;vector&gt; 
#include &lt;initializer_list&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;

template&lt;typename tip&gt;
class GMatrica{
    int brr;
    int brk;
    tip mat[4][4];
    public:
    GMatrica():brr(0),brk(0){}
    GMatrica(int brr,int brk,tip vrijednost=tip());
    template&lt;typename tip1&gt;
    GMatrica(const GMatrica&lt;tip1&gt; &amp;m); 
    template&lt;typename tip1&gt;
    GMatrica(tip1 **m);
<a name="0"></a><font color="#FF0000"><a href="match644-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    GMatrica(std::vector&lt;std::vector&lt;tip&gt;&gt; v);
    GMatrica(std::initializer_list&lt;std::initializer_list&lt;tip&gt;&gt; l);
    int DajBrojRedova() const{return brr;}
    int DajBrojKolona() const{return brk;}
    template&lt;typename tip1,typename tip2&gt;
    friend auto operator +(const GMatrica&lt;tip1&gt;&amp; m1,const GMatrica&lt;tip2&gt; &amp;m2)-&gt;GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt;;
</font><a name="9"></a><font color="#FF00FF"><a href="match644-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    template&lt;typename tip1,typename tip2&gt;
    friend auto operator -(const GMatrica&lt;tip1&gt;&amp; m1,const GMatrica&lt;tip2&gt; &amp;m2)-&gt;GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt;;
</font><a name="12"></a><font color="#0000FF"><a href="match644-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    template&lt;typename tip1,typename tip2&gt;
    friend auto operator *(const GMatrica&lt;tip1&gt;&amp; m1,const GMatrica&lt;tip2&gt; &amp;m2)-&gt;GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt;;
</font>    template&lt;typename tip1,typename tip2&gt;
    friend auto operator *(const GMatrica&lt;tip1&gt;&amp; m1,tip2 n)-&gt;GMatrica&lt;decltype(m1[0][0]+n)&gt;;
    template&lt;typename tip1,typename tip2&gt;
    friend auto operator *(tip2 n,const GMatrica&lt;tip1&gt;&amp; m1)-&gt;GMatrica&lt;decltype(m1[0][0]+n)&gt;;
    tip* operator[](int j){ return mat[j];}
    const tip* const operator [] (int j)const { return mat[j];}
    template&lt;typename tip1&gt;
    GMatrica &amp;operator -=(const GMatrica&lt;tip1&gt;&amp;m2);
    template&lt;typename tip1&gt;
    GMatrica &amp;operator +=(const GMatrica&lt;tip1&gt;&amp;m2);
    template&lt;typename tip1&gt;
    GMatrica &amp;operator *=(const GMatrica&lt;tip1&gt;&amp;m2);
    template&lt;typename tip1,typename tip2&gt;
<a name="10"></a><font color="#FF0000"><a href="match644-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    friend bool operator !=(const GMatrica&lt;tip1&gt; &amp;m1,const GMatrica&lt;tip2&gt; &amp;m2);
    template&lt;typename tip1,typename tip2&gt;
    friend bool operator ==(const GMatrica&lt;tip1&gt; &amp;m1,const GMatrica&lt;tip2&gt; &amp;m2);
    tip&amp; operator ()(int i,int j);
</font><a name="6"></a><font color="#00FF00"><a href="match644-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    tip operator ()(int i,int j)const;
    template&lt;typename tip1&gt;
    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, GMatrica&lt;tip1&gt; &amp;m);
</font>    template&lt;typename tip1&gt;
    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;tok,const GMatrica&lt;tip1&gt; &amp;m);
    template&lt;typename tip1&gt;
    GMatrica &amp;operator -=(tip1 n);
    template&lt;typename tip1&gt;
    GMatrica &amp;operator +=(tip1 n);
    template&lt;typename tip1&gt;
    GMatrica &amp;operator *=(tip1 n);
    
};
template&lt;typename tip1&gt;
std::istream &amp;operator&gt;&gt;(std::istream &amp;tok, GMatrica&lt;tip1&gt; &amp;m){
    tok&gt;&gt;std::ws;
    if(tok.peek()!='['){ tok.setstate(std::ios::failbit); return tok;}
    int i=0,j=0; char znak;
    tok&gt;&gt;znak; int kolone[4];
    while(true){
        if(j&gt;4||i&gt;4){ tok.setstate(std::ios::failbit); return tok;}
        if(!(tok&gt;&gt;m[i][j])){ tok.setstate(std::ios::failbit); return tok;}
        if(tok.peek()!=','&amp;&amp;tok.peek()!=';'&amp;&amp;tok.peek()!=']'){ tok.setstate(std::ios::failbit); return tok;}
        tok&gt;&gt;znak;
        j++;
        if(znak==';'){kolone[i]=j;i++; j=0;}
        if(znak==']') break;
    }
    for(int z=0;z&lt;i;z++) if(kolone[0]!=kolone[z]){ tok.setstate(std::ios::failbit); return tok;}
    m.brr=i+1;
    m.brk=kolone[0];
    if(tok.peek()!=' '&amp;&amp;tok.peek()!='\n'&amp;&amp;tok.peek()!='\t'&amp;&amp;tok.peek()!='\v'&amp;&amp;tok.peek()!='\f'&amp;&amp;tok.peek()!=EOF)  tok.setstate(std::ios::failbit);
    return tok;
}
template&lt;typename tip1&gt;
std::ostream &amp;operator &lt;&lt;(std::ostream &amp;tok,const GMatrica&lt;tip1&gt; &amp;m){
    auto sirina(tok.width()); if(sirina&lt;6) sirina=6;
<a name="8"></a><font color="#00FFFF"><a href="match644-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    for(int i=0;i&lt;m.brr;i++){
        for(int j=0;j&lt;m.brk;j++) tok&lt;&lt;std::setw(sirina)&lt;&lt;m[i][j];
</font>        std::cout&lt;&lt;std::endl;
    }
    return tok;
}
template&lt;typename tip&gt;
tip&amp; GMatrica&lt;tip&gt;::operator ()(int i,int j){ 
<a name="5"></a><font color="#FF0000"><a href="match644-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    if(i&gt;brr||i&lt;1||j&gt;brk||j&lt;1) throw std::range_error("Nedozvoljen indeks");
    return mat[i-1][j-1];
}
template&lt;typename tip&gt;
tip GMatrica&lt;tip&gt;::operator ()(int i,int j)const { 
    if(i&gt;brr||i&lt;1||j&gt;brk||j&lt;1) throw std::range_error("Nedozvoljen indeks");
</font>    return mat[i-1][j-1];
}
template&lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(int brr,int brk,tip vrijednost):brr(brr),brk(brk){
    if(brr&lt;0||brr&gt;4||brk&lt;0||brk&gt;4) throw std::logic_error("Ilegalan format matrice");
<a name="13"></a><font color="#00FFFF"><a href="match644-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    for(int i=0;i&lt;brr;i++) for(int j=0;j&lt;brk;j++) mat[i][j]=vrijednost;
}
template&lt;typename tip&gt;
template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;::GMatrica(const GMatrica&lt;tip1&gt; &amp;m):brr(m.DajBrojRedova()),brk(m.DajBrojKolona()){
</font><a name="14"></a><font color="#FF00FF"><a href="match644-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    for(int i=0;i&lt;brr;i++) for(int j=0;j&lt;brk;j++) mat[i][j]=m[i][j];
}
template&lt;typename tip&gt;
template&lt;typename tip1&gt;
</font>GMatrica&lt;tip&gt;::GMatrica(tip1 **m):brr(4),brk(4){
    for(int i=0;i&lt;4;i++)for(int j=0;j&lt;4;j++) mat[i][j]=m[i][j];
}
template&lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(std::vector&lt;std::vector&lt;tip&gt;&gt; v){
        for(int i=0;i&lt;v.size();i++) if(v[0].size()!=v[i].size()||v[i].size()&gt;4||v.size()&gt;4) throw std::logic_error("Ilegalan format matrice");
<a name="3"></a><font color="#00FFFF"><a href="match644-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        for(int i=0;i&lt;v.size();i++) for(int j=0;j&lt;v[i].size();j++) mat[i][j]=v[i][j];
        brr=v.size(); 
</font>        if(v.size()!=0) brk=v[0].size();
        else brk=0;
}
template &lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(std::initializer_list&lt;std::initializer_list&lt;tip&gt;&gt; l){
    for(auto it=l.begin();it!=l.end();it++){
        auto it2=l.begin();
        if((*it2).size()!=(*it).size()||(*it).size()&gt;4||l.size()&gt;4)throw std::logic_error("Ilegalan format matrice");
    }
    int i(0),j(0);
    for(auto it=l.begin();it!=l.end();it++){
        for(auto it2=(*it).begin();it2!=(*it).end();it2++){ mat[i][j]=*it2; j++;}
        i++; j=0;
    }
    brr=l.size(); 
    if(l.size()!=0)brk=(*(l.begin())).size();
    else brk=0;
}
template&lt;typename tip1,typename tip2&gt;
auto operator +(const GMatrica&lt;tip1&gt;&amp; m1,const GMatrica&lt;tip2&gt; &amp;m2)-&gt;GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt;{
    if(m1.brr!=m2.brr||m1.brk!=m2.brk) throw std::domain_error("Nedozvoljena operacija");
    GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt; m(m1.brr,m2.brk);
    for(int i=0;i&lt;m1.brr;i++) for(int j=0;j&lt;m1.brk;j++) m[i][j]=m1[i][j]+m2[i][j];
    return m;
}
template&lt;typename tip,typename tip1&gt;
auto operator -(const GMatrica&lt;tip&gt;&amp; m1,const GMatrica&lt;tip1&gt; &amp;m2)-&gt;GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt;{
    if(m1.brr!=m2.brr||m1.brk!=m2.brk) throw std::domain_error("Nedozvoljena operacija");
    GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt; m(m1.brr,m2.brk);
    for(int i=0;i&lt;m1.brr;i++) for(int j=0;j&lt;m1.brk;j++) m[i][j]=m1[i][j]-m2[i][j];
    return m;
}
template&lt;typename tip1,typename tip2&gt;
auto operator *(const GMatrica&lt;tip1&gt;&amp; m1,const GMatrica&lt;tip2&gt; &amp;m2)-&gt;GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt;{
    if(m1.brk!=m2.brr)throw std::domain_error("Nedozvoljena operacija");
    GMatrica&lt;decltype(m1[0][0]+m2[0][0])&gt; m(m1.brr,m2.brk);
    for(int i=0;i&lt;m1.brr;i++){
        for(int j=0;j&lt;m2.brk;i++){
            for(int z=0;z&lt;m2.brr;z++) m[i][j]+=m1[i][z]*m2[z][j];
        }
    }
}
template&lt;typename tip1,typename tip2&gt;
auto operator *(const GMatrica&lt;tip1&gt;&amp; m1,tip2 n)-&gt;GMatrica&lt;decltype(m1[0][0]+n)&gt;{
    GMatrica&lt;decltype(m1[0][0]+n)&gt; m(m1);
    for(int i=0;i&lt;m.brr;i++)for(int j=0;j&lt;m.brk;j++) m[i][j]*=n;
    return m;
}
template&lt;typename tip1,typename tip2&gt;
auto operator *(tip2 n,const GMatrica&lt;tip1&gt;&amp; m1)-&gt;GMatrica&lt;decltype(m1[0][0]+n)&gt;{
    GMatrica&lt;decltype(m1[0][0]+n)&gt; m(m1);
    for(int i=0;i&lt;m.brr;i++)for(int j=0;j&lt;m.brk;j++) m[i][j]*=n;
    return m;
}
<a name="2"></a><font color="#0000FF"><a href="match644-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

template&lt;typename tip&gt;
template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator *=(tip1 n){
    for(int i=0;i&lt;brr;i++) for(int j=0;j&lt;brk;j++) mat[i][j]*=n;
</font>    return *this;
}
template&lt;typename tip&gt;
template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator +=(tip1 n){
    for(int i=0;i&lt;brr;i++) for(int j=0;j&lt;brk;j++) mat[i][j]+=n;
    return *this;
}
template&lt;typename tip&gt;
template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator -=(tip1 n){
    for(int i=0;i&lt;brr;i++) for(int j=0;j&lt;brk;j++) mat[i][j]-=n;
    return *this;
}
<a name="11"></a><font color="#00FF00"><a href="match644-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

  template&lt;typename tip&gt;
  template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator*= (const GMatrica&lt;tip1&gt; &amp;m2){
</font>    if((*this).brk!=m2.brr)throw std::domain_error("Nedozvoljena operacija");
    auto m1(*this);
    for(int i=0;i&lt;m1.brr;i++){
        for(int j=0;j&lt;m2.brk;i++){
            mat[i][j]=0;
            for(int z=0;z&lt;m2.brr;z++) mat[i][j]+=m1[i][z]*m2[z][j];
        }
    }
    brr=m1.brr; brk=m2.brk;
    return *this;
}
<a name="4"></a><font color="#FF00FF"><a href="match644-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

template&lt;typename tip&gt;
template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator +=(const GMatrica&lt;tip1&gt;&amp;m2){
    if(brr!=m2.brr||brk!=m2.brk) throw std::domain_error("Nedozvoljena operacija");
</font><a name="1"></a><font color="#00FF00"><a href="match644-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    for(int i=0;i&lt;m2.brr;i++) for(int j=0;j&lt;m2.brk;j++) mat[i][j]+=m2[i][j];
    return *this;
}
template &lt;typename tip&gt;
template&lt;typename tip1&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator -=(const GMatrica&lt;tip1&gt;&amp;m2){
    if(brr!=m2.brr||brk!=m2.brk) throw std::domain_error("Nedozvoljena operacija");
</font>    for(int i=0;i&lt;m2.brr;i++) for(int j=0;j&lt;m2.brk;j++) mat[i][j]-=m2[i][j];
    return *this;
}
<a name="15"></a><font color="#FF0000"><a href="match644-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

template&lt;typename tip1, typename tip2&gt;
bool operator ==(const GMatrica&lt;tip1&gt; &amp;m1,const GMatrica&lt;tip2&gt; &amp;m2){
    if(m1.brr!=m2.brr||m1.brk!=m2.brk) return false;
</font><a name="7"></a><font color="#0000FF"><a href="match644-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    for(int i=0;i&lt;m1.brr;i++) for(int j=0;j&lt;m1.brk;j++) if(m1[i][j]!=m2[i][j]) return false;
    return true;
}
template&lt;typename tip1,typename tip2&gt;
bool operator !=(const GMatrica&lt;tip1&gt; &amp;m1,const GMatrica&lt;tip2&gt; &amp;m2){
</font>    if(m1.brr!=m2.brr||m1.brk!=m2.brk) return true;
    for(int i=0;i&lt;m1.brr;i++) for(int j=0;j&lt;m1.brk;j++) if(m1[i][j]!=m2[i][j]) return true;
    return false;
}
int main ()
{ 
GMatrica&lt;int&gt; m1({{1, 2}, {3, 4}});
   GMatrica&lt;int&gt; m2({{1, 2}, {3, 4}});
   GMatrica&lt;double&gt; m3({{1, 2}, {3, 5}});
  GMatrica&lt;int&gt; m(m3);
}</pre>
</body>
</html>
