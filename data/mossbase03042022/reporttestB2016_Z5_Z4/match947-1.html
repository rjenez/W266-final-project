<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student3807.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student2160.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 4)
//Autotestovi by Ivona Ivkovic (mail: iivkovic2@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;iomanip&gt;
template&lt;typename tip&gt;
class GMatrica
{
    tip mat[4][4];
    int redovi, kolone;
public:
    GMatrica() : redovi(0), kolone(0) {}
    GMatrica(int br, int bk, tip el = {});
    template&lt;typename tip2&gt;
    GMatrica(GMatrica&lt;tip2&gt; mat2);
    GMatrica(tip niz[4][4]);
    template&lt;typename tip2&gt;
<a name="3"></a><font color="#00FFFF"><a href="match947-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    GMatrica(std::initializer_list&lt;std::initializer_list&lt;tip2&gt;&gt; l);

    GMatrica(std::vector&lt;std::vector&lt;tip&gt;&gt; vek);
    int DajBrojRedova() const { return redovi; }
    int DajBrojKolona() const { return kolone; }
    template&lt;typename tip1, typename tip2&gt;
    friend auto operator + (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] + m2.mat[0][0])&gt;::type&gt;;
</font>    template&lt;typename tip1, typename tip2&gt;
    friend auto operator - (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] - m2.mat[0][0])&gt;::type&gt;;

    
    auto operator * (double a) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(tip() * double())&gt;::type&gt;
    {
        GMatrica&lt;typename std::remove_reference&lt;decltype(mat[0][0] * double())&gt;::type&gt; m3(DajBrojRedova(), DajBrojKolona());
        for(int i = 0; i &lt; DajBrojRedova(); i++)
            for(int j = 0; j &lt; DajBrojKolona(); j++)
                m3.mat[i][j] = mat[i][j] * a;
        return m3;
    }
    template&lt;typename tip1&gt;
    friend auto operator * (double a, const GMatrica&lt;tip1&gt; &amp;m1) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(double() * tip1())&gt;::type&gt;
;
        template&lt;typename tip1&gt;
     auto operator * (const GMatrica&lt;tip1&gt; &amp;m2) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(mat[0][0] * m2.mat[0][0])&gt;::type&gt;
    {
        if(DajBrojKolona() != m2.DajBrojRedova())
            throw std::domain_error("Nedozvoljena operacija");
    		
        GMatrica&lt;typename std::remove_reference&lt;decltype(mat[0][0] * m2.mat[0][0])&gt;::type&gt; m3(DajBrojRedova(), m2.DajBrojKolona());
    	
        for(int i = 0; i &lt; DajBrojRedova(); i++)
            for(int j = 0; j &lt; m2.DajBrojKolona(); j++)
                for(int k = 0; k &lt; DajBrojRedova(); k++)
                    m3.mat[i][j] += mat[i][k] * m2.mat[k][j];
    				
    	return m3;
    } 
<a name="5"></a><font color="#FF0000"><a href="match947-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    template&lt;typename tip2&gt;
    GMatrica &amp;operator += (const GMatrica&lt;tip2&gt; &amp;m2);
    template&lt;typename tip2&gt;
    GMatrica &amp;operator -= (const GMatrica&lt;tip2&gt; &amp;m2);
    template&lt;typename tip2&gt;
    GMatrica &amp;operator *= (const GMatrica&lt;tip2&gt; &amp;m2)
</font>    {
        if(kolone != m2.DajBrojRedova())
    		throw std::domain_error("Nedozvoljena operacija");
    		
    	GMatrica&lt;tip&gt; m3 = *this;
    	for(int i = 0; i &lt; redovi; i++)
    		for(int j = 0; j &lt; m2.DajBrojKolona(); j++)
    			for(int k = 0; k &lt; redovi; k++)
    				m3[i][j] += *this[i][k] * m2[k][j];
    				
    	*this = m3;
    	return *this;
    }
    GMatrica &amp;operator *= (double a)
    {
 
        for(int i = 0; i &lt; DajBrojRedova(); i++)
            for(int j = 0; j &lt; DajBrojKolona(); j++)
                mat[i][j] = mat[i][j] * a;
<a name="4"></a><font color="#FF00FF"><a href="match947-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        return *this;
    }
    template&lt;typename tip1, typename tip2&gt;
    friend bool operator == (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2);
    template&lt;typename tip1, typename tip2&gt;
    friend bool operator != (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2);
</font>    tip &amp;operator () (int a, int b)
    {
        if(a &lt;= 0 || b &lt;= 0)
            throw std::range_error("Nedozvoljen indeks");
            
        return mat[a - 1][b - 1];
    }
    tip operator () (int a, int b) const
    {
        if(a &lt;= 0 || b &lt;= 0)
            throw std::range_error("Nedozvoljen indeks");
            
        return mat[a - 1][b - 1];
    }
    const tip *operator [] (int a) const  { return mat[a]; }
    template&lt;typename tip2&gt;
    friend std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok, const GMatrica&lt;tip2&gt; &amp;m);
    template&lt;typename tip2&gt;
    friend std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, GMatrica&lt;tip2&gt; &amp;m);
    
    
        template&lt;typename Tip2&gt;
    friend class GMatrica;
    
    
};
<a name="0"></a><font color="#FF0000"><a href="match947-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

template&lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(int br, int bk, tip el) : redovi(br), kolone(bk)
{
    if(br &lt; 0 || bk &lt; 0 || br &gt; 4 || bk &gt; 4)
        throw std::logic_error("Ilegalan format matrice");
            
    for(int i = 0; i &lt; br; i++)
        for(int j = 0; j &lt; bk; j++)
            mat[i][j] = el;
</font>}

template&lt;typename tip&gt;
template&lt;typename tip2&gt;
GMatrica&lt;tip&gt; :: GMatrica(GMatrica&lt;tip2&gt; m)
{
    redovi = m.DajBrojRedova();
    kolone = m.DajBrojKolona();
    
    for(int i = 0; i &lt; m.DajBrojRedova(); i++)
        for(int j = 0; j &lt; m.DajBrojKolona(); j++)
            mat[i][j] = m[i][j];
}
template&lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(tip niz[4][4])
{
    redovi = 4;
    kolone = 4;
    for(int i = 0; i &lt; 4; i++)
        for(int j = 0; j &lt; 4; j++)
            mat[i][j] = niz[i][j];
}
template&lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(std::vector&lt;std::vector&lt;tip&gt;&gt; vek)
{
    redovi = vek.size();
    kolone = vek.at(0).size();
    
    for(int i = 1; i &lt; vek.size(); i++)
        if(vek.size() &gt; 4 || vek.at(0).size() != vek.at(i).size() || vek.at(i).size() &gt; 4)
            throw std::logic_error("Ilegalan format matrice");
                
    for(int i = 0; i &lt; vek.size(); i++)
        for(int j = 0; j &lt; vek.at(i).size(); j++)
            mat[i][j] = vek.at(i).at(j);
}
template&lt;typename tip&gt;
template&lt;typename tip2&gt;
GMatrica&lt;tip&gt;::GMatrica(std::initializer_list&lt;std::initializer_list&lt;tip2&gt;&gt; l) 
{
    if(l.size() &gt; 4)
        throw std::logic_error("Ilegalan format matrice");
        
    if(l.size() &gt; 0)
    {
        for(auto i : l)
            if(i.size() != (*l.begin()).size() || i.size() &gt; 4)
                throw std::logic_error("Ilegalan format matrice");
    }
    redovi = 0;
    kolone = 0;
    for(auto i : l)
    {
        kolone = 0;
        for(auto s : i)
        {
            mat[redovi][kolone] = s;
            kolone++;
        }
        redovi++;
    }
}
template&lt;typename tip1, typename tip2&gt;
auto operator + (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] + m2.mat[0][0])&gt;::type&gt;
{
    if(m1.DajBrojRedova() != m2.DajBrojRedova() || m1.DajBrojKolona() != m2.DajBrojKolona())
        throw std::domain_error("Nedozvoljena operacija");
        
    GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] + m2.mat[0][0])&gt;::type&gt; m3(m1.DajBrojRedova(), m1.DajBrojKolona());
    for(int i = 0; i &lt; m1.DajBrojRedova(); i++)
        for(int j = 0; j &lt; m1.DajBrojKolona(); j++)
<a name="7"></a><font color="#0000FF"><a href="match947-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            m3.mat[i][j] = m1.mat[i][j] + m2.mat[i][j];
            
    return m3;
}
template&lt;typename tip1, typename tip2&gt;
auto operator - (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] - m2.mat[0][0])&gt;::type&gt;
</font>{
    if(m1.DajBrojRedova() != m2.DajBrojRedova() || m1.DajBrojKolona() != m2.DajBrojKolona())
        throw std::domain_error("Nedozvoljena operacija");
        
    GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] - m2.mat[0][0])&gt;::type&gt; m3(m1.DajBrojRedova(), m1.DajBrojKolona());
    for(int i = 0; i &lt; m1.DajBrojRedova(); i++)
        for(int j = 0; j &lt; m1.DajBrojKolona(); j++)
            m3.mat[i][j] = m1.mat[i][j] - m2.mat[i][j];
            
<a name="6"></a><font color="#00FF00"><a href="match947-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    return m3;
}
//template&lt;typename tip1, typename tip2&gt;
//auto operator * (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] * m2.mat[0][0])&gt;::type&gt;

//template&lt;typename tip1&gt;
//auto operator * (const GMatrica&lt;tip1&gt; &amp;m1, double a) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(tip1() * double())&gt;::type&gt;

    
template&lt;typename tip&gt;
template&lt;typename tip2&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator += (const GMatrica&lt;tip2&gt; &amp;m2)
{
    if(redovi != m2.DajBrojRedova() || kolone != m2.DajBrojKolona())
        throw std::domain_error("Nedozvoljena operacija");
</font>        
    for(int i = 0; i &lt; redovi; i++)
        for(int j = 0; j &lt; kolone; j++)
<a name="2"></a><font color="#0000FF"><a href="match947-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            this-&gt;mat[i][j] += m2.mat[i][j];
    return *this;
}
template&lt;typename tip&gt;
template&lt;typename tip2&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator -= (const GMatrica&lt;tip2&gt; &amp;m2)
{
    if(redovi != m2.DajBrojRedova() || kolone != m2.DajBrojKolona())
        throw std::domain_error("Nedozvoljena operacija");
</font>        
    for(int i = 0; i &lt; redovi; i++)
        for(int j = 0; j &lt; kolone; j++)
            this-&gt;mat[i][j] -= m2.mat[i][j];
    return *this;
}
//template&lt;typename tip&gt;
//template&lt;typename tip2&gt;
//GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator *= (const GMatrica&lt;tip2&gt; &amp;m2)

<a name="9"></a><font color="#FF00FF"><a href="match947-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

template&lt;typename tip1, typename tip2&gt;
bool operator == (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2)
{
    if(m1.DajBrojRedova() != m2.DajBrojRedova() || m1.DajBrojKolona() != m2.DajBrojKolona())
</font>        throw std::domain_error("Nedozvoljena operacija");

<a name="1"></a><font color="#00FF00"><a href="match947-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    for(int i = 0; i &lt; m1.DajBrojRedova(); i++)
        for(int j = 0; j &lt; m1.DajBrojKolona(); j++)
            if(m1[i][j] != m2[i][j])
                return false;
                
    return true;
}
template&lt;typename tip1, typename tip2&gt;
bool operator != (const GMatrica&lt;tip1&gt; &amp;m1, const GMatrica&lt;tip2&gt; &amp;m2)
</font>{
    if(m1.DajBrojKolona() != m2.DajBrojKolona() || m1.DajBrojRedova() != m2.DajBrojRedova())
        throw std::domain_error("Nedozvoljena operacija");
        
    return !(m1 == m2);
}
template&lt;typename tip2&gt;
std::ostream &amp;operator &lt;&lt; (std::ostream &amp;tok, const GMatrica&lt;tip2&gt; &amp;m)
{
    int a = tok.width() &lt; 6 ? 6 : tok.width();
    for(int i = 0; i &lt; m.DajBrojRedova(); i++)
    {
        for(int j = 0; j &lt; m.DajBrojKolona(); j++)
            tok &lt;&lt; std::setw(a) &lt;&lt; m[i][j];
        tok &lt;&lt; std::endl;
    }
    return tok;
}
    template&lt;typename tip1&gt;
    auto operator * (double a, const GMatrica&lt;tip1&gt; &amp;m1) -&gt; GMatrica&lt;typename std::remove_reference&lt;decltype(double() * tip1())&gt;::type&gt;
    {
        GMatrica&lt;typename std::remove_reference&lt;decltype(m1.mat[0][0] * double())&gt;::type&gt; m3(m1.DajBrojRedova(), m1.DajBrojKolona());
        for(int i = 0; i &lt; m1.DajBrojRedova(); i++)
            for(int j = 0; j &lt; m1.DajBrojKolona(); j++)
                m3.mat[i][j] = m1.mat[i][j] * a;
        return m3;
        
        }
<a name="8"></a><font color="#00FFFF"><a href="match947-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

template&lt;typename tip2&gt;
std::istream &amp;operator &gt;&gt; (std::istream &amp;tok, GMatrica&lt;tip2&gt; &amp;m)
{
    char znak;
    tok &gt;&gt; std::ws;
</font>    tok &gt;&gt; znak;
    if(znak != '[')
    {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    for (int j = 0; j &lt; 4; j++)
    {
        m.kolone = 0;
        for(int i = 0; i &lt; 4; i++)
        {
            tip2 br; 
            char z;
            tok &gt;&gt; br &gt;&gt; z;
            if (tok &amp;&amp; z == ';') {break;}
            if(!tok || (z != ',' &amp;&amp; z != ';'))
            {
                tok.setstate(std::ios::failbit);
                return tok;
            }
            else if(z == ',')
                m.mat[m.redovi][m.kolone++] = br;
        }
        if (!tok) break;
        m.redovi++;
    }
    char z2;
    tok &gt;&gt; z2;
    if(z2 != ']')
    {
        tok.setstate(std::ios::failbit);
        return tok;
    }
    return tok;
}
int main ()
{ 
    GMatrica&lt;int&gt; m;
    std::cin &gt;&gt; m;
    if (!std::cin) std::cout &lt;&lt; "Neispravno";
    else std::cout &lt;&lt; m;
   /* GMatrica&lt;int&gt; m1({{1, 2}, {3, 4}});
   GMatrica&lt;int&gt; m2({{1, 2}, {3, 4}});
   std::cout &lt;&lt;  m1 &lt;&lt; std::endl;
   m1 += m2;
   std::cout &lt;&lt;  m1 &lt;&lt; std::endl;
   m1 -= m2; 
   std::cout &lt;&lt;  m1 &lt;&lt; std::endl;
   m1 *= 2;
   std::cout &lt;&lt;  m1 &lt;&lt; std::endl;
   return 0;*/
}</pre>
</body>
</html>
