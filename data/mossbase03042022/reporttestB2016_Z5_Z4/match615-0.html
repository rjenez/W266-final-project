<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student8363.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student8363.cpp<p></p><pre>
/B16/17 (ZadaÄ‡a 5, Zadatak 4)
//Autotestovi by Ivona Ivkovic (mail: iivkovic2@etf.unsa.ba)
//Za autotestove se obracati *iskljucivo* osobi koja ih pise
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;initializer_list&gt;

using std::cin;
using std::cout;
using std::endl;
using std::vector;

void throwerr(int i=0) {
    if(!i)throw std::logic_error("Ilegalan format matrice");
    else if(i==1)throw std::domain_error("Nedozvoljena operacija");
}
template &lt;typename T&gt;
    class GMatrica{
        T m[4][4]{};
        int br_r=0, br_k=0;
        void checkBound(int a, int b){if(a&lt;0 || b&lt;0 || a&gt;4 || b&gt;4)throwerr();}
        void checkRange(int a, int b){if(a&gt;br_r || a&lt;1 || b&gt;br_k || b&lt;1)throw std::range_error("Neispravan indeks");}
    public: 
        int DajBrojKolona() const { return br_k;}
        int DajBrojRedova() const { return br_r;}
        GMatrica();
        GMatrica(int r, int k, T e = T());
        GMatrica(vector&lt;vector&lt;T&gt;&gt;);
        GMatrica(std::initializer_list&lt;std::initializer_list&lt;T&gt;&gt;);
        GMatrica(T pm[4][4]);
        T *operator [](int a) {return m[a];}
        T *operator [](int a) const {return m[a];}
        T &amp;operator ()(int a, int b){checkRange(a,b); return m[a-1][b-1];}
        T operator ()(int a, int b) const {checkRange(a,b);return m[a-1][b-1];}
<a name="7"></a><font color="#0000FF"><a href="match615-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        template &lt;typename T2&gt;
        GMatrica &amp;operator += (const GMatrica&lt;T2&gt; &amp;b);
        template &lt;typename T2&gt;
        GMatrica &amp;operator -= (const GMatrica&lt;T2&gt; &amp;b);
        template &lt;typename T2&gt;
        GMatrica &amp;operator *= (T2 k);
</font>        template &lt;typename T2&gt;
        GMatrica &amp;operator *=(const GMatrica&lt;T2&gt;&amp;);
        template &lt;typename T2&gt;
        friend std::ostream &amp;operator &lt;&lt; (std::ostream &amp;out,const GMatrica&lt;T2&gt;&amp;);
        template &lt;typename T2&gt;
        friend std::istream &amp;operator &gt;&gt; (std::istream &amp;in, GMatrica&lt;T2&gt; &amp;);
<a name="1"></a><font color="#00FF00"><a href="match615-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        template &lt;typename T1, typename T2&gt;
            friend auto operator + (const GMatrica&lt;T1&gt; &amp;a, const GMatrica&lt;T2&gt; &amp;b)-&gt;GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt;;
        template &lt;typename T1, typename T2&gt;
            friend auto operator - (const GMatrica&lt;T1&gt; &amp;a, const GMatrica&lt;T2&gt; &amp;b)-&gt;GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt;;
</font><a name="12"></a><font color="#0000FF"><a href="match615-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        template &lt;typename T1, typename T2&gt;
            friend auto operator * (const GMatrica&lt;T1&gt; &amp;a, const GMatrica&lt;T2&gt; &amp;b)-&gt;GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt;;
</font>        template &lt;typename T1, typename T2&gt;
<a name="2"></a><font color="#0000FF"><a href="match615-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            friend auto operator * (const GMatrica&lt;T1&gt; &amp;a,T2 k)-&gt;GMatrica&lt;decltype (a.m[0][0]*k)&gt;{
                GMatrica&lt;decltype (a.m[0][0]*k)&gt; izlaz(a.br_r,a.br_k);
                for(int i=0; i&lt;a.br_r; i++)
</font>                    for(int j=0; j&lt;a.br_k; j++)
                        izlaz.m[i][j]=a.m[i][j]*k;
<a name="5"></a><font color="#FF0000"><a href="match615-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                return izlaz;
            }
     };
template &lt;typename T&gt;
    template &lt;typename T2&gt;
        GMatrica&lt;T&gt;&amp; GMatrica&lt;T&gt;::operator += (const GMatrica&lt;T2&gt; &amp;b){
            if(br_k != b.br_k || br_r != b.br_r)
</font>                throwerr(1);
<a name="0"></a><font color="#FF0000"><a href="match615-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

            for (int i = 0; i &lt; br_r; i++) {
                for(int j=0;j&lt;br_k;j++)
                    m[i][j]+=b.m[i][j];
            }
            return *this;
            }
template &lt;typename T&gt; 
    template &lt;typename T2&gt;
        GMatrica&lt;T&gt;&amp; GMatrica&lt;T&gt;::operator -= (const GMatrica&lt;T2&gt; &amp;b){
            if(br_k!=b.br_k || br_r!=b.br_r)throwerr(1);
</font>            for(int i=0;i&lt;br_r;i++)
                for(int j=0;j&lt;br_k;j++)
                    this-&gt;m[i][j]-=b.m[i][j];
            return *this;
        }
<a name="4"></a><font color="#FF00FF"><a href="match615-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

template &lt;typename T&gt;
    template &lt;typename T2&gt;
        GMatrica&lt;T&gt;&amp; GMatrica&lt;T&gt;::operator *=(T2 k){
            for (int i = 0; i &lt; br_r; i++) {
                for(int j=0; j &lt; br_k; j++)
                    m[i][j]*=k;
</font>            }  
            return *this;
        }
<a name="11"></a><font color="#00FF00"><a href="match615-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

template &lt;typename T&gt;
    template &lt;typename T2&gt;
        GMatrica&lt;T&gt;&amp; GMatrica&lt;T&gt;::operator *=(const GMatrica&lt;T2&gt; &amp;b){
</font>            if(br_k != b.br_r)throwerr(1);
            for (int i = 0; i &lt; br_r; i++) {
                for(int j=0;j&lt;br_k;j++){
                    T2 e = 0;
                    for(int k=0; k&lt;br_r;k++)
                        e+=m[i][k]*b.m[k][j];
                    m[i][j]=e;
                }
            }
            return *this;
        }
template &lt;typename T&gt;
<a name="3"></a><font color="#00FFFF"><a href="match615-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    std::ostream &amp;operator &lt;&lt; (std::ostream &amp;out, const GMatrica&lt;T&gt; &amp;a){
        int w = out.width();
        if(w&lt;6)w=6;
        for (int i = 0; i &lt; a.br_r; i++) {
            for(int j = 0; j &lt; a.br_k; j++)
</font>                out&lt;&lt;std::setw(6)&lt;&lt;a.m[i][j];
            out&lt;&lt;'\n';
        }
        return out;
    }
template &lt;typename T&gt;
    std::istream &amp;operator &gt;&gt; (std::istream &amp;in, GMatrica&lt;T&gt; &amp;a){
        in&gt;&gt;std::ws;
        if(in.get()!='['){in.setstate(std::ios::failbit);return in;}
        int kol = -1;
<a name="8"></a><font color="#00FFFF"><a href="match615-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        GMatrica&lt;T&gt; tmp(a.br_k,a.br_r);
        for (int i = 0; i &lt; 4; i++) {
            for(int j=0; j&lt; 4; j++){
                in&gt;&gt;tmp.m[i][j];
</font>                if(in.peek()==';'){
                    in.get();
                    if(kol==-1)kol = j;
                    else if(j!=kol){in.setstate(std::ios::failbit);return in;}
                    break;
                }
                else if(in.peek()==']'){
                    in.get();
                    if(kol != j &amp;&amp; kol !=-1){in.setstate(std::ios::failbit);return in;}
                    a=tmp;
                    a.br_k=j+1;
                    a.br_r=i+1;
                    return in;
                }
                else if(in.peek()!=','){in.setstate(std::ios::failbit); return in;}
                in.get();
            }
        }
    }
template &lt;typename T&gt;
    GMatrica&lt;T&gt;::GMatrica(){}
template &lt;typename T&gt;
    GMatrica&lt;T&gt;::GMatrica(int r, int k, T e){
        checkBound(r,k);
        br_k = k; br_r = r;
        for (int i = 0; i &lt; br_r; i++) {
            for(int j=0; j&lt; br_k; j++)
                m[i][j]=e;
        }
    }
template &lt;typename T&gt;
    GMatrica&lt;T&gt;::GMatrica(vector&lt;vector&lt;T&gt;&gt; v){
        if(!v.size())throwerr();
        else if(v.size() &gt; 4 || v[0].size() &gt; 4 || !v[0].size())throwerr();
        br_r = v.size();
        br_k = v[0].size();
        for (int i = 0; i &lt; br_r; i++) {
            if(v[i].size()!=br_k)throwerr();
            for( int j = 0; j &lt; br_k; j++){
                m[i][j]=v[i][j];
            }
        }
    }
template &lt;typename T&gt;
    GMatrica&lt;T&gt;::GMatrica(std::initializer_list&lt;std::initializer_list&lt;T&gt;&gt; ini){
        br_r = ini.size();
        br_k = ini.begin()-&gt;size();
        checkBound(br_r,br_k);
        int i=0;
        auto it = ini.begin();
        for(;it!=ini.end();it++,i++){
            if(it-&gt;size()!=br_k)throwerr();
            auto e = it-&gt;begin();
<a name="6"></a><font color="#00FF00"><a href="match615-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            for(int j = 0; e!=it-&gt;end();j++,e++){
                m[i][j]=*e;
            }
        }
    }
template &lt;typename T1, typename T2&gt;
     auto operator + (const GMatrica&lt;T1&gt; &amp;a, const GMatrica&lt;T2&gt; &amp;b)-&gt;GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt;{
</font>        if(a.br_r != b.br_r || a.br_k != b.br_k)throwerr(1);
<a name="10"></a><font color="#FF0000"><a href="match615-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        GMatrica&lt;decltype(a.m[0][0] + b.m[0][0])&gt; izlaz(a.br_r,a.br_k);
        for (int i = 0; i &lt; a.br_r; i++) {
</font>            for(int j = 0; j &lt; a.br_k; j++){
<a name="9"></a><font color="#FF00FF"><a href="match615-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                izlaz.m[i][j] = a.m[i][j] + b.m[i][j];
            }
        }
        return izlaz;
    }
template &lt;typename T1, typename T2&gt;
     auto operator - (const GMatrica&lt;T1&gt; &amp;a, const GMatrica&lt;T2&gt; &amp;b)-&gt;GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt;{
</font>         if(a.br_r != b.br_r || a.br_k != b.br_k)throwerr(1);
        GMatrica&lt;decltype(a.m[0][0] + b.m[0][0])&gt; izlaz(a.br_r,a.br_k);
        for (int i = 0; i &lt; a.br_r; i++) {
            for(int j = 0; j &lt; a.br_k; j++){
                izlaz.m[i][j] = a.m[i][j] - b.m[i][j];
            }
        }
        return izlaz;
     }
template &lt;typename T1, typename T2&gt;
    auto operator * (const GMatrica&lt;T1&gt; &amp;a, const GMatrica&lt;T2&gt; &amp;b)-&gt;GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt;{
        if(a.br_k != b.br_r)throwerr(1);
<a name="13"></a><font color="#00FFFF"><a href="match615-1.html#13" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        GMatrica&lt;decltype (a.m[0][0] + b.m[0][0])&gt; izlaz(a.br_r,b.br_k);
        for(int i=0; i&lt; a.br_r ; i++)
            for(int j=0; j&lt;b.br_r; j++)
                for(int k=0;k&lt;a.br_k;k++)
</font>                    izlaz.m[i][j]+=a.m[i][k] * b.m[k][j];
        return izlaz;
    }
int main ()
{
    GMatrica&lt;int&gt; a({{1,1,1},{2,2,2},{5,5,5}}),b({{1,1,0},{2,2,0},{0,0,0}});
    std::cout&lt;&lt;(a+(a+b)*5);
	return 0;
}</pre>
</body>
</html>
