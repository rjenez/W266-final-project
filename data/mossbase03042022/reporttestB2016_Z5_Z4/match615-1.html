<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student8363.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z5/Z4/student2068.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;initializer_list&gt;
#include &lt;iomanip&gt;

template &lt;typename tip_pok&gt;
class Pokazivac {
    const tip_pok *p;
public:
    Pokazivac(const tip_pok *novi) : p(novi) {}
    tip_pok operator [](int a) const { return p[a]; }
    operator Pokazivac() { return p; }
};

template &lt;typename tip&gt;
class GMatrica {
    tip matrica[4][4];
    int broj_redova, broj_kolona;
public:
    GMatrica() : broj_redova(0), broj_kolona(0) {}
    GMatrica(int broj_redova, int broj_kolona, tip a={});
    template &lt;typename tip2&gt;
    GMatrica(const GMatrica&lt;tip2&gt;&amp;druga);
    GMatrica(tip **druga);
    GMatrica(const std::vector&lt;std::vector&lt;tip&gt;&gt;&amp;v);
    GMatrica(const std::initializer_list&lt;std::initializer_list&lt;tip&gt;&gt;&amp;L);
    
    int DajBrojRedova() const { return broj_redova; }
    int DajBrojKolona() const { return broj_kolona; }
    
<a name="1"></a><font color="#00FF00"><a href="match615-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    template &lt;typename tip1, typename tip2&gt;
    friend auto operator +(const GMatrica&lt;tip1&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]+druga.matrica[0][0])&gt;;
    template &lt;typename tip1, typename tip2&gt;
    friend auto operator -(const GMatrica&lt;tip1&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]-druga.matrica[0][0])&gt;;
</font><a name="12"></a><font color="#0000FF"><a href="match615-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    template &lt;typename tip1, typename tip2&gt;
    friend auto operator *(const GMatrica&lt;tip1&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]*druga.matrica[0][0])&gt;;
</font>    template &lt;typename tip1, typename tip2&gt;
    friend auto operator *(const GMatrica&lt;tip1&gt;&amp;prva, tip2 faktor) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]*faktor)&gt;;
    template &lt;typename tip1, typename tip2&gt;
    friend auto operator *(tip2 faktor, const GMatrica&lt;tip1&gt;&amp;prva) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]*faktor)&gt;;
    
<a name="7"></a><font color="#0000FF"><a href="match615-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    template &lt;typename tip2&gt;
    GMatrica&amp; operator +=(const GMatrica&lt;tip2&gt;&amp;druga);
    template &lt;typename tip2&gt;
    GMatrica&amp; operator -=(const GMatrica&lt;tip2&gt;&amp;druga);
    template &lt;typename tip2&gt;
    GMatrica&amp; operator *=(const GMatrica&lt;tip2&gt;&amp;druga);
</font>    template &lt;typename tip2&gt;
    GMatrica&amp; operator *=(tip2 faktor);
    
    template &lt;typename tip1, typename tip2&gt;
    friend bool operator ==(const GMatrica&lt;tip1&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga);
    template &lt;typename tip1, typename tip2&gt;
    friend bool operator !=(const GMatrica&lt;tip1&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga);
    
    tip&amp; operator ()(int a, int b);
    tip operator ()(int a, int b) const;
    tip* operator [](int a) { return matrica[a]; }
    Pokazivac&lt;tip&gt; operator [](int a) const { return Pokazivac&lt;tip&gt;(matrica[a]+0); }
    
    template &lt;typename tip1&gt;
    friend std::ostream&amp; operator &lt;&lt;(std::ostream&amp; tok, const GMatrica&lt;tip1&gt;&amp;m);
    template &lt;typename tip1&gt;
    friend std::istream&amp; operator &gt;&gt;(std::istream&amp; tok, GMatrica&lt;tip1&gt;&amp;m);
};

template &lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(int broj_redova, int broj_kolona, tip a) : broj_redova(broj_redova), broj_kolona(broj_kolona) {
    if(broj_redova&lt;0 || broj_redova&gt;4 || broj_kolona&lt;0 || broj_kolona&gt;4) throw std::logic_error("Ilegalan format matrice");
    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]=a;
}

template &lt;typename tip&gt;
template &lt;typename tip2&gt;
GMatrica&lt;tip&gt;::GMatrica(const GMatrica&lt;tip2&gt;&amp;druga) : broj_kolona(druga.broj_kolona), broj_redova(druga.broj_redova) {
    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]=druga.matrica[i][j];
}

template &lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(tip **druga) : broj_kolona(4), broj_redova(4) {
    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]=druga[i][j];
}

template &lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(const std::vector&lt;std::vector&lt;tip&gt;&gt;&amp;v) {
    if(v.size()&gt;4) throw std::logic_error("Ilegalan format matrice");
    if(v.size()) { 
        for(int i=0; i&lt;v.size(); i++) if(v[i].size()!=v[0].size()) throw std::logic_error("Ilegalan format matrice"); 
        broj_kolona=v[0].size();
    }
    else broj_kolona=0;
    broj_redova=v.size();
    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]=v[i][j];
}

template &lt;typename tip&gt;
GMatrica&lt;tip&gt;::GMatrica(const std::initializer_list&lt;std::initializer_list&lt;tip&gt;&gt;&amp;L) {
    if(L.size()&gt;4) throw std::logic_error("Ilegalan format matrice");
    if(L.size()) {
        for(auto i=L.begin(); i!=L.end(); i++) if(i-&gt;size()!=L.begin()-&gt;size()) throw std::logic_error("Ilegalan format matrice");
        broj_kolona=L.begin()-&gt;size();
    }
    else broj_kolona=0;
    broj_redova=L.size(); auto it1=L.begin();
    for(int i=0; i&lt;broj_redova; i++, it1++) {
        auto it2=it1-&gt;begin();
<a name="6"></a><font color="#00FF00"><a href="match615-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        for(int j=0; j&lt;broj_kolona; j++, it2++) {
            matrica[i][j]=*it2;
        }
    }
}

template &lt;typename tip, typename tip2&gt;
auto operator +(const GMatrica&lt;tip&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]+druga.matrica[0][0])&gt; {
</font>    if(prva.broj_kolona!=druga.broj_kolona || prva.broj_redova!=druga.broj_redova) throw std::domain_error("Nedozvoljena operacija");
<a name="10"></a><font color="#FF0000"><a href="match615-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    GMatrica&lt;decltype(prva.matrica[0][0]+druga.matrica[0][0])&gt;nova(prva.broj_redova, prva.broj_kolona);
    for(int i=0; i&lt;nova.broj_redova; i++) for(int j=0; j&lt;nova.broj_kolona; j++) nova.matrica[i][j]=prva.matrica[i][j]+druga.matrica[i][j];
</font><a name="9"></a><font color="#FF00FF"><a href="match615-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    return nova;
}

template &lt;typename tip, typename tip2&gt;
auto operator -(const GMatrica&lt;tip&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]-druga.matrica[0][0])&gt; {
</font>    if(prva.broj_kolona!=druga.broj_kolona || prva.broj_redova!=druga.broj_redova) throw std::domain_error("Nedozvoljena operacija");
    GMatrica&lt;decltype(prva.matrica[0][0]-druga.matrica[0][0])&gt;nova(prva.broj_redova, prva.broj_kolona);
    for(int i=0; i&lt;nova.broj_redova; i++) for(int j=0; j&lt;nova.broj_kolona; j++) nova.matrica[i][j]=prva.matrica[i][j]-druga.matrica[i][j];
    return nova;
}

template &lt;typename tip, typename tip2&gt;
auto operator *(const GMatrica&lt;tip&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]*druga.matrica[0][0])&gt; {
    if(prva.broj_kolona!=druga.broj_redova) throw std::domain_error("Nedozvoljena operacija");
<a name="13"></a><font color="#00FFFF"><a href="match615-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    GMatrica&lt;decltype(prva.matrica[0][0]*druga.matrica[0][0])&gt;nova(prva.broj_redova, druga.broj_kolona);
    for(int i=0; i&lt;nova.broj_redova; i++) {
        for(int j=0; j&lt;nova.broj_kolona; j++) {
            for(int k=0; k&lt;prva.broj_kolona; k++) {
</font>                nova.matrica[i][j]+=prva.matrica[i][k]*druga.matrica[k][j];
            }
        }
    }
    return nova;
}

template &lt;typename tip, typename tip2&gt;
<a name="2"></a><font color="#0000FF"><a href="match615-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

auto operator *(const GMatrica&lt;tip&gt;&amp;prva, tip2 faktor) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]*faktor)&gt; {
    GMatrica&lt;decltype(prva.matrica[0][0]*faktor)&gt;nova(prva.broj_redova, prva.broj_kolona);
    for(int i=0; i&lt;nova.broj_redova; i++) for(int j=0; j&lt;nova.broj_kolona; j++) nova[i][j]=prva.matrica[i][j]*faktor;
</font>    return nova;
}

template &lt;typename tip, typename tip2&gt;
auto operator *(tip2 faktor, const GMatrica&lt;tip&gt;&amp;prva) -&gt; GMatrica&lt;decltype(prva.matrica[0][0]*faktor)&gt; {
<a name="5"></a><font color="#FF0000"><a href="match615-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    return prva*faktor;
}

template &lt;typename tip&gt;
template &lt;typename tip2&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator +=(const GMatrica&lt;tip2&gt;&amp;druga) {
    if(broj_kolona!=druga.broj_kolona || broj_redova!=druga.broj_redova) throw std::domain_error("Nedozvoljena operacija");
</font><a name="0"></a><font color="#FF0000"><a href="match615-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]+=druga.matrica[i][j];
    return *this;
}

template &lt;typename tip&gt;
template &lt;typename tip2&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator -=(const GMatrica&lt;tip2&gt;&amp;druga) {
    if(broj_kolona!=druga.broj_kolona || broj_redova!=druga.broj_redova) throw std::domain_error("Nedozvoljena operacija");
</font>    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]-=druga.matrica[i][j];
    return *this;
}

<a name="11"></a><font color="#00FF00"><a href="match615-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

template &lt;typename tip&gt;
template &lt;typename tip2&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator *=(const GMatrica&lt;tip2&gt;&amp;druga) {
</font>    return *this=*this*druga;
}

<a name="4"></a><font color="#FF00FF"><a href="match615-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

template &lt;typename tip&gt;
template &lt;typename tip2&gt;
GMatrica&lt;tip&gt;&amp; GMatrica&lt;tip&gt;::operator *=(tip2 faktor) {
    for(int i=0; i&lt;broj_redova; i++) for(int j=0; j&lt;broj_kolona; j++) matrica[i][j]*=faktor;
</font>    return *this;
}

template &lt;typename tip, typename tip2&gt;
bool operator ==(const GMatrica&lt;tip&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) {
    if(prva.broj_redova!=druga.broj_redova || prva.broj_kolona!=druga.broj_kolona) return false;
    for(int i=0; i&lt;prva.broj_redova; i++) for(int j=0; j&lt;prva.broj_kolona; j++) if(prva.matrica[i][j]!=druga.matrica[i][j]) return false;
    return true;
}

template &lt;typename tip, typename tip2&gt;
bool operator !=(const GMatrica&lt;tip&gt;&amp;prva, const GMatrica&lt;tip2&gt;&amp;druga) {
    return !(prva==druga);
}

template &lt;typename tip&gt;
tip&amp; GMatrica&lt;tip&gt;::operator ()(int a, int b) {
    if(a&lt;1 || a&gt;broj_redova || b&lt;1 || b&gt;broj_kolona) throw std::range_error("Nedozvoljen indeks");
    return matrica[a-1][b-1];
}

template &lt;typename tip&gt;
tip GMatrica&lt;tip&gt;::operator ()(int a, int b) const {
    if(a&lt;1 || a&gt;broj_redova || b&lt;1 || b&gt;broj_kolona) throw std::range_error("Nedozvoljen indeks");
    return matrica[a-1][b-1];
}

template &lt;typename tip&gt;
<a name="3"></a><font color="#00FFFF"><a href="match615-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

std::ostream&amp; operator &lt;&lt;(std::ostream&amp; tok, const GMatrica&lt;tip&gt;&amp;m) {
    int sirina=tok.width(); if(sirina&lt;6) sirina=6;
    for(int i=0; i&lt;m.broj_redova; i++) {
        for(int j=0; j&lt;m.broj_kolona; j++) {
</font>            tok &lt;&lt; std::setw(sirina) &lt;&lt; m.matrica[i][j];
        }
        std::cout &lt;&lt; "\n";
    }
    return tok;
}

template &lt;typename tip&gt;
std::istream&amp; operator &gt;&gt;(std::istream&amp; tok, GMatrica&lt;tip&gt;&amp;m) {
    char c; int kolone=-1; m.broj_redova=0;
<a name="8"></a><font color="#00FFFF"><a href="match615-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    tok &gt;&gt; c; if(c!='[') tok.setstate(std::ios::failbit);
    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;4; j++) {
            tok &gt;&gt; m.matrica[i][j] &gt;&gt; c;
</font>            if(c==';' || c==']') {
                if(kolone!=-1 &amp;&amp; kolone!=j+1) tok.setstate(std::ios::failbit);
                kolone=j+1;
                break;
            }
            else if(c!=',') { tok.setstate(std::ios::failbit); break; }
        }
        m.broj_redova++;
        if(c==',') tok.setstate(std::ios::failbit);
        if(c==']') break;
    }
    m.broj_kolona=kolone;
    return tok;
}

int main() {
    GMatrica&lt;double&gt; m1({{1, 2}, {3, 4}});
   GMatrica&lt;double&gt; m2({{1, 2}, {3, 4}});
   auto m3 = m1 + m2;
   std::cout &lt;&lt; m3 &lt;&lt; std::endl;
}</pre>
</body>
</html>
