<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9358.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;

int PotencijalniKrivci (char **&amp;niz, std::vector&lt;std::string&gt; imena){
	int br(0);
	try{
		niz=new char*[imena.size()];
		//int br(0);
		try{
	   		while(br&lt;imena.size()) {
<a name="1"></a><font color="#00FF00"><a href="match203-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

	   		niz[br]=new char[imena[br].size()+1]; 
	   		std::strcpy(niz[br],imena[br].c_str());
	        br++;
	   		}
		}	
		catch(std::bad_alloc){
			for(int i=0;i&lt;br;i++) delete[] niz[i];
</font>			delete[] niz;
			throw;
		}
	}
	catch(...){
		throw;
	}
	return br;
}

int OdbaciOptuzbu(char **&amp;niz, int br, std::string ime){
	bool postoji=false;
	int broj(0);
	for(int i=0;i&lt;br;i++){
		if(niz[i]!=nullptr){
			if(std::strcmp(niz[i],ime.c_str())==0) {
				postoji=true;
				delete[] niz[i];
				niz[i]=nullptr;
				broj++;
			}
		}
	}
	if(postoji==false) throw std::domain_error("Osoba sa imenom nije bila optuzena");
	int novavel=br;
	int j(0);
	char** novi=nullptr;
	if(broj&gt;10){
		novavel=br-broj;
	  //  char** novi;
		try{
			novi=new char*[novavel];
			try{
<a name="0"></a><font color="#FF0000"><a href="match203-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

				for(int i=0;i&lt;br;i++){
					if(niz[i]!=nullptr) {
						novi[j]=new char[std::strlen(niz[i])+1];
						std::strcpy(novi[j],niz[i]); 
						j++;
</font>					}
				}
			}
<a name="4"></a><font color="#FF00FF"><a href="match203-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

	    	catch(std::bad_alloc){
	    		for(int i=0;i&lt;novavel;i++) delete[] novi[j];
	    		delete[] novi;
	    		return br;                //ako ne uspije vraca pocetnu velicinu
	    	}
		}
		catch(...){
</font>	    	return br;
	    	}
	}
/*	for(int i=0;i&lt;br;i++)
		delete[] niz[i];
		delete[] niz;
		niz=novi;*/

	return novavel;
}

int DodajOptuzbu(char **&amp;niz, int br, std::string ime){
	char* novi=new char[ime.size()+1];
	bool postojinul=false;
	std::strcpy(novi,ime.c_str());
	for(int i=0;i&lt;br;i++){
		if(niz[i]==nullptr) {
			postojinul=true;              
			niz[i]=novi;
			break;
		}
	}
	if(postojinul==false){
	 char** novi2;
	   try{
		 novi2=new char*[br+1];
	   	 for(int i=0;i&lt;br;i++){
	   	 	try{
<a name="5"></a><font color="#FF0000"><a href="match203-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	   		 novi2[i]=new char[std::strlen(niz[i])+1];
	   	     std::strcpy(novi2[i],niz[i]);
</font>	   	 	}
	   	 	catch(...){
	   	 		for(int i=0;i&lt;br;i++) delete[] novi2[i];
	   	 		delete[] novi2;
	   	 	}
	   	 }
<a name="2"></a><font color="#0000FF"><a href="match203-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	   	novi2[br]=novi;
	   	for(int i=0;i&lt;br;i++) delete[] niz[i];
	   	delete[] niz;
	   	niz=novi2;
</font>	   }
	   catch(std::bad_alloc){
	   	for(int i=0;i&lt;br;i++) delete[] novi2[i];
	   	delete[] novi2;
	   	delete[] novi;
	   	throw;
	   }
	}
	
    int novavel=br+1;
    return novavel;
}


void IzlistajOptuzbu(char **niz, int br){
<a name="3"></a><font color="#00FFFF"><a href="match203-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	for(int i=0;i&lt;br;i++){
		if(niz[i]!=nullptr) std::cout&lt;&lt;niz[i]&lt;&lt;std::endl;
</font>	}
}

int main ()
{   std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti?"&lt;&lt;std::endl;
    int n;
    char** niz;
    std::cin&gt;&gt;n;
    std::cout&lt;&lt;"Unesite potencijalne krivce:"&lt;&lt;std::endl;
    std::cin.ignore(1000,'\n');
    std::string ime;
    std::vector&lt;std::string&gt; imena;
    for(int i=0;i&lt;n;i++){
    	std::getline(std::cin,ime);
    	imena.push_back(ime);
    }
    int br=PotencijalniKrivci(niz,imena);
    int x=1;
    do{
    	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
    	std::cin&gt;&gt;x;
    	if(x==1){
    		std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
    		std::cin.ignore(1000,'\n');
    		std::getline(std::cin,ime);
            try{
<a name="6"></a><font color="#00FF00"><a href="match203-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    		br=DodajOptuzbu(niz,br,ime);
            }
            catch(std::domain_error izuzetak){
            	std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
</font>            }
    	}
    	if(x==2){
    		std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
    		std::cin.ignore(1000,'\n');
    		std::getline(std::cin,ime);
    		br=OdbaciOptuzbu(niz,br,ime);
    	}
    	if(x==3){
    	  IzlistajOptuzbu(niz,br);	
    	}
    	
    } while(x!=0);
	return 0;
}</pre>
</body>
</html>
