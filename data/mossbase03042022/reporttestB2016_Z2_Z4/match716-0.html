<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5581.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;vector&gt;

int PotencijalniKrivci (char**&amp; lista, std::vector&lt;std::string&gt; imena) {
	
	try{lista=new char* [imena.size()];}
	catch(std::bad_alloc){
		throw;
	}
	int brojac(0);
	
	for(int i=0;i&lt;imena.size();i++){
		lista[i]=nullptr;
	}
	
	try{
<a name="2"></a><font color="#0000FF"><a href="match716-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		for(int i=0;i&lt;imena.size();i++){
			lista[i]=new char [imena[i].size()+1];
			std::strcpy(lista[i], imena[i].c_str());
</font>			brojac++;
		}
	}
	catch(std::bad_alloc){
		for(int i=0;i&lt;imena.size();i++){
			delete[] lista[i];
		}
		delete[] lista;
		throw;
	}
	
	return brojac;
} //f

void IzlistajOptuzbu(char** lista, int velicina){
	
	for(int i=0;i&lt;velicina;i++){
		if(lista[i]!=nullptr){
			std::cout&lt;&lt;lista[i]&lt;&lt;std::endl;
		}
	}
}

int OdbaciOptuzbu (char**&amp; lista, int velicina, std::string osoba) {
	
	bool ima(0);
	int broj_null(0);
	
	for(int i=0;i&lt;velicina;i++){
		
		if(lista[i]==nullptr){
			broj_null++;
			continue;
		}
		
		if(strcmp(lista[i],osoba.c_str())==0){
			ima=1;
			delete[] lista[i];
			lista[i]=nullptr;
			broj_null++;
		}
	} //izbacivanje i brojanje nullpointera
	
	if(ima==0){
		std::string izuzetak="Osoba sa imenom "+osoba+" nije bila optuzena";
		throw std::domain_error(izuzetak);
	}
	
	if(broj_null&gt;10){
		char** nova_lista=nullptr;
		int nova_velicina=velicina-broj_null;
		
		try{
			nova_lista=new char* [nova_velicina];
		}
		catch(std::bad_alloc izuzetak){
			return velicina;
		}
		
		for(int i=0;i&lt;nova_velicina;i++) nova_lista[i]=nullptr;
		
		int indeks(0);
		
		try{
<a name="0"></a><font color="#FF0000"><a href="match716-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

		for(int i=0;i&lt;velicina;i++){
			if(lista[i]!=nullptr){
				nova_lista[indeks]=new char[std::strlen(lista[i])+1];
				std::strcpy(nova_lista[indeks],lista[i]);
				indeks++;
</font>			}	
		}
		

		for(int i=0;i&lt;velicina;i++) 
			delete[] lista[i];
		delete[] lista;
		
		lista=nova_lista;
		
		return nova_velicina;
	}
		catch(std::bad_alloc){
			for(int i=0;i&lt;nova_velicina;i++) delete[] nova_lista[i];
			delete[] nova_lista;
			
			return velicina;
		}
		
	}
	
	return velicina;
}

int DodajOptuzbu (char**&amp; lista, int velicina, std::string osoba) {
	
	char* NoviKrivac=nullptr;
	
	try{
		NoviKrivac = new char [osoba.size()+1];
	}
	catch(...){throw;}
	
	std::strcpy(NoviKrivac,osoba.c_str());
	
	for(int i=0;i&lt;velicina;i++){
		if(lista[i]==nullptr){
			lista[i]=NoviKrivac;
			return velicina;
		}
	}
	
	char **nova_lista=nullptr;
	
	try{
		nova_lista=new char* [velicina+1];
	}
	catch(std::bad_alloc izuzetak){
		throw;
	}
		
		for(int i=0;i&lt;velicina+1;i++) nova_lista[i]=nullptr;
		
		try{
		
<a name="1"></a><font color="#00FF00"><a href="match716-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

		for(int i=0;i&lt;velicina;i++){
			
			nova_lista[i]=new char[std::strlen(lista[i])+1];
			std::strcpy(nova_lista[i],lista[i]);
		}
		
		nova_lista[velicina]=NoviKrivac;
		
		for(int i=0;i&lt;velicina;i++){
</font>			delete[] lista[i];
		}
		delete[] lista;
		lista=nova_lista;
		return velicina+1;
	}
	catch(std::bad_alloc){
		for(int i=0;i&lt;velicina+1;i++) delete[] nova_lista[i];
		delete[] nova_lista;
		delete[] NoviKrivac;
		
		throw;
	}
	
}



int main ()
{
	int n,velicina;
	std::vector&lt;std::string&gt; krivci;
	std::string osoba;
	
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	std::cin&gt;&gt;n;
	
	std::cin.ignore(10000,'\n');
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;

	for(int i=0;i&lt;n;i++){
		std::getline(std::cin, osoba);
		krivci.push_back(osoba);
	}
	
	char** lista=nullptr;
	
	try{
	
	velicina = PotencijalniKrivci(lista, krivci);
	
	int opcija;
	
	for( ; ; ){
		
<a name="3"></a><font color="#00FFFF"><a href="match716-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
		std::cin&gt;&gt;opcija;
		
		std::cin.ignore(10000, '\n');
		if(opcija==0) {
</font>			for(int i=0;i&lt;velicina;i++)
				delete[] lista[i];
			delete[] lista;
			break;
		}
		
		if(opcija==1){
			std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
			std::getline(std::cin,osoba);
			
				try {velicina = DodajOptuzbu(lista,velicina,osoba);}
				catch(std::bad_alloc izuzetak){
					std::cout&lt;&lt;"Nedovoljno memorije"&lt;&lt;std::endl;
				}

		}
		else if(opcija==2){
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
			std::getline(std::cin,osoba);
			try {velicina=OdbaciOptuzbu(lista, velicina, osoba);}
			catch(std::domain_error izuzetak){
				std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
			}
			catch(std::bad_alloc izuzetak){
				std::cout&lt;&lt;"Neodovljno memorije";
			}

		}
		else if(opcija==3){
			IzlistajOptuzbu(lista, velicina);
		}
		
		
	}
	
	}
	
	catch(std::bad_alloc){
		std::cout&lt;&lt;"Nedovoljno memorije";
	}

	
	return 0;
}</pre>
</body>
</html>
