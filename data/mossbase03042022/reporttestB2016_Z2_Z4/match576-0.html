<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4659.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4659.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
int PotencijalniKrivci(char **&amp;p, std::vector&lt;std::string&gt; v){
	
	if(v.size()==0)return 0;
	try{
	    p=new char*[v.size()];                   // alociramo niz pokova
	}
	catch(...){
		return 0;
	}
	for(int i=0;i&lt;v.size();i++)p[i]=nullptr;
	    try{
<a name="0"></a><font color="#FF0000"><a href="match576-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

	    	for(int i=0;i&lt;v.size();i++)p[i]=new char[v[i].size()+1];   // alociramo nizove znakova
	    }
	    catch(...){
	    	for(int i=0;i&lt;v.size();i++) delete[] p[i];    // brisanje
	    	delete []p;                                 
</font>	    	throw;
	    }
<a name="3"></a><font color="#00FFFF"><a href="match576-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	        for(int i=0;i&lt;v.size();i++){
	         	for(int j=0;j&lt;v[i].size();j++){
	    	    	p[i][j]=v[i][j];                  // unos znakova u alocirane nizove
</font>	    	    }
	    	    p[i][v[i].size()]='\0';
	        }
	return v.size();
}

int vel(char *&amp;p){
	int br(0);
	while(*p!='\0'){
		br++;
		p++;
	}
	return br;
}

int OdbaciOptuzbu( char **&amp;p ,int n ,std::string ime){
	int flag(0);
	for(int i=0;i&lt;n;i++){
		if(p[i]==ime){           //provjerava da li je ime u nasem nizu 
			flag=1;
			delete []p[i];
			p[i]=nullptr;          
			    int br(0);
			    for(int j=0;j&lt;n;j++){
				    if(p[j]==nullptr)br++;
			    }
			    if(br&gt;10){
			    	int x(n);
			    	n=n-br;
			    	char **a(new char*[n]);    // alociranje novog niza znakova
			    	try{
			    		for(int k=0;k&lt;n;k++) a[k]=nullptr;
			    		for(int k=0;k&lt;n;k++) a[k]=new char[vel(p[k])+1];
			    		int l(0);                                                     
			    		for(int k=0;k&lt;x;k++){
			    			if(p[k]==nullptr)continue;
			    			for(int z=0;z&lt;vel(p[k]);z++){
			    				a[l][z]=p[k][z];                       //dodati try catch block
			    			}
			    			a[l][vel(p[k])]='\0';
			    			l++;
			    		}
			    		
<a name="2"></a><font color="#0000FF"><a href="match576-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

			    		for(int i=0;i&lt;x;i++)delete []p[i];
			    		delete []p;
			    		p=a;
			    	}
			    	catch(...){
			    		for(int i=0;i&lt;n;i++)delete []a[i];
</font>			    		delete []a;
			    		throw;
			    	}
			   }
		}
	}
	if(!flag)throw std::domain_error("Osoba sa imenom "+ime+" nije bila optuzena");
	return n;
}

int DodajOptuzbu(char **&amp;p ,int n ,std::string ime){
	try{
		char *pok(new char[ime.size()+1]);
		std::copy(ime.begin(),ime.end(),pok);  //alociranje novog niza znakova
		   pok[ime.size()]='\0';
		    for(int i=0;i&lt;n;i++){
	        	if(p[i]==nullptr){    //ako se nalazi nullptr 
	    	    	p[i]=pok;
	    	    	return n;
	    	    }	
	        }
	        try{
	        	n=n+1;
	            char **a(new char*[n]);  
	            for(int i=0;i&lt;n;i++)a[i]=nullptr;   //nullptr
	            for(int i=0;i&lt;n-1;i++)a[i]=p[i];
	            delete []p;
	                a[n-1]=pok;
	                p=a;
	                return n;
	        }
	        catch(...){
	        	delete []pok;
	        	throw;
	        }
	}
	catch(...){
		throw;
	}
}

<a name="1"></a><font color="#00FF00"><a href="match576-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

void IzlistajOptuzbu(char **&amp;p,int n){
	for(int i=0;i&lt;n;i++){
		if(p[i]==nullptr)continue;
		std::cout &lt;&lt; p[i] &lt;&lt; std::endl;
</font>	}	
}


int main ()
{
	std::vector&lt;std::string&gt;v;
	char **a(nullptr);
	int n;
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	std::cin &gt;&gt; n;
	v.resize(n);
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	std::cin.ignore(10000,'\n');
	for(int i=0;i&lt;n;i++)std::getline(std::cin,v[i]);
	n=PotencijalniKrivci(a,v);
	int x;
	do{
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
		std::cin &gt;&gt; x;
		
			if(x==1){
				std::cin.ignore(10000,'\n');
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::string ime;
				std::getline(std::cin,ime);
				n=DodajOptuzbu(a,n,ime);
			}	
			
				if(x==2){
					std::cin.ignore(10000,'\n');
					std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
					std::string ime;
				    std::getline(std::cin,ime);
					n=OdbaciOptuzbu(a,n,ime);
				}	
			
			
			if(x==3)IzlistajOptuzbu(a,n);
		
	}while(x!=0);
	for(int i=0;i&lt;n;i++)delete[]a[i];
	delete []a;
	return 0;
}</pre>
</body>
</html>
