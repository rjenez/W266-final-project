<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2967.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1266.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

<a name="2"></a><font color="#0000FF"><a href="match208-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

using std::cin;
using std::cout;
using std::vector;
using std::string;

int PotencijalniKrivci(char **&amp;imena, vector&lt;string&gt; spisak)
{
    try
</font>    {
<a name="4"></a><font color="#FF00FF"><a href="match208-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        char **npok=new char*[spisak.size()]{};
        try
        {
            for(int i=0;i&lt;spisak.size();i++)
            {
                npok[i]=new char[spisak[i].length()+1];
</font>                for(int k=0;k&lt;spisak[i].length();k++) npok[i][k]=spisak[i][k];
                npok[i][spisak[i].length()]='\0';
            }
        }
<a name="5"></a><font color="#FF0000"><a href="match208-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        catch(std::bad_alloc)
        {
            for(int i=0;i&lt;spisak.size();i++) delete[] npok[i];
            delete[] npok;
</font>            throw;
        }
        imena=npok;
        return spisak.size();
    }
    catch(std::bad_alloc)
    {
<a name="3"></a><font color="#00FFFF"><a href="match208-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        throw;
    }
}

int OdbaciOptuzbu(char **&amp;imena, int vel, string lik)
{
    bool ima=false;
    for(int i=0;i&lt;vel;i++)
</font>    {
        bool isti=true;
        int j, duz=0;;
        while(imena[i][duz]!='\0') duz++;
        for(j=0;j&lt;lik.length() &amp;&amp; j&lt;duz;j++)
        {
            if(imena[i][j]!=lik[j]) isti=false;
        }
        if(j!=lik.length() || j!=duz) isti=false;
        if(isti)
        {
            ima=true;
            delete[] imena[i];
            imena[i]=nullptr;
        }
    }
    if(!ima) throw std::domain_error("Osoba sa imenom "+lik+" nije bila optuzena\n");
    
    int brnul=0;
    for(int i=0;i&lt;vel;i++) if(imena[i]==nullptr) brnul++;
    if(brnul&gt;10)
    {
        try
        {
            int nvel=vel-brnul;
            char **npok=new char*[nvel]{};
            try
            {
                int m=0;
                for(int i=0;i&lt;vel;i++)
                {
                    if(imena[i]!=nullptr)
                    {
                        int duz=0;
                        while(imena[i][duz]!='\0') duz++;
                        duz++;
                        npok[m]=new char[duz];
                        for(int k=0;k&lt;duz;k++) npok[m][k]=imena[i][k];
                        m++;
                    }
                    delete[] imena[i];
                }
                delete[] imena;
                vel=nvel;
                imena=npok;
            }
            catch(...)
            {
                for(int i=0;i&lt;nvel;i++) delete[] npok[i];
                delete[] npok;
                throw;
            }
        }
        catch(...){;}
    }
    
    return vel;
}

int DodajOptuzbu(char **&amp;imena, int vel, string lik)
{
<a name="0"></a><font color="#FF0000"><a href="match208-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

    char *nime=new char[lik.length()+1];
    for(int i=0;i&lt;lik.length();i++) nime[i]=lik[i];
    nime[lik.length()]='\0';
    bool ima=false;
    for(int i=0;i&lt;vel;i++)
    {
        if(imena[i]==nullptr)
        {
            ima=true;
</font>            imena[i]=nime;
            return vel;
        }
    }
    if(!ima)
    {
        try
        {
            char **npok=new char*[vel+1]{};
            try
            {
                for(int i=0;i&lt;vel;i++)
                {
                    int duz=0;
                    while(imena[i][duz]!='\0') duz++;
                    duz++;
                    npok[i]=new char[duz];
                    for(int j=0;j&lt;duz;j++) npok[i][j]=imena[i][j];
                    delete[] imena[i];
                }
                delete[] imena;
                npok[vel]=nime;
                imena=npok;
                vel++;
            }
            catch(...)
            {
                for(int i=0;i&lt;vel+1;i++) delete[] npok[i];
                delete[] npok;
                throw;
            }
        }
        catch(std::bad_alloc)
        {
<a name="6"></a><font color="#00FF00"><a href="match208-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            throw;
        }
    }
    return vel;
}

void IzlistajOptuzbu(char **imena, int vel)
{
    for(int i=0;i&lt;vel;i++)
    {
        if(imena[i]!=nullptr) cout &lt;&lt; imena[i] &lt;&lt; "\n";
</font>    }
}

int main ()
{
    int n;
    cout &lt;&lt;"Koliko potencijalnih krivaca zelite unijeti?\n";
    cin &gt;&gt; n;
    vector&lt;string&gt; v(n);
    cout &lt;&lt;"Unesite potencijalne krivce:\n";
    for(string &amp;x : v) cin &gt;&gt; x;
    char **a;
    n=PotencijalniKrivci(a, v);
    int op;
    string ime;
    do
    {
        cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj:\n";
        cin &gt;&gt; op;
        if(op==1)
        {
            cout &lt;&lt; "Unesite ime novog optuzenog:\n";
            cin &gt;&gt; ime;
            n=DodajOptuzbu(a, n, ime);
        }
        if(op==2)
        {
            cout &lt;&lt; "Unesite ime koje zelite izbaciti:\n";
            cin &gt;&gt; ime;
<a name="1"></a><font color="#00FF00"><a href="match208-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            n=OdbaciOptuzbu(a, n, ime);
        }
        if(op==3) IzlistajOptuzbu(a, n);
    } while(op!=0);
    for(int i=0;i&lt;n;i++) delete[] a[i];
    delete[] a;
</font>	return 0;
}</pre>
</body>
</html>
