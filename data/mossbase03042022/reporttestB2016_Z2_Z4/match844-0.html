<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8786.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8786.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include&lt;iostream&gt;
#include&lt;stdexcept&gt;
#include&lt;new&gt;
#include&lt;string&gt;
#include&lt;vector&gt;

using namespace std;

int PotencijalniKrivci(char** &amp;pok, vector&lt;string&gt; s)
{
	pok=nullptr;
	try
	{
		pok=new char*[s.size()];
		try
		{
			for(int i=0; i&lt;s.size(); i++) pok[i]=nullptr;
<a name="0"></a><font color="#FF0000"><a href="match844-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

			for(int i=0; i&lt;s.size(); i++)
				pok[i]=new char[s[i].size()+1];
			for(int i=0; i&lt;s.size(); i++)
</font>				for(int j=0; j&lt;s[i].size(); j++)
					pok[i][j]=s[i][j];
			for(int i=0; i&lt;s.size(); i++) pok[i][s[i].size()]='\0';
<a name="1"></a><font color="#00FF00"><a href="match844-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

			return s.size();
		}
		catch(...)
		{
			for(int i=0; i&lt;s.size(); i++) delete [] pok[i];
			throw;
</font>		}
	}
	catch(...)
	{
		delete [] pok;
		throw;
	}
}

int OdbaciOptuzbu(char** &amp;pok, int n, string s)
{
	int ind=9999;
	for(int i=0; i&lt;n; i++)
	{
		int br1=0;
		char *p=pok[i];
		while(*p!='\0') { br1++; p++;}
		if(br1==s.size())
		{
			p=pok[i];
			bool a=true;
			for(int i=0; i&lt;s.size(); i++)
			{
				if(s[i]!=*p) a=false;
				p++;
			}
			if(a) ind=i;
		}
	}
	if(ind==9999)
	{
		string s1="Osoba sa imenom "+s+" nije bila optuzena";
		throw domain_error(s1);
	}
	delete [] pok[ind];
	pok[ind]=nullptr;
	int br=0;
	for(int i=0; i&lt;n; i++)
		if(*pok==nullptr) br++;
	if(br&gt;=10)
	{
		char **pok1=nullptr;
		try
		{
<a name="2"></a><font color="#0000FF"><a href="match844-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

			pok1=new char*[n-br];
			for(int i=0; i&lt;n-br; i++) pok1[i]=nullptr;
</font>			try
			{
			    int br1=0, s=0;
			    for(int i=0; i&lt;n; i++)
			    {
			    	if(pok[i]!=nullptr)
			    	{
			    		s=0;
			    		char* p= pok[i], *p1;
			    		while(*p!='\0') { s++; p++;}
			    		s++;
			    		pok1[br1]=new char[s];
			    		p=pok[i]; p1=pok1[br];
			    		while(s!=0)
			    		{
			    			*p1=*p;
			    			p1++;
			    			p++;
			    			s--;
			    		}
			    		br1++;
			    	}
			    }
			    char** pom=pok;
			    pok=pok1;
<a name="3"></a><font color="#00FFFF"><a href="match844-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

			    pok1=nullptr;
			    for(int i=0; i&lt;n; i++) delete [] pom[i];
			    delete [] pom;
			    pom=nullptr;
</font>			    return n-br;
			} catch(...) {throw;}
		} catch(...) { throw; }
	}
	else return n;
}

int DodajOptuzbu(char** &amp;pok, int n, string s)
{
	for(int i=0; i&lt;n; i++)
	{
		if(pok[i]==nullptr)
		{
			pok[i]=new char[s.size()+1];
			for(int j=0; j&lt;s.size(); j++) pok[i][j]=s[j];
			pok[i][s.size()]='\0';
			return n;
		}
	}
	char **pok1=nullptr;
	try
	{
		pok1=new char * [n+1];
		for(int i=0; i&lt;n+1; i++)  pok1[i]=nullptr;
		try
		{
			for(int i=0; i&lt;n; i++)
			{
				int broj=0;
				char* p=&amp;pok[i][0];
				while(*p!='\0') {p++; broj++;}
				pok1[i]=new char[broj+1];
				for(int j=0; j&lt;broj+1; j++) pok1[i][j]=pok[i][j];
			}
			pok1[n]= new char [s.size()+1];
			for(int i=0; i&lt;s.size(); i++) pok1[n][i]=s[i];
			pok1[n][s.size()]='\0';
			char ** pom=pok;
			pok=pok1;
			for(int i=0; i&lt;n; i++) delete [] pom[i];
			delete [] pom;
			pok1=nullptr;
			pom=nullptr;
			return n+1;
		}
		catch(...)
		{
			for(int i=0; i&lt;n+1; i++) delete [] pok1[i];
			throw;
		}
	}
	catch(...)
	{
<a name="4"></a><font color="#FF00FF"><a href="match844-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

		delete [] pok1;
		throw;
	}
	
}

void IzlistajOptuzbu(char ** pok, int n)
{
	for(int i=0; i&lt;n; i++)
	{
		if(pok[i]!=nullptr)
</font>		cout&lt;&lt;pok[i]&lt;&lt;endl;
	}
}


int main ()
{
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	int n;
	cin&gt;&gt;n;
	cout&lt;&lt;endl&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;endl;
	vector&lt;string&gt; v; v.resize(n);
	for(int i=0;i&lt;v.size();i++) cin&gt;&gt;v[i];
	char ** pok=nullptr;
	try
	{
		n=PotencijalniKrivci(pok,v);
		while(1)
		{
			cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;endl;
			int a;
			cin&gt;&gt;a;
			if(a==1)
			{
				string s;
				cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;endl;
				cin&gt;&gt;s;
				try
				{
					n=DodajOptuzbu(pok,n,s);
				}
				catch(...) { cout&lt;&lt;"stas";}
			}
			else if(a==2)
			{
				cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;endl;
				string s; cin&gt;&gt;s;
				try
				{
					n=OdbaciOptuzbu(pok,n,s);
				}
				catch(domain_error m) {cout&lt;&lt;m.what();}
			}
			else if(a==3) IzlistajOptuzbu(pok,n);
			else if(a==0) break;
		}
		for(int i=0; i&lt;n; i++) delete [] pok[i];
		delete [] pok;
		return 0;
	} 
	catch(...) {delete [] pok;} 
}</pre>
</body>
</html>
