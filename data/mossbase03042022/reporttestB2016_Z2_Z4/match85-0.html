<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1623.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1623.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;new&gt;
#include &lt;string.h&gt;
#include &lt;stdexcept&gt;
<a name="0"></a><font color="#FF0000"><a href="match85-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int PotencijalniKrivci(char **&amp;c, std::vector&lt;std::string&gt; S)
{
	int brojac (0);
	
	try{
		c = new char*[S.size()];
	} catch(std::bad_alloc e){
		throw e;
	}

	try
	{
		for(int i(0);i&lt;S.size();i++) 
		{
			c[i]=new char[S[i].length()+1]; 
			brojac++;
			
		}	
	}
	catch(std::bad_alloc )
	{
		
		for(int i(0); i &lt; brojac; i++) delete[] c[i];
		
		delete[] c;
		throw ;
	}
	
	for(int i(0); i &lt; brojac; i++)
	{
		strcpy(c[i],S[i].c_str());
	}
	
	
	return brojac;
	
}

int OdbaciOptuzbu(char **&amp; c, int velicina, std::string Ime)
{
	int brojac(0),triger(0), brojodbacenih(0);
	for(int i(0);i &lt; velicina; i++)
	{
		if(c[i] == Ime) {
			delete[] c[i];
			c[i] = nullptr;
			brojodbacenih++;
			
		}
		brojac++;
	}
	
	if(brojodbacenih == 0) throw std::domain_error  (Ime);
	std::vector&lt;int&gt; v;
	for(int i(0); i &lt; velicina;i++)
	{
		if(c[i] != nullptr)
		{
			triger++;
			v.push_back(i);
		}
			
	}
	
	if(velicina-v.size() &lt;= 10 ) return velicina;
	else
	{
		char **a(new char*[v.size()]);
		for(int i(0);i&lt; v.size(); i++)
		{
			
			a[i]= new char[strlen(c[v[i]]) + 1];
			strcpy(a[i], c[v[i]]);
			
		}
		for(int i=0; i &lt; velicina; i++){
			delete[] c[i];
		}
		delete[] c;
		c=a;
		return v.size();
	}
	
}

int DodajOptuzbu(char **&amp;c, int velicina, std::string Ime)
{
	char *Optuzeni(new char[Ime.length() + 1]);
	for(int i(0);i&lt; Ime.length();i++)
	{
		Optuzeni[i]=Ime[i];
	}
	Optuzeni[Ime.length()] = '\0';
	
	if(velicina == 0) 
	{
		try
		{
		c = new char*[1];
		c[0] = Optuzeni;
		}
		catch(std::bad_alloc)
		{
			delete[] c[0];
			throw;
		}
		return velicina + 1;
	}
	
	int brojac (0),triger(0);
	for(int i(0); i &lt; velicina ; i++)
	{
		if(c[i] == nullptr){
		 c[i] = Optuzeni;
		 return velicina;
		}
		brojac++;
	}
	if(brojac == velicina )
	{
		char **Novi_niz = nullptr;
		
		try 
		{
			Novi_niz = new char* [velicina+1];
			for(int i(0); i &lt; velicina; i++)
				Novi_niz[i] = nullptr;
			for(int i(0); i &lt; velicina; i++){
						
				Novi_niz[i] = new char[strlen(c[i]) + 1];
				triger++;
				strcpy(Novi_niz[i],c[i]);
			
			}
			Novi_niz[velicina] = Optuzeni;
			
			for(int i(0);i&lt; velicina; i++)
				delete[] c[i];
			delete[] c;
			c = Novi_niz;
			//Novi_niz = nullptr;
			return (velicina+1);
		}
		catch(std::bad_alloc)
		{
			for(int i(0);i&lt;velicina+1;i++)
				delete[] Novi_niz[i];
				delete[] Novi_niz;
			throw;
		}
		
	}
}

void IzlistajOptuzbu(char ** Lista, int n)
{
	for(int i(0);i&lt;n;i++)
	{
		if(Lista[i] != nullptr) std::cout&lt;&lt;Lista[i]&lt;&lt;std::endl;
	}
	
	
}




int main ()
{
	char ** Optuzeni(nullptr);
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? \n";
	int n;
	std::cin&gt;&gt;n;
	std::cout&lt;&lt;"Unesite potencijalne krivce: \n";
	std::vector&lt;std::string&gt; Unos;
	for(int i(0);i&lt;n;i++)
	{
		
		std::string Ime;
		std::cin.ignore(1000,'\n');
		std::cin&gt;&gt;Ime;
		Unos.push_back(Ime);
	}
	int velicina = PotencijalniKrivci(Optuzeni,Unos);
	
	
	try
	{
	while (true)
	{
		
		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
		int a;
		std::cin&gt;&gt;a;
		if(a == 1)
		{
			std::cout&lt;&lt;"Unesite ime novog optuzenog: \n";
			std::string NovoIme;
			std::cin.ignore(1000,'\n');
			std::cin&gt;&gt;NovoIme;
			velicina=DodajOptuzbu(Optuzeni,velicina,NovoIme);
		}
		if(a == 2)
		{
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: \n";
			std::string NoviOptuzeni;
			std::cin.ignore(1000,'\n');
			std::cin&gt;&gt;NoviOptuzeni;
			velicina=OdbaciOptuzbu(Optuzeni,velicina,NoviOptuzeni);
		}
		if(a == 3)
		{
			IzlistajOptuzbu(Optuzeni,velicina);
		}
		if(a == 0) return 0;
	}
	}
	catch(std::domain_error izuzetak)
	{
		std::cout&lt;&lt;"Osoba sa imenom "&lt;&lt;izuzetak.what()&lt;&lt;" nije bila optuzena"&lt;&lt;std::endl;
		
	}
	catch(std::bad_alloc)
	{
		for(int i(0);i&lt;velicina;i++) delete[] Optuzeni[i];
		delete [] Optuzeni;
		std::cout&lt;&lt;"Nedovoljno memorije";
</font>	}
	
	return 0;
}</pre>
</body>
</html>
