<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2675.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9325.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;

int PotencijalniKrivci(char** &amp;c, std::vector&lt;std::string&gt; vs) {
    try {
        c = new char* [vs.size()];
        for(int i = 0; i &lt; vs.size(); i++) 
            c[i] = nullptr;
        try {
            for(int i = 0; i &lt; vs.size(); i++) {
                c[i] = new char[vs[i].length()+1];
                strcpy(c[i], vs[i].c_str());
            }
        } 
        catch(...) {
            for(int i = 0; i &lt; vs.size(); i++) 
                delete c[i];
            delete[] c;
            throw;
        }
    }
    catch(...) {
        throw std::bad_alloc();
    }
<a name="1"></a><font color="#00FF00"><a href="match455-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    return vs.size();
}

int OdbaciOptuzbu(char** &amp;c, int vel, std::string s) {
    bool DaLiJeNaSpisku = false;
    for(int i = 0; i &lt; vel; i++) {
        if(c[i] == nullptr) continue;
</font><a name="4"></a><font color="#FF00FF"><a href="match455-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        if(strcmp(c[i], s.c_str()) == 0) {
            delete[] c[i];
            c[i] = nullptr;
            DaLiJeNaSpisku = true;
            
        }
    }
    if(DaLiJeNaSpisku == false) {
</font>        std::string izuzetak = "Osoba sa imenom " + s + " nije bila optuzena";
        throw std::domain_error(izuzetak);
    }
        
    int brojSlobodnihMjesta = 0;
    int brojOptuzenih = 0;
    for(int i = 0; i &lt; vel; i++) {
        if(c[i] == nullptr) {
            brojSlobodnihMjesta++;
        } else brojOptuzenih++;
    }
    
    if(brojSlobodnihMjesta &gt; 10) {
        char** novi_c;
        try {
            novi_c = new char* [brojOptuzenih];
            for(int i = 0; i &lt; brojOptuzenih; i++)
                novi_c[i] = nullptr;
                
            try {
                int brojac = 0;
                for(int i = 0; i &lt; vel; i++) {
                    if(c[i] == nullptr) continue;
                    novi_c[brojac++] = c[i];
                }
                for(int i = 0; i &lt; vel; i++) 
                    delete[] c[i];
                delete[] c;
                
                c = novi_c;
                return brojOptuzenih;
            }
            catch(...) {
                 for(int i = 0; i &lt; brojOptuzenih; i++) 
                    delete[] novi_c[i];
                 delete[] novi_c;    
                 throw;
            }
        }
        catch(...) {
<a name="2"></a><font color="#0000FF"><a href="match455-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            throw std::bad_alloc();
        }
    }
    return vel;
}

int DodajOptuzbu(char** &amp;c, int vel, std::string s) {
    char* krivac = nullptr;
    try {
        krivac = new char [s.size()+1]; 
</font>    }
    catch(...) {
        delete krivac;
        throw std::bad_alloc();
    }
    
    strcpy(krivac, s.c_str());
    
    bool ImaLiSlobodnoMjesto = true;
    for(int i = 0; i &lt; vel; i++) {
        if(c[i] == nullptr) {
            c[i] = krivac;
            ImaLiSlobodnoMjesto = false;
            break;
        }
    }
    
    if(ImaLiSlobodnoMjesto) {
<a name="3"></a><font color="#00FFFF"><a href="match455-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        char** novi_c;
        try {
            novi_c = new char* [vel+1];
            for(int i = 0; i &lt; vel + 1; i++)
                novi_c[i] = nullptr;
</font>                
            try {
                for(int i = 0; i &lt; vel; i++) {
                    novi_c[i] = new char [strlen(c[i])+1];
<a name="0"></a><font color="#FF0000"><a href="match455-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

                    strcpy(novi_c[i], c[i]);
                }
                novi_c[vel] = krivac;
                
                for(int i = 0; i &lt; vel; i++) 
                    delete[] c[i];
                delete[] c;
                
                c = novi_c;
                vel += 1;
</font>            }
            catch(...) {
                for(int i = 0; i &lt; vel; i++) 
                    delete[] novi_c[i];
                delete[] novi_c; 
                
                throw;
            }
        }
        catch(...) {
            throw std::bad_alloc();
        }
    }
    return vel;
}

void IzlistajOptuzbu(char** c, int vel) {
    for(int i = 0; i &lt; vel; i++) {
        if(c[i] == nullptr) continue;
        std::cout &lt;&lt; std::endl &lt;&lt; c[i];
    }
}


int main() {
    std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? ";
    int brojPotencijalnih; 
    std::cin &gt;&gt; brojPotencijalnih;
    std::cin.clear();
    std::cin.ignore(1000,'\n');
    std::vector&lt;std::string&gt; spisak(brojPotencijalnih);
    std::cout &lt;&lt; "\nUnesite potencijalne krivce: ";
    for(int i = 0; i &lt; spisak.size(); i++) {
        std::getline(std::cin, spisak[i]);
    }
    
    char** c;
    int vel = PotencijalniKrivci(c, spisak);
    int opcija;
    
    try {
        while(true) {
            std::cout &lt;&lt; "\nOdaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
            std::cin &gt;&gt; opcija;
            std::cin.clear();
            std::cin.ignore(10000, '\n');
            if(opcija == 1) {
                std::cout &lt;&lt; "\nUnesite ime novog optuzenog: ";
                std::string optuzeni;
                std::getline(std::cin, optuzeni);
                vel = DodajOptuzbu(c, vel, optuzeni);
            }
            if(opcija == 2) {
                std::cout &lt;&lt; "\nUnesite ime koje zelite izbaciti: ";
                std::string osoba;
                std::getline(std::cin, osoba);
                vel = OdbaciOptuzbu(c, vel, osoba);
            }
            if(opcija == 3) {
                IzlistajOptuzbu(c, vel);
            }
            if(opcija == 0) {
                for(int i = 0; i &lt; vel; i++) 
                    delete[] c[i];
                delete[] c;
                
                return 0;
            }
        }
    }
    catch(std::domain_error izuzetak) {
        std::cout &lt;&lt; izuzetak.what();
    }
    catch(std::bad_alloc) {
        std::cout &lt;&lt; "Nedovoljno memorije";
    } 
    return 0;
}</pre>
</body>
</html>
