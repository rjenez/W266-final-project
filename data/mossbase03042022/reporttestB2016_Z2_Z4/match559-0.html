<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9238.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9238.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci(char **(&amp;pok), const std::vector&lt;std::string&gt; &amp;potencijalni_krivci) {
	
	char **niz(nullptr);
	
	try {
<a name="0"></a><font color="#FF0000"><a href="match559-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

		niz = new char*[potencijalni_krivci.size()];
		for(int i = 0; i &lt; potencijalni_krivci.size(); i++) niz[i] = nullptr;
		try {
			for(int i = 0; i &lt; potencijalni_krivci.size(); i++) niz[i] = new char[potencijalni_krivci[i].size() + 1];
			for(int i = 0; i &lt; potencijalni_krivci.size(); i++) {
				int j(0);
</font><a name="2"></a><font color="#0000FF"><a href="match559-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

				for(; j &lt; potencijalni_krivci[i].size(); j++) 
					niz[i][j] = potencijalni_krivci[i][j];
				niz[i][j] = '\0';
			}
		}
		catch(...) {
</font>			for(int i = 0; i &lt; potencijalni_krivci.size(); i++) delete[] niz[i];
			delete[] niz;
			throw;
		}
	}
	catch(...) {
		throw std::bad_alloc();
	}
	
	pok = niz;
	return potencijalni_krivci.size();
}

int OdbaciOptuzbu(char **(&amp;pok), int vel, std::string neduzan) {
	
	int broj_nullptr(0);
	bool obrisan(false);
	
	for(int i = 0; i &lt; vel; i++) {
		if(pok[i] != nullptr) {
			if(neduzan == std::string(pok[i])) {
				delete[] pok[i];
				pok[i] = nullptr;
				broj_nullptr++;
				obrisan = true;
			}
		}
		else broj_nullptr++;
	}
	
	if(!obrisan) throw std::domain_error("Osoba sa imenom " + neduzan + " nije bila optuzena");
	if(broj_nullptr &gt; 10) {
		char ** novi_pok(nullptr);
		try {
<a name="1"></a><font color="#00FF00"><a href="match559-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

			novi_pok = new char*[vel - broj_nullptr];
			int j = 0;
			for(int i = 0; i &lt; vel; i++) {
				if(pok[i] != nullptr) {
					novi_pok[j] = pok[i];
</font>					j++;
				}
			}
			for(int i = 0; i &lt; vel; i++) delete[] pok;
			pok = novi_pok;
			return vel - broj_nullptr;
		}
		catch(...) {
			return vel;
		}
	}
	
	return vel;
}

int DodajOptuzbu(char **(&amp;pok), int vel, std::string krivac) {
	
	try {
		char *novi_krivac(nullptr);
		novi_krivac = new char[krivac.size() + 1];
		int h = 0;
		for(;h &lt; krivac.size(); h++) novi_krivac[h] = krivac[h];
		novi_krivac[h] = '\0';
		
		bool upisan(false);
		
<a name="3"></a><font color="#00FFFF"><a href="match559-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		for(int i = 0; i &lt; vel; i++) {
			if(pok[i] == nullptr) {
				pok[i] = novi_krivac; upisan = true;
				break;
			}
		}
		
		if(!upisan) {
</font>			try {
				char **novi_pok(nullptr);
				novi_pok = new char*[vel + 1];
				for(int i = 0; i &lt; vel + 1; i++) {
					if(i != vel) novi_pok[i] = pok[i];
					else novi_pok[i] = novi_krivac;
				}
				delete[] pok;
				pok = novi_pok;
				return vel + 1;
			}
			catch(...) {
				delete[] novi_krivac;
				throw std::bad_alloc();
			}
		}
		else return vel;
	}
	catch(...) { throw std::bad_alloc(); }
	
	return vel;
}

void IzlistajOptuzbu(char **pok, int vel) {
	for(int i = 0; i &lt; vel; i++) {
		if(pok[i] != nullptr) std::cout &lt;&lt; pok[i] &lt;&lt; std::endl;
	}
}

int main() {
	
	int n;
	char **niz(nullptr);
	
	try {
		std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
		std::cin &gt;&gt; n;
		
		std::cin.ignore(10000, '\n');
		
		std::vector&lt;std::string&gt; v1(n);
		if(n != 0) {
			std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
			for(int i = 0; i &lt; n; i++) std::getline(std::cin, v1[i]);
		}
			
		n = PotencijalniKrivci(niz, v1);
	
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
		int opcija;
		std::cin &gt;&gt; opcija;
		while(opcija != 0) {
			std::cin.ignore(10000, '\n');
			if(opcija == 1) {
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::string krivac;
				std::getline(std::cin, krivac);
				n = DodajOptuzbu(niz, n, krivac);
			}
			else if(opcija == 2) {
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
				std::string neduzan;
				std::getline(std::cin, neduzan);
				n = OdbaciOptuzbu(niz, n, neduzan);
			}
			else if(opcija == 3) {
				IzlistajOptuzbu(niz, n);
			}
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
			std::cin &gt;&gt; opcija;
		}
		
		for(int i = 0; i &lt; n; i++) delete[] niz[i];
		delete[] niz;
	}
	catch(std::bad_alloc) { 
		std::cout &lt;&lt; "Alokacija nije uspjela."; 
		for(int i = 0; i &lt; n; i++) delete[] niz[i];
		delete[] niz;
	}
	catch(std::domain_error izuzetak) { 
		std::cout &lt;&lt; izuzetak.what(); 
		for(int i = 0; i &lt; n; i++) delete[] niz[i];
		delete[] niz;
	}
	
	return 0;
}</pre>
</body>
</html>
