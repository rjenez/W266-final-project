<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7802.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7802.cpp<p></p><pre>
/*B 16/17, Zadaća 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
<a name="0"></a><font color="#FF0000"><a href="match116-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::cin;
using std::cout;
using std::endl;
using std::string;


typedef std::vector&lt;string&gt; VS;



int PotencijalniKrivci(char **&amp;q, VS s){
 	int br(0);
 try{
 	q=new char* [s.size()];
 		try{
 			for(int i(0);i&lt;s.size();i++){
 			q[i]=new char[(s[i].length())+1]; 
 				br++;
 			}
 		for(int i(0);i&lt;s.size();i++){
 			int h(0);
 			for(int j(0);j&lt;s[i].length();j++){
 				q[i][j]=s[i][j];
 				h=j;
 			}
 			h++;
 			q[i][h]='\0';
 		}
 		return br;
 	}catch(std::bad_alloc){
 		for(int i(0);i&lt;br;i++)
			delete[] q[i];
		delete q;
		throw;
		
 	}
 	
 }catch(std::bad_alloc){
 		delete q;
 		throw;
 	}
 	
 }
 
 
 int OdbaciOptuzbu(char** &amp;q, int &amp;n, string s){
 	int &amp;br(n);
 	int brojac(0);

 	
 	for(int i(0);i&lt;n;i++){
 	if(q[i]==nullptr)brojac++;
 	else{
 		if(q[i]==s){
 		delete[] q[i];//potenc greška;
 		q[i]=nullptr;
 		//br--;
 		brojac++;
 		
 	}	}
 	}
 	
 	if(brojac==0) {
 		string k("Osoba sa imenom ");
 		string h(" nije bila optuzena");
 		string e;
 		e=k+s+h;
 		throw std::domain_error(e);
 		
 	}/*
 	if(brojac&gt;10){
 		int novi(n-brojac);
 		char** p(new char*[novi]);
 		int k(0);
 		for(int i(0);k&lt;novi;i++){
 			
 			int ima(0);
 			for(int o(0);q[i][o]!='\0';o++)
 				ima++;//potencijalna greška
 			if(q[i]!=nullptr) {p[i]=new char[ima];k++;}
 		}k=0;
 		for(int i(0);k&lt;novi;i++){
 			if(q[i]!=nullptr) {p[i]=q[i];k++;}
 		}
 		for(int i(0);i&lt;n;i++){
 			delete[] q[i];
 		}
 		
 		q=p;
 		return novi;
 	}*/
 	return br;
 }
 
int DodajOptuzbu (char** &amp;q, int &amp;n, string s){
	int onaj(0);
	int del(0);
	int &amp;br(n);
	char* b(nullptr);
	try{
		b=new char[s.length()+1];
	
	bool ugurose(false);
	for(int i(0);i&lt;s.length();i++){
		b[i]=s[i];
		onaj++;
	}
	for(int i(0);i&lt;n;i++){
		if(q[i]==nullptr){
			q[i]=b;
			br++;
			ugurose=true;
			break;
		}}
	if(!ugurose){
		br++;
		char** p(nullptr);
		try{
		p= new char*[br];
		for(int i(0);i&lt;br;i++){
			if(i==br-1){
				p[i]=new char[s.length()+1];
			}else{
			int ima(0);
 			for(int o(0);q[i][o]!='\0';o++)
 				ima++;//potencijalna greška
				p[i]=new char[ima];
			}
			del++;
		}
		for(int i(0);i&lt;br;i++){
			if(i==br-1){
				int zadnji(0);
				for(int j(0);j&lt;s.length();j++){
					p[i][j]=s[j];
					
					zadnji++;
				}
				p[i][zadnji]='\0';
				
			}else{
				p[i]=q[i];
				
			}
		}
			q=p;
	}catch(std::bad_alloc){
		for(int i(0);i&lt;del;i++)
			delete[] p[i];
		delete p;
		throw;
	}
		
	}
	return br;
	}catch(std::bad_alloc){
	
		delete b;
		throw;
	}
}
void IzlistajOptuzbu (char** q,int n){
	cout&lt;&lt;endl;
	for(int i(0);i&lt;n;i++){
		
		if(q[i]==nullptr){}
		else{
		cout&lt;&lt;q[i]&lt;&lt;endl;
		
			
		}}
}
int main ()
{	
	char** q(nullptr);
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti?"&lt;&lt;endl;
	int koliko;
	cin&gt;&gt;koliko;
	std::cin.ignore(100000,'\n');
	cout&lt;&lt;"Unesite potencijalne krivce: "; 	
	VS a;
	for(int i(0);i&lt;koliko;i++){
		string imena;
		std::getline(std::cin, imena);
		a.push_back(imena);
	}
	try{
	int br(PotencijalniKrivci(q,a));
	int unos;
		int b(br);
		int ma_daj_ba(0);
	do{
		
	
		cout&lt;&lt;"\nOdaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
		cin&gt;&gt;unos;
		
		std::cin.ignore(100000,'\n');
		
		
		if(unos==2){
			cout&lt;&lt;"\nUnesite ime koje zelite izbaciti: ";
		string klm;
		std::getline(std::cin,klm);
		
				try{
		b=(OdbaciOptuzbu(q,b,klm));
				}catch(std::domain_error izuzetak){
		cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
		}
		
		}
	
		if(unos==1){
	
		cout&lt;&lt;"\nUnesite ime novog optuzenog: ";
		string krivi;
		std::getline(std::cin, krivi);
		
		
			try{
		b=(DodajOptuzbu(q,b,krivi));	
			}catch(std::bad_alloc){
			
			}
	
			
		}if(unos==3){
			
	IzlistajOptuzbu(q,b);
		}
	}while(unos!=0);
	}catch(std::bad_alloc){
		cout&lt;&lt;"Nevaljaa";
	}
	return 0;
</font>}</pre>
</body>
</html>
