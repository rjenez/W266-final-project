<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9443.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9443.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci(char **&amp;znakovi, std::vector&lt;std::string&gt; imena){
	char **pok{nullptr};
	int brojac{0};
	try{
<a name="0"></a><font color="#FF0000"><a href="match922-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

	    pok=new char*[imena.size()];
	    for(int i{0}; i&lt;imena.size(); i++) pok[i] = nullptr;
	    try{
		    for(int i{0}; i&lt;imena.size(); i++){ 
		    	pok[i]=new char[imena[i].size()+1];
</font>		    	brojac++;
<a name="2"></a><font color="#0000FF"><a href="match922-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		    	for(int j{0}; j&lt;imena[i].size()+1; j++){
		    		if(j==imena[i].size()) pok[i][j] = '\0';
</font>		    		else
		    		pok[i][j] = imena.at(i).at(j);
		    	}
		    }
		}
		catch(...){
			for(int i{0}; i&lt;imena.size(); i++) delete[] pok[i];
			throw;
		}
	}
	catch(...){ 
		delete[] pok;
		throw std::bad_alloc();
	}
	znakovi=pok;
	return brojac;
}

int OdbaciOptuzbu(char **&amp;znakovi, int velicina, std::string nije){
	for(int i{0}; i&lt;velicina; i++){
		int k{0};
		while(znakovi[i] != nullptr &amp;&amp; znakovi[i][k] != '\0') k++;
		if(k == nije.size())
		for(int j{0}; j&lt;k; j++){
			if(nije.at(j) != znakovi[i][j]) break;
			if(j == k-1){
				delete[] znakovi[i];
				znakovi[i]=nullptr;
				i=velicina;
				break;
			}
		}
	}
	int izbrisani{0};
	for(int i{0}; i&lt;velicina; i++)
	    if(znakovi[i] == nullptr) izbrisani++;
	
	if(izbrisani==0) throw std::domain_error("Osoba sa imenom " + nije + " nije bila optuzena");
	if(izbrisani&gt;10){
		char **novi{nullptr};
		try{
			novi = new char*[velicina-izbrisani];
			int j{0}, i{0};
			while(i&lt;velicina &amp;&amp; j&lt;velicina-izbrisani){
				if(znakovi[i] != nullptr){
					novi[j]=znakovi[i];
					j++;
				}
				i++;
			}
			znakovi=novi;
			velicina=velicina-izbrisani;
		}
		catch(...){
			delete[] novi;
		}
	}
	return velicina;
}

int DodajOptuzbu(char **&amp;znakovi, int velicina, std::string jeste){
	char *novi{nullptr};
	try{
		novi = new char[jeste.size()+1];
		for(int i{0}; i&lt;jeste.size()+1; i++){
			if(i == jeste.size()) novi[i]='\0';
			else
			novi[i]=jeste.at(i);
		}
		int i{0}; 
		while(i&lt;velicina){
			if(znakovi[i]==nullptr){
				znakovi[i]=novi;
				velicina++;
				break;
			}
			i++;
		}
		if(i==velicina){
			char **josnoviji{nullptr};
			try {
				josnoviji = new char*[velicina+1];
				for(int j{0}; j&lt;velicina+1; j++){
					if(j&lt;velicina) josnoviji[j]=znakovi[j];
					else josnoviji[j]=novi;
				}
				delete[] znakovi;
				znakovi=josnoviji;
				velicina++;
			}
			catch (...) {
				delete[] josnoviji;
				throw std::bad_alloc();
			}
			
		}
	}
	catch(...){
		delete[] novi;
		throw std::bad_alloc();
	}
	return velicina;
}

void IzlistajOptuzbu(char **znakovi, int velicina){
	for(int i{0}; i&lt;velicina; i++){
		if(znakovi[i] != nullptr){
			int j{0};
			while(znakovi[i][j] != '\0'){ 
				std::cout &lt;&lt; znakovi[i][j];
				j++;
			}
<a name="1"></a><font color="#00FF00"><a href="match922-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

			std::cout &lt;&lt; std::endl;
		}
	}
}

int main (){
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	int velicina;
	std::cin &gt;&gt; velicina;
	std::cin.ignore(10000,'\n');
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	std::vector&lt;std::string&gt; spisak(velicina);
</font>	for(int i{0}; i&lt;velicina; i++) std::cin &gt;&gt; spisak[i];
	char **znak;
	try{
	   velicina = PotencijalniKrivci(znak,spisak);
	}
	catch(std::bad_alloc){
		std::cout &lt;&lt; std::endl &lt;&lt; "Izuzetak PotencijalniKrivci";
		return 0;
	}
	int oznaka;
	do{
	   std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;;
	   std::cin &gt;&gt; oznaka;
	   if(oznaka == 0){
	    	for(int i{0}; i&lt;velicina; i++) delete[] znak[i];
	    	delete[] znak;
	    	return 0;
	   }
	   if(oznaka == 1){
	    	std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
	    	std::string novi;
	    	std::cin &gt;&gt; novi;
	    	try{
	    	   velicina = DodajOptuzbu(znak,velicina,novi);
	    	}
	    	catch(std::bad_alloc){
	    		std::cout &lt;&lt; std::endl &lt;&lt; "Izuzetak DodajOptuzbu";
	    		return 0;
	    	}
	   }
	   if(oznaka == 2){
	   	 std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
	   	 std::string ime;
	   	 std::cin &gt;&gt; ime;
	   	 try{
	   	    velicina = OdbaciOptuzbu(znak,velicina,ime);
	   	 }
	   	 catch(std::domain_error izuzetak){
	   	 	std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
	   	 }
	   }
	   if(oznaka==3){
	   	IzlistajOptuzbu(znak,velicina);
	   }
	}while(oznaka==1 || oznaka==2 || oznaka==3);
	
	for(int i{0}; i&lt;velicina; i++) delete[] znak[i];
	delete[] znak;
	return 0;
}</pre>
</body>
</html>
