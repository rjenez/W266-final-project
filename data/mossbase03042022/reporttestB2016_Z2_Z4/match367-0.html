<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6613.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6613.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stdexcept&gt;
#include&lt;new&gt;
using std::cin;
using std::cout;
using std::endl;
using std::string;
int PotencijalniKrivci(char **&amp;ref, std::vector&lt;std::string&gt;v){
	char **niz(nullptr);
	
	try{
		
		niz=new char*[v.size()];
	}
	catch(std::bad_alloc){
		delete[] niz;
		throw;
	}
	try{
		for(int i=0; i&lt;v.size(); i++)
			niz[i]=nullptr;
		for(int i=0; i&lt;v.size(); i++)
			niz[i]=new char[v[i].size()+1];
<a name="0"></a><font color="#FF0000"><a href="match367-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

		for(int i=0; i&lt;v.size(); i++){
			for(int j=0; j&lt;v[i].size(); j++){
				niz[i][j]=v[i][j];
				if(j==v[i].size()-1)
					niz[i][j+1]='\0';
</font>			}
		}
		ref=niz;
		return v.size();
	}
<a name="3"></a><font color="#00FFFF"><a href="match367-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	catch(std::bad_alloc){
		for(int i=0; i&lt;v.size(); i++)
			delete[] niz[i];
		delete[] niz;
</font>		throw;
	}
}
int OdbaciOptuzbu(char **&amp;ref, int n, std::string s){
	int br=0;
	for(int i=0; i&lt;n; i++){
		char *r=ref[i];
		int j=0;
		while(*r!='\0' &amp;&amp; j&lt;s.size()){
			if(*r==s[j]){
				j++;
				r++;
			}
			else break;
		}
		if(j==s.size() &amp;&amp; *r=='\0'){
<a name="1"></a><font color="#00FF00"><a href="match367-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

			delete[] ref[i];
			ref[i]=nullptr;
			br++;
		}
	}
	if(br==0) throw std::domain_error("Osoba sa imenom "+s+" nije bila optuzena");
	if(br&gt;10){
		char**niz=nullptr;
</font>	try{
		niz=new char*[n-br];
	}
	catch(std::bad_alloc){
		delete[] niz;
	}
	try{
		int j(0);
		for(int i=0; i&lt;n-br; i++)
			niz[i]=nullptr;
		for(int i=0; i&lt;n; i++){
			if(ref[i]!=nullptr){
				char *r=ref[i];
				char*e=ref[i];
				int b=0;
				while(*r!='\0'){ b++; r++;}
				niz[j]=new char[b+1];
				char *p=niz[j];
				while(*p++=*e++);
				j++;
		}
		}
		for(int i=0; i&lt;n; i++)
		delete[] ref[i];
		ref=niz;
		return n-br;
	}
	catch(std::bad_alloc){
<a name="2"></a><font color="#0000FF"><a href="match367-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		for(int i=0; i&lt;n-br; i++)
			delete[] niz[i];
		delete[] niz;
	}
	}
	return n;
}
int DodajOptuzbu(char **&amp;ref, int n, std::string s){
</font>	char *optuzeni=nullptr;
	try{
	optuzeni=new char[s.size()+1];
	for(int i=0; i&lt;s.size(); i++){
		optuzeni[i]=s[i];
		if(i==s.size()-1) optuzeni[i+1]='\0';
	}
	}
	catch(std::bad_alloc){
		delete[] optuzeni;
		throw;
	}
	int br(0);
	for(int i=0; i&lt;n; i++){
		if(ref[i]==nullptr){
			ref[i]=&amp;optuzeni[0];
			br=1;
			break;
		}
	}
	if(br==0){
		char **niz=nullptr;
		try{
			niz=new char*[n+1];
		}
		catch(std::bad_alloc){
			delete[] niz;
			throw;
		}
		try{
			for(int i=0; i&lt;n; i++)
				niz[i]=nullptr;
			for(int i=0; i&lt;n; i++){
				char*r=ref[i];
				int b=0;
				while(*r!='\0'){ b++; r++;}
				niz[i]=new char[b+1];
				int j(0);
				for( ; ;){
					niz[i][j]=ref[i][j];
					if(ref[i][j]=='\0') break;
					j++;
				}
		
			}
		
				niz[n]=&amp;optuzeni[0];
	
			for(int i=0; i&lt;n; i++)
				delete[] ref[i];
			delete[] ref;
			ref=niz;

			return n+1;
		}
		catch(std::bad_alloc){
		for(int i=0; i&lt;n+1; i++)
			delete[] niz[i];
		delete[] niz;
		throw;
		}
	}
	return n;
}
void IzlistajOptuzbu(char **ref, int n){
	cout&lt;&lt;endl;
	for(int i=0; i&lt;n; i++){
		char *r=ref[i];
		if(ref[i]==nullptr) continue;
		while(*r!='\0'){
			cout&lt;&lt;*r;
			r++;
		}
		if(i!=n-1) cout&lt;&lt;endl;
	}
}
int main ()
{
	
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	int n;
	char **ref;
	cin&gt;&gt;n;
	cout&lt;&lt;endl&lt;&lt;"Unesite potencijalne krivce: ";
	std::cin.ignore(10000,'\n');
	try{
	std::vector&lt;std::string&gt;v(n);
	for(int i=0; i&lt;n; i++)
		cin&gt;&gt;v[i];
	
	
	
	n=PotencijalniKrivci(ref, v);
	int x;
	std::string s;
	for( ; ; ){
		cout&lt;&lt;endl&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
		cin&gt;&gt;x;
		if(x==0) break;
		if(x==1){
			cout&lt;&lt;endl&lt;&lt;"Unesite ime novog optuzenog: ";
			std::cin.ignore(10000,'\n');
			std::getline(cin, s);     
			n=DodajOptuzbu(ref, n, s);
			
		}
		if(x==2){
			cout&lt;&lt;endl&lt;&lt;"Unesite ime koje zelite izbaciti: ";
			std::cin.ignore(10000,'\n');
			std::getline(cin, s);
			n=OdbaciOptuzbu(ref, n, s);	
		}
		
		if(x==3) IzlistajOptuzbu(ref,n);
	}
		
	}
	catch(std:: domain_error izuzetak){
		cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
		for(int i=0; i&lt;n; i++)
			delete[] ref[i];
		delete[] ref;
		return 0;
	}
<a name="4"></a><font color="#FF00FF"><a href="match367-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	catch(std::bad_alloc){
		for(int i=0; i&lt;n; i++)
		delete[] ref[i];
		delete[] ref;
		return 0;
</font>	}
	for(int i=0; i&lt;n; i++)
	    delete[] ref[i];
	delete[] ref;
	return 0;
}
</pre>
</body>
</html>
