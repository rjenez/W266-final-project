<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1579.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1579.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	NAPOMENA: i javni ATo-vi su dio postavke
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include&lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;string&gt;
#include&lt;stdexcept&gt;
int PotencijalniKrivci(char ** &amp;c, std::vector&lt;std::string&gt; vs){
	int br=0,n=vs.size();
	c=nullptr;
	try{
		
		c=new char *[n];
		for(int i=0;i&lt;n;i++){
			c[i]=nullptr;
		}
		int al=0;
		try{
			for(int i=0;i&lt;n;i++){
				c[i]=new char[int(vs[i].size()+1)];
				al++;
			}
		}
		catch(...){
			for(int i=0;i&lt;al;i++){
				delete [] c[i];
			}
			delete [] c;
				throw std::bad_alloc();
		}
	}
	catch(...){
		delete [] c;
		throw std::bad_alloc();
	}
	for(int i=0;i&lt;n;i++){
		std::string pom=vs[i];
		for(int j=0;j&lt;int(vs[i].size()+1);j++){
			if(j==int(vs[i].size())){ c[i][j]='\0'; break;}
			c[i][j]=pom[j];
		}
		br++;
	}
	return br;
}

int OdbaciOptuzbu(char ** &amp;c,int n,std::string s){
	bool ima=true, dalje=true;
	for(int i=0;i&lt;n;i++){
		int j;
		if(c[i]==nullptr) continue;
		if(c[i]!=nullptr){
		  for( j=0;j&lt;int(s.length());j++){
			if(c[i][j]!=s[j] &amp;&amp; s[j]!='\0'){
				ima=false;
				break;
			  }
			}
		}
		if(ima &amp;&amp; c[i][j]=='\0'){
			delete[] c[i];
			c[i]=nullptr;
			dalje=false;
			break;
		}
		
		ima=true;
	}
	if(dalje){
		throw std::domain_error("Osoba sa imenom "+s+" nije bila optuzena");
	}
	int brnul=0;
	for(int i=0;i&lt;n;i++)
		if(c[i]==nullptr)
			brnul++;
	if(brnul&gt;10){
		int brosoba=0;
		for(int i=0;i&lt;n;i++)
			if(c[i]!=nullptr) brosoba++;
		char **p=nullptr;
		p=new char *[brosoba];
<a name="0"></a><font color="#FF0000"><a href="match989-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		int b=0;
		for(int i=0;i&lt;n;i++){
			if(c[i]!=nullptr)
				p[b++]=c[i];
		}
		for(int i=0;i&lt;n;i++){
			delete [] c[i];
		//	c[i]=nullptr;
		}
		delete [] c;
	//	c=nullptr;
		c=p;
</font>		return brosoba;
	}
	return n;
	
}
void IzlistajOptuzbu(char ** c,int n){
	for(int i=0;i&lt;n;i++){
		int bro=0,k=0;
		if(c[i]==nullptr) continue;
		while (c[i][k++]!='\0') {
			bro++;
		}
		for(int j=0;j&lt;bro;j++){
			std::cout &lt;&lt; c[i][j];
		}
<a name="2"></a><font color="#0000FF"><a href="match989-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

		std::cout&lt;&lt;std::endl;
	}
}
int DodajOptuzbu(char **&amp;c, int n, std::string s){
	char *p=nullptr;
	try{
		p=new char[int(s.length())+1];
</font>	}
	catch(...){
		delete [] p;
		throw std::bad_alloc();
	}
	
	for(int i=0;i&lt;int(s.length());i++){
		p[i]=s[i];
	}
	p[int(s.length())]='\0';
	
	bool imamjesta=true;
	for(int i=0;i&lt;n;i++){
		if(c[i]==nullptr){
			imamjesta=false;
			c[i]=new char [int(s.length()+1)];
			for(int j=0;j&lt;=int(s.length());j++)
			c[i][j]=p[j];
		}
	}
	if(imamjesta){
		char **q=nullptr;
		try{
			q=new char*[n+1];
			for(int i=0;i&lt;n+1;i++)
				q[i]=nullptr;
		}
		catch(...){
			delete [] q;
			delete [] p;
			throw std::bad_alloc();
		}
		try {
			for(int i=0;i&lt;n;i++){
			int bro=0,k=0;
				while (c[i][k++]!='\0')
						bro++;
				
			q[i]=new char[bro+1];
			}
	//		q[n]=new char[int(s.size())+1];
			}
		catch (...) {
			for(int i=0;i&lt;n+1;i++)
			delete [] q[i];
			delete [] q;
			delete [] p;
			throw std::bad_alloc();
			}
		for(int i=0;i&lt;n;i++){
			int bro=0,k=0;
				while (c[i][k++]!='\0')
						bro++;
			for(int j=0;j&lt;=bro;j++){
				q[i][j]=c[i][j];
			}
		}
		for(int i=0; i&lt;n; i++) delete[] c[i];
		delete[] c;
		q[n]=p;
		c=q;
	//	delete[] p;
		return n+1;
	}
	delete[] p;
	return n;
}
<a name="1"></a><font color="#00FF00"><a href="match989-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

int main ()
{
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int pk;
	std::cin&gt;&gt;pk;
	std::cin.ignore(10000,'\n');
	std::cout &lt;&lt; "Unesite potencijalne krivce: "&lt;&lt;std::endl;
</font>	std::vector&lt;std::string&gt; imena;
	for(int i=0;i&lt;pk;i++){
	std::string pom;
	std::getline(std::cin,pom);
	imena.push_back(pom);
	}
	char **nizPotencijalnih;
try{

	 pk = PotencijalniKrivci( nizPotencijalnih, imena);
	
	int x;
	do{
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
		std::cin&gt;&gt;x;
		if(x==1){
			try{
			std::cout &lt;&lt; "Unesite ime novog optuzenog: "&lt;&lt;std::endl;
			std::cin.ignore(10000,'\n');
			std::string ubaci;
			std::getline(std::cin,ubaci);
			pk=DodajOptuzbu(nizPotencijalnih,pk,ubaci);
			}
<a name="3"></a><font color="#00FFFF"><a href="match989-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

			catch(std::bad_alloc){
			for(int i=0;i&lt;pk;i++)
				delete [] nizPotencijalnih[i];
			delete [] nizPotencijalnih;
			std::cout&lt;&lt;"Alokacija nije uspjela";
</font>			}
		}
		if(x==2){
			try{
			std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
			std::cin.ignore(10000,'\n');
			std::string izbaci;
			std::getline(std::cin,izbaci);
			pk=OdbaciOptuzbu(nizPotencijalnih,pk,izbaci);
			}
			catch(std::bad_alloc){
			for(int i=0;i&lt;pk;i++)
				delete [] nizPotencijalnih[i];
			delete [] nizPotencijalnih;
				std::cout&lt;&lt;"Alokacija nije uspjela";
			}
			catch(std::domain_error x){
				for(int i=0;i&lt;pk;i++)
					delete [] nizPotencijalnih[i];
				delete [] nizPotencijalnih;
				std::cout &lt;&lt; x.what()&lt;&lt;std::endl;
			}
		}
		if(x==3){
			IzlistajOptuzbu(nizPotencijalnih,pk);
		}
		
	}while(x!=0);
	for(int i=0;i&lt;pk;i++){
		delete [] nizPotencijalnih[i];
	}
	delete [] nizPotencijalnih;
}

catch(...){
	for(int i=0;i&lt;pk;i++)
		delete [] nizPotencijalnih[i];
	delete [] nizPotencijalnih;
	std::cout&lt;&lt;"Alokacija nije uspjela";
	}
	return 0;
}</pre>
</body>
</html>
