<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1671.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1671.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;

int PotencijalniKrivci(char **&amp;ref_na_pok, std::vector&lt;std::string&gt; v) {
	char **pok;
	try {
		pok = new char*[v.size()];
	}
	catch (...) {
		throw;
	}
	try {
		for (int i = 0; i &lt; v.size(); i++) pok[i] = new char[v[i].size()+1];
	}
	catch (...) {
		delete[] pok;
		throw;
	}
	for (int i = 0; i &lt; v.size(); i++) {
		auto pocetak(v[i].begin());
		for (int j = 0; j &lt; v[i].size(); j++) pok[i][j] = *pocetak++;
		pok[i][v[i].size()] = '\0';
	}
	ref_na_pok = pok;
	return v.size();
}

int OdbaciOptuzbu(char **&amp;ref_na_pok, int velicina_niza, std::string s) {
	bool test(false);
	int nevin_i;
	for (int i = 0; i &lt; velicina_niza; i++) {
		std::string pom(ref_na_pok[i]);
		if (ref_na_pok[i] != nullptr &amp;&amp; pom == s) {
			test = true;
			nevin_i = i;
			break;
		}
		/*char *pocetak(ref_na_pok[i]);
		int j(0);
		while (pocetak != nullptr &amp;&amp; *pocetak != '\0' &amp;&amp; j &lt; s.size() &amp;&amp; *pocetak == s[j]) {
			pocetak++;
			j++;
		}
		if (*pocetak == '\0' &amp;&amp; j == s.size()) {
			test = true;
			nevin_i = i;
			break;
		}*/
	}
	if (!test) throw std::domain_error ("Osoba sa imenom " + s + " nije bila optuzena");
	if (test) {
		delete[] ref_na_pok[nevin_i];
		ref_na_pok[nevin_i] = nullptr;
	}
	int brojac(0);
<a name="1"></a><font color="#00FF00"><a href="match832-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

	for (int i = 0; i &lt; velicina_niza; i++) {
		if (ref_na_pok[i] == nullptr) brojac++;
	}
	if (brojac &lt;= 10) return velicina_niza;
	char **pok(nullptr);
</font>	try {
		pok = new char*[velicina_niza-brojac];
		try {
			for (int i = 0; i &lt; velicina_niza; i++) 
				if (ref_na_pok[i] != nullptr) pok[i] = ref_na_pok[i];
			delete[] ref_na_pok;
			ref_na_pok = pok;
		}
		catch (...) {
			delete[] pok;	
		}
	}
	catch(...) {
		return velicina_niza;
	}
	return velicina_niza-brojac;
}
<a name="4"></a><font color="#FF00FF"><a href="match832-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

int DodajOptuzbu(char **&amp;ref_na_pok, int velicina_niza, std::string s) {
	char *pok;
	try {
		pok = new char[s.size()+1];
</font>	}
	catch (...) {
		throw;
	}
	std::strcpy(pok, s.c_str());
<a name="0"></a><font color="#FF0000"><a href="match832-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	for (int i = 0; i &lt; velicina_niza; i++) {
		if (ref_na_pok[i] == nullptr) {
			ref_na_pok[i] = pok;
			pok = nullptr;
			return velicina_niza;
		}
	}
	char **pom;
	try {
</font>		pom = new char*[velicina_niza+1];
	}
	catch (...) {
		throw;
	}
	for (int i = 0; i &lt; velicina_niza; i++) 
		pom[i] = ref_na_pok[i];
	delete[] ref_na_pok;
	pom[velicina_niza] = pok;
	ref_na_pok = pom;
	pom = nullptr;
	return velicina_niza+1;
}
void IzlistajOptuzbu(char **pok, int velicina_niza) {
<a name="2"></a><font color="#0000FF"><a href="match832-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	for (int i = 0; i &lt; velicina_niza; i++)
		if (pok[i] != nullptr) std::cout &lt;&lt; pok[i] &lt;&lt; std::endl;
</font>}

int main ()
{
	try {
		int n;
		std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
		std::cin &gt;&gt; n;
		std::cin.clear();
		std::cin.ignore(10000, '\n');
		std::vector&lt;std::string&gt; v(n);
		std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
		for (int i = 0; i &lt; n; i++) {
			std::string s;
			std::getline(std::cin, s);
			v[i] = s;
		}
		char **pok;
		auto velicina1(PotencijalniKrivci(pok, v));
		char opcija;
		do {
			int &amp;velicina(velicina1);
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
			std::cin &gt;&gt; opcija;
			switch (opcija) {
				case '1': {
					std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
					std::cin.clear();
					std::cin.ignore(10000, '\n');
					std::string s;
					std::getline(std::cin, s);
					velicina = DodajOptuzbu(pok, velicina, s);
				} break;
				case '2': {
					std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
					std::cin.clear();
					std::cin.ignore(10000, '\n');
					std::string s;
					std::getline(std::cin, s);
					velicina = OdbaciOptuzbu(pok, velicina, s);
				} break;
				case '3': {
					IzlistajOptuzbu(pok, velicina);
				} break;
			}
		} while (opcija != '0');
<a name="3"></a><font color="#00FFFF"><a href="match832-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		for (int i = 0; i &lt; velicina1; i++) delete[] pok[i];
		delete[] pok;
	}
	catch(std::domain_error tekst) {
		std::cout &lt;&lt; tekst.what();
</font>	}
	catch(...) {
		
	}
	return 0;
}</pre>
</body>
</html>
