<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3186.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3186.cpp<p></p><pre>
//B 16/17, ZadaÄ‡a 2, Zadatak 4
#include &lt;stdexcept&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

int PotencijalniKrivci (char** &amp;pok, std::vector&lt;std::string&gt; spisak_imena)
{
	try {
		int broj_alokacija(0);
		// Dinamicka inicijalizacija pok i postavljanje na nullptr ..
		pok = (new char*[spisak_imena.size()]);
		for (int i=0; i&lt;spisak_imena.size(); ++i) pok[i] = nullptr;
		
		try {	// Kopiranje u ** &amp; pok ..
			for (int i=0; i&lt;spisak_imena.size(); ++i)
			{
				int znak(0);
<a name="2"></a><font color="#0000FF"><a href="match980-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

				pok[i] = new char[spisak_imena[i].length() + 1];
				for (int z=0; z&lt;spisak_imena[i].length(); ++z)
</font>					pok[i][znak++] = spisak_imena[i][z];
					pok[i][znak] = '\0';	broj_alokacija++;
			}	return broj_alokacija;
		}	catch (...) {
			for (int i=0; i&lt;broj_alokacija; ++i) delete[] pok[i];
			throw std::bad_alloc();
		}
	}	catch (...) {
		delete [] pok;
		throw std::bad_alloc();
	}
}

int DodajOptuzbu (char** &amp;pok, int vel, std::string osoba)
{	
	char *niz_osoba(nullptr);
	try {
		niz_osoba = (new char[osoba.length()+1]);
		
		int index(0);
		for (int i=0; i&lt;osoba.length(); ++i)
			niz_osoba[index++] = osoba[i];
			niz_osoba[index] = '\0';
		
		for (int i=0; i&lt;vel; ++i)
			if (pok[i] == nullptr) {
				pok[i] = niz_osoba;
				niz_osoba = nullptr;
				return vel;
			}
	
		char **temp;
		try {
			temp = (new char*[vel+1]);
		
			index = 0; // Dodjela novom..
			for (int i=0; i&lt;vel; ++i)
				temp[index++] = pok[i];
				temp[index] = niz_osoba;
				niz_osoba = nullptr;
		
			delete[] pok;	pok = temp;    
			temp = nullptr;	return vel+1;
	
		}	catch (...) {
			delete [] temp;
			temp = nullptr;
			throw std::bad_alloc();
		}
	}	catch (...) {
		delete [] niz_osoba;
		niz_osoba = nullptr;
		throw std::bad_alloc();
	}
}

bool Uporedi(const char* niz_charova, const std::string &amp;string2) {
	if (niz_charova == nullptr)	return false;
	std::string string1 (niz_charova);
	if (string1 == string2)	return true;
	else	return false;
}

int OdbaciOptuzbu (char** &amp;pok, int vel, std::string osoba)
{
	int broj_obrisanih(0);
	for (int i=0; i&lt;vel; ++i) {
		if (Uporedi(pok[i], osoba)) {
			delete [] pok[i];
			pok[i] = nullptr;	
			broj_obrisanih++;
		}
	}
		
	if (broj_obrisanih == 0) {
		std::string output ("Osoba sa imenom " + osoba + " nije bila optuzena");
		throw std::domain_error (output);
	}	
	else if (broj_obrisanih &gt; 10) 
	{
		try {
			int index(0);
			char** novi_pok (new char*[vel-broj_obrisanih]);
			for (int i=0; i&lt;vel; ++i) {
				if (pok[i] == nullptr)  continue;
				else  novi_pok[index++] = pok[i];
			}	delete [] pok;
			pok = novi_pok;	return vel-broj_obrisanih;
		}	catch (...) {}
	}	return vel;
}

void IzlistajOptuzbu (char** output, int vel) {
	for (int i=0; i&lt;vel; ++i) {
		if (output[i] == nullptr)	continue;
		// Ispis na ekran..
		int index(0);
		while (output[i][index] != '\0')
			std::cout &lt;&lt; output[i][index++];
			std::cout &lt;&lt; std::endl;
	}
}

int main ()
{
	int broj_krivaca(0);
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	std::cin &gt;&gt; broj_krivaca;
	std::cin.clear();	std::cin.ignore(10000 , '\n');
	
	std::vector&lt;std::string&gt; spisak_imena;
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	for (int i=0; i&lt;broj_krivaca; ++i) {
		std::string input;
		std::getline (std::cin, input);
		spisak_imena.push_back(input);
	}
	
	char **pok_spisak;
	int vel = PotencijalniKrivci(pok_spisak, spisak_imena);
	
	for (;;) {
		int opcija;
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog";
		std::cout &lt;&lt; " 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
		std::cin &gt;&gt; opcija;
<a name="0"></a><font color="#FF0000"><a href="match980-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

		std::cin.clear();	std::cin.ignore(10000, '\n');
		
		if (opcija == 0) break;
			else if (opcija == 1) {
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::string input; std::getline (std::cin, input);
				try {
					vel = DodajOptuzbu(pok_spisak, vel, input);
				}	catch (...) {}
</font>		}	
<a name="1"></a><font color="#00FF00"><a href="match980-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

		else if (opcija == 2) {
			// I input imena za izbaciti ..
			std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
			std::string input; std::getline (std::cin, input);
			try {	
				vel = OdbaciOptuzbu(pok_spisak, vel, input); 
			}	catch (std::domain_error text) {	
				std::cout &lt;&lt; text.what() &lt;&lt; std::endl;	
</font>			}
		}	else if (opcija == 3) {
			IzlistajOptuzbu(pok_spisak, vel);
		}
	}
	
	for (int i=0; i&lt;vel; ++i) {
		delete [] pok_spisak[i];
	}	delete [] pok_spisak;
	return 0;
}</pre>
</body>
</html>
