<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9296.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9296.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;

int PotencijalniKrivci(char** &amp;pok, std::vector&lt;std::string&gt; spisak){
	int brojac(0);
	try{
<a name="0"></a><font color="#FF0000"><a href="match959-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		pok=new char*[spisak.size()];
		try{
			for(int i=0; i&lt;spisak.size(); i++) {
				pok[i]=new char[spisak[i].length()+1];
</font>				brojac++;
			}
		}
		catch(std::bad_alloc){
<a name="1"></a><font color="#00FF00"><a href="match959-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

			for(int i=0; i&lt;brojac; i++) delete[] pok[i];
			delete[] pok;
			throw;
		}
	}
	catch(std::bad_alloc){
</font>		throw;
	}
	int j;
	for(int i=0; i&lt;spisak.size(); i++){
		for(j=0; j&lt;spisak[i].length(); j++){
			pok[i][j]=spisak[i][j];
		}
		pok[i][j]='\0';
	}
	
	return brojac;
}
int OdbaciOptuzbu(char** &amp;pok, int vel_niz_pok, std::string ime){
 	bool isti=true;
 	int br_nul_pok(0), nova_vel(-1), i;
 	for(i=0; i&lt;vel_niz_pok; i++){
 		if(ime.length()==std::strlen(pok[i])){		//not sure da li se ovo treba deref mada msm da ipak treba UPDATE: ne treba, kompajler se buni lolz
	 		int j;
	 		for(j=0; j&lt;ime.length(); j++){
	 			isti=true;
	 			if(pok[i][j]!=ime[j]){		//nije taj, trazi dalje
	 				isti=false;
	 				break;
	 				}
	 			}
	 		if(isti){
	 			int vel(ime.length());
	 			for(int k=0; k&lt;vel-1; k++){
	 				pok[i][k]=pok[i][k+1];		//ja se nadam da ovo moze ovako
	 				vel--;
	 			}
	 			pok[i]=nullptr;
	 			br_nul_pok++;
	 			vel=vel_niz_pok;
	 			if(br_nul_pok&gt;10){
	 				char**novi_pokazivaci;
		 			br_nul_pok=0;
		 			vel-=10;
		 			novi_pokazivaci=new char*[vel]; //alociramo novi niz pok, moze baciti
		 			int h(0);
					for(int k=0; k&lt;vel; k++) if(pok[h]!=nullptr) novi_pokazivaci[k]=pok[h];
<a name="2"></a><font color="#0000FF"><a href="match959-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	 				for(int k=0; k&lt;vel_niz_pok; k++) delete[] pok[k];
	 				delete[] pok;
	 				pok=novi_pokazivaci;		//ja se nadam da i ovo moze ovako
		 			nova_vel=vel;
</font>	 			}
			}
		}
	}
 	if(!isti&amp;&amp;i==vel_niz_pok) throw std::domain_error ("Osoba sa imenom");	//fascinantno...ovo veze nemam kako da uradim kako treba al' hajd
 	if(nova_vel==-1) return vel_niz_pok;
 	return nova_vel;
 }

int DodajOptuzbu(char**&amp;pok, int vel_niz_pok, std::string ime){
		char*novi=new char[ime.length()+1];
		for(int i=0; i&lt;ime.length(); i++) novi[i]=ime[i];
		novi[ime.length()]='\0';
		int i;
		for(i=0; i&lt;vel_niz_pok; i++){
			if(pok[i]==nullptr){
				pok[i]=novi;
				return vel_niz_pok;
			}
		}
		char**novi_novi=new char*[vel_niz_pok+1];
		for(i=0; i&lt;vel_niz_pok; i++){
			novi[i]=*pok[i];
			delete[] pok[i];
		}
		novi_novi[vel_niz_pok]=novi;
		delete[] pok;
		pok=novi_novi;
		delete[] novi;
		for(i=0; i&lt;vel_niz_pok+1; i++) delete[] novi_novi[i];
		delete[] novi_novi;
		
 	return vel_niz_pok+1;
 }
 
void IzlistajOptuzbu(char**pok, int vel){
	for(int i=0; i&lt;vel; i++){
		if(pok[i]==nullptr) continue;
		std::cout&lt;&lt;pok[i]&lt;&lt;std::endl;
	}
}
int main ()
{
	try{
		std::cout&lt;&lt;"Koliko potencijalnih krivaca zeite unijeti?";
		int n;
		std::cin&gt;&gt;n;
		std::cin.ignore(100,'\n');
		std::cout&lt;&lt;std::endl&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
		char**pok;
		std::vector&lt;std::string&gt;spisak;
<a name="3"></a><font color="#00FFFF"><a href="match959-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		for(int i=0; i&lt;n; i++){
			std::string osoba;
			std::getline(std::cin, osoba);
			spisak.push_back(osoba);
</font>		}
		int vel1, vel2;
		for(;;){
<a name="4"></a><font color="#FF00FF"><a href="match959-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

			std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
			int opcija;
			std::cin&gt;&gt;opcija;
			std::cin.ignore(1000, '\n');
</font>			int broj_alociranih(PotencijalniKrivci(pok, spisak));
			if(!std::cin){
				std::cin.clear();
				std::cin.ignore(1000, '\n');
			}
			else if(opcija==1){
				std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
				std::string novi_optuzeni;
				std::getline(std::cin, novi_optuzeni);
				vel1=DodajOptuzbu(pok, spisak.size(), novi_optuzeni);
			}
			else if(opcija==2){
				std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: ";
				std::string izbacen;
				std::getline(std::cin, izbacen);
				vel2=OdbaciOptuzbu(pok, spisak.size(), izbacen);
			}
			else if(opcija==0) break;
		}
	}
	catch(std::bad_alloc){}
	catch(std::domain_error){}
	return 0;
}</pre>
</body>
</html>
