<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7977.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3402.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci (char** &amp;p, const std::vector&lt;std::string&gt; &amp;s){
<a name="0"></a><font color="#FF0000"><a href="match198-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

	int brojac(0);
	char ** pok(nullptr);
	
	try{
		pok=new char* [s.size()];
		for(int i=0; i&lt;s.size(); i++) pok[i]=nullptr;
		
		for(int i=0; i&lt;s.size(); i++){
			pok[i]= new char [s[i].length()+1];
</font>		}
		for(int i=0; i&lt;s.size(); i++){
			std::strcpy(pok[i], s[i].c_str());
			pok[i][s[i].length()] = '\0';
			brojac++;
		}
		p=pok;
<a name="4"></a><font color="#FF00FF"><a href="match198-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

		pok=nullptr;
	}
	catch(std::bad_alloc){
		for (int i=0; i&lt;s.size(); i++) delete [] pok[i];
		delete [] pok;
</font>		//brojac=0;
		pok=nullptr;
		p=nullptr;
		throw;
	}
	return brojac;
	
}

int OdbaciOptuzbu (char** &amp;p, int vel, std::string ime){
	int br(0), indeks(0);
	bool postoji(false);
	
	for (int i=0; i&lt;vel; i++){
		if (p[i]==nullptr) br++;
		else if ( ime==std::string(p[i]) ) { postoji=true; indeks=i; break; }
	}
	if (!postoji){
		std::string iz;
		iz="Osoba sa imenom "+ime+" nije bila optuzena";
		throw std::domain_error(iz);
	}
	delete [] p[indeks];
	p[indeks]=nullptr , br++;
	if(br&gt;10){
		char** novi(nullptr);
		novi=new char* [vel-br];
		int ind(0);
		for(int i=0; i&lt;vel; i++){
			if ( p[i] ){
				novi[ind]=p[i];
				p[i]=nullptr;
				ind++;
			}
		}
		delete [] p;
		p=nullptr;
		p=novi;
		vel-=br;
	}
	
	return vel;
	
}

int DodajOptuzbu (char** &amp;p, int vel, std::string ime){
	int nova_vel=vel;
<a name="2"></a><font color="#0000FF"><a href="match198-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

	char* niz_ime(nullptr);

	try{
		niz_ime=new char [ime.length()+1];
		for(int i=0; i&lt;ime.length(); i++) niz_ime[i]=ime[i];
		niz_ime[ime.length()]='\0';
</font>		//std::cout&lt;&lt;"Doslo"&lt;&lt;std::string(niz_ime)&lt;&lt;std::endl;
		//std::strcpy (niz_ime, ime.c_str());
		//niz_ime[ime.length()+1]='\0';
	}
	catch (std::bad_alloc){
		delete [] niz_ime;
		niz_ime=nullptr;
		throw;
	}
	
	bool ima_slobodno(false);
	//int indeks(0);
	for(int i=0; i&lt;vel; i++) {
		if(!p[i]) {
			//indeks=i;
			ima_slobodno=true;
			p[i]=niz_ime;
			niz_ime=nullptr;
			break;
		}
	}
	/*
	if(ima_slobodno){
		p[indeks]=niz_ime;
		niz_ime=nullptr;
	}*/
	if(!ima_slobodno){
		nova_vel=vel+1;
		char** niz(nullptr);
		try{
			niz=new char* [nova_vel];
			//for(int i=0; i&lt;nova_vel; i++) niz[i]=nullptr;
			for(int i=0; i&lt;vel; i++) niz[i]=p[i];
			niz[vel]=niz_ime; //OVDJE JE BILO niz[nova_vel]
			niz_ime=nullptr;
			for(int i=0; i&lt;vel; i++) p[i]=nullptr;
			delete [] p;
			//p=nullptr;
			p=niz;
		
			//for(int i=0; i&lt;nova_vel; i++) niz[i]=nullptr;
			//delete [] niz; 
			niz=nullptr;
			
		}
		catch(std::bad_alloc){
			delete [] niz; //d
<a name="5"></a><font color="#FF0000"><a href="match198-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

			throw;
			//std::cout&lt;&lt;"doslo,..:/"&lt;&lt;std::endl;
		}
	}
	
	return nova_vel;
}

void IzlistajOptuzbu (char** p, int vel){
	for(int i=0; i&lt;vel; i++){
		if(p[i]) std::cout&lt;&lt;std::string(p[i])&lt;&lt;std::endl;
</font><a name="1"></a><font color="#00FF00"><a href="match198-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

	}
}


int main ()
{

	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int krivaca;
	std::cin&gt;&gt;krivaca;
	std::cin.ignore(100,'\n');
	std::vector&lt;std::string&gt; v;
	v.resize(krivaca);
</font>	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	for (int i=0; i&lt;krivaca; i++){
		std::getline(std::cin, v[i]);
		//std::cin.ignore(100,'\n');
	}
	//std::cin.ignore(100,'\n');
	char** lista(nullptr);
	int rez(0);
	try{
		rez=PotencijalniKrivci(lista, v);
		
		for(;;){
			int unos;
			std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
			std::cin&gt;&gt;unos;
			std::cin.ignore(100000, '\n');
			if (unos==1){
				std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
				
				std::string ime;
				std::getline(std::cin, ime);
				rez=DodajOptuzbu(lista, rez, ime);
			}
			else if(unos==2){
				std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
				std::string ime;
				std::getline(std::cin, ime);
				try{
<a name="3"></a><font color="#00FFFF"><a href="match198-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

					rez=OdbaciOptuzbu(lista, rez, ime);
				}
				catch(std::domain_error iz){
					std::cout&lt;&lt;iz.what()&lt;&lt;std::endl;
				}
			}
			else if(unos==3){
				IzlistajOptuzbu(lista, rez);
</font>			}
			else if(unos==0) {
				for(int i=0; i&lt;rez; i++) delete [] lista[i];
				delete [] lista;
				lista=nullptr;
				break;
			}
		}
	}
	catch(std::bad_alloc){
		for(int i=0; i&lt;rez; i++) delete [] lista[i];
		delete [] lista;
		lista=nullptr;
		rez=0;
		
	}
	
	
	
	
	/*
	
	std::vector&lt;std::string&gt; pokusaj {"kisa", "suncejeifwjf ", "   skks$%s"};
	char** d;
	int b(0);
	try {
		b=PotencijalniKrivci(d, pokusaj);
		//std::cout&lt;&lt;"Broj stringova je: "&lt;&lt;b&lt;&lt;std::endl;
		
		std::cout&lt;&lt;"Stringovi su: "&lt;&lt;std::endl;
		for(int i=0; i&lt;b; i++) std::cout&lt;&lt;std::string(d[i])&lt;&lt;std::endl;
		
		b=DodajOptuzbu(d,b, "Perem");
		b=DodajOptuzbu(d,b, " dmd 3554");
		
		IzlistajOptuzbu(d,b);
		
		for(int i=0; i&lt;b; i++) delete [] d[i];
		delete [] d;
	}
	catch (std::bad_alloc) {
		std::cout&lt;&lt;"Losee"&lt;&lt;std::endl;
		for(int i=0; i&lt;b; i++) delete [] d[i];
		delete [] d;
	}
	*/
	return 0;
}</pre>
</body>
</html>
