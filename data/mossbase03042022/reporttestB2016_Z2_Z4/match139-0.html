<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3736.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3736.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;
#include &lt;new&gt;

<a name="0"></a><font color="#FF0000"><a href="match139-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using namespace std;

//Vrati broj alociranih nizova znakova
int PotencijalniKrivci(char** &amp;alocirano, vector&lt;string&gt; spisakImena)
{
	int brojPrepisivaca{int(spisakImena.size())};
	if(brojPrepisivaca==0)
	{
		alocirano = nullptr;
		return 0;
	}
	try {
		alocirano = new char*[brojPrepisivaca];
		for(int i=0;i&lt;brojPrepisivaca;i++)
		{
			alocirano[i] = nullptr;
			alocirano[i] = new char[spisakImena[i].size()+1];
			strcpy( alocirano[i] , spisakImena[i].c_str() );
		}
	}
	catch(bad_alloc)
	{
		for(int i=0; i&lt;brojPrepisivaca;i++)  delete[] alocirano[i];
		delete[] alocirano;
		throw;
	}
	
	return brojPrepisivaca;
}


//Vrati novu velicinu niza pokazivaca, koja moze biti jednaka staroj
int OdbaciOptuzbu(char** &amp;alocirano, int vel, string posteni)
{
	int novaVelicina{vel};
	int brojIzbrisanih{0};
	
	for(int i=0; i&lt;vel;i++)
	{
		if(alocirano[i]==nullptr)
		{
			brojIzbrisanih++;
		}
	}
	for(int i=0;i&lt;vel;i++)
	{
		if(alocirano[i] &amp;&amp; alocirano[i]==posteni)
		{
			delete[] alocirano[i];
			alocirano[i] = nullptr;
			brojIzbrisanih++;
			novaVelicina=vel;
			break;
		}
	}
	
	if(brojIzbrisanih&gt;10)
	{
		try {
			char **noviNizPokazivaca = new char*[vel - brojIzbrisanih];
			for(int i=0;i&lt;vel-brojIzbrisanih;)
			{
				for(int j=0;j&lt;vel;j++)
				{
					if(alocirano[j] != nullptr){
						noviNizPokazivaca[i] = alocirano[i];
						i++;
						alocirano[j]=nullptr;
					}
				}
			}
			delete[] alocirano;
			alocirano = noviNizPokazivaca;
			novaVelicina = vel - brojIzbrisanih;
		}
		catch(bad_alloc) {}
	}
	
	return novaVelicina;
}

//Vrati novu velicinu niza pokazivaca, koja moze biti jednaka staroj
int DodajOptuzbu(char** &amp;alocirano, int vel, string krivac)
{
	int novaVel{vel};
	char* noviZnakovi = new char[krivac.size()+1] ;
	strcpy(noviZnakovi,krivac.c_str());
	
	bool nadjenNulPokazivac{false};
	
	for(int i=0;i&lt;vel;i++)
	{
		if(alocirano[i]==nullptr)
		{
			alocirano[i] = noviZnakovi;
			nadjenNulPokazivac = true;
			break;
		}
	}
	
	//ako je bio nadjen nul-pokazivac nismo mijenjali velicinu
	if(nadjenNulPokazivac)  return vel;
	
	//u suprotnom alociramo novi niz pokazivaca i tu smjestimo stare i novog krivca
	try
	{
		char** noviNizPokazivaca{ new char*[vel+1] };
		int i{0};
		for(;i&lt;vel;i++)
		{
			noviNizPokazivaca[i] = nullptr;
			noviNizPokazivaca[i] = new char[strlen(alocirano[i])+1];
			strcpy(noviNizPokazivaca[i] , alocirano[i]);
		}
		noviNizPokazivaca[i] = noviZnakovi;
		//delete[] alocirano;
		for(int r=0;r&lt;vel;r++)
		{
			delete[] alocirano[r];
		}
		alocirano = noviNizPokazivaca;
		/*for(int r=0;r&lt;vel+1;r++)
		{
			alocirano[r]=nullptr;
			alocirano[r] = new char[strlen(noviNizPokazivaca[r])+1];
			strcpy(alocirano[r],noviNizPokazivaca[r]);
		}*/
		for(int f=0;f&lt;vel+1;f++)
		{
			delete[] noviNizPokazivaca[f];
		}
		delete[] noviNizPokazivaca;
		novaVel = vel+1;
	}
	catch(bad_alloc) {}
	
	return novaVel;
}

void IzlistajOptuzbu(char** alocirano, int vel)
{
	for(int i=0;i&lt;vel;i++)
	{
		if(alocirano[i])  cout&lt;&lt; alocirano[i] &lt;&lt; endl;
	}
}



int main ()
{
	char **pok{nullptr};
	int broj;
	
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti?"&lt;&lt;endl;
	cin&gt;&gt;broj;
	
	pok = new char*[broj];
	
	vector&lt;string&gt; krivci;
	krivci.resize(broj);
	
	cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;endl;
	for(int i=0;i&lt;broj;i++)
	{
		cin&gt;&gt;krivci[i];
	}
	
	try {
	
	PotencijalniKrivci(pok,krivci);
	
	int opcija{0};
	do{
		
		cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog "
			&lt;&lt;"3 za izlistavanje optuzenih, 0 za kraj:"&lt;&lt;endl;
		cin&gt;&gt;opcija;
		cin.clear();
		cin.ignore(10000,'\n');
		string noviOptuzeni, odjednomPosten;
		if(opcija==1)
		{
			cout&lt;&lt;"Unesite ime novog optuzenog:"&lt;&lt;endl;
			cin&gt;&gt;noviOptuzeni;
			cin.clear();
			cin.ignore(10000,'\n');
			broj = DodajOptuzbu(pok, broj, noviOptuzeni);
			IzlistajOptuzbu(pok,broj);
		}
		else if(opcija==2)
		{
			cout&lt;&lt;"Unesite ime koje zelite izbaciti:"&lt;&lt;endl;
			cin&gt;&gt;odjednomPosten;
			cin.clear();
			cin.ignore(10000,'\n');
			broj = OdbaciOptuzbu(pok, broj, odjednomPosten);
			IzlistajOptuzbu(pok,broj);
		}
		else if(opcija==3)
		{
			IzlistajOptuzbu(pok,broj);
		}
	}while(opcija!=0);
	
	//for(int i=0;i&lt;broj;i++)   delete[] pok[i];
	//delete[] pok;
	
	}
	catch(bad_alloc e)
	{
		cout&lt;&lt;e.what()&lt;&lt;endl;
</font>	}
	
	return 0;
}</pre>
</body>
</html>
