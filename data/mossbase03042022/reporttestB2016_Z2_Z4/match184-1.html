<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4659.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9931.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;string.h&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci(char **&amp;znakovi , std::vector&lt;std::string&gt; v){
	int brojac(0);
	try{
		znakovi=new char*[v.size()];
		for(int i=0;i&lt;v.size();i++){ 
			znakovi[i]=new char[v[i].size()+1];
			brojac++;
		}
	//	for(int i=0;i&lt;v.size();i++) znakovi[i]=nullptr;
<a name="3"></a><font color="#00FFFF"><a href="match184-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		for(int i=0;i&lt;v.size();i++){
			for(int j=0;j&lt;v[i].size();j++){
				znakovi[i][j]=v[i][j];
</font>				znakovi[i][j+1]='\0';
			}
		}
		
		return v.size();
	}
	catch(...){
		for(int i=0;i&lt;brojac;i++) delete[] znakovi[i];
<a name="2"></a><font color="#0000FF"><a href="match184-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

		delete [] znakovi;
		throw;
	}
}

int OdbaciOptuzbu(char **&amp;imena, int vel, std::string s){
	
	int brojac(0);
	for(int i=0;i&lt;vel;i++){
		if(imena[i]==nullptr) brojac++;
</font>	}
	int k(0);
	if(brojac&gt;=10){
		char **pok_new(new char*[vel-brojac]);
		for(int i=0;i&lt;vel;i++){
			if(imena[i]!=nullptr){
				pok_new[k]=imena[i];
				k++;
			}
		}
		for(int i=0;i&lt;vel;i++)delete [] imena[i];
		delete [] imena;
		return vel-brojac;
	}
	for(int i=0;i&lt;vel;i++){
		if(imena[i]==s){
			delete [] imena[i];
			imena[i]=nullptr;
			return vel;
		}
	}
	throw std::domain_error(std::string("Osoba sa imenom ")+s+std::string(" nije bila optuzena"));
}

int DodajOptuzbu(char **&amp;imena,int vel, std::string s){
	int z(0);
	char** pok_new;
	char* optuzeni;
	try{
		optuzeni=new char[s.size()+1];
		for(int i=0;i&lt;s.size();i++) optuzeni[i]=s[i];
<a name="4"></a><font color="#FF00FF"><a href="match184-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

		optuzeni[s.size()]='\0';
		for(int i=0;i&lt;vel;i++){
			if(imena[i]==nullptr){
				imena[i]=optuzeni;
</font>				return vel;
		/*		delete [] imena[i];
				imena[i]=new char[s.size()+1];
				int j;
				for(j=0;j&lt;s.size();j++) imena[i][j]=s[j];
				imena[i][j]='\0';  
				return;*/
			}
		}
		
	
		pok_new=new char *[vel+1];
		for(int i=0;i&lt;vel;i++){
			if(imena[i]==nullptr) continue;
			int brojac(strlen(imena[i]));
			pok_new[z]=new char[brojac+1];
			z++;
		}
	//	pok_new[vel]=new char[s.size()+1];
		for(int i=0;i&lt;vel;i++){
			int j;
			for(j=0;;j++){
				if(imena[i][j]=='\0') break;
				pok_new[i][j]=imena[i][j];
			}
			pok_new[i][j]='\0';
		}
		
	//	for(int i=0;i&lt;s.size();i++) pok_new[vel][i]=s[i];
		pok_new[vel]=optuzeni;
	//	pok_new[vel][s.size()+1]='\0';
		char** p(imena);
		imena=pok_new;
		vel++;
		
		for(int i=0;i&lt;vel-1;i++) delete[] p[i];
		delete [] p;
		return vel;
	}catch(...){
		for(int i=0;i&lt;z;i++) delete[] pok_new[i];
		delete [] pok_new;
		throw ;
	}
	
	
}

void IzlistajOptuzbu(char **mat,int n){
<a name="5"></a><font color="#FF0000"><a href="match184-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	for(int i=0;i&lt;n;i++){
		if(mat[i]==nullptr) continue;
		for(int j=0;j&lt;strlen(mat[i]);j++){
</font>			
			//if(mat[i][j]=='\0') break;
			std::cout &lt;&lt; mat[i][j];
		}
		std::cout &lt;&lt; std::endl;
	}
}

int main (){
	
	try{
<a name="6"></a><font color="#00FF00"><a href="match184-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

		std::vector&lt;std::string&gt; v;
		int n;
		std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti?" &lt;&lt; std::endl;
		std::cin &gt;&gt; n;
		v.resize(n);
		std::cin.ignore(10000,'\n');
</font>		std::cout &lt;&lt; "Unesite potencijalne krivce:" &lt;&lt; std::endl;
		for(int i=0;i&lt;n;i++){
			std::getline(std::cin,v[i]);
		}
		char**mat;
<a name="1"></a><font color="#00FF00"><a href="match184-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

		n=PotencijalniKrivci(mat,v);
		int unos;
		do{
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
			std::cin &gt;&gt; unos;
			if(unos==1){
				std::cin.ignore(10000, '\n');
				std::string s;
</font>				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
<a name="7"></a><font color="#0000FF"><a href="match184-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

				std::getline(std::cin,s);	//bez getline
				n=DodajOptuzbu(mat,n,s);
				
			}
			if(unos==2){
				std::cin.ignore(10000, '\n');
</font>				std::string s;
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
<a name="0"></a><font color="#FF0000"><a href="match184-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

				std::getline(std::cin,s);	//bez getline
				n=OdbaciOptuzbu(mat,n,s);
				
			}
			if(unos==3){
				IzlistajOptuzbu(mat,n);
			}
		}while(unos!=0);
		for(int i=0;i&lt;n;i++) delete [] mat[i];
		delete [] mat;
</font>	}
	catch(std::domain_error e){
		std::cout &lt;&lt; e.what();
	}
	catch(...){
		std::cout &lt;&lt; "Neuspjela alokacija" &lt;&lt; std::endl;
	}
	
	
	return 0;
}</pre>
</body>
</html>
