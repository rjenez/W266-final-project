<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2472.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5863.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;


int PotencijalniKrivci(char **&amp;znakovi, std::vector&lt;std::string&gt; imena) {
	int brojAlociranih=0; 
	
	try{
		
<a name="0"></a><font color="#FF0000"><a href="match984-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

		znakovi = new char *[int(imena.size())];
	}catch(...) {
		delete[] znakovi;
		throw std::bad_alloc();
	}
	
		for(int i=0; i&lt;imena.size(); i++)
			znakovi[i] = nullptr;
			
			try {
		    for(int i=0; i&lt;imena.size(); i++) {
			znakovi[i] = new char[imena[i].length()+1];
				std::strcpy(znakovi[i], imena[i].c_str());
</font>			brojAlociranih++;
		}
<a name="1"></a><font color="#00FF00"><a href="match984-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		    }catch(...) {
		    	for(int i=0; i&lt;imena.size(); i++)
		           delete[] znakovi[i];
		           delete[] znakovi;
		           throw std::bad_alloc();
		    }
	
	return brojAlociranih;
</font>}


int OdbaciOptuzbu(char **&amp;znakovi, int velicinaNizaPok, std::string finaOsoba) {
	int k=0,brojac=0,velN=0,brojacNULL=0;
	char *pok = nullptr,*p=nullptr;
	char **gdje = nullptr;
	gdje = znakovi;
	bool jelObrisan = false;

	//provjera osobe
	for(int i=0; i&lt;velicinaNizaPok; i++) {
		brojac=0;
		k=0;
		if(znakovi[i] == nullptr) brojacNULL++;
		else{
			p= znakovi[i];
		while (*p != '\0' &amp;&amp; k &lt; finaOsoba.length()) {
			if(*p == finaOsoba[k]) brojac++;
			k++;
			p++;
		}
		}
		if(brojac != finaOsoba.length()) velN++;
	}
	if(velN == velicinaNizaPok) throw std::domain_error("Osoba sa imenom " + finaOsoba + " nije bila optuzena");
	znakovi = gdje;
	velN=0;
	for(int i=0; i&lt;velicinaNizaPok; i++) {
		brojac=0;
		k=0;
		pok = znakovi[i];
		velN++;
		
		if(*pok == finaOsoba[0] &amp;&amp; !jelObrisan) {
		while (*pok != '\0' &amp;&amp; k &lt; finaOsoba.length()) {
			if(*pok == finaOsoba[k]) brojac++;
			pok++;
			k++;
		}
		if(brojac == finaOsoba.length()) {
			delete[] znakovi[i]; 
			znakovi[i] = nullptr;
			brojacNULL++;
			jelObrisan = true;
	
		
			}
		
		}
	}
		k=0;
		if(brojacNULL &gt;= 10) { //ovo
			velN=0;
			char **pokazivaci= nullptr,**poc=nullptr;
			try{
			pokazivaci = new char*[velicinaNizaPok-brojacNULL];
		
			poc= pokazivaci;
			for(int i=0; i&lt;velicinaNizaPok-brojacNULL; i++)
			pokazivaci[i] = nullptr;
			for(int i=0; i&lt;velicinaNizaPok; i++) {
				if(znakovi[i] != nullptr){ pokazivaci[k] = znakovi[i]; k++; velN++;}
			}
			
			}catch(... ) {
				delete[] pokazivaci;
			}
			
			delete[] znakovi;
			znakovi = poc;
		}
	
	return velN; 
}


int DodajOptuzbu(char **&amp;znakovi, int velicinaNizaPok, std::string prepisivac) {
	bool jest = false;
	char **pok = nullptr;
	char *p = nullptr,*k=nullptr;
	

	try{
	p = new char[prepisivac.length()+1];
	k=p;
	}catch(...) {
		delete[] p;
		throw std::bad_alloc();
	}
<a name="2"></a><font color="#0000FF"><a href="match984-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		std::strcpy(p,prepisivac.c_str());
		
	for(int i=0; i&lt; velicinaNizaPok; i++)
	  if(znakovi[i] == nullptr){ znakovi[i] = p;  jest = true; break;}
</font>	  
	if(!jest) {
		
		try {
		pok = new char *[velicinaNizaPok+1];
		}catch(...) {
			delete[] pok;
			throw std::bad_alloc();
		}
	
	try{
		for(int i=0; i&lt; velicinaNizaPok; i++)
		pok[i] = znakovi[i];
		pok[velicinaNizaPok] = k;
	}catch(...){
		delete[] pok;
		throw std::bad_alloc();
	}
		velicinaNizaPok+=1;
		delete[] znakovi;
		znakovi = pok;
	}
	
	
	return velicinaNizaPok;
}


void IzlistajOptuzbu(char **znakovi, int vel) {
	char *p = nullptr;
	
		for(int i=0; i&lt;vel; i++) {
  		p = znakovi[i];
  		if(p != nullptr) {
			while(*p != '\0') {
				std::cout&lt;&lt;*p;
				p++;
			}
			std::cout&lt;&lt;std::endl;
		
				
  		}
		}
}



int main ()
{
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int brEl,unos;
	std::cin&gt;&gt;brEl;
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	std::vector&lt;std::string&gt; imena;
	std::string ime,drugo;
	std::cin.ignore(10000,'\n');
	while (brEl) {
		std::getline(std::cin,ime);
		imena.push_back(ime);
		brEl--;
	}
	char **znakovi= nullptr;
	int vel=0;
    try{
	vel =PotencijalniKrivci(znakovi,imena);
	
	do{
	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
	std::cin&gt;&gt;unos;
	if(unos == 0)break;
	switch(unos){
		case 1: 
			std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
			std::cin&gt;&gt;drugo;
		vel= DodajOptuzbu(znakovi,vel,drugo);
		break;
	
		
		case 2:
	
		std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: "&lt;&lt; std::endl;
		std::cin&gt;&gt;drugo;
		vel = OdbaciOptuzbu(znakovi,vel,drugo);
		break;
		
		case 3: IzlistajOptuzbu(znakovi,vel); break;
	}
	}while(unos != 0);
	
	for(int i=0; i&lt; vel; i++)
		 delete[] znakovi[i];
		delete[] znakovi;
	

}
catch(std::bad_alloc b) {
	std::cout&lt;&lt; b.what() &lt;&lt;std::endl;
}catch(std::domain_error e) {
	std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
}
	return 0;
}</pre>
</body>
</html>
