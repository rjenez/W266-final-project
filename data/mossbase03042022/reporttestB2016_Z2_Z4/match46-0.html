<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5800.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5800.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match46-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int brojosl=0;
void Dealociraj(char **mat, int n){
 for(int i = 0; i &lt; n; i++) delete[] mat[i];
 delete[] mat;
}
int PotencijalniKrivci(char **&amp;p,std::vector&lt;std::string&gt; v){
	//std::cout&lt;&lt;v.size()&lt;&lt;v[0].size();
	//try{
	p=nullptr;
	p=new char*[v.size()];
	for(int i=0;i&lt;v.size();i++)
	p[i]=nullptr;
	//brojac_new=0;
	for(int i=0;i&lt;v.size();i++){
		p[i]=new char[v[i].size()+1];
		//std::cout&lt;&lt;brojac_new;
		//char pom[1000];
		char daj[1000];
		int a=0;
		for(int j=0;j&lt;v[i].size();j++){
			daj[j]=v[i][j];
			a++;
		}
		daj[a]='\0';
		//std::cout&lt;&lt;sizeof(daj);
		//std::strcpy(pom,daj);
		//std::cout&lt;&lt;pom;
		for(int j=0;j&lt;=v[i].size();j++){
			p[i][j]=daj[j];
			//std::cout&lt;&lt;sizeof(p[i]);
		}
		//p[i]=pom;
	}
	/*}
	catch(std::bad_alloc){
		Dealociraj(p,v.size());
	}*/
	return v.size();
}
int OdbaciOptuzbu(char **&amp;p,int &amp;velicina,std::string s){
	//std::cout&lt;&lt;velicina;
	bool t=false;
	char daj[1000];
		int a=0;
		for(int j=0;j&lt;s.length();j++){
			daj[j]=s[j];
			a++;
		}
		daj[a]='\0';
		//std::cout&lt;&lt;daj;
	for(int i=0;i&lt;velicina;i++){
		int j=0;
		if(p[i]!=nullptr){
			//std::cout&lt;&lt;p[i][j]&lt;&lt;daj[j]&lt;&lt;std::endl;
		while(p[i][j]==daj[j] &amp;&amp; daj[j]!='\0')j++;
		//std::cout&lt;&lt;j&lt;&lt;s.length();
		if(j==s.length() ){
			t=true;
			//std::cout&lt;&lt;"brisanje"&lt;&lt;i&lt;&lt;std::endl;
			delete []p[i];
			p[i]=nullptr;
			brojosl++;
			if(brojosl&gt;10){
				try {
				char **nP=new char*[velicina - 11];
				int z=0;
				for(int k=0;k&lt;velicina;k++){
					if(p[k]!=nullptr){nP[z]=p[k];z++;}
				}
				delete []p;
				p=nP;
				brojosl=0;
				velicina-=11;
			}
			catch (std::bad_alloc s) {
					return velicina;
				}
			}
		}
	}
}
if(t==false){
	std::string izuzetak;
	izuzetak="Osoba sa imenom ";
	izuzetak+=s;
	izuzetak+=" nije bila optuzena";
	throw std::domain_error(izuzetak);
}
	return velicina;
}
int DodajOptuzbu(char **&amp;p,int &amp;velicina,std::string s){
	char*sl=nullptr;
	sl=new char [s.size()+1];
	char daj[1000];
		int a=0;
		for(int j=0;j&lt;s.length();j++){
			daj[j]=s[j];
			a++;
		}
		daj[a]='\0';
		for(int j=0;j&lt;=s.size();j++){
			sl[j]=daj[j];
				}
		int z=0;
		for(int i=0;i&lt;velicina;i++){
			z++;
			if(p[i]==nullptr){
				p[i]=sl;
			break;
			}
		}
		if(z==velicina){
			try{
				char **nP=new char*[velicina +1];
				for(int k=0;k&lt;=velicina;k++){
					if(k!=velicina)
					nP[k]=p[k];
					else{
						nP[k]=sl;
		}
				}
				delete []p;
				p=nP;
				velicina+=1;
			}
			catch (std::bad_alloc s) {
				throw std::bad_alloc();
					return velicina;
				}
		}
		return velicina;
}
void IzlistajOptuzbu(char **p,int velicina){
	//std::cout&lt;&lt;"ss"&lt;&lt;velicina;
	for(int i=0;i&lt;velicina;i++){
		if(p[i]==nullptr)i++;
		//std::cout&lt;&lt;" "&lt;&lt;sizeof(p[i]);
		int j=0;
		while(p[i][j]!='\0') {std::cout&lt;&lt;p[i][j];j++;}
		//for(int j=0;j&lt;sizeof(p[i]);j++){if(p[i][j]=='\0')break;std::cout&lt;&lt;p[i][j];}
		std::cout&lt;&lt;std::endl;
		//if(i==velicina-1)break;
	}
	//std::cout&lt;&lt;"a";
}
int main ()
{
	char **nizPotencijalnih;
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int n;
	std::cin&gt;&gt;n;
	std::cin.clear();
	std::cin.ignore(10000,'\n');
	std::vector&lt;std::string&gt; imena (n);
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	for(int i=0;i&lt;n;i++){
		std::getline(std::cin,imena[i]);
	}
	int velicina=PotencijalniKrivci( nizPotencijalnih, imena);;
	int unos;
	while(true){
		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
		std::cin&gt;&gt;unos;
		if(unos==0){Dealociraj(nizPotencijalnih,velicina);break;}
		else if(unos==1){
			std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
			std::string novi;
			std::cin.clear();
	std::cin.ignore(10000,'\n');
			std::getline(std::cin,novi);
			velicina=DodajOptuzbu(nizPotencijalnih,velicina,novi);
		}
		else if(unos==2){
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
			std::string novi;
			std::cin.clear();
	std::cin.ignore(10000,'\n');
			std::getline(std::cin,novi);
			try{
			velicina=OdbaciOptuzbu(nizPotencijalnih,velicina,novi);
			}
			catch(std::domain_error e){
				std::cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;std::endl;
			}
		}
		else if(unos==3){
			IzlistajOptuzbu(nizPotencijalnih,velicina);
		}
	}
	return 0;
</font>}</pre>
</body>
</html>
