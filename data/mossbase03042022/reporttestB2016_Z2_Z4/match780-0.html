<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5413.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5413.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;

int PotencijalniKrivci(char** &amp;p, std::vector&lt;std::string&gt; imena)
{
	p = nullptr;
	try
	{
		p = new char*[imena.size()];
		for(int i(0); i &lt; imena.size(); i++) p[i] = nullptr;
		try
		{
<a name="3"></a><font color="#00FFFF"><a href="match780-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

			for(int i(0); i &lt; imena.size(); i++)
			{
				p[i] = new char[imena[i].length() + 1];
</font>				strcpy(p[i], imena[i].c_str());
			}
			return imena.size();
		}
		catch(...)
		{
			delete[] p;
			throw;
		}
	}
	catch(...)
	{
		throw std::bad_alloc();
	}
}

int OdbaciOptuzbu(char** &amp;p, int vel, std::string ime)
{
	int x(0), nul(0), vr(0);
	bool nadjen(false);
	for(int i(0); i &lt; vel; i++)
	{
		int Isti;
		if(p[i] != nullptr)
		{
			Isti = strcmp(p[i], ime.c_str());
			vr++;
			x++;
		}
		else 
		{
			Isti = 2;
			nul++;
			x++;
		}
		if(Isti == 0)
		{
			delete[] p[i];
			p[i] = nullptr;
			vr--;
			nul++;
			nadjen = true;
		}
	}
	if(x == vel &amp;&amp; nadjen == false) throw std::domain_error("Osoba sa imenom " + ime + " nije bila optuzena");
	if(nul &gt;= 10)
	{
<a name="2"></a><font color="#0000FF"><a href="match780-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		char **q = new char*[vr];
		int j(0);
		for(int i(0); i &lt; vel; i++)
		{
			if(p[i] != nullptr)
			{
				q[i] = p[j];
</font>				j++;
			}
			delete[] p[i];
		}
		p = q;
		return vr;
	}
	return vel;
}

int DodajOptuzbu(char** &amp;p, int vel, std::string ime)
{
	for(int i(0); i &lt; vel; i++)
	{
		if(p[i] == nullptr)
		{
			try
			{
				p[i] = new char[ime.length() + 1];	
				strcpy(p[i], ime.c_str());
				return vel;
			}
			catch(...)
			{
				throw std::domain_error("");
			}
		}
	}
	
	char** x(nullptr);
	try
	{
		x = new char*[vel + 1];
		for(int i(0); i &lt; vel; i++) x[i] = p[i];
		try
		{
			x[vel] = new char[ime.length() + 1];	
			strcpy(x[vel], ime.c_str());
			
			for(int i(0); i &lt; vel; i++) p[i] = nullptr;
			p = x;
			return vel + 1;
		}
		catch(std::bad_alloc)
		{
			delete[] x;
			throw;
		}
	}
	catch(std::bad_alloc)
	{
		throw std::bad_alloc();
	}
}

<a name="1"></a><font color="#00FF00"><a href="match780-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

void IzlistajOptuzbu(char **p, int vel)
{
	for(int i(0); i &lt; vel; i++)
	{
		if(p[i] != nullptr)
		  std::cout &lt;&lt; p[i] &lt;&lt; std::endl;
</font>	}
}

int main ()
{
	int n;
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti?" &lt;&lt; std::endl;
	std::cin &gt;&gt; n;
	
	std::vector&lt;std::string&gt; imena(n);
	std::cout &lt;&lt; "Unesite potencijalne krivce: ";
	for(auto &amp;ime : imena) std::cin &gt;&gt; ime;
	std::cout &lt;&lt; std::endl;
	
	char **nizp(nullptr);
	int vel;
	try
	{
		vel = PotencijalniKrivci(nizp, imena);
	}
	catch(...)
	{
		return 0;
	}
	
	while(n != 0)
	{
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
		std::cin &gt;&gt; n;
		std::cin.ignore(10000, '\n');
		if(n == 1)
		{
			std::string ime;
			std::cout &lt;&lt; std::endl &lt;&lt; "Unesite ime novog optuzenog: ";
			std::getline(std::cin, ime);
			try
			{
				vel = DodajOptuzbu(nizp, vel, ime);
			}
			catch(...)
			{
				
			}
			std::cout &lt;&lt; std::endl;
		}
		else if(n == 2)
		{
			std::string ime;
			std::cout &lt;&lt; std::endl &lt;&lt; "Unesite ime koje zelite izbaciti: ";
			std::getline(std::cin, ime);
			try
			{
<a name="0"></a><font color="#FF0000"><a href="match780-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

				vel = OdbaciOptuzbu(nizp, vel, ime);
			}
			catch(std::domain_error e)
			{
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
			}
			
		}
		else if(n == 3)
		{
			IzlistajOptuzbu(nizp, vel);
		}
	}
	for(int i(0); i &lt; vel; i++) delete[] nizp[i];
	delete[] nizp;
	return 0;
</font>}</pre>
</body>
</html>
