<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5397.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6547.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci(char **&amp;p, std::vector&lt;std::string&gt; imena) {
	char **matrica(new char*[imena.size()]);
	p=nullptr;
	for(int i=0; i&lt;imena.size(); i++) matrica[i]=nullptr;
	try{
		for(int i=0; i&lt;imena.size(); i++) matrica[i]=new char[imena[i].size()+1];
	}
	catch(...) {
		if(!matrica) return 0;
		for(int i=0; i&lt;imena.size();i++) delete [] matrica[i];
		delete [] matrica;
		throw;
	}
	try {
	p=matrica;
	for(int i=0; i&lt;imena.size(); i++) {
		for(int j=0; j&lt;=imena[i].size(); j++) {
			if(j==imena[i].size()) p[i][j]='\0';
			else p[i][j]=imena[i][j];
		}
	}
	}
	catch(std::bad_alloc) {
		std::cout&lt;&lt;"Neuspjela alokacija"&lt;&lt;std::endl;
	}
	
	return imena.size();
}

int OdbaciOptuzbu(char **&amp;p, int vel, std::string s) {
	int brojac(0);
	int brojac2(vel);
	int provjer(0);
	for(int i=0; i&lt;vel;i++) {
		if(p[i]==s) provjer=1;
	}
	if(provjer==0) throw std::domain_error ("Osoba sa imenom " + s + " nije bila optuzena");
	for(int i=0; i&lt;vel; i++) {
		if(p[i]==s) {
			delete [] p[i];
			p[i]=nullptr;
			brojac++;
		}
	}
	if(brojac&gt;10) {
<a name="1"></a><font color="#00FF00"><a href="match289-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		char**novamat(new char*[vel-brojac]);
		for(int i=0; i&lt;(vel-brojac); i++) novamat[i]=nullptr;
	try{
		
		int k(0);
		for(int i=0; i&lt;(vel-brojac); i++) {
</font>			if(p[i]!=nullptr) {
				novamat[k]=p[i];
				k++;
		}
	}
	
	return vel-brojac;
	}
	
	catch(...) {
		if(!novamat) return 0;
		for(int i=0; i&lt;(vel-brojac);i++) delete [] novamat[i];
		delete [] novamat;
		throw;
	}
	
	
	}
	return brojac2;
}

int DodajOptuzbu(char **&amp;p, int vel, std::string s) {
<a name="4"></a><font color="#FF00FF"><a href="match289-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

	char *niz(new char[s.length()+1]);
	for(int i=0; i&lt;s.length();i++) niz[i]=s[i];
	niz[s.length()]='\0';
</font>	int brojac(0);
	for(int i=0; i&lt;vel; i++) {
		if(p[i]==nullptr) {
		p[i]=niz;
		brojac++;}
	}
	if(brojac==0) {
		try{
		
		char**matrica(new char*[vel+1]);
<a name="2"></a><font color="#0000FF"><a href="match289-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		for(int i=0; i&lt;=vel; i++) matrica[i]=nullptr;
		
		try{
		
		for(int i=0; i&lt;vel; i++) matrica[i]=p[i];
		matrica[vel]=niz;
</font>		delete[] p;
		p=matrica;
		
	    return vel+1;
	}
	catch(...) {
		if(!matrica) return 0;
		for(int i=0; i&lt;=vel; i++) delete [] matrica[i];
		delete [] matrica;
		throw;
	}
	
	}
	catch(...) {
		std::cout&lt;&lt;"Nedovoljno memorije.";
	}
	}
	return vel;
}

void IzlistajOptuzbu(char **p, int vel) {
	for(int i=0; i&lt;vel; i++) {
		if(p[i]!=nullptr) std::cout&lt;&lt;p[i]&lt;&lt;std::endl;
}
}


int main ()
{
	try{
	char**p;
	int n;
	std::string s;
	std::vector&lt;std::string&gt; imena;
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	std::cin&gt;&gt;n;
	std::cin.clear();
<a name="3"></a><font color="#00FFFF"><a href="match289-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	std::cin.ignore(10000, '\n');
	std::cout&lt;&lt;"Unesite potencijalne krivce: " &lt;&lt; std::endl;
	for(int i=0; i&lt;n; i++) {
		std::getline(std::cin, s);
</font>		imena.push_back(s);
	}
	int vel=PotencijalniKrivci(p,imena);
	for(;;) {
	int n1;
	int odbacen(0);
	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
	std::cin&gt;&gt;n1;
	std::cin.clear();
<a name="0"></a><font color="#FF0000"><a href="match289-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

	std::cin.ignore(10000, '\n');
	if(n1==0) break;
	else if(n1==1) {
		std::cout&lt;&lt;"Unesite ime novog optuzenog: " &lt;&lt; std::endl;
		std::string s1;
		std::getline(std::cin, s1);
		vel=DodajOptuzbu(p,vel,s1);
</font>	}
	
<a name="5"></a><font color="#FF0000"><a href="match289-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

	else if(n1==2) {
		std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
		std::string s2;
		std::getline(std::cin, s2);
		vel=OdbaciOptuzbu(p,vel,s2);
</font>		odbacen++;
			
	}
	
	else if(n1==3) {
	 if(odbacen==0)IzlistajOptuzbu(p,vel);
	 else IzlistajOptuzbu(p,vel+1);
	}
	}
	for(int i=0; i&lt;vel; i++) {
		delete[] p[i];
	}
	delete[] p;
	}
	catch(std::domain_error f) {
		std::cout&lt;&lt;f.what();
	}

	return 0;
}</pre>
</body>
</html>
