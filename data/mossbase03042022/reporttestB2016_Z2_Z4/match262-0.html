<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9998.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9998.cpp<p></p><pre>
#include&lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;string&gt;
#include&lt;cstring&gt;
#include&lt;stdexcept&gt;

int PotencijalniKrivci(char **&amp; znak, std::vector&lt;std::string&gt;s){
	int br=0;
	try{
		znak=new char *[s.size()];
		while(br&lt;s.size()){
<a name="3"></a><font color="#00FFFF"><a href="match262-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

			znak[br]=new char[s[br].size()+1];
			std::strcpy(znak[br],s[br].c_str());
</font>			br++;
		}
		return br;
	}
	
	catch(...){
		for(int i=0;i&lt;br;i++) delete [] znak[i];
		delete[] znak;
		throw ;
	}
}

int  OdbaciOptuzbu (char **&amp;znak, int niz_pok, std::string s){
	int izbrisano=0;
	for(int i=0;i&lt;niz_pok;i++){
		if(znak[i]!=nullptr &amp;&amp; std::strcmp(znak[i],s.c_str())==0){
			delete[] znak[i];
			znak[i]=nullptr;
			izbrisano++;
		}
	}
	
	if(izbrisano==0) throw std::domain_error ("Osoba sa imenom "+s+" nije bila optuzena\n");
	if(izbrisano&gt;10){
		char **ime;
		int br=0;
		try{
			ime=new char *[niz_pok-izbrisano];
			for(int i=0;i&lt;niz_pok;i++){
				if(znak[i]!=nullptr){
<a name="1"></a><font color="#00FF00"><a href="match262-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

				   ime[br]=new char[std::strlen(znak[i])+1];
				   std::strcpy(ime[br],znak[i]);
				   br++;
				}
			}
			
			for(int i=0;i&lt;niz_pok;i++) delete[] znak[i];
			delete [] znak;
			znak=ime;
</font>			return br;
		}
		catch(...){
<a name="2"></a><font color="#0000FF"><a href="match262-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

			for(int i=0;i&lt;br;i++) delete[] ime[i];
			delete [] ime;
		}
	}
 	return niz_pok;
}


int DodajOptuzbu(char **&amp;znak, int vel,std::string s){
	char *pok=new char[s.size()+1];
</font>	std::strcpy(pok,s.c_str());
	bool ima=false;
	for(int i=0;i&lt;vel;i++){
		if(znak[i]==nullptr){
			znak[i]=pok;
			ima=true;
			break;
		}
	}
	
	if(!ima){
		char **novi;
		try{
			novi=new char *[vel+1];
<a name="0"></a><font color="#FF0000"><a href="match262-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

			for(int i=0;i&lt;vel;i++){
				novi[i]=new char[std::strlen(znak[i])+1];
				std::strcpy(novi[i],znak[i]);
			}
			novi[vel]=pok;
			
			for(int i=0;i&lt;vel;i++) delete[]znak[i];
			delete [] znak;
			
			znak=novi;
</font>			return vel+1;
		}
		catch(...){
			for(int i=0;i&lt;vel+1;i++) delete[]novi[i];
			delete[]novi;
<a name="4"></a><font color="#FF00FF"><a href="match262-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

			throw;
		}
	}
	
	return vel;
}

void IzlistajOptuzbu(char **znak, int vel){
	for(int i=0;i&lt;vel;i++){
		if(znak[i]!=nullptr) std::cout&lt;&lt;znak[i]&lt;&lt;std::endl;
</font>	}
}

int main ()
{
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	int n;
	std::cin&gt;&gt;n;
	char **znak;
	std::cout&lt;&lt;"\nUnesite potencijalne krivce: ";
	std::vector&lt;std::string&gt;v;
	std::cin.ignore(1000,'\n');
	for(int i=0;i&lt;n;i++){
		std::string s;
		std::getline(std::cin,s);
		v.push_back(s);
	}
	std::cout&lt;&lt;std::endl;
	int vel;
	try{
	vel=PotencijalniKrivci(znak,v);
	for(;;){
	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj:\n";
		int a;
		std::cin&gt;&gt;a;
		std::cin.ignore(1000,'\n');
		if(a==1) {
			std::cout&lt;&lt;"Unesite ime novog optuzenog:\n";
			std::string s;
			std::getline(std::cin,s);
			try{
				vel=DodajOptuzbu(znak,vel,s);
			}
			
			catch(...){
				std::cout&lt;&lt;"Nema memorije!";
				throw;
			}
		}
		if(a==2){
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti:\n";
			std::string s;
			std::getline(std::cin,s);
			try{
			vel=OdbaciOptuzbu(znak,vel,s);
			}
			catch(std::domain_error e){
				std::cout&lt;&lt;e.what();
			}
		}
		if(a==3) {std::cout&lt;&lt;std::endl; IzlistajOptuzbu(znak,vel);}
		if(a==0) break;
	  }
	  
	  for(int i=0;i&lt;vel;i++) delete [] znak[i];
	  delete [] znak;
	}
	
	catch(...){
		for(int i=0;i&lt;vel;i++) delete[]znak[i];
		delete[]znak;
	}
	
	return 0;
}</pre>
</body>
</html>
