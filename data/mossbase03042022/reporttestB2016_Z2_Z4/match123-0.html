<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6992.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6992.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match123-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using namespace std;

int PotencijalniKrivci(char **&amp; spremnik, vector&lt;string&gt; v){
	int rez=0;
	char ** mat=nullptr;
	try{
		mat=new char*[v.size()];
	}catch(...){
		delete mat;
		mat=nullptr;
		throw bad_alloc();
	}
	for(int i(0); i&lt;(int)v.size(); i++) mat[i] = nullptr;
	for(int i(0); i&lt;(int)v.size(); i++){
		try{
			mat[i]=new char[v[i].size() + 1];
		}catch(bad_alloc()){
			for(int j(0); j&lt;=i; j++){
				delete[] mat[j];
				mat[j]=nullptr;
			}
			delete[] mat;
			mat=nullptr;
		}
		int j=0;
		for(; j&lt;(int)v[i].size(); j++)
			mat[i][j] = v[i][j];
		mat[i][j]='\0';
		rez++;
	}
	spremnik=mat;
	return rez;
}

int OdbaciOptuzbu(char **&amp; mat, int vel, string s){
	bool postoji=false;
	for(int i(0); i&lt;vel; i++){
		if(mat[i]!=nullptr &amp;&amp; string(mat[i])==s){
			postoji=true;
			delete[] mat[i];
			mat[i]=nullptr;
			break;
		}	
	}
	if(!postoji)
		throw domain_error("Osoba sa imenom " + s + " nije bila optuzena");
	int obrisanih=0;
	for(int i(0); i&lt;vel; i++) if(mat[i]==nullptr) obrisanih++;
	if(obrisanih&gt;=10){
		char ** nova=nullptr;
		try{
			nova=new char*[vel - obrisanih];
		}catch(...){
			delete nova;
			nova=nullptr;
			return vel;
		}
		int j=0;
		for(int i(0); i&lt;vel; i++){
			if(mat[i]!=nullptr){
				nova[j]=mat[i];
				mat[i]=nullptr;
				j++;
			}
		}
		vel-=obrisanih;
		mat=nova;
	}
	return vel;
}

int DodajOptuzbu(char **&amp; mat, int vel, string s){
	bool imaMjesta(false);
	char * ime=nullptr;
	try{
		ime=new char[s.size() + 1];
	}catch(...){
		delete ime;
		throw bad_alloc();
	}
	strcpy(ime, s.c_str());
	for(int i(0); i&lt;vel; i++){
		if(mat[i]==nullptr){
			mat[i]=ime;
			imaMjesta=true;
			break;
		}
	}
	
	if(!imaMjesta){
		char ** nova=nullptr;
		try{
			nova=new char*[vel + 1];
		}catch(...){
			delete nova;
			throw bad_alloc();
		}
		for(int i(0); i&lt;vel; i++){
			nova[i]=mat[i];
			mat[i]=nullptr;
		}
		nova[vel]=ime;
		vel++;
		for(int i(0); i&lt;vel-1; i++) delete[] mat[i];
		delete[] mat;
		mat=nova;
	}
	return vel;
}

void IzlistajOptuzbu(char ** mat, int vel){
	for(int i(0); i&lt;vel; i++)
		if(mat[i]!=nullptr) cout &lt;&lt; mat[i] &lt;&lt; endl;
}

int main ()
{
	int n;
	char ** mat=nullptr;
	try{
		
		cout&lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; endl;
        cin&gt;&gt; n;
        cout&lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; endl;
        vector&lt;string&gt; v;
        for(int i(0); i&lt;n; i++){
            string s;
            cin&gt;&gt; s;
            v.push_back(s);
        }
        n=PotencijalniKrivci(mat, v);
        bool kraj(false);
        while(!kraj){
            cout&lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; endl;
			int izbor;
			string s;
			cin &gt;&gt; izbor;
			switch(izbor){
				case 0:
					kraj=true;
					break;
				case 1:
					cout&lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; endl;
					cin&gt;&gt; s;
					n=DodajOptuzbu(mat, n, s);
					break;
				case 2:
					cout&lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; endl;
					cin&gt;&gt; s;
					n=OdbaciOptuzbu(mat, n, s);
					break;
				case 3:
					IzlistajOptuzbu(mat, n);
					break;
			}
        }
        for(int i(0); i&lt;n; i++)
        	delete[] mat[i];
        delete[] mat;
	}catch(exception &amp;e){
		cout &lt;&lt; e.what() &lt;&lt; endl;
		for(int i(0); i&lt;n; i++)
        	delete[] mat[i];
        delete[] mat;
	}
	return 0;
</font>}</pre>
</body>
</html>
