<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7085.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7085.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;new&gt;
#include &lt;string&gt;


typedef std:: vector&lt;std::string&gt; vekstring;

void IzlistajOptuzbu(char ** mat, int &amp;velicina){
	for(int i=0;i&lt;velicina;i++){
		if(mat[i]==nullptr)continue;
		else{
			std::cout&lt;&lt;mat[i]&lt;&lt;std::endl;
		}
	}
}

int PotencijalniKrivci( char **&amp;ime, vekstring krivci ){
	
	int brojac(0);
	ime=nullptr;
	try{
<a name="0"></a><font color="#FF0000"><a href="match310-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_10.gif"/></a>

		ime=new char*[krivci.size()];
		   for (int i=0;i&lt;krivci.size ();i++) 
		   ime [i]=nullptr;
		try{
			
		   for(int i=0;i&lt;krivci.size();i++){
			  ime[i]=new char[krivci[i].size()+1];
			  brojac++;
		   }
		   for(int i=0;i&lt;krivci.size();i++){
		   	for(int j=0;j&lt;krivci[i].size();j++){
		   		ime[i][j]=krivci[i][j];
</font>		   	}
		   	ime[i][krivci[i].size()]='\0';
		   }
		   return brojac;
		}        
		catch(std::bad_alloc){
			for(int i=0;i&lt;brojac;i++) delete[]ime[i];
		    delete[]ime;
			throw;
		}
	}
	catch(std::bad_alloc){
		throw  ;
	}
}

int OdbaciOptuzbu( char **&amp; ime, int &amp;velicina, std::string potencijalni){
	int index=7877;
	bool postoji(true);
	bool ima=false;
	for(int i=0;i&lt;velicina;i++){
		postoji=true;
		if(ime[i]!=nullptr)
		{
			int broj=0;
		char* p= ime[i];
		while(*p!='\0'){
			p++;
			broj++;
		}
		if(broj== potencijalni.size()){
		for(int j=0;j&lt;potencijalni.size();j++)
		if(ime[i][j]!=potencijalni[j]) {  postoji=false; }
		if(postoji){
		index=i;
		ima=true;
		break;
		}
		}
		}
	}
	if(!ima)
	throw std::domain_error("Osoba sa imenom "+potencijalni+ " nije bila optuzena");
	else {
			delete[]ime[index];
			ime[index]=nullptr;
		int brojac(0);
		for(int i=0;i&lt;velicina;i++){
			if(ime[i]==nullptr)brojac++;
		}
		if(brojac&lt;=10)return velicina;
		else{
			
			char** pok=nullptr;
			try{
<a name="3"></a><font color="#00FFFF"><a href="match310-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

				pok=new char*[velicina - brojac];
				for(int i=0;i&lt;velicina-brojac;i++)
				pok[i]=nullptr;
</font>				
				int br(0);
				for(int i=0;i&lt;velicina;i++){
					if(ime[i]!=nullptr){
						pok[i]=ime[i];
						br++;
					}
				}
				pok=ime;
				ime=nullptr;
				return br;
			}
			
			catch(...){
				return velicina;
			}
		}
	}
}

int DodajOptuzbu( char ** &amp;mat, int &amp;velicina, std::string s){
	char* pok=nullptr;
	try{
<a name="2"></a><font color="#0000FF"><a href="match310-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		pok=new char[s.size()+1];
		for(int i=0;i&lt;s.size();i++){
			pok[i]=s[i];
		}
		pok[s.size()]='\0';
</font>		for(int i=0;i&lt;velicina;i++){
			if(mat[i]==nullptr){ 
				mat[i]=pok;
				return velicina;
			}
		}
<a name="1"></a><font color="#00FF00"><a href="match310-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

			char** novi=nullptr;
			try{
				novi=new char*[velicina+1];
				for(int i=0;i&lt;velicina+1;i++)
				novi[i]=nullptr;
				for(int i=0;i&lt;velicina;i++){
</font>					novi[i]=mat[i];
				}
				novi[velicina]=pok;
				mat = novi;
				novi = nullptr;
			
				return velicina+1;
				
			}
			catch(std::bad_alloc ){
				for(int i=0;i&lt;velicina+1;i++){
					delete[]novi[i];
				}
				throw ;
			}
	}
	catch(std::bad_alloc ){
		throw ;
	}
}

int main ()
{
	int v,opcija;
	std::string s,s1,s2,s3;
	vekstring vs;
	char **mat ;
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	std::cin&gt;&gt; v;

	std::cout&lt;&lt;"\nUnesite potencijalne krivce: "&lt;&lt;std::endl;

	try{
	for(int i=0;i&lt;=v;i++){
		std::getline(std::cin,s);
		vs.push_back(s);
	}

	 v= PotencijalniKrivci(mat,vs);
	
	while(1==1){
	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
	std::cin&gt;&gt; opcija;
//	std::cin.clear();
	if(opcija==3){
		IzlistajOptuzbu(mat,v);
	}
	if(opcija==2){
		std::cout&lt;&lt;"\nUnesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
	//	std::cin.ignore(1000,'\n');
		std::cin&gt;&gt;s2;
	//	try{
		v=OdbaciOptuzbu(mat,v,s2);
//		}
	//	catch(std::domain_error e) {
	//	std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	//	for(int i=0;i&lt;v;i++) delete[]mat[i];
	//	delete[] mat;
	//	return 0;
//		}
	}
	if(opcija==1){
		std::cout&lt;&lt;"\nUnesite ime novog optuzenog: "&lt;&lt;std::endl;
	//	std::cin.ignore(1000,'\n');
		std::cin&gt;&gt;s1;
//		try{
		v=DodajOptuzbu(mat,v,s1);
	//	}catch(std::bad_alloc){
		//	for(int i=0;i&lt;v;i++)
		//	delete[]mat[i];
		//	delete[]mat;
		//	throw;
			
	//	}
	}
	
	if(opcija==0)break;
	}
	}
	catch(std::domain_error e){
		std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
	//	for(int i=0;i&lt;v;i++) delete[] mat[i];
	//	delete[]mat;
	//	return 0;
	}
	
	catch(std::bad_alloc){
	//	for(int i=0;i&lt;v;i++) delete [] mat[i];
	//	delete[]mat;
		return 0;
	}
	
	for(int i=0;i&lt;v;i++){
		delete[] mat[i];
	}
	delete[] mat;
	
     
	return 0;
}

</pre>
</body>
</html>
