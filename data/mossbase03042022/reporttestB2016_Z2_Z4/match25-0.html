<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7774.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7774.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;algorithm&gt;
#include &lt;string.h&gt;

<a name="0"></a><font color="#FF0000"><a href="match25-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::cout;
using std::cin;
using std::endl;
using std::string;

int Prebroj_nulte(char **&amp;optuzeni, int vel) {

    int brojac(0);

    for (int i = 0; i &lt; vel; i++) {
        if(!optuzeni[i])
            brojac++;
    }
    return brojac;
}

bool JednakiSu(char *optuzeni, string ime) {
    if(!optuzeni)
        return false;
    for (int i = 0; i &lt; ime.length(); i++) {
        if(optuzeni[i] != ime[i] || optuzeni[i] == '\0')
            return false;
   }
    return true;
}

int DodajOptuzbu (char **&amp; optuzeni, int vel, string ime) {

    bool ima_li_nultog=false;
    int br_nultog;

    for (int i = 0; i &lt; vel; i++) {
        if(!optuzeni[i]) {
            ima_li_nultog=true;
            br_nultog=i;
            break;
        }
    }
    char *pok=nullptr;
    try {
        pok = new char[ime.length()+1];
        std::copy(ime.begin(), ime.end(), pok);
        pok[ime.length()] = '\0';
    }
    catch (std::bad_alloc) {
        return vel;
    }

    if(ima_li_nultog) {
        optuzeni[br_nultog] = pok;
        return vel;
    }

    char **brisac(optuzeni);
    optuzeni = nullptr;

    try {

        optuzeni = new char *[vel+1];

        for (int i = 0; i &lt; vel+1; i++) {
            optuzeni[i] = nullptr;
        }

        for (int i = 0; i &lt; vel; i++) {
            optuzeni[i] = new char [strlen(brisac[i])+1];
        }

        for (int i = 0; i &lt; vel; i++) {
            strcpy(optuzeni[i], brisac[i]);
        }
        optuzeni[vel] = pok;

    }
    catch (std::bad_alloc) {
        for (int i = 0; i &lt; vel+1; i++) {
            delete[] optuzeni[i];
        }
        delete[] optuzeni;
        optuzeni = brisac;
        return vel;
    }
    for (int i = 0; i &lt; vel; i++) {
        delete[] brisac[i];
    }
    delete[] brisac;

    return ++vel;
 }

int OdbaciOptuzbu (char **&amp; optuzeni, int vel, string ime) {    // NE ZABORAVI IZUZETAK

    for (int i = 0; i &lt; vel; i++) {
        if(JednakiSu(optuzeni[i],ime)) {
            delete[] optuzeni[i];
            optuzeni[i] = nullptr;
            break;
        }
//        if(i == vel-1)
 //           throw;
    }

    if(Prebroj_nulte(optuzeni, vel)&lt;=10) {
        return vel;
    }

    char **brisac(optuzeni);
    int br_nultih(0);
    int duz;
    int br_imena;

    duz = vel-Prebroj_nulte(optuzeni, vel);
    try {
        optuzeni = new char *[duz];
    } catch (std::bad_alloc) {
        optuzeni = brisac;
        return vel;
    }
    for (int i = 0; i &lt; duz; i++) {
        optuzeni[i] = nullptr;
    }
    try {
        for (int i = 0; i &lt; duz; i++) {
            for (int j = i+br_nultih; j &lt; vel; j++) {
                if(brisac[j]) {
                    br_imena = j;
                    break;
                }
                br_nultih++;
            }
            optuzeni[i] = new char [strlen(brisac[br_imena]+1)];
            strcpy(optuzeni[i], brisac[br_imena]);
            optuzeni[i][strlen(brisac[br_imena])] = '\0';
        }
    }
    catch (std::bad_alloc) {
        for (int i = 0; i &lt; duz; i++) {
            delete[] optuzeni[i];
        }
        delete[] optuzeni;
        optuzeni = brisac;
        return vel;
    }

    for (int i = 0; i &lt; vel; i++) {
        delete[] brisac[i];
    }
    delete[] brisac;

    return duz;
}

void IzlistajOptuzbu (char **optuzeni, int vel) {
    char *p;
    for (int i = 0; i &lt; vel; i++) {
        p = optuzeni[i];
        if(p) {
            while (*p != '\0') {
                cout &lt;&lt; *p++;
            }
            cout &lt;&lt; endl;
        }
    }
}

int PotencijalniKrivci (char **&amp; optuzeni, std::vector&lt;string&gt; imena) {

    int brojac(0);

    try {
        optuzeni = new char *[imena.size()];

        for (int i = 0; i &lt; imena.size(); i++) {
            optuzeni[i] = nullptr;
        }

        for (int i = 0; i &lt; imena.size(); i++) {
            optuzeni[i] = new char [imena[i].length()+1];
            brojac++;
        }
    }
    catch (std::bad_alloc) {
        for (int i = 0; i &lt; brojac; i++) {
            delete[] optuzeni[i];
        }
        delete[] optuzeni;
        throw std::bad_alloc();                           // Za sad neka ovdje zaustavlja program
    }

    for (int i = 0; i &lt; brojac; i++) {
        std::copy(imena[i].begin(), imena[i].end(), optuzeni[i]);
        optuzeni[i][imena[i].length()] = '\0';
    }
    return brojac;
}

int main ()
{
    int n;
    cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; endl;
    cin &gt;&gt; n;

    cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; endl;
    std::cin.ignore(1000,'\n');

    std::vector&lt;string&gt; vecstr;
    std::string krivac;

    for (int i = 0; i &lt; n; i++) {
        std::getline(std::cin, krivac);
        vecstr.push_back(krivac);
    }

    char **optuzeni;

    try{
        PotencijalniKrivci(optuzeni,vecstr);
    } catch(std::bad_alloc) {
        return 0;
    }
    int opcija;
    string ime;

    do {
        cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje"
              &lt;&lt; " nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt; endl;
        cin &gt;&gt; opcija;

        switch (opcija) {
            case 0:
                break;
            case 1:
                cin.ignore(1000,'\n');
                cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; endl;
                std::getline(std::cin, ime);
                n = DodajOptuzbu(optuzeni, n, ime);
                break;
            case 2:
                cin.ignore(1000,'\n');
                cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; endl;
                std::getline(std::cin, ime);
                try {
                   n = OdbaciOptuzbu(optuzeni, n, ime);
                }
                catch (...) {
                    std::cout &lt;&lt; "Osoba sa imenom "&lt;&lt; ime &lt;&lt; " nije bila optuzena" &lt;&lt; endl;
                }

                break;

            case 3:
                IzlistajOptuzbu(optuzeni, n);
                break;
        }

    } while (opcija);
    for (int i = 0; i &lt; n; i++) {
        delete[] optuzeni[i];
    }
    delete[] optuzeni;
</font>    
	return 0;
}
</pre>
</body>
</html>
