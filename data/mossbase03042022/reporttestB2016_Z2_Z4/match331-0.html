<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7197.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7197.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4

	NAPOMENA: i javni ATo-vi su dio postavke

	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci(char**&amp; NaZnakove, std::vector &lt;std::string&gt; v)
{

<a name="1"></a><font color="#00FF00"><a href="match331-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

	char** MatricaZnakova=nullptr;

	try {
		MatricaZnakova = new char* [v.size()];
		for(int i=0; i&lt;v.size(); i++) {
			MatricaZnakova[i]=nullptr;
		}

	} catch(...) {
		delete[] MatricaZnakova;
</font><a name="4"></a><font color="#FF00FF"><a href="match331-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

		throw std::bad_alloc();


	}
	try {
		for(int i=0; i&lt;v.size(); i++) {
			MatricaZnakova[i] = new char [v[i].size()+1];
</font>			for(int j=0; j&lt;v[i].size(); j++) {
				MatricaZnakova[i][j]=v[i][j];
			}
			MatricaZnakova[i][v[i].size()]='\0';

		}
	} catch(...) {
		for(int i=0; i&lt;v.size(); i++) {
			delete[] MatricaZnakova[i];
		}
		delete[] MatricaZnakova;

		throw std::bad_alloc();
	}
	NaZnakove = MatricaZnakova;
	return v.size();

}

int OdbaciOptuzbu(char**&amp; NaZnakove, int velicina, std::string ime)
{
	int i;
	for(i=0; i&lt;velicina; i++) {

		if(ime == NaZnakove[i]) {
			delete[] NaZnakove[i];
			NaZnakove[i]=nullptr;
			break;
		}

	}
	if(i==velicina) throw std::domain_error("Osoba sa imenom "+ime+" nije bila optuzena");
	int brojac(0);
	for(i=0; i&lt;velicina; i++) {
		if(NaZnakove[i]==nullptr) {
			brojac++;
		}
	}
	if(brojac&gt;10) {
		char** pok_pok=nullptr;
		try {
			pok_pok=new char*[velicina-brojac];
			for(int j=0; j&lt;velicina-brojac; j++) {
				pok_pok[j]=nullptr;
			}
			for(int j=0, k=0; j&lt;velicina-brojac; j++, k++) {
				if(NaZnakove[k]==nullptr) k++;
				pok_pok[j]=NaZnakove[k];
			}
			for(int j=0; j&lt;velicina; j++) {
				NaZnakove[j]=nullptr;
			}
			delete[] NaZnakove;
			NaZnakove=pok_pok;
			return velicina-brojac;
		}

		catch(...) {
			delete[] pok_pok;
			return velicina;
		}
	}
	return velicina;

}
int DodajOptuzbu(char **&amp; NaZnakove, int velicina, std::string ime)
{
	for(int i=0; i&lt;velicina; i++) {
		if(NaZnakove[i]==nullptr) {
			NaZnakove[i]=new char [ime.size()+1];
			int j;
			for(j=0; j&lt;ime.size(); j++) {
				NaZnakove[i][j]=ime[j];
			}
			NaZnakove[i][j]='\0';

<a name="2"></a><font color="#0000FF"><a href="match331-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

			return velicina;
		}

	}
	char** pok_pok=nullptr;
	try {
		pok_pok=new char*[velicina+1];
		for(int j=0; j&lt;velicina+1; j++) {
			pok_pok[j]=nullptr;
</font>		}
		for(int i=0; i&lt;velicina; i++) {
			pok_pok[i]=NaZnakove[i];
		}
		pok_pok[velicina]=new char [ime.size()+1];
		for(int j=0; j&lt;ime.size(); j++) {
			pok_pok[velicina][j]=ime[j];
		}
		pok_pok[velicina][ime.size()]='\0';
		
		for(int i=0; i&lt;velicina; i++) {
			NaZnakove[i]=nullptr;
		}
		delete[] NaZnakove;
		NaZnakove=pok_pok;

	} catch(...) {
		delete[] pok_pok;
		throw std::bad_alloc();
	}
	return velicina+1;
}
void IzlistajOptuzbu(char** imena, int velicina)
{
	for(int i=0; i&lt;velicina; i++) {
		if(imena[i]==nullptr) continue;
		std::cout&lt;&lt;imena[i]&lt;&lt;std::endl;
		
	}
}

int main ()
{
	char** NizPotencijalnih=nullptr;
	std::vector&lt;std::string&gt; vs;
	int broj;
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	std::cin&gt;&gt;broj;
	std::cin.clear();
	std::cin.ignore(100000, '\n');
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	std::string ime;
	for(int i=0; i&lt;broj; i++) {
		std::getline(std::cin, ime);
		vs.push_back(ime);
	}
	int n, nn = PotencijalniKrivci(NizPotencijalnih, vs);
	n=nn;
	int opcija;
	std::string novajlija, nevin;

	do {
		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
		std::cin&gt;&gt;opcija;

		std::cin.clear();
		std::cin.ignore(100000, '\n');
		std::cout&lt;&lt;std::endl;

		if(opcija==1) {
			std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
<a name="0"></a><font color="#FF0000"><a href="match331-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

			std::getline(std::cin, novajlija);
			try{
			n = DodajOptuzbu(NizPotencijalnih, n, novajlija);
			}
			catch(std::bad_alloc){
				std::cout&lt;&lt;"Neuspjela alokacija"&lt;&lt;std::endl;
			}
		}

		if(opcija==2) {
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
			std::getline(std::cin, nevin);
</font>			try {
<a name="3"></a><font color="#00FFFF"><a href="match331-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

				n = OdbaciOptuzbu(NizPotencijalnih, n, nevin);
			} catch(std::domain_error poruka) {
				std::cout&lt;&lt;poruka.what()&lt;&lt;std::endl;
			}
		}

		if(opcija==3) {
			IzlistajOptuzbu(NizPotencijalnih, n);
</font>		}


	} while(opcija != 0);
	for(int i=0; i&lt;n; i++)delete[] NizPotencijalnih[i];
	delete[] NizPotencijalnih;

	return 0;
}</pre>
</body>
</html>
