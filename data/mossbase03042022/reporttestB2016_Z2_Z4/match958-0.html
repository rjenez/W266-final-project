<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9946.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9946.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

using namespace std;

int PotencijalniKrivci(char** &amp;p, vector&lt;string&gt; imena)
{
	try
	{
		p = new char *[imena.size()];
		try{
<a name="1"></a><font color="#00FF00"><a href="match958-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

		for(int i = 0; i &lt; imena.size(); i++)
		{
			p[i] = new char[imena[i].length() + 1];
		}
		
		for(int i = 0; i &lt; imena.size(); i++)
</font>		{
			strcpy(p[i], imena[i].c_str());
		}
		}catch(...){
<a name="3"></a><font color="#00FFFF"><a href="match958-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

				for(int i = 0; i &lt; imena.size(); i++)
					delete[] p[i];
		
				delete[] p;
				throw bad_alloc();
		}
	}
	catch(bad_alloc())
	{
		abort();
	}
	
	return imena.size();
</font>}

int OdbaciOptuzbu(char** &amp;p, int velicina, string ime)
{
	try
	{
			int pozicija = -1;
			for(int i = 0 ; i &lt; velicina; i++)
			{
				if(p[i]==nullptr)continue;
				if(strcmp(p[i], ime.c_str()) == 0) 
				{
					pozicija = i;
					delete[] p[pozicija];
					p[pozicija] = nullptr;
				}	
			}
			
					int brojac = 0;
					for(int i = 0; i &lt; velicina; i++)
					{
						if(p[i] == nullptr) brojac++;
					}
					
					
					if(brojac &gt; 10)
					{
						try {
						int brojac_novi = 0;
						char **novi = new char*[velicina-brojac];
<a name="2"></a><font color="#0000FF"><a href="match958-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

						for(int i = 0; i &lt; velicina; i++)
						{
							if(p[i] != nullptr)
							{
								novi[brojac_novi] = p[i];
								brojac_novi++;
							}
						}
						delete[] p;
						p = novi;
</font>						velicina -= brojac;
						}catch(...){}
					}
	
			if(pozicija == -1)
				throw domain_error("");
		
	}
	catch (...)
	{
		cout &lt;&lt; "Osoba sa imenom " + ime + " nije bila optuzena" &lt;&lt; endl;
	}
	
	return velicina;
}

int DodajOptuzbu(char** &amp;p, int velicina, string ime)
{
	try
	{
		int pozicija = -1;
		char *pointer = new char[ime.length()+1];
		strcpy(pointer, ime.c_str());
		for(int i = velicina-1; i &gt; 0; i--)
		{
			if(p[i] == nullptr) 
			{
				pozicija = i ;
			}
		}
		if(pozicija != -1)
		{
			p[pozicija] = new char[ime.length()-1];
			strcpy(p[pozicija], ime.c_str());
			velicina++;
		}
		else 
		{
			char **novi=new char*[velicina+1];
			int i=0;
			for( i=0;i&lt;velicina;i++){
				novi[i]=p[i];
			}
			novi[i]=pointer;
			velicina++;
			delete[] p;
			p=novi;
		}
	}
	catch(...)
	{
		abort();
	}
	return velicina;
}

void IzlistajOptuzbu(char** &amp;p, int velicina)
{
	for(int i = 0; i &lt; velicina; i++)
	{
		int j = 0;
		while( p[i] != nullptr  &amp;&amp; p[i][j] != '\0')
		{
			cout &lt;&lt; p[i][j];
			j++;
		
		}
		if(p[i] != nullptr) cout &lt;&lt; endl;
	}
}

int main ()
{
	char **p;
	vector&lt;string&gt; skup_imena;
<a name="0"></a><font color="#FF0000"><a href="match958-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

	int broj_krivaca;
	cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; endl;
	cin &gt;&gt; broj_krivaca;
	
	cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; endl;
	for(int i = 0; i &lt; broj_krivaca; i++)
	{
		string ime; 
		cin &gt;&gt; ime;
		skup_imena.push_back(ime);
	}
	
	broj_krivaca = PotencijalniKrivci(p, skup_imena);
</font>	
	int komanda;
	
	do
	{
		cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; endl;
		cin &gt;&gt; komanda;
		switch(komanda)
		{
			case 1:
				{
				cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; endl;
				string novo_ime;
				cin &gt;&gt; novo_ime;
				
				broj_krivaca = DodajOptuzbu(p, broj_krivaca, novo_ime);
				}
				break;
			
			case 2:
				{
				cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; endl;
				string nov_ime;
				cin &gt;&gt; nov_ime;
				
				broj_krivaca = OdbaciOptuzbu(p, broj_krivaca, nov_ime);
				}
				break;
				
			case 3:
				{
				IzlistajOptuzbu(p, broj_krivaca);
				}
				break;
		}
	}while(komanda &gt; 0 &amp;&amp; komanda &lt; 4);
	
	for(int i = 0; i &lt; broj_krivaca; i++)
		delete[] p[i];
		
	delete[] p;
	
	return 0;
}</pre>
</body>
</html>
