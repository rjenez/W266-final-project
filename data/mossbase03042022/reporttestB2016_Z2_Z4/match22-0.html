<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8797.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8797.cpp<p></p><pre>
#include &lt;string&gt;
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include "sake.h"

<a name="0"></a><font color="#FF0000"><a href="match22-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int PotencijalniKrivci(char**&amp;p, std::vector&lt;std::string&gt; v){
	if(v.size()==0)
		return 0;
	p=nullptr;
	try {
		p=new char*[v.size()]{};
		try {
			for(int i=0; i&lt;v.size(); i++){
					p[i]=new char[v[i].length()+1];
					int k;
					for(k=0; k&lt;v[i].length(); k++){
						p[i][k]=v[i][k];
					}
					p[i][k]='\0';
			}
		}
        catch (std::bad_alloc) {
            for(unsigned int i=0; i&lt;v.size(); i++)
                delete[] p[i]; 
            delete[] p;
            throw;
        }
    }
    catch (std::bad_alloc) {
        throw; 
    }
    return v.size();
}
std::string pretvori(char *p){
	std::string s="";
	while (*p!='\0') 
		s+=*p++;
	return s;	
}
int AlocirajPonovo(char**&amp;p, int n, std::string novi){
	int br(0);
	for(int i=0; i&lt;n; i++){
		if(p[i]!=nullptr)
			br++;
	}
	char **a=nullptr;
	try {
		if(n==br)
			a=new char*[br+1]{};
		else	
			a=new char*[br]{};
		try {
			int j=0;
			for(int i=0; i&lt;n; i++){
				if(p[i]!=nullptr){
					std::string s=pretvori(p[i]);
					a[j]=new char[s.size()+1];
					int k;
					for(k=0; k&lt;s.size(); k++){
						a[j][k]=p[i][k];
					}
					a[j][k]=0;
					j++;
				}
			}
			if(n==br){
				a[j]=new char[novi.size()+1];
				int k;
				for(k=0; k&lt;novi.size(); k++){
					a[j][k]=novi[k];
				}
				a[j][k]=0;
				br++;
			}
		
		for(int i=0; i&lt;n; i++)
			delete[] p[i];
		delete[] p;
		p=a;
		return br;
			
		}
		catch (std::bad_alloc) {
			for(int i=0; i&lt;br; i++)
				delete[] a[i];
			delete[] a;
			if(n==br)
			throw;
			else
			return n;
		}
	}
	catch (std::bad_alloc) {
		if(n==br)
			throw;
		else
			return n;
	}
}
int OdbaciOptuzbu(char **&amp;p, int n, std::string s){
	int br(0);
	for(int i=0; i&lt;n; i++){
		std::string ime=pretvori(p[i]);
		if(ime==s){
			delete[] p[i];
			p[i]=nullptr;
			br++;
		}
	}
	int br2(0);
	for(int i=0; i&lt;n; i++)
		if(p[i]==nullptr)
			br2++;
	if(br2&gt;10)
	   n=AlocirajPonovo(p,n,s);
	if(br==0)
	   throw std::domain_error("Osoba sa imenom "+s+" nije bila optuzena");
	return n;   
}
char *AlocirajNIZ(std::string s){
	char *p=nullptr;
	try {
		p=new char[s.size()+1];
		int i;
		for(i=0; i&lt;s.size(); i++)
			p[i]=s[i];
		p[i]=0;
		return p;
	}
	catch (std::bad_alloc) {
		throw;
	}
}
int DodajOptuzbu(char **&amp;p, int n, std::string s){
	
	bool nije_nasao(true); 
	for(int i=0; i&lt;n; i++){
		if(p[i]==nullptr){
			char* novi_clan=nullptr;
			try {
				novi_clan=AlocirajNIZ(s);
			}
			catch (...) {
				throw;
			}
			p[i]=novi_clan;
			delete[] novi_clan;
			nije_nasao=false;
			break;
		}
	}
	try {
		if(nije_nasao)
			n=AlocirajPonovo(p,n,s);
	}
	catch (std::bad_alloc) {
		throw;
	}
	return n;
}	
void IzlistajOptuzbu(char **p, int n){
	for(int i=0; i&lt;n; i++){
		if(*p==nullptr){
			p++;
			continue;
		}	
		std::cout &lt;&lt; *p++&lt;&lt;"\n";	
	}
}
int main (){
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti?\nUnesite potencijalne krivce: " &lt;&lt; std::endl;
	int n;
	std::cin &gt;&gt; n;
	std::vector&lt;std::string&gt; v(n);
	std::string s;
	std::cin.ignore(10000, '\n');
	for(int i=0; i&lt;n; i++){
   		 std::getline(std::cin, s);
   		 v[i]=s;
	}
	char**p=nullptr;
	try {
		n=PotencijalniKrivci(p,v);
		int br;
		do{
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
			std::cin &gt;&gt; br;
			std::cin.ignore(10000, '\n');
			
			if(br==0)
				break;
			
			if(br==1){
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::getline(std::cin, s);
				try{n=DodajOptuzbu(p,n,s);}
				catch(...){
					throw;
					}
				}
			
			if(br==2){
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
				std::getline(std::cin, s);
				try{
					n=OdbaciOptuzbu(p,n,s);
				}	
				catch(std::domain_error error){
					std::cout &lt;&lt; error.what() &lt;&lt; std::endl;
				}
				catch(...){
					throw;
				}
			}
			
			if(br==3)
				IzlistajOptuzbu(p,n);
		}while(br!=0);
	}	
	catch(...){
		for(int i=0; i&lt;n; i++)
			delete[] p[i];
		delete[] p;
		throw;
	}
	for(int i=0; i&lt;n; i++)
		delete[] p[i];
	delete[] p;	
</font>return 0;
}</pre>
</body>
</html>
