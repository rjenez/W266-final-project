<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3442.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5744.cpp<p></p><pre>
/*B 16/17, Zadaća 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;

void Order66(char **mat, int n){
 for(int i = 0; i &lt; n; i++) delete[] mat[i];
 delete[] mat;
}

int Duz(char *p)
{
	int n=0;
	while(*p!='\0') 
	{
		p++;
		n++;
	}
	return n+1;
}

int PotencijalniKrivci (char **&amp;p, std::vector&lt;std::string&gt; krivci)
{
	int i;
	p=nullptr;
	try
	{
		p=new char*[krivci.size()];
		for(i=0;i&lt;krivci.size();i++) p[i]=nullptr;
	}
	catch(std::bad_alloc x)
	{
		delete[] p;
		throw x;
	}
	try
	{
		for(i=0;i&lt;krivci.size();i++)
		{
			p[i]=new char[krivci[i].size()+1];
			std::strcpy(p[i], krivci[i].c_str());
		}
	}
	catch(std::bad_alloc x)
	{
		for(i=0;i&lt;krivci.size();i++) delete[] p[i];
		delete[] p;
		throw x;
	}
<a name="1"></a><font color="#00FF00"><a href="match453-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

	return i;
}

int OdbaciOptuzbu(char **&amp;p,int n,std::string nevin)
{
	bool izbacen=false;
	for(int i=0;i&lt;n;i++)
	{
		if(p[i]==nullptr) continue;
</font><a name="4"></a><font color="#FF00FF"><a href="match453-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

		if(std::strcmp(p[i], nevin.c_str())==0)
		{
			delete[] p[i];
			p[i]=nullptr;
			izbacen=true;
		}
	}
	if(!izbacen) throw std::domain_error("Osoba sa imenom "+nevin+" nije bila optuzena");
</font>	int broj=0;
	for(int i=0;i&lt;n;i++)
	{
		if(p[i]==nullptr) broj++;
	}
	if(broj&gt;10)
	{
		char **novi=nullptr;
		try
		{ 
			novi = new char*[n-broj];
		}
		catch(std::bad_alloc x)
		{
			delete[] novi;
		}
		try
		{
			for(int i=0;i&lt;n-broj;i++) novi[i]=nullptr;
			int brojnovih=0;
			for(int i=0;i&lt;n;i++)
			{
				if(p[i])
				{
					novi[brojnovih]=new char[Duz(p[i])+1];
					std::strcpy(novi[brojnovih],p[i]);
					brojnovih++;
				}
			}
			for(int i=0;i&lt;n;i++) delete[] p[i];
			delete[] p;
			p=novi;
			n-=broj;
			return n;
		}
		catch(std::bad_alloc x)
		{
			for(int i=0;i&lt;n-broj;i++) delete[] novi[i];
<a name="2"></a><font color="#0000FF"><a href="match453-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

			delete[] novi;
		}
	}
	return n;
}
int DodajOptuzbu(char **&amp;p,int n,std::string novi)
{	
	char* novic=nullptr;
	try
	{
		novic=new char[novi.size()+1];
</font>		std::strcpy(novic,novi.c_str());
		for(int i=0;i&lt;n;i++)
		{
			if(!p[i])
			{
				p[i]=novic;
				return n;
			}
		}
	}
	catch(std::bad_alloc x)
	{
		delete[] novic;
		throw x;
	}
<a name="3"></a><font color="#00FFFF"><a href="match453-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	char **novin=nullptr;
	try
	{
		novin = new char*[n+1];
		for(int i=0;i&lt;n+1;i++) novin[i]=nullptr;
</font>		for(int i=0;i&lt;n;i++)
		{
			novin[i]=new char[std::strlen(p[i])+1];
<a name="0"></a><font color="#FF0000"><a href="match453-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

			std::strcpy(novin[i],p[i]);
		}
		novin[n]=novic;
		for(int i=0;i&lt;n;i++) delete[] p[i];
		delete[] p;
		p=novin;
		n+=1;
</font>		return n;
	}
	catch(std::bad_alloc x)
	{
		Order66(novin,n);
		throw x;
	}
}

void IzlistajOptuzbu (char **p,int n)
{
	for(int i=0;i&lt;n;i++)
		if(p[i]) std::cout &lt;&lt; p[i] &lt;&lt; "\n";
}

int main ()
{
	try
	{
	int n;
	do{
	std::cout &lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? \n";
	std::cin &gt;&gt; n;
	if(n&lt;0) std::cout &lt;&lt; "Broj ne može biti negativan!\n";
	}while(n&lt;0);
	std::vector&lt;std::string&gt; imena(n);
	std::cout &lt;&lt; "Unesite potencijalne krivce: \n";
	if(n!=0)std::cin &gt;&gt; std::ws;
	for(std::string &amp;s:imena)
		std::getline(std::cin, s);
	char **nizPotencijalnih;
	n = PotencijalniKrivci(nizPotencijalnih, imena);
	int kom;
	while(std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n",std::cin &gt;&gt; kom,kom!=0)
	{
		try{
		if(kom==1)
		{
			std::cout &lt;&lt; "Unesite ime novog optuzenog: \n";
			std::string novi;
			std::cin &gt;&gt; std::ws;
			std::getline(std::cin, novi);
			n=DodajOptuzbu(nizPotencijalnih,n,novi);
			continue;
		}
		if(kom==2)
		{
			std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: \n";
			std::string novi;
			std::cin &gt;&gt; std::ws;
			std::getline(std::cin, novi);
			n=OdbaciOptuzbu(nizPotencijalnih,n,novi);
			continue;
		}
		if(kom==3) IzlistajOptuzbu(nizPotencijalnih,n);
		}catch(std::domain_error x)
		{
			std::cout &lt;&lt; "IZUZETAK: "&lt;&lt; x.what() &lt;&lt; "\n";
		}
		catch(std::bad_alloc x)
		{
			std::cout &lt;&lt; "Greska u alokaciji";
		}
	}
	Order66(nizPotencijalnih, n);
	}
	catch(std::bad_alloc x)
	{
		std::cout &lt;&lt; "Greska u alokaciji";
	}
	return 0;
}</pre>
</body>
</html>
