<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8389.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8389.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;

int PotencijalniKrivci (char** &amp;referenca, std::vector&lt;std::string&gt; imena) {
	int brojac(0);
	char **pokazivac(nullptr);
	try {
		pokazivac=new char*[imena.size()]{};
	}
	catch (...) {
		delete [] pokazivac;
		throw std::bad_alloc();
	}
	try {
		int j;
		for (int i=0; i&lt;imena.size();i++) {
			pokazivac[i]=new char[imena[i].size()+1]{};
			brojac++;
<a name="6"></a><font color="#00FF00"><a href="match161-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

				for (j=0; j&lt;imena[i].size(); j++) {
					pokazivac[i][j]=imena[i][j];
				}
			pokazivac[i][j]=0;
		}
	}
	catch (...) {
</font>		for (int i=0; i&lt;brojac; i++) {
			delete [] pokazivac[i];
		}
		delete [] pokazivac;
	}
	referenca=pokazivac;
	return brojac;
}

int OdbaciOptuzbu (char** &amp;referenca, int velicina, std::string neduzan) {
	int brojac(0), izbaceni(0);
	for (int i=0; i&lt;velicina; i++) {
		int j(0);
		while (referenca[i][j]!=0 &amp;&amp; j&lt;neduzan.length()) {
			if (referenca[i][j]!=neduzan[j])
				break;
			j++;
			brojac++;
		}
		if (brojac==neduzan.length()) {
			izbaceni++;
			delete[] referenca[i];
			referenca[i]=nullptr;
		}
		brojac=0;
	}
	if (izbaceni==0) 
		throw std::domain_error ("Osoba sa imenom "+neduzan+" nije bila optuzena");
	if (izbaceni&gt;10) {
		char**korisni;
		try {
			korisni=new char*[velicina-izbaceni]{};
		}
		catch (...) {
			delete [] korisni;
		}
<a name="1"></a><font color="#00FF00"><a href="match161-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

		int k(0);
		for (int i=0; i&lt;velicina; i++) {
			if(referenca[i]!=nullptr) {
				korisni[k]=referenca[i];
				k++;
			}
		}
		for (int i=0; i&lt;velicina; i++) {
			delete [] referenca[i];
		}
		delete [] referenca;
		velicina=velicina-izbaceni;
</font><a name="2"></a><font color="#0000FF"><a href="match161-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

	}
	return velicina;
}

int DodajOptuzbu (char ** &amp;referenca, int velicina, std::string optuzeni){
	char*novi(nullptr);
	try {
		novi=new char[optuzeni.length()+1]{};
	}
	catch (...) {
		delete []novi;
		throw std::bad_alloc();
</font>	}
	int brojac3(0);
	for (int i=0; i&lt;optuzeni.length(); i++)
		novi[i]=optuzeni[i];
	for (int i=0; i&lt;velicina; i++) {
		if (referenca[i]==nullptr) {
			for (int j=0; j&lt;optuzeni.length(); j++) 
				referenca[i][j]=optuzeni[j];
			break;
		}
		brojac3++;
	}
<a name="5"></a><font color="#FF0000"><a href="match161-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	if (brojac3==velicina) {
		char **prosireni(nullptr);
		try {
			prosireni=new char*[velicina+1]{};
		}
		catch (...) {
			delete [] prosireni;
			throw std::bad_alloc();
		}
		int m(0);
</font><a name="0"></a><font color="#FF0000"><a href="match161-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

		for (m=0; m&lt;velicina; m++) {
			int brojac4(0);
			char *temp=referenca[m];
			while (*temp++!=0) 
				brojac4++;
			prosireni[m]=new char[brojac4 + 1]{};
			std::strcpy(prosireni[m], referenca[m]);
		}
		prosireni[m]=novi;
</font><a name="4"></a><font color="#FF00FF"><a href="match161-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

		for (int n=0; n&lt;velicina; n++) 
			delete [] referenca[n];
			delete [] referenca;
			referenca=prosireni;
	velicina++;
	}
	return velicina;
}
void IzlistajOptuzbu (char **imena, int velicina) {
	for (int i=0; i&lt;velicina; i++) {
		if (imena[i]!=nullptr) 
</font>		std::cout&lt;&lt;imena[i]&lt;&lt;std::endl;
	}
}

int main ()
{
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int n;
	std::cin&gt;&gt;n;
<a name="3"></a><font color="#00FFFF"><a href="match161-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

	std::vector&lt;std::string&gt;lista(n);
	std::cout&lt;&lt;"Unesite potencijalne krivce: \n";
	for (int i=0; i&lt;n; i++) {
		std::cin&gt;&gt;lista[i];
	}
	char** pokazivac(nullptr);
	int broj(PotencijalniKrivci(pokazivac, lista));
	int opcija;
	do {
	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
</font>	std::cin&gt;&gt;opcija;
	if (opcija==1) {
		std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
		std::string optuzeni;
		std::cin&gt;&gt;optuzeni;
		broj=DodajOptuzbu(pokazivac, broj, optuzeni);
	}
	else if (opcija==2) {
		std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
		std::string izbaci;
		std::cin&gt;&gt;izbaci;
		broj=OdbaciOptuzbu(pokazivac, broj, izbaci);
	}
	else if (opcija==3)
<a name="7"></a><font color="#0000FF"><a href="match161-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		IzlistajOptuzbu(pokazivac, broj);
	} while (opcija!=0);
	for (int i=0; i&lt;broj; i++)
		delete [] pokazivac[i];
		delete [] pokazivac;
</font>	return 0;
}</pre>
</body>
</html>
