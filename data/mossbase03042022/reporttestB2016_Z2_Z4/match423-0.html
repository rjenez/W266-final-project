<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7001.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7001.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

typedef std::vector&lt;std::string&gt; VektorStringova;

int PotencijalniKrivci(char **&amp;ref_na_pok, VektorStringova vs) {
	int brojac{};
	try {
<a name="0"></a><font color="#FF0000"><a href="match423-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

		ref_na_pok=new char *[vs.size()];
		try {
			while(brojac&lt;vs.size()) {
				ref_na_pok[brojac]=new char[vs[brojac].size()+1];
				std::strcpy(ref_na_pok[brojac], vs[brojac].c_str());
				brojac++;
			}
		}
		catch(std::bad_alloc) {
			for (int i=0; i&lt;brojac; i++) delete[] ref_na_pok[i];
			delete[] ref_na_pok;
			throw;
</font>		}
	}
	catch(std::bad_alloc) {
		throw;
	}
	return brojac;
}

int OdbaciOptuzbu(char **&amp;ref_na_pok, int velicina, std::string ime_nevinog) {
	bool pronadjen=false;
	for (int i=0; i&lt;velicina; i++) {
		std::string tmp=ime_nevinog;
		if (ref_na_pok[i]!=nullptr &amp;&amp; !(std::strcmp(ref_na_pok[i], tmp.c_str()))) {
			pronadjen=true;
			delete[] ref_na_pok[i];
			ref_na_pok[i]=nullptr;
		}
	}
	if (!pronadjen)
		throw std::domain_error("Osoba sa imenom " + ime_nevinog + " nije bila optuzena");
	int brojac{};
	for (int i=0; i&lt;velicina; i++)
		if (ref_na_pok[i]==nullptr) brojac++;
	if (brojac&lt;=10) return velicina;
	char **pok=nullptr;
	int nova_velicina=velicina-brojac;
	int indeks{};
	try {
		pok=new char *[nova_velicina];
		for (int i=0; i&lt;nova_velicina; i++) pok[i]=nullptr;
		try {	
			for (int i=0; i&lt;velicina; i++) {
				if (ref_na_pok[i]!=nullptr) {
					int duzina=std::strlen(ref_na_pok[i])+1;
<a name="1"></a><font color="#00FF00"><a href="match423-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

					pok[indeks]=new char[duzina+1];
					std::strcpy(pok[indeks], ref_na_pok[i]);
					indeks++;
				}
			}
		}
		catch(std::bad_alloc) {
			for (int i=0; i&lt;nova_velicina; i++) delete[] pok[i];
			delete[] pok;
			return velicina;
</font>		}
	}
	catch(std::bad_alloc) {
		return velicina;
	}
	for (int i=0; i&lt;velicina; i++) delete[] ref_na_pok[i];
	delete[] ref_na_pok;
	ref_na_pok=pok;
	return nova_velicina;
}

int DodajOptuzbu(char **&amp;ref_na_pok, int velicina, std::string ime_krivca) {
	char *pok1=nullptr;
	char **pok2=nullptr;
	try {
		pok1=new char[ime_krivca.size()+1];
		std::strcpy(pok1, ime_krivca.c_str());
<a name="3"></a><font color="#00FFFF"><a href="match423-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

		bool pronadjen=false;
		for (int i=0; i&lt;velicina; i++) 
			if (ref_na_pok[i]==nullptr) {
				pronadjen=true;
				ref_na_pok[i]=pok1;
</font>				delete[] pok1;
				return velicina;
			}
		if (!pronadjen) {
			try{
				int nova_velicina=velicina+1;
				pok2=new char *[nova_velicina];
				for (int i=0; i&lt;nova_velicina; i++) pok2[i]=nullptr;
				for (int i=0; i&lt;nova_velicina; i++) {
					if (i==nova_velicina-1) {
						try {
							pok2[i]=new char[ime_krivca.size()+1];
							std::strcpy(pok2[i], pok1);
							delete[] pok1;
						}
						catch(std::bad_alloc) {
							throw;
						}
					}
					else {
						int duzina=std::strlen(ref_na_pok[i])+1;
						pok2[i]=new char[duzina];
						std::strcpy(pok2[i], ref_na_pok[i]);
						delete[] ref_na_pok[i];
					}
				}
				delete[] ref_na_pok;
			}
			catch(std::bad_alloc) {
				delete[] pok1;
				throw;
			}
		}
	}
	catch(std::bad_alloc) {
		throw;
	}
	ref_na_pok=pok2;
	return velicina+1;
}

void IzlistajOptuzbu(char **pok, int velicina) {
<a name="2"></a><font color="#0000FF"><a href="match423-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

	for (int i=0; i&lt;velicina; i++)
		if (pok[i]!=nullptr) 
			std::cout &lt;&lt; pok[i] &lt;&lt; std::endl;
</font>}

int main () {
	int broj_potencijalnih_krivaca{};
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	std::cin &gt;&gt; broj_potencijalnih_krivaca;
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	VektorStringova potencijalni_krivci (broj_potencijalnih_krivaca);
	std::cin.ignore(10000, '\n');
	for (int i=0; i&lt;broj_potencijalnih_krivaca; i++)
		std::getline(std::cin, potencijalni_krivci[i]);
	char **nizPotencijalnih;
	int velicina{};
	try {
		velicina=PotencijalniKrivci(nizPotencijalnih, potencijalni_krivci);
		int opcija{};
		do {
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
			std::cin &gt;&gt; opcija;
			std::cin.ignore(10000,'\n');
			if (opcija==1) {
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::string novi_optuzeni;
				std::getline(std::cin, novi_optuzeni);
				velicina=DodajOptuzbu(nizPotencijalnih, velicina, novi_optuzeni);
			}
			else if (opcija==2) {
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
				std::string nevin_je;
				std::getline(std::cin, nevin_je);
				try {
					velicina=OdbaciOptuzbu(nizPotencijalnih, velicina, nevin_je);
				}
				catch(std::domain_error izuzetak) {
					for (int i=0; i&lt;velicina; i++) delete[] nizPotencijalnih[i];
					delete[] nizPotencijalnih;
					std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
				}
			}
			else if (opcija==3) {
				IzlistajOptuzbu(nizPotencijalnih, velicina);
			}
			else if (opcija==0) break;
		} while(opcija!=0);
	}
	catch(std::bad_alloc) {
		for (int i=0; i&lt;velicina; i++) delete[] nizPotencijalnih[i];
		delete[] nizPotencijalnih;
	}
	for (int i=0; i&lt;velicina; i++) delete[] nizPotencijalnih[i];
	delete[] nizPotencijalnih;
	return 0;
}</pre>
</body>
</html>
