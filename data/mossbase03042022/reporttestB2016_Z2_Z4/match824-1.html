<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6507.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5397.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

typedef std::vector&lt;std::string&gt; VekString;

void OslobodiMemoriju(char **pok, int vel = 0) {
	if(pok == nullptr) return;
	for(int i=0; i&lt;vel; i++)
		delete[] pok[i];
	delete[] pok;
	pok = nullptr;
}

int PotencijalniKrivci(char **&amp;ref, VekString mat) {
	char **pok(nullptr);
	try {
		pok = new char *[mat.size()];
		for(int i=0; i&lt;mat.size(); i++) 
			pok[i] = nullptr;
<a name="0"></a><font color="#FF0000"><a href="match824-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		for(int i=0; i&lt;mat.size(); i++) {
			pok[i] = new char[mat[i].size()+1];
			for(int j=0; j&lt;mat[i].size(); j++)
</font>				pok[i][j] = mat[i][j];
			pok[i][mat[i].size()] = '\0';
			ref = pok;
		}
	}
	catch(...) {
		OslobodiMemoriju(pok, mat.size());
		throw;
	}
	return mat.size();
}

int OdbaciOptuzbu(char **&amp;ref, int &amp;vel, std::string s) {
	char **pok(ref), **spasko(nullptr);
	bool a(true);
	int indeks(0);
	for(int i=0; i&lt;vel; i++) {
		if(s == std::string(pok[i])) {
			a = false; 
			indeks = i;
			break;
		}
	}
	if(a) throw std::domain_error("Osoba sa imenom " + s + " nije bila optuzena");
	delete[] pok[indeks];
	pok[indeks] = nullptr;
	int br(0);
	for(int i=0; i&lt;vel; i++)
		if(pok[i] == nullptr) br++;
	if(br &gt; 10) {
		spasko = new char*[vel-br];
<a name="2"></a><font color="#0000FF"><a href="match824-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		for(int i=0; i&lt;vel-br; i++)
			spasko[i] = nullptr;
		try {
			int k(0);
			for(int i=0; i&lt;vel; i++) 
				if(pok[i] != nullptr) {
</font>					spasko[k] = pok[i];
					k++;
				}
			ref = spasko;
			for(int i=0; i&lt;vel; i++)
				pok[i] = nullptr;
			OslobodiMemoriju(pok, vel);	
			vel -= br;
		}
		catch(...) {
			for(int i=0; i&lt;vel; i++)
				spasko[i] = nullptr;
			delete[] spasko;
		}
	}
	return vel;
}

int DodajOptuzbu(char **&amp;ref, int &amp;vel, std::string s) {
	char **pok(ref), **spasko(nullptr);
	if(s.size() == 0) return vel;
	char *novi(nullptr);
	bool a(true);
	try {
		novi = new char[s.size()+1];
		for(int i=0; i&lt;s.size(); i++) 
			novi[i] = s[i];
		novi[s.size()] = '\0';
		for(int i=0; i&lt;vel; i++) 
			if(pok[i] == nullptr) {
				pok[i] = novi;
				a = false;
				break;
			}
		if(a) {
<a name="1"></a><font color="#00FF00"><a href="match824-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

			spasko = new char*[vel+1];
			for(int i=0; i&lt;vel+1; i++)
				spasko[i] = nullptr;
			try {
				for(int i=0; i&lt;vel; i++) 
</font>					spasko[i] = pok[i];
				spasko[vel] = novi;
				novi = nullptr;
				ref = spasko;
				for(int i=0; i&lt;vel; i++)
					pok[i] = nullptr;
				OslobodiMemoriju(pok, vel);
				vel++;
			}
			catch(...) {
				for(int i=0; i&lt;vel; i++)
					spasko[i] = nullptr;
				delete[] spasko;
				throw;
			}
		}
	}
	catch(...) {
		delete[] novi;
<a name="3"></a><font color="#00FFFF"><a href="match824-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

		throw;
	}
	return vel;
}

void IzlistajOptuzbu(char **pok, int vel) {
	for(int i=0; i&lt;vel; i++) 
		if(pok[i] != nullptr) {
</font>			std::cout &lt;&lt; pok[i];
			std::cout &lt;&lt; std::endl;
		}
}

int main () {
	int vel;
	char **pok(nullptr);
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	std::cin &gt;&gt; vel;
	VekString popis;
	std::cin.ignore(1000, '\n');
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	for(int i=0; i&lt;vel; i++) {
		std::string temp;
		std::getline(std::cin, temp);
		popis.push_back(temp);
	}
	try {
		vel = PotencijalniKrivci(pok, popis);
		for(;;) {
			int komanda;
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog " &lt;&lt; "3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
			std::cin &gt;&gt; komanda;
			std::cin.ignore(1000, '\n');
			if(komanda == 0) break;
<a name="4"></a><font color="#FF00FF"><a href="match824-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

			else if(komanda == 1)  {
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::string ime;
				std::getline(std::cin, ime);
				try {
</font>					vel = DodajOptuzbu(pok, vel, ime);
				}
				catch(...) {
					throw;
				}
			}
			else if(komanda == 2) {
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
				std::string ime;
				std::getline(std::cin, ime);
				try {
					vel = OdbaciOptuzbu(pok, vel, ime);
				}
				catch(std::domain_error e) {
					std::cout &lt;&lt; e.what() &lt;&lt; std::endl;	
					throw;
				}
			}
			else if(komanda == 3) IzlistajOptuzbu(pok, vel);
		}
		OslobodiMemoriju(pok, vel);
	}
	catch(...) {
		OslobodiMemoriju(pok, vel);
	}
	return 0;
}</pre>
</body>
</html>
