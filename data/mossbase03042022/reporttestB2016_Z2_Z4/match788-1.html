<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3009.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5897.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match788-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

void Brisi(char **mat, int broj) {
    for(int i=0; i&lt;broj; i++) delete[] mat[i];
    delete[] mat;
}

int PotencijalniKrivci(char **&amp;dabl_pok, std::vector&lt;std::string&gt; spisak) {
</font>    
    int broj_alociranih(0);
    
    try {
        dabl_pok = new char *[spisak.size()];
        for(int i=0; i&lt;spisak.size(); i++) dabl_pok[i]=nullptr;
        
        try {
            for(int i=0; i&lt;spisak.size(); i++) {
                dabl_pok[i]=new char[spisak[i].size()+1];
                broj_alociranih++;
            }
            
            for(int i=0; i&lt;broj_alociranih; i++) {
                for(int j=0; j&lt;spisak[i].size(); j++) {
                    dabl_pok[i][j]=spisak[i][j];
                }
                dabl_pok[i][spisak[i].size()]='\0';
            }
        }
        catch(...) {
            Brisi(dabl_pok, spisak.size());
            throw;
        }
    }
    catch(...) { 
        delete[] dabl_pok; 
        throw; }
        
    
    return broj_alociranih;
}

int OdbaciOptuzbu(char **&amp;dabl_pok, int vel, std::string ime) {
    int vel_niza(vel);
    
   bool ima_optuzenog(false);
   
   //spremanje u pomocni string imena da bi se poredilo
    for(int i=0; i&lt;vel; i++) {
        std::string pomocni_string;
        
        for(int j=0; j&lt;ime.length(); j++) {
            pomocni_string.push_back(dabl_pok[i][j]);
            if(dabl_pok[i][j]=='\0') {
                pomocni_string.resize(pomocni_string.length()-1); 
                break; 
            }
        }
        
        //poredjenje
            if(pomocni_string==ime) {
            
            delete[] dabl_pok[i];
            dabl_pok[i]=nullptr;
            
            ima_optuzenog=true;
            
            int broj_nule(0);
            
            for(int k=0; k&lt;vel; k++) {
                if(dabl_pok[k]==nullptr) broj_nule++;
            }
            
            if(broj_nule&gt;=10) {
                try{
                    char **novi = new char *[vel-broj_nule];
                
                    for(int i=0; i&lt;vel-broj_nule; i++) novi[i]=nullptr;
<a name="1"></a><font color="#00FF00"><a href="match788-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

                        int k(0);
                        for(int i=0; i&lt;vel; i++) {
                            if(dabl_pok[i]!=nullptr) { novi[k]=dabl_pok[i]; k++; }
                        }
                        
                    delete[] dabl_pok;
                    
                    dabl_pok=novi; 
</font>                        
                    novi=nullptr;
                    vel_niza=vel-broj_nule;
                } catch(...) {}        
            }
        }
    }
    
    if(ima_optuzenog==false) { std::string s="Osoba sa imenom " + ime + " nije bila optuzena"; throw std::domain_error(s); }
    
    return vel_niza;
}

int DodajOptuzbu(char **&amp;dabl_pok, int vel, std::string ime) {
    
    char *niz = nullptr;
    char **novi = nullptr;
    try{
        niz = new char [ime.size()+1];
    } catch(...) { throw; }
    
        for(int i=0; i&lt;ime.size(); i++) niz[i]=ime[i];
        niz[ime.size()]='\0';
        
        
        for(int i=0; i&lt;vel; i++) {
            if(dabl_pok[i]==nullptr) {
                for(int j=0; j&lt;ime.size()+1; j++) 
                dabl_pok[i]=niz;
                return vel;
            }
        }
        
        
            try{
                vel++;
                novi=new char *[vel];
                for(int i=0; i&lt;vel; i++) novi[i]=nullptr;
                
                
                    for(int i=0; i&lt;vel-1; i++) {
                        novi[i]=dabl_pok[i];
                        
                    }
                    
                    novi[vel-1]=niz;
                    
                    delete[] dabl_pok;
                    
                    dabl_pok=novi;
                    
            }
            catch(...) { delete[] niz; throw; }
        
    return vel;
}

void IzlistajOptuzbu(char **pok_na_pok, int vel) {
    
    for(int i=0; i&lt;vel; i++) {
        if(pok_na_pok[i]!=nullptr) std::cout &lt;&lt; pok_na_pok[i] &lt;&lt; std::endl; 
    }
}

int main ()
{ 

    std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
    int vel_niza;
    std::cin &gt;&gt; vel_niza;
    std::vector&lt;std::string&gt; spisak;
    int n(vel_niza);
    if(n&gt;0) {
    std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
    
        std::cin.clear(); std::cin.ignore(1000000, '\n');
    
        while(n) {
            std::string unos;
            getline(std::cin, unos);
            spisak.push_back(unos);
            n--;
        }
    }
   
   try{
   char **niz;
   
    vel_niza = PotencijalniKrivci(niz, spisak);
    while(5) {
        std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
        std::cin &gt;&gt; n;
    
        if(n==0) { 
            Brisi(niz, vel_niza);
            return 0; 
        }
<a name="2"></a><font color="#0000FF"><a href="match788-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        else if(n==1) {
            
            std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
            std::string ime;
            std::cin.clear(); std::cin.ignore(100000, '\n');
</font>            getline(std::cin, ime);
            try {
                vel_niza = DodajOptuzbu(niz, vel_niza, ime); 
            } catch(...) {}
        }
<a name="3"></a><font color="#00FFFF"><a href="match788-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        else if(n==2) { 
            std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
            std::string ime;
            std::cin.clear(); std::cin.ignore(100000, '\n');
</font>            getline(std::cin, ime);
           try {
            vel_niza = OdbaciOptuzbu(niz, vel_niza, ime);
           } catch(std::domain_error e) { std::cout &lt;&lt; e.what(); }
        
        }
        else if(n==3) { 
               IzlistajOptuzbu(niz, vel_niza);
         }
    }
    } catch(...) { }
    
    
    //Brisi(niz, vel_niza+1);
	return 0;



}</pre>
</body>
</html>
