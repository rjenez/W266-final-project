<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3119.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3119.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci (char **&amp;a, std::vector&lt;std::string&gt; v){
	try{
		int br(0);
<a name="2"></a><font color="#0000FF"><a href="match564-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		a=new char*[v.size()];
		for(int i=0; i&lt;v.size(); i++) a[i]=nullptr;
		try{
			for(int i=0; i&lt;v.size(); i++){ 
</font>				a[i]=new char[v[i].size()+1];
				br++;
<a name="3"></a><font color="#00FFFF"><a href="match564-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

				std::strcpy(a[i], v[i].c_str());
			}
		}
		catch(...){
			for(int i=0; i&lt;v.size(); i++) delete[] a[i];
			delete[] a;
</font>			throw;
		}
		
		return br;
	}
	catch(...){throw;}
}



int OdbaciOptuzbu( char **&amp;a, int vel, std::string s){
	bool postoji(false);
	for(int i=0; i&lt;vel; i++){
		int isti(0);
		isti=std::strcmp(a[i], s.c_str());
		if(isti==0) {
			delete [] a[i];
			a[i]=nullptr;
			postoji=true;
		}
	}
	if(postoji==false) throw std::domain_error ("Osoba sa imenom " + s +" nije bila optuzena"); /////////////
	
	//Provjera koliko ima nullptr pokazivaca
	int br(0);
	for(int i=0; i&lt;vel; i++) if(a[i]==nullptr) br++;
	if(br&gt;10){
		int broj_imena(0);
		for(int j=0; j&lt;vel; j++) if(a[j]!=nullptr) broj_imena++;
		try{
			char **usteda(new char*[broj_imena]);
			for(int k=0; k&lt;broj_imena; k++) usteda[k]=nullptr;
			try{
				int m(0);
				while(m&lt;broj_imena){
<a name="1"></a><font color="#00FF00"><a href="match564-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

					for(int z=0; z&lt;vel; z++){
						if(a[z]!=nullptr){
							usteda[m]=new char[strlen(a[z])+1];
</font>							std::strcpy(usteda[m], a[z]);
							m++;
						}
					}
				}
				
				//Ako je uspjelo kopiranje u novi dinamicki alocirani niz, brisemo stari
				for(int i=0; i&lt;vel; i++) delete[] a[i];
				delete[] a;
				a=usteda;
				
				return broj_imena;
			}catch(...){
				//Ne treba da se baci izuzetak
<a name="4"></a><font color="#FF00FF"><a href="match564-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

				for(int l=0; l&lt;broj_imena; l++) delete[] usteda[l];
				delete[] usteda;
			}
		}catch(...){ /*Ne treba da se baci izuzetak*/ }
	}
	
	return vel;
</font>}




int DodajOptuzbu( char **&amp;a, int vel, std::string s){
	try{
		char *pok(new char [s.size()+1]);
		std::strcpy(pok, s.c_str());
		bool postoji(false);
		for(int i=0; i&lt;vel; i++){
			if(a[i]==nullptr){
				a[i]=pok;
				postoji=true;
				break;
			}
		}
		if(postoji==false){
			try{
				char** nova_alokacija(new char*[vel+1]);
				for(int i=0; i&lt;vel+1; i++) nova_alokacija[i]=nullptr;
				try{
					for(int j=0; j&lt;vel; j++){
						nova_alokacija[j]=new char[strlen(a[j])+1];
<a name="0"></a><font color="#FF0000"><a href="match564-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

						std::strcpy(nova_alokacija[j], a[j]);
					}
					nova_alokacija[vel]=pok;
					//Brisanje starog niza pokazivaca
					for(int i=0; i&lt;vel; i++) delete[] a[i];
					delete[] a;
					
					a=nova_alokacija;
</font>					return vel+1;
				}catch(...){
					for(int i=0; i&lt;vel+1; i++) delete[] nova_alokacija[i];
					delete[] nova_alokacija;
					throw;
				}
			}catch(...){ throw; }
		}
		
		return vel;
	}catch(...){ throw; }
	
}




void IzlistajOptuzbu(char** a, int vel){
	int i=0; 
	while(i&lt;vel){
		if(a[i]==nullptr &amp;&amp; i&lt;vel-1) i++;
		else{
			if(i==vel-1) std::cout&lt;&lt;a[i];
			else std::cout&lt;&lt;a[i]&lt;&lt;std::endl;
			i++;
		}
	}
}




int main (){
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	int n;
	std::cin&gt;&gt;n;
	std::vector&lt;std::string&gt; v(n);
	std::cout&lt;&lt;std::endl&lt;&lt;"Unesite potencijalne krivce: ";
	std::cin.ignore(1000, '\n');
	for(int i=0; i&lt;n; i++){
		std::string s;
		std::getline(std::cin, s);
		v[i]=s;
	}
	//for(int i=0; i&lt;n; i++) std::cout&lt;&lt;v[i]&lt;&lt;" ";
	char** a;
	try{
		int vel_1 (PotencijalniKrivci(a, v));
		
		for(;;){
			std::cout&lt;&lt;std::endl&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
			int broj;
			std::cin&gt;&gt;broj;
			if(broj==1){
				std::cout&lt;&lt;"Unesite ime novog optuzenog: ";
				std::string s;
				std::cin.ignore(1000, '\n');
				std::getline(std::cin, s);
				try{
					int vel_2(DodajOptuzbu(a, vel_1, s));
					vel_1=vel_2;
				}catch(...){ std::cout&lt;&lt;"Nedovoljno memorije"; }
			}
			else if(broj==2){
				std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: ";
				std::cin.ignore(1000, '\n');
				std::string s;
				std::getline(std::cin, s);
				int vel_3 (OdbaciOptuzbu(a, vel_1, s));
				vel_1=vel_3;
			}
			else if(broj==3){
				IzlistajOptuzbu(a, vel_1);
			}
			else if(broj==0){ 
				for(int i=0; i&lt;vel_1; i++) delete[] a[i];
				delete[] a;
				return 0;
			}
	}
	}
	catch(std::domain_error a){std::cout&lt;&lt;a.what();}
	catch(...){ std::cout&lt;&lt;"Nedovoljno memorije"; }
	
	
	
	return 0;
}</pre>
</body>
</html>
