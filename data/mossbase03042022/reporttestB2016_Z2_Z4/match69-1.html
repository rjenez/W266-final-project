<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5939.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9589.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;


<a name="0"></a><font color="#FF0000"><a href="match69-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int PotencijalniKrivci (char **&amp; matrica, std::vector&lt;std::string&gt; imena) {
	try {
		matrica=nullptr;
		matrica=new char*[imena.size()];
	}
	catch (std::bad_alloc) {
		delete[] matrica;
		throw;
	}
	try {
		for(int i=0; i&lt;imena.size(); i++) {
			matrica[i]=new char[imena[i].size()+1];
			std::strcpy(matrica[i],imena[i].c_str());
		}
		return imena.size();
}
	catch (std::bad_alloc) {
		for(int i=0; i&lt;sizeof(matrica); i++) {
			delete[] matrica[i];
		}
		delete[] matrica;
		throw;
	}
}

int OdbaciOptuzbu (char **&amp; matrica, int n, std::string ime) {
	int ima(0);
	for (int i=0; i&lt;n; i++) {
		if(std::strcmp(matrica[i], ime.c_str())==0) {
			delete[] matrica[i];
			matrica[i]=nullptr;
			ima++;
		}
	}
	
	if(!ima) throw std::domain_error ("Osoba sa imenom "+ime+" nije bila optuzena");
	else if (ima&gt;10) {
		char ** novamat(nullptr);
		int vel=n-ima;
		try{
			novamat=new char *[vel];
		}
		catch (std::bad_alloc) {
			delete[] novamat;
		}
		try {
			int j(0);
			for (int i=0; i&lt;n; i++) {
				if (matrica[i] != nullptr) {
					novamat[j]= new char [sizeof(matrica[i]+1)];
					for (int k=0; k&lt;=sizeof(matrica[i]); k++) {
						novamat[j][k]=matrica[i][k];
					}
					j++;
				}
			}
			for (int i=0; i&lt;n; i++) {
				delete[] matrica[i];
			}
			delete[] matrica;
			matrica=novamat;
			return vel;
		}
		catch (std::bad_alloc) {
			for (int i=0; i&lt;vel; i++) {
				delete[] novamat[i];
			}
			delete[] novamat;
		}
	}
	return n;
}

int DodajOptuzbu (char **&amp;matrica, int n, std::string ime) {
	int ubaceno(0);
	char *ime_niz(nullptr);
	ime_niz=new char[ime.length()+1];
	std::strcpy (ime_niz, ime.c_str());
	for (int i=0; i&lt;n; i++) {
		if (matrica[i] != nullptr) continue;
		else {
			matrica[i]=ime_niz;
			ubaceno++;
		}
		if (ubaceno) break;
	}
	if (!ubaceno) {
		int vel=n+1;
		char ** novamat(nullptr);
		try {
			novamat=new char*[vel];
		}
		catch (std::bad_alloc) {
			delete[] novamat;
			throw;
		}
		try {
			for (int i=0; i&lt;vel; i++) {
				if (i==vel-1) {
					novamat[i]=ime_niz;
					break;
				}
				novamat[i]= new char [sizeof(matrica[i])+1];
				std::strcpy(novamat[i], matrica[i]);
			}
			for (int i=0; i&lt;n; i++) {
				delete[] matrica[i];
			}
			delete[] matrica;
			matrica=novamat;
			return vel;
		}
		catch (std::bad_alloc) {
			for (int i=0; i&lt;vel; i++) {
				delete[] novamat[i];
			}
			delete[] novamat;
			throw;
		}
	}
	return n;
}

void IzlistajOptuzbu (char **matrica, int n) {
	for (int i=0; i&lt;n; i++) {
		std::cout &lt;&lt; std::endl;
		if (matrica[i] != nullptr) {
			char *p=matrica[i];
			while (*p != '\0')
			std::cout &lt;&lt; *p++;
		}
	}
}
int main ()
{
	int n;
	char **matrica;
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti?";
	std::cin &gt;&gt; n;
	std::vector &lt;std::string&gt; imena(n);
	std::cin.ignore(100000, '\n');
	std::cout &lt;&lt; "\nUnesite potencijalne krivce: ";
	for (int i=0; i&lt;n; i++) {
		std::cin &gt;&gt; imena[i];
	}
	try {
		int unos;
		std::string ime;
		n=PotencijalniKrivci(matrica, imena);
		while (1) {
			std::cout &lt;&lt; "\nOdaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj:";
			std::cin &gt;&gt; unos;
			if (!unos) break;
			else if (unos==1) {
				std::cin.ignore (100000000, '\n');
				std::cout &lt;&lt; "\nUnesite ime novog optuzenog: ";
				std::getline (std::cin, ime);
				n=DodajOptuzbu(matrica, n, ime);
			}
			else if (unos==2) {
				std::cin.ignore(10000000, '\n');
				std::cout &lt;&lt; "\nUnesite ime koje zelite izbaciti: ";
				std::getline (std::cin, ime);
				n=OdbaciOptuzbu(matrica, n, ime);
			}
			else {
				IzlistajOptuzbu(matrica, n);
			}
		}
		for (int i=0; i&lt;n; i++) {
			delete[] matrica[i];
		}
		delete[] matrica;
	}
	catch (std::bad_alloc) {
		for (int i=0; i&lt;n; i++) {
			delete[] matrica[i];
		}
		delete[] matrica;
	}
	catch (std::domain_error izuzetak) {
		for (int i=0; i&lt;n; i++) {
		delete[] matrica[i];
		}
	delete[] matrica;
	std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>	}
	return 0;
}</pre>
</body>
</html>
