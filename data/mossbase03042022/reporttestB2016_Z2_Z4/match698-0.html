<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2142.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2142.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

<a name="1"></a><font color="#00FF00"><a href="match698-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

using std::cout;
using std::cin;
using std::endl;
using std::vector;
using std::string;


int PotencijalniKrivci(char ** &amp;a, vector&lt;string&gt; potencijalni_prodavaci)
</font>{
	char ** b(new char * [potencijalni_prodavaci.size()]);
	int brojac(0);
	for(int i=0; i&lt;potencijalni_prodavaci.size(); i++)
		b[i]=nullptr;
	try
	{
		for(int i=0; i&lt;potencijalni_prodavaci.size(); i++)
		{
			b[i]=new char [potencijalni_prodavaci[i].size()+1];
			brojac++;
		}
	}
<a name="0"></a><font color="#FF0000"><a href="match698-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

	catch(std::bad_alloc)
	{
		for(int i=0; i&lt;potencijalni_prodavaci.size(); i++)
			delete [] b[i];
		delete [] b;
		throw;
	}
	for(int i=0; i&lt;potencijalni_prodavaci.size(); i++)
		for(int j=0; j&lt;potencijalni_prodavaci[i].size(); j++)
			strcpy(b[i], potencijalni_prodavaci[i].c_str());
</font>			
	a=b;
	
	return brojac;
}

int OdbaciOptuzbu(char ** &amp;optuzeni, int broj_optuzenih, string ime)
{
	bool postoji(false);
	for(int i=0; i&lt;broj_optuzenih; i++)
	{
		if(strcmp(optuzeni[i], ime.c_str())==0)
		{
			delete [] optuzeni[i];
			optuzeni[i]=nullptr;
			postoji=true;
		}
	}
	if(!postoji)throw std::domain_error("Osoba sa imenom "+ime+" nije bila optuzena");
	
	int br_nul_pok(0);
	for(int i=0; i&lt;broj_optuzenih; i++)
		if(optuzeni[i]==nullptr)br_nul_pok++;
		
	if(br_nul_pok&gt;10)
	{
		try
		{
			char **privremeni(new char *[broj_optuzenih-br_nul_pok]);
			int j=0;
			for(int i=0; i&lt;broj_optuzenih; i++)
				if(optuzeni[i]!=nullptr)
				{
					privremeni[j]=optuzeni[i];
					j++;
				}
			for(int i=0; i&lt;broj_optuzenih; i++)
				delete [] optuzeni[i];
			delete [] optuzeni;
			optuzeni=privremeni;
			broj_optuzenih-=br_nul_pok;
		}
		catch(...){}
	}
	
	return broj_optuzenih;
}

int DodajOptuzbu(char ** &amp;optuzeni, int broj_optuzenih, string ime)
{
	char *pomocni(new char [ime.size()+1]);
	strcpy(pomocni, ime.c_str());
	bool ima_nul_pok(false);
<a name="2"></a><font color="#0000FF"><a href="match698-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

	for(int i=0; i&lt;broj_optuzenih; i++)
		if(optuzeni[i]==nullptr)
		{
			optuzeni[i]=pomocni;
			ima_nul_pok=true;
			break;
		}
		
	if(!ima_nul_pok)
	{
		char **privremeni(new char *[broj_optuzenih+1]);
</font><a name="3"></a><font color="#00FFFF"><a href="match698-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

		for(int i=0; i&lt;broj_optuzenih; i++)
			privremeni[i]=optuzeni[i];
		privremeni[broj_optuzenih]=pomocni;
</font>		for(int i=0; i&lt;broj_optuzenih; i++)
			delete [] optuzeni[i];
		delete [] optuzeni;
		optuzeni=privremeni;
		broj_optuzenih-=1;
	}
	return broj_optuzenih;
}

void IzlistajOptuzbu(char **optuzeni, int broj_optuzenih)
{
	for(int i=0; i&lt;broj_optuzenih; i++)
		if(optuzeni[i]!=nullptr)
			cout&lt;&lt;optuzeni[i]&lt;&lt;endl;
}

int main ()
{
	int broj_optuzenih;
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	cin&gt;&gt;broj_optuzenih;
	vector&lt;string&gt; imena(broj_optuzenih);
	cout&lt;&lt;"Unesite potencijalne krivce: ";
	cin.ignore(10000, '\n');
	for(int i=0; i&lt;imena.size(); i++)
	{
		std::getline(cin, imena[i]);
		cin.ignore(10000, '\n');
	}
	char ** optuzeni;
	PotencijalniKrivci(optuzeni, imena);
	int n;
	for(;;)
	{
		cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog, 3 za izlistavanje optuzenih, 0 za kraj: ";
		cin&gt;&gt;n;
		cin.ignore(10000, '\n');
		if(n==0)break;
		else if(n==1)
		{
			string ime;
			cout&lt;&lt;"Unesite ime novog optuzenog";
			std::getline(cin, ime);
			DodajOptuzbu(optuzeni, broj_optuzenih, ime);
			broj_optuzenih++;
		}
		else if(n==2)
		{
			string ime;
			cout&lt;&lt;"Unesite ime koje zelite izbaciti: ";
			std::getline(cin, ime);
			OdbaciOptuzbu(optuzeni, broj_optuzenih, ime);
			broj_optuzenih--;
		}
		else if(n==3)
		{
			IzlistajOptuzbu(optuzeni, broj_optuzenih);
		}
	}
	return 0;
}</pre>
</body>
</html>
