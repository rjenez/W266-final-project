<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4736.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4736.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;


using namespace std;
/* kontinualnom alokacijom
int PotencijalniKrivci(char **&amp; krivciKopija, std::vector&lt;string&gt; krivciOrginal)
{
	try {
		krivciKopija = new char*[krivciOrginal.size()];
		
		brojZnakova=0;
		
		for (int i = 0; i &lt; krivciOrginal.size(); i++) {
			brojZnakova+=krivciOrginal[i].size()+1;
		}
		
		try {
			krivciKopija[0] = new char[brojZnakova];
			
			for (int i = 1; i &lt; krivciKopija.size(); i++) {
				krivciKopija[i] = krivciKopija[i-1]+krivciOrginal[i-1].size()+1;
			}
			
			
			for (int i = 0; i &lt; krivciOrginal.size(); i++) {
				for (int j = 0; j &lt; krivciOrginal[i].size(); j++) {
					krivciKopija[i][j]=krivciOrginal[i][j];
				}
				krivciKopija[i][j]='\0';
			}
			
			return 
			
		}
		catch (bad_alloc) {
			delete[] krivciKopija;
		}
		
	
	}
	catch (bad_alloc) {
		throw;
	}
	
	
}

*/


/* fragmentirana alokacija */

int PotencijalniKrivci(char **&amp; krivciKopija, std::vector&lt;string&gt; krivciOrginal){
	
	try {
<a name="0"></a><font color="#FF0000"><a href="match883-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

		krivciKopija = new char*[krivciOrginal.size()];
		
		for (int i = 0; i &lt; krivciOrginal.size(); i++) {
			krivciKopija[i]=nullptr;
		}
		
		try {
			
			for (int i = 0; i &lt; krivciOrginal.size(); i++) {
				krivciKopija[i] = new char[krivciOrginal[i].size()+1];
			}
			
			for (int i = 0; i &lt; krivciOrginal.size(); i++) {
</font>				int j;
				for ( j = 0; j &lt; krivciOrginal[i].size(); j++) {
					
					krivciKopija[i][j] = krivciOrginal[i][j];
				}
				krivciKopija[i][j]='\0';
			}
			
		}
		catch (bad_alloc) {
			for (int i = 0; i &lt; krivciOrginal.size(); i++) {
				delete [] krivciKopija[i];
			}
			delete [] krivciKopija;
		}
	}
	catch (bad_alloc) {
		throw;
	}
	
	
	return krivciOrginal.size();
}


int OdbaciOptuzbu(char**&amp;potencijalniKrivci, int velicina, string nijeKriv){
	
	
	bool postoji=false;
	int brojNullPtr=0;
	for (int i = 0; i &lt; velicina; i++) {
		
		if(potencijalniKrivci[i]!=nullptr){
			if(strcmp(potencijalniKrivci[i],nijeKriv.c_str())==0){
				delete[]potencijalniKrivci[i];
				potencijalniKrivci[i]=nullptr;
				
				postoji=true;
				brojNullPtr++;
			}
		}
		else{
			brojNullPtr++;
		}
	}
	
	if(!postoji){
		throw domain_error("Osoba sa imenom "+nijeKriv+" nije bila optuzena");
	}
	
	if(brojNullPtr&gt;10){
		
		int brojKorisnihPokazivaca = velicina - brojNullPtr;
		char**pomocni;
		try{
			pomocni= new char*[brojKorisnihPokazivaca];
			int j=0;
			for (int i = 0; i &lt; velicina; i++) {
				if(potencijalniKrivci[i]!=nullptr){
					pomocni[j] = potencijalniKrivci[i];
					j++;
				}
			}
		}
		catch(bad_alloc){
			return velicina;
		}
		
		delete[] potencijalniKrivci;
		potencijalniKrivci = pomocni;
		velicina-=brojNullPtr;	
	}
	

	return velicina;
}





int DodajOptuzbu(char**&amp;potencijalniKrivci, int velicina, string krivac){
	char* pomocniKrivac = new char[krivac.size()+1];
	
	strcpy(pomocniKrivac,krivac.c_str());
	
	bool postojiSlobodnoMjesto=false;
<a name="2"></a><font color="#0000FF"><a href="match883-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

	for (int i = 0; i &lt; velicina; i++) {
		if(potencijalniKrivci[i]==nullptr){
			potencijalniKrivci[i]=pomocniKrivac;
			postojiSlobodnoMjesto=true;
			break;
		}
	}
	
	
	if(!postojiSlobodnoMjesto){
		char**pomocni ;
</font>		
		try {
			pomocni = new char*[velicina+1];
			
			for (int i = 0; i &lt; velicina; i++) {
				pomocni[i]=potencijalniKrivci[i];
			}
			
			pomocni[velicina]=pomocniKrivac;
			
			delete[]potencijalniKrivci;
			potencijalniKrivci = pomocni;
			
			velicina++;
		}
		catch (bad_alloc) {
			return velicina;
		}
		
	}
	return velicina;
}
	


void IzlistajOptuzbu(char** potencijalniKrivci,int velicina){
	for (int i = 0; i &lt; velicina; i++) {
		if(potencijalniKrivci[i]!=nullptr){
			cout&lt;&lt;potencijalniKrivci[i]&lt;&lt;endl;
		}
	}
}

int main ()
{
	char**pKrivci=nullptr;
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;endl;
	int brojKrivaca;
	cin&gt;&gt;brojKrivaca;
	
	cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;endl;
	
	std::vector&lt;string&gt;imenaKrivaca(brojKrivaca);
	cin.ignore();
	for (int i = 0; i &lt; brojKrivaca; i++) {
		getline(cin,imenaKrivaca[i]);
	}
	
	try {
		PotencijalniKrivci(pKrivci,imenaKrivaca);
		int izbor;
		do{
			
			cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;endl;
			cin&gt;&gt;izbor;
			cin.ignore();
			if(izbor==1){
				string noviKrivac;
				cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;endl;
				getline(cin,noviKrivac);
				brojKrivaca = DodajOptuzbu(pKrivci,brojKrivaca,noviKrivac);
			}
			else if(izbor==2){
				cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;endl;
				string noviOslobodjeni;
<a name="1"></a><font color="#00FF00"><a href="match883-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

				getline(cin,noviOslobodjeni);
				brojKrivaca = OdbaciOptuzbu(pKrivci,brojKrivaca,noviOslobodjeni);
			}
			else if(izbor==3){
				IzlistajOptuzbu(pKrivci,brojKrivaca);
			}
			
			
			
		}while(izbor!=0);
		
		for (int i = 0; i &lt; brojKrivaca; i++) {
			delete[] pKrivci[i];
		}
		delete[] pKrivci;
</font>	}
	catch (bad_alloc) {
		std::cout &lt;&lt; "Nema memorije"&lt;&lt; std::endl;
	}
	

	
	
	return 0;
}</pre>
</body>
</html>
