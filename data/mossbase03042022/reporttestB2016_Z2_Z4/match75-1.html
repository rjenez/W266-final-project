<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8521.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3673.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;

<a name="0"></a><font color="#FF0000"><a href="match75-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using namespace std;

int PotencijalniKrivci(char **&amp;p,vector&lt;string&gt;vs){
	int br_alociranih(0);
	try{
		p=new char *[vs.size()];
		for(int i=0;i&lt;vs.size();i++){
			p[i]=nullptr;
		}
		try{
			for(int i=0;i&lt;vs.size();i++){
				p[i]=new char[vs[i].length()+1];
				strcpy(p[i],vs[i].c_str());br_alociranih++;
			}
		}
		catch(...){
			for(int i=0;i&lt;br_alociranih;i++)delete[] p[i];
			delete[] p;
			throw;
		}
	}
	catch(...){
		throw bad_alloc();
	}
	return br_alociranih;
	
}

int OdbaciOptuzbu(char **&amp;p,int vel_pok,string s){
	int vrati_vel(vel_pok);
	bool a(false);
	for(int i=0;i&lt;vel_pok;i++){
		if(p[i]==nullptr)continue;
		if(strcmp(p[i],s.c_str())==0){a=true;break;}
	}
	if(a==false){string baci="Osoba sa imenom "+s+" nije bila optuzena";throw domain_error(baci);}
	else{
		for(int i=0;i&lt;vel_pok;i++){
			if(p[i]==nullptr)continue;
			if(strcmp(p[i],s.c_str())==0){delete[] p[i];p[i]=nullptr;}
		}
		int brojac(0);
		for(int i=0;i&lt;vel_pok;i++){
			if(p[i]==nullptr)brojac++;
		}
		if(brojac&gt;10){
			int stvarna_vel(vel_pok-brojac);
			vrati_vel=stvarna_vel;int pomoc(0);
			char**novi_niz_pok=new char *[stvarna_vel];
			for(int i=0;i&lt;vel_pok;i++){
				if(p[i]==nullptr)continue;
				else{
					strcpy(novi_niz_pok[pomoc],p[i]);pomoc++;
				}
				
			}
				for(int i=0;i&lt;vel_pok;i++)delete[] p[i];
				delete[] p;
				p=novi_niz_pok;
			}
		
	}
	return vrati_vel;
}

int DodajOptuzbu(char**&amp;p,int vel_pok,string s){
	int vrati_vel(vel_pok);
	try{
		char *novi_niz=new char [s.length()+1];
		strcpy(novi_niz,s.c_str());
		bool a(false);
		for(int i=0;i&lt;vel_pok;i++){
			if(p[i]==nullptr){p[i]=novi_niz;a=true;break;}
		}
		if(a==false){
			try{
				char **novi_niz_pok=new char*[vel_pok+1];
				for(int i=0;i&lt;vel_pok+1;i++)novi_niz_pok[i]=nullptr;
			try{
				vrati_vel=vel_pok+1;
				for(int i=0;i&lt;vel_pok;i++){
					char *h=p[i];int pom_broj(1);
					while(*h!='\0'){pom_broj++;h++;}
					novi_niz_pok[i]=new char[pom_broj];
					strcpy(novi_niz_pok[i],p[i]);
				}
				novi_niz_pok[vel_pok]=new char[s.length()+1];
				strcpy(novi_niz_pok[vel_pok],novi_niz);delete[] novi_niz;
				for(int i=0;i&lt;vel_pok;i++)delete[] p[i];
				delete[] p;
				p=novi_niz_pok;
			}
			catch(...){
				for(int i=0;i&lt;vel_pok+1;i++)delete[] novi_niz_pok[i];
				delete[] novi_niz_pok;
				throw;
			}
			}
			catch(...){
				delete[] novi_niz;
				throw;
			}
		}
	}
	catch(...){
		vrati_vel=vel_pok;
		throw bad_alloc();
	}
	return vrati_vel;
}

void IzlistajOptuzbu(char **p,int vel_pok){
	for(int i=0;i&lt;vel_pok;i++){
		if(p[i]==nullptr)continue;
		char *help=p[i];
		while(*help!='\0'){
			cout&lt;&lt;*help;
			help++;
		}
		cout&lt;&lt;endl;
	}
}

int main(){
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	int n;cin&gt;&gt;n;
	cout&lt;&lt;endl&lt;&lt;"Unesite potencijalne krivce: ";
	vector&lt;string&gt;vs;
	cin.ignore(1000,'\n');
	for(int i=0;i&lt;n;i++){
		string s;
		getline(cin,s);
		vs.push_back(s);
	}
	try{
		char **pot;
		int rez=PotencijalniKrivci(pot,vs);
		for(;;){
			cout&lt;&lt;endl&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
			int opcija;
			cin&gt;&gt;opcija;
			if(opcija==1){
				cout&lt;&lt;endl&lt;&lt;"Unesite ime novog optuzenog: ";
				cin.ignore(1000,'\n');
				string ime;
				getline(cin,ime);
				rez=DodajOptuzbu(pot,rez,ime);
			}
			if(opcija==2){
				cout&lt;&lt;endl&lt;&lt;"Unesite ime koje zelite izbaciti: ";
				cin.ignore(1000,'\n');
				string ime;
				getline(cin,ime);
				rez=OdbaciOptuzbu(pot,rez,ime);
			}
			if(opcija==3){
				cout&lt;&lt;endl;
				IzlistajOptuzbu(pot,rez);
			}
			if(opcija==0){
				for(int i=0;i&lt;rez;i++)delete[] pot[i];
				delete[] pot;
				break;
				
			}
		}
	}
	catch(domain_error e){
		cout&lt;&lt;e.what();
	}
	catch(bad_alloc){
		
	}
	catch(...){
</font>	}
	return 0;
}</pre>
</body>
</html>
