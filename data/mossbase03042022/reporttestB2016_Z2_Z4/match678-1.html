<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7977.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9716.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4

	NAPOMENA: i javni ATo-vi su dio postavke

	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;deque&gt;

int PotencijalniKrivci(char **&amp;c, std::vector&lt;std::string&gt; v)
{ int br=0;
	char **nizpok=nullptr;
	try {
		nizpok=nullptr;
<a name="0"></a><font color="#FF0000"><a href="match678-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

		nizpok=new char *[v.size()];
		for(int i=0; i&lt;v.size(); i++) nizpok[i]=nullptr;
			for(int i=0; i&lt;v.size(); i++) {
</font>				std::string s=v[i];
				nizpok[i]=new char[v[i].size()+1];
				for(int j=0; j&lt;v[i].size(); j++) nizpok[i][j]=s[j];
				nizpok[i][s.size()]='\0'; br++;
			} 

<a name="4"></a><font color="#FF00FF"><a href="match678-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

	} catch(std::bad_alloc) {
		for(int i=0; i&lt;v.size(); i++) delete[] nizpok[i];
		delete[] nizpok;
</font>		throw;
	}
	c=nizpok;
	return br;
}

int OdbaciOptuzbu(char **&amp;c, int n, std::string s)
{ bool a=false;
if(s.size()==0) return n;
/*	for(int i=0; i&lt;n; i++) { 
		for(int j=0; j&lt;s.size(); j++) {
	  if(j==s.size()) a=true; else if(s[j]==c[i][j]) continue; } }
		 // bilo prije: while(s[j]==c[i][j]) j++; */
		 for(int i=0; i&lt;n; i++) { if(c[i]==s) a=true; }
		 if(a==false) {
		throw std::domain_error ("Osoba sa imenom " + s + " nije bila optuzena");
	}

	/* NE VALJA: for(int i=0; i&lt;n; i++) {
		for(int j=0; j&lt;s.size();) {
			while(s[j]==c[i][j]) j++;
			if(j==s.size()) {
				delete[] c[i];
				c[i]=nullptr;
				n--;
			} else break;
		}
	} */
	
	for(int i=0; i&lt;n; i++) { if(c[i]==s) { delete[] c[i]; c[i]=nullptr; } }
	return n;
}

int DodajOptuzbu(char ** &amp;c, int n, std::string s) {
	if(s.size()==0) return n;
	char *novi=nullptr;
	try{ 
<a name="1"></a><font color="#00FF00"><a href="match678-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		novi=new char[s.size()+1];
		for(int i=0; i&lt;s.size(); i++) novi[i]=s[i];
		//bilo novi[s.size()+1]='\0';
		novi[s.size()]='\0';
</font><a name="3"></a><font color="#00FFFF"><a href="match678-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		for(int i=0; i&lt;n; i++) { if(c[i]==nullptr) { c[i]=novi;
		break; } if(i==n) { char **c2=nullptr;
</font>		try {
			for(int i=0; i&lt;n+1; i++) c2[i]=nullptr;
			for(int i=0; i&lt;n; i++) c2[i]=c[i];
			c2[n]=novi;
			novi=nullptr;
			for(int i=0; i&lt;n; i++) delete[] c[i];
			delete[] c;
			c=c2; n++; return n;
		} catch(std::bad_alloc) {
			for(int i=0; i&lt;n; i++) delete[] c2[i];
			//dodao delete[] c2; !!!
			delete[] c2;
		throw ("Error"); }
		}
	}
}
catch(std::bad_alloc) { delete[] novi; throw;  }
return n; }

void IzlistajOptuzbu(char **c, int n) {
	int i=0; while(i&lt;n) { if(c[i]!=nullptr) std::cout&lt;&lt;c[i]&lt;&lt;std::endl; i++; } 
}



int main ()
{   char **potencijalni;
<a name="2"></a><font color="#0000FF"><a href="match678-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int n; std::cin&gt;&gt;n; // broj potencijalnih krivaca=n 
	std::cin.ignore(1000, '\n');
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
</font>	std::vector&lt;std::string&gt; v;
	v.resize(n);
	for(int i=0; i&lt;v.size(); i++) {
		// bilo ovo: std::getline(std::cin, v[i]);
		std::cin&gt;&gt;v[i];
	}
	try { n=PotencijalniKrivci(potencijalni, v);
int x; for(;;) { 	
std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
 std::cin&gt;&gt;x;  std::cin.ignore(1000, '\n');
 if(x==0) break;
if(x==1) {  std::string dodaj; std::cout&lt;&lt;"Unesite ime novog optuzenog: ";
std::getline(std::cin, dodaj); std::cout&lt;&lt;std::endl; n=DodajOptuzbu(potencijalni, n ,dodaj); }
if(x==2) {  std::string odbaci; std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "; 
std::getline(std::cin, odbaci); std::cout&lt;&lt;std::endl; try { n=OdbaciOptuzbu(potencijalni, n, odbaci); }
catch(std::domain_error msg)  { std::cout&lt;&lt;msg.what(); } }
if(x==3) { 	IzlistajOptuzbu(potencijalni, n);	}
} }
catch(...) {
	for(int i=0; i&lt;n; i++) delete[] potencijalni[i];
	delete[] potencijalni;
}


//copy-paste maina iz autotesta radi provjere
/*
char **nizPotencijalnih;
 std::vector&lt;std::string&gt; imena = {"Fudo", "Pero", "Meho", "Fata", "Bajro", "Luca", "Jovo"};
 int n = PotencijalniKrivci( nizPotencijalnih, imena);
 int m = OdbaciOptuzbu(nizPotencijalnih, n, "Fata");
 std::cout &lt;&lt; m &lt;&lt; std::endl;
 */
	return 0;
}</pre>
</body>
</html>
