<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7443.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9029.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
void UnistiMatricu(char **pok, int vel){
    for(int i=0;i&lt;vel;i++)
        delete[] pok[i];
    delete[] pok;
}

int PotencijalniKrivci(char **&amp;imena, std::vector&lt;std::string&gt; vektor){
    try{
        char **pok=new char*[vektor.size()];
        try{
            for(int i=0;i&lt;(int)vektor.size();i++){
                pok[i]=new char[(int)vektor[i].size()+1];
                std::strcpy(pok[i],vektor[i].c_str());
            }
        }catch(std::bad_alloc){UnistiMatricu(pok, (int)vektor.size());throw std::bad_alloc();}
        imena=pok;
        return vektor.size();
    }
    catch(std::bad_alloc){throw std::bad_alloc();}
}

<a name="1"></a><font color="#00FF00"><a href="match932-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

int OdbaciOptuzbu(char **&amp;imena, int velicina, std::string ime){
    bool pronadjeno(false);
    for(int red=0;red&lt;velicina;red++){
</font>        if(imena[red]==nullptr)continue;
        if(std::strcmp(imena[red], ime.c_str())==0){
            pronadjeno=true;
            delete[] imena[red];
            imena[red]=nullptr;
        }
    }
    int broj_izbrisanih(std::count(imena, imena+velicina, nullptr));
    if(broj_izbrisanih&gt;10){
        try{
            char **nova_imena=new char*[velicina-broj_izbrisanih];
            int poz{};
<a name="2"></a><font color="#0000FF"><a href="match932-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            for(int red_2=0;red_2&lt;velicina;red_2++)
                if(imena[red_2]!=nullptr)
                    nova_imena[poz++]=imena[red_2];
</font>            delete[] imena;
            velicina-=broj_izbrisanih;
            imena=nova_imena;
            }catch(...){}
    }
            
    if(!pronadjeno)
        throw std::domain_error ("Osoba sa imenom "+ime+" nije bila optuzena");
    
    return velicina;
}

int DodajOptuzbu(char **&amp;imena, int velicina, std::string ime){
    try{
    char *pok=new char[(int)ime.size()+1];
    std::strcpy(pok,ime.c_str());
    
<a name="3"></a><font color="#00FFFF"><a href="match932-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    for(int red=0;red&lt;velicina;red++)
        if(imena[red]==nullptr){
            imena[red]=pok;
            return velicina;
        }
    try{
    char **nova_imena=new char*[velicina+1];
</font>    int red{};
<a name="0"></a><font color="#FF0000"><a href="match932-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    for(red=0;red&lt;velicina;red++)
        nova_imena[red]=imena[red];
    nova_imena[red]=pok;
    delete[] imena;
    imena=nova_imena;
    return velicina+1;
    }catch(...){delete[] pok; throw std::bad_alloc();}
</font>    }catch(...){throw std::bad_alloc();}
}

void IzlistajOptuzbu(char **imena, int velicina){
    for(int ime=0;ime&lt;velicina;ime++){
        if(imena[ime]==nullptr) continue;
        std::string str(imena[ime]);
        std::cout&lt;&lt;std::endl&lt;&lt;str;
    }
}

int main (){
    std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? \n";
    int pot_krivci;
    std::cin&gt;&gt;pot_krivci;
    std::cout&lt;&lt;"Unesite potencijalne krivce: ";
    std::vector&lt;std::string&gt; krivci;
    std::cin.ignore(100,'\n');
<a name="4"></a><font color="#FF00FF"><a href="match932-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

    for(int i=0;i&lt;pot_krivci;i++){
        std::string ime;
        std::getline(std::cin, ime);
        krivci.push_back(ime);
</font>    }
    char **nizPotencijalnih;
    int velicina=PotencijalniKrivci(nizPotencijalnih, krivci);
    int opcija;
    while(std::cout&lt;&lt;"\nOdaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &amp;&amp; std::cin&gt;&gt;opcija &amp;&amp; opcija!=0){
        std::cin.ignore(1000,'\n');
        if(opcija==0) break;
        if(opcija==1){
            std::cout&lt;&lt;"\nUnesite ime novog optuzenog: ";
            std::string ime;
            std::getline(std::cin, ime);
            try{
            velicina=DodajOptuzbu(nizPotencijalnih, velicina, ime);
            }catch(...){}
        }
        if(opcija==2){
            std::cout&lt;&lt;"\nUnesite ime koje zelite izbaciti: ";
            std::string ime;
            std::getline(std::cin, ime);
            try{
            velicina=OdbaciOptuzbu(nizPotencijalnih, velicina, ime);
            }catch(std::domain_error izuzetak){std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;}
        }
        if(opcija==3){IzlistajOptuzbu(nizPotencijalnih, velicina);}
    }
    
    UnistiMatricu(nizPotencijalnih, velicina);
    
	return 0;
}</pre>
</body>
</html>
