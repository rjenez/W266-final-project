<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6705.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6705.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;iostream&gt;

int PotencijalniKrivci(char **&amp;niz_imena, std::vector&lt;std::string&gt; vektor_imena);
int OdbaciOptuzbu(char **&amp;niz_imena, int velicina, std::string za_odbaciti);
int DodajOptuzbu(char **&amp;niz_imena, int velicina, std::string za_dodati);
void IzlistajOptuzbu(char **niz_imena, int velicina);

int main ()
{
	int broj_krivaca;
	std::vector&lt;std::string&gt; potencijalni_krivci;
	char **optuzeni;
	
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	std::cin &gt;&gt; broj_krivaca;
<a name="2"></a><font color="#0000FF"><a href="match339-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	std::cin.ignore(100, '\n');
	
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	for (int i = 0; i &lt; broj_krivaca; i++) {
		std::string trenutni;
</font>		std::getline(std::cin, trenutni);
		potencijalni_krivci.push_back(trenutni);
	}
	
	broj_krivaca = PotencijalniKrivci(optuzeni, potencijalni_krivci);
	
	int izbor = -1;
	while(izbor != 0) {
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
		std::cin &gt;&gt; izbor;
		std::cin.ignore(100, '\n');
		
		std::string ime;
		
		switch(izbor) {
			case 0:
				for (int i = 0; i &lt; broj_krivaca; i++)
					delete[] optuzeni[i];
				delete[] optuzeni;
				break;
			case 1:
				std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
				std::getline(std::cin, ime);
				broj_krivaca = DodajOptuzbu(optuzeni, broj_krivaca, ime);
				break;
			case 2:
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
				std::getline(std::cin, ime);
				broj_krivaca = OdbaciOptuzbu(optuzeni, broj_krivaca, ime);
				break;
			case 3:
				IzlistajOptuzbu(optuzeni, broj_krivaca);
				break;
			default:
				break;
		}
	}
	
	return 0;
}

int PotencijalniKrivci(char **&amp;niz_imena, std::vector&lt;std::string&gt; vektor_imena) {
	try {
		niz_imena = new char*[vektor_imena.size()];
	} catch(std::bad_alloc izuzetak) {
		delete[] niz_imena;
		
		throw izuzetak;
	}
	
	for (int i = 0; i &lt; vektor_imena.size(); i++) {
		try {
			// dodajemo +1 za '\0'
			niz_imena[i] = new char[vektor_imena[i].size() + 1];
			
			int j;
<a name="3"></a><font color="#00FFFF"><a href="match339-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

			for (j = 0; j &lt; vektor_imena[i].size(); j++)
				niz_imena[i][j] = vektor_imena[i][j];
			
			niz_imena[i][j] = '\0';
		} catch(std::bad_alloc izuzetak) {
</font>			for (int k = 0; k &lt; i; k++)
				delete[] niz_imena[k];
				
			delete[] niz_imena;
			
			throw izuzetak;
		}
	}
		
	return vektor_imena.size();
}

int OdbaciOptuzbu(char **&amp;niz_imena, int velicina, std::string za_odbaciti) {
	for (int i = 0; i &lt; velicina; i++) {
		if (niz_imena[i] == za_odbaciti) {
			delete[] niz_imena[i];
			niz_imena[i] = nullptr;
			
			int broj_obrisanih = 0;
			for (int j = 0; j &lt; velicina; j++) 
				if (niz_imena[i] == nullptr)
					broj_obrisanih += 1;
					
			if (broj_obrisanih &gt; 10) {
				char **novi_niz;
				try {
					novi_niz = new char*[velicina - broj_obrisanih];
				} catch(std::bad_alloc izuzetak) {
					return velicina;
				}
				
				int trenutni_novi = 0;
				for (int j = 0; j &lt; velicina; j++) {
					if (niz_imena[j] != nullptr) {
						try {
							novi_niz[trenutni_novi] = new char[std::strlen(niz_imena[j])];
						} catch(std::bad_alloc izuzetak) {
							for (int k = 0; k &lt; trenutni_novi; k++)
								delete[] novi_niz[k];
							
							delete[] novi_niz;
							
							return velicina;
						}
						
<a name="4"></a><font color="#FF00FF"><a href="match339-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

						std::strcpy(novi_niz[trenutni_novi++], niz_imena[j]);
					}
				}
				
				for (int j = 0; j &lt; velicina; j++)
					delete[] niz_imena[j];
					
				delete[] niz_imena;
				
				niz_imena = novi_niz;
</font>				
				return velicina - broj_obrisanih;
			}
			
			return velicina;
		}
	}
	
	throw std::domain_error("Osoba sa imenom " + za_odbaciti + " nije bila optuzena");
	
	return velicina;
}

int DodajOptuzbu(char **&amp;niz_imena, int velicina, std::string za_dodati) {
	char *novo_ime;
	try {
		novo_ime = new char[za_dodati.size() + 1];
	} catch(std::bad_alloc izuzetak) {
		throw izuzetak;
	}
	
<a name="0"></a><font color="#FF0000"><a href="match339-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

	for (int i = 0; i &lt; za_dodati.size(); i++)
		novo_ime[i] = za_dodati[i];
	novo_ime[za_dodati.size()] = '\0';
	
	for (int i = 0; i &lt; velicina; i++) {
		if (niz_imena[i] == nullptr) {
			niz_imena[i] = novo_ime;
			return velicina;
		}
	}
	
	char **novi_niz;
</font>	try {
		novi_niz = new char*[velicina + 1];
	} catch(std::bad_alloc izuzetak) {
		delete[] novo_ime;
		throw izuzetak;
	}
	
<a name="1"></a><font color="#00FF00"><a href="match339-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

	for (int i = 0; i &lt; velicina; i++)
		novi_niz[i] = niz_imena[i];
		
	novi_niz[velicina] = novo_ime;
	delete[] niz_imena;
	niz_imena = novi_niz;
	
	return velicina + 1;
}

void IzlistajOptuzbu(char **niz_imena, int velicina) {
	for (int i = 0; i &lt; velicina; i++)
</font>		if (niz_imena[i]) 
			std::cout &lt;&lt; niz_imena[i] &lt;&lt; std::endl;
}</pre>
</body>
</html>
