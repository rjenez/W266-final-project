<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7597.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8854.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;


int PotencijalniKrivci(char** &amp;pok,std::vector&lt;std::string&gt; ulaz)
{
	
	char** p=nullptr;
	try
	{
		p=new char*[ulaz.size()];
	}
	catch(std::bad_alloc)
	{
		delete[] p;
		throw;
	}
	{
	int i;
	for(i=0;i&lt;ulaz.size();i++)
	{
		p[i]=nullptr;
		try
		{
		p[i]=new char[ulaz[i].size()+1];
		}
		catch(std::bad_alloc)
		{
			for(int j=0;j&lt;=i;j++)
			delete[] p[j];
			delete[] p;
			throw;
		}
		
	}
	} 
	
	int suma=0;
	for(int i=0;i&lt;ulaz.size();i++)
	{
		for(int j=0;j&lt;ulaz[i].size();j++)
		p[i][j]=ulaz[i][j];
		p[i][ulaz[i].size()]='\0';
		suma=suma+ulaz[i].size()+1;
	}
	pok=p;
	
	
	return ulaz.size();
/*	return suma;*/
}

int OdbaciOptuzbu(char** &amp;pok,int vel,std::string ime)
{
	
	for(int i=0;i&lt;vel;i++)
	{
		bool imalga=false;
		for(int j=0;j&lt;ime.size();j++)
		{
			if(pok[i][j]==ime[j])
			{imalga=true;}
			else
			{imalga=false;break;}
		}
		if(imalga &amp;&amp; pok[i][ime.size()]=='\0')
		{
			delete[] pok[i];
			pok[i]=nullptr;
			int brojac=0;
			for(int j=0;j&lt;vel;j++)
			{
				if(pok[j]==nullptr)
				brojac++;
			}
			if(brojac&gt;10)
			{
				char** novipok=nullptr;
				try
				{
					novipok=new char*[vel-brojac];
				}
				catch(std::bad_alloc)
				{
					delete[] novipok;
					return vel;
				}
				int broj=0;;
<a name="3"></a><font color="#00FFFF"><a href="match707-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

				for(int j=0;j&lt;vel;j++)
				{
					if(pok[j]!=nullptr)
					novipok[broj++]=pok[j];
</font>				}
				for(int i=0;i&lt;vel;i++)
				delete[] pok[i];
				
				delete[] pok;
				pok=novipok;
				vel=vel-brojac;
				
				
			}
			
			
			return vel;
		}
	}
		
		{
			std::string trenutni="Osoba sa imenom "+ime+" nije bila optuzena";
<a name="1"></a><font color="#00FF00"><a href="match707-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

			throw std::domain_error(trenutni);
		}
		
		
	
	
	return vel;
}

int DodajOptuzbu(char** &amp;pok,int vel,std::string ime)
{
	char* p=nullptr;
	try
	{
		p=new char[ime.size()+1];
</font>	}
	catch(std::bad_alloc)
	{
		delete[] p;
		throw;
	}
	
	for(int i=0;i&lt;ime.size();i++)
	p[i]=ime[i];
	p[ime.size()]='\0';
	
	for(int i=0;i&lt;vel;i++)
	{
		if(pok[i]==nullptr)
		{
			pok[i]=p;
			return vel;
		}
	}
	
	char** novipok=nullptr;
	try
	{
		novipok=new char*[vel+1];
	}
	catch(std::bad_alloc)
	{
		delete[] novipok;
		delete[] p;
<a name="0"></a><font color="#FF0000"><a href="match707-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		throw;
	}
	for(int i=0;i&lt;vel;i++)
	novipok[i]=pok[i];
	delete[] pok;
	novipok[vel]=p;
	pok=novipok;
	
	return vel+1;
</font>}

void IzlistajOptuzbu(char** pok,int vel)
{
	for(int i=0;i&lt;vel;i++)
	{
		if(pok[i]!=nullptr)
		{
			int j=0;
			while(pok[i][j]!='\0')
			{
				std::cout&lt;&lt;pok[i][j];
				j++;
			}
			
<a name="4"></a><font color="#FF00FF"><a href="match707-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

			std::cout&lt;&lt;std::endl;
			
			
		}
	}
	
	
	
}





int main ()
{
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int n;
	std::cin&gt;&gt;n;
</font>	std::cin.ignore(10000,'\n');
	std::vector&lt;std::string&gt;ulaz;
	std::string trenutni;
	
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	for(int i=0;i&lt;n;i++)
	{
		std::getline(std::cin,trenutni);
		ulaz.push_back(trenutni);
		
		
	}
	char** pok;
	int vel;
	try
	{
	    vel=PotencijalniKrivci(pok,ulaz);
	}
	catch(std::bad_alloc)
	{
		return 0;
	}
	for(;;)
	{
		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl; 
		int a;
		/*std::cin.ignore(10000,'\n');*/
		std::cin&gt;&gt;a;
		std::cin.ignore(10000,'\n');
<a name="2"></a><font color="#0000FF"><a href="match707-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		if(a==0)
		{
			break;
		}
		if(a==1)
		{
			std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
			std::string trenutni;
			std::getline(std::cin,trenutni);
</font>			try
			{
			    vel=DodajOptuzbu(pok,vel,trenutni);
			}
			catch(std::bad_alloc)
			{
				break;
			}
			
			
			
			continue;
		}
		if(a==2)
		{
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
			std::string trenutni;
			std::getline(std::cin,trenutni);
			try
			{
			    vel=OdbaciOptuzbu(pok,vel,trenutni);
			}
			catch(std::bad_alloc)
			{
				break;
			}
			catch(std::domain_error e)
			{
			
			}
			
			continue;
		}
		if(a==3)
		{
			IzlistajOptuzbu(pok,vel);
			continue;
		}
		
		
	}
	
	for(int i=0;i&lt;vel;i++)
	delete[] pok[i];
	delete[] pok;
	return 0;
}

</pre>
</body>
</html>
