<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1016.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1364.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

using std::cin; using std::cout; using std::endl; using std::vector; using std::string;

int PotencijalniKrivci(char **&amp;pok, vector&lt;string&gt; spisak_imena) {
	int broj_al_nizova(0);
	int n(spisak_imena.size());
	//Dinamicki alocira niz pokazivaca 
	try {
		pok=new char*[n];
		for (int i=0; i&lt;n; i++) {pok[i]=nullptr; }
		try {
			for (int i=0; i&lt;n; i++) {
				int m(spisak_imena[i].size()+1); //+1 za \0
				pok[i]=new char[m]; 
			}
			//Popunimo din. al. niz 
			for(int i=0; i&lt;n; i++) {
				int m(spisak_imena[i].size()), j(0);
				for (j=0; j&lt;m; j++) {
					pok[i][j]=spisak_imena[i][j];
				}
				pok[i][j]='\0';
				}
		}
		catch (std::bad_alloc) {
			for (int i=0; i&lt;n; i++) {
				delete[] pok[i];
			} //Jer su neki alocirani
			delete[] pok;
			throw;
		}
	}
	catch (std::bad_alloc) {
		throw;
	}
	broj_al_nizova=n;
	return broj_al_nizova;
}

int OdbaciOptuzbu(char **&amp;pok, int vel, string ime) {
	//Provjera da li je na spisku
	int i(0), brojac(0);
	for (i=0; i&lt;vel; i++) {
		//Pretvorimo ime sa spiska u string i uporedimo sa imenom
		string ime_l;
		for (int j=0; ; j++) {
			if (pok[i]!=nullptr &amp;&amp; pok[i][j]!='\0')
			ime_l.push_back(pok[i][j]);
			else break;
		}
		//cout &lt;&lt; ime_l &lt;&lt; " ";
		if (ime_l==ime) {
			//Brisanje osobe
			delete[] pok[i];
			pok[i]=nullptr;
			//Provjerimo koliko je nullptr u nizu pok
			brojac=0;
			for (int b=0; b&lt;vel; b++) {
				if (!pok[b]) brojac++;
			}
			if (brojac&gt;10) {
				int k(0);
				//Usteda memorije, alokacija novog niza
				if (vel-brojac==0) return 0; //Nema vise elemenata da nisu nullptr
<a name="2"></a><font color="#0000FF"><a href="match558-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

				char **a(new char*[vel-brojac]); //Ako ne uspije alokacija ne trebamo nista uraditi
				for (int i=0; i&lt;vel-brojac; i++) { a[i]=nullptr; }
</font>				try {
					for (int i=0; i&lt;vel-brojac; i++) {
						while(!pok[k]) k++;
						int m(0);
						//Prebrojimo koliko slova ima ovo ime
						while (pok[k][m]!='\0') {
							m++;
						}
						a[i]=new char[m+1];
						//Popunimo ime
						m=0;
						while (pok[k][m]!='\0') {
							a[i][m]=pok[i][m];
							m++;
						}
						a[i][m]='\0';
						k++;
					}
				}
<a name="3"></a><font color="#00FFFF"><a href="match558-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

				catch (...) {
					for (int i=0; i&lt;vel-brojac; i++) delete[] a[i];
					delete[] a;
</font>				}
				//Moramo osloboditi prvi niz
				for (int i=0; i&lt;vel; i++) pok[i]=nullptr;
				for (int i=0; i&lt;vel; i++) delete[] pok[i];
				delete[] pok;
				pok=a;
				pok=a;
				vel-=brojac;
			}
			break;
		}
	}
	if (i==vel) { //Nije doslo do brisanja, osobe nema na spisku
	    string tekst ("Osoba sa imenom " + ime + " nije bila optuzena");
		throw std::domain_error (tekst);
	}
	return vel;
}

<a name="4"></a><font color="#FF00FF"><a href="match558-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

int DodajOptuzbu (char **&amp;pok, int vel, std::string ime) {
	//Alocirajmo novi niz
	char* niz;
	try {
		niz=new char [ime.size()+1];
</font>		int i(0);
		for ( ; i&lt;ime.size(); i++) {
			niz[i]=ime[i];
		}
		niz[i]='\0';
	}
	catch (std::bad_alloc) {
		throw;
	}
	//Pretrazimo niz pokazivaca
	for (int i=0; i&lt;vel; i++) {
		if (!pok[i]) {
			//Pronasli smo nullptr
			pok[i]=niz; //Upisimo adresu novokreiranog niza
			return vel; //Postupak je gotov
		}
	}
	
	//Dodavanje novog imena, ako nema nullptr-a
	char **a; //Curenje
	try {
		a=new char*[vel+1];
	}
	catch (...) {
		throw;
	}
	int i(0);
	for ( ; i&lt;vel+1; i++) { a[i]=nullptr; }
		try {
			    for (int i=0; i&lt;vel+1; i++) {
					if (i!=vel) a[i]=pok[i];
					else a[i]=niz;
			    }
			    
		}
<a name="5"></a><font color="#FF0000"><a href="match558-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

		catch (...) {
			for (int i=0; i&lt;vel+1; i++) delete[] a[i];
			delete[] a;
			a=nullptr;
</font>			throw;
		}
	//Moramo osloboditi prvi niz
	for (int i=0; i&lt;vel; i++) pok[i]=nullptr;
	for (int i=0; i&lt;vel; i++) delete[] pok[i];
	delete[] pok;
<a name="0"></a><font color="#FF0000"><a href="match558-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

	pok=a;
	return vel+1;
}

void IzlistajOptuzbu (char **pok, int vel) {
	for (int i=0; i&lt;vel; i++) {
		if (pok[i]) {
</font>			if (i==vel-1) cout &lt;&lt;pok[i];
			else cout &lt;&lt; pok[i] &lt;&lt; endl;
		}
	}
}

int main ()
{
	cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? ";
	int br_pot_k;
	cin &gt;&gt; br_pot_k;
	cout &lt;&lt;"\nUnesite potencijalne krivce: ";
	vector&lt;string&gt; spisak_imena_pk;
	for (int i=0; i&lt;=br_pot_k; i++) {
		string unos;
		std::getline(cin, unos);
		spisak_imena_pk.push_back(unos);
	}
	char **pok(nullptr);
	try {
		PotencijalniKrivci(pok, spisak_imena_pk);
	}
<a name="1"></a><font color="#00FF00"><a href="match558-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

	catch (...) {
		for (int i=0; i&lt;spisak_imena_pk.size(); i++) delete[] pok[i];
	    delete[] pok;
</font>	}
	int unos(0), vel=spisak_imena_pk.size();
	do {
		cout &lt;&lt; "\nOdaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
		cin &gt;&gt; unos;
		if (unos==1) {
			cout &lt;&lt; "\nUnesite ime novog optuzenog: ";
			string ime;
			cin.ignore (10000, '\n');
			std::getline(cin, ime);
			try {
				vel=DodajOptuzbu(pok, vel, ime);
			}
			catch (...) {
				cout &lt;&lt; "Problemi";
			}
		}
		else if (unos==2) {
			cout &lt;&lt; "\nUnesite ime koje zelite izbaciti: ";
			string ime;
			cin.ignore (10000, '\n');
			std::getline(cin, ime);
			try {
				OdbaciOptuzbu(pok, spisak_imena_pk.size(), ime);
			}
			catch (std::domain_error izuzetak) {
				cout &lt;&lt; izuzetak.what();
			}
		}
		else if (unos==3) {
			IzlistajOptuzbu(pok, vel);
		}
	}
	while (unos);
	
	//Obrisimo sto smo zauzeli
	for (int i=0; i&lt;vel; i++) delete[] pok[i];
	delete[] pok;
	
	return 0;
}</pre>
</body>
</html>
