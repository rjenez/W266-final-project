<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6631.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9673.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4 */
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;

typedef std::vector&lt;std::string&gt; VektorStringova;

int PotencijalniKrivci (char** &amp;pok, VektorStringova v){

	int n(v.size());
	
	try{
		pok=nullptr;
		pok=new char* [n]; 
		for(int i=0; i&lt;n; i++) pok[i]=nullptr;
		
		for(int i=0; i&lt;n; i++) {
			pok[i]=new char[v[i].length()+1];
			std::strcpy(pok[i], v[i].c_str());
		}
	}

	catch(...){
		for(int i=0; i&lt;n; i++) {
			delete[] pok[i];
			pok[i]=nullptr;
		}
		delete[] pok;
		pok=nullptr;
		throw std::bad_alloc();
	}
	return n;
}

int DodajOptuzbu (char** &amp;pok, int n, std::string s){
	
	char *novi(nullptr);
	bool ubacio(false);
	
<a name="0"></a><font color="#FF0000"><a href="match645-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	try{
		novi=new char [s.length()+1];
		strcpy(novi, s.c_str());
		bool null(false);
		
		for(int i=0; i&lt;n; i++) {
			if(pok[i]==nullptr &amp;&amp; !null){
</font>				pok[i]=novi;
				null=true;
				ubacio=true;
				novi=nullptr;
			}
		}
		
		if(!ubacio){
			char **p(nullptr);
			
			try{
				p=new char* [n+1];
				for(int i=0; i&lt;n+1; i++) p[i]=nullptr;
				
				for(int i=0; i&lt;n; i++) p[i] = new char[std::strlen(pok[i])+1];
				p[n] = new char [std::strlen(novi)+1];
				
				for(int i=0; i&lt;n; i++) strcpy(p[i], pok[i]);
				strcpy(p[n], novi);
				delete[] novi;
				novi=nullptr;
				
				for(int i=0; i&lt;n; i++) {
					delete[] pok[i];
					pok[i]=nullptr;
				}
				
				delete[] pok;
				pok=p;
				p=nullptr;
			}
			catch(...){	
				for(int i=0; i&lt;n; i++) delete[] p[i];
				delete[] p;
				throw std::bad_alloc();
			}
		}
	}
	
	catch(...){
		delete[] novi;
		throw std::bad_alloc();
	}

	if(!ubacio) return n+1;
<a name="1"></a><font color="#00FF00"><a href="match645-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

	return n;
}

int OdbaciOptuzbu (char** &amp;pok, int n, std::string s){
	
	bool nasao(false);

	for(int i=0; i&lt;n; i++){
			if(pok[i]!=nullptr &amp;&amp; !strcmp(pok[i], s.c_str())){
</font>				delete[] pok[i];
				pok[i]=nullptr;
				nasao=true;
			}
	}

	int obrisani(0);
<a name="2"></a><font color="#0000FF"><a href="match645-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

	for(int i=0; i&lt;n; i++) if(pok[i]==nullptr) obrisani++;
	
	if(obrisani&gt;10){
		char** p(nullptr);
</font>		int novi(0);
		for(int i=0; i&lt;n; i++) if(pok[i]!=nullptr) novi++;

		try{
			p=new char *[novi];
			for(int i=0; i&lt;novi; i++) p[i]=nullptr;
			
			int brojac(0);
			for(int i=0; i&lt;n; i++){
				if(pok[i]!=nullptr) p[brojac++] = new char [std::strlen(pok[i])+1];
			}
			
			brojac=0;
			for(int i=0; i&lt;n; i++){
				if(pok[i]!=nullptr) strcpy (p[brojac++], pok[i]);
			}
			
			for(int i=0; i&lt;n; i++) {
				delete[] pok[i];
				pok[i]=nullptr;
			}	
			pok=p;
			p=nullptr;
			return novi;
		}
		catch(...){
			for(int i=0; i&lt;novi; i++) delete[] p[i];
			delete[] p;
			p=nullptr;
			return n;
		}
	}
	
	if(!nasao) throw std::domain_error ("Osoba sa imenom "+s+" nije bila optuzena");
<a name="3"></a><font color="#00FFFF"><a href="match645-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	return n;
}

void IzlistajOptuzbu (char **pok, int n){
	for(int i=0; i&lt;n; i++){
		if(pok[i]==nullptr) continue;
</font>		std::cout &lt;&lt; pok[i] &lt;&lt; std::endl;
	}
}

int main ()
{
	char **pok(nullptr);
	VektorStringova lista; 
	int n;
	
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? \n";
	std::cin &gt;&gt; n; lista.resize(n);
	std::cin.ignore(10000, '\n');
	std::cout &lt;&lt; "Unesite potencijalne krivce: \n";
	for(int i=0; i&lt;n; i++) std::getline(std::cin, lista[i]);
	
	try{
		n=PotencijalniKrivci(pok, lista);
		int opcija(38);
		
		while(opcija!=0){
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
			std::cin &gt;&gt; opcija;
			
			if(opcija==1){
					std::cin.ignore(10000, '\n');
					std::string ime;
					std::cout &lt;&lt; "Unesite ime novog optuzenog: \n";
					std::getline(std::cin, ime);
					n=DodajOptuzbu(pok, n, ime);
			}
			
			if(opcija==2){
				std::cin.ignore(10000, '\n');
				std::string ime;
				std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: \n";
				std::getline(std::cin, ime);
				try{
<a name="4"></a><font color="#FF00FF"><a href="match645-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

					n=OdbaciOptuzbu(pok, n, ime);
				}
				catch(std::domain_error izuzetak){
					std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>				}
				catch(...){
					std::cout &lt;&lt; "Pogresan tip izuzetka." &lt;&lt; std::endl;
				}
			}
			if(opcija==3) IzlistajOptuzbu(pok, n);
		}
		for(int i=0; i&lt;n; i++) {
			delete[] pok[i];
			pok[i]=nullptr;
		}
		delete[] pok;
		pok=nullptr;
	}
	catch(std::bad_alloc()){
		
	}
	return 0;
}

</pre>
</body>
</html>
