<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1317.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1317.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include&lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;string&gt;
#include&lt;stdexcept&gt;
#include&lt;algorithm&gt;

using std::cout;
<a name="1"></a><font color="#00FF00"><a href="match254-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

using std::cin;
using std::endl;
using std::vector;
using std::string;
using std::getline;

// Funkcija PotencijalniKrivci dinamicki alocira niz pokazivaca na dinamicki
// alocirane nizove znakova u koje ce se smjestiti imena proslijedjenja funkciji
int PotencijalniKrivci(char **&amp;pok, vector&lt;string&gt; ime)
</font>{
	try
	{
<a name="2"></a><font color="#0000FF"><a href="match254-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		char **p(new char*[ime.size()]);
		for(int i=0; i&lt;ime.size(); i++)
			p[i]=nullptr;
		try
		{
			for(int i=0; i&lt;ime.size(); i++)
</font>				p[i]=new char[ime[i].length()+1];
			
			for(int i=0; i&lt;ime.size(); i++)
			{
				char *pom_pok(std::copy(ime[i].begin(), ime[i].end(), p[i]));
				*pom_pok='\0';
			}
				
			pok=p;
		}	
<a name="0"></a><font color="#FF0000"><a href="match254-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

		catch(...)
		{
			for(int i=0; i&lt;ime.size(); i++)
				delete[] p[i];
			delete[] p;
			throw;
		}
	}
	catch(...)
	{
		throw;
	}
	
	return ime.size();	
}

// Funkcija OdbaciOptuzbu oslobadja osobu optuzbe tj.
// brise osobu iz spiska potencijalnih krivaca
int OdbaciOptuzbu(char **&amp;pok, int vel, string ime)
{
	bool optuzen(false);
	for(int i=0; i&lt;vel; i++)
	{
		if(std::equal(ime.begin(), ime.end(), pok[i])) 
</font>		{
			delete[] pok[i];
			pok[i]=nullptr;
			optuzen=true;
		}
	}
	if(!optuzen)
	{
		string s;
		s="Osoba sa imenom " + ime + " nije bila optuzena";
<a name="3"></a><font color="#00FFFF"><a href="match254-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		throw std::domain_error(s);
	}
	
	int brojac(0);
	for(int i=0; i&lt;vel; i++)
		if(pok[i]==nullptr) brojac++;
		
	if(brojac&lt;=10) return vel;
</font>	
	try
	{
		char **p(new char*[vel-brojac]);
		
		int pom_brojac(0);
		for(int i=0; i&lt;vel; i++)
		{
			if(pok[i]==nullptr) continue;
			else 
			{
				p[pom_brojac]=pok[i];
				pom_brojac++;
			}
		}
		
		pok=p;
	}
	catch(...)
	{
		return vel;
	}
	
	return vel-brojac;
}

// Funkcija DodajOptuzbu vrsi dodavanje novog imena
// u niz potencijalnih krivaca
int DodajOptuzbu(char **&amp;pok, int vel, string ime)
{
	try
	{
		char *p(new char[ime.length()+1]);
		char *pom_pok(std::copy(ime.begin(), ime.end(), p));
		*pom_pok='\0';
<a name="4"></a><font color="#FF00FF"><a href="match254-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

		bool prazan(false);
		for(int i=0; i&lt;vel; i++)
		{
			if(pok[i]==nullptr) 
			{
				pok[i]=p;
</font>				prazan=true;
			}
		}
		if(!prazan)
		{
			try
			{
				char **q(new char*[vel+1]);
					
<a name="5"></a><font color="#FF0000"><a href="match254-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

				for(int i=0; i&lt;vel; i++)
					q[i]=pok[i];
					
				q[vel]=p;
			
				delete[] pok;
</font>				
				vel++;
				pok=q;
			}
			catch(...)
			{
				throw;
			}
		}
	}
	catch(...)
	{
		throw;
	}
	return vel;
}

// Funkcija IzlistajOptuzbu vrsi ispis svih registriranih imena
void IzlistajOptuzbu(char **pok, int vel)
{
	for(int i=0; i&lt;vel; i++)
	{
		if(pok[i]==nullptr) continue;
		cout &lt;&lt; pok[i] &lt;&lt; endl;
	}
	return;
}

int main ()
{
	vector&lt;string&gt; krivci;
	char** pok(nullptr);
	int vel;
	cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; endl;
	cin &gt;&gt; vel;
	cin.clear();
	cin.ignore(1000, '\n');
	cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; endl;
	for(int i=0; i&lt;vel; i++)
	{
		string s;
		getline(cin, s);
		krivci.push_back(s);
	}
	vel=PotencijalniKrivci(pok, krivci);
	
	int opcija;
	do
	{
		cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; endl;
		cin &gt;&gt; opcija;
		cin.clear();
		cin.ignore(1000, '\n');
		switch(opcija)
		{
			case 1: 
			{
				string ime;
				cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; endl;
				getline(cin, ime);
				vel=DodajOptuzbu(pok, vel, ime);
				break;
			}
			case 2: 
			{
				string ime;
				cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; endl;
				getline(cin, ime);
				vel=OdbaciOptuzbu(pok, vel, ime);
				break;
			}
			case 3: 
			{
				IzlistajOptuzbu(pok, vel); 
				break;
			}
			case 0: 
			{
				for(int i=0; i&lt;vel; i++) delete[] pok[i];
				delete[] pok;
				break;
			}
		}
	}while(opcija!=0);
	
	return 0;
}
</pre>
</body>
</html>
