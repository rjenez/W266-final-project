<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4903.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;cstring&gt;
#include&lt;vector&gt;
#include&lt;new&gt;
#include&lt;stdexcept&gt;

int PotencijalniKrivci(char**&amp;c,std::vector&lt;std::string&gt; v)
{
	c=nullptr;
	int brojac(0);
	try
	{
		c=new char*[v.size()];
		
<a name="2"></a><font color="#0000FF"><a href="match715-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		for(int i(0);i&lt;v.size();i++)
		{
			c[i]=new char[v[i].length()+1];
			std::strcpy(c[i],&amp;v[i][0]);
</font>			brojac++;
		}
	}
	catch(std::bad_alloc izuzekak)
	{
		for(int i(0);i&lt;v[i].size();i++)
		{
			delete[] c[i];
		}
		delete [] c;
		throw std::bad_alloc();
	}
	return brojac;
}

int OdbaciOptuzbu(char**&amp;c,int vel,std::string s)
{
	bool isti(false);
	for(int i(0);i&lt;vel;i++)
	{
		if(std::strcmp(c[i],&amp;s[0])==0)
		{
			isti=true;
			delete [] c[i];
			c[i]=nullptr;
		}
	}
	if(isti==false)
		throw std::domain_error("Osoba sa imenom "+s+" nije bila optuzena");
	int brojac(0);
	for(int i(0);i&lt;vel;i++)
	{
		if(c[i]==nullptr)
			brojac++;
	}
	char**h=nullptr;
	try
	{
		if(brojac&gt;10)
		{
			int nvel=vel-brojac;
			h=new char*[nvel];
			int j(0);
<a name="0"></a><font color="#FF0000"><a href="match715-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

			for(int i(0);i&lt;vel;i++)
			{
				if(c[i]!=nullptr)
				{
					h[j]=new char[std::strlen(c[i])+1]; //+1 zbog nul-terminatora
					std::strcpy(h[j],c[i]);
					j++;
</font>				}
			}
			for(int i(0);i&lt;vel;i++) delete [] c[i];
			delete [] c;
			vel=nvel;
			c=h;
		}
	}
	catch(std::bad_alloc izuzekak)
	{
		if(!h) delete [] h;
		else
		{
		for(int i(0);i&lt;vel;i++)
			{
				delete [] h[i];
			}
			delete [] h;
		}
	}
	return vel;
}

int DodajOptuzbu(char**&amp;c,int vel,std::string s)
{
	char *pok=nullptr;
	char**h=nullptr;
	try
	{
		pok=new char[s.length()+1];
		std::strcpy(pok,&amp;s[0]);
		bool imaprazno(false);
		for(int i(0);i&lt;vel;i++)
		{
			if(c[i]==nullptr)
			{
				c[i]=pok;
				imaprazno=true;
				break;
			}
		}
		if(imaprazno==false)
		{
			h=new char*[vel+1];
<a name="1"></a><font color="#00FF00"><a href="match715-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

			for(int i(0);i&lt;vel;i++)
			{
				h[i]=new char[std::strlen(c[i])+1];
				std::strcpy(h[i],c[i]);
			}
			h[vel]=pok;
			for(int i(0);i&lt;vel;i++)
</font>			{
				delete [] c[i];
			}
			delete [] c;
			c=h;
			vel++;
		}
	}
	catch(std::bad_alloc izuzetak)
	{
		delete [] pok;
		if(!h) delete [] h; 
		else
		{
		for(int i(0);i&lt;vel;i++)
			{
				delete [] h[i];
			}
			delete [] h;
		}
	}
	return vel;
}

void IzlistajOptuzbu(char**c,int vel)
{
	for(int i(0);i&lt;vel;i++)
	{
		if(c[i]!=nullptr)
		{
			std::cout&lt;&lt;c[i]&lt;&lt;std::endl;
		}
	}
}

int main ()
{
try
{
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	int vel;
	std::cin&gt;&gt;vel;
	std::vector&lt;std::string&gt; v(vel);
	std::cin.ignore(1000,'\n');
	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	for(int i(0);i&lt;vel;i++)
	{
		std::getline(std::cin,v[i]);
	}
	char**c;
	vel=PotencijalniKrivci(c,v);
	int choice(-1);
	for(;;)
	{
<a name="3"></a><font color="#00FFFF"><a href="match715-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
		std::cin&gt;&gt;choice;
		std::cin.ignore(1000,'\n');
	
		if(choice==0)
</font>			break;
		else if(choice==1)
		{
			std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
			std::string s;
			std::getline(std::cin,s);
			vel=DodajOptuzbu(c,vel,s);
		}
		else if(choice==2)
		{
		try
		{
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
			std::string s2;
			std::getline(std::cin,s2);
			vel=OdbaciOptuzbu(c,vel,s2);
		}
		catch(std::domain_error izuzetak)
		{
			std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
		}
		}
		else if(choice==3)
			IzlistajOptuzbu(c,vel);
	}
	for(int i(0);i&lt;vel;i++)
	{
		delete [] c[i];
	}
	delete [] c;
	return 0;
}
	catch(std::bad_alloc)
	{
	}
	
}</pre>
</body>
</html>
