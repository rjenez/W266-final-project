<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1571.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1571.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;

int PotencijalniKrivci (char **&amp;pok, std::vector&lt;std::string&gt; v) {
	char **niz = nullptr;
	int brojac (0);
	try {
<a name="0"></a><font color="#FF0000"><a href="match991-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

		niz = new char *[v.size()];
		for (int i=0; i&lt;v.size(); i++)
			niz[i] = nullptr;
		try {
			for (int j=0; j&lt;v.size(); j++) {
</font>				int duzina = v[j].size();
				niz[j] = new char [duzina+1];
				std::strcpy (niz[j], v[j].c_str());
				brojac++;
			}
		}
<a name="2"></a><font color="#0000FF"><a href="match991-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		catch(...) {
			for (int i=0; i&lt;v.size(); i++) delete[] niz[i];
			delete[] niz;
</font>			throw std::bad_alloc();
		}
	}
	catch (...) {
		delete[] niz;
		throw  std::bad_alloc();
	}
	pok = niz;
	return brojac;
}
int OdbaciOptuzbu (char **&amp;pok, int n, std::string ime) {
	char **novi = nullptr;
	std::string izuzetak = "Osoba sa imenom " + ime + " nije bila optuzena";
	int br_nullptr (0);
	bool ne_postoji (true);
	for (int i=0; i&lt;n; i++) {
		if (pok[i]!=nullptr &amp;&amp; pok[i] == ime) {
			delete[] pok[i];
			pok[i] = nullptr;
			br_nullptr++;
			ne_postoji = false;
			break;
		}
	}
	if (ne_postoji) throw std::domain_error (izuzetak);
	if (br_nullptr &lt;= 10) return n;
	else {
		 try {
<a name="1"></a><font color="#00FF00"><a href="match991-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

		 	for (int i=0; i&lt;n; i++) novi[i] = nullptr;
		 	try {
		 		for (int i=0; i&lt;n; i++) {
		 			if (pok[i] != nullptr) {
		 				novi[i] = pok[i];
</font>		 				delete[] pok[i];
		 				pok[i] = nullptr;
		 			}
		 			else continue;
		 		}
		 	}
		 	catch (...) {
<a name="3"></a><font color="#00FFFF"><a href="match991-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

		 		for (int i=0; i&lt;n; i++) delete[] novi[i];
		 		delete[] novi;
		 	}
		 }
		 catch (...) {
		 	delete[] novi;
</font>		 }
	}
	pok = novi;
	return n;
}
int DodajOptuzbu (char **&amp;pok, int n, std::string s) {
	char *novi = nullptr;
	bool ima_nullptr = false;
	int indeks;
	try {
		int duzina = s.length();
		novi = new char [duzina+1];
		std::strcpy (novi, s.c_str());
		for (int i=0; i&lt;n; i++) {
			if (pok[i] == nullptr) {
				ima_nullptr = true;
				indeks = i;
				break;
			}
		}
	}
	catch (...) {
		delete[] novi;
		throw std::bad_alloc ();
	}
	if (ima_nullptr) {
		pok[indeks] = novi;
	}
	else {
		char **pomocni = new char *[n+1];
		try {
			int i;
			for (i=0; i&lt;n+1; i++) pomocni[i] = nullptr;
			try {
				for (i=0; i&lt;n; i++)  pomocni[i] = pok[i]; 
				delete[] pok;
				pomocni[n] = novi;
				n++;
			}
			catch(...) {
				for (int i=0; i&lt;n+1; i++) delete[] pomocni[i];
				delete[] pomocni;
				throw std::bad_alloc();
			}
		}
		catch(...) {
			delete[] pomocni;
			throw std::bad_alloc();
		}
		pok = pomocni;
	}
<a name="4"></a><font color="#FF00FF"><a href="match991-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	return n;
}
void IzlistajOptuzbu (char **pok, int n) {
	for (int i=0; i&lt;n; i++) {
		if (pok[i] == nullptr) continue;
</font>		else std::cout &lt;&lt; pok[i]&lt;&lt; std::endl;
	}
}
int main ()
{
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	int n;
	bool obrisano (false);
	char **pok = nullptr;
	std::cin &gt;&gt; n;
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	std::vector&lt;std::string&gt; v;
	for (int i=0; i&lt;n; i++) {
		std::cin &gt;&gt; std::ws;
		std::string ime;
		std::getline (std::cin, ime);
		v.push_back(ime);
	}
	try {
		n = PotencijalniKrivci(pok, v);
	}
	catch (std::bad_alloc) {
		std::cout &lt;&lt; "Neuspjela alokacija";
		obrisano = true;
	}
	for (;;) {
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
		int izbor;
		std::cin &gt;&gt; izbor;
		if (izbor == 0) break;
		if (izbor == 1) {
			std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
			std::string ime;
			std::cin &gt;&gt; std::ws;
			std::getline (std::cin, ime);
			try {
				n = DodajOptuzbu(pok, n, ime);
			}
			catch (std::bad_alloc) {
				std::cout &lt;&lt; "Neuspjela alokacija" &lt;&lt; std::endl;
				obrisano = true;
			}
		}
		else if (izbor == 2) {
			std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
			std::string ime;
			std::cin &gt;&gt; std::ws;
			std::getline (std::cin, ime);
			try {
				n = OdbaciOptuzbu(pok, n, ime);
			}
			catch (std::domain_error poruka) {
				std::cout &lt;&lt; poruka.what() &lt;&lt; std::endl;
			}
		}
		else if (izbor == 3) {
			IzlistajOptuzbu(pok, n);
		}
	}
	for (int i=0; i&lt;n; i++) delete[] pok[i];
	delete[] pok;
	
  	return 0;
}</pre>
</body>
</html>
