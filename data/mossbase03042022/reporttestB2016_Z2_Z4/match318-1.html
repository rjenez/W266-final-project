<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student1326.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4471.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;type_traits&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;


int PotencijalniKrivci(char **&amp;znak, std::vector&lt;std::string&gt; v){
	
	
	int br_red = v.size();	
	
	//mozda treba proci kroz vektor v i naci one elemente koji nisu prazni !

	char **a = nullptr;
	try{
		//dinamicki alociramo nizove pokazivaca koji ce pokazivati na 
	
	a = new char*[br_red];
	for(int i=0;i&lt;v.size();i++)a[i] = nullptr;
	
	
	try{
		//dinamicki alociramo nizove znakova
<a name="0"></a><font color="#FF0000"><a href="match318-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

		for(int i=0;i&lt;v.size();i++){
			a[i] = new char[v[i].size() +1];//ovo +1 je za nul granicnik!
			
		}
		
		//sada u te nizove znakova prepisujemo elemente vektora stringova !
		for(int i=0;i&lt;v.size();i++){
			for(int j=0;j&lt;v[i].size();j++){
				a[i][j] = v[i][j];
			}
			a[i][v[i].size()] = '\0';
		}
		
		znak = a;
		return br_red;
</font>		
	}catch(...){
		
		for(int i=0;i&lt;br_red;i++)delete [] a[i];    //DA LI TREBAM BRISATI AKO JE STALO ALOCIRANJE ??
		delete [] a;
		throw;
	}
		
	}catch(...){
       //ovdje provjeriti 
		throw std::bad_alloc();
	}
	
	return br_red;
	
}




int OdbaciOptuzbu(char **&amp;znak,int vel_niza,std::string s){
	
	//s je ime koje treba izbrisati iz evidencije potencijjalinh krivaca
	std::string temp;
	int indeks = -1;
	
	for(int i=0;i&lt;vel_niza;i++){
		temp = s[i];
		
		if(znak[i] != nullptr &amp;&amp; znak[i] == s){
			indeks = i;
			break;
		}
	}
	
	//ako je indeks ostao -1 znaci da osobe nema u nizu !
	if(indeks == -1){
		temp ="Osoba sa imenom " + s + " nije bila optuzena";
		throw std::domain_error(temp);
	}
	
	//ovdje smo ako je pronadjena osoba !
	//brisemo osobbu postavljamo pokazivac na nullptr
	
<a name="1"></a><font color="#00FF00"><a href="match318-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

	delete[] znak[indeks];
	znak[indeks] = nullptr;
	
	//sada prebrojimo koliko je dosada osoba izbrisano tj kolko ima nullpokazivaca
	int broj_nulpok = 0;
	for(int i=0;i&lt;vel_niza;i++){
		if(znak[i] == nullptr)broj_nulpok++;
	}
	
	if(broj_nulpok&lt;=10)return vel_niza;
</font>	
	//ako ima vise od 10 obrisanih vrsimo novu alokaciju nizova !
	
	int broj_novih = vel_niza-broj_nulpok;
	
	char **a = nullptr;
	
		
		try{
			
			//pokusavamo alocirati novi niz
			a = new char*[broj_novih];
			for(int i=0;i&lt;broj_novih;i++)a[i] = nullptr;
			
			//sada alociramo novi niz pokazivaca !
<a name="2"></a><font color="#0000FF"><a href="match318-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

			int h = 0;
			for(int i=0;i&lt;vel_niza;i++){
				if(znak[i] != nullptr){a[h] = znak[i];h++;}
			}
			
		
			
			//ako je sve u redu obrisemo stari pokazivac na pokzivace i dodijelimo mu novu vrijednost
			delete [] znak;                                    
			znak = a;
</font>			return broj_novih;
	
		}catch(...){
			
			return 0;
		}
		
		
		
		return vel_niza;
	
	
}



int DodajOptuzbu(char **&amp;znak,int vel_niza,std::string s){
	
	//s je osoba koju treba dodati u niz !
	
		char *niz =  nullptr;
		
	try{
<a name="3"></a><font color="#00FFFF"><a href="match318-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

		niz = new char[s.length() +1];   //ovo +1 je za nul granicnik !   //provjeriti OVDJE MOZDA uopste ne treba +1
		//ukoliko je alokacija uspjela nastavaljmo
		
		//iskopiramo ime u ovaj niz !
		for(int i=0;i&lt;s.length();i++)niz[i] = s[i];
		niz[s.length()] = '\0';
</font>		
	}catch(...){
		throw std::bad_alloc();
	}
	
	
		//na prvo mjesto sa nullptr u nizu pokazivaca znak upisujemo nas novi niz
		for(int i=0;i&lt;vel_niza;i++){
			if(znak[i] == nullptr){
				
				znak[i] = niz;
				return vel_niza;  //vel niza pokazivaca ostala je ista samo smo prepisali preko nul grancinka!
			}
		}
		
		//ukoliko nije nadjen niti jedan nullptr u nizu pokazivaca znak radimo sljedece
		char **a = nullptr;
		try{
			a = new char*[vel_niza+1];
			int nova_vel = vel_niza +1;
			
			for(int i=0;i&lt;nova_vel;i++)a[i] = nullptr;
				
				for(int i=0;i&lt;vel_niza;i++){
					a[i] = znak[i];
				}
				a[vel_niza] = niz;
				
				//brisemo stari niz pokazivaca pazeci da ne obrisemo glavni pokazivac i vracamo novu vel niza
			
				delete [] znak;
				znak = a;
				return nova_vel;
		
			
		}catch(...){
			delete [] niz;
			throw std::bad_alloc();
		}
		return vel_niza;

}



void IzlistajOptuzbu(char **znak,int vel_niza){
	
	for(int i=0;i&lt;vel_niza;i++){
	
		if(znak[i] != nullptr){
		std::cout&lt;&lt;znak[i];
		std::cout&lt;&lt;std::endl;}
	}
	
	
}




int main ()
{
	
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? ";
	int n;
	std::cin&gt;&gt;n;
	std::cout&lt;&lt;"\nUnesite potencijalne krivce: ";
	
	
	char **nizPotencijalnih;
	std::vector&lt;std::string&gt;v(n);
	for(int i=0;i&lt;n;i++){
		std::cin&gt;&gt;v[i];
	}	
	
	try{
	int broj_krivaca = PotencijalniKrivci(nizPotencijalnih,v);
	
	int unos;
	
	std::cout&lt;&lt;std::endl;
	do{
	std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
	std::cin&gt;&gt;unos;
	
	
	if(unos == 1){
		std::cout&lt;&lt;"\nUnesite ime novog optuzenog: ";
		std::cout&lt;&lt;std::endl;
		try{
			std::string s;
			std::cin&gt;&gt;s;
			broj_krivaca = DodajOptuzbu(nizPotencijalnih,broj_krivaca,s);
			
		}catch(std::bad_alloc temp){
			return 0;
		}
	}else if(unos==2){
		std::cout&lt;&lt;"\nUnesite ime koje zelite izbaciti: ";
		std::string s;
		std::cin&gt;&gt;s;
		std::cout&lt;&lt;std::endl;
		
		try{
		broj_krivaca = OdbaciOptuzbu(nizPotencijalnih,broj_krivaca,s);
		}catch(std::domain_error temp){
			std::cout&lt;&lt;temp.what()&lt;&lt;std::endl;
		}
	}else if(unos==3){
		std::cout&lt;&lt;std::endl;
		IzlistajOptuzbu(nizPotencijalnih,broj_krivaca);
		
	}

	}while(unos != 0);
	
	//ako sve uspije !
		
	for(int i=0;i&lt;broj_krivaca;i++){
	delete [] nizPotencijalnih[i];
	}
	
	delete []nizPotencijalnih;
	
	}catch(std::bad_alloc temp){
		return 0;
	}
	
	return 0;
}





































































































































</pre>
</body>
</html>
