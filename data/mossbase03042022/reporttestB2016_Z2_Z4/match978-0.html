<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3386.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3386.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

using std::string;
using std::cout;
using std::cin;
using std::vector;


int PotencijalniKrivci(char **&amp;pok,vector&lt;string&gt; v)
{
	char **p=new char*[v.size()];
	pok=p;
	int f=0;
	try
	{
		for(int i=0;i&lt;v.size();i++)
		{
			f=i;
			p[i]=new char[v[i].size()+1];
			strcpy(p[i],v[i].c_str());
		}
	}
	catch(std::bad_alloc)
	{
		for(int i=0;i&lt;f;i++)
			delete[] p[i];
		delete[] p;
		throw;
	}
	return f+1;
}
int OdbaciOptuzbu(char **&amp;pok,int vel,string s)
{
	int brojac(0);
	for(int i=0;i&lt;vel;i++)
	{
		if(pok[i]==nullptr)
		{
			brojac++;
			continue;
		}
		if(strcmp(pok[i],s.c_str())==0)
		{	
			delete[] pok[i];
			pok[i]=nullptr;
			brojac++;
			if(brojac&lt;=10)
				return vel;
			try{
<a name="1"></a><font color="#00FF00"><a href="match978-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

			char **p=new char*[vel-brojac];
			int k=0;
			for(int j=0;j&lt;vel;j++)
			{
				if(pok[j]!=nullptr)
				{
					p[k]=pok[j];
</font>					k++;
				}
			}
			delete[] pok;
			pok=p;
			vel=k;
			return vel;
			}
			catch(std::bad_alloc)
			{
				return vel;
			}
		}
	}
	throw std::domain_error("Osoba sa imenom "+s+" nije bila optuzena\n");
}
<a name="3"></a><font color="#00FFFF"><a href="match978-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

int DodajOptuzbu(char **&amp;pok,int vel,string s)
{
	char *p=new char[s.length()+1];
	strcpy(p,s.c_str());
</font>	for(int i=0;i&lt;vel;i++)
	{
		if(pok[i]==nullptr)
		{
			pok[i]=p; 
			return vel;
		}
	}
	try
	{
<a name="0"></a><font color="#FF0000"><a href="match978-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

		char **pok2=new char*[vel+1];
		for(int i=0;i&lt;vel;i++)
			pok2[i]=pok[i];
		pok2[vel]=p;
		delete[] pok;
		pok=pok2;
		vel++;
		return vel;
</font>	}
	catch(std::bad_alloc)
	{
		delete[] p;
		throw;
	}
}
<a name="2"></a><font color="#0000FF"><a href="match978-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

void IzlistajOptuzbu(char **pok,int vel)
{
	for(int i=0;i&lt;vel;i++)
		if(pok[i]!=nullptr)
			cout&lt;&lt;pok[i]&lt;&lt;"\n";
</font>}
int main ()
{
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? \n";
	int vel;
	cin&gt;&gt;vel;
	cin.ignore(10000,'\n');
	cout&lt;&lt;"Unesite potencijalne krivce: \n";
	vector &lt;string&gt; v;
	for(int i=0;i&lt;vel;i++)
	{
		string s;
		getline(cin,s);
		v.push_back(s);
	}
	int broj;
	char **p;
	try
	{
		try
		{
			vel=PotencijalniKrivci(p,v);
		}
		catch(std::bad_alloc)
		{
			return 0;
		}
		do{
		broj=0;
		cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
		cin&gt;&gt;broj;
		cin.ignore(10000,'\n');
		if(broj==1)
		{
			cout&lt;&lt;"Unesite ime novog optuzenog: \n";
			string s;
			getline(cin,s);
			vel=DodajOptuzbu(p,vel,s);
		}
		else if(broj==2)
		{
			cout&lt;&lt;"Unesite ime koje zelite izbaciti: \n";
			string s;
			getline(cin,s);
			try{
			vel=OdbaciOptuzbu(p,vel,s);
			}
			catch(std::domain_error e)
			{
				cout&lt;&lt;e.what();
			}
		}
		else if(broj==3)
			IzlistajOptuzbu(p,vel);
		}while(broj);
		for(int i=0;i&lt;vel;i++)
			delete[] p[i];
		delete[] p;
	}
	
	catch(std::bad_alloc)
	{
		for(int i=0;i&lt;vel;i++)
			delete[] p[i];
		delete[] p;
	}
	return 0;
}</pre>
</body>
</html>
