<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2232.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student2232.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;

int PotencijalniKrivci(char **&amp;pok, std::vector&lt;std::string&gt; v){
	pok=nullptr;
	try{
		pok=new char *[v.size()];
		for(int i=0;i&lt;v.size();i++) pok[i]=nullptr;
		try{
			for(int i=0;i&lt;v.size();i++) pok[i]=new char[v[i].size()+1];
<a name="0"></a><font color="#FF0000"><a href="match240-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

			for(int i=0;i&lt;v.size();i++){
				for(int j=0;j&lt;v[i].size();j++){
					pok[i][j]=v[i][j];
				}
				pok[i][v[i].size()]='\0';
			}
			return v.size();
		}
		catch(...){
</font>			for(int i=0;i&lt;v.size();i++) delete[] pok[i];
			throw;
		}
	}
	catch(...){
		delete[] pok;
		throw;
	}
}

int OdbaciOptuzbu (char **&amp;pok, int vel_pok, std::string s){
		std::string izuzetak="Osoba sa imenom ";
		izuzetak+=s;
		izuzetak+=" nije bila optuzena";
		if(vel_pok==0) throw std::domain_error (izuzetak);
		bool JeLiBrisano=true;
		for(int i=0;i&lt;vel_pok;i++){
			int j;
			for( j=0;j&lt;s.size();j++){
				if(pok[i][j]!=s[j]) break;
			}
				if(pok[i][j]=='\0' &amp;&amp; j==s.size()){
					delete[] pok[i];
					pok[i]=nullptr;
					JeLiBrisano=false;
				}
		}
		if(JeLiBrisano) {
			throw std::domain_error (izuzetak);
		}
		int brojac(0);
<a name="5"></a><font color="#FF0000"><a href="match240-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

		for(int i=0;i&lt;vel_pok;i++){
			if(pok[i]==nullptr) brojac++;
		}
		if(brojac&gt;10){
			char **poki=nullptr;
</font>			try{
			poki=new char* [vel_pok-brojac];
			int f=0;
			for(int i=0;i&lt;vel_pok-brojac;i++){
				if(pok[i]!=nullptr){
					int j=0;
					while(pok[i][j]!='\0'){
						poki[f][j]=pok[i][j];
						j++;
					}
					poki[f][j]='\0';
					f++;
				}
			}
			for(int i=0;i&lt;vel_pok;i++) delete[] pok[i];
			delete[] pok;
			pok=poki;
			return vel_pok-brojac;
			}catch(...){
				for(int i=0;i&lt;vel_pok-brojac;i++) delete[] poki[i];
				delete [] poki;
			}
		}
		return vel_pok;
}

int DodajOptuzbu(char **&amp;pok, int vel_pok, std::string s){
	char *p=nullptr;
	bool ImaLiMjesta=false;
	try{
<a name="2"></a><font color="#0000FF"><a href="match240-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		p=new char[s.size()+1];
		for(int i=0;i&lt;s.size();i++){
			p[i]=s[i];
		}
		p[s.size()]='\0';
</font><a name="1"></a><font color="#00FF00"><a href="match240-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		for(int i=0;i&lt;vel_pok;i++){
			if(pok[i]==nullptr){
				pok[i]=p;
				ImaLiMjesta =true;
				break;
			}
		}
		if(!ImaLiMjesta){
			char **poki=nullptr;
			vel_pok+=1;
</font>			try{
				poki=new char*[vel_pok];
				for(int i=0;i&lt;vel_pok-1;i++){
					poki[i]=pok[i];
				}
				poki[vel_pok-1]=p;
				for(int i=0;i&lt;vel_pok-1;i++)  pok[i]=nullptr;
				delete[] pok;
				pok=poki;
			}
			catch(...){
				delete[] poki;
			}
		}
		
		return vel_pok; 
	}
	catch(...){
		delete [] p;
	}
}

void IzlistajOptuzbu (char **pok, int vel_pok){
	for(int i=0;i&lt;vel_pok;i++){
		if(pok[i]!=nullptr) {
			std::cout &lt;&lt; std::endl;
			int j=0;
			while(pok[i][j]!='\0') {
				std::cout &lt;&lt; pok[i][j];
				j++;
			}
		}
	}
}

int main ()
{
	try{
		char **pok=nullptr;
		std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " ;
		int n;
		std::cin &gt;&gt; n;
		if(!std::cin){
			std::cin.clear();
			return 0;
		}
		std::cin.ignore(100000000,'\n');
		std::vector&lt;std::string&gt;v(n);
		if (n&gt;0)
<a name="4"></a><font color="#FF00FF"><a href="match240-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

			std::cout &lt;&lt; "\nUnesite potencijalne krivce: ";
		for(int i=0;i&lt;n;i++){
			std::getline(std::cin, v[i]);
		}
		n=PotencijalniKrivci(pok,v);
</font>		int broj;
		do{
			std::cout &lt;&lt; "\nOdaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: ";
		std::cin &gt;&gt; broj;
		std::cin.ignore(10000000,'\n');
		if(!std::cin || (broj!=0 &amp;&amp; broj!=1 &amp;&amp; broj!=2 &amp;&amp; broj!=3)){
			std::cin.clear();
			break;
		}
		else if(broj==0) break;
		else if(broj==1){
			std::cout &lt;&lt; "\nUnesite ime novog optuzenog: ";
			std::string s;
			std::getline(std::cin, s);
			n=DodajOptuzbu(pok,n,s);
		}
		else if(broj==2){
			std::cout &lt;&lt; "\nUnesite ime koje zelite izbaciti: ";
			std::string s;
			std::getline(std::cin, s);
			n=OdbaciOptuzbu(pok,n,s);
		}
<a name="3"></a><font color="#00FFFF"><a href="match240-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

		else if(broj==3){
			IzlistajOptuzbu(pok,n);
		}
		}while(broj!=0);
		for(int i=0;i&lt;n;i++) delete [] pok[i];
		delete []pok;
</font>		return 0;
	}catch(std::domain_error s){
		std::cout &lt;&lt; s.what() &lt;&lt;std::endl;
	}
	catch(...){
		
	}
}</pre>
</body>
</html>
