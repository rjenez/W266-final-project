<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3701.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student3701.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;sstream&gt;
#include &lt;algorithm&gt;

<a name="0"></a><font color="#FF0000"><a href="match580-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

int PotencijalniKrivci (char **&amp;pok, std::vector&lt;std::string&gt; imena) {
//	typename std::remove_reference &lt;decltype (*poc)&gt;::type* pok_na_dinamicki=nullptr;
	pok=nullptr;
	try {
		pok= new char*[imena.size()];
		for (int i=0; i&lt;imena.size(); i++){
			pok[i]=nullptr;
</font>			try {
				pok[i]=new char[imena[i].length()+1];
<a name="2"></a><font color="#0000FF"><a href="match580-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

				std::strcpy(pok[i],imena[i].c_str());
//std::cout&lt;&lt;" spisak: "&lt;&lt;pok[i]&lt;&lt;"\n";
			}
			catch (...){
				for (int i=0; i&lt;imena.size(); i++) {
					delete [] pok[i];
					pok[i]=nullptr;
</font>				}
				throw;
			}
		}
	}
	catch (...){
		for (int i=0; i&lt;imena.size(); i++)
			delete[] pok[i];
		throw;
	}
	return imena.size();
}

std::string String_izuzetak (std::string ime) {
	std::string s="Osoba sa imenom ";
	s+=ime;
	s+=" nije bila optuzena";
	return s;
}

int OdbaciOptuzbu (char **&amp;pok, int broj_nizova, std::string nevin) {
	int pom=0,brojac_obrisanih=0;
	for (int i=0; i&lt;broj_nizova; i++){
		std::ostringstream ime;
		ime&lt;&lt;pok[i];
		if (ime.str()==nevin) {
			delete[] pok[i];
			pok[i]=nullptr;
			pom=1;
		}
		else;
//std::cout&lt;&lt;pok[i]&lt;&lt;" ime\n";
	} 
	try {
		if(pom==0) throw std::domain_error (String_izuzetak(nevin));
	}
	catch (std::domain_error a) {
		std::cout&lt;&lt;a.what()&lt;&lt;std::endl;
		return broj_nizova;
	}
	for (int i=0; i&lt;broj_nizova; i++)
		if(pok[i]==nullptr) brojac_obrisanih++;
//std::cout&lt;&lt;"brojc obrizasni "&lt;&lt;brojac_obrisanih&lt;&lt;"\n";
	if (brojac_obrisanih&gt;10) {
		auto stari_pok=pok;
		pok=nullptr;
		try {
			pok=new char*[broj_nizova-brojac_obrisanih];
			for (int i=0,j=0; i&lt;broj_nizova; i++){
				if (stari_pok[i]!=nullptr) {
					pok[j]=stari_pok[i];
					j++;
				}
			}
			delete[] stari_pok;
			broj_nizova-=brojac_obrisanih;
		}
		catch (std::bad_alloc){
			delete[] pok;
			pok=nullptr;
			pok=stari_pok;
<a name="3"></a><font color="#00FFFF"><a href="match580-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

			delete[] stari_pok;
			
		}
	}
	return broj_nizova;
}

int DodajOptuzbu (char **&amp;pok, int broj_nizova, std::string kriv) {
	char *novi_pok=nullptr;
</font>	int pom=0;
	try {
		novi_pok=new char[kriv.length()+1];
		std::strcpy(novi_pok,kriv.c_str());
		for (int i=0; i&lt;broj_nizova; i++)
			if (pok[i]==nullptr) {
				pok[i]=novi_pok;
				pom=1;
				break;
			}
		if (pom==0) {
			auto stari_pok=pok;
			try {
				pok=nullptr;
				pok=new char*[broj_nizova+1];
				for (int i=0; i&lt;broj_nizova; i++)
					pok[i]=stari_pok[i];
				pok[broj_nizova]=novi_pok;
				delete[] stari_pok;
				novi_pok=nullptr;
				broj_nizova=broj_nizova+1;
			}
			catch (std::bad_alloc) {
				delete[] pok;
				pok=nullptr;
				pok=stari_pok;
				stari_pok=nullptr;
				throw;
			}
		}
	}
	catch (...) {
		delete[] novi_pok;
		throw;
	}
	return broj_nizova;
}

void IzlistajOptuzbu (char **pok, int broj_nizova) {
	for (int i=0; i&lt;broj_nizova; i++) {
		if (pok[i]==nullptr);
		else std::cout&lt;&lt;pok[i]&lt;&lt;"\n";
	}
}

std::vector&lt;std::string&gt; Unos_krivaca (int velicina){
	std::vector&lt;std::string&gt; spisak;
	std::string ime;
	std::cin.clear();
	std::cin.ignore(10000,'\n');
	for (int i=0; i&lt;velicina; i++){
		std::getline(std::cin,ime);
		spisak.push_back(ime);
	}
	return spisak;
}

void Ispisi (std::vector&lt;std::string&gt; spisak){
	for (int i=0; i&lt;spisak.size(); i++){
		std::cout&lt;&lt;spisak[i];
		std::cout&lt;&lt;std::endl;
	}
}

int main ()
{
	try {
		int broj_krivaca;
		std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? \n";
		std::cin&gt;&gt;broj_krivaca;
		std::cout&lt;&lt;"Unesite potencijalne krivce: \n";
		auto krivci=Unos_krivaca(broj_krivaca);
//Ispisi(krivci);
		char **pokazivac_na_spisak;
//std::cout&lt;&lt;" duzina "&lt;&lt;krivci.size();
		int broj_alociranih_nizova=PotencijalniKrivci(pokazivac_na_spisak,krivci);
		int opcija;
		do {
			std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
			std::cin&gt;&gt;opcija;
			if (opcija==2) {
				std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: \n";
				std::cin.clear();
				std::cin.ignore(10000,'\n');
<a name="1"></a><font color="#00FF00"><a href="match580-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

				std::string oslobodjeni;
				std::getline(std::cin,oslobodjeni);
				broj_alociranih_nizova=OdbaciOptuzbu(pokazivac_na_spisak,broj_alociranih_nizova,oslobodjeni);
//std::cout&lt;&lt;broj_alociranih_nizova&lt;&lt;" broj ";
			}
			else if (opcija==1) {
				std::cout&lt;&lt;"Unesite ime novog optuzenog: \n";
				std::cin.clear();
</font>				std::cin.ignore(10000,'\n');
<a name="4"></a><font color="#FF00FF"><a href="match580-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

				std::string novi_optuzeni;
				std::getline(std::cin,novi_optuzeni);
				broj_alociranih_nizova=DodajOptuzbu(pokazivac_na_spisak, broj_alociranih_nizova, novi_optuzeni);
			}
			else if (opcija==3) {
				 IzlistajOptuzbu(pokazivac_na_spisak, broj_alociranih_nizova);
</font>			}
			else if (opcija==0) {
				for (int i=0; i&lt;broj_alociranih_nizova; i++)
					delete[] pokazivac_na_spisak[i];
				delete[] pokazivac_na_spisak;
				break;
			}
		} while (opcija!=0);
	}
	catch (std::bad_alloc ) {
		std::cout&lt;&lt;"Neuspjela alokacija!";
	}
	return 0;
}</pre>
</body>
</html>
