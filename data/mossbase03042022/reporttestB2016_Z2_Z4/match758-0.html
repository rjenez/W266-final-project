<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9972.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student9972.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;
using namespace std;
void dealociraj1(char **mat, int n){
 for(int i = 0; i &lt; n; i++) delete[] mat[i];
 delete[] mat;
}
void RazmijeniPokazivace(char **&amp;pok, char **&amp;p) {
 char **pomocna=nullptr;
 pomocna=pok;
 pok=p;
 p=pomocna;
}
void RazmjeniVrijednosti(char *&amp;pok, char *&amp;p)
{
	char *pomocna(pok);
	pok=p;
	p=pomocna;
}
bool Jeliisti(char *p, string s)
{
    for(int i=0;p[i]!='\0' || s[i]!='\0';i++)
    {
        if(p[i]!=s[i])return false;
    }
    return true;
}

int broji(char *p )
{
	int br=0;
	while(*p!='\0'){
	br++;
	p++;
	}
	return br;
}

int PotencijalniKrivci(char **&amp;p, vector&lt;string&gt;v)
{ int br=0;
	
	try
	{	p=nullptr;
		p=new char*[v.size()];
		for(int i = 0; i &lt; v.size(); i++) p[i] = nullptr;
			try
			{
			for(int i=0;i&lt;v.size();i++){  
			p[i]=new char[v[i].size()+1];
			br++;
				}
<a name="1"></a><font color="#00FF00"><a href="match758-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

				for(int i=0;i&lt;v.size();i++)
					for(int j=0;j&lt;v[i].size();j++)
						p[i][j]=v[i][j];
</font>						
				for(int i=0;i&lt;v.size();i++)
				p[i][v[i].size()]='\0';
				return br;
			}
			catch(bad_alloc)
			{
				for(int i=0;i&lt;v.size();i++)
				delete[] p[i];
				delete[] p;
				throw;
			}
			
	}
	catch(...)
	{
		throw;
	}
	return br;
}

int OdbaciOptuzbu(char **&amp; pok, int vel, string s)
{
	string novi;
	int br=0;
	bool ima=false;
	for(int i=0;i&lt;vel;i++){
		if(pok[i]==nullptr)continue;
   		if(Jeliisti(pok[i],s))
   		{ 
   			ima=true;
   			delete[] pok[i];
			pok[i]=nullptr;
		}
	}
   		if(!ima) throw domain_error ("Osoba sa imenom " + s + " nije bila optuzena");

		for(int i=0;i&lt;vel;i++)
		if(pok[i]==nullptr){br++;}
		if(br&gt;10)
		{ 
		int izb=0;
		try
		{
		char **p=nullptr;
		p=new char*[vel-br];
		for(int i = 0; i&lt;vel-br; i++) p[i]=nullptr;
			for(int i=0;i&lt;vel;i++){ 
				if(pok[i]==nullptr) {izb++;continue;}
				 char *pomocna=p[i-izb];
					p[i-izb]=pok[i];
					pok[i]=pomocna;

				}
				RazmijeniPokazivace(pok,p);
				for(int i=0;i&lt;vel;i++)
				delete[] p[i];
				delete[] p;
		}
		catch(...)
		{ return vel;}
		
		return vel-br;	
		}	
				
return vel;
}
int DodajOptuzbu(char **&amp;p, int vel, string s)
{

	try
	{ 
<a name="0"></a><font color="#FF0000"><a href="match758-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

		char *novi=new char[s.length()+1];
		for(int i=0;i&lt;s.length();i++){
		novi[i]=s[i];
		}
		novi[s.length()]='\0';
		bool ima_mjesta=false;
		for(int i=0;i&lt;vel;i++)
		{
			if(p[i]==nullptr){ima_mjesta=true;p[i]=novi;}
</font>		}
<a name="2"></a><font color="#0000FF"><a href="match758-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		if(!ima_mjesta)
		{
			char **pok=nullptr;
		try
		{
			pok=new char*[vel+1];
			for(int i = 0; i &lt; vel+1; i++) pok[i] = nullptr;
</font>				
				for(int i=0;i&lt;vel;i++){
					char *pomocna=pok [i];
					pok[i]=p[i];
					p[i]=pomocna;
					delete[] p[i];
				}
				delete[] p;
					RazmjeniVrijednosti(pok[vel],novi);
				
		
					RazmijeniPokazivace(pok,p);
					
					delete [] novi;
					vel+=1;
				}
				catch(bad_alloc)
				{
					throw;
				}
				
			}
		}
		catch(bad_alloc)
		{
			throw;
		}
<a name="3"></a><font color="#00FFFF"><a href="match758-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	return vel;
}

void IzlistajOptuzbu(char **pok, int vel)
{
	for(int i=0;i&lt;vel;i++){
		if(pok[i]==nullptr){continue;}
</font>			for(int j=0;pok[i][j]!='\0';j++)
			cout&lt;&lt;pok[i][j];
			cout&lt;&lt;endl;
	}
}
int main ()
{
	int m,n;
	string s,a;
	char **p;
	vector&lt;string&gt; v;
	cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;endl;
	cin&gt;&gt;n;
	if(n&gt;0)
	{
	cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;endl;
	for(int i=0;i&lt;n;i++){
	cin&gt;&gt;a;
	v.push_back(a);
	}
	}
	if(n&gt;=0)
	{
	try
	{
		n=PotencijalniKrivci(p,v);	
	
	
	do
	{
		cout&lt;&lt;"Odaberite opciju: "&lt;&lt;1&lt;&lt;" za unos novog optuzenog, "&lt;&lt;2&lt;&lt;" za brisanje nekog optuzenog "&lt;&lt;3&lt;&lt;" za izlistavanje optuzenih, "&lt;&lt;0&lt;&lt;" za kraj: "&lt;&lt;endl; 
		cin&gt;&gt;m;
		if(m==0){ dealociraj1(p,n);break;}
		if(m==1)
		{
			try 
			{

				cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;endl;
				cin.ignore(10000,'\n');
				getline(cin,s);
				n=DodajOptuzbu(p,n,s);
				}
				
			catch(bad_alloc)
			{
				cout&lt;&lt;"Problemi sa memorijom!\n";
			}

		}
		else if(m==2)
		{
			try
			{
				cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;endl;
				cin.ignore(10000,'\n');
				getline(cin,s);
				n=OdbaciOptuzbu(p,n,s);
			}
			catch(domain_error e)
			{
				cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;endl;
			}
		}
		else if(m==3){IzlistajOptuzbu(p,n);}
	}
	while(m!=0);
	}
	catch(bad_alloc)
	{
		cout&lt;&lt;"Problemi sa memorijom!\n";	
	}
}
	return 0;
}</pre>
</body>
</html>
