<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student5581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7392.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

int PotencijalniKrivci(char **&amp;pok, std::vector&lt;std::string&gt; v){
	int n=v.size();
	try{
		pok=new char*[n];
	}
	catch(...){
		throw;
	}
	int koliko=0;
	try{
		for(int i=0;i&lt;n;i++){
			pok[i]=new char [v[i].size()+1];
			for(int j=0;j&lt;v[i].size();j++){
				pok[i][j]=v[i][j];
			}
			pok[i][v[i].size()]='\0';
			koliko++;
		}
		return koliko;
	}
	catch(...){
		for(int i=0;i&lt;koliko;i++){
			delete[] pok[i];
		}
		delete[] pok;
		throw;
	}
}

int duzina(char *s){
	int t=0;
	while(*s){
		t++;
		s++;
	}
	return t;
}

bool poredi(char *s, std::string a){
	int n=duzina(s);
	if(n!=a.size())return false;
	for(int i=0;i&lt;n;i++){
		if(s[i]!=a[i])return false;
	}
	return true;
}

int OdbaciOptuzbu(char **&amp;pok, int n, std::string s){
	bool ima=false;
	int brojnull=0;
	for(int i=0;i&lt;n;i++){
		if(pok[i]==nullptr)continue;
		if(poredi(pok[i], s)){
			ima=true;
			delete[] pok[i];
			pok[i]=nullptr;
			break;
		}
	}
	if(ima==false)throw std::domain_error("Osoba sa imenom "+s+" nije bila optuzena");
	for(int i=0;i&lt;n;i++){
		if(pok[i]==nullptr)brojnull++;
	}
	if(brojnull&lt;=10){
		return n;
	}
	try{
		char **temp=nullptr;
		temp=new char* [n-brojnull];
<a name="2"></a><font color="#0000FF"><a href="match542-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		int brojac=0;
		try{
			for(int i=0;i&lt;n;i++){
				if(pok[i]!=nullptr){
					temp[brojac]=new char [duzina(pok[i])+1];
</font><a name="0"></a><font color="#FF0000"><a href="match542-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

					std::strcpy(temp[brojac], pok[i]);
					brojac++;
				}
			}
			for(int i=0;i&lt;n;i++){
				delete[] pok[i];
			}
			delete[] pok;
			pok=temp;
</font>			return brojac;
		}
		catch(...){
			for(int i=0;i&lt;brojac;i++){
				delete[] temp[i];
			}
			delete[] temp;
			return n;
		}
	}
	catch(...){
		return n;
	}
}

void IzlistajOptuzbu(char **pok, int n){
<a name="3"></a><font color="#00FFFF"><a href="match542-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	for(int i=0;i&lt;n;i++){
		if(pok[i]!=nullptr)std::cout&lt;&lt;pok[i]&lt;&lt;"\n";
</font>	}
}

int DodajOptuzbu(char **&amp;pok, int n, std::string s){
	try{
		char *a=new char[s.size()+1];
<a name="1"></a><font color="#00FF00"><a href="match542-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		std::strcpy(a, s.c_str());
		for(int i=0;i&lt;n;i++){
			if(pok[i]==nullptr){
				pok[i]=a;
				return n;
			}
		}
		char **r;
</font>		try{
			r=new char*[n+1];
		}
		catch(...){
			delete[] a;
			throw;
		}
		int brojac=0;
		try{
			for(int i=0;i&lt;n;i++){
				r[i]=new char [duzina(pok[i])+1];
				std::strcpy(r[i], pok[i]);
				brojac++;
			}
<a name="4"></a><font color="#FF00FF"><a href="match542-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

			r[n]=a;
			for(int i=0;i&lt;n;i++){
				delete[] pok[i];
			}
			delete[] pok;
			pok=r;
</font>			return n+1;
		}
		catch(...){
			for(int i=0;i&lt;brojac;i++){
				delete[] r[i];
			}
			delete[] r;
			delete[] a;
			throw;
		}
	}
	catch(...){
		throw;
	}
}

int main ()
{
	std::string s;
	char **pok=nullptr;
	int n=0;
	bool gg=true;
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti?\n";
	std::cin&gt;&gt;n;
	std::cin.ignore(10000, '\n');
	try{
		pok=new char*[n];
	}
	catch(...){
		return 0;
	}
	for(int i=0;i&lt;n;i++)pok[i]=nullptr;
	try{
		std::cout&lt;&lt;"Unesite potencijalne krivce: \n";
		for(int i=0;i&lt;n;i++){
			std::getline(std::cin, s);
			pok[i]=new char[s.size()+1];
			std::strcpy(pok[i], s.c_str());
		}
	}
	catch(...){
		for(int i=0;i&lt;n;i++){
			delete[] pok[i];
		}
		delete[] pok;
		return 0;
	}
	do{
		if(!gg)break;
		std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
		int a;
		std::cin&gt;&gt;a;
		std::cin.ignore(10000, '\n');
		if(a==0)break;
		if(a==1){
			std::cout&lt;&lt;"Unesite ime novog optuzenog: \n";
			std::getline(std::cin, s);
			bool gg=true;
			try{
				n=DodajOptuzbu(pok, n, s);
			}
			catch(...){
				gg=false;
			}
		}
		if(a==2){
			std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: \n";
			std::getline(std::cin, s);
			try{
				n=OdbaciOptuzbu(pok, n, s);
			}
			catch(std::domain_error gg){
				std::cout&lt;&lt;gg.what();
			}
		}
		if(a==3){
			IzlistajOptuzbu(pok, n);
		}
	}while(true);
	for(int i=0;i&lt;n;i++){
		delete[] pok[i];
	}
	delete[] pok;
	return 0;
}</pre>
</body>
</html>
