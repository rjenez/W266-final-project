<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8139.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8139.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

/*
static size_t alocirano(0);
static int brojac_new(0);
static int brojac_deleteniz(0);
static size_t alokacije[20];
const size_t RAM = 300;

void *operator new[] (size_t vel)
{
    if (RAM &lt; alocirano+vel) throw std::bad_alloc();
    alokacije[brojac_new]=vel;
    brojac_new++;
    alocirano+=vel;   
    return std::malloc (vel);
}

void operator delete [] ( void* ptr) {
  brojac_deleteniz++;
  free(ptr);
}

void dealociraj(char **mat, int n){
  for(int i = 0; i &lt; n; i++) delete[] mat[i];
    delete[] mat;
}
*/


<a name="0"></a><font color="#FF0000"><a href="match966-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

int PotencijalniKrivci(char** &amp;mander, std::vector&lt;std::string&gt; spisak_imena){
    int vecvel(spisak_imena.size());
    mander=new char*[vecvel];
    for(int i=0; i&lt;vecvel; i++) mander[i] = nullptr;
    try{
        for(int i=0; i&lt;vecvel; i++){
</font>            int svel(spisak_imena[i].length());
            mander[i]=new char[svel+1];
            for(int j=0; j&lt;svel; j++) mander[i][j]=spisak_imena[i][j];
            mander[i][svel] = '\0';
        }
        return vecvel;
    }
    catch(...){
        for(int i=0; i&lt;vecvel; i++) delete[] mander[i];
        delete[] mander;
        throw;
    }
    return 0;
}

<a name="1"></a><font color="#00FF00"><a href="match966-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

int OdbaciOptuzbu(char** &amp;mander, int brel, std::string s){
    bool pronadjen(false);
    for(int i=0; i&lt;brel; i++){
</font>        std::string pomocni;
        int j(0);
        while(mander[i][j] != '\0'){pomocni+=mander[i][j]; j++;}
        if(pomocni==s){ 
            pronadjen=true;
            delete[] mander[i];
            mander[i]=nullptr;
        }
    }
    if(!pronadjen){ 
        std::string greska{"Osoba sa imenom "};
        greska+=s;
        std::string nastavak_greske{" nije bila optuzena"};
        greska+=nastavak_greske;
        throw std::domain_error(greska);
    }
    int brojac(0);
    int brel2(0);
    for(int i=0; i&lt;brel; i++){ if(mander[i]==nullptr) brojac++;}
    if(brojac&gt;10){
        for(int i=0; i&lt;brel; i++){ if(mander[i]!=nullptr) brel2++;}
        try{
            char** milion(new char*[brel2]);
            int j(0);
            for(int i=0; i&lt;brel; i++){
                if(mander[i]==nullptr) continue;
                milion[j]=mander[i];
                j++;
            }
            delete[] mander;
            mander=milion;
            return brel2;
        }
        catch(...){}
    }
    return brel;
}

int DodajOptuzbu(char** &amp;mander, int brel, std::string s){
    int brojac(brel);
    int mjesto;
    int svel(s.size());
    bool pronadjeno(false);
    for(int i=0; i&lt;brel; i++){
        if(mander[i]==nullptr){
            mjesto=i;
            pronadjeno=true;
            break;
        }
    }
    if(pronadjeno){ 
        try{
            mander[mjesto]=new char[svel+1];
            for(int i=0; i&lt;svel; i++) mander[mjesto][i]=s[i];
            mander[mjesto][svel]='\0';
            return brel;
        }
        catch(std::bad_alloc){
            mander[mjesto]=nullptr;
            throw;
        }
    }
    else{
        try{
<a name="2"></a><font color="#0000FF"><a href="match966-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            char** izard=new char*[brojac+1];
            for(int i=0; i&lt;brojac; i++) izard[i]=mander[i];
</font>            try{
                izard[brojac]=new char[svel+1];
                for(int i=0; i&lt;svel; i++) izard[brojac][i]=s[i];
                izard[brojac][svel]='\0';
                delete[] mander;
                brojac++;
                mander=izard;
                return brojac;
            }
            catch(...){
                delete[] izard[brojac];
                delete[] izard;
                throw;
            }
        }
        catch(...){throw;}
    }
    return brojac;
}

void IzlistajOptuzbu(char** mander, int brel){
    for(int i=0; i&lt;brel; i++){
        if(mander[i]==nullptr) continue;
        int j(0);
        while(mander[i][j] != '\0'){ std::cout &lt;&lt; mander[i][j]; j++;}
        std::cout &lt;&lt; std::endl;
    }
}

int main ()
{
	int broj_krivaca;
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? " &lt;&lt; std::endl;
	std::cin &gt;&gt; broj_krivaca;
	std::vector&lt;std::string&gt; spisak;
	std::string ime;
	std::cout &lt;&lt; "Unesite potencijalne krivce: " &lt;&lt; std::endl;
	std::cin &gt;&gt; std::ws;
	for(int i=0; i&lt;broj_krivaca; i++) {
	    std::cin &gt;&gt; std::ws;
	    std::getline(std::cin, ime);
	    spisak.push_back(ime);
	}
	char** pocetak;
	int broj_elemenata(spisak.size());
	try{
	    broj_elemenata=PotencijalniKrivci(pocetak,spisak);
	}
	catch(...){
	    std::cout &lt;&lt;"Alokacija nije uspjela" &lt;&lt; std::endl;
	    return 0;
	}
	for(;;){
	    int opcija;
    	std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: " &lt;&lt; std::endl;
	    std::cin &gt;&gt; opcija;
	    if(opcija==2){
	        std::string optuzeni;
	        std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: " &lt;&lt; std::endl;
	        std::cin &gt;&gt; std::ws;
	        std::getline(std::cin, optuzeni);
	        try{
	            broj_elemenata=OdbaciOptuzbu(pocetak,broj_elemenata,optuzeni);}
	        catch(std::domain_error e){
	            //std::cout&lt;&lt; "Osoba sa imenom " &lt;&lt; e.what() &lt;&lt; " nije bila optuzena" &lt;&lt; std::endl;
	            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	        }
    	}
	    else if(opcija==1){
	        std::string novo_optuzeni;
	        std::cout &lt;&lt; "Unesite ime novog optuzenog: " &lt;&lt; std::endl;
	        std::cin &gt;&gt; std::ws;
<a name="3"></a><font color="#00FFFF"><a href="match966-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	        std::getline(std::cin, novo_optuzeni);
	        try{
	            broj_elemenata=DodajOptuzbu(pocetak,broj_elemenata,novo_optuzeni);
	        }
	        catch(...){
	            std::cout &lt;&lt;"nesto ne valja!";
</font>	        }
	    }
	    else if(opcija==3){ 
	        IzlistajOptuzbu(pocetak,broj_elemenata);
	    }
	    else if(opcija==0){ 
	        for(int i=0; i&lt;broj_elemenata; i++) delete[] pocetak[i];
	        delete[] pocetak;
	        break;
	    }
	    else continue;
	}
	
/*char **nizPotencijalnih;
  int n;
    std::vector&lt;std::string&gt; imena = {"Fudo", "Pero", "Meho", "Fata", "Bajro", "Luca", "Jovo", "Amina", "Elma", "Selma", "Admira", "Zora", "Ivanka"};
    try{
      n = PotencijalniKrivci( nizPotencijalnih, imena);
      n = OdbaciOptuzbu(nizPotencijalnih, n, "Meho");
    }
    catch(std::bad_alloc){
      std::cout &lt;&lt; "Neuspjela alokacija" &lt;&lt; std::endl;
    }
    catch(...){
      std::cout &lt;&lt; "Pogresan tip izuzetka" &lt;&lt; std::endl;
    }
    std::cout &lt;&lt; "New pozvan " &lt;&lt; brojac_new &lt;&lt; " puta,  delete [] pozvan " &lt;&lt; brojac_deleteniz &lt;&lt; " puta, a alocirano ukupno " &lt;&lt; alocirano &lt;&lt; " bajta i to redom: ";
    for (int i=0; i&lt;brojac_new;i++) std::cout &lt;&lt; alokacije[i] &lt;&lt; " ";
    dealociraj(nizPotencijalnih, n);
	*/
	
	return 0;
}</pre>
</body>
</html>
