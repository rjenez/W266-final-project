<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7791.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8923.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cstring&gt;
<a name="0"></a><font color="#FF0000"><a href="match44-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::cout;
using std::cin;
using std::vector;
using std::string;
int PotencijalniKrivci(char **&amp;ref,vector&lt;string&gt; vek)
{
int brojac(0);
//ref=nullptr;
	try
	{
		char **studenti(new char*[vek.size()]);
		ref=studenti;
		for(int i=0;i&lt;vek.size();i++)
		{
		studenti[i]=nullptr;
		}
		try
		{
			for(int i=0;i&lt;vek.size();i++)
			{
			studenti[i]=new char[vek[i].size()+1];
			brojac++;
			std::strcpy(studenti[i],vek[i].c_str());
			}
		}
		catch(std::bad_alloc)
		{
			for(int i=0;i&lt;vek.size();i++)
			{
				delete[] studenti[i];
			}
			delete[] studenti;
			return brojac;
		}
	ref=studenti;
	return brojac;
	}
	catch(std::bad_alloc)
	{
		return brojac;
	}

return brojac;
}
int OdbaciOptuzbu(char **&amp;ref,int vel,string ime)
{
	int broj(vel);
	bool da_ne(false);
	for(int i=0;i&lt;vel;i++)
	{
	if(ref[i]==ime)
	{
		delete[] ref[i];
		ref[i]=nullptr;
		da_ne=true;
	}
	}
	if(!da_ne)
	{
	string rec1{"Osoba sa imenom "};
	string rec2{" nije bila optuzena"};
	rec1+=ime;
	rec1+=rec2;
	throw std::domain_error(rec1);
	}
	int brojacnull(0);
	for(int i=0;i&lt;vel;i++)
	{
		if(ref[i]==nullptr)
		brojacnull++;
	}
	if(brojacnull&lt;=10)
	return broj;
	if(brojacnull&gt;10)
	{
		char **stud;
		try
		{
			stud=new char*[broj-brojacnull];
			for(int i=0;i&lt;broj-brojacnull;i++)
			stud[i]=nullptr;
			try
			{
				int brojac(0);
				for(int i=0;i&lt;broj;i++)
				{
					string koristan;
					if(ref[i]!=nullptr)
					{
					koristan=ref[i];
					stud[i-brojac]=new char[koristan.size()+1];
					stud[i-brojac]=ref[i];
					}
					else
					brojac++;
				}
			}
			catch(std::bad_alloc)
			{
				for(int i=0;i&lt;broj-brojacnull;i++)
				delete[] stud[i];
				delete[] stud;
			}
		}
		catch(std::bad_alloc)
		{
			return broj;
		}
		for(int i=0;i&lt;broj;i++)
		delete[] ref[i];
		delete[] ref;
		ref=stud;
	}
	return (broj-brojacnull);
}
int DodajOptuzbu(char **&amp;ref,int vel,string ime)
{
	char *pok;
	try
	{
		pok=new char[ime.size()+1];
		std::strcpy(pok,ime.c_str());
	}
	catch(...)
	{
		throw std::bad_alloc();
	}
	for(int i=0;i&lt;vel;i++)
	{
		if(ref[i]==nullptr)
		{
		std::strcpy(ref[i],pok);
		return vel;
		}
	}
	try
{
	char **studenti=new char*[vel+1];
	for(int i=0;i&lt;vel+1;i++)
	studenti[i]=nullptr;
	vector&lt;string&gt; svi;
	for(int i=0;i&lt;vel;i++)
	{
		svi.push_back(ref[i]);
	}
	try
	{
		for(int i=0;i&lt;vel+1;i++)
		{
			if(i==vel)
			{
			studenti[i]=new char[ime.size()+1];
			std::strcpy(studenti[i],ime.c_str());
			}
			else
			{
			studenti[i]=new char[svi[i].size()+1];
			std::strcpy(studenti[i],svi[i].c_str());
			}
		}
	for(int i=0;i&lt;vel;i++)
	delete[] ref[i];
	delete[] ref;
	ref=studenti;
	}
	catch(std::bad_alloc)
	{
		delete[] pok;
			for(int i=0;i&lt;(vel+1);i++)
			{
				delete[] studenti[i];
			}
			delete[] studenti;
			throw std::bad_alloc();
	}
}
	catch(std::bad_alloc)
	{
		delete[] pok;
		throw std::bad_alloc();
	}
vel+=1;
delete[] pok;
return vel;
}
void IzlistajOptuzbu(char **ref,int vel)
{
	for(int i=0;i&lt;vel;i++)
	{
		if(ref[i]!=nullptr)
		{
			cout&lt;&lt;ref[i]&lt;&lt;std::endl;
		}
	}
}
int main ()
{
int vel;
cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
cin&gt;&gt;vel;
cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
vector&lt;string&gt; imena;
cin.ignore(1000,'\n');
for(int i=0;i&lt;vel;i++)
{
	string ime;
	std::getline(cin,ime);
	imena.push_back(ime);
}
char **ref;
vel=PotencijalniKrivci(ref,imena);
int nvel=vel;
while(true)
{
	int opcija;
	cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
	cin&gt;&gt;opcija;
	cin.ignore(10000,'\n');
	if(opcija==0)
	{
	for(int i=0;i&lt;nvel;i++)	
	delete[] ref[i];
	delete[] ref;
	break;
	}
	if(opcija==1)
	{
		string novi;
		cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
		std::getline(cin,novi);
		nvel=DodajOptuzbu(ref,nvel,novi);
	}
	if(opcija==2)
	{
		string brisi;
		cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
		std::getline(cin,brisi);
		nvel=OdbaciOptuzbu(ref,nvel,brisi);
	}
	if(opcija==3)
	{
	    IzlistajOptuzbu(ref,nvel);
</font>	}
}
	return 0;
}</pre>
</body>
</html>
