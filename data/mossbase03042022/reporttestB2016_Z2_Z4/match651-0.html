<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4290.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student4290.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;
void Dealociraj(char **&amp;mat, int n){
 for(int i = 0; i &lt; n; i++) delete[] mat[i];
 delete[] mat;
}
int PotencijalniKrivci(char **&amp;pok,std::vector&lt;std::string&gt; v){
	int brojac(0);
	pok=nullptr;
	try{
<a name="2"></a><font color="#0000FF"><a href="match651-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		pok=new char*[v.size()];
		for(int i=0;i&lt;v.size();i++)pok[i]=nullptr;;
		try{
			for(int i=0;i&lt;v.size();i++){
</font>				pok[i]=new char[v[i].size()+1];
				brojac++;
			}
			for(int i=0;i&lt;v.size();i++){
				for(int j=0;j&lt;v[i].size();j++)
					pok[i][j]=v[i][j];
			}
			for(int i=0;i&lt;v.size();i++)pok[i][v[i].size()]='\0';
			return brojac;
		}
		catch(...){
			Dealociraj(pok,brojac);
			throw std::bad_alloc();
		}
	}
	catch(std::bad_alloc()){
		throw std::bad_alloc();
	}
}
int OdbaciOptuzbu(char **&amp;pok,int vel,std::string ime){
	bool ima=false;
	int pozicija;
	for(int i=0;i&lt;vel;i++){
		if(ime==pok[i]){
			ima=true;
			pozicija=i;
			break;
		}
	}
	if(ima){
		delete[]pok[pozicija];
		pok[pozicija]=nullptr;
	}
	else if(!ima){
		std::string poruka=std::string("Osoba sa imenom ")+ime+std::string(" nije bila optuzena");
		throw std::domain_error(poruka);
	}
	int br0(0);
	int brojac(0);
	for(int i=0;i&lt;vel;i++){
		if(pok[i]==nullptr)br0++;
		brojac++;
	}
	if(br0&lt;10)return brojac;
	char**p=nullptr;
<a name="3"></a><font color="#00FFFF"><a href="match651-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

	int a=brojac-br0;
	try{
		p=new char*[a];
		for(int i=0;i&lt;a;i++)p[i]=nullptr;
</font>		int i(0),j(0);
		try{
			while(i&lt;vel &amp;&amp; j&lt;a){
				if(pok[i]!=nullptr){
					p[j]=new char[std::strlen(pok[i])];
					std::strcpy(p[j],pok[i]);
					j++;
				}
				i++;
			}
			Dealociraj(pok,vel);
			pok=p;
			return a;
		}
		catch(std::bad_alloc()){
			Dealociraj(p,a);
			throw std::bad_alloc();
		}
	}
	catch(std::bad_alloc()){
		return brojac;
	}
}
int DodajOptuzbu(char **&amp;pok,int vel,std::string ime){
	bool ima=false;
	int pozicija0(-1);
	for(int i=0;i&lt;vel;i++){
		if(pok[i]==nullptr){
			ima=true;
			pozicija0=i;
			break;
		}
	}
	if(ima){
<a name="1"></a><font color="#00FF00"><a href="match651-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

		char *s=new char [ime.size()+1];
		for(int i=0;i&lt;ime.size();i++)s[i]=ime[i];
		s[ime.size()]='\0';
</font>		std::strcpy(pok[pozicija0],s);
		delete[] s;
		return vel;
	}
	else {
		char**p=nullptr;
		try{
			p=new char*[vel+1];
			for(int i=0;i&lt;=vel;i++)p[i]=nullptr;
			try{
				for(int i=0;i&lt;vel;i++){
					p[i]=new char[std::strlen(pok[i])+1];
					p[i][std::strlen(pok[i])]='\0';
				}
				for(int i=0;i&lt;vel;i++)std::strcpy(p[i],pok[i]);
				p[vel]=new char[ime.size()+1];
				for(int i=0;i&lt;ime.size();i++)p[vel][i]=ime[i];
				p[vel][ime.size()]='\0';
				Dealociraj(pok,vel);
				pok=p;
				return vel+1;
			}
			catch(std::bad_alloc()){
				Dealociraj(p,vel+1);
				throw std::bad_alloc();
			}
		}
		catch(std::bad_alloc()){
				return vel;
			}
		}
}
void IzlistajOptuzbu(char **pok,int vel){
<a name="0"></a><font color="#FF0000"><a href="match651-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

	for(int i=0;i&lt;vel;i++){
		if(pok[i]!=nullptr)std::cout&lt;&lt;pok[i]&lt;&lt;std::endl;	
	}
}
int main (){
	int n;
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti? "&lt;&lt;std::endl;
	std::cin&gt;&gt;n;
	std::vector&lt;std::string&gt; v(n+1);
</font>	std::cout&lt;&lt;"Unesite potencijalne krivce: "&lt;&lt;std::endl;
	for(int i=0;i&lt;v.size();i++){
		std::getline(std::cin,v[i]);
	}
	char **pok;
	int opcija(-1);
	try{
		int brojac=PotencijalniKrivci(pok,v);
		for(;;){
			std::cout&lt;&lt;"Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: "&lt;&lt;std::endl;
			std::cin&gt;&gt;opcija;
			std::cin.ignore(1000,'\n');
			switch(opcija){
				case 1:{
						std::cout&lt;&lt;"Unesite ime novog optuzenog: "&lt;&lt;std::endl;
						std::string optuzeni;
						std::getline(std::cin,optuzeni);
						try{
							brojac=DodajOptuzbu(pok,brojac,optuzeni);
						}
						catch(...){
							std::cout&lt;&lt;"Memorija!";
						}
						break;
				}
				case 2:{
						std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: "&lt;&lt;std::endl;
						std::string neki;
						std::getline(std::cin,neki);
						try{
							brojac=OdbaciOptuzbu(pok,brojac,neki);
						}
						catch(std::domain_error poruka){
							std::cout&lt;&lt;poruka.what();
						}
						catch(std::bad_alloc()){
							std::cout&lt;&lt;"Memorija!";
						}
						break;
				}
				case 3:{ IzlistajOptuzbu(pok,brojac);
						break;
				}
				
			}
			if(opcija==0)break;
		}
		Dealociraj(pok,brojac);
	}
	catch(...){std::cout&lt;&lt;"Memorija!";}
	return 0;
}</pre>
</body>
</html>
