<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7320.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student7320.cpp<p></p><pre>
/*B 16/17, ZadaÄ‡a 2, Zadatak 4
	
	NAPOMENA: i javni ATo-vi su dio postavke
	
	Autotestovi by Ivona Ivkovic. Sva pitanja, sugestije
	i prijave gresaka saljite na mail: iivkovic2@etf.unsa.ba
*/

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cstring&gt;
#include &lt;stdexcept&gt;

#define pb push_back

int PotencijalniKrivci(char ** &amp;p, std::vector&lt;std::string&gt; vect) {
	int ret = 0;
	char **mat = nullptr;
	try {
		mat = new char*[vect.size()]{};
		for (int i = 0; i &lt; vect.size(); i++) {
			mat[i] = new char[vect.at(i).length() + 1];
			for (int j = 0; j &lt; vect.at(i).length(); j++) {
				mat[i][j] = vect.at(i).at(j);
			}
			mat[i][vect.at(i).length()] = '\0';
			ret++;
		}
		
		p = mat;
		
		return ret;
	}
	catch(std::bad_alloc) {
		if (mat) for (int i = 0; i &lt; vect.size(); i++) delete[] mat[i];
		if (mat) delete[] mat;
		throw;
	}
}
int OdbaciOptuzbu(char ** &amp;p, int n, std::string s) {
	
	int idx_trazenog = -1;
	for (int i = 0; i &lt; n; i++) {
		char *pok = p[i];
		int micem = 0;
		bool isti = 1;
		
		while (*pok != '\0') {
			if (micem &gt; s.length()) {
				isti = 0;
				break;
			}
			if (*pok != s[micem]) {
				isti = 0;
				break;
			}
			pok++;
			micem++;
		}
		if (isti) {
			idx_trazenog = i;
			break;
		}
	}
	
	//std::cout &lt;&lt; "U OdbaciOptuzbu, idx_trazenog = " &lt;&lt; idx_trazenog &lt;&lt; "\n";
	
	if (idx_trazenog == -1) throw std::domain_error("Osoba sa imenom " + s + " nije bila optuzena");
	else {
		//std::cout &lt;&lt; "USAO!\n";
		delete[] p[idx_trazenog];
		p[idx_trazenog] = nullptr;
		int broj_nulla = 0;
		
		for (int i = 0; i &lt; n; i++)
			if (p[i] == nullptr) broj_nulla++;
		if (broj_nulla &lt;= 10) return n;
		else {
			char **mat = nullptr;
			try {
<a name="0"></a><font color="#FF0000"><a href="match898-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

				mat = new char*[n - broj_nulla]{};
				for (int i = 0; i &lt; n; i++) {
					if (p[i] != nullptr) {
						mat[i] = p[i];
</font>					}
				}
				p = mat;
				
				
				return n - broj_nulla;
			}
			catch (std::bad_alloc) {
				if (mat) for (int i = 0; i &lt; n - broj_nulla; i++) delete[] mat[i];
				if (mat) delete[] mat;
				throw;
			}
		}
	}
}
int Duzina(char *p) {
	int ret = 0;
	while (*p != '\0') {
		ret++;
		p++;
	}
	return ret;
}
int DodajOptuzbu(char ** &amp;p, int n, std::string s) {
	char *Kopirana = nullptr;
	try {
		char *Kopirana = new char[s.length() + 1]{};
		for (int i = 0; i &lt; s.length(); i++)
			Kopirana[i] = s.at(i);
		Kopirana[s.length()] = '\0';
		
		int idx_nulla = -1;
		for (int i = 0; i &lt; n; i++) {
			if (p[i] == nullptr) {
				idx_nulla = i; 
				break;
			}
		}
		
		//std::cout &lt;&lt; "U DodajOptuzbu, idx_nulla = " &lt;&lt; idx_nulla &lt;&lt; "\n";
		
		if (idx_nulla == -1) {			// KOPIRAJ CITAV NIZ PA DODAJ NOVI CLAN NA KRAJ
<a name="3"></a><font color="#00FFFF"><a href="match898-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

			char **mat = nullptr;
			try {
				mat = new char*[n + 1]{};
				for (int i = 0; i &lt; n; i++) {
					mat[i] = p[i];
</font>					//std::cout &lt;&lt; "U DodajOptuzbu, mat[" &lt;&lt; i &lt;&lt; "] = " &lt;&lt; mat[i] &lt;&lt; "\n";
				}
				
				mat[n] = new char[s.length() + 1]{};
				for (int i = 0; i &lt; s.length(); i++)
					mat[n][i] = Kopirana[i];
				mat[n][s.length()] = '\0';
				//std::cout &lt;&lt; "U DodajOptuzbu, mat[" &lt;&lt; n &lt;&lt; "] = " &lt;&lt; mat[n] &lt;&lt; "\n";
				delete[]p;
				p = mat;
				
				delete[] Kopirana;
				return n + 1;
			}
			catch (std::bad_alloc) {
				if (mat) for (int i = 0; i &lt; n + 1; i++) delete[] mat[i];
				if (mat) delete[] mat;
				delete[] Kopirana;
				throw;
			}
		}
		else {
			delete[] p[idx_nulla];
			p[idx_nulla] = Kopirana;
			delete[] Kopirana;
			
			return n;
		}
		
	}
	catch (std::bad_alloc) {
		delete[] Kopirana;
		throw;
	}
}

void IzlistajOptuzbu(char ** p, int n) {
	for (int i = 0; i &lt; n; i++) {
		if (p[i]) {
			char *pok = p[i];
			while (*pok != '\0') {
				std::cout &lt;&lt; *pok;
				pok++;
			}
			std::cout &lt;&lt; "\n";
		}
	}
}

int main()
{
	std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti?\n";
	int n, query; std::cin &gt;&gt; n;
	std::cin.ignore(10000, '\n');
	std::vector&lt;std::string&gt; vect;
	
	std::cout &lt;&lt; "Unesite potencijalne krivce: \n";
<a name="4"></a><font color="#FF00FF"><a href="match898-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	for (int i = 0; i &lt; n; i++) {
		std::string Temporarni;
		std::getline(std::cin, Temporarni);
		vect.pb(Temporarni);
</font>	}
	
	char ** p = nullptr;
	int Alocirano = PotencijalniKrivci(p, vect);
	
	while (1) {
		//std::cout &lt;&lt; "BROJ CLANOVA = " &lt;&lt; n &lt;&lt; "\n";
		
		std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
		std::cin &gt;&gt; query;
		std::cin.ignore(10000, '\n');
		
		if (query == 0) {
			
			for (int i = 0; i &lt; n; i++) if (p[i]) delete[] p[i];
			if (p) delete[] p;
			break;
		}
<a name="1"></a><font color="#00FF00"><a href="match898-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

		else if (query == 1) {
			std::cout &lt;&lt; "Unesite ime novog optuzenog: \n";
			std::string ImeOptuzenog;
			std::getline(std::cin, ImeOptuzenog);
			try { n = DodajOptuzbu(p, n, ImeOptuzenog); }
</font>			catch(std::bad_alloc c) { std::cout &lt;&lt; "Izuzetak: " &lt;&lt; c.what(); }
			catch(std::domain_error c) { std::cout &lt;&lt; "Izuzetak: " &lt;&lt; c.what(); }
		}
<a name="2"></a><font color="#0000FF"><a href="match898-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

		else if (query == 2) {
			std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: \n";
			std::string ImeIzbacenog;
			std::getline(std::cin, ImeIzbacenog);
			try { n = OdbaciOptuzbu(p, n, ImeIzbacenog); }
</font>			catch(std::bad_alloc c) { std::cout &lt;&lt; "Izuzetak: " &lt;&lt; c.what(); }
			catch(std::domain_error c) { std::cout &lt;&lt; "Izuzetak: " &lt;&lt; c.what(); }
		}
		else if (query == 3) {
			IzlistajOptuzbu(p, n);
		}
	}
	return 0;
}</pre>
</body>
</html>
