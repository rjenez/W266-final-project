<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8428.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student8428.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match724-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

int PotencijalniKrivci(char **&amp;p, std::vector&lt;std::string&gt; v)
{
	try
	{
		p = new char*[v.size()];
		for(int i(0); i &lt; v.size(); i++)
			p[i] = nullptr;
		try
		{
			for(int i(0); i &lt; v.size(); i++)
				p[i] = new char[v[i].size() + 1];
</font>				
			for(int i(0); i &lt; v.size(); i++)
			{
				int j = 0;
				for(; j &lt; v[i].size(); j++)
					p[i][j] = v[i][j];
				p[i][j] = '\0';	
			}
			return v.size();
		}
		catch(std::bad_alloc)
		{
			for(int i(0); i &lt; v.size(); i++)
				delete[] p[i];
			delete [] p;
			throw;
		}
	}
	catch(std::bad_alloc)
	{
		p = nullptr;
		throw;
	}
}
bool ProvjeriIsteRijeci(char *p, std::string ime)
{
	int brojac = 0;
	while(p[brojac] != '\0')
		brojac++;
	if(brojac != ime.size())
		return false;
	for(int i(0); i &lt; brojac; i++)
	{
		if(p[i] == ime[i])
			continue;
		else
			return false;
	}
<a name="2"></a><font color="#0000FF"><a href="match724-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

	return true;
}
int OdbaciOptuzbu(char **&amp;p, int vel, std::string prodavaci)
{
	bool izmjena = false;
	for(int i(0); i &lt; vel; i++)
	{
		if(prodavaci[0] == p[i][0])
</font>		{
			izmjena = ProvjeriIsteRijeci(p[i], prodavaci);
			if(izmjena == true)
			{
				delete[] p[i];
				p[i] = nullptr;
				break;
			}
		}
		if(izmjena == true)
			break;
	}
	if(izmjena == false)
	{
		std::string s = "Osoba sa imenom " + prodavaci +" nije bila optuzena";
		throw std::domain_error(s);
	}
	int brojac = 0;
	for(int i(0); i &lt; vel; i++)
		if(p[i] == nullptr)
			brojac++;
	if(brojac &gt; 10)
	{
		std::vector&lt;std::string&gt; imena;
		for(int i(0); i &lt; vel; i++)
		{
			if(p[i] != nullptr)
			{
				std::string temp;
				int slova = 0;
				while(p[i][slova] != '\0')
				{
					temp += p[i][slova];
					slova++;
				}
				imena.push_back(temp);
			}
		}
		try
		{
			char ** temp;
			int nova_vel = PotencijalniKrivci(temp, imena);
			for(int i(0); i &lt; vel; i++)
				delete [] p[i];
			delete [] p;
			p = temp;
			return nova_vel;
		}
		catch(std::bad_alloc)
		{
			return vel;
		}
	}
	return vel;
}
int DodajOptuzbu(char **&amp;p, int vel, std::string prodavaci)
{
	char *novi;
	try
	{
		novi = new char[prodavaci.size() + 1];
	}
	catch(std::bad_alloc)
	{
		throw;
	}
	int nul = 0;
	for( ; nul &lt; prodavaci.size(); nul++)
		novi[nul] = prodavaci[nul];
	novi[nul] = '\0';
	
	for(int i(0); i &lt; vel; i++)
		if(p[i] == nullptr)
		{
			p[i] = novi;
			return vel;
		}
	delete [] novi;
	std::vector&lt;std::string&gt; imena;
	for(int i(0); i &lt; vel; i++)
	{
		std::string temp;
		int slova = 0;
		while(p[i][slova] != '\0')
		{
			temp += p[i][slova];
			slova++;
		}
		imena.push_back(temp);
	}
	imena.push_back(prodavaci);
	try
		{
			char ** temp;
			int nova_vel = PotencijalniKrivci(temp, imena);
			for(int i(0); i &lt; vel; i++)
				delete[] p[i];
			delete [] p;
			p = temp;
			return nova_vel;
		}
		catch(std::bad_alloc)
		{
			throw;
		}
}
<a name="3"></a><font color="#00FFFF"><a href="match724-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

void IzlistajOptuzbu(char **p, int vel)
{
	for(int i(0); i &lt; vel; i++)
	{
		if(p[i] == nullptr)
			continue;
		int broj = 0;
</font>		while(p[i][broj] != '\0')
		{
			std::cout &lt;&lt; p[i][broj];
			broj++;
		}
		std::cout &lt;&lt; std::endl;
	}
}
int main ()
{
	try
	{
		std::cout &lt;&lt; "Koliko potencijalnih krivaca zelite unijeti? \n";
		int br;
		std::cin &gt;&gt; br;
		std::cout &lt;&lt; "Unesite potencijalne krivce: \n";
		std::cin.clear();
		std::cin.ignore(10000, '\n');
<a name="1"></a><font color="#00FF00"><a href="match724-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		std::vector&lt;std::string&gt; krivci;
		for(int i(0); i &lt; br; i++)
		{
			std::string s;
			std::getline(std::cin, s);
			krivci.push_back(s);
</font>		}
		char **ListaOptuzenih = nullptr;
		int vel = PotencijalniKrivci(ListaOptuzenih, krivci);
		while(1)
		{
			std::cout &lt;&lt; "Odaberite opciju: 1 za unos novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenih, 0 za kraj: \n";
			int n;
			std::cin &gt;&gt; n;
			if(n == 0)
				break;
			if(n == 1)
			{
				try
				{
					std::string temp;
					std::cout &lt;&lt; "Unesite ime novog optuzenog: ";
					std::cin.clear();
					std::cin.ignore(10000, '\n');
					std::getline(std::cin, temp);
					vel = DodajOptuzbu(ListaOptuzenih, vel, temp);
				}
				catch(std::bad_alloc)
				{
					
				}
			}
			if(n == 2)
			{
				try
				{
					std::string temp2;
					std::cout &lt;&lt; "Unesite ime koje zelite izbaciti: ";
					std::cin.clear();
					std::cin.ignore(10000, '\n');
					std::getline(std::cin, temp2);
					vel = OdbaciOptuzbu(ListaOptuzenih, vel, temp2);
				}
				catch(std::domain_error e)
				{
					std::cout &lt;&lt; e.what();
				}
			}
			if(n == 3)
			{
				IzlistajOptuzbu(ListaOptuzenih, vel);
			}
		}
		if( ListaOptuzenih != nullptr)
		{
			for(int i = 0; i &lt; vel; i++)
				delete [] ListaOptuzenih[i];
			delete [] ListaOptuzenih;
		}
			
		return 0;
	}
	catch(std::bad_alloc)
	{
		std::cout &lt;&lt; "Nema dovoljno memorije!";
	}
}</pre>
</body>
</html>
