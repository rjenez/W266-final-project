<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6953.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z2/Z4/student6953.cpp<p></p><pre>
#include&lt;iostream&gt;
#include&lt;stdexcept&gt;
#include&lt;vector&gt;
#include&lt;string&gt;

int PotencijalniKrivci(char **&amp;p, std::vector&lt;std::string&gt; imena){
	char **pok(nullptr);
	pok=new char *[imena.size()];
	p=pok;
	for(int i=0; i&lt;imena.size(); i++) pok[i]=nullptr;
	try {
<a name="1"></a><font color="#00FF00"><a href="match631-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

		for(int i=0; i&lt;imena.size(); i++) pok[i]=new char[imena[i].size()+1];
	//p=pok1;
		for(int i=0; i&lt;imena.size(); i++) {
</font>			for(int j=0; j&lt;imena[i].size(); j++) {
				pok[i][j]=imena[i][j];
			}
			pok[i][imena[i].size()+1]='\0';
		}
	} 
<a name="4"></a><font color="#FF00FF"><a href="match631-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	catch(std::bad_alloc) {
		for(int i=0; i&lt;imena.size(); i++) delete [] pok[i]; 
		delete [] pok; 
</font>		throw;
	}
		return imena.size();
}
int OdbaciOptuzbu(char **&amp;pok, int &amp;vel, std::string s)
{
	int ima=0;
	int k=0;
//	char**pok=p;
	for(int i=0; i&lt;vel; i++) {
		k=0;
		while( k&lt;s.size() &amp;&amp; *pok[i]==s[k]) {
			pok[i]++;
			k++;
		}
		if(*pok[i]=='\0') {
			ima=1; 
			pok[i]=pok[i]-k;
			*pok[i]='\0';
			pok[i]=nullptr;
			delete [] pok [i];
			pok[i]=nullptr;
		}
	}
	int br=0;
	for(int i=0; i&lt;vel; i++) {
		if(pok[i]==nullptr) br++;
	}
	int novavel=vel;
	if(ima==0) throw std::domain_error("Osoba sa imenom  nije bila optuzena");
	if(br&gt;10) {
		k=0; 
		try {
			char**pok1=new char*[vel-br];
			novavel=vel-br;
			for(int i=0; i&lt;vel; i++) {
				if(pok[i]!=nullptr) {
					pok1[k]=pok[i];
					k++;
					
				}
			}
			for(int i=0; i&lt;vel;i++)pok[i]=nullptr; 
			delete [] pok;
			pok=nullptr; 
			pok=pok1;
		} 
		catch (std::bad_alloc) {throw;}
	}
	return novavel;
}
int DodajOptuzbu(char **&amp; pok, int &amp;vel, std::string s){
	int zadnja1=0; 
	char *p(nullptr); 
	char **pok1(nullptr);
	int novavel1=vel;
	try{
<a name="2"></a><font color="#0000FF"><a href="match631-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

		p=new char[s.length()+1]; 
		for(int i=0; i&lt;s.length(); i++){
			p[i]=s[i];
		}
		p[s.length()+1]='\0'; 
</font>		int b=0; 
		for(int i=0; i&lt;vel; i++){
			if(pok[i]==nullptr){pok[i]=p; b=1; break; } 
		}
		if(b==0){
			
			try{
				
<a name="0"></a><font color="#FF0000"><a href="match631-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

				pok1=new char *[vel+1]; 
				for(int i=0; i&lt;vel; i++){
					pok1[i]=pok[i]; 
					pok[i]=nullptr; 
					delete [] pok[i]; 
</font>				}
				pok1[vel+1]=p; 
				
				novavel1=novavel1+1; 
				pok=pok1;
				
			}
			catch (std::bad_alloc){
				delete [] p;
				throw; 
			}
		}
	}
		catch (std::bad_alloc){
<a name="3"></a><font color="#00FFFF"><a href="match631-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

		throw; 
	}

	return novavel1+1; 
}
void IzlistajOptuzbu(char **pok, int vel){
	for(int i=0; i&lt;vel; i++){
		if(pok[i]!=nullptr){
</font>		int j=0; 
			while (pok[i][j]!='\0'){
			 std::cout&lt;&lt;pok[i][j]; 
			 j++; 
			}
			std::cout&lt;&lt;std::endl; 
		}
	}
}
int main(){
	std::cout&lt;&lt;"Koliko potencijalnih krivaca zelite unijeti?";
	int n; 
	std::cin&gt;&gt;n; 
	char**pok; 
	std::cin.ignore(1000, '\n'); 
	std::vector&lt;std::string&gt; imena; 
	std::cout&lt;&lt;"Unesite potencijalne krivce: "; 
	for(int i=0; i&lt;n; i++){
		std::string s; 
		std::getline(std::cin, s); 
		imena.push_back(s); 
	}
	try{
		int brojkrivaca=PotencijalniKrivci(pok, imena); 
	for(;;){
		std::cout&lt;&lt;"Odaberite opciju: 1 za novog optuzenog, 2 za brisanje nekog optuzenog 3 za izlistavanje optuzenog, 0 za kraj: \n"; 
		int broj; 
		std::cin&gt;&gt;broj; 
		int br=0; 
		if(broj==1){
			std::cout&lt;&lt;"Unesite ime novog optuzenog: \n"; 
			std::cin.ignore(1000, '\n'); 
			std::string ime; 
			std::getline(std::cin, ime); 
			try{
				 brojkrivaca=DodajOptuzbu(pok, brojkrivaca,  ime); 
			}
			catch(std::bad_alloc){
				throw; 
			}
		}
		else if(broj==2){
				std::cout&lt;&lt;"Unesite ime koje zelite izbaciti: \n"; 
				std::cin.ignore(1000, '\n'); 
			std::string ime; 
			std::getline (std::cin, ime); 
			try{
				 brojkrivaca=OdbaciOptuzbu(pok, brojkrivaca, ime); 
			}
			catch(std::bad_alloc){
				throw; 
			}
			catch(std::domain_error iz){
				std::cout&lt;&lt;iz.what(); 
			}
		}
		else if (broj==3){
			try{
				IzlistajOptuzbu(pok, brojkrivaca); 
			}
			catch(std::bad_alloc){
				throw; 
			}
		}
		else if(broj==0) break; 
		
	}
}
	catch(std::bad_alloc){
		std::cout&lt;&lt;"Nema dovoljno memorije!"; 
	}
	return 0; 
}
</pre>
</body>
</html>
