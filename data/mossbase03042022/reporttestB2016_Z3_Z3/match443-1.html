<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z3/student4192.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z3/student8631.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match443-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 3
#include &lt;iostream&gt;
#include&lt;iomanip&gt;
#include&lt;stdexcept&gt;
#include&lt;vector&gt;
#include&lt;new&gt;
using namespace std; 

template &lt;typename tip&gt;
struct Matrica
{
    int red, kolona; 
    tip **pok=nullptr; 
}; 
template &lt;typename tip&gt;
</font>void DealocirajM(Matrica&lt;tip&gt;mat)
{
    if(!mat.pok) return; 
    for(int i=0; i&lt;mat.red; i++) 
    delete[] mat.pok[i]; 
    delete []mat.pok; 
    mat.pok =nullptr; 
}
template &lt;typename tip&gt;
Matrica&lt;tip&gt;StvoriMatricu(int red, int kolona) 
{
    Matrica&lt;tip&gt;mat; 
    mat.red=red; 
<a name="3"></a><font color="#00FFFF"><a href="match443-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    mat.kolona=kolona;
     mat.pok=nullptr; 
    try{
    mat.pok=new tip*[red]; 
    for(int i=0; i&lt;red; i++)  mat.pok[i]=nullptr; 
</font>    try{
    for(int i=0; i&lt;red; i++)  mat.pok[i]=new tip[kolona]; 
     for(int i=0; i&lt;red; i++) 
      { for(int j=0; j&lt;kolona; j++) 
        {mat.pok[i][j]=0; 
        }}}
        catch(...) { throw; }
    }
    catch(...)  {
        DealocirajM&lt;tip&gt;(mat);
        throw; }
      return mat; 
    }
    
template &lt;typename tip&gt;
void UnesiMatricu(char ime_matrice, Matrica&lt;tip&gt;&amp;mat) 
{
<a name="1"></a><font color="#00FF00"><a href="match443-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    for(int i=0; i&lt;mat.red; i++)
     for(int j=0; j&lt;mat.kolona; j++) 
     {cout&lt;&lt;ime_matrice&lt;&lt;"("&lt;&lt;i+1&lt;&lt;","&lt;&lt;j+1&lt;&lt;") = ";
     cin&gt;&gt;mat.pok[i][j]; 
}
 }
 
 template &lt;typename tip&gt;
void Pomocna( Matrica&lt;tip&gt;&amp;b, Matrica&lt;tip&gt; a)
</font>{
    DealocirajM&lt;tip&gt;(b); 
    try{
    b=Napravikopiju(a);
    }
   catch(...) {throw; }
}
 template &lt;typename tip&gt;
 void IspisiMatricu(const Matrica&lt;tip&gt;&amp;mat, int sirina_ispisa=10, int preciznost=6,bool treba_brisati=false)
 {
<a name="0"></a><font color="#FF0000"><a href="match443-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

  for(int i=0; i&lt;mat.red; i++)
    { for(int j=0; j&lt;mat.kolona; j++) 
      cout&lt;&lt;setw(sirina_ispisa)&lt;&lt;setprecision(preciznost)&lt;&lt;mat.pok[i][j]; 
      cout&lt;&lt;endl; 
    }
    if(treba_brisati){
        DealocirajM(mat); 
    }
 }
  template &lt;typename tip&gt;
Matrica&lt;tip&gt; ZbirMatrica(const Matrica&lt;tip&gt; &amp;a, const Matrica&lt;tip&gt; &amp;b)
{
    if(a.red!=b.red || a.kolona!=b.kolona)
    throw domain_error ("Matrice nemaju jednake dimenzije!"); 
    auto c(StvoriMatricu&lt;tip&gt;(a.red, a.kolona));
</font>    for(int i=0; i&lt;c.red; i++)
     for(int j=0; j&lt;c.kolona; j++)
     c.pok[i][j]=a.pok[i][j]+b.pok[i][j];  
     return c; 
    
}

template &lt;typename tip&gt;
Matrica&lt;tip&gt; ProduktMatrica(const Matrica&lt;tip&gt; &amp;a, const Matrica&lt;tip&gt; &amp;b) 
{
     if(a.red !=b.kolona)  throw domain_error("Matrica nisu saglasne za mnozenje");
    try{
    Matrica&lt;tip&gt;c=StvoriMatricu&lt;tip&gt;(a.red, b.kolona); 
    for(int i=0;i&lt;a.red;i++)
        for(int j=0;j&lt;a.kolona;j++)
            c.pok[i][j]=0;
     

    for(int i=0; i&lt;c.red; i++) 
    { for(int j=0; j&lt;c.kolona; j++) 
      {for(int k=0; k&lt;c.red; k++)
       { c.pok[i][j]+=a.pok[i][k]*b.pok[k][j];
      }
    }
    }
      return c; 
}
catch(...) { throw; }
}
template &lt;typename tip&gt;
Matrica &lt;tip&gt;StepenMatrice (Matrica&lt;tip&gt; a, int broj)
{  
    try{ 
        
    for(int i=0; i&lt;a.red ; i++) 
       for(int j=0; j&lt;a.kolona; j++)  a.pok[i][j]=0; 
    Matrica&lt;tip&gt;c=Napravikopiju(a); 
    
    if(broj&gt;=2) {
        for(int i=2; i&lt;=broj; i++) {
        Pomocna&lt;tip&gt;(c, ProduktMatrica&lt;tip&gt;(c,a)); 
        }
        return c; 
    }
<a name="4"></a><font color="#FF00FF"><a href="match443-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    if(broj==1) return c; 
    if(broj==0)
    {
        for(int i=0; i&lt;c.red; i++) 
         for(int j=0; j&lt;c.kolona; j++) 
           if(i==j) c.pok[i][j]=1; 
</font>        else c.pok[i][j]=0; 
        return c; 
         }
    }
        catch(...) {throw;} 

}
template &lt;typename tip&gt;
Matrica&lt;tip&gt; ProizvodSaPolinomom( Matrica&lt;tip&gt; a, double broj) 
{ try{
    Matrica&lt;tip&gt; c=StvoriMatricu&lt;tip&gt;(a.red,a.kolona); 
    for(int i=0; i&lt;a.red; i++) {
     for(int j=0; j&lt;a.kolona; j++) {
         c.pok[i][j]=broj*a.pok[i][j]; 
     }
    }
     return c; 
}
catch(...) { throw; }
}
template &lt;typename tip&gt;
Matrica&lt;tip&gt; Napravikopiju(Matrica&lt;tip&gt; a) 
{
    Matrica&lt;tip&gt;c; 
    c.red=a.red; c.kolona=a.kolona; 
    try{
    c.pok=new tip *[c.red]; 
    try{
    for(int i=0; i&lt;c.red; i++) {
      c.pok[i]=new tip[c.kolona]; 
    }
    for(int i=0; i&lt;c.red; i++) 
      {for(int j=0; j&lt;c.kolona; j++) 
        { c.pok[i][j]=a.pok[i][j]; 
    }
}
    return c; 
}
catch(...) {
    throw; 
}}
catch(...) {
    DealocirajM&lt;tip&gt;(c); throw; 
}
}


template &lt;typename tip&gt;
Matrica&lt;tip&gt; MatricniPolinom(Matrica&lt;tip&gt; &amp;a, vector&lt;double&gt;v )
{/* if(v.size()==0)
{    Matrica&lt;tip&gt; c;  
    for(int i=0; i&lt;c.red; i++) 
     for(int j=0; j&lt;c.red; j++) a.pok[i][j]==0; 
    return c; 
} // STA AKO JE PRAZAN VEKTOR*/
if(a.red != a.kolona) throw domain_error("Matrica mora biti kvadratna"); 
bool nula=true; 
try{
    
    Matrica&lt;tip&gt; sum=StvoriMatricu&lt;tip&gt;(a.red, a.kolona); 
for(int i=0; i&lt;v.size(); i++) 
      {
          if(v[0]!=0) nula=false; 
      }
      
      if(nula) return sum; 
    for(int i=0; i&lt;v.size(); i++) 
      {
        Matrica&lt;tip&gt; d=StepenMatrice&lt;tip&gt;(a, i); 
        Matrica&lt;tip&gt; e=ProizvodSaPolinomom&lt;tip&gt;(d, v[i]); 
        Pomocna&lt;tip&gt;(sum, ZbirMatrica&lt;tip&gt;(sum, e)); 
        DealocirajM(d); DealocirajM(e); 
        DealocirajM(a); 
    }
 return sum;    
}
catch(...) {
throw; }
}

int main ()
{
    Matrica&lt;double&gt;a,b,c; 
    int m; 
    cout&lt;&lt;"Unesite dimenziju kvadratne matrice: "; 
    cin&gt;&gt;m;
    
    try{
        Matrica&lt;double&gt;a=StvoriMatricu&lt;double&gt;(m,m); 
        //Matrica&lt;double&gt;b=StvoriMatricu&lt;double&gt;(m,m);
        cout&lt;&lt;"Unesite elemente matrice A: "; 
        UnesiMatricu('A', a);
        cout&lt;&lt;"Unesite red polinoma: ";
        int redpol; 
        cin&gt;&gt;redpol; 
        cout&lt;&lt;"Unesite koeficijente polinoma: ";
        vector&lt;double&gt;v(redpol+1); 
        for(int i=0; i&lt;v.size(); i++) cin&gt;&gt;v[i]; 
        IspisiMatricu&lt;double&gt;(MatricniPolinom&lt;double&gt;(a,v),10, 6);
    }
    
    catch(bad_alloc)
    {
        cout&lt;&lt;"Nema dovoljno memorije!\n"; 
        
    }
    DealocirajM(a); DealocirajM(b); DealocirajM(c);  
	return 0;
}</pre>
</body>
</html>
