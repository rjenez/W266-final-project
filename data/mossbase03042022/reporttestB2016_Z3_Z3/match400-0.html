<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z3/student4639.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z3/student4639.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 3
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include&lt;iomanip&gt;

template&lt;typename TipElementa&gt;
//....STRUKTURA....
struct Matrica {
    int br_redova,br_kolona;
<a name="1"></a><font color="#00FF00"><a href="match400-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    TipElementa ** elementi = nullptr;
};
 

template&lt;typename TipElementa&gt;
//...F1
void UnistiMatricu (Matrica &lt;TipElementa&gt; mat ){

    if(!mat.elementi) return;
    //...BRISI ONO NA STA POKAZUJE DVOSTRUKI POKAZIVAC 
    for(int i (0); i &lt; mat.br_redova; i++) delete[] mat.elementi[i];
    //....BRISI NIZ POKAZIVACA
    delete[] mat.elementi;
    //...POKAZIVAC STAVI NA NULL
    mat.elementi = nullptr;
</font>} 

template&lt;typename TipElementa&gt;
//....F2
Matrica&lt;TipElementa&gt; StvoriMatricu (int br_redova,int br_kolona ){
    
    Matrica&lt;TipElementa&gt;mat;
<a name="0"></a><font color="#FF0000"><a href="match400-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_11.gif"/></a>

    mat.br_redova = br_redova;
    mat.br_kolona = br_kolona;
    
    mat.elementi = new TipElementa * [br_redova];
    for(int i (0); i &lt; br_redova;i++) mat.elementi[i] = nullptr ;
    
    try{
        for(int i (0); i &lt; br_redova;i++)
            mat.elementi[i] = new TipElementa [br_kolona];
    }catch(...){
        UnistiMatricu(mat);
        throw;
    }
    
    
    return mat;
}

//...F3...
template&lt;typename TipElementa&gt;
void UnesiMatricu (char ime_matrice,Matrica&lt;TipElementa&gt; &amp;mat){
    
    for(int i (0); i &lt; mat.br_redova; i++){
        for(int j (0); j &lt; mat.br_kolona; j++){
            
            std::cout&lt;&lt;ime_matrice &lt;&lt; "(" &lt;&lt; i + 1 &lt;&lt; ","&lt;&lt; j + 1 &lt;&lt; ") = ";
</font>            std::cin &gt;&gt; mat.elementi[i][j];
        }
    }
}


/*....F4
template&lt;typename TipElementa&gt;
void IspisiMatricu (const Matrica&lt;TipElementa&gt;&amp;mat , int sirina_ispisa){
    
    for(int i (0); i &lt; mat.br_redova;i++){
        for(int j (0); j &lt; mat.br_redova;j++){
            std::cout&lt;&lt;std::setw(sirina_ispisa) &lt;&lt; mat.elementi[i][j];
        }
        std::cout&lt;&lt;std::endl;
    }
}
*/

template&lt;typename TipElementa&gt;
void IspisiMatricu (Matrica&lt;TipElementa&gt;mat , int sirina_ispisa,int preciznost = 6, bool treba_brisati = false){
    
    if(mat.elementi == nullptr)
        return;
    
    for(int i (0); i &lt; mat.br_redova;i++){
        for(int j (0); j &lt; mat.br_kolona;j++){
            if(&amp;mat.elementi[i] != nullptr) {
                std::cout&lt;&lt;std::setw(sirina_ispisa) &lt;&lt;std::setprecision(preciznost)&lt;&lt; mat.elementi[i][j];
            }
        }
        std::cout&lt;&lt;std::endl;
    }
    
    if(treba_brisati){ UnistiMatricu(mat);}
}

//...F5
template&lt;typename TipElementa&gt;
Matrica&lt;TipElementa&gt; ZbirMatrica (const Matrica&lt;TipElementa&gt; &amp;m1, const Matrica &lt;TipElementa&gt; &amp;m2){
    
    if(m1.br_redova != m2.br_redova || m1.br_kolona != m2.br_kolona)
        throw std::domain_error ("Matrice nemaju jednake dimenzije !");
        
    auto m3 (StvoriMatricu&lt;TipElementa&gt;(m1.br_redova,m1.br_kolona));
    
    for(int i (0); i &lt; m1.br_redova; i++){
        for(int j (0); j &lt; m1.br_kolona;j++){
            m3.elementi[i][j] = m1.elementi[i][j] + m2.elementi[i][j];
        }
    }
    
    
    return m3;
}

//....f6
template&lt;typename TipElementa&gt;
Matrica&lt;TipElementa&gt; ProduktMatrica (const Matrica&lt;TipElementa&gt; &amp;m1, const Matrica &lt;TipElementa&gt; &amp;m2){
    //...SAGLASNE ZA MNOZENJE
    if(m1.br_kolona != m2.br_redova)
        throw std::domain_error("Matrice nisu saglasne za mnozenje\n");
    //...PRODUKT MATRICA PREDAVANJE 3A
auto m3 = StvoriMatricu&lt;TipElementa&gt;(m1.br_redova,m2.br_kolona);

    for(int i (0); i &lt; m1.br_redova; i++){
        for(int j (0); j &lt; m2.br_kolona;j++){
              for(int k = 0; k &lt; m2.br_redova; k++){
                m3.elementi[i][j] += m1.elementi[i][k] * m2.elementi[k][j];
            }
        }
    }
  
    return m3;
}

template&lt;typename TipElementa&gt;
Matrica&lt;TipElementa&gt; PomnoziSkalarom(double skalar,const Matrica &lt;TipElementa&gt; &amp;mat){

    auto m3 = StvoriMatricu&lt;TipElementa&gt;(mat.br_redova,mat.br_kolona);
    for(int i (0); i &lt; mat.br_redova;i++){
<a name="3"></a><font color="#00FFFF"><a href="match400-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        for(int j (0); j &lt; mat.br_kolona; j++){
            m3.elementi[i][j] = skalar * mat.elementi[i][j];
</font><a name="4"></a><font color="#FF00FF"><a href="match400-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        }
    }
    
    return m3;
}


template&lt;typename TipElementa&gt;
Matrica &lt;TipElementa&gt; MatricniPolinom ( const Matrica&lt;TipElementa&gt; &amp;mat,std::vector&lt;double&gt;&amp;koeficijenti){
</font>    
    if(mat.br_redova != mat.br_kolona)
        throw std::domain_error("Matrica mora biti kvadratna\n");
        
    //..UKOLIKO JE VEKTOR PRAZAN FUNKCIJA VRACA MATRICU ISTOG FORMATA KAO I A CIJI SU ELEMENTI SVE NULE
    if(koeficijenti.size() == 0){
        auto nula = StvoriMatricu&lt;TipElementa&gt;(mat.br_redova,mat.br_kolona);
<a name="5"></a><font color="#FF0000"><a href="match400-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        for(int i (0); i &lt; nula.br_redova; i++){
            for(int j (0); j &lt; nula.br_kolona; j++){
                nula.elementi[i][j] = 0;
</font>            }
        }
        
        return nula;
        //.... UNISTI NULA MATRICU......... TJ UNISITI MATRICU KOJA SE VRATI KAO REZULTAT FUNKCIJE

    }
  //  std::cout&lt;&lt;"koe"&lt;&lt;koeficijenti.size();
    //... STVARA JEDINICNU MATRICU I UNISTI JE 
<a name="2"></a><font color="#0000FF"><a href="match400-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    Matrica&lt;TipElementa&gt; jedinicna  = StvoriMatricu&lt;TipElementa&gt; (mat.br_redova,mat.br_kolona);
    for(int i (0); i &lt; jedinicna.br_redova; i++){
        for(int j (0); j &lt; jedinicna.br_kolona;j++){
            if( i == j ) {jedinicna.elementi[i][j] = 1;}
</font>            else {jedinicna.elementi[i][j] = 0;}
        }
    }
    
      //std::cout&lt;&lt;"Ispisi jedinicnu matricu:\n";
      // IspisiMatricu(jedinicna,7);
    
    
    Matrica&lt;TipElementa&gt; polinom = StvoriMatricu&lt;TipElementa&gt;(mat.br_redova,mat.br_kolona);
    //...UNISTI STEPEN MATRICU 
    auto stepen = StvoriMatricu&lt;TipElementa&gt; (jedinicna.br_redova,jedinicna.br_kolona); 
    //...PREUSMJERI POKAZIVACE SA STEPEN NA JEDINICNU MATRICU...
    //  stepen = jedinicna; PLITKA KOPIJA
        stepen = jedinicna;
    //.....
    
    
    Matrica&lt;TipElementa&gt; a, b;
    
    
    polinom = PomnoziSkalarom&lt;TipElementa&gt;(koeficijenti[0],jedinicna);
    for(int i (1); i &lt; koeficijenti.size(); i++){
      
        polinom = ZbirMatrica&lt;TipElementa&gt;(polinom,a = PomnoziSkalarom&lt;TipElementa&gt;(koeficijenti[i], b = ProduktMatrica&lt;TipElementa&gt;(stepen,mat)));
         stepen = ProduktMatrica &lt;TipElementa&gt;(stepen,mat);
         
      
        
    }
    
    
    UnistiMatricu(a); UnistiMatricu(b),UnistiMatricu(stepen);UnistiMatricu(jedinicna);
    return polinom;
}

int main ()
{
    /*
    Matrica&lt;double&gt; a,b,produkt,jedinicna,nula,polinom,skalarmatrica;
    int m , n;
    std::cout&lt;&lt;"Unesite broj redova i broj kolona za matrice:\n";
    std::cin &gt;&gt; m &gt;&gt; n;
    
    
    try{
        a = StvoriMatricu&lt;double&gt;(m,n);
        b = StvoriMatricu&lt;double&gt;(m,n);
        
        std::cout&lt;&lt;"Unesi matricu A:\n";
        UnesiMatricu('A',a);
        
       std::cout&lt;&lt;"Unesi matricu B:\n";
        UnesiMatricu('B',b);
        
       std::cout&lt;&lt;"Zbir ove dvije matrice je:\n";
        IspisiMatricu( ZbirMatrica(a,b), 7,true);
        
        std::cout&lt;&lt;"Produkt ove dvije matrice je:\n";
        IspisiMatricu((produkt = ProduktMatrica(a,b)),7,2,false);
        
        
        std::cout&lt;&lt;"Pomnozeno skalarom:\n";
        skalarmatrica = PomnoziSkalarom(2,a);
        IspisiMatricu(skalarmatrica,7);
        
        */
   
    Matrica&lt;double&gt; a,b;
    int m;
    std::cout&lt;&lt;"Unesite dimenziju kvadratne matrice: ";
    std::cin &gt;&gt; m;
    
    try{
        a = StvoriMatricu&lt;double&gt;(m,m);
        
        std::cout&lt;&lt;"Unesite elemente matrice A: \n";
        UnesiMatricu('A',a);
       
        std::cout&lt;&lt;"Unesite red polinoma: ";
        int red;
        std::cin &gt;&gt; red;
        
        
        std::vector&lt;double&gt;k;
        if(red &gt; 0){ 
            std::cout&lt;&lt;"Unesite koeficijente polinoma: ";
            
        
            for(int i (0); i &lt; red + 1; i++){
                int l;
                std::cin &gt;&gt; l;
                k.push_back(l);
            }
        }
      
        
         // IspisiMatricu(c = ProduktMatrica(a,a),7);
         //  MatricniPolinom(a,k);
    
    IspisiMatricu(b = MatricniPolinom(a,k),10);
        
    }catch(std::bad_alloc){
        std::cout&lt;&lt;"Nedovoljno memorije!\n";
    }
    
    
    UnistiMatricu(a); UnistiMatricu(b);
   // UnistiMatricu(c); UnistiMatricu(produkt);UnistiMatricu(skalarmatrica);UnistiMatricu(jedinicna);UnistiMatricu(polinom);UnistiMatricu(nula);
    
    return 0;
}</pre>
</body>
</html>
