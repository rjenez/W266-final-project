<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student3568.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student3568.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match142-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

typedef std::shared_ptr&lt;Cvor&gt; PokNaCvor;
</font>
PokNaCvor kraj_liste (PokNaCvor pocetak)
{
    if(pocetak == nullptr) return pocetak;
    PokNaCvor prethodni(nullptr);
    PokNaCvor trenutni(pocetak);
    do {
        prethodni = trenutni;
        trenutni=trenutni-&gt;sljedeci;
    } while (trenutni!=pocetak);

    return prethodni;
}

int velicina_liste (PokNaCvor pocetak)
{
    int lista_vel(0);
    PokNaCvor i(pocetak);
    do {
        lista_vel++;
        i=i-&gt;sljedeci;
    } while (i!=pocetak);

    return lista_vel;
}

void Ispisi_Listu(PokNaCvor p)
{
    const std::string boje[4] = {"Pik", "Tref", "Herc", "Karo"};
    for(int j=0; j&lt;4; j++) {
        std::cout &lt;&lt; boje[j] &lt;&lt;": ";
        PokNaCvor i(p);
        do {
            if(int(i-&gt;karta.boja) == j) std::cout &lt;&lt; i-&gt;karta.vrijednost &lt;&lt; " ";
            i=i-&gt;sljedeci;
        } while (i!=p);
        std::cout &lt;&lt; std::endl;
    }
}

PokNaCvor KreirajSpil()
{
    const std::string vrijednosti[13]= {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    PokNaCvor pocetak(nullptr), prethodni(nullptr);
    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;13; j++) {
            PokNaCvor novi(std::make_shared&lt;Cvor&gt;()); 
            novi-&gt;karta.boja=Boje(i);
            novi-&gt;karta.vrijednost=vrijednosti[j];
            novi-&gt;sljedeci=nullptr;
            if(pocetak == nullptr) pocetak=novi;
            else prethodni-&gt;sljedeci = novi;
            prethodni = novi;
        }
    }
    prethodni-&gt;sljedeci = pocetak;

    return pocetak; 
}

void ValidacijaSpila(PokNaCvor pocetak)
{

    const std::string vrijednosti[13]= {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    PokNaCvor prethodni(kraj_liste(pocetak));
    PokNaCvor trenutni(pocetak);
    do {
        if(int(trenutni-&gt;karta.boja) &lt;0 || int(trenutni-&gt;karta.boja) &gt;3 || std::find(vrijednosti, vrijednosti+13, trenutni-&gt;karta.vrijednost)==vrijednosti+13)
            throw std::logic_error ("Neispravna lista!");
        
        int i(std::find(vrijednosti, vrijednosti+13, prethodni-&gt;karta.vrijednost)-vrijednosti);
        int j(std::find(vrijednosti, vrijednosti+13, trenutni-&gt;karta.vrijednost)-vrijednosti);
        
        if(trenutni != pocetak &amp;&amp; trenutni != kraj_liste(pocetak)) {
            if(!(((trenutni-&gt;karta.boja == prethodni-&gt;karta.boja &amp;&amp; i&lt;j ) || (trenutni-&gt;karta.boja &gt; prethodni-&gt;karta.boja)))) throw std::logic_error("Neispravna lista!");
        } else if(trenutni == kraj_liste(pocetak)) {
            if(!((trenutni-&gt;karta.boja == prethodni-&gt;karta.boja &amp;&amp; i&lt;j ) || (trenutni-&gt;karta.boja &gt; prethodni-&gt;karta.boja))) throw std::logic_error("Neispravna lista!");
        }
 
        prethodni = trenutni;
        trenutni=trenutni-&gt;sljedeci;
    } while (trenutni!=pocetak);
}

void IzbaciKarte (PokNaCvor &amp;pocetak, std::multimap &lt;Boje, std::string&gt; &amp;za_izbaciti)
{
    try{
        ValidacijaSpila(pocetak);
    }catch(...){
        throw;
    }

    auto it(za_izbaciti.begin());
    while (it != za_izbaciti.end()) {
        PokNaCvor prethodni(kraj_liste(pocetak));
        PokNaCvor trenutni(pocetak);
        do {

            if(trenutni-&gt;karta.boja == it-&gt;first &amp;&amp; trenutni-&gt;karta.vrijednost == it-&gt;second) {
                if(trenutni == pocetak) {
                    pocetak = trenutni-&gt;sljedeci;
                } else prethodni-&gt;sljedeci = trenutni-&gt;sljedeci;
                break;
            }
            if(prethodni == nullptr) prethodni=pocetak;
            else prethodni = trenutni;
            trenutni=trenutni-&gt;sljedeci;
        } while (trenutni!=pocetak);
        if(trenutni != pocetak) it=za_izbaciti.erase(it);
        else it++;
        if(pocetak-&gt;sljedeci == pocetak) pocetak=nullptr;
    }

}

<a name="3"></a><font color="#00FFFF"><a href="match142-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt;
        IzbaciKarteRazbrajanjem(PokNaCvor &amp;pocetak, const short int &amp;r, const int &amp;b)
 {
    
    if(r &lt; 1 || r &gt; 52 || b &lt; 1) throw std::logic_error ("Neispravni elementi za izbacivanje!");
</font>    
    try{
        ValidacijaSpila(pocetak);
    }catch(...){
        throw;
    }
    
    const std::string boje[4] = {"Pik", "Tref", "Herc", "Karo"};
    int br_izbacenih(0);
    PokNaCvor prethodni(kraj_liste(pocetak)); 
    PokNaCvor trenutni(pocetak);
    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; izbacene_karte;
    do { 
        int r_tmp(0);
        for(r_tmp=0; r_tmp&lt;r-1; r_tmp++) {
            prethodni=trenutni;
            trenutni=trenutni-&gt;sljedeci;
        }
        if(trenutni == pocetak) pocetak = trenutni-&gt;sljedeci; //azuriranje pocetka
        if(trenutni == pocetak) {
            pocetak=trenutni-&gt;sljedeci;
        } else prethodni-&gt;sljedeci = trenutni-&gt;sljedeci;
    
        br_izbacenih++;
        izbacene_karte.push(make_pair(boje[int(trenutni-&gt;karta.boja)], trenutni-&gt;karta.vrijednost));
        
        prethodni = trenutni;
        trenutni=trenutni-&gt;sljedeci;
    } while (br_izbacenih!=b);

    if(pocetak-&gt;sljedeci == pocetak) pocetak=nullptr; //ako je ostala prazna lista

<a name="1"></a><font color="#00FF00"><a href="match142-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    return izbacene_karte;
}

void VratiPosljednjihNKarata(PokNaCvor &amp;pocetak, std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;izbacene_karte, int n)
{
    if(n&lt;0) throw std::domain_error ("Broj n je besmislen!");
    if(n&gt;izbacene_karte.size()) throw std::range_error ("Nedovoljno karata u steku!");

    try{
        ValidacijaSpila(pocetak);
</font>    }catch(...){
        throw;
    }
    
    const std::string boje[4] = {"Pik", "Tref", "Herc", "Karo"};
    const std::string vrijednosti[13]= {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    int vraceno(0);
    while (vraceno != n) {

        int i(std::find(boje, boje+4, izbacene_karte.top().first)-boje);
        //indeks u nizu boja - int od enum vrijednosti

        PokNaCvor novi(std::make_shared&lt;Cvor&gt;());
        novi-&gt;karta.boja=Boje(i);
        novi-&gt;karta.vrijednost=izbacene_karte.top().second;
        novi-&gt;sljedeci=nullptr; 
        //alokacija novog elementa tipa cvor koji se treba ubaciti
        
        bool u_spilu(false); 
        if(pocetak==nullptr) {
            pocetak=novi; 
            pocetak-&gt;sljedeci = pocetak;
        } else {
            PokNaCvor trenutni(pocetak);
            PokNaCvor prethodni(kraj_liste(pocetak));
            int k(std::find(vrijednosti, vrijednosti+13, novi-&gt;karta.vrijednost)-vrijednosti);
            int x(0);
            do {
                x++;
                int j(std::find(vrijednosti, vrijednosti+13, trenutni-&gt;karta.vrijednost)-vrijednosti);
                if((novi-&gt;karta.boja == trenutni-&gt;karta.boja &amp;&amp; k &lt; j) || (novi-&gt;karta.boja &lt; trenutni-&gt;karta.boja &amp;&amp; k&lt;j))
                    break;
                if(novi-&gt;karta.boja == trenutni-&gt;karta.boja &amp;&amp; k == j){
                    u_spilu=true;
                }
                prethodni=trenutni;
                trenutni=trenutni-&gt;sljedeci;
            } while(trenutni != pocetak); //pronalazenje mjesta na koje se treba ubaciti
            if(!u_spilu){ //ubacuje ako nije vec u spilu
            if(x==1) pocetak=novi;
            prethodni-&gt;sljedeci = novi;
            novi-&gt;sljedeci = trenutni;
            }
            
        }
        
        vraceno++;
        izbacene_karte.pop(); //prelazak na sljedeci element stacka
    }
}

void PrekiniListu(PokNaCvor &amp;pocetak)
{
   PokNaCvor prethodni(kraj_liste(pocetak));
   PokNaCvor trenutni(pocetak);
   int n(velicina_liste(pocetak));
   for(int i=0; i&lt;n; i++){
       prethodni-&gt;sljedeci = nullptr;
       prethodni=trenutni;
       trenutni=trenutni-&gt;sljedeci;
   }
    
}



int main ()
{
    
    auto p(KreirajSpil());
    try { 
<a name="4"></a><font color="#FF00FF"><a href="match142-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        std::cout &lt;&lt; "Unesite korak razbrajanja: ";
        int r;
        std::cin &gt;&gt; r; 
        std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
        int b;
        std::cin &gt;&gt; b;

        auto izbacene_karte(IzbaciKarteRazbrajanjem(p, r, b));
</font>        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; velicina_liste(p) &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
        Ispisi_Listu(p);

        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin &gt;&gt; n;
        
        VratiPosljednjihNKarata(p, izbacene_karte, n);
<a name="0"></a><font color="#FF0000"><a href="match142-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; velicina_liste(p) &lt;&lt;" karata, i to:" &lt;&lt; std::endl;
        Ispisi_Listu(p);
 
        
        PrekiniListu(p);
    } catch(std::domain_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        PrekiniListu(p);
    } catch(std::logic_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        PrekiniListu(p);
    } catch(std::range_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        PrekiniListu(p);
</font>    }
    return 0;
}

</pre>
</body>
</html>
