<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student3631.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9113.cpp<p></p><pre>
#include &lt;iostream&gt;
#include&lt;vector&gt;//   ZA IMENA KARATA
#include&lt;stdexcept&gt;
#include&lt;map&gt;
#include&lt;stack&gt;
#include&lt;memory&gt;

std::vector&lt;std::string&gt; v{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
<a name="2"></a><font color="#0000FF"><a href="match375-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

enum  Boje {Pik, Tref, Herc, Karo};
struct Karta{
    Boje boja;
    std::string ime;
};
struct Cvor {
 Karta karta;
 std::shared_ptr&lt;Cvor&gt; veza;
</font>};

void Odvezi(std::shared_ptr&lt;Cvor&gt;);

int sizee(std::shared_ptr&lt;Cvor&gt;p){
    int  a=0;
    bool b=true;
    auto pocetak(p);
    if(p==nullptr||p-&gt;veza==nullptr)return 0;
    while(p!=pocetak||b!=false){
        p=p-&gt;veza;
        b=false;
        a++;
    }
    return a;
}
void  UnistiSpil(std::shared_ptr&lt;Cvor&gt;spil){
    Odvezi(spil);
   //REKT
}
void ispisispil(std::shared_ptr&lt;Cvor&gt;it){
    auto pocetak(it);
    if(it==nullptr){std::cout &lt;&lt; "Prazan spil" &lt;&lt; std::endl;return;}
    std::cout &lt;&lt; "U spilu trenutno ima "&lt;&lt;sizee(it)&lt;&lt;" karata, i to: " &lt;&lt; std::endl;
    std::cout &lt;&lt; "Pik: " ;
    while(it-&gt;karta.boja==Pik){std::cout &lt;&lt; it-&gt;karta.ime&lt;&lt;" ";it=it-&gt;veza;}
     std::cout &lt;&lt; "\nTref: " ;
    while(it-&gt;karta.boja==Tref){std::cout &lt;&lt; it-&gt;karta.ime&lt;&lt;" ";it=it-&gt;veza;}
    std::cout &lt;&lt; "\nHerc: " ;
    while(it-&gt;karta.boja==Herc){std::cout &lt;&lt; it-&gt;karta.ime&lt;&lt;" ";it=it-&gt;veza;}
    std::cout &lt;&lt; "\nKaro: " ;
    while(it-&gt;karta.boja==Karo){std::cout &lt;&lt; it-&gt;karta.ime&lt;&lt;" ";it=it-&gt;veza;if(it==pocetak)break;}
    std::cout &lt;&lt; std::endl;
}

std::shared_ptr&lt;Cvor&gt; KreirajSpil(){
std::shared_ptr&lt;Cvor&gt;prvi(nullptr); std::shared_ptr&lt;Cvor&gt;prethodni;
    Boje  bo=Pik;
    for(int i=0;i&lt;52;i++){
        if(i&gt;12)bo=Tref;
        if(i&gt;25)bo=Herc;
        if(i&gt;38)bo=Karo;
        std::string imm=v[i%13];
        auto novi(std::make_shared&lt;Cvor&gt;( Cvor{{bo,imm},nullptr}));
        if(!prvi)prvi=novi;
        else prethodni-&gt;veza=novi;
        prethodni=novi;
    }
    prethodni-&gt;veza=prvi;
   return prvi;
}
bool dobro(std::string a,std::string b){
      if(a==b)return false;
    int i,j;
    for(i=0;i&lt;v.size();i++){
        if(a==v[i])break;
    }
    for(j=0;j&lt;v.size();j++){
        if(b==v[j])break;
    }
    return i&lt;j;
}
bool je_li_validan(std::shared_ptr&lt;Cvor&gt;p){
    auto prije(p);
    auto temp(p);
    p=p-&gt;veza;
    for(int i=1;i&lt;sizee(temp);i++){
        if(prije-&gt;karta.boja&gt;p-&gt;karta.boja)return false;
        prije=prije-&gt;veza;
        p=p-&gt;veza;
    }
    p=temp;
    prije=temp;
    p=p-&gt;veza;
   while (p-&gt;karta.boja==Pik){
       if(!(dobro(prije-&gt;karta.ime,p-&gt;karta.ime)))return false;
       prije=prije-&gt;veza;
       p=p-&gt;veza;
   }prije=p;
   p=p-&gt;veza;
    while (p-&gt;karta.boja==Tref){
       if(!(dobro(prije-&gt;karta.ime,p-&gt;karta.ime)))return false;
       prije=prije-&gt;veza;
       p=p-&gt;veza;
   }
   prije=p;
   p=p-&gt;veza;
    while (p-&gt;karta.boja==Herc){
       if(!(dobro(prije-&gt;karta.ime,p-&gt;karta.ime)))return false;
       prije=prije-&gt;veza;
       p=p-&gt;veza;
   }
   prije=p;
   p=p-&gt;veza;
    while (p-&gt;karta.boja==Karo){
       if(!(dobro(prije-&gt;karta.ime,p-&gt;karta.ime)))return false;
       prije=prije-&gt;veza;
       p=p-&gt;veza;
   }
    return true;
}
std::shared_ptr&lt;Cvor&gt; izbrisi(std::shared_ptr&lt;Cvor&gt;&amp;p, std::shared_ptr&lt;Cvor&gt;prije,std::shared_ptr&lt;Cvor&gt;pocetak){
    if(sizee(p)==2){
        pocetak=prije;
        prije-&gt;veza=nullptr;
        auto d(p);
        p=pocetak;
    }else if(p-&gt;veza==nullptr){
        pocetak=nullptr;
       
    }
    else if(p==pocetak){
        auto d(p);
        p=p-&gt;veza;
        pocetak=p;
       
        prije-&gt;veza=p;
    }
    else{
         auto d(p);
        p=p-&gt;veza;
        
        prije-&gt;veza=p;
       
    }
    return pocetak;
}
void IzbaciKarte(std::shared_ptr&lt;Cvor&gt;&amp;temp,std::multimap&lt;Boje, std::string&gt; mapa){
   
    if(sizee(temp)&gt;52){UnistiSpil(temp);throw std::logic_error{"Neispravna lista!"};}
    if(!(je_li_validan(temp))){UnistiSpil(temp);throw std::logic_error{"Neispravna lista!"};}
    auto p(temp);
    int broj=mapa.size();
    auto it(mapa.begin());
    for(int i=0;i&lt;broj;i++){
        p=temp;
        auto prije(p);
        p=p-&gt;veza;
        bool a=false;
<a name="4"></a><font color="#FF00FF"><a href="match375-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        for(int j=0;j&lt;sizee(p);j++){
            if(p-&gt;karta.boja==it-&gt;first&amp;&amp;p-&gt;karta.ime==it-&gt;second){
               temp=izbrisi(p,prije,temp);it=mapa.erase(it);a=true;break;
</font>            }
            p=p-&gt;veza;
            prije=prije-&gt;veza;
        }if(a==true)continue;
            it++;
    }
}
bool je_li_validan_stek(std::stack&lt;std::pair&lt;Boje,std::string&gt;&gt; stek){
    auto copy(stek);
    int broj(stek.size());
    for(int i=0;i&lt;broj;i++){
        if(stek.top().first!=Pik&amp;&amp;stek.top().first!=Herc&amp;&amp;stek.top().first!=Karo&amp;&amp;stek.top().first!=Tref)return false;
        stek.pop();
    }stek=copy;
    for(int j=0;j&lt;broj;j++){
        bool a=false;
        for(int i=0;i&lt;v.size();i++){
            if(stek.top().second==v[i])a=true;
        }if(a==false)return false;
        stek.pop();
    }
    return true;
}
<a name="3"></a><font color="#00FFFF"><a href="match375-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

std::stack&lt;std::pair&lt;Boje,std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt;&amp;p,const int &amp;r,const int &amp;n){
</font>     if(r&lt;1||r&gt;52||n&lt;1){UnistiSpil(p);throw std::logic_error{"Neispravni elementi za izbacivanje!"};}
    if(sizee(p)&gt;52){UnistiSpil(p);throw std::logic_error{"Neispravna lista!"};}
    if(!(je_li_validan(p))){UnistiSpil(p);throw std::logic_error{"Neispravna lista!"};}
    auto it(p);
    auto prije(p);
    std::stack&lt;std::pair&lt;Boje,std::string&gt;&gt; stek;
    
    for(int i=0;i&lt;52;i++){
        prije=prije-&gt;veza;
        if(prije-&gt;veza==it)break;
    }
    for(int i=0;i&lt;n;i++){
        for(int j=1;j&lt;r;j++){
            it=it-&gt;veza;
            prije=prije-&gt;veza;
        }stek.push({it-&gt;karta.boja,it-&gt;karta.ime});
        p=izbrisi(it,prije,p);
        if(p==nullptr)break;
    }
    return stek;
}
void ubaci(std::shared_ptr&lt;Cvor&gt;p,std::shared_ptr&lt;Cvor&gt;prije,std::shared_ptr&lt;Cvor&gt;novi){
    novi-&gt;veza=p;
    prije-&gt;veza=novi;
}
void zamjeni(std::shared_ptr&lt;Cvor&gt;&amp;p,std::shared_ptr&lt;Cvor&gt;&amp;prije,std::shared_ptr&lt;Cvor&gt;&amp;poslije,std::shared_ptr&lt;Cvor&gt;&amp;p2,std::shared_ptr&lt;Cvor&gt;&amp;prije2,std::shared_ptr&lt;Cvor&gt;&amp;poslije2){
    prije-&gt;veza=p2;
    p2-&gt;veza=poslije;
    prije2-&gt;veza=p;
    p-&gt;veza=poslije2;
}
bool prije(std::string a,std::string b){
<a name="0"></a><font color="#FF0000"><a href="match375-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    int i,j;
    for( i=0;i&lt;v.size();i++){
        if(v[i]==a)break;
    }
     for( j=0;j&lt;v.size();j++){
        if(v[j]==b)break;
</font>    }
    return i&lt;j;
}

std::shared_ptr&lt;Cvor&gt;nadji(std::shared_ptr&lt;Cvor&gt;p){
    auto min(p);
    for(int i=0;i&lt;sizee(p);i++){
        if(p-&gt;karta.boja&lt;=min-&gt;karta.boja)if(prije(p-&gt;karta.ime,min-&gt;karta.ime))min=p;
    p=p-&gt;veza;
    }
    return min;
}
<a name="1"></a><font color="#00FF00"><a href="match375-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt;&amp;p,std::stack&lt;std::pair&lt;Boje,std::string&gt;&gt; stek,int n){
        if(n&lt;0){UnistiSpil(p);throw std::domain_error {"Broj n je besmislen!"};}
</font>       if(n&gt;stek.size()){UnistiSpil(p);throw std::range_error{"Nedovoljno karata u redu!"};}
       if(!(je_li_validan(p))){UnistiSpil(p);throw std::logic_error{"Neispravna lista!"};}
       if(!je_li_validan(p)){UnistiSpil(p);throw std::logic_error{"Neispravna lista!"};}
       if(!je_li_validan_stek(stek)){UnistiSpil(p);throw std::logic_error{"Neispravne karte!"};}
       auto it(p);
       

       for(int i=0;i&lt;n;i++){
         
           bool jest=false;
           auto c(p);
           for(int j=0;j&lt;sizee(p);j++){
               if(stek.top().first==c-&gt;karta.boja&amp;&amp;stek.top().second==c-&gt;karta.ime){jest==true;break;}
               c=c-&gt;veza;
           }if(jest==true){stek.pop();continue;}
           auto novi(std::make_shared&lt;Cvor&gt;(Cvor{{stek.top().first,stek.top().second},nullptr}));//auto novi(std::make_shared&lt;Cvor&gt;(new Cvor{stek.top().first,stek.top().second},nullptr})); //auto novi(std::make_shared&lt;Cvor&gt;(new Cvor{stek.top().first,stek.top().second},nullptr));
           it=p;
           auto prije(it);
         for(int i=0;i&lt;52;i++){
         prije=prije-&gt;veza;
            if(prije-&gt;veza==it)break;
         }Boje rekt=it-&gt;karta.boja;
           while(it-&gt;karta.boja&lt;stek.top().first){prije=prije-&gt;veza;it=it-&gt;veza;}
           while(dobro(stek.top().second,it-&gt;karta.ime)==false){prije=prije-&gt;veza;it=it-&gt;veza;}
           ubaci(it,prije,novi);
           stek.pop();
           p=nadji(p);
       }
       
}
void Odvezi(std::shared_ptr &lt;Cvor&gt; p){
    auto sde(sizee(p));
    for(int i=0;i&lt;sde;i++){
        auto d(p);
        p=p-&gt;veza;
        d-&gt;veza=nullptr;
    }
}
int main(){
     try{int n;
    auto spil(KreirajSpil());
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; n;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    int m;
    std::cin &gt;&gt; m;
    //std::multimap&lt;Boje, std::string&gt; mapa{{Pik,std::string("2")},{Pik,std::string("3")},{Pik,std::string("4")},{Pik,std::string("5")}};
   // IzbaciKarte(spil,mapa);
    //ispisi(spil);
    auto red(IzbaciKarteRazbrajanjem(spil,n,m));
    ispisispil(spil);
    std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
    int e;
    std::cin &gt;&gt; e;
    VratiPosljednjihNKarata(spil,red,e);
    ispisispil(spil);
    Odvezi(spil);
    }catch(std::domain_error er){
        std::cout &lt;&lt; "Izuzetak: "&lt;&lt;er.what() &lt;&lt; std::endl;
       // UnistiSpil(spil);
    }catch(std::logic_error er){
        std::cout &lt;&lt; "Izuzetak: "&lt;&lt;er.what() &lt;&lt; std::endl;
        //UnistiSpil(spil);
    }catch(std::range_error er){
        std::cout &lt;&lt; "Izuzetak: "&lt;&lt;er.what() &lt;&lt; std::endl;
        //UnistiSpil(spil);
    }
    
}
















</pre>
</body>
</html>
