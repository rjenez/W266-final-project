<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student7196.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student2941.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match13-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;stack&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

enum class Boje {
    Pik, Tref, Herc, Karo
};

std::vector&lt;std::string&gt; imena_boja{"Pik", "Tref", "Herc", "Karo"};
std::vector&lt;std::string&gt; imena_karata{"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

bool KriterijZaProvjeru(Karta prva, Karta druga) {
    return (prva.boja&lt;druga.boja 
    || prva.boja==druga.boja &amp;&amp; std::find(imena_karata.begin(), imena_karata.end(), prva.vrijednost)
    &lt;std::find(imena_karata.begin(), imena_karata.end(), druga.vrijednost));
}

std::shared_ptr&lt;Cvor&gt; KreirajSpil() {
    std::shared_ptr&lt;Cvor&gt; spil_karata;
    std::shared_ptr&lt;Cvor&gt; prethodni;
    spil_karata=nullptr;
    for (int i=0; i&lt;4; i++) {
        for (int j=0; j&lt;13; j++) {
            std::shared_ptr&lt;Cvor&gt; novi_cvor(std::make_shared&lt;Cvor&gt;());
            (novi_cvor-&gt;karta).boja=Boje(i);
            (novi_cvor-&gt;karta).vrijednost=imena_karata.at(j);
            novi_cvor-&gt;sljedeci=nullptr;
            if (spil_karata==nullptr) spil_karata=novi_cvor;
            else prethodni-&gt;sljedeci=novi_cvor;
            prethodni=novi_cvor;
        }
    }
    prethodni-&gt;sljedeci=spil_karata;
    return spil_karata;
}

void IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;spil_karata, std::multimap&lt;Boje, std::string&gt; &amp;multi) {
    int broj_koraka(0);
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata;; klizeci=klizeci-&gt;sljedeci) {
        if (broj_koraka&gt;0 &amp;&amp; broj_koraka&lt;52 &amp;&amp; klizeci==spil_karata) break;
        if (broj_koraka==52 &amp;&amp; klizeci!=spil_karata) throw std::logic_error("Neispravna lista!");
        else if (broj_koraka==52) break;
        broj_koraka++;
    }
    int velicina(0);
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; (velicina==0 || klizeci!=spil_karata); klizeci=klizeci-&gt;sljedeci) velicina++;
    broj_koraka=0;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; broj_koraka&lt;velicina; klizeci=klizeci-&gt;sljedeci) {
        if (klizeci-&gt;sljedeci==nullptr) throw std::logic_error("Neispravna lista!");
        broj_koraka++;
    }
    bool besmisleni(false);
    broj_koraka=0;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; (broj_koraka==0 || klizeci!=spil_karata); klizeci=klizeci-&gt;sljedeci) {
        if (((klizeci-&gt;karta).boja!=Boje::Pik &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Tref 
        &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Herc &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Karo) 
        || (std::find(imena_karata.begin(), imena_karata.end(), (klizeci-&gt;karta).vrijednost)==imena_karata.end())) {
            besmisleni=true;
            break;
        }
        broj_koraka++;
    }
    if (besmisleni) throw std::logic_error("Neispravna lista!");
    bool sortirana(true);
    broj_koraka=0;
    std::shared_ptr&lt;Cvor&gt; kraj=spil_karata;
    for (int i=0; i&lt;velicina-2; i++) kraj=kraj-&gt;sljedeci;
    for (std::shared_ptr&lt;Cvor&gt; pok=spil_karata; pok!=kraj; pok=pok-&gt;sljedeci) {
        std::shared_ptr&lt;Cvor&gt; sljedeci_pok(pok-&gt;sljedeci);
        if (!KriterijZaProvjeru(pok-&gt;karta, sljedeci_pok-&gt;karta)) {
            sortirana=false;
            break;
        }
    }
    if (!sortirana) throw std::logic_error("Neispravna lista!");
    std::shared_ptr&lt;Cvor&gt; prethodni_pok(spil_karata);
    while ((prethodni_pok-&gt;sljedeci)!=spil_karata) prethodni_pok=prethodni_pok-&gt;sljedeci;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; (broj_koraka==0 || klizeci!=spil_karata); klizeci=klizeci-&gt;sljedeci) {
        bool u_oba_kontejnera(false);
        std::multimap&lt;Boje, std::string&gt;::iterator it_map;
        for (it_map=multi.begin(); it_map!=multi.end(); it_map++) {
            if ((klizeci-&gt;karta).boja==it_map-&gt;first &amp;&amp; (klizeci-&gt;karta).vrijednost==it_map-&gt;second) {
                u_oba_kontejnera=true;
                break;
            }
        }
        bool izbaceno(false);
        if (u_oba_kontejnera) {
            it_map=multi.erase(it_map);
            if (klizeci==spil_karata) spil_karata=spil_karata-&gt;sljedeci;
            prethodni_pok-&gt;sljedeci=klizeci-&gt;sljedeci;
            klizeci=prethodni_pok;
            velicina--;
            if (velicina==0) {
                spil_karata=nullptr;
                return;
            }
            izbaceno=true;
        }
        broj_koraka++;
        if (!izbaceno) prethodni_pok=prethodni_pok-&gt;sljedeci;
    }
}

std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem
(std::shared_ptr&lt;Cvor&gt; &amp;spil_karata, const short int &amp;korak_raz, const int &amp;cijeli) {
    if (korak_raz&lt;1 || korak_raz&gt;52) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if (cijeli&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    int broj_koraka(0);
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata;; klizeci=klizeci-&gt;sljedeci) {
        if (broj_koraka&gt;0 &amp;&amp; broj_koraka&lt;52 &amp;&amp; klizeci==spil_karata) break;
        if (broj_koraka==52 &amp;&amp; klizeci!=spil_karata) throw std::logic_error("Neispravna lista!");
        else if (broj_koraka==52) break;
        broj_koraka++;
    }
    int duzina(0);
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; (duzina==0 || klizeci!=spil_karata); klizeci=klizeci-&gt;sljedeci) duzina++;
    broj_koraka=0;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; broj_koraka&lt;duzina; klizeci=klizeci-&gt;sljedeci) {
        if (klizeci-&gt;sljedeci==nullptr) throw std::logic_error("Neispravna lista!");
        broj_koraka++;
    }
    bool besmisleni(false);
    broj_koraka=0;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; (broj_koraka==0 || klizeci!=spil_karata); klizeci=klizeci-&gt;sljedeci) {
        if (((klizeci-&gt;karta).boja!=Boje::Pik &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Tref 
        &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Herc &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Karo) 
        || (std::find(imena_karata.begin(), imena_karata.end(), (klizeci-&gt;karta).vrijednost)==imena_karata.end())) {
            besmisleni=true;
            break;
        }
        broj_koraka++;
    }
    if (besmisleni) throw std::logic_error("Neispravna lista!");
    bool sortirana(true);
    broj_koraka=0;
    std::shared_ptr&lt;Cvor&gt; kraj=spil_karata;
    for (int i=0; i&lt;duzina-2; i++) kraj=kraj-&gt;sljedeci;
    for (std::shared_ptr&lt;Cvor&gt; pok=spil_karata; pok!=kraj; pok=pok-&gt;sljedeci) {
        std::shared_ptr&lt;Cvor&gt; sljedeci_pok(pok-&gt;sljedeci);
        if (!KriterijZaProvjeru(pok-&gt;karta, sljedeci_pok-&gt;karta)) {
            sortirana=false;
            break;
        }
    }
    if (!sortirana) throw std::logic_error("Neispravna lista!");
    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; stek;
    std::shared_ptr&lt;Cvor&gt; prethodni_pok(spil_karata);
    while ((prethodni_pok-&gt;sljedeci)!=spil_karata) prethodni_pok=prethodni_pok-&gt;sljedeci;
    std::shared_ptr&lt;Cvor&gt; klizeci(spil_karata);
    for (int i=0; i&lt;cijeli; i++) {
        for (int i=0; i&lt;korak_raz-1; i++) {
            prethodni_pok=prethodni_pok-&gt;sljedeci;
            klizeci=klizeci-&gt;sljedeci;
        }
        if (klizeci==spil_karata) spil_karata=spil_karata-&gt;sljedeci;
        stek.push(std::make_pair(imena_boja.at(int((klizeci-&gt;karta).boja)), (klizeci-&gt;karta).vrijednost));
        prethodni_pok-&gt;sljedeci=klizeci-&gt;sljedeci;
        std::shared_ptr&lt;Cvor&gt; iza(klizeci-&gt;sljedeci);
        klizeci=iza;
        duzina--;
        if (duzina==0) {
            spil_karata=nullptr;
            break;
        }
    }
    return stek;
}

void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt; &amp;spil_karata, std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;stek, int n) {
    if (n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if (n&gt;stek.size()) throw std::range_error("Nedovoljno karata u redu!");
    int broj_koraka(0);
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata;; klizeci=klizeci-&gt;sljedeci) {
        if (broj_koraka&gt;0 &amp;&amp; broj_koraka&lt;52 &amp;&amp; klizeci==spil_karata) break;
        if (broj_koraka==52 &amp;&amp; klizeci!=spil_karata) throw std::logic_error("Neispravna lista!");
        else if (broj_koraka==52) break;
        broj_koraka++;
    }
    broj_koraka=0;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; broj_koraka&lt;52; klizeci=klizeci-&gt;sljedeci) {
        if (klizeci-&gt;sljedeci==nullptr) throw std::logic_error("Neispravna lista!");
        broj_koraka++;
    }
    bool besmisleni(false);
    broj_koraka=0;
    for (std::shared_ptr&lt;Cvor&gt; klizeci=spil_karata; (broj_koraka==0 || klizeci!=spil_karata); klizeci=klizeci-&gt;sljedeci) {
        if (((klizeci-&gt;karta).boja!=Boje::Pik &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Tref 
        &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Herc &amp;&amp; (klizeci-&gt;karta).boja!=Boje::Karo) 
        || (std::find(imena_karata.begin(), imena_karata.end(), (klizeci-&gt;karta).vrijednost)==imena_karata.end())) {
            besmisleni=true;
            break;
        }
        broj_koraka++;
    }
    if (besmisleni) throw std::logic_error("Neispravna lista!");
    bool sortirana(true);
    broj_koraka=0;
    std::shared_ptr&lt;Cvor&gt; kraj=spil_karata;
    for (int i=0; i&lt;50; i++) kraj=kraj-&gt;sljedeci;
    for (std::shared_ptr&lt;Cvor&gt; pok=spil_karata; pok!=kraj; pok=pok-&gt;sljedeci) {
        std::shared_ptr&lt;Cvor&gt; sljedeci_pok(pok-&gt;sljedeci);
        if (!KriterijZaProvjeru(pok-&gt;karta, sljedeci_pok-&gt;karta)) {
            sortirana=false;
            break;
        }
    }
    if (!sortirana) throw std::logic_error("Neispravna lista!");
    int redni_broj(0);
    for (int i=0; i&lt;n; i++) {
        if (std::find(imena_boja.begin(), imena_boja.end(), stek.top().first)==imena_boja.end()) {
            throw std::logic_error("Neispravne karte!");
        }
        if (std::find(imena_karata.begin(), imena_karata.end(), stek.top().second)==imena_karata.end()) {
            throw std::logic_error("Neispravne karte!");
        }
        for (int i=0; i&lt;imena_boja.size(); i++) {
            if (stek.top().first==imena_boja.at(i)) {
                redni_broj=i;
                break;
            }
        }
        bool pronadjena(false);
        for (std::shared_ptr&lt;Cvor&gt; pok=spil_karata; (broj_koraka==0 || pok!=spil_karata); pok=pok-&gt;sljedeci) {
            if ((pok-&gt;karta).boja==Boje(redni_broj) &amp;&amp; (pok-&gt;karta).vrijednost==stek.top().second) {
                pronadjena=true;
                break;
            }
            broj_koraka++;
        }
        broj_koraka=0;
        if (pronadjena) stek.pop();
        else {
            std::shared_ptr&lt;Cvor&gt; prethodni_pok(spil_karata);
            while ((prethodni_pok-&gt;sljedeci)!=spil_karata) prethodni_pok=prethodni_pok-&gt;sljedeci;
            std::shared_ptr&lt;Cvor&gt; sadasnji(spil_karata);
            while ((broj_koraka==0 || sadasnji!=spil_karata) 
            &amp;&amp; ((sadasnji-&gt;karta).boja&lt;Boje(redni_broj) 
            || (sadasnji-&gt;karta).boja==Boje(redni_broj) &amp;&amp; std::find(imena_karata.begin(), imena_karata.end(), (sadasnji-&gt;karta).vrijednost)
            &lt;std::find(imena_karata.begin(), imena_karata.end(), stek.top().second))) {
                sadasnji=sadasnji-&gt;sljedeci;
                prethodni_pok=prethodni_pok-&gt;sljedeci;
                broj_koraka++;
            }
            std::shared_ptr&lt;Cvor&gt; novi(std::make_shared&lt;Cvor&gt;());
            (novi-&gt;karta).boja=Boje(redni_broj);
            (novi-&gt;karta).vrijednost=stek.top().second;
            novi-&gt;sljedeci=nullptr;
            prethodni_pok-&gt;sljedeci=novi;
            novi-&gt;sljedeci=sadasnji;
            stek.pop();
        }
    }
}

int main ()
{
    std::shared_ptr&lt;Cvor&gt; aktuelni_spil;
    aktuelni_spil=nullptr;
    try {
        short int korak_razbrajanja;
        int broj_za_izbaciti, trenutni(52), broj_za_vratiti;
        aktuelni_spil=KreirajSpil();
        std::cout &lt;&lt; "Unesite korak razbrajanja: ";
        std::cin &gt;&gt; korak_razbrajanja;
        std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
        std::cin &gt;&gt; broj_za_izbaciti;
        std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; stek;
        stek=IzbaciKarteRazbrajanjem(aktuelni_spil, korak_razbrajanja, broj_za_izbaciti);
        trenutni-=broj_za_izbaciti;
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; trenutni &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
        std::shared_ptr&lt;Cvor&gt; pok(aktuelni_spil);
        std::cout &lt;&lt; "Pik: ";
        while ((pok-&gt;karta).boja==Boje::Pik) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Tref: ";
        while ((pok-&gt;karta).boja==Boje::Tref) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Herc: ";
        while ((pok-&gt;karta).boja==Boje::Herc) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Karo: ";
        while ((pok-&gt;karta).boja==Boje::Karo) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; broj_za_vratiti;
        VratiPosljednjihNKarata(aktuelni_spil, stek, broj_za_vratiti);
        trenutni+=broj_za_vratiti;
        std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; trenutni &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
        pok=aktuelni_spil;
        std::cout &lt;&lt; "Pik: ";
        while ((pok-&gt;karta).boja==Boje::Pik) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Tref: ";
        while ((pok-&gt;karta).boja==Boje::Tref) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Herc: ";
        while ((pok-&gt;karta).boja==Boje::Herc) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; "Karo: ";
        while ((pok-&gt;karta).boja==Boje::Karo) {
            std::cout &lt;&lt; (pok-&gt;karta).vrijednost &lt;&lt; " ";
            pok=pok-&gt;sljedeci;
        }
    }
    catch(std::logic_error greska) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; greska.what();
    }
    catch(std::range_error greska) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; greska.what();
    }
    catch(std::domain_error greska) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; greska.what();
    }
    aktuelni_spil-&gt;sljedeci=nullptr;
    aktuelni_spil=nullptr;
</font>	return 0;
}
</pre>
</body>
</html>
