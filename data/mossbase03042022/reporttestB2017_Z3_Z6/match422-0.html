<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9538.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9538.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match422-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;stack&gt;
#include &lt;map&gt;
#include &lt;memory&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

std::shared_ptr&lt;Cvor&gt; KreirajSpil()
</font>{
    std::string vrijednost_karte[13] {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    std::shared_ptr&lt;Cvor&gt; prvi(nullptr), prethodni;
    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;13; j++) {
            std::shared_ptr&lt;Cvor&gt; novi(std::make_shared&lt;Cvor&gt;());
            novi-&gt;karta.boja=Boje(i);
            novi-&gt;karta.vrijednost=vrijednost_karte[j];
            novi-&gt;sljedeci=nullptr;
            if(!prvi) prvi=novi;
            else prethodni-&gt;sljedeci=novi;
            prethodni=novi;
        }
    }
    prethodni-&gt;sljedeci=prvi;
    return prvi;
}

bool PrijeUStingu_i_PostojiUStringu(std::string s1, std::string s2);
bool DobroSortirano(std::shared_ptr&lt;Cvor&gt; prvi);

int BrojKarataUSpilu(std::shared_ptr&lt;Cvor&gt; prvi)
{
    int br_karata(0);
    std::shared_ptr&lt;Cvor&gt; next(nullptr);
    for(std::shared_ptr&lt;Cvor&gt; pok=prvi; next!=prvi; pok=pok-&gt;sljedeci) {
        next=pok-&gt;sljedeci;
        br_karata++;
    }
    return br_karata;
}

void IspisiKarte(std::shared_ptr&lt;Cvor&gt; prvi)
{
    std::string nazivi_boja[4] {"Pik", "Tref", "Herc", "Karo"};
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarataUSpilu(prvi)&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    std::shared_ptr&lt;Cvor&gt; next(nullptr), prethodni(nullptr), pok(prvi);
    for(int i=0; i&lt;4; i++) {
        std::cout&lt;&lt;nazivi_boja[i]&lt;&lt;":";
        auto boja(pok-&gt;karta.boja);
        while(boja==pok-&gt;karta.boja &amp;&amp; next!=prvi) {
            std::cout&lt;&lt;" "&lt;&lt;pok-&gt;karta.vrijednost;
            pok=pok-&gt;sljedeci;
            next=pok;
        }
        std::cout&lt;&lt;std::endl;
    }
}

void IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;prvi, std::multimap&lt;Boje, std::string&gt; &amp;mapa)
{
    if(BrojKarataUSpilu(prvi)&gt;52 || !DobroSortirano(prvi)) throw std::logic_error("Neispravna lista!");
    for(auto it_mapa=mapa.begin(); it_mapa!=mapa.end(); it_mapa++) {
        std::shared_ptr&lt;Cvor&gt; next(nullptr);
        for(std::shared_ptr&lt;Cvor&gt; pok=prvi; next!=prvi; pok=pok-&gt;sljedeci) {
            next=pok-&gt;sljedeci;
            if(it_mapa-&gt;first==next-&gt;karta.boja &amp;&amp; it_mapa-&gt;second==next-&gt;karta.vrijednost) {
                auto pom(next-&gt;sljedeci);
                pok-&gt;sljedeci=pom;
                if(next==prvi) prvi=prvi-&gt;sljedeci;
                next=nullptr;
                mapa.erase(it_mapa);
            }
            next=pok-&gt;sljedeci;
            if(pok==pok-&gt;sljedeci) {
                prvi=nullptr;
                return;
            }
        }
    }
}

<a name="1"></a><font color="#00FF00"><a href="match422-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt; &amp;prvi, const short int &amp;r, const int &amp;b)
{
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    if(BrojKarataUSpilu(prvi)&gt;52 || !DobroSortirano(prvi)) throw std::logic_error("Neispravna lista!");
    int br_karata(0);
    std::string nazivi_boja[4] {"Pik", "Tref", "Herc", "Karo"};
    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; stek;
    std::shared_ptr&lt;Cvor&gt; pok(prvi), prethodni(nullptr);
    while(br_karata&lt;b) {
        int i=0;
        while(i&lt;r-1) {
            prethodni=pok;
            pok=pok-&gt;sljedeci;
            i++;
        }
        std::string pom(nazivi_boja[int(pok-&gt;karta.boja)]); //ubacivanje u stek
        std::pair&lt;std::string, std::string&gt; par {pom, pok-&gt;karta.vrijednost};
        stek.push(par);
        br_karata++;
        //brisanje
        if(pok==prvi) {
            std::shared_ptr&lt;Cvor&gt; kraj(nullptr), pom(prvi-&gt;sljedeci);
            while(pom!=prvi) {
                kraj=pom;
                pom=pom-&gt;sljedeci;
            }
            prvi=pok-&gt;sljedeci;
            kraj-&gt;sljedeci=prvi;
            pok=nullptr;
        } else {
            auto next(pok-&gt;sljedeci);
            prethodni-&gt;sljedeci=next;
            if(pok==prvi) prvi=prvi-&gt;sljedeci;
            pok=next;
        }
    }
    return stek;
}

bool NesipravneKarte(std::pair&lt;std::string, std::string&gt; par)
{
    std::string nazivi_boja[4] {"Pik", "Tref", "Herc", "Karo"};
    std::string vrijednost_karte[] {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    for(int i=0; i&lt;4; i++)
        for(int j=0; j&lt;13; j++)
            if(par.first==nazivi_boja[i] &amp;&amp; par.second==vrijednost_karte[j]) return false;
    return true;
}

<a name="2"></a><font color="#0000FF"><a href="match422-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt; &amp;prvi, std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;stek, int n)
</font>{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;stek.size()) throw std::range_error("Nedovoljno karata u steku!");
    if(BrojKarataUSpilu(prvi)&gt;52 || !DobroSortirano(prvi)) throw std::logic_error("Neispravna lista!");
    for(int i=0; i&lt;n; i++) {
        std::pair&lt;std::string, std::string&gt; el_reda(stek.top());
        if(NesipravneKarte(el_reda))throw std::logic_error("Neispravne karte!");
        Boje boja;
        std::string nazivi_boja[4] {"Pik", "Tref", "Herc", "Karo"};
        for(int j=0; j&lt;4; j++) {
            if(nazivi_boja[j]==el_reda.first) {
                boja=Boje(j);
                break;
            }
        }
        std::pair&lt;Boje, std::string&gt; par=std::make_pair(boja, el_reda.second); //napravili smo par koji se nalazi u steku
        std::shared_ptr&lt;Cvor&gt; prethodni(prvi), next(nullptr);
        for(std::shared_ptr&lt;Cvor&gt; pok=prvi; next!=prvi; pok=pok-&gt;sljedeci) {
            next=pok-&gt;sljedeci;
            if(par.first==pok-&gt;karta.boja &amp;&amp; par.second==pok-&gt;karta.vrijednost) break;
            else if(pok-&gt;karta.boja&gt;par.first || (pok-&gt;karta.boja==par.first &amp;&amp; PrijeUStingu_i_PostojiUStringu(par.second, pok-&gt;karta.vrijednost))) {
                if(pok==prvi) {
                    auto novi(std::make_shared&lt;Cvor&gt;());
                    novi-&gt;karta.boja=par.first;
                    novi-&gt;karta.vrijednost=par.second;
                    novi-&gt;sljedeci=pok;
                    std::shared_ptr&lt;Cvor&gt; kraj(nullptr), pom(prvi-&gt;sljedeci);
                    while(pom!=prvi) {
                        kraj=pom;
                        pom=pom-&gt;sljedeci;
                    }
                    kraj-&gt;sljedeci=novi;
                    prvi=novi;
                    break;
                } else {
                    auto novi(std::make_shared&lt;Cvor&gt;());
                    novi-&gt;karta.boja=par.first;
                    novi-&gt;karta.vrijednost=par.second;
                    novi-&gt;sljedeci=pok;
                    prethodni-&gt;sljedeci=novi;
                    break;
                }
            } else if(pok-&gt;karta.boja==par.first &amp;&amp; PrijeUStingu_i_PostojiUStringu(pok-&gt;karta.vrijednost, par.second) &amp;&amp; next==prvi) {
                auto novi(std::make_shared&lt;Cvor&gt;());
                novi-&gt;karta.boja=par.first;
                novi-&gt;karta.vrijednost=par.second;
                novi-&gt;sljedeci=next;
                pok-&gt;sljedeci=novi;
                break;
            }
            prethodni=pok;
        }
        stek.pop();
    }
}

void UnistiSpil(std::shared_ptr&lt;Cvor&gt; prvi)
{
    if(!prvi) return;
    std::shared_ptr&lt;Cvor&gt; kraj(nullptr), pom(prvi-&gt;sljedeci);
    while(pom!=prvi) {
        kraj=pom;
        pom=pom-&gt;sljedeci;
    }
    kraj-&gt;sljedeci=nullptr;
    while(prvi!=nullptr) {
        std::shared_ptr&lt;Cvor&gt; obrisi(prvi);
        prvi=prvi-&gt;sljedeci;
        obrisi=nullptr;
    }
}

int main ()
{
    auto spil(KreirajSpil());
    int b, br_karata;
    short int r;
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    std::cin&gt;&gt;r;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    std::cin&gt;&gt;b;
    try {
<a name="3"></a><font color="#00FFFF"><a href="match422-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        auto stek(IzbaciKarteRazbrajanjem(spil, r, b));
        IspisiKarte(spil);
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        std::cin&gt;&gt;br_karata;
        VratiPosljednjihNKarata(spil, stek, br_karata);
        IspisiKarte(spil);
        UnistiSpil(spil);
</font>    } catch(std::domain_error iz) {
        UnistiSpil(spil);
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;iz.what()&lt;&lt;std::endl;
    } catch(std::logic_error iz) {
        UnistiSpil(spil);
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;iz.what()&lt;&lt;std::endl;
    } catch(std::range_error iz) {
        UnistiSpil(spil);
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;iz.what()&lt;&lt;std::endl;
    } catch(...) {
        UnistiSpil(spil);
        std::cout&lt;&lt;"Neocekivani izuzetak!"&lt;&lt;std::endl;
    }
    return 0;
}

bool PrijeUStingu_i_PostojiUStringu(std::string s1, std::string s2)
{
    std::string vrijednost_karte[13] {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    int mjesto_s1(-1), mjesto_s2(-1);
    for(int i=0; i&lt;13; i++) {
        if(vrijednost_karte[i]==s1) mjesto_s1=i;
        if(vrijednost_karte[i]==s2) mjesto_s2=i;
    }
    if(mjesto_s2==-1 || mjesto_s1==-1) return false;
    return mjesto_s1&lt;mjesto_s2;
}

bool DobroSortirano(std::shared_ptr&lt;Cvor&gt; prvi)
{
    std::shared_ptr&lt;Cvor&gt; prethodni(nullptr), next(nullptr);
    for(auto pok=prvi; next!=prvi; pok=pok-&gt;sljedeci) {
        if(pok==prvi) {
            prethodni=pok;
            continue;
        } else {
            if(prethodni-&gt;karta.boja&gt;pok-&gt;karta.boja) return false;
            if(prethodni-&gt;karta.boja==pok-&gt;karta.boja)
                if(!PrijeUStingu_i_PostojiUStringu(prethodni-&gt;karta.vrijednost, pok-&gt;karta.vrijednost)) return false;
            prethodni=pok;
        }
        next=pok-&gt;sljedeci;
    }
    return true;
}
</pre>
</body>
</html>
