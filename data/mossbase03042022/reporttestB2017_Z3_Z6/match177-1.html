<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student2421.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student3116.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match177-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;memory&gt;
#include &lt;stdexcept&gt;

using namespace std;

enum class Boje{Pik, Tref, Herc, Karo};
</font>
<a name="3"></a><font color="#00FFFF"><a href="match177-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

const vector&lt;string&gt; Karte={"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
</font>
struct Karta
{
    Boje boja;
    string vrijednost;
};

struct Cvor
{
    Karta karta;
    shared_ptr&lt;Cvor&gt; sljedeci;
};

Karta StvoriKartu(int i ,int j)
{
    Karta k;
    k.boja=Boje(i);
    k.vrijednost=Karte[j];
    return k;
}
void IspisiSpil(shared_ptr&lt;Cvor&gt; karte)
{
  int br=0;//Prebroj cvorove
    
    
    auto temp=karte;
    if(temp-&gt;sljedeci!=nullptr)
    {
        while(temp-&gt;sljedeci!=karte){
            br++;
            temp=temp-&gt;sljedeci;
        }
      br++;
    }   
    cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;br&lt;&lt;" karata, i to:"&lt;&lt;endl;
    const vector&lt;string&gt; boje={"Pik","Tref","Herc","Karo"}; 
    if(br==0)
    {
        for(int i=0;i&lt;4;i++)
        {
            cout&lt;&lt;boje[i]&lt;&lt;": "&lt;&lt;endl;
        }
    }
   else{ auto it=karte;
    cout&lt;&lt;boje[(int) it-&gt;karta.boja]&lt;&lt;": "&lt;&lt;it-&gt;karta.vrijednost&lt;&lt;" ";
    for(auto a=karte-&gt;sljedeci;a!=karte;a=a-&gt;sljedeci)
    {
<a name="5"></a><font color="#FF0000"><a href="match177-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        if((int)it-&gt;karta.boja!=(int)a-&gt;karta.boja){cout&lt;&lt;endl; cout&lt;&lt;boje[(int)a-&gt;karta.boja]&lt;&lt;": ";it=a;}
</font>       
        cout&lt;&lt;a-&gt;karta.vrijednost&lt;&lt;" ";
    }        
    
   }
   cout&lt;&lt;endl;

}

shared_ptr&lt;Cvor&gt; KreirajSpil()
{
    shared_ptr&lt;Cvor&gt; poc=nullptr;
    shared_ptr&lt;Cvor&gt; tren=nullptr;
    for(int i=0;i&lt;4;i++)
    {
        for(int j=0;j&lt;13;j++)
        {
            Karta k=StvoriKartu(i,j);
            shared_ptr&lt;Cvor&gt; novi=make_shared&lt;Cvor&gt;();
            novi-&gt;karta=k;
            
            if(i==0 &amp;&amp; j==0)
                poc=novi;
            else 
                tren-&gt;sljedeci=novi;
                
            tren=novi;
            novi-&gt;sljedeci=poc;
        }
    }
    return poc;
}

void IzbaciKarte(shared_ptr&lt;Cvor&gt; &amp;karte,multimap&lt;Boje,string&gt; &amp;mapa)
{
    
    
     int br=0;//Prebroj cvorove
    
    auto temp=karte;
    
    while(temp-&gt;sljedeci!=karte){
        br++;
        temp=temp-&gt;sljedeci;
    }
    br++;
    if(br&gt;52) throw logic_error("Neispravna lista");
    temp=karte;
    while(temp-&gt;sljedeci!=karte)
    {
        bool ValjaLi=false;
        for(int i=0;i&lt;Karte.size();i++)
            if(Karte[i]==temp-&gt;karta.vrijednost) ValjaLi=true;
            temp=temp-&gt;sljedeci;
        if(ValjaLi==false) throw logic_error("Neispravna lista");
    }
    
    for(auto m=mapa.begin();m!=mapa.end();m++)
    {
<a name="0"></a><font color="#FF0000"><a href="match177-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        for(auto k=karte;k-&gt;sljedeci!=karte;k=k-&gt;sljedeci)
            if(m-&gt;first==k-&gt;karta.boja &amp;&amp; m-&gt;second==k-&gt;karta.vrijednost)
            {
                m=mapa.erase(m);
                shared_ptr&lt;Cvor&gt; prethodni=karte;
                while(prethodni-&gt;sljedeci!=k)
                    prethodni=prethodni-&gt;sljedeci;
</font>                
                if(k==karte)
                {
                    prethodni-&gt;sljedeci=karte-&gt;sljedeci;
                    karte=karte-&gt;sljedeci;
                }
                else prethodni-&gt;sljedeci=k-&gt;sljedeci;
                
                k-&gt;sljedeci=nullptr;
                 k=nullptr;
                k=prethodni-&gt;sljedeci;
                break;
            }
            if(m==mapa.end()) break;
    }
}

stack&lt;pair&lt;Boje,string&gt;&gt; IzbaciKarteRazbrajanjem(shared_ptr&lt;Cvor&gt; &amp;karte,const short int &amp;r,int b)
{   
    int pom=r;
    auto it=karte;
    stack&lt;pair&lt;Boje,string&gt;&gt; stek;
     if(r&lt;1 || r&gt;52 || b&lt;1) throw logic_error("Neispravni elementi za izbacivanje!");
   
      int br=0;//Prebroj cvorove
    
    auto temp=karte;
    
    while(temp-&gt;sljedeci!=karte){
        br++;
        temp=temp-&gt;sljedeci;
    }
    br++;
    if(br&gt;52) throw logic_error("Neispravna lista");
    temp=karte;
    while(temp-&gt;sljedeci!=karte)
    {
        bool ValjaLi=false;
        for(int i=0;i&lt;Karte.size();i++)
            if(Karte[i]==temp-&gt;karta.vrijednost) ValjaLi=true;
        temp=temp-&gt;sljedeci;
        if(ValjaLi==false) throw logic_error("Neispravna lista");
    }
    
    while(b!=0)
    {   
        pom=r;
        while(pom!=1)
        {
            it=it-&gt;sljedeci;
            pom--;
        }
        stek.push(make_pair(it-&gt;karta.boja,it-&gt;karta.vrijednost));
       
        
                shared_ptr&lt;Cvor&gt; prethodni=karte;
                while(prethodni-&gt;sljedeci!=it)
                    prethodni=prethodni-&gt;sljedeci;
                
                if(it==karte)
                {
                    prethodni-&gt;sljedeci=karte-&gt;sljedeci;
                    karte=karte-&gt;sljedeci;
                }
                else prethodni-&gt;sljedeci=it-&gt;sljedeci;
                
                it-&gt;sljedeci=nullptr;
                 it=nullptr;
                it=prethodni-&gt;sljedeci;
        
        b--;
    }
    return stek;
}

void VratiPosljednjihNKarata(shared_ptr&lt;Cvor&gt; karte,stack&lt;pair&lt;Boje,string&gt;&gt; stek,int n)
{   
    if(n&lt;0) throw domain_error("Broj n je besmislen!");
    else if(n&gt;stek.size()) throw range_error("Nedovoljno karata u steku!");
    
     int br=0;//Prebroj cvorove
    
    auto temp=karte;
    if(temp-&gt;sljedeci!=nullptr){
    while(temp-&gt;sljedeci!=karte){
        br++;
        temp=temp-&gt;sljedeci;
    }
    br++;
    }
    if(br&gt;52) throw logic_error("Neispravna lista");
    temp=karte;
    if(br!=0)
        while(temp-&gt;sljedeci!=karte)
        {
            bool ValjaLi=false;
            for(int i=0;i&lt;Karte.size();i++)
                if(Karte[i]==temp-&gt;karta.vrijednost) ValjaLi=true;
            temp=temp-&gt;sljedeci;
            if(ValjaLi==false) throw logic_error("Neispravna lista");
        }
    
    if(br==0)
    {
<a name="1"></a><font color="#00FF00"><a href="match177-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

            shared_ptr&lt;Cvor&gt; novi=make_shared&lt;Cvor&gt;();
            novi-&gt;karta.boja=stek.top().first;
            novi-&gt;karta.vrijednost=stek.top().second;
            
            karte=novi;
</font>            
            stek.pop();
            n--;
            br++;
            
    }
    if(br==1 &amp;&amp; stek.size()!=0)
    {   
            shared_ptr&lt;Cvor&gt; novi=make_shared&lt;Cvor&gt;();
            novi-&gt;karta.boja=stek.top().first;
            novi-&gt;karta.vrijednost=stek.top().second;
            
            auto it=karte;
            if((int)it-&gt;karta.boja&lt;(int)stek.top().first)
            {
                novi-&gt;sljedeci=karte;
                karte-&gt;sljedeci=novi;
                karte=novi;
            }
            else 
            {
                karte-&gt;sljedeci=novi;
                novi-&gt;sljedeci=karte;
            }
            
            stek.pop();
            n--;
    }
    while(n!=0 &amp;&amp; stek.size()!=0)
    {
        for(auto it=karte;it-&gt;sljedeci!=karte;it=it-&gt;sljedeci)
        {
            while((int)it-&gt;karta.boja&lt;(int)stek.top().first)
                it=it-&gt;sljedeci;
                
                 while([](string a,string b){  
                                    int p,q;
                                    for(p=0;p&lt;Karte.size();p++)
                                        if(a==Karte[p]) break;            
                                    for(q=0;q&lt;Karte.size();q++)
                                        if(b==Karte[q]) break;            
                 
                                    if(p&lt;q) return true;
                                    return false;
                                  }(it-&gt;karta.vrijednost,stek.top().second) &amp;&amp; (int)stek.top().first==(int)it-&gt;karta.boja)
                                        it=it-&gt;sljedeci;
             
            shared_ptr&lt;Cvor&gt; novi=make_shared&lt;Cvor&gt;();
            novi-&gt;karta.boja=stek.top().first;
            novi-&gt;karta.vrijednost=stek.top().second;
            
            shared_ptr&lt;Cvor&gt; prethodni=karte;
            while(prethodni-&gt;sljedeci!=it)
                prethodni=prethodni-&gt;sljedeci;
            
             prethodni-&gt;sljedeci=novi;
             novi-&gt;sljedeci=it;
             it=novi;
            
             stek.pop();
            break;
            
        }
        
        
        
        
        n--;
    }
}

void UnistiSpil(shared_ptr&lt;Cvor&gt; karte)
{
    karte-&gt;sljedeci=nullptr;
    karte=nullptr;
}

int main ()
{
    int n;
    shared_ptr&lt;Cvor&gt; spil=KreirajSpil();
    int a,b;
    stack&lt;pair&lt;Boje,string&gt;&gt; stek;
    try
    {
        cout&lt;&lt;"Unesite korak razbrajanja: ";
        cin&gt;&gt;n;
        cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
<a name="2"></a><font color="#0000FF"><a href="match177-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        cin&gt;&gt;a;
        stek=IzbaciKarteRazbrajanjem(spil,n,a);
        IspisiSpil(spil);
        cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        cin&gt;&gt;b;
        VratiPosljednjihNKarata(spil,stek,b);
        IspisiSpil(spil);
        UnistiSpil(spil);
    }
    catch(domain_error e)
</font>    {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
        UnistiSpil(spil);
    }
    catch(range_error e)
    {
         cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what(); 
         UnistiSpil(spil);
    }
    catch(logic_error e)
    {
         cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
         UnistiSpil(spil);
    }
	return 0;
}
</pre>
</body>
</html>
