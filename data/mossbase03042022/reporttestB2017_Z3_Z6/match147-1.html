<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student5244.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student5170.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match147-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6

#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;

enum class Boje {Pik,Tref,Herc,Karo};
std::vector&lt;Boje&gt;vektorboja={Boje::Pik,Boje::Tref,Boje::Herc,Boje::Karo};
</font><a name="1"></a><font color="#00FF00"><a href="match147-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

std::vector&lt;std::string&gt;vektorbrojeva={"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
   std::shared_ptr&lt;Cvor&gt; sljedeci=nullptr;
</font>};

std::string vratistring(Boje boja) {
 if(boja==Boje::Pik)return ("Pik");
 if(boja==Boje::Tref)return ("Tref");
 if(boja==Boje::Herc)return ("Herc");
 return ("Karo");
}

Boje vratiboju(std::string rijec){
 if(rijec=="Pik")return Boje::Pik;
 if(rijec=="Tref")return Boje::Tref;
 if(rijec=="Herc")return Boje::Herc;
 return Boje::Karo;
}

bool uporedikarte(Cvor karta1, std::pair&lt;std::string,std::string&gt;karta2) {
 
   
   if(karta1.karta.boja!=vratiboju(karta2.first)) {
    return karta1.karta.boja&lt;vratiboju(karta2.first);
   }
   auto it1=vektorbrojeva.begin();
   while(it1!=vektorbrojeva.end() &amp;&amp; karta1.karta.vrijednost!=*it1)it1++;
   int distanca1=std::distance(it1,vektorbrojeva.end());
   auto it2=vektorbrojeva.begin();
   while(it2!=vektorbrojeva.end() &amp;&amp; karta2.second!=*it2 )it2++;
   int distanca2=std::distance(it2,vektorbrojeva.end());
   return distanca1&gt;distanca2;

return false; 
}

void provjerispil(std::shared_ptr&lt;Cvor&gt;pok) {
 
 auto pomocna=pok,start=pok; pok=pok-&gt;sljedeci; int brojac=0;
 while(pok!=start) {
  brojac++; if(brojac==53)throw std::logic_error("Neispravna lista!");
  auto pomocna_karta=std::make_pair(vratistring(pomocna-&gt;karta.boja),pomocna-&gt;karta.vrijednost);
  if(uporedikarte(*pok,pomocna_karta) )throw std::logic_error("Neispravna lista!");
  
  if(std::count(vektorboja.begin(),vektorboja.end(),vratiboju(pomocna_karta.first))==0)throw std::logic_error("Neispravna lista!");
  if(std::count(vektorbrojeva.begin(),vektorbrojeva.end(),pomocna_karta.second)==0)throw std::logic_error("Neispravna lista!");
  pomocna=pok;
  pok=pok-&gt;sljedeci;
 }
 
 pok=start-&gt;sljedeci;
 while(pok!=start) {
    pomocna=pok-&gt;sljedeci;
<a name="6"></a><font color="#00FF00"><a href="match147-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    while(pomocna!=pok) {
     if(pok-&gt;karta.boja==pomocna-&gt;karta.boja&amp;&amp;pok-&gt;karta.vrijednost==pomocna-&gt;karta.vrijednost)throw std::logic_error("Neispravna lista!");
</font>     pomocna=pomocna-&gt;sljedeci;
    }
    pok=pok-&gt;sljedeci;
 }
 
}

void provjerikartu(std::pair&lt;std::string,std::string&gt; karta){
 if(std::count(vektorboja.begin(),vektorboja.end(),vratiboju(karta.first))==0)throw std::logic_error("Neispravne karte!");
 if(std::count(vektorbrojeva.begin(),vektorbrojeva.end(),karta.second)==0)throw std::logic_error("Neispravne karte!");
 
}



std::shared_ptr&lt;Cvor&gt; KreirajSpil() {
 int brojacboja=0,brojackarti=0;
 std::shared_ptr&lt;Cvor&gt;pocetak=nullptr,zadnji;
  for(int i=0;i&lt;52;i++) { 
     std::shared_ptr&lt;Cvor&gt;novi(std::make_shared&lt;Cvor&gt;());
      novi-&gt;karta.boja=vektorboja[brojacboja];
      novi-&gt;karta.vrijednost=vektorbrojeva[brojackarti];
      if(pocetak==nullptr)pocetak=novi;
    else zadnji-&gt;sljedeci=novi;
     if(i==51) novi-&gt;sljedeci=pocetak;
      zadnji=novi;
     brojackarti++; if(brojackarti==13){brojackarti=0;brojacboja++;}
  }
  return pocetak;
}

<a name="5"></a><font color="#FF0000"><a href="match147-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

  void  IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;prvi,std::multimap&lt;Boje,std::string&gt; &amp;mapa){
   provjerispil(prvi);
   auto it=mapa.begin();
</font>   while(it!=mapa.end()) {
       
      std::shared_ptr&lt;Cvor&gt; pok(prvi-&gt;sljedeci);
      std::shared_ptr&lt;Cvor&gt; prosli(prvi); int brojac=0;
       for(;pok!=prvi;pok=pok-&gt;sljedeci) {
           if(brojac==52)throw std::logic_error("Neispravna lista");
           if(it-&gt;first==pok-&gt;karta.boja &amp;&amp; it-&gt;second==pok-&gt;karta.vrijednost){
               prosli-&gt;sljedeci=pok-&gt;sljedeci-&gt;sljedeci;
               std::shared_ptr&lt;Cvor&gt;zabrisanje(pok);
               pok=prosli;
               if(zabrisanje==prvi)prvi=prvi-&gt;sljedeci;
            //   delete zabrisanje;
           }
           else prosli=pok;
           brojac++;
       }
<a name="0"></a><font color="#FF0000"><a href="match147-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

       it++;
   }
  }
   
 std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt; &amp;pok,const short int &amp;r, const int &amp;b ) {
    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    provjerispil(pok);
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek;
    std::shared_ptr&lt;Cvor&gt;pomocni(pok-&gt;sljedeci); 
    std::shared_ptr&lt;Cvor&gt;prethodni(pok);
    int kraj=1;
    while(pomocni!=pok){kraj++;pomocni=pomocni-&gt;sljedeci;} //brojanje karata
     int brojac=0;
     pomocni=pok;

     while(brojac!=b) {
      
         
        for(int i=0;i&lt;r-1;i++) {
         
          prethodni=pomocni;
          pomocni=pomocni-&gt;sljedeci;
        
         
         }
         std::shared_ptr&lt;Cvor&gt; zabrisanje(pomocni);
         prethodni-&gt;sljedeci=pomocni-&gt;sljedeci;
         if(zabrisanje==pok)pok=pok-&gt;sljedeci;
         stek.push(std::make_pair(vratistring(zabrisanje-&gt;karta.boja),zabrisanje-&gt;karta.vrijednost));
         pomocni=pomocni-&gt;sljedeci;
     //delete zabrisanje
         brojac++;
         
         if(brojac==kraj)brojac=b; 
         
         
     }
      return stek;
 }
 
<a name="2"></a><font color="#0000FF"><a href="match147-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

 void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt; &amp;pok,std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;stek,int n) {
</font>   if(n&lt;0 || n&gt;52) throw std::domain_error("Broj n je besmislen!");
  if(n&gt;stek.size()) throw std::range_error("Nedovoljno karata u steku!");
   provjerispil(pok);
    for(int i=0;i&lt;n;i++) {
    std::shared_ptr&lt;Cvor&gt; prosli(pok);
    std::shared_ptr&lt;Cvor&gt;pomocni(pok-&gt;sljedeci);
     
     provjerikartu(stek.top());
     auto pomocnakarta=stek.top();
     while( pomocni!=pok &amp;&amp; uporedikarte(*pomocni,pomocnakarta)) {
      
      prosli=prosli-&gt;sljedeci;
      pomocni=pomocni-&gt;sljedeci;
     }
     if(pomocni-&gt;karta.boja==vratiboju(pomocnakarta.first) &amp;&amp; pomocni-&gt;karta.vrijednost==pomocnakarta.second)stek.pop();
    else { std::shared_ptr&lt;Cvor&gt;zaubacivanje(std::make_shared&lt;Cvor&gt;());
     zaubacivanje-&gt;karta.boja=vratiboju(pomocnakarta.first);
     zaubacivanje-&gt;karta.vrijednost=pomocnakarta.second;
     zaubacivanje-&gt;sljedeci=pomocni;
     prosli-&gt;sljedeci=zaubacivanje;
     
     stek.pop();
    }
    
    }
  
}



int main ()
{ std::shared_ptr&lt;Cvor&gt;pok=nullptr;
<a name="3"></a><font color="#00FFFF"><a href="match147-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

   try{ 
    std::cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int r; std::cin&gt;&gt;r;
    std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int b; std::cin&gt;&gt;b;
</font>    pok=KreirajSpil();
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; stek=IzbaciKarteRazbrajanjem(pok,r,b);
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;52-b&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
   
    std::shared_ptr&lt;Cvor&gt;pomocni(pok);
   
    for(int i=0;i&lt;4;i++) {
    std::string nazivboje=vratistring(pomocni-&gt;karta.boja);
    std::cout&lt;&lt;nazivboje&lt;&lt;": ";
    while(vratistring(pomocni-&gt;karta.boja)==nazivboje){
       std::cout&lt;&lt;pomocni-&gt;karta.vrijednost&lt;&lt;" ";
     pomocni=pomocni-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl;
    }
    
    std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";int vracanje; std::cin&gt;&gt;vracanje;
    VratiPosljednjihNKarata(pok,stek,vracanje);
    std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;52-b+vracanje&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    pomocni=pok;
    for(int i=0;i&lt;4;i++) {
    std::string nazivboje=vratistring(pomocni-&gt;karta.boja);
    std::cout&lt;&lt;nazivboje&lt;&lt;": ";
    while(vratistring(pomocni-&gt;karta.boja)==nazivboje){
       std::cout&lt;&lt;pomocni-&gt;karta.vrijednost&lt;&lt;" ";
     pomocni=pomocni-&gt;sljedeci;
    }
    std::cout&lt;&lt;std::endl;
    } 
  
   }
   catch(std::logic_error &amp;izuzetak) {
    std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
   }
   catch(std::domain_error &amp;izuzetak) {
    std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
   }
   catch(std::range_error &amp;izuzetak) {
    std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
   }
   
   pok-&gt;sljedeci=nullptr;
   	return 0;
}

</pre>
</body>
</html>
