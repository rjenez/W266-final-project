<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student2421.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student2142.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match178-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;memory&gt;

using namespace std;

enum class Boje {Pik, Tref, Herc, Karo};
</font>
const vector&lt;string&gt; Karte{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
const vector&lt;string&gt; Znakovi{"Pik","Tref","Herc","Karo"};
const vector&lt;int&gt; Vrijednosti{2,3,4,5,6,7,8,9,10,12,13,14,15};

typedef multimap&lt;Boje,string&gt; Mapa;
typedef pair&lt;Boje,string&gt; Par;
typedef stack&lt;Par&gt; Stek;

struct Karta
{
    Boje boja;
    string vrijednost;
};

struct Cvor
{
    Karta karta;
    shared_ptr&lt;Cvor&gt; sljedeci;
};

void IspisiStek(Stek s)
{   
    while(s.size())
    {
        cout&lt;&lt;Znakovi[(int)s.top().first]&lt;&lt;"-&gt;"&lt;&lt;s.top().second&lt;&lt;" ";
        s.pop();
    }
            
}

shared_ptr&lt;Cvor&gt; KreirajSpil()
{
    shared_ptr&lt;Cvor&gt; p;
    shared_ptr&lt;Cvor&gt; temp;
    int br=0;
    
    for(int i=0;i&lt;52;i++)
    {
        Karta k;
        if(i%13==0 &amp;&amp; i!=0) br++;
        k.boja=(Boje)br;
        k.vrijednost=Karte[i%13];
        
        
        shared_ptr&lt;Cvor&gt; novi=make_shared&lt;Cvor&gt;();
        novi-&gt;karta=k;
        
        if(i==0)
            p=novi;
        else 
            temp-&gt;sljedeci=novi;
        
        temp=novi;
        novi-&gt;sljedeci=p;
        
       
    }
    
    return p;
}

int VratiBroj(shared_ptr&lt;Cvor&gt; dek)
{
    shared_ptr&lt;Cvor&gt; temp=dek;
    int i;
    for(i=1;temp-&gt;sljedeci!=dek;temp=temp-&gt;sljedeci,i++);
    return i;
}

void IspisiSpil(shared_ptr&lt;Cvor&gt; dek)
{
    int br=0;cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;VratiBroj(dek)&lt;&lt;" karata, i to:"&lt;&lt;endl;
    shared_ptr&lt;Cvor&gt; temp=dek;
    
<a name="0"></a><font color="#FF0000"><a href="match178-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

    cout&lt;&lt;Znakovi[(int)temp-&gt;karta.boja]&lt;&lt;": ";
    cout&lt;&lt;temp-&gt;karta.vrijednost&lt;&lt;" ";
    temp=temp-&gt;sljedeci;
    
    for(int i=1;temp!=dek;i++,temp=temp-&gt;sljedeci)
    {  
        if(br!=(int)temp-&gt;karta.boja)
        {   
            cout&lt;&lt;endl;
            cout&lt;&lt;Znakovi[(int)temp-&gt;karta.boja]&lt;&lt;": ";
            br++;
        }
        cout&lt;&lt;temp-&gt;karta.vrijednost&lt;&lt;" ";
    }
    cout&lt;&lt;endl;
</font>}

void IzbaciKarte(shared_ptr&lt;Cvor&gt; &amp;dek,Mapa &amp;m)
{
    shared_ptr&lt;Cvor&gt; temp=dek;
    shared_ptr&lt;Cvor&gt; pret=dek;
      
    while(temp-&gt;sljedeci!=dek)
    {
        for(auto a=m.begin();a!=m.end();a++)
        {
            if((int)temp-&gt;karta.boja==(int)a-&gt;first 
                    &amp;&amp; temp-&gt;karta.vrijednost==a-&gt;second)
            {
                shared_ptr&lt;Cvor&gt; pom=temp;
                
                while(pret-&gt;sljedeci!=pom)
                    pret=pret-&gt;sljedeci;
                
                
                if(pom==dek)
                {
                    pret-&gt;sljedeci=dek-&gt;sljedeci;
                    dek=dek-&gt;sljedeci;
                }
                else 
                    pret-&gt;sljedeci=pom-&gt;sljedeci;
                
                pom=nullptr;
                //delete pom;
                pom=pret-&gt;sljedeci;
                a=m.erase(a);
                if(a==m.end()) break;
            }
           
        }
        temp=temp-&gt;sljedeci;    
    }
    
}
Stek IzbaciKarteRazbrajanjem(shared_ptr&lt;Cvor&gt; &amp;dek,short int r,int b)
{
     if(r&lt;1 || r&gt;52 || b&lt;1) throw logic_error("Neispravni elementi za izbacivanje!");
    auto it=dek;auto pret=dek;
    Stek s;
    for(int i=0;i&lt;b;i++)
    {
        for(int j=0;j!=r-1;it=it-&gt;sljedeci,j++);
            
            s.push(make_pair(it-&gt;karta.boja,it-&gt;karta.vrijednost));
                
            while(pret-&gt;sljedeci!=it)
                pret=pret-&gt;sljedeci;
                
                pret-&gt;sljedeci=it-&gt;sljedeci;
                
                
                it=nullptr;
                it=pret-&gt;sljedeci;
        
    }
    return s;
}

bool ManjiString(string a,string b)
{   
    int i,j;
    for(i=0;i&lt;Karte.size();i++)
        if(a==Karte[i]) break;
    for(j=0;j&lt;Karte.size();j++)
        if(b==Karte[j]) break;
        
        return i&lt;j;
}

void VratiPosljednjihNKarata(shared_ptr&lt;Cvor&gt; &amp;dek,Stek &amp;s,int n)
{   
    if(n&lt;0) throw domain_error("Broj n je besmislen!");
    if(n&gt;s.size()) throw range_error("Nedovoljno karata u redu!");
    if(VratiBroj(dek)&gt;52) throw logic_error("Neispravna lista!");
    shared_ptr&lt;Cvor&gt; pret=dek;
    for(int i=n;i!=0;i--)
    {   
         
        for(shared_ptr&lt;Cvor&gt; it=dek;it-&gt;sljedeci!=dek;it=it-&gt;sljedeci)
        {
            if((int)it-&gt;karta.boja==(int)s.top().first)
            {
                while(ManjiString(it-&gt;karta.vrijednost,s.top().second)&amp;&amp; (int)it-&gt;karta.boja==(int)s.top().first)
<a name="1"></a><font color="#00FF00"><a href="match178-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

                    it=it-&gt;sljedeci;
                  
                pret=dek;  
                while(pret-&gt;sljedeci!=it)
                    pret=pret-&gt;sljedeci;
                
                shared_ptr&lt;Cvor&gt; novi=make_shared&lt;Cvor&gt;();
                novi-&gt;karta.boja=s.top().first;
                novi-&gt;karta.vrijednost=s.top().second;
                
                pret-&gt;sljedeci=novi;
</font>                novi-&gt;sljedeci=it;
                it=novi;
                s.pop();
                break;
               
            }
          
        }
    }
}

int main ()
{
    shared_ptr&lt;Cvor&gt; dek=KreirajSpil();
    
    try{
    
    
    cout&lt;&lt;"Unesite korak razbrajanja: ";
    int n;cin&gt;&gt;n;
    cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int a;cin&gt;&gt;a;
<a name="3"></a><font color="#00FFFF"><a href="match178-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

     Stek s;
    s=IzbaciKarteRazbrajanjem(dek,n,a);
    IspisiSpil(dek);
    cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
    cin&gt;&gt;n;
   
   VratiPosljednjihNKarata(dek,s,n);
   IspisiSpil(dek);
</font>    
    dek-&gt;sljedeci=nullptr;
    dek=nullptr;
    }
    catch(domain_error er) { cout&lt;&lt;"Izuzetak: "&lt;&lt;er.what();dek-&gt;sljedeci=nullptr;
    dek=nullptr;}
     catch(range_error er) { cout&lt;&lt;"Izuzetak: "&lt;&lt;er.what();dek-&gt;sljedeci=nullptr;
    dek=nullptr;}
     catch(logic_error er) {cout&lt;&lt;"Izuzetak: "&lt;&lt;er.what();dek-&gt;sljedeci=nullptr;
    dek=nullptr;}
  // UnistiSpil(dek);
  /*  Mapa m;
    m.insert(make_pair((Boje)2,"5"));
    m.insert(make_pair((Boje)3,"9"));
    m.insert(make_pair((Boje)0,"2"));
    
    //IzbaciKarte(dek,m);
    //IspisiSpil(dek);
    cout&lt;&lt;endl;
    Stek s=IzbaciKarteRazbrajanjem(dek,12,6);
    IspisiStek(s);
    cout&lt;&lt;endl;
    IspisiSpil(dek);
    cout&lt;&lt;endl;
    VratiPosljednjihNKarata(dek,s,4);
    IspisiSpil(dek);*/
    return 0;
}
</pre>
</body>
</html>
