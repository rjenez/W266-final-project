<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9443.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9443.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match527-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;memory&gt;

enum class Boje{ Pik, Tref, Herc, Karo };

struct Karta{
    Boje boja;
    std::string vrijednost;
};

struct Cvor{
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
</font>};

std::shared_ptr&lt;Cvor&gt; KreirajSpil() {
    std::shared_ptr&lt;Cvor&gt; posljedni, prvi{nullptr};
    for(int i=1; i&lt;=4; i++) {
        for(int j=0; j&lt;13; j++) {
            Karta ubaci;
            if(i==1) ubaci.boja=Boje::Pik;
            else if(i==2) ubaci.boja=Boje::Tref;
            else if(i==3) ubaci.boja=Boje::Herc;
            else ubaci.boja=Boje::Karo;
            if(j&lt;9) ubaci.vrijednost=std::to_string(j+2);
            else if(j==9) ubaci.vrijednost="J";
            else if(j==10) ubaci.vrijednost="Q";
            else if(j==11) ubaci.vrijednost="K";
            else ubaci.vrijednost="A";
<a name="3"></a><font color="#00FFFF"><a href="match527-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            auto novi(std::make_shared&lt;Cvor&gt;(Cvor({ubaci, nullptr})));
            if(!prvi) prvi=novi;
            else posljedni-&gt;sljedeci=novi;
            posljedni=novi;
        }
    }
    posljedni-&gt;sljedeci=prvi;
    return prvi;
}

int Vrijednost(std::string it) {
</font>    int vrij{0};
    if(it == "2") vrij=1;
    else if(it == "3") vrij=2;
    else if(it == "4") vrij=3;
    else if(it == "5") vrij=4;
    else if(it == "6") vrij=5;
    else if(it == "7") vrij=6;
    else if(it == "8") vrij=7;
    else if(it == "9") vrij=8;
    else if(it == "10") vrij=9;
    else if(it == "J") vrij=10;
    else if(it == "Q") vrij=11;
    else if(it == "K") vrij=12;
    else if(it == "A") vrij=13;
   return vrij;
}

void Provjera(std::shared_ptr&lt;Cvor&gt; cv) {
    std::shared_ptr&lt;Cvor&gt; prelet{cv};
    int br{0};
    while(prelet != cv) {
        br++;
         if(prelet-&gt;sljedeci != cv &amp;&amp; (prelet-&gt;karta).boja &gt; ((prelet-&gt;sljedeci)-&gt;karta).boja ) throw std::logic_error("Neispravna lista!");
            if((prelet-&gt;karta).boja == ((prelet-&gt;sljedeci)-&gt;karta).boja) {
                if(( (prelet-&gt;karta).vrijednost == "2" || (prelet-&gt;karta).vrijednost == "3" || (prelet-&gt;karta).vrijednost == "4" || 
                     (prelet-&gt;karta).vrijednost == "5" || (prelet-&gt;karta).vrijednost == "6" || (prelet-&gt;karta).vrijednost == "7" || 
                     (prelet-&gt;karta).vrijednost == "8" || (prelet-&gt;karta).vrijednost == "9" || (prelet-&gt;karta).vrijednost == "10" ||
                     (prelet-&gt;karta).vrijednost == "J" || (prelet-&gt;karta).vrijednost == "Q" || (prelet-&gt;karta).vrijednost == "K" || 
                     (prelet-&gt;karta).vrijednost == "A") &amp;&amp; 
                    (((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "2" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "3" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "4" ||
                     ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "5" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "6" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "7" ||
                     ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "8" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "9" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "10" ||
                     ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "J" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "Q" || ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "K" ||
                     ((prelet-&gt;sljedeci)-&gt;karta).vrijednost == "A")) {
                        int vrij{ Vrijednost((prelet-&gt;karta).vrijednost) }, vrij2{ Vrijednost(((prelet-&gt;sljedeci)-&gt;karta).vrijednost) };
                        if(vrij &gt; vrij2) throw std::logic_error("Neispravna lista!");
                }
                else throw std::logic_error("Neispravna lista!");
            }
        prelet=prelet-&gt;sljedeci;
    }
    if(br &gt; 52) throw std::logic_error("Neispravna lista!");
}

void IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;prva, std::multimap&lt;Boje, std::string&gt; &amp;M) {
    Provjera(prva);
    auto itmap(M.begin());
    while(itmap != M.end()) {
        std::shared_ptr&lt;Cvor&gt; potraga{prva};
        do{
            if((potraga-&gt;karta).boja == itmap-&gt;first &amp;&amp; (potraga-&gt;karta).vrijednost == itmap-&gt;second) {
                if(potraga == potraga-&gt;sljedeci) {
                    potraga-&gt;sljedeci = nullptr;
                    potraga=nullptr;
                    prva=nullptr;
                    itmap=M.erase(itmap);
                    break;
                }
                std::shared_ptr&lt;Cvor&gt; prije{prva};
                while(prije-&gt;sljedeci != potraga) prije=prije-&gt;sljedeci;
                if(potraga == prva) prva = prva-&gt;sljedeci;
                prije-&gt;sljedeci=potraga-&gt;sljedeci;
                potraga=prije;
                itmap=M.erase(itmap);
            }
            potraga=potraga-&gt;sljedeci;
        } while(potraga == prva);
        itmap++;
    }
}

std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt; &amp;prva, const short int &amp;r, const int &amp;b) {
    if(r &lt; 1 || r &gt; 52 || b &lt; 1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    Provjera(prva);
    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; vrati;
    int brojac{1}, jelb{0};
    std::shared_ptr&lt;Cvor&gt; pomocna{prva};
    for(;;) {
        if(brojac &gt;= r &amp;&amp; brojac%r == 0) {
            std::string upisBoje;
            if((pomocna-&gt;karta).boja == Boje::Pik) upisBoje="Pik";
            else if((pomocna-&gt;karta).boja == Boje::Tref) upisBoje="Tref";
            else if((pomocna-&gt;karta).boja == Boje::Herc) upisBoje="Herc";
            else if((pomocna-&gt;karta).boja == Boje::Karo) upisBoje="Karo";
            vrati.push(std::pair&lt;std::string, std::string&gt;(upisBoje, (pomocna-&gt;karta).vrijednost));
            if(pomocna == pomocna-&gt;sljedeci) {
                pomocna-&gt;sljedeci=nullptr;
                pomocna=nullptr;
                prva=nullptr;
                jelb++;
                break;
            }
            std::shared_ptr&lt;Cvor&gt; prije{prva};
            while(prije-&gt;sljedeci != pomocna) prije=prije-&gt;sljedeci;
            if(pomocna == prva) prva = prva-&gt;sljedeci;
            prije-&gt;sljedeci=pomocna-&gt;sljedeci;
            pomocna=prije-&gt;sljedeci;
            jelb++;
            if(jelb == b) break;
        }
        else pomocna=pomocna-&gt;sljedeci;
        brojac++;
    }
    return vrati;
}

<a name="2"></a><font color="#0000FF"><a href="match527-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt; &amp;prva, std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;Stek, int n) {
</font>    Provjera(prva);
    if(n &lt; 0) throw std::domain_error("Broj n je besmislen!");
    if(n &gt; Stek.size()) throw std::range_error("Nedovoljno karata u steku!");
    for(int i=0; i&lt;n; i++) {
        Boje bojko;
<a name="0"></a><font color="#FF0000"><a href="match527-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        if((Stek.top()).first == "Pik") bojko=Boje::Pik;
        else if((Stek.top()).first == "Tref") bojko=Boje::Tref;
        else if((Stek.top()).first == "Herc") bojko=Boje::Herc;
</font>        else if((Stek.top()).first == "Karo") bojko=Boje::Karo;
        else throw std::logic_error("Neispravne karte!");
        if((Stek.top()).second=="2"||(Stek.top()).second=="3"||(Stek.top()).second=="4"||(Stek.top()).second=="5"||(Stek.top()).second=="6"||(Stek.top()).second=="7"||
           (Stek.top()).second=="8"||(Stek.top()).second=="9"||(Stek.top()).second=="10"||(Stek.top()).second=="J"||(Stek.top()).second=="Q"||(Stek.top()).second=="K"||
           (Stek.top()).second=="A") {
            if(prva == nullptr) {
                prva=std::make_shared&lt;Cvor&gt;( Cvor{{bojko, (Stek.top()).second}, prva});
            }
            std::shared_ptr&lt;Cvor&gt; pom{prva};
            bool ImalGa{false};
            do{
                if((pom-&gt;karta).boja == bojko &amp;&amp; (pom-&gt;karta).vrijednost == (Stek.top()).second)  ImalGa=true;
                pom=pom-&gt;sljedeci;
            }while(pom!=prva &amp;&amp; !ImalGa);
            if(!ImalGa) {
                pom=prva;
                for(;;) {
                    if((pom-&gt;karta).boja == bojko || ((pom-&gt;sljedeci)-&gt;karta).boja == bojko) {
                        std::shared_ptr&lt;Cvor&gt; pompom{pom-&gt;sljedeci};
                        Karta UBACI{bojko, (Stek.top()).second};
                        if((Vrijednost((Stek.top()).second) &gt; Vrijednost((pom-&gt;karta).vrijednost) &amp;&amp; (pom-&gt;sljedeci == prva || ((pom-&gt;sljedeci)-&gt;karta).boja != bojko ||
                          Vrijednost((pompom-&gt;karta).vrijednost) &gt; Vrijednost((Stek.top()).second))) || ((pom-&gt;karta).boja != bojko &amp;&amp; Vrijednost((pompom-&gt;karta).vrijednost) &gt;
                            Vrijednost((Stek.top()).second)) ) {
                            auto Novi(std::make_shared&lt;Cvor&gt;( Cvor{UBACI, pompom}));
                            pom-&gt;sljedeci=Novi;
                            Novi-&gt;sljedeci=pompom;
                            break;
                        }
                    }
                    pom=pom-&gt;sljedeci;
                    if(pom == prva) break;
                }
            }
        }
        else throw std::logic_error("Neispravne karte!");
        Stek.pop();
    }
}

void ISPISI(std::shared_ptr&lt;Cvor&gt; ispisi) {
    int br{0};
    std::shared_ptr&lt;Cvor&gt; hoda{ispisi};
    if(hoda != nullptr) {
        hoda=ispisi-&gt;sljedeci;
        br++;
        while(hoda!=ispisi) {
            hoda=hoda-&gt;sljedeci;
            br++;
        }
    }
    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; br &lt;&lt; " karata, i to:" &lt;&lt; std::endl;
    hoda=ispisi;
    std::cout &lt;&lt; "Pik: ";
    for(;;) {
        if(hoda == nullptr || (hoda-&gt;karta).boja != Boje::Pik) break;
        std::cout &lt;&lt; (hoda-&gt;karta).vrijednost &lt;&lt; " ";
        hoda=hoda-&gt;sljedeci;
        if(hoda == ispisi || (hoda-&gt;karta).boja != Boje::Pik) break;
    }
    std::cout &lt;&lt; std::endl &lt;&lt; "Tref: ";
    for(;;) {
        if(hoda == nullptr || (hoda-&gt;karta).boja != Boje::Tref) break;
        std::cout &lt;&lt; (hoda-&gt;karta).vrijednost &lt;&lt; " ";
        hoda=hoda-&gt;sljedeci;
        if(hoda == ispisi || (hoda-&gt;karta).boja != Boje::Tref) break;
    }
    std::cout &lt;&lt; std::endl &lt;&lt; "Herc: ";
    for(;;) {
        if(hoda == nullptr || (hoda-&gt;karta).boja != Boje::Herc) break;
        std::cout &lt;&lt; (hoda-&gt;karta).vrijednost &lt;&lt; " ";
        hoda=hoda-&gt;sljedeci;
        if(hoda == ispisi || (hoda-&gt;karta).boja != Boje::Herc) break;
    }
    std::cout &lt;&lt; std::endl &lt;&lt; "Karo: ";
    for(;;) {
        if(hoda == nullptr || (hoda-&gt;karta).boja != Boje::Karo) break;
        std::cout &lt;&lt; (hoda-&gt;karta).vrijednost &lt;&lt; " ";
        hoda=hoda-&gt;sljedeci;
        if(hoda == ispisi || (hoda-&gt;karta).boja != Boje::Karo) break;
    }
    std::cout &lt;&lt; std::endl;
}

int main (){
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    short int r;
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    int n;
    std::cin &gt;&gt; n;
    std::shared_ptr&lt;Cvor&gt; prvi;
    try {
    prvi=KreirajSpil();
    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; STEK;
    STEK=IzbaciKarteRazbrajanjem(prvi, r, n);
    ISPISI(prvi);
    std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
    std::cin &gt;&gt; n;
    VratiPosljednjihNKarata(prvi, STEK, n);
    ISPISI(prvi);
    }
    catch(std::logic_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what();
    }
    catch(std::range_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what();
    }
    prvi-&gt;sljedeci=nullptr;
	return 0;
}
</pre>
</body>
</html>
