<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student5939.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student8480.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;list&gt;
#include &lt;map&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;stack&gt;
#include &lt;memory&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

const std::vector&lt;std::string&gt; vrijednosti = {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

Boje StringUBoju(std::string s)
{
    if(s=="pik") return Boje::Pik;
    else if(s=="tref") return Boje::Tref;
    else if(s=="herc") return Boje::Herc;
    else return Boje::Karo;
}

std::string BojaUString(Boje boja)
{
    if(boja == Boje::Pik) return "pik";
    else if(boja == Boje::Tref) return "tref";
    else if(boja == Boje::Herc) return "herc";
    else return "karo";
}

std::shared_ptr&lt;Cvor&gt; KreirajSpil()
{
    std::vector&lt;Boje&gt; boje = {Boje::Pik, Boje::Tref, Boje::Herc, Boje::Karo};
    std::shared_ptr&lt;Cvor&gt; prvi(std::make_shared&lt;Cvor&gt;());
    prvi-&gt;karta = Karta {Boje::Pik,"2"};
    std::shared_ptr&lt;Cvor&gt; zadnji = prvi;

    for(int i=0; i&lt;4; i++) {
        for(int j=0; j&lt;13; j++) {
            if(i==0 &amp;&amp; j==0) continue;
            zadnji-&gt;sljedeci = std::make_shared&lt;Cvor&gt;();

            zadnji-&gt;sljedeci-&gt;karta = Karta {boje[i], vrijednosti[j]};
            zadnji=zadnji-&gt;sljedeci;
        }
    }
    zadnji-&gt;sljedeci = prvi;

    return prvi;
}

int VelicinaSpila(std::shared_ptr&lt;Cvor&gt; prvi)
{
    int k=0;
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    do {
        k++;
        p = p-&gt;sljedeci;
    } while (p!=prvi);

    return k;
}

void IspisiSpil(std::shared_ptr&lt;Cvor&gt; prvi)
{
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    std::cout &lt;&lt; "U spilu trenutno ima " &lt;&lt; VelicinaSpila(prvi) &lt;&lt; " karata, i to:" &lt;&lt; std::endl;

    std::cout &lt;&lt; "Pik: ";
    do {
        if(BojaUString(p-&gt;karta.boja)=="pik")
            std::cout &lt;&lt; p-&gt;karta.vrijednost &lt;&lt; " ";

        p = p-&gt;sljedeci;
    } while (p!=prvi);
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Tref: ";
    do {
        if(BojaUString(p-&gt;karta.boja)=="tref")
            std::cout &lt;&lt; p-&gt;karta.vrijednost &lt;&lt; " ";

        p = p-&gt;sljedeci;
    } while (p!=prvi);
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Herc: ";
    do {
        if(BojaUString(p-&gt;karta.boja)=="herc")
            std::cout &lt;&lt; p-&gt;karta.vrijednost &lt;&lt; " ";

        p = p-&gt;sljedeci;
    } while (p!=prvi);
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; "Karo: ";
    do {
        if(BojaUString(p-&gt;karta.boja)=="karo")
            std::cout &lt;&lt; p-&gt;karta.vrijednost &lt;&lt; " ";

        p = p-&gt;sljedeci;
    } while (p!=prvi);
    std::cout &lt;&lt; std::endl;
}

std::shared_ptr&lt;Cvor&gt; NadjiKartu(std::shared_ptr&lt;Cvor&gt; prvi, Karta karta)
{
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    while(p-&gt;sljedeci!=prvi) {
        if(p-&gt;sljedeci-&gt;karta.boja == karta.boja &amp;&amp; p-&gt;sljedeci-&gt;karta.vrijednost == karta.vrijednost)
            return p;

        p=p-&gt;sljedeci;
    }
    return nullptr;
}

bool KartaComp(Karta a, Karta b)
{
    if (int(a.boja) == int(b.boja)) {
        if(a.vrijednost == b.vrijednost) return false;
<a name="2"></a><font color="#0000FF"><a href="match542-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        return std::find(vrijednosti.begin(), vrijednosti.end(), a.vrijednost)&lt;std::find(vrijednosti.begin(), vrijednosti.end(), b.vrijednost);
</font>    };
    return int(a.boja) &lt; int(b.boja);
}

std::shared_ptr&lt;Cvor&gt; NadjiManjuKartu(std::shared_ptr&lt;Cvor&gt; prvi, Karta karta)
{
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    while(p-&gt;sljedeci!=prvi) {
        if(!KartaComp(p-&gt;sljedeci-&gt;karta, karta))
            return p;

        p=p-&gt;sljedeci;
    }
    return p;
}

void IzbaciKartu(std::shared_ptr&lt;Cvor&gt; prvi)
{
    auto temp = prvi-&gt;sljedeci;
    prvi-&gt;sljedeci = temp-&gt;sljedeci;
}

void UbaciKartu(std::shared_ptr&lt;Cvor&gt; prvi, Karta karta)
{
    auto temp = prvi-&gt;sljedeci;

    prvi-&gt;sljedeci = std::make_shared&lt;Cvor&gt;();
    prvi-&gt;sljedeci-&gt;karta = karta;
    prvi-&gt;sljedeci-&gt;sljedeci = temp;
}

void IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;prvi, std::multimap&lt;Boje, std::string&gt; karte)
{
    auto it = karte.begin();

    while(it != karte.end() &amp;&amp; prvi) {
        Karta karta {it-&gt;first, it-&gt;second};
        auto pozicija = NadjiKartu(prvi, karta);
        if(pozicija) {
            IzbaciKartu(pozicija);
            it=karte.erase(it);
            continue;
        }
        it++;
    }
    return;
}

bool SortiranSpil(std::shared_ptr&lt;Cvor&gt; prvi)
{
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    while(p-&gt;sljedeci!=prvi) {
        if(!KartaComp(p-&gt;karta, p-&gt;sljedeci-&gt;karta)) return false;
        p=p-&gt;sljedeci;
    }
    return true;
}

bool NemaDuplih(std::shared_ptr&lt;Cvor&gt; prvi)
{
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    while(p-&gt;sljedeci!=prvi) {
        if(p-&gt;sljedeci-&gt;karta.boja == p-&gt;karta.boja &amp;&amp; p-&gt;sljedeci-&gt;karta.vrijednost == p-&gt;karta.vrijednost) return false;

        p=p-&gt;sljedeci;
    }
    return true;
}

bool IspravnaKarta(Karta karta)
{
    return std::find(vrijednosti.begin(), vrijednosti.end(), karta.vrijednost)!=vrijednosti.end();
}


bool IspravanSpil(std::shared_ptr&lt;Cvor&gt; prvi)
{
    std::shared_ptr&lt;Cvor&gt; p(prvi);

    while(p-&gt;sljedeci!=prvi) {
        if(!IspravnaKarta(p-&gt;karta)) return false;

        p=p-&gt;sljedeci;
    }
    return VelicinaSpila(prvi)&lt;=52 &amp;&amp; SortiranSpil(prvi) &amp;&amp; NemaDuplih(prvi);
}

<a name="1"></a><font color="#00FF00"><a href="match542-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt;IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt; &amp;prvi, const short int &amp;r, const int &amp;b)
</font>{
    if(!IspravanSpil(prvi)) throw std::logic_error("Neispravna lista!");
<a name="3"></a><font color="#00FFFF"><a href="match542-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");

    std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; stek;
    std::multimap&lt;Boje, std::string&gt; karte;
</font>
    int i=0;
    std::shared_ptr&lt;Cvor&gt; p(prvi);
    int size = VelicinaSpila(prvi);

    while(i&lt;b &amp;&amp; size&gt;0) {
        bool wrap = false;
        for(int j=1; j&lt;r; j++) {
            if(p-&gt;sljedeci==prvi) wrap=true;
            p=p-&gt;sljedeci;
        }

        karte.insert(std::pair&lt;Boje, std::string&gt;(p-&gt;karta.boja, p-&gt;karta.vrijednost));
        stek.push(std::pair&lt;std::string, std::string&gt;(BojaUString(p-&gt;karta.boja), p-&gt;karta.vrijednost));
        i++;
        if(wrap)  p=p-&gt;sljedeci;
        p=p-&gt;sljedeci;
    }

    try {
        IzbaciKarte(prvi, karte);
    } catch(...) {
        throw;
    }
    return stek;
}

<a name="0"></a><font color="#FF0000"><a href="match542-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt; &amp;prvi, std::stack&lt;std::pair&lt;std::string, std::string&gt;&gt; &amp;stek, int n)
{
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;stek.size()) throw std::range_error("Nedovoljno karata u redu!");
</font>    if(!IspravanSpil(prvi)) throw std::logic_error("Neispravna lista!");

    std::vector&lt;std::string&gt; boje = {"Pik", "Tref", "Herc", "Karo"};

    std::shared_ptr&lt;Cvor&gt; p(prvi);

    while(stek.size()&gt;0 &amp;&amp; n&gt;0) {
        auto karta = Karta {StringUBoju(stek.top().first), stek.top().second};
        if(!IspravnaKarta(karta)) throw std::logic_error("Neispravne karte!");

        if(!NadjiKartu(p, karta)) {
            UbaciKartu(NadjiManjuKartu(prvi, karta), karta);
            n--;
        }
        stek.pop();
    }
}

int main ()
{
    auto spil = KreirajSpil();

    int r, b;
    std::cout &lt;&lt; "Unesite korak razbrajanja: ";
    std::cin &gt;&gt; r;
    std::cout &lt;&lt; "Unesite broj karata koje zelite izbaciti: ";
    std::cin &gt;&gt; b;

    try {
        auto stek = IzbaciKarteRazbrajanjem(spil, r, b);

        IspisiSpil(spil);

        std::cout &lt;&lt; "Unesite broj karata koje zelite vratiti u spil: ";
        std::cin &gt;&gt; r;

        VratiPosljednjihNKarata(spil, stek, r);
        IspisiSpil(spil);

        spil-&gt;sljedeci = nullptr;

    } catch(std::logic_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        spil-&gt;sljedeci = nullptr;
    } catch(std::range_error izuzetak) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        spil-&gt;sljedeci = nullptr;
    }

    return 0;
}
</pre>
</body>
</html>
