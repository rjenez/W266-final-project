<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9081.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student9081.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;utility&gt;
#include &lt;memory&gt;
#include &lt;stdexcept&gt;

enum class Boje {Pik, Tref, Herc, Karo};

const char *niz[13]{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

std::shared_ptr&lt;Cvor&gt; KreirajSpil()
{
    std::shared_ptr&lt;Cvor&gt; pocetak(nullptr),prethodni;
    Boje b(Boje::Pik);
    for (int i=0;i&lt;4;i++)
    {
        if (i==1) b=Boje::Tref;
        if (i==2) b=Boje::Herc;
        if (i==3) b=Boje::Karo;
        for (int j=0;j&lt;13;j++)
        {
            auto novi(std::make_shared&lt;Cvor&gt;());
            novi-&gt;karta={b,niz[j]}; novi-&gt;sljedeci=nullptr;
            if (!pocetak) pocetak=novi;
            else prethodni-&gt;sljedeci=novi;
            prethodni=novi;
        }
    }
    prethodni-&gt;sljedeci=pocetak;
    return pocetak;
}

int BrojEl (std::shared_ptr&lt;Cvor&gt; poc)
{
    if (!poc) return 0;
    auto pok(poc);
    int brojac(0);
    do 
    {
        brojac++;
        pok=pok-&gt;sljedeci;
    }
    while (pok!=poc);
    return brojac;
}

std::string Fun (std::string s)
{
    if (s=="J") return "11";
    if (s=="Q") return "12";
    if (s=="K") return "13";
    if (s=="A") return "14";
    return s;
}

bool Kriterij1 (std::string s1, std::string s2)
{
    s1=Fun(s1); s2=Fun(s2);
    if (s1.size()==s2.size())
    return s1&lt;s2;
    return s1.size()&lt;s2.size();
}

bool Kriterij2 (std::string s1, std::string s2)
{
    s1=Fun(s1); s2=Fun(s2);
    if (s1.size()==s2.size())
    return s1&gt;s2;
    return s1.size()&gt;s2.size();
}

bool DaLiJeIspravnaLista (std::shared_ptr&lt;Cvor&gt; poc)
{
    if (BrojEl(poc)&gt;52)
        return false;
    auto pok(poc);
    do
    {
        if (pok-&gt;karta.boja!=Boje::Pik &amp;&amp; pok-&gt;karta.boja!=Boje::Herc &amp;&amp; pok-&gt;karta.boja!=Boje::Tref &amp;&amp; pok-&gt;karta.boja!=Boje::Karo)
            return false;
        bool ispravno(false);
        for (int i=0;i&lt;13;i++)
        {
            if (pok-&gt;karta.vrijednost==niz[i])
            {
                ispravno=true;
                break;
            }
        }
        if (!ispravno)
        return false;
        pok=pok-&gt;sljedeci;
    }
    while (pok!=poc);
    auto pp(poc-&gt;sljedeci); pok=poc;
    while (pp!=poc)
    {
        if (pok-&gt;karta.boja&gt;pp-&gt;karta.boja)
        return false;
        else if (pok-&gt;karta.boja==pp-&gt;karta.boja &amp;&amp; Kriterij2(pok-&gt;karta.vrijednost,pp-&gt;karta.vrijednost))
        return false;
        pok=pp;
        pp=pp-&gt;sljedeci;
    }
    return true;
}

<a name="4"></a><font color="#FF00FF"><a href="match146-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

Boje PretvoriUBoju (std::string s)
{
    if (s=="Tref") return Boje::Tref;
    else if (s=="Pik") return Boje::Pik;
    else if (s=="Herc") return Boje::Herc;
</font><a name="2"></a><font color="#0000FF"><a href="match146-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    return Boje::Karo;
}

std::string PretvoriUString (Boje b)
{
    if (b==Boje::Tref) return "Tref";
    else if (b==Boje::Karo) return "Karo";
    else if (b==Boje::Pik) return "Pik";
</font>    return "Herc";
}

bool DaLiJeUListi (std::shared_ptr&lt;Cvor&gt; poc, std::pair&lt;std::string,std::string&gt; temp)
{
    auto pom(poc);
    do
    {
        if (PretvoriUString(pom-&gt;karta.boja)==temp.first &amp;&amp; pom-&gt;karta.vrijednost==temp.second)
        return true;
        pom=pom-&gt;sljedeci;
    }
    while (pom!=poc);
    return false;
}

void IzbaciKarte (std::shared_ptr&lt;Cvor&gt; &amp;poc, std::multimap&lt;Boje,std::string&gt; &amp;mapa)
{
    if (!poc) return;
    if (!DaLiJeIspravnaLista(poc))
        throw std::logic_error ("Neispravna lista!");
    auto it(mapa.begin()),kraj(mapa.end());
    while (it!=kraj)
    {
        if (!poc) break;
        std::shared_ptr&lt;Cvor&gt; temp(poc),prethodni(poc);
        while (prethodni-&gt;sljedeci!=poc)
        prethodni=prethodni-&gt;sljedeci;
        bool brisi(false);
        do
        {
            if (temp-&gt;karta.boja==it-&gt;first &amp;&amp; temp-&gt;karta.vrijednost==it-&gt;second)
            {
                if (prethodni==temp)
                {
                    poc-&gt;sljedeci=nullptr;
                    poc=nullptr;
                    brisi=true;
                    break;
                }
                prethodni-&gt;sljedeci=temp-&gt;sljedeci;
                if (temp==poc)
                poc=prethodni-&gt;sljedeci;
                temp=prethodni-&gt;sljedeci;
                brisi=true;
                break;
            }
            prethodni=temp;
            temp=temp-&gt;sljedeci;
        }
        while (temp!=poc);
        if (brisi) it=mapa.erase(it);
        else it++;
    }
}
<a name="3"></a><font color="#00FFFF"><a href="match146-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem (std::shared_ptr&lt;Cvor&gt; &amp;poc, const short int &amp;r, const int &amp;b)
</font>{
<a name="1"></a><font color="#00FF00"><a href="match146-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    if (poc &amp;&amp; !DaLiJeIspravnaLista(poc))
        throw std::logic_error ("Neispravna lista!");
    if (r&lt;1 || r&gt;52 || b&lt;1)
        throw std::logic_error ("Neispravni elementi za izbacivanje!");
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; vrati;
</font>    if (poc) {
    std::shared_ptr&lt;Cvor&gt; temp(poc),prethodni(poc);
    while(prethodni-&gt;sljedeci!=poc)
    prethodni=prethodni-&gt;sljedeci;
    for (int i=0;i&lt;b;i++)
    {
        if (!poc) break;
        for (int j=0;j&lt;r-1;j++)
        {
            prethodni=temp;
            temp=temp-&gt;sljedeci;
        }
        vrati.push({PretvoriUString(temp-&gt;karta.boja),temp-&gt;karta.vrijednost});
        if (temp!=prethodni)
        {
            prethodni-&gt;sljedeci=temp-&gt;sljedeci;
            if (temp==poc)
            poc=prethodni-&gt;sljedeci;
            temp=prethodni-&gt;sljedeci;
        }
        else
        {
            poc-&gt;sljedeci=nullptr;
            poc=nullptr;
        }
    }}
    return vrati;
}

bool DaLiJeIspravanStek(std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; s)
{
    while (!s.empty())
    {
        auto temp(s.top());
        s.pop();
        if (temp.first!="Pik" &amp;&amp; temp.first!="Tref" &amp;&amp; temp.first!="Karo" &amp;&amp; temp.first!="Herc")
            return false;
        bool ispravno(false);
        for (int i=0;i&lt;13;i++)
        {
            if (temp.second==niz[i])
            {
                ispravno=true;
                break;
            }
        }
        if (!ispravno)
            return false;
    }
<a name="0"></a><font color="#FF0000"><a href="match146-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    return true;
}

void VratiPosljednjihNKarata (std::shared_ptr&lt;Cvor&gt; &amp;poc, std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; &amp;stek, int n)
{
    if (n&lt;0)
        throw std::domain_error ("Broj n je besmislen!");
    if (n&gt;stek.size())
        throw std::range_error ("Nedovoljno karata u redu!");
    if (!DaLiJeIspravanStek(stek))
        throw std::logic_error ("Neispravne karte!");
</font>    if (poc &amp;&amp; !DaLiJeIspravnaLista(poc))
        throw std::logic_error ("Neispravna lista!");
    if (!poc)
    {
        auto pom(stek.top());
        stek.pop();
        auto novi(std::make_shared&lt;Cvor&gt; ());
        novi-&gt;karta.boja=PretvoriUBoju(pom.first); novi-&gt;karta.vrijednost=pom.second;
        poc=novi;
        novi-&gt;sljedeci=poc;
        n--;
    }
    for (int i=0;i&lt;n;i++)
    {
        auto pom(stek.top());
        stek.pop();
        if (!DaLiJeUListi(poc,{pom.first,pom.second}))
        {
            std::shared_ptr&lt;Cvor&gt; temp(poc),prethodni(poc);
            while (prethodni-&gt;sljedeci!=poc)
            prethodni=prethodni-&gt;sljedeci;
            while ((temp-&gt;karta.boja&lt;PretvoriUBoju(pom.first) || (temp-&gt;karta.boja==PretvoriUBoju(pom.first) &amp;&amp; Kriterij1(temp-&gt;karta.vrijednost,pom.second))))
            {
                prethodni=temp;
                temp=temp-&gt;sljedeci;
                if (temp==poc)
                break;
            }
            auto novi(std::make_shared&lt;Cvor&gt; ());
            novi-&gt;karta.vrijednost=pom.second; novi-&gt;karta.boja=PretvoriUBoju(pom.first);
            novi-&gt;sljedeci=temp;
            prethodni-&gt;sljedeci=novi;
            if (novi-&gt;karta.boja&lt;poc-&gt;karta.boja || (novi-&gt;karta.boja==poc-&gt;karta.boja &amp;&amp; Kriterij1(novi-&gt;karta.vrijednost,poc-&gt;karta.vrijednost)))
                poc=novi;
        }
    }
}

void IspisiSpil (std::shared_ptr&lt;Cvor&gt; poc)
{
    if (!poc)
    {
        std::cout&lt;&lt;"Pik: \nTref: \nHerc: \nKaro: \n";
        return;
    }
    auto pom(poc);
    std::cout&lt;&lt;"Pik: ";
    while (pom-&gt;karta.boja==Boje::Pik)
    {
        std::cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
        pom=pom-&gt;sljedeci;
        if (pom==poc) break;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Tref: ";
    while (pom-&gt;karta.boja==Boje::Tref)
    {
        std::cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
        pom=pom-&gt;sljedeci;
        if (pom==poc) break;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Herc: ";
    while (pom-&gt;karta.boja==Boje::Herc)
    {
        std::cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
        pom=pom-&gt;sljedeci;
        if (pom==poc) break;
    }
    std::cout&lt;&lt;std::endl&lt;&lt;"Karo: ";
    while (pom-&gt;karta.boja==Boje::Karo) 
    {
        std::cout&lt;&lt;pom-&gt;karta.vrijednost&lt;&lt;" ";
        pom=pom-&gt;sljedeci;
        if (pom==poc) break;
    }
    std::cout&lt;&lt;std::endl;
}

int main ()
{
    auto poc(KreirajSpil());
    try 
    {
        short int korak;
        int izbaci;
<a name="5"></a><font color="#FF0000"><a href="match146-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        std::cin&gt;&gt;korak;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        std::cin&gt;&gt;izbaci;
        auto stek(IzbaciKarteRazbrajanjem(poc,korak,izbaci));
</font>        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojEl(poc)&lt;&lt;" karata, i to:\n";
        IspisiSpil(poc);
        int x;
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        std::cin&gt;&gt;x;
        VratiPosljednjihNKarata(poc,stek,x);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojEl(poc)&lt;&lt;" karata, i to:\n";
        IspisiSpil(poc);
    }
    catch (std::domain_error izuz)
    {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    catch (std::range_error izuz2)
    {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz2.what()&lt;&lt;std::endl;
    }
    catch (std::logic_error izuz3)
    {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz3.what()&lt;&lt;std::endl;
    }
    if (poc) {
    auto temp(poc);
    while (temp-&gt;sljedeci!=poc)
    temp=temp-&gt;sljedeci;
    temp-&gt;sljedeci=nullptr;}
	return 0;
}
</pre>
</body>
</html>
