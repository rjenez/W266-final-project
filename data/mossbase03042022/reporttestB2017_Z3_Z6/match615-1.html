<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student2868.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student6049.cpp<p></p><pre>
#include&lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;string&gt;
#include&lt;map&gt;
#include&lt;stdexcept&gt;
#include&lt;utility&gt;
#include&lt;memory&gt;
#include&lt;stack&gt;
<a name="1"></a><font color="#00FF00"><a href="match615-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

enum class Boja {Pik,Tref,Herc,Karo};
struct Karta {
    Boja boja;
    std::string vrijednost;
};
struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
</font>};
std::shared_ptr&lt;Cvor&gt; KreirajSpil(){
    std::vector&lt;std::string&gt; nazivi {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    int j(0);
    std::shared_ptr&lt;Cvor&gt; pocetak(nullptr), prethodni;
    for(int i=0; i&lt;52; i++) {
        std::shared_ptr&lt;Cvor&gt; novi(std::make_shared&lt;Cvor&gt;());
        if(i&lt;13) novi-&gt;karta.boja=Boja::Pik;
        else if(i&gt;=13 &amp;&amp; i&lt;26) novi-&gt;karta.boja=Boja::Tref;
        else if(i&gt;=26 &amp;&amp; i&lt;39) novi-&gt;karta.boja=Boja::Herc;
        else novi-&gt;karta.boja=Boja::Karo;
        novi-&gt;karta.vrijednost=nazivi[j];
        novi-&gt;sljedeci=nullptr;
        if(!pocetak) pocetak=novi;
        else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
        if(i==12 || i==25 || i==38) j=-1;
        j++;
    }
    prethodni-&gt;sljedeci=pocetak;
    return pocetak;
}
bool DaLiJeSpilSortiran(std::shared_ptr&lt;Cvor&gt; pocetak) {
    std::shared_ptr&lt;Cvor&gt; prethodni(pocetak),kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) {
        if(prethodni-&gt;karta.boja&gt;p-&gt;karta.boja) return false;
        prethodni=p;
    }
    return true;
}
bool DaLiJeIspravnaVelicina(std::shared_ptr&lt;Cvor&gt; pocetak) {
    std::shared_ptr&lt;Cvor&gt; kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    int brojac(1);
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) brojac++;
    if(brojac&gt;52) return false;
    return true;
}
bool ImaDUplih(std::shared_ptr&lt;Cvor&gt; pocetak) {
    std::shared_ptr&lt;Cvor&gt; prethodni(pocetak),kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) {
        if(prethodni-&gt;karta.boja==p-&gt;karta.boja &amp;&amp; prethodni-&gt;karta.vrijednost==p-&gt;karta.vrijednost) return true;
        prethodni=p;
    }
    return false;
}
bool DaLiSuIspravniNazivi(std::shared_ptr&lt;Cvor&gt; pocetak) {
    std::shared_ptr&lt;Cvor&gt; kraj(pocetak),pp(pocetak);
    pp=pp-&gt;sljedeci;
    auto tmp(pocetak-&gt;karta);
    if(tmp.vrijednost!="2" &amp;&amp; tmp.vrijednost!="3" &amp;&amp; tmp.vrijednost!="4" &amp;&amp; tmp.vrijednost!="5" &amp;&amp; tmp.vrijednost!="6" &amp;&amp; tmp.vrijednost!="7" &amp;&amp; tmp.vrijednost!="8" &amp;&amp; tmp.vrijednost!="9" &amp;&amp; tmp.vrijednost!="10" &amp;&amp; tmp.vrijednost!="J" &amp;&amp; tmp.vrijednost!="Q" &amp;&amp; tmp.vrijednost!="K" &amp;&amp; tmp.vrijednost!="A") return false;
    for(auto p=pp; p!=kraj; p=p-&gt;sljedeci) {
        tmp=p-&gt;karta;
        if(tmp.vrijednost!="2" &amp;&amp; tmp.vrijednost!="3" &amp;&amp; tmp.vrijednost!="4" &amp;&amp; tmp.vrijednost!="5" &amp;&amp; tmp.vrijednost!="6" &amp;&amp; tmp.vrijednost!="7" &amp;&amp; tmp.vrijednost!="8" &amp;&amp; tmp.vrijednost!="9" &amp;&amp; tmp.vrijednost!="10" &amp;&amp; tmp.vrijednost!="J" &amp;&amp; tmp.vrijednost!="Q" &amp;&amp; tmp.vrijednost!="K" &amp;&amp; tmp.vrijednost!="A") return false;
    }
<a name="0"></a><font color="#FF0000"><a href="match615-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    return true;
}
void IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;pocetak, std::multimap&lt;Boja,std::string&gt; &amp;mapa) {
    if(!DaLiJeIspravnaVelicina(pocetak) || ImaDUplih(pocetak) || !DaLiJeSpilSortiran(pocetak) || !DaLiSuIspravniNazivi(pocetak)) throw std::logic_error("Neispravna lista!");
</font>    std::shared_ptr&lt;Cvor&gt; kraj(pocetak);
    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        auto par(*it);
        auto pret(pocetak), poc(pocetak);
        poc=poc-&gt;sljedeci;
        for(auto i=poc; i!=kraj; i=i-&gt;sljedeci) {
            if(it-&gt;first==par.first &amp;&amp; it-&gt;second==par.second) {
                auto brisi(i);
                i=i-&gt;sljedeci;
                pret-&gt;sljedeci=i;
                if(brisi==kraj) kraj=i;
                break;
            }
            pret=i;
        }
    }
    pocetak=kraj;
}
int BrojKarataUSpilu(std::shared_ptr&lt;Cvor&gt; pocetak) {
    int vel(1);
    std::shared_ptr&lt;Cvor&gt; kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) vel++;
    return vel;
}
<a name="3"></a><font color="#00FFFF"><a href="match615-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt; &amp;pocetak, const short int &amp;r, const int &amp;b) {
</font>    if(r&lt;1|| r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    if(!DaLiJeIspravnaVelicina(pocetak) || ImaDUplih(pocetak) || !DaLiJeSpilSortiran(pocetak)|| !DaLiSuIspravniNazivi(pocetak)) throw std::logic_error("Neispravna lista!");
    int vel(BrojKarataUSpilu(pocetak));
    int brojk(b);
    std::shared_ptr&lt;Cvor&gt; prethodni,poc(pocetak),kraj(pocetak);
    prethodni=pocetak;
    poc=poc-&gt;sljedeci;
    for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) prethodni=p;
    std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; izbaceni;
    while(brojk!=0) {
        short int korak(r);
        while(korak!=1) {
            prethodni=pocetak;
            pocetak=pocetak-&gt;sljedeci;
            korak--;
        }
        auto par(pocetak-&gt;karta);
        std::string bojaa;
        if(par.boja==Boja::Pik) bojaa="Pik";
        else if(par.boja==Boja::Tref) bojaa="Tref";
        else if(par.boja==Boja::Herc) bojaa="Herc";
        else bojaa="Karo";
        izbaceni.push(std::make_pair(bojaa,par.vrijednost));
        auto brisi(pocetak);
        pocetak=pocetak-&gt;sljedeci;
        prethodni-&gt;sljedeci=pocetak;
        if(brisi==kraj) kraj=pocetak;
        brojk--;
        vel--;
        if(vel==0) break;
    }
    pocetak=kraj;
    return izbaceni;
}
bool KriterijSortiranja(std::string s1, std::string s2) {
    std::vector&lt;std::string&gt; nazivi{"2","3","4","5","6","7","8","9","10","J","Q","K","A"};
    int prvi(0),drugi(0);
    for(int i=0; i&lt;nazivi.size(); i++) {
        if(s1==nazivi[i]) prvi=i;
        if(s2==nazivi[i]) drugi=i;
    }
    return prvi&lt;drugi;
}
bool DaLiSuIspravniPodaci(std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; s) {
    while(!s.empty()) {
        auto par(s.top());
        if(par.first!="Tref" &amp;&amp; par.first!="Pik" &amp;&amp; par.first!="Herc" &amp;&amp; par.first!="Karo") return false;
        if(par.second!="2" &amp;&amp; par.second!="3" &amp;&amp; par.second!="4" &amp;&amp; par.second!="5" &amp;&amp; par.second!="6" &amp;&amp; par.second!="7" &amp;&amp; par.second!="8" &amp;&amp; par.second!="9" &amp;&amp; par.second!="10" &amp;&amp; par.second!="J" &amp;&amp; par.second!="Q" &amp;&amp; par.second!="K" &amp;&amp; par.second!="A") return false;
        s.pop();
    }
    return true;
}
<a name="4"></a><font color="#FF00FF"><a href="match615-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

void VratPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt;&amp;pocetak, std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; izbaceni, int n) {
</font>    if(n&gt;int(izbaceni.size())) throw std::range_error("Nedovoljno karata u redu!");
    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(!(DaLiSuIspravniPodaci(izbaceni))) throw std::logic_error("Neispravne karte!");
    std::shared_ptr&lt;Cvor&gt; kraj(pocetak);
    while(n!=0) {
        auto par(izbaceni.top());
        Boja b;
        if(par.first=="Tref") b=Boja::Tref;
        else if(par.first=="Pik") b=Boja::Pik;
        else if(par.first=="Herc") b=Boja::Herc;
        else b=Boja::Karo;
        std::shared_ptr&lt;Cvor&gt; ima(nullptr),poc(pocetak),prethodni;
        poc=poc-&gt;sljedeci;
        for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) prethodni=p;
        if(pocetak-&gt;karta.boja==b &amp;&amp; pocetak-&gt;karta.vrijednost==par.second) ima=pocetak;
        for(auto p=poc; p!=kraj; p=p-&gt;sljedeci) {
            if(p-&gt;karta.boja==b &amp;&amp; p-&gt;karta.vrijednost==par.second) {
                ima=p;
                break;
            }
        }
        if(!ima) {
            std::shared_ptr&lt;Cvor&gt; novi(std::make_shared&lt;Cvor&gt;());
            novi-&gt;karta.boja=b;
            novi-&gt;karta.vrijednost=par.second;
            novi-&gt;sljedeci=nullptr;
            std::shared_ptr&lt;Cvor&gt; nadji(pocetak);
            while(nadji-&gt;karta.boja&lt;b) {
                prethodni=nadji;
                nadji=nadji-&gt;sljedeci;
            }
            while(!KriterijSortiranja(par.second,nadji-&gt;karta.vrijednost)) {
                prethodni=nadji;
                nadji=nadji-&gt;sljedeci;
                if(nadji==kraj) break;
            }
            prethodni-&gt;sljedeci=novi;
            novi-&gt;sljedeci=nadji;
            if(nadji==pocetak) kraj=novi;
        }
        n--;
        izbaceni.pop();
    }
}
void IspsiSpil(std::shared_ptr&lt;Cvor&gt; pocetak) {
    if(pocetak-&gt;karta.boja==Boja::Pik) {
        std::cout&lt;&lt;"Pik: ";
        while(pocetak-&gt;karta.boja==Boja::Pik) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(pocetak-&gt;karta.boja==Boja::Tref) {
        std::cout&lt;&lt;"Tref: ";
        while(pocetak-&gt;karta.boja==Boja::Tref) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(pocetak-&gt;karta.boja==Boja::Herc) {
        std::cout&lt;&lt;"Herc: ";
        while(pocetak-&gt;karta.boja==Boja::Herc) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    if(pocetak-&gt;karta.boja==Boja::Karo) {
        std::cout&lt;&lt;"Karo: ";
        while(pocetak-&gt;karta.boja==Boja::Karo) {
            std::cout&lt;&lt;pocetak-&gt;karta.vrijednost&lt;&lt;" ";
            pocetak=pocetak-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
}
int main () {
    std::shared_ptr&lt;Cvor&gt; pocetak(nullptr);
    try {
        pocetak=KreirajSpil();
        short int korak;
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        std::cin&gt;&gt;korak;
        int brojk;
<a name="2"></a><font color="#0000FF"><a href="match615-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        std::cin&gt;&gt;brojk;
        std::stack&lt;std::pair&lt;std::string,std::string&gt;&gt; izbaceni(IzbaciKarteRazbrajanjem(pocetak,korak,brojk));
</font>        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarataUSpilu(pocetak)&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        IspsiSpil(pocetak);
        int broj;
        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        std::cin&gt;&gt;broj;
        VratPosljednjihNKarata(pocetak,izbaceni,broj);
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;BrojKarataUSpilu(pocetak)&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        IspsiSpil(pocetak);
    }
    catch(std::domain_error izuz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    catch(std::logic_error izuz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    catch(std::range_error izuz) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuz.what()&lt;&lt;std::endl;
    }
    std::shared_ptr&lt;Cvor&gt; pret(pocetak),kraj(pocetak);
    pocetak=pocetak-&gt;sljedeci;
    for(auto p=pocetak; p!=kraj; p=p-&gt;sljedeci) pret=p;
    pret-&gt;sljedeci=nullptr;
    return 0;
}
</pre>
</body>
</html>
