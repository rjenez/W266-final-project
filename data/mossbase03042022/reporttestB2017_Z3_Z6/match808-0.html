<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student1410.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student1410.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stack&gt;
#include &lt;algorithm&gt;
#include &lt;map&gt;
#include&lt;memory&gt;
using std::string;
using std::cout;
using std::cin;
std::vector&lt;string&gt;vK {"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

enum class Boje
{
    Pik, Tref, Herc, Karo
};
using std::string;
struct Karta {
    Boje boja;
    string vrijednost;
};
struct Cvor {
    Karta karta;
    //Cvor *sljedeci;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

int Velicina(std::shared_ptr&lt;Cvor&gt;pocetak){
    int brojac(0);
    auto kopija(pocetak);
    while(kopija-&gt;sljedeci!=pocetak){
        brojac++;
        kopija=kopija-&gt;sljedeci;
    }
    brojac++;
    return brojac;
}



bool ProvjeriBoje( Boje boja)
{
    if(boja!=Boje::Pik &amp;&amp; boja!=Boje::Tref &amp;&amp; boja!=Boje::Herc &amp;&amp; boja!=Boje::Karo)
        return false;
    return true;
}
bool ProvjeriKartu(string k)
{

    int istina(1);
    for(int i=0; i&lt;13; i++) {
        if(k==vK[i]) {
            istina=1;
            break;
        } else istina=0;
    }
    if(istina) return true;
    return false;
}

bool ProvjeriRed(std::stack&lt;std::pair&lt;string,string&gt;&gt; stek)  //prepraviti na stek
{
    while(!stek.empty()) {
        std::pair&lt;string,string&gt; par(stek.top());
        if(par.first!="Pik" &amp;&amp; par.first!="Tref" &amp;&amp; par.first!="Herc" &amp;&amp; par.first!="Karo") return false;
        if(!ProvjeriKartu(par.second)) return false;
        stek.pop();
    }
    return true;
}
bool ProvjeriStek(std::stack&lt;std::pair&lt;string,string&gt;&gt; red)
{
    while(!red.empty()) {
        std::pair&lt;string,string&gt; par(red.top());
        red.pop();
        if(par.first!="Pik" &amp;&amp; par.first!="Tref" &amp;&amp; par.first!="Herc" &amp;&amp; par.first!="Karo") return false;
        if(!ProvjeriKartu(par.second)) return false;
        
    }
    return true;
}


string Konvertuj(Boje b)
{
    if(b==Boje::Pik) return "Pik";
    else if(b==Boje::Tref) return "Tref";
    else if(b==Boje::Herc) return "Herc";
    else return "Karo";
}

Boje KonvertujUB(string b)
{
    if(b=="Pik") return Boje::Pik;
    else if(b=="Tref") return Boje::Tref;
    else if(b=="Herc") return Boje::Herc;
    else return Boje::Karo;
}

int VelicinaListe(std::shared_ptr&lt;Cvor&gt;pocetak)
{
    auto kopija(pocetak);
    int brojac(0);
    while(kopija-&gt;sljedeci!=pocetak) {
        brojac++;
        kopija=kopija-&gt;sljedeci;
    }
    return brojac;
}

std::shared_ptr&lt;Cvor&gt; KreirajSpil()
{
   std::shared_ptr&lt;Cvor&gt; pocetak(nullptr);std::shared_ptr&lt;Cvor&gt;prethodni;
    for(int i(0); i&lt;52; i++) {
      std::shared_ptr&lt;Cvor&gt;novi(new Cvor);
        if(i&lt;=12) {
            novi-&gt;karta.boja=Boje::Pik;
            novi-&gt;karta.vrijednost=vK[i];
        } else if(i&gt;=13 &amp;&amp; i &lt;=25) {
            novi-&gt;karta.boja=Boje::Tref;
            novi-&gt;karta.vrijednost=vK[i-13];
        } else if(i&gt;=26 &amp;&amp; i&lt;=38) {
            novi-&gt;karta.boja=Boje::Herc;
            novi-&gt;karta.vrijednost=vK[i-26];
        } else if(i&gt;=39) {
            novi-&gt;karta.boja=Boje::Karo;
            novi-&gt;karta.vrijednost=vK[i-39];
        }
        novi-&gt;sljedeci=nullptr;
        if(!pocetak) pocetak=novi;
        else if(i==51) {
            prethodni-&gt;sljedeci=novi;
            novi-&gt;sljedeci=pocetak;
            break; //zbog zadnjeg reda petlje
        } else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
    }
    return pocetak;
}

<a name="0"></a><font color="#FF0000"><a href="match808-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

std::shared_ptr&lt;Cvor&gt; Nadji(std::shared_ptr&lt;Cvor&gt;pocetak,std::pair&lt;Boje,std::string&gt;par)
{
  std::shared_ptr&lt;Cvor&gt; rez=pocetak; //novi pokazivac na pocetak
</font>    while(rez-&gt;sljedeci!=pocetak) {
<a name="2"></a><font color="#0000FF"><a href="match808-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        if(rez-&gt;karta.boja==par.first &amp;&amp; rez-&gt;karta.vrijednost==par.second)
            return rez;
        rez=rez-&gt;sljedeci;
</font>    }
    if(rez-&gt;karta.boja == par.first &amp;&amp; rez-&gt;karta.vrijednost == par.second) return rez;
    //ako se nije prekinuo program,karte nema u listi i tada vracam -&gt;
    return nullptr;
}

std::shared_ptr&lt;Cvor&gt; DajPrethodni(std::shared_ptr&lt;Cvor&gt;pocetak,std::shared_ptr&lt;Cvor&gt;trazeni)
{
   std::shared_ptr&lt;Cvor&gt; dalje=pocetak;
    while(dalje-&gt;sljedeci!=trazeni) {
        //std::cout &lt;&lt; "zapeo sam tugi";
        dalje=dalje-&gt;sljedeci;
    }
    return dalje;
}

void IzbaciKarte(std::shared_ptr&lt;Cvor&gt;&amp;pocetak,std::multimap&lt;Boje, std::string&gt; &amp;multimapa)
{
  
  if(Velicina(pocetak)&gt;52) throw std::logic_error("Neispravna lista!");
  auto nesto(pocetak);
    while(nesto-&gt;sljedeci!=pocetak){
 if(!ProvjeriBoje(nesto-&gt;karta.boja)) throw std::logic_error("Neispravna lista!");
        nesto=nesto-&gt;sljedeci;
    }
    if(!ProvjeriBoje(nesto-&gt;karta.boja)) throw std::logic_error("Neispravna lista!");    

   auto nesto2(pocetak);
   while(nesto2-&gt;sljedeci!=pocetak){
        if(!ProvjeriKartu(nesto2-&gt;karta.vrijednost)) throw std::logic_error("Neispravna lista!");
       nesto2=nesto2-&gt;sljedeci; }//provjera da li su karte besmislene
   // if(!DaLijeRedOk(spil)) throw std::logic_error("Neispravna lista!"); ZAVRSIT
  
  
    for(auto it=multimapa.begin(); it!=multimapa.end();) {
        auto nadjeno(Nadji(pocetak,*it));
        if(nadjeno!=nullptr) {
            if(nadjeno == pocetak) {
                //kako postaviti uslov da nadjeni pokazuje na prvi cvor
                //treba azurirati pocetak
                pocetak = pocetak-&gt;sljedeci;
                if(pocetak == pocetak-&gt;sljedeci) pocetak = nullptr;
                auto prethodni = DajPrethodni(pocetak, nadjeno);
                prethodni-&gt;sljedeci = pocetak;
               // delete nadjeno;
                it=multimapa.erase(it);
            } else {
                auto kopija(nadjeno); //plitka kopija
                auto prethodni(DajPrethodni(pocetak,nadjeno));
                kopija=kopija-&gt;sljedeci; //kopiju preusmjeravam na sljedeci element kako ne bi izgubila pokazivac na njega
               // delete prethodni-&gt;sljedeci;
                prethodni-&gt;sljedeci=kopija; //prethodni pokazije na cvor koji je sljedbenik izbrisanom cvoru
                it=multimapa.erase(it);
            }
        } else it++;
    }
}



<a name="1"></a><font color="#00FF00"><a href="match808-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

std::stack&lt;std::pair&lt;string,string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt;&amp;pocetak,const short int &amp;r,const int &amp;b)
{
     if(r&lt;1 || r&gt;52) throw std::logic_error("Neispravni elementi za izbacivanje!");
</font>    if(b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
     if(Velicina(pocetak)&gt;52) throw std::logic_error("Neispravna lista!");
  auto nesto(pocetak);
    while(nesto-&gt;sljedeci!=pocetak){
 if(!ProvjeriBoje(nesto-&gt;karta.boja)) throw std::logic_error("Neispravna lista!");
        nesto=nesto-&gt;sljedeci;
    }
    if(!ProvjeriBoje(nesto-&gt;karta.boja)) throw std::logic_error("Neispravna lista!");    

   auto nesto2(pocetak);
   while(nesto2-&gt;sljedeci!=pocetak){
        if(!ProvjeriKartu(nesto2-&gt;karta.vrijednost)) throw std::logic_error("Neispravna lista!");
       nesto2=nesto2-&gt;sljedeci; }//provjera da li su karte besmislene
   // if(!DaLijeRedOk(spil)) throw std::logic_error("Neispravna lista!"); ZAVRSIT
    
    
    std::stack&lt;std::pair&lt;string,string&gt;&gt; stek;
  std::shared_ptr&lt;Cvor&gt; kopija=pocetak;
   
    for(int i(0); i&lt;r-1; i++) kopija=kopija-&gt;sljedeci; //pomjeram za r mjesta
    int brojizbacenih(0);
    while(brojizbacenih!=b &amp;&amp; pocetak!=nullptr) {
        string boja(Konvertuj(kopija-&gt;karta.boja));
        string karta1(kopija-&gt;karta.vrijednost);
        stek.push(std::make_pair(boja,karta1));

        auto kopija2(kopija); //plitka kopija
        auto prethodni(DajPrethodni(pocetak,kopija2));
        kopija=kopija-&gt;sljedeci; //kopiju preusmjeravam na sljedeci element kako ne bi izgubila pokazivac na njega
        if(kopija2 == pocetak) pocetak = pocetak-&gt;sljedeci;
        if(pocetak == pocetak-&gt;sljedeci) pocetak = nullptr;
        //delete prethodni-&gt;sljedeci;
        if(pocetak != nullptr) {
            prethodni-&gt;sljedeci=kopija; //da ne bi sada morala stavljat vracanje na prethodni element moze li
            for(int i=0; i&lt;r-1; i++) kopija=kopija-&gt;sljedeci;
        }
        brojizbacenih++;
    }
if(pocetak==nullptr) pocetak-&gt;sljedeci=nullptr; 
    return stek;
}

<a name="3"></a><font color="#00FFFF"><a href="match808-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt;&amp;pocetak,std::stack&lt;std::pair&lt;string,string&gt;&gt; &amp;stek,int n)
{
 if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(n&gt;stek.size()) throw std::range_error("Nedovoljno karata u redu!");
</font>    if(!ProvjeriStek(stek)) throw std::logic_error("Neispravne karte!");


    auto kopija(pocetak);
    int j(n);
    while(j!=0) {
        
        kopija = pocetak;
        std::pair&lt;string,string&gt; par(stek.top());
        stek.pop();
        auto rezPar=std::make_pair(KonvertujUB(par.first),par.second);
        auto itUbacivanje = std::find(vK.begin(), vK.end(), rezPar.second);
        bool postoji(false);
        if(pocetak != nullptr) {
            while(kopija-&gt;sljedeci != pocetak) {
                if(kopija-&gt;karta.boja == rezPar.first &amp;&amp; kopija-&gt;karta.vrijednost == rezPar.second) postoji = true;
                kopija = kopija-&gt;sljedeci;
            }
            if(kopija-&gt;karta.boja == rezPar.first &amp;&amp; kopija-&gt;karta.vrijednost == rezPar.second) postoji = true;
            if(postoji) {
                continue;
            }
      std::shared_ptr&lt;Cvor&gt; novi ( new Cvor);
            novi-&gt;karta.boja = rezPar.first;
            novi-&gt;karta.vrijednost = rezPar.second;
            novi-&gt;sljedeci = nullptr;
            kopija = pocetak;
            bool ubacena(false);
            while(kopija-&gt;sljedeci != pocetak) {
                int kontrolna(0);
                while(kopija-&gt;karta.boja &lt; rezPar.first) {
                    if(kopija == pocetak) kontrolna++;
                    if(kontrolna &gt; 1) break;
                    kopija = kopija-&gt;sljedeci;
                }
                if(kopija-&gt;karta.boja == rezPar.first) { // ima karata koje su iste boje kao ova nasa
                    while(kopija-&gt;karta.boja == rezPar.first) {
                        auto itKopija = std::find(vK.begin(), vK.end(), kopija-&gt;karta.vrijednost);
                        if(itUbacivanje &gt; itKopija) kopija = kopija-&gt;sljedeci;
                        else break;
                    }
                    j--;
                    ubacena = true;
                    auto prethodni = DajPrethodni(pocetak, kopija);
                    novi-&gt;sljedeci = kopija;
                    prethodni-&gt;sljedeci = novi;
                    if(prethodni-&gt;karta.boja &gt; novi-&gt;karta.boja) pocetak = novi;
                    else if(prethodni-&gt;karta.boja == novi-&gt;karta.boja) {
                        auto itPrethodni = std::find(vK.begin(), vK.end(), prethodni-&gt;karta.vrijednost);
                        if(itUbacivanje &lt; itPrethodni) pocetak = novi;
                    }
                    break;
                } else { // nalazimo se kod karte koja je sljedbenik na≈°e
                    j--;
                    ubacena = true;
                    auto prethodni(DajPrethodni(pocetak, kopija));
                    novi-&gt;sljedeci = kopija;
                    prethodni-&gt;sljedeci = novi;
                    if(novi-&gt;karta.boja &lt; kopija-&gt;karta.boja) pocetak = novi;
                    else if(novi-&gt;karta.boja == kopija-&gt;karta.boja) {
                        auto itNovi = std::find(vK.begin(), vK.end(), novi-&gt;karta.vrijednost);
                        auto itKopija = std::find(vK.begin(), vK.end(), kopija-&gt;karta.vrijednost);
                        if(itNovi &lt; itKopija) pocetak = novi;
                    }
                    break;
                }
            }
            if(!ubacena) {
                kopija-&gt;sljedeci = novi;
                novi-&gt;sljedeci = kopija;
                if(novi-&gt;karta.boja == kopija-&gt;karta.boja) {
                    auto itKopija = std::find(vK.begin(), vK.end(), kopija-&gt;karta.vrijednost);
                    if(itUbacivanje &lt; itKopija) pocetak = novi;
                }
                if(novi-&gt;karta.boja &lt; kopija-&gt;karta.boja) pocetak = novi;
                j--;
            }
        } else {
         std::shared_ptr&lt;Cvor&gt; novi (new Cvor);
            novi-&gt;karta.boja = rezPar.first;
            novi-&gt;karta.vrijednost = rezPar.second;
            novi-&gt;sljedeci = nullptr;
            pocetak = novi;
            pocetak-&gt;sljedeci = pocetak;
            j--;
        }
    }
}
int main ()
{
  std::shared_ptr&lt;Cvor&gt;  spil;
try{
    cout&lt;&lt;"Unesite korak razbrajanja: ";
    short int korak_razbrajanja;
    cin&gt;&gt;korak_razbrajanja;
    cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
    int izbaciti;
    cin&gt;&gt;izbaciti; //poziv funkcije kreiraj spil
     spil=KreirajSpil();
    auto stek(IzbaciKarteRazbrajanjem(spil,korak_razbrajanja,izbaciti)); //iz spila izbacene karte i vracen red koji sadrzi izbacene karte
  
    cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;Velicina(spil)&lt;&lt;" karata, i to:"&lt;&lt;std::endl;

auto kopija5(spil);
while(kopija5-&gt;sljedeci!=spil){
     cout&lt;&lt;Konvertuj(kopija5-&gt;karta.boja)&lt;&lt;": ";
        auto boja(kopija5-&gt;karta.boja);
         while(kopija5-&gt;sljedeci!=spil &amp;&amp; kopija5-&gt;karta.boja==boja ) {
            cout&lt;&lt;kopija5-&gt;karta.vrijednost&lt;&lt;" ";
            kopija5=kopija5-&gt;sljedeci;
        }
        if(kopija5-&gt;sljedeci==spil) break;
        cout&lt;&lt;std::endl;
        
}

  cout&lt;&lt;kopija5-&gt;karta.vrijednost&lt;&lt;" ";  
    cout&lt;&lt;"\nUnesite broj karata koje zelite vratiti u spil: ";
    int n;
    cin&gt;&gt;n;
    VratiPosljednjihNKarata(spil,stek,n);
    cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;Velicina(spil)&lt;&lt;" karata, i to:"&lt;&lt;std::endl;
    
    auto kopija6(spil);
while(kopija6-&gt;sljedeci!=spil){
     cout&lt;&lt;Konvertuj(kopija6-&gt;karta.boja)&lt;&lt;": ";
        auto boja(kopija6-&gt;karta.boja);
         while(kopija6-&gt;sljedeci!=spil &amp;&amp; kopija6-&gt;karta.boja==boja ) {
            cout&lt;&lt;kopija6-&gt;karta.vrijednost&lt;&lt;" ";
            kopija6=kopija6-&gt;sljedeci;
           
        }
       if(kopija6-&gt;sljedeci==spil) break;
        cout&lt;&lt;std::endl;
        
}
  cout&lt;&lt;kopija6-&gt;karta.vrijednost&lt;&lt;" ";  
    
}
catch(std::logic_error e) {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
    } catch(std::domain_error e) {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
    } catch(std::range_error e) {
        cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what();
    }
    

spil-&gt;sljedeci=nullptr;

    return 0;
}</pre>
</body>
</html>
