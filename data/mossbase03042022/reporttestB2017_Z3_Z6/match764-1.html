<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student5193.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z3/Z6/student2556.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 3, Zadatak 6
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;stack&gt;
#include &lt;memory&gt;

enum class Boje
{
    Pik, Tref, Herc, Karo
};

<a name="1"></a><font color="#00FF00"><a href="match764-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

struct Karta {
    Boje boja;
    std::string vrijednost;
};

struct Cvor {
    Karta karta;
    std::shared_ptr&lt;Cvor&gt; sljedeci;
};

int PrebrojiKarte(std::shared_ptr&lt;Cvor&gt; &amp;spil)
</font>{
    int i(0);
    std::shared_ptr&lt;Cvor&gt; pok(spil);
    pok=pok-&gt;sljedeci;
    while(pok!=spil) {
        pok=pok-&gt;sljedeci;
        i++;
    }
    return ++i;
}

void IspisiSpil(std::shared_ptr&lt;Cvor&gt; &amp;poc)
{
    for(int i=1; i&lt;=4; i++) {
        if(i==1) std::cout&lt;&lt;"Pik: ";
        else if(i==2) std::cout&lt;&lt;"Tref: ";
        else if(i==3) std::cout&lt;&lt;"Herc: ";
        else if(i==4) std::cout&lt;&lt;"Karo: ";
        while((poc-&gt;karta).boja == Boje(i-1)) {
            std::cout&lt;&lt;(poc-&gt;karta).vrijednost&lt;&lt;" ";
            poc=poc-&gt;sljedeci;
        }
        std::cout&lt;&lt;std::endl;
    }
    //  UnistiSpil(poc);
}
std::shared_ptr&lt;Cvor&gt; KreirajSpil()
{
    std::shared_ptr&lt;Cvor&gt; pocetak(nullptr), prethodni;
<a name="2"></a><font color="#0000FF"><a href="match764-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    int i(0);
    std::vector&lt;std::string&gt; vrijednosti {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
</font>    for(;;) {
        Karta tekuca;
        if(i&lt;13) tekuca.boja = Boje(0);
        else if(i&lt;26) tekuca.boja = Boje(1);
        else if(i&lt;39) tekuca.boja = Boje(2);
        else if(i&lt;52) tekuca.boja = Boje(3);
        tekuca.vrijednost = vrijednosti[i%13];
        if(i==52) break;
<a name="3"></a><font color="#00FFFF"><a href="match764-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        std::shared_ptr&lt;Cvor&gt; novi(new Cvor({tekuca, nullptr}));
        if(!pocetak) pocetak = novi;
        else prethodni-&gt;sljedeci=novi;
        prethodni=novi;
</font>        i++;
    }
    prethodni-&gt;sljedeci=pocetak;
    return pocetak;
}
void ObrisiElement(std::shared_ptr&lt;Cvor&gt; &amp;prije, std::shared_ptr&lt;Cvor&gt; &amp;poslije)
{
    prije=prije-&gt;sljedeci;
    auto brisi(poslije-&gt;sljedeci);
    poslije-&gt;sljedeci=prije;
}

void IzbaciKarte(std::shared_ptr&lt;Cvor&gt; &amp;pok, std::multimap&lt;Boje, std::string&gt; &amp;multimapa)
{
    std::shared_ptr&lt;Cvor&gt; trenutni(pok), posljednji(pok);
    trenutni=trenutni-&gt;sljedeci;
    std::multimap&lt;Boje, std::string&gt;::iterator it_m;
    for(it_m=multimapa.begin(); it_m!=multimapa.end(); it_m++) {
        std::shared_ptr&lt;Cvor&gt; p(pok);
        int i(0);
        trenutni=pok;
        posljednji=pok;
        trenutni=trenutni-&gt;sljedeci;
        while(trenutni!=p) {
            if(std::get&lt;0&gt;(*it_m) == (trenutni-&gt;karta).boja &amp;&amp; std::get&lt;1&gt;(*it_m) == (trenutni-&gt;karta).vrijednost) {
                ObrisiElement(trenutni, posljednji);
            }
            trenutni=trenutni-&gt;sljedeci;
            posljednji=posljednji-&gt;sljedeci;
            i++;

            //   if(i&gt;52) throw std::logic_error("Neispravna lista!");

        }
    }
}



std::stack&lt;std::pair&lt;Boje, std::string&gt;&gt; IzbaciKarteRazbrajanjem(std::shared_ptr&lt;Cvor&gt; &amp;pok, const short int r, const int b)
{

    if(r&lt;1 || r&gt;52 || b&lt;1) throw std::logic_error("Neispravni elementi za izbacivanje!");
    int broj_el(PrebrojiKarte(pok));
     if(broj_el&gt;52) throw std::logic_error("Neispravna lista!");

    std::stack&lt;std::pair&lt;Boje, std::string&gt;&gt; stek;
    std::multimap&lt;Boje, std::string&gt; multimapa;
    int izbaceni(0), prolazi(1);
    auto p(pok), p_1(pok);

    while(izbaceni!=b) {

        bool prekini(false);
        for(auto it_m(multimapa.begin()); it_m!= multimapa.end(); it_m++) {
            if((p-&gt;karta).vrijednost == it_m-&gt;second &amp;&amp; (p-&gt;karta).boja == it_m-&gt;first) {
                p=p-&gt;sljedeci;
                prekini=true;
                break;
            }
        }
        if(prolazi%r==0) {
            if(prekini) continue;
            stek.push(std::make_pair((p-&gt;karta).boja, (p-&gt;karta).vrijednost));
            multimapa.insert(std::make_pair((p-&gt;karta).boja, (p-&gt;karta).vrijednost));
            izbaceni++;
            if(izbaceni==b) break;
        }

        //  if(p_1 == pok &amp;&amp; prolazi&gt;52 &amp;&amp; prolazi&lt;104) throw std::logic_error("Neispravna lista!");
        prolazi++;
        p=p-&gt;sljedeci;
    }
    IzbaciKarte(pok, multimapa);
    return stek;
}

bool JeLi(std::string a, std::string b){
    std::vector&lt;std::string&gt; znak {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
    int i, j;
    for(i=0;i&lt;znak.size();i++) {
        if(znak[i]==a) break;
    }
    for(j=0;j&lt;znak.size();j++){
        if(znak[j]==b) break;
    }
    return j&lt;i;
}
void VratiPosljednjihNKarata(std::shared_ptr&lt;Cvor&gt; &amp;pok, std::stack&lt;std::pair&lt;Boje, std::string&gt;&gt; stek, int n)
{

    if(n&lt;0) throw std::domain_error("Broj n je besmislen!");
    if(stek.size()&lt;n) throw std::range_error("Nedovoljno karata u redu!");

    auto it(pok), pit(pok);
    pit=pit-&gt;sljedeci;
    for(;pit-&gt;sljedeci!=pok;pit=pit-&gt;sljedeci);
    auto temp(it);
    auto temp2(pit);
    
    /*for(auto pok2(pok); pok2!=it; pok2=pok2-&gt;sljedeci){
        throw std::logic_error("Nelegalne karte!");
    }*/

    for(int i=0;i&lt;n;i++){
        it=temp;
        pit=temp2;
        while(stek.top().first &gt; it-&gt;karta.boja) {
            it=it-&gt;sljedeci;
            pit=pit-&gt;sljedeci;
        }
        while(JeLi(stek.top().second, it-&gt;karta.vrijednost)){
            it=it-&gt;sljedeci;
            pit=pit-&gt;sljedeci;
        }
        std::shared_ptr&lt;Cvor&gt; novi(new Cvor{{stek.top().first, stek.top().second}, nullptr});
        novi-&gt;sljedeci=it;
        pit-&gt;sljedeci=novi;
        stek.pop();
    }

}

int main ()
{
    std::shared_ptr&lt;Cvor&gt; spil;
    try {
        spil=KreirajSpil();
        int r, b;
        std::cout&lt;&lt;"Unesite korak razbrajanja: ";
        std::cin&gt;&gt;r;
        std::cout&lt;&lt;"Unesite broj karata koje zelite izbaciti: ";
        std::cin&gt;&gt;b;
        std::stack&lt;std::pair&lt;Boje, std::string&gt;&gt; stek(IzbaciKarteRazbrajanjem(spil, r, b));
        int razlika(PrebrojiKarte(spil));
        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;razlika&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        IspisiSpil(spil);

        std::cout&lt;&lt;"Unesite broj karata koje zelite vratiti u spil: ";
        int n;
        std::cin&gt;&gt;n;
        VratiPosljednjihNKarata(spil, stek, n);
        int razlika2(PrebrojiKarte(spil));
<a name="0"></a><font color="#FF0000"><a href="match764-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        std::cout&lt;&lt;"U spilu trenutno ima "&lt;&lt;razlika2&lt;&lt;" karata, i to: "&lt;&lt;std::endl;
        IspisiSpil(spil);

    } catch(std::logic_error izuzetak) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak.what();
    } catch(std::range_error izuzetak2) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak2.what();
    } catch(std::domain_error izuzetak3) {
        std::cout&lt;&lt;"Izuzetak: "&lt;&lt;izuzetak3.what();
</font>    } catch(...) {
    }
    spil-&gt;sljedeci=nullptr;
    
    return 0;
}
</pre>
</body>
</html>
