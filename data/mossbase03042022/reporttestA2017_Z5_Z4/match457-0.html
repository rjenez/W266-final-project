<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student8863.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student8863.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

struct Prodavnica {
	char naziv[100];
<a name="2"></a><font color="#0000FF"><a href="match457-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

	int ID;
};

struct Artikal {
	char naziv[100];
	double cijena;
	int prodavnica;
};

int ucitaj_artikle(struct Artikal *niz, int kap) {
	int br = 0;
	FILE *dat = fopen("artikli.bin", "rb");
</font>	if (dat == NULL) {
<a name="1"></a><font color="#00FF00"><a href="match457-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

		printf("Greska prilikom otvaranja datoteke");
		exit(1);
	}
	br = fread(niz, sizeof(struct Artikal), kap, dat);
	fclose(dat);
	return br;
}

int ucitaj_prodavnice(struct Prodavnica *niz, int kap) {
	int br = 0, i = 0;
</font>	char c;
	FILE *text = fopen("prodavnice.txt", "r");
	if (text == NULL) {
		printf("Greska prilikom otvaranja datoteke");
		exit(1);
	}
	do {
		c = fgetc(text);
		if (c != EOF &amp;&amp; c != ',' &amp;&amp; i &lt; 99) {
			niz-&gt;naziv[i] = c; i++;
		}
		if (c == ',') {
			niz-&gt;naziv[i] = '\0';
			if(fscanf(text, "%d\n", &amp;niz-&gt;ID) == 0) break;
			br++; niz++;
			i = 0;
		}
		
	} while(br &lt; kap &amp;&amp; c != EOF);
	fclose(text);
	return br;
}

int izbaci_skupe(struct Prodavnica *p, int np, struct Artikal *a, int na) {
	int i, j, br_pr;
	double suma1, suma2 = 0;
	for (i = 0; i &lt; na; i++) {
		suma2 += a[i].cijena;
	}
	for (i = 0; i &lt; np; i++) {
		suma1 = 0;
		br_pr = 0;
		for (j = 0; j &lt; na; j++) {
			if (p[i].ID == a[j].prodavnica) {
				suma1 += a[j].cijena;
				br_pr++;
			}
		}
<a name="0"></a><font color="#FF0000"><a href="match457-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_14.gif"/></a>

		if (br_pr != 0 &amp;&amp; suma1/br_pr &gt; suma2/na) {
			for (j = i+1; j &lt; np; j++)
				p[j-1] = p[j];
			i--; np--;
		}
	}
	return np;
}

int sacuvaj(struct Prodavnica *p, int n, const char *ime_datoteke) {
	FILE *izlaz = fopen(ime_datoteke, "wb");
	if (izlaz == NULL) return 0;
</font>	if(fwrite(p, sizeof(struct Prodavnica), n, izlaz) != n) {
		fclose(izlaz);
		return 0;
	}
	fclose(izlaz);
	return 1;
}

int main() {
	return 0;
}
</pre>
</body>
</html>
