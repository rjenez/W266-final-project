<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student4949.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student7948.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;

struct Prodavnica{
	char naziv[100];
	int ID;
};

struct Artikal{
	char naziv[100];
	double cijena;
	int prodavnica;
};

int jeLiBroj(char c){
	if(c&gt;='0' &amp;&amp; c&lt;='9')return 1;
	return 0;
}

int ucitaj_artikle(struct Artikal *niz,int kap){
	int ucitanih;
	FILE *binar=fopen("artikli.bin","rb");
	if(binar==NULL){
		return 0;
	}
	ucitanih=fread(niz,sizeof(struct Artikal),kap,binar);
	fclose(binar);
	return ucitanih;
}

int ucitaj_prodavnice(struct Prodavnica *niz,int kap){
	int counter=0,i=0,j,brojacCifri;
	char tmp[100],*p,*t;
	FILE *text=fopen("prodavnice.txt","r");
	if(text==NULL)return 0;
	while(i&lt;kap){
		p=fgets(tmp,100,text);
		if(p==NULL)break;
		counter++;
		j=0;
		while(*p!=',' &amp;&amp; *p!='\0'){
			niz[i].naziv[j]=*p;
			p++;
			j++;
		}
		niz[i].naziv[j]='\0';
		if(*p==',' || (*p=='\0' &amp;&amp; jeLiBroj(*(p-1))));
		else {
			p=fgets(tmp,100,text);
			while(*p!=',')p++;
		}
		p++;
		t=p;
		brojacCifri=0;
		while(*t!='\0' &amp;&amp; *t!='\n'){
			brojacCifri++;
			t++;
		}
		niz[i].ID=0;
		while(*p!='\0' &amp;&amp; *p!='\n'){
			niz[i].ID+=(*p-'0')*pow(10,brojacCifri-1);
			brojacCifri--;
			p++;
		}
		i++;	
	}
	fclose(text);
	return counter;
}

int izbaci_skupe(struct Prodavnica *p,int np,struct Artikal *a,int na){
	int i,j,k,counter,t;
	double suma1=0,suma2=0;
	for(i=0;i&lt;na;i++){
		suma1+=a[i].cijena;
	}
	suma1/=na;
	for(i=0;i&lt;np;i++){
		suma2=0;
<a name="0"></a><font color="#FF0000"><a href="match839-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

		counter=0;
		for(j=0;j&lt;na;j++){
			if(p[i].ID==a[j].prodavnica){suma2+=a[j].cijena;counter++;}
		}
		if(suma1&lt;suma2/counter){
</font>			t=i;
			for(k=t+1;k&lt;np;k++,t++)
				p[t]=p[k];
			np--;	
		}
	}
	return np;
}

int sacuvaj(struct Prodavnica *p,int n,const char *ime_datoteke){
	int ucitanih;
	FILE* dat=fopen(ime_datoteke,"ab");
	if(dat==NULL)return 0;
	ucitanih=fwrite(p,sizeof(struct Prodavnica),n,dat);
	if(ferror(dat))return 0;
	fclose(dat);
	return 1;
}

int main() {
<a name="1"></a><font color="#00FF00"><a href="match839-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

struct Prodavnica p[] = {
	{"Konzum", 2}, //Konzum ima vece cijene!
	{"Amko", 1}, //jedino on ostaje
	{"Bingo", 3}, //i Bingo ima vece cijene zbog Graha (5KM)
};
struct Artikal n[] = {
	{"Brasno", 5.2, 1},
</font>	{"Ulje", 2, 1},
	{"Secer", 1.5, 1},
	{"Brasno", 5.2, 2},
	{"Ulje", 2.1, 2},
	{"Secer", 2.2, 2},
	{"Brasno", 5.2, 3},
	{"Ulje", 1.1, 3},
	{"Secer", 1.2, 3},
	{"Grah", 5, 3}
};
int nova_vel = izbaci_skupe(p, 3, n, 10), i;
printf ("Ostalo je %d prodavnica, i to: \n", nova_vel);
<a name="2"></a><font color="#0000FF"><a href="match839-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

for (i = 0; i &lt; nova_vel; ++i)
	printf ("'%s', ID: %d\n", p[i].naziv, p[i].ID);
	return 0;
</font>}
</pre>
</body>
</html>
