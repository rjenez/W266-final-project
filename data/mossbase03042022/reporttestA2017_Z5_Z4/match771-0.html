<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student9569.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student9569.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

struct Artikal {
	char naziv[100];
	double cijena;
	int prodavnica;
};

struct Prodavnica {
	char naziv[100];
	int ID;
};

int ucitaj_artikle(struct Artikal *niz, int kapacitet){
	int broj_ucitanih=0;
	FILE *ulaz=fopen("artikli.bin", "rb");
	{
<a name="1"></a><font color="#00FF00"><a href="match771-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

		if(ulaz == NULL) {
			printf("Greska");
			return -1;
		}
	}
	broj_ucitanih=fread(niz, sizeof(struct Artikal), kapacitet, ulaz);
	fclose(ulaz);
	return broj_ucitanih;
}

int ucitaj_prodavnice(struct Prodavnica *niz, int kapacitet){
</font>	int i=0, br=0;
	char znak='\0';
	FILE *prodavnica=fopen("prodavnice.txt", "r");
	{
		if(prodavnica == NULL){
			printf("Greska");
			return -1;
		}
		
	}
	for(i=0; i&lt;kapacitet; i++) {
		znak=fgetc(prodavnica);
		if(znak == EOF) break;
		br=0;
		do{
			niz[i].naziv[br++] = znak;
		} while((znak=fgetc(prodavnica))!=',' &amp;&amp; br &lt; 99);
		
		if(br==99 &amp;&amp; znak!= ','){
			while((znak=fgetc(prodavnica)) != ',');
		}
		niz[i].naziv[br] = 0;
		fscanf(prodavnica, "%d", &amp;niz[i].ID);
		
		znak=fgetc(prodavnica);
		
	}
	return i;
}

double Prosjek(struct Artikal *niz, int ID_prodavnice, int kapacitet){
	int i, br=0;
	double suma=0;
	for(i=0; i&lt;kapacitet; i++){
		if(niz[i].prodavnica == ID_prodavnice){
			suma+=niz[i].cijena;
			br++;
		}
	}
	if(br==0) return 0;
	else
	return suma/br;
}

void izbaci(struct Prodavnica *niz, int ind, int kapacitet){
	int i=ind;
	for(i=ind; i&lt;kapacitet-1; i++){
		niz[i]=niz[i+1];
	}
	kapacitet--;
}

int izbaci_skupe(struct Prodavnica *p, int naziv_prod, struct Artikal *a, int naziv_art){
	int i;
	double suma=0, prosjek, temp;
	if(naziv_art == 0 || naziv_prod==0) return naziv_prod;
<a name="2"></a><font color="#0000FF"><a href="match771-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

	for(i=0; i&lt;naziv_art; i++){
		suma+=a[i].cijena;
	}
	prosjek=suma/naziv_art;
	for(i=0; i&lt;naziv_prod; i++){
</font>		temp=Prosjek(a, p[i].ID, naziv_art);
		if(temp&gt;prosjek){
			izbaci(p,i,naziv_prod);
<a name="0"></a><font color="#FF0000"><a href="match771-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

			naziv_prod--;
		}
	}
	return naziv_prod;
}

int sacuvaj(struct Prodavnica *p, int n, const char *ime_datoteke){
	FILE* izlaz=fopen(ime_datoteke, "wb");
	if(izlaz == NULL){
		printf("Greska");
		return 0;
</font>	}
	int ucitano=fwrite(p,sizeof(struct Prodavnica), n, izlaz);
	if(ferror(izlaz)){
		printf("Greska");
		return 0;
	}
	fclose(izlaz);
	return 1;
}

int main() {
	printf("ZadaÄ‡a 5, Zadatak 4");
	return 0;
}
</pre>
</body>
</html>
