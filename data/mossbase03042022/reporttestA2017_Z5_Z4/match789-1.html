<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student2827.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student4128.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

struct Prodavnica {
	char naziv[100];
	int ID;				
};

struct Artikal {
	char naziv[100];
	double cijena;
	int prodavnica;		
};

int ucitaj_artikle (struct Artikal *niz, int kap){
	FILE*dat = fopen("artikli.bin","rb");
	int ucitanih;
<a name="1"></a><font color="#00FF00"><a href="match789-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

	if(dat==NULL){
		printf("Greska prilikom otvaranja datoteke!");
		return -1;
	}
	ucitanih = fread(niz,sizeof(struct Artikal),kap,dat);
	fclose(dat);
	return ucitanih;
}

int ucitaj_prodavnice (struct Prodavnica *niz, int kap){
</font>	FILE*dat = fopen("prodavnice.txt","r");
	char znak;
	char naziv[100];
	int broj_ucitanih=0,i;
	if(dat==NULL){
		printf("Greska prilikom otvaranja datoteke!");
		return -1;
	}
	while((znak=fgetc(dat))!=EOF&amp;&amp;broj_ucitanih&lt;kap){
		i=0;
		naziv[i++]=znak;
		while((znak=fgetc(dat))!=','){
			if(i==99)continue;
			naziv[i++]=znak;
		}
		naziv[i]='\0';
		strcpy(niz[broj_ucitanih].naziv,naziv);
		fscanf(dat,"%d\n",&amp;niz[broj_ucitanih].ID);
		broj_ucitanih++;
	}
	fclose(dat);
	return broj_ucitanih;
}


int izbaci_skupe (struct Prodavnica *p, int np, struct Artikal *a, int na){
	double suma=0,prosjek_svih_artikala,prosjek_prodavnice;
	int i,j, broj_artikala=0;
<a name="2"></a><font color="#0000FF"><a href="match789-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

	for ( i = 0; i &lt; na; i++) {
		suma+=a[i].cijena;
	}
	prosjek_svih_artikala = suma/na;
	

	
	for ( i = 0; i &lt; np; i++) {
</font>		broj_artikala=0;
		suma=0;
		for (j = 0; j &lt; na; j++) {
			if(a[j].prodavnica==p[i].ID){
				suma+=a[j].cijena;
				broj_artikala++;
			}
		}
		if(suma==0)continue;
		prosjek_prodavnice = suma/broj_artikala;
		if(prosjek_prodavnice&gt;prosjek_svih_artikala){
			for (j = i; j &lt; np-1; j++) {
				p[j]=p[j+1];
			}
			i--;
<a name="0"></a><font color="#FF0000"><a href="match789-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

			np--;
		}
	}
	return np;
}

int sacuvaj (struct Prodavnica *p, int n, const char *ime_datoteke){
	FILE*dat = fopen(ime_datoteke,"wb");
	if(dat==NULL){
		printf("Greska prilikom otvaranja datoteke!");
		return 0;
</font>	}
	
	fwrite(p,sizeof(struct Prodavnica),n,dat);
	
	fclose(dat);
	
	return 1;
}
int main() {
	
	struct Artikal artikli[300];
	struct Prodavnica prodavnice[10];
	int i,broj_ucitanih,uspjesno_sacuvana;
	int ucitanih = ucitaj_artikle(artikli,10);
	printf("%d",ucitanih);
	for ( i = 0; i &lt; ucitanih; i++) {
		printf("Naziv: %s, cijena:%f, ID:%d\n",artikli[i].naziv,artikli[i].cijena, artikli[i].prodavnica);
	}
	

	
	 broj_ucitanih=ucitaj_prodavnice(prodavnice,10);
	printf("Broj ucitanih %d\n",broj_ucitanih);
	for(i=0;i&lt;broj_ucitanih;i++){
		printf("Naziv:%s,",prodavnice[i].naziv);
		printf("ID:%d\n",prodavnice[i].ID);
	}
	
	broj_ucitanih = izbaci_skupe(prodavnice,broj_ucitanih,artikli,ucitanih);
	printf("\nNAKON IZBACIVANJA:\n");
		printf("Broj ucitanih %d\n",broj_ucitanih);
	for(i=0;i&lt;broj_ucitanih;i++){
		printf("Naziv:%s,",prodavnice[i].naziv);
		printf("ID:%d\n",prodavnice[i].ID);
	}
	
	uspjesno_sacuvana = sacuvaj(prodavnice,broj_ucitanih,"povoljne.bin");
	if(uspjesno_sacuvana){
		printf("Povoljne prodavnice su spasene u datoteci povoljne.bin!");
	}
	else{
		printf("Doslo je do greske prilikom otvaranja datoteke povoljne.bin!");
	}
	
	
	return 0;
}
</pre>
</body>
</html>
