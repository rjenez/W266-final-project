<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student7948.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student6369.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

struct Artikal {
	char naziv[100];
	double cijena;
	int prodavnica;
};

struct Prodavnica {
	char naziv[100];
	int ID;
};

int ucitaj_artikle(struct Artikal *niz,int kap)
{
	int broj_ucitanih=0;
	FILE *ulaz=fopen("artikli.bin","rb");
	{
		if(ulaz == NULL) {
			printf("Greska");
			return -1;
		}
	}
<a name="1"></a><font color="#00FF00"><a href="match958-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

	broj_ucitanih=fread(niz,sizeof(struct Artikal),kap,ulaz);
	fclose(ulaz);
	return broj_ucitanih;
}

int ucitaj_prodavnice(struct Prodavnica *niz, int kap)
{
	int i=0,brojac=0;
</font>	char znak='\0';
	FILE *prodavnica=fopen("prodavnice.txt","r");
	{
		if(prodavnica==NULL) {
			printf("Greska");
			return -1;
		}
	}
	for(i = 0; i &lt; kap; i++) {
		znak = fgetc(prodavnica);
		if(znak == EOF) break;
		brojac=0;
		do {
			niz[i].naziv[brojac++] = znak;
		} while((znak = fgetc(prodavnica))!=',' &amp;&amp; brojac &lt; 99);
		/*Citamo preostale znakove do zareza u slucaju da ih ima*/
		if(brojac == 99 &amp;&amp; znak != ',')
		{
			while((znak = fgetc(prodavnica)) != ',');
		}
		niz[i].naziv[brojac] = 0;
		fscanf(prodavnica,"%d",&amp;niz[i].ID);
		//Ucitamo novi red da ne bi ucitao ime artikla//
		znak = fgetc(prodavnica);
	}
	return i;
}
double Prosjek(struct Artikal *niz, int ID_prod, int kapacitet)
{
	int i,nadjeni=0;
	double rezultat,suma=0;
	for(i = 0; i &lt; kapacitet; i++)
	{
		if(niz[i].prodavnica == ID_prod)
		{
			suma += niz[i].cijena;
			nadjeni++;
		}
	}
	if(nadjeni == 0) return 0;
	else 
		return suma/nadjeni;
}
void izbaci(struct Prodavnica *niz,int indeks, int kapacitet)
{
	int i= indeks;
	for(i = indeks; i &lt; kapacitet-1; i++)
	{
		niz[i] = niz[i+1];
	}
	kapacitet--;
	
}

int izbaci_skupe(struct Prodavnica *p, int np, struct Artikal *a, int na)
{
	int i;
	double suma = 0,prosjek,temp;
	if(na == 0 || np == 0) return np;
	for(i = 0; i &lt; na; i++)
	{
		suma += a[i].cijena;
	}
	prosjek = suma /na;
	for(i = 0; i &lt; np; i++)
	{
		temp = Prosjek(a,p[i].ID,na);
		if(temp &gt; prosjek)
		{
			izbaci(p,i,np);
			np--;
		}
	}
	return np;
}

int sacuvaj(struct Prodavnica *p, int n, const char *ime_datoteke)
{
	FILE *izlaz=fopen(ime_datoteke,"wb");
	if(izlaz == NULL)
	{
		printf("Greska");
		return 0;
	}
	int ucitano = fwrite(p,sizeof(struct Prodavnica),n,izlaz);
	if(ferror(izlaz))
	{
		printf("Greska");
		return 0;
	}
<a name="0"></a><font color="#FF0000"><a href="match958-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

	fclose(izlaz);
	return 1;
}


int main()
{
	/*	int i;   
	struct Prodavnica prodavnice[10];
	int n = ucitaj_prodavnice(prodavnice,10);
	printf("n = %d\n",n);

	for(i = 0; i &lt; n; i++)
	{
		printf("%s, %d ",prodavnice[i].naziv,prodavnice[i].ID);
	}*/
	struct Prodavnica p[] = {
	{"Amko", 1},
	{"Bingo", 2},
	{"Konzum", 3},
};
struct Artikal a[] = {
	{"Kiseli kupus", 10, 4},
</font>	{"Bickl", 1000, 5},
	{"Krastavci", 2, 4}
};
<a name="2"></a><font color="#0000FF"><a href="match958-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

int i = izbaci_skupe(p, 3, a, 0), j;
for (j = 0; j &lt; i; ++j)
	printf ("%s, ID: %d\n", p[j].naziv, p[j].ID);
i = izbaci_skupe(p, 0, a, 0);
</font>for (j = 0; j &lt; 3; ++j)
	printf ("%s, ID: %d\n", p[j].naziv, p[j].ID);
i = izbaci_skupe(p, 0, a, 3);
for (j = 0; j &lt; 3; ++j)
	printf ("%s, ID: %d\n", p[j].naziv, p[j].ID);	
	return 0;
}
</pre>
</body>
</html>
