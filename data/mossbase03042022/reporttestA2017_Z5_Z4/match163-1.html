<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student2080.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z4/student6156.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

struct Prodavnica
{
	char naziv[100];
	int ID;
};
struct Artikal
{
	char naziv[100];
	double cijena;
	int prodavnica;
};

int ucitaj_artikle (struct Artikal *niz, int kap);

int ucitaj_prodavnice (struct Prodavnica *niz, int kap);

int izbaci_skupe (struct Prodavnica *p, int np, struct Artikal *a, int na);

int sacuvaj (struct Prodavnica *p, int n, const char *ime_datoteke);

int main()
{

	return 0;
}

int ucitaj_artikle (struct Artikal *niz, int kap)
{
	int ucitano;
	FILE* registar;

	registar=fopen("artikli.bin","rb");
	if(registar==NULL)
	{
		printf("\nGreska pri otvaranju datoteke!");
		exit(1);
	}
	///toliko je lahko unijeti niz struktura ove definicije
	//a ja kopao i kopao 
	ucitano = fread(niz,sizeof(struct Artikal),kap,registar);

	return ucitano;

}

int ucitaj_prodavnice (struct Prodavnica *niz, int kap)
{
	int i,j,k;
	int id;
	char znak;
	char ime[100]="";
	FILE* lager;

	lager=fopen("prodavnice.txt","r");
	if(lager==NULL)
	{
		printf("\nGreska pri otvaranju datoteke!");
		exit(1);
	}


	for(k=0; k&lt;kap; k++)
	{

		i=0;
		do
		{//ucitavanje imena 
			znak=fgetc(lager);
			if(znak==EOF)goto kraj;
			if(znak!=',')
			{
				ime[i]=znak;
				i++;
			}

		}
		while(znak!=','&amp;&amp;i&lt;99);
<a name="2"></a><font color="#0000FF"><a href="match163-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

		if(i==99)
		{
			if(znak!=',')
			{
				do
				{
					znak=fgetc(lager);
				}
				while(znak!=',');
			}
		}
		ime[i]='\0';
		for(j=0; j&lt;=i; j++)
		{
			niz[k].naziv[j]=ime[j];
		}
		fscanf(lager,"%d\n",&amp;id);
		niz[k].ID=id;

	}


kraj:
</font>	return k;

}

int sacuvaj (struct Prodavnica *p, int n, const char *ime_datoteke)
{
	FILE* lager;
	int i,j,k;
	int id;
	char name[100]="";

	lager=fopen(ime_datoteke,"wb");

	if(lager==NULL)
	{
		return 0;
	}


	for(k=0; k&lt;n; k++)
	{
<a name="0"></a><font color="#FF0000"><a href="match163-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_11.gif"/></a>

		for(i=0; i&lt;100; i++)
		{
			name[i]=p[k].naziv[i];
		}
		id=p[k].ID;
		fwrite(name,1,100,lager);
		if(ferror(lager))return 0;
		fwrite(&amp;id,4,1,lager);
		if(ferror(lager))return 0;
	}

	fclose(lager);

	return 1;
}

int izbaci_skupe (struct Prodavnica *p, int np, struct Artikal *a, int na)
</font>{
	int i,j,n;
	double suma=0;
	double prosjek=0;
	int *niz=(int*)malloc(sizeof(int)*(np));
	double *lager=(double*)malloc(sizeof(double)*(np));
	
	for(i=0;i&lt;np;i++)
	{
		lager[i]=0;
	}
<a name="5"></a><font color="#FF0000"><a href="match163-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

	for(i=0;i&lt;np;i++)
	{
		niz[i]=p[i].ID;
	}
	for(i=0;i&lt;na;i++)
</font>	{
<a name="4"></a><font color="#FF00FF"><a href="match163-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

		for(j=0;j&lt;np;j++)
		{
			if(a[i].prodavnica==niz[j])lager[j]+=a[i].cijena;
		}
		
	}

	//trazimo prosjeke prodavnica pojedinacno
	
	for(i=0;i&lt;np;i++)
</font>	{
		n=0;
<a name="1"></a><font color="#00FF00"><a href="match163-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_10.gif"/></a>

		for(j=0;j&lt;na;j++)
		{
		if(a[j].prodavnica==p[i].ID)n++;	
		}
		lager[i]/=(double)n;
	}
	
	for(i=0;i&lt;np;i++)
	{
		suma+=lager[i];
	}
	prosjek=suma/(double)np;
	// IZBACIVANJE PRODAVNICA
	for(i=0;i&lt;np;i++)
	{
		if(lager[i]&gt;prosjek)
</font><a name="3"></a><font color="#00FFFF"><a href="match163-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_7.gif"/></a>

		{
			for(j=i+1;j&lt;np;j++)
			{
				lager[j-1]=lager[j];
				niz[j-1]=niz[j];
				p[j-1]=p[j];
			}
			np--;
			i--;
		}
	}
	free(niz);
	free(lager);
</font>	return np;
}</pre>
</body>
</html>
