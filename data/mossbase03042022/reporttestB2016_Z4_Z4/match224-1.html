<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1364.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1833.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;locale&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;memory&gt;
<a name="0"></a><font color="#FF0000"><a href="match224-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

using std::cout;
using std::endl;
using std::cin;
class  Datum
{
    int dan, mjesec, godina;
public:
    Datum(int dan, int mjesec, int godina) {
        Postavi(dan,mjesec,godina);
    }
    void Postavi(int dan, int mjesec, int godina);
    int DajDan() const {
        return dan;
    }
    int DajMjesec() const {
        return mjesec;
    }
    int DajGodinu() const {
</font>        return godina;
    }
    void Ispisi() const {
        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};
void Datum::Postavi(int dan,int mjesec,int godina)
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if( godina % 4 == 0 &amp;&amp; godina % 100 != 0 || godina % 400 == 0 ) broj_dana[1]++;
    if( godina &lt; 1 || dan &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &gt; broj_dana[mjesec - 1]) throw std::domain_error("Neispravan datum");
    Datum::dan = dan;
    Datum::mjesec = mjesec;
    Datum::godina = godina;
}
bool JednakiDatumi(const Datum &amp;d1, const Datum &amp;d2)
{
    return d1.DajDan()==d2.DajDan() &amp;&amp; d1.DajMjesec()==d2.DajMjesec() &amp;&amp; d1.DajGodinu()==d2.DajGodinu();
}
class Kupac
{
    std::string _ime_i_prezime;
    Datum _datum_rodjenja;
public:
    Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja) : _datum_rodjenja(datum_rodjenja) {
        Postavi(ime_i_prezime, datum_rodjenja);
    }
    void Ispisi() const {
        std::cout &lt;&lt; DajImePrezime() &lt;&lt; " (";
        DajDatumRodjenja().Ispisi();
        std::cout &lt;&lt; ")" &lt;&lt; std::endl;
    }
    void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    std::string DajImePrezime() const {
        return _ime_i_prezime;
    }
    Datum DajDatumRodjenja() const {
        return _datum_rodjenja;
    }
};
void Kupac::Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja)
{
    _datum_rodjenja=datum_rodjenja;
    std::locale loc;
    for(auto it=ime_i_prezime.begin(); it!=ime_i_prezime.end(); it++)
        if(!(std::isalnum(*it,loc) || *it=='-' || *it==39 || *it==' ')) throw std::domain_error("Neispravno ime i prezime");
    _ime_i_prezime=ime_i_prezime;
}
bool JednakiKupci(const Kupac &amp;k1, const Kupac &amp;k2)
{
    return k1.DajImePrezime()==k2.DajImePrezime() &amp;&amp; JednakiDatumi(k1.DajDatumRodjenja(),k2.DajDatumRodjenja());
}
class Stan
{
    int _sprat,_broj_soba;
    double _kvadratura;
    bool _namjesten;
    std::string _adresa;
public:
    Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
        Postavi(adresa, sprat, broj_soba, namjesten, kvadratura);
    }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
    double DajKvadraturu() const {
        return _kvadratura;
    }
    std::string DajAdresu() const {
        return _adresa;
    }
    bool DajNamjesten() const {
        return _namjesten;
    }
    int DajBrojSoba() const {
        return _broj_soba;
    }
    int DajSprat() const {
        return _sprat;
    }
    void Ispisi() const {
        std::cout&lt;&lt;"Stan se nalazi na adresi "&lt;&lt; DajAdresu()&lt;&lt;" na "&lt;&lt;DajSprat()&lt;&lt;". spratu i ima "&lt;&lt;DajBrojSoba();
        if(DajBrojSoba()%10&gt;1 &amp;&amp; DajBrojSoba()%10&lt;5) std::cout&lt;&lt;" sobe";
        else if(DajBrojSoba()%10 ==1) std::cout&lt;&lt;" sobu";
        else std::cout&lt;&lt;" soba";
        std::cout&lt;&lt;". Kvadratura stana je "&lt;&lt; DajKvadraturu()&lt;&lt;" (m^2) i stan ";
        if(!DajNamjesten()) std::cout&lt;&lt;"ni";
        std::cout&lt;&lt;"je namjesten."&lt;&lt;std::endl;
    }

};
void Stan::Postavi(const std::string &amp;adresa,int sprat, int broj_soba, bool namjesten, double kvadratura)
{
    if(sprat&lt;0 || broj_soba &lt;0 || kvadratura&lt;0) throw std::domain_error("Neispravan unos podataka");

    _kvadratura=kvadratura;
    _broj_soba=broj_soba;
    _namjesten=namjesten;
    _adresa=adresa;
    _sprat=sprat;
}

bool JednakiStanovi(const Stan &amp;k1, const Stan &amp;k2)
{
    return k1.DajSprat()==k2.DajSprat() &amp;&amp; k1.DajBrojSoba()==k2.DajBrojSoba() &amp;&amp; k1.DajNamjesten() == k2.DajNamjesten() &amp;&amp; k1.DajAdresu()==k2.DajAdresu() &amp;&amp; fabs(k1.DajKvadraturu()-k2.DajKvadraturu())&lt; 1e-6;
}
class Prodaja
{
    std::string _ime_agenta_prodaje;
    double _cijena_stana;
    Datum _datum_prodaje;
    Kupac _kupac_stana;
    Stan _kupljeni_stan;
public:
<a name="5"></a><font color="#FF0000"><a href="match224-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
</font><a name="3"></a><font color="#00FFFF"><a href="match224-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    void PromijeniKupca(const Kupac &amp;novi_kupac) {
        _kupac_stana = novi_kupac;
    }
    void PromijeniStan(const Stan &amp;novi_stan) {
        _kupljeni_stan = novi_stan;
    }
    void PromijeniDatumKupovine(const Datum &amp;novi_datum) {
        _datum_prodaje = novi_datum;
</font>    }
    void PromijeniCijenuProdaje(const double &amp;nova_cijena) {
        _cijena_stana = nova_cijena;
    }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    double DajCijenuStana() const {
        return _cijena_stana;
    }
    Datum DajDatumProdaje() const {
        return _datum_prodaje;
    }
    std::string DajImeAgenta() const {
        return _ime_agenta_prodaje;
    }
    std::string DajImeKupca() const {
        return _kupac_stana.DajImePrezime();
    }
<a name="2"></a><font color="#0000FF"><a href="match224-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
    friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2);
    void Ispisi() const;
};
Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan):_datum_prodaje(datum_prodaje), _kupac_stana(kupac_stana), _kupljeni_stan(kupljeni_stan)
</font>{
    if(cijena_stana&lt;0) throw std::domain_error("Neispravna cijena strana");
<a name="16"></a><font color="#00FF00"><a href="match224-0.html#16" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    _ime_agenta_prodaje=ime_agenta_prodaje;
    _cijena_stana=cijena_stana;
}
Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata):_datum_prodaje(dan_prodaje, mjesec_prodaje, godina_prodaje), _kupac_stana(ime_kupca, datum_rodjenja_kupca),
</font><a name="17"></a><font color="#0000FF"><a href="match224-0.html#17" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    _kupljeni_stan(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata)
</font>{
    if(cijena_stana&lt;0) throw std::domain_error("Neispravna cijena strana");
    _ime_agenta_prodaje=ime_agenta_prodaje;
    _cijena_stana=cijena_stana;
}
void Prodaja::PomjeriDanUnaprijed()
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if( _datum_prodaje.DajGodinu() % 4 == 0 &amp;&amp; _datum_prodaje.DajGodinu() % 100 != 0 || _datum_prodaje.DajGodinu() % 400 == 0 ) broj_dana[1]++;
    if(_datum_prodaje.DajDan() &lt; broj_dana[_datum_prodaje.DajMjesec() - 1]) _datum_prodaje.Postavi(_datum_prodaje.DajDan() + 1, _datum_prodaje.DajMjesec(), _datum_prodaje.DajGodinu());
    else { //Ako je jednak
        if(_datum_prodaje.DajMjesec() &lt; 12) _datum_prodaje.Postavi(1, _datum_prodaje.DajMjesec() + 1, _datum_prodaje.DajGodinu());
        else _datum_prodaje.Postavi(1, 1, _datum_prodaje.DajGodinu() + 1); //Nova godina :D
    }
}
void Prodaja::PomjeriDanUnazad()
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if( _datum_prodaje.DajGodinu() % 4 == 0 &amp;&amp; _datum_prodaje.DajGodinu() % 100 != 0 || _datum_prodaje.DajGodinu() % 400 == 0 ) broj_dana[1]++;
    if(_datum_prodaje.DajDan() &gt; 1) _datum_prodaje.Postavi(_datum_prodaje.DajDan() - 1, _datum_prodaje.DajMjesec(), _datum_prodaje.DajGodinu());
    else { //Ako je jednak
        if(_datum_prodaje.DajMjesec() &gt; 1) _datum_prodaje.Postavi(broj_dana[_datum_prodaje.DajMjesec() - 1], _datum_prodaje.DajMjesec() - 1, _datum_prodaje.DajGodinu());
        else _datum_prodaje.Postavi(broj_dana[11], 12, _datum_prodaje.DajGodinu() - 1); //Nova godina :D
    }
}
bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
    Datum d1(p1.DajDatumProdaje()),d2(p2.DajDatumProdaje());
    if(d1.DajGodinu()&lt;d2.DajGodinu()) return true;
    else if(d1.DajGodinu()==d2.DajGodinu()) {
        if(d1.DajMjesec() &lt; d2.DajMjesec()) return true;
        else if(d1.DajMjesec()==d2.DajMjesec()) return d1.DajDan() &lt; d2.DajDan();
    }
    return false;
}
bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
    return p1.DajCijenuStana()&lt;p2.DajCijenuStana();
}
void Prodaja::Ispisi()const
{
    std::cout&lt;&lt;"Ime agenta:                 "&lt;&lt;DajImeAgenta()&lt;&lt;std::endl;
    std::cout&lt;&lt;"Ime kupca:                  ";
    _kupac_stana.Ispisi();
    std::cout&lt;&lt; "Zakazani datum prodaje:     ";
    _datum_prodaje.Ispisi();
    std::cout &lt;&lt; std::endl;
    std::cout&lt;&lt; "Cijena stana:               " &lt;&lt; DajCijenuStana() &lt;&lt; std::endl;
    std::cout&lt;&lt; "Informacije o stanu:" &lt;&lt; std::endl;
    _kupljeni_stan.Ispisi();
}
class Prodaje
{
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; prodaje;
public:
    explicit Prodaje() {}
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
    Prodaje(const Prodaje &amp;p);
    Prodaje(Prodaje &amp;&amp;p);
    Prodaje &amp;operator=(const Prodaje &amp;p);
    Prodaje &amp;operator=(Prodaje &amp;&amp;p);
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp; datum_rodjenja_kupca, const std::string &amp; adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
    void RegistrirajProdaju(std::shared_ptr&lt;Prodaja&gt; prodaja);
    int DajBrojProdaja() const {
        return prodaje.size();
    }
<a name="18"></a><font color="#00FFFF"><a href="match224-0.html#18" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    int DajBrojProdajaNaDatum(const Datum &amp; datum) const {
        return std::count_if(prodaje.begin(), prodaje.end(), [datum](std::shared_ptr&lt;Prodaja&gt; p) {
</font>            return JednakiDatumi(datum, p-&gt;DajDatumProdaje());
        });
    }
    int DajBrojProdajaOdAgenta(const std::string &amp; ime_agenta) const;
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const;
    void IsprazniKolekciju() {
        prodaje.resize(0);
    }
    void ObrisiNajranijuProdaju();
<a name="8"></a><font color="#00FFFF"><a href="match224-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta);
    void ObrisiProdajeNaDatum(const Datum &amp; datum);
    void IspisiProdajeNaDatum(const Datum &amp; datum) const;
    void IspisiSveProdaje() const;
};
Prodaje::Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja): prodaje(spisak_prodaja.size()){
</font>    
    for(int i=0; i&lt;prodaje.size(); i++) prodaje[i]=std::make_shared&lt;Prodaja&gt;(spisak_prodaja.begin()[i]);
}

<a name="6"></a><font color="#00FF00"><a href="match224-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

Prodaje::Prodaje(const Prodaje &amp;p) :  prodaje(p.prodaje.size())
{
    for(int i=0; i&lt;p.prodaje.size(); i++) prodaje[i]=std::make_shared&lt;Prodaja&gt;(*p.prodaje[i]);

}
Prodaje::Prodaje(Prodaje &amp;&amp;p) :prodaje(std::move(p.prodaje)) {}
</font>
<a name="1"></a><font color="#00FF00"><a href="match224-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

Prodaje &amp;Prodaje::operator=(const Prodaje &amp;p)
{
    prodaje.resize(p.prodaje.size());
    for(int i=0; i&lt;p.prodaje.size(); i++) prodaje[i]=std::make_shared&lt;Prodaja&gt;(*p.prodaje[i]);
    return *this;
</font>}
Prodaje &amp;Prodaje::operator=(Prodaje &amp;&amp;p)
{
    prodaje = std::move(p.prodaje);
    return *this;
}
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan)
{
    prodaje.push_back(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, datum_prodaje, kupac_stana, kupljeni_stan));
}
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp; datum_rodjenja_kupca, const std::string &amp; adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata)
{
<a name="13"></a><font color="#00FFFF"><a href="match224-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    prodaje.push_back(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje,cijena_stana,dan_prodaje,mjesec_prodaje,godina_prodaje,ime_kupca,datum_rodjenja_kupca,adresa_stana,sprat_stana,broj_soba,namjesten_stan,broj_kvadrata));
</font>}
void Prodaje::RegistrirajProdaju(std::shared_ptr&lt;Prodaja&gt; prodaja){
    prodaje.push_back(prodaja);
}
Prodaja &amp;Prodaje::DajNajranijuProdaju()
{
<a name="19"></a><font color="#FF00FF"><a href="match224-0.html#19" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    if(DajBrojProdaja()==0) throw std::domain_error ("Nema registriranih prodaja");
    return **std::min_element(prodaje.begin(),prodaje.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2) {
</font>        return ProdatPrije(*p1,*p2);
    });
}
Prodaja Prodaje::DajNajranijuProdaju() const
{
    if(DajBrojProdaja()==0) throw std::domain_error ("Nema registriranih prodaja");
    return **std::min_element(prodaje.begin(),prodaje.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2) {
        return ProdatPrije(*p1,*p2);
    });
}
Prodaja &amp;Prodaje::DajNajskupljuProdaju()
{
    if(DajBrojProdaja()==0) throw std::domain_error ("Nema registriranih prodaja");
    return **std::min_element(prodaje.begin(),prodaje.end(),[](std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) {
        return SkupljiStan(*p1,*p2);
    });
}
Prodaja Prodaje::DajNajskupljuProdaju() const
{
    if(DajBrojProdaja()==0) throw std::domain_error ("Nema registriranih prodaja");
    return **std::min_element(prodaje.begin(),prodaje.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2) {
        return SkupljiStan(*p1,*p2);
    });
}
void Prodaje::ObrisiNajranijuProdaju()
{
    Prodaja najranija(DajNajranijuProdaju());
    for(int i=0; i&lt;prodaje.size(); i++) {
        Prodaja p=*prodaje[i];
        if(JednakiDatumi(najranija.DajDatumProdaje(), p.DajDatumProdaje()) &amp;&amp; najranija.DajImeAgenta() == p.DajImeAgenta() &amp;&amp; najranija.DajImeKupca() == p.DajImeKupca() &amp;&amp; fabs(najranija.DajCijenuStana() - p.DajCijenuStana()) &lt; 1e-6) {
            prodaje.erase (prodaje.begin()+i);
            break;
        }
    }
}
<a name="14"></a><font color="#FF00FF"><a href="match224-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

void Prodaje::ObrisiProdajeAgenta(const std::string &amp;ime_agenta)
{
    for(int i = 0; i &lt; prodaje.size(); i++) {
        if(prodaje[i]-&gt;DajImeAgenta() == ime_agenta) {
            prodaje.erase (prodaje.begin()+i);
</font>            i--;
        }
    }
}
void Prodaje::ObrisiProdajeNaDatum(const Datum &amp; datum)
{
<a name="9"></a><font color="#FF00FF"><a href="match224-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    for(int i=0; i&lt;prodaje.size(); i++) {
        if(JednakiDatumi(prodaje[i]-&gt;DajDatumProdaje(),datum)) {
             prodaje.erase (prodaje.begin()+i);
            i--;
</font>        }
    }
}
void Prodaje::IspisiProdajeNaDatum(const Datum &amp; datum) const
{
    std::vector&lt;Prodaja&gt; ispis;
    for(int i=0; i&lt;DajBrojProdaja(); i++)
        if(JednakiDatumi(prodaje[i]-&gt;DajDatumProdaje(),datum)) ispis.push_back(*prodaje[i]);
    std::sort(ispis.begin(),ispis.end(),ProdatPrije);
    for(int i=0; i&lt;ispis.size(); i++) ispis[i].Ispisi();
}
void Prodaje::IspisiSveProdaje() const
{
    std::vector&lt;Prodaja&gt; ispis;
    for(int i=0; i&lt;DajBrojProdaja(); i++) ispis.push_back(*prodaje[i]);
    std::sort(ispis.begin(),ispis.end(), ProdatPrije);
    for(int i=0; i&lt;ispis.size(); i++) ispis[i].Ispisi();
}

int main ()
{
    std::cout&lt;&lt;"Dobrodosli!"&lt;&lt;std::endl&lt;&lt;std::endl&lt;&lt;endl;
    int n,m;
    std::vector&lt;Stan&gt; stanovi;
    Prodaje prodaja;
    std::vector&lt;Kupac&gt; kupci;
    std::string adresa,ime_i_prezime,datum,ime_agenta,datum_prodaje;
    int sprat,namjesten_int;
    int broj_soba;
    bool namjesten;
    double kvadratura,cijena_stana;
    for(;;) {
        cin.clear();
        cout&lt;&lt;"Izaberite opciju:"&lt;&lt;endl&lt;&lt;" 0 - kraj"&lt;&lt;endl;
        cout&lt;&lt;" 1 - uredjivanje stanova"&lt;&lt;endl&lt;&lt;" 2 - uredjivanje kupaca"&lt;&lt;endl&lt;&lt;" 3 - uredjivanje prodaja";
        cin&gt;&gt;n;
        if(n==0) break;
        else if(n==1) {
            for(;;) {

<a name="4"></a><font color="#FF00FF"><a href="match224-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                cout&lt;&lt;endl&lt;&lt;"Izaberite opciju:"&lt;&lt;endl&lt;&lt;" 0 - nazad"&lt;&lt;endl;
                cout&lt;&lt;" 1 - dodavanje stana"&lt;&lt;endl&lt;&lt;" 2 - uredjivanje stanova"&lt;&lt;endl&lt;&lt;" 3 - ispis svih stanova"&lt;&lt;endl&lt;&lt;" 4 - kraj"&lt;&lt;endl;
                cin&gt;&gt;m;
                if(m==0) break;
                if(m==1) {
</font>                    bool izuzetak=false;
                    do {
                        try {
                            izuzetak=false;
                            cout&lt;&lt;"Unesite adresu: ";
                            std::cin.clear();
                            std::cin.ignore(100,'\n');
                            std::getline(std::cin,adresa);
                            cout&lt;&lt;"Unesite sprat: ";
                            cin&gt;&gt;sprat;
<a name="7"></a><font color="#0000FF"><a href="match224-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                            cout&lt;&lt;"Unesite broj soba: ";
                            cin&gt;&gt;broj_soba;
                            cout&lt;&lt;"Da li je stan namjesten (1 - da, 0 - ne): ";
                            cin&gt;&gt;namjesten_int;
                            cout&lt;&lt;"Unesite kvadraturu: ";
                            cin&gt;&gt;kvadratura;
                            if(namjesten_int!=0 &amp;&amp; namjesten_int !=1)
                                throw std::logic_error ("Izuzetak");
</font>                            else {
                                if(namjesten_int==1)
                                    namjesten=true;
                                else namjesten=false;
                            }
                            stanovi.push_back({adresa,sprat,broj_soba,namjesten,kvadratura});
                        } catch(...) {
                            izuzetak=true;
                            cout&lt;&lt;"Izuzetak: Neispravan unos podataka. Molimo unesite opet."&lt;&lt;endl;
                        }
                    } while(izuzetak);
                    cout&lt;&lt;"Stan je uspjesno dodan!"&lt;&lt;endl;

                } else if(m==2) {
                    cout&lt;&lt;"Odaberite stan. Dostupni stanovi su:"&lt;&lt;endl;
                    int indeks_stana;
<a name="20"></a><font color="#FF0000"><a href="match224-0.html#20" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                    for(int i=0; i&lt;stanovi.size(); i++) {
                        cout&lt;&lt;" "&lt;&lt;i+1&lt;&lt;" - ";
                        stanovi[i].Ispisi();
                    }
                    cin &gt;&gt; indeks_stana;
</font>                    int opcija;
                    indeks_stana--;
                    std::cout &lt;&lt; endl&lt;&lt;"Odaberite polje koje zelite urediti:" &lt;&lt; std::endl;
                    std::cout &lt;&lt; " 0 - nazad\n 1 - adresa\n 2 - sprat\n 3 - broj soba\n 4 - da li je stan namjesten\n 5 - kvadratura\n 6 - sve" &lt;&lt; std::endl;
                    cin &gt;&gt; opcija;
                    for(;;) {

                        bool izuzetak=false;
                        do {
                            try {

                                izuzetak=false;


                                if(opcija == 0) break;
                                else if(opcija == 1) {
                                    std::cin.clear();
                                    std::cin.ignore(100,'\n');
                                    std::getline(std::cin,adresa);
                                    stanovi[indeks_stana].Postavi(adresa, stanovi[indeks_stana].DajSprat(), stanovi[indeks_stana].DajBrojSoba(),stanovi[indeks_stana].DajNamjesten(), stanovi[indeks_stana].DajKvadraturu());
                                } else if(opcija == 2) {
                                    std::cin &gt;&gt; sprat;
                                    stanovi[indeks_stana].Postavi(stanovi[indeks_stana].DajAdresu(), sprat, stanovi[indeks_stana].DajBrojSoba(),stanovi[indeks_stana].DajNamjesten(), stanovi[indeks_stana].DajKvadraturu());

                                } else if(opcija == 3) {
                                    std::cin &gt;&gt; broj_soba;
                                    stanovi[indeks_stana].Postavi(stanovi[indeks_stana].DajAdresu(), stanovi[indeks_stana].DajSprat(), broj_soba,stanovi[indeks_stana].DajNamjesten(), stanovi[indeks_stana].DajKvadraturu());

                                } else if(opcija == 4) {
                                    std::cin &gt;&gt;namjesten;
                                    stanovi[indeks_stana].Postavi(stanovi[indeks_stana].DajAdresu(), stanovi[indeks_stana].DajSprat(), stanovi[indeks_stana].DajBrojSoba(),namjesten, stanovi[indeks_stana].DajKvadraturu());

                                } else if(opcija == 5) {
                                    cout&lt;&lt;"Unesite kvadraturu: ";
                                    std::cin &gt;&gt; kvadratura;
                                    stanovi[indeks_stana].Postavi(stanovi[indeks_stana].DajAdresu(), stanovi[indeks_stana].DajSprat(), stanovi[indeks_stana].DajBrojSoba(),stanovi[indeks_stana].DajNamjesten(), kvadratura);

                                } else if(opcija == 6) {

                                    cout&lt;&lt;"Unesite adresu: ";
                                    std::cin.clear();
                                    std::cin.ignore(100,'\n');
                                    std::getline(std::cin,adresa);
                                    cout&lt;&lt;"Unesite sprat: ";
                                    cin&gt;&gt;sprat;
                                    cout&lt;&lt;"Unesite broj soba: ";
                                    cin&gt;&gt;broj_soba;
                                    cout&lt;&lt;"Da li je stan namjesten (1 - da, 0 - ne): ";
                                    cin&gt;&gt;namjesten_int;
                                    cout&lt;&lt;"Unesite kvadraturu: ";
                                    cin&gt;&gt;kvadratura;
                                    if(namjesten_int!=0 &amp;&amp; namjesten_int !=1)
                                        throw std::logic_error ("Izuzetak");
                                    else {
                                        if(namjesten_int==1)
                                            namjesten=true;
                                        else namjesten=false;
                                    }
                                    stanovi[indeks_stana].Postavi(adresa,sprat,broj_soba,namjesten,kvadratura);
                                }
                            } catch(...) {
                                izuzetak=true;
                                cout&lt;&lt;"Izuzetak: Neispravan unos podataka. Molimo unesite opet."&lt;&lt;endl;
                            }
                        } while(izuzetak);
                        cout&lt;&lt;"Stan je uspjesno izmijenjen!"&lt;&lt;endl;
                        break;
                    }
<a name="15"></a><font color="#FF0000"><a href="match224-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                } else if(m==3) {
                    for(int i=0; i&lt;stanovi.size(); i++) {
                        cout&lt;&lt;i+1&lt;&lt;". ";
                        stanovi[i].Ispisi();
</font>                    }
                }

            }
        }

        else if(n==2) {
            for(;;) {
<a name="10"></a><font color="#FF0000"><a href="match224-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                cout&lt;&lt;endl&lt;&lt;"Izaberite opciju:"&lt;&lt;endl&lt;&lt;" 0 - nazad"&lt;&lt;endl;
                cout&lt;&lt;" 1 - dodavanje kupca"&lt;&lt;endl&lt;&lt;" 2 - uredjivanje kupaca"&lt;&lt;endl&lt;&lt;" 3 - ispis svih kupaca"&lt;&lt;endl&lt;&lt;" 4 - kraj"&lt;&lt;endl;
</font>                cin&gt;&gt;m;
                std::cin.ignore(100,'\n');

                if(m==0) break;
                if(m==1) {
                    bool izuzetak=false;
                    do {
                        try {

                            izuzetak=false;
                            cout&lt;&lt;"Unesite ime i prezime kupca: ";
                            std::getline(std::cin,ime_i_prezime);
                            cout&lt;&lt;"Unesite datum rodjenja (formata d/m/g): ";
                            std::getline(std::cin,datum);
                            int godina,dan,mjesec;
                            try {
                                godina = std::stoi ( datum.substr( 5, 4 ));
                                dan = std::stoi ( datum.substr( 0, '/' ));
                                mjesec = std::stoi ( datum.substr( 2, '/' ));
                                if(godina-1000&lt;0)
                                    throw;
                            } catch(...) {
                                try {
                                    godina = std::stoi ( datum.substr( 6, 4 ));
                                    dan = std::stoi ( datum.substr( 0, '/' ));
                                    mjesec = std::stoi ( datum.substr( 3, '/' ));
                                    if(godina-1000&lt;0)
                                        throw;
                                } catch(...) {
                                    try {
                                        godina = std::stoi ( datum.substr( 4, 4 ));
                                        dan = std::stoi ( datum.substr( 0, '/' ));
                                        mjesec = std::stoi ( datum.substr( 2, '/' ));
                                        if(godina-1000&lt;0)
                                            throw;
                                    }

                                    catch(...) {
                                        godina = std::stoi ( datum.substr( 5, 4 ));
                                        dan = std::stoi ( datum.substr( 0, '/' ));
                                        mjesec = std::stoi ( datum.substr( 3, '/' ));
                                    }
                                }

                            }

                            Datum D(dan,mjesec,godina);
                            kupci.push_back({ime_i_prezime,D});
                        } catch(std::logic_error e) {
                            izuzetak=true;
                            cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;". Molimo unesite opet."&lt;&lt;endl;
                        }
                    } while(izuzetak);
                    cout&lt;&lt;"Kupac je uspjesno dodan!"&lt;&lt;endl;

                } else if(m==2) {
                    cout&lt;&lt;"Odaberite kupca kojeg zelite urediti. Dostupni kupci su:"&lt;&lt;endl;
                    int indeks_kupca;
<a name="21"></a><font color="#00FF00"><a href="match224-0.html#21" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                    for(int i=0; i&lt;kupci.size(); i++) {
                        cout&lt;&lt;" "&lt;&lt;i+1&lt;&lt;" - ";
                        kupci[i].Ispisi();
                    }
                    cin &gt;&gt; indeks_kupca;
</font>                    indeks_kupca--;
                    std::cin.ignore(100,'\n');

                    for(;;) {

                        bool izuzetak=false;
                        do {
                            try {

                                izuzetak=false;
                                cout&lt;&lt;"Unesite ime i prezime kupca: ";
                                std::getline(std::cin,ime_i_prezime);
                                cout&lt;&lt;"Unesite datum rodjenja (formata d/m/g): ";
                                std::getline(std::cin,datum);
                                int godina,dan,mjesec;
                                try {
                                    godina = std::stoi ( datum.substr( 5, 4 ));
                                    dan = std::stoi ( datum.substr( 0, '/' ));
                                    mjesec = std::stoi ( datum.substr( 3, '/' ));
                                    if(godina-1000&lt;0)
                                        throw;

                                } catch(...) {
                                    try {
                                        godina = std::stoi ( datum.substr( 6, 4 ));
                                        dan = std::stoi ( datum.substr( 0, '/' ));
                                        mjesec = std::stoi ( datum.substr( 3, '/' ));
                                        if(godina-1000&lt;0)
                                            throw;

                                    } catch(...) {
                                        try {
                                            godina = std::stoi ( datum.substr( 5, 4 ));
                                            dan = std::stoi ( datum.substr( 0, '/' ));
                                            mjesec = std::stoi ( datum.substr( 2, '/' ));
                                            if(godina-1000&lt;0)
                                                throw;
                                        }

                                        catch(...) {
                                            godina = std::stoi ( datum.substr( 4, 4 ));
                                            dan = std::stoi ( datum.substr( 0, '/' ));
                                            mjesec = std::stoi ( datum.substr( 2, '/' ));

                                        }
                                    }

                                }

                                Datum D(dan,mjesec,godina);
                                kupci[indeks_kupca].Postavi(ime_i_prezime,D);


                            } catch(std::logic_error e) {
                                izuzetak=true;
                                cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;". Molimo unesite opet."&lt;&lt;endl;
                            }
                        } while(izuzetak);
                        cout&lt;&lt;"Kupac je uspjesno izmijenjen!"&lt;&lt;endl;
                        break;
                    }
                } else if(m==3) {
                    for(int i=0; i&lt;kupci.size(); i++)
                        kupci[i].Ispisi();
                }
            }
        } else if(n==3) {

            for(;;) {
<a name="11"></a><font color="#00FF00"><a href="match224-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                cout&lt;&lt;endl&lt;&lt;"Izaberite opciju:"&lt;&lt;endl&lt;&lt;" 0 - nazad"&lt;&lt;endl;
                cout&lt;&lt;" 1 - dodavanje prodaje"&lt;&lt;endl&lt;&lt;" 2 - uredjivanje prodaje"&lt;&lt;endl&lt;&lt;" 3 - ispis prodaja"&lt;&lt;endl&lt;&lt;" 4 - brisanje prodaja"&lt;&lt;endl&lt;&lt;" 5 - kraj"&lt;&lt;endl;
</font>                cin&gt;&gt;m;

                if(!std::cin) break;
                if(m==0) break;
                if(m==1) {
                    for(;;){
                        
                    
                    cout&lt;&lt;endl&lt;&lt;"Izaberite opciju:"&lt;&lt;endl&lt;&lt;" 0 - nazad"&lt;&lt;endl;
<a name="12"></a><font color="#0000FF"><a href="match224-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                    cout&lt;&lt;" 1 - dodavanje potpuno nove prodaje"&lt;&lt;endl&lt;&lt;" 2 - dodavanje nove prodaje na osnovu arhive"&lt;&lt;endl&lt;&lt;" 3 - kraj"&lt;&lt;endl;
                    int opcija;
                    cin &gt;&gt; opcija;
                    if(opcija==0) break;
</font>
                    if(opcija != 0) {
                                                   bool izuzetak=false;

                        
                        do {
                                            if(!std::cin) break;

                            try {

                                if(opcija == 1) {

                                                        std::cin.ignore(100,'\n');

                                    izuzetak=false;
                                    int dan,godina,mjesec;
                                    cout&lt;&lt;"Unesite ime i prezime agenta prodaje: ";
                                    std::getline(std::cin,ime_agenta);
                                    cout&lt;&lt;"Unesite datum prodaje (formata d/m/g): ";
                                    std::getline(std::cin,datum_prodaje);
                                    cout&lt;&lt;"Unesite cijenu stana: ";
                                    cin&gt;&gt;cijena_stana;
                                    std::cin.ignore(100,'\n');

                                    cout&lt;&lt;"Unesite ime kupca: ";
                                    std::getline(std::cin,ime_i_prezime);
                                    std::cout &lt;&lt;"Unesite datum rodjenja kupca (formata d/m/g): ";
                                    std::getline(std::cin,datum);
                                    cout&lt;&lt;"Unesite adresu: ";
                                    std::getline(std::cin,adresa);
                                    cout&lt;&lt;"Unesite sprat: ";
                                    cin&gt;&gt;sprat;
                                    cout&lt;&lt;"Unesite broj soba: ";
                                    cin&gt;&gt;broj_soba;
                                    cout&lt;&lt;"Da li je stan namjesten (1 - da, 0 - ne): ";
                                    cin&gt;&gt;namjesten_int;
                                    cout&lt;&lt;"Unesite kvadraturu: ";
                                    cin&gt;&gt;kvadratura;
                                    if(namjesten_int!=0 &amp;&amp; namjesten_int !=1)
                                        throw std::logic_error ("Izuzetak");
                                    else {
                                        if(namjesten_int==1)
                                            namjesten=true;
                                        else namjesten=false;
                                    }

                                    try {
                                        godina = std::stoi ( datum.substr( 5, 4 ));
                                        dan = std::stoi ( datum.substr( 0, '/' ));
                                        mjesec = std::stoi ( datum.substr( 3, '/' ));
                                        if(godina-1000&lt;0)
                                            throw;

                                    } catch(...) {
                                        try {
                                            godina = std::stoi ( datum.substr( 6, 4 ));
                                            dan = std::stoi ( datum.substr( 0, '/' ));
                                            mjesec = std::stoi ( datum.substr( 3, '/' ));
                                            if(godina-1000&lt;0)
                                                throw;

                                        } catch(...) {
                                            try {
                                                godina = std::stoi ( datum.substr( 5, 4 ));
                                                dan = std::stoi ( datum.substr( 0, '/' ));
                                                mjesec = std::stoi ( datum.substr( 2, '/' ));
                                                if(godina-1000&lt;0)
                                                    throw;
                                            }

                                            catch(...) {
                                                godina = std::stoi ( datum.substr( 4, 4 ));
                                                dan = std::stoi ( datum.substr( 0, '/' ));
                                                mjesec = std::stoi ( datum.substr( 2, '/' ));

                                            }
                                        }

                                    }
                                    Datum D(dan,mjesec,godina);
                                    kupci.push_back({ime_i_prezime,D});
                                    try {
                                        godina = std::stoi ( datum_prodaje.substr( 5, 4 ));
                                        dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                        mjesec = std::stoi ( datum_prodaje.substr( 3, '/' ));
                                        if(godina-1000&lt;0)
                                            throw;

                                    } catch(...) {
                                        try {
                                            godina = std::stoi ( datum_prodaje.substr( 6, 4 ));
                                            dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                            mjesec = std::stoi ( datum_prodaje.substr( 3, '/' ));
                                            if(godina-1000&lt;0)
                                                throw;

                                        } catch(...) {
                                            try {
                                                godina = std::stoi ( datum_prodaje.substr( 5, 4 ));
                                                dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                                mjesec = std::stoi ( datum_prodaje.substr( 2, '/' ));
                                                if(godina-1000&lt;0)
                                                    throw;
                                            }

                                            catch(...) {
                                                godina = std::stoi ( datum_prodaje.substr( 4, 4 ));
                                                dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                                mjesec = std::stoi ( datum_prodaje.substr( 2, '/' ));

                                            }
                                        }

                                    }
                                    Datum D1(dan,mjesec,godina);

                                    stanovi.push_back({adresa,sprat,broj_soba,namjesten,kvadratura});

                                    prodaja.RegistrirajProdaju(ime_agenta,cijena_stana,D1,kupci[kupci.size()-1],stanovi[stanovi.size()-1]);

                                } else if(opcija == 2) {
                                    izuzetak=false;
                                                        std::cin.ignore(100,'\n');

                                    int dan,godina,mjesec;
                                    cout&lt;&lt;"Unesite ime i prezime agenta prodaje: ";
                                    std::getline(std::cin,ime_agenta);
                                    cout&lt;&lt;"Unesite datum prodaje (formata d/m/g): ";
                                    std::getline(std::cin,datum_prodaje);
                                    cout&lt;&lt;"Unesite cijenu stana: ";
                                    cin&gt;&gt;cijena_stana;
                                    try {
                                        godina = std::stoi ( datum_prodaje.substr( 5, 4 ));
                                        dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                        mjesec = std::stoi ( datum_prodaje.substr( 3, '/' ));
                                        if(godina-1000&lt;0)
                                            throw;

                                    } catch(...) {
                                        try {
                                            godina = std::stoi ( datum_prodaje.substr( 6, 4 ));
                                            dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                            mjesec = std::stoi ( datum_prodaje.substr( 3, '/' ));
                                            if(godina-1000&lt;0)
                                                throw;

                                        } catch(...) {
                                            try {
                                                godina = std::stoi ( datum_prodaje.substr( 5, 4 ));
                                                dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                                mjesec = std::stoi ( datum_prodaje.substr( 2, '/' ));
                                                if(godina-1000&lt;0)
                                                    throw;
                                            }

                                            catch(...) {
                                                godina = std::stoi ( datum_prodaje.substr( 4, 4 ));
                                                dan = std::stoi ( datum_prodaje.substr( 0, '/' ));
                                                mjesec = std::stoi ( datum_prodaje.substr( 2, '/' ));

                                            }
                                        }

                                    }
                                    Datum D1(dan,mjesec,godina);
                                    cout&lt;&lt;"Odaberite kupca. Dostupni kupci su:"&lt;&lt;endl;

                                    int indeks_kupca;
<a name="22"></a><font color="#0000FF"><a href="match224-0.html#22" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                                    for(int i=0; i&lt;stanovi.size(); i++) {
                                        cout&lt;&lt;" "&lt;&lt;i+1&lt;&lt;" - ";
                                        kupci[i].Ispisi();
                                    }
                                    cin &gt;&gt; indeks_kupca;
</font>
                                    cout&lt;&lt;"Odaberite stan. Dostupni stanovi su:"&lt;&lt;endl;
                                    int indeks_stana;
<a name="23"></a><font color="#00FFFF"><a href="match224-0.html#23" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                                    for(int i=0; i&lt;stanovi.size(); i++) {
                                        cout&lt;&lt;" "&lt;&lt;i+1&lt;&lt;" - ";
                                        stanovi[i].Ispisi();
                                    }
                                    cin &gt;&gt; indeks_stana;
</font>                                    prodaja.RegistrirajProdaju(ime_agenta,cijena_stana,D1,kupci[indeks_kupca-1],stanovi[indeks_stana-1]);

                                }

                            }  catch(std::logic_error e) {
                                izuzetak=true;
                                cout&lt;&lt;"Izuzetak: "&lt;&lt;e.what()&lt;&lt;". Molimo unesite opet."&lt;&lt;endl;
                            }
                        } while(izuzetak);
                        if(opcija!=3) cout&lt;&lt;"Prodaja uspjesno dodana!"&lt;&lt;endl;
                    
                    }}
                }
            }
        }
    }



    cout&lt;&lt;endl&lt;&lt;endl&lt;&lt;endl&lt;&lt;"Dovidjenja!";
    return 0;
}
</pre>
</body>
</html>
