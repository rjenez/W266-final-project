<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student4599.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student5470.cpp<p></p><pre>
/B 2016/2017, Zadaća 4, Zadatak 3
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;

bool dat(int d,int  m, int g)
{
    if(m&gt;12 || m&lt;=0 || d&lt;=0) return false;
    if((m==1 || m==3 || m==5 || m==7 || m==8|| m==10|| m==12)&amp;&amp;d&gt;31) return false;
    if((m==4 || m==6 || m==9 || m==11)&amp;&amp;d&gt;30) return false;
    if((g%400==0 || (g%4==0 &amp;&amp; g%100!=0))&amp;&amp;d&gt;29&amp;&amp;m==2) return false;
    if(d&gt;28&amp;&amp;m==2&amp;&amp;!(g%400==0 || (g%4==0 &amp;&amp; g%100!=0))) return false;
    return true;
}

class Datum
{
    int d,m,g;
public:
    Datum(int dan, int mjesec, int godina)
    {
        if(!dat(dan,mjesec,godina)) throw std::domain_error("Neispravan datum");
        d=dan,m=mjesec,g=godina;
    }
    void Postavi(int dan, int mjesec, int godina)
    {
        if(!dat(dan,mjesec,godina)) throw std::domain_error("Neispravan datum");
        d=dan,m=mjesec,g=godina;
    }
    int DajDan() const{return d;}
    int DajMjesec() const{return m;}
<a name="11"></a><font color="#00FF00"><a href="match383-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    int DajGodinu() const{return g;}
    void Ispisi() const{std::cout &lt;&lt; d &lt;&lt; "/" &lt;&lt; m &lt;&lt; "/" &lt;&lt;g;}
};

class Kupac
{
    Datum dr;
</font>    std::string ip;
public:
    Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja):dr(datum_rodjenja)
    {
        if(std::any_of(ime_i_prezime.begin(),ime_i_prezime.end(),[](char x){return (x!='-'&amp;&amp;x!=' '&amp;&amp;x!=39&amp;&amp;(x&lt;'A'||x&gt;'z'||(x&lt;'a'&amp;&amp;x&gt;'Z')));})) throw std::domain_error("Neispravno ime i prezime");
        ip=ime_i_prezime;
    }
    void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja)
    {
        dr.Postavi(datum_rodjenja.DajDan(),datum_rodjenja.DajMjesec(),datum_rodjenja.DajGodinu());
        if(std::any_of(ime_i_prezime.begin(),ime_i_prezime.end(),[](char x){return (x!='-'&amp;&amp;x!=' '&amp;&amp;x!=39&amp;&amp;(x&lt;'A'||x&gt;'z'||(x&lt;'a'&amp;&amp;x&gt;'Z')));})) throw std::domain_error("Neispravno ime i prezime");
        ip=ime_i_prezime;
    }
    std::string DajImePrezime() const{return ip;}
    Datum DajDatumRodjenja() const{return dr;}
    void Ispisi() const{std::cout &lt;&lt; ip &lt;&lt; " (";dr.Ispisi();std::cout &lt;&lt; ")";}
};

class Stan
{
    std::string ad;
    int sp,bs;
    bool n;
    double kv;
public:
<a name="0"></a><font color="#FF0000"><a href="match383-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten,double kvadratura)
    {
        if(sprat&lt;0||broj_soba&lt;=0||kvadratura&lt;=0) throw std::domain_error("Neispravan unos podataka");
        ad=adresa;sp=sprat;bs=broj_soba;n=namjesten;kv=kvadratura;
    }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba,bool namjesten, double kvadratura)
</font>    {
        if(sprat&lt;0||broj_soba&lt;=0||kvadratura&lt;=0) throw std::domain_error("Neispravan unos podataka");
        ad=adresa;sp=sprat;bs=broj_soba;n=namjesten;kv=kvadratura;
    }
    std::string DajAdresu() const{return ad;}
<a name="1"></a><font color="#00FF00"><a href="match383-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    int DajSprat() const{return sp;}
    int DajBrojSoba() const{return bs;}
    bool DajNamjesten() const{return n;}
    double DajKvadraturu() const{return kv;}
    void Ispisi() const;
};

class Prodaja
{
    std::string ip;
    double cs;
    Datum dp;
    Kupac kp;
    Stan st;
</font>public:
<a name="4"></a><font color="#FF00FF"><a href="match383-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,const Stan &amp;kupljeni_stan):dp(datum_prodaje),kp(kupac_stana),st(kupljeni_stan)
    {
        ip=ime_agenta_prodaje;cs=cijena_stana;
    }
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,int dan_prodaje, int mjesec_prodaje, int godina_prodaje,std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca,const std::string &amp;adresa_stana, int sprat_stana, int broj_soba,bool namjesten_stan, double broj_kvadrata):dp(dan_prodaje,mjesec_prodaje,godina_prodaje),kp(ime_kupca,datum_rodjenja_kupca),st(adresa_stana,sprat_stana,broj_soba,namjesten_stan,broj_kvadrata)
</font>    {
        ip=ime_agenta_prodaje;cs=cijena_stana;
    }
    void PromijeniKupca(const Kupac &amp;novi_kupac){kp.Postavi(novi_kupac.DajImePrezime(),novi_kupac.DajDatumRodjenja());} 
    void PromijeniStan(const Stan &amp;novi_stan){st.Postavi(novi_stan.DajAdresu(),novi_stan.DajSprat(),novi_stan.DajBrojSoba(),novi_stan.DajNamjesten(),novi_stan.DajKvadraturu());}
    void PromijeniDatumKupovine(const Datum &amp;novi_datum){dp.Postavi(novi_datum.DajDan(),novi_datum.DajMjesec(),novi_datum.DajGodinu());}
<a name="2"></a><font color="#0000FF"><a href="match383-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    void PromijeniAgenta(const std::string &amp;ime_agenta_prodaje){ip=ime_agenta_prodaje;}
    void PromijeniCijenuProdaje(const double &amp;nova_cijena){cs=nova_cijena;}
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImeAgenta() const{return ip;}
    std::string DajImeKupca() const{return kp.DajImePrezime();}
</font>    Datum DajDatumProdaje() const{return dp;}
    double DajCijenuStana() const{return cs;}
    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
    friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2);
    void Ispisi() const;
};

class Prodaje
{
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; pok;
public:
explicit Prodaje(int max_broj_prodaja)
    {
        pok.resize(max_broj_prodaja);
    }
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
    Prodaje(const Prodaje &amp;prodaje);
    Prodaje(Prodaje &amp;&amp;prodaje);
    Prodaje &amp;operator =(const Prodaje &amp;prodaje)
    {
        for(int i=0;i&lt;prodaje.pok.size();i++) pok.push_back(std::make_shared&lt;Prodaja&gt;(*prodaje.pok[i]));
        return *this;
    }
    Prodaje &amp;operator =(Prodaje &amp;&amp;prodaje)
    {
        for(int i=0;i&lt;prodaje.pok.size();i++) pok[i]=prodaje.pok[i];
        return *this;
    }
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje,double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,const Stan &amp;kupljeni_stan)
    {
        pok.resize(pok.size()+1);
        pok[pok.size()-1]=std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje,cijena_stana,datum_prodaje,kupac_stana,kupljeni_stan);
    }
<a name="13"></a><font color="#00FFFF"><a href="match383-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje,double cijena_stana, int dan_prodaje,int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca,const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata)
    {
        pok.resize(pok.size()+1);
</font>        pok[pok.size()-1]=std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje,cijena_stana,dan_prodaje,mjesec_prodaje,godina_prodaje,ime_kupca,datum_rodjenja_kupca,adresa_stana,sprat_stana,broj_soba,namjesten_stan,broj_kvadrata);
    }
    void RegistrirajProdaju(Prodaja *prodaja)
    {
        pok.push_back(std::make_shared&lt;Prodaja&gt;(*prodaja));
    }
    int DajBrojProdaja() const{return pok.size();}
<a name="14"></a><font color="#FF00FF"><a href="match383-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    int DajBrojProdajaNaDatum(const Datum &amp;datum) const {return std::count_if(pok.begin(),pok.end(),[datum](std::shared_ptr&lt;Prodaja&gt; p){return p-&gt;DajDatumProdaje().DajDan()==datum.DajDan()&amp;&amp;p-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec()&amp;&amp;p-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu();});}
</font><a name="15"></a><font color="#FF0000"><a href="match383-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const {return std::count_if(pok.begin(),pok.end(),[ime_agenta](std::shared_ptr&lt;Prodaja&gt; p){return p-&gt;DajImeAgenta()==ime_agenta;});}
</font><a name="16"></a><font color="#00FF00"><a href="match383-0.html#16" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    Prodaja &amp;DajNajranijuProdaju(){return **std::max_element(pok.begin(),pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return ProdatPrije(*p1,*p2);});}
</font><a name="17"></a><font color="#0000FF"><a href="match383-0.html#17" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    Prodaja DajNajranijuProdaju() const{return **std::max_element(pok.begin(),pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return ProdatPrije(*p1,*p2);});}
</font><a name="18"></a><font color="#00FFFF"><a href="match383-0.html#18" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    Prodaja &amp;DajNajskupljuProdaju(){return **std::max_element(pok.begin(),pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return SkupljiStan(*p1,*p2);});}
</font><a name="19"></a><font color="#FF00FF"><a href="match383-0.html#19" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    Prodaja DajNajskupljuProdaju() const{return **std::max_element(pok.begin(),pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return SkupljiStan(*p1,*p2);});}
</font>    void IsprazniKolekciju(){pok.resize(0);}
    void ObrisiNajranijuProdaju();//
    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta);//
    void ObrisiProdajeNaDatum(const Datum &amp;datum);//
    void IspisiProdajeNaDatum(const Datum &amp;datum) const;//
    void IspisiSveProdaje() const;
    Prodaja &amp;DajProdaju(int ind){if(ind&gt;=pok.size()) throw 2;return *pok[ind];}
};

int main ()
{
    std::cout &lt;&lt; "Dobrodosli!\n \n ";
    int a,z;
    Prodaje pr(0);
    std::vector&lt;Stan&gt; st;
    std::vector&lt;Kupac&gt; kup;
    while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - kraj\n 1 - uredjivanje stanova\n 2 - uredjivanje kupaca\n 3 - uredjivanje prodaja\n",std::cin &gt;&gt;a,a)
    {
        if(a==1)
        {
            while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - dodavanje stana\n 2 - uredjivanje stanova\n 3 - ispis svih stanova\n 4 - kraj\n",std::cin &gt;&gt; z, z)
            {
                if(z==1)
                {
                    label:
                    try
                    {
                        std::string adr;
                        int b,c,e;
                        double d;
                        std::cout &lt;&lt; "Unesite adresu: ";
                        char p;
                        if(p=std::cin.peek(),p=='\n') p=getchar();
                        std::getline(std::cin,adr);
                        std::cout &lt;&lt; "Unesite sprat: ";
                        std::cin &gt;&gt; b;
                        std::cout &lt;&lt; "Unesite broj soba: ";
<a name="7"></a><font color="#0000FF"><a href="match383-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                        std::cin &gt;&gt; c;
                        std::cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                        std::cin &gt;&gt; e;
                        std::cout &lt;&lt; "Unesite kvadraturu: ";
                        std::cin &gt;&gt; d;
                        if(e!=0 &amp;&amp; e!=1) throw std::domain_error("Neispravan unos podataka");
</font>                        Stan s(adr,b,c,e,d);
                        st.push_back(s);
                        std::cout &lt;&lt; "Stan je uspjesno dodan!\n";
                    }
                    catch(std::domain_error x)
                    {
                        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                        goto label;
                    }
                }
                if(z==3)
                {
<a name="8"></a><font color="#00FFFF"><a href="match383-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                    for(int i=0;i&lt;st.size();i++)
                    {
                        std::cout &lt;&lt; i+1 &lt;&lt; ". ";
                        st[i].Ispisi();
                        std::cout &lt;&lt; "\n";
</font>                    }
                }
                if(z==2)
                {
                    int n,m;
                    std::cout &lt;&lt;"Odaberite stan. Dostupni stanovi su:\n";
                    for(int i=0;i&lt;st.size();i++)
                    {
<a name="9"></a><font color="#FF00FF"><a href="match383-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                        std::cout &lt;&lt;" " &lt;&lt; i+1 &lt;&lt; " - ";
                        st[i].Ispisi();
                    }
                    std::cin &gt;&gt; n;
                    std::cout &lt;&lt; "Odaberite polje koje zelite urediti:\n 0 - nazad\n 1 - adresa\n 2 - sprat\n 3 - broj soba\n 4 - da li je stan namjesten\n 5 - kvadratura\n 6 - sve\n";
</font>                    std::cin &gt;&gt; m;
                    std::string adr=st[n-1].DajAdresu();
                    int b=st[n-1].DajSprat(),c=st[n-1].DajBrojSoba(),e=st[n-1].DajNamjesten();
                    double d=st[n-1].DajKvadraturu();
                    label2:
                    try
                    {
                        if(m==1 || m==6)
                        {
                            char p;
                            std::cout &lt;&lt; "Unesite adresu: ";
                            if(p=std::cin.peek(),p=='\n') p=getchar();
                            std::getline(std::cin,adr);
                        }
                        if(m==2 || m==6)
                        {
                            std::cout &lt;&lt; "Unesite sprat: ";
                            std::cin &gt;&gt; b;
                        }
                        if(m==3 || m==6)
                        {
                            std::cout &lt;&lt; "Unesite broj soba: ";
                            std::cin &gt;&gt; c;
                        }
                        if(m==4 || m==6)
                        {
                            std::cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                            std::cin &gt;&gt; e;
                        }
                        if(m==5 ||m==6)
                        {
                            std::cout &lt;&lt; "Unesite kvadraturu: ";
                            std::cin &gt;&gt; d;
                        }
                        st[n-1].Postavi(adr,b,c,e,d);
                        std::cout &lt;&lt;"Stan je uspjesno izmijenjen!\n";
                    }
                    catch(std::domain_error x)
                    {
                        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                        goto label2;
                    }
                }
                if(z==4) goto kraj;
            }
        }
        else if(a==2)
        {
            while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - dodavanje kupca\n 2 - uredjivanje kupaca\n 3 - ispis svih kupaca\n 4 - kraj\n",std::cin &gt;&gt;z,z)
            {
                if(z==1)
                {
                    label3:
                    try
                    {
                        std::string ip;
                        int d,m,g;
                        std::cout &lt;&lt; "Unesite ime i prezime kupca: ";
                        char p;
                        if(p=std::cin.peek(),p=='\n') p=getchar();
                        std::getline(std::cin,ip);
<a name="10"></a><font color="#FF0000"><a href="match383-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                        std::cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): ";
                        std::cin &gt;&gt; d &gt;&gt; p &gt;&gt; m &gt;&gt; p &gt;&gt; g;
                        Kupac k(ip,Datum(d,m,g));
</font>                        kup.push_back(k);
                        std::cout &lt;&lt; "Kupac je uspjesno dodan!\n";
                    }
                    catch(std::domain_error x)
                    {
                        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                        goto label3;
                    }
                }
                if(z==3)
                {
                    for(int i=0;i&lt;kup.size();i++)
                    {
                        kup[i].Ispisi();
                        std::cout &lt;&lt; "\n";
                    }
                }
                if(z==2)
                {
                    int n;
                    std::cout &lt;&lt;"Odaberite kupca kojeg zelite urediti. Dostupni kupci su:\n";
                    for(int i=0;i&lt;kup.size();i++)
                    {
                        std::cout &lt;&lt;" " &lt;&lt; i+1 &lt;&lt; " - ";
                        kup[i].Ispisi();
                        std::cout &lt;&lt; "\n";
                    }
                    std::cin &gt;&gt; n;
                    label4:
                    try
                    {
                        std::string ip;
                        int d,m,g;
                        std::cout &lt;&lt; "Unesite ime i prezime kupca: ";
                        char p;
                        if(p=std::cin.peek(),p=='\n') p=getchar();
                        std::getline(std::cin,ip);
                        std::cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): ";
                        std::cin &gt;&gt; d &gt;&gt; p &gt;&gt; m &gt;&gt; p &gt;&gt; g;
                        kup[n-1].Postavi(ip,Datum(d,m,g));
                        std::cout &lt;&lt;"Kupac je uspjesno izmijenjen!\n";
                    }
                    catch(std::domain_error x)
                    {
                        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                        goto label4;
                    }
                }
                if(z==4) goto kraj;
            }
        }
        else if(a==3)
        {
            while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - dodavanje prodaje\n 2 - uredjivanje prodaje\n 3 - ispis prodaja\n 4 - brisanje prodaja\n 5 - kraj\n",std::cin &gt;&gt;z,z)
            {
                if(z==5) goto kraj;
                if(z==1)
                {
                    int b;
                    while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - dodavanje potpuno nove prodaje\n 2 - dodavanje nove prodaje na osnovu arhive\n 3 - kraj\n",std::cin &gt;&gt;b,b)
                    {
                        if(b==1)
                        {
                            label5:
                            try
                            {
                                std::string ip,ipk,adr;
                                int d,m,g,dk,mk,gk,sp,so,na;
                                double c,kv;
                                std::cout &lt;&lt; "Unesite ime i prezime agenta prodaje: ";
                                char p;
                                if(p=std::cin.peek(),p=='\n') p=getchar();
                                std::getline(std::cin,ip);
                                std::cout &lt;&lt; "Unesite datum prodaje (formata d/m/g): ";
                                std::cin &gt;&gt; d &gt;&gt; p &gt;&gt; m &gt;&gt; p &gt;&gt; g;
                                std::cout &lt;&lt; "Unesite cijenu stana: ";
                                std::cin &gt;&gt; c;
                                std::cout &lt;&lt; "Unesite ime kupca: ";
                                if(p=std::cin.peek(),p=='\n') p=getchar();
                                std::getline(std::cin,ipk);
                                std::cout &lt;&lt; "Unesite datum rodjenja kupca (formata d/m/g): ";
                                std::cin &gt;&gt; dk &gt;&gt; p &gt;&gt; mk &gt;&gt; p &gt;&gt; gk;
                                Kupac k(ipk,Datum(dk,mk,gk));
                                std::cout &lt;&lt; "Unesite adresu: ";
                                if(p=std::cin.peek(),p=='\n') p=getchar();
                                std::getline(std::cin,adr);
                                std::cout &lt;&lt; "Unesite sprat: ";
                                std::cin &gt;&gt; sp;
                                std::cout &lt;&lt; "Unesite broj soba: ";
                                std::cin &gt;&gt; so;
                                std::cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                                std::cin &gt;&gt; na;
                                std::cout &lt;&lt; "Unesite kvadraturu: ";
                                std::cin &gt;&gt; kv;
                                if(na!=0 &amp;&amp; na!=1) throw std::domain_error("Neispravan unos podataka");
                                Stan s(adr,sp,so,na,kv);
                                st.push_back(s);
                                kup.push_back(k);
                                pr.RegistrirajProdaju(ip,c,Datum(d,m,g),k,s);
                                std::cout &lt;&lt; "Prodaja uspjesno dodana!\n";
                            }
                            catch(std::domain_error x)
                            {
                                std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                                goto label5;
                            }
                        }
                        if(b==3) goto kraj;
                        if(b==2)
                        {
                            label6:
                            try
                            {
                                std::string ip,ipk,adr;
                                int d,m,g;
                                double c;
                                std::cout &lt;&lt; "Unesite ime i prezime agenta prodaje: ";
                                char p;
                                if(p=std::cin.peek(),p=='\n') p=getchar();
                                std::getline(std::cin,ip);
                                std::cout &lt;&lt; "Unesite datum prodaje (formata d/m/g): ";
                                std::cin &gt;&gt; d &gt;&gt; p &gt;&gt; m &gt;&gt; p &gt;&gt; g;
                                std::cout &lt;&lt; "Unesite cijenu stana: ";
                                std::cin &gt;&gt; c;
                                int q,n;
                                std::cout &lt;&lt;"Odaberite kupca. Dostupni kupci su:\n";
                                for(int i=0;i&lt;kup.size();i++)
                                {
                                    std::cout &lt;&lt;" " &lt;&lt; i+1 &lt;&lt; " - ";
                                    kup[i].Ispisi();
                                    std::cout &lt;&lt; "\n";
                                }
                                std::cin &gt;&gt; q;
                                std::cout &lt;&lt;"Odaberite stan. Dostupni stanovi su:\n";
                                for(int i=0;i&lt;st.size();i++)
                                {
                                    std::cout &lt;&lt;" " &lt;&lt; i+1 &lt;&lt; " - ";
                                    st[i].Ispisi();
                                    std::cout &lt;&lt; "\n";
                                }
                                std::cin &gt;&gt; n;
<a name="12"></a><font color="#0000FF"><a href="match383-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                                pr.RegistrirajProdaju(ip,c,Datum(d,m,g),kup[q-1],st[n-1]);
</font>                                std::cout &lt;&lt; "Prodaja uspjesno dodana!\n";
                            }
                            catch(std::domain_error x)
                            {
                                std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                                goto label6;
                            }
                        }
                    }
                }
                if(z==2)
                {
                    int n;
                    std::cout &lt;&lt; "Odaberite prodaju koju želite urediti. Dostupne prodaje su: \n";
                    for(int i=0;i&lt;pr.DajBrojProdaja();i++)
                    {
                        std::cout &lt;&lt;i+1 &lt;&lt; ".\n";
                        pr.DajProdaju(i).Ispisi();
                    }
                    std::cin &gt;&gt; n;
                    Prodaja &amp;p=pr.DajProdaju(n-1);
                    std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - izmjena agenta\n 2 - izmjena datuma prodaje\n 3 - izmjena kupca\n 4 - izmjena stana\n 5 - izmjena cijene stana\n";
                    std::cin &gt;&gt; n;
                    if(n==1)
                    {
                        std::string ip;
                        std::cout &lt;&lt; "Unesite ime i prezime agenta prodaje: ";
                        char q;
                        if(q=std::cin.peek(),q=='\n') q=getchar();
                        std::getline(std::cin,ip);
                        p.PromijeniAgenta(ip);
                    }
                    if(n==2)
                    {
                        label7:
                        try
                        {
                            int d,m,g;
                            char c;
                            std::cout &lt;&lt; "Unesite datum prodaje (formata d/m/g): ";
                            std::cin &gt;&gt; d &gt;&gt; c &gt;&gt; m &gt;&gt; c &gt;&gt; g;
                            p.PromijeniDatumKupovine(Datum(d,m,g));
                        }
                        catch(std::domain_error x)
                        {
                            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                            goto label7;
                        }
                    }
                    if(n==3)
                    {
                        int b;
                        std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - odabir postojeceg kupca\n 2 - dodavanje novog kupca\n";
                        std::cin &gt;&gt; b;
                        if(b==1)
                        {
                            int q;
                            std::cout &lt;&lt;"Odaberite kupca. Dostupni kupci su:\n";
                            for(int i=0;i&lt;kup.size();i++)
                            {
                                std::cout &lt;&lt;" " &lt;&lt; i+1 &lt;&lt; " - ";
                                kup[i].Ispisi();
                                std::cout &lt;&lt; "\n";
                            }
                            std::cin &gt;&gt;q;
                            p.PromijeniKupca(kup[q-1]);
                        }
                        if(b==2)
                        {
                            label8:
                            try
                            {
                                std::string ip;
                                int d,m,g;
                                std::cout &lt;&lt; "Unesite ime i prezime kupca: ";
                                char q;
                                if(q=std::cin.peek(),q=='\n') q=getchar();
                                std::getline(std::cin,ip);
                                std::cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): ";
                                std::cin &gt;&gt; d &gt;&gt; q &gt;&gt; m &gt;&gt; q &gt;&gt; g;
                                kup[n-1].Postavi(ip,Datum(d,m,g));
                                p.PromijeniKupca(Kupac(ip,Datum(d,m,g)));
                            }
                            catch(std::domain_error x)
                            {
                                std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                                goto label8;
                            }
                        }
                    }
                    if(n==4)
                    {
                        int b;
                        std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - odabir postojeceg stana\n 2 - dodavanje novog stana\n";
                        std::cin &gt;&gt; b;
                        if(b==1)
                        {
                            int q;
                            std::cout &lt;&lt;"Odaberite stan. Dostupni stanovi su:\n";
                            for(int i=0;i&lt;st.size();i++)
                            {
                                std::cout &lt;&lt;" " &lt;&lt; i+1 &lt;&lt; " - ";
                                st[i].Ispisi();
                                std::cout &lt;&lt; "\n";
                            }
                            std::cin &gt;&gt;q;
                            p.PromijeniStan(st[q-1]);
                        }
                        if(b==2)
                        {
                            label9:
                            try
                            {
                                std::string adr;
                                int f,c,e;
                                double d;
                                std::cout &lt;&lt; "Unesite adresu: ";
                                char q;
                                if(q=std::cin.peek(),q=='\n') q=getchar();
                                std::getline(std::cin,adr);
                                std::cout &lt;&lt; "Unesite sprat: ";
                                std::cin &gt;&gt; f;
                                std::cout &lt;&lt; "Unesite broj soba: ";
                                std::cin &gt;&gt; c;
                                std::cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                                std::cin &gt;&gt; e;
                                std::cout &lt;&lt; "Unesite kvadraturu: ";
                                std::cin &gt;&gt; d;
                                if(e!=0 &amp;&amp; e!=1) throw std::domain_error("Neispravan unos podataka");
                                Stan s(adr,f,c,e,d);
                                st.push_back(s);
                                p.PromijeniStan(s);
                            }
                            catch(std::domain_error x)
                            {
                                std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                                goto label9;
                            }
                        }
                    }
                    if(n==5)
                    {
                        double cj;
                        std::cout &lt;&lt; "Unesite cijenu stana: ";
                        std::cin &gt;&gt; cj;
                        p.PromijeniCijenuProdaje(cj);
                    }
                    std::cout &lt;&lt; "Prodaja je uspjesno izmijenjena!\n";
                }
                if(z==3)
                {
                    int b;
                    while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - ispis svih prodaja\n 2 - ispis prodaja na datum\n 3 - ispis najranije prodaje\n 4 - ispis najskuplje prodaje\n 5 - ispis broja prodaja\n 6 - ispis broja prodaja po datumu\n 7 - ispis broja prodaja po agentu\n 8 - kraj\n",std::cin &gt;&gt;b,b)
                    {
                        if(b==8) goto kraj;
                        if(b==1)
                        {
                            pr.IspisiSveProdaje();
                        }
                        if(b==2)
                        {
                            label10:
                            try
                            {
                                int d,m,g;
                                std::cout &lt;&lt; "Unesite datum (d/m/g): ";
                                char q;
                                std::cin &gt;&gt; d &gt;&gt; q &gt;&gt; m &gt;&gt; q &gt;&gt; g;
                                std::cout &lt;&lt; "Prodaje na datum 29/5/2017 su: \n";
                                pr.IspisiProdajeNaDatum(Datum(d,m,g));
                            }
                            catch(std::domain_error x)
                            {
                                std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ". Molimo unesite opet.\n";
                                goto label10;
                            }
                        }
                        if(b==3)
                        {
                            pr.DajNajranijuProdaju().Ispisi();
                        }
                        if(b==4)
                        {
                            pr.DajNajskupljuProdaju().Ispisi();
                        }
                        if(b==5)
                        {
                            std::cout &lt;&lt; "Broj prodaja: " &lt;&lt; pr.DajBrojProdaja();
                        }
                        if(b==6)
                        {
                            int d,m,g;
                            std::cout &lt;&lt; "Unesite datum (d/m/g): ";
                            char q;
<a name="3"></a><font color="#00FFFF"><a href="match383-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                            std::cin &gt;&gt; d &gt;&gt; q &gt;&gt; m &gt;&gt; q &gt;&gt; g;
                            std::cout &lt;&lt; "Broj prodaja na uneseni datum: " &lt;&lt; pr.DajBrojProdajaNaDatum(Datum(d,m,g));
</font>                        }
                        if(b==7)
                        {
                            std::string ip;
                            std::cout &lt;&lt; "Unesite ime agenta: ";
                            char q;
                            if(q=std::cin.peek(),q=='\n') q=getchar();
                            std::getline(std::cin,ip);
                            std::cout &lt;&lt; "Broj prodaja: " &lt;&lt; pr.DajBrojProdajaOdAgenta(ip);
                        }
                    }
                }
                if(z==4)
                {
                    int b;
                    while(std::cout &lt;&lt; "\nIzaberite opciju:\n 0 - nazad\n 1 - brisanje najranije prodajee\n 2 - brisanje prodaja agenta\n 3 - brisanje prodaja po datumu\n 4 - brisanje svih prodaja\n",std::cin &gt;&gt;b,b)
                    {
                        if(b==1)
                        {
                            try
                            {
                                pr.ObrisiNajranijuProdaju();
                                std::cout &lt;&lt; "Najranija prodaja je obrisana!\n";
                            }
                            catch(std::range_error x)
                            {
                                std::cout &lt;&lt; "Izuzetak: " &lt;&lt; x.what() &lt;&lt; ".\n";
                            }
                        }
                        if(b==2)
                        {
                            std::string ip;
                            std::cout &lt;&lt; "Unesite ime agenta: ";
                            char q;
                            if(q=std::cin.peek(),q=='\n') q=getchar();
                            std::getline(std::cin,ip);
                            pr.ObrisiProdajeAgenta(ip);
                            std::cout &lt;&lt; "Sve prodaje tog agenta su obrisane.\n";
                        }
                        if(b==3)
                        {
                            int d,m,g;
                            std::cout &lt;&lt; "Unesite datum (d/m/g): ";
                            char q;
<a name="6"></a><font color="#00FF00"><a href="match383-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                            std::cin &gt;&gt; d &gt;&gt; q &gt;&gt; m &gt;&gt; q &gt;&gt; g;
                            pr.ObrisiProdajeNaDatum(Datum(d,m,g));
                            std::cout &lt;&lt; "Sve prodaje na taj datum su obrisane.\n";
</font>                        }
                        if(b==4)
                        {
                            pr.IsprazniKolekciju();
                            std::cout &lt;&lt; "Sve prodaje su obrisane.\n";
                        }
                    }
                }
            }
        }
    }
    kraj:
    std::cout &lt;&lt; "\nDovidjenja!";
	return 0;
}
void Stan::Ispisi() const
{
    std::cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; ad &lt;&lt; " na " &lt;&lt; sp &lt;&lt; ". spratu i ima " &lt;&lt; bs &lt;&lt; " sob";
    if(bs%10==1 &amp;&amp; bs%100!=11) std::cout &lt;&lt; "u";
    else if((bs%10==4||bs%10==3||bs%10==2) &amp;&amp; (bs%100!=12 &amp;&amp;bs%100!=13&amp;&amp;bs%100!=14)) std::cout &lt;&lt; "e";
    else std::cout &lt;&lt; "a";
    std::cout &lt;&lt; ". Kvadratura stana je "&lt;&lt;kv &lt;&lt; " (m^2) i stan ";
    if(!n) std::cout &lt;&lt; "ni";
    std::cout &lt;&lt; "je namjesten.\n";
}

bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
    return p1.DajCijenuStana()&gt;p2.DajCijenuStana();
}
bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
    if(p1.DajDatumProdaje().DajGodinu()&lt;p2.DajDatumProdaje().DajGodinu()) return true;
    if(p1.DajDatumProdaje().DajGodinu()&gt;p2.DajDatumProdaje().DajGodinu()) return false;
    if(p1.DajDatumProdaje().DajMjesec()&lt;p2.DajDatumProdaje().DajMjesec()) return true;
    if(p1.DajDatumProdaje().DajMjesec()&gt;p2.DajDatumProdaje().DajMjesec()) return false;
    if(p1.DajDatumProdaje().DajDan()&lt;p2.DajDatumProdaje().DajDan()) return true;
    return false;
}
void Prodaja::Ispisi() const
{
    std::cout &lt;&lt; "Ime agenta:                     " &lt;&lt; DajImeAgenta() &lt;&lt; "\nIme kupca:                      ";
    kp.Ispisi();
    std::cout &lt;&lt; "\nZakazani datum prodaje:         ";
    dp.Ispisi();
    std::cout &lt;&lt; "\nCijena stana:                   " &lt;&lt; cs &lt;&lt; "\nInformacije o stanu: \n";
    st.Ispisi();
}
void Prodaja::PomjeriDanUnaprijed()
{
    try
    {
        dp.Postavi(dp.DajDan()+1,dp.DajMjesec(),dp.DajGodinu());
    }
    catch(...)
    {
        try
        {
            dp.Postavi(1,dp.DajMjesec()+1,dp.DajGodinu());
        }
        catch(...)
        {
            dp.Postavi(1,1,dp.DajGodinu()+1);
        }
    }
}
void Prodaja::PomjeriDanUnazad()
{
    try
    {
        dp.Postavi(dp.DajDan()-1,dp.DajMjesec(),dp.DajGodinu());
    }
    catch(...)
    {   
        int a;
        if(dp.DajMjesec()==1) dp.Postavi(31,12,dp.DajGodinu()-1);
        else 
        {
            if(dp.DajMjesec()==2 || dp.DajMjesec()==4||dp.DajMjesec()==6||dp.DajMjesec()==8 ||dp.DajMjesec()==9 ||dp.DajMjesec()==10) a=31;
            else if(dp.DajMjesec()==5 || dp.DajMjesec()==7 || dp.DajMjesec()==10 || dp.DajMjesec()==12) a=30;
            else if(dp.DajMjesec()==3)
            {
                if(dp.DajGodinu()%400==0 || (dp.DajGodinu()%4==0 &amp;&amp; dp.DajGodinu()%100!=0)) a=29;
                else a=28;
            }
            dp.Postavi(a,dp.DajMjesec()-1,dp.DajGodinu());
        }
    }
}

Prodaje::Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja)
{
    for(auto it=spisak_prodaja.begin();it!=spisak_prodaja.end();it++) pok.push_back(std::make_shared&lt;Prodaja&gt;(*it));
}
Prodaje::Prodaje(const Prodaje &amp;prodaje)
{
    for(int i=0;i&lt;prodaje.pok.size();i++) pok.push_back(std::make_shared&lt;Prodaja&gt;(*prodaje.pok[i]));
}
Prodaje::Prodaje(Prodaje &amp;&amp;prodaje)
{
    for(int i=0;i&lt;prodaje.pok.size();i++) pok[i]=prodaje.pok[i];
}
void Prodaje::ObrisiNajranijuProdaju()
{ 
<a name="20"></a><font color="#FF0000"><a href="match383-0.html#20" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    auto pom=*std::max_element(pok.begin(),pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return ProdatPrije(*p1,*p2);});
</font>    std::swap(pom,pok[pok.size()-1]);
    pok.resize(pok.size()-1);
}
void Prodaje::ObrisiProdajeAgenta(const std::string &amp;ime_agenta)
{
    for(int i=0;i&lt;pok.size();i++)
    {
        if(pok[i]-&gt;DajImeAgenta()==ime_agenta)
        {
            for(int k=i;k&lt;pok.size()-1;k++)
            {
                swap(pok[k],pok[k+1]);
            }
            i--;
            pok.resize(pok.size()-1);
        }
    }
}
void Prodaje::ObrisiProdajeNaDatum(const Datum &amp;datum)
{
    for(int i=0;i&lt;pok.size();i++)
    {
        if(pok[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan()&amp;&amp;pok[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec()&amp;&amp;pok[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu())
        {
            for(int k=i;k&lt;pok.size()-1;k++)
            {
                swap(pok[k],pok[k+1]);
            }
            i--;
            pok.resize(pok.size()-1);
        }
    }
}
void Prodaje::IspisiProdajeNaDatum(const Datum &amp;datum) const
{
    Prodaje p(*this);
    std::sort(p.pok.begin(),p.pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return p1-&gt;DajImeKupca()&lt;p2-&gt;DajImeKupca();});
    int pom=1;
    for(int i=0;i&lt;pok.size();i++)
    {
<a name="21"></a><font color="#00FF00"><a href="match383-0.html#21" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        if(pok[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan()&amp;&amp;pok[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec()&amp;&amp;pok[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu())
            std::cout&lt;&lt;"\n" &lt;&lt; pom++ &lt;&lt; ".\n",pok[i]-&gt;Ispisi(),std::cout &lt;&lt; "\n";
</font>    }
}
void Prodaje::IspisiSveProdaje() const
{
    Prodaje pom(*this);
<a name="5"></a><font color="#FF0000"><a href="match383-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    std::sort(pom.pok.begin(),pom.pok.end(),[](std::shared_ptr&lt;Prodaja&gt; p1,std::shared_ptr&lt;Prodaja&gt; p2){return (p1-&gt;DajImeKupca()&lt;p2-&gt;DajImeKupca()&amp;&amp;p1-&gt;DajDatumProdaje().DajDan()==p2-&gt;DajDatumProdaje().DajDan()&amp;&amp;p1-&gt;DajDatumProdaje().DajMjesec()==p2-&gt;DajDatumProdaje().DajMjesec()&amp;&amp;p1-&gt;DajDatumProdaje().DajGodinu()==p2-&gt;DajDatumProdaje().DajGodinu())||ProdatPrije(*p1,*p2);});
</font><a name="5"></a><font color="#FF0000"><a href="match383-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    for(int i=0;i&lt;pok.size();i++) std::cout &lt;&lt;"\n",pom.pok[i]-&gt;Ispisi(),std::cout &lt;&lt; "\n";
</font>}</pre>
</body>
</html>
