<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student4296.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1364.cpp<p></p><pre>
/B 2016/2017, Zadaća 4, Zadatak 4
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;

<a name="0"></a><font color="#FF0000"><a href="match215-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

using std::cin; using std::cout; using std::endl;

class Datum {
    int dan, mjesec, godina;
    public:
    Datum(int dan, int mjesec, int godina) { Postavi(dan, mjesec, godina); }
    void Postavi(int dan, int mjesec, int godina);
    int DajDan() const { return dan; }
    int DajMjesec() const { return mjesec; }
    int DajGodinu() const { return godina; }
</font>    void Ispisi() const { cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina; }
    friend class Kupac;
};

//Metode za klasu Datum
void Datum::Postavi(int d, int m, int g) {
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
    if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m-1])
    throw std::domain_error("Neispravan datum");
    dan = d; mjesec = m; godina = g;
}

class Kupac {
    std::string i_i_p;
    Datum dat_rodj;
    public:
    Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja): 
    dat_rodj(datum_rodjenja.DajDan(), datum_rodjenja.DajMjesec(), datum_rodjenja.DajGodinu()) 
    { Postavi(ime_i_prezime, datum_rodjenja); }
    void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    std::string DajImePrezime() const { return i_i_p; }
    Datum DajDatumRodjenja() const { return dat_rodj; }
    void Ispisi() const { cout &lt;&lt; i_i_p &lt;&lt; "("; dat_rodj.Ispisi(); cout&lt;&lt; ")"; }
};

//Metode za klasu Kupac
void Kupac::Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja)  {
    for (int i=0; i&lt;ime_i_prezime.size(); i++) {
        if (!((ime_i_prezime[i]&gt;='a' &amp;&amp; ime_i_prezime[i]&lt;='z') || (ime_i_prezime[i]&gt;='A' &amp;&amp; ime_i_prezime[i]&lt;='Z') || (ime_i_prezime[i]&gt;='0' &amp;&amp; ime_i_prezime[i]&lt;='9') || ime_i_prezime[i]==' ' || ime_i_prezime[i]=='-' || ime_i_prezime[i]=='\'' ))
        throw std::domain_error ("Neispravno ime i prezime");
    }
    i_i_p=ime_i_prezime;
    dat_rodj=datum_rodjenja;
}

class Stan {
    std::string adresa;
    int sprat, br_soba;
    bool namjesten;
    double kvadratura;
    public:
    Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) { Postavi(adresa, sprat, broj_soba, namjesten, kvadratura); }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
    std::string DajAdresu() const { return adresa; }
    int DajSprat() const { return sprat; }
    int DajBrojSoba() const { return br_soba; }
    bool DajNamjesten() const { return namjesten; }
    double DajKvadraturu() const { return kvadratura; }
    void Ispisi() const { 
        //Je li nova recenica u novom redu?
        cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; adresa &lt;&lt; " na " &lt;&lt; sprat &lt;&lt; ". spratu i ima ";
        if (br_soba==1) cout &lt;&lt; br_soba &lt;&lt; " sobu."; //Ako je zadnja cifra jedan
        if (br_soba==2 || br_soba==3 || br_soba==4) cout &lt;&lt; br_soba &lt;&lt; " sobe."; //Da li ce biti prko 20 soba?
        if (br_soba&gt;=5) cout &lt;&lt; br_soba &lt;&lt; " soba.";
        cout &lt;&lt; "Kvadratura stana je " &lt;&lt; kvadratura &lt;&lt; " (m^2) i stan "; //Provjeri ovo!
        if (DajNamjesten()) cout &lt;&lt;"je namjesten.";
        else cout &lt;&lt; "nije namjesten.";
    }
};

//Metode za klasu Stan
void Stan::Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if (sprat&lt;0 || broj_soba&lt;0 || kvadratura&lt;0) throw std::domain_error ("Neispravan unos podataka");
    Stan::adresa=adresa; Stan::sprat=sprat; br_soba=broj_soba; Stan::namjesten=namjesten; Stan::kvadratura=kvadratura;
}

class Prodaja {
    std::string ime_agenta;
    double cijena;
    Datum dat_pr;
    Kupac kupac;
    Stan stan;
    public:
<a name="5"></a><font color="#FF0000"><a href="match215-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,
    const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,
    const Stan &amp;kupljeni_stan);
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,
    int dan_prodaje, int mjesec_prodaje, int godina_prodaje,
</font>    std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca,
<a name="3"></a><font color="#00FFFF"><a href="match215-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    const std::string &amp;adresa_stana, int sprat_stana, int broj_soba,
    bool namjesten_stan, double broj_kvadrata); 
    void PromijeniKupca(const Kupac &amp;novi_kupac) { kupac =novi_kupac; }
    void PromijeniStan(const Stan &amp;novi_stan) { stan = novi_stan; }
    void PromijeniDatumKupovine(const Datum &amp;novi_datum) { dat_pr=novi_datum; }
</font>    void PromijeniCijenuProdaje(const double &amp;nova_cijena) { cijena = nova_cijena;}
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImeAgenta() const { return ime_agenta; }
    std::string DajImeKupca() const { return kupac.DajImePrezime(); }
    Datum DajDatumProdaje() const { return dat_pr; }
    double DajCijenuStana() const { return cijena; }
<a name="2"></a><font color="#0000FF"><a href="match215-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
    friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2);
    void Ispisi() const;
};

//Metode za klasu Prodaja
Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,
    const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan) : 
</font>    dat_pr(datum_prodaje.DajDan(), datum_prodaje.DajMjesec(), datum_prodaje.DajGodinu()), kupac(kupac_stana.DajImePrezime(), kupac_stana.DajDatumRodjenja()),
    stan(kupljeni_stan.DajAdresu(), kupljeni_stan.DajSprat(), kupljeni_stan.DajBrojSoba(), kupljeni_stan.DajNamjesten(), kupljeni_stan.DajKvadraturu()) {
        //Da li iz konstruktora smijemo pozivati konstruktor?
<a name="16"></a><font color="#00FF00"><a href="match215-0.html#16" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        ime_agenta=ime_agenta_prodaje; cijena=cijena_stana;
}
Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,
    int dan_prodaje, int mjesec_prodaje, int godina_prodaje,
</font>    std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca,
<a name="17"></a><font color="#0000FF"><a href="match215-0.html#17" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    const std::string &amp;adresa_stana, int sprat_stana, int broj_soba,
    bool namjesten_stan, double broj_kvadrata) : dat_pr(dan_prodaje, mjesec_prodaje, godina_prodaje), kupac(ime_kupca, datum_rodjenja_kupca), 
</font>    stan(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata) {
        ime_agenta=ime_agenta_prodaje; cijena=cijena_stana;
}
  // treba podržati i funkcije “PomjeriDanUnaprijed” i “PomjeriDanUnazad” koje pomjeraju zakazani datum prodaje za jedan dan unaprijed odnosno unazad.   
void Prodaja::PomjeriDanUnaprijed() {
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    auto dat(this-&gt;DajDatumProdaje());
    auto dan(dat.DajDan());
    auto mjesec(dat.DajMjesec());
    auto godina(dat.DajGodinu());
    if((godina % 4 == 0 &amp;&amp; godina % 100 != 0) || godina % 400 == 0) broj_dana[1]++; //Ako je prestupna
    if (dan==broj_dana[mjesec-1]) {
        dan=1; 
        if (mjesec==12) {
            mjesec=1; godina++;
        }
        else mjesec++;
    }
    else dan++;
    this-&gt;PromijeniDatumKupovine(Datum(dan, mjesec, godina));
}
void Prodaja::PomjeriDanUnazad() {
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    auto dat(this-&gt;DajDatumProdaje());
    auto dan(dat.DajDan());
    auto mjesec(dat.DajMjesec());
    auto godina(dat.DajGodinu());
    if((godina % 4 == 0 &amp;&amp; godina % 100 != 0) || godina % 400 == 0) broj_dana[1]++; //Ako je prestupna
    if (dan==1) {
        if (mjesec==1) { mjesec=12; godina--; }
        else mjesec--;
        dan=broj_dana[mjesec-1];
    }
    else dan--;
    this-&gt;PromijeniDatumKupovine(Datum(dan, mjesec, godina));
}

bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2) {
    //vraća “true” ukoliko je prva prodaja zakazana prije druge
    if (p1.DajDatumProdaje().DajGodinu() &lt; p2.DajDatumProdaje().DajGodinu()) return true;
    if (p1.DajDatumProdaje().DajGodinu() == p2.DajDatumProdaje().DajGodinu()) {
        if (p1.DajDatumProdaje().DajMjesec() &lt; p2.DajDatumProdaje().DajMjesec()) return true;
        if (p1.DajDatumProdaje().DajMjesec() == p2.DajDatumProdaje().DajMjesec()) {
            if (p1.DajDatumProdaje().DajDan() &lt; p2.DajDatumProdaje().DajDan()) return true; //Ako je ista godina i mjesec
        }
    }
    return false;
}
bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2) {
    if (p1.cijena&gt;p2.cijena) return true;
    return false;
}
void Prodaja::Ispisi() const {
    cout &lt;&lt; std::setw(30) &lt;&lt; "Ime agenta: " &lt;&lt; ime_agenta &lt;&lt; endl;
    cout &lt;&lt; std::setw(30) &lt;&lt; "Ime kupca: ";  kupac.Ispisi(); cout &lt;&lt; endl;
    cout &lt;&lt; std::setw(30) &lt;&lt; "Zakazani datum prodaje: "; dat_pr.Ispisi() ; cout &lt;&lt; endl;
    cout &lt;&lt; std::setw(30) &lt;&lt; "Cijena stana: " &lt;&lt; cijena &lt;&lt; endl;
    cout &lt;&lt; std::setw(30) &lt;&lt; "Informacije o stanu: " &lt;&lt; endl; stan.Ispisi(); cout &lt;&lt; endl;
}

class Prodaje {
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt;prodaje_pok;
    static bool JednakDatum(Datum dat1, Datum dat2);
    public:
    explicit Prodaje(int max_broj_prodaja) { prodaje_pok.resize(max_broj_prodaja); }
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
    //~Prodaje();
    Prodaje(const Prodaje &amp;prodaje);
    Prodaje(Prodaje &amp;&amp;prodaje) = default;
    Prodaje &amp;operator =(const Prodaje &amp;prodaje);
    Prodaje &amp;operator =(Prodaje &amp;&amp;prodaje) = default;
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje,
    double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,
    const Stan &amp;kupljeni_stan);
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje,
    int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca,
    const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,
    int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
    void RegistrirajProdaju(Prodaja *prodaja);
    int DajBrojProdaja() const { return prodaje_pok.size(); }
    int DajBrojProdajaNaDatum(const Datum &amp;datum) const;
    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const;
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const;
    void IsprazniKolekciju();
    void ObrisiNajranijuProdaju();
<a name="8"></a><font color="#00FFFF"><a href="match215-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta); 
    void ObrisiProdajeNaDatum(const Datum &amp;datum);
    void IspisiProdajeNaDatum(const Datum &amp;datum) const;
    void IspisiSveProdaje() const;
};

Prodaje::Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja) {
</font>    prodaje_pok.resize(spisak_prodaja.size());
    std::initializer_list&lt;Prodaja&gt;::iterator it{spisak_prodaja.begin()};
	int i(0);
	while (it!=spisak_prodaja.end()) {
		prodaje_pok[i]=std::make_shared&lt;Prodaja&gt;(*it);
		it++; i++;
    }
}
Prodaje::Prodaje(const Prodaje &amp;prodaje) {
<a name="6"></a><font color="#00FF00"><a href="match215-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    prodaje_pok.resize(prodaje.prodaje_pok.size());
	for (int i=0; i&lt;prodaje.prodaje_pok.size(); i++) 
	 prodaje_pok[i]= std::make_shared&lt;Prodaja&gt;(*prodaje.prodaje_pok[i]);
}
Prodaje &amp;Prodaje::operator =(const Prodaje &amp;prodaje) {
</font><a name="1"></a><font color="#00FF00"><a href="match215-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    prodaje_pok.resize(prodaje.prodaje_pok.size());
    for (int i=0; i&lt;prodaje.prodaje_pok.size(); i++) {
        prodaje_pok[i]=std::make_shared&lt;Prodaja&gt;(*prodaje.prodaje_pok[i]);
    }
	return *this;
</font>}
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,
    const Stan &amp;kupljeni_stan) {
        //Kreiramo novu prodaju
        auto pnp(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, datum_prodaje, kupac_stana, kupljeni_stan));
        prodaje_pok.push_back(pnp);
    }
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje,
    int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca,
    const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,
    int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata) {
<a name="13"></a><font color="#00FFFF"><a href="match215-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

        auto pnp(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, dan_prodaje, mjesec_prodaje, godina_prodaje, ime_kupca, datum_rodjenja_kupca, adresa_stana,
        sprat_stana, broj_soba, namjesten_stan, broj_kvadrata));
</font>        prodaje_pok.push_back(pnp);
}
void Prodaje::RegistrirajProdaju(Prodaja *prodaja) {
    auto pnp (std::make_shared&lt;Prodaja&gt;(*prodaja));
    prodaje_pok.push_back(pnp);

}
<a name="18"></a><font color="#00FFFF"><a href="match215-0.html#18" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

int Prodaje::DajBrojProdajaNaDatum(const Datum &amp;datum) const {
    return std::count_if(prodaje_pok.begin(), prodaje_pok.end(), [datum] (std::shared_ptr&lt;Prodaja&gt; p) -&gt; bool {
</font>        Datum d(p-&gt;DajDatumProdaje());
        if (d.DajDan()==datum.DajDan() &amp;&amp; d.DajMjesec()==datum.DajMjesec() &amp;&amp; d.DajGodinu()==datum.DajGodinu()) return true;
        return false;
    });
}
int Prodaje::DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const {
    return std::count_if(prodaje_pok.begin(), prodaje_pok.end(), [ime_agenta] (std::shared_ptr&lt;Prodaja&gt; p) -&gt; bool {
        auto i_a(p-&gt;DajImeAgenta());
        if (i_a==ime_agenta) return true;
        return false;
    });
}
Prodaja &amp;Prodaje::DajNajranijuProdaju() { //Pazi gdje stavljas &amp;!
<a name="19"></a><font color="#FF00FF"><a href="match215-0.html#19" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    if (prodaje_pok.size()==0) throw std::domain_error ("Nema registriranih prodaja");
    return **(std::min_element(prodaje_pok.begin(), prodaje_pok.end(), [] (std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) -&gt; bool {
</font>        auto dat1(p1-&gt;DajDatumProdaje()), dat2(p2-&gt;DajDatumProdaje());
        if (dat1.DajGodinu()==dat2.DajGodinu()) {
            if (dat1.DajMjesec()==dat2.DajMjesec()) {
                return dat1.DajDan()&lt;dat2.DajDan();
            }
            else return dat1.DajMjesec()&lt;dat2.DajMjesec();
        }
        else return dat1.DajGodinu()&lt;dat2.DajGodinu();
    }));
}
Prodaja Prodaje::DajNajranijuProdaju() const {
    if (prodaje_pok.size()==0) throw std::domain_error ("Nema registriranih prodaja");
    auto p(std::min_element(prodaje_pok.begin(), prodaje_pok.end(), [] (std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) -&gt; bool {
        auto dat1(p1-&gt;DajDatumProdaje()), dat2(p2-&gt;DajDatumProdaje());
        if (dat1.DajGodinu()==dat2.DajGodinu()) {
            if (dat1.DajMjesec()==dat2.DajMjesec()) {
                return dat1.DajDan()&lt;dat2.DajDan();
            }
            else return dat1.DajMjesec()&lt;dat2.DajMjesec();
        }
        else return dat1.DajGodinu()&lt;dat2.DajGodinu();
    }));
    return **p; 
}
Prodaja &amp;Prodaje::DajNajskupljuProdaju() {
    if (prodaje_pok.size()==0) throw std::domain_error ("Nema registriranih prodaja");
    auto p(std::max_element(prodaje_pok.begin(), prodaje_pok.end(), [] (std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) -&gt; bool {
        auto c1(p1-&gt;DajCijenuStana()), c2(p2-&gt;DajCijenuStana());
        return c1&lt;c2;
    }));
    return **p; 
}
Prodaja Prodaje::DajNajskupljuProdaju() const {
    if (prodaje_pok.size()==0) throw std::domain_error ("Nema registriranih prodaja");
    auto p(std::max_element(prodaje_pok.begin(), prodaje_pok.end(), [] (std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) -&gt; bool {
        auto c1(p1-&gt;DajCijenuStana()), c2(p2-&gt;DajCijenuStana());
        return c1&lt;c2;
    }));
    return **p; 
}
void Prodaje::IsprazniKolekciju() {
    for (int i=prodaje_pok.size()-1; i&gt;=0; i--) {
        prodaje_pok[i]=nullptr;
        prodaje_pok.erase(prodaje_pok.begin()+i);
    }
}
void Prodaje::ObrisiNajranijuProdaju() {
    if (prodaje_pok.size()==0) throw std::range_error("Prazna kolekcija");
    for (int i=0; i&lt;prodaje_pok.size(); i++) {
        if (JednakDatum(prodaje_pok[i]-&gt;DajDatumProdaje(), DajNajranijuProdaju().DajDatumProdaje())) {
            prodaje_pok.erase(prodaje_pok.begin()+i);
            return;
        }
    }
}
void Prodaje::ObrisiProdajeAgenta(const std::string &amp;ime_agenta) {
<a name="14"></a><font color="#FF00FF"><a href="match215-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

     if (prodaje_pok.size()==0) return;
     for (int i=0; i&lt;prodaje_pok.size(); i++) {
        if (prodaje_pok[i]-&gt;DajImeAgenta()==ime_agenta) {
            prodaje_pok.erase(prodaje_pok.begin()+i); 
</font>        }
    }
}
void Prodaje::ObrisiProdajeNaDatum(const Datum &amp;datum) {
    if (prodaje_pok.size()==0) return;
<a name="9"></a><font color="#FF00FF"><a href="match215-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    for (int i=0; i&lt;prodaje_pok.size(); i++) {
        if (JednakDatum(prodaje_pok[i]-&gt;DajDatumProdaje(), datum)) {
            prodaje_pok.erase(prodaje_pok.begin()+i);
        }
    }
}
bool Prodaje::JednakDatum(Datum dat1, Datum dat2) {
</font>    if (dat1.DajGodinu()==dat2.DajGodinu() &amp;&amp; dat1.DajMjesec()==dat2.DajMjesec() &amp;&amp; dat1.DajDan()==dat2.DajDan())
    return true;
    return false;
}
void Prodaje::IspisiProdajeNaDatum(const Datum &amp;datum) const {
    int broj_prodaja_na_datum(DajBrojProdajaNaDatum(datum));
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; pomocni(broj_prodaja_na_datum);
    for (int i=0; i&lt;broj_prodaja_na_datum; i++) {
        if (JednakDatum(prodaje_pok[i]-&gt;DajDatumProdaje(), datum))
        pomocni[i]=std::make_shared&lt;Prodaja&gt;(*(prodaje_pok[i]));
    }
    std::sort(pomocni.begin(), pomocni.end(), [] (std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) -&gt; bool {
        return p1-&gt;DajImeKupca()&lt;p2-&gt;DajImeKupca();
    });
    //Ispisimo
    for (int i=0; i&lt;broj_prodaja_na_datum; i++) {
        pomocni[i]-&gt;Ispisi();
    }
}
void Prodaje::IspisiSveProdaje() const { //Ne smij promijeniti sadrzaj objekta nad kojim se poziva
    //Sortirajmo
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; pomocni(prodaje_pok.size());
    for (int i=0; i&lt;prodaje_pok.size(); i++) {
        pomocni[i]=std::make_shared&lt;Prodaja&gt;(*(prodaje_pok[i]));
    }
    std::sort(pomocni.begin(), pomocni.end(), [] (std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) -&gt; bool {
        auto dat1(p1-&gt;DajDatumProdaje()), dat2(p2-&gt;DajDatumProdaje());
        if (dat1.DajGodinu()==dat2.DajGodinu()) {
            if (dat1.DajMjesec()==dat2.DajMjesec()) {
                if (dat1.DajDan()==dat2.DajDan()) {
                    return p1-&gt;DajImeKupca()&lt;p2-&gt;DajImeKupca();
                }
                return dat1.DajDan()&lt;dat2.DajDan();
            }
            return dat1.DajMjesec()&lt;dat2.DajMjesec();
        }
        return dat1.DajGodinu()&lt;dat2.DajGodinu();
    });
    //Ispisimo
    for (int i=0; i&lt;prodaje_pok.size(); i++) {
        pomocni[i]-&gt;Ispisi();
    }
}

int main () {
    std::vector&lt;Stan&gt; stanovi; std::vector&lt;Kupac&gt; kupci; std::vector&lt;Prodaja&gt; v_prodaja;
    cout &lt;&lt; "Dobrodosli!" &lt;&lt; endl &lt;&lt; " " &lt;&lt; endl &lt;&lt; " " &lt;&lt; endl;
    int opcija1(-1);
    do {
<a name="4"></a><font color="#FF00FF"><a href="match215-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

        cout &lt;&lt; "Izaberite opciju:" &lt;&lt; endl;
        cout &lt;&lt; " 0 - kraj" &lt;&lt; endl &lt;&lt; " 1 - uredjivanje stanova" &lt;&lt; endl &lt;&lt; " 2 - uredjivanje kupaca" &lt;&lt; endl &lt;&lt;
        " 3 - uredjivanje prodaja" &lt;&lt; endl; 
        cin &gt;&gt; opcija1;
        if (opcija1==0) break;
        if (opcija1==1) {
</font>            int opcija_s(-1);
            do {
<a name="10"></a><font color="#FF0000"><a href="match215-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

            cout &lt;&lt; "Izaberite opciju:" &lt;&lt; endl;
            cout &lt;&lt; " 0 - nazad" &lt;&lt; endl &lt;&lt; " 1 - dodavanje stana" &lt;&lt; endl &lt;&lt; " 2 - uredjivanje stanova" &lt;&lt; endl &lt;&lt;
            " 3 - ispis svih stanova" &lt;&lt; endl &lt;&lt; " 4 - kraj" &lt;&lt; endl;
</font>            cin &gt;&gt; opcija_s;
            if (opcija_s==0) break;
            if (opcija_s==1) {
                //Dodajemo stan
                bool unos(false);
                do {
                    std::string adresa;
                    cout &lt;&lt; "Unesite adresu: ";
                    cin.ignore(10000, '\n');
                    getline (cin, adresa);
                    int sprat(-1), broj_soba(-1);
                    cout &lt;&lt; "Unesite sprat: ";
                    cin &gt;&gt; sprat;
                    cout &lt;&lt; "Unesite broj soba: ";
                    cin &gt;&gt; broj_soba;
                    int namj(0); bool namjesten(false);
                    cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                    cin &gt;&gt; namj;
                    if (namj==1) namjesten = true;
                    if (namj==0) namjesten = false;
                    double kvadratura;
                    cout &lt;&lt; "Unesite kvadraturu: ";
                    cin &gt;&gt; kvadratura;
                    try {
                        if (namj!=0 &amp;&amp; namj!=1) throw std::domain_error("Neispravan unos podataka");
                        Stan stan(adresa, sprat, broj_soba, namjesten, kvadratura);
                        stanovi.push_back(stan);
                        cout &lt;&lt; "Stan je uspjesno dodan!" &lt;&lt; endl &lt;&lt; " " &lt;&lt; endl;
                        unos=true;
                    }
                    catch (std::domain_error izuzetak) {
                        cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet."&lt;&lt; endl;
                    }
                }
                while(!unos);
                cout &lt;&lt; endl;
            }
            if (opcija_s==2) {
                cout &lt;&lt; "Odaberite stan. Dostupni stanovi su:" &lt;&lt; endl;
<a name="20"></a><font color="#FF0000"><a href="match215-0.html#20" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                for (int i=0; i&lt;stanovi.size(); i++) {
                    cout &lt;&lt; " " &lt;&lt; i+1 &lt;&lt; " - ";
                    stanovi[i].Ispisi();
                }
                cout &lt;&lt; endl &lt;&lt; " " &lt;&lt; endl;
</font>                int odabir(0);
                cin &gt;&gt; odabir;
<a name="11"></a><font color="#00FF00"><a href="match215-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                cout &lt;&lt; "Odaberite polje koje zelite urediti:" &lt;&lt; endl;
                cout &lt;&lt;" 0 - nazad" &lt;&lt; endl &lt;&lt; " 1 - adresa" &lt;&lt; endl &lt;&lt; " 2 - sprat" &lt;&lt; endl &lt;&lt; " 3 - broj soba" &lt;&lt; endl &lt;&lt;
</font><a name="12"></a><font color="#0000FF"><a href="match215-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                " 4 - da li je stan namjesten" &lt;&lt; endl &lt;&lt; " 5 - kvadratura" &lt;&lt; endl &lt;&lt; " 6 - sve" &lt;&lt; endl;
                int opcija;
                cin &gt;&gt; opcija;
                if (opcija==0) break; //?
</font>                if (opcija ==1 || opcija==6) {
                    bool unos(false);
                    do {
                        try {
                            cout &lt;&lt; "Unesite adresu: ";
                            std::string adresa;
                            cin.ignore(10000, '\n');
                            std::getline(cin, adresa); 
                            stanovi[odabir-1].Postavi(adresa, stanovi[odabir-1].DajSprat(), stanovi[odabir-1].DajBrojSoba(), stanovi[odabir-1].DajNamjesten(), stanovi[odabir-1].DajKvadraturu());
                            unos=true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet." &lt;&lt; endl;
                        }
                    }
                    while (!unos);
                }
                 if (opcija==2 || opcija==6)  {
                    bool unos(false);
                    do {
                        try {
                            cout &lt;&lt; "Unesite sprat: ";
                            int sprat;
                            cin &gt;&gt; sprat;
                            stanovi[odabir-1].Postavi(stanovi[odabir-1].DajAdresu(), sprat, stanovi[odabir-1].DajBrojSoba(), stanovi[odabir-1].DajNamjesten(), stanovi[odabir-1].DajKvadraturu());
                            unos=true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet." &lt;&lt; endl;
                        }
                    }
                    while (!unos);
                 }  
                 if (opcija==3 || opcija==6) {
                    bool unos(false);
                    do {
                        try {
                            cout &lt;&lt; "Unesite broj soba: ";
                            int broj_soba;
                            cin &gt;&gt; broj_soba;
                            stanovi[odabir-1].Postavi(stanovi[odabir-1].DajAdresu(), stanovi[odabir-1].DajSprat() , broj_soba, stanovi[odabir-1].DajNamjesten(), stanovi[odabir-1].DajKvadraturu());
                            unos=true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet." &lt;&lt; endl;
                        }
                    }
                    while (!unos);
                 }
                 if (opcija==4 || opcija==6) {
                    bool unos(false);
                    do {
                        try {
                            cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                            int namjesten;
                            cin &gt;&gt; namjesten;
                            stanovi[odabir-1].Postavi(stanovi[odabir-1].DajAdresu(), stanovi[odabir-1].DajSprat(), stanovi[odabir-1].DajBrojSoba(), bool(namjesten), stanovi[odabir-1].DajKvadraturu());
                            unos=true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet." &lt;&lt; endl;
                        }
                    }
                    while (!unos);
                 }
                 if (opcija==5 || opcija==6) {
                     bool unos(false);
                     do {
                        try {
                            cout &lt;&lt; "Unesite kvadraturu: ";
                            double kv;
                            cin &gt;&gt; kv;
                            stanovi[odabir-1].Postavi(stanovi[odabir-1].DajAdresu(), stanovi[odabir-1].DajSprat(), stanovi[odabir-1].DajBrojSoba(), stanovi[odabir-1].DajNamjesten(), kv);
                            unos=true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet." &lt;&lt; endl;
                        }
                 }
                while (!unos);
                cout &lt;&lt; "Stan je uspjesno izmijenjen!" &lt;&lt; endl &lt;&lt; " " &lt;&lt; endl;
                }
            }
<a name="15"></a><font color="#FF0000"><a href="match215-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

            if (opcija_s==3) {
                for (int i=0; i&lt;stanovi.size(); i++) {
                    cout &lt;&lt; i+1 &lt;&lt; ". ";
                    stanovi[i].Ispisi();
</font>                }
                cout &lt;&lt; endl &lt;&lt; " " &lt;&lt; endl;
            }
            if (opcija_s==4) { cout &lt;&lt; endl; break; }
            }
            while (opcija_s!=4);
        }
        if (opcija1==2) {
            int opcija_k(0);
            do {
                cout &lt;&lt; "Izaberite opciju:" &lt;&lt; endl;
                cout &lt;&lt; " 0 - nazad" &lt;&lt; endl &lt;&lt; " 1 - dodavanje kupca" &lt;&lt; endl &lt;&lt; " 2 - uredjivanje kupaca" &lt;&lt; endl &lt;&lt;
                " 3 - ispis svih kupaca" &lt;&lt; endl &lt;&lt; " 4 - kraj" &lt;&lt; endl; 
                cin &gt;&gt; opcija_k;
                if (opcija_k==0) {
                    break;
                }
                if (opcija_k==1) {
                    bool unos(false); 
                    do {
                        try {
                            std::string ime_i_prezime;
                            cout &lt;&lt; "Unesite ime i prezime kupca: "; 
                            cin.ignore(10000, '\n');
                            std::getline(cin, ime_i_prezime);
                            cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): ";
                            int d(0), m(0), g(0);
                            char znak1, znak2;
                            cin  &gt;&gt; d &gt;&gt; znak1 &gt;&gt; m  &gt;&gt; znak2 &gt;&gt; g;
                            Datum dat(d, m, g);
                            kupci.push_back(Kupac(ime_i_prezime, dat));
                            cout &lt;&lt; "Kupac je uspjesno dodan!" &lt;&lt; endl &lt;&lt; endl;
                            unos = true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet." &lt;&lt; endl;
                        }
                    }
                    while (!unos); 
                }
                if (opcija_k==2) {
                    cout &lt;&lt; "Odaberite kupca kojeg zelite urediti. Dostupni kupci su:" &lt;&lt; endl;
<a name="21"></a><font color="#00FF00"><a href="match215-0.html#21" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                    for (int i=0; i&lt;kupci.size(); i++) {
                        cout &lt;&lt; " " &lt;&lt; i+1 &lt;&lt; " - ";
                        kupci[i].Ispisi();
                        cout &lt;&lt; endl;
</font>                    }
                    int odabir(0);
                    cin &gt;&gt; odabir;
                    bool unos(false);
                    do {
                        try {
                            std::string ime_i_prezime;
                            cout &lt;&lt; "Unesite ime i prezime kupca: "; 
                            cin.ignore(10000, '\n');
                            std::getline(cin, ime_i_prezime);
                            cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): ";
                            int d(0), m(0), g(0);
                            char znak1, znak2;
                            cin &gt;&gt; d &gt;&gt; znak1 &gt;&gt; m &gt;&gt; znak2 &gt;&gt; g;
                            Datum dat(d, m, g);
                            kupci[odabir-1].Postavi(ime_i_prezime, dat);
                            cout &lt;&lt; "Kupac je uspjesno izmijenjen!" &lt;&lt; endl;
                            unos = true; 
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet.";
                        }
                    }
                    while(!unos);
                }
                if (opcija_k==3) {
                    for (int i=0; i&lt; kupci.size(); i++) {
                        kupci[i].Ispisi();
                        cout &lt;&lt; endl;
                    }
                }
                if (opcija_k==4) {
                    cout &lt;&lt; "\n\nDovidjenja!";
	                return 0;
                }
            }
            while (opcija_k!=0);
        }
        if (opcija1==3) {
            int opcija_p(0);
            do {
                cout &lt;&lt; "Izaberite opciju:" &lt;&lt; endl;
                cout &lt;&lt; " 0 - nazad" &lt;&lt; endl &lt;&lt; " 1 - dodavanje prodaje" &lt;&lt; endl &lt;&lt; " 2 - uredjivanje prodaje" &lt;&lt; endl &lt;&lt;
                " 3 - ispis prodaja" &lt;&lt; endl &lt;&lt; " 4 - brisanje prodaja" &lt;&lt; endl &lt;&lt; " 5 - kraj" &lt;&lt; endl; 
                cin &gt;&gt; opcija_p;
                if (opcija_p==0) {
                    break;
                }
                if (opcija_p==1) {
                    int o(0);
                    cout &lt;&lt; "Izaberite opciju:" &lt;&lt; endl;
                    cout &lt;&lt; " 0 - nazad" &lt;&lt; endl &lt;&lt; " 1 - dodavanje potpuno nove prodaje" &lt;&lt; endl &lt;&lt; " 2 - dodavanje nove prodaje na osnovu arhive" &lt;&lt; endl &lt;&lt;
                    " 3 - kraj" &lt;&lt; endl;
                    cin &gt;&gt; o;
                    if (o==0) {
                    break;
                    }
                    if (o==1) {
                        bool unos(false);
                        do {
                        try {
                            std::string i_i_p;
                            cout &lt;&lt; "Unesite ime i prezime agenta prodaje: "; 
                            cin.ignore(1000, '\n');
                            std::getline(cin, i_i_p);
                            cout &lt;&lt;"Unesite datum prodaje (formata d/m/g): ";
                            int d(0), m(0), g(0);
                            char znak1, znak2;
                            cin &gt;&gt; d &gt;&gt; znak1 &gt;&gt; m &gt;&gt; znak2 &gt;&gt; g;
                            Datum dat_p(d, m, g);
                            cout &lt;&lt; "Unesite cijenu stana: ";
                            int cijena;
                            cin &gt;&gt; cijena;
                            std::string ime_k;
                            cout &lt;&lt; "Unesite ime kupca: ";
                            cin.ignore(1000, '\n');
                            std::getline(cin, ime_k);
                            cout &lt;&lt; "Unesite datum rodjenja kupca (formata d/m/g): ";
                            int d1(0), m1(0), g1(0);
                            char z1, z2;
                            cin &gt;&gt; d1 &gt;&gt; z1 &gt;&gt; m1 &gt;&gt; z2 &gt;&gt; g1;
                            Datum dat_k(d1, m1, g1);
                            cout &lt;&lt; "Unesite adresu: ";
                            std::string adresa;
                            cin.ignore(1000, '\n');
                            std::getline(cin, ime_k);
                            int sprat, sobe , namjesten;
<a name="7"></a><font color="#0000FF"><a href="match215-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                            cout &lt;&lt; "Unesite sprat: ";
                            cin &gt;&gt; sprat;
                            cout &lt;&lt; "Unesite broj soba: ";
                            cin &gt;&gt; sobe;
                            cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): ";
                            cin &gt;&gt; namjesten;
                            if (namjesten != 0 &amp;&amp; namjesten != 1) throw std::domain_error ("Neispravan unos podataka");
</font>                            double kvadratura;
                            cout &lt;&lt; "Unesite kvadraturu: ";
                            cin &gt;&gt; kvadratura;
                            v_prodaja.push_back(Prodaja(i_i_p, cijena, dat_p.DajDan(), dat_p.DajMjesec(), dat_p.DajGodinu(), ime_k, dat_k, adresa, sprat, sobe, bool(namjesten), kvadratura));
                            cout &lt;&lt; "Prodaja uspjesno dodana!" &lt;&lt; endl; 
                            unos=true;
                        }
                        catch (std::domain_error izuzetak) {
                            cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet.";
                        }
                        }
                        while (!unos);
                    }
                    if (o==2) {
                        bool unos(false);
                        do {
                            try {
                                std::string i_i_p;
                                cout &lt;&lt; "Unesite ime i prezime agenta prodaje:"; 
                                cin.ignore(1000, '\n');
                                std::getline(cin, i_i_p);
                                cout &lt;&lt;" Unesite datum prodaje (formata d/m/g): ";
                                int d(0), m(0), g(0);
                                char znak1, znak2;
                                cin &gt;&gt; d &gt;&gt; znak1 &gt;&gt; m &gt;&gt; znak2 &gt;&gt; g;
                                Datum dat_p(d, m, g);
                                cout &lt;&lt; "Unesite cijenu stana: ";
                                int cijena;
                                cin &gt;&gt; cijena;
                                cout &lt;&lt; "Odaberite kupca. Dostupni kupci su:" &lt;&lt; endl;
<a name="22"></a><font color="#0000FF"><a href="match215-0.html#22" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

                                for (int i=0; i&lt;kupci.size(); i++) {
                                    cout &lt;&lt; " " &lt;&lt; i+1 &lt;&lt; " - ";
                                    kupci[i].Ispisi();
                                    cout &lt;&lt; endl;
</font>                                }
                                int k(0);
                                cin &gt;&gt; k;
                                cout &lt;&lt; "Odaberite stan. Dostupni stanovi su:" &lt;&lt; endl;
<a name="23"></a><font color="#00FFFF"><a href="match215-0.html#23" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                                for (int i=0; i&lt;stanovi.size(); i++) {
                                    cout &lt;&lt; " " &lt;&lt; i+1 &lt;&lt; " - ";
                                    stanovi[i].Ispisi();
                                    cout &lt;&lt; endl;
</font>                                }
                                int s(0);
                                cin &gt;&gt; s;
                                Kupac kupac_stana=kupci[k-1];
                                Stan kupljeni_stan=stanovi[s-1];
                                v_prodaja.push_back(Prodaja(i_i_p, cijena, dat_p, kupac_stana, kupljeni_stan));
                                cout &lt;&lt; "Prodaja uspjesno dodana!" &lt;&lt; endl;
                                unos=true;
                            }
                            catch (std::domain_error izuzetak) {
                                cout &lt;&lt; "Izuzetak: " &lt;&lt; izuzetak.what() &lt;&lt; ". Molimo unesite opet.";
                            }
                        }
                        while (!unos);
                    }
                    if (o==3) {
                        return 0;
                    }
                }
                if (opcija_p==2) {
                    return 0;
                }
                if (opcija_p==3) {
                    return 0;
                }
                if (opcija_p==4) {
                    return 0;
                }
                if (opcija_p==5) {
                    return 0;
                }
            }
            while (opcija_p!=0);
        }
    }
    while (opcija1!= 0);
    cout &lt;&lt; "\n\nDovidjenja!";
	return 0;
}
</pre>
</body>
</html>
