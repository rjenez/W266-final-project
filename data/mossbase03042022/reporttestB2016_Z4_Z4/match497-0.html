<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1976.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1976.cpp<p></p><pre>
/B 2016/2017, ZadaÄ‡a 4, Zadatak 3
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;

class Datum {
    int dan, mjesec, godina;
    int BrojDana(int m, int g) {
        int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if(g % 4 == 0 &amp;&amp; (g % 100 != 0 || g % 400 == 0)) broj_dana[1]++;
        return broj_dana[m - 1];
    }
public:
<a name="4"></a><font color="#FF00FF"><a href="match497-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Datum (int d, int m, int g) { Postavi(d, m, g); }
    
    void Postavi (int d, int m, int g);

    int DajDan() const {
        return dan;
    }
    int DajMjesec() const {
        return mjesec;
    }
    int DajGodinu() const {
</font>        return godina;
    }
    
    void Ispisi() const {
        std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }
    friend class Kupac;
    friend class Prodaja;
    friend class Prodaje;
};

void Datum::Postavi (int d, int m, int g) {
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if(g % 4 == 0 &amp;&amp; (g % 100 != 0 || g % 400 == 0)) broj_dana[1]++;
<a name="3"></a><font color="#00FFFF"><a href="match497-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if(g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; broj_dana[m - 1])
        throw std::domain_error ("Neispravan datum");
    dan = d; mjesec = m; godina = g;
}

class Kupac {
    std::string ime_i_prezime;
</font>    Datum dat_rodjenja = Datum(1, 1, 1);
public:
    Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    
<a name="12"></a><font color="#0000FF"><a href="match497-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    
    std::string DajImePrezime() const {
        return ime_i_prezime;
    }
    Datum DajDatumRodjenja() const {
        return dat_rodjenja;
    }
    
    void Ispisi() const {
        std::cout &lt;&lt; ime_i_prezime &lt;&lt; "("; dat_rodjenja.Ispisi(); std::cout &lt;&lt; ")";
</font>    }
    friend class Prodaja;
    friend class Prodaje;
};

<a name="1"></a><font color="#00FF00"><a href="match497-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

Kupac::Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja) {
    for(int i = 0; i &lt; ime_i_prezime.length(); i++) 
        if(!((ime_i_prezime[i] &gt;= 'A' &amp;&amp; ime_i_prezime[i] &lt;= 'Z') || (ime_i_prezime[i] &gt;= 'a' &amp;&amp; ime_i_prezime[i] &lt;= 'z') || (ime_i_prezime[i] &gt;= '0' &amp;&amp; ime_i_prezime[i] &lt;= '9') || ime_i_prezime[i] == ' ' || ime_i_prezime[i] == '/' || ime_i_prezime[i] == '-'))
</font><a name="7"></a><font color="#0000FF"><a href="match497-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            throw std::domain_error("Neispravno ime i prezime");
</font>    Kupac::ime_i_prezime = ime_i_prezime; 
    dat_rodjenja = datum_rodjenja;
}
    
void Kupac::Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja) {
    for(int i = 0; i &lt; ime_i_prezime.length(); i++) 
        if(!((ime_i_prezime[i] &gt;= 'A' &amp;&amp; ime_i_prezime[i] &lt;= 'Z') || (ime_i_prezime[i] &gt;= 'a' &amp;&amp; ime_i_prezime[i] &lt;= 'z') || (ime_i_prezime[i] &gt;= '0' &amp;&amp; ime_i_prezime[i] &lt;= '9') || ime_i_prezime[i] == ' ' || ime_i_prezime[i] == '/' || ime_i_prezime[i] == '-'))
            throw std::domain_error("Neispravno ime i prezime");
    Kupac::ime_i_prezime = ime_i_prezime;
<a name="2"></a><font color="#0000FF"><a href="match497-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    dat_rodjenja = datum_rodjenja;  
}

class Stan {
    std::string adresa_;
    int sprat_, br_soba;
    bool opremljen;
    double kvadratura_;
public: 
    Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) { 
        Postavi(adresa, sprat, broj_soba, namjesten, kvadratura);
</font>    }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
    
    int DajSprat() const {
        return sprat_;
    }
    int DajBrojSoba() const {
        return br_soba;
    }
    bool DajNamjesten() const {
        return opremljen; 
    }
    double DajKvadraturu() const {
        return kvadratura_;
    }
    
    void Ispisi() const;
    friend class Prodaja;
    friend class Prodaje;
};

void Stan::Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if(sprat &lt; 0 || broj_soba &lt; 0 || kvadratura &lt; 0) throw std::domain_error("Neispravan unos podataka");
    adresa_ = adresa; sprat_ = sprat; br_soba = broj_soba; opremljen = namjesten; kvadratura_ = kvadratura;
}
void Stan::Ispisi() const {
    std::cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; adresa_ &lt;&lt; " na " &lt;&lt; sprat_ &lt;&lt;". spratu i ima " &lt;&lt; br_soba;
    if(br_soba &lt; 5) 
        std::cout &lt;&lt; " sobe." &lt;&lt; '\n';
    else std::cout &lt;&lt; " soba." &lt;&lt; '\n';
    std::cout &lt;&lt; "Kvadratura stana je " &lt;&lt; kvadratura_ &lt;&lt; " (m^2) i stan ";
    if(opremljen) std::cout &lt;&lt; "je namjesten.";
    else std::cout &lt;&lt; "nije namjesten.";
}

class Prodaja {
    std::string ime_agenta_prodaje_;
    double cijena_stana_;
    Datum datum_prodaje_ = Datum(1, 1, 1);
    Kupac kupac_stana_ = Kupac("", Datum(1, 1, 1));
    Stan kupljeni_stan_ = Stan("", 0, 0, false, 0);

public:
    Prodaja(){};
<a name="0"></a><font color="#FF0000"><a href="match497-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
    
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
    
    void PromijeniKupca(const Kupac &amp;novi_kupac) {
        kupac_stana_ = novi_kupac;
    }
    void PromijeniStan(const Stan &amp;novi_stan) {
        kupljeni_stan_ = novi_stan;   
    } 
    void PromijeniDatumKupovine(const Datum &amp;novi_datum) {
        datum_prodaje_ = novi_datum;
    } 
    void PromijeniCijenuProdaje(const double &amp;nova_cijena) {
        cijena_stana_ = nova_cijena;
    }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    
    std::string DajImeAgenta() const {
        return ime_agenta_prodaje_;
    }
    std::string DajImeKupca() const {
        return kupac_stana_.DajImePrezime();
</font>    } 
    Datum DajDatumProdaje() const {
        return datum_prodaje_;
    } 
    double DajCijenuStana() const {
        return cijena_stana_;
    } 
    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2); 
    friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2); 
    
    void Ispisi() const;
<a name="13"></a><font color="#00FFFF"><a href="match497-1.html#13" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    friend class Prodaje;
};

Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan) {
</font>    ime_agenta_prodaje_ = ime_agenta_prodaje;
    cijena_stana_ = cijena_stana;
    datum_prodaje_ = datum_prodaje;
<a name="8"></a><font color="#00FFFF"><a href="match497-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    kupac_stana_ = kupac_stana;
    kupljeni_stan_ = kupljeni_stan;
}

Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata) {
</font>    ime_agenta_prodaje_ = ime_agenta_prodaje;
    cijena_stana_ = cijena_stana;
    datum_prodaje_ = Datum(dan_prodaje, mjesec_prodaje, godina_prodaje);
    kupac_stana_ = Kupac(ime_kupca, datum_rodjenja_kupca);
    kupljeni_stan_ = Stan(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata);
}

void Prodaja::PomjeriDanUnaprijed() {
    datum_prodaje_.dan++;
    if(datum_prodaje_.dan &gt; datum_prodaje_.BrojDana(datum_prodaje_.mjesec, datum_prodaje_.godina)) datum_prodaje_.dan = 1; datum_prodaje_.mjesec++;
    if(datum_prodaje_.mjesec &gt; 12) datum_prodaje_.mjesec = 1; datum_prodaje_.godina++;
}  

void Prodaja::PomjeriDanUnazad() {
    datum_prodaje_.dan--;
    if(datum_prodaje_.dan &lt; 1) datum_prodaje_.mjesec--; datum_prodaje_.dan = datum_prodaje_.BrojDana(datum_prodaje_.mjesec, datum_prodaje_.godina); 
    if(datum_prodaje_.mjesec &lt; 1) datum_prodaje_.mjesec = 12; datum_prodaje_.godina--;
}

void Prodaja::Ispisi() const { // dodati setw
    std::cout &lt;&lt; "Ime agenta: " &lt;&lt; ime_agenta_prodaje_ &lt;&lt; '\n';
    std::cout &lt;&lt; "Ime kupca: "; kupac_stana_.Ispisi(); std::cout &lt;&lt; '\n';
    std::cout &lt;&lt; "Zakazani datum prodaje: "; datum_prodaje_.Ispisi(); std::cout &lt;&lt; '\n';
    std::cout &lt;&lt; "Cijena stana: " &lt;&lt; cijena_stana_ &lt;&lt; "\n";
    std::cout &lt;&lt; "Informacije o stanu: \n";
    kupljeni_stan_.Ispisi();
}

<a name="5"></a><font color="#FF0000"><a href="match497-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2) {
    if(p1.DajDatumProdaje().DajGodinu() &lt; p2.DajDatumProdaje().DajGodinu()) return true;
    if(p1.DajDatumProdaje().DajGodinu() == p2.DajDatumProdaje().DajGodinu() &amp;&amp; p1.DajDatumProdaje().DajMjesec() &lt; p2.DajDatumProdaje().DajMjesec())
</font>        return true;
<a name="6"></a><font color="#00FF00"><a href="match497-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    if(p1.DajDatumProdaje().DajGodinu() == p2.DajDatumProdaje().DajGodinu() &amp;&amp; p1.DajDatumProdaje().DajMjesec() == p2.DajDatumProdaje().DajMjesec() &amp;&amp; p1.DajDatumProdaje().DajDan() &lt; p2.DajDatumProdaje().DajDan())
        return true;
    return false;
}

bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2) {
    if(p1.DajCijenuStana() &gt; p2.DajCijenuStana()) return true;
    return false;
</font>}

class Prodaje {
    int kapacitet;
    int br_prodaja;
    Prodaja **pok_na_niz;
    mutable int index = 0;
public:
   
    explicit Prodaje(int max_broj_prodaja){ kapacitet = max_broj_prodaja; br_prodaja = 0; pok_na_niz = new Prodaja*[max_broj_prodaja]{}; }
    
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
    
    ~Prodaje() {
        for(int i = 0; i &lt; kapacitet; i++) delete pok_na_niz[i];
        delete[] pok_na_niz; 
    } 
    
    Prodaje(const Prodaje &amp;prodaje);
    
    Prodaje(Prodaje &amp;&amp;prodaje) {
        pok_na_niz = prodaje.pok_na_niz; kapacitet = prodaje.kapacitet; br_prodaja = prodaje.br_prodaja;
        prodaje.pok_na_niz = nullptr; prodaje.br_prodaja = 0;
    }
    
    Prodaje &amp;operator =(const Prodaje &amp;prodaje);
    
    Prodaje &amp;operator =(Prodaje &amp;&amp;prodaje) {    
        if(prodaje.kapacitet != kapacitet) throw std::logic_error("Nesaglasni kapaciteti");
        std::swap(br_prodaja, prodaje.br_prodaja);
        std::swap(pok_na_niz, prodaje.pok_na_niz);
        return *this;
    }
    
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
<a name="9"></a><font color="#FF00FF"><a href="match497-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,  int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
    void RegistrirajProdaju(Prodaja *prodaja);
    
    int DajBrojProdaja() const {
        return br_prodaja;
</font>    }
    
    Prodaja &amp;DajProdaju(int index) {
        
    }    
    int DajBrojProdajaNaDatum(const Datum &amp;datum) const;
    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const;

    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const ;
  
    void IsprazniKolekciju(){
        for(int i = 0; i &lt; br_prodaja; i++) {
            delete pok_na_niz[i]; pok_na_niz[i] = nullptr;
        }
    }
    void ObrisiNajranijuProdaju();  
<a name="10"></a><font color="#FF0000"><a href="match497-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta); 
    void ObrisiProdajeNaDatum(const Datum &amp;datum); 
    void IspisiProdajeNaDatum(const Datum &amp;datum) const; 
    void IspisiSveProdaje() const;
};

Prodaje::Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja) { 
</font>    br_prodaja = spisak_prodaja.size();
    pok_na_niz = new Prodaja*[spisak_prodaja.size()]{};
    auto it(spisak_prodaja.begin());
    try {
        for(int i = 0; i &lt; br_prodaja; i++) {
            pok_na_niz[i] = new Prodaja(*it); it++;
        }
    } catch(...) {
        for(int i = 0; i &lt; br_prodaja; i++) delete pok_na_niz[i];
        delete[] pok_na_niz; throw;
    }
}

Prodaje::Prodaje(const Prodaje &amp;prodaje) {
    pok_na_niz = new Prodaja*[prodaje.kapacitet]{};
    kapacitet = prodaje.kapacitet;
    br_prodaja = prodaje.br_prodaja;
    try {
        for(int i = 0; i &lt; prodaje.br_prodaja; i++)
            pok_na_niz[i] = new Prodaja(*prodaje.pok_na_niz[i]);
    } catch(...) {
        for(int i = 0; i &lt; prodaje.br_prodaja; i++) delete pok_na_niz[i];
        delete[] pok_na_niz;
    }
}

Prodaje &amp;Prodaje::operator =(const Prodaje &amp;prodaje) {
    if(prodaje.kapacitet != prodaje.kapacitet) throw std::logic_error("Nesuglasan kapacitet");
    if(prodaje.br_prodaja &gt; br_prodaja) {
        try{
            for(int i = br_prodaja; i &lt; prodaje.br_prodaja; i++)
                pok_na_niz[i] = new Prodaja(*prodaje.pok_na_niz[i]);
        } catch(...) {
            for(int i = br_prodaja; i &lt; prodaje.br_prodaja; i++) {
                delete pok_na_niz[i]; 
                pok_na_niz[i] = nullptr;
            } throw;
        }
    } else {
        for(int i = prodaje.br_prodaja; i &lt; br_prodaja; i++) {
            delete pok_na_niz[i]; pok_na_niz[i] = nullptr;
        } 
    }
    br_prodaja = prodaje.br_prodaja;
    for(int i = 0; i &lt; br_prodaja; i++) 
<a name="11"></a><font color="#00FF00"><a href="match497-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        *pok_na_niz[i] = *prodaje.pok_na_niz[i];
    return *this;
}

void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan) {
</font>    if(br_prodaja == kapacitet) throw std::range_error("Dostignut maksimalni broj prodaja");
    Prodaja *novi(nullptr);
    try{
        novi = new Prodaja(ime_agenta_prodaje, cijena_stana, datum_prodaje, kupac_stana, kupljeni_stan);
        pok_na_niz[br_prodaja++] = novi;
    } catch(...) {
        delete novi; novi = nullptr;
    }
} 

void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,  int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata) {
    if(br_prodaja == kapacitet) throw std::range_error("Dostignut maksimalni broj prodaja");
        Prodaja *novi(nullptr);
    try{
        novi = new  Prodaja(ime_agenta_prodaje, cijena_stana, dan_prodaje, mjesec_prodaje, godina_prodaje, ime_kupca, datum_rodjenja_kupca, adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata);
        pok_na_niz[br_prodaja++] = novi;
    } catch(...) {
        delete novi; novi = nullptr;
    }
}

void Prodaje::RegistrirajProdaju(Prodaja *prodaja) { //briga i brisanje
    if(br_prodaja == kapacitet) throw std::range_error("Dostignut maksimalni broj prodaja");
    pok_na_niz[br_prodaja++] = prodaja;
}

/*int Prodaje::DajBrojProdajaNaDatum(const Datum &amp;datum) const {
    int broj = std::count_if(pok_na_niz, pok_na_niz + br_prodaja, [datum] (Prodaja *prodaja) { 
        if(prodaja-&gt;datum_prodaje_ == datum) return true;    
        return false;
    });
    return broj;
}
*/
int Prodaje::DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const {
    int broj = std::count_if(pok_na_niz, pok_na_niz + br_prodaja, [ime_agenta] (Prodaja *prodaja) {
        if(prodaja-&gt;ime_agenta_prodaje_ == ime_agenta) return true;
        return false;
    });
    return broj;
} 

int main ()
{
	return 0;
}</pre>
</body>
</html>
