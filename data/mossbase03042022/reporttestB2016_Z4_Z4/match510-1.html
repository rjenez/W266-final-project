<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student5863.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student2553.cpp<p></p><pre>
/B 2016/2017, Zadaća 4, Zadatak 4
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;

class Datum{
    int dan, mjesec, godina;
public:
    Datum(int dan, int mjesec, int godina){
        Postavi(dan, mjesec, godina);
    }
    void Postavi(int dan, int mjesec, int godina);
    int DajDan()const{ return dan;}
    int DajMjesec()const{ return mjesec;}
    int DajGodinu()const{ return godina;}
    void Ispisi()const{ std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;}
};
<a name="7"></a><font color="#0000FF"><a href="match510-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

void Datum::Postavi(int dan, int mjesec, int godina){
    int br_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>    if ((godina % 4 == 0 &amp;&amp; godina % 100 == 0) || godina % 400 == 0) br_dana[1]++;
    if (godina &lt; 1 || dan&lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &gt; br_dana[mjesec - 1])
        throw std::domain_error("Neispravan datum");
    Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
}

class Kupac{
    std::string ime_i_prezime;
    Datum datum_rodjenja;
public:
    Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja):datum_rodjenja(datum_rodjenja.DajDan(), datum_rodjenja.DajMjesec(), datum_rodjenja.DajGodinu()){
        Postavi(ime_i_prezime, datum_rodjenja);
    }
    void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    std::string DajImeIPrezime()const{return ime_i_prezime;}
    Datum DajDatumRodjenja()const{return datum_rodjenja;}
    void Ispisi()const;
};
void Kupac::Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja){
    for (int i = 0; i &lt; ime_i_prezime.length(); i++){
        char znak(ime_i_prezime[i]);
        if ((znak &lt; '0' || (znak &gt; '9' &amp;&amp; znak &lt; 'A') || (znak &gt; 'Z' &amp;&amp; znak &lt; 'a') || znak &gt; 'z') &amp;&amp; znak != ' ' &amp;&amp; znak != '-' &amp;&amp; znak != '!')
            throw std::domain_error("Neispravno ime i prezime");
    }
    Kupac::ime_i_prezime = ime_i_prezime; Kupac::datum_rodjenja = datum_rodjenja;
}
<a name="10"></a><font color="#FF0000"><a href="match510-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

void Kupac::Ispisi()const{
    std::cout &lt;&lt; ime_i_prezime &lt;&lt; " ("; datum_rodjenja.Ispisi(); std::cout &lt;&lt; ")";
}

class Stan{
    std::string adresa;
    int sprat, broj_soba;
</font>    bool namjesten;
    double kvadratura;
public:
    Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura){
        Postavi(adresa, sprat, broj_soba, namjesten, kvadratura);
    }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
    std::string DajAdresu()const{return adresa;}
    int DajSprat()const{return sprat;}
    int DajBrojSoba()const{return broj_soba;}
    bool DajNamjesten()const{return namjesten;}
    double DajKvadraturu()const{return kvadratura;}
    void Ispisi()const;
};
<a name="0"></a><font color="#FF0000"><a href="match510-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

void Stan::Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura){
    if (sprat &lt; 0 || broj_soba &lt; 0 || kvadratura &lt; 0)
        throw std::domain_error("Neispravan unos podataka");
    Stan::adresa = adresa; Stan::sprat = sprat; Stan::broj_soba = broj_soba; Stan::namjesten = namjesten; Stan::kvadratura = kvadratura;
}
void Stan::Ispisi()const{
    std::cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; adresa &lt;&lt; " na " &lt;&lt; sprat &lt;&lt; ". spratu i ima " &lt;&lt; broj_soba;
</font>    if (broj_soba%10 == 1) std::cout &lt;&lt; " sobu.";
    else if (broj_soba%10 &gt;= 2 &amp;&amp; broj_soba%10 &lt;= 4) std::cout &lt;&lt; " sobe.";
    else if ((broj_soba%10 &gt;= 5 &amp;&amp; broj_soba%10 &lt;= 9) || broj_soba%10 == 0 || (broj_soba &gt;= 11 &amp;&amp; broj_soba &lt;= 14)) std::cout &lt;&lt; " soba.";
<a name="2"></a><font color="#0000FF"><a href="match510-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    std::cout &lt;&lt; " Kvadratura stana je " &lt;&lt; kvadratura &lt;&lt; " (m^2) i stan";
    if (namjesten) std::cout &lt;&lt; " je "; else std::cout &lt;&lt; " nije "; 
    std::cout &lt;&lt; "namjesten.";
}

class Prodaja{
    std::string ime_agenta_prodaje;
    double cijena_stana;
    Datum datum_prodaje;
    Kupac kupac_stana;
    Stan kupljeni_stan;
</font>    static void Normalizuj(int &amp;d, int &amp;m, int &amp;g){
        
    }
public:
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan):
    datum_prodaje(datum_prodaje), kupac_stana(kupac_stana), kupljeni_stan(kupljeni_stan){
        Prodaja::ime_agenta_prodaje = ime_agenta_prodaje; 
        Prodaja::cijena_stana = cijena_stana;
    }
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, 
    const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata):
    datum_prodaje(dan_prodaje, mjesec_prodaje, godina_prodaje), kupac_stana(ime_kupca, datum_rodjenja_kupca), kupljeni_stan(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata)
    {
        Prodaja::ime_agenta_prodaje = ime_agenta_prodaje;
        Prodaja::cijena_stana = cijena_stana;
    }
    void PromijeniAgentaProdaje(const std::string &amp;agent){
        Prodaja::ime_agenta_prodaje = agent;
    }
    void PromijeniKupca(const Kupac &amp;novi_kupac){
        kupac_stana = novi_kupac;
    }
    void PromijeniStan(const Stan &amp;novi_stan){
        kupljeni_stan = novi_stan;
    }
    void PromijeniDatumKupovine(const Datum &amp;novi_datum){
        datum_prodaje = novi_datum;
    }
    void PromijeniCijenuProdaje(const double &amp;nova_cijena){
        cijena_stana = nova_cijena;
    }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImeAgenta()const{return ime_agenta_prodaje;}
    std::string DajImeKupca()const{return kupac_stana.DajImeIPrezime();}
    Datum DajDatumProdaje()const{return datum_prodaje;}
    double DajCijenuStana()const{return cijena_stana;}
    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2){
        Datum prvi(p1.DajDatumProdaje()), drugi(p2.DajDatumProdaje());
        return prvi.DajGodinu() &lt; prvi.DajGodinu() || prvi.DajMjesec() &lt; drugi.DajMjesec() || prvi.DajDan() &lt; drugi.DajDan();
    }
    friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2){
        return p1.DajCijenuStana() &gt; p2.DajCijenuStana(); 
    }
    void Ispisi()const;
};
void Prodaja::PomjeriDanUnaprijed(){
    int dan(datum_prodaje.DajDan()), mjesec(datum_prodaje.DajMjesec()), godina(datum_prodaje.DajGodinu());
    int br_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
    dan++;
    if (dan &gt; br_dana[mjesec - 1]){dan = 1; mjesec++;}
    if (mjesec &gt; 12){mjesec = 1, godina++;}
    datum_prodaje.Postavi(dan, mjesec, godina);
}
void Prodaja::PomjeriDanUnazad(){
    int dan(datum_prodaje.DajDan()), mjesec(datum_prodaje.DajMjesec()), godina(datum_prodaje.DajGodinu());
    int br_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
    dan--;
    if(dan &lt; 1){mjesec--; dan = br_dana[mjesec - 1];}
    if (mjesec &lt; 1){godina--; mjesec = 12;}
    datum_prodaje.Postavi(dan, mjesec, godina);
}
void Prodaja::Ispisi()const{
    std::cout &lt;&lt; "Ime agenta:                     " &lt;&lt; ime_agenta_prodaje &lt;&lt; "\n";
    std::cout &lt;&lt; "Ime kupca:                      " &lt;&lt; kupac_stana.DajImeIPrezime(); std::cout &lt;&lt; " (";kupac_stana.DajDatumRodjenja().Ispisi(); std::cout &lt;&lt; ")\n";
    std::cout &lt;&lt; "Zakazani datum prodaje:         "; datum_prodaje.Ispisi(); std::cout &lt;&lt; "\n";
    std::cout &lt;&lt; "Cijena stana:                   " &lt;&lt; cijena_stana &lt;&lt; "\n";
    std::cout &lt;&lt; "Informacije o stanu:\n"; kupljeni_stan.Ispisi();
}

class Prodaje{
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; spisak_prodaja;
    static int PorediDatume(const Datum &amp;d1, const Datum &amp;d2);
    static bool Jednaki(double a, double b){
        return std::abs(a - b) &lt;= std::pow(10,-8)*(std::abs(a) + std::abs(b));
    };
    static bool JednakeProdaje(const Prodaja &amp;p1, const Prodaja &amp;p2);
    void IzbaciNullptr(int i);
public:
    explicit Prodaje()=default;
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
    Prodaje(const Prodaje &amp;prodaje);
    Prodaje(Prodaje &amp;&amp;prodaje);
    Prodaje &amp;operator=(const Prodaje &amp;prodaje);
    Prodaje &amp;operator=(Prodaje &amp;&amp;prodaje);
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
<a name="12"></a><font color="#0000FF"><a href="match510-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
    void RegistrirajProdaju(Prodaja* prodaja);
</font>    int DajBrojProdaja()const{
        return spisak_prodaja.size();
    }
    int DajBrojProdajaNaDatum(const Datum &amp;datum)const{
        return std::count_if(spisak_prodaja.begin(), spisak_prodaja.end(), [datum](std::shared_ptr&lt;Prodaja&gt; p){return p != nullptr &amp;&amp; PorediDatume(datum, p-&gt;DajDatumProdaje()) == 0;});
    }
    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta)const{
        return std::count_if(spisak_prodaja.begin(), spisak_prodaja.end(), [ime_agenta](std::shared_ptr&lt;Prodaja&gt;p){return p != nullptr &amp;&amp; p-&gt;DajImeAgenta() == ime_agenta;});
    }
<a name="6"></a><font color="#00FF00"><a href="match510-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    Prodaja &amp;DajProdaju(int n);
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju()const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju()const;
    void IsprazniKolekciju();
    void ObrisiNajranijuProdaju();
    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta);
    void ObrisiProdajeNaDatum(const Datum &amp;datum);
    void IspisiProdajeNaDatum(const Datum &amp;datum)const;
</font>    void IspisiSveProdaje()const;
};

int Prodaje::PorediDatume(const Datum &amp;d1, const Datum &amp;d2){
    int g1(d1.DajGodinu()), g2(d2.DajGodinu()), m1(d1.DajMjesec()), m2(d2.DajMjesec()), dan1(d1.DajDan()), dan2(d2.DajDan());
    if(g1 &lt; g2 || (g1 == g2 &amp;&amp; m1 &lt; m2) || (g1 == g2 &amp;&amp; m1 == m2 &amp;&amp; dan1 &lt; dan2))
        return -1;
    else if (g1 &gt; g2 || (g1 == g2 &amp;&amp; m1 &gt; m2) || (g1 == g2 &amp;&amp; m1 == m2 &amp;&amp; dan1 &gt; dan2))
        return 1;
    else return 0;
}
bool Prodaje::JednakeProdaje(const Prodaja &amp;p1, const Prodaja &amp;p2){
    return PorediDatume(p1.DajDatumProdaje(), p2.DajDatumProdaje()) == 0 &amp;&amp; p1.DajImeAgenta() == p2.DajImeAgenta() &amp;&amp; Jednaki(p1.DajCijenuStana(), p2.DajCijenuStana()) &amp;&amp; p1.DajImeKupca() == p2.DajImeKupca();
}
Prodaje::Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja){
    try
    {
        for (auto p = spisak_prodaja.begin(); p != spisak_prodaja.end(); p++)
                Prodaje::spisak_prodaja.emplace_back(std::make_shared&lt;Prodaja&gt;(*p));
    }catch(std::bad_alloc){throw; }
}
Prodaje::Prodaje(const Prodaje &amp;prodaje){
    try
    {
        for (int i = 0; i &lt; prodaje.spisak_prodaja.size(); i++)
        {
            spisak_prodaja.emplace_back(std::make_shared&lt;Prodaja&gt;(*prodaje.spisak_prodaja[i]));
        }
    }
    catch(std::bad_alloc){throw;}
}
Prodaje::Prodaje(Prodaje &amp;&amp;prodaje)=default;
Prodaje &amp;Prodaje::operator=(const Prodaje &amp;prodaje)=default;
Prodaje &amp;Prodaje::operator=(Prodaje &amp;&amp;prodaje)=default;
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan){
    try{
        spisak_prodaja.emplace_back(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, datum_prodaje, kupac_stana, kupljeni_stan));
    }catch (std::bad_alloc){
        throw;
    }
}
void Prodaje::RegistrirajProdaju(Prodaja *prodaja){
<a name="13"></a><font color="#00FFFF"><a href="match510-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    spisak_prodaja.emplace_back(prodaja);
}
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, const std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata){
</font>    
    try{
       spisak_prodaja.emplace_back(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, dan_prodaje, mjesec_prodaje, godina_prodaje, ime_kupca, datum_rodjenja_kupca, adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata));
        
    }catch(std::bad_alloc){
        throw;
    }
}
Prodaja &amp;Prodaje::DajProdaju(int n){
    return *spisak_prodaja[n];
}
Prodaja &amp;Prodaje::DajNajranijuProdaju(){
    if (!spisak_prodaja.size())
        throw std::domain_error("Nema registriranih prodaja");
    return **std::min_element(spisak_prodaja.begin(), spisak_prodaja.end(), [](std::shared_ptr&lt;const Prodaja&gt; p1, std::shared_ptr&lt;const Prodaja&gt;p2){return PorediDatume(p1-&gt;DajDatumProdaje(), p2-&gt;DajDatumProdaje()) == -1;});
}
Prodaja Prodaje::DajNajranijuProdaju()const{
    if (!spisak_prodaja.size())
        throw std::domain_error("Nema registriranih prodaja");
    return **std::min_element(spisak_prodaja.begin(), spisak_prodaja.end(), [](std::shared_ptr&lt;const Prodaja&gt; p1, std::shared_ptr&lt;const Prodaja&gt;p2){return PorediDatume(p1-&gt;DajDatumProdaje(), p2-&gt;DajDatumProdaje()) == -1;});
}
Prodaja &amp;Prodaje::DajNajskupljuProdaju(){
    if (!spisak_prodaja.size())
        throw std::domain_error("Nema registriranih prodaja");
    return **std::max_element(spisak_prodaja.begin(), spisak_prodaja.end(), [](std::shared_ptr&lt;const Prodaja&gt; p1, std::shared_ptr&lt;const Prodaja&gt;p2){return p1-&gt;DajCijenuStana() &lt; p2-&gt;DajCijenuStana();});
}
Prodaja Prodaje::DajNajskupljuProdaju()const{
    if (!DajBrojProdaja())
        throw std::domain_error("Nema registriranih prodaja");
    return **std::max_element(spisak_prodaja.begin(), spisak_prodaja.end(), [](std::shared_ptr&lt;const Prodaja&gt; p1, std::shared_ptr&lt;const Prodaja&gt;p2){return p1-&gt;DajCijenuStana() &lt; p2-&gt;DajCijenuStana();});
}
void Prodaje::IsprazniKolekciju(){
    if (!spisak_prodaja.size())
        throw std::range_error("Prazna kolekcija");
    for (int i = 0; i &lt; spisak_prodaja.size(); i++)
        spisak_prodaja.resize(0);
}
void Prodaje::ObrisiNajranijuProdaju(){
    if (!spisak_prodaja.size())
        throw std::range_error("Prazna kolekcija");
    Prodaja najranija(DajNajranijuProdaju());
    for (int i = 0; i &lt; spisak_prodaja.size(); i++){
        if (JednakeProdaje(*spisak_prodaja[i], najranija))
        spisak_prodaja.erase(spisak_prodaja.begin() + i);
    }
}
void Prodaje::ObrisiProdajeAgenta(const std::string &amp;ime_agenta){
    if (!spisak_prodaja.size())
        throw std::range_error("Prazna kolekcija");
    for (int i = 0; i &lt; spisak_prodaja.size(); i++){
        if (spisak_prodaja[i]-&gt;DajImeAgenta() == ime_agenta)
        {
            spisak_prodaja.erase(spisak_prodaja.begin() + i);
        }
    }
}
void Prodaje::ObrisiProdajeNaDatum(const Datum &amp;datum){
    if (!spisak_prodaja.size())
        throw std::range_error("Prazna kolekcija");
    for (int i = 0; i &lt; spisak_prodaja.size(); i++){
        if (PorediDatume(spisak_prodaja[i]-&gt;DajDatumProdaje(), datum) == 0)
        {
            spisak_prodaja.erase(spisak_prodaja.begin() + i);
        }
    }
}
void Prodaje::IspisiProdajeNaDatum(const Datum &amp;datum)const{
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; spisak_prodaja2(spisak_prodaja);
    std::sort(spisak_prodaja2.begin(), spisak_prodaja2.end(), [](std::shared_ptr&lt;const Prodaja&gt; p1, std::shared_ptr&lt;const Prodaja&gt; p2){
        return p1-&gt;DajImeKupca() &lt; p2-&gt;DajImeKupca();    
    });
    for (int i = 0; i &lt; spisak_prodaja.size(); i++){
        if (PorediDatume(spisak_prodaja[i]-&gt;DajDatumProdaje(), datum) == 0)
        {
            spisak_prodaja[i]-&gt;Ispisi(); std::cout &lt;&lt; std::endl;
        }
    }
}
void Prodaje::IspisiSveProdaje()const{
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; spisak_prodaja2(spisak_prodaja);
    std::sort(spisak_prodaja2.begin(), spisak_prodaja2.end(), [](std::shared_ptr&lt;const Prodaja&gt; p1, std::shared_ptr&lt;const Prodaja&gt; p2){
        return PorediDatume(p1-&gt;DajDatumProdaje(), p2-&gt;DajDatumProdaje()) == 1 || (PorediDatume(p1-&gt;DajDatumProdaje(), p2-&gt;DajDatumProdaje()) == 0 &amp;&amp; p1-&gt;DajImeKupca() &lt; p2-&gt;DajImeKupca());
    });
    for (int i = 0; i &lt; spisak_prodaja.size(); i++){
        if (spisak_prodaja[i]){
             spisak_prodaja[i]-&gt;Ispisi(); std::cout &lt;&lt; std::endl;}
    }
}

void Ignorisi(){
    std::cin.ignore(1000,'\n');
}

void IzmijeniStan(Stan &amp;s, int p){
    for(;;)
    {   
        std::string nova_adresa; int novi_sprat; double nova_kvadratura; int novi_br_soba, novi_namjesten; 
        if (p == 1){std::cout &lt;&lt; "Unesite adresu: "; std::getline(std::cin, nova_adresa);}
        else if (p == 2){std::cout &lt;&lt; "Unesite sprat: "; std::cin &gt;&gt; novi_sprat; Ignorisi();}
        else if (p == 3){std::cout &lt;&lt; "Unesite broj soba: "; std::cin &gt;&gt; novi_br_soba; Ignorisi();}
        else if (p == 4){std::cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): "; std::cin &gt;&gt; novi_namjesten; Ignorisi();}
        else if (p == 5){std::cout &lt;&lt; "Unesite kvadraturu: "; std::cin &gt;&gt; nova_kvadratura; Ignorisi();}
        try{
            if (p == 1){s.Postavi(nova_adresa, s.DajSprat(), s.DajBrojSoba(), s.DajNamjesten(), s.DajKvadraturu());} 
            else if (p == 2){s.Postavi(s.DajAdresu(), novi_sprat, s.DajBrojSoba(), s.DajNamjesten(), s.DajKvadraturu());} 
            else if (p == 3){s.Postavi(s.DajAdresu(), s.DajSprat(), novi_br_soba, s.DajNamjesten(), s.DajKvadraturu());} 
            else if (p == 4){s.Postavi(s.DajAdresu(), s.DajSprat(), s.DajBrojSoba(), novi_namjesten, s.DajKvadraturu());} 
            else if (p == 5){s.Postavi(s.DajAdresu(), s.DajSprat(), s.DajBrojSoba(), s.DajNamjesten(), nova_kvadratura);} 
            
            break;
        }catch(std::domain_error e){
            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ". Molimo unesite opet.\n";
        }
    }
}

void UnesiKupca(std::vector&lt;Kupac&gt; &amp;kupci, bool uredjivanje, int i){
    std::string iip;
    for(;;)
    {
        std::cout &lt;&lt; "Unesite ime i prezime kupca: ";
        std::getline(std::cin, iip);
        std::cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): ";
        int d, m, g; char znak;
        std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi();
        try{
            Datum dat(d, m, g); 
            if (uredjivanje) kupci[i] = Kupac(iip, dat);
            else kupci.push_back(Kupac(iip, dat)); 
            std::cout &lt;&lt; "Kupac je uspjesno " ;if (uredjivanje)std::cout &lt;&lt; "izmijenjen!\n"; else std::cout &lt;&lt; "dodan!\n"; break;
        }
        catch (std::domain_error e){
            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ". Molimo unesite opet.\n";
        }
    }
}

Stan UnesiStan(std::vector &lt;Stan&gt; &amp;stanovi, bool arhiviraj = true, bool pisi = true){
    std::string adresa; int sprat, br_soba; int namjesten; double kvadratura;
    for(;;)
    {
        std::cout &lt;&lt; "Unesite adresu: "; std::getline(std::cin, adresa);
        std::cout &lt;&lt; "Unesite sprat: "; std::cin &gt;&gt; sprat; Ignorisi();
        std::cout &lt;&lt; "Unesite broj soba: ", std::cin &gt;&gt; br_soba; Ignorisi();
        std::cout &lt;&lt; "Da li je stan namjesten (1 - da, 0 - ne): "; std::cin &gt;&gt; namjesten; Ignorisi();
        std::cout &lt;&lt; "Unesite kvadraturu: "; std::cin &gt;&gt; kvadratura; Ignorisi();
        try{
            if (namjesten != 0 &amp;&amp; namjesten != 1) throw std::domain_error("Neispravan unos podataka");
            Stan stan(adresa, sprat, br_soba, namjesten, kvadratura);
            //if (arhiviraj)
                stanovi.push_back(stan); 
            if (pisi)
                std::cout &lt;&lt; "Stan je uspjesno dodan!\n"; 
            return stan;
        }catch(std::domain_error e){
            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ". Molimo unesite opet.\n";
        }
    }
}

void DodajProdaju(Prodaje &amp;prodaje, std::vector&lt;Stan&gt; &amp;stanovi, std::vector&lt;Kupac&gt; &amp;kupci){ 
    std::string agent;
    std::cout &lt;&lt; "Unesite ime i prezime agenta prodaje: ";
    std::getline(std::cin, agent);
    std::cout &lt;&lt; "Unesite datum prodaje (formata d/m/g): ";
    for(;;)
    {
        try
        {
            int d, m, g; char znak; std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi();
            Datum datp(d,m,g);
            std::cout &lt;&lt; "Unesite cijenu stana: "; 
            double cijena; std::cin &gt;&gt; cijena; Ignorisi(); 
            std::cout &lt;&lt; "Unesite ime kupca: ";
            std::string iip; std::getline(std::cin, iip);
            std::cout &lt;&lt; "Unesite datum rodjenja kupca (formata d/m/g): "; std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi();
            Datum datrk(d, m, g);
            Kupac kupac(iip, datrk); kupci.push_back(kupac);
            Stan stan(UnesiStan(stanovi, false, false));
            prodaje.RegistrirajProdaju(agent, cijena, datp, kupac, stan);
            break;
        }
        catch(std::domain_error e){
            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ". Molimo unesite opet.\n";
        }
    }
}

void IzmijeniProdaju(Prodaje &amp;prodaje, int p, int o, const std::vector&lt;Kupac&gt; &amp;kupci, std::vector &lt;Stan&gt; &amp;stanovi){
    Prodaja &amp;prodaja(prodaje.DajProdaju(p - 1));
    std::string novi_agent, novoiip; int d, m, g; char znak; bool iz (false);int op;
    for(;;)
    {
        try{
            if (o == 1){std::cout &lt;&lt; "Unesite ime i prezime agenta prodaje: "; std::getline(std::cin, novi_agent); prodaja.PromijeniAgentaProdaje(novi_agent);}
            else if (o == 2){std::cout &lt;&lt; "Unesite datum prodaje (formata d/m/g): "; std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi(); prodaja.PromijeniDatumKupovine(Datum(d, m, g));}
            else if (o == 3){
                
                if (!iz){std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - odabir postojeceg kupca\n 2 - dodavanje novog kupca\n";  std::cin &gt;&gt; op; Ignorisi();}
                if (op == 0) break;
                else if (op ==2)
                {
                std::cout &lt;&lt; "Unesite ime i prezime kupca: "; std::getline(std::cin, novoiip); std::cout &lt;&lt; "Unesite datum rodjenja (formata d/m/g): "; std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi();
                prodaja.PromijeniKupca(Kupac(novoiip, Datum(d,m,g))); iz = false;}
<a name="8"></a><font color="#00FFFF"><a href="match510-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                else if (op == 1){
                    std::cout &lt;&lt; "Odaberite kupca. Dostupni kupci su:\n";
                    for (int i = 0; i &lt; kupci.size(); i++){
                        std::cout &lt;&lt; " " &lt;&lt; i + 1 &lt;&lt; " - "; kupci[i].Ispisi(); std::cout &lt;&lt; "\n";
</font>                    }
                    int kup; std::cin &gt;&gt; kup; Ignorisi();
                    prodaja.PromijeniKupca(kupci[kup - 1]); iz = false;
                }
            }
            else if (o == 4){
                if (!iz){std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - odabir postojeceg stana\n 2 - dodavanje novog stana\n"; std::cin &gt;&gt; op; Ignorisi();}
                
                if (op == 0) break;
<a name="9"></a><font color="#FF00FF"><a href="match510-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                else if (op == 1){
                    std::cout &lt;&lt; "Odaberite stan. Dostupni stanovi su:\n";
                    for (int i = 0; i &lt; stanovi.size(); i++)
                    {
                        std::cout &lt;&lt; " " &lt;&lt; i + 1 &lt;&lt; " - "; stanovi[i].Ispisi(); std::cout &lt;&lt; std::endl;
</font>                    }
                    int s; std::cin &gt;&gt; s; Ignorisi();
                    prodaja.PromijeniStan(stanovi[s - 1]); iz = false;
                }
                else if (op == 2){
                    Stan novi_stan(UnesiStan(stanovi, false, false));
                    prodaja.PromijeniStan(novi_stan); iz = false;
                }
                
            }
            else if (o == 5){
<a name="11"></a><font color="#00FF00"><a href="match510-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                std::cout &lt;&lt; "Unesite cijenu stana: "; double nova_cijena; std::cin &gt;&gt; nova_cijena; Ignorisi();
                prodaja.PromijeniCijenuProdaje(nova_cijena);
            }
            std::cout &lt;&lt; "Prodaja je uspjesno izmijenjena!\n"; break;
        }catch(std::domain_error e){
            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ". Molimo unesite opet.\n"; iz = true;
</font>        }
    }
}

Datum UnesiDatum(bool bezdmg = false){
    for(;;){
        int d, m , g; char znak; 
        if (!bezdmg)
        std::cout &lt;&lt; "Unesite datum (d/m/g): ";
        else std::cout &lt;&lt; "Unesite datum: ";
        std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi();
        try{
            Datum dat (d,m,g);
            return dat;
        }catch(std::domain_error e){
            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ". Molimo unesite opet.\n";
        }
    }
}

int main ()
{
    int opcija1;
    bool kraj(false); 
    std::vector &lt;Stan&gt; stanovi;
    std::vector &lt;Kupac&gt; kupci;
    Prodaje prodaje;
    
    std::cout &lt;&lt; "Dobrodosli!\n\n\n";
    for(;;)
    {
        std::cout &lt;&lt; "Izaberite opciju:\n 0 - kraj\n 1 - uredjivanje stanova\n 2 - uredjivanje kupaca\n 3 - uredjivanje prodaja\n";
        std::cin &gt;&gt; opcija1; Ignorisi();
        if (opcija1 == 0) kraj = true;
        else if (opcija1 == 1)
        {
            for(;;)
            {
                int opcija2;
                std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - dodavanje stana\n 2 - uredjivanje stanova\n 3 - ispis svih stanova\n 4 - kraj\n";
                std::cin &gt;&gt; opcija2; Ignorisi();
                if (opcija2 == 4){kraj = true; break;}
                else if (opcija2 == 0) break;
                else if(opcija2 == 1)
                {
                    UnesiStan(stanovi);
                }
                else if (opcija2 == 2){
                    std::cout &lt;&lt; "Odaberite stan. Dostupni stanovi su:\n";
                    int st;
                    for (int i = 0; i &lt; stanovi.size(); i++){
                        std::cout &lt;&lt; " " &lt;&lt; i + 1 &lt;&lt; " - "; stanovi[i].Ispisi(); std::cout &lt;&lt; "\n";
                    }
                    std::cin &gt;&gt; st; Ignorisi();
                    int p;
                    std::cout &lt;&lt; "Odaberite polje koji zelite urediti:\n";
                    std::cout &lt;&lt; " 0 - nazad\n 1 - adresa\n 2 - sprat\n 3 - broj soba\n 4 - da li je stan namjesten\n 5 - kvadratura\n 6 - sve\n";
                    std::cin &gt;&gt; p; Ignorisi();
                    if (p &gt;= 1 &amp;&amp; p &lt;= 5)IzmijeniStan(stanovi[st - 1], p);
                    else if (p == 6){for (int i = 1; i &lt; 6; i++) IzmijeniStan(stanovi[st - 1], i);}
                    std::cout &lt;&lt; "Stan je uspjesno izmijenjen!\n"; 
                }
<a name="5"></a><font color="#FF0000"><a href="match510-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                else if (opcija2 == 3){
                    for (int i = 0; i &lt; stanovi.size(); i++){
                        std::cout &lt;&lt; i + 1 &lt;&lt; ". ";stanovi[i].Ispisi(); std::cout &lt;&lt; "\n";
</font>                    }
                }
                if (kraj) break;
            }
        }
        else if (opcija1 == 2){
            for(;;)
            {
                std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - dodavanje kupca\n 2 - uredjivanje kupaca\n 3 - ispis svih kupaca\n 4 - kraj\n";
                int opcija2;
                std::cin &gt;&gt; opcija2; Ignorisi();
                if (opcija2 == 4){kraj = true; break;}
                else if (opcija2 == 0)break;
                else if (opcija2 == 1){
                    UnesiKupca(kupci, false, 0);
                }
                else if (opcija2 == 2){
                    std::cout &lt;&lt; "Odaberite kupca kojeg zelite urediti. Dostupni kupci su:\n";
                    for (int i = 0; i &lt; kupci.size(); i++){
                        std::cout &lt;&lt; " " &lt;&lt; i + 1 &lt;&lt; " - "; kupci[i].Ispisi(); std::cout &lt;&lt; "\n";}
                    int k; std::cin &gt;&gt; k; Ignorisi();
                    UnesiKupca(kupci, true, k - 1);
                }
                else if (opcija2 == 3){
                    for (int i = 0; i &lt; kupci.size(); i++)
                        {kupci[i].Ispisi(); std::cout &lt;&lt; "\n";}
                }
                if (kraj) break;
            }
        }
        else if (opcija1 == 3){
            for(;;){
                std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - dodavanje prodaje\n 2 - uredjivanje prodaje\n 3 - ispis prodaja\n 4 - brisanje prodaja\n 5 - kraj\n";
                int opcija2; std::cin &gt;&gt; opcija2; Ignorisi();
                if (opcija2 == 5) {kraj = true; break;}
                else if (opcija2 == 0) break;
                else if (opcija2 == 1){
                    for(;;)
                    {
                        std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - dodavanje potpuno nove prodaje\n 2 - dodavanje nove prodaje na osnovu arhive\n 3 - kraj\n";
                        int opcija3; std::cin &gt;&gt; opcija3; Ignorisi();
                        if (opcija3 == 0)break;
                        else if (opcija3 == 3) {kraj = true; break;}
                        else if (opcija3 == 1){
                            DodajProdaju(prodaje, stanovi, kupci);
                            std::cout &lt;&lt; "Prodaja uspjesno dodana!\n";
                        }
                        else if (opcija3 == 2){
                            for(;;)
                            {
                                std::cout &lt;&lt; "Unesite ime i prezime agenta prodaje: ";
                                std::string agent; std::getline(std::cin, agent);
                                int d, m, g; char znak; 
                                std::cout &lt;&lt; "Unesite datum prodaje (formata d/m/g): "; std::cin &gt;&gt; d &gt;&gt; znak &gt;&gt; m &gt;&gt; znak &gt;&gt; g; Ignorisi();
                                try
                                {
                                    Datum dat(d,m,g);
<a name="14"></a><font color="#FF00FF"><a href="match510-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                                    double cijena; std::cout &lt;&lt; "Unesite cijenu stana: "; std::cin &gt;&gt; cijena; Ignorisi();
                                    std::cout &lt;&lt; "Odaberite kupca. Dostupni kupci su:\n";
                                    for (int i = 0; i&lt; kupci.size(); i++){
                                        std::cout &lt;&lt; " " &lt;&lt; i + 1 &lt;&lt; " - "; kupci[i].Ispisi(); std::cout &lt;&lt; "\n";
</font>                                    }
<a name="15"></a><font color="#FF0000"><a href="match510-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                                    int k; std::cin &gt;&gt; k; Ignorisi();
                                    std::cout &lt;&lt; "Odaberite stan. Dostupni stanovi su:\n";
                                    for (int i = 0; i &lt; stanovi.size(); i++){
                                        std::cout &lt;&lt; " " &lt;&lt; i + 1 &lt;&lt; " - ";stanovi[i].Ispisi();
</font>                                        std::cout &lt;&lt; "\n";
                                    }
                                    int s; std::cin &gt;&gt; s; Ignorisi();
<a name="3"></a><font color="#00FFFF"><a href="match510-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

                                    prodaje.RegistrirajProdaju(agent, cijena, dat, kupci[k - 1], stanovi[s - 1]);
                                    std::cout &lt;&lt; "Prodaja uspjesno dodana!\n"; break;
                                    
                                }
                                catch(std::domain_error e){
                                    std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; "Molimo unesite opet.\n";
</font>                                }
                            }
                            
                        }
                    }
                }
<a name="4"></a><font color="#FF00FF"><a href="match510-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                else if (opcija2 == 2){
                    std::cout &lt;&lt; "Odaberite prodaju koju želite urediti. Dostupne prodaje su:\n";
                        for (int i = 0; i &lt; prodaje.DajBrojProdaja(); i++)
                        {
                            std::cout &lt;&lt; i + 1 &lt;&lt; ".\n"; prodaje.DajProdaju(i).Ispisi(); std::cout &lt;&lt; "\n";
</font>                        }
                    int p; std::cin &gt;&gt; p; Ignorisi();
                    for(;;)
                    {
                        std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - izmjena agenta\n 2 - izmjena datuma prodaje\n 3 - izmjena kupca\n 4 - izmjena stana\n 5 - izmjena cijene stana\n";
                        int o; std::cin &gt;&gt; o; Ignorisi();
                        if (o == 0)break;
                        IzmijeniProdaju(prodaje, p, o, kupci, stanovi); break;
                    }
                }
                else if (opcija2 == 3){
                    for(;;){
                        try{
                        std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - ispis svih prodaja\n 2 - ispis prodaja na datum\n 3 - ispis najranije prodaje\n 4 - ispis najskuplje prodaje\n 5 - ispis broja prodaja\n 6 - ispis broja prodaja po datumu\n 7 - ispis broja prodaja po agentu\n 8 - kraj\n";
                        int opcija3; std::cin &gt;&gt; opcija3; Ignorisi();
                        if (opcija3 == 0)break;
                        else if (opcija3 == 8){kraj = true; break;}
                        else if (opcija3 == 1) prodaje.IspisiSveProdaje();
                        else if (opcija3 == 2){
                            Datum dat(UnesiDatum());std::cout &lt;&lt; "Prodaje na datum "; dat.Ispisi(); std::cout &lt;&lt; " su:\n";
                            prodaje.IspisiProdajeNaDatum(dat);
                        }
<a name="1"></a><font color="#00FF00"><a href="match510-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                        else if (opcija3 == 3){ prodaje.DajNajranijuProdaju().Ispisi();std::cout &lt;&lt; std::endl;}
                        else if (opcija3 == 4){ prodaje.DajNajskupljuProdaju().Ispisi(); std::cout &lt;&lt; std::endl;}
                        else if (opcija3 == 5){std::cout &lt;&lt; "Broj prodaja: " &lt;&lt; prodaje.DajBrojProdaja() &lt;&lt; "\n";}
</font>                        else if (opcija3 == 6){
                            Datum dat(UnesiDatum());
                            std::cout &lt;&lt; "Broj prodaja na uneseni datum: ";
                            std::cout &lt;&lt; prodaje.DajBrojProdajaNaDatum(dat) &lt;&lt; std::endl;
                        }
                        else if (opcija3 == 7){
                            std::cout &lt;&lt; "Unesite ime agenta: "; 
                            std::string agent; std::getline(std::cin, agent);
                            std::cout &lt;&lt; "Broj prodaja unesenog agenta: " &lt;&lt; prodaje.DajBrojProdajaOdAgenta(agent) &lt;&lt; "\n";
                        }
                        }
                        catch(std::domain_error e){
                            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; "\n";
                        }
                        
                    }
                }
                else if (opcija2 == 4){
                    for(;;)
                    {
                        std::cout &lt;&lt; "Izaberite opciju:\n 0 - nazad\n 1 - brisanje najranije prodaje\n 2 - brisanje prodaja agenta\n 3 - brisanje prodaja po datumu\n 4 - brisanje svih prodaja\n";
                        int opcija3; std::cin &gt;&gt; opcija3; Ignorisi();
                        try{
                        if (opcija3 == 0) break;
                        else if (opcija3 == 1){ prodaje.ObrisiNajranijuProdaju(); std::cout &lt;&lt; "Najranija prodaja je obrisana!\n";}
                        else if (opcija3 == 2){ 
                            std::cout &lt;&lt; "Unesite ime agenta: "; std::string agent; std::getline(std::cin, agent);
                            prodaje.ObrisiProdajeAgenta(agent); std::cout &lt;&lt; "Sve prodaje tog agenta su obrisane.\n";}
                        else if (opcija3 == 3){
                            Datum dat(UnesiDatum(true));
                            prodaje.ObrisiProdajeNaDatum(dat);
                            std::cout &lt;&lt; "Sve prodaje na taj datum su obrisane.\n";
                        }
                        else if (opcija3 == 4){ prodaje.IsprazniKolekciju(); std::cout &lt;&lt; "Sve prodaje su obrisane.\n";}
                        }
                        catch (std::range_error e)
                        {
                            std::cout &lt;&lt; "Izuzetak: " &lt;&lt; e.what() &lt;&lt; ".\n";
                        }
                    }
                }
                if (kraj) break;
            }
            //if (kraj) break;
        }
        if (kraj) break;
    }
    std::cout &lt;&lt; "\n\nDovidjenja!";
	return 0;
}</pre>
</body>
</html>
