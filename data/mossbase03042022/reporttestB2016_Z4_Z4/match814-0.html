<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1547.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student1547.cpp<p></p><pre>
<a name="6"></a><font color="#00FF00"><a href="match814-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 4
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;

class Datum
{
    int dan, mjesec, godina;
public:
    Datum(int d, int m, int g);
</font>    Datum (const Datum&amp; dat);
    Datum operator =(const Datum&amp; dat) {
        this-&gt;Postavi(dat.dan, dat.mjesec, dat.godina);
        return *this;
    }
    void Postavi(int d, int m, int g);
    int DajDan() const {
        return dan;
    };
    int&amp; DajDan() {
        return dan;
    }
    int DajMjesec() const {
        return mjesec;
    };
    int&amp; DajMjesec() {
        return mjesec;
    };
    int DajGodinu() const {
        return godina;
    };
    int&amp; DajGodinu() {
        return godina;
    };
    void Ispisi() const {
        std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec&lt;&lt; "/"&lt;&lt; godina;
    };
};

Datum::Datum (const Datum&amp; dat)
{
    Postavi(dat.dan, dat.mjesec, dat.godina);
}
Datum::Datum(int d, int m, int g)
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
    int x=m-1;
    if(g &lt; 1 || m &lt; 1 || m &gt; 12 || d &lt; 1 || d &gt; broj_dana[x]) throw std::domain_error("Neispravan datum!");
    dan=d;
    mjesec=m;
    godina=g;
}

void Datum::Postavi(int d, int m, int g)
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0)
        broj_dana[1]++;
    int x=m-1;
    if(g &lt; 1 || m &lt; 1 || m &gt; 12 || d &lt; 1 || d &gt; broj_dana[x]) throw std::domain_error("Neispravan datum!");
    dan=d;
    mjesec=m;
    godina=g;
}

class Kupac
{
    std::string ime;
    Datum datum;
    static void TestImena(std::string s) {
        for(int i=0; i&lt;s.length(); i++) {
            if(!((s[i]&gt;='a' and s[i]&lt;='z') or (s[i]&gt;='A' and s[i]&lt;='Z') or (s[i]&gt;='0' and s[i]&lt;='9') or s[i]=='-' or s[i]==39))
                throw std::domain_error ("Neispravno ime i prezime");
        }
    };
public:
    Kupac(const std::string&amp; ime_i_prezime, const Datum&amp; datum_rodjenja): ime(ime_i_prezime), datum(datum_rodjenja) {};
    Kupac operator=(const Kupac&amp;k) {
        this-&gt;Postavi(k.ime, k.datum);
        return *this;
    }
    void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    Kupac(const Kupac&amp;k): datum(k.datum) {
<a name="1"></a><font color="#00FF00"><a href="match814-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        Postavi(k.ime, k.datum);
    }
    std::string DajImePrezime() const {
        return ime;
    };
    Datum DajDatumRodjenja() const {
        return datum;
    };
    void Ispisi() const {
        std::cout &lt;&lt; ime &lt;&lt; " (";
        datum.Ispisi();
        std::cout &lt;&lt; ")\n ";
    };
};

void Kupac::Postavi(const std::string&amp; ime_i_prezime, const Datum&amp; datum_rodjenja)
</font>{
    datum.Postavi(datum_rodjenja.DajDan(), datum_rodjenja.DajMjesec(), datum_rodjenja.DajGodinu());
    TestImena(ime_i_prezime);
    ime=ime_i_prezime;
}



class Stan
{
<a name="7"></a><font color="#0000FF"><a href="match814-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    std::string adress;
    int sprat, broj_soba;
    bool namjesten;
    double kvadratura;
public:
    Stan(const std::string &amp;adresa, int sprat1, int broj_soba1, bool namjesten1,double kvadratura1): adress(adresa), sprat(sprat1), broj_soba(broj_soba1), namjesten(namjesten1), kvadratura(kvadratura1) {
</font>        if(sprat1&lt;0 or broj_soba1&lt;0 or kvadratura1&lt;0) throw std::domain_error ("Neispravan unos podataka");
    };
    Stan(const Stan&amp; s) {
        Postavi(s.adress, s.sprat, s.broj_soba, s.namjesten, s.kvadratura);
    }
<a name="3"></a><font color="#00FFFF"><a href="match814-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
    std::string DajAdresu() const {
        return adress;
    };
    int DajSprat() const {
        return sprat;
    };
    int DajBrojSoba() const {
        return broj_soba;
    };
    bool DajNamjesten() const {
        return namjesten;
    };
    double DajKvadraturu() const {
</font>        return kvadratura;
    };
    std::string&amp; DajAdresu() {
        return adress;
    };
    int&amp; DajSprat() {
        return sprat;
    };
    int&amp; DajBrojSoba() {
        return broj_soba;
    };
    bool&amp; DajNamjesten() {
        return namjesten;
    };
    double&amp; DajKvadraturu() {
        return kvadratura;
    };
    void Ispisi() const;

};

void Stan::Postavi(const std::string &amp;adresa, int sprat1, int broj_soba1, bool namjesten1, double kvadratura1)
{
    if(sprat1&lt;0 or broj_soba1&lt;0 or kvadratura1&lt;0) throw std::domain_error ("Neispravan unos podataka");
    adress=adresa;
    sprat=sprat1;
    broj_soba=broj_soba1;
    namjesten=namjesten1;
    kvadratura=kvadratura1;
}

<a name="8"></a><font color="#00FFFF"><a href="match814-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

void Stan::Ispisi() const
{
    std::cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; adress &lt;&lt;"  na "&lt;&lt;sprat&lt;&lt;" spratu i ima "&lt;&lt;broj_soba;
    if(broj_soba%10==1) std::cout &lt;&lt; " sobu";
</font>    else if(broj_soba%10&gt;=2 and broj_soba%10&lt;=4) std::cout &lt;&lt; " sobe";
    else std::cout &lt;&lt; " soba";
    std::cout &lt;&lt; ". Kvadratura stana je "&lt;&lt;std::setprecision(2) &lt;&lt;kvadratura&lt;&lt;"(m^2) i stan ";
    if(namjesten) std::cout &lt;&lt; "je namjesten.\n";
    else std::cout &lt;&lt; "nije namjesten.\n";
}

class Prodaja
{
    std::string ime_agenta_prodaje;
    double cijena_stana;
    Datum datum_prodaje;
    Kupac kupac_stana;
    Stan kupljeni_stan;
public:
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan): ime_agenta_prodaje(ime_agenta_prodaje), cijena_stana(cijena_stana), datum_prodaje(datum_prodaje), kupac_stana(kupac_stana), kupljeni_stan(kupljeni_stan) {

    };
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje,
            std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba,
            bool namjesten_stan, double broj_kvadrata): ime_agenta_prodaje(ime_agenta_prodaje), cijena_stana(cijena_stana), datum_prodaje(dan_prodaje, mjesec_prodaje, godina_prodaje),
        kupac_stana(ime_kupca,datum_rodjenja_kupca), kupljeni_stan(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata) {};
    void PromijeniKupca(const Kupac &amp;novi_kupac) {
        kupac_stana=novi_kupac;
    };
<a name="9"></a><font color="#FF00FF"><a href="match814-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    void PromijeniStan(const Stan &amp;novi_stan) {
        kupljeni_stan.Postavi(novi_stan.DajAdresu(), novi_stan.DajSprat(), novi_stan.DajBrojSoba(), novi_stan.DajNamjesten(), novi_stan.DajKvadraturu());
</font>    };
    Kupac DajKupca(){ return kupac_stana;}
    Stan DajStan(){ return kupljeni_stan;}
<a name="4"></a><font color="#FF00FF"><a href="match814-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    void PromijeniDatumKupovine(const Datum &amp;novi_datum) {
        
        datum_prodaje.Postavi(novi_datum.DajDan(), novi_datum.DajMjesec(), novi_datum.DajGodinu());
    };
    void PromijeniCijenuProdaje(const double &amp;nova_cijena) {
        cijena_stana=nova_cijena;
    };
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    
    std::string DajImeAgenta() const {
        return ime_agenta_prodaje;
    };
    std::string&amp; DajImeAgenta() {
</font>        return ime_agenta_prodaje;
    };
    std::string DajImeKupca() const {
        return kupac_stana.DajImePrezime();
    };
    Datum DajDatumProdaje() const {
        return datum_prodaje;
    };
    Datum&amp; DajDatumProdaje() {
        return datum_prodaje;
    };
    double DajCijenuStana() const {
        return cijena_stana;
    };
    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
    friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2);
    void Ispisi() const;

};

bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
    return p1.DajCijenuStana()&gt;p2.DajCijenuStana();
};

void Prodaja::PomjeriDanUnaprijed()
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    int g=datum_prodaje.DajGodinu();
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
    int dan, mj(datum_prodaje.DajMjesec());
    if(datum_prodaje.DajDan()+1&gt;broj_dana[datum_prodaje.DajMjesec()-1]) {
        dan=1;
        mj=datum_prodaje.DajMjesec()+1;
        if(mj&gt;12) {
            g++;
        }
    } else dan=datum_prodaje.DajDan()+1;
    datum_prodaje=Datum(dan,mj,g);
}

void Prodaja::PomjeriDanUnazad()
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    int g(datum_prodaje.DajGodinu());
    if((g % 4 == 0 &amp;&amp; g % 100 != 0) || g % 400 == 0) broj_dana[1]++;
    int dan(datum_prodaje.DajDan()-1), mj(datum_prodaje.DajMjesec());
    if(dan==0) {
        dan=broj_dana[mj-2];
        mj--;
        if(--mj==0) g--;
    }
    datum_prodaje=Datum(dan, mj, g);
}

void Prodaja::Ispisi() const
{
<a name="5"></a><font color="#FF0000"><a href="match814-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    std::cout &lt;&lt; std::setw(20) &lt;&lt; std::left &lt;&lt; "Ime agenta: " &lt;&lt; ime_agenta_prodaje &lt;&lt; std::endl;
    std::cout &lt;&lt; std::setw(20) &lt;&lt; std::left &lt;&lt; "Ime kupca: ";
    kupac_stana.Ispisi();
    std::cout &lt;&lt; std::setw(20) &lt;&lt; "Zakazani datum prodaje: ";
</font>    datum_prodaje.Ispisi();
    std::cout &lt;&lt; std::endl;
    std::cout &lt;&lt; std::setw(20) &lt;&lt; std::left &lt;&lt; "Cijena stana: " &lt;&lt; cijena_stana&lt;&lt; std::endl &lt;&lt; "Informacije o stanu: \n";
    kupljeni_stan.Ispisi();

}

bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
    if(p1.DajDatumProdaje().DajGodinu()==p2.DajDatumProdaje().DajGodinu()) {
        if(p1.DajDatumProdaje().DajMjesec()==p2.DajDatumProdaje().DajMjesec()) {
            return p1.DajDatumProdaje().DajDan()&lt;p2.DajDatumProdaje().DajDan();
        } else return p1.DajDatumProdaje().DajMjesec()&lt;p2.DajDatumProdaje().DajMjesec();
    } else return p1.DajDatumProdaje().DajGodinu()&lt;p2.DajDatumProdaje().DajGodinu();
};

class Prodaje
{
    std::vector&lt;std::shared_ptr&lt;Prodaja&gt;&gt; prodaje;
public:
    explicit Prodaje() {
    };
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja) {
        for(auto it=spisak_prodaja.begin(); it!=spisak_prodaja.end(); it++) {
<a name="10"></a><font color="#FF0000"><a href="match814-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

            prodaje.push_back(std::make_shared&lt;Prodaja&gt;(*it));
        }
    };
    ~Prodaje() {    };
    Prodaje(const Prodaje &amp;prodaje);
    Prodaje(Prodaje &amp;&amp;prodaje);
    Prodaje &amp;operator =(const Prodaje &amp;prodaje);
    Prodaje &amp;operator =(Prodaje &amp;&amp;prodaje);
</font>    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje,
                            double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,
                            const Stan &amp;kupljeni_stan);
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, int dan_prodaje, double cijena_stana, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca,const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata) {
        prodaje.push_back(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, dan_prodaje, mjesec_prodaje, godina_prodaje, ime_kupca, datum_rodjenja_kupca, adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata));
    };
    void RegistrirajProdaju(std::shared_ptr&lt;Prodaja&gt; prodaja);
<a name="0"></a><font color="#FF0000"><a href="match814-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    int DajBrojProdaja() const {
        return prodaje.size();
    };
    int DajBrojProdajaNaDatum(const Datum &amp;datum) const;
    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const;
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const;
    void IsprazniKolekciju();
    void ObrisiNajranijuProdaju();
    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta);
    void ObrisiProdajeNaDatum(const Datum &amp;datum);
    void IspisiProdajeNaDatum(const Datum &amp;datum) const;
</font>    void IspisiSveProdaje() const;
};

Prodaje::Prodaje(const Prodaje &amp;p)
{
    for(int i=0; i&lt;p.prodaje.size(); i++) {
        prodaje.push_back(std::make_shared&lt;Prodaja&gt;(*p.prodaje[i]));
    }
}

Prodaje::Prodaje(Prodaje &amp;&amp;p)
{
    for(int i=0; i&lt; p.prodaje.size(); i++) {
        prodaje.push_back(p.prodaje[i]);
        p.prodaje[i]=nullptr;
    }
}
Prodaje &amp;Prodaje::operator =(const Prodaje &amp;p)
{
    for(int i=0; i&lt;p.prodaje.size(); i++) {
        prodaje.push_back(std::make_shared&lt;Prodaja&gt;(*p.prodaje[i]));
    }
    return *this;
}

Prodaje &amp;Prodaje::operator =(Prodaje &amp;&amp;p)
{
    for(int i=0; i&lt; p.prodaje.size(); i++) {
        prodaje.push_back(p.prodaje[i]);
        p.prodaje[i]=nullptr;
    }
    return *this;
}

void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan)
{
    prodaje.push_back(std::make_shared&lt;Prodaja&gt;(ime_agenta_prodaje, cijena_stana, datum_prodaje, kupac_stana, kupljeni_stan));
}


void Prodaje::RegistrirajProdaju(std::shared_ptr&lt;Prodaja&gt; prodaja)
{
    prodaje.push_back(prodaja);
}

int Prodaje::DajBrojProdajaNaDatum(const Datum &amp;datum) const
{
<a name="11"></a><font color="#00FF00"><a href="match814-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    int br(0);
    for(int i=0; i&lt;prodaje.size(); i++) {
        if(prodaje[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan() and prodaje[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() and prodaje[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu() ) {
</font><a name="12"></a><font color="#0000FF"><a href="match814-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

            br++;
        }
    }
    return br;
}

int Prodaje::DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const
{
    int br(0);
</font><a name="2"></a><font color="#0000FF"><a href="match814-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    for(int i=0; i&lt;prodaje.size(); i++) {
        if(prodaje[i]-&gt;DajImeAgenta()==ime_agenta) br++;
    }
    return br;
}

Prodaja &amp;Prodaje::DajNajranijuProdaju()
{
    if(prodaje.size()==0) throw std::domain_error("Nema registriranih prodaja");
    auto it=std::min_element(prodaje.begin(), prodaje.end(),  [](std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) {
</font>        return ProdatPrije(*p1, *p2);
    });
    return **it;
}

Prodaja Prodaje::DajNajranijuProdaju() const
{
    if(prodaje.size()==0) throw std::domain_error("Nema registriranih prodaja");
    return DajNajranijuProdaju();
}

Prodaja &amp;Prodaje::DajNajskupljuProdaju()
{
    if(prodaje.size()==0) throw std::domain_error("Nema registriranih prodaja");
    auto it=std::max_element(prodaje.begin(), prodaje.end(), [](std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) {
        return SkupljiStan(*p1, *p2);
    });
    return **it;
};
Prodaja Prodaje::DajNajskupljuProdaju() const
{
    if(prodaje.size()==0) throw std::domain_error("Nema registriranih prodaja");
    auto it=std::max_element(prodaje.begin(), prodaje.end(),  [](std::shared_ptr&lt;Prodaja&gt; p1, std::shared_ptr&lt;Prodaja&gt; p2) {
        return SkupljiStan(*p1, *p2);
    });
    return **it;
}

void Prodaje::IsprazniKolekciju()
{
    for(int i=0; i&lt;prodaje.size(); i++) {
        prodaje[i]=nullptr;
    }
}
void Prodaje::ObrisiNajranijuProdaju()
{
    auto it=&amp;DajNajranijuProdaju();
    it=nullptr;
}
void Prodaje::ObrisiProdajeAgenta(const std::string &amp;ime_agenta)
{
<a name="13"></a><font color="#00FFFF"><a href="match814-1.html#13" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    for(int i=0; i&lt; prodaje.size(); i++) {
        if(prodaje[i]-&gt;DajImeAgenta()==ime_agenta) {
            prodaje[i]=nullptr;
</font>        }
    };
}
void Prodaje::ObrisiProdajeNaDatum(const Datum &amp;datum)
{
    for(int i=0; i&lt;prodaje.size(); i++) {
        if(prodaje[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan() and prodaje[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() and prodaje[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu() ) {
            prodaje[i]=nullptr;
        }
    }
};
void Prodaje::IspisiProdajeNaDatum(const Datum &amp;datum) const
{
    for(int i=0; i&lt;prodaje.size(); i++) {
        if(prodaje[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan() and prodaje[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() and prodaje[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu() ) {
            prodaje[i]-&gt;Ispisi();
        }
    };
}
void Prodaje::IspisiSveProdaje() const
{
    for(int i=0; i&lt;prodaje.size(); i++) {
        prodaje[i]-&gt;Ispisi();
    }
};
int main(){
    return 0;
}</pre>
</body>
</html>
