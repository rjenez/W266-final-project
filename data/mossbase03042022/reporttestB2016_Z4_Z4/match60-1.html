<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student9972.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z4/student9538.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match60-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 4
//Napomena: testovi ce biti dostupni dan pred rok!

#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;

using namespace std;


class Datum
{
    int dan,mjesec,godina;
    
    public:
    Datum(int dan,int mjesec,int godina)
    {
        int niz[12]={31,28,31,30,31,30,30,31,30,31,30,31};
        if(godina%4==0 &amp;&amp; godina%100!=0 &amp;&amp; godina%400==0) niz[1]++;
        
        
        if(dan&gt;niz[mjesec-1] || mjesec&lt;0 || mjesec&gt;12 || dan&lt;0) throw domain_error("Neispravan datum");
        
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    void Postavi(int dan,int mjesec,int godina)
    {
        int niz[12]={31,28,31,30,31,30,30,31,30,31,30,31};
        if(godina%4==0 &amp;&amp; godina%100!=0 &amp;&amp; godina%400==0) niz[1]++;
        
        
        if(dan&gt;niz[mjesec-1] || mjesec&lt;0 || mjesec&gt;12 || dan&lt;0) throw domain_error("Neispravan datum");
        
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    int DajDan()const{return dan;}
    int DajMjesec()const{return mjesec;}
    int DajGodinu()const{return godina;}
    void Ispisi()const
    {
        cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
    
};

class Kupac
{
    string ime;
    Datum datum;
    
    char ToUpper(char s)
    {
        if(s&gt;='a' &amp;&amp; s&lt;='z')
            s-=32;
        return s;
    }
    
    public:
    Kupac(const std::string &amp;ime_i_prezime,const Datum &amp;datum_rodjenja):datum(datum_rodjenja.DajDan(),datum_rodjenja.DajMjesec(),datum_rodjenja.DajGodinu())
    {
        for(int i=0;i&lt;ime_i_prezime.size();i++)
        {
            if((ToUpper(ime_i_prezime[i])&lt;'A' || ToUpper(ime_i_prezime[i])&gt;'Z') &amp;&amp; ime_i_prezime[i]!=' ')
                throw domain_error("Neispravno ime i prezime");
        }
        ime=ime_i_prezime;
    }
    void Postavi(const std::string &amp;ime_i_prezime,const Datum &amp;datum_rodjenja)
    {
        for(int i=0;i&lt;ime_i_prezime.size();i++)
        {
            if((ToUpper(ime_i_prezime[i])&lt;'A' || ToUpper(ime_i_prezime[i])&gt;'Z') &amp;&amp; ime_i_prezime[i]!=' ')
                throw domain_error("Neispravno ime i prezime");
        }
        ime=ime_i_prezime;
        datum.Postavi(datum_rodjenja.DajDan(),datum_rodjenja.DajMjesec(),datum_rodjenja.DajGodinu());

    }
    std::string DajImePrezime()const{return ime;}
    Datum DajDatumRodjenja() const{return datum;}
    void Ispisi() const
    {
        cout&lt;&lt;ime&lt;&lt;"(";
        datum.Ispisi();
        cout&lt;&lt;")";
    }
    
};

class Stan
{
    string adresa;
    int sprat,broj_soba;
    bool namjesten;
    double kvadratura;
    
    public:
    Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten,double kvadratura)
    {
        if(sprat&lt;0 || broj_soba&lt;0 || kvadratura&lt;0) throw domain_error("Neispravan unos podataka");
        Stan::adresa=adresa;
        Stan::sprat=sprat;
        Stan::broj_soba=broj_soba;
        Stan::namjesten=namjesten;
        Stan::kvadratura=kvadratura;
    }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba,bool namjesten, double kvadratura)
    {
        if(sprat&lt;0 || broj_soba&lt;0 || kvadratura&lt;0) throw domain_error("Neispravan unos podataka");
        Stan::adresa=adresa;
        Stan::sprat=sprat;
        Stan::broj_soba=broj_soba;
        Stan::namjesten=namjesten;
        Stan::kvadratura=kvadratura;
    }
    std::string DajAdresu() const
    {
        return adresa;
    }
    int DajSprat() const
    {
        return sprat;
    }
    int DajBrojSoba() const
    {
        return broj_soba;
    }
    bool DajNamjesten() const
    {
        return namjesten;
    }
    double DajKvadraturu() const
    {
        return kvadratura;
    }
    void Ispisi() const
    {
        cout&lt;&lt;"Stan se nalazi na adresi "&lt;&lt;adresa&lt;&lt;" na "&lt;&lt;sprat&lt;&lt;". spratu i ima "&lt;&lt;broj_soba&lt;&lt;" soba."&lt;&lt;endl;
        cout&lt;&lt;"Kvadratura stana je "&lt;&lt;kvadratura&lt;&lt;" (m^2) i ";
        if(namjesten) cout&lt;&lt;"stan je namjesten.";
        else cout&lt;&lt;"stan nije namjesten.";
    }

};

class Prodaja
{
  string ime_agenta;
  double cijena;
  Datum d;Kupac k;Stan s;
  
  char ToUpper(char s)
    {
        if(s&gt;='a' &amp;&amp; s&lt;='z')
            s-=32;
        return s;
    }
    
  
  public:
      Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,
     const Stan &amp;kupljeni_stan):d(datum_prodaje),k(kupac_stana),s(kupljeni_stan)
     {   
         for(int i=0;i&lt;ime_agenta_prodaje.size();i++)
        {
            if((ToUpper(ime_agenta_prodaje[i])&lt;'A' || ToUpper(ime_agenta_prodaje[i])&gt;'Z') &amp;&amp; ime_agenta_prodaje[i]!=' ')
                throw domain_error("Neispravno ime i prezime");
        }
         ime_agenta=ime_agenta_prodaje;
         cijena=cijena_stana;
     }
     
      Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana,int dan_prodaje, int mjesec_prodaje, int godina_prodaje,
     std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca,
     const std::string &amp;adresa_stana, int sprat_stana, int broj_soba,
     bool namjesten_stan, double broj_kvadrata):d(dan_prodaje,mjesec_prodaje,godina_prodaje),k(ime_kupca,datum_rodjenja_kupca),s(adresa_stana,sprat_stana,broj_soba,namjesten_stan,broj_kvadrata)
     {
         for(int i=0;i&lt;ime_agenta_prodaje.size();i++)
        {
            if((ToUpper(ime_agenta_prodaje[i])&lt;'A' || ToUpper(ime_agenta_prodaje[i])&gt;'Z') &amp;&amp; ime_agenta_prodaje[i]!=' ')
                throw domain_error("Neispravno ime i prezime");
        }
         ime_agenta=ime_agenta_prodaje;
         cijena=cijena_stana;
     }
     void PromijeniKupca(const Kupac &amp;novi_kupac)
     {
         k.Postavi(novi_kupac.DajImePrezime(),novi_kupac.DajDatumRodjenja());
     }
     void PromijeniStan(const Stan &amp;novi_stan)
     {
         s.Postavi(novi_stan.DajAdresu(),novi_stan.DajSprat(),novi_stan.DajBrojSoba(),novi_stan.DajNamjesten(),novi_stan.DajKvadraturu());
     }
     void PromijeniDatumKupovine(const Datum &amp;novi_datum)
     {
         d.Postavi(novi_datum.DajDan(),novi_datum.DajMjesec(),novi_datum.DajGodinu());
     }
     void PromijeniCijenuProdaje(const double &amp;nova_cijena)
     {
         cijena=nova_cijena;
     }
     
     void PomjeriDanUnaprijed()
     {
        int niz[12]={31,28,31,30,31,30,30,31,30,31,30,31};
        if(d.DajGodinu()%4==0 &amp;&amp; d.DajGodinu()%100!=0 &amp;&amp; d.DajGodinu()%400==0) niz[1]++;
        
        if(d.DajDan()==niz[d.DajMjesec()-1] &amp;&amp; d.DajMjesec()&lt;12) d.Postavi(1,d.DajMjesec()+1,d.DajGodinu());
        else if(d.DajDan()==niz[d.DajMjesec()-1] &amp;&amp; d.DajMjesec()==12) d.Postavi(1,1,d.DajGodinu()+1);
        else d.Postavi(d.DajDan()+1,d.DajMjesec(),d.DajGodinu());
     }
     void PomjeriDanUnazad()
     {
         
        int niz[12]={31,28,31,30,31,30,30,31,30,31,30,31};
        if(d.DajGodinu()%4==0 &amp;&amp; d.DajGodinu()%100!=0 &amp;&amp; d.DajGodinu()%400==0) niz[1]++;
        
        if(d.DajDan()==1 &amp;&amp; d.DajMjesec()&gt;1) d.Postavi(niz[d.DajMjesec()-2],d.DajMjesec()-1,d.DajGodinu());
        else if(d.DajDan()==1 &amp;&amp; d.DajMjesec()==1) d.Postavi(niz[11],12,d.DajGodinu()-1);
        else d.Postavi(d.DajDan()-1,d.DajMjesec(),d.DajGodinu());
     }
     
     std::string DajImeAgenta() const
     {
         return ime_agenta;
     }
     std::string DajImeKupca() const
     {
         return k.DajImePrezime();
     }
     Datum DajDatumProdaje() const
     {
         return d;
     }
     double DajCijenuStana() const
     {
         return cijena;
     }
    
     friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
     friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2);
     
     void Ispisi() const
     {
         cout&lt;&lt;"Ime agenta: "; cout&lt;&lt;ime_agenta; cout&lt;&lt;endl;
         cout&lt;&lt;"Ime kupca: "; k.Ispisi(); cout&lt;&lt;endl;
         cout&lt;&lt;"Zakazani datum prodaje: ";d.Ispisi(); cout&lt;&lt;endl;
         cout&lt;&lt;"Cijena stana: "&lt;&lt;cijena; cout&lt;&lt;endl;
         cout&lt;&lt;"Informacije o stanu: "&lt;&lt;endl;
         s.Ispisi();
     }
};

class Prodaje
{
  int trenutno;
  vector&lt;shared_ptr&lt;Prodaja&gt;&gt; prod;
  
  public:
  explicit Prodaje()
  {
      trenutno=0;
     
  }
  Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja)
  {
      trenutno=spisak_prodaja.size();
      
      auto j=spisak_prodaja.begin();
      for(int i=0;i&lt;trenutno;i++){
        prod.push_back(make_shared&lt;Prodaja&gt;(*j));j++;
      }
      
  }
  ~Prodaje()
  {
      for(int i=0;i&lt;trenutno;i++)
             prod[i]=nullptr;
    
    
  }
    Prodaje(const Prodaje &amp;prodaje)
    {
        trenutno=prodaje.trenutno;
        
        for(int i=0;i&lt;trenutno;i++)
             prod.push_back(make_shared&lt;Prodaja&gt;(*prodaje.prod[i]));
      
    }
    Prodaje(Prodaje &amp;&amp;prodaje)
    {
        trenutno=prodaje.trenutno;
        
        for(int i=0;i&lt;trenutno;i++)
            prod.push_back(prodaje.prod[i]);
    }
    Prodaje &amp;operator =(const Prodaje &amp;prodaje)
    {
        if(this==&amp;prodaje) return *this;
        
        for(int i=0;i&lt;trenutno;i++)
                prod[i]=nullptr;
        
        trenutno=prodaje.trenutno;
        
        
        for(int i=0;i&lt;trenutno;i++)
           prod.push_back(make_shared&lt;Prodaja&gt;(*prodaje.prod[i]));
     
        return *this;
    }
    Prodaje &amp;operator =(Prodaje &amp;&amp;prodaje)
    {
        if(this==&amp;prodaje) return *this;
        
        for(int i=0;i&lt;trenutno;i++)
                prod[i]=nullptr;
        
        trenutno=prodaje.trenutno;
        
        
    for(int i=0;i&lt;trenutno;i++)
            prod.push_back(prodaje.prod[i]);
        
        return *this;
        
    }
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje,
     double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana,
    const Stan &amp;kupljeni_stan)
    {
       
            prod.push_back(make_shared&lt;Prodaja&gt;(ime_agenta_prodaje,cijena_stana,datum_prodaje,kupac_stana,kupljeni_stan));
            trenutno++;    
    
    }
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje,double cijena_stana ,int dan_prodaje,
    int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca,
     const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,
     int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata)
     {
            Datum d(dan_prodaje,mjesec_prodaje,godina_prodaje);
            Kupac k(ime_kupca,datum_rodjenja_kupca);
            Stan s(adresa_stana,sprat_stana,broj_soba,namjesten_stan,broj_kvadrata);
            RegistrirajProdaju(ime_agenta_prodaje,cijena_stana,d,k,s);
     }
    void RegistrirajProdaju(Prodaja *prodaja)
    {
            prod.push_back(make_shared&lt;Prodaja&gt;(*prodaja));
            trenutno++;    
    }
    int DajBrojProdaja() const
    {
        return trenutno;
    }
    
    int DajBrojProdajaNaDatum(const Datum &amp;datum) const
    {
      return count_if(prod.begin(),prod.end(),[datum](shared_ptr&lt;Prodaja&gt; p){if(p-&gt;DajDatumProdaje().DajDan()==datum.DajDan() &amp;&amp; p-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() &amp;&amp; p-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu()) return true;return false;});

    }
    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const
    {
        return count_if(prod.begin(),prod.end(),[ime_agenta](shared_ptr&lt;Prodaja&gt; p){if(p-&gt;DajImeAgenta()==ime_agenta) return true;return false;});
    }
   
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const;
   
    void IsprazniKolekciju()
    {
        for(int i=0;i&lt;trenutno;i++)
             prod[i]=nullptr;
        trenutno=0;
    }
    void ObrisiNajranijuProdaju();
    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta)
    {
        for(int i=0;i&lt;trenutno;i++)
        {
            if(prod[i]-&gt;DajImeAgenta()==ime_agenta)
            {
                prod[i]=nullptr;
                for(int j=i;j&lt;trenutno-1;j++)
                    prod[j]=prod[j+1];
                trenutno--;
                i--;
            }
        }
    }
    void ObrisiProdajeNaDatum(const Datum &amp;datum)
    {
        for(int i=0;i&lt;trenutno;i++)
        {
            if(prod[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan() &amp;&amp; prod[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() &amp;&amp; prod[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu())
            {
                prod[i]=nullptr;
                for(int j=i;j&lt;trenutno-1;j++)
                    prod[j]=prod[j+1];
                trenutno--;
                i--;
            }
        }
    }
    void IspisiProdajeNaDatum(const Datum &amp;datum) const
    {
        for(int i=0;i&lt;trenutno;i++)
        {
            if(prod[i]-&gt;DajDatumProdaje().DajDan()==datum.DajDan() &amp;&amp; prod[i]-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() &amp;&amp; prod[i]-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu())
            {
                prod[i]-&gt;Ispisi();
                cout&lt;&lt;endl;
            }
        }
    }
    
    void IspisiSveProdaje() const
    {
        for(int i=0;i&lt;trenutno;i++){
            prod[i]-&gt;Ispisi();cout&lt;&lt;endl;
            
        }
    }

};



int main ()
</font>{
	return 0;
}</pre>
</body>
</html>
