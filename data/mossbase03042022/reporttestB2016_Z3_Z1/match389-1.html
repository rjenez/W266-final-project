<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6007.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2567.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;

std::function&lt;double(double)&gt; BaricentricnaInterpolacija (std::vector&lt;std::pair&lt;double, double&gt;&gt; ci, int d)
{
    int n = ci.size();
<a name="1"></a><font color="#00FF00"><a href="match389-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    std::vector&lt;double&gt; w(ci.size());
    
    if(d &lt; 0 || d &gt;= n)
        throw std::domain_error("Nedozvoljen red");
        
    for(int i = 0; i &lt; n; i++)
        for(int j = i + 1; j &lt; n; j++)
            if(ci.at(i).first == ci.at(j).first)
</font>                throw std::domain_error("Neispravni cvorovi");
    
    double proizvod = 1;
    for(int i = 1; i &lt;= n; i++)
        for(int k = std::max(1, i - d); k &lt;= std::min(i, n - d); k++)
        { 
            proizvod = 1;
            for(int j = k; j &lt;= k + d; j++)
                {
                    if(i == j)
                        continue;
                        
                    proizvod *= 1 / (ci.at(i - 1).first - ci.at(j - 1).first);
                }
            w.at(i - 1) += std::pow(-1, k - 1) * proizvod;
        }
        
    return [w, n, ci](double x)
            {
                double suma1 = 0, suma2 = 0;
                for(int i = 0; i &lt; n; i++)
                {   
                    if(x == ci.at(i).first)
                        return ci.at(i).second;
                        
                    suma1 += (w.at(i)/(x - ci.at(i).first)) * ci.at(i).second;
                    suma2 += w.at(i) / (x - ci.at(i).first);
                }   
                return suma1/suma2;
            };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija (std::function&lt;double(double)&gt; f, double xmin, double xmax, double dx, int d)
{
    if(xmin &gt; xmax || dx &lt;= 0)
        throw std::domain_error("Nekorektni parametri");
    
    std::vector&lt;std::pair&lt;double, double&gt;&gt; vek;
    
    for(double i = xmin; i &lt;= xmax; i += dx)
    {
        std::pair&lt;double, double&gt; p = std::make_pair(i, f(i));
        vek.push_back(p);
    }
    
    return BaricentricnaInterpolacija(vek, d);
}

double f(double x)
{
    return x * x + std::sin(x);
}

int main ()
{
    int a;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; a;
    
    std::vector&lt;std::pair&lt;double, double&gt;&gt; vek;
    if(a == 1)
    {
        int n, r;
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; n;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i = 0; i &lt; n; i++)
        {
            double x, y;
            std::pair&lt;double, double&gt; p;
<a name="3"></a><font color="#00FFFF"><a href="match389-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            std::cin &gt;&gt; x &gt;&gt; y;
            p = std::make_pair(x, y);
            vek.push_back(p);
        }
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; r;
</font>        double arg;
        double vr = 0;
        try
        {
<a name="0"></a><font color="#FF0000"><a href="match389-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_11.gif"/></a>

            std::function&lt;double(double)&gt; fu = BaricentricnaInterpolacija(vek, r);
            
            for(; ;)
            {
                vr = 0;
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::cin &gt;&gt; arg;
            
                if(!std::cin)
                    break;
                
                vr = fu(arg);
                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; vr &lt;&lt; std::endl;
            }
        }
        catch(std::domain_error e)
        {
            std::cout &lt;&lt; e.what();
        }
    }
    
    if(a == 2)
    {
        double poc, kr, dx, arg;
        int r;
        double vr1 = 0, vr2 = 0;
</font><a name="2"></a><font color="#0000FF"><a href="match389-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        std::cin &gt;&gt; poc &gt;&gt; kr &gt;&gt; dx;
        
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; r;
        
        try
        {
            std::function&lt;double(double)&gt; fu = BaricentricnaInterpolacija(f, poc, kr, dx, r);
</font>            for(; ;)
            {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::cin &gt;&gt; arg;
            "
                if(!std::cin)
                    break;
                    
            
                vr1 = f(arg);
                vr2 = fu(arg);
                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; vr1 &lt;&lt; " fapprox(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; vr2 &lt;&lt; std::endl;
            }
        }
        
        catch(std::domain_error e)
        {
            std::cout &lt;&lt; e.what();
        }
    }
	return 0;
}</pre>
</body>
</html>
