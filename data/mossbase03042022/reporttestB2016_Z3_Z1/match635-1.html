<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3715.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1263.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match635-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

/B2016/2017: Zadaća 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;//za "kraj"
#include &lt;cmath&gt;

int Max(int x, int y) {
    if(x&gt;y) return x;
    else return y;
}

int Min(int x, int y) {
    if(x&lt;y) return x;
    else return y;
</font>}

double proizvod(int k, int i, int d, std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi) {
    double proizvod(1);
    for(int j=k; j&lt;=k+d; j++){
    if(i==j) continue;
    proizvod*=(1./(cvorovi[i-1].first-cvorovi[j-1].first));
   }
    
    return proizvod;
}

double TezinskiKoeficijent(int i, int d, std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi) {
    
    double suma(0);
    for(int k=Max(1,i-d); k&lt;=Min(i,cvorovi.size()-d); k++)
        {
            suma+=std::pow(-1,(k-1))*proizvod(k,i,d,cvorovi);
        }  
    return suma;    
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi, int d){
    if(d&lt;0 || d&gt;=cvorovi.size()) throw std::domain_error("Nedozvoljen red");
    for(int i=0; i&lt;cvorovi.size();i++)
<a name="1"></a><font color="#00FF00"><a href="match635-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        for(int j=i+1; j&lt;cvorovi.size(); j++)
            if(cvorovi[i].first == cvorovi[j].first) throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt; koeficijenti(cvorovi.size());
    for(int i=0; i&lt;cvorovi.size(); i++) {
</font>        koeficijenti[i]=TezinskiKoeficijent(i+1,d,cvorovi);
    }
    return[cvorovi, koeficijenti](double x)-&gt;double{
        double suma1(0), suma2(0);
        for(int i=0; i&lt;cvorovi.size(); i++) {
            if(x==cvorovi[i].first) return cvorovi[i].second;
            suma1+=(koeficijenti[i]/(x-cvorovi[i].first))*cvorovi[i].second;
            suma2+=koeficijenti[i]/(x-cvorovi[i].first);
        }
        return suma1/suma2;
    };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(double f(double), double x_min, double x_max, double x_delta, int d ){
    if(x_max&lt;x_min || x_delta&lt;=0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi;
    double n(x_min);
    while(n&lt;=x_max) {
        std::pair&lt;double,double&gt; par;
        par.first=n; 
        par.second=f(n); 
        cvorovi.push_back(par);
        n+=x_delta;
    }
   
    return BaricentricnaInterpolacija(cvorovi,d);
}

double f(double x) {
    return x*x+sin(x);
}

int main ()
{   int opcija;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
<a name="2"></a><font color="#0000FF"><a href="match635-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

    std::cin&gt;&gt;opcija;
    if(opcija==1) {
        int broj_cvorova;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        std::cin&gt;&gt;broj_cvorova;
        //da li provjeravam da li je broj čvorova manji od 0?
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi(broj_cvorova);
        for(auto &amp;x: cvorovi){
</font>            std::cin&gt;&gt;x.first&gt;&gt;x.second;
        }
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        std::cin&gt;&gt;d;
        try{
            std::function&lt;double(double)&gt; f(BaricentricnaInterpolacija(cvorovi,d));
            double x;
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::cin&gt;&gt;x;
            while(std::cin) {
                std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl; 
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): "; 
                std::cin&gt;&gt;x;
            }
        }
        catch(std::domain_error izuzetak){
            std::cout&lt;&lt;izuzetak.what();
        } //možda ovdje treba da se vektor šalje po referenci jer bi mogao biti glomazan           
    }
<a name="3"></a><font color="#00FFFF"><a href="match635-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    if(opcija==2) {
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        int x_min, x_max;
        double x_delta;
        std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;x_delta;
</font>        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        std::cin&gt;&gt;d;
        try{
            auto fapprox(BaricentricnaInterpolacija(f, x_min, x_max, x_delta, d));
            double x;
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::cin &gt;&gt; x;
            while(std::cin) {
                if(!(std::cin.peek&gt;='0'&amp;&amp;std::cin.peek&lt;='9')&amp;&amp;std::cin!='\n') return 0; 
                std::cout&lt;&lt; "f(" &lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;fapprox(x)&lt;&lt;std::endl;
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                std::cin&gt;&gt;x;
            }
        }
        catch (std::domain_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        }
    }
	return 0;
}</pre>
</body>
</html>
