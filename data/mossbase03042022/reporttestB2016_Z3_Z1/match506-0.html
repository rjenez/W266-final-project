<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student4167.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student4167.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; vp, int d) {
    int n(vp.size());
    if(d&lt;0 or d&gt;n) throw std::domain_error("Nedozvoljen red");
    for(int i(0); i&lt;n; i++)
        for(int j(i+1); j&lt;n; j++)
            if(vp[i].first==vp[j].first) throw std::domain_error("Neispravni cvorovi");
    return [vp, d, n] (double x) { double temp2(0), temp3(0);
                                for(int i(1); i&lt;=n; i++) {
                                    if(vp[i-1].first==x) return vp[i-1].second;
                                    double w(0);
                                    int temp(n-d);
                                    if(i&lt;temp) temp=i;
                                    int k(1);
                                    if((i-d)&gt;1) k=i-d;
                                    for(; k&lt;=temp; k++) {
                                        double wtemp(1);
                                        for(int j(k); j&lt;=(k+d); j++) {
                                            if(j!=i) {
                                                wtemp*=1./(vp[i-1].first-vp[j-1].first);
                                            }
                                        }
                                        if((k-1)%2!=0) wtemp = -wtemp;
                                        w+=wtemp;
                                    }
                                    temp2 += w/(x-vp[i-1].first);
                                    temp3 += (w/(x-vp[i-1].first))*vp[i-1].second;
                                }
                                return temp3/temp2;
    };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double x_min, double x_max, double delta_x, int d) {
<a name="4"></a><font color="#FF00FF"><a href="match506-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    if(x_min&gt;x_max or delta_x&lt;=0) throw std::domain_error ("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; vp;
    while(x_min &lt;= x_max) {
        vp.push_back({x_min, f(x_min)});
</font>        x_min+=delta_x;
    }
    int n(vp.size());
    return [vp, d, n] (double x) { double temp2(0), temp3(0);
                                for(int i(1); i&lt;=n; i++) {
                                    if(vp[i-1].first==x) return vp[i-1].second;
                                    double w(0);
                                    int temp(n-d);
                                    if(i&lt;temp) temp=i;
                                    int k(1);
                                    if((i-d)&gt;1) k=i-d;
                                    for(; k&lt;=temp; k++) {
                                        double wtemp(1);
                                        for(int j(k); j&lt;=(k+d); j++) {
                                            if(j!=i) {
                                                wtemp*=1./(vp[i-1].first-vp[j-1].first);
                                            }
                                        }
                                        if((k-1)%2!=0) wtemp = -wtemp;
                                        w+=wtemp;
                                    }
                                    temp2 += w/(x-vp[i-1].first);
                                    temp3 += (w/(x-vp[i-1].first))*vp[i-1].second;
                                }
                                return temp3/temp2;
    };
}

int main ()
{   
    try {
    std::function&lt;double(double)&gt; fun = [] (double x) {return x*x+std::sin(x);};
    int broj;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; broj;
<a name="1"></a><font color="#00FF00"><a href="match506-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    if(broj == 1) {
        int n;
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; n;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; vp(n);
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i(0); i&lt;n; i++) std::cin &gt;&gt; vp[i].first &gt;&gt; vp[i].second;
</font><a name="2"></a><font color="#0000FF"><a href="match506-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        int d;
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; d;
</font>        auto f(BaricentricnaInterpolacija(vp, d));
        while(1) {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double x; std::cin &gt;&gt; x;
            if(!std::cin) break;
            std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x) &lt;&lt; std::endl;
        }
<a name="0"></a><font color="#FF0000"><a href="match506-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    } else if(broj == 2) {
        double x_min, x_max, delta_x;
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        std::cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; delta_x;
        int d;
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; d;
</font>        auto f(BaricentricnaInterpolacija(fun, x_min, x_max, delta_x, d));
        while(1) {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double x; std::cin &gt;&gt; x;
<a name="3"></a><font color="#00FFFF"><a href="match506-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            if(!std::cin) break;
            std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; fun(x) &lt;&lt; " fapprox(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x) &lt;&lt; std::endl;
</font>        }
    }
    }
    catch(std::domain_error a) {
        std::cout &lt;&lt; "Izuzetak: " &lt;&lt; a.what();
    }
	return 0;
}</pre>
</body>
</html>
