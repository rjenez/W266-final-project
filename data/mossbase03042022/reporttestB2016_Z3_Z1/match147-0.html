<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6369.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6369.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match147-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include&lt;vector&gt;
#include&lt;functional&gt;
#include&lt;algorithm&gt;
#include&lt;cmath&gt;
#include&lt;stdexcept&gt;

using namespace std;

#define eps 0.000000001

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi){
    if(cvorovi.size()&lt;1) throw domain_error("Neispravan broj cvorova");
    std::sort(cvorovi.begin(),cvorovi.end(), [](std::pair&lt;double,double&gt;a, std::pair&lt;double,double&gt; b){return a.first&lt;b.first;});
    for(int i(0); i &lt; cvorovi.size()-1; i++)
        if(fabs(cvorovi[i].first - cvorovi[i+1].first)&lt;eps)
            throw std::domain_error("Neispravni cvorovi");
    return [=](double x)
    {
        if(x&lt;cvorovi.at(0).first || x&gt;cvorovi.at(int(cvorovi.size())-1).first)
            throw std::range_error("Argument izvan opsega");
        int n = cvorovi.size();
        for(auto p : cvorovi)
        {
            if(fabs(p.first - x) &lt; eps)
                return p.second;
        }
        
        //u slucaju da bude izbacivoa neki cudni error, samo pogledaj treba li zamijenit mjesta par i x varijablama
        
        //u slucaju da ne bude tacan rezultat i bude cudan, probaj ovo &lt;= u &gt;= i tjt
        auto iterator(std::lower_bound(cvorovi.begin(),cvorovi.end(),x,[](std::pair&lt;double,double&gt; par, int x) { return par.first&lt;=x;}));
        
        int indeks(iterator-cvorovi.begin()-1);
        
        
        double brojnik(cvorovi.at(indeks+1).second - cvorovi.at(indeks).second);
        double nazivnik(cvorovi.at(indeks+1).first - cvorovi.at(indeks).first);
        return cvorovi.at(indeks).second + (brojnik/nazivnik)*(x-cvorovi.at(indeks).first);
    };
}


//Ovo je ok samo treba promijeniti ime funkcije
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xmin, double xmax,double deltax){
    if(xmin &gt; xmax || deltax &lt;= 0)
        throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi;
    while(xmin &lt;= xmax)
    {
        double t_x,t_y;
        t_x = xmin;
        t_y = f(t_x);
        cvorovi.push_back(std::make_pair(t_x,t_y));
        xmin += deltax;
    }
    return BaricentricnaInterpolacija(cvorovi);
}

double funkcija(double x) { return x*x + sin(x); }


int main ()
{
    
    int opcija;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;opcija;
    if(opcija == 1)
    {
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int brojCvorova;
        std::cin&gt;&gt;brojCvorova;
        std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        double x,y;
        for(int i(0); i &lt; brojCvorova; i++)
        {
            std::cin&gt;&gt;x&gt;&gt;y;
            cvorovi.push_back(std::make_pair(x,y));
        }
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        std::cin&gt;&gt;d;
        auto f(BaricentricnaInterpolacija(cvorovi,d));
        for(;;)
        {
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            double arg;
            std::cin&gt;&gt;arg;
            if(!std::cin) break;
            std::cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt; f(arg) &lt;&lt;std::endl; 
        }
    }
    else if(opcija == 2)
    {
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double xmin,xmax,deltax;
        std::cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;deltax;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        auto f(BaricentricnaInterpolacija(funkcija,xmin,xmax,deltax,d));
        for(;;)
        {
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj: ";
            double arg;
            std::cin&gt;&gt;arg;
            if(!std::cin) break;
            std::cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;funkcija(arg)&lt;&lt;"fapprox("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
</font>            
        
        }
    }
    
    	return 0;
}</pre>
</body>
</html>
