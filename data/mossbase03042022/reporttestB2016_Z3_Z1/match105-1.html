<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1547.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1016.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match105-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;

using std::cout;
using std::cin;

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi, int d)
{
    if(d&gt;=cvorovi.size() or d&lt;0) throw std::domain_error ("Nedozvoljen red");
    for(int i=0; i&lt;cvorovi.size(); i++) {
        for(int j=i+1; j&lt;cvorovi.size(); j++) {
            if(cvorovi[j].first==cvorovi[i].first) throw std::domain_error ("Neispravni cvorovi");
        }
    }
    if(cvorovi.size()==0) return [](double x) {
        return 0;
    };
    std::vector&lt;double&gt; w(cvorovi.size(), 0);
    for(int i=1; i&lt;=cvorovi.size(); i++) {
        int min(i), max(1);
        if(int(cvorovi.size()-d)&lt;min) min=cvorovi.size()-d;
        if(i-d&gt;max) max=i-d;
        for(int j=max; j&lt;=min; j++) {
            double proizvod(1);
            for(int k=j; k&lt;=j+d; k++) {
                if(k==i) continue;
                proizvod*=1./(cvorovi[i-1].first-cvorovi[k-1].first);
            }
            w[i-1]+=std::pow(int(-1),j-1)*proizvod;
        }
    }

    return [cvorovi, w](double x) {
        double suma1(0), suma2(0);
        for(int i=1; i&lt;=cvorovi.size(); i++) {
            if(x==cvorovi[i-1].first) return cvorovi[i-1].second;
            suma1+=(w[i-1]*cvorovi[i-1].second)/(x-cvorovi[i-1].first);
            suma2+=w[i-1]/(x-cvorovi[i-1].first);
        }
        return double(suma1/suma2);
    };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija (std::function&lt;double(double)&gt; fun, double xmin, double xmax, double x, int d)
{
    if(xmin&gt;xmax or x&lt;=0) throw std::domain_error ("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi;
    for(double i=xmin; i&lt;=xmax; i+=x) {
        cvorovi.push_back(std::make_pair(i, fun(i)));
    }
    
        return BaricentricnaInterpolacija(cvorovi, d);
    
}


int main ()
{

    cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int n;
    cin &gt;&gt; n;
    if(n==1) {
        cout &lt;&lt; "Unesite broj cvorova: ";
        cin &gt;&gt; n;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi;
        cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int j=0; j&lt;n; j++) {
            std::pair&lt;double, double&gt; cvor;
            cin &gt;&gt; cvor.first &gt;&gt; cvor.second;
            cvorovi.push_back(cvor);
        }
        int d;
        cout &lt;&lt; "Unesite red interpolacije: ";
        cin &gt;&gt; d;
        cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
        double x;
        cin &gt;&gt; x;
        try {
            auto f(BaricentricnaInterpolacija(cvorovi, d));


            while(cin) {
                cout &lt;&lt; "f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt; std::endl;
                cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                cin &gt;&gt; x;
            }
        } catch(std::domain_error izuzetak) {
            cout &lt;&lt; izuzetak.what();
            return 0;
        }
    }

    if(n==2) {
        cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double xmin, xmax, dx;
        cin &gt;&gt; xmin &gt;&gt; xmax &gt;&gt; dx;
        int d;
        cout &lt;&lt; "Unesite red interpolacije: ";
        cin &gt;&gt; d;
        cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
        double x;
        cin &gt;&gt; x;

        try {
            auto fap(BaricentricnaInterpolacija([](double x) {
                return x*x+sin(x);
            }, xmin, xmax, dx, d));
            while(cin) {
                cout &lt;&lt; "f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;x*x+sin(x) &lt;&lt; " fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;fap(x)&lt;&lt; std::endl;
                cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                cin &gt;&gt; x;
            }
        } catch(std::domain_error izuzetak) {
            cout &lt;&lt; izuzetak.what();
            return 0;
        }
    }
    return 0;
</font>}</pre>
</body>
</html>
