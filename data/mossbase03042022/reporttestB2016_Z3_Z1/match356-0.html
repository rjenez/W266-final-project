<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2941.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2941.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;
#define eps 0.000000000000001

using namespace std;


double wi(int i,vector&lt;pair&lt;double,double&gt; &gt; tacke,int d) {
        int poc=1,kr=tacke.size()-d;
        if(i-d&gt;poc) poc=i-d;
        if(i&lt;kr) kr=i;
        double suma=0, proizvod=1.;
        for(int k(poc);k&lt;=kr;k++) {
            proizvod=1;
            for(int j(k);j&lt;=k+d;j++) {
                if(i==j) continue;
                proizvod*= 1./(tacke[i-1].first-tacke[j-1].first);
            }
            proizvod*=pow(-1,k-1);
            suma+=proizvod;
        }
<a name="2"></a><font color="#0000FF"><a href="match356-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        return suma;
}

function&lt;double(double)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double,double&gt; &gt; tacke, int d) {
    
    if(d&lt;=0 || d&gt;=tacke.size()) throw domain_error ("Nedozvoljen red");
</font>    
    for(int i(0);i&lt;tacke.size()-1;i++) {
        for(int j(i+1);j&lt;tacke.size();j++) {
            if(abs(tacke[i].first-tacke[j].first)&lt;eps) throw domain_error ("Neispravni cvorovi");
        }
    }
    vector&lt;double&gt; W;
    for(int i(1);i&lt;=tacke.size();i++) {
        W.push_back(wi(i,tacke,d));
    }
    
    return [tacke,d,W](double x) {
        double brojnik=0, nazivnik=0;
        for(int i(1);i&lt;=tacke.size();i++) {
            
<a name="0"></a><font color="#FF0000"><a href="match356-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_11.gif"/></a>

            if(abs(x-tacke[i-1].first)&lt;eps) return tacke[i-1].second;
            
            brojnik+=(W[i-1]*tacke[i-1].second)/(x-tacke[i-1].first);
            nazivnik+=W[i-1]/(x-tacke[i-1].first);
        }
        
        return brojnik/nazivnik;
    };
}

function&lt;double(double)&gt; BaricentricnaInterpolacija(double f(double),double Xmin,double Xmax,double Dx,double d) {
</font>    if(Xmin&gt;Xmax || Dx&lt;=0) throw domain_error ("Nekorektni parametri");
    vector&lt;pair&lt;double,double&gt; &gt; tacke;
    while(Xmin&lt;=Xmax){
        tacke.push_back({Xmin,f(Xmin)});
        Xmin+=Dx;                           //moguci granicni slucaj
    }
    return BaricentricnaInterpolacija(tacke,d);
}

int main ()
{
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija;
    cin&gt;&gt;opcija;
    if(opcija==1) {
        cout&lt;&lt; "Unesite broj cvorova: ";
        int brcvorova;
        cin&gt;&gt;brcvorova;
        cout&lt;&lt; "Unesite cvorove kao parove x y: ";
        int i=0;
        vector&lt;pair&lt;double,double&gt; &gt;cvorovi;
        while(i&lt;brcvorova) {
            double prvi,drugi;
            cin&gt;&gt;prvi&gt;&gt;drugi;
            cvorovi.push_back(make_pair(prvi,drugi));
            i++;
        }
        cout&lt;&lt; "Unesite red interpolacije: ";
        int d; cin&gt;&gt;d;
        
        
        while(true) {
            char A='"';
            cout&lt;&lt; "Unesite argument (ili "&lt;&lt;A&lt;&lt;"kraj"&lt;&lt;A&lt;&lt;" za kraj): ";
            double arg;
            cin&gt;&gt;arg;
            if(!cin) break;
           try{
                auto fun = BaricentricnaInterpolacija(cvorovi,d);
                cout&lt;&lt; "f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;fun(arg)&lt;&lt;endl;
           }catch(domain_error izuzetak) { cout&lt;&lt;izuzetak.what(); return 0; }
        }
    }
<a name="3"></a><font color="#00FFFF"><a href="match356-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    else if(opcija==2) {
        cout&lt;&lt; "Unesite krajeve intervala i korak: ";
        double a,b,c;
        cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
        cout&lt;&lt; "Unesite red interpolacije: ";
</font>        double d; cin&gt;&gt;d;
        while(true) {
            char A='"';
            cout&lt;&lt;"Unesite argument (ili "&lt;&lt;A&lt;&lt;"kraj"&lt;&lt;A&lt;&lt;" za kraj): ";
            double arg;
            cin&gt;&gt;arg;
            if(!cin) break;
            try{
                auto fun = BaricentricnaInterpolacija([](double arg) { return arg*arg+sin(arg);},a,b,c,d);
<a name="1"></a><font color="#00FF00"><a href="match356-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

                cout &lt;&lt; "f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;arg*arg+sin(arg)&lt;&lt;" fapprox("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;fun(arg)&lt;&lt;endl;
            }catch(domain_error izuzetak) { cout&lt;&lt;izuzetak.what(); return 0; }
        }
    }
	return 0;
</font>}</pre>
</body>
</html>
