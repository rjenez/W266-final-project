<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3567.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;
const double epsilon(0.00001);

int intpow(int x, int y)
{
    int rez = 1;
    for(int i = 0; i &lt; y; i++)
        rez *= x;
    return rez;
}

std::vector&lt;double&gt; racunajKoeficijente(std::vector&lt;std::pair&lt;double, double&gt;&gt; tacke, int d)
{
    std::vector&lt;double&gt; povratni;
    for(int i = 0; i &lt; tacke.size(); i++)
    {
        double koef = 0;
        for(int k = (0 &lt; i-d ? i-d : 0); k &lt;= (i &lt; tacke.size()-d-1 ? i : tacke.size()-d-1); k++)
        {
            double proizvod = 1;
            for(int j = k; j &lt;= k+d; j++)
            {
                if(i == j) continue;
                proizvod *= 1. / (tacke[i].first - tacke[j].first);
            }
            koef += intpow(-1, k) * proizvod;
        }
        povratni.push_back(koef);
    }
    return povratni;
}
double funkcija(double x, std::vector&lt;double&gt; koeficijenti, std::vector&lt;std::pair&lt;double, double&gt;&gt; tacke)
{
    for(int i = 0; i &lt; tacke.size(); i++)
        if(fabs(x - tacke[i].first) &lt; epsilon) return tacke[i].second;
<a name="2"></a><font color="#0000FF"><a href="match378-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    double  nazivnik = 0, brojnik = 0;
    for(int i = 0; i &lt; tacke.size(); i++)
        brojnik += (koeficijenti[i] / (x - tacke[i].first)) * tacke[i].second;
</font>    for(int i = 0; i &lt; tacke.size(); i++)
        nazivnik += koeficijenti[i] / (x - tacke[i].first);
    return brojnik / nazivnik;
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; tacke, int d)
{
    if(d &lt; 0 || d &gt; tacke.size())
        throw std::domain_error("Nedozvoljen red");
    for(int i = 0; i &lt; tacke.size()-1; i++)
        for(int j = i+1; j &lt; tacke.size(); j++)
            if(fabs(tacke[i].first - tacke[j].first) &lt; epsilon)
                throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt; koef(racunajKoeficijente(tacke, d));
<a name="0"></a><font color="#FF0000"><a href="match378-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_10.gif"/></a>

    return std::bind(funkcija, std::placeholders::_1, koef, tacke);
    
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; fun, double xMin, double xMax, double deltaX, int d)
{
    if(xMin &gt; xMax || deltaX &lt;= 0)
        throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; tacke;
    double korak = xMin;
    while(korak &lt;= xMax)
    {
        tacke.push_back(std::make_pair(korak, fun(korak)));
        korak += deltaX;
    }
    return BaricentricnaInterpolacija(tacke, d);
</font>}
double funk(double x)
{
    return x * x + sin(x);
}
int main ()
{
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int izbor;
    std::cin &gt;&gt; izbor;
    if(izbor == 1)
    {
        double x,y;
        std::vector&lt;std::pair&lt;double,double&gt;&gt; tacke;
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; izbor;
<a name="1"></a><font color="#00FF00"><a href="match378-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i = 0; i &lt; izbor; i++)
        {
            std::cin &gt;&gt; x &gt;&gt; y;
            tacke.push_back(std::make_pair(x,y));
        }
        std::cout &lt;&lt; "Unesite red interpolacije: ";
</font>        std::cin &gt;&gt; izbor;
        std::function&lt;double(double)&gt; f = BaricentricnaInterpolacija(tacke, izbor);
        while(1)
        {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            while(!(std::cin &gt;&gt; x))
            {
                std::string kraj;
                std::cin.clear();
                std::getline(std::cin, kraj);
                if(kraj == "kraj")
                    return 0;
                
                
                std::cin.ignore(10000, '\n');
                std::cout &lt;&lt; "Neispravan unos. Pokusajte ponovo: ";
            }
            std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x) &lt;&lt; "\n";
        }
    }
    else
    {
        double x, y, deltaX;
<a name="3"></a><font color="#00FFFF"><a href="match378-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        std::cin &gt;&gt; x &gt;&gt; y &gt;&gt; deltaX;
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; izbor;
</font>        std::function&lt;double(double)&gt; f = BaricentricnaInterpolacija(funk, x, y, deltaX, izbor);
        while(1)
        {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            while(!(std::cin &gt;&gt; x))
            {
                return 0;
            }
            std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; funk(x) &lt;&lt; " fapprox(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x) &lt;&lt; std::endl;
        }
    }
	return 0;
}</pre>
</body>
</html>
