<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1976.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1976.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#define eps 0.000001

using std::cout;
using std::cin;
using std::endl;
typedef std::vector&lt;std::pair&lt;double, double&gt;&gt; Cvorovi;
typedef std::vector&lt;double&gt; Vektor;

Vektor TezinskiKoeficijenti(Cvorovi v, int d)
{
    int n(v.size());
    if(d &gt; n || d &lt;= 0) throw std::domain_error ("Nedozvoljen red");
    for(int i = 0; i &lt; n; i++) {
        for(int j = i + 1; j &lt; v.size(); j++)
            if(std::fabs(v[i].first - v[j].first) &lt; eps) throw std::domain_error ("Neispravni cvorovi");
    }
    
    Vektor temp;
    for(int i = 1; i &lt;= n; i++) {
        double w(0);
<a name="3"></a><font color="#00FFFF"><a href="match669-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        for(int k = std::max(1, i - d); k &lt;= std::min(i, n - d); k++) {
            double proizvod(1);
            for(int j = k; j &lt;= k + d; j++) {
                if(i != j)
                    proizvod *= double(1/(v[i - 1].first - v[j - 1].first));
</font>            }
            if(k % 2 == 0)
                w += (-1) * proizvod;
            else w += proizvod;
        }
        temp.push_back(w);
    }
    return temp;
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(Cvorovi v, int d)
{
    int n(v.size());
    if(d &gt; n || d &lt;= 0) throw std::domain_error ("Nedozvoljen red");
    for(int i = 0; i &lt; n; i++) {
        for(int j = i + 1; j &lt; v.size(); j++)
            if(fabs(v[i].first - v[j].first) &lt; eps) throw std::domain_error ("Neispravni cvorovi");
    }

    try {
        Vektor temp(TezinskiKoeficijenti(v, d));
        return [temp, v] (double x) {
            double brojnik(0), nazivnik(0);
            for(int i = 0; i &lt; v.size(); i++) {
                if(fabs(x - v[i].first) &lt; eps) return v[i].second;
                brojnik += (temp[i]/(x - v[i].first)) * v[i].second;
                nazivnik += temp[i]/(x - v[i].first);
            }
            return double (brojnik/nazivnik);
        };
    } catch (...) {
<a name="2"></a><font color="#0000FF"><a href="match669-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        throw;
    }
}

template &lt;typename FunTip&gt;
std::function&lt;double(double)&gt; BaricentricnaInterpolacija (FunTip f, double x_min, double x_max, double delta_x, int d)
{
    if(x_min &gt; x_max || delta_x &lt;= 0) throw std::domain_error ("Nekorektni parametri");
</font>
    Cvorovi c;
    int j(0);
    for(int i = 0; i &lt;= (x_max - x_min)/delta_x; i++) {
        std::pair&lt;double, double&gt; cvor = std::make_pair((x_min + j*delta_x), f(x_min + j*delta_x));
        c.push_back(cvor);
        j++;
    }

    try {
        auto temp(TezinskiKoeficijenti(c, d));
        return [temp, c] (double x) {
            double brojnik(0), nazivnik(0);
            for(int i = 0; i &lt; c.size(); i++) {
                if(fabs(x - c[i].first) &lt; eps) return c[i].second;
                brojnik += double ((temp[i]/(x - c[i].first)) * c[i].second);
                nazivnik += double (temp[i]/(x - c[i].first));
            }
            return double (brojnik/nazivnik);
        };
    } catch(...) {
        throw;
    }
}

int main ()
{
    try {
        cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int opcija;
        cin &gt;&gt; opcija;

        if(opcija == 1) {
            cout &lt;&lt; "Unesite broj cvorova: ";
            int br;
            cin &gt;&gt; br;
            cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            Cvorovi v;
            for(int i = 0; i &lt; br; i++) {
                double x, y;
                cin &gt;&gt; x &gt;&gt; y;
                std::pair&lt;double, double&gt; cvor = std::make_pair(x, y);
                v.push_back(cvor);
            }
            cout &lt;&lt; "Unesite red interpolacije: ";
            int d;
            cin &gt;&gt; d;
            for(;;) {
                cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double x;
                cin &gt;&gt; x;
                if(!cin) break;
                cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt;") = " &lt;&lt; BaricentricnaInterpolacija(v, d)(x) &lt;&lt;endl;
            }
        }

<a name="1"></a><font color="#00FF00"><a href="match669-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        if(opcija == 2) {
            cout &lt;&lt; "Unesite krajeve intervala i korak: ";
            double x_min, x_max, delta_x;
            cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; delta_x;
            cout &lt;&lt; "Unesite red interpolacije: ";
            int d;
            cin &gt;&gt; d;
            for(;;) {
                cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double x;
                cin &gt;&gt; x;
                if(!cin) break;
</font><a name="0"></a><font color="#FF0000"><a href="match669-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

                cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt;") = " &lt;&lt; x*x + std::sin(x) &lt;&lt; " fapprox(" &lt;&lt; x &lt;&lt;") = " &lt;&lt; BaricentricnaInterpolacija( [](double x) {
                    return x*x + std::sin(x);
                }, x_min, x_max, delta_x, d)(x);
</font>                cout &lt;&lt;endl;
            }
        }
    } catch(std::domain_error e) {
        cout &lt;&lt; e.what();
    }
    return 0;
}</pre>
</body>
</html>
