<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3634.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3634.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match131-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: Zadaća 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)

#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt; //zbog std::pair
#include &lt;cmath&gt;

 int Min( int a,  int b){
    if (a &lt; b) return a;
    return b;
}

 int Max( int a,  int b){
    if (a &gt; b) return a;
    return b;
}

typedef std::vector&lt;std::pair&lt;double, double&gt;&gt; Tip;
using std::cout; using std::cin;


double f(double arg){    return arg*arg + std::sin(arg); }

double TezinskiKoef_W(int i, const int d, Tip cvorovi){
    int n(int(cvorovi.size()));
    double suma{0};
    for(int k(Max(1, i - d));  k &lt;= Min(i, n-d); k++) {                     
        double proizvod{1};                                                              
        for(int j(k); j &lt;= k + d; j++){
            if (j == i) j++;
            if (j &gt; k+d ) break;                                                        //uslov petlje ponovo provjeravam
            proizvod *= 1/(cvorovi[i-1].first - cvorovi[j-1].first);                        //oduzimam x koordinate iz vektora parova double-ova
        } 
        suma += pow(-1, k-1) * proizvod;
    }
    return suma;
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(Tip cvorovi, int d){
    int n(int(cvorovi.size()));                                                                             //n je broj čvorova
    
    if (d &lt; 0 || d &gt; n) throw std::domain_error("Nedozvoljen red");                                        //za error
    for(int i{}; i &lt; n-1; i++){                                                                             //petlja: pronalazak error-a
        for(int j(i+1); j &lt; n; j++)
            if (cvorovi[i].first == cvorovi[j].first) throw std::domain_error("Neispravni cvorovi");        //ako postoje čvorovi sa identičnim x-koordinatama
    }
    
    return [cvorovi, d](double arg){
        double brojnik{}, nazivnik{};
        int n(int(cvorovi.size()));
        for(int i{}; i &lt; n; i++) if(cvorovi[i].first == arg) return cvorovi[i].second;                      //ima smisla f(xi) = yi
        for(int i{1}, drugo_i{0}; i &lt;= n &amp;&amp; drugo_i &lt; n; i++, drugo_i++){
           brojnik += (TezinskiKoef_W(i, d, cvorovi) * cvorovi[drugo_i].second)/(arg - cvorovi[drugo_i].first);
           nazivnik += TezinskiKoef_W(i, d, cvorovi)/(arg - cvorovi[drugo_i].first);
            
        } 
        return brojnik/nazivnik;};
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xmin, double xmax, double deltax, int d){
    if(xmin &gt; xmax || deltax &lt;= 0) throw std::domain_error("Nekorektni parametri");
    
    Tip cvorovi;
    //kreirajmo čvorove interpolacije na intervalu[xmin, xmax] sa korakom + deltax
    while(xmax &gt;= xmin){
        cvorovi.push_back({xmin, f(xmin)});
        xmin += deltax;
    }
    return BaricentricnaInterpolacija(cvorovi, d);
}

int main (){ 
        Tip* pok(nullptr);
        double niz[3]; 
        cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int opcija; 
        cin &gt;&gt; opcija;
        Tip cvorovi;                                                   
        if(opcija == 1){
            int br_cvorova;
            cout &lt;&lt; "Unesite broj cvorova: "; 
            cin &gt;&gt; br_cvorova;
            cvorovi.resize(br_cvorova);
            cout &lt;&lt; "Unesite cvorove kao parove x y: "; 
            for(int i{}; i &lt; br_cvorova; i++) cin &gt;&gt; cvorovi[i].first &gt;&gt; cvorovi[i].second;     // petlja za unos čvorova
            pok = &amp;cvorovi;                                                                      //obavezno uzmi adresu i dodijeli je pokazivaču
        }
        else if(opcija == 2){
            cout &lt;&lt; "Unesite krajeve intervala i korak: "; 
            cin &gt;&gt; niz[0] &gt;&gt; niz[1] &gt;&gt; niz[2];
        }
        else return 0;
        
        cout &lt;&lt; "Unesite red interpolacije: "; 
        int d; 
        cin &gt;&gt; d;
        while(true){
            cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double arg; 
            cin &gt;&gt; arg;
            if(!cin) break;  //nešto što nije broj
            if(opcija == 1){
                try {cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; BaricentricnaInterpolacija(*pok, d)(arg) &lt;&lt; "\n"; }
                catch(std::domain_error er){cout &lt;&lt; er.what(); }
            }
            else if(opcija == 2){
                try {cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg) &lt;&lt; " fapprox(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; BaricentricnaInterpolacija(f, niz[0], niz[1], niz[2], d)(arg) &lt;&lt; std::endl; } 
                catch(std::domain_error er) {cout &lt;&lt; er.what(); }
            }
        }
   
	return 0;
</font>}   </pre>
</body>
</html>
