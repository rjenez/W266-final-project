<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1146.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1146.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match150-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

using std::vector;
using std::pair;

int max(int a, int b) {
    return a &gt; b ? a : b;
}

int min(int a, int b) {
    return a &lt; b ? a : b;
}

typedef pair&lt;double, double&gt; pdd;

std::function&lt;double (double)&gt;
BaricentricnaInterpolacija(vector&lt;pdd&gt; p, int d) {
    int n = p.size();
    vector&lt;double&gt; w(n);
    
    if (d &lt; 0 || d &gt;= n)
        throw std::domain_error("Nedozvoljen red");
    
    for (int i = 1; i &lt;= n; i++) {
        for (int j = 1; j &lt;= n; j++)
            if (i != j &amp;&amp; p[i-1].first == p[j-1].first)
                throw std::domain_error("Neispravni cvorovi");
                
        for (int k = max(1, i-d); k &lt;= min(i, n-d); k++) {
            double proizvod = 1;
            for (int j = k; j &lt;= k+d; j++) {
                if (j == i) continue;
                proizvod *= p[i-1].first - p[j-1].first;
            }
            w[i-1] += (k % 2 ? -1 : 1) / proizvod; 
        }
    }
    
    return [w, p](double x) {
        double gore = 0;
        double dole = 0;
        for (int i = 0; i &lt; p.size(); i++) {
            if (x == p[i].first) return p[i].second;
            double razlomak = w[i] / (x - p[i].first);
            gore += razlomak * p[i].second;
            dole += razlomak;
        }
        return gore/dole;
    };
}

template &lt;typename F&gt;
std::function&lt;double (double)&gt;
BaricentricnaInterpolacija(F f, double mini, double maxi, double step, int d) {
    vector&lt;pdd&gt; p;
    if (mini &gt; maxi || step &lt;= 0)
        throw std::domain_error("Nekorektni parametri");
    
    for (double x = mini; x &lt;= maxi; x += step)
        p.push_back(pdd(x, f(x)));
    return BaricentricnaInterpolacija(p, d);
}

int main() {
    using std::cout;
    using std::cin;
    
    int izbor = -1;
    
    do {
        cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        cin &gt;&gt; izbor;
    } while (izbor != 1 &amp;&amp; izbor != 2);
    
    auto lambda = [](double x) {return x*x + std::sin(x);};
    
    std::function&lt;double (double)&gt; f;
    
    try {
        if (izbor == 1) {
            cout &lt;&lt; "Unesite broj cvorova: ";
            int n;
            cin &gt;&gt; n;
            vector&lt;pdd&gt; p(n);
            cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            for (auto &amp;x : p)
                cin &gt;&gt; x.first &gt;&gt; x.second;
            cout &lt;&lt; "Unesite red interpolacije: ";
            int d;
            cin &gt;&gt; d;
            f = BaricentricnaInterpolacija(p, d);
        } else {
            cout &lt;&lt; "Unesite krajeve intervala i korak: ";
            double mini, maxi, step;
            cin &gt;&gt; mini &gt;&gt; maxi &gt;&gt; step;
            cout &lt;&lt; "Unesite red interpolacije: ";
            int d;
            cin &gt;&gt; d;
            f = BaricentricnaInterpolacija(lambda, mini, maxi, step, d);
        }
    } catch (std::domain_error e) {
        cout &lt;&lt; e.what();
        return 0;
    }
    
    while (1) {
        cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
        double x;
        cin &gt;&gt; x;
        if (!cin) break;
        cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; (izbor == 1 ? f(x) : lambda(x));
        if (izbor == 2)
            cout  &lt;&lt; ' ' &lt;&lt; "fapprox(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x);
        cout &lt;&lt; '\n';
    }
    
	return 0;
</font>}</pre>
</body>
</html>
