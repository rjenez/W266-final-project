<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5603.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1649.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
int min(int x,int y){
    if (x&lt;y) return x;
    return y;
}
int max(int x,int y){
    if(x&gt;y) return x;
    return y;
}
bool JesuLiJednaki(double x,double y, double Eps=1e-10){
    return std::fabs(x-y) &lt;=Eps*(std::fabs(x)+std::fabs(y));
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; CvoroviInterpolacije,int d){
    int n(CvoroviInterpolacije.size());
    if(d&lt;0 || d&gt;=n) throw std::domain_error("Nedozvoljen red");
    for(int i=0;i&lt;n-1;i++){
        for(int j=i+1;j&lt;n;j++){
            if(JesuLiJednaki(CvoroviInterpolacije[i].first,CvoroviInterpolacije[j].first)) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::vector&lt;double&gt; TezinskiKoeficijenti(n);
    for(int i=1;i&lt;=n;i++){
        int k(max(1,i-d)),l(min(i,n-d));
        for(;k&lt;=l;k++){
            double Proizvod(1);
            for(int j=k;j&lt;=k+d;j++){
<a name="2"></a><font color="#0000FF"><a href="match318-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

                if(j!=i) Proizvod*=(1/(CvoroviInterpolacije[i-1].first-CvoroviInterpolacije[j-1].first));
            }
            TezinskiKoeficijenti[i-1]+=(std::pow(-1,k-2)*Proizvod);
        }
    }
    return [CvoroviInterpolacije,TezinskiKoeficijenti](double x){
</font>        double Brojnik(0),Nazivnik(0);
        for(int i=0;i&lt;CvoroviInterpolacije.size();i++){
<a name="1"></a><font color="#00FF00"><a href="match318-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

            if(JesuLiJednaki(x,CvoroviInterpolacije[i].first)) return CvoroviInterpolacije[i].second;
            Brojnik+=(TezinskiKoeficijenti[i]/(x-CvoroviInterpolacije[i].first))*CvoroviInterpolacije[i].second;
            Nazivnik+=(TezinskiKoeficijenti[i]/(x-CvoroviInterpolacije[i].first));
        }
        return (Brojnik/Nazivnik);
</font>    };
}
template&lt;typename Funkcija&gt;
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(Funkcija f,double xmin,double xmax,double dx,int d){
    if(xmin&gt;xmax || dx&lt;=0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; CvoroviInterpolacije;
    for(int i=0;xmin+(i*dx)&lt;=xmax;i++) CvoroviInterpolacije.push_back(std::make_pair(xmin+i*dx,f(xmin+i*dx)));
    return (BaricentricnaInterpolacija(CvoroviInterpolacije,d));
}
double xxplussinx(double x){return x*x+std::sin(x);}
int main (){
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int Opcija(0);
    std::cin&gt;&gt;Opcija;
    if(Opcija==1){
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int BrojCvorova;
        std::cin&gt;&gt;BrojCvorova;
<a name="3"></a><font color="#00FFFF"><a href="match318-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

        std::vector&lt;std::pair&lt;double,double&gt;&gt; Cvorovi;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0;i&lt;BrojCvorova;i++){
            double x,y;
            std::cin&gt;&gt;x&gt;&gt;y;
            Cvorovi.push_back(std::make_pair(x,y));
</font>        }
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int RedInterpolacije;
        std::cin&gt;&gt;RedInterpolacije;
        try{
            for(;;){
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                double Argument;
                std::cin&gt;&gt;Argument;
                if(!std::cin) break;
                double fun(BaricentricnaInterpolacija(Cvorovi,RedInterpolacije)(Argument));
                std::cout&lt;&lt;"f("&lt;&lt;Argument&lt;&lt;") = "&lt;&lt;fun&lt;&lt;"\n";
            }
        }catch(std::domain_error izuzetak){
            std::cout&lt;&lt;izuzetak.what();
        }
    }
    if(Opcija==2){
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double Pocetak,Kraj,Korak;
        std::cin&gt;&gt;Pocetak&gt;&gt;Kraj&gt;&gt;Korak;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int RedInterpolacije;
        std::cin&gt;&gt;RedInterpolacije;
        try{
<a name="0"></a><font color="#FF0000"><a href="match318-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

            auto Aproksimacija(BaricentricnaInterpolacija(xxplussinx,Pocetak,Kraj,Korak,RedInterpolacije));
            for(;;){
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                double Argument;
                std::cin&gt;&gt;Argument;
                if(!std::cin) break;
                std::cout&lt;&lt;"f("&lt;&lt;Argument&lt;&lt;") = "&lt;&lt;xxplussinx(Argument)&lt;&lt;" fapprox("&lt;&lt;Argument&lt;&lt;") = "&lt;&lt;Aproksimacija(Argument)&lt;&lt;"\n";
</font>            }
        }catch(std::domain_error izuzetak){
            std::cout&lt;&lt;izuzetak.what();
        }
    }
	return 0;
}</pre>
</body>
</html>
