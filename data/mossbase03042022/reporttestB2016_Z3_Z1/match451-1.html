<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5800.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1938.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

double test(double x){
    return x * x + std::sin(x);
}
int max(int a, int b){
    if(a&gt;b) return a; return b;
}
int min(int a, int b){
    if(a&lt;b) return a; return b;
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; v, int d){
    std::vector&lt;double&gt; vekW;
    int n(v.size());
    if(d &lt; 0 || d &gt;= n) throw std::domain_error("Nedozvoljen red");
    for(int i = 0; i &lt; n; i++)
        for(int j = i+1; j &lt; n; j++)
            if(v[i].first == v[j].first) throw std::domain_error("Neispravni cvorovi");
    for(int i = 1; i &lt;= n; i++){
        double w(0);
        for(int k = max(1,i-d); k &lt;= min(i,n-d); k++){
            int sgn(1); if(k%2 == 0) sgn = -1;
            double prod(sgn);
<a name="2"></a><font color="#0000FF"><a href="match451-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

            for(int j = k; j &lt;= k+d; j++) 
                if(j != i) prod *= 1/(v[i-1].first - v[j-1].first);
</font>            w += prod;
        }
        vekW.push_back(w);
    }
    return [vekW, v,n](double x){
        double sum1(0), sum2(0);
        for(int i = 0; i &lt; n; i++) if(x == v[i].first) return v[i].second;
        for(int i = 1; i &lt;= n; i++) sum1 += (vekW[i-1] * v[i-1].second)/(x - v[i-1].first);
<a name="3"></a><font color="#00FFFF"><a href="match451-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

        for(int i = 1; i &lt;= n; i++) sum2 += vekW[i-1]/(x - v[i-1].first);
        return sum1/sum2;
    };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xMin, double xMax, double dx, int d){
</font>    std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
    if(xMin &gt; xMax || dx &lt;= 0) throw std::domain_error("Nekorektni parametri");
    for(double x = xMin; x &lt;= xMax; x += dx) 
        v.push_back(std::make_pair(x, f(x)));
    return BaricentricnaInterpolacija(v,d);
}
int main () {
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opt;
    try{
        std::cin &gt;&gt; opt;
        if(opt == 1){
            std::cout &lt;&lt; "Unesite broj cvorova: ";
<a name="4"></a><font color="#FF00FF"><a href="match451-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

            int n,x,y; 
            std::cin &gt;&gt; n;
            std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
</font>            for(int i = 0; i &lt; n; i++){
                std::cin &gt;&gt; x &gt;&gt; y;
                v.push_back(std::make_pair&lt;double,double&gt;(x,y));
            }
            std::cout &lt;&lt; "Unesite red interpolacije: ";
            int d; std::cin &gt;&gt; d;
            auto f = BaricentricnaInterpolacija(v,d);
            for(;;){
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double arg; std::cin &gt;&gt; arg;
                if(!std::cin || std::cin.peek() != '\n') break;
<a name="0"></a><font color="#FF0000"><a href="match451-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg) &lt;&lt; std::endl;
            }
        }
        else if(opt == 2){
            std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
            double xMin, xMax, dx;
            std::cin &gt;&gt; xMin &gt;&gt; xMax &gt;&gt; dx;
</font>            std::cout &lt;&lt; "Unesite red interpolacije: ";
            int d; std::cin &gt;&gt; d;
            auto f = BaricentricnaInterpolacija(test,xMin,xMax,dx,d);
            for(;;){
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double arg; std::cin &gt;&gt; arg;
                if(!std::cin || std::cin.peek() != '\n') break;
<a name="1"></a><font color="#00FF00"><a href="match451-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; test(arg) &lt;&lt; " fapprox(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg) &lt;&lt; std::endl;
            }
        }
    }catch(std::domain_error err){
</font>        std::cout &lt;&lt; err.what();
    }
	return 0;
}</pre>
</body>
</html>
