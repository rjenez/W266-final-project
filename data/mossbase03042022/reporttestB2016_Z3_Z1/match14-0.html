<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9095.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9095.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match14-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
using namespace std;

double wi(vector&lt;pair&lt;double,double&gt;&gt; x, int d, int i, int n)
{
    double w=0;
    for(int k=max(1,i-d); k&lt;=min(i, n-d); k++)
    {
        double p=1;
        for(int j=k; j&lt;=k+d; j++)
        {
            if(j==i) continue;
            else p*=1./(x[i-1].first-x[j-1].first);
        }
        double kec=pow(-1,k-1);
        w=w+p*kec;
    }
    return w;
}

bool test(int d, int n)
{
    return (d&gt;n||d&lt;0); 
}

bool okej(vector&lt;pair&lt;double,double&gt;&gt; x)
{
    for(int i=0; i&lt;x.size()-1; i++)
        for(int j=i+1; j&lt;x.size(); j++)
            if(x[i].first==x[j].first) return false;
    return true;
}

function&lt;double(double)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt; x, int d)
{
    if(!okej(x)) throw domain_error("Neispravni cvorovi");
    if(test(d,x.size())) throw domain_error("Nedozvoljen red");
    function&lt;double(double)&gt; f,pom;
    for(int i=0; i&lt;x.size(); i++)
    {
        auto w=wi(x,d,i+1,x.size());
        auto p=x[i].first, dr=x[i].second;
        if(i==0)
        {
            f=[p,dr,w](double a) { return (w*dr)/(a-p);};
            pom=[p,w](double a) { return w/(a-p); };
        }
        else
        {
            f=[f,p,dr,w](double a) { return f(a)+(w*dr)/(a-p);};
            pom=[pom,p,w](double a) { return pom(a)+w/(a-p); };
        }
    }
    return [x,f,pom](double a)
    {
        for(int i=0; i&lt;x.size(); i++)
            if(a==x[i].first) return x[i].second;
        return f(a)/pom(a);
    };
    
}

template&lt;typename funtip&gt;
function&lt;double(double)&gt; BaricentricnaInterpolacija(funtip fu, double mini, double maks, double D, int d)
{
    if(mini&gt;maks) throw domain_error("Nekorektni parametri");
    if(D&lt;=0) throw domain_error("Nekorektni parametri");
    vector&lt;pair&lt;double,double&gt;&gt; x;
    for(;;)
    {
        if(mini&gt;maks) break;
        pair&lt;double,double&gt; pa=make_pair(mini, fu(mini));
        x.push_back(pa);
        mini+=D;
    }
    function&lt;double(double)&gt; f,pom;
    for(int i=0; i&lt;x.size(); i++)
    {
        auto w=wi(x,d,i+1,x.size());
        auto p=x[i].first, dr=x[i].second;
        if(i==0)
        {
            f=[p,dr,w](double a) { return (w*dr)/(a-p);};
            pom=[p,w](double a) { return w/(a-p); };
        }
        else
        {
            f=[f,p,dr,w](double a) { return f(a)+(w*dr)/(a-p);};
            pom=[pom,p,w](double a) { return pom(a)+w/(a-p); };
        }
    }
    return [x,f,pom](double a)
    {
        for(int i=0; i&lt;x.size(); i++)
            if(a==x[i].first) return x[i].second;
        return f(a)/pom(a);
    };
}

int main ()
{
	cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
	int a;
	cin&gt;&gt;a;
	if(a==1)
	{
	    cout&lt;&lt;"Unesite broj cvorova: ";
	    int n;
	    cin&gt;&gt;n;
	    cout&lt;&lt;"Unesite cvorove kao parove x y: ";
	    vector&lt;pair&lt;double,double&gt;&gt; x;
	    for(int i=0; i&lt;n; i++)
	    {
	        double p, dr; cin&gt;&gt;p&gt;&gt;dr;
	        pair&lt;double,double&gt; pa=make_pair(p,dr);
	        x.push_back(pa);
	    }
	    int d;
	    cout&lt;&lt;"Unesite red interpolacije: ";
	    cin&gt;&gt;d;
	    for(;;)
	    {
	        double b;
	        cout&lt;&lt;"Unesite argument (ili "&lt;&lt;"\"kraj\""&lt;&lt;" za kraj): ";
	        cin&gt;&gt;b;
	        if(!cin) break;
	        else
	        {
	            try
	            {
	                cout&lt;&lt;"f("&lt;&lt;b&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija(x,d)(b)&lt;&lt;endl;
	            } catch(domain_error e) {  cout&lt;&lt;e.what();}
	        }
	    }
	    
	}
	else
	{
	    double mini, maks, D;
	    cout&lt;&lt;"Unesite krajeve intervala i korak: ";
	    cin&gt;&gt;mini&gt;&gt;maks&gt;&gt;D;
	    int d;
	    cout&lt;&lt;"Unesite red interpolacije: ";
	    cin&gt;&gt;d;
	    for(;;)
	    {
	        double b;
	        cout&lt;&lt;"Unesite argument (ili "&lt;&lt;"\"kraj\""&lt;&lt;" za kraj): ";
	        cin&gt;&gt;b;
	        if(!cin) break;
	        else
	        {
	            try
	            {
	                cout&lt;&lt;"f("&lt;&lt;b&lt;&lt;") = "&lt;&lt;b*b+sin(b)&lt;&lt;" fapprox("&lt;&lt;b&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija([](double x){return x*x+sin(x);},mini,maks,D,d)(b)&lt;&lt;endl;
	            }
	            catch(domain_error e) { cout&lt;&lt;e.what();
	        }
	        }
	    }
	}
	return 0;
</font>}</pre>
</body>
</html>
