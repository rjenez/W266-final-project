<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student4195.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student4195.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

<a name="1"></a><font color="#00FF00"><a href="match172-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_16.gif"/></a>

constexpr double EPSILON = 0.0000001;

using namespace std;

typedef vector&lt;pair&lt;double,double&gt;&gt; UredParovi;

int max(int a, int b){
    if(a&gt;b) return a;
    return b;
}

int min(int a, int b){
    if(a&lt;b) return a;
    return b;
}

double TezinskiKoeficijenti(const UredParovi &amp;parovi, int i, int n, int d){
    double suma(0);
    for(int k=max(1,i-d); k&lt;=min(i,n-d); k++){ //Suma
        double proizvod(1);
        for(int j=k; j&lt;=k+d; j++){ //Proizvod
            if(j==i) continue;
            proizvod/=(parovi.at(i-1).first-parovi.at(j-1).first); //-1 jer ovdje pocinje i od 0 a ne od 1
</font><a name="3"></a><font color="#00FFFF"><a href="match172-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

        }
        suma+=pow(-1,k-1)*proizvod;
    }
    return suma;
}

function&lt;double(double)&gt; BaricentricnaInterpolacija(const UredParovi &amp;parovi, int d){
</font>    std::vector&lt;double&gt; koeficijent(parovi.size());
    for(int i=0; i&lt;parovi.size(); i++){
        koeficijent.at(i)=TezinskiKoeficijenti(parovi,i+1,parovi.size(),d);
    }
    if(d&lt;=0 or d&gt;=parovi.size()) throw domain_error("Nedozvoljen red");
    return [parovi,d,koeficijent](double x){
        double brojnik(0); double nazivnik(0);
        for(int i=0; i&lt;parovi.size(); i++){
            if(i!=int(parovi.size()-1) and fabs(parovi.at(i).first-parovi.at(i+1).first)&lt;EPSILON)
                throw domain_error("Neispravni cvorovi");
            if(fabs(parovi.at(i).first-x)&lt;EPSILON){
                return parovi.at(i).second;
            }
            brojnik+=( (koeficijent.at(i) / (x-parovi.at(i).first)) * parovi.at(i).second );
            nazivnik+=( koeficijent.at(i)/(x-parovi.at(i).first) );
        }
        return brojnik/nazivnik;
    };
}
template&lt;typename realna_f&gt;
<a name="2"></a><font color="#0000FF"><a href="match172-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_11.gif"/></a>

function&lt;double(double)&gt; BaricentricnaInterpolacija(realna_f f, double x_min, double x_max, double delta_x, int d){
    if(x_min&gt;x_max or delta_x&lt;=0) throw domain_error("Nekorektni parametri");
    UredParovi parovi;
    while(x_min&lt;=x_max){ //Kreirajmo cvorove interpolacije
        pair&lt;double,double&gt; par;
        par.first=x_min;
        par.second=f(x_min);
        x_min+=delta_x;
        parovi.push_back(par);
    }
    return BaricentricnaInterpolacija(parovi,d);
}

double funkcija(double x){
    return x*x + sin(x);
}

int main ()
{
    int opcija(0);
</font>    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
<a name="0"></a><font color="#FF0000"><a href="match172-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_34.gif"/></a>

    cin&gt;&gt;opcija;
    switch(opcija){
        case 1:
        {
            try{
                int n;
                cout&lt;&lt;"Unesite broj cvorova: ";
                cin&gt;&gt;n;
                UredParovi parovi(n);
                cout&lt;&lt;"Unesite cvorove kao parove x y: ";
                for(int i=0; i&lt;n; i++){ //Unos parova
                    cin&gt;&gt;parovi.at(i).first;
                    cin&gt;&gt;parovi.at(i).second;
                }
                cout&lt;&lt;"Unesite red interpolacije: ";
                int d; 
                cin&gt;&gt;d;
                auto f(BaricentricnaInterpolacija(parovi,d));
                do{
                    cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    double x;
                    cin&gt;&gt;x;
                    if(!cin) break;
                    cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;endl;
                }while(1);
            }
            catch(domain_error e){
                cout&lt;&lt;e.what()&lt;&lt;endl;
            }
            break;
        }
        case 2:
        {
            try{
                cout&lt;&lt;"Unesite krajeve intervala i korak: ";
                double x_min,x_max,delta_x;
                cin&gt;&gt;x_min; cin&gt;&gt;x_max; cin&gt;&gt;delta_x;
                cout&lt;&lt;"Unesite red interpolacije: ";
                int d;
                cin&gt;&gt;d;
                auto f(BaricentricnaInterpolacija(funkcija,x_min,x_max,delta_x,d));
                do{
                    cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    double x;
                    cin&gt;&gt;x;
                    if(!cin) break;
                    cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;funkcija(x)&lt;&lt;" ";
                    cout&lt;&lt;"fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;endl;
                }while(1);
            }
            catch(domain_error e){
                cout&lt;&lt;e.what()&lt;&lt;endl;
            }
            break;
            
        }
        default:
            break;
</font>    }
	return 0;
}</pre>
</body>
</html>
