<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8923.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8923.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match808-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
using std::cout;
using std::cin;
using std::vector;
using std::pair;
</font>bool JesuLiIsti(double x,double y,double eps=1e-10)
{
    return std::fabs(x-y)&lt;=eps*(std::fabs(x)+std::fabs(y));
}
std::function&lt;double(double)&gt; funkcija(double x)
{
    return [] (double x) 
    {
    return (x*x+sin(x));
    };
}
<a name="1"></a><font color="#00FF00"><a href="match808-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt; cvorovi,int d)
{
    
    if(d&lt;0 || d&gt;=cvorovi.size())
    throw std::domain_error("Nedozvoljen red");
</font>    for(int i=0;i&lt;cvorovi.size()-1;i++)
    for(int j=i+1;j&lt;cvorovi.size();j++)
    {
        auto it1=cvorovi.begin()+i;
        auto it2=cvorovi.begin()+j;
        if(JesuLiIsti(it1-&gt;first,it2-&gt;first))
        throw std::domain_error("Neispravni cvorovi");
    }
    vector&lt;double&gt; wi;
    int m,n;
    for(int i=1;i&lt;=cvorovi.size();i++)
    {
       if(1&gt;i-d)
       m=1;
       else
       m=i-d;
       if(i&lt;cvorovi.size()-d)
       n=i;
       else
       n=cvorovi.size()-d;
       double suma(0);
       double proizvod(1);
       for(int k=m;k&lt;=n;k++)
       {
           if(k%2==0)
           proizvod=-1;
           else 
           proizvod=1;
           for(int j=k;j&lt;=k+d;j++)
           {
               if(j!=i)
               {
               double r;
               auto it1=cvorovi.begin()+i-1;
               auto it2=cvorovi.begin()+j-1;
               r=(1./(it1-&gt;first-it2-&gt;first));
               proizvod*=r;
               }
           }
           suma+=proizvod;
       }
       wi.push_back(suma);
    }
    return[=] (double x) 
    {
    double suma1(0); 
    double suma2(0);
    for(int i=0;i&lt;cvorovi.size();i++)
    {
       auto it=cvorovi.begin()+i;
       
       if(JesuLiIsti(x,it-&gt;first))
       return it-&gt;second;
       suma1+=(wi[i]*it-&gt;second)/(x-it-&gt;first);
       suma2+=(wi[i])/(x-it-&gt;first);
    }
    return suma1/suma2;
    
    };
}
<a name="3"></a><font color="#00FFFF"><a href="match808-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; fja,double xmin,double xmax,double dx,int d)
{
    if(xmin&gt;xmax || dx&lt;=0)
    throw std::domain_error("Nekorektni parametri");
    vector&lt;pair&lt;double,double&gt;&gt; cvorovi;
</font>    while(xmax&gt;=xmin)
    {
        std::pair&lt;double,double&gt; cvor;
        cvor=std::make_pair(xmin,fja(xmin));
        cvorovi.push_back(cvor);
        xmin+=dx;
    }
    try
    {
    std::function&lt;double(double)&gt; f=BaricentricnaInterpolacija(cvorovi,d);
    return [=] (double x)
    {
        return f(x);
    };
    }
    catch(...)
    {
        throw;
    }
}
int main ()
{
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija;
<a name="4"></a><font color="#FF00FF"><a href="match808-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

    cin&gt;&gt;opcija;
    if(opcija==1)
    {
    cout&lt;&lt;"Unesite broj cvorova: ";
    int broj;
    cin&gt;&gt;broj;
    cout&lt;&lt;"Unesite cvorove kao parove x y: ";
    vector&lt;pair&lt;double,double&gt;&gt; cvorovi;
</font>    for(int i=0;i&lt;broj;i++)
    {
    double pom1,pom2;
    cin&gt;&gt;pom1&gt;&gt;pom2;
    std::pair&lt;double,double&gt; cvor;
    cvor=std::make_pair(pom1,pom2);
    cvorovi.push_back(cvor);
    }
    cout&lt;&lt;"Unesite red interpolacije: ";
    int d;
    cin&gt;&gt;d;
    while(cin)
    {
    cout&lt;&lt;"Unesite argument (ili "&lt;&lt;char(34)&lt;&lt;"kraj"&lt;&lt;char(34)&lt;&lt;" za kraj): ";
    double arg;
    cin&gt;&gt;arg;
    if(cin)
    {
    try
    {
    auto f(BaricentricnaInterpolacija(cvorovi,d));
    cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
    }
    catch(std::domain_error izuzetak)
    {
        cout&lt;&lt;izuzetak.what();
        return 0;
    }
    }
    else
    break;
    }
    }
<a name="0"></a><font color="#FF0000"><a href="match808-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    if(opcija==2)
    {
        cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double xmin,xmax,dx;
        cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;dx;
        cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        cin&gt;&gt;d;
</font>        while(cin)
        {
        cout&lt;&lt;"Unesite argument (ili "&lt;&lt;char(34)&lt;&lt;"kraj"&lt;&lt;char(34)&lt;&lt;" za kraj): ";
        double arg;
        cin&gt;&gt;arg;
        if(cin)
        {
            try
            {
            auto f(BaricentricnaInterpolacija(funkcija(arg),xmin,xmax,dx,d));
            auto f1=funkcija(arg);
            cout&lt;&lt;"f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f1(arg)&lt;&lt;" fapprox("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;std::endl;
            }
            catch(std::domain_error izuzetak)
            {
                cout&lt;&lt;izuzetak.what();
                return 0;
            }
        }
        else
        break;
        }
    }
	return 0;
}</pre>
</body>
</html>
