<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1845.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1502.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match22-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;


using namespace std;
double fija(double x){
    return x*x+sin(x);
}


int vece(int d){
    if(d&gt;1)return d;
    else return 1;
    
}

int manje(int i, int d){
    if(i&lt;d)return i;
    else return d;
    
}
vector&lt;double&gt; wi(vector&lt;pair&lt;double,double&gt;&gt; v, int d){
 
  vector&lt;double&gt; Wi;

    v.insert(v.begin(), pair&lt;double,double&gt; (0,0.0));   
   
   for(int i=1;i&lt;v.size();i++){
    
    int poc=vece(i-d);
    int kraj=manje(i,v.size()-1-d);
    
    double suma=0;    
    for(int k=poc;k&lt;=kraj;k++){
        double p=1;        
        for(int j=k;j&lt;=k+d;j++)if(i!=j) p*=(1./(v[i].first-v[j].first));
        if((k-1)%2!=0) p=p*(-1);
        suma+=p;
    }
    
    Wi.push_back(suma);
    
        
  }
   return Wi;
}


function&lt;double(double)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt; v, int d){
    
    if(d&lt;0 or d&gt;v.size())throw domain_error("Nedozvoljen red"); //baciti izuzetak
    
    for(int i=0;i&lt;v.size();i++){
        for(int j=i+1;j&lt;v.size();j++){
            if(fabs(v[i].first-v[j].first)==0){
                throw domain_error("Neispravni cvorovi");
            }
        }
    }
    
    
    int n=v.size();
    
    return [v,d,n](double x){
        
        double suma1=0.0,suma2=0.0;
        vector&lt;double&gt;Wi=wi(v,d);
        
        for(int i=0;i&lt;n;i++){
         
         if(fabs(x-v[i].first)==0) return v[i].second;
        
            double pomoc=(Wi[i]/(x-v[i].first));
          
            suma1=suma1+pomoc*v[i].second;
            suma2=suma2+pomoc;
        }
        
        return suma1/suma2;
        
        
    };
    
    
    
}


function&lt;double(double)&gt; BaricentricnaInterpolacija(double fija(double),double xmin,double xmax,double deltax,int d){

    vector&lt;pair&lt;double,double&gt;&gt; v;
    
    
    if(deltax&lt;=0 or xmin&gt;xmax)throw domain_error("Nekorektni parametri"); //baciti izuzetak
    int brojac=0;
  for(double i=xmin;i&lt;xmax;i+=deltax){
      brojac++;
  }
    v.resize(brojac);
    int koordinata=0;
    for(double i=xmin;i&lt;xmax;i+=deltax){
                    double a=i;
                    double b=fija(i);
                    v[koordinata]=make_pair(a,b);
                    koordinata++;
    }
    
    int n=v.size();
    vector&lt;double&gt;wow=wi(v,d);
    
    return [v,d,n,xmin,xmax,deltax,fija,wow](double x){
    
    
        
        double suma1=0.0,suma2=0.0;
        
        
        for(int i=0;i&lt;n;i++){
         
         if(fabs(x-v[i].first)==0) return v[i].second;
        
            double pomoc=(wow[i]/(x-v[i].first));
          
            suma1=suma1+pomoc*v[i].second;
            suma2=suma2+pomoc;
        }
        
        return suma1/suma2;
        
        
    };
    
    
 }

int main (){
    try{
    int p;
    vector&lt;pair&lt;double,double&gt;&gt; v;
    bool kraj=false;
    for(;;){
        if(kraj)break;
        cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        cin&gt;&gt;p;
        switch(p){
           case 1:{
                int broj_cvorova;
                cout&lt;&lt;"Unesite broj cvorova: ";
                cin&gt;&gt;broj_cvorova;
                v.resize(broj_cvorova);
                cout&lt;&lt;"Unesite cvorove kao parove x y: ";
                for(int i=0;i&lt;broj_cvorova;i++){
                    double a,b;
                    cin&gt;&gt;a&gt;&gt;b;
                    v[i]=make_pair(a,b);
                }
                int red_interpolacije;
                cout&lt;&lt;"Unesite red interpolacije: ";
                cin&gt;&gt;red_interpolacije;
                auto f(BaricentricnaInterpolacija(v,red_interpolacije));
                for(;;){
                cin.clear();
                cin.ignore(1000,'\n');
                cout&lt;&lt;"Unesite argument (ili "&lt;&lt;'"'&lt;&lt;"kraj"&lt;&lt;'"'&lt;&lt;" za kraj): ";
                double argument;
                cin&gt;&gt;argument;
                if(cin.fail()!=true){
                    cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument)&lt;&lt;endl;
                }else{
                  
                kraj=true;
                    break;
                }
            }
            break;
           }
           case 2:{
               cout&lt;&lt;"Unesite krajeve intervala i korak: ";
               double a,b,c;
               cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
              cout&lt;&lt;"Unesite red interpolacije: ";
              int d;
              cin&gt;&gt;d;
              auto f1(BaricentricnaInterpolacija(fija,a,b,c,d));
              for(;;){
                cin.clear();
                cin.ignore(1000,'\n');
                
                
                cout&lt;&lt;"Unesite argument (ili "&lt;&lt;'"'&lt;&lt;"kraj"&lt;&lt;'"'&lt;&lt;" za kraj): ";
                double argument;
                cin&gt;&gt;argument;
                if(cin.fail()!=true){
                    cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fija(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f1(argument)&lt;&lt;endl;
                }else{
                   
                    kraj=true;
                    break;
                }
            }
                break;
            }
            default:
            //pogresan unos
            break;
        }
    }
    }catch(domain_error hehe){
        cout&lt;&lt;hehe.what();
</font>    }
	return 0;
}</pre>
</body>
</html>
