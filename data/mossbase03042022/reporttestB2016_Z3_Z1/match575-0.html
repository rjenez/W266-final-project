<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3178.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3178.cpp<p></p><pre>
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;
//const double Eps(1e-10);

bool JesuLiJednaki(double x, double y, double Eps = 1e-10){
    return std::fabs(x-y) &lt;= Eps*(std::fabs(x) + std::fabs(y));}
    
bool ImaJednakih(std::vector&lt;std::pair&lt;double, double&gt;&gt; v){
      for(int i{0}; i&lt;v.size(); i++){
          double pomocna(v.at(i).first);
          for(int j=i+1; j&lt;v.size(); j++){
              if(JesuLiJednaki(pomocna, v.at(j).first)) return true;
          }
      }
      return false;
  }
  
double fun(double x) {
    return x*x + std::sin(x);}
  
std::vector&lt;double&gt; IzracunajKoeficijent(std::vector&lt;std::pair&lt;double, double&gt;&gt; parovi, int d){
    std::vector&lt;double&gt; vektor_koef;
     int n(parovi.size());
    for(int i=1; i&lt;=n; i++){
       double suma=0;
        for(int k=std::max(1,i-d); k&lt;=std::min(i, n-d); k++){
            double proizvod=1;
<a name="2"></a><font color="#0000FF"><a href="match575-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            for(int j=k; j&lt;=k+d; j++){
                if(j != i)
                proizvod *= 1/(parovi[i-1].first - parovi[j-1].first );
</font>            }
            proizvod *= std::pow(-1,k-1);
            suma += proizvod;
        }
         vektor_koef.push_back(suma);
    }
    return vektor_koef;
}
  
<a name="0"></a><font color="#FF0000"><a href="match575-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; parovi, int d){
    int n(parovi.size());
    if(d&lt;0 || d&gt;=n) throw std::domain_error ("Nedozvoljen red");
</font>    
    if(ImaJednakih(parovi)) throw std::domain_error ("Neispravni cvorovi");
    std::vector&lt;double&gt; vektor_koef;
    
    vektor_koef=IzracunajKoeficijent(parovi,d); //pitanje:da li ovom funkcijom trebam racunati koeficijent po koeficijent, ili je i ovo okej, da mi vrati gotov vektor!
    
    return [=](double x){ 
        double p{0}; 
        double q{0}; 
        for(int i=1; i&lt;=n; i++){
       if( JesuLiJednaki(x, parovi[i-1].first)) return parovi[i-1].second; 
        double u;
        u = vektor_koef.at(i-1) / (x - parovi[i-1].first) ;
        p = p + u*parovi[i-1].second;
        q= q+u;}
        return p/q;};
}


template &lt;typename FTip&gt;
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(FTip fun, double x_min, double x_max, double korak, int d){
       if (x_min&gt;x_max || korak &lt;=0) throw std::domain_error ("Nekorektni parametri");
      
       std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
       std::pair&lt;double,double&gt; par;
       for(double i = x_min; i&lt;= x_max; i+=korak){
           par=std::make_pair(i,fun(i));
           v.push_back(par);  
       }
       if(d&lt;0 || d&gt;=v.size()) throw std::domain_error ("Nedozvoljen red");
    
       if(ImaJednakih(v)) throw std::domain_error ("Neispravni cvorovi");
    
 return (BaricentricnaInterpolacija(v,d));
}




int main ()
{ 
    try{
    int opcija{0};

    std::cout&lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; opcija;
    
    if(opcija == 1){
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        int br_cvorova{0};
        std::cin &gt;&gt; br_cvorova;
        std::cin.ignore(10000, '\n');
        
        std::vector&lt;std::pair&lt;double, double&gt;&gt; vektor_cvorova;
        std::pair&lt;double, double&gt; par;
        double x,y;
        int i{0};
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
      
        
        while( i &lt;br_cvorova){
          std::cin &gt;&gt; x &gt;&gt; y;
          par = std::make_pair(x,y);
          vektor_cvorova.push_back(par); 
          std::cin.ignore(10000, '\n');
          i++; }
          
         
        if(ImaJednakih(vektor_cvorova)) throw std::domain_error ("Neispravni cvorovi");
        
      
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        int d;
        std::cin &gt;&gt; d;  
        if(d&lt;0 || d&gt;=vektor_cvorova.size()) throw std::domain_error ("Nedozvoljen red");
        std::cin.ignore(10000, '\n');
        
        
        for(;;){    
         std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
         double argument;
         std::cin &gt;&gt; argument;
         if( !std::cin ) {
         std::cin.clear(); 
         std::cin.ignore(10000, '\n');
         break;}
         std::function&lt;double(double)&gt; f(BaricentricnaInterpolacija({{1,3}, {2,5}, {4,4}, {5,2}, {7,1}}, 2));
         std::cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt;") = " &lt;&lt; f(argument) &lt;&lt; std::endl;
         std::cin.ignore(10000, '\n');
         }        

    }
    
    else if(opcija==2){
        double a, b;
        double korak;
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
<a name="3"></a><font color="#00FFFF"><a href="match575-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        std::cin &gt;&gt; a &gt;&gt; b &gt;&gt; korak;
        if (a&gt;b || korak &lt;=0) throw std::domain_error ("Nekorektni parametri");
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        int d;
        std::cin &gt;&gt; d;
</font>        if(d&lt;0) throw std::domain_error ("Nedozvoljen red");
        std::cin.ignore(10000, '\n');
    
        
        for(;;){
         std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
         double argument;
         std::cin &gt;&gt; argument;
         if( !std::cin ) {
         std::cin.clear();     
         std::cin.ignore(10000, '\n');
         break;}
<a name="1"></a><font color="#00FF00"><a href="match575-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

         std::function&lt;double(double)&gt; g(BaricentricnaInterpolacija(fun, a, b, korak, d));
     
         std::cout &lt;&lt;  "f(" &lt;&lt; argument &lt;&lt;") = " &lt;&lt; fun(argument) &lt;&lt; " " &lt;&lt; "fapprox(" &lt;&lt; argument &lt;&lt;") = " &lt;&lt; g(argument) &lt;&lt; std::endl;
</font><a name="4"></a><font color="#FF00FF"><a href="match575-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        }
        
    }
  
   
    }
    catch(std::domain_error e){
    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;}
</font>  /*
    try{
        BaricentricnaInterpolacija({{1,1},{2,2},{3,3}},-2);
        std::cout &lt;&lt; "Ne smije se ispisati 1" &lt;&lt; std::endl;
} 
catch(const std::domain_error &amp;r) { std::cout &lt;&lt;"E1: '" &lt;&lt; r.what() &lt;&lt;"'";}
catch(...) {std::cout &lt;&lt; "Ni oo se ne smije ispisati 1" &lt;&lt;std::endl;}
std::cout&lt;&lt; std::endl;

try{        BaricentricnaInterpolacija({{1,1},{2,2},{3,3}},5);
        std::cout &lt;&lt; "Ne smije se ispisati 2" &lt;&lt; std::endl;
} 
  catch(const std::domain_error &amp;r) { std::cout &lt;&lt;"E2: '" &lt;&lt; r.what() &lt;&lt;"'";}
catch(...) {std::cout &lt;&lt; "Ni oo se ne smije ispisati 2" &lt;&lt;std::endl;}

*/
return 0;
}</pre>
</body>
</html>
