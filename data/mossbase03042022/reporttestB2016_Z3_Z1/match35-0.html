<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2267.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2267.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match35-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#define epsilon 0.0001

double f(double x)
{
    return x*x+std::sin(x);
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvor,int d)
{

    if(d&lt;0 || d&gt;=cvor.size()) throw std::domain_error("Nedozvoljen red");
    for(int i=0;i&lt;cvor.size()-1;i++){
        for(int j=i+1;j&lt;cvor.size();j++){
            if(cvor[i].first==cvor[j].first)    throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::vector&lt;double&gt;vektor_suma;
    double w_suma;
    int i(1);
    int max,min;
    while(i&lt;=cvor.size()) {
        double iks=cvor[i-1].first;
        int razlika_max=i-d;

        //Trazenje maximuma
        if(razlika_max&gt;=1)    max=razlika_max;
        else    max=1;

        //Trazenje minimuma
        int razlika_min=cvor.size()-d;
        if(razlika_min&lt;=i)    min=razlika_min;
        else                 min=i;

        w_suma=0;
        for(int k=max; k&lt;=min; k++) {
            double w_proizvod(1);
            int j=k;
            //Racunanje proizvoda
            while(j&lt;=(k+d)) {

                if(j==i || std::fabs(iks-cvor[j-1].first)&lt;epsilon)  {
                    j++;
                    continue;
                }

                w_proizvod=w_proizvod*(1./(iks-cvor[j-1].first));

                j++;
            }

            //Suma ogromna
            w_suma+=(double)pow(-1,k-1)*w_proizvod;

        }
        vektor_suma.push_back(w_suma);

        i++;
    }

    return [vektor_suma,cvor](double x) {
        double brojnik(0),nazivnik(0),rezultat;
        for(int i=1; i&lt;=cvor.size(); i++) {
            if(std::fabs(x-cvor[i-1].first)&lt;epsilon) return cvor[i-1].second;
            brojnik=brojnik+((vektor_suma[i-1]*cvor[i-1].second)/(x-cvor[i-1].first));
            nazivnik=nazivnik+((vektor_suma[i-1])/(x-cvor[i-1].first));
            rezultat=brojnik/nazivnik;
        }

        return rezultat;
    };

}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(double fun(double),double min_x,double max_x,double prirastaj_x,int d)
{

    std::function&lt;double(double)&gt;nova_funkcija;
    if(min_x&gt;max_x || prirastaj_x&lt;=0)   throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; kreirani_cvorovi;
    double sum(min_x);
    while(sum&lt;=max_x) {
        double y=fun(sum);
        kreirani_cvorovi.push_back(std::make_pair(sum,y));
        sum=sum+prirastaj_x;
    }
    if(d&lt;0 || d&gt;=kreirani_cvorovi.size()) throw std::domain_error("Nedozvoljen red");
    nova_funkcija=BaricentricnaInterpolacija(kreirani_cvorovi,d);

    return nova_funkcija;

}

int main ()
{

    int broj_cvorova;
    double x,y;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int odaberi;   
    std::cin&gt;&gt;odaberi; 
    std::vector&lt;std::pair&lt;double,double&gt;&gt; v_cvor;
    if(odaberi==1) {
        
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        std::cin&gt;&gt;broj_cvorova;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
      
        int brojac(0);
        while(brojac&lt;broj_cvorova) {
            std::cin&gt;&gt;x&gt;&gt;y;
            v_cvor.push_back(std::make_pair(x,y));
            brojac++;
        }
        
    
        int red;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;red;
        double argument;
        try{
            
            for(;;) {
            BaricentricnaInterpolacija(v_cvor,red);
            std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt;"\"kraj\""&lt;&lt;" za kraj): ";
            if(!(std::cin&gt;&gt;argument))
                break;
            std::function&lt;double(double)&gt; funkcija=BaricentricnaInterpolacija(v_cvor,red);   
            std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;")"&lt;&lt;" = "&lt;&lt;funkcija(argument);
            std::cout&lt;&lt;std::endl;
            std::cin.ignore(1000,'\n');

        }
        }
     
       catch(std::domain_error poruka){
            std::cout&lt;&lt;poruka.what();
      
        }
        
    }
    
 
    else if(odaberi==2) {
        std::vector&lt;std::pair&lt;double,double&gt;&gt; v_cvor_;
        double min,max,korak;
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        std::cin&gt;&gt;min&gt;&gt;max&gt;&gt;korak;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int red;
        std::cin&gt;&gt;red;
        double argument;

        std::function&lt;double(double)&gt; fun;
        try{
        fun=BaricentricnaInterpolacija(f,min,max,korak,red);  
        for(;;) {
            std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt;"\"kraj\""&lt;&lt;" za kraj): ";
            if(!(std::cin&gt;&gt;argument))
                break;
            std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;")"&lt;&lt;" = "&lt;&lt;f(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;")"&lt;&lt;" = "&lt;&lt;fun(argument);
            std::cout&lt;&lt;std::endl;
            std::cin.ignore(1000,'\n');
        }
  
        }
  catch(std::domain_error poruka){
            std::cout&lt;&lt;poruka.what();
</font>        
        }
        
  
  
}



    return 0;
}

</pre>
</body>
</html>
