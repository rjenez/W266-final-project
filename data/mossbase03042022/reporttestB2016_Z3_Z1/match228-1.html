<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9095.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6303.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
using namespace std;

void test(int d,vector&lt;pair&lt;double,double&gt;&gt; v)
{
    if(d&lt;0) throw domain_error("Nedozvoljen red");
    if(d&gt;v.size()) throw domain_error("Nedozvoljen red");
}

double w(int d, int i, vector&lt;pair&lt;double,double&gt;&gt; cvorovi, int n)
{
    int m=max(1,i-d);
    int m1=min(i, n-d);
    double o=0, pr=1;
    for(int k=m; k&lt;=m1; k++)
    {
<a name="2"></a><font color="#0000FF"><a href="match228-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

        pr=1;
        for(int j=k; j&lt;=k+d; j++)
        {
            if(i==j) continue;
            else pr*=1./(cvorovi[i-1].first-cvorovi[j-1].first);
</font>        }
        o+=pow(-1,k-1)*pr;
    }
    return o;
}

<a name="1"></a><font color="#00FF00"><a href="match228-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

void test(vector&lt;pair&lt;double,double&gt;&gt; v)
{
    for(int i=0; i&lt;v.size()-1; i++)
        for(int j=i+1; j&lt;v.size(); j++)
            if(v[i].first==v[j].first) throw domain_error("Neispravni cvorovi");
</font>}

<a name="5"></a><font color="#FF0000"><a href="match228-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

template&lt;typename tip&gt;
function&lt;double(double)&gt; BaricentricnaInterpolacija(tip g, double mali, double veliki, double del, int d)
{
    if(del&lt;=0) throw domain_error("Nekorektni parametri");
</font>    vector&lt;pair&lt;double,double&gt;&gt; v;
    if(veliki&lt;mali) throw domain_error("Nekorektni parametri");
    while(veliki&gt;=mali)
    {
<a name="3"></a><font color="#00FFFF"><a href="match228-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        auto p=make_pair(mali,g(mali));
        v.push_back(p);
        mali+=del;
    }
    function&lt;double(double)&gt; gore,dolje;
    for(int i=1; i&lt;=v.size(); i++)
</font>    {
        if(i-1!=0)
        {
            double drugi=v[i-1].second;
            double om=w(d,i,v,v.size());
            double prvi=v[i-1].first;
            dolje=[dolje,om,prvi](double x) { return om/(x-prvi)+dolje(x);};
            gore=[gore,drugi,om,prvi](double x) { return om*drugi/(x-prvi)+gore(x); };
        }
        else
        {
            double drugi=v[i-1].second;
            double om=w(d,i,v,v.size());
            double prvi=v[i-1].first;
            dolje=[om,prvi](double x) { return om/(x-prvi);};
            gore=[drugi,om,prvi](double x) { return om*drugi/(x-prvi); };
        }
    }
    return [gore,v,dolje](double x) {
        double a=9999999;
        for(int i=0; i&lt;v.size(); i++)
            if(v[i].first==x) a=v[i].second;
        if(a==9999999) return gore(x)/dolje(x);
        else return a;
    };
}

function&lt;double(double)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt; v, int d)
{
    test(d,v);
    test(v);
    function&lt;double(double)&gt; gore,dolje;
    for(int i=1; i&lt;=v.size(); i++)
    {
        if(i-1!=0)
        {
            double drugi=v[i-1].second;
            double om=w(d,i,v,v.size());
            double prvi=v[i-1].first;
            dolje=[dolje,om,prvi](double x) { return om/(x-prvi)+dolje(x);};
            gore=[gore,drugi,om,prvi](double x) { return om*drugi/(x-prvi)+gore(x); };
        }
        else
        {
            double drugi=v[i-1].second;
            double om=w(d,i,v,v.size());
            double prvi=v[i-1].first;
            dolje=[om,prvi](double x) { return om/(x-prvi);};
            gore=[drugi,om,prvi](double x) { return om*drugi/(x-prvi); };
        }
    }
    return [gore,v,dolje](double x) {
        double a=9999999;
        for(int i=0; i&lt;v.size(); i++)
            if(v[i].first==x) a=v[i].second;
        if(a==9999999) return gore(x)/dolje(x);
        else return a;
    };
}

int main ()
{
	
	cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
	int opcija; cin&gt;&gt;opcija;
	try
	{
	    switch(opcija)
	    {
	        case 1:
	            {int cv;
	            cout&lt;&lt;"Unesite broj cvorova: ";
	            cin&gt;&gt;cv;
<a name="4"></a><font color="#FF00FF"><a href="match228-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

	            cout&lt;&lt;"Unesite cvorove kao parove x y: ";
	            vector&lt;pair&lt;double,double&gt;&gt; v;
	            for(int i=0; i&lt;cv; i++)
	            {
	                double a,b; cin&gt;&gt;a&gt;&gt;b; v.push_back(make_pair(a,b));
</font>	            }
	            cout&lt;&lt;"Unesite red interpolacije: ";
	            int d; 
	            cin&gt;&gt;d;
	            while(1)
	            {
	               double x;
	               cout&lt;&lt;"Unesite argument (ili "&lt;&lt;"\"kraj\""&lt;&lt;" za kraj): ";
	               cin&gt;&gt;x;
	               if(cin)
	                try{
	                    cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija(v,d)(x)&lt;&lt;endl;
	                } catch(domain_error r) { throw domain_error(r.what()); }
	                else break;
	            }
	            break; }
	        case 2:
	           { cout&lt;&lt;"Unesite krajeve intervala i korak: ";
	            double mali,veliki,del;
	            cin&gt;&gt;mali&gt;&gt;veliki&gt;&gt;del;
	            cout&lt;&lt;"Unesite red interpolacije: ";
	            int d;
	            cin&gt;&gt;d;
	            while(1)
	            {
	                double x;
	                cout&lt;&lt;"Unesite argument (ili "&lt;&lt;"\"kraj\""&lt;&lt;" za kraj): ";
	                cin&gt;&gt;x;
	                if(cin)
	                    try
	                    {
<a name="0"></a><font color="#FF0000"><a href="match228-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

	                        cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;x*x+sin(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija([](double x){return x*x+sin(x);},mali,veliki,del,d)(x)&lt;&lt;endl;
	                    } catch(domain_error r) { throw domain_error(r.what()); }
</font>	               else break;
	            }
	            break; }
	       default: opcija+=10;
	    }
	} catch(domain_error c) { cout&lt;&lt;c.what();}
	return 0;
}</pre>
</body>
</html>
