<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student7697.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt; 
#include &lt;stdexcept&gt;
#include &lt;functional&gt;


<a name="6"></a><font color="#00FF00"><a href="match159-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

std::function&lt;double(double)&gt; PrvaSuma(double x1, double x2, double k)
{
    return[x1, x2, k](double y) {
        if(y==x1) return x2;
</font>    };
}

<a name="5"></a><font color="#FF0000"><a href="match159-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

std::function&lt;double(double)&gt; DrugaSuma(double x1, double x2, double k) {
        return[x1, x2, k](double y) {
          return k/(y-x1);
</font>        };
}
        
std::function&lt;double(double)&gt; F() {
    return [](double x) {
        return x*x+sin(x);
    };
}

std::function&lt;float(float)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair &lt;double,double&gt;&gt; par, int d) {
         

            if(d&lt;0 || d&gt;par.size()) throw std::domain_error("Nedozvoljen red");

<a name="4"></a><font color="#FF00FF"><a href="match159-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

            for(int i=0; i&lt;par.size()-1; i++) {
                for(int j=i+1; j&lt;par.size(); j++) {
                    if(par[i].first==par[j].first) throw std::domain_error("Neispravni cvorovi");
</font>                }
            }

<a name="3"></a><font color="#00FFFF"><a href="match159-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            return [par, d](double x) {
                double zbir1=0, zbir2=0, proz=1, wi=0;
                int pocetak=1, kraj=1;

                for(int i=1; i&lt;=par.size(); i++) {
</font>                    pocetak=1, kraj=i, wi=0;
<a name="1"></a><font color="#00FF00"><a href="match159-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

                    if(i-d&gt;pocetak) pocetak=i-d;
                    if(par.size()-d&lt;kraj) kraj=par.size()-d;

                    for(int j=pocetak; j&lt;=kraj; j++) {
                        proz=1;

                        for(int k=j; k&lt;=j+d; k++) {
                            if(i==k) continue;
                            proz*=1./(par[i-1].first-par[k-1].first);

                        }
                        wi+=pow(-1,j-1)*proz;
                    }
                    if(x==par[i-1].first)
                        return par[i-1].second;

                    zbir1+=PrvaSuma(par[i-1].first, par[i-1].second, wi)(x);
                    zbir2+=DrugaSuma(par[i-1].first, par[i-1].second, wi)(x);
                }
                return zbir1/zbir2;
            };
        }



std::function&lt;double(double)&gt;BaricentricnaInterpolacija(std::function&lt;double(double)&gt; F, double xmin, double xmax, double dx, int d) {
</font>    
            if (xmin &lt; xmax || dx&lt;0) throw std::domain_error("Nekorektni parametri");

            return [F, xmin, xmax, dx, d](double x) 
            {
                
                std::vector&lt;double&gt; vtackica;
                for(double i=xmin; i&lt;=xmax; i+=dx) {
                    vtackica.push_back(i);
                }

<a name="2"></a><font color="#0000FF"><a href="match159-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

                std::vector&lt;std::pair&lt;double,double&gt;&gt; par(vtackica.size());
                for(int i=0; i&lt;par.size(); i++) {
                    par[i].first=vtackica[i];
                    par[i].second= F(vtackica[i]);

                }

                double zbir1=0, zbir2=0, wi=0, proz=1;
                int pocetak=1, kraj=1;

                for(int i=1; i&lt;=par.size(); i++) {
</font>                    pocetak=1; kraj=i; wi=0;
<a name="0"></a><font color="#FF0000"><a href="match159-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_17.gif"/></a>

                    if(i-d&gt;pocetak) pocetak=i-d;
                    if(par.size()-d&lt;kraj) kraj=par.size()-d;

                    for(int j=pocetak; j&lt;=kraj; j++) {
                        proz=1;

                        for(int k=j; k&lt;=j+d; k++) {
                            if(i==k) continue;
                            proz*=1./(par[i-1].first-par[k-1].first);
                        }
                        
                        wi+=pow(-1,j-1)*proz;
                    }
                    
                if(x==par[i-1].first)
                    return par[i-1].second;

                zbir1+=PrvaSuma(par[i-1].first, par[i-1].second, wi)(x);
                zbir2+=DrugaSuma(par[i-1].first, par[i-1].second, wi)(x);
            }
            return zbir1/zbir2;

        };
}

int main ()
{
   
    try {
        int opc=0, br=0;
        double x,y,red,unos=0;
</font>        
        for(;;) {
            std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
            std::cin &gt;&gt; opc;

            if(opc==1) {
                std::cout &lt;&lt; "Unesite broj cvorova: ";
                std::cin &gt;&gt; br;
                
                std::cout &lt;&lt;"Unesite cvorove kao parove x y: ";
                std::vector&lt;std::pair &lt;double,double&gt;&gt;par(br);
                
                for(int i; i&lt;br; i++) {
                    std::cin &gt;&gt; x;
                    std::cin &gt;&gt; y;
                    par[i].first=x;
                    par[i].second=y;
                }
                
                std::cout &lt;&lt;"Unesite red interpolacije: ";
                std::cin &gt;&gt; red;

                while(1) {
                    std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                    std::cin &gt;&gt; unos;

                    if(std::cin.fail()) {
                        return 0;
                    }
                    
                    double R1=BaricentricnaInterpolacija(par,red)(unos);
                    std::cout &lt;&lt; "f("&lt;&lt;unos&lt;&lt;") = " &lt;&lt; R1 &lt;&lt; std::endl;
                }
            } 
            
            else if(opc==2) {
                std::function&lt;double(double)&gt; helpf(F());
                
                std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
                double korak, pocetak, kraj;
                std::cin &gt;&gt; pocetak;
                std::cin &gt;&gt; kraj;
                std::cin &gt;&gt; korak;
                
                std::cout &lt;&lt; "Unesite red interpolacije: ";
                std::cin &gt;&gt; red;
                std::cin.clear();
                std::cin.ignore(10000, '\n');

                while(1) {
                    std::cout &lt;&lt; "Unesite argument(ili \"kraj\" za kraj): ";
                    std::cin &gt;&gt; unos;

                    if(std::cin.fail()) {
                        
                        return 0;
                    }
                    
                    double R2=BaricentricnaInterpolacija(helpf,pocetak,kraj,korak,red)(unos);
                    std::cout &lt;&lt; "f("&lt;&lt;unos&lt;&lt;") = " &lt;&lt; helpf(unos) &lt;&lt; " fapprox("&lt;&lt;unos&lt;&lt;") = "&lt;&lt; R2 &lt;&lt; std::endl;
                }
            }
            
            break;
        }
        
        return 0;
        
        
    } catch(std::domain_error greska) {
        
        std::cout&lt;&lt;greska.what();
        
    }
}</pre>
</body>
</html>
