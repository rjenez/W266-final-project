<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6029.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6029.cpp<p></p><pre>
/B2016/2017: Zadaća 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

using namespace std;
<a name="6"></a><font color="#00FF00"><a href="match159-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

function&lt;double(double)&gt; suma11(double prvi, double drugi, double koef)
         {
              return [prvi, drugi, koef](double y){if(y==prvi) return drugi; return koef*drugi/(y-prvi);};
</font>         }
         
<a name="5"></a><font color="#FF0000"><a href="match159-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

function&lt;double(double)&gt; suma22(double prvi, double drugi, double koef)
         {
              return [prvi, drugi, koef](double y){return koef/(y-prvi);};
</font>         }
         
         
function&lt;double(double)&gt; fun(){return [](double x){return x*x+sin(x);};}
         
function&lt;float(float)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double, double&gt;&gt; parovi, int d)
{
    if(d&lt;0 || d&gt;parovi.size()) throw domain_error("Nedozvoljen red");
    
<a name="4"></a><font color="#FF00FF"><a href="match159-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

    for(int i=0; i&lt;parovi.size()-1; i++)
        for(int j=i+1; j&lt;parovi.size(); j++)
            if(parovi[i].first==parovi[j].first)
</font>                throw domain_error("Neispravni cvorovi");
         
<a name="3"></a><font color="#00FFFF"><a href="match159-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    return [parovi, d](double x)
    {
        double suma1=0, suma2=0, proizvod=1, wi=0;
    int poc=1, end=1;
        //suma za f(x)
        for(int i=1; i&lt;=parovi.size(); i++)
</font>        {
          //računamo wi
         //suma za wi
         poc=1; end=i; wi=0;
<a name="1"></a><font color="#00FF00"><a href="match159-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_16.gif"/></a>

         if(i-d&gt;poc) poc=i-d;
         if(parovi.size()-d&lt;end) end=parovi.size()-d;
         
         //cout&lt;&lt;endl&lt;&lt;"i="&lt;&lt;i&lt;&lt;"\npoc="&lt;&lt;poc&lt;&lt;"\nend= "&lt;&lt;end;
         //cout&lt;&lt;endl&lt;&lt;"j= ";
         for(int j=poc; j&lt;=end; j++)
         { 
              //cout&lt;&lt;" "&lt;&lt;j&lt;&lt;" ";
              //proizvod za wi
              
              proizvod=1;
              
             //cout&lt;&lt;endl&lt;&lt;"k= ";
             
               for(int k=j; k&lt;=j+d; k++)
              {
                 if(i==k) continue;
                 proizvod*=1./(parovi[i-1].first-parovi[k-1].first);
                 
                 //cout&lt;&lt;" "&lt;&lt;k&lt;&lt;" ";
             }
             wi+=pow(-1,j-1)*proizvod;
          }
          if(x==parovi[i-1].first)
            return parovi[i-1].second;
          
          suma1+=suma11(parovi[i-1].first, parovi[i-1].second, wi)(x);
          suma2+=suma22(parovi[i-1].first, parovi[i-1].second, wi)(x);
        }
        return suma1/suma2;
    };
    
}


function&lt;double(double)&gt; BaricentricnaInterpolacija(function&lt;double(double)&gt; fun, double x_min, double x_max, double dx, int d)
</font>{
    if(x_min&gt;x_max || dx&lt;0)
        throw domain_error("Nekorektni parametri");
      
    return [fun, x_min, x_max, dx, d](double x)
    {
        vector&lt;double&gt; tacke;
        for(double i=x_min; i&lt;=x_max; i+=dx)
            tacke.push_back(i);
            
        
<a name="2"></a><font color="#0000FF"><a href="match159-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

        vector&lt;pair&lt;double, double&gt;&gt; parovi(tacke.size());
        for(int i=0; i&lt;parovi.size(); i++)
        {
            parovi[i].first=tacke[i];
            parovi[i].second=fun(tacke[i]);
        }
            
        double suma1=0, suma2=0, proizvod=1, wi=0;
    int poc=1, end=1;
        //suma za f(x)
        for(int i=1; i&lt;=parovi.size(); i++)
</font>        {
          //računamo wi
         //suma za wi
         poc=1; end=i; wi=0;
<a name="0"></a><font color="#FF0000"><a href="match159-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_18.gif"/></a>

         if(i-d&gt;poc) poc=i-d;
         if(parovi.size()-d&lt;end) end=parovi.size()-d;
         
         //cout&lt;&lt;endl&lt;&lt;"i="&lt;&lt;i&lt;&lt;"\npoc="&lt;&lt;poc&lt;&lt;"\nend= "&lt;&lt;end;
         //cout&lt;&lt;endl&lt;&lt;"j= ";
         for(int j=poc; j&lt;=end; j++)
         { 
              //cout&lt;&lt;" "&lt;&lt;j&lt;&lt;" ";
              //proizvod za wi
              
              proizvod=1;
              
             //cout&lt;&lt;endl&lt;&lt;"k= ";
             
               for(int k=j; k&lt;=j+d; k++)
              {
                 if(i==k) continue;
                 proizvod*=1./(parovi[i-1].first-parovi[k-1].first);
                 
                 //cout&lt;&lt;" "&lt;&lt;k&lt;&lt;" ";
             }
             wi+=pow(-1,j-1)*proizvod;
          }
          if(x==parovi[i-1].first)
            return parovi[i-1].second;
          
          suma1+=suma11(parovi[i-1].first, parovi[i-1].second, wi)(x);
          suma2+=suma22(parovi[i-1].first, parovi[i-1].second, wi)(x);
        }
        return suma1/suma2;
            
    };
    
    
}


int main ()
{
    //auto f(BaricentricnaInterpolacija({{1, 3}, {2, 5}, {4, 4}, {5, 2}, {7, 1}},2));
    //cout&lt;&lt;f(4);
    try
    {
        int opcija=0, broj_cvorova=0;
        double x, y, red, unos=0;
</font>        for(;;)
        {
            cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
            cin&gt;&gt;opcija;
            if(opcija==1)
            {
                cout&lt;&lt;"Unesite broj cvorova: ";
                cin&gt;&gt;broj_cvorova;
                cout&lt;&lt;"Unesite cvorove kao parove x y: ";
                vector&lt;pair&lt;double, double&gt;&gt; parovi(broj_cvorova);
                for(int i=0; i&lt;broj_cvorova; i++)
                {
                    cin&gt;&gt;x; cin&gt;&gt;y;
                    parovi[i].first=x;
                    parovi[i].second=y;
                }
                cout&lt;&lt;"Unesite red interpolacije: ";
                cin&gt;&gt;red;
                while(1)
                {
                    cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    cin&gt;&gt;unos;
                    if(cin.fail())
                    {
                        return 0;
                    }
                    double rez=BaricentricnaInterpolacija(parovi,red)(unos);
                    cout&lt;&lt;"f("&lt;&lt;unos&lt;&lt;") = "&lt;&lt;rez&lt;&lt;endl;
                }
            }
            
            else if(opcija==2)
            {
                function&lt;double(double)&gt; pom(fun());
                cout&lt;&lt;"Unesite krajeve intervala i korak: ";
                double korak, poc, end;
                cin&gt;&gt;poc; cin&gt;&gt;end; cin&gt;&gt;korak; 
                cout&lt;&lt;"Unesite red interpolacije: ";
                cin&gt;&gt;red; cin.clear(); cin.ignore(10000, '\n'); 
                 while(1)
                {
                    cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                    cin&gt;&gt;unos; 
                    if(cin.fail())
                    {
                        return 0;
                    }
                    double re=BaricentricnaInterpolacija(pom, poc, end, korak, red)(unos);
                    cout&lt;&lt;"f("&lt;&lt;unos&lt;&lt;") = "&lt;&lt;pom(unos)&lt;&lt;" fapprox("&lt;&lt;unos&lt;&lt;") = "&lt;&lt;re&lt;&lt;endl;
                }
            }
            break;
        }
    	return 0;
    }
    catch(domain_error dom)
    {
        cout&lt;&lt;dom.what();
    }
}</pre>
</body>
</html>
