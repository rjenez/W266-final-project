<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student4290.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8387.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;cmath&gt;
<a name="0"></a><font color="#FF0000"><a href="match36-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_48.gif"/></a>

double f(double d){
    return d*d+(std::sin(d));
}
int mini(int a,int b){
    int m=a;
    for(int i=a;i&lt;b;i++)if(i&lt;m)m=i;
    return m;
}
int maxi(int a,int b){
    int m=a;
    for(int i=a;i&lt;b;i++)if(i&gt;m)m=i;
    return m;
}
bool Jel(std::vector&lt;std::pair&lt;double,double&gt;&gt; v){
    for(int i=1;i&lt;v.size();i++)if(v[i].first==v[0].first)return true;
    return false;
}
std::vector&lt;double&gt; FloaterHorman(const std::vector&lt;std::pair&lt;double,double&gt;&gt; &amp;v,int d){
    int n=v.size();
    std::vector&lt;double&gt; sume;
    for(int i=0;i&lt;n;i++){
        double suma(0);
        for(int k=maxi(1,i-d);k&lt;mini(i,n-d);k++){
            double proizvod(1);
            for(int j=k;j&lt;k+d;j++){
                if(i==j)continue;
                proizvod*=1/(v[i].first-v[j].first);
            }
            suma+=std::pow(-1,k-1)*proizvod;
        }
        sume.push_back(suma);
    }
    return sume;
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(const std::vector&lt;std::pair&lt;double,double&gt;&gt; &amp;cvorovi,int d){
    if(d&gt;cvorovi.size() || d&lt;0)throw std::domain_error("Nedozvoljen red");
    if(Jel(cvorovi))throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt; w=FloaterHorman(cvorovi,d);
    return[cvorovi,d,w](double x){
        auto suma1=(w[1]/(x-cvorovi[1].first))*cvorovi[1].second;
        auto suma2=w[1]/(x-cvorovi[1].first);
        for(int i=2;i&lt;w.size();i++){
            suma1+=(w[i]/(x-cvorovi[i].first))*cvorovi[i].second;
            suma2+=w[i]/(x-cvorovi[i].first);
        }
        return(suma1/suma2);
    };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f,double xmin,double xmax,double dx,int d){
</font>    if(xmin&gt;xmax || dx&lt;0)throw std::domain_error("Nekorektni parametri");
<a name="1"></a><font color="#00FF00"><a href="match36-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_46.gif"/></a>

    std::vector&lt;std::pair&lt;double,double&gt;&gt; c;
    for(double i=xmin;i&lt;xmax;i+=dx){
        c.push_back(std::make_pair(i,f(i)));
    }
    std::vector&lt;double&gt; w=FloaterHorman(c,d);
    return[c,d,w](double x){
        auto suma1=(w[1]/(x-c[1].first))*c[1].second;
        auto suma2=w[1]/(x-c[1].first);
        for(int i=2;i&lt;w.size();i++){
            suma1+=(w[i]/(x-c[i].first))*c[i].second;
            suma2+=w[i]/(x-c[i].first);
        }
        return(suma1/suma2);
    };
}
int main (){
    int opcija;
    std::cout&lt;&lt;"Odaberite opciju ( 1 - unos cvorova, 2 - aproksimacija ) : ";
    std::cin&gt;&gt;opcija;
    if(opcija==1){
        int br;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        std::cin&gt;&gt;br;
        std::vector&lt;std::pair&lt;double,double&gt;&gt; c;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        double a,b;
        for(int i=0;i&lt;br;i++){
            std::cin&gt;&gt;a &gt;&gt;b;
            c.push_back(std::make_pair(a,b));
        }
        int d;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
        double argument;
        while(std::cin){
            std::cout&lt;&lt;"Unesite argument (ili ""kraj"" za kraj): ";
            std::cin&gt;&gt;argument;
            if(!(std::cin))break;
            auto f=BaricentricnaInterpolacija(c,d);
            std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument)&lt;&lt;std::endl;
        }
    }
    else if(opcija==2){
        double mn,mx,dx;
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        std::cin&gt;&gt;mn &gt;&gt;mx &gt;&gt;dx;
        int d;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
        double argument;
        while(std::cin){
            std::cout&lt;&lt;"Unesite argument (ili ""kraj"" za kraj): ";
            std::cin&gt;&gt;argument;
            if(!std::cin)break;
            auto g=BaricentricnaInterpolacija(f,mn,mx,dx,d);
            std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;g(argument)&lt;&lt;std::endl;
</font>        }
    }
    
	return 0;
}</pre>
</body>
</html>
