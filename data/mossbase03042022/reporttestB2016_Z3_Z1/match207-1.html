<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5366.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8755.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;

int max(int a, int b)
{
    if(a&gt;=b) return a;
    else return b;
}
int min(int a, int b)
{
    if(a&lt;=b) return a;
    else return b;
}
int StepenMinusJedan(int x)
{
    if(x%2==0)  return 1;
    else return -1;
}

typedef std::vector&lt;std::pair&lt;double,double&gt;&gt; VektorParova;
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(VektorParova cvor, int d)
{
    const double EPS(0.0000001);
    int n=cvor.size();
    if(d&lt;0 || d&gt;=n)    throw std::domain_error("Nedozvoljen red");
    for(int i=0; i&lt;n-1; i++)
        for(int j=i+1; j&lt;n; j++)
            if(std::fabs(cvor[i].first-cvor[j].first)&lt;EPS)    throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt; w;
    for(int i=1; i&lt;=n; i++)
    {
        double sum(0);
        if(d&lt;=6)
        {
<a name="2"></a><font color="#0000FF"><a href="match207-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_6.gif"/></a>

            for(int k=max(1,i-d); k&lt;=min(i,n-d); k++)
            {
                double proizvod(1);
                for(int j=k; j&lt;=k+d; j++)
                {
                    if(j==i) continue;      //sta ako je d=0? =&gt; proizvod=0?
                    proizvod*=(1./(cvor[i-1].first-cvor[j-1].first));
                    if(j==k+d)  break;
</font>                }
                sum+=proizvod*StepenMinusJedan(k-1);
                if(k==min(i,n-d))   break;
            }
        }
        w.push_back(sum);
        if(i==n)    break;
    }
    return[w,cvor, EPS](double x)
    {
        double sum1(0), sum2(0);
        for(int i=0; i&lt;cvor.size(); i++)
        {
            if(std::fabs(x-cvor[i].first)&lt;EPS)  return cvor[i].second;
            double temp(w[i]/(x-cvor[i].first));
            sum1+=temp*cvor[i].second;
            sum2+=temp;
        }
<a name="5"></a><font color="#FF0000"><a href="match207-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        return sum1/sum2;
    };
}
std::function&lt;double(double)&gt;BaricentricnaInterpolacija(double fun(double), double mini, double maxi, double delta, int d)
{
    if(mini&gt;maxi || delta&lt;=0)   throw std::domain_error("Nekorektni parametri");
</font>    VektorParova cvor;
    double br(mini);
<a name="3"></a><font color="#00FFFF"><a href="match207-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    for(int i=0; br&lt;=maxi; br+=delta, i++) cvor.push_back(std::make_pair(br, fun(br)));
    return BaricentricnaInterpolacija(cvor,d);
}
int main ()
{
    int opcija;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;opcija;
    if(opcija==1)
    {
        int n;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
</font>        std::cin&gt;&gt;n;
<a name="0"></a><font color="#FF0000"><a href="match207-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

        VektorParova cvor;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;n; i++)
        {
            double x,y;
            std::cin&gt;&gt;x&gt;&gt;y;
            cvor.push_back(std::make_pair(x,y));
        }
        int d;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
        for(;;)
        {
            double x;
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::cin&gt;&gt;x;
            if(!std::cin)   return 0;
</font>            else 
            {
                try
                {
                    std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija(cvor, d)(x)&lt;&lt;std::endl;
                }
                catch(std::domain_error izuzetak)
                {
                    std::cout&lt;&lt;izuzetak.what();
                    return 0;
                }
            }
        }
    }
<a name="1"></a><font color="#00FF00"><a href="match207-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

    if(opcija==2)
    {
        double mini, maxi, delta;
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        std::cin&gt;&gt;mini&gt;&gt;maxi&gt;&gt;delta;
        int d;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
        for(;;)
        {
            double x;
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::cin&gt;&gt;x;
            if(!std::cin)   return 0;
</font>            else 
            {
<a name="4"></a><font color="#FF00FF"><a href="match207-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

                try
                {
                    std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;x*x+std::sin(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija([](double x){return x*x+std::sin(x);}, mini, maxi, delta, d)(x)&lt;&lt;std::endl;
</font>                }
                catch(std::domain_error izuzetak)
                {
                    std::cout&lt;&lt;izuzetak.what();
                    return 0;
                }
            }
        }
    }
}</pre>
</body>
</html>
