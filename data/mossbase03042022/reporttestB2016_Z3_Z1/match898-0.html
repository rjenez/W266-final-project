<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6604.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6604.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;

<a name="0"></a><font color="#FF0000"><a href="match898-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

double fapprox(double x)
{
    return x*x+std::sin(x);
}

int VeciOd(int a, int b)
{
    if(a&gt;b) return a;
    return b;
}
int ManjiOd(int a, int b)
{
    if(a&lt;b) return a;
    return b;
}
std::function&lt;double(double)&gt;BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; v, int d)
</font>{
    if(d&lt;0 || d&gt;v.size()) throw std::domain_error("Nedozvoljen red");
    for(int i=0; i&lt;v.size(); i++) {
        for(int j=i+1; j&lt;v.size(); j++) {
            if(v[i].first==v[j].first) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::vector&lt;double&gt;v2;
    for(int i=0; i&lt;v.size(); i++) {
        double suma(0);
        for(int k=VeciOd(1,i+1-d); k&lt;=ManjiOd(i+1, v.size()-d); k++) {
            double izraz, izraz2(1);
            for(int j=k-1; j&lt;=k+d-1; j++) {
                if(j!=i)izraz2*=(1./(v[i].first-v[j].first));
            }
            izraz=std::pow(-1, k-1)*izraz2;
            suma+=izraz;
        }
        v2.push_back(suma);
    }
    return [v, d, v2](double x) {
        double y, z, suma2(0), suma3(0);
        for(int i=0; i&lt;v.size(); i++) {
            if(x==v[i].first) return v[i].second;
        }
        for(int i=0; i&lt;v.size(); i++) {
            y=(v2[i]/(x-v[i].first))*v[i].second;
            suma2+=y;
        }
        for(int i=0; i&lt;v.size(); i++) {
            z=v2[i]/(x-v[i].first);
            suma3+=z;
        }
        double l=suma2/suma3;
        return l;
    };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(double f(double), double xmin, double xmax, double dx, int d)
{
    if(xmin&gt;xmax || dx&lt;=0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; cvor;
<a name="2"></a><font color="#0000FF"><a href="match898-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    for(double i=xmin; i&lt;xmax; i+=dx) {
        cvor.push_back(std::make_pair(i, f(i)));
    }
    return BaricentricnaInterpolacija(cvor, d);
}


int main ()
</font>{
    try {
        std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int n;
        std::cin&gt;&gt;n;
        if(n==1) {
            std::cout&lt;&lt;"Unesite broj cvorova: ";
<a name="3"></a><font color="#00FFFF"><a href="match898-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            int m;
            std::cin&gt;&gt;m;
            std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            std::vector&lt;std::pair&lt;double, double&gt;&gt; cvor(m);
</font>            double a, b;
            for(int i=0; i&lt;m; i++) {
                std::cin&gt;&gt;a&gt;&gt;b;
                cvor[i].first=a;
                cvor[i].second=b;
            }
            std::cout&lt;&lt;"Unesite red interpolacije: ";
            int d;
            std::cin&gt;&gt;d;
            std::cin.ignore(1000,'\n');
            for(;;) {
                std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt; std::setw(5) &lt;&lt; std::setfill('"')&lt;&lt;"kraj"&lt;&lt;std::setw(12)&lt;&lt;std::setfill('"')&lt;&lt;" za kraj): ";
                std::string s;
                std::getline(std::cin, s);
                int slovo(0);
                for(int i=0; i&lt;s.length(); i++) {
                    if(!((s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')|| s[i]=='.' || s[i]=='-')) {
                        slovo=1;
                        break;
                    }
                }
                if(slovo) break;               
                auto fun=BaricentricnaInterpolacija(cvor, d);
<a name="1"></a><font color="#00FF00"><a href="match898-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

                std::cout&lt;&lt;"f("&lt;&lt;std::stod(s)&lt;&lt;") = " &lt;&lt; fun(std::stod(s))&lt;&lt;std::endl;

            }
        } else if(n==2) {
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double x, y, z;
            std::cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
</font>            std::cout&lt;&lt;"Unesite red interpolacije: ";
            int r;
            std::cin&gt;&gt;r;
            std::cin.ignore(1000,'\n');
            for(;;) {
                std::cout&lt;&lt;"Unesite argument (ili "&lt;&lt; std::setw(5) &lt;&lt; std::setfill('"')&lt;&lt;"kraj"&lt;&lt;std::setw(12)&lt;&lt;std::setfill('"')&lt;&lt;" za kraj): ";
                std::string s;
                std::getline(std::cin, s);
                int slovo(0);
                for(int i=0; i&lt;s.length(); i++) {
                    if(!((s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')|| s[i]=='.' || s[i]=='-')) {
                        slovo=1;
                        break;
                    }
                }
                if(slovo) break;
                auto fun=BaricentricnaInterpolacija(fapprox, x, y, z, r);
                std::cout&lt;&lt;"f("&lt;&lt;std::stod(s)&lt;&lt;") = " &lt;&lt; fapprox(std::stod(s))&lt;&lt;" fapprox("&lt;&lt;std::stod(s)&lt;&lt;") = " &lt;&lt; fun(std::stod(s))&lt;&lt;std::endl;

            }
        }
    } catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;izuzetak.what();
    }
    return 0;
}</pre>
</body>
</html>
