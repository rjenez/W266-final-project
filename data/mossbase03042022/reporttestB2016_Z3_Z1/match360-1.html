<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2340.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3819.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match360-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
double fun(double x) {
    return x*x+std::sin(x);
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi, int d) {
    if(d&lt;0 || d&gt;=cvorovi.size()) throw std::domain_error("Nedozvoljen red");
    for(int i(0); i&lt;cvorovi.size()-1; i++) {
</font>        for(int j(i+1); j&lt;cvorovi.size(); j++) {
            if(fabs(cvorovi[i].first-cvorovi[j].first)&lt;0.00001) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::vector&lt;double&gt; wi;
    double proizvod;
    int mind(cvorovi.size()-d), min, k;
    for(int l(0); l&lt;cvorovi.size(); l++) {
        double suma(0);
        if(mind&lt;l+1) min=mind;
        else min=l+1;
        if(l+1-d&gt;1) k=l+1-d;
        else k=1;
        //std::cout &lt;&lt; "k = " &lt;&lt; k &lt;&lt; "   min = " &lt;&lt; min &lt;&lt; std::endl;
        for(int i(k); i&lt;=min; i++) {
            proizvod=1;
            for(int j(i); j&lt;=i+d; j++) {
                if(j-1!=l) {
                    proizvod*=1/(cvorovi[l].first-cvorovi[j-1].first);
                }
                //std::cout &lt;&lt; "proizvod=" &lt;&lt; proizvod &lt;&lt; "   ";
            }
            suma+=pow(-1,i-1)*proizvod;
        }
        wi.push_back(suma);
    }
    /*for(int i(0); i&lt;wi.size(); i++) {
        std::cout &lt;&lt; wi[i] &lt;&lt; "   ";
    }*/
    return [cvorovi, d, wi](double x){
        double nazivnik(0), brojnik(0);
        for(int i(0); i&lt;cvorovi.size(); i++) {
            if(fabs(x-cvorovi[i].first)&lt;0.000001) {
                return cvorovi[i].second;
            }
            else {
            brojnik+=(wi[i]/(x-cvorovi[i].first))*cvorovi[i].second;
            nazivnik+=wi[i]/(x-cvorovi[i].first);
            }
        }
        //std::cout &lt;&lt; std::endl &lt;&lt; brojnik &lt;&lt; "    " &lt;&lt; nazivnik;
        return brojnik/nazivnik;
    };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xmin, double xmax, double dx, int d) {
    std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi;
    if(xmin&gt;xmax || dx&lt;=0) throw std::domain_error("Nekorektni parametri");
    int brojac(1);
    double temp=xmin;
    while(temp&lt;=xmax) {
        std::pair&lt;double,double&gt; par;
        par=std::make_pair(temp, f(temp));
        cvorovi.push_back(par);
        temp = xmin+brojac*dx;
        brojac++;
    }
    //for(int i(0); i&lt;cvorovi.size(); i++) {
      //  std::cout &lt;&lt; cvorovi[i].first &lt;&lt; "  " &lt;&lt; cvorovi[i].second &lt;&lt; std::endl;
    //}
    auto fun=BaricentricnaInterpolacija(cvorovi,d);
    return [fun](double x) {
      return fun(x);
    };
}
int main (){
    std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi;
    std::pair&lt;double,double&gt; par;
    int opcija, brojcvorova, d;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; opcija;
    if(opcija==1) {
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; brojcvorova;
        double x, y;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i(0); i&lt;brojcvorova; i++) {
            std::cin &gt;&gt; x &gt;&gt; y;
            par=std::make_pair(x, y);
            cvorovi.push_back(par);
        }
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; d;
        try {
<a name="1"></a><font color="#00FF00"><a href="match360-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

            for(;;) {
                double a;
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::cin &gt;&gt; a;
                if(!std::cin) break;
                auto f(BaricentricnaInterpolacija(cvorovi, d));
                std::cout &lt;&lt; "f("&lt;&lt; a &lt;&lt; ") = " &lt;&lt; f(a) &lt;&lt; std::endl;
</font>            }
        }
        catch(std::domain_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what();
            return 0;
        }
    }
    if(opcija==2) {
<a name="3"></a><font color="#00FFFF"><a href="match360-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        double xmin, xmax, dx;
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        std::cin &gt;&gt; xmin &gt;&gt; xmax &gt;&gt; dx;
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        std::cin &gt;&gt; d;
</font>        try {
            for(;;) {
                double a;
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                std::cin &gt;&gt; a;
                if(!std::cin) break;
<a name="2"></a><font color="#0000FF"><a href="match360-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

                auto fapprox(BaricentricnaInterpolacija(fun, xmin, xmax, dx, d));
                std::cout &lt;&lt;  "f("&lt;&lt; a &lt;&lt; ") = " &lt;&lt; fun(a) &lt;&lt; " fapprox(" &lt;&lt; a &lt;&lt; ") = " &lt;&lt; fapprox(a) &lt;&lt; std::endl;
</font>            }
        }
        catch(std::domain_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what();
            return 0;
        }
    }
	return 0;
}</pre>
</body>
</html>
