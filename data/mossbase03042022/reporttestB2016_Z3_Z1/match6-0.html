<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6874.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student6874.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match6-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;

bool IstiSu (double x, double y, double a = 1e-6){
    return std::abs(x-y)&lt;a;
}


std::function&lt;double (double)&gt; BaricentricnaInterpolacija (std::vector&lt;std::pair&lt;double, double&gt;&gt; v, int d){
    if(d&lt;0 || d&gt;=v.size())
      throw std::domain_error ("Nedozvoljen red");
    for(int i=0; i&lt;v.size(); i++)
      for(int j=0; j&lt;v.size(); j++)
        if(j!=i &amp;&amp; IstiSu(v[i].first,v[j].first))
          throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt; w(v.size());
    double izraz4(0);
    for(int i=1; i&lt;=v.size(); i++){
        izraz4 = 0;
        int maxi, mini;
        if(1 &gt; i -d)
          maxi = 1;
        else
          maxi = i - d;
        if(i &lt; v.size() - d)
          mini = i;
        else 
          mini = v.size() - d;
        double izraz3(1);
        for(int k = maxi; k&lt;=mini; k++){
            izraz3 = 1;
            izraz3*=std::pow(-1, k -1);
            for(int j= k; j&lt;=k+d; j++){
                if(j!=i)
                  izraz3*=(1./(v[i-1].first - v[j-1].first));
            }
            izraz4+=izraz3;
        }
        w[i-1] = izraz4;
    }
   return [v, d, w] (double x){
       for(auto a : v) if(IstiSu(a.first,x)) return a.second;
       
       double izraz1(0), izraz2(0);
       for(int i=1; i&lt;=v.size(); i++){
           
           izraz1+=(w[i-1]*v[i - 1].second)/(x - v[i - 1].first);
           izraz2+=(w[i-1])/(x - v[i -1].first);
       }
       
       return izraz1/izraz2;
   };
}


template &lt;typename funtip&gt;
std::function &lt;double (double)&gt; BaricentricnaInterpolacija (funtip f, double xmin, double xmax, double dx, int d){
    if(xmin&gt;xmax || dx&lt;=0)
      throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
    for(double a = xmin; a&lt;=xmax; a+=dx)
      v.push_back({a, f(a)} );
    std::vector&lt;double&gt; w(v.size());
    for(int i=1; i&lt;=v.size(); i++){
        double maxi, mini;
        if(1&gt;i-d)
          maxi = 1;
        else maxi = i-d;
        if(i&gt;v.size() - d)
          mini = v.size() - d;
        else
          mini = i;
        double izraz3(1), izraz4(0);
        for(int k=maxi; k&lt;=mini; k++){
            izraz3=1;
            izraz3*=std::pow(-1, k-1);
            for(int j=k; j&lt;=k+d; j++){
                if(j!=i)
                  izraz3*=(1./(v[i-1].first - v[j-1].first));
                  
            }
            izraz4+=izraz3;
        }
        w[i-1] = izraz4;
    }
    return [v, d, w] (double x){
        for(auto a : v) if(IstiSu(a.first,x)) return a.second;
    double izraz1(0), izraz2(0);
     for(int i=1; i&lt;=v.size(); i++){
         
            
            izraz1+=(w[i-1]*v[i-1].second)/(x - v[i-1].first);
            izraz2+=(w[i-1])/(x - v[i-1].first);
     }
        return izraz1/izraz2;
    };
}

double fun(double x){
    return x*x + std::sin(x);
}

int main ()
{
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int k;
    std::cin&gt;&gt;k;
    if(k==1){
        std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int l;
        std::cin&gt;&gt;l;
        v.resize(l);
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;l; i++)
          std::cin&gt;&gt;v[i].first&gt;&gt;v[i].second;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        std::cin&gt;&gt;d;
        try{
          auto f(BaricentricnaInterpolacija(v, d));
          do{
              std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
              double s;
              std::cin&gt;&gt;s;
              if(!std::cin)
                return 0;
              std::cout&lt;&lt;"f("&lt;&lt;s&lt;&lt;") = "&lt;&lt;f(s)&lt;&lt;std::endl;
          }while(std::cin);
          return 0;
        }
        catch(std::domain_error e){
            std::cout&lt;&lt;e.what();
            
        }
       
    }
    if(k==2){
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double a, b, c;
        std::cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d;
        std::cin&gt;&gt;d;
        try{
            auto f(BaricentricnaInterpolacija(fun, a, b, c, d));
            do{
                std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
                double s;
                std::cin&gt;&gt;s;
                if(!std::cin)
                  return 0;
                std::cout&lt;&lt;"f("&lt;&lt;s&lt;&lt;") = "&lt;&lt;fun(s)&lt;&lt;" fapprox("&lt;&lt;s&lt;&lt;") = "&lt;&lt;f(s)&lt;&lt;std::endl;;
            }while(std::cin);
            return 0;
        }
        catch(std::domain_error e){
            std::cout&lt;&lt;e.what();
        }
        
    }
	return 0;
</font>}



</pre>
</body>
</html>
