<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2967.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2967.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
#include &lt;limits&gt;
#define epsilon 0.0000000001
<a name="0"></a><font color="#FF0000"><a href="match12-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::cout;
using std::cin;
using std::endl;
using std::vector;
double xsinx (double x){
    return x * x + std::sin(x);
}
int max(int a,int b){
    if(a&gt;=b)
        return a;
    else return b;
}
int min(int a,int b)
{
    if(a&lt;=b)
        return a;
    else return b;
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; V, int d){
    bool ima=false;
    if(d&lt;0 || d&gt;=V.size()) throw std::domain_error ("Nedozvoljen red");
    for(int i=0; i&lt;V.size(); i++)
        for(int j=i+1; j&lt;V.size(); j++)
            if(fabs(V[i].first-V[j].first)&lt;epsilon)
                ima=true;
    if(ima) throw std::domain_error ("Neispravni cvorovi");
    int n=V.size();
    return [V,n,d](double x) {
        double Suma1 {},Suma2 {},SumaW,sumaw;
        for(int i=1; i&lt;=n; i++) {
            SumaW=0;
            for(int k=max(1,i-d); k&lt;=min(i,n-d); k++) {
                sumaw=1;
                for(int j=k; j&lt;=k+d; j++) {
                    if(i==j)
                        continue;
                    sumaw*=(1/(V[i-1].first-V[j-1].first));
                }
                SumaW+=(sumaw*pow(-1,k-1));
            }
            if(fabs(x-V[i-1].first)&lt;epsilon)
                return V[i-1].second;
            else     Suma1+=((SumaW*V[i-1].second)/(x-V[i-1].first));

        }
        for(int i=1; i&lt;=n; i++) {
            SumaW=0;
            for(int k=max(1,i-d); k&lt;=min(i,n-d); k++) {
                sumaw=1;
                for(int j=k; j&lt;=k+d; j++) {
                    if(i==j)
                        continue;
                    sumaw*=(1/(V[i-1].first-V[j-1].first));
                }
                SumaW+=(sumaw*pow(-1,k-1));
            }
            if(fabs(x-V[i-1].first)&lt;epsilon)
                return V[i-1].second;
            else Suma2+=((SumaW)/(x-V[i-1].first));
        }
        return Suma1/Suma2;
    };
}
std::function&lt;double(double)&gt;  BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xMin,double xMax, double xD, int d){
    std::vector&lt;std::pair&lt;double,double&gt;&gt; V;
    if(xMin&gt;xMax || xD&lt;0) throw std::domain_error ("Nekorektni parametri");
    int i {};
    double m;
    m=(xMax-xMin)/xD;
    if(d&gt;3)
        while(i&lt;m) {
            V.resize(i+1);
            V[i].first=xMin+xD*i;
            V[i].second=f(V[i].first);
             if(i&gt; std::numeric_limits&lt;int&gt;::max() || i&lt;0)
                break;
            i++;
         
        }
    else  while(i&lt;=m) {
            V.resize(i+1);
            V[i].first=xMin+xD*i;
            V[i].second=f(V[i].first);
            if(V[i].first&gt; std::numeric_limits&lt;double&gt;::max() || V[i].first&lt;0)
                break;
            i++;
        }
        // 2147483647
    return BaricentricnaInterpolacija(V,d);
}
int main ()
{
    int o;
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    cin&gt;&gt;o;
    int d;
    std::vector&lt;std::pair&lt;double,double&gt;&gt; V;

    if(o==1) {
        int n;
        cout&lt;&lt;"Unesite broj cvorova: ";
        cin&gt;&gt;n;
        V.resize(n);
        cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;n; i++) {
            cin&gt;&gt;V[i].first&gt;&gt;V[i].second;
        }
        cout&lt;&lt;"Unesite red interpolacije: ";
        cin&gt;&gt;d;
        for(;;) {
            std::string b,kraj="kraj";
            char c='"';
            cout&lt;&lt;"Unesite argument (ili "&lt;&lt;c&lt;&lt;kraj&lt;&lt;c&lt;&lt;" za kraj): ";
            cin&gt;&gt;b;
            if(b=="kraj")
                break;
            double a;
            a=std::stod(b);
            try{
                auto f(BaricentricnaInterpolacija(V,d));
                cout&lt;&lt;"f("&lt;&lt;a&lt;&lt;") = "&lt;&lt;f(a)&lt;&lt;endl;
            }
            catch(std::domain_error e){
                cout&lt;&lt;e.what()&lt;&lt;endl;
            }
        }
    }
    double xMin,xMax,xD;
    if(o==2) {
        cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        cin&gt;&gt;xMin&gt;&gt;xMax&gt;&gt;xD;
        cout&lt;&lt;"Unesite red interpolacije: ";
        cin&gt;&gt;d;
        for(;;) {
            std::string b,kraj="kraj";
            char c='"';
            cout&lt;&lt;"Unesite argument (ili "&lt;&lt;c&lt;&lt;kraj&lt;&lt;c&lt;&lt;" za kraj): ";
            cin&gt;&gt;b;
            if(b=="kraj")
                break;
            double a;
            try {
                a=std::stod(b);
            } catch(...) {
                return 1;
            }
            
            try{
                auto g(BaricentricnaInterpolacija(xsinx,xMin,xMax,xD,d));
                cout&lt;&lt;"f("&lt;&lt;a&lt;&lt;") = "&lt;&lt;xsinx(a)&lt;&lt;" fapprox("&lt;&lt;a&lt;&lt;") = "&lt;&lt;g(a)&lt;&lt;endl;            
            }
            catch(std::domain_error e){
                cout&lt;&lt;e.what()&lt;&lt;endl;
</font>            }
        }
    }
// 1 2 5 6 7 8
    return 0;
}</pre>
</body>
</html>
