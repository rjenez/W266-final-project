<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2477.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2477.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
using namespace std;

int GornjaGranica (int i, int n, int d) {
    if(i&gt;n-1-d) return n-1-d;
    return i;
}

int DonjaGranica (int i, int d) {
    if(0&gt;i-d) return 0;
    return i-d;
}

double Produkt (double xi, double xy) {
    if(abs(xi-xy)&lt;0.00001) return 1;
    return (1./(xi-xy));
}

double Tezinski (vector&lt;pair&lt;double,double&gt;&gt; cvorovi_interpolacije, int d, int i) {
    int g_granica(GornjaGranica(i, cvorovi_interpolacije.size(), d));
    int d_granica(DonjaGranica(i, d));
    double tezinski(0);
    for(int k=d_granica; k&lt;=g_granica; k++) {
        double produkt(1);
        for(int j=k; j&lt;=k+d; j++) {
            produkt*=Produkt(cvorovi_interpolacije[i].first, cvorovi_interpolacije[j].first);
        }
        tezinski+=produkt*(pow(-1, k));
    }
    return tezinski;
}

function&lt;double(double)&gt; BaricentricnaInterpolacija(vector&lt;pair&lt;double,double&gt;&gt; cvorovi_interpolacije, int d) {
    if(d&lt;0 || d&gt;cvorovi_interpolacije.size()) throw domain_error("Nedozvoljen red");
    for(int i=0; i&lt;cvorovi_interpolacije.size(); i++) {
        for(int j=i; j&lt;cvorovi_interpolacije.size(); j++) {
            if(i!=j) {
                if(cvorovi_interpolacije[i].first==cvorovi_interpolacije[j].first) throw domain_error("Neispravni cvorovi");
            }
        }
    }
    return [cvorovi_interpolacije, d] (double x) {
        vector&lt;double&gt; tezinski(cvorovi_interpolacije.size());
        for(int i=0; i&lt;cvorovi_interpolacije.size(); i++) {
            tezinski[i]=Tezinski(cvorovi_interpolacije, d, i);
        }
        double f(0), clan(0), brojnik(0), nazivnik(0);
        for(int i=0; i&lt;cvorovi_interpolacije.size(); i++) {
            if(abs(x-cvorovi_interpolacije[i].first)&lt;0.001) return cvorovi_interpolacije[i].second;
            clan=tezinski[i]/(x-cvorovi_interpolacije[i].first);
            brojnik+=clan*cvorovi_interpolacije[i].second;
            nazivnik+=clan;
        }
        f=brojnik/nazivnik;
        return f;
    };
}

function&lt;double(double)&gt; BaricentricnaInterpolacija2(vector&lt;pair&lt;double,double&gt;&gt; cvorovi_interpolacije, int d) {
    if(d&lt;0) throw domain_error("Nedozvoljen red");
    return [cvorovi_interpolacije, d] (double x) {
        vector&lt;double&gt; tezinski(cvorovi_interpolacije.size());
        for(int i=0; i&lt;cvorovi_interpolacije.size(); i++) {
            tezinski[i]=Tezinski(cvorovi_interpolacije, d, i);
        }
        double f(0), clan(0), brojnik(0), nazivnik(0);
        for(int i=0; i&lt;cvorovi_interpolacije.size(); i++) {
            if(abs(x-cvorovi_interpolacije[i].first)&lt;0.001) return cvorovi_interpolacije[i].second;
            clan=tezinski[i]/(x-cvorovi_interpolacije[i].first);
            brojnik+=clan*cvorovi_interpolacije[i].second;
            nazivnik+=clan;
        }
        f=brojnik/nazivnik;
        return f;
    };
}

<a name="0"></a><font color="#FF0000"><a href="match781-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

function&lt;double(double)&gt; BaricentricnaInterpolacija(function&lt;double(double)&gt; fanskhn, double x_min, double x_max, double x_delta, int d) {
    if(x_min&gt;x_max || x_delta&lt;=0) throw domain_error("Nekorektni parametri");
</font>
    vector&lt;pair&lt;double,double&gt;&gt; cvorovi_interpolacije;
    while(x_min&lt;=x_max) {
        cvorovi_interpolacije.push_back(make_pair(x_min, fanskhn(x_min)));
        x_min+=x_delta;
    }
    auto f=BaricentricnaInterpolacija2(cvorovi_interpolacije, d);
    return f;
}

double funkc (double x) {return x * x + std::sin(x);}


<a name="4"></a><font color="#FF00FF"><a href="match781-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

int main ()
{
    cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija;
    cin &gt;&gt; opcija;
    if(opcija==1) {
        cout &lt;&lt; "Unesite broj cvorova: ";
        int br_cvorova;
        cin &gt;&gt; br_cvorova;
</font>        cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        vector&lt;pair&lt;double,double&gt;&gt; cvorovi(br_cvorova);
        for(int i=0; i&lt;br_cvorova; i++) {
            double prvi, drugi;
<a name="1"></a><font color="#00FF00"><a href="match781-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            cin &gt;&gt; prvi &gt;&gt; drugi;
            cvorovi[i].first=prvi; cvorovi[i].second=drugi;
        }
        cout &lt;&lt; "Unesite red interpolacije: ";
        int d;
        cin &gt;&gt; d;
</font>        try {
        auto fun = BaricentricnaInterpolacija(cvorovi, d);
        while(1) {
            cin.ignore(1000, '\n');
            cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double argument;
            cin &gt;&gt; argument;
            if(!cin) break;
            cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; fun(argument) &lt;&lt; "\n";
        }
        }
        catch(domain_error he) {
            cout &lt;&lt; "Izuzetak: " &lt;&lt; he.what();
        }
    }
<a name="2"></a><font color="#0000FF"><a href="match781-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    if(opcija==2) {
        cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double x_max, x_min, x_delta;
        cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; x_delta;
        cout &lt;&lt; "Unesite red interpolacije: ";
        int d;
        cin &gt;&gt; d;
</font>        try {
        auto fun = BaricentricnaInterpolacija(funkc, x_min, x_max, x_delta, d);
        while(1) {
            cin.ignore(1000, '\n');
            cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double argument;
<a name="3"></a><font color="#00FFFF"><a href="match781-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

            cin &gt;&gt; argument;
            if(!cin) break;
            cout &lt;&lt; "f(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; funkc(argument) &lt;&lt; " fapprox(" &lt;&lt; argument &lt;&lt; ") = " &lt;&lt; fun(argument) &lt;&lt; "\n";
</font>        }
        }
        catch(domain_error he) {
            cout &lt;&lt; "Izuzetak: " &lt;&lt; he.what();
        }
    }

	return 0;
}</pre>
</body>
</html>
