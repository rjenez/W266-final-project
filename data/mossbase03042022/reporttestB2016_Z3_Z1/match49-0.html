<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student7125.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student7125.cpp<p></p><pre>
/B2016/2017: Zadaća 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match49-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; par,int d);
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; fun,double x, double y, double dx,int d);
int minmax(int a,int b, bool izbor);
int prebroj(std::vector&lt;std::pair&lt;double,double&gt;&gt; par);

int main ()
{
    try{
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int k,d;
    double n,z;
    double x,y;
    std::cin&gt;&gt;k;
    std::vector&lt;std::pair&lt;double,double&gt;&gt; par;
    if(k == 1){
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        std::cin&gt;&gt;n;
        par.resize(n);
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i(0); i &lt; n; i++)
        std::cin&gt;&gt;par[i].first&gt;&gt;par[i].second;
        
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
    }
    else if(k == 2){
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        std::cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
    }
    while(true){
        std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
        if(!(std::cin&gt;&gt;n)) break;
      
        if(k == 1)
        std::cout&lt;&lt;"f("&lt;&lt;n&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija(par,d)(n);
        
        else if(k == 2){
            auto fun(BaricentricnaInterpolacija([](double x){return double(x*x + std::sin(x));},x,y,z,d));
        std::cout&lt;&lt;"f("&lt;&lt;n&lt;&lt;") = "&lt;&lt;n*n +std::sin(n)&lt;&lt;" fapprox("&lt;&lt;n&lt;&lt;") = "&lt;&lt;fun (n);
        }
        std::cout&lt;&lt;std::endl;
        
    }}catch(std::domain_error error){
        std::cout&lt;&lt;error.what();
    }

    return 0;
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; par,int d)
{
    if (d &lt; 0 || d &gt;= par.size()) throw std::domain_error("Nedozvoljen red");
    if(prebroj(par) &gt; 1)
        throw std::domain_error("Neispravni cvorovi");
    
    //računanje težinskih koeficijenata, pomocna funkcija minmax vrać najveći broj između neka dva ako je treca proslijeđena varijable = true, u suprotnom vraća najmanji    
    std::vector&lt;double&gt; w(par.size());
    for(int i(0); i &lt; par.size(); i++) {
        for(int j(minmax(1,1+i-d,true)); j &lt;= minmax(i+1,par.size()-d,false); j++) {
            double proizvod(1);
                for(int f(j-1); f &lt; j+d; f++) {
                    if(f != i)
                        proizvod *= 1/(par[i].first - par[f].first);
                }
            if(((j-1)%2) == 0) w[i] += proizvod;
            else w[i] -= proizvod;
        }
    }
    //kraj
    
    return [w,par](double x) {
        double brojnik(0),nazivnik(0);
        const double EPS(0.000000000000001);
        for(int i(0); i &lt; par.size(); i++) {
        //ako  x -&gt; xi onda  f(x) -&gt; f(xi)
            if(std::fabs(x - par[i].first) &lt; EPS)
                return par[i].second;
            //izračunaj brojnik i nazivnik   
            
            brojnik += (w[i]*par[i].second)/(x - par[i].first);
            nazivnik += (w[i])/(x - par[i].first);
        }
        //vrati količnik brojnika i nazivnika (one formule)
        return brojnik/nazivnik;
    };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; fun,double x, double y, double dx,int d){
    if(x&gt;y || dx&lt;=0) throw std::domain_error("Nekorektni parametri");
    
  double k(0);
  std::vector&lt;std::pair&lt;double,double&gt;&gt; par;
  //nađi sve parove u nekom segmentu
  while(x+k*dx&lt;=y){
      par.push_back({x+k*dx,fun(x+k*dx)});
      k++;
  }
  //iskoristi već postojeću funkciju za računanje
  return BaricentricnaInterpolacija(par,d);
}

int minmax(int a,int b, bool izbor)
{
    //ako je izbor == true vrati veći od dva broja, inače vrati manji
    if(izbor) {
        if(a &gt; b)
            return a;
        else return b;
    } else {
        if(a &lt; b)
            return a;
        else return b;
    }
}

int prebroj(std::vector&lt;std::pair&lt;double,double&gt;&gt; par){
    int br(1);
    const double EPS(0.0000000000001);
    for(int i(0); i &lt; par.size(); i++)
        for(int j(i+1); j &lt; par.size(); j++)
            if(std::fabs(par[i].first - par[j].first) &lt; EPS)
                br++;
    //nađi koliko ima istih x-ova među parovima, (ako je br = 1 znači da nema istih)
    return br;
</font>            
}</pre>
</body>
</html>
