<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8288.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8288.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;new&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;

<a name="1"></a><font color="#00FF00"><a href="match85-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_45.gif"/></a>

const double eps(1e-7);
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; v,int d) {
    std::vector&lt;double&gt; a;
    if(d&lt;0 || d&gt;v.size()) throw std::domain_error("Nedozvoljen red");
    for(int i=0;i&lt;v.size();i++) {
        for(int j=0;j&lt;v.size();j++) {
            if(i!=j) {
                if(fabs(v[i].first-v[j].first)&lt;eps) 
                throw std::domain_error("Neispravni cvorovi");
            }
        }
    }
    int n(0),s(0);
    double proizvod(1),w(0);
    for(int i=0;i&lt;v.size();i++) {
        n=i-d;
        int k(0);
        if(n&gt;1) 
            k=n;
        else 
        k=1;
        if(i&gt;(v.size()-d)) 
        s=v.size()-d-1;
        else 
        s=i;
        w=0;
        for(;k&lt;s;k++) {
            proizvod=1.;
                for(int j=k;j&lt;k+d;j++) {
                    proizvod*=1./(v[i].first-v[j].first);
                    i++;
                }
                if(k%2==0) {
                    w-=proizvod;
                }
                else {
              w+=proizvod;
        }
      }
      a.push_back(w);
    }
    return [v,d,a] (double x) {
        double f(0),g(0);
        for(int z=0;z&lt;a.size();z++) {
            if(fabs(x-v[z].first)&lt;eps)
            return v[z].second;
            else {
                if(z&lt;v.size()) {
            f+=a[z]/(x-v[z].first)*v[z].second;
            g+=a[z]/(x-v[z].first);
                }
            }
        }
         return f/g;
      };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; fun,double x_min,double x_max,double delta_x,int d) {
</font>    if(x_min&gt;x_max || delta_x&lt;=0) {
        throw std::domain_error("Nekorektni parametri");
    }
    
<a name="0"></a><font color="#FF0000"><a href="match85-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_50.gif"/></a>

    std::vector&lt;std::pair&lt;double,double&gt;&gt; pomocni;
    for(double x=x_min;x&lt;x_max;x+=delta_x) {
        pomocni.push_back(std::make_pair(x,x+delta_x));
    }
  return BaricentricnaInterpolacija(pomocni,d);
}
double f(double x) {
    return x*x+std::sin(x);
}
int main ()
{
    do {
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int n(0);
    std::cin&gt;&gt;n;
    std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
    int s(5);
    switch(n) {
        case 1:
        {
            std::cout&lt;&lt;"Unesite broj cvorova: ";
            std::cin&gt;&gt;s;
            v.resize(s);
            std::cout&lt;&lt;"Unesite cvorove kao parove x i y: ";
        for(int i=0;i&lt;s;i++) {
            double r,t;
            std::cin&gt;&gt;r&gt;&gt;t;
            v[i].first=r;
            v[i].second=t;
        }
        int d;
        std::cout&lt;&lt;"Unesite red interpolacija: ";
        std::cin&gt;&gt;d;
        while(std::cin) {
        std::cout&lt;&lt;"Unesite argument (ili kraj za kraj): ";
        double c;
        std::cin&gt;&gt;c;
        try {
            if(std::cin)
        std::cout&lt;&lt;"f("&lt;&lt;c&lt;&lt;") = "&lt;&lt;std::setprecision(5)&lt;&lt;std::fixed&lt;&lt;BaricentricnaInterpolacija(v,d)(c)&lt;&lt;std::endl;
        else
        break;
        }
        catch(std::domain_error e) {
        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
        }
        }
        break;
    }
    case 2: 
    {
        v.resize(s);
    std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
    double x_min,x_max,delta_x;
    std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;delta_x;
    std::cout&lt;&lt;"Unesite red interpolacije: ";
    int r;
    std::cin&gt;&gt;r;
      while(std::cin) {
        std::cout&lt;&lt;"Unesite argument (ili kraj za kraj): ";
        double c;
        std::cin&gt;&gt;c;
        try {
            if(std::cin)
        std::cout&lt;&lt;"f("&lt;&lt;c&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija(v,r)(c)&lt;&lt;"fapprox("&lt;&lt;c&lt;&lt;") = "&lt;&lt;BaricentricnaInterpolacija(BaricentricnaInterpolacija(v,r),x_min,x_max,delta_x,r)(c)&lt;&lt;std::endl;
         else 
         break;
            }
        catch(std::domain_error s) {
            std::cout&lt;&lt;s.what()&lt;&lt;std::endl;
        }
      }
        break;
    }
    break;
    }
    }while(!std::cin);
	return 0;
</font>}</pre>
</body>
</html>
