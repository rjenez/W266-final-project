<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1132.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1132.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
double wi(const std::vector&lt;std::pair&lt;double,double&gt; &gt;&amp; vp,int d, int ind)
{
    double rez = 0;
    for(int k=std::max(0,ind-d); k &lt;= std::min(ind, int(vp.size())-1-d); k++)
    {
        double xd = (k%2 ? -1 : 1);
        for(int j = k; j &lt;= k+d; j++) if(j != ind) xd *= 1/(vp[ind].first - vp[j].first);
        rez += xd;
    }
    return rez;
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt; &gt; vp, int d)
{
    if( d &gt;= vp.size() || d &lt; 0 ) throw std::domain_error("Nedozvoljen red");
    std::sort(vp.begin(), vp.end());
<a name="2"></a><font color="#0000FF"><a href="match358-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    for(int i=1; i&lt;vp.size(); i++) if(vp[i].first == vp[i-1].first) throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt; w_i(vp.size());
    for(int i=0; i&lt;vp.size(); i++) w_i[i] = wi(vp, d, i);
</font>    std::function&lt;double(double)&gt; f = [d,vp,w_i](double x)-&gt;double{
        double nazivnik=0, brojnik=0;
        for(int i=0;i&lt;vp.size();i++)
        {
            if(x == vp[i].first) return vp[i].second;
            double pom =  w_i[i] / (x - vp[i].first);
            nazivnik += pom;
            brojnik += pom * vp[i].second;
        }
        return brojnik / nazivnik;
    };
<a name="4"></a><font color="#FF00FF"><a href="match358-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

    return f;
}
template&lt;typename T&gt;
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(T funk, double x_min, double x_max, double delta_x, int d)
</font>{
    std::vector&lt;std::pair&lt;double,double&gt; &gt; vp;
    if(x_min &gt; x_max || delta_x &lt; 0) throw std::domain_error("Nekorektni parametri");
    while(x_min &lt;= x_max ) 
    {
        vp.push_back({x_min, funk(x_min)});
        x_min += delta_x;
    }
    try
    {
        auto f = BaricentricnaInterpolacija(vp, d);
        return f;
    }
    catch(...) 
    {
        throw;
    }
}


<a name="1"></a><font color="#00FF00"><a href="match358-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

int main ()
{
   
        std::cout&lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int opt;
        std::cin&gt;&gt; opt;
        if(opt == 1)
        {
            std::cout&lt;&lt; "Unesite broj cvorova: ";
            int brc;
            std::cin&gt;&gt; brc;
            std::vector&lt;std::pair&lt;double,double&gt; &gt; vp( brc );
</font>            std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
            for(auto&amp; e: vp) std::cin&gt;&gt; e.first&gt;&gt; e.second;
            std::cout&lt;&lt;"Unesite red interpolacije: ";
            int d;
            std::cin&gt;&gt; d;
            try
            {
                auto f(BaricentricnaInterpolacija(vp, d));
                for(;;)
                {
                    std::cout&lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                    double arg;
                    if(!(std::cin&gt;&gt; arg)) break;
                    std::string s;
                    std::getline(std::cin, s);
                    if(s.size() != std::count(s.begin(),s.end(), ' ')) break;
<a name="0"></a><font color="#FF0000"><a href="match358-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

                    std::cout&lt;&lt; "f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;"\n";
                }
            }
            catch(std::domain_error e)
            {
                std::cout&lt;&lt;e.what();
                return 0;
            }
        }
        else if(opt == 2)
        {
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double mn, mx, kk;
            std::cin&gt;&gt; mn&gt;&gt; mx&gt;&gt; kk;
</font>             std::cout&lt;&lt;"Unesite red interpolacije: ";
            int d;
            std::cin&gt;&gt; d;
            auto funk = [](double x){return x*x+std::sin(x);};
            try
            {
                auto f(BaricentricnaInterpolacija(funk, mn, mx, kk, d));
                for(;;)
                {
                    std::cout&lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                    double arg;
                    if(!(std::cin&gt;&gt; arg)) break;
                    std::string s;
                    std::getline(std::cin, s);
                    if(s.size() != std::count(s.begin(),s.end(), ' ')) break;
<a name="3"></a><font color="#00FFFF"><a href="match358-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

                    std::cout&lt;&lt; "f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;funk(arg)&lt;&lt; " fapprox("&lt;&lt;arg&lt;&lt;") = "&lt;&lt;f(arg)&lt;&lt;"\n";
                }
            }
            catch(std::domain_error e)
            {
                std::cout&lt;&lt;e.what();
                return 0;
</font>            }
        }
	return 0;
}</pre>
</body>
</html>
