<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1329.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9238.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;string&gt;

<a name="0"></a><font color="#FF0000"><a href="match65-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_52.gif"/></a>

bool Jednaki (double a, double b) {
    return fabs(a - b) &lt; 0.0000001;
}

int max(int a, int b) { 
    if(a &gt;= b) return a;
    return b;
}

int min(int a, int b) {
    if(a &lt;= b) return a;
    return b;
}

double Stepen(double baza, int stepen) {
    double proizvod(1);
    for(int i = 0; i &lt; abs(stepen); i++) proizvod *= baza;
    if(stepen &lt; 0) { proizvod = 1. / proizvod; return proizvod; }
    return proizvod;
}

std::vector&lt;double&gt; IzracunajWeove(std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi, int d) {
    std::vector&lt;double&gt; w(cvorovi.size());
    
    for(int i = 0; i &lt; cvorovi.size(); i++) {
        double suma(0);
        for(int k(max(1, i + 1 - d)); k &lt;= min(i + 1, cvorovi.size() - d); k++) {
            double proizvod(1);
            for(int j = k; j &lt;= k + d; j++) {
                if(j - 1 == i) continue;
                proizvod *= 1. / (cvorovi[i].first - cvorovi[j - 1].first);
            }
            proizvod *= Stepen(-1, k - 1);
            suma += proizvod;
        }
        w[i] = suma;
    }
    
    return w;
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi, int d) {
    if(d &lt; 0 || d &gt;= cvorovi.size()) throw std::domain_error("Nedozvoljen red");
    return [cvorovi, d](double x) {
        for(int i = 0; i &lt; cvorovi.size(); i++) {
            for(int j = 0; j &lt; cvorovi.size(); j++) {
                if(i == j) continue;
                if(Jednaki(cvorovi[i].first, cvorovi[j].first)) throw std::domain_error("Neispravni cvorovi");
            }
        }
        
        std::vector&lt;double&gt; w(IzracunajWeove(cvorovi, d));
        
        double brojnik(0), nazivnik(0);
        for(int i = 0; i &lt; cvorovi.size(); i++) {
            if(Jednaki(x, cvorovi[i].first)) return cvorovi[i].second;
            brojnik += ((w[i] * cvorovi[i].second) / (x - cvorovi[i].first));
            nazivnik += (w[i] / (x - cvorovi[i].first));
        }
        
        return brojnik / nazivnik;
    };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double x_min, double x_max, double x_delta, int d) {
</font><a name="1"></a><font color="#00FF00"><a href="match65-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_43.gif"/></a>

    if(x_min &gt; x_max || x_delta &lt;= 0) throw std::domain_error("Nekorektni parametri");
    
    std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi;
    while(x_min &lt;= x_max) {
        cvorovi.push_back(std::make_pair(x_min, f(x_min)));
        x_min += x_delta;
    }
    return BaricentricnaInterpolacija(cvorovi, d);
}

int main() {
    
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int n;
    std::cin &gt;&gt; n;
    
    try {
        if(n == 1) {
            std::cout &lt;&lt; "Unesite broj cvorova: ";
            std::cin &gt;&gt; n;
            std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi(n);
            std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            for(int i = 0; i &lt; n; i++) {
                int x, y;
                std::cin &gt;&gt; x &gt;&gt; y;
                cvorovi[i] = std::make_pair(x, y);
            }
            std::cout &lt;&lt; "Unesite red interpolacije: ";
            int d;
            std::cin &gt;&gt; d;
            auto f(BaricentricnaInterpolacija(cvorovi, d));
            for(;;) {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double x;
                std::cin &gt;&gt; x;
                if(!std::cin) {
                    std::cin.ignore(10000, '\n');
                    std::cin.clear();
                    break;
                }
                std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x) &lt;&lt; std::endl;
            }
        }
        else {
            std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
            double x_min, x_max, x_delta;
            std::cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; x_delta;
            
            std::cout &lt;&lt; "Unesite red interpolacije: ";
            int d;
            std::cin &gt;&gt; d;
            for(;;) {
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
                double x;
                std::cin &gt;&gt; x;
                if(!std::cin) {
                    std::cin.ignore(10000, '\n');
                    std::cin.clear();
                    break;
                }
                auto f(BaricentricnaInterpolacija([](double x) {return x * x + std::sin(x);}, x_min, x_max, x_delta, d));
                std::cout &lt;&lt; "f(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; x * x + std::sin(x) &lt;&lt; " fapprox(" &lt;&lt; x &lt;&lt; ") = " &lt;&lt; f(x) &lt;&lt; std::endl;
            }
        }
    }
    catch(std::domain_error izuzetak) { std::cout &lt;&lt; izuzetak.what(); }
</font>    
    return 0;
}</pre>
</body>
</html>
