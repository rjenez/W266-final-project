<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2908.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2908.cpp<p></p><pre>
#include &lt;vector&gt;
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;algorithm&gt;
#include &lt;set&gt;
#include &lt;utility&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;unordered_map&gt;

<a name="0"></a><font color="#FF0000"><a href="match104-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

bool Imaduplih(std::vector&lt;int&gt;brojevi) {/* za neispravne cvorove pomocna*/
    size_t broj = brojevi.size();
    if (!broj)
        return false;
    std::unordered_map&lt;int, int&gt; tbl;
    for (size_t i = 0; i &lt; broj; i++) {
        if (tbl.find(brojevi[i]) != tbl.end())
            return true;
        tbl[brojevi[i]] = 1;
    }
    return false;
}
bool Isti(double a, double b)
{
    return std::fabs(a - b) &lt;= 1e-12;
}
int Jeasu(std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi,const double x){/*ako x-&gt;x[i] da f(x)-&gt;y[i] */
    int t=-3;
    for(int i(0);i&lt;cvorovi.size();i++){
         if(Isti(x,cvorovi[i].first)) t=i;;
         }
    return t;
}
double Pro (int d,int k,std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi,const int i){
    double pro=1;
    for(int  j=k ;  j&lt;=k+d   ;j++){
        if( j!=i ) pro*=(1./(cvorovi[i].first-cvorovi[j].first));/*memorijska greska u vezi granice dokle  j ide*/
    }
    return pro;
}

    double Suma (int d,const int brojac_i,int brojelemenata,std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi){/*suma za tezinske ostatke*/
        int min(0),max(0);
         if(brojelemenata-d&lt;=brojac_i) min=brojelemenata-d;
         if(brojac_i&lt;=brojelemenata-d) min=brojac_i;
         if(brojac_i-d&gt;=1) max=brojac_i-d;
         if(1&gt;=brojac_i-d) max=1;
        double sum(0);
        for(int k(max);k&lt;=min;k++){
            sum+=((std::pow(-1,k-1))*Pro(d,k,cvorovi,brojac_i));
        }
        return sum;
    }

std::function&lt;  double(double) &gt; BaricentricnaInterpolacija (std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi,int d){
    if(d&lt;0 ||  d&gt;cvorovi.size()) throw std::domain_error  ("Nedozvoljen red");
    std::vector&lt;int&gt;brojaci;
    for(int i(0);i&lt;cvorovi.size();i++){
   brojaci.push_back(cvorovi[i].first);
    }
   bool a=Imaduplih(brojaci);
   if(a)  throw std::domain_error("Neispravni cvorovi");
    std::vector&lt;double&gt;W(cvorovi.size());
    for(int i(1);i&lt;=cvorovi.size();i++){
        W[i]=(Suma(d,i,cvorovi.size(),cvorovi)); /*odredjujem tezinske*/

    }
    return[W,cvorovi] (double x){  
       double summa(0);
       int n=cvorovi.size();
    for(int i=1;i&lt;n ;i++){
        summa+=((W[i]/(x-cvorovi[i].first))*cvorovi[i].second); /*povratna suma brojnik*/
    }
    
     double suma(0);
    for(int i=1;i&lt;n ;i++){
        if(!Isti(x,cvorovi[i].first)) suma+=(W[i]/(x-cvorovi[i].first)); /*povratna suma nazivnik*/
    
    }
    int ovo=Jeasu(cvorovi,x);
    if(ovo&gt;=0) return cvorovi[ovo].second;
    if(ovo==-3) {return summa/suma;}/*f(x) sta vraca*/
     };
}


std::function&lt;double(double)&gt; BaricentricnaInterpolacija(double f(double),int xmin,int xmax,double korak,int d){
    std::vector&lt;std::pair&lt;double,double&gt;&gt;cvorovi;
    if(xmin&gt;xmax || korak&lt;=0 ) throw std::domain_error("Nekorektni parametri");
    return [cvorovi,d] (double x) {return x+std::sin(x);};
}

int main ()
{
    try{
    int opcija(0);
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;opcija;
    if(opcija!=1 &amp;&amp; opcija!=2 ) return 0;
    if(opcija==1){
    auto f(BaricentricnaInterpolacija({{1, 3}, {2, 5}, {4, 4}, {5, 2}, {7, 1}}, 2));
    std::cout &lt;&lt; f(2.5);
        }
    if(opcija==2){
    auto fun = BaricentricnaInterpolacija(std::sin, 4, 1, 0.1, 2);
    std::cout&lt;&lt;fun(3);
    }
    }
    catch(std::domain_error e){
        std::cout&lt;&lt;e.what();
</font>    }
	return 0;
}</pre>
</body>
</html>
