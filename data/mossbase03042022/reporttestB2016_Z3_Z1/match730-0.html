<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2232.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2232.cpp<p></p><pre>
/B2016/2017: Zadaća 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#define eps 1e-6

double Proizvod(int j1, int j2,std::vector&lt;std::pair&lt;double,double&gt;&gt; v, int i){
    double p=1.;
    for(int j=j1;j&lt;=j2;j++){
        if(i!=j) p=p*(1./(v[i-1].first-v[j-1].first));
    }
    return p;
}

std::vector&lt;double&gt; wi(std::vector&lt;std::pair&lt;double,double&gt;&gt; v, int d){
    int n=v.size();
    std::vector&lt;double&gt; l;
    for(int i=1;i&lt;=n;i++){
        double w=0;
        for(int k=std::max(1,i-d);k&lt;=std::min(i,n-d);k++){
           w=w+(( std::pow(-1,k-1)) *Proizvod(k,k+d,v,i));
        }
        l.push_back(w);
    }
    return l;
}
double brojnik (double x,std::vector&lt;std::pair&lt;double,double&gt;&gt; v,std::vector&lt;double&gt; w){
    double suma=0.;
    for(int i=1;i&lt;=v.size();i++){
        suma+=((w[i-1]*v[i-1].second)/(x-v[i-1].first));
    }
    return suma;
}

double nazivnik(double x,std::vector&lt;std::pair&lt;double,double&gt;&gt; v,std::vector&lt;double&gt; w){
    double suma=0.;
    for(int i=1;i&lt;=v.size();i++){
        suma+=(w[i-1]/(x-v[i-1].first));
    }
    return suma;
}

std::function &lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; v, int d){
    if(d&lt;0 || d&gt;=v.size()) throw std::domain_error("Nedozvoljen red");
    for(int i=0;i&lt;v.size()-1;i++){
        for(int j=i+1;j&lt;v.size();j++){
            if(std::abs(v[i].first-v[j].first)&lt;eps) throw std::domain_error("Neispravni cvorovi");
        }
    }
    std::vector&lt;double&gt; w=wi(v,d);
    return [v,w] (double x) {
        for(int i=0;i&lt;v.size();i++)
<a name="3"></a><font color="#00FFFF"><a href="match730-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

            if(std::abs(v[i].first-x)&lt;eps) return v[i].second;
        return brojnik(x,v,w)/nazivnik(x,v,w);
    };
    
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xmin, double xmax, double deltax, int d){
</font>    if((deltax&lt;0 || std::abs(deltax)&lt;eps) || (xmin&gt;xmax || std::abs(xmin-xmax)&lt;eps)) throw std::domain_error("“Nekorektni parametri");
    int i=0;
    std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
    for(;;){
        if((xmin+deltax*i)&gt;xmax) break;
        std::pair&lt;double,double&gt; par;
        par=std::make_pair(xmin+deltax*i, f(xmin+deltax*i));
        v.push_back(par);
        i++;
    }
    return BaricentricnaInterpolacija(v,d);
}

double NekaFunkcija(double x){
<a name="0"></a><font color="#FF0000"><a href="match730-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    return x*x+std::sin(x);
}

int main ()
{
   try{
       std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
       int broj;
       std::cin &gt;&gt; broj;
       if(broj==1){
           std::cout &lt;&lt; "Unesite broj cvorova: ";
           int x;
           std::cin &gt;&gt; x;
           std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
           std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
</font>           for(int i=0;i&lt;x;i++){
               double a,b;
               std::pair&lt;double,double&gt; par;
               std::cin &gt;&gt; a &gt;&gt; b;
               par.first=a;
               par.second=b;
<a name="2"></a><font color="#0000FF"><a href="match730-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

               v.push_back(par);
           }
           std::cout &lt;&lt; "Unesite red interpolacije: ";
           int d;
           std::cin &gt;&gt; d;
           for(;;){
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): " ;
                double c;
                std::cin &gt;&gt; c;
                if(!std::cin) return 0;
</font>                std::cout &lt;&lt; "f(" &lt;&lt; c &lt;&lt; ") = " &lt;&lt; BaricentricnaInterpolacija(v,d)(c) &lt;&lt; std::endl;
           }
       }else if(broj==2){
           std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
           double a,b,e;
<a name="1"></a><font color="#00FF00"><a href="match730-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

           std::cin &gt;&gt; a &gt;&gt; b &gt;&gt; e;
            std::cout &lt;&lt; "Unesite red interpolacije: ";
           int d;
           std::cin &gt;&gt; d;
           for(;;){
                std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): " ;
                double c;
                std::cin &gt;&gt; c;
                if(!std::cin) return 0;
</font>                double o=c*c+std::sin(c);
                std::cout &lt;&lt; "f(" &lt;&lt; c &lt;&lt; ") = " &lt;&lt; o ;
                std::cout &lt;&lt; " fapprox(" &lt;&lt; c &lt;&lt; ") = ";
                std::cout &lt;&lt; BaricentricnaInterpolacija(NekaFunkcija,a,b,e,d)(c) &lt;&lt; std::endl;
           }
       }
   }catch(std::domain_error e){
       std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
   }
	return 0;
}</pre>
</body>
</html>
