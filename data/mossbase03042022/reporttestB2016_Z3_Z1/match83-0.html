<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9318.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9318.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match83-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#define EPSILON 0.00001

int MAX(int x, int y){
    if(x&gt;y) return x;
    return y;
}
int MIN(int x, int y){
    if(x&lt;y) return x;
    return y;
}
double fun(double x){
    return x*x + std::sin(x);
}
void Baci_izuzetak(const std::vector&lt;std::pair&lt;double,double&gt;&gt; &amp;v,const int &amp;d){
    if(d&lt;0 || d&gt;v.size()) throw std::domain_error("Nedozvoljen red");
        for(int i=0; i&lt;v.size()-1; i++){
            for(int j=i+1; j&lt;v.size(); j++){
                if(abs(v[i].first-v[j].first)&lt;EPSILON) 
                throw std::domain_error("Neispravni cvorovi");
            }
        }
}

std::function&lt;double(double x)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; v, int d){
        
        return [=](double x){
        //wi
        int n;
        double predznak(1),wi(0),proizvod(1);
        double suma1(0),suma2(0);
        n=v.size();
        
        for(int i=1; i&lt;=n; i++){
            wi=0;
            if(x == v[i-1].first) return v[i-1].second;
            for(int k=MAX(1,i-d); k&lt;=MIN(i,n-d); k++){
                predznak=pow(-1,k-1);
                proizvod = 1;
                for(int j=k; j&lt;=k+d; j++){
                    if(i-1!=j-1){
                    proizvod *= 1/(v[i-1].first-v[j-1].first);
                }
                }
                wi += (predznak*proizvod);
            }
            suma1 +=((wi*v[i-1].second)/(x-v[i-1].first));
            suma2 += (wi/(x-v[i-1].first));
        }
            return suma1/suma2;
        };
}
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(double fun(double),double x_min,double x_max,double delta_x, int d){
    if(x_min&gt;x_max || delta_x&lt;=0) throw std::domain_error("Nekorektni parametri");
    //prvo formirati cvorove, zatim iskoristiti cvorove za vektor cvorova, 
    std::vector&lt;std::pair&lt;double,double&gt;&gt;novi_cvorovi;
    double x1=x_min,x2;
    int brojac(0);
    while(x1&lt;=x_max){
            x2=fun(x1);
            novi_cvorovi.push_back(std::make_pair(x1,x2));
            x1+=delta_x;
        }
    return [=](double x){
      return  BaricentricnaInterpolacija(novi_cvorovi,d)(x);
    };
}
int main (){
    int opcija;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;opcija;
    
    if(opcija==1){ 
        
        int br_cvorova;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        std::cin&gt;&gt;br_cvorova;
        
        std::vector&lt;std::pair&lt;double,double&gt;&gt;v;
        std::pair&lt;double,double&gt;cvorovi;
        
        int par1,par2;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i&lt;br_cvorova; i++){
        std::cin&gt;&gt;par1&gt;&gt;par2;
        cvorovi.first=par1;
        cvorovi.second=par2;
        v.push_back(cvorovi);
        }
        int d;
        double broj;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
        do{
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::cin&gt;&gt;broj;
            if(!std::cin) break;
            double f1;
            Baci_izuzetak(v,d);
            f1=BaricentricnaInterpolacija(v,d)(broj);
            std::cout&lt;&lt;"f("&lt;&lt;broj&lt;&lt;") = "&lt;&lt;f1&lt;&lt;std::endl;
        }while(std::cin);
    }
    else if(opcija==2){
        double x_min,x_max, korak,f2;
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;korak;
        int d;
        double argument;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        std::cin&gt;&gt;d;
        do{
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::cin&gt;&gt;argument;
            if(!std::cin) break;
            f2=BaricentricnaInterpolacija(fun,x_min,x_max,korak,d)(argument);
            std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;" "&lt;&lt;"fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;f2&lt;&lt;std::endl;
        }while(std::cin);
</font>        
    }
    
	return 0;
}</pre>
</body>
</html>
