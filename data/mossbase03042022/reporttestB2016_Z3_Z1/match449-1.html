<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5804.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9673.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt; 
#include &lt;algorithm&gt;

const double Eps(1e-7);

bool PorediDecimalne(double a, double b){
    return (fabs(a-b) &lt;= Eps * (fabs(a)+fabs(b)));
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; v, int d){
	if(d &gt;= v.size() || d &lt; 0) throw std::domain_error ("Nedozvoljen red");
	int n(v.size());
	
	for(int i = 0; i &lt; n; i++){
		for(int j = i + 1; j &lt; n; j++){
			if(PorediDecimalne(v[i].first,v[j].first)) throw std::domain_error ("Neispravni cvorovi");
		}
	}
	
	std::vector&lt;double&gt; w(n);
	int min(0), max(0);
	
	std::sort(v.begin(), v.end());

	for(int i = 1; i &lt;= n; i++){
		if(1 &gt; i-d) max = 1; else max = i-d;
		if(i &lt; n-d) min = i; else min = n-d;
		
		for(int k = max; k &lt;= min; k++){
			double proizvod = 1;
			for(int j = k; j &lt;= k + d; j++){
				if(j == i) continue;
				proizvod *= 1./(v[i-1].first - v[j-1].first);
			}
			w[i-1] += pow(-1, k-1) * proizvod;
		}
	}
	
	return [w, n, v] (double a){
		double brojnik(0), nazivnik(0);
		for(int i = 1; i &lt;= n; i++){
<a name="0"></a><font color="#FF0000"><a href="match449-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

			if(PorediDecimalne(v[i-1].first, a)) return v[i-1].second;
			brojnik += (w[i-1] * v[i-1].second ) / (a - v[i-1].first);
			nazivnik += w[i-1] / (a - v[i-1].first);
		}
		return brojnik/nazivnik;
	};
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija (std::function&lt;double(double)&gt; fun, double min, double max, double delta, int d){
</font><a name="2"></a><font color="#0000FF"><a href="match449-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

	if(min &gt; max || delta &lt;= 0) throw std::domain_error ("Nekorektni parametri");
	
	std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
	double x (min);
</font>	while (x &lt;= max){
		v.push_back(std::make_pair(x, fun(x)));
		x += delta;
	}
	return BaricentricnaInterpolacija(v,d);
}

double fun (double x){
	return x*x + std::sin(x);
}


int main ()
{
	std::vector&lt;std::pair&lt;double, double&gt;&gt; v;
	int n(0), opcija(0), d(0);
	double arg(0);
	
<a name="3"></a><font color="#00FFFF"><a href="match449-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
	std::cin &gt;&gt; opcija;
	
	if(opcija == 1){
		std::cout &lt;&lt; "Unesite broj cvorova: ";
		std::cin &gt;&gt; n;
</font>		v.resize(n);
		std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
		for(int i = 0; i &lt; n; i++) std::cin &gt;&gt; v[i].first &gt;&gt; v[i].second;
	
		std::cout &lt;&lt; "Unesite red interpolacije: ";
		std::cin &gt;&gt; d;
		while(1){
			std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
			std::cin &gt;&gt; arg;
			if(!std::cin) break;
			else{
				try{
					auto f(BaricentricnaInterpolacija(v,d));
					std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg) &lt;&lt; std::endl;
				}
				catch(std::domain_error e){
					std::cout &lt;&lt; e.what();
					return 0;
				}
			}
		}
	}
	
	if(opcija == 2){
			double min(0), max(0), delta(0);
<a name="1"></a><font color="#00FF00"><a href="match449-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

			std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
			std::cin &gt;&gt; min &gt;&gt; max &gt;&gt; delta;
			std::cout &lt;&lt; "Unesite red interpolacije: ";
			std::cin &gt;&gt; d;
</font>			while(1){
				std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
				std::cin &gt;&gt; arg;
				if(!std::cin) break;
				try{
<a name="4"></a><font color="#FF00FF"><a href="match449-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

					auto f(BaricentricnaInterpolacija(fun, min, max, delta, d));
					std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; fun(arg) &lt;&lt; " " &lt;&lt; "fapprox" &lt;&lt; "(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg) &lt;&lt; std::endl;
</font>				}
				catch(std::domain_error e){
					std::cout &lt;&lt; e.what();
					return 0;
				}
			}
	}
	return 0;
}

</pre>
</body>
</html>
