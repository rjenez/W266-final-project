<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5154.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5154.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match846-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;

int Max(int a, int b)
{
    if(a&gt;b) return a;
    else return b;
}

int Min(int a, int b)
{
    if(a&gt;b) return b;
    else return a;
}

bool JesuLiJednaki(double x, double y, double Eps=1e-10)
</font>{
    return std::fabs(x-y)&lt;=Eps*(std::fabs(x)+std::fabs(y));
}

double Stepenuj(double baza, int eksp)
{
    double rez(1);
    if(eksp&gt;0)
    {
    for(int i(1); i&lt;=eksp; i++)
    {
        rez*=baza;
    }
    }
    else if(eksp&lt;0)
    {
        for(int i(1); i&lt;=fabs(eksp); i++)
        {
            rez*=baza;
        }
        rez=1./rez;
    }
    else rez=1;
    return rez;
}

<a name="1"></a><font color="#00FF00"><a href="match846-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; v, int d)
{
    // da li se testira sta se desi ako funkciji posaljemo prazan vektor
    if(d&lt;0 || d&gt;=v.size()) throw std::domain_error("Nedozvoljen red");
    
    for(int i(0); i&lt;v.size(); i++)
    {
        for(int j(i+1); j&lt;v.size(); j++)
        {
            if(JesuLiJednaki(v[i].first,v[j].first)) 
</font>            {
                throw std::domain_error("Neispravni cvorovi");
            }
        }
    } 
    
    int n(v.size());
    std::vector&lt;double&gt; t(n);
    for(int m(0); m&lt;n; m++)
    {
        double suma(0);
        int i(m+1);
        for(int k(Max(1,i-d)); k&lt;=Min(i,n-d); k++)
        {
            int koef(Stepenuj(-1,k-1));
            double proizvod(1);
            for(int j(k); j&lt;=k+d; j++)
            {
                if(i!=j)
                {
                    double nazivnik(v[i-1].first-v[j-1].first);
                    //if(nazivnik!=0)
                    proizvod*=1./nazivnik;
                }
            }
            suma+=koef*proizvod;
        }
        t[m]=suma;
        if(m==n) break;
    }
    return [t,v,d] (double x) {
    double suma1(0),suma2(0);
    for(int i(0); i&lt;v.size(); i++)
    {
        if(JesuLiJednaki(v[i].first,x)==true) return v[i].second;
        else
        {
            double nazivnik(x-v[i].first);
            suma1+=v[i].second*(t[i]/nazivnik);
            suma2+=t[i]/nazivnik;
        }
    }
    return suma1/suma2;
    };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(double fun(double), double x_min, double x_max, double delta_x, int d)
{
<a name="3"></a><font color="#00FFFF"><a href="match846-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    if(x_min&gt;x_max || delta_x&lt;=0) throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
    
    for(auto i(x_min); i&lt;=x_max; i+=delta_x)
</font>    {
        std::pair&lt;double,double&gt; par;
        par.first=i;
        par.second=fun(i);
        v.push_back(par);
    }
    auto f(BaricentricnaInterpolacija(v,d));
    return f;
}

double f(double x)
{
    return std::sin(x)+x*x;
}

int main ()
{
    try
    {
        std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int izbor;
        std::cin &gt;&gt; izbor;
        if(izbor==1)
        {
            std::cout &lt;&lt; "Unesite broj cvorova: ";
            int n;
            std::cin &gt;&gt; n;
            std::cin.ignore(1000,'\n');
            std::vector&lt;std::pair&lt;double,double&gt;&gt; v;
            std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            for(int i(0); i&lt;n; i++)
            {
                double prva, druga;
                std::cin &gt;&gt; prva;
                std::cin &gt;&gt; druga;
                v.push_back(std::make_pair(prva,druga));
            }
            
            std::cout &lt;&lt; "Unesite red interpolacije: ";
            int red;
            std::cin &gt;&gt; red;
            while(true)
            {
                std::string s{"Unesite argument (ili "};
                s.push_back('"');
                s+="kraj";
                s.push_back('"');
                s+=" za kraj): ";
                std::cout &lt;&lt; s;
                double arg;
                std::cin &gt;&gt; arg;
                if(!(std::cin)) break;
                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; BaricentricnaInterpolacija(v,red)(arg);
<a name="2"></a><font color="#0000FF"><a href="match846-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

                std::cout &lt;&lt; std::endl;
            }
        }
        else if(izbor==2)
        {
            std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
            double x_min,x_max,delta_x;
            std::cin &gt;&gt; x_min &gt;&gt; x_max &gt;&gt; delta_x;
</font>            std::cout &lt;&lt; "Unesite red interpolacije: ";
            int red;
            std::cin &gt;&gt; red;
            while(true)
            {
                std::string s{"Unesite argument (ili "};
                s.push_back('"');
                s+="kraj";
                s.push_back('"');
                s+=" za kraj): ";
                std::cout &lt;&lt; s;
                double arg;
                std::cin &gt;&gt; arg;
                if(!(std::cin)) break;
                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; f(arg) &lt;&lt; " fapprox(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; BaricentricnaInterpolacija(f,x_min,x_max,delta_x,red)(arg);
                std::cout &lt;&lt; std::endl;
            }
        }
    }
    catch(std::domain_error izuzetak)
    {
        std::cout &lt;&lt; izuzetak.what();
    }
	return 0;
}</pre>
</body>
</html>
