<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8886.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student4095.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;string&gt;

<a name="0"></a><font color="#FF0000"><a href="match492-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

int OperatorMin (int x, int y)
{
    if (x&lt;y)
        return x;
    return y;
}

int OperatorMax (int x, int y)
{
    if (x&gt;y)
        return x;
    return y;
}

double funkcija (double x)
{
    return x*x+sin(x);
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija (std::vector&lt;std::pair&lt;double,double&gt;&gt; cvorovi_inter, int d)
</font>{
    if(d&lt;0 || d&gt;cvorovi_inter.size())
        throw std::domain_error ("Nedozvoljen red");
    double eps(0.000001);
    for (int i=0; i&lt;int(cvorovi_inter.size())-1; i++)
    {
        for (int j=i+1; j&lt;cvorovi_inter.size(); j++)
        {
            if(fabs(cvorovi_inter[j].first-cvorovi_inter[i].first)&lt;eps)
                throw std::domain_error ("Neispravni cvorovi");
        }
    }
    std::vector&lt;double&gt; t_koef(cvorovi_inter.size());
    int n(cvorovi_inter.size());
    for (int i=1; i&lt;=n; i++)
    {
        int min(OperatorMin(i,n-d)), max(OperatorMax(1, i-d));
        double suma(0);
        for (int k=max; k&lt;=min; k++)
        {
            double proizvod(1);
            for(int j=k; j&lt;=k+d; j++)
            {
                if (j==i) continue;
                proizvod*=1./(cvorovi_inter[i-1].first-cvorovi_inter[j-1].first);
            }
            suma+=pow(-1, k-1)*proizvod;
        }
        t_koef[i-1]=suma;
    }
    
    return [t_koef, cvorovi_inter] (double x) { 
        double eps(0.00001);
        for (int i=0; i&lt;cvorovi_inter.size(); i++)
        {
            if(fabs(x-cvorovi_inter[i].first)&lt;eps)
                return cvorovi_inter[i].second;
        }
        
        double sum1(0), sum2(0);
        for (int i=1; i&lt;=cvorovi_inter.size(); i++)
        {
<a name="1"></a><font color="#00FF00"><a href="match492-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

            sum1+=t_koef[i-1]/(x-cvorovi_inter[i-1].first)*cvorovi_inter[i-1].second;
            sum2+=t_koef[i-1]/(x-cvorovi_inter[i-1].first);
</font><a name="3"></a><font color="#00FFFF"><a href="match492-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        }
        return sum1/sum2;
    }; 
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija (std::function&lt;double(double)&gt; f, double x_min, double x_max, double delta_x, int d)
</font>{
    if (x_min&gt;x_max || delta_x&lt;=0)
        throw std::domain_error("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double&gt;&gt; novi_cvorovi;
    while (x_min&lt;=x_max)
    {
        novi_cvorovi.push_back(std::make_pair(x_min, f(x_min)));
        x_min+=delta_x;
    }
    return BaricentricnaInterpolacija(novi_cvorovi,d); 
}

int main ()
{
    try
    {
        for(;;) //prepraviti
        {
            int opcija;
            std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
            std::cin&gt;&gt;opcija;
            if (!std::cin)
                break;
            if(opcija==1)
            {
                int n;
                std::cout&lt;&lt;"Unesite broj cvorova: ";
                std::cin&gt;&gt;n;
                std::vector&lt;std::pair&lt;double, double&gt;&gt; cvorovi(n);
                std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
                for (int i=0; i&lt;n; i++)
                    std::cin&gt;&gt;cvorovi[i].first&gt;&gt;cvorovi[i].second;
                /*for (int i=0; i&lt;n; i++)
                    std::cout&lt;&lt;cvorovi[i].first&lt;&lt;" "&lt;&lt;cvorovi[i].second&lt;&lt;std::endl;*/
                int d;
                std::cout&lt;&lt;"Unesite red interpolacije: ";
                std::cin&gt;&gt;d;
                auto fun(BaricentricnaInterpolacija(cvorovi, d));
                for (;;)
                {
                    double argument;
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): "; //pronaci kako se pisu navodnici
                    std::cin&gt;&gt;argument;
                    if(!std::cin)
                        break;
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;std::endl;
                }
                if(!std::cin)
                    break;
            }
<a name="2"></a><font color="#0000FF"><a href="match492-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

            else if (opcija==2)
            {
                double x_min, x_max, delta_x;
                std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
                std::cin&gt;&gt;x_min&gt;&gt;x_max&gt;&gt;delta_x;
                int d;
                std::cout&lt;&lt;"Unesite red interpolacije: ";
                std::cin&gt;&gt;d;
</font>                auto fun(BaricentricnaInterpolacija(funkcija, x_min, x_max, delta_x, d));
                for (;;)
                {
                    double argument;
                    std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): "; //pronaci kako se pisu navodnici
                    std::cin&gt;&gt;argument;
                    if(!std::cin)
                        break;
                    std::cout&lt;&lt;"f("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;funkcija(argument)&lt;&lt;" fapprox("&lt;&lt;argument&lt;&lt;") = "&lt;&lt;fun(argument)&lt;&lt;std::endl;
                }
                if(!std::cin)
                    break;
            }
            else
                break;
        }
    }
    catch (std::domain_error e)
    {
        std::cout&lt;&lt;e.what()&lt;&lt;std::endl;
    }
	return 0;
}</pre>
</body>
</html>
