<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5185.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8089.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;

<a name="1"></a><font color="#00FF00"><a href="match79-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

double f(double x){
    return x*x + sin(x);
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(const std::vector&lt;std::pair&lt; double,  double&gt;&gt; CvoroviInterpolacije, int d){
    
    if (d &lt; 0 || d &gt; CvoroviInterpolacije.size()) throw std::domain_error ("Nedozvoljen red"); 
</font>    
    for (int i = 0; i &lt; CvoroviInterpolacije.size(); i++) {
<a name="0"></a><font color="#FF0000"><a href="match79-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_89.gif"/></a>

        for (int j = i+1; j &lt; CvoroviInterpolacije.size(); j++) {
            if (CvoroviInterpolacije[i].first == CvoroviInterpolacije[j].first) {
                throw std::domain_error ("Neispravni cvorovi");
            }
        }
    }
    std::vector&lt;std::pair&lt;double, double&gt;&gt; testniVektor(CvoroviInterpolacije.size());
    
    
    for (int i(1); i &lt;= CvoroviInterpolacije.size(); i++) {
        double suma(0);
        //U wi izrazu, donja granica sume se uzima kao max vr 1 ili i-d. Pa ako je i-d &gt; 1, onda je to donji limit
        int donjiLimit(1);
        if (i-d &gt; 1) donjiLimit = i-d;
        
        //U wi izrazu gornja granica je min vr od i i n-d. Po defaultu je i osim ako je n-d manje od i
        int gornjiLimit(i);
        if (CvoroviInterpolacije.size()-d &lt; i) gornjiLimit = CvoroviInterpolacije.size()-d;
        
        //Petlja za sumu
        for (int k(donjiLimit); k &lt;= gornjiLimit; k++) {
            double proizvod(1);
            for (int j(k); j &lt;= k+d; j++){ //Petlja za produkt
                if (j == i) continue;
                proizvod *= (1/(CvoroviInterpolacije[i-1].first - CvoroviInterpolacije[j-1].first));
            }
    
            suma += pow(-1, k-1) * proizvod;
        }
      
        testniVektor[i-1].first = (suma * CvoroviInterpolacije[i-1].second);
        testniVektor[i-1].second = suma;
    }
    
    
    
    return [testniVektor, CvoroviInterpolacije] (double x)-&gt;double{
        for (int i = 0; i &lt; CvoroviInterpolacije.size(); i++) {
            if (CvoroviInterpolacije[i].first==x) {
                return CvoroviInterpolacije[i].second;
            }
            
        }
        double wi(0), wi_yi(0);
        for (int i = 0; i &lt; testniVektor.size(); i++) {
             wi_yi += testniVektor[i].first/(x - CvoroviInterpolacije[i].first);
             wi += testniVektor[i].second/(x - CvoroviInterpolacije[i].first);
        }
        
        return double (wi_yi/wi);
    };
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; f, double xMin, double xMax, double korak, int d){
    
    if (xMin &gt; xMax || korak &lt;= 0) {
        throw std::domain_error ("Nekorektni parametri");
    }
    
    double kop (xMin); int brojac(0);
    while(kop &lt; xMax){
        brojac++;
        kop = kop + korak;
    }
    
    std::vector&lt;std::pair&lt;double, double&gt;&gt; CvoroviInterpolacije(brojac);
    
    brojac = 0;
    while(xMin &lt; xMax){
        CvoroviInterpolacije[brojac].first = xMin; CvoroviInterpolacije[brojac++].second = f(xMin); 
        xMin += korak;
    }
    
    return BaricentricnaInterpolacija(CvoroviInterpolacije, d);
    
}


int main (){
    
    std::vector&lt;std::pair&lt;double, double&gt;&gt; CvoroviInterpolacije{{1,3}, {2,5}, {4,4}, {5,2}, {7,1}};
    
 
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): "; int n; std::cin &gt;&gt; n;
    
    if (n == 1) {
        std::cout &lt;&lt; "Unesite broj cvorova: "; int brCvorova; std::cin &gt;&gt; brCvorova;
            
        std::vector&lt;std::pair&lt;double, double&gt;&gt; CvoroviInterpolacije(brCvorova);
            
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
            
        for (int i = 0; i &lt; brCvorova; i++) {
            std::cin &gt;&gt; CvoroviInterpolacije[i].first; std::cin &gt;&gt; CvoroviInterpolacije[i].second;
        }
        
        std::cout &lt;&lt; "Unesite red interpolacije: "; int d; std::cin &gt;&gt; d;
        
        double p;
        std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): "; std::cin &gt;&gt; p; 
        while(std::cin){
            
            auto funkcija(BaricentricnaInterpolacija(CvoroviInterpolacije, d));
            
            std::cout &lt;&lt; "f(" &lt;&lt;p&lt;&lt; ") = " &lt;&lt;funkcija(p) &lt;&lt; std::endl;
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): "; std::cin &gt;&gt; p; 
        }
      
        
    }
    
    else if (n == 2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: "; double xMin, xMax, korak; std::cin &gt;&gt; xMin &gt;&gt; xMax &gt;&gt; korak;
        std::cout &lt;&lt; "Unesite red interpolacije: "; int d; std::cin &gt;&gt; d;
        
        double p;
        std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): "; std::cin &gt;&gt; p; 
        while(std::cin){
            
            auto funkcija(BaricentricnaInterpolacija(f, xMin, xMax, korak, d));
            
            std::cout &lt;&lt; "f(" &lt;&lt;p&lt;&lt; ") = " &lt;&lt; f(p) &lt;&lt; " fapprox(" &lt;&lt;p&lt;&lt; ") = " &lt;&lt;funkcija(p) &lt;&lt; std::endl;
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): "; std::cin &gt;&gt; p; 
        }
        
    }
    else{
        std::cout &lt;&lt; "Neispravan input" &lt;&lt; std::endl;
</font>    }
    

   
	return 0;
}

</pre>
</body>
</html>
