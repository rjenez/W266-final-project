<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student1649.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student2068.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 1.
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba) 
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;functional&gt;

// AUTOTEST NE PROLAZI ZA EPS ALI ZATO RADI ZA == // GJ

#define eps (10e-7)

<a name="2"></a><font color="#0000FF"><a href="match556-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

int maks(int x, int y) { if(x&gt;y) return x; return y; }
int mini(int x, int y) { if(x&lt;y) return x; return y; }

std::function&lt;double (double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt;v, int d) {
</font>    if(d&lt;0 || d&gt;=v.size()) throw std::domain_error("Nedozvoljen red");
    for(auto i=v.begin(); i!=v.end(); i++) {
        for(auto j=i+1; j!=v.end(); j++) {
            if(i-&gt;first==j-&gt;first) throw std::domain_error("Nekorektni parametri");
        }
    }
    
    //
    
    std::vector&lt;double&gt;omega(v.size());
    
    for(int i=1; i&lt;=omega.size(); i++) {
        omega[i-1]=0;
        for(int k=maks(1, i-d); k&lt;=mini(i, v.size()-d); k++) {
            double umnozak=1;
            for(int j=k; j&lt;=k+d; j++) {
                if(i==j) continue;
                umnozak*=1./(v[i-1].first - v[j-1].first);
            }
            if(k%2==0) umnozak*=-1;
            omega[i-1]+=umnozak;
        }
    }
    
    
    return [v, omega](double x) {
        for(auto i : v) if(i.first==x) return i.second;
        double prva_suma=0, druga_suma=0;
        
        for(int i=1; i&lt;=v.size(); i++) {
            
            prva_suma+= ( omega[i-1] * v[i-1].second ) / ( x - v[i-1].first );
            
<a name="1"></a><font color="#00FF00"><a href="match556-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

            druga_suma+= omega[i-1] / ( x - v[i-1].first );
            
        }
        
        return prva_suma/druga_suma;
        
    };
}

template &lt;typename Tip&gt;
std::function&lt;double(double)&gt; BaricentricnaInterpolacija(Tip F, double xmin, double xmax, double deltax, int d) {
    if(xmin&gt;xmax || deltax&lt;=0) throw std::domain_error("Nekorektni parametri");
</font>    
    std::vector&lt;std::pair&lt;double, double&gt;&gt;v;
    
    while(xmin &lt;= xmax) {
        v.push_back({xmin, F(xmin)});
        xmin+=deltax;
    }
    
    return BaricentricnaInterpolacija(v, d);
    
}

int main () {
	    
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
<a name="0"></a><font color="#FF0000"><a href="match556-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

    int opcija; std::cin &gt;&gt; opcija;
	    
    if(opcija==1) {
      std::cout &lt;&lt; "Unesite broj cvorova: ";
    	int broj_cv; std::cin &gt;&gt; broj_cv;
    	std::vector&lt;std::pair&lt;double, double&gt;&gt;v;
    	std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
    	for(int i=0; i&lt;broj_cv; i++) {
    	    double a, b; std::cin &gt;&gt; a &gt;&gt; b;
         v.push_back({a, b});
</font>    	}
    	std::cout &lt;&lt; "Unesite red interpolacije: ";
    	int red; std::cin &gt;&gt; red;
    	        
    	for(;;) {
    	    std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
    	    double arg; std::cin &gt;&gt; arg;
            if(!std::cin || std::cin.peek()!='\n') return 0;
	        try { 
	            auto Funkcija=BaricentricnaInterpolacija(v, red);
<a name="3"></a><font color="#00FFFF"><a href="match556-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

	            std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; Funkcija(arg) &lt;&lt; "\n"; 
	        }
	        catch(std::domain_error izuzetak) { std::cout &lt;&lt; izuzetak.what(); return 0; }
</font>	    }
	        
    }
	    
    else if(opcija==2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
    	double xmin, xmax, deltax;
        std::cin &gt;&gt; xmin &gt;&gt; xmax &gt;&gt; deltax;
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        int red; std::cin &gt;&gt; red;
        for(;;) {
	        std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
	        double arg; std::cin &gt;&gt; arg;
	        if(!std::cin || std::cin.peek()!='\n') return 0;
	        try {
	            auto Funkcija=BaricentricnaInterpolacija([](double x) {
                    return x*x+std::sin(x);
	            }, xmin, xmax, deltax, red);
	        
                std::cout &lt;&lt; "f(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; arg*arg+std::sin(arg) &lt;&lt; " fapprox(" &lt;&lt; arg &lt;&lt; ") = " &lt;&lt; Funkcija(arg) &lt;&lt; "\n"; 
	        }
	        catch(std::domain_error izuzetak) { std::cout &lt;&lt; izuzetak.what(); return 0; }
	    }
    }
    return 0;
}</pre>
</body>
</html>
