<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5863.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student5863.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match7-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_53.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;utility&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;cmath&gt;

typedef std::vector&lt;std::pair&lt;double,double&gt;&gt; vektorCvorova;

double f(double x) {
    return x*x + std::sin(x);
}

double MinZaSumu(int index, int n, int d) {
    if(index &gt; n-d) return n-d;
    return index;
}

double MaxZaSumu(int index, int d) {
    if(index - d &gt; 1) return index-d;
    return 1;
}

std::vector&lt;double&gt; TezinskiKoeficijent(vektorCvorova cvorovi, int d) { 
    double nesto = 0;
    std::vector&lt;double&gt; w;
    for(int i = 1; i &lt;= cvorovi.size(); i++) {
        nesto = 0;
    for(int k = MaxZaSumu(i,d); k &lt;= MinZaSumu(i,cvorovi.size(),d); k++) {
        double proizvod = 1.;
        for(int j = k; j &lt;= k+d; j++) {
            if(i != j) proizvod *= 1./(cvorovi[i-1].first - cvorovi[j-1].first); 
        }
        if(k%2 == 0) proizvod *= -1;
        nesto += proizvod;
    }
    w.push_back(nesto);
    }
    
    return w;
}

bool provjeraCvorovaX(vektorCvorova cvorovi) {
    for(int i = 1; i &lt;= cvorovi.size(); i++)
     for(int j = i+1; j &lt;= cvorovi.size(); j++)
     if(cvorovi[i-1].first == cvorovi[j-1].first) return false;
     return true;
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija( vektorCvorova cvorovi, int dRed) {
    if( dRed &lt; 0 || dRed &gt;= cvorovi.size()) throw std::domain_error("Nedozvoljen red");
    if(!provjeraCvorovaX(cvorovi)) throw std::domain_error("Neispravni cvorovi");
    
    return [cvorovi, dRed] (double x) {
        double nazivnik=0,brojnik = 0;
        auto w = TezinskiKoeficijent(cvorovi,dRed);
        for(int i = 1; i &lt;= cvorovi.size(); i++) {
        if( x == cvorovi[i-1].first ) return cvorovi[i-1].second;
        nazivnik += (w[i-1]/(x - cvorovi[i-1].first));
        brojnik += (w[i-1]/(x - cvorovi[i-1].first))*cvorovi[i-1].second;
        }
        return (brojnik/nazivnik);
    };
}

bool imalBroja(std::string s) {
    int minus = 0,tacka=0;
    for(int i = 0; i &lt; s.length(); i++) {
        if(s[i] == '.') tacka++;
        if(s[i] == '-') minus++;
    }
    if(minus &gt; 1 || tacka &gt; 1) return false;
    if( (minus != 0 || tacka != 0) &amp;&amp; s.length() == 1) return false;
    
    for(int i = 0; i &lt; s.length(); i++)
    if( !( (s[i] &gt;= '0' &amp;&amp; s[i] &lt;= '9') || s[i] == '.' || s[i] == '-') ) return false;
    return true;
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; fun, double xMin, double xMax, double deltaX, int d) {
</font>    if(xMin &gt; xMax || deltaX &lt;= 0) throw std::domain_error("Nekorektni parametri");
    
<a name="1"></a><font color="#00FF00"><a href="match7-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_43.gif"/></a>

        std::vector&lt;std::pair&lt;double,double&gt;&gt; rez;
        for(double i = xMin; i &lt;= xMax; i+=deltaX)
        rez.push_back( std::make_pair(double(i),fun(i)) );
        
        return BaricentricnaInterpolacija(rez,d);
}


int main ()
{
    try{
        std::cout&lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
        int opcija=0; 
    
        std::cin&gt;&gt;opcija;
        switch(opcija) {
        case 1 : {
        vektorCvorova cvorovi;
        std::pair&lt;double,double&gt; parCvorova;
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int vel=0;
        std::cin&gt;&gt;vel;
        double prvi=0, drugi=0;
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0; i &lt; vel; i++) {
            std::cin&gt;&gt;prvi;
            std::cin&gt;&gt;drugi;
            parCvorova = std::make_pair(prvi,drugi);
            cvorovi.push_back(parCvorova);
        }
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int red=0;
        std::cin&gt;&gt;red;
        auto fu(BaricentricnaInterpolacija(cvorovi, red));
       
        std::string argument = "";
        std::cin.ignore(100000, '\n');
        do{
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::getline(std::cin, argument);
            if( argument.length() == 0 || argument == "kraj" || !imalBroja(argument)) break;
            double br = stod(argument);
            double vrijednost = fu(br);
            std::cout&lt;&lt; "f("&lt;&lt; br&lt;&lt; ") = "&lt;&lt; vrijednost;
            std::cout&lt;&lt;std::endl;
            
        }while(argument != "kraj" || !imalBroja(argument));
        break;
        }
        case 2 : { 
            std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
            double interv1=0,interv2=0;
            double korak =0;
            std::cin&gt;&gt;interv1;
            std::cin&gt;&gt;interv2;
            std::cin&gt;&gt;korak;
            std::cout&lt;&lt;"Unesite red interpolacije: ";
            int red=0;
            std::cin&gt;&gt;red;
            std::string arg = "";
            std::cin.ignore(100000, '\n');
            
        do{
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            std::getline(std::cin, arg);
            if( arg.length() == 0 || arg == "kraj" || !imalBroja(arg)) break;
            double br = stod(arg);
         
            double vrijedno = f(br);
            auto fun(BaricentricnaInterpolacija([](double x){return x*x +std::sin(x);},interv1,interv2,korak,red));
            double vrijednost = fun(br);
            
            std::cout&lt;&lt; "f("&lt;&lt; br&lt;&lt; ") = "&lt;&lt; vrijedno&lt;&lt;" "&lt;&lt;"fapprox("&lt;&lt;br&lt;&lt;") = "&lt;&lt;vrijednost;
            std::cout&lt;&lt;std::endl;
            
        }while(arg != "kraj" || !imalBroja(arg));
           
            break;
        }
      
        }
        
    }catch(std::domain_error d) {
        std::cout &lt;&lt; d.what() &lt;&lt; std::endl;
</font>    }
    
    
	return 0;
}</pre>
</body>
</html>
