<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student3736.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student9352.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match112-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 1
//Autotestovi by Enil Pajic (epajic1@etf.unsa.ba)
#include &lt;iostream&gt;
#include &lt;utility&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;
#include &lt;functional&gt;
#include &lt;vector&gt;
#include &lt;cctype&gt;

using namespace std;

function&lt;double (double)&gt; BaricentricnaInterpolacija(vector&lt; pair&lt;double,double&gt;&gt; koordinate, int d)
{
    int n{int(koordinate.size())};
    
    for(int i=0;i&lt;n;i++)
    {
        for(int j=i+1;j&lt;n;j++)
        {
            if(koordinate[i].first == koordinate[j].first) throw domain_error("Neispravni cvorovi");
        }
    }
    vector&lt;double&gt; w(n);
    for(int i=0;i&lt;n;i++)
    {
        w[i]=0;
        int donjaGranica = (i-d&gt;0) ? (i-d) : 0;
        int gornjaGranica = (n-d-1&lt;i) ? (n-d-1) : i;
        for(int prolazOut =donjaGranica;prolazOut&lt;=gornjaGranica;prolazOut++)
        {
            long double proizvod=1.;
            for(int prolazIn = prolazOut;prolazIn&lt;=prolazOut+d;prolazIn++)
               {/*
                   if(prolazIn==prolazOut+d &amp;&amp; n-d==prolazOut)
                    proizvod*=1;   //ili puta 1 ????
                  */
                  if(i!=prolazIn)
                        proizvod*=1./(koordinate[i].first-koordinate[prolazIn].first);
               }
            if(prolazOut%2==0)
                w[i]-=proizvod;
            else w[i] += proizvod;
        }
    }
    
    return [n,w,koordinate] (double x) -&gt;double
    {
        long double suma1{0};
        long double suma2{0};
        for(int i=0;i&lt;n;i++)
        {
            if(x==koordinate[i].first)
            {
                return koordinate[i].second;
            }
            suma1+=w[i]*koordinate[i].second/(x-koordinate[i].first);
            suma2+=w[i]/(x-koordinate[i].first);
        }
        return suma1/suma2;
    };
}

function &lt;double (double)&gt; BaricentricnaInterpolacija(double (*f)(double),double x_min,double x_max,double delta_x,int d)
{
    vector&lt; pair&lt;double, double&gt;&gt; koordinate;
    double opseg{x_max-x_min};
    if(opseg&lt;0 || delta_x&lt;=0) throw domain_error("Nekorektni parametri");
    double kolicnik{opseg/delta_x};
    int n{int(floor(kolicnik))+1};
    for(int i=0;i&lt;n;i++) koordinate.push_back(make_pair( x_min+i*delta_x, f(x_min+i*delta_x)));
    if(d&lt;0 || d&gt;=n) throw domain_error("Nedozvoljen red");
    return BaricentricnaInterpolacija(koordinate,d);
}




int main ()
{
    cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    int opcija;
    cin&gt;&gt;opcija;
    if(opcija==1)
    {
        cout&lt;&lt;"Unesite broj cvorova: ";
        int br_cvorova;
        cin&gt;&gt;br_cvorova;
        vector&lt;pair&lt;double, double&gt;&gt; cvorovi;
        cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0;i&lt;br_cvorova;i++)
        {
            double prva_koordinata;
            cin&gt;&gt;prva_koordinata;
            double druga_koordinata;
            cin&gt;&gt;druga_koordinata;
            cvorovi.push_back(make_pair(prva_koordinata,druga_koordinata));
        }
        cout&lt;&lt;"Unesite red interpolacije: ";
        double d;
        cin&gt;&gt;d;
        cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
        cout.flush();
        //cin&gt;&gt;ws;
        //while(isdigit(cin.peek()))
        do
        {
            double broj;
            cin&gt;&gt;broj;
            if(!cin) break;
            auto fun=BaricentricnaInterpolacija(cvorovi,d);
            cout&lt;&lt;"f("&lt;&lt;broj&lt;&lt;") = "&lt;&lt;fun (broj)&lt;&lt;endl;
            cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
            cout.flush();
            cin&gt;&gt;ws;
        }while(1);
        //if(!isdigit(cin.peek()))
        if(!cin)
        {
            string s;
            getline(cin,s);
            if(s=="kraj") return 0;
        }
    }
   if(opcija==2)
   {
       cout&lt;&lt;"Unesite krajeve intervala i korak: ";
       double x_min,x_max,delta_x;
       cin&gt;&gt;x_min;
       cin&gt;&gt;x_max;
       cin&gt;&gt;delta_x;
       cout&lt;&lt;"Unesite red interpolacije: ";
       int d;
       cin&gt;&gt;d;
       cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
       cout.flush();
       //cin&gt;&gt;ws;
       do
       {
           double broj;
           cin&gt;&gt;broj;
           if(!cin) break;
           double rezultat{broj*broj+sin(broj)};
           cout&lt;&lt;"f("&lt;&lt;broj&lt;&lt;") = "&lt;&lt;rezultat;
           auto fun=BaricentricnaInterpolacija([](double x){return x*x+sin(x);},x_min,x_max,delta_x,d);
           cout&lt;&lt;" fapprox("&lt;&lt;broj&lt;&lt;") = "&lt;&lt;fun(broj)&lt;&lt;endl;
           cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
           cout.flush();
           cin&gt;&gt;ws;
       }while(1);
       if(!cin)
       {
           cin.clear();
           string s;
           getline(cin,s);
           //cin&gt;&gt;s;
           if(s=="kraj") return 0;
</font>       }
       
   }
	return 0;
}</pre>
</body>
</html>
