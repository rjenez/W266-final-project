<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student7597.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student7597.cpp<p></p><pre>
#include &lt;utility&gt;
#include &lt;iostream&gt;
#include &lt;functional&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;string&gt;
#include &lt;limits&gt;
bool jednaki(double a,double b){
    if(a==b) return true;
   // if(std::fabs(a-b)&lt; 0.000000001) return true;
    return false;
}
std::function&lt; double( double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double,double&gt;&gt; v,int d){
    if(d&lt;0||d&gt;=v.size()) throw std::domain_error("Nedozvoljen red");
<a name="1"></a><font color="#00FF00"><a href="match867-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

    for(int i=0;i&lt;v.size();i++) for(int j=i+1;j&lt;v.size();j++) if(jednaki(v[i].first,v[j].first)) throw std::domain_error("Neispravni cvorovi");
</font>    std::sort(v.begin(),v.end(),[](std::pair&lt;double,double&gt; p1, std::pair&lt;double,double&gt;p2){
        return p1.first&lt;p2.first;
    });
     std::vector&lt; double&gt; Wi;
     for(int i=0;i&lt;v.size();i++){
             double wi{};
            int k=0; if(i-d&gt;0) k=i-d;
<a name="2"></a><font color="#0000FF"><a href="match867-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

            int kraj=i; if(v.size()-d-1&lt;i) kraj=v.size()-d-1;
            for(int j=k;j&lt;=kraj;j++){               
                 double proizvod=1;
                for(int z=j;z&lt;=j+d;z++){
                    if(i!=z){
</font>                        proizvod/=(v[i].first-v[z].first); 
                    } 
                }

                if((j-1)%2!=0) proizvod*=-1;
                wi+=proizvod;
            }
            Wi.push_back(wi);
     }
     
    return [v,Wi]( double x)-&gt; double{
         double vrijednost1{},vrijednost2{};
<a name="0"></a><font color="#FF0000"><a href="match867-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_15.gif"/></a>

        for(int i=0;i&lt;v.size();i++) if(jednaki(x,v[i].first)) return v[i].second;
        for(int i=0;i&lt;v.size();i++){
            vrijednost1+=(Wi[i]/(x-v[i].first))*v[i].second;
            vrijednost2+=Wi[i]/(x-v[i].first);
        }
        return vrijednost1/vrijednost2;
</font>        };
}
template &lt;typename F&gt; 
std::function&lt; double( double)&gt; BaricentricnaInterpolacija(F f,double xmin,double xmax,double deltax,int d){
    if(xmin&gt;xmax||deltax&lt;=0) throw std::domain_error("Nekorektni parametri");
    
    std::vector&lt;std::pair&lt; double,double&gt;&gt; cvorovi;
    while(xmin&lt;=xmax){
            cvorovi.push_back(std::make_pair(xmin,f(xmin)));
            xmin+=deltax;
    }
    return BaricentricnaInterpolacija(cvorovi,d);
}
double ff( double x){
        return (x*x+std::sin(x));
}
/*
int main ()
{
    int zlj;
    std::cout&lt;&lt;"Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin&gt;&gt;zlj;
    if(zlj==1){
        std::cout&lt;&lt;"Unesite broj cvorova: ";
        int n; std::cin&gt;&gt;n;
        std::vector&lt;std::pair&lt;double,double&gt;&gt; v(n);
        std::cout&lt;&lt;"Unesite cvorove kao parove x y: ";
        for(int i=0;i&lt;n;i++) std::cin&gt;&gt;v[i].first&gt;&gt;v[i].second;
        std::cout&lt;&lt;"Unesite red interpolacije: "; int d;
        std::cin&gt;&gt;d;
          std::cin.ignore(1000,'\n');
        try{
        auto f=BaricentricnaInterpolacija(v,d);
        while(true){
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
             double x;
            if(!(std::cin&gt;&gt;x)) break;
                std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl;
            
        }
        } catch(std::domain_error e){
            std::cout&lt;&lt;e.what(); return 1;
        }
        
    }
    if(zlj==2){
        std::cout&lt;&lt;"Unesite krajeve intervala i korak: ";
        double xmin,xmax,deltax;
        std::cin&gt;&gt;xmin&gt;&gt;xmax&gt;&gt;deltax;
        std::cout&lt;&lt;"Unesite red interpolacije: ";
        int d; std::cin&gt;&gt;d;
          std::cin.ignore(1000,'\n');
        try{
        auto f=BaricentricnaInterpolacija(ff,xmin,xmax,deltax,d);
        while(true){
            std::cout&lt;&lt;"Unesite argument (ili \"kraj\" za kraj): ";
             double x;
            if(!(std::cin&gt;&gt;x)) break;
            std::cout&lt;&lt;"f("&lt;&lt;x&lt;&lt;") = "&lt;&lt;ff(x)&lt;&lt;" fapprox("&lt;&lt;x&lt;&lt;") = "&lt;&lt;f(x)&lt;&lt;std::endl;
                
            }
        }
        catch(std::domain_error e){
            std::cout&lt;&lt;e.what(); return 1;
        }
    }

	return 0;
}  
*/
int main(){
    auto fun = BaricentricnaInterpolacija([](double x){return 1 / x;}, 0.5, 0.5, 0.1, 0);
    for (double i = 0.3; i &lt; 0.7; i += 0.1)
        std::cout &lt;&lt; "fun (" &lt;&lt; i &lt;&lt; ") = " &lt;&lt; fun (i) &lt;&lt; std::endl;
    return 0;
}
</pre>
</body>
</html>
