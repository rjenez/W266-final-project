<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8560.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z1/student8560.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;functional&gt;
#include &lt;cmath&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match73-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::vector&lt;std::pair&lt;double, double&gt;&gt; vektor, int d) {
   if(d &lt; 0 || d &gt;= vektor.size()) throw std::domain_error ("Nedozvoljen red");
  for(int i = 0; i &lt; vektor.size(); i++) {
      for(int k = 0; k &lt; vektor.size(); k++) {
          if(i == k) continue;
          if(vektor[i].first == vektor[k].first) throw std::domain_error ("Neispravni cvorovi");
      }
  }
   return [vektor, d] (double x) -&gt; double {
    double p = 1;
    std::vector&lt;double&gt; W(vektor.size(), 0);
    int l = vektor.size();
    for(int i(1); i &lt;= vektor.size(); i++) {
        for(int k(std::max(1, i-d)); k &lt;= std::min(i, l - d); k++) {
            p = 1;
            for(int j(k); j &lt;= k + d; j++) {
                if(i == j) continue;
                p = p * (1/(vektor[i - 1].first - vektor[j-1].first));
            }
            W[i-1] = W[i-1] + std::pow(-1, k-1) * p;
        }
    }
    
    double funkcija, suma (0), suma2(0);
    for(int i(0); i &lt; vektor.size(); i++) {
        if(x == vektor[i].first) return vektor[i].second;
        suma += (W[i]/(x - vektor[i].first)) * vektor[i].second;
        suma2 += (W[i]/(x - vektor[i].first));
    }
    funkcija = suma/suma2;
};
}

std::function&lt;double(double)&gt; BaricentricnaInterpolacija(std::function&lt;double(double)&gt; funkcija, double xmin, double xmax, double deltax, int d) {
    if((xmin &gt; xmax) || (deltax &lt;= 0)) throw std::domain_error ("Nekorektni parametri");
    std::vector&lt;std::pair&lt;double, double &gt;&gt; vektor;
    while(xmin &lt;= xmax) {
      std::pair&lt;double, double&gt;  s = std::make_pair(xmin, funkcija(xmin));
        vektor.push_back(s);
        xmin += deltax;
    }
    return BaricentricnaInterpolacija(vektor, d);
}
int main () {
    while(1) {
   int n;
    std::cout &lt;&lt; "Odaberite opciju (1 - unos cvorova, 2 - aproksimacija): ";
    std::cin &gt;&gt; n;
    if(n == 1) {
        int d;
        std::vector&lt;std::pair&lt;double, double&gt;&gt; vektor;
        std::cout &lt;&lt; "Unesite broj cvorova: ";
        std::cin &gt;&gt; d;
        std::cout &lt;&lt; "Unesite cvorove kao parove x y: ";
        for(int i(0); i &lt; d; i++) {
            int br, br1;
            std::cin &gt;&gt; br &gt;&gt; br1;
            vektor.push_back(std::make_pair(br, br1));
        }
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        int r;
        std::cin &gt;&gt;r;
        while(1) {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double arg;
            std::cin &gt;&gt; arg;
            if(!std::cin) {
                std::cin.clear();
                std::cin.ignore(10000, '\0');
                return 0;
            }
            try {
                auto funkcija = BaricentricnaInterpolacija(vektor, r);
                double konacno = funkcija(arg);
                std::cout &lt;&lt; "f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt; konacno&lt;&lt; std::endl;
            }
            catch(std::domain_error Izuzetak) {
                std::cout &lt;&lt;Izuzetak.what()&lt;&lt; std::endl;
                return 0;
            }
        }
    }
    else if(n == 2) {
        std::cout &lt;&lt; "Unesite krajeve intervala i korak: ";
        double xmin, xmax, deltax;
        std::cin &gt;&gt; xmin &gt;&gt; xmax &gt;&gt; deltax;
        std::cout &lt;&lt; "Unesite red interpolacije: ";
        int r;
        std::cin &gt;&gt; r;
        while(1) {
            std::cout &lt;&lt; "Unesite argument (ili \"kraj\" za kraj): ";
            double arg;
            std::cin &gt;&gt; arg;
            if(!std::cin) {
                std::cin.clear();
                std::cin.ignore(10000, '\0');
                return 0;
            }
            try {
                std::function&lt;double(double)&gt; funkcija2 = BaricentricnaInterpolacija([] (double x) { return std::pow(x, 2) + std::sin(x); }, xmin, xmax, deltax, r);
                double konacno = funkcija2(arg);
                std::cout &lt;&lt; "f("&lt;&lt;arg&lt;&lt;") = "&lt;&lt; std::pow(arg,2) +std::sin(arg) &lt;&lt; " fapprox("&lt;&lt;arg&lt;&lt;") = " &lt;&lt; konacno &lt;&lt; std::endl;
            }
            catch (std::domain_error Izuzetak) {
                std::cout &lt;&lt; Izuzetak.what() &lt;&lt; std::endl;
                return 0;
</font>            }
            }
    }
    }
	return 0;
}</pre>
</body>
</html>
