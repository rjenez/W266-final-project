<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z3/student4639.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z3/student4639.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

struct Oblik {
	char naziv[20];
	int br_stranica;
	double stranice[300];
};


void dodaj_oblik(struct Oblik o){
	
	unsigned short obliciBroj;	//br oblika
	struct Oblik oblici[100];
	int i, j;
	FILE* dat = fopen("oblici.dat", "rb");
	if(dat == NULL) exit(1);
	
	unsigned char straniceBroj;	//br str mnogougla
	float stranicaValue;	//duz str
	
	// dodajemo oblik u niz struct
	
	fread(&amp;obliciBroj, 2, 1, dat);
	for(i = 0; i &lt; obliciBroj; ++i) {
<a name="4"></a><font color="#FF00FF"><a href="match64-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

		fread(oblici[i].naziv, 1, 20, dat);
		fread(&amp;straniceBroj, 1, 1, dat);
		
		oblici[i].br_stranica = (int) straniceBroj;
		//oblici[i].br_stranica=straniceBroj;
		
		for(j = 0; j &lt; straniceBroj; ++j){
</font>			fread(&amp;stranicaValue, 4, 1, dat);
			oblici[i].stranice[j] = (double)stranicaValue;
		}
	}
	oblici[i] = o;	//dodajem novi
	++obliciBroj;
	
	FILE *dat2 = fopen("oblici.dat", "wb");
	if(dat2 == NULL) exit(1);
	
	// upisujemo u datotetku
	
	fwrite(&amp;obliciBroj, 2, 1, dat2);
	for(i=0; i&lt;obliciBroj; ++i){
<a name="3"></a><font color="#00FFFF"><a href="match64-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_8.gif"/></a>

		fwrite(oblici[i].naziv, 1,20, dat2);
		straniceBroj = (unsigned char ) oblici[i].br_stranica;
		fwrite(&amp;straniceBroj, 1, 1, dat2);
		 
		for(j = 0; j &lt; straniceBroj; ++j) {
			stranicaValue = (float) oblici[i].stranice[j];
			fwrite(&amp;stranicaValue, 4, 1, dat2);
		}
	}
	
	fclose(dat); fclose(dat2);
	
}

void izbaci_duple(){
	int i,j,k;
</font>	FILE* dat=fopen("oblici.dat","rb");
	if(dat==NULL) exit(1);
	
	float stranicaValue;
	struct Oblik oblici[100];
	unsigned short obliciBroj;
	unsigned char straniceBroj;
	
	fread(&amp;obliciBroj,2,1,dat);
	for(i=0; i&lt;obliciBroj;i++){
<a name="0"></a><font color="#FF0000"><a href="match64-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_16.gif"/></a>

		fread(oblici[i].naziv,1,20,dat);
		fread(&amp;straniceBroj,1,1,dat);
		oblici[i].br_stranica=(int)straniceBroj;
		for(j=0; j&lt;straniceBroj; j++){
			fread(&amp;stranicaValue,4,1,dat);
			oblici[i].stranice[j]=(double)stranicaValue;
		}
	}
	
	//isti izbacivanje
	for(i=0; i&lt;obliciBroj; i++){
		for(j=i+1;j&lt;obliciBroj;j++){
			if(!strcmp(oblici[i].naziv, oblici[j].naziv)){
				for(k=j; k&lt;obliciBroj-1; k++){
					oblici[k]=oblici[k+1];
				}
				obliciBroj--;
				j--;
			}
		}
	}
	
	FILE* dat2=fopen("oblici.dat","wb");
	if(dat2==NULL) exit(1);
</font>	
	fwrite(&amp;obliciBroj,2,1,dat2);
	for(i=0; i&lt;obliciBroj;i++){
<a name="2"></a><font color="#0000FF"><a href="match64-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_9.gif"/></a>

		fwrite(oblici[i].naziv,1,20,dat2);
		straniceBroj=(unsigned char)oblici[i].br_stranica;
		fwrite(&amp;straniceBroj,1,1,dat2);
		for(j=0; j&lt;straniceBroj; j++){
			stranicaValue=(float)oblici[i].stranice[j];
			fwrite(&amp;stranicaValue,4,1,dat2);
		}
	}
	
	fclose(dat2);
	fclose(dat);
}


struct Oblik daj_najveci(){	//najveci obim
	
	int i,j, obliciBroj=0;
</font>	struct Oblik maxoblik;
	struct Oblik oblici[100];
	unsigned char straniceBroj;
	
	FILE* dat=fopen("oblici.dat","rb");
	if(dat==NULL) exit(1);
	
	float obimMaxVrijednost=0, obimoblika=0, stranicaValue;
	
<a name="1"></a><font color="#00FF00"><a href="match64-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_13.gif"/></a>

	fread(&amp;obliciBroj,2,1,dat);
	for(i=0; i&lt;obliciBroj; i++){
		
		obimoblika=0;
		fread(oblici[i].naziv, 1,20,dat);
		fread(&amp;straniceBroj,1,1,dat);
		oblici[i].br_stranica=(int)straniceBroj;
		
		for(j=0; j&lt;straniceBroj; j++){
			fread(&amp;stranicaValue,4,1,dat);
			oblici[i].stranice[j]=(double)stranicaValue;
			obimoblika+=oblici[i].stranice[j];
		}
		
		if(obimoblika&gt;obimMaxVrijednost){
			obimMaxVrijednost=obimoblika;
			maxoblik=oblici[i];
		}
	}
	
	fclose(dat);
	return maxoblik;
	
}

int main() {
</font>	
	struct Oblik niz[]={{"Trougao", 3, {1.1, 1.1, 1.1}},
						{"Trougao", 3, {1.1, 1.1, 1.1}},
						{"Trougao", 3, {100.1, 100.1, 100.1}},
						{"Kvadar", 4, {1.1, 1.1, 1.1, 1.1}},
						{"Trougao",3, {1.1,1.1,1.1}}};
	
	dodaj_oblik(niz[0]); dodaj_oblik(niz[1]); dodaj_oblik(niz[2]);
	dodaj_oblik(niz[3]); dodaj_oblik(niz[4]);
	
	izbaci_duple();
	
	struct Oblik najveci_obim=daj_najveci();
	
	// printf("%s %g %g %g\n", rez.naziv, rez.stranice[0], rez.stranice[1],rez.stranice[2])
	
	
	
	return 0;
}
</pre>
</body>
</html>
