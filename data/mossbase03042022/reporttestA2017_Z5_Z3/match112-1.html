<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z3/student6195.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z3/student8705.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

struct Oblik {
	char naziv[20];
	int br_stranica;
	double stranice[300];
};
double obim(struct Oblik o)
{
	double t = 0;
	while (o.br_stranica-- &gt; 0) t += o.stranice[o.br_stranica];
	return t;
}
<a name="0"></a><font color="#FF0000"><a href="match112-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_16.gif"/></a>

int ucitaj(struct Oblik *o, FILE *f)
{
	int i = 0;
	float a = 0;
	unsigned char c = 0;
	o-&gt;br_stranica = 0;
	if (fread(o-&gt;naziv, 1, 20, f) == 20 &amp;&amp; fread(&amp;c, 1, 1, f) == 1) {
		o-&gt;br_stranica = (int) c;
		while (i &lt; c &amp;&amp; fread(&amp;a, 4, 1, f) == 1)
			o-&gt;stranice[i++] = (double) a;
		return 1;
	}
	return 0;
}
int dodaj_oblik(struct Oblik o)
{
	FILE *f = fopen("oblici.dat", "rb+");
</font>	struct Oblik tmp;
	float a;
	unsigned short n = 0;
	unsigned char c = 0;
<a name="1"></a><font color="#00FF00"><a href="match112-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

	int i = 0;
	if (!f) f = fopen("oblici.dat", "wb+");
	if (!f) return 1;
	//Ako fajl ne sadrzi prva 2 bajta za broj oblika, dodajemo ih
	if (fread(&amp;n, 2, 1, f) != 1) n=1;
	else n++;
	fseek(f, 0, SEEK_SET);
	fwrite(&amp;n, 2, 1, f);
</font>	while (i++ &lt; n-1 &amp;&amp; ucitaj(&amp;tmp, f));
	if (!f) return 1;
	c = (unsigned char) o.br_stranica;
	if (fwrite(o.naziv, 1, 20, f) == 20 &amp;&amp; fwrite(&amp;c, 1, 1, f) == 1) {
		i = 0;
		while (i &lt; c) {
			a = (float) o.stranice[i];
			fwrite(&amp;a, 4, 1, f);
			i++;
		}
	} else {
		fclose(f);
		return 1;
	}
	fclose(f);
	return 0;
}
int izbaci_duple()
{
	struct Oblik ref, oblik, tmp;
	long pocetak = 0, kraj, eof, i = 0, pocetak_ref = 0;
	char c;
	unsigned short n;
	FILE *f = fopen("oblici.dat", "rb+");
	if (!f) return 1;
	fread(&amp;n, 2, 1, f);
	while (i++ &lt; n &amp;&amp; ucitaj(&amp;tmp, f));
	eof = ftell(f);
	fseek(f, 2, SEEK_SET);
	i = 0;
	pocetak_ref = ftell(f);
	//Referentni oblik
	while (pocetak_ref &lt; eof &amp;&amp; ucitaj(&amp;ref, f)) {
		pocetak_ref = pocetak = ftell(f);
		//Prolazi kroz sve preostale oblike
		while (pocetak &lt; eof &amp;&amp; ucitaj(&amp;oblik, f)) {
			kraj = ftell(f);
			if (!strcmp(oblik.naziv, ref.naziv)) { //Isti naziv, potrebno izbaciti
				n--;
				while (ftell(f) &lt; eof &amp;&amp; fread(&amp;c, 1, 1, f) == 1) {
					fseek(f, pocetak - kraj - 1, SEEK_CUR);
					fwrite(&amp;c, 1, 1, f);
					fseek(f, kraj - pocetak, SEEK_CUR);
				} //Prepisuje sve podatke ostatka fajla ulijevo
				eof -= kraj - pocetak;
				fseek(f, pocetak, SEEK_SET);
			} else pocetak = kraj;
		}
		fseek(f, pocetak_ref, SEEK_SET);
	}
	fseek(f, 0, SEEK_SET);
	fwrite(&amp;n, 2, 1, f);
	fclose(f);
	return 0;
}
struct Oblik daj_najveci()
{
	struct Oblik ret, lok;
	double najveci = 0;
	unsigned short n = 0, i = 0;
	FILE *f = fopen("oblici.dat", "rb");
	if (!f) return ret;
	if (fread(&amp;n, 2, 1, f) != 1) return ret;
	while (i++ &lt; n &amp;&amp; ucitaj(&amp;lok, f))
		if (obim(lok) &gt; najveci) najveci = obim(ret = lok);
	fclose(f);
	return ret;
}
int main()
{
	return 0;
}</pre>
</body>
</html>
