<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z3/student5952.c</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/A2017/Z5/Z3/student8172.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

/* Vrijeme: 14:54-, 2 minuta  */


struct Oblik {
	char naziv[20];
	int br_stranica;
	double stranice[300];
};

void zapisi_datoteku(struct Oblik* niz, int vel) {
	int i, j;
	FILE* fp = fopen("oblici.dat", "wb");
<a name="3"></a><font color="#00FFFF"><a href="match126-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

	unsigned short vel2=vel;
	fwrite(&amp;vel2, 2, 1, fp);
	for (i=0; i&lt;vel; i++) {
		fwrite(niz[i].naziv, 20, 1, fp);
</font><a name="0"></a><font color="#FF0000"><a href="match126-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

		unsigned char br = niz[i].br_stranica;
		fwrite(&amp;br, 1, 1, fp);
		for (j=0; j&lt;niz[i].br_stranica; j++) {
			float stranica = niz[i].stranice[j];
			fwrite(&amp;stranica, 4, 1, fp);
		}
	}
	fclose(fp);
</font>}

int ucitaj_datoteku(struct Oblik* niz, int kap) {
	int i, j;
	unsigned short vel;
	FILE* fp = fopen("oblici.dat", "rb");
	fread(&amp;vel, 2, 1, fp);
	for (i=0; i&lt;vel; i++) {
		if (i==vel) break;
		fread(niz[i].naziv, 20, 1, fp);
		unsigned char br;
		fread(&amp;br, 1, 1, fp);
		niz[i].br_stranica = br;
<a name="2"></a><font color="#0000FF"><a href="match126-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

		for (j=0; j&lt;br; j++) {
			float stranica;
			fread(&amp;stranica, 4, 1, fp);
			niz[i].stranice[j] = stranica;
		}
	}
	fclose(fp);
</font>	return vel;
}

double daj_povrsinu(struct Oblik o) {
	int i;
<a name="1"></a><font color="#00FF00"><a href="match126-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

	double rez=0;
	for (i=0; i&lt;o.br_stranica; i++)
		rez+=o.stranice[i];
	return rez;
}

struct Oblik daj_najveci() {
	struct Oblik niz[100] = {};
</font>	int vel = ucitaj_datoteku(niz, 100);
	int i, max=0;
	double povrsina = daj_povrsinu(niz[0]);
	for (i=0; i&lt;vel; i++) {
		if (daj_povrsinu(niz[i]) &gt; povrsina) {
			povrsina = daj_povrsinu(niz[i]);
			max = i;
		}
	}
	return niz[max];
}

void dodaj_oblik(struct Oblik o) {
	struct Oblik niz[100] = {};
	int vel = ucitaj_datoteku(niz, 100);
	if (vel &lt; 100)	
		niz[vel++] = o;
	zapisi_datoteku(niz, vel);
}

void izbaci_duple() {
	struct Oblik niz[100] = {};
	int vel = ucitaj_datoteku(niz, 100);
	int i,j, k;
	for (i=1; i&lt;vel; i++) {
		for (j=0; j&lt;i; j++)
			if (strcmp(niz[i].naziv, niz[j].naziv) == 0) {
				for (k=i; k&lt;vel-1; k++)
					niz[k] = niz[k+1];
				vel--;
				i--;
				break;
			}
	}
	zapisi_datoteku(niz, vel);
}

int main() {
	/*
	struct Oblik nizw[] = {
		{"Kvadrat", 4, {5.5, 3.3, 1.9, 4.4}},
		{"Trougao", 3, {21.21, 18.18, 1.1}},
		{"Sestougao", 6, {4.4, 2.2, 5.5, 0.111, 3.4, 5}},
		{"Petougao", 5, {1,2,3,4,5}}
	};
	zapisi_datoteku(nizw, 4);
	printf("Zapisano\n");
	*/
	
/* AT6 (skriveni): Da li je broj stranica ispravno procitan iz datoteke (unsigned char) */
/*struct Oblik veliki = {"255ugao", 255, {} };
int i;
for (i=0; i&lt;255; i++)
	veliki.stranice[i] = 0.0001;
veliki.stranice[254] = 10000;
dodaj_oblik(veliki);
	
struct Oblik rez = daj_najveci();
printf("%s", rez.naziv);
*/
	
	struct Oblik niz[100];
	int vel = ucitaj_datoteku(niz, 100);
	int i;
	printf("%d\n", vel);
	for (i=0; i&lt;vel; i++) {
		printf("'%s'\n", niz[i].naziv);
	}
	
	return 0;
}
</pre>
</body>
</html>
