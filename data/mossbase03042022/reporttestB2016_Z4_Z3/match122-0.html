<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z3/student1313.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z3/student1313.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match122-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 3
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;new&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;

class Datum
{
  int dan, mjesec, godina;
public:
  Datum(int dan, int mjesec, int godina) {
    Postavi(dan, mjesec, godina);
  }
  void Postavi(int dan, int mjesec, int godina);
  int DajDan() const {
    return dan;
  }
  int DajMjesec() const {
    return mjesec;
  }
  int DajGodinu() const {
    return godina;
  }
  void Ispisi() const;
};

void Datum::Postavi(int dan, int mjesec, int godina)
{
  int dani[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>  if( (godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) dani[1]++;
<a name="2"></a><font color="#0000FF"><a href="match122-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_12.gif"/></a>

  if(dan&lt;1 || mjesec &lt;1 || mjesec&gt;12 || godina&lt;1 || dan&gt;dani[mjesec-1]) throw std::domain_error("Neispravan datum");
  Datum::dan=dan;
  Datum::mjesec=mjesec;
  Datum::godina=godina;
}

void Datum::Ispisi() const
{
  std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
}

class Kupac
{
  std::string iip;
  Datum dat;

public:
  Kupac(const std::string ime_i_prezime, const Datum &amp;datum_rodjenja): dat(datum_rodjenja.DajDan(), datum_rodjenja.DajMjesec(), datum_rodjenja.DajGodinu()) {
    for(int i=0; i&lt;ime_i_prezime.size(); i++)  if((ime_i_prezime[i]&lt;'A' &amp;&amp; ime_i_prezime[i]&gt;'9') || (ime_i_prezime[i]&gt;'Z' &amp;&amp; ime_i_prezime[i]&lt;'a') || (ime_i_prezime[i]&lt;'0' &amp;&amp; ime_i_prezime[i]!=' ')) throw std::domain_error("Neispravno ime i prezime");
    iip=ime_i_prezime;
  }
  void Postavi(const std::string ime_i_prezime, const Datum &amp;datum_rodjenja) {
    dat.Postavi(datum_rodjenja.DajDan(), datum_rodjenja.DajMjesec(), datum_rodjenja.DajGodinu());
    iip=ime_i_prezime;
  }
  std::string DajImePrezime() const {
    return iip;
  }
  Datum DajDatumRodjenja() const {
    return dat;
  }
  void Ispisi() const {
    std::cout&lt;&lt;iip&lt;&lt;" ("&lt;&lt;dat.DajDan()&lt;&lt;"/"&lt;&lt;dat.DajMjesec()&lt;&lt;"/"&lt;&lt;dat.DajGodinu()&lt;&lt;")";
  }
};

class Stan
{
  std::string adresa;
  int sprat, broj_soba;
  bool namjesten;
  double kvadratura;

public:
  Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if(sprat&lt;0 || broj_soba&lt;0 || kvadratura&lt;0) throw std::domain_error("Neispravan unos podataka");
</font><a name="6"></a><font color="#00FF00"><a href="match122-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    Stan::adresa=adresa;
    Stan::sprat=sprat;
    Stan::broj_soba=broj_soba;
    Stan::namjesten=namjesten;
    Stan::kvadratura=kvadratura;
  }
  void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if(sprat&lt;0 ||broj_soba&lt;0 || kvadratura&lt;0) throw std::domain_error("Neispravan unos podataka");
</font>    Stan::adresa=adresa;
<a name="3"></a><font color="#00FFFF"><a href="match122-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_8.gif"/></a>

    Stan::sprat=sprat;
    Stan::broj_soba=broj_soba;
    Stan::namjesten=namjesten;
    Stan::kvadratura=kvadratura;
  }
  std::string DajAdresu() const {
    return adresa;
  }
  int DajSprat() const {
    return sprat;
  }
  int DajBrojSoba() const {
    return broj_soba;
  }
  bool DajNamjesten() const {
    return namjesten;
  }
  double DajKvadraturu() const {
    return kvadratura;
  }
  void Ispisi() const;
};

void Stan::Ispisi() const
{
  std::cout&lt;&lt;"Stan se nalazi na adresi"&lt;&lt;adresa&lt;&lt;" na "&lt;&lt;sprat&lt;&lt;". spratu i ima ";
  if(broj_soba==2 || broj_soba==3 ||broj_soba==4 || broj_soba%10==2 || broj_soba%10==3 || broj_soba%10==4) std::cout&lt;&lt;broj_soba&lt;&lt;" sobe."&lt;&lt;std::endl;
  else std::cout&lt;&lt;broj_soba&lt;&lt;" soba."&lt;&lt;std::endl;
  std::cout&lt;&lt;"Kvadratura stana je "&lt;&lt;kvadratura&lt;&lt;" (m^2) "&lt;&lt;"i stan ";
  if(namjesten) std::cout&lt;&lt;"je namjesten.";
  else std::cout&lt;&lt;"nije namjesten.";
}

class Prodaja
{
  std::string agent;
  double cijena;
  Datum datum;
  Kupac kupac;
  Stan kupljeni;
public:
  Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
</font><a name="5"></a><font color="#FF0000"><a href="match122-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

  //  void Ispisi() const;
  Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string ime_kupca,
          const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
</font>  void PromijeniKupca(const Kupac &amp;novi_kupac) {
    kupac=novi_kupac;
  }
  void PromijeniStan(const Stan &amp;novi_stan) {
<a name="0"></a><font color="#FF0000"><a href="match122-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_31.gif"/></a>

    kupljeni=novi_stan;
  }
  void PromijeniDatumKupovine(const Datum &amp;novi_datum) {
    datum=novi_datum;
  }
  void PromijeniCijenuProdaje(const double &amp;nova_cijena) {
    cijena=nova_cijena;
  }
  void PomjeriDanUnaprijed() {
    int x=datum.DajDan();
    x++;
    datum.Postavi(x, datum.DajMjesec(), datum.DajGodinu());
  }
  void PomjeriDanUnazad() {
    int x=datum.DajDan();
    x--;
    datum.Postavi(x, datum.DajMjesec(), datum.DajGodinu());
  }
// void IspisiDatuma() { datum.Ispisi(); }
  std::string DajImeAgenta() const {
    return agent;
  }
  std::string DajImeKupca() const {
    return kupac.DajImePrezime();
  }
  Datum DajDatumProdaje() const {
    return datum;
  }
  double DajCijenuStana() const {
    return cijena;
  }
  friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
  friend bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2);
  void Ispisi() const;
};

void Prodaja::Ispisi() const
{
  std::cout&lt;&lt;std::setw(50)&lt;&lt;std::left&lt;&lt;std::setfill(' ')&lt;&lt;"Ime agenta: "&lt;&lt;agent&lt;&lt;std::endl;
  std::cout&lt;&lt;std::setw(50)&lt;&lt;std::left&lt;&lt;std::setfill(' ')&lt;&lt;"Ime kupca: "&lt;&lt;kupac.DajImePrezime();
  std::cout&lt;&lt;" (";
  kupac.DajDatumRodjenja().Ispisi();
  std::cout&lt;&lt;")"&lt;&lt;std::endl;
  std::cout&lt;&lt;std::setw(50)&lt;&lt;std::left&lt;&lt;std::setfill(' ')&lt;&lt;"Zakazani datum prodaje: ";
  datum.Ispisi();
  std::cout&lt;&lt;std::endl;
  std::cout&lt;&lt;std::setw(50)&lt;&lt;std::left&lt;&lt;std::setfill(' ')&lt;&lt;"Cijena stana: "&lt;&lt;cijena&lt;&lt;std::endl;
  std::cout&lt;&lt;"Informacije o stanu: "&lt;&lt;std::endl;
  kupljeni.Ispisi();
}
bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
  if(p1.DajCijenuStana()&gt;p2.DajCijenuStana()) return true;
  else return false;
}

bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2)
{
  Datum d1=p1.DajDatumProdaje();
  Datum d2=p2.DajDatumProdaje();
  int x=d1.DajGodinu();
  int y=d2.DajGodinu();
  if(x&lt;y) return true;
  if(x&gt;y) return false;
  else {
    int mj1=d1.DajMjesec();
    int mj2=d2.DajMjesec();
    if(mj1&lt;mj2) return true;
    if(mj1&gt;mj2) return false;
    else {
      int dan1=d1.DajDan(), dan2=d2.DajDan();
      if(dan1&lt;dan2) return true;
      if(dan1&gt;dan2) return false;
    }
  }
  return 0;
}

Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan):
  datum(datum_prodaje), kupac(kupac_stana), kupljeni(kupljeni_stan)
{
  agent=ime_agenta_prodaje;
  cijena=cijena_stana;
}
// void Prodaja::Ispisi() const { std::cout&lt;&lt;agent&lt;&lt;" "&lt;&lt;cijena&lt;&lt;" "; datum.Ispisi(); kupac.Ispisi(); kupljeni.Ispisi(); }

Prodaja::Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string ime_kupca,
                 const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata):
  datum(dan_prodaje, mjesec_prodaje, godina_prodaje), kupac(ime_kupca, datum_rodjenja_kupca), kupljeni(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata)
{
  agent=ime_agenta_prodaje;
  cijena=cijena_stana;
  //  datum(dan_prodaje, mjesec_prodaje, godina_prodaje);
// kupac(ime_kupca, datum_rodjenja_kupca);
  //  kupljeni(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata);
}

class Prodaje
{
  int maxbr;
  int trenutno;
  Prodaja **pr;
 // static bool RanijiDatum(Prodaja *p1, Prodaja *p2);
public:
  explicit Prodaje(int max_broj_prodaja) {
    pr=nullptr;
    maxbr=max_broj_prodaja;
    pr=new Prodaja *[maxbr];
  }
  Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja) {
    trenutno=spisak_prodaja.size();
    pr=new Prodaja *[spisak_prodaja.size()];
    int i(0);
    for(auto x : spisak_prodaja) {
      pr[i]=new Prodaja(x);
      i++;
    }
  }
  ~Prodaje() {
    for(int i=0; i&lt;trenutno; i++) delete pr[i];
    delete [] pr;
  }

  Prodaje(const Prodaje &amp;prodaje);
  Prodaje(Prodaje &amp;&amp;prodaje);
  Prodaje &amp;operator =(const Prodaje &amp;prodaje);
  Prodaje &amp;operator =(Prodaje &amp;&amp; prodaje);
  void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
</font><a name="1"></a><font color="#00FF00"><a href="match122-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_28.gif"/></a>

  void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata) {
    if(trenutno==maxbr) throw std::range_error("Dostignut maksimlani broj prodaja");
    for(int i=0; i&lt;maxbr; i++) if(pr[i]==nullptr) pr[i]=new Prodaja(ime_agenta_prodaje, cijena_stana, dan_prodaje, mjesec_prodaje, godina_prodaje, ime_kupca, datum_rodjenja_kupca, adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata);
  }
  void RegistrirajProdaju(Prodaja *prodaja) {
    if(trenutno==maxbr) throw std::range_error("Dostignut maksimlani broj prodaja");
    for(int i=0; i&lt;maxbr; i++) if(pr[i]==nullptr) pr[i]=prodaja;
  }
  int DajBrojProdaja() const {
    return trenutno;
  }
  int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const {
    int br=0;
    for(int i=0; i&lt;trenutno; i++)
      if(pr[i]-&gt;DajImeAgenta()==ime_agenta) br++;
    return br;
  }
  void IsprazniKolekciju();
};
void Prodaje::IsprazniKolekciju()
{
  for(int i=0; i&lt;trenutno; i++) {
    delete pr[i];
    pr[i]=nullptr;
  }
  delete [] pr;
}
void Prodaje::RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan)
{
  if(trenutno==maxbr) throw std::range_error("Dostignut maksimlani broj prodaja");
  for(int i=0; i&lt;maxbr; i++) if(pr[i]==nullptr) pr[i]=new Prodaja(ime_agenta_prodaje, cijena_stana, datum_prodaje, kupac_stana, kupljeni_stan);
}




Prodaje &amp;Prodaje::operator =(Prodaje &amp;&amp;prodaje)
{
  std::swap(trenutno, prodaje.trenutno);
  std::swap(maxbr, prodaje.maxbr);
  return *this;
}

Prodaje &amp;Prodaje::operator =(const Prodaje &amp;prodaje)
{
  if(prodaje.trenutno&gt;trenutno) {
    try  {
      for(int i=trenutno; i&lt;prodaje.trenutno; i++) pr[i]=new Prodaja(*prodaje.pr[i]);
    } catch(...) {
      for(int i=trenutno; i&lt;prodaje.trenutno; i++) {
        delete pr[i];
        pr[i]=nullptr;
      }
      throw;
    }
  } else {
    for(int i=prodaje.trenutno; i&lt;trenutno; i++) {
      delete pr[i];
      pr[i]=nullptr;
    }
  }
  trenutno=prodaje.trenutno;
  for(int i=0; i&lt;trenutno; i++) *pr[i]=*prodaje.pr[i];
  return *this;
}


Prodaje::Prodaje(const Prodaje &amp;prodaje): maxbr(prodaje.maxbr), trenutno(prodaje.trenutno), pr(new Prodaja *[prodaje.maxbr])
{
  // trenutno=prodaje.trenutno; maxbr=prodaje.maxbr;
  // pr=new Prodaja*[maxbr];
  try {
    for(int i=0; i&lt;trenutno; i++) pr[i]=new Prodaja(*prodaje.pr[i]);
  } catch(...) {
    for(int i=0; i&lt;prodaje.trenutno; i++) delete pr[i];
    delete [] pr;
    throw;
  }
}


Prodaje::Prodaje(Prodaje &amp;&amp;prodaje): maxbr(prodaje.maxbr), trenutno(prodaje.trenutno), pr(prodaje.pr)
{
  // trenutno=prodaje.trenutno; maxbr=prodaje.maxbr; pr=prodaje.pr;
  prodaje.trenutno=0;
  prodaje.pr=nullptr;
}

//Prodaje &amp;Prodaje::operator =(const Prodaja &amp;prodaje) {
// if(this!=prodaje) {
//   trenutno=prodaje.trenutno; maxbr=prodaje.maxbr; pr=prodaje.pr; // ????
//  }
// return *this; }



int main ()
{
  Kupac Ajdin("Ajd2i Zorlak", {12,2,2000});
  Ajdin.Ispisi();
  std::cout&lt;&lt;std::endl;
  Ajdin.Postavi("ZOka", {2,3,3000});
  Ajdin.Ispisi();
  std::cout&lt;&lt;std::endl;
  Stan stancic("Hamdije C 14", 4, 4, 1, 39.22);
// stancic.Ispisi();
  std::cout&lt;&lt;std::endl;
  Prodaja pr("Kenan K", 30000, {2,3,1999}, Ajdin, stancic); //pr.Ispisi();
// Prodaja pr("Kenan K", 3000, 22, 10, 1999, "Kupac", {22, 3, 1977}, "Adresa stana je ovo", 4, 3, 1, 55);
// pr.Ispisi();
// pr.IspisiDatuma(); std::cout&lt;&lt;"      ";
// pr.PomjeriDanUnaprijed(); // pr.IspisiDatuma();
// std::cout&lt;&lt;pr.DajImeAgenta()&lt;&lt;"   "&lt;&lt;pr.DajImeKupca();
//pr.DajDatumProdaje().Ispisi();
  //bool a;
//	Prodaja pr2("Aaab", 200220, {2, 2, 1999}, Ajdin, stancic);
//	a=SkupljiStan(pr2, pr);
  //std::cout&lt;&lt;a;
  pr.Ispisi();



  return 0;
</font>}</pre>
</body>
</html>
