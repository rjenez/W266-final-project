<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z3/student5420.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z3/student5420.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match126-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 3
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;cctype&gt;
#include &lt;iomanip&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;

class Datum {
    int d, mj, god;
    public:
    Datum (int dan, int mjesec, int godina) { Postavi(dan,mjesec,godina); }
    void Postavi (int dan, int mjesec, int godina);
    int DajDan() const { return d; }
    int DajMjesec() const { return mj; }
    int DajGodinu() const { return god; }
    void PredjiNaSljedeciDan();
    void VratiZaJedanDan();
    void Ispisi() const { std::cout &lt;&lt; d &lt;&lt; "/" &lt;&lt; mj &lt;&lt; "/" &lt;&lt; god; }
    friend class Kupac;
};

void Datum::Postavi (int dan, int mjesec, int godina) {
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if ((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) broj_dana[1]++;
<a name="1"></a><font color="#00FF00"><a href="match126-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_24.gif"/></a>

    if (godina&lt;1 || mjesec&lt;1 || dan&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1])
        throw std::domain_error ("Neispravan datum");
    d=dan; mj=mjesec; god=godina;
}

void Datum::PredjiNaSljedeciDan () {
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if ((god%4==0 &amp;&amp; god&amp;100!=0) || god%400==0) broj_dana[1]++;
    d++;
    if (d&gt;broj_dana[mj-1]) {
        d=1;
        mj++;
    }
    if (mj&gt;12) {
        mj=1;
        god++;
    }
}

void Datum::VratiZaJedanDan() {
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if ((god%4==0 &amp;&amp; god&amp;100!=0) || god%400==0) broj_dana[1]++;
    d--;
    if (d==0 &amp;&amp; mj!=1) {
        mj--;
        d=broj_dana[mj-1];
    }
    if (d==0 &amp;&amp; mj==1) {
        mj=12;
        d=31;
        god--;
    }
}

class Kupac {
    std::string ime_i_prez;
    Datum datum_rodj;
    public:
    Kupac (const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    void Postavi (const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
    std::string DajImePrezime() const { return ime_i_prez; }
    Datum DajDatumRodjenja() const { return datum_rodj; }
    void Ispisi() const { 
        std::cout &lt;&lt; ime_i_prez &lt;&lt; " (";
        datum_rodj.Ispisi();
        std::cout &lt;&lt; ")";
    }
};

Kupac::Kupac (const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja):datum_rodj(datum_rodjenja) {
    for (int i=0; i&lt;ime_i_prezime.length(); i++) {
        if (!((tolower(ime_i_prezime[i])&gt;='a' &amp;&amp; tolower(ime_i_prezime[i])&lt;='z') || (ime_i_prezime[i]&gt;='0' &amp;&amp; ime_i_prezime[i]&lt;='9')
        || ime_i_prezime[i]==' ' || ime_i_prezime[i]=='-' || ime_i_prezime[i]==39)) throw std::domain_error ("Neispravno ime i prezime");
    }
    ime_i_prez=ime_i_prezime;
}

void Kupac::Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja) {
    for (int i=0; i&lt;ime_i_prezime.length(); i++) {
        if (!((tolower(ime_i_prezime[i])&gt;='a' &amp;&amp; tolower(ime_i_prezime[i])&lt;='z') || (ime_i_prezime[i]&gt;='0' &amp;&amp; ime_i_prezime[i]&lt;='9')
        || ime_i_prezime[i]==' ' || ime_i_prezime[i]=='-' || ime_i_prezime[i]==39)) throw std::domain_error ("Neispravno ime i prezime");
    }
    ime_i_prez=ime_i_prezime;
    datum_rodj.d=datum_rodjenja.d;
    datum_rodj.mj=datum_rodjenja.mj;
    datum_rodj.god=datum_rodjenja.god;
}

class Stan {
    std::string adr;
    int kat, br_soba;
    bool namjest;
    double kvdr;
    public:
    Stan (const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
</font>        Postavi(adresa, sprat, broj_soba, namjesten, kvadratura);
    }
    void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
    std::string DajAdresu() const { return adr; }
    int DajSprat() const { return kat; }
<a name="3"></a><font color="#00FFFF"><a href="match126-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_11.gif"/></a>

    int DajBrojSoba() const { return br_soba; }
    bool DajNamjesten() const { return namjest; }
    double DajKvadraturu() const { return kvdr; }
    void Ispisi() const;
};

void Stan::Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if (sprat&lt;0 || broj_soba&lt;0 || kvadratura&lt;0) throw std::domain_error ("Neispravan unos podataka");
    adr=adresa;
    kat=sprat;
    br_soba=broj_soba;
    namjest=namjesten;
    kvdr=kvadratura;
}

void Stan::Ispisi() const {
    std::cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; adr &lt;&lt; " na " &lt;&lt; kat &lt;&lt; ". spratu i ima " &lt;&lt; br_soba;
    if ((br_soba&gt;=5 &amp;&amp; br_soba&lt;=20) || (br_soba&gt;20 &amp;&amp; br_soba%10&gt;=5 &amp;&amp; br_soba%10&lt;=9)) std::cout &lt;&lt; " soba.";
    if ((br_soba&gt;=2 &amp;&amp; br_soba&lt;=4) || (br_soba&gt;20 &amp;&amp; br_soba%10&gt;=2 &amp;&amp; br_soba%10&lt;=4)) std::cout &lt;&lt; " sobe.";
    if (br_soba==1 || (br_soba&gt;20 &amp;&amp; br_soba%10==1)) std::cout &lt;&lt; " sobu.";
    std::cout &lt;&lt; " Kvadratura stana je " &lt;&lt; kvdr &lt;&lt; "(m^2) i stan ";
    if (namjest) std::cout &lt;&lt; "je namjesten.";
    else std::cout &lt;&lt; "nije namjesten.";
}

class Prodaja {
    std::string ime_ag_pr;
    double cijena_st;
    Datum datum_prod;
    Kupac kupac_st;
    Stan kupljeni_st;
    public:
    Prodaja (const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, 
</font><a name="5"></a><font color="#FF0000"><a href="match126-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    const Stan &amp;kupljeni_stan):ime_ag_pr(ime_agenta_prodaje), cijena_st(cijena_stana), datum_prod(datum_prodaje),
    kupac_st(kupac_stana), kupljeni_st(kupljeni_stan) {};
    Prodaja (const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje,
    std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, 
</font><a name="0"></a><font color="#FF0000"><a href="match126-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_28.gif"/></a>

    bool namjesten_stan, double broj_kvadrata):ime_ag_pr(ime_agenta_prodaje), cijena_st(cijena_stana), 
    datum_prod(dan_prodaje, mjesec_prodaje, godina_prodaje), kupac_st(ime_kupca, datum_rodjenja_kupca),
    kupljeni_st(adresa_stana, sprat_stana, broj_soba, namjesten_stan, broj_kvadrata) {};
    void PromijeniKupca (const Kupac &amp;novi_kupac) { kupac_st=novi_kupac; }
    void PromijeniStan (const Stan &amp;novi_stan) { kupljeni_st=novi_stan; }
    void PromijeniDatumKupovine (const Datum &amp;novi_datum) { datum_prod=novi_datum; }
    void PromijeniCijenuProdaje (const double &amp;nova_cijena) { cijena_st=nova_cijena; }
    void PomjeriDanUnaprijed () { datum_prod.PredjiNaSljedeciDan(); }
    void PomjeriDanUnazad () { datum_prod.VratiZaJedanDan(); }
    std::string DajImeAgenta () const { return ime_ag_pr; }
    std::string DajImeKupca () const { return kupac_st.DajImePrezime(); }
    Datum DajDatumProdaje () const { return datum_prod; }
    double DajCijenuStana () const { return cijena_st; }
    friend bool ProdatPrije (const Prodaja &amp;p1, const Prodaja &amp;p2);
    friend bool SkupljiStan (const Prodaja &amp;p1, const Prodaja &amp;p2);
    void Ispisi() const;
};

bool ProdatPrije (const Prodaja &amp;p1, const Prodaja &amp;p2) {
    return p1.datum_prod.DajGodinu()&lt;p2.datum_prod.DajGodinu() || p1.datum_prod.DajGodinu()==p2.datum_prod.DajGodinu() &amp;&amp;
    p1.datum_prod.DajMjesec()&lt;p2.datum_prod.DajMjesec() || p1.datum_prod.DajGodinu()==p2.datum_prod.DajGodinu() &amp;&amp;
    p1.datum_prod.DajMjesec()==p2.datum_prod.DajMjesec() &amp;&amp; p1.datum_prod.DajDan()&lt;p2.datum_prod.DajDan();
}

bool SkupljiStan (const Prodaja &amp;p1, const Prodaja &amp;p2) {
    return p1.cijena_st&gt;p2.cijena_st;
}

void Prodaja::Ispisi() const {
    std::cout &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; "Ime agenta: " &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; ime_ag_pr &lt;&lt;
    std::endl &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; "Ime kupca: " &lt;&lt; std::setw(30) &lt;&lt; std::left;
    kupac_st.Ispisi();
    std::cout &lt;&lt; std::endl &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; "Zakazani datum prodaje:" &lt;&lt; std::setw(30) &lt;&lt; std::left;
    datum_prod.Ispisi();
    std::cout &lt;&lt; std::endl &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; "Cijena stana: "&lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; cijena_st; 
    std::cout &lt;&lt; std::endl &lt;&lt; "Informacije o stanu: " &lt;&lt; std::endl;
    kupljeni_st.Ispisi();
}

class Prodaje {
    int max_broj_prod, broj_prodaja;
    Prodaja** pok;
    public:
    explicit Prodaje (int max_broj_prodaja) {
        if (max_broj_prodaja&lt;=0) throw std::domain_error ("Neispravan unos podataka");
        max_broj_prod=max_broj_prodaja;
        broj_prodaja=0;
        pok=new Prodaja*[max_broj_prodaja];
    }
    Prodaje (std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
    ~Prodaje() {
        for (int i=0; i&lt;broj_prodaja; i++) delete pok[i];
        delete [] pok;
    }
    Prodaje (const Prodaje &amp;prodaje);
    Prodaje (Prodaje &amp;&amp;prodaje);
    Prodaje &amp;operator=(const Prodaje &amp;prodaje);
    Prodaje &amp;operator=(Prodaje &amp;&amp; prodaje);
    void RegistrirajProdaju (const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje,
    const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
    void RegistrirajProdaju (const std::string &amp;ime_agenta_prodaje, int dan_prodaje, int mjesec_prodaje, int godina_prodaje,
    std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba,
</font>    bool namjesten_stan, double broj_kvadrata);
    void RegistrirajProdaju (Prodaja* prodaja);
    int DajBrojProdaja() const {return broj_prodaja; }
    int DajBrojProdajaNaDatum (const Datum &amp;datum) const;
    int DajBrojProdajaOdAgenta (const std::string &amp;ime_agenta) const;
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const;
    void IsprazniKolekciju();
    void ObrisiNajranijuProdaju();
<a name="2"></a><font color="#0000FF"><a href="match126-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_14.gif"/></a>

    void ObrisiProdajeAgenta (const std::string &amp;ime_agenta);
    void ObrisiProdajeNaDatum (const Datum &amp;datum);
    void IspisiProdajeNaDatum (const Datum &amp;datum) const;
    void IspisiSveProdaje() const;
};

Prodaje::Prodaje (std::initializer_list&lt;Prodaja&gt; spisak_prodaja) {
    max_broj_prod=spisak_prodaja.size();
    broj_prodaja=0;
    pok=new Prodaja*[max_broj_prod];
    for (Prodaja p:spisak_prodaja) {
        pok[broj_prodaja]=new Prodaja(p);
        broj_prodaja++;
    }
}

Prodaje::Prodaje (const Prodaje &amp;prodaje) {
    broj_prodaja=prodaje.broj_prodaja;
    max_broj_prod=prodaje.max_broj_prod;
    pok=new Prodaja*[max_broj_prod];
    for (int i=0; i&lt;broj_prodaja; i++) pok[i]=new Prodaja(*prodaje.pok[i]);
}

Prodaje::Prodaje (Prodaje &amp;&amp;prodaje) {
    broj_prodaja=prodaje.broj_prodaja;
    max_broj_prod=prodaje.max_broj_prod;
    pok=prodaje.pok;
    prodaje.pok=nullptr;
    prodaje.broj_prodaja=0;
}

Prodaje &amp;Prodaje::operator= (const Prodaje &amp;prodaje) {
    if (this==&amp;prodaje) return *this;
    for (int i=0; i&lt;broj_prodaja; i++) delete pok[i];
    delete [] pok;
    broj_prodaja=prodaje.broj_prodaja;
    max_broj_prod=prodaje.max_broj_prod;
    pok=new Prodaja*[max_broj_prod];
    for (int i=0; i&lt;broj_prodaja; i++) pok[i]=new Prodaja(*prodaje.pok[i]);
    return *this;
}

Prodaje &amp;Prodaje::operator= (Prodaje &amp;&amp;prodaje) {
    if (this==&amp;prodaje) return *this;
    for (int i=0; i&lt;broj_prodaja; i++) delete pok[i];
    delete [] pok;
    broj_prodaja=prodaje.broj_prodaja;
    max_broj_prod=prodaje.max_broj_prod;
    pok=prodaje.pok;
    prodaje.broj_prodaja=0;
    prodaje.pok=nullptr;
    return *this;
</font>} 


int main ()
{
	return 0;
}</pre>
</body>
</html>
