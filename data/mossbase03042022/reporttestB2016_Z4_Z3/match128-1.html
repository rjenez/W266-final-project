<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z3/student4226.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z4/Z3/student1013.cpp<p></p><pre>
<a name="16"></a><font color="#00FF00"><a href="match128-0.html#16" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

/B 2016/2017, ZadaÄ‡a 4, Zadatak 3
//Napomena: testovi ce biti dostupni dan pred rok!
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;

bool ProvjeriDatum (int dan, int mjesec, int godina) {
    if(godina&lt;0 or mjesec&lt;=0 or mjesec&gt;12 or dan&lt;=0 or dan&gt;31) return false;
</font>    bool prestupna=false;
<a name="18"></a><font color="#00FFFF"><a href="match128-0.html#18" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if(godina%4==0 and !(godina%100==0) or godina%400==0) prestupna=true;
    if(mjesec==2) {
        if(prestupna) if(dan&gt;29) return false;
        else {
            if(dan&gt;28) return false;
        }
    }
    else if(mjesec==4 or mjesec==6 or mjesec==9 or mjesec==11) if(dan&gt;30) return false;
</font>    return true;
}

bool JeLiSlovo (char a) {
    return ((a&gt;='a' and a&lt;='z') or (a&gt;='A' and a&lt;='Z'));
}

bool ProvjeriImePrezime(std::string s) {
    for(int i=0;i&lt;s.length();i++) {
        if(!JeLiSlovo(s[i]) and s[i]!=' ' and s[i]!='-' and (s[i]&lt;'0' or s[i]&gt;'9')) return false;
    }
    return true;
}

class Datum {
<a name="3"></a><font color="#00FFFF"><a href="match128-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

    int d;
    int m;
    int g;
    public:
        Datum(int dan, int mjesec, int godina);
        void Postavi (int dan, int mjesec, int godina);
        int DajDan() const { return d; }
        int DajMjesec() const { return m; }
        int DajGodinu() const { return g; }
        void Ispisi() const;
};

void Datum::Ispisi() const {
    std::cout &lt;&lt; d &lt;&lt; "/"&lt;&lt; m &lt;&lt; "/" &lt;&lt; g;
}

Datum::Datum (int dan, int mjesec, int godina) {
    if(!ProvjeriDatum(dan,mjesec,godina)) throw std::domain_error ("Neispravan datum");
    d=dan;
    m=mjesec;
    g=godina;
}

void Datum::Postavi (int dan, int mjesec, int godina) {
    if(!ProvjeriDatum(dan,mjesec,godina)) throw std::domain_error ("Neispravan datum");
    d=dan;
    m=mjesec;
    g=godina;
}

class Kupac {
</font><a name="2"></a><font color="#0000FF"><a href="match128-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

    std::string ImePrezime;
    Datum datum{0,0,0};
    public:
        Kupac(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
        void Postavi(const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja);
        std::string DajImePrezime() const { return ImePrezime; }
        Datum DajDatumRodjenja() const { return datum; }
        void Ispisi() const;
};

void Kupac::Ispisi() const {
    std::cout &lt;&lt; ImePrezime &lt;&lt; "(";
    datum.Ispisi();
    std::cout &lt;&lt; ")" ;
}

Kupac::Kupac (const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja) {
    if(!ProvjeriImePrezime(ime_i_prezime)) throw std::domain_error ("Neispravno ime i prezime");
    try {
        datum.Postavi(datum_rodjenja.DajDan(),datum_rodjenja.DajMjesec(),datum_rodjenja.DajGodinu());
    }
    catch(...) {
        throw;
    }
    ImePrezime=ime_i_prezime;
}

void Kupac::Postavi (const std::string &amp;ime_i_prezime, const Datum &amp;datum_rodjenja) {
    if(!ProvjeriImePrezime(ime_i_prezime)) throw std::domain_error ("Neispravno ime i prezime");
    try {
        datum.Postavi(datum_rodjenja.DajDan(),datum_rodjenja.DajMjesec(),datum_rodjenja.DajGodinu());
    }
    catch(...) {
        throw;
    }
    ImePrezime=ime_i_prezime;
}

class Stan {
    std::string adr;
</font>    int spr;
    int sobe;
    bool namj;
<a name="19"></a><font color="#FF00FF"><a href="match128-0.html#19" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    double kvad;
    public:
        Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
        void Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura);
</font>        std::string DajAdresu() const { return adr; }
        int DajSprat() const { return spr; }
<a name="11"></a><font color="#00FF00"><a href="match128-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        int DajBrojSoba() const { return sobe; }
        bool DajNamjesten() const { return namj; }
        double DajKvadraturu() const { return kvad; }
        void Ispisi() const;
};

void Stan::Ispisi() const {
    std::cout &lt;&lt; "Stan se nalazi na adresi " &lt;&lt; adr &lt;&lt; "na " &lt;&lt; spr &lt;&lt; ". spratu i ima " &lt;&lt; sobe ;
    if(sobe%10==1) std::cout &lt;&lt; " sobu.";
    else if(sobe%10==2 or sobe%10==3 or sobe%10==4) std::cout &lt;&lt; "sobe." ;
</font><a name="0"></a><font color="#FF0000"><a href="match128-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

    else std::cout &lt;&lt; " soba.";
    std::cout &lt;&lt; std::endl &lt;&lt; "Kvadratura stana je " &lt;&lt; kvad &lt;&lt; " (m^2) i stan ";
    if(namj) std::cout &lt;&lt; "je namjesten.";
    else std::cout &lt;&lt; "nije namjesten.";
}

void Stan::Postavi(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if(sprat&lt;0 or broj_soba&lt;0 or kvadratura&lt;0) throw std::domain_error ("Neispravan unos podataka");
    adr=adresa;
    spr=sprat;
    sobe=broj_soba;
    namj=namjesten;
    kvad=kvadratura;
}

Stan::Stan(const std::string &amp;adresa, int sprat, int broj_soba, bool namjesten, double kvadratura) {
    if(sprat&lt;0 or broj_soba&lt;0 or kvadratura&lt;0) throw std::domain_error ("Neispravan unos podataka");
    adr=adresa;
    spr=sprat;
    sobe=broj_soba;
    namj=namjesten;
    kvad=kvadratura;
}

class Prodaja {
private:
    std::string ImeAgenta;
    double cijena;
    Datum datum{0,0,0};
    Kupac kupac {"",Datum{0,0,0}};
    Stan stan{"",0,0,false,0};
public:
    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan);
</font><a name="6"></a><font color="#00FF00"><a href="match128-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

    Prodaja(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata);
    void PromijeniKupca(const Kupac &amp;novi_kupac) { kupac.Postavi(novi_kupac.DajImePrezime(),novi_kupac.DajDatumRodjenja()); }
    void PromijeniStan(const Stan &amp;novi_stan) { stan.Postavi(novi_stan.DajAdresu(), novi_stan.DajSprat(), novi_stan.DajBrojSoba(), novi_stan.DajNamjesten(),novi_stan.DajKvadraturu()); }
    void PromijeniDatumKupovine(const Datum &amp;novi_datum) { datum.Postavi(novi_datum.DajDan(), novi_datum.DajMjesec(), novi_datum.DajGodinu()); }
    void PromijeniCijenuProdaje(const double &amp;nova_cijena) { cijena=nova_cijena; }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImeAgenta() const { return ImeAgenta; }
    std::string DajImeKupca() const { return kupac.DajImePrezime(); }
</font>    Datum DajDatumProdaje() const { return datum; }
    double DajCijenuStana() const { return cijena; }
    friend bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2);
    friend bool SkupljiStan (const Prodaja &amp;p1, const Prodaja &amp;p2);
    void Ispisi() const;
};

void Prodaja::Ispisi() const {
    std::cout &lt;&lt; "Ime agenta:                " &lt;&lt; ImeAgenta;
    std::cout &lt;&lt; "Ime kupca:                 " ;
    kupac.Ispisi();
    std::cout &lt;&lt; std::endl &lt;&lt; "Zakazani datum prodaje:   ";
    datum.Ispisi();
    std::cout &lt;&lt; std::endl &lt;&lt; "Cijena stana:             " &lt;&lt; cijena;
    std::cout &lt;&lt; std::endl &lt;&lt; "Informacije o stanu:      " &lt;&lt; std::endl;
    stan.Ispisi();
<a name="12"></a><font color="#0000FF"><a href="match128-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    std::cout &lt;&lt; std::endl;
}

bool SkupljiStan(const Prodaja &amp;p1, const Prodaja &amp;p2) {
    return p1.cijena&gt;p2.cijena;
}

bool ProdatPrije(const Prodaja &amp;p1, const Prodaja &amp;p2) {
    if(p1.datum.DajGodinu()&lt;p2.datum.DajGodinu()) return true;
    else if(p1.datum.DajGodinu()&gt;p2.datum.DajGodinu()) return false;
</font>    else {
        if(p1.datum.DajMjesec()&lt;p2.datum.DajMjesec()) return true;
<a name="17"></a><font color="#0000FF"><a href="match128-0.html#17" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        else if(p1.datum.DajMjesec()&gt;p2.datum.DajMjesec()) return false;
        else {
            if(p1.datum.DajDan()&lt;p2.datum.DajDan()) return true;
            else return false;
        }
    }
}

void Prodaja::PomjeriDanUnaprijed() {
</font>    if(datum.DajMjesec()==2) {
<a name="8"></a><font color="#00FFFF"><a href="match128-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        if(datum.DajGodinu()%4==0 and !(datum.DajGodinu()%100==0) or datum.DajGodinu()%400==0) {
            if(datum.DajDan()==29) datum.Postavi(1,3,datum.DajGodinu());
            else datum.Postavi(datum.DajDan()+1,datum.DajMjesec(),datum.DajGodinu());
        }
        else {
            if(datum.DajDan()==28) datum.Postavi(1,3,datum.DajGodinu());
            else datum.Postavi(datum.DajDan()+1,datum.DajMjesec(),datum.DajGodinu());
        }
    }
    else if(datum.DajMjesec()==4 or datum.DajMjesec()==6 or datum.DajMjesec()==9 or datum.DajMjesec()==11) {
</font><a name="4"></a><font color="#FF00FF"><a href="match128-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

        if(datum.DajDan()==30) datum.Postavi(1,datum.DajMjesec()+1,datum.DajGodinu());
        else datum.Postavi(datum.DajDan()+1,datum.DajMjesec(),datum.DajGodinu());
    }
    else {
        if(datum.DajDan()==31) {
            if(datum.DajMjesec()==12) datum.Postavi(1,1,datum.DajGodinu()+1);
            else datum.Postavi(1,datum.DajMjesec()+1,datum.DajGodinu());
        }
        else datum.Postavi(datum.DajDan()+1,datum.DajMjesec(), datum.DajGodinu());
    }
}

void Prodaja::PomjeriDanUnazad() {
    if(datum.DajMjesec()==3) {
        if(datum.DajGodinu()%4==0 and !(datum.DajGodinu()%100==0) or datum.DajGodinu()%400==0) {
</font><a name="9"></a><font color="#FF00FF"><a href="match128-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_3.gif"/></a>

            if(datum.DajDan()==1) datum.Postavi(29,2,datum.DajGodinu());
            else datum.Postavi(datum.DajDan()-1,datum.DajMjesec(),datum.DajGodinu());
        }
        else {
            if(datum.DajDan()==1) datum.Postavi(28,2,datum.DajGodinu());
            else datum.Postavi(datum.DajDan()-1, datum.DajMjesec(),datum.DajGodinu());
        }
    }
    else if(datum.DajMjesec()==4 or datum.DajMjesec()==6 or datum.DajMjesec()==9 or datum.DajMjesec()==11) {
</font><a name="5"></a><font color="#FF0000"><a href="match128-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        if(datum.DajDan()==1) datum.Postavi(31,datum.DajMjesec()-1,datum.DajGodinu());
        else datum.Postavi(datum.DajDan()-1,datum.DajMjesec(),datum.DajGodinu());
    }
    else {
        if(datum.DajDan()==1) {
            if(datum.DajMjesec()==1) datum.Postavi(31,12,datum.DajGodinu()-1);
            else datum.Postavi(31,datum.DajMjesec()-1,datum.DajGodinu());
        }
        else datum.Postavi(datum.DajDan()-1,datum.DajMjesec(),datum.DajGodinu());
    }
}

Prodaja::Prodaja (const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje, std::string &amp;ime_kupca, const Datum datum_rodjenja_kupca, const std::string &amp;adresa_stana, int sprat_stana, int broj_soba, bool namjesten_stan, double broj_kvadrata) {
</font><a name="13"></a><font color="#00FFFF"><a href="match128-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    if(!ProvjeriImePrezime(ime_agenta_prodaje) or cijena_stana&lt;0) throw std::domain_error("Neispravan unos parametara");
    ImeAgenta=ime_agenta_prodaje;
    cijena=cijena_stana;
    try {
        datum.Postavi(dan_prodaje,mjesec_prodaje,godina_prodaje);
        kupac.Postavi(ime_kupca,datum_rodjenja_kupca);
        stan.Postavi(adresa_stana,sprat_stana,broj_soba,namjesten_stan,broj_kvadrata);
    }
    catch(...) {
</font>        throw;
    }
}

Prodaja::Prodaja (const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje, const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan) {
<a name="10"></a><font color="#FF0000"><a href="match128-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    if(!ProvjeriImePrezime(ime_agenta_prodaje) or cijena_stana&lt;0) throw std::domain_error("Neispravan unos parametara");
    ImeAgenta=ime_agenta_prodaje;
    cijena=cijena_stana;
    try {
        datum.Postavi(datum_prodaje.DajDan(),datum_prodaje.DajMjesec(),datum_prodaje.DajGodinu());
        kupac.Postavi(kupac_stana.DajImePrezime(),kupac_stana.DajDatumRodjenja());
        stan.Postavi(kupljeni_stan.DajAdresu(),kupljeni_stan.DajSprat(),kupljeni_stan.DajBrojSoba(),kupljeni_stan.DajNamjesten(),kupljeni_stan.DajKvadraturu());
    }
    catch(...) {
        throw;
    }   
}

class Prodaje {
</font>    Prodaja** p;
    int brojProdaja;
    int kapacitet;
public:
    explicit Prodaje(int max_broj_prodaja);
    Prodaje(std::initializer_list&lt;Prodaja&gt; spisak_prodaja);
<a name="14"></a><font color="#FF00FF"><a href="match128-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    ~Prodaje() { for(int i=0;i&lt;brojProdaja;i++) delete p[i]; delete [] p; }
    Prodaje(const Prodaje &amp;prodaje);
    Prodaje(Prodaje &amp;&amp;prodaje);
    Prodaje &amp;operator=(const Prodaje &amp;prodaje);
    Prodaje &amp;operator=(Prodaje &amp;&amp;Prodaje);
    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, const Datum &amp;datum_prodaje,const Kupac &amp;kupac_stana, const Stan &amp;kupljeni_stan) ;
</font><a name="7"></a><font color="#0000FF"><a href="match128-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    void RegistrirajProdaju(const std::string &amp;ime_agenta_prodaje, double cijena_stana, int dan_prodaje, int mjesec_prodaje, int godina_prodaje,std::string &amp;ime_kupca, const Datum &amp;datum_rodjenja_kupca, const std::string &amp;adresa_stana,int sprat_stana,int broj_soba,bool namjesten_stan,double broj_kvadrata);
    void RegistrirajProdaju(Prodaja *prodaja);
    int DajBrojProdaja() const { return brojProdaja; }
    Prodaja &amp;DajProdaju(int redni_broj);
    int DajBrojProdajaNaDatum(const Datum &amp;datum) const;
    int DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const;
    Prodaja &amp;DajNajranijuProdaju();
    Prodaja DajNajranijuProdaju() const;
    Prodaja &amp;DajNajskupljuProdaju();
    Prodaja DajNajskupljuProdaju() const;
    void IsprazniKolekciju();
    void ObrisiNajranijuProdaju();
    void ObrisiProdajeAgenta(const std::string &amp;ime_agenta);
    void ObrisiProdajeNaDatum(const Datum &amp;datum);
    void IspisiProdajeNaDatum(const Datum &amp;datum) const;
    void IspisiSveProdaje() const;
};

void Prodaje::IsprazniKolekciju() {
</font><a name="1"></a><font color="#00FF00"><a href="match128-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

    for(int i=0;i&lt;brojProdaja;i++) delete p[i];
    delete[] p;
    brojProdaja=0;
    p= new Prodaja*[kapacitet];
}

Prodaja Prodaje::DajNajskupljuProdaju() const {
    if(brojProdaja==0) throw std::domain_error ("Nema registriranih prodaja");
    return **std::max_element(p,p+brojProdaja,[](Prodaja *p1,Prodaja *p2) { return SkupljiStan(*p1,*p2);});
}

Prodaja &amp;Prodaje::DajNajskupljuProdaju() {
    if(brojProdaja==0) throw std::domain_error ("Nema registriranih prodaja");
    return **std::max_element(p,p+brojProdaja,[](Prodaja *p1,Prodaja *p2) { return SkupljiStan(*p1,*p2);});
}
Prodaja Prodaje::DajNajranijuProdaju() const {
    if(brojProdaja==0) throw std::domain_error("Nema registriranih prodaja");
    return **std::min_element(p,p+brojProdaja, [](Prodaja *p1, Prodaja *p2) { return ProdatPrije(*p1,*p2);});
}
Prodaja &amp;Prodaje::DajNajranijuProdaju() {
    if(brojProdaja==0) throw std::domain_error("Nema registriranih prodaja");
    return **std::min_element(p,p+brojProdaja, [](Prodaja *p1, Prodaja *p2) { return ProdatPrije(*p1,*p2);});
}
int Prodaje::DajBrojProdajaNaDatum(const Datum &amp;datum) const {
</font>    return std::count_if(p,p+brojProdaja, [datum](Prodaja* prodaja) { return (prodaja-&gt;DajDatumProdaje().DajDan()==datum.DajDan() and prodaja-&gt;DajDatumProdaje().DajMjesec()==datum.DajMjesec() and prodaja-&gt;DajDatumProdaje().DajGodinu()==datum.DajGodinu()); });
}
int Prodaje::DajBrojProdajaOdAgenta(const std::string &amp;ime_agenta) const {
    return std::count_if(p,p+brojProdaja,[ime_agenta](Prodaja* prodaja) { return ime_agenta==prodaja-&gt;DajImeAgenta(); });
<a name="15"></a><font color="#FF0000"><a href="match128-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

}



int main ()
</font>{
	return 0;
}</pre>
</body>
</html>
