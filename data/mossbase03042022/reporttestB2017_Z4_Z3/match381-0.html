<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student2503.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student2503.cpp<p></p><pre>
<a name="5"></a><font color="#FF0000"><a href="match381-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;tuple&gt;
#include &lt;new&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;

class Datum
{
    int dan,mjesec,godina;
public:
    Datum(int dan, int mjesec, int godina) {
        Postavi(dan,mjesec,godina);
    }
    void Postavi(int dan, int mjesec, int godina) {
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>        if((godina % 4) == 0 &amp;&amp; (godina % 100) != 0 || (godina % 400) == 0) broj_dana[1]++;
        int parametar(mjesec-1);
        if((godina&lt;1) || (mjesec&lt;1) || (mjesec&gt;12) || (dan&lt;1) || (dan&gt;broj_dana[parametar])) throw std::domain_error("Neispravan datum");
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        std::tuple&lt;int,int,int&gt; t {dan,mjesec,godina};
        return t;
    }
    void Ispisi() const {
        std::cout&lt;&lt;std::get&lt;0&gt; (Ocitaj())&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(Ocitaj())&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(Ocitaj());
    }
};

class Vrijeme
{
<a name="8"></a><font color="#00FFFF"><a href="match381-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    int sati, minute;
public:
    Vrijeme(int sati, int minute) {
        Postavi(sati,minute);
    }
    void Postavi(int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
</font>        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const {
        std::pair&lt;int,int&gt; p {sati,minute};
        return p;
    }
    void Ispisi() const {
        if(sati&lt;10) {
            std::cout&lt;&lt;"0"&lt;&lt;Ocitaj().first&lt;&lt;":";
        } else {
            std::cout&lt;&lt;Ocitaj().first&lt;&lt;":";
        }
        if(minute&lt;10) {
            std::cout&lt;&lt;"0"&lt;&lt;Ocitaj().second;
        } else {
            std::cout&lt;&lt;Ocitaj().second;
        }
    }
};


class Pregled
{
    std::string ime;
    Datum datum;
    Vrijeme vrijeme;
public:
    Pregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda) : datum(datum_pregleda) , vrijeme(vrijeme_pregleda) {
        Pregled::ime=ime_pacijenta;
    }
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda) : datum(dan_pregleda,mjesec_pregleda,godina_pregleda), vrijeme(sati_pregleda,minute_pregleda) {
        Pregled::ime=ime_pacijenta;
    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        Pregled::datum=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        Pregled::vrijeme=novo_vrijeme;
    }
    void PomjeriDanUnaprijed() {
        std::tuple&lt;int,int,int&gt; neki_datum (datum.Ocitaj());
        int dan(std::get&lt;0&gt;(neki_datum));
        int mjesec(std::get&lt;1&gt;(neki_datum));
        int godina(std::get&lt;2&gt;(neki_datum));
        dan++;
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if((godina % 4) == 0 &amp;&amp; (godina % 100) != 0 || (godina % 400) == 0) broj_dana[1]++;
        int parametar(mjesec-1);
        if(dan&gt;broj_dana[parametar]) {
            dan=1;
            mjesec++;
        }
<a name="9"></a><font color="#FF00FF"><a href="match381-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        if(mjesec&gt;12) {
            mjesec=1;
            godina++;
        }
        datum.Postavi(dan,mjesec,godina);
    }
    void PomjeriDanUnazad() {
        std::tuple&lt;int,int,int&gt; neki_datum (datum.Ocitaj());
        int dan(std::get&lt;0&gt;(neki_datum));
</font>        int mjesec(std::get&lt;1&gt;(neki_datum));
        int godina(std::get&lt;2&gt;(neki_datum));
        dan--;
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if((godina % 4) == 0 &amp;&amp; (godina % 100) != 0 || (godina % 400) == 0) broj_dana[1]++;
        int parametar(mjesec-1);
        if(dan==0) mjesec--;
        if(mjesec!=0) {
            parametar=mjesec-1;
            dan=broj_dana[parametar];
        } else if(mjesec==0) {
            mjesec=12;
            godina--;
            dan=31;
        };
<a name="10"></a><font color="#FF0000"><a href="match381-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        datum.Postavi(dan,mjesec,godina);
    }
    std::string DajImePacijenta() const {
        return ime;
    }
    Datum DajDatumPregleda() const {
        return datum;
    }
    Vrijeme DajVrijemePregleda() const {
        return vrijeme;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
</font>        if(std::get&lt;2&gt;(p1.datum.Ocitaj())&lt;std::get&lt;2&gt;(p2.datum.Ocitaj())) return true;
        else if(std::get&lt;2&gt;(p1.datum.Ocitaj())&gt;std::get&lt;2&gt;(p2.datum.Ocitaj())) return false;
<a name="2"></a><font color="#0000FF"><a href="match381-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        else if(std::get&lt;2&gt;(p1.datum.Ocitaj())==std::get&lt;2&gt;(p2.datum.Ocitaj())) {
            if(std::get&lt;1&gt;(p1.datum.Ocitaj())&lt;std::get&lt;1&gt;(p2.datum.Ocitaj())) return true;
</font>            else if(std::get&lt;1&gt;(p1.datum.Ocitaj())&gt;std::get&lt;1&gt;(p2.datum.Ocitaj())) return false;
<a name="3"></a><font color="#00FFFF"><a href="match381-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            else if(std::get&lt;1&gt;(p1.datum.Ocitaj())==std::get&lt;1&gt;(p2.datum.Ocitaj())) {
                if(std::get&lt;0&gt;(p1.datum.Ocitaj())&lt;std::get&lt;0&gt;(p2.datum.Ocitaj())) return true;
</font>                else if(std::get&lt;0&gt;(p1.datum.Ocitaj())&gt;std::get&lt;0&gt;(p2.datum.Ocitaj())) return false;
<a name="4"></a><font color="#FF00FF"><a href="match381-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                else if(std::get&lt;0&gt;(p1.datum.Ocitaj())==std::get&lt;0&gt;(p2.datum.Ocitaj())) {
                    if(p1.vrijeme.Ocitaj().first&lt;p2.vrijeme.Ocitaj().first) return true;
</font><a name="1"></a><font color="#00FF00"><a href="match381-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                    else if(p1.vrijeme.Ocitaj().first&gt;p2.vrijeme.Ocitaj().first) return false;
                    else if(p1.vrijeme.Ocitaj().first==p2.vrijeme.Ocitaj().first) {
                        if(p1.vrijeme.Ocitaj().second&lt;p2.vrijeme.Ocitaj().second) return true;
</font>                        return false;
                    }
                }
            }
        }

    }
    void Ispisi() const {
        std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime;
<a name="11"></a><font color="#00FF00"><a href="match381-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        datum.Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme.Ispisi();
        std::cout&lt;&lt;std::endl;
    }
};


class Pregledi
{
    int max;
    int broj_pregleda;
    Pregled **v;
</font>public:
    explicit Pregledi(int max_broj_pregleda) : broj_pregleda(0), max(max_broj_pregleda),
        v(new Pregled*[max_broj_pregleda] {}) {
    }
<a name="6"></a><font color="#00FF00"><a href="match381-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda): broj_pregleda(spisak_pregleda.size()),max(spisak_pregleda.size()), v(new Pregled*[spisak_pregleda.size()] {}) {
        std::initializer_list&lt;Pregled&gt;::iterator it (spisak_pregleda.begin());
        for(int i(0); i&lt;broj_pregleda; i++) {
</font>            Pregled nn(*it);
            Pregled *neki_pregled(&amp;nn);
            v[i]=neki_pregled;
            it++;
        }

    }
    ~Pregledi() {
        if(v!=nullptr) {
            for(int i(0); i&lt;max; i++) delete v[i];
            delete v;
        }
    }
    Pregledi(const Pregledi &amp;pregledi)
        : broj_pregleda(pregledi.broj_pregleda),max(pregledi.max),
        v(new Pregled*[pregledi.max] {}) {
        for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
            v[i]=pregledi.v[i];
        }
    }
    Pregledi(Pregledi &amp;&amp;pregledi) : broj_pregleda(pregledi.broj_pregleda), v(new Pregled*[pregledi.max] {}),max(pregledi.max) {
        for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
            v[i]=pregledi.v[i];
        }
    }
    Pregledi &amp;operator =(const Pregledi &amp;pregledi) {
        Pregled **novi_prostor(new Pregled*[pregledi.max] {});
        for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
            novi_prostor[i]=pregledi.v[i];
        }
        if(v!=nullptr) {
            for(int i(0); i&lt;broj_pregleda; i++) delete v[i];
            delete v;
        }
        max=pregledi.max;
        broj_pregleda = pregledi.broj_pregleda;
        v=novi_prostor;
        return *this;
    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi) {
        if(&amp;pregledi!=this) {
            if(v!=nullptr) {
                for(int i(0); i&lt;max; i++) delete v[i];
                delete v;
            }
            for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
                v[i]=pregledi.v[i];
                broj_pregleda=pregledi.broj_pregleda;
                for(int i(0); i&lt;pregledi.max; i++) delete pregledi.v[i];
                delete pregledi.v;
            }
        }
        return *this;
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        if(broj_pregleda&lt;max) {
            Pregled *p (new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
            v[broj_pregleda++]=p;
        } else throw std::range_error("Dostignut maksimalni broj pregleda");
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
        if(broj_pregleda&lt;max) {
            Pregled *p (new Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
            v[broj_pregleda++]=p;
        } else throw std::range_error("Dostignut maksimalni broj pregleda");
    }
    void RegistrirajPregled(Pregled *pregled) {
        if(broj_pregleda&lt;max) {
            v[broj_pregleda++]=pregled;
        } else throw std::range_error("Dostignut maksimalni broj pregleda");
    }
    int DajBrojPregleda() const {
        return broj_pregleda;
    }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const {

        int brojac(std::count_if(v,v+broj_pregleda,[&amp;datum] (Pregled *p) {
            return(std::get&lt;0&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt; (datum.Ocitaj()) &amp;&amp;
                   std::get&lt;1&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;1&gt; (datum.Ocitaj()) &amp;&amp;
                   std::get&lt;2&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;2&gt; (datum.Ocitaj()));
        }));
        if(brojac!=0) return brojac;
        else throw std::domain_error("Nema registriranih pregleda");
    }
    Pregled &amp;DajNajranijiPregled() {
        int b(**(std::min_element(v,v+broj_pregleda, [] (Pregled *p1, Pregled *p2) {
            return(Pregled::DolaziPrije(*p1,*p2));
        })));
        if(b!=0) return b;
        else throw std::domain_error("Nema registriranih pregleda");
    }
    Pregled DajNajranijiPregled() const {
        int b(**(std::min_element(v,v+broj_pregleda, [] (Pregled *p1, Pregled *p2) {
            return(Pregled::DolaziPrije(*p1,*p2));
        })));
        if(b!=0) return b;
        else throw std::domain_error("Nema registriranih pregleda");

    }
    void IsprazniKolekciju() {
        for(int i(0); i&lt;max; i++) delete v[i];
        delete v;
        v=new Pregled*[max] {};
        broj_pregleda=0;
    }
    void ObrisiNajranijiPregled() {
        if(broj_pregleda!=0)  {
            Pregled **novi(v);
            std::sort(novi,novi+broj_pregleda, [] ( Pregled *p1,Pregled *p2) {
                return(Pregled::DolaziPrije(*p1,*p2));
            });
            for(int i(0); i&lt;broj_pregleda; i++) delete v[i];
            delete v;
            v=new Pregled*[max] {};
            int j(0);
            for(int i(1); i&lt;broj_pregleda-1; i++) {
                v[j]=novi[i];
                j++;
            }
            for(int i(0); i&lt;max; i++) delete novi[i];
            delete novi;
            broj_pregleda--;
        }

        else throw std::range_error("Prazna kolekcija");
    }
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
        int i(0);
        std::vector&lt;int&gt; b (0);
        Pregled **novi(v);
        std::for_each(novi,novi+broj_pregleda, [ime_pacijenta,&amp;i,&amp;b] (Pregled *p) {
            if(p-&gt;DajImePacijenta()==ime_pacijenta)  b.push_back(i);
            i++;
        } );
        for(int i(0); i&lt;max; i++) delete v[i];
        delete v;
        v=new Pregled*[max] {};
        int j(0);
        bool T(false);
        for(int i(1); i&lt;broj_pregleda; i++) {
            T=false;
            for(int k(0); k&lt;b.size(); k++) {
                if(b[k]==i) T=true;
            }
            if(T) continue;
            v[j]=novi[i];
            j++;
        }
        for(int i(0); i&lt;broj_pregleda; i++) delete novi[i];
        delete novi;
        broj_pregleda-=b.size();
    }
    void IspisiPregledeNaDatum(const Datum &amp;datum) const {
        Pregled **novi(v);
        std::sort(novi,novi+broj_pregleda, [] ( Pregled *p1,Pregled *p2) {
            return(Pregled::DolaziPrije(*p1,*p2));
        });
        std::for_each(novi,novi+broj_pregleda, [datum] (Pregled *p) {
            if(std::get&lt;0&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt; (datum.Ocitaj()) &amp;&amp;
                    std::get&lt;1&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;1&gt; (datum.Ocitaj()) &amp;&amp;
                    std::get&lt;2&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;2&gt; (datum.Ocitaj()))
                p-&gt;Ispisi();
        });
    }
    void IspisiSvePreglede() const {
        Pregled **novi(v);
        std::sort(novi,novi+broj_pregleda, [] ( Pregled *p1,Pregled *p2) {
            return(Pregled::DolaziPrije(*p1,*p2));
        });
        std::for_each(novi,novi+broj_pregleda, [] (Pregled *p) {
            p-&gt;Ispisi();
        });
    }
};


int main ()
{
    int m_br;
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    std::cin&gt;&gt;m_br;
    std::cin.clear();
    std::cin.ignore(1000,'\n');
    Pregledi pacijenti(m_br);
    while(true) {
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::string ime;
        std::getline(std::cin,ime);
        if(ime=="kraj") {
            std::cin.ignore(1000,'\n');
            std::cin.clear();
            break;
        }
        int dan,mjesec,godina,sati,minute;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        std::cin&gt;&gt;dan;
        std::cin&gt;&gt;mjesec;
        std::cin&gt;&gt;godina;
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        std::cin&gt;&gt;sati;
        std::cin&gt;&gt;minute;
        pacijenti.RegistrirajPregled(ime,dan,mjesec,godina,sati,minute);
        std::cin.clear();
        std::cin.ignore(1000,'\n');
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
    pacijenti.IspisiSvePreglede();
    std::cout&lt;&lt;std::endl;
    while(true) {
        std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl;
        std::cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl;
        std::cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl;
        std::cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl;
        std::cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl;
        std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl;
        std::cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl;
        std::cout&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
        int opcija;
<a name="13"></a><font color="#00FFFF"><a href="match381-1.html#13" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

        std::cin&gt;&gt;opcija;
        if(opcija==1) {
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int d,m,g;
            std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
</font>            Datum const dat(d,m,g);
<a name="0"></a><font color="#FF0000"><a href="match381-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;pacijenti.DajBrojPregledaNaDatum(dat)&lt;&lt;std::endl;
        } else if(opcija==2) {
            std::cout&lt;&lt;"Najraniji pregled je :"&lt;&lt;std::endl;
            pacijenti.DajNajranijiPregled().Ispisi();
        } else if(opcija==3) {
</font>            int brojac(pacijenti.DajBrojPregleda());
            std::string n;
            std::cin.ignore(1000,'\n');
            std::cin.clear();
            std::getline(std::cin,n);
            pacijenti.ObrisiPregledePacijenta(n);
            brojac-=pacijenti.DajBrojPregleda();
            std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;brojac&lt;&lt;" pacijenata";
        } else if(opcija==4) {
            if(pacijenti.DajBrojPregleda()&gt;0) {
<a name="7"></a><font color="#0000FF"><a href="match381-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                pacijenti.ObrisiNajranijiPregled();
                std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
            }
        } else if(opcija==5) {
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int dan,mjesec,godina;
            std::cin&gt;&gt;dan;
</font>            std::cin&gt;&gt;mjesec;
            std::cin&gt;&gt;godina;
            Datum dat(dan,mjesec,godina);
<a name="12"></a><font color="#0000FF"><a href="match381-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" su:"&lt;&lt;std::endl;
            pacijenti.IspisiPregledeNaDatum(dat);
        } else if(opcija==6) {
            pacijenti.IspisiSvePreglede();
</font>        } else if(opcija==7) break;
        std::cout&lt;&lt;std::endl;
        std::cin.clear();
        std::cin.ignore(1000,'\n');
    }
    return 0;
}
</pre>
</body>
</html>
