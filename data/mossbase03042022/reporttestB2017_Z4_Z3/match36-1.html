<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student5961.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student7795.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;ctime&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;set&gt;
#include &lt;ctime&gt;

/*      Date class       */
<a name="1"></a><font color="#00FF00"><a href="match36-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_12.gif"/></a>

class Datum {
private:
	std::tuple&lt;int, int, int&gt; datum;
	bool static isLeap(const int&amp; g) { return ((g % 4 == 0) &amp;&amp; (g % 100 != 0)) || (g % 400 == 0); }
	int static const daysInMonth(const int&amp; m, const int &amp;g) {
		const int broj_dana[12]{ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
		return broj_dana[m - 1] + (isLeap(g) &amp;&amp; m == 2 ? 1 : 0);
	}
	void static validDate(const int&amp; d, const int&amp; m, const int&amp; g) {
		if (g &lt; 1 || d &lt; 1 || m &lt; 1 || m &gt; 12 || d &gt; daysInMonth(m, g)) throw std::domain_error("Neispravan datum");
	}
public:
	Datum(int dan, int mjesec, int godina) { Postavi(dan, mjesec, godina); }
	void Postavi(int dan, int mjesec, int godina) { validDate(dan, mjesec, godina), Datum::datum = std::make_tuple(dan, mjesec, godina); };
	std::tuple&lt;int, int, int&gt; Ocitaj() const { return this-&gt;datum; };
	void Ispisi() const;
	void incrementDate(bool increase = true);
	static bool dolaziPrijeDatum(const Datum&amp; d1, const Datum&amp; d2);
	static bool istiDatumi(const Datum&amp; d1, const Datum&amp; d2);
};

/*      Time class       */
class Vrijeme {
private:
	std::pair&lt;int, int&gt; vrijeme;
	void static validTime(const int&amp; h, const int&amp; m) {
		if (!(h &gt;= 0 &amp;&amp; h &lt; 24) || !(m &gt;= 0 &amp;&amp; m &lt; 60)) throw std::domain_error("Neispravno vrijeme");
	}
	void static printTime(const int&amp; t) { std::cout &lt;&lt; (t &lt; 10 ? "0" : "") &lt;&lt; t; }
public:
	Vrijeme(int sati, int minute) { Postavi(sati, minute); };
	void Postavi(int sati, int minute) { validTime(sati, minute), Vrijeme::vrijeme = std::make_pair(sati, minute); }
	std::pair&lt;int, int&gt; Ocitaj() const { return this-&gt;vrijeme; };
	void Ispisi() const;
	static bool dolaziPrijeVrijeme(const Vrijeme&amp; t1, const Vrijeme&amp; t2);
};

/*      Pregled class       */
class Pregled {
private:
	std::string ime_pacijenta;
	Datum datum_pregleda;
	Vrijeme vrijeme_pregleda;
public:
	/// ctors
	Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
</font><a name="2"></a><font color="#0000FF"><a href="match36-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

	Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
		int godina_pregleda, int sati_pregleda, int minute_pregleda);
	// mutators
	void PromijeniPacijenta(const std::string &amp;ime_pacijenta) { Pregled::ime_pacijenta = ime_pacijenta; }
	void PromijeniDatum(const Datum &amp;novi_datum) { Pregled::datum_pregleda = novi_datum; }
	void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) { Pregled::vrijeme_pregleda = novo_vrijeme; }
	void PomjeriDanUnaprijed() { this-&gt;datum_pregleda.incrementDate(true); }
	void PomjeriDanUnazad() { this-&gt;datum_pregleda.incrementDate(false); }
	/// inspectors
	std::string DajImePacijenta() const { return this-&gt;ime_pacijenta; };
	Datum DajDatumPregleda() const { return this-&gt;datum_pregleda; };
	Vrijeme DajVrijemePregleda() const { return this-&gt;vrijeme_pregleda; };
	void Ispisi() const;
	/// additional funuctions
	static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
	static bool DolaziPrijePointer(const Pregled *p1, const Pregled *p2);
};

/*      Pregledi class       */
class Pregledi {
private:
	int size;
	int broj_evidentiranih;
	Pregled** pregledi;
	void checkSize() { if (broj_evidentiranih &gt;= size) throw std::range_error("Dostignut maksimalni broj pregleda"); }
	void checkIfEmpty() { if (broj_evidentiranih == 0) throw std::range_error("Prazna kolekcija"); }
	void checkRegisteredPregled() const { if (broj_evidentiranih == 0) throw std::domain_error("Nema registriranih pregleda"); }
	Pregled* oldestDocument() const {
		return *std::min_element(pregledi, pregledi + broj_evidentiranih, Pregled::DolaziPrijePointer);
	}
	void deleteMember(const int&amp; index) {
		if (size &gt; index &amp;&amp; index &gt;= 0) delete pregledi[index], pregledi[index] = nullptr;
	}
	void rearrangeArray() {
		int _pos(0);
		for (int i(0); i &lt; size; ++i) 
			if (pregledi[i] != nullptr) 
				pregledi[_pos++] = pregledi[i];
		
		while (_pos &lt; size)
			pregledi[_pos++] = nullptr;
	}
	void ObrisiPodatke();
public:
	/// ctors and destructors
	explicit Pregledi(int max_broj_pregleda);
	Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
	~Pregledi();
	Pregledi(const Pregledi &amp;pregledi);
	Pregledi(Pregledi &amp;&amp;pregledi);
</font>	Pregledi &amp;operator =(const Pregledi &amp;pregledi);
	Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);

	void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
<a name="0"></a><font color="#FF0000"><a href="match36-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_77.gif"/></a>

	void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
		int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
	void RegistrirajPregled(Pregled* pregled);
	/// mutators
	void IsprazniKolekciju();
	void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
	void ObrisiNajranijiPregled();
	/// inspectors
	int DajBrojPregleda() const;
	int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
	Pregled &amp;DajNajranijiPregled();
	Pregled DajNajranijiPregled() const;
	void IspisiPregledeNaDatum(const Datum &amp;datum) const;
	void IspisiSvePreglede() const;
};

///////////////////////////////////////// PREGLEDI IMPLEMENTATION
/// implementation of Pregledi function (CTORS AND DESTRUCTORS)
Pregledi::Pregledi(int max_broj_pregleda) :
	size(max_broj_pregleda), broj_evidentiranih(0), pregledi(new Pregled*[max_broj_pregleda] {})
{ }
Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) :
	size(spisak_pregleda.size()), broj_evidentiranih(0)
{
	try {
		pregledi = new Pregled*[spisak_pregleda.size()] {};
		for(auto it(spisak_pregleda.begin()); it != spisak_pregleda.end(); ++broj_evidentiranih, ++it) 
			pregledi[broj_evidentiranih] = new Pregled(*it); 
	} catch (...) {
		for(int i(0); i &lt; broj_evidentiranih; ++i) delete pregledi[i], pregledi[i] = nullptr;
		delete [] pregledi; pregledi = nullptr;
		throw;
	}
}
Pregledi::~Pregledi() { this-&gt;ObrisiPodatke(); }
Pregledi::Pregledi(const Pregledi &amp;pregledi) : size(pregledi.size), broj_evidentiranih(pregledi.broj_evidentiranih),
pregledi(new Pregled*[pregledi.broj_evidentiranih]{}) {
	try {
		for (int i(0); i &lt; broj_evidentiranih; ++i)
			Pregledi::pregledi[i] = new Pregled(*pregledi.pregledi[i]);
	}
	catch (...) {
		this-&gt;ObrisiPodatke();
		throw;
	}
}
Pregledi::Pregledi(Pregledi &amp;&amp;pregledi) : size(pregledi.size), broj_evidentiranih(pregledi.broj_evidentiranih),
pregledi(pregledi.pregledi) {
	pregledi.pregledi = nullptr; pregledi.broj_evidentiranih = 0;
}

Pregledi&amp; Pregledi::operator =(const Pregledi &amp;pregledi) {
	/// check max size
	Pregled** _newPregledi (nullptr);
	if (Pregledi::size != pregledi.size || Pregledi::broj_evidentiranih == 0) {
		try { _newPregledi = new Pregled*[pregledi.broj_evidentiranih]{}; }
		catch (...) { delete [] _newPregledi; _newPregledi = nullptr; throw; }
	}
	/// start copying
	if (broj_evidentiranih &lt; pregledi.broj_evidentiranih) {
		try {
			for (int i(broj_evidentiranih); i &lt; pregledi.broj_evidentiranih; ++i)
				_newPregledi[i] = new Pregled(*pregledi.pregledi[i]);
		}
		catch (...) {
			for (int i(broj_evidentiranih); i &lt; pregledi.broj_evidentiranih; ++i) 
				delete _newPregledi[i], _newPregledi[i] = nullptr;
			throw;
		}
	}
	else {
		for (int i(pregledi.broj_evidentiranih); i &lt; broj_evidentiranih; ++i) this-&gt;deleteMember(i);
	}
	/// copy other data
	int _upperBound(std::min(broj_evidentiranih, pregledi.broj_evidentiranih));
	for (int i(0); i &lt; _upperBound; ++i) 
			*_newPregledi[i] = *pregledi.pregledi[i];
			
	this-&gt;ObrisiPodatke();
	std::swap(Pregledi::pregledi, _newPregledi); 
	Pregledi::broj_evidentiranih = pregledi.broj_evidentiranih;
	Pregledi::size = pregledi.size;
	return *this;
}
Pregledi&amp; Pregledi::operator =(Pregledi &amp;&amp;pregledi) {
	this-&gt;ObrisiPodatke(); 
	std::swap(Pregledi::size, pregledi.size);
	std::swap(Pregledi::broj_evidentiranih, pregledi.broj_evidentiranih);
	std::swap(Pregledi::pregledi, pregledi.pregledi);
	pregledi.broj_evidentiranih = 0; pregledi.size = 0;
	return *this;
}
/// implementation of additional functions for registering
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
	this-&gt;checkSize(); /// check size
	try {
		pregledi[broj_evidentiranih] = new Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
		++broj_evidentiranih;
	}
	catch (...) { this-&gt;deleteMember(broj_evidentiranih); }
}
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
	int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
	this-&gt;checkSize(); /// check size
	try {
		pregledi[broj_evidentiranih] = new Pregled(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
		++broj_evidentiranih;
	}
	catch (...) { this-&gt;deleteMember(broj_evidentiranih); }
}
void Pregledi::RegistrirajPregled(Pregled* pregled) {
	this-&gt;checkSize(); /// check size
	pregledi[broj_evidentiranih++] = pregled;
}
/// REMOVE DATA FROM Pregledi
void Pregledi::ObrisiPodatke() {
	for (int i(0); i &lt; broj_evidentiranih; ++i) this-&gt;deleteMember(i);
	delete[] pregledi; pregledi = nullptr;
}
void Pregledi::IsprazniKolekciju() {
	for (int i(0); i &lt; broj_evidentiranih; ++i) this-&gt;deleteMember(i);
	Pregledi::broj_evidentiranih = 0;
}
void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
	int _less(0);
	for (int i(0); i &lt; broj_evidentiranih; ++i) {
		if (pregledi[i]-&gt;DajImePacijenta() == ime_pacijenta) {
			this-&gt;deleteMember(i);
			++_less;
		}
	}
	broj_evidentiranih -= _less;
	this-&gt;rearrangeArray();
}
void Pregledi::ObrisiNajranijiPregled() {
	this-&gt;checkIfEmpty();
	int _min(0);
	for(int i(0); i &lt; broj_evidentiranih; ++i)
		if(Pregled::DolaziPrijePointer(pregledi[i], pregledi[_min]))
			_min = i;
	this-&gt;deleteMember(_min);
	broj_evidentiranih--;
	this-&gt;rearrangeArray();
}
/// INSPECTOR FUNCTIONS PREGLEDI
int Pregledi::DajBrojPregleda() const {
	return broj_evidentiranih;
}
int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const {
	return std::count_if(pregledi, pregledi + broj_evidentiranih, [&amp;datum](const Pregled* p1) {
		return Datum::istiDatumi(p1-&gt;DajDatumPregleda(), datum);
	});
}
Pregled&amp; Pregledi::DajNajranijiPregled() {
	this-&gt;checkRegisteredPregled();
	return *this-&gt;oldestDocument();
}
Pregled Pregledi::DajNajranijiPregled() const {
	this-&gt;checkRegisteredPregled();
	return *this-&gt;oldestDocument();
}

/// OUTPUT FUNCTIONS PREGLEDI
void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const {
	auto compFunction = [this](const int&amp; a, const int&amp; b) -&gt; bool {
		return (a &lt; this-&gt;broj_evidentiranih &amp;&amp; a &gt;= 0) &amp;&amp; (b &lt; this-&gt;broj_evidentiranih &amp;&amp; b &gt;= 0) &amp;&amp;
			Pregled::DolaziPrijePointer(this-&gt;pregledi[a], this-&gt;pregledi[b]);
	};
	std::multiset&lt;int, decltype(compFunction)&gt; sorted (compFunction); /// ints in set to save space
	for(int i(0); i &lt; broj_evidentiranih; ++i) 
		if(this-&gt;pregledi[i] != nullptr &amp;&amp; Datum::istiDatumi(this-&gt;pregledi[i]-&gt;DajDatumPregleda(), datum)) 
			sorted.insert(i);
			
	for(auto it(sorted.begin()); it != sorted.end(); ++it)
		this-&gt;pregledi[*it]-&gt;Ispisi();
}
void Pregledi::IspisiSvePreglede() const {
	auto compFunction = [this](const int&amp; a, const int&amp; b) -&gt; bool {
		return (a &lt; this-&gt;broj_evidentiranih &amp;&amp; a &gt;= 0) &amp;&amp; (b &lt; this-&gt;broj_evidentiranih &amp;&amp; b &gt;= 0) &amp;&amp;
			Pregled::DolaziPrijePointer(this-&gt;pregledi[a], this-&gt;pregledi[b]);
	};
	std::multiset&lt;int, decltype(compFunction)&gt; sorted (compFunction);
	for(int i(0); i &lt; broj_evidentiranih; ++i) sorted.insert(i);
	for(auto it(sorted.begin()); it != sorted.end(); ++it)
		this-&gt;pregledi[*it]-&gt;Ispisi();
}
///////////////////////////////////////// DATE IMPLEMENTATION
/// implementation of Date function
bool Datum::dolaziPrijeDatum(const Datum&amp; d1, const Datum&amp; d2) {
	return (std::get&lt;2&gt;(d1.Ocitaj()) &lt; std::get&lt;2&gt;(d2.Ocitaj()) ||
		(std::get&lt;2&gt;(d1.Ocitaj()) == std::get&lt;2&gt;(d2.Ocitaj()) &amp;&amp; std::get&lt;1&gt;(d1.Ocitaj()) &lt; std::get&lt;1&gt;(d2.Ocitaj())) ||
		(std::get&lt;2&gt;(d1.Ocitaj()) == std::get&lt;2&gt;(d2.Ocitaj()) &amp;&amp; std::get&lt;1&gt;(d1.Ocitaj()) == std::get&lt;1&gt;(d2.Ocitaj()) &amp;&amp; std::get&lt;0&gt;(d1.Ocitaj()) &lt; std::get&lt;0&gt;(d2.Ocitaj())));
}
bool Datum::istiDatumi(const Datum&amp; d1, const Datum&amp; d2) {
	return 	std::get&lt;2&gt;(d1.Ocitaj()) == std::get&lt;2&gt;(d2.Ocitaj()) &amp;&amp; 
			std::get&lt;1&gt;(d1.Ocitaj()) == std::get&lt;1&gt;(d2.Ocitaj()) &amp;&amp; std::get&lt;0&gt;(d1.Ocitaj()) == std::get&lt;0&gt;(d2.Ocitaj());
}

void Datum::incrementDate(bool increase) {
	if (increase) {
		if (1 + std::get&lt;0&gt;(datum) &gt; daysInMonth(std::get&lt;1&gt;(datum), std::get&lt;2&gt;(datum))) {
			std::get&lt;0&gt;(datum) = 1;
			if (std::get&lt;1&gt;(datum) == 12) {
				std::get&lt;1&gt;(datum) = 0, std::get&lt;2&gt;(datum)++;
			} std::get&lt;1&gt;(datum)++;
		} else std::get&lt;0&gt;(datum)++;
	}
	else {
		if ((1 == std::get&lt;0&gt;(datum))) {
			if (std::get&lt;1&gt;(datum) == 1) {
				std::get&lt;1&gt;(datum) = 12, std::get&lt;2&gt;(datum)--;
			} else std::get&lt;1&gt;(datum)--;
			std::get&lt;0&gt;(datum) = daysInMonth(std::get&lt;1&gt;(datum), std::get&lt;2&gt;(datum));
		}
		else std::get&lt;0&gt;(datum)--;
		try { validDate(std::get&lt;0&gt;(datum), std::get&lt;1&gt;(datum), std::get&lt;2&gt;(datum)); }
		catch (...) { this-&gt;incrementDate(true); /*throw;*/ }
	}
}
void Datum::Ispisi() const {
	std::cout &lt;&lt; std::get&lt;0&gt;(this-&gt;datum) &lt;&lt; "/" &lt;&lt; std::get&lt;1&gt;(this-&gt;datum) &lt;&lt; "/" &lt;&lt; std::get&lt;2&gt;(this-&gt;datum);
}
///////////////////////////////////////// TIME IMPLEMENTATION
/// implementation of Time function
bool Vrijeme::dolaziPrijeVrijeme(const Vrijeme&amp; t1, const Vrijeme&amp; t2) {
	return  (std::get&lt;0&gt;(t1.Ocitaj()) &lt; std::get&lt;0&gt;(t2.Ocitaj()) || (
		(std::get&lt;0&gt;(t1.Ocitaj()) == std::get&lt;0&gt;(t2.Ocitaj())) &amp;&amp;
		(std::get&lt;1&gt;(t1.Ocitaj()) &lt; std::get&lt;1&gt;(t2.Ocitaj()))));
}
void Vrijeme::Ispisi() const {
	printTime(std::get&lt;0&gt;(this-&gt;vrijeme)); std::cout &lt;&lt; ":"; printTime(std::get&lt;1&gt;(this-&gt;vrijeme));
}
///////////////////////////////////////// PREGLED IMPLEMENTATION
/// implementation of Pregled function
Pregled::Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) :
	ime_pacijenta(ime_pacijenta), datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda)
{ }
Pregled::Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
	int godina_pregleda, int sati_pregleda, int minute_pregleda) :
	ime_pacijenta(ime_pacijenta),
	datum_pregleda(Datum(dan_pregleda, mjesec_pregleda, godina_pregleda)),
	vrijeme_pregleda(Vrijeme(sati_pregleda, minute_pregleda))
{ }
void Pregled::Ispisi() const {
	std::cout &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; this-&gt;DajImePacijenta().substr(0, 30);
	this-&gt;DajDatumPregleda().Ispisi(); std::cout &lt;&lt; " "; this-&gt;DajVrijemePregleda().Ispisi(); std::cout &lt;&lt; std::endl;
}
bool Pregled::DolaziPrijePointer(const Pregled *p1, const Pregled *p2) {
	return (p1 != nullptr &amp;&amp; p2 != nullptr &amp;&amp; Pregled::DolaziPrije(*p1, *p2));
}
bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
	return Datum::dolaziPrijeDatum(p1.DajDatumPregleda(), p2.DajDatumPregleda()) || 
		(Datum::istiDatumi(p1.DajDatumPregleda(), p2.DajDatumPregleda()) &amp;&amp; 
			Vrijeme::dolaziPrijeVrijeme(p1.DajVrijemePregleda(), p2.DajVrijemePregleda()));
}

/////////////////////////////// IMPLEMENTATION OF MAIN RW LOGIC
/// OPTION FUNCTIONS
void BrojPregledaNaDatum(Pregledi&amp; pregledi, bool numbers = false) {
	static int d, m, g;
	for(;;) {
		std::cout &lt;&lt; "Unesite dan mjesec i godinu : "; std::cin &gt;&gt; d &gt;&gt; m &gt;&gt; g;
		try { 
			Datum dat(d, m, g); 
			if(!numbers) 
				std::cout &lt;&lt; "Broj pregleda na datum " &lt;&lt; d &lt;&lt; ' ' &lt;&lt; m &lt;&lt; ' ' &lt;&lt; g &lt;&lt; " je: " &lt;&lt; pregledi.DajBrojPregledaNaDatum(dat);
			else {
				std::cout &lt;&lt; "Pregledi na datum " &lt;&lt; d &lt;&lt; ' ' &lt;&lt; m &lt;&lt; ' ' &lt;&lt; g &lt;&lt; " su:\n";
				pregledi.IspisiPregledeNaDatum(dat);
			} std::cout &lt;&lt; std::endl;
			break;
		} 
		catch (std::exception&amp; e) { 
			if(!std::cin) { std::cin.clear(); std::cin.ignore(10000, '\n'); }
			std::cout &lt;&lt; e.what() &lt;&lt; std::endl; 
		}
	}
}

void option(Pregledi&amp; pregledi, bool show_text = true) {
	static int choose;
	if(show_text) std::cout &lt;&lt; "\nOdaberite jednu od sljedecih opcija\n\
1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta\n4 - Obrisi najraniji pregled\n\
5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa\n"; 
	std::cin &gt;&gt; choose;
	if(!std::cin || choose &lt; 1 || choose &gt; 7) { 
		if(!std::cin) { std::cin.clear(); std::cin.ignore(10000, '\n'); }
		std::cout &lt;&lt; "Greska: Unos nije validan!"; option(pregledi, false); 
	}
	switch(choose) {
		case 1: { 
			BrojPregledaNaDatum(pregledi); 
			option(pregledi); break; 
		}
		case 2: { 
			try { std::cout &lt;&lt; "Najraniji pregled je: \n"; pregledi.DajNajranijiPregled().Ispisi(); }
			catch(std::domain_error&amp; e) { std::cout &lt;&lt; e.what() &lt;&lt; std::endl; }
			option(pregledi); break; 
		}
		case 3: { 
			std::string ime; 
			int broj_pregleda(pregledi.DajBrojPregleda());
			std::cin.ignore(10000, '\n');
			std::cout &lt;&lt; "Unesite ime pacijenta: "; std::getline(std::cin, ime); 
			pregledi.ObrisiPregledePacijenta(ime); 
			std::cout &lt;&lt; "Uspjesno obrisano "&lt;&lt; broj_pregleda - pregledi.DajBrojPregleda() &lt;&lt; " pregleda\n"; 
			option(pregledi); break; 
		}
		case 4: { 
			try { pregledi.ObrisiNajranijiPregled(); std::cout &lt;&lt; "Najraniji pregled uspjesno obrisan\n"; }
			catch(std::range_error&amp; e) { std::cout &lt;&lt; e.what() &lt;&lt; std::endl; }
			option(pregledi); break; 	
		}
		case 5: {
			BrojPregledaNaDatum(pregledi, true); 
			option(pregledi); break; 
		}
		case 6: {
			pregledi.IspisiSvePreglede();
			option(pregledi); break; 
		}
		default: return;
	}
}

/// create pregledi
Pregledi kreirajPreglede() {
	int max, d, m, g, sati, minuti; 
	std::cout &lt;&lt; "Unesite maksimalan broj pregleda: "; std::cin &gt;&gt; max;
	
	Pregledi pregledi(max);
	std::string ime, check;
	for(int i(0); i &lt; max; ++i) {
		check = ime = "";
		std::cin.ignore(10000, '\n');
		std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: "; std::getline(std::cin, ime);
		std::copy_if(ime.begin(), ime.end(), std::back_inserter(check), [](const char&amp; _c) { return _c != ' '; });
		if(check == "kraj") break;
		for(;;) {
			std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: "; std::cin &gt;&gt; d &gt;&gt; m &gt;&gt; g;
			try { Datum dat(d, m, g); break; } 
			catch (std::domain_error&amp; e) { 
				if(!std::cin) { std::cin.clear(); std::cin.ignore(10000, '\n'); }
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl; 
			}
		}
		for(;;) {
			std::cout &lt;&lt; "Unesite sate i minute pregleda: "; std::cin &gt;&gt; sati &gt;&gt; minuti;
			try { Vrijeme t(sati, minuti); break; } 
			catch (std::domain_error&amp; e) { 
				if(!std::cin) { std::cin.clear(); std::cin.ignore(10000, '\n'); }
				std::cout &lt;&lt; e.what() &lt;&lt; std::endl; 
			}
		}
		pregledi.RegistrirajPregled(ime, {d, m, g}, {sati, minuti});
	}
	std::cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi" &lt;&lt; std::endl;
	pregledi.IspisiSvePreglede();
	
	return pregledi;
}

/// main program logic
int main() {
	try {
		Pregledi pregledi(kreirajPreglede());
		option(pregledi);
	}
	catch (std::exception&amp; e) {
		std::cout &lt;&lt; e.what() &lt;&lt; std::endl;
	}
	return 0;
</font>}</pre>
</body>
</html>
