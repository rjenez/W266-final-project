<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student7123.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student3425.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;initializer_list&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;

<a name="4"></a><font color="#FF00FF"><a href="match65-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

class Datum{
    int dan,mjesec,godina;
    static void TestirajDatum(int d, int m, int g){
        int broj_dana[]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>        if((g%4==0 &amp;&amp; g%100!=0) || g%400==0) broj_dana[1]++;
<a name="2"></a><font color="#0000FF"><a href="match65-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_11.gif"/></a>

        if(g&lt;1 || m&lt;1 || m&gt;12 || d&lt;1 || d&gt;broj_dana[m-1]) throw std::domain_error("Nesipravan datum");
    }
    public:
    Datum(int dan, int mjesec, int godina);
    void Postavi(int dan, int mjesec, int godina);
    std::tuple&lt;int, int, int&gt; Ocitaj() const{ return std::make_tuple(dan,mjesec,godina);}
    void Ispisi() const{ std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;}
};

Datum::Datum(int dan, int mjesec, int godina){
    TestirajDatum(dan,mjesec,godina);
    this-&gt;dan=dan;
    this-&gt;mjesec=mjesec;
    this-&gt;godina=godina;
}

void Datum::Postavi(int dan, int mjesec, int godina){
    TestirajDatum(dan,mjesec,godina);
    this-&gt;dan=dan;
    this-&gt;mjesec=mjesec;
    this-&gt;godina=godina;
}

class Vrijeme{
    int sati,minute;
    static void TestirajVrijeme(int s, int m){
        if(s&lt;0 || s&gt;23 || m&lt;0 || m&gt;59) throw std::domain_error("Neispravno vrijeme");
    }
    void RegulisiVrijeme(){
        while(sati&gt;24) sati-=24;
        while(minute&gt;59) minute-=60;
    }
    public:
    Vrijeme(int sati, int minute){ TestirajVrijeme(sati,minute); this-&gt;sati=sati; this-&gt;minute=minute; RegulisiVrijeme();}
    void Postavi(int sati, int minute){ TestirajVrijeme(sati,minute); this-&gt;sati=sati; this-&gt;minute=minute; RegulisiVrijeme();}
    std::pair&lt;int, int&gt; Ocitaj () const{ return std::make_pair(sati,minute);}
    void Ispisi() const;
};

void Vrijeme::Ispisi() const{
    if(sati&lt;10) std::cout&lt;&lt;"0"&lt;&lt;sati;
    else std::cout&lt;&lt;sati;
    std::cout&lt;&lt;":";
    if(minute&lt;10) std::cout&lt;&lt;"0"&lt;&lt;minute;
    else std::cout&lt;&lt;minute;
    std::cout&lt;&lt;std::endl;
}

class Pregled{
    std::string ime;
    Datum datum;
    Vrijeme vrijeme;
    public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,
</font>    const Vrijeme &amp;vrijeme_pregleda);
<a name="1"></a><font color="#00FF00"><a href="match65-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
    int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta){ ime=ime_pacijenta;}
    void PromijeniDatum(const Datum &amp;novi_datum);
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme);
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const{ return ime;}
    Datum DajDatumPregleda() const{ return datum;}
    Vrijeme DajVrijemePregleda() const{ return vrijeme;}
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi() const;
};

Pregled::Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;dan_pregleda, const Vrijeme &amp;vrijeme_pregleda):datum(std::get&lt;0&gt;(dan_pregleda.Ocitaj()), std::get&lt;1&gt;(dan_pregleda.Ocitaj()), std::get&lt;2&gt;(dan_pregleda.Ocitaj())), 
vrijeme(std::get&lt;0&gt;(vrijeme_pregleda.Ocitaj()), std::get&lt;1&gt;(vrijeme_pregleda.Ocitaj())){
    ime=ime_pacijenta;
}

Pregled::Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda): datum(dan_pregleda,mjesec_pregleda,godina_pregleda), 
vrijeme(sati_pregleda,minute_pregleda){
        ime=ime_pacijenta;
}

void Pregled::PromijeniDatum(const Datum &amp;novi_datum){
    datum.Postavi(std::get&lt;0&gt;(novi_datum.Ocitaj()), std::get&lt;1&gt;(novi_datum.Ocitaj()), std::get&lt;2&gt;(novi_datum.Ocitaj()));
}

void Pregled::PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
    vrijeme.Postavi(std::get&lt;0&gt;(novo_vrijeme.Ocitaj()), std::get&lt;1&gt;(novo_vrijeme.Ocitaj()));
}

void Pregled::PomjeriDanUnaprijed(){
    int dani[]{31,28,31,30,31,30,31,31,30,31,30,31};
    int d(std::get&lt;0&gt;(datum.Ocitaj())), m(std::get&lt;1&gt;(datum.Ocitaj())), g(std::get&lt;2&gt;(datum.Ocitaj()));
    if((g%4==0 &amp;&amp; g%100!=0) || g%400==0) dani[1]++;
    d++;
    if(d &gt; dani[m-1]){
        d-=dani[m-1];
        m++;
        if(m&gt;12){
            g++;
            m-=12;
        }
    }
    datum.Postavi(d,m,g);
    
}

void Pregled::PomjeriDanUnazad(){
    int dani[]{31,28,31,30,31,30,31,31,30,31,30,31};
    int d,m,g;
    std::tie(d,m,g)=datum.Ocitaj();
    if((g%4==0 &amp;&amp; g%100!=0) || g%400==0) dani[1]++;
    d--;
    if(d&lt;=0){
        m--;
        if(m&lt;=0){
            g--;
            m+=12;
            d+=dani[m-1];
        }
    }
    datum.Postavi(d,m,g);
}

bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
    
    int d1,m1,g1,d2,m2,g2,s1,mi1,s2,mi2;
    std::tie(d1,m1,g1)=p1.DajDatumPregleda().Ocitaj();
    std::tie(d2,m2,g2)=p2.DajDatumPregleda().Ocitaj();
    std::tie(s1,mi1)=p1.DajVrijemePregleda().Ocitaj();
    std::tie(s2,mi2)=p2.DajVrijemePregleda().Ocitaj();
    if(g1&lt;g2) return true;
    if(g1==g2){
        if(m1&lt;m2) return true;
        if(m1==m2){
            if(d1&lt;d2) return true;
            if(d1==d2){
                if(s1&lt;s2) return true;
                if(s1==s2){
                    if(mi1&lt;mi2) return true;
                    
                }
            }
        }
    }
    return false;

}

void Pregled::Ispisi() const{
    std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;ime;
    datum.Ispisi();
    int d,m,g;
    std::tie(d,m,g)=datum.Ocitaj();
    std::cout&lt;&lt;" ";
    vrijeme.Ispisi();
}

class Pregledi{
    int kapacitet;
    int registrovanih;
    Pregled **p_n_p;    //POKAZIVAC NA PREGLEDE
    public:
    explicit Pregledi(int max_broj_pregleda):kapacitet(max_broj_pregleda), registrovanih(0), p_n_p(new Pregled*[kapacitet]{}){}
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi();
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
</font>    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
        const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
<a name="0"></a><font color="#FF0000"><a href="match65-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_47.gif"/></a>

    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
        int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
        int minute_pregleda);
    void RegistrirajPregled(Pregled *pregled);
    int DajBrojPregleda() const{if(registrovanih==0) throw std::domain_error("Nema registriranih pregleda"); return registrovanih;}
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda): kapacitet(spisak_pregleda.size()),registrovanih(0), p_n_p(new Pregled*[kapacitet]){
    auto *it(spisak_pregleda.begin());
    for(int i=0;i&lt;kapacitet;i++) p_n_p[i]=nullptr;
    try{
        for(int i=0;i&lt;spisak_pregleda.size();i++){
            p_n_p[i]=new Pregled(it-&gt;DajImePacijenta(), it-&gt;DajDatumPregleda(), it-&gt;DajVrijemePregleda());
            it++;
            registrovanih++;
        }
    }
    catch(...){
        for(int i=0;i&lt;spisak_pregleda.size();i++){ 
            delete p_n_p[i];
            registrovanih--;
        }
        delete[] p_n_p;
    }
}

Pregledi::~Pregledi(){
    for(int i=0;i&lt;registrovanih;i++){ 
        delete p_n_p[i];
    }
    delete[] p_n_p;
}

Pregledi::Pregledi (const Pregledi &amp;pregledi): kapacitet(pregledi.kapacitet), registrovanih(pregledi.registrovanih), p_n_p(new Pregled*[kapacitet]{}){
    for(int i=0;i&lt;kapacitet;i++) p_n_p[i]=nullptr;
    try{
        for(int i=0;i&lt;registrovanih;i++) p_n_p[i]=new Pregled(pregledi.p_n_p[i]-&gt;DajImePacijenta(), pregledi.p_n_p[i]-&gt;DajDatumPregleda(), pregledi.p_n_p[i]-&gt;DajVrijemePregleda());
    }
    catch (std::bad_alloc){
        for(int i=0;i&lt;kapacitet;i++) delete p_n_p[i];
        delete p_n_p;
        throw;
    }
}

Pregledi::Pregledi (Pregledi &amp;&amp;pregledi): kapacitet(pregledi.kapacitet), registrovanih(pregledi.registrovanih), p_n_p(pregledi.p_n_p){
    pregledi.p_n_p=nullptr;
}

Pregledi &amp;Pregledi::operator=(const Pregledi &amp;pregledi){
    Pregled **novi(new Pregled*[pregledi.kapacitet]);
    for(int i=0;i&lt;pregledi.kapacitet;i++) novi[i]=nullptr;
    try{
        for(int i=0;i&lt;pregledi.registrovanih;i++) novi[i]=new Pregled(pregledi.p_n_p[i]-&gt;DajImePacijenta(),pregledi.p_n_p[i]-&gt;DajDatumPregleda(),pregledi.p_n_p[i]-&gt;DajVrijemePregleda());
    }
    catch(std::bad_alloc){
        for(int j=0;j&lt;pregledi.kapacitet;j++) delete novi[j];
        delete novi;
        throw;
    }
    for(int i=0;i&lt;kapacitet;i++) delete p_n_p[i];
    delete[] p_n_p;
    kapacitet=pregledi.kapacitet;
    registrovanih=pregledi.registrovanih;
    p_n_p=novi;
    return *this;
}

Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi){
    for(int i=0;i&lt;kapacitet;i++) delete p_n_p[i];
    delete[] p_n_p;
    kapacitet=pregledi.kapacitet;
    p_n_p=pregledi.p_n_p;
    pregledi.p_n_p=nullptr;
    registrovanih=pregledi.registrovanih;
    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
    if(registrovanih==kapacitet) throw std::range_error("Dostignut maksimalni broj pregleda");
    for(int i=0;i&lt;kapacitet;i++){
        if(p_n_p[i]==nullptr){
            try{
                p_n_p[i]=new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
            }
            catch(...){
                std::cout&lt;&lt;"Problemi sa memorijom";
            }
            registrovanih++;
            break;
        }
    }
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
    int godina_pregleda, int sati_pregleda, int minute_pregleda){
        if(registrovanih==kapacitet) throw std::domain_error("Dostignut maksimalni broj pregleda");
        for(int i=0;i&lt;kapacitet;i++){
            if(p_n_p[i]==nullptr){
                p_n_p[i]=new Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda);
                registrovanih++;
                break;
            }
        }
}

void Pregledi::RegistrirajPregled(Pregled *pregled){
    if(registrovanih==kapacitet) throw std::domain_error("Dostignut maksimalni broj pregleda");
    for(int i=0;i&lt;kapacitet;i++){
        if(p_n_p[i]==nullptr){
            p_n_p[i]=new Pregled(*pregled);
            registrovanih++;
            break;
        }
    }
}



int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const{
    int brojac(0);
    if(registrovanih==0) throw std::domain_error("Nema registriranih pregleda");
    brojac=std::count_if(p_n_p, p_n_p+registrovanih, [&amp;datum](Pregled *pregled){if(pregled==nullptr) return false; if(datum.Ocitaj() == pregled-&gt;DajDatumPregleda().Ocitaj()) return true; else return false;});
    return brojac;
}

Pregled &amp;Pregledi::DajNajranijiPregled(){
   return **(std::min_element(p_n_p, p_n_p+registrovanih, [](Pregled *pregled, Pregled *pregled1){if(Pregled::DolaziPrije(*pregled,*pregled1)) return true; else return false;}));
}

Pregled Pregledi::DajNajranijiPregled() const {
   return **(std::min_element(p_n_p, p_n_p+registrovanih, [](Pregled *pregled, Pregled *pregled1){if(Pregled::DolaziPrije(*pregled,*pregled1)) return true; else return false;}));
}

void Pregledi::IsprazniKolekciju(){
    for(int i=0;i&lt;kapacitet;i++){ 
        delete p_n_p[i];
        p_n_p[i]=nullptr;   //Zbog pokusaja dvostrukog brisanja 
    }
    registrovanih=0;
}

void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
    if(registrovanih==0) throw std::range_error("Prazna kolekcija");
    for(int i=0;i&lt;registrovanih;i++){
        if(p_n_p[i]-&gt;DajImePacijenta()==ime_pacijenta){
            delete p_n_p[i];
            for(int j=i;j&lt;registrovanih-1;j++){
                p_n_p[j]=p_n_p[j+1];
            }
            i--;
            registrovanih--;
        }
    }
}

void Pregledi::ObrisiNajranijiPregled(){
    if(registrovanih==0) throw std::range_error("Prazna kolekcija");
    Pregled *p1(&amp;Pregledi::DajNajranijiPregled());
    for(int i=0;i&lt;registrovanih;i++){
        if(p1==p_n_p[i]){
            delete p_n_p[i];
            for(int j=i;j&lt;registrovanih-1;j++){
                p_n_p[j]=p_n_p[j+1];
            }
            i--;
            registrovanih--;
        }
    }
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const{
    Pregled **novi(new Pregled* [kapacitet]);
    for(int i=0;i&lt;kapacitet;i++) novi[i]=p_n_p[i];
    std::sort(novi, novi+registrovanih, [](Pregled *pregled, Pregled *pregled1){if(pregled==nullptr || pregled1==nullptr) return false; if(Pregled::DolaziPrije(*pregled,*pregled1)) return true; else return false;});
    for(int i=0;i&lt;registrovanih;i++){
        if(novi[i]==nullptr) continue;
        if(datum.Ocitaj()==novi[i]-&gt;DajDatumPregleda().Ocitaj()) novi[i]-&gt;Ispisi();
    }
    delete[] novi;
}

void Pregledi::IspisiSvePreglede() const{
    Pregled **novi(new Pregled* [kapacitet]);
    for(int i=0;i&lt;kapacitet;i++) novi[i]=p_n_p[i];
    std::sort(novi,novi+registrovanih, [](Pregled *pregled, Pregled *pregled1) {if(pregled==nullptr || pregled1==nullptr) return false; if(Pregled::DolaziPrije(*pregled,*pregled1)) return true; else return false;});
    for(int i=0;i&lt;registrovanih;i++){
        if(novi[i]==nullptr) continue;
        novi[i]-&gt;Ispisi();
    }
    delete[] novi;
} 
int main ()
{   
    int max_br;
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    std::cin&gt;&gt;max_br;
    std::cin.ignore(1000,'\n');
    int i=0;
    Pregledi pr(max_br);
    while(i&lt;max_br){

        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::string ime;
        std::getline(std::cin,ime);
        std::string kraj("kraj");
        if(ime.compare(kraj)==0) break;
        int dan,mjesec,godina;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        std::cin&gt;&gt;dan;
        std::cin&gt;&gt;mjesec;
        std::cin&gt;&gt;godina;
        std::cin.get();
        Datum d(dan,mjesec,godina);
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        int sati, minute;
        std::cin&gt;&gt;sati;
        std::cin&gt;&gt;minute;
        Vrijeme v(sati,minute);
        Pregled p(ime,d,v);
        pr.RegistrirajPregled(&amp;p);
        i++;
        std::cin.ignore(1000,'\n');
    }
    
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi\n";
    pr.IspisiSvePreglede();
    std::cout&lt;&lt;std::endl;
    while(1){
        std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl;
        std::cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl;
        std::cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl;
</font>        std::cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl;
        std::cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl;
<a name="3"></a><font color="#00FFFF"><a href="match65-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_10.gif"/></a>

        std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl;
        std::cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl;
        std::cout&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
        int n;
        std::cin&gt;&gt;n;
        std::string ime;
        switch(n){
            case 1:
                std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                int dan,mjesec,godina;
                std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
                std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" je: "&lt;&lt;pr.DajBrojPregledaNaDatum({dan,mjesec,godina})&lt;&lt;std::endl;
                std::cout&lt;&lt;std::endl;
                break;
                
            case 2:
                std::cout&lt;&lt;"Najraniji pregled je:\n";
                pr.DajNajranijiPregled().Ispisi();
                std::cout&lt;&lt;std::endl;
                break;
                
            case 3:
                std::cout&lt;&lt;"Unesite ime pacijenta: ";
                std::cin.ignore(1000,'\n');
                std::getline(std::cin, ime);
                int prije, poslije;
                prije=pr.DajBrojPregleda();
                pr.ObrisiPregledePacijenta(ime);
                poslije=pr.DajBrojPregleda();
                std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;prije-poslije&lt;&lt;" pregleda"&lt;&lt;std::endl;
                std::cout&lt;&lt;std::endl;
                break;
                
            case 4:
                prije=pr.DajBrojPregleda();
                pr.ObrisiNajranijiPregled();
                poslije=pr.DajBrojPregleda();
                if(prije!=poslije) std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
                std::cout&lt;&lt;std::endl;
                break;
                
            case 5:
                std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
                std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" su:"&lt;&lt;std::endl;
                pr.IspisiPregledeNaDatum({dan,mjesec,godina});
                std::cout&lt;&lt;std::endl;
                break;
                
            case 6: 
                pr.IspisiSvePreglede();
                std::cout&lt;&lt;std::endl;
                break;
                
            case 7:
</font>                return 0;
                
                
        }
    }
    
	return 0;
}
</pre>
</body>
</html>
