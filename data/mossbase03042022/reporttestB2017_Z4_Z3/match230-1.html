<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student2153.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student2421.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match230-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

/B2017/2018: ===TITLE===
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;
#include &lt;initializer_list&gt;
#include &lt;memory&gt;
using namespace std;

typedef tuple&lt;int, int, int&gt; Tuple;
typedef pair&lt;int, int&gt; Pair;

class Datum{
    int d, m, g;
    public:
    Datum (int dan, int mjesec, int godina) {
        Postavi(dan,mjesec,godina);
    }
    void Postavi (int dan, int mjesec, int godina){
        int broj_dana[] {31,28,31,30,31,30,31,31,30,31,30,31};
</font>        if(godina%4==0 &amp;&amp; godina%100!=0 || godina %400==0) broj_dana[1]++;
<a name="0"></a><font color="#FF0000"><a href="match230-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_92.gif"/></a>

        if(godina&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&lt;1 || dan&gt;broj_dana[mjesec-1]) throw domain_error ("Neispravan datum");
        d=dan; m=mjesec; g=godina;
    }
    tuple&lt;int, int, int&gt; Ocitaj() const{
        Tuple trojka;
        trojka=make_tuple(d, m, g);
        return trojka;
    }
    void Ispisi() const{
        cout&lt;&lt;d&lt;&lt;"/"&lt;&lt;m&lt;&lt;"/"&lt;&lt;g;
    }
   
    friend class Pregled;
};

class Vrijeme{
    int s, min;
    public:
    Vrijeme(int sati, int minute){
        Postavi(sati, minute);
    }
    void Postavi(int sati, int minute){
        if(sati&lt;0 || sati&gt;23 &amp;&amp; minute&lt;0 || minute&gt;59) throw domain_error ("Neispravno vrijeme");
        s=sati; min=minute;
    }
    pair&lt;int, int&gt; Ocitaj() const{
        return Pair (s, min);
    }
    void Ispisi() const{
        if(s&gt;=10) cout&lt;&lt;s&lt;&lt;":";
		else cout&lt;&lt;"0"&lt;&lt;s&lt;&lt;":";
		if(min&gt;=10) cout&lt;&lt;min&lt;&lt;":";
		else cout&lt;&lt;"0"&lt;&lt;min;
    }
    
   friend class Pregled;
};

class Pregled{
    string ime;
    Datum dat_preg;
    Vrijeme vrijeme_preg;
   // int dan_preg, mjesec_preg, godina_preg, sati_preg, minute_preg;
    static void PlusDan(const Datum &amp;d_atum);
    public:
    Pregled(const string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):
        ime(ime_pacijenta), dat_preg(datum_pregleda), vrijeme_preg(vrijeme_pregleda){}
      
    Pregled(const string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda):
    ime(ime_pacijenta), dat_preg(dan_pregleda, mjesec_pregleda, godina_pregleda),  vrijeme_preg(sati_pregleda, minute_pregleda){}
        
    void PromijeniPacijenta(const string &amp;ime_pacijenta) {
        ime=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        dat_preg=novi_datum;
    } 
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        vrijeme_preg=novo_vrijeme;
    }
    void PomjeriDanUnaprijed() {
        Tuple datum=dat_preg.Ocitaj();
        int dan=get&lt;0&gt;(datum);
        int mjesec=get&lt;1&gt;(datum);
        int godina=get&lt;2&gt;(datum);
        int broj_dana[] {31,28,31,30,31,30,31,31,30,31,30,31};
        if(godina%4==0 &amp;&amp; godina%100!=0 || godina %400==0) { 
            broj_dana[1]++;
            if(dan==broj_dana[mjesec-1]) {
            dan=1;
            if(mjesec==12) {mjesec=1; godina++;}
            else mjesec++;
        }
        else dan++;
        }
        else {
             if(dan==broj_dana[mjesec-1]) {
            dan=1;
            if(mjesec==12) {mjesec=1; godina++;}
            else mjesec++;
        }
        else dan++;
           
        }
    } 
    void PomjeriDanUnazad() {
        Tuple datum=dat_preg.Ocitaj();
        int dan=get&lt;0&gt;(datum);
        int mjesec=get&lt;1&gt;(datum);
        int godina=get&lt;2&gt;(datum);
        int broj_dana[] {31,28,31,30,31,30,31,31,30,31,30,31};
        if(godina%4==0 &amp;&amp; godina%100!=0 || godina %400==0) { 
            broj_dana[1]++;
            if(dan==0) {
            if(mjesec==1) {
            mjesec=12; 
            godina--; }
            else mjesec--;
            dan=broj_dana[mjesec];
            }
            else dan--;
        }
        else{ 
            broj_dana[1]++;
            if(dan==0) {
            if(mjesec==1) {
            mjesec=12; 
            godina--; }
            else mjesec--;
            dan=broj_dana[mjesec];
            }
            else dan--;
        }
    }
    
    string DajImePacijenta() const {
        return ime;
    } 
    Datum DajDatumPregleda() const {
        return dat_preg;
    }  
    Vrijeme DajVrijemePregleda() const {
        return vrijeme_preg;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
        Tuple datum1=p1.dat_preg.Ocitaj();
        int dan1=get&lt;0&gt;(datum1);
        int mjesec1=get&lt;1&gt;(datum1);
        int godina1=get&lt;2&gt;(datum1);
        Tuple datum2=p2.dat_preg.Ocitaj();
        int dan2=get&lt;0&gt;(datum2);
        int mjesec2=get&lt;1&gt;(datum2);
        int godina2=get&lt;2&gt;(datum2);
        if(godina1&lt;godina2) return true;
        if(mjesec1&lt;mjesec2) return true;
        if(dan1&lt;=dan2) return true;
        return false;
    } 
    void Ispisi() const {
        cout&lt;&lt;setw(30)&lt;&lt;left&lt;&lt;ime&lt;&lt;" ";
        dat_preg.Ispisi();
        cout&lt;&lt;" ";
        vrijeme_preg.Ispisi();
        cout&lt;&lt;endl;
    }
};

class Pregledi{
    Pregled **pregledi;
    const int max_br_preg;
    int trenutni_br_preg; 
    public:
    explicit Pregledi(int max_broj_pregleda): max_br_preg(max_broj_pregleda), trenutni_br_preg(0), pregledi(new Pregled*[max_broj_pregleda]{}) {} 
    
    Pregledi (initializer_list&lt;Pregled&gt; spisak_pregleda);
    
    ~Pregledi();
    
    Pregledi(const Pregledi &amp;pregledi1): pregledi(pregledi1.pregledi), max_br_preg(pregledi1.max_br_preg), trenutni_br_preg(pregledi1.trenutni_br_preg) {}
    
    
    Pregledi(Pregledi &amp;&amp;pregledi2): pregledi(pregledi2.pregledi), max_br_preg(pregledi2.max_br_preg), trenutni_br_preg(pregledi2.trenutni_br_preg) {
        pregledi2.pregledi=nullptr;
        pregledi2.trenutni_br_preg=0;
    }
    
    Pregledi &amp;operator =(const Pregledi &amp;pregledi3){
        swap(trenutni_br_preg, pregledi.trenutni_br_preg);
        swap(pregledi, pregledi3.pregledi);
        return *this;
    }
    
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
    
    void RegistrirajPregled(const string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        Pregled *novi=new Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
        pregledi[trenutni_br_preg]=novi;
        trenutni_br_preg++;
    }
    void RegistrirajPregled(const string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
        Pregled *novi = new Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
        pregledi[trenutni_br_preg]=novi;
        trenutni_br_preg++;
    }
    void RegistrirajPregled(Pregled *pregled) {
        pregledi[trenutni_br_preg]=pregled;
        trenutni_br_preg++;
    }
    int DajBrojPregleda() const {return trenutni_br_preg;}
    
    int DajBrojPregledaNaDatum (const Datum &amp;datum) const {
        count_if() //nemam blage
    }
    
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const {
    
    }
    
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledPacijenta(const string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

Pregledi::Pregledi (initializer_list&lt;Pregled&gt; spisak_pregleda): max_br_preg(spisak_pregleda.size()) {
        initializer_list&lt;Pregled&gt;::iterator it{spisak_pregleda.begin()};
        for (int i=0; i&lt;spisak_pregleda.size(); i++){
            pregledi[i]=make_shared&lt;Pregled&gt;(*it);
            it++;
        }
    }
    
int Pregledi::DajBrojPregledaNaDatum (const Datum &amp;datum) const {
        Tuple dat1=datum.Ocitaj();
        int pom=0;
        for(int i=0; i&lt;pregledi.size(); i++) {
            for(int j=0; j&lt;pregledi[i].size(); j++){
                Tuple dat=pregledi[i][j].DajDatumPregleda().Ocitaj();
                if(dat==dat1) pom++;
            }
        }
        return pom;
    }




int main ()
{
    //Pregled *novi= new Pregled("Azra Ridjic", 1,11,2017,3,3);
    //novi-&gt;Ispisi();
    int max_br_preg, dan, mjesec, godina, sat, minuta;
    string ime;
    Pregledi skup(20);
    vector&lt;Pregled*&gt; Osoba;
    cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    cin&gt;&gt;max_br_preg;
    if(max_br_preg&lt;1) return 0;
    int br_preg(0);
    for(;;){
        cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        cin.ignore(10000, '\n');
        getline(cin, ime);
        if(ime=="kraj") break;
        cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
        try{
            Datum d=Datum(dan, mjesec, godina);
        }
        catch (domain_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
            return 0;
        }
        cout&lt;&lt;"Unesite sate i minute pregleda: ";
        cin&gt;&gt;sat&gt;&gt;minuta;
        try{
            Vrijeme v=Vrijeme(sat. minuta);
        }
        catch(domain_error izuzetak){
            cout&lt;&lt;izuzetak.what();&lt;&lt;endl;
            return 0;
        }
        Osoba.push_back(new Pregled(ime, dan, mjesec, godina, sat,minuta));
        try{
            skup.RegistrirajPregled(ime, dan, mjesec, godina, sat,minuta);
        }
        catch(range_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
            return 0;
        }
        br_preg++;
        if(br_preg==max_br_preg) break;
    }
    cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi: " &lt;&lt;endl;
    sort(Osoba.begin(), Osoba.end(), [](Pregled *o1, Pregled *o2) {
        return Pregled::DolaziPrije(*o1, *o2);
    });
    for (int i=0; i&lt;Osoba.size(); i++){
        Osoba[i]-&gt;Ispisi();
    }
    for (int i=0; i&lt;Osoba.size(); i++){
        delete Osoba[i];
    }
    int U;
    for(;;){
        cout&lt;&lt;endl&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;endl;
        cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;endl&lt;&lt;"2 - Najraniji pregled"&lt;&lt;endl&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;endl&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;endl&lt;&lt;"5 - Ispisi sve preglede na datum"&lt;&lt;endl&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;endl&lt;&lt;"7 - Kraj pregleda";
        cin&gt;&gt;U;
        if(U==1){
            try{
                cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
                try{
                    Datum d=Datum(dan, mjesec, godina);
                }
                catch(domain_error izuzetak){
                    cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
                    return 0;
                }
                cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" je : "&lt;&lt;skup.DajBrojPregledaNaDatum();
                cout&lt;&lt;endl;
            }
            catch(domain_error izuzetak){
                cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
                return 0;
            }
        }
        if(U==2){
            try{
            skup.DajNajranijiPregled();
            cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;endl;
            skup.DajNajranijiPregled().Ispisi();
            cout&lt;&lt;endl;
            }
            catch(domain_error izuzetak){
                cout&lt;&lt;izuzetak.what()&lt;&lt;endl;
                return 0;
            }
        }
        else if(U==3){
            cout&lt;&lt;"Unesite ime pacijenta: ";
            string ime_b;
            cin.ignore(10000, '\n');
            getline(cin, ime_b);
            int br_preg1=skup.DajBrojPregleda();
            skup.ObrisiPregledPacijenta(ime_b);
            int br_preg2=skup.DajBrojPregleda();
            cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;br_preg1-br_preg2&lt;&lt;" pregleda"&lt;&lt;endl;
        }
        else if(U==4){
            try{
                skup.ObrisiNajranijiPregled();
                cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;endl;
            }
            catch(domain_error izuzetak){
                cout&lt;&lt;izuzetak.what();
                return 0;
            }
        }
        else if(U==5){
            cout&lt;&lt;"Unesite dan mjesec i godinu: ";
            cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
            cout&lt;&lt;"Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" su:"&lt;&lt;endl;
            skup.IspisiPregledeNaDatum(Datum(dan, mjesec, godina));
        }
        else if(U==6){
            skup.IspisiSvePreglede();
        }
        if(U==7){
            return 0;
        }
    }
	return 0;
</font>}
</pre>
</body>
</html>
