<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4973.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student6369.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match239-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_9.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;



class Datum{
    int dan,mjesec,godina;
    
 public:
    Datum(int dan, int mjesec, int godina){
        Postavi(dan,mjesec,godina);
    }
    void Postavi(int dan, int mjesec, int godina){
        if(dan&lt;=0 || dan&gt;31 || mjesec&lt;=0 || mjesec&gt;12 || godina&lt;0)
            throw std::domain_error("Neispravan datum");
            
        int dani[12]={31,28,31,30,31,30,31,31,30,31,30,31};
        if( (godina%4==0 &amp;&amp; godina%100!=0) || (godina%400==0))
            dani[1]++; 
            
        if(dan&gt;dani[mjesec-1])
            throw std::domain_error("Neispravan datum");
            
        this-&gt;dan=dan;
        this-&gt;mjesec=mjesec;
        this-&gt;godina=godina;
        
        
        
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        return std::make_tuple(dan,mjesec,godina);
</font>    }
    void Ispisi() const{
        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};

class Vrijeme{
<a name="3"></a><font color="#00FFFF"><a href="match239-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_6.gif"/></a>

    int minute,sati;
    
public:

    Vrijeme(int sati, int minute){
        Postavi(sati,minute);
    }

    void Postavi(int sati, int minute){
        if((minute &lt; 0 || minute &gt; 59) || (sati &lt; 0 || sati &gt; 23))
            throw std::domain_error("Neispravno vrijeme");
          this-&gt;minute = minute;
          this-&gt;sati = sati;
        
    }
    std::pair&lt;int, int&gt; Ocitaj () const{
        return std::make_pair(sati,minute);
    }
    void Ispisi() const{
        std::cout&lt;&lt;sati&lt;&lt;":"&lt;&lt;minute;
    }

};

class Pregled{
    std::string ime_pacijenta;
    Datum datum;
    Vrijeme vrijeme;
    
public:

    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda): ime_pacijenta(ime_pacijenta),
</font>    datum(datum_pregleda),vrijeme(vrijeme_pregleda){}
    
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
<a name="0"></a><font color="#FF0000"><a href="match239-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_41.gif"/></a>

    int godina_pregleda, int sati_pregleda, int minute_pregleda): ime_pacijenta(ime_pacijenta),
    datum(dan_pregleda,mjesec_pregleda,godina_pregleda),vrijeme(sati_pregleda,minute_pregleda){}
    
    
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta){
        this-&gt;ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum){
        this-&gt;datum=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
        this-&gt;vrijeme=novo_vrijeme;
    }
    void PomjeriDanUnaprijed(){
        auto moj_datum=datum.Ocitaj();
        int dani = std::get&lt;0&gt;(moj_datum);
        int mjesec = std::get&lt;1&gt;(moj_datum);
        int godina=std::get&lt;2&gt;(moj_datum);
        bool prestupna(false);
        if( (godina%4==0 &amp;&amp; godina%100!=0) || (godina%400==0))
            prestupna=true;
        
        if ((dani==31 &amp;&amp; (mjesec==1 || mjesec==3 || mjesec==5 || mjesec==7 || mjesec==8 || mjesec==10 || mjesec==12))  
            || (dani==30 &amp;&amp; (mjesec==4 || mjesec==6 || mjesec==9 || mjesec==11)) || (dani==28 &amp;&amp; mjesec==2 &amp;&amp; !prestupna ) || (mjesec==2 &amp;&amp; dani==29 &amp;&amp; prestupna) )
        {
            mjesec++;
            dani=1;
            if(mjesec==13){
                mjesec=1;
                godina++;
            }
        }
        else
            dani++;
            
        datum=Datum(dani,mjesec,godina);
        
    }
    void PomjeriDanUnazad(){
        auto moj_datum=datum.Ocitaj();
        int dani = std::get&lt;0&gt;(moj_datum);
        int mjesec = std::get&lt;1&gt;(moj_datum);
        int godina=std::get&lt;2&gt;(moj_datum);
        
        
        bool prestupna(false);
        if( (godina%4==0 &amp;&amp; godina%100!=0) || (godina%400==0))
            prestupna=true;
        
        if(dani==1 &amp;&amp; (mjesec==2 || mjesec==4 || mjesec==6 || mjesec==8|| mjesec==9 || mjesec==11 || mjesec==1))  {
            mjesec--;
            dani=31;
            if(mjesec==0){
                mjesec=12;
                godina--;
            }
        }
        else if(dani==1 &amp;&amp; (mjesec==5 || mjesec==7 || mjesec==10 || mjesec==12)){
            mjesec--;
            dani=30;
        }
        
        else if(dani==1 &amp;&amp; mjesec==3){
            if(prestupna){
                mjesec--;
                dani=29;
                
            }
            else{
                mjesec--;
                dani=28;
            }
            
        }
        
        else
            dani--;
            
        datum=Datum(dani,mjesec,godina);
    }
    
    std::string DajImePacijenta() const {
        return ime_pacijenta;
    }
    Datum DajDatumPregleda() const{
        return datum;
        
    }
    Vrijeme DajVrijemePregleda() const {
        return vrijeme;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
        Datum dat1=p1.DajDatumPregleda();
        Datum dat2=p2.DajDatumPregleda();
        
        auto datum1=dat1.Ocitaj();
        auto datum2=dat2.Ocitaj();
        
        int d1=std::get&lt;0&gt;(datum1);
        int m1=std::get&lt;1&gt;(datum1);
        int g1=std::get&lt;2&gt;(datum1);
        
        int d2=std::get&lt;0&gt;(datum2);
        int m2=std::get&lt;1&gt;(datum2);
        int g2=std::get&lt;2&gt;(datum2);
        
        if(g1&lt;g2) return true;
        else if(g1&gt;g2) return false;
        else{
            if(m1&lt;m2) return true;
            else if(m1&gt;m2) return false;
            else{
                if(d1&lt;d2) return true;
                else if(d1 == d2){
                    auto sati1=p1.DajVrijemePregleda();
                    auto sati2 = p2.DajVrijemePregleda();
                    
                    auto sat1=sati1.Ocitaj();
                    auto sat2 = sati2.Ocitaj();
                    
                    int h1=std::get&lt;0&gt;(sat1);
                    int min1=std::get&lt;1&gt;(sat1);
                    
                    int h2=std::get&lt;0&gt;(sat2);
                    int min2 = std::get&lt;1&gt;(sat2);
                    
                    if(h1 == h2){
                        if(min1 &lt; min2) return true;
                        return false;
                    }
                    
                    else if(h1 &lt; h2) return true;
                    else return false;
                    
                }
                return false;
            }
        }
    }
    
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime_pacijenta&lt;&lt;" ";
        datum.Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme.Ispisi();
        std::cout&lt;&lt;std::endl;
    }
};



class Pregledi{
    int max_broj_pregleda,broj_pregleda;
    Pregled **pregledi;
    
public:
    explicit Pregledi(int max_broj_pregleda);
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi();
    Pregledi(const Pregledi &amp;pregledi);
</font>    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
    const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
    int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
    int minute_pregleda);
    
    void RegistrirajPregled(Pregled *pregled);
    
    int DajBrojPregleda() const { return broj_pregleda; };
    
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    
    Pregled &amp;DajNajranijiPregled();
    
<a name="1"></a><font color="#00FF00"><a href="match239-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_32.gif"/></a>

    Pregled DajNajranijiPregled() const;
    
    void IsprazniKolekciju(); //samo ces kopirati destruktor, onda ces obrisatis ve iz njeg i samo pozvati ovu metodu u njemu
    
    void ObrisiNajranijiPregled();  
    
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;   
    
    void IspisiSvePreglede() const;
};

void Pregledi::RegistrirajPregled(Pregled *pregled){
    if(broj_pregleda+1&gt;max_broj_pregleda){
        delete pregled;
        throw std::range_error("Dostignut maksimalan broj pregled");
        pregled=nullptr;
    }
    pregledi[broj_pregleda+1]=pregled;
    broj_pregleda++;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
    if(broj_pregleda+1&gt;max_broj_pregleda) throw std::range_error("Dostignut maksimalan broj pregleda");
    
    broj_pregleda++;
    pregledi[broj_pregleda]=new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
    int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
    int minute_pregleda){
        if(broj_pregleda+1&gt;max_broj_pregleda) throw std::range_error("Dostignut maksimalan broj pregleda");
        Pregled pr = Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda);
        broj_pregleda++;
        pregledi[broj_pregleda]= new Pregled(pr);
    }


Pregledi::Pregledi(const Pregledi &amp;pregledi): max_broj_pregleda(pregledi.max_broj_pregleda), broj_pregleda(pregledi.broj_pregleda){
    this-&gt;pregledi = new Pregled*[max_broj_pregleda];
    
    
    for(int i=0; i&lt;max_broj_pregleda; i++){
        (this-&gt;pregledi)[i]=nullptr;
    }
    
    
    try{
        for(int i=0; i&lt;broj_pregleda; i++){
            (this-&gt;pregledi)[i]=new Pregled(    *(pregledi.pregledi[i])   );
            
        }
    }
    catch(std::bad_alloc e){
        for(int i=0; i&lt;max_broj_pregleda; i++){
            delete (this-&gt;pregledi)[i];
        }
        delete[] this-&gt;pregledi;
    }
}

Pregledi::Pregledi(Pregledi &amp;&amp;pregledi):pregledi(pregledi.pregledi), broj_pregleda(pregledi.broj_pregleda), max_broj_pregleda(pregledi.max_broj_pregleda){
    pregledi.max_broj_pregleda=0;
    pregledi.broj_pregleda=0;
    pregledi.pregledi=nullptr;
}

Pregledi&amp; Pregledi::operator =(const Pregledi &amp;pregledi){
    if(this==&amp;pregledi) return *this;
    
    //Prepisi sve iz konstruktora kopije
    return *this;
}

Pregledi&amp; Pregledi::operator =(Pregledi &amp;&amp;pregledi){
    if(this==&amp;pregledi) return *this;
    //Prepisi sve iz konstr move-a (sa 2 reference)
    return *this;
}





Pregledi::~Pregledi(){
    
    for(int i=0; i&lt;max_broj_pregleda; i++){
            delete pregledi[i];
    }
    delete[] pregledi;
}

Pregledi::Pregledi(int max_broj_pregleda){
  
    pregledi = new Pregled*[max_broj_pregleda];
    for(int i=0; i&lt;max_broj_pregleda; i++)
        pregledi[i]=nullptr;
    broj_pregleda=0;
    
}

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda){
    bool uspjela(false);
    try{
        max_broj_pregleda=10000;
        pregledi = new Pregled*[max_broj_pregleda];
        uspjela=true;
        for(int i=0; i&lt;spisak_pregleda.size(); i++)
            pregledi[i]=nullptr;
            
        int i=0;
        for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++){
            pregledi[i] = new Pregled(*it);
            i++;
        }
        broj_pregleda=spisak_pregleda.size();
    }
    catch(std::bad_alloc e){
        if(uspjela){
            for(int i=0; i&lt;max_broj_pregleda; i++){
                delete pregledi[i];
            }
            delete[] pregledi;
            
        }
        broj_pregleda=0;

    }
}

int main ()
{
    Datum d1(31,12,2012);
    Vrijeme v1(12,2);
    Pregled p1("Amra Ridzal",d1,v1);
    p1.PomjeriDanUnaprijed();
    p1.Ispisi();
	return 0;
</font>}
</pre>
</body>
</html>
