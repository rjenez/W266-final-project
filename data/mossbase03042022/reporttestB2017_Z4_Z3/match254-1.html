<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student8089.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student7507.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;memory&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;




class Datum
{
    int dan, mjesec, godina;
<a name="8"></a><font color="#00FFFF"><a href="match254-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    friend class Pregled;
    int DajDan() const {
        return dan;
    }
    int DajMjesec() const{
        return mjesec;
    }
    int DajGodinu() const{
        return godina;
    }
public:
    Datum(int dan, int mjesec, int godina) {
</font>        Postavi(dan,mjesec,godina);
    }
<a name="5"></a><font color="#FF0000"><a href="match254-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    void Postavi(int dan, int mjesec, int godina);
    std::tuple&lt;int, int, int&gt; Ocitaj() const;
    void Ispisi() const {
        std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
</font>    }

};

void Datum::Postavi(int dan, int mjesec, int godina)
{
    int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if(godina % 4 == 0 &amp;&amp; godina % 100 != 0 || godina % 400 == 0)
        broj_dana[1]++;
<a name="4"></a><font color="#FF00FF"><a href="match254-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    if(godina &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &lt; 1 || dan &gt; broj_dana[mjesec - 1])
        throw std::domain_error("Neispravan datum");
    Datum::dan=dan;
    Datum::mjesec=mjesec;
    Datum::godina=godina;

}

std::tuple&lt;int, int, int&gt; Datum::Ocitaj() const
{
    return std::make_tuple(dan, mjesec, godina);
</font>}

//kraj klase datum 

class Vrijeme
{
    int sati, minute;
    friend class Pregled;
    int DajSati() const{
        return sati;
    }
    int DajMinute() const {
        return minute;
    }
public:
    Vrijeme(int sati, int minute) {
        Postavi(sati, minute);
    }
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj() const {
        return std::make_pair(sati, minute);
    }
<a name="6"></a><font color="#00FF00"><a href="match254-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    void Ispisi() const {
        std::cout &lt;&lt; sati &lt;&lt; ":" &lt;&lt; minute;
    }
};

void Vrijeme::Postavi(int sati, int minute)
{
    if(sati &lt; 0 || sati &gt; 23 || minute &lt; 0 || minute &gt; 59)
</font>        throw std::domain_error("Neispravno vrijeme");
    Vrijeme::sati=sati;
    Vrijeme::minute=minute;
}


class Pregled
{
<a name="7"></a><font color="#0000FF"><a href="match254-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    std::string ime_pac;
    Datum dat;
    Vrijeme vri;
    static int broj_p;
    friend class Datum;
    friend class Vrijeme;
    friend class Pregledi;
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):dat(datum_pregleda), vri(vrijeme_pregleda) {
</font>        ime_pac=ime_pacijenta;
        broj_p++;
    }
<a name="9"></a><font color="#FF00FF"><a href="match254-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
            int godina_pregleda, int sati_pregleda, int minute_pregleda):dat(dan_pregleda, mjesec_pregleda, godina_pregleda),vri(sati_pregleda, minute_pregleda) {
        ime_pac = ime_pacijenta;
        broj_p++;
</font>    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        ime_pac = ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        dat=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        vri = novo_vrijeme;
    }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const {
        return ime_pac;
    }
    Datum DajDatumPregleda() const {
        return dat;
    }
    Vrijeme DajVrijemePregleda() const {
        return vri;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi() const {
<a name="2"></a><font color="#0000FF"><a href="match254-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

       std::cout &lt;&lt; std::left &lt;&lt; std::setw(30) &lt;&lt; DajImePacijenta() &lt;&lt; this-&gt;DajDatumPregleda().DajDan() &lt;&lt; "/" &lt;&lt; this-&gt;DajDatumPregleda().DajMjesec() &lt;&lt; "/" &lt;&lt; this-&gt;DajDatumPregleda().DajGodinu() &lt;&lt; " " &lt;&lt;  this-&gt;DajVrijemePregleda().DajSati() &lt;&lt; ":" &lt;&lt; this-&gt;DajVrijemePregleda().DajMinute() &lt;&lt; std::endl;
</font>    }

};
int Pregled::broj_p=0;
void Pregled::PomjeriDanUnaprijed()
{
    int broj_dana[] {31,28,31,30,31,30,31,31,30,31,30,31};
    int d,m,g;
    std::tuple&lt;int, int, int&gt; p(Pregled::dat.Datum::Ocitaj());
    std::tie(d,m,g)=p;
    if(g % 4 == 0 &amp;&amp; g % 100 != 0 || g % 400 == 0)
        broj_dana[1]++;
    d++;
    if(d &gt; broj_dana[m-1]) d=1, m++;
    if(m&gt;12) m=1, g++;
    Pregled::dat.dan=d;
    Pregled::dat.mjesec=m;
    Pregled::dat.godina=g;
}

void Pregled::PomjeriDanUnazad()
{
    int broj_dana[] {31,28,31,30,31,30,31,31,30,31,30,31};
    int d,m,g;
    std::tuple&lt;int, int, int&gt; p(Pregled::dat.Datum::Ocitaj());
    std::tie(d,m,g)=p;
    if(g % 4 == 0 &amp;&amp; g % 100 != 0 || g % 400 == 0)
        broj_dana[1]++;
    d--;
    if(d &lt; 1) {
        d=broj_dana[m-1];
        m--;
    }
    if(m&lt;1) {
        d=broj_dana[11];
        m=12;
        g--;
    }
    Pregled::dat.dan=d;
    Pregled::dat.mjesec=m;
    Pregled::dat.godina=g;
}


<a name="1"></a><font color="#00FF00"><a href="match254-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_10.gif"/></a>

static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2)
{
    Datum dat1(p1.DajDatumPregleda());
    Datum dat2(p2.DajDatumPregleda());
    int d1,d2,m1,m2,g1,g2;
    std::tuple&lt;int, int, int&gt; o1(dat1.Ocitaj());
    std::tuple&lt;int, int, int&gt; o2(dat2.Ocitaj());
    std::tie(d1, m1, g1)= o1;
    std::tie(d2, m2, g2) = o2;
    if(g1 &lt; g2) return true;
    if(g1==g2) {
        if(m1==m2) {
            if(d1 &lt; d2) { return true;}
            else if(d1 == d2) {
                Vrijeme vri1(p1.DajVrijemePregleda());
                Vrijeme vri2(p2.DajVrijemePregleda());
                std::pair&lt;int, int&gt; k1(vri1.Ocitaj());
                std::pair&lt;int, int&gt; k2(vri2.Ocitaj());
                int sati1=std::get&lt;0&gt; (k1);
                int min1=std::get&lt;1&gt;(k1);
                int sati2=std::get&lt;0&gt;(k2);
                int min2=std::get&lt;1&gt;(k2);

                if(sati1 &lt; sati2) return true;
                else if(sati1 == sati2) {
                    if(min1 &lt; min2) return true;
                    return false;
                }
            }
            return false;
        } else if(m1 &lt; m2 ) return true;
</font>        return false;
    }
    return false ;
}


class Pregledi
{
<a name="3"></a><font color="#00FFFF"><a href="match254-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    Pregled **p;
    const int max_broj;
    int broj_pregleda;
    friend class Pregled;

public:
    explicit Pregledi(int max_broj_pregleda):max_broj(max_broj_pregleda){
        p=new Pregled*[max_broj];
        broj_pregleda=0;
    }
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi();
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
</font>    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
                            const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
                            int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
                            int minute_pregleda);
    void RegistrirajPregled(Pregled *pregled);
    int DajBrojPregleda() const{
        return Pregled::broj_p;
    }
<a name="0"></a><font color="#FF0000"><a href="match254-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_37.gif"/></a>

    int DajBrojPregledaNaDatum(const Datum &amp;datum) const{
        
        int broj = std::count_if(p,p+broj_pregleda , [&amp;datum](Pregled *p1){
            if(std::get&lt;0&gt;(p1-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt;(datum.Ocitaj())&amp;&amp;
            std::get&lt;1&gt;(p1-&gt;DajDatumPregleda().Ocitaj()) == std::get&lt;1&gt;(datum.Ocitaj()) &amp;&amp;
            std::get&lt;2&gt;(p1-&gt;DajDatumPregleda().Ocitaj()) == std::get&lt;2&gt;(datum.Ocitaj())) return true;
            return false ;
        });
        return broj;
    }
    Pregled &amp;DajNajranijiPregled(){
        if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    }
    Pregled DajNajranijiPregled() const{
        if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
        /*auto pom(*std::min_element(p, p+broj_pregleda, [&amp;dat, &amp;vri](Pregled *p1, Pregled *p2){
            if(std::get&lt;0&gt;(p1-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt;(dat.Ocitaj())&amp;&amp;
            std::get&lt;1&gt;(p1-&gt;DajDatumPregleda().Ocitaj()) == std::get&lt;1&gt;(dat.Ocitaj()) &amp;&amp;
            std::get&lt;2&gt;(p1-&gt;DajDatumPregleda().Ocitaj()) == std::get&lt;2&gt;(dat.Ocitaj() )){
                if(std::get&lt;0&gt;(p1-&gt;DajVrijemePregleda().Ocitaj()) == std::get&lt;0&gt;(vri.Ocitaj()){
                    if(std::get&lt;1&gt;(p1-&gt;DajVrijemePregleda().Ocitaj()) &lt; std::get&lt;1&gt;(vri.Ocitaj())) return
                }
            }
        }));*/
        /*auto pom(*std::min_element(p, p+broj_pregleda, [](Pregled *p1, Pregled *p2){
            if(DolaziPrije(*p1,*p2)) return *p1;
            //return nullptr;
        }));*/
        
    }
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda):max_broj(spisak_pregleda.size()){
    broj_pregleda=spisak_pregleda.size();
    //?????????
   /* for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end() it++)
        (*it)=nullptr;*/
    p=new Pregled *[spisak_pregleda.size()];
    for(int i=0; i&lt;broj_pregleda; i++) p[i]= nullptr;
        int j(0);
    try{
        int i=0;
        for(auto it = spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++){
            p[i] = new Pregled(*it);
            i++;
            j++;
        }
    } catch(std::bad_alloc){
        for(int i=0; i&lt;j; j++)  delete[] p[i];
        delete[] p;
        throw;
    }
}

Pregledi::~Pregledi(){
    for(int i=0; i&lt;max_broj; i++) delete p[i];
    delete[] p;
}
 Pregledi::Pregledi(const Pregledi &amp;pregledi):max_broj(pregledi.max_broj){
     broj_pregleda=pregledi.broj_pregleda;
     p = new Pregled*[pregledi.max_broj];
     for(int i=0; i&lt;broj_pregleda; i++) p[i]=nullptr;
     try{
         for(int i=0; i&lt;broj_pregleda; i++){
             p[i]=new Pregled(*pregledi.p[i]);
         }
     }catch(...){
         for(int i=0; i&lt;broj_pregleda; i++) delete[] p[i];
         delete[] p;
         throw;
     }
     
 }

Pregledi::Pregledi(Pregledi &amp;&amp;pregledi):max_broj(pregledi.max_broj){
    broj_pregleda=pregledi.broj_pregleda;
    p=pregledi.p;
    pregledi.p=nullptr;
    pregledi.broj_pregleda = 0;
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;pregledi){
    if(this != &amp;pregledi){
        for (int i=0; i&lt;broj_pregleda; i++)
            delete[] p[i];
        delete[] p;
        broj_pregleda=pregledi.broj_pregleda;
        p=new Pregled*[pregledi.max_broj];
        for(int i=0; i&lt;broj_pregleda; i++) p[i]=new Pregled(*pregledi.p[i]);
    }
    return *this;
}

Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi){
    for(int i=0; i&lt;broj_pregleda; i++) delete p[i];
    delete[] p;
    
    broj_pregleda = pregledi.broj_pregleda;
    p=pregledi.p;
    pregledi.p=nullptr;
    /*std::swap(broj_pregleda, pregledi.broj_pregleda);
    std::swap(p, pregledi.p);*/
    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
    if(broj_pregleda &gt; max_broj) throw std::range_error("Dostignut maksimalan broj pregleda");
    Pregled preg{ime_pacijenta, datum_pregleda, vrijeme_pregleda};
    p[broj_pregleda++]=new Pregled(preg);
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
                            int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
                            int minute_pregleda){
                                if(broj_pregleda &gt; max_broj) throw std::range_error("Dostignut maksimalan broj pregleda");
                                Pregled preg{ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda};
                                p[broj_pregleda++] = new Pregled(preg);
                            }

void Pregledi::RegistrirajPregled(Pregled *pregled){
    if(broj_pregleda &gt; max_broj) throw std::range_error("Dostignut maksimalan broj pregleda");
    p[broj_pregleda++]=pregled;
}


int main ()
{
    try {
    Datum d{10,3,1998};
    Vrijeme v{17,15};
    

    Pregled pred{"sarahhh", d, v};
    
    Datum d1{15,4,1999};
    Vrijeme v1{18,15};
    Pregled pred1{"amina", d1, v1};
    //Pregled pred {"ime amina je pegla", 25,3,1998, 15,36};
    bool nesto (DolaziPrije(pred, pred1));
    pred.PomjeriDanUnazad();
    pred.Ispisi();
    }
    catch (std::domain_error izuzteka) {
        std::cout &lt;&lt; izuzteka.what();
    }
    
    return 0;
</font>}
</pre>
</body>
</html>
