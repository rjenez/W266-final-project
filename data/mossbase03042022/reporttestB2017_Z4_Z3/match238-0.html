<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student1845.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student1845.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match238-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: Zadaća 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;iomanip&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;cctype&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;

using namespace std;

class Datum{
    int dan, mjesec, godina;
    public:
    Datum(int dan, int mjesec, int godina){
        Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
    }
    void Postavi(int dan, int mjesec, int godina){                                          //provjera vremena
        Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
    }
    tuple&lt;int, int, int&gt; Ocitaj()const{
        return tuple&lt;int, int, int&gt;(Datum::dan, Datum::mjesec, Datum::godina);
    }
    void Ispisi()const{
        cout&lt;&lt;Datum::dan&lt;&lt;"/"&lt;&lt;Datum::mjesec&lt;&lt;"/"&lt;&lt;Datum::godina;
    }
    int DajDan()const {return this-&gt;dan;}
    int DajMjesec()const{return this-&gt;mjesec;}
    int DajGodinu()const{return this-&gt;godina;}
    friend class Pregled;
    friend class Pregledi;
};
class Vrijeme{
    int sati, minute;
    public:
    Vrijeme(int sati, int minute){
        Vrijeme::sati=sati; Vrijeme::minute=minute;
    }
    void Postavi(int sati, int minute){
        Vrijeme::sati=sati; Vrijeme::minute=minute;
    }
    pair&lt;int, int&gt; Ocitaj()const{
        return pair&lt;int, int&gt;(Vrijeme::sati, Vrijeme:: minute);
    }
    void Ispisi()const{
        cout&lt;&lt;Vrijeme::sati&lt;&lt;":"&lt;&lt;Vrijeme::minute;
    }
    int DajMinute()const{
        return this-&gt;minute;
    }
    int DajSate()const{return this-&gt;sati;}
    friend class Pregled;
    friend class Pregledi;
};
class Pregled{
    string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
    
    public:
    
    Pregled(const string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda){
        Pregled::ime_pacijenta=ime_pacijenta; 
    }
    
  Pregled(const string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda):datum_pregleda(dan_pregleda, mjesec_pregleda, godina_pregleda),vrijeme_pregleda(sati_pregleda, minute_pregleda){
      Pregled::ime_pacijenta=ime_pacijenta;
}
  void PromijeniPacijenta(const string &amp;ime_pacijenta){
      Pregled::ime_pacijenta=ime_pacijenta;
  }
  void PromijeniDatum(const Datum &amp;novi_datum){
       auto t1=novi_datum.Datum::Ocitaj();
       datum_pregleda.Datum::Postavi(get&lt;0&gt;(t1), get&lt;1&gt;(t1), get&lt;2&gt;(t1));
  }
  void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
      auto t2=novo_vrijeme.Vrijeme::Ocitaj();
      Pregled::vrijeme_pregleda.Vrijeme::Postavi(t2.first,t2.second);
  }
  void PomjeriDanUnaprijed(){
      auto t1=Pregled::datum_pregleda.Datum::Ocitaj();
      datum_pregleda.Datum::Postavi(get&lt;0&gt;(t1)+1, get&lt;1&gt;(t1), get&lt;2&gt;(t1));
  }
  void PomjeriDanUnazad(){                                                                  //prelazi mjesec..
      auto t1=Pregled::datum_pregleda.Datum::Ocitaj();
      datum_pregleda.Datum::Postavi(get&lt;0&gt;(t1)-1, get&lt;1&gt;(t1), get&lt;2&gt;(t1));
  }
  string DajImePacijenta() const{
      return Pregled::ime_pacijenta;
  }
  Datum DajDatumPregleda() const{
      return Pregled::datum_pregleda;
  }
  Vrijeme DajVrijemePregleda() const{
      return Pregled::vrijeme_pregleda;
  }
  static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
      auto t1=p1.DajDatumPregleda();
      auto t2=p2.DajDatumPregleda();
      return true;
  }
  void Ispisi() const{
      cout&lt;&lt;Pregled::ime_pacijenta;
      Pregled::datum_pregleda.Datum::Ispisi();
      Pregled::vrijeme_pregleda.Vrijeme::Ispisi();
      cout&lt;&lt;endl;
  }
 
 friend class Pregledi;
};

class Pregledi {
int broj_pregleda;
int mbp;
Pregled **p{};
Pregledi()=default;
void Alociraj(int br) {
    p=nullptr;
    try {
        p=new Pregled*[br];
    }catch(...) {
        IsprazniKolekciju();
        throw;
    }
}
public:
explicit Pregledi(int max_pregleda) : broj_pregleda(0), mbp(max_pregleda) {Alociraj(mbp);}
Pregledi(initializer_list&lt;Pregled&gt; spisak_pregleda) : broj_pregleda(spisak_pregleda.size()), mbp(spisak_pregleda.size()) {
    
    try {
        p=new Pregled*[broj_pregleda];
        for(int i=0; i&lt;broj_pregleda; i++) p[i]=nullptr;
            int molim_te=-1;
        for(auto &amp;molim_te_lijepo : spisak_pregleda) p[++molim_te]=new Pregled(molim_te_lijepo);
    }catch(...){
        IsprazniKolekciju();
        throw;
    }
}
~Pregledi() {
    for(int i=0; i&lt;mbp; i++) delete p[i];
    delete[] p;
}
Pregledi(const Pregledi &amp;p) : broj_pregleda(p.broj_pregleda), mbp(p.mbp) {
    Alociraj(mbp);
    try {
        for(int i=0; i&lt;broj_pregleda; i++) this-&gt;p[i]=new Pregled(*p.p[i]);
    }catch(...) {
        IsprazniKolekciju();
        throw;
    }
}
Pregledi(Pregledi &amp;&amp;p1) : broj_pregleda(p1.broj_pregleda), mbp(p1.mbp) {
    this-&gt;p=p1.p;
    p1.p=nullptr;
}
Pregledi &amp;operator =(const Pregledi &amp;p1) {
    if(mbp!=p1.mbp) throw logic_error("Nesaglasne liste pregleda");
    if(&amp;p1==this) return *this;
    
    try {
        for(int i=0; i&lt;mbp; i++) this-&gt;p[i]=new Pregled(*p1.p[i]);
    }catch(...) {
        IsprazniKolekciju();
        throw;
    }
}
Pregledi &amp;operator =(Pregledi &amp;&amp;p) {
    if(mbp!=p.mbp) throw logic_error("Nesaglasne liste pregleda");
    if(&amp;p==this) return *this;
    
    this-&gt;p=p.p;
    broj_pregleda=p.broj_pregleda;
    p.p=nullptr;
}
void RegistrirajPregled(const string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
    if(broj_pregleda==mbp) throw range_error("“Dostignut maksimalni broj pregleda");
    try {
        p[broj_pregleda++]=new Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
    }catch(bad_alloc) {
        broj_pregleda--;
        throw logic_error("Nema dovoljno memorije!");
    }catch(...) {
        broj_pregleda--;
        throw;
    }
}
void RegistrirajPregled(const string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
    if(broj_pregleda==mbp) throw range_error("“Dostignut maksimalni broj pregleda");
    try {
        p[broj_pregleda++]=new Pregled(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
    }catch(bad_alloc) {
        broj_pregleda--;
        throw logic_error("Nema dovoljno memorije!");
    }catch(...) {
        broj_pregleda--;
        throw;
    }
}
void RegistrirajPregled(Pregled *pregled) {
     if(broj_pregleda==mbp) throw range_error("“Dostignut maksimalni broj pregleda");
     try {
         p[broj_pregleda++]=pregled;
     }catch(bad_alloc) {
        broj_pregleda--;
        throw logic_error("Nema dovoljno memorije!");
    }catch(...) {
        broj_pregleda--;
        throw;
    }
}
int DajBrojPregleda() const {
    if(broj_pregleda==0) throw domain_error("Nema registriranih pregleda");
    return broj_pregleda;
}
int DajBrojPregledaNaDatum(const Datum &amp;datum) const {
    if(broj_pregleda==0) throw domain_error("Nema registriranih pregleda");
    return count_if(p, p+broj_pregleda, [&amp;](Pregled *pregled) {
        return (pregled-&gt;DajDatumPregleda().DajDan()==datum.DajDan() &amp;&amp; pregled-&gt;DajDatumPregleda().DajMjesec()==datum.DajMjesec() &amp;&amp; pregled-&gt;DajDatumPregleda().DajGodinu()==datum.DajGodinu());
    });
}
Pregled &amp;DajNajranijiPregled();
Pregled DajNajranijiPregled() const;
void IsprazniKolekciju() {
    if(p==nullptr) return;
    for(int i=0; i&lt;broj_pregleda; i++) delete p[i];
    delete[] p;
}
void ObrisiNajranijiPregled() {
    if(broj_pregleda==0) throw range_error("Prazna kolekcija");
    Pregled pregled=Pregledi::DajNajranijiPregled();
    Pregledi temp_pregledi = Pregledi(mbp);
    int brojac=0;
    for (int i=0; i&lt;broj_pregleda; i++) {
        auto a=p[i];
        if (a-&gt;DajImePacijenta()==pregled.DajImePacijenta() &amp;&amp; a-&gt;DajDatumPregleda().DajDan()==pregled.DajDatumPregleda().DajDan() &amp;&amp; a-&gt;DajDatumPregleda().DajMjesec()==pregled.DajDatumPregleda().DajMjesec() &amp;&amp; a-&gt;DajDatumPregleda().DajGodinu()==pregled.DajDatumPregleda().DajGodinu() &amp;&amp; a-&gt;DajVrijemePregleda().DajSate()==pregled.DajVrijemePregleda().DajSate() &amp;&amp; pregled.DajVrijemePregleda().DajMinute() == pregled.DajVrijemePregleda().DajMinute()) continue;
        temp_pregledi.p[brojac++] = p[i];
    }
    copy(temp_pregledi.p, temp_pregledi.p+mbp, p);
    broj_pregleda--;
}
void ObrisiPregledePacijenta(const string &amp;ime_pacijenta) {
    if(broj_pregleda==0) range_error("Prazna kolekcija");
    if(broj_pregleda&gt;0) {
        Pregledi temp=Pregledi(mbp);
        int brojac=0;
        for(int i=0; i&lt;broj_pregleda; i++) {
            if(p[i]-&gt;DajImePacijenta()==ime_pacijenta) continue;
            temp.p[brojac++]=p[i];
        }
        broj_pregleda=brojac;
        copy(temp.p, temp.p+mbp, p);
    }
}
void IspisiPregledeNaDatum(const Datum &amp;datum) const {
    bool ima_pregleda(false);
    for(int i = 0; i &lt; broj_pregleda; i++) {
        if(p[i]-&gt;DajDatumPregleda().DajDan() == datum.DajDan() &amp;&amp; p[i]-&gt;DajDatumPregleda().DajMjesec() == datum.DajMjesec() &amp;&amp; p[i]-&gt;DajDatumPregleda().DajGodinu() == datum.DajGodinu()) {
            (*p[i]).Ispisi();
            cout &lt;&lt; endl;
            ima_pregleda = true;
        }
    }
    if(!ima_pregleda) throw "Nema pregleda na traženi dan!\n"; 
}
void IspisiSvePreglede() const {
    bool ima_pregleda(false);
    for(int i = 0; i &lt; broj_pregleda; i++) {
        (*p[i]).Ispisi();
        cout &lt;&lt; endl;
        ima_pregleda = true;
    }
    if(!ima_pregleda) throw "Nema pregleda!\n"; 
}

};

Pregled &amp;Pregledi::DajNajranijiPregled() {
    if(broj_pregleda==0) throw domain_error("Nema registriranih pregleda");
    Pregled *najraniji(p[0]);
    for(int i = 1; i &lt; broj_pregleda; i++) {
        if(Pregled::DolaziPrije(*p[i], *najraniji)) najraniji = p[i];
    }
    return *najraniji;
}
Pregled Pregledi::DajNajranijiPregled() const {
    if(broj_pregleda==0) throw domain_error("Nema registriranih pregleda");
    Pregled *najraniji(p[0]);
    for(int i = 1; i &lt; broj_pregleda; i++) {
        if(Pregled::DolaziPrije(*p[i], *najraniji)) najraniji = p[i];
    }
    return *najraniji;
}



int main (){
</font>   
	return 0;
}
</pre>
</body>
</html>
