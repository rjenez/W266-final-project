<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4824.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4389.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match179-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
class Datum {
    int d, m,g;
    public:
    Datum (int dan, int mjesec, int godina){
        Datum::d=dan;
        Datum::m=mjesec;
        Datum::g=godina;
        
    }
    void Postavi( int dan, int mjesec, int godina){
        Datum::d=dan;
        Datum::m=mjesec;
        Datum::g=godina;
    }
    std::tuple&lt;int, int, int&gt;Ocitaj() const {return std::tie(d,m,g);}
    void Ispisi() const {
</font><a name="2"></a><font color="#0000FF"><a href="match179-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        std::cout&lt;&lt;d&lt;&lt;"/"&lt;&lt;m&lt;&lt;"/"&lt;&lt;g;
    }
    
};

class Vrijeme{
    int h, m;
    public:
    Vrijeme ( int sati, int minute){
        Vrijeme::h=sati;
        Vrijeme::m=minute;
    }
    void Postavi( int sati, int minute){
        Vrijeme::h=sati;
        Vrijeme::m=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj() const { return std::make_pair(h, m); }
    void Ispisi() const {
        std::cout&lt;&lt;h&lt;&lt;":"&lt;&lt;m;
    }
    };
    
class Pregled {
    std::string ime_p;
    Datum datum_p;
    Vrijeme vrijeme_p;
    public:
    
    Pregled ( const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda): 
</font>    ime_p(ime_pacijenta), datum_p(datum_pregleda), vrijeme_p(vrijeme_pregleda) {}
    
    
<a name="0"></a><font color="#FF0000"><a href="match179-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_75.gif"/></a>

    Pregled( const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda,
    int sati_pregleda, int minute_pregleda): 
    ime_p(ime_pacijenta),
    datum_p(Datum(dan_pregleda, mjesec_pregleda, godina_pregleda)),
    vrijeme_p(Vrijeme(sati_pregleda, minute_pregleda))
        
    {}


    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_p=ime_pacijenta;
    }
    void PromijeniDatum( const Datum &amp;novi_datum) {
        Pregled::datum_p=novi_datum;
    }
    void PromijeniVrijeme( const Vrijeme &amp;novo_vrijeme) {
        Pregled::vrijeme_p=novo_vrijeme;
    }
  void PomjeriDanUnaprijed(){
      int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
      std::tuple&lt;int, int, int&gt; datum(this-&gt;datum_p.Ocitaj());
      std::get&lt;0&gt;(datum)++;
 
  }
    void PomjeriDanUnazad() {
        std::tuple&lt;int, int , int&gt; datum=datum_p.Ocitaj();
        std::get&lt;0&gt;(datum)++;
    
   }
    std::string DajImePacijenta() const { return ime_p;};
    Datum DajDatumPregleda() const { return datum_p; };
    Vrijeme DajVrijemePregleda() const { return vrijeme_p; };
    

   
   void Ispisi() {
       std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime_p;
       datum_p.Ispisi();
       std::cout&lt;&lt;" ";
       vrijeme_p.Ispisi();
       std::cout&lt;&lt;std::endl;
   }
    
};
class Pregledi {
    int max_broj_p;
    int broj_pregleda;
    Pregled **pr;
    public:
    
    explicit Pregledi( int max_broj_pregleda): max_broj_p(max_broj_pregleda),broj_pregleda(0),pr(nullptr){
        try{
        pr=new Pregled*[max_broj_pregleda];
        for( int i=0; i&lt;max_broj_pregleda; i++){
            pr[i]=nullptr;
        }
        }catch(...){
            for( int i=0; i&lt;max_broj_pregleda; i++){
                delete pr[i];
            }
            delete [] pr;
            throw;
        }
        
    }
    Pregledi( std::initializer_list&lt;Pregled&gt; spisak_pregleda): max_broj_p(spisak_pregleda.size()), pr(nullptr),
    broj_pregleda(spisak_pregleda.size()){
        pr=new Pregled*[broj_pregleda];
        for( int i=0; i&lt;broj_pregleda; i++){
            pr[i]=nullptr;
        }
        int p(0);
        for( auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++){
            pr[p]= new Pregled(*it);
            p++;
        }
        
    }
    Pregledi( const Pregledi &amp;pregledi): max_broj_p(pregledi.max_broj_p), broj_pregleda(pregledi.broj_pregleda),
    pr(new Pregled*[pregledi.max_broj_p]{}){
    try{
    for( int i=0; i&lt;pregledi.broj_pregleda; i++){
        pr[i]=nullptr;
        pr[i]=new Pregled(*pregledi.pr[i]);
    }
    
}catch(...){
    for( int i=0; i&lt;pregledi.broj_pregleda; i++){
        delete pr[i];
    }
    delete[] pr;
    throw;
}
    
}
   Pregledi(Pregledi &amp;&amp;pregledi): max_broj_p(pregledi.max_broj_p), broj_pregleda(pregledi.broj_pregleda){
        std::swap(broj_pregleda,pregledi.broj_pregleda);
        std::swap(pr, pregledi.pr);
    }
    
    
    Pregledi &amp;operator= ( const Pregledi &amp;pregledi) {
        broj_pregleda=pregledi.broj_pregleda;
        for( int i=0; i&lt;broj_pregleda; i++){
            *pr[i]=*pregledi.pr[i];
        }
        return *this;
        
    }
    Pregledi &amp;operator =( Pregledi &amp;&amp;pregledi){ 
        broj_pregleda=pregledi.broj_pregleda;
        std::swap(broj_pregleda, pregledi.broj_pregleda);
        std::swap(pr,pregledi.pr);
        return *this;
    }
    void RegistrirajPregled( const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        if(broj_pregleda&gt;=max_broj_p) throw std::range_error("Dostignut maksimalan broj pregleda");
        try {
            pr[broj_pregleda]=new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
            broj_pregleda++;
    }catch(...){
        for( int i=0; i&lt;broj_pregleda+1; i++){
            delete pr[i];
        }
        delete[] pr;
    }
        
    }
    ~Pregledi(){
        for( int i=0; i&lt;broj_pregleda+1; i++){
            delete pr[i];
        }
        delete[] pr;
    }
    void RegistrirajPregled( const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda){
        Datum datum_p(dan_pregleda, mjesec_pregleda,godina_pregleda);
        Vrijeme vrijeme_p(sati_pregleda, minute_pregleda);
        
        try{
            pr[broj_pregleda]=new Pregled(ime_pacijenta, datum_p, vrijeme_p);
             broj_pregleda++;
        }
        catch(...){
            for( int i=0; i&lt;broj_pregleda; i++){
                delete[] pr[i];
                
            }
            delete[] pr;
        }
    }
    void RagistrirajPregled( Pregled *pregled){
        try{
            *pr[broj_pregleda]=*pregled;
            broj_pregleda++;
        }
        catch(...){
            for( int i=0; i&lt;broj_pregleda; i++){
                delete[] pr[i];
            }
            delete[] pr;
        }
    }
    int DajBrojPregleda() const { return broj_pregleda;}
    int DajBrojPregledaNaDatum( Datum &amp;datum) const {
        int broj_pr_d(0);
        std::tuple&lt;int, int, int&gt; dat_p(datum.Ocitaj());
        std::count_if (pr, pr+broj_pregleda, [&amp;dat_p]( Pregled *p )-&gt;bool{ 
            std::tuple&lt;int,int,int&gt; dat(p-&gt;DajDatumPregleda().Ocitaj());
            return (std::get&lt;0&gt;(dat)==std::get&lt;0&gt;(dat_p) &amp;&amp; std::get&lt;1&gt;(dat)==std::get&lt;1&gt;(dat_p) &amp;&amp; std::get&lt;2&gt;(dat)==std::get&lt;2&gt;(dat_p)); 
            
    });
    }
    Pregled &amp;DajNajranijiPregled() {
        std::sort(pr , pr+broj_pregleda, []( Pregled *p1, Pregled *p2 ){
         std::tuple&lt;int, int, int&gt;d1(p1-&gt;DajDatumPregleda().Ocitaj());
           std::tuple&lt;int, int, int&gt;d2(p2-&gt;DajDatumPregleda().Ocitaj());
           
           std::pair&lt;int,int&gt;v1((p1-&gt;DajVrijemePregleda()).Ocitaj());
           std::pair&lt;int, int&gt;v2((p2-&gt;DajVrijemePregleda()).Ocitaj());
           if(std::get&lt;2&gt;(d1)==std::get&lt;2&gt;(d2)){
               if(std::get&lt;1&gt;(d1)==std::get&lt;1&gt;(d2)){
                   if(std::get&lt;0&gt;(d1)!=std::get&lt;0&gt;(d1)){
                       return std::get&lt;0&gt;(d1)&lt;std::get&lt;0&gt;(d2);
                       
                   }
                       else { 
                           if(v1.first==v2.first){
                               if(v1.second!=v2.second) return v1.second&lt;v2.second;
                           }
                           else return v1.first&lt;v2.first;
                   }
               }
                 
                   else if(std::get&lt;1&gt;(d1)!=std::get&lt;1&gt;(d2)) return std::get&lt;1&gt;(d1)&lt;std::get&lt;1&gt;(d2);
           }
               else return std::get&lt;2&gt;(d1)&lt;std::get&lt;2&gt;(d2);
          } );
    }
    
   void IsprazniKolekciju() {
       for( int i=0; i&lt;broj_pregleda; i++){
           pr[i]=nullptr;
       }
   }
   void ObrisiNajranijiPregled() {
      Pregled *naj(*std::min_element(pr, pr+broj_pregleda, [](Pregled *p1, Pregled *p2){
         std::tuple&lt;int, int, int&gt;d1(p1-&gt;DajDatumPregleda().Ocitaj());
           std::tuple&lt;int, int, int&gt;d2(p2-&gt;DajDatumPregleda().Ocitaj());
           
           std::pair&lt;int,int&gt;v1((p1-&gt;DajVrijemePregleda()).Ocitaj());
           std::pair&lt;int, int&gt;v2((p2-&gt;DajVrijemePregleda()).Ocitaj());
           if(std::get&lt;2&gt;(d1)==std::get&lt;2&gt;(d2)){
               if(std::get&lt;1&gt;(d1)==std::get&lt;1&gt;(d2)){
                   if(std::get&lt;0&gt;(d1)!=std::get&lt;0&gt;(d1)){
                       return std::get&lt;0&gt;(d1)&lt;std::get&lt;0&gt;(d2);
                       
                   }
                       else { 
                           if(v1.first==v2.first){
                               if(v1.second!=v2.second) return v1.second&lt;v2.second;
                           }
                           else return v1.first&lt;v2.first;
                   }
               }
                 
                   else return std::get&lt;1&gt;(d1)&lt;std::get&lt;1&gt;(d2);
           }
               else return std::get&lt;2&gt;(d1)&lt;std::get&lt;2&gt;(d2);
          } ));
       
   std::pair&lt;int, int&gt;naj_p(naj-&gt;DajVrijemePregleda().Ocitaj());
   for( int i=0; i&lt;broj_pregleda; i++){
       std::pair&lt;int, int&gt;p_v(pr[i]-&gt;DajVrijemePregleda().Ocitaj());
       if(naj_p.first==p_v.first &amp;&amp; naj_p.second==p_v.second){
           std::swap(pr[i],pr[broj_pregleda-1]);
           broj_pregleda--;
       }
   }
    
}
           
           
           
           
       
   
   void ObrisiSvePregledePacijenta(const std::string ime_pacijenta) {
       for( int i=0; i&lt;broj_pregleda; i++){
          if( (pr[i]-&gt;DajImePacijenta())==ime_pacijenta){
              std::swap(pr[i], pr[broj_pregleda-1]);
              broj_pregleda--;
           }
               
       }
       
       
   }
   
   
   void IspisiSvePreglede() const {
       std::sort(pr , pr+broj_pregleda, []( Pregled *p1, Pregled *p2 ){
           
           std::tuple&lt;int, int, int&gt;d1(p1-&gt;DajDatumPregleda().Ocitaj());
           std::tuple&lt;int, int, int&gt;d2(p2-&gt;DajDatumPregleda().Ocitaj());
           
           std::pair&lt;int,int&gt;v1((p1-&gt;DajVrijemePregleda()).Ocitaj());
           std::pair&lt;int, int&gt;v2((p2-&gt;DajVrijemePregleda()).Ocitaj());
           if(std::get&lt;2&gt;(d1)==std::get&lt;2&gt;(d2)){
               if(std::get&lt;1&gt;(d1)==std::get&lt;1&gt;(d2)){
                   if(std::get&lt;0&gt;(d1)!=std::get&lt;0&gt;(d1)){
                       return std::get&lt;0&gt;(d1)&lt;std::get&lt;0&gt;(d2);
                       
                   }
                       else { 
                           if(v1.first==v2.first){
                               if(v1.second!=v2.second) return v1.second&lt;v2.second;
                           }
                           else return v1.first&lt;v2.first;
                   }
               }
                 
                   else if(std::get&lt;1&gt;(d1)!=std::get&lt;1&gt;(d2)) return std::get&lt;1&gt;(d1)&lt;std::get&lt;1&gt;(d2);
           }
               else return std::get&lt;2&gt;(d1)&lt;std::get&lt;2&gt;(d2);
          } );
           for( int i=0; i&lt;broj_pregleda; i++){
               pr[i]-&gt;Ispisi();
           }
           
       }
};  

int main ()
{
    int max_br_pregleda(0);
    int dan(1), mjesec(1), godina(1), sati(0), minute(0);
    std::string unos;
    try{
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    std::cin&gt;&gt;max_br_pregleda;
    
    
    Pregledi pr(max_br_pregleda);
    for( int i=0; i&lt;max_br_pregleda; i++){
        std::cin.ignore(1000, '\n');
        std::cin.clear();
    std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
    std::getline(std::cin, unos);
    if(unos=="kraj") break;
    std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
    std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
    Datum datum(dan,mjesec,godina);
    std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
    std::cin&gt;&gt;sati&gt;&gt;minute;
    Vrijeme vrijeme(sati, minute);
    pr.RegistrirajPregled(unos, datum, vrijeme);
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi "&lt;&lt;std::endl;
    pr.IspisiSvePreglede(); 
    std::cout&lt;&lt;std::endl;
    int opcija(0);
    while(opcija!=7){
    std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl;
    std::cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl;
</font>    std::cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl;
    std::cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl;
    std::cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl;
    std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match179-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_12.gif"/></a>

    std::cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl;
    std::cout&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
    std::cin&gt;&gt;opcija;
    if(opcija==1){
        std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
        std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
        Datum d(Datum(dan, mjesec, godina));
        int broj_pregleda(pr.DajBrojPregledaNaDatum(d));
        std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" je: "&lt;&lt;broj_pregleda&lt;&lt;std::endl&lt;&lt;std::endl;
    }  else if(opcija==2){
        std::cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;std::endl;
        (pr.DajNajranijiPregled()).Ispisi();
    } else if(opcija==4){
       pr.ObrisiNajranijiPregled();
        std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl&lt;&lt;std::endl;
    }else if(opcija==3){
        std::cin.ignore(10000, '\n');
        std::cin.clear();
        std::cout&lt;&lt;"Unesite ime pacijenta: ";
        std::string ime_pacijenta;
        std::getline(std::cin, ime_pacijenta);
       pr.ObrisiSvePregledePacijenta(ime_pacijenta);
        std::cout&lt;&lt;"Uspjesno obrisano 1 pregleda"&lt;&lt;std::endl&lt;&lt;std::endl;
        
    }else if(opcija==5){
        std::cout&lt;&lt;"Unesite dan mjesec i godinu: ";
        std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
        Datum d(Datum(dan, mjesec, godina));
        std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" su: "&lt;&lt;std::endl;
     //   pr.IspisiPregledeNaDatum(d);
    } else if(opcija==6){
        pr.IspisiSvePreglede();
        std::cout&lt;&lt;std::endl;
    }else if( opcija==7) break;
        
    }
        
    }catch(std::range_error izuzetak){
        std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
</font>    }
        
	return 0;
}
</pre>
</body>
</html>
