<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student9081.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student9416.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;cstring&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;initializer_list&gt;
#include &lt;new&gt;


class Datum
{
    int dan, mjesec, godina;

public:

    Datum(int dan=0, int mjesec=0, int godina=0) {
        Postavi(dan, mjesec, godina);
    }
    void Postavi(int d, int m, int g);

    std::tuple&lt;int, int, int&gt; Ocitaj() const {
<a name="7"></a><font color="#0000FF"><a href="match384-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        return std::make_tuple(dan, mjesec, godina);
    }
    void Ispisi() const {
        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};

void Datum::Postavi(int d, int m, int g)
{
    int broj_dana[12] {31,28,31,30,31,30,31,31,30,31,30,31};
</font>    if(g%4 == 0 &amp;&amp; g%100 != 0 || g%400 == 0) broj_dana[1]++;
    if(g&lt;1 || d&lt;1 || m&lt;1 || m&gt;12 || d&gt;broj_dana[m-1]) throw std::domain_error("Neispravan datum");
    dan=d;
    mjesec=m;
    godina=g;
}

class Vrijeme
{
    int sati, minute;
public:
    Vrijeme(int sati=0, int minute=0) {
<a name="6"></a><font color="#00FF00"><a href="match384-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        Postavi(sati, minute);
    }
    void Postavi(int s, int m);
    std::pair&lt;int, int&gt; Ocitaj() const {
        return std::make_pair(sati, minute);
    }
    void Ispisi() const {
        std::cout&lt;&lt;std::right&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;sati&lt;&lt;":"&lt;&lt;std::right&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;minute;
</font><a name="4"></a><font color="#FF00FF"><a href="match384-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    }
};

void Vrijeme::Postavi(int sati, int minute)
{
    if (sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
    Vrijeme::sati=sati;
    Vrijeme::minute=minute;
}

class Pregled
{
    std::string ime_p;
    Datum datum_p;
    Vrijeme vrijeme_p;
</font>

public:
    Pregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):
        ime_p(ime_pacijenta), datum_p(datum_pregleda), vrijeme_p(vrijeme_pregleda) {}

<a name="2"></a><font color="#0000FF"><a href="match384-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    Pregled (const std::string &amp;ime_pacijenta, int d, int m, int g,
             int sati, int minute) : ime_p(ime_pacijenta), datum_p(Datum(d,m,g)), vrijeme_p(Vrijeme(sati,minute)) {}

    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        ime_p=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        datum_p=novi_datum;

    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
</font>        vrijeme_p=novo_vrijeme;
    }
    void PomjeriDanUnaprijed() {

        int d=std::get&lt;0&gt;(datum_p.Ocitaj());
        int m=std::get&lt;1&gt;(datum_p.Ocitaj());
        int g=std::get&lt;2&gt;(datum_p.Ocitaj());
        d+=1;
        int broj_dana[12] {31,28,31,30,31,30,31,31,30,31,30,31};
        if(g%4 == 0 &amp;&amp; g%100 != 0 || g%400 == 0) broj_dana[1]++;

        if(d&gt;broj_dana[m-1]) {
            d=1;
            m++;

            if(m&gt;12) {
                m=1;
                g++;
            }
        }
        datum_p.Postavi(d,m,g);
    }

    void PomjeriDanUnazad() {
        int d=std::get&lt;0&gt;(datum_p.Ocitaj());
        int m=std::get&lt;1&gt;(datum_p.Ocitaj());
        int g=std::get&lt;2&gt;(datum_p.Ocitaj());
        d-=1;
        int broj_dana[12] {31,28,31,30,31,30,31,31,30,31,30,31};
        if(g%4 == 0 &amp;&amp; g%100 != 0 || g%400 == 0) broj_dana[1]++;

        if(d==0) {
            m--;
            if(m==0) {
                m=12;
                g--;
            }
            d=broj_dana[m-1];
        }
        datum_p.Postavi(d,m,g);
    }


    std::string DajImePacijenta() const {
        return ime_p;
    }
    Datum DajDatumPacijenta() const {
        return datum_p;
    }
    Vrijeme DajVrijemePacijenta() const {
        return vrijeme_p;
    }

    static bool DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2) {
        if (std::get&lt;2&gt;(p1.datum_p.Ocitaj()) == std::get&lt;2&gt;(p2.datum_p.Ocitaj())) {
            if(std::get&lt;1&gt;(p1.datum_p.Ocitaj()) == std::get&lt;1&gt;(p2.datum_p.Ocitaj())) {
                if (std::get&lt;0&gt;(p1.datum_p.Ocitaj()) == std::get&lt;0&gt;(p2.datum_p.Ocitaj())) {
                    if(p1.vrijeme_p.Ocitaj().first == p2.vrijeme_p.Ocitaj().first ) {
                        if(p1.vrijeme_p.Ocitaj().second &lt; p2.vrijeme_p.Ocitaj().second ) return true;
                        else return false;
                    }
                    return p1.vrijeme_p.Ocitaj().first &lt; p2.vrijeme_p.Ocitaj().first;
                }
                return std::get&lt;0&gt;(p1.datum_p.Ocitaj()) &lt; std::get&lt;0&gt;(p2.datum_p.Ocitaj());
            }
            return std::get&lt;1&gt;(p1.datum_p.Ocitaj()) &lt; std::get&lt;1&gt;(p2.datum_p.Ocitaj());

        }
        return std::get&lt;2&gt;(p1.datum_p.Ocitaj()) &lt; std::get&lt;2&gt;(p2.datum_p.Ocitaj());
    }


    void Ispisi() const {
<a name="5"></a><font color="#FF0000"><a href="match384-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::cout&lt;&lt; std::left &lt;&lt; std::setw(30) &lt;&lt;std::setfill(' ') &lt;&lt;DajImePacijenta();
        DajDatumPacijenta().Ispisi();
        std::cout&lt;&lt;" ";
        DajVrijemePacijenta().Ispisi();
        std::cout&lt;&lt;std::endl;
    }

};

class Pregledi
</font>{

    int max_broj_pregleda;
    int broj_pregleda;
    Pregled **pregledi;

    static bool JednakiDatumi(Datum d1, Datum d2) {
        if(std::get&lt;0&gt;(d1.Ocitaj())==std::get&lt;0&gt;(d2.Ocitaj()) &amp;&amp; std::get&lt;1&gt;(d1.Ocitaj())==std::get&lt;1&gt;(d2.Ocitaj()) &amp;&amp;
                std::get&lt;2&gt;(d1.Ocitaj())==std::get&lt;2&gt;(d2.Ocitaj())) return true;
        return false;
    }
    static bool JednakaVremena(Vrijeme v1, Vrijeme v2) {
        if(v1.Ocitaj().first == v2.Ocitaj().first &amp;&amp; v1.Ocitaj().second == v2.Ocitaj().second) return true;
        return false;
    }

public:
    explicit Pregledi (int max_broj_p) :  max_broj_pregleda(max_broj_p), broj_pregleda(0), pregledi(new Pregled *[max_broj_p] {}) {}

    Pregledi (std::initializer_list&lt;Pregled&gt; spisak_pregleda) : max_broj_pregleda(spisak_pregleda.size()),
        broj_pregleda(spisak_pregleda.size()), pregledi(new Pregled *[spisak_pregleda.size()] {}) {
        try {
            int i(0);
            for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) {
                pregledi[i]=new Pregled(*it);
                i++;
            }
        } catch(...) {
            for(int i=0; i&lt;broj_pregleda; i++) delete pregledi[i];
            delete[] pregledi;
            pregledi=nullptr;
            throw;
        }
    }

    ~Pregledi() {
        for(int i=0; i&lt;broj_pregleda; i++) delete pregledi[i];
        delete[] pregledi;
        pregledi = nullptr;
    }

    Pregledi(const Pregledi &amp;p) : pregledi(new Pregled *[p.max_broj_pregleda] {}), max_broj_pregleda(p.max_broj_pregleda),
    broj_pregleda(p.broj_pregleda) {
        try {
            for(int i=0; i&lt;p.broj_pregleda; i++)
                pregledi[i]=new Pregled(*p.pregledi[i]);
        } catch(...) {
            for(int i=0; i&lt;p.broj_pregleda; i++) delete pregledi[i];
            delete[] pregledi;
            pregledi=nullptr;
            throw;
        }
    }

    Pregledi(Pregledi &amp;&amp;p) : pregledi(p.pregledi), max_broj_pregleda(p.max_broj_pregleda), broj_pregleda(p.broj_pregleda) {
        p.pregledi=nullptr;
        p.broj_pregleda=0;
    }

    Pregledi &amp;operator=(const Pregledi &amp;p) {
        if(p.broj_pregleda&gt;=broj_pregleda) {
            try {
                for(int i=broj_pregleda; i&lt;p.broj_pregleda; i++)
                    pregledi[i]=new Pregled(*p.pregledi[i]);
            } catch(...) {
                for(int i=broj_pregleda; i&lt;p.broj_pregleda; i++) {
                    delete pregledi[i];
                    pregledi[i]=nullptr;
                }
                throw;
            }
        } else {
            for(int i=p.broj_pregleda; i&lt;broj_pregleda; i++) {
                delete pregledi[i];
                pregledi[i]=nullptr;
            }
        }
        broj_pregleda=p.broj_pregleda;
        for(int i=0; i&lt;broj_pregleda; i++) *pregledi[i]=*p.pregledi[i];
        return *this;
    }

    Pregledi &amp;operator = (Pregledi &amp;&amp;p) {
        std::swap(broj_pregleda, p.broj_pregleda);
        std::swap(pregledi, p.pregledi);
        p.pregledi=nullptr;
        p.broj_pregleda=0;
        return *this;
    }

    void RegistrirajPregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        if(broj_pregleda&gt;=max_broj_pregleda) throw std::range_error ("Dostignut maksimalni broj pregleda");
        pregledi[broj_pregleda++] = new Pregled(Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda));

        std::sort (pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
    }

    void RegistrirajPregled (const std::string &amp;ime_pacijenta, int d, int m, int g, int sati, int minute) {
        if(broj_pregleda&gt;=max_broj_pregleda) throw std::range_error ("Dostignut maksimalni broj pregleda");
        pregledi[broj_pregleda++] =new Pregled(Pregled(ime_pacijenta, Datum(d,m,g), Vrijeme(sati,minute)));

        std::sort (pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
    }

    void RegistrirajPregled(Pregled *p) {
        if(broj_pregleda&gt;=max_broj_pregleda) {
            delete p;
            throw std::range_error ("Dostignut maksimalni broj pregleda");
        }
        pregledi[broj_pregleda++] = p;

        std::sort (pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
    }

    int DajBrojPregleda() const {
        return broj_pregleda;
    }
    int DajBrojPregledaNaDatum(const Datum &amp;d) const {
        return std::count_if(pregledi, pregledi+broj_pregleda, [d](Pregled *pok) {
            if(JednakiDatumi(pok-&gt;DajDatumPacijenta(), d)) return true;
            return false;
        });
    }

    Pregled &amp;DajNajranijiPregled() {
        if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
        auto pregled = std::min_element(pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
        return **pregled;
    }

    Pregled DajNajranijiPregled() const {
        if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
        auto pregled= std::min_element(pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
        return **pregled;

    }

    void IsprazniKolekciju() {
        for(int i=0; i&lt;broj_pregleda; i++) {
            delete pregledi[i];
            pregledi[i]=nullptr;
        }
        broj_pregleda=0;
    }

    void ObrisiNajranijiPregled() {
        if(broj_pregleda==0) throw std::range_error("Prazna kolekcija");
        for(int i=0; i&lt;broj_pregleda; i++) {
            if(JednakiDatumi(pregledi[i]-&gt;DajDatumPacijenta(),DajNajranijiPregled().DajDatumPacijenta()) &amp;&amp;
                    JednakaVremena(pregledi[i]-&gt;DajVrijemePacijenta(), DajNajranijiPregled().DajVrijemePacijenta())) {
                delete pregledi[i];
                pregledi[i]=nullptr;
                for(int j=i; j&lt;broj_pregleda-1; j++) pregledi[j]=pregledi[j+1];
                broj_pregleda--;

            }
        }
        std::sort (pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
    }


    void ObrisiPregledePacijenata(const std::string &amp;ime_pacijenta) {
        for(int i=0; i&lt;broj_pregleda; i++) {
            if(pregledi[i]-&gt;DajImePacijenta() == ime_pacijenta) {
                delete pregledi[i];
                pregledi[i]=nullptr;
                for(int j=i; j&lt;broj_pregleda-1; j++) pregledi[j]=pregledi[j+1];
                broj_pregleda--;
            }
        }
        std::sort (pregledi, pregledi+broj_pregleda, [](Pregled *p1, Pregled *p2) {
            return Pregled::DolaziPrije(*p1, *p2);
        });
    }


    void IspisiPregledeNaDatum(const Datum &amp;d) const {

        for (int i=0; i&lt;broj_pregleda; i++) {
            if(JednakiDatumi(pregledi[i]-&gt;DajDatumPacijenta(), d)) pregledi[i]-&gt;Ispisi();
        }
    }

    void IspisiSvePreglede() const {

        for (int i=0; i&lt;broj_pregleda; i++) {
            pregledi[i]-&gt;Ispisi();
        }
    }

};



<a name="0"></a><font color="#FF0000"><a href="match384-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

int main()
{
    
    int broj_pregleda;
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    std::cin&gt;&gt;broj_pregleda;
    Pregledi p(broj_pregleda);
    for(int i=0; i&lt;broj_pregleda; i++) {
        std::string ime_pacijenta;
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::cin.ignore(1000, '\n');
        std::getline(std::cin, ime_pacijenta);
        if(ime_pacijenta=="kraj") break;
        int dan, mjesec, godina, sati, minute;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        std::cin&gt;&gt;dan &gt;&gt;mjesec&gt;&gt; godina;
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        std::cin&gt;&gt;sati&gt;&gt;minute;
        p.RegistrirajPregled(ime_pacijenta, dan, mjesec, godina, sati, minute);
    }

    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
</font>    p.IspisiSvePreglede();
    std::cout&lt;&lt;std::endl;

    do {
        int opcija;
        std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl&lt;&lt;
                 "1 - Broj pregleda na datum"&lt;&lt;std::endl&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match384-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        std::cin&gt;&gt;opcija;
        if(opcija==1) {
            int d, m, g;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt; d &lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt; p.DajBrojPregledaNaDatum(Datum(d,m,g))&lt;&lt;std::endl;
        } else if(opcija==2) {
            std::cout&lt;&lt;"Najraniji pregled je:"&lt;&lt;std::endl;
</font>            p.DajNajranijiPregled().Ispisi();
<a name="3"></a><font color="#00FFFF"><a href="match384-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        } else if(opcija==3) {
            std::string ime;
            std::cout&lt;&lt;"Unesite ime pacijenta: ";
            std::cin.ignore(1000, '\n');
            std::getline(std::cin, ime);
            int brojpregleda(p.DajBrojPregleda());
            p.ObrisiPregledePacijenata(ime);
            std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;brojpregleda - p.DajBrojPregleda()&lt;&lt;" pregleda" &lt;&lt; std::endl;
</font>        } else if (opcija==4) {
            p.ObrisiNajranijiPregled();
            std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
<a name="8"></a><font color="#00FFFF"><a href="match384-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        } else if(opcija==5) {
            int d, m, g;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt; d &lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su:"&lt;&lt;std::endl;
</font>            p.IspisiPregledeNaDatum(Datum(d,m,g));

        } else if(opcija==6) p.IspisiSvePreglede();
        else if(opcija == 7) break;
        std::cout&lt;&lt;std::endl;
    } while(1);



    return 0;
}
</pre>
</body>
</html>
