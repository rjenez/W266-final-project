<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student7297.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student7297.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;iomanip&gt;
#include &lt;tuple&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;

class Datum{
    int d, m, g;
    public:
    Datum(int dan, int mjesec, int godina){ Postavi(dan, mjesec, godina);}
    void Postavi(int dan, int mjesec, int godina){
        int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if(godina%4==0 &amp;&amp; godina%100!=0 &amp;&amp; godina%400==0) broj_dana[1]++;
        if(dan&lt;1 || dan&gt;broj_dana[mjesec-1] || mjesec&lt;1 || mjesec&gt;12 || godina&lt;1) throw std::domain_error("Neispravan datum");
        Datum::d=dan; Datum::m=mjesec; Datum::g=godina;
    }
    
    std::tuple&lt;int, int, int&gt; Ocitaj() const{
        std::tuple&lt;int, int, int&gt; pomocni=std::make_tuple(d, m, g);
        
        return pomocni;
    }
    void Ispisi() const{
        std::cout&lt;&lt;d&lt;&lt;"/"&lt;&lt;m&lt;&lt;"/"&lt;&lt;g;
    }
};

class Vrijeme{
    int h, min;
    public:
    
    Vrijeme(int sati, int minute){Postavi(sati, minute);}
    void Postavi(int sati, int minute){
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
        Vrijeme::h=sati; Vrijeme::min=minute;
    }
    
    std::pair&lt;int, int&gt; Ocitaj() const{
        
        std::pair&lt;int, int&gt; pomocni=std::make_pair(h, min);
        return pomocni;
    }
    
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;h&lt;&lt;":"&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;min;
    }
};

class Pregled{
    std::string i_p;
    Datum dat;
    Vrijeme v;
    
    public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):i_p(ime_pacijenta), dat(datum_pregleda), v(vrijeme_pregleda){}
    
    
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda): dat(dan_pregleda, mjesec_pregleda, godina_pregleda), v(sati_pregleda, minute_pregleda){
        Pregled::i_p=ime_pacijenta;
    }
    
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta){
        Pregled::i_p=ime_pacijenta;
    }
    
    void PromijeniDatum(const Datum &amp;novi_datum){
        Pregled::dat=novi_datum;
    }
    
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
<a name="9"></a><font color="#FF00FF"><a href="match548-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        Pregled::v=novo_vrijeme;
    }
    
    void PomjeriDanUnaprijed(){
        int g=std::get&lt;2&gt;(dat.Ocitaj());
        int m=std::get&lt;1&gt;(dat.Ocitaj());
        int d=std::get&lt;0&gt;(dat.Ocitaj());
</font>        int broj_dana[]={31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if(g%4==0 &amp;&amp; g%100!=0 &amp;&amp; g%400==0) broj_dana[1]++;
        d++;
        if(d&gt;broj_dana[m-1]) d=1, m++;
        if(m&gt;12) m=1, g++;
    }
    
    void PomjeriDanUnazad(){
        int g=std::get&lt;2&gt;(dat.Ocitaj());
        int m=std::get&lt;1&gt;(dat.Ocitaj());
        int d=std::get&lt;0&gt;(dat.Ocitaj());
        int broj_dana[]={31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if(g%4==0 &amp;&amp; g%100!=0 &amp;&amp; g%400==0) broj_dana[1]++;
        d--;
        if(d==0) d=broj_dana[m-2]; m--;
        if(m==0) m=12; g--;
    }
    
    std::string DajImePacijenta() const{ return i_p;}
    Datum DajDatumPregleda() const { return dat;}
    Vrijeme DajVrijemePregleda() const { return v;}
    
    
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
        bool logicka(false);
        Datum dat1(p1.DajDatumPregleda());
        Datum dat2(p2.DajDatumPregleda());
        Vrijeme v1(p1.DajVrijemePregleda());
        Vrijeme v2(p2.DajVrijemePregleda());
        int g1=std::get&lt;2&gt;(dat1.Ocitaj());
        int m1=std::get&lt;1&gt;(dat1.Ocitaj());
        int d1=std::get&lt;0&gt;(dat1.Ocitaj());
        int g2=std::get&lt;2&gt;(dat2.Ocitaj());
        int m2=std::get&lt;1&gt;(dat2.Ocitaj());
        int d2=std::get&lt;0&gt;(dat2.Ocitaj());
        int h1=std::get&lt;0&gt;(v1.Ocitaj());
        int min1=std::get&lt;1&gt;(v1.Ocitaj());
        int h2=std::get&lt;0&gt;(v2.Ocitaj());
        int min2=std::get&lt;1&gt;(v2.Ocitaj());
        if(g1&lt;g2) logicka=true;
        if(g1==g2){
           if(m1&lt;m2){
               logicka=true;
           }
           else if(m1==m2){
               if(d1&lt;d2){
                   logicka=true;
               }
               else if(d1==d2){
                   if(h1&lt;h2){
                       logicka=true;
                   }
                   else if(h1==h2){
                       if(min1&lt;min2) logicka=true;
                   }
               }
           }
        }
        return logicka;
    }
    
    
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;DajImePacijenta()&lt;&lt;" "; DajDatumPregleda().Ispisi(); std::cout&lt;&lt;" ";DajVrijemePregleda().Vrijeme::Ispisi(); std::cout&lt;&lt;std::endl;
    }
    
};

class Pregledi{
    int max_broj_pregleda, br_pregleda;
    Pregled **pok;
   
    public:
<a name="3"></a><font color="#00FFFF"><a href="match548-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    explicit Pregledi(int max_broj_pregleda):max_broj_pregleda(max_broj_pregleda), br_pregleda(0), pok(new Pregled*[max_broj_pregleda]){}
    
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda):max_broj_pregleda(spisak_pregleda.size()), br_pregleda(spisak_pregleda.size()), pok(new Pregled*[spisak_pregleda.size()]){
</font>        int brojac_alociranih(0);
        try{
            for(Pregled x: spisak_pregleda) pok[brojac_alociranih++]=new Pregled(x);
        }
        catch(...){
            for(int i=0; i&lt;brojac_alociranih; i++) delete pok[i];
            throw;
        }
    }
    
    ~Pregledi(){ for(int i=0; i&lt;br_pregleda; i++) delete [] pok[i]; delete [] pok;}
    
    Pregledi(const Pregledi &amp;pregledi):max_broj_pregleda(pregledi.max_broj_pregleda), br_pregleda(pregledi.br_pregleda), pok(new Pregled*[pregledi.max_broj_pregleda]){
        std::copy(pregledi.pok, pregledi.pok+max_broj_pregleda, pok);
    }
    
<a name="10"></a><font color="#FF0000"><a href="match548-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    Pregledi (Pregledi &amp;&amp;pregledi): max_broj_pregleda(pregledi.max_broj_pregleda),br_pregleda(pregledi.br_pregleda), pok(pregledi.pok){ pregledi.pok=nullptr; pregledi.br_pregleda=0;}
    
    Pregledi &amp;operator =(const Pregledi &amp;pregledi){
</font>        max_broj_pregleda=pregledi.max_broj_pregleda; 
<a name="2"></a><font color="#0000FF"><a href="match548-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        for(int i=0; i&lt;pregledi.br_pregleda; i++) *pok[i]=*pregledi.pok[i];
        return *this;
    }
    
    Pregledi &amp;operator = (Pregledi &amp;&amp;pregledi){
        std::swap(max_broj_pregleda, pregledi.max_broj_pregleda);
        std::swap(br_pregleda, pregledi.br_pregleda);
</font>        std::swap(pok, pregledi.pok);
<a name="11"></a><font color="#00FF00"><a href="match548-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        return *this;
    }
    
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
        if(br_pregleda&gt;=max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
</font>        Pregled pomocna(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
        *pok[br_pregleda++]=pomocna;
        br_pregleda++;
<a name="0"></a><font color="#FF0000"><a href="match548-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::sort(pok, pok+br_pregleda, [](Pregled *p1, Pregled *p2){return Pregled::DolaziPrije(*p1, *p2);});
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan, int mjesec, int godina, int sati, int minute){
</font>        if(br_pregleda==max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
        Datum datum_p(dan, mjesec, godina);
        Vrijeme v_p(sati, minute);
        Pregled p(ime_pacijenta, datum_p, v_p);
        *pok[br_pregleda++]=p;
        br_pregleda++;
<a name="7"></a><font color="#0000FF"><a href="match548-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::sort(pok, pok+br_pregleda, [](Pregled *p1, Pregled *p2){return Pregled::DolaziPrije(*p1, *p2);});
    }
    void RegistrirajPregled(Pregled *pregled){
        if(br_pregleda&gt;=max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
</font>        pok[br_pregleda]=pregled; 
        br_pregleda++;
<a name="4"></a><font color="#FF00FF"><a href="match548-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        std::sort(pok, pok+br_pregleda, [](Pregled *p1, Pregled *p2){return Pregled::DolaziPrije(*p1, *p2);});
    }
    
    int DajBrojPregleda() const{ return br_pregleda;}
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const{
</font>      int broj=std::count_if(pok, pok+br_pregleda, [datum] (Pregled *po){ 
          Datum datum1(po-&gt;DajDatumPregleda());
          int g=std::get&lt;2&gt;(datum1.Ocitaj());
          int m=std::get&lt;1&gt;(datum1.Ocitaj());
          int d=std::get&lt;0&gt;(datum1.Ocitaj());
          return (g==std::get&lt;2&gt;(datum.Ocitaj()) &amp;&amp; m==std::get&lt;1&gt;(datum.Ocitaj()) &amp;&amp; d==std::get&lt;0&gt;(datum.Ocitaj()));});
          return broj;
    }
    
<a name="8"></a><font color="#00FFFF"><a href="match548-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    Pregled &amp;DajNajranijiPregled(){
        if(br_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
       auto p=std::min_element(pok, pok+br_pregleda, [](Pregled *p1, Pregled *p2){ 
            Datum d1(p1-&gt;DajDatumPregleda());
</font>            Datum d2(p2-&gt;DajDatumPregleda());
            Vrijeme v1(p1-&gt;DajVrijemePregleda());
            Vrijeme v2(p2-&gt;DajVrijemePregleda());
            int h1=std::get&lt;0&gt;(v1.Ocitaj());
            int h2=std::get&lt;0&gt;(v2.Ocitaj());
            int minute1=std::get&lt;1&gt;(v1.Ocitaj());
            int minute2=std::get&lt;1&gt;(v2.Ocitaj());
            int g1=std::get&lt;2&gt;(d1.Ocitaj());
            int m1=std::get&lt;1&gt;(d1.Ocitaj());
            int dan1=std::get&lt;0&gt;(d1.Ocitaj());
            int g2=std::get&lt;2&gt;(d2.Ocitaj());
            int m2=std::get&lt;1&gt;(d2.Ocitaj());
            int dan2=std::get&lt;0&gt;(d2.Ocitaj());
            bool logicka;
            if(g1&lt;g2) logicka=true;
            else if(g1==g2){
                if(m1&lt;m2){ logicka=true;}
                else if(m1==m2){
                    if(dan1&lt;dan2){ logicka=true;}
                    else if(dan1==dan2){
                        if(h1&lt;h2) logicka=true;
                        else if(h1==h2){
                            if(minute1&lt;minute2) logicka=true;
                            else logicka=false;
                        }
                    }
                }
            }
            return logicka;});
<a name="1"></a><font color="#00FF00"><a href="match548-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            return **p;
    }
    
    Pregled DajNajranijiPregled() const{
        if(br_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
 
       auto p=std::min_element(pok, pok+br_pregleda, [] (Pregled *p1,Pregled *p2) {
            Datum d1(p1-&gt;DajDatumPregleda());
</font>            Datum d2(p2-&gt;DajDatumPregleda());
            Vrijeme v1(p1-&gt;DajVrijemePregleda());
            Vrijeme v2(p2-&gt;DajVrijemePregleda());
            int g1=std::get&lt;2&gt;(d1.Ocitaj());
            int g2=std::get&lt;2&gt;(d2.Ocitaj());
            int m1=std::get&lt;1&gt;(d1.Ocitaj());
            int m2=std::get&lt;1&gt;(d2.Ocitaj());
            int dan1=std::get&lt;0&gt;(d1.Ocitaj());
            int dan2=std::get&lt;0&gt;(d2.Ocitaj());
            int h1=std::get&lt;0&gt;(v1.Ocitaj());
            int minute1=std::get&lt;1&gt;(v1.Ocitaj());
            int h2=std::get&lt;0&gt;(v2.Ocitaj());
            int minute2=std::get&lt;1&gt;(v2.Ocitaj());
              bool logicka;
            if(g1&lt;g2) logicka=true;
            else if(g1==g2){
                if(m1&lt;m2){ logicka=true;}
                else if(m1==m2){
                    if(dan1&lt;dan2){ logicka=true;}
                    else if(dan1==dan2){
                        if(h1&lt;h2) logicka=true;
                        else if(h1==h2){
                            if(minute1&lt;minute2) logicka=true;
                            else logicka=false;
                        }
                    }
                }
            }
            return logicka;});
<a name="12"></a><font color="#0000FF"><a href="match548-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

        return **p;
    }
    
    void IsprazniKolekciju(){
        for(int i=0; i&lt;br_pregleda; i++){
            delete pok[i];
            pok[i]=nullptr;
</font>        }
    }
    
    void ObrisiNajranijiPregled(){
        if(br_pregleda==0) throw std::range_error("Prazna kolekcija");       
        Pregled pregled=(DajNajranijiPregled());

       auto p=(std::find_if(pok, pok+br_pregleda, [pregled](Pregled *p){ 
            
            std::string ime1(pregled.DajImePacijenta());
            std::string ime2(p-&gt;DajImePacijenta());
            Datum d1(pregled.DajDatumPregleda());
            Datum d2(p-&gt;DajDatumPregleda());
            Vrijeme v1(pregled.DajVrijemePregleda());
            Vrijeme v2(p-&gt;DajVrijemePregleda());
            int h1=std::get&lt;0&gt;(v1.Ocitaj());
            int minute1=std::get&lt;1&gt;(v1.Ocitaj());
            int h2=std::get&lt;0&gt;(v2.Ocitaj());
            int minute2=std::get&lt;1&gt;(v2.Ocitaj());
            int g1=std::get&lt;2&gt;(d1.Ocitaj());
            int g2=std::get&lt;2&gt;(d2.Ocitaj());
            int m1=std::get&lt;1&gt;(d1.Ocitaj());
            int m2=std::get&lt;1&gt;(d2.Ocitaj());
            int dan1=std::get&lt;0&gt;(d1.Ocitaj());
            int dan2=std::get&lt;0&gt;(d2.Ocitaj());
            bool logicka;
            if(ime1==ime2 &amp;&amp; g1==g2 &amp;&amp; m1==m2 &amp;&amp; dan1==dan2 &amp;&amp; h1==h2 &amp;&amp; minute1==minute2) logicka=true;
            return logicka;
        }));
        
        for(auto po=pok; po&lt;pok+br_pregleda; po++){
<a name="6"></a><font color="#00FF00"><a href="match548-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            if(*po==*p) po=nullptr; br_pregleda--;
        }
        std::sort(pok, pok+br_pregleda, [](Pregled *p1, Pregled *p2){return Pregled::DolaziPrije(*p1, *p2);});
    }
    
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
</font>        for(auto p=*pok; p&lt;*pok+br_pregleda; p++) { 
<a name="5"></a><font color="#FF0000"><a href="match548-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

            if(p-&gt;DajImePacijenta()==ime_pacijenta) p=nullptr; br_pregleda--;
        }
        
        std::sort(pok, pok+br_pregleda, [](Pregled *p1, Pregled *p2){return Pregled::DolaziPrije(*p1, *p2);});
    }
    
    void IspisiPregledeNaDatum(const Datum &amp;datum) const{
</font>        std::vector&lt;Pregled&gt; pomocni;
         for(auto p=*pok; p&lt;*pok+br_pregleda; p++){ 
             Datum d1(p-&gt;DajDatumPregleda());
             int g1=std::get&lt;2&gt;(d1.Ocitaj());
             int m1=std::get&lt;1&gt;(d1.Ocitaj());
             int dan1=std::get&lt;0&gt;(d1.Ocitaj());
             int g2=std::get&lt;2&gt;(datum.Ocitaj());
             int m2=std::get&lt;1&gt;(datum.Ocitaj());
             int dan2=std::get&lt;0&gt;(datum.Ocitaj());
             if(g1==g2 &amp;&amp; m1==m2 &amp;&amp; dan1==dan2) pomocni.push_back(*p);
         }
         
         std::sort(pomocni.begin(), pomocni.end(), [](Pregled p1, Pregled p2){
        Vrijeme v1(p1.DajVrijemePregleda());
        Vrijeme v2(p2.DajVrijemePregleda());
        int h1=std::get&lt;0&gt;(v1.Ocitaj());
        int min1=std::get&lt;1&gt;(v1.Ocitaj());
        int h2=std::get&lt;0&gt;(v2.Ocitaj());
        int min2=std::get&lt;1&gt;(v2.Ocitaj());
        bool logicka(false);
       if(h1&gt;h2) logicka=true;
       else if(h1==h2){
           if(min1&gt;min2) logicka=true;
           else logicka=false;
       }
       return logicka;
        });
        for(int i=0; i&lt;pomocni.size(); i++){
            pomocni[i].Ispisi();
        }
    }
    
    void IspisiSvePreglede() const{
        for(int i=0; i&lt;br_pregleda; i++) (pok[i]-&gt;Pregled::Ispisi());
    }

    
};



int main ()
{
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    int broj_pregleda; 
    std::cin&gt;&gt;broj_pregleda;
    for(;;){
    std::string ime_novog_pacijenta;
    std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
    std::cin.getline(ime_novog_pacijenta, 100);
    if(ime_novog_pacijenta==kraj) break;
    std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
    int dan, mjesec, godina;
    std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
    Datum datum(dan ,mjesec, godina);
    std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
    int sati, minute;
    std::cin&gt;&gt;sati&gt;&gt;minute;
    Vrijeme vrijeme(sati, minute);
    }
    
	return 0;
}
</pre>
</body>
</html>
