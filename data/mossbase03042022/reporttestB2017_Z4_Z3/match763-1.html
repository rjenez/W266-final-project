<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4639.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student9458.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;cstring&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
class Datum
{
    int d,m,g;
public:
    Datum(int dan, int mjesec, int godina);
    void Postavi(int dan, int mjesec, int godina) ;
    std::tuple&lt;int, int, int&gt; Ocitaj() const {

        return std::make_tuple(d,m,g);

    }
    void Ispisi() const;
};
Datum::Datum(int dan, int mjesec, int godina)
{
    if(dan&lt;=0 || dan&gt;31 || mjesec&lt;=0 || mjesec&gt;12 || godina&lt;=0) throw std::domain_error("Neispravan datum");
    d=dan;
    m=mjesec;
    g=godina;
}
void Datum::Postavi(int dan, int mjesec, int godina)
{
    if(dan&lt;=0 || dan&gt;31 || mjesec&lt;=0 || mjesec&gt;12 || godina&lt;=0) throw std::domain_error("Neispravan datum");
    d=dan;
    m=mjesec;
    g=godina;
}
<a name="10"></a><font color="#FF0000"><a href="match763-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

void Datum::Ispisi() const
{
    std::cout&lt;&lt;d&lt;&lt;"/"&lt;&lt;m&lt;&lt;"/"&lt;&lt;g;
}
class Vrijeme
{
    int s,m;
</font>public:
    Vrijeme(int sati, int minute) ;
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj () const {
        return std::make_pair(s,m);
    }
    void Ispisi() const;
};
Vrijeme::Vrijeme(int sati, int minute)
{
    if(sati&lt;0|| sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
    s=sati;
    m=minute;
}
void Vrijeme::Postavi(int sati, int minute)
{
    s=sati;
    m=minute;
}

void Vrijeme::Ispisi() const
{
    if(s&lt;10 &amp;&amp; m&gt;=10) std::cout&lt;&lt;" 0"&lt;&lt;s&lt;&lt;":"&lt;&lt;m;
    else if(s&lt;10 &amp;&amp; m&lt;10)std::cout&lt;&lt;" 0"&lt;&lt;s&lt;&lt;":0"&lt;&lt;m;
    else if(s&gt;=10 &amp;&amp; m&lt;10) std::cout&lt;&lt;" "&lt;&lt;s&lt;&lt;":0"&lt;&lt;m;
    else std::cout&lt;&lt;" "&lt;&lt;s&lt;&lt;":"&lt;&lt;m;
}
class Pregled
{
    std::string ime;
    Datum datum;
    Vrijeme v;

public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):ime(ime_pacijenta),datum(datum_pregleda),v(vrijeme_pregleda) {}
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda):ime(ime_pacijenta), datum(dan_pregleda, mjesec_pregleda, godina_pregleda), v(sati_pregleda, minute_pregleda) {}
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta);
    void PromijeniDatum(const Datum &amp;novi_datum);
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme);
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const {
        return ime;
    }
    Datum DajDatumPregleda() const {
        return datum;
    }
    Vrijeme DajVrijemePregleda() const {
        return v;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
        Datum pomoc1 = p1.DajDatumPregleda();
        Datum pomoc2 = p2.DajDatumPregleda();
        if(std::get&lt;2&gt;(pomoc1.Ocitaj())==std::get&lt;2&gt;(pomoc2.Ocitaj())) {
            if(std::get&lt;1&gt;(pomoc1.Ocitaj())==std::get&lt;1&gt;(pomoc2.Ocitaj())) {
                return std::get&lt;0&gt;(pomoc1.Ocitaj())&lt;std::get&lt;0&gt;(pomoc2.Ocitaj());
            } else return std::get&lt;1&gt;(pomoc1.Ocitaj())&lt;std::get&lt;1&gt;(pomoc2.Ocitaj());
        } else  return std::get&lt;2&gt;(pomoc1.Ocitaj())&lt;std::get&lt;2&gt;(pomoc2.Ocitaj());
    }
    void Ispisi() const;
};
void Pregled::PromijeniPacijenta(const std::string &amp;ime_pacijenta)
{
    ime=ime_pacijenta;
}
void Pregled::PromijeniDatum(const Datum &amp;novi_datum)
{
    datum.Postavi(std::get&lt;0&gt;(novi_datum.Ocitaj()),std::get&lt;1&gt;(novi_datum.Ocitaj()),std::get&lt;2&gt;(novi_datum.Ocitaj()));
}
void Pregled::PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme)
{
    v.Postavi((novo_vrijeme.Ocitaj()).first,(novo_vrijeme.Ocitaj()).second);
}
void Pregled::PomjeriDanUnaprijed()
{
<a name="5"></a><font color="#FF0000"><a href="match763-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    int dani[]= {31,28,31,30,31,30,31,31,30,31,30,31};
    int god=std::get&lt;2&gt;(datum.Ocitaj());
</font>    int daa;
<a name="3"></a><font color="#00FFFF"><a href="match763-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    int mj=std::get&lt;1&gt;(datum.Ocitaj());
    if((god%4==0 &amp;&amp; god%100!=0) || god%400==0) dani[1]++;
    if(std::get&lt;0&gt;(datum.Ocitaj())+1&gt;dani[std::get&lt;1&gt;(datum.Ocitaj())-1]) {
</font>        daa=1;
        mj=std::get&lt;1&gt;(datum.Ocitaj())+1;
        if(mj&gt;12) god++;
    } else daa=std::get&lt;0&gt;(datum.Ocitaj())+1;
    datum=Datum(daa,mj,god);
}
void Pregled::PomjeriDanUnazad()
{
<a name="6"></a><font color="#00FF00"><a href="match763-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    int dani[]= {31,28,31,30,31,30,31,31,30,31,30,31};
    int god=std::get&lt;2&gt;(datum.Ocitaj());
</font>    int daa=std::get&lt;0&gt;(datum.Ocitaj())-1;
<a name="4"></a><font color="#FF00FF"><a href="match763-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    int mj=std::get&lt;1&gt;(datum.Ocitaj());
    if((god%4==0 &amp;&amp; god%100!=0) || god%400==0) dani[1]++;
    if(daa==0) {
</font>        daa=dani[mj-2];
        mj--;
        if(-mj==0) god--;
    }
    datum=Datum(daa,mj,god);
}
void Pregled::Ispisi() const
{
    std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime;
    datum.Ispisi();

    v.Ispisi();

}


class Pregledi
{
    int br_pregleda;
    int max;
    Pregled**pr;
public:
    explicit Pregledi(int max_broj_pregleda):max(max_broj_pregleda),br_pregleda(0),pr(new Pregled*[max_broj_pregleda] {}) {
    }
<a name="0"></a><font color="#FF0000"><a href="match763-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi() {
        for(int i=0; i&lt;max; i++) {
            delete pr[i];
        }
        delete []pr;
    }
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
</font>    void RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) ;
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,int mjesec_pregleda,
                            int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(Pregled *pregled);
    int DajBrojPregleda() const {
        return br_pregleda;
    }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;

};

    Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda):max(spisak_pregleda.size()) {
        pr=new Pregled *[spisak_pregleda.size()];
        int brojac=0;
        for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) {
            pr[brojac]=new Pregled(*it);
            brojac++;
        }
    }
    
    Pregledi::Pregledi(const Pregledi &amp;pregledi):br_pregleda(pregledi.br_pregleda),max(pregledi.max) {
        pr=new Pregled*[pregledi.max] {};
<a name="7"></a><font color="#0000FF"><a href="match763-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        for (int i=0; i&lt;max; i++) {
            pr[i]=new Pregled(*(pregledi.pr[i]));
        }
    }
    
    Pregledi::Pregledi(Pregledi &amp;&amp;pregledi):br_pregleda(pregledi.br_pregleda),max(pregledi.max) {
</font>        pr=new Pregled*[pregledi.max] {};
        for (int i=0; i&lt;max; i++) {
            pr[i]=pregledi.pr[i];
            pregledi.pr[i]=nullptr;
        }
        pregledi.pr=nullptr;
    }
    Pregledi &amp; Pregledi::operator =(const Pregledi &amp;pregledi) {
        pr=new Pregled*[pregledi.max] {};
        for(int i=0; i&lt;max; i++) {
            pr[i]=new Pregled(*pregledi.pr[i]);
        }
        return *this;
    }
    Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi) {
        std::swap(pr,pregledi.pr);
        std::swap(br_pregleda,pregledi.br_pregleda);
        std::swap(max,pregledi.max);
        return *this;
    }
    void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        if(br_pregleda==max) throw std::range_error("Dostignut maksimalni broj pregleda");
        pr[br_pregleda]=new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
        br_pregleda++;
    }
    void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,int mjesec_pregleda,
                            int godina_pregleda, int sati_pregleda, int minute_pregleda) {

        if(br_pregleda==max) throw std::range_error("Dostignut maksimalni broj pregleda");
        Datum d(dan_pregleda, mjesec_pregleda, godina_pregleda);
        Vrijeme v(sati_pregleda, minute_pregleda);
        pr[br_pregleda]=new Pregled(ime_pacijenta, d, v);
        br_pregleda++;

    }
    void Pregledi::RegistrirajPregled(Pregled *pregled) {
        if(br_pregleda==max) throw std::range_error("Dostignut maksimalni broj pregleda");
        pr[br_pregleda]=pregled;
        br_pregleda++;
    }
int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const
{
    return std::count_if(pr,pr+br_pregleda,[datum](Pregled *p) {
        Datum pomoc = p -&gt; DajDatumPregleda();
        if(std::get&lt;0&gt;(pomoc.Ocitaj())==std::get&lt;0&gt;(datum.Ocitaj()) &amp;&amp;
                std::get&lt;1&gt;(pomoc.Ocitaj())==std::get&lt;1&gt;(datum.Ocitaj()) &amp;&amp;
                std::get&lt;2&gt;(pomoc.Ocitaj())==std::get&lt;2&gt;(datum.Ocitaj()))
            return true;
        else return false;
    });
}


void Pregledi::IsprazniKolekciju()
{
    for(int i=0; i&lt;max; i++) {
        delete pr[i];
<a name="1"></a><font color="#00FF00"><a href="match763-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        pr[i]=nullptr;
    }
}
Pregled &amp;Pregledi::DajNajranijiPregled()
{
    if(br_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    auto it=std::min_element(pr,pr+br_pregleda,[](Pregled *p1,Pregled *p2) {
        return Pregled::DolaziPrije(*p1,*p2);
</font>    });
<a name="2"></a><font color="#0000FF"><a href="match763-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    return **it;
}
Pregled Pregledi::DajNajranijiPregled() const
{

    if(br_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    auto it=std::min_element(pr,pr+br_pregleda,[](Pregled *p1,Pregled *p2) {
        return Pregled::DolaziPrije(*p1,*p2);
</font>    });
    return **it;
}
void Pregledi::ObrisiNajranijiPregled()
{    
     /*auto it=std::min_element(pr,pr+br_pregleda,[](Pregled *p1,Pregled *p2) {
        return Pregled::DolaziPrije(*p1,*p2);
    });
    delete *it;
    it=nullptr;
    br_pregleda--;*/
}
void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta)
{

    for (int i=0; i&lt;max; i++) {
        if(pr[i] != nullptr)
            if(pr[i]-&gt;DajImePacijenta()==ime_pacijenta) {
                delete pr[i];
                pr[i]=nullptr;
                br_pregleda--;
            }
    }
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const
{

<a name="8"></a><font color="#00FFFF"><a href="match763-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    for(int i=0; i&lt;max; i++) {
        if(std::get&lt;0&gt;((pr[i]-&gt;DajDatumPregleda()).Ocitaj())==std::get&lt;0&gt;(datum.Ocitaj()) &amp;&amp;
</font><a name="11"></a><font color="#00FF00"><a href="match763-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                std::get&lt;1&gt;((pr[i]-&gt;DajDatumPregleda()).Ocitaj())==std::get&lt;1&gt;(datum.Ocitaj()) &amp;&amp;
</font><a name="9"></a><font color="#FF00FF"><a href="match763-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                std::get&lt;2&gt;((pr[i]-&gt;DajDatumPregleda()).Ocitaj())==std::get&lt;2&gt;(datum.Ocitaj()))
            pr[i]-&gt;Ispisi();
    }
}
void Pregledi::IspisiSvePreglede() const{
   
    for(int i=0; i&lt;max; i++) {
</font>        if(pr[i] != nullptr) {
            pr[i]-&gt;Ispisi();
            std::cout&lt;&lt;std::endl;
        }
    }
}
int main ()
{
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    int n;

    std::vector&lt;Pregled&gt; p;
    std::cin&gt;&gt;n;
    Pregledi p1= Pregledi(n);
    int ima=0;
    for(;;) {
        if(n==0 )break;
        std::string ime;
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::cin&gt;&gt;ime;

        if(ime=="kraj" ) break;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";

        int d,m,g;
        std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
        try {
            Datum dat=Datum(d,m,g);

            std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
            int s,mi;
            std::cin&gt;&gt;s&gt;&gt;mi;

            Vrijeme vr=Vrijeme(s,mi);
            p.push_back(Pregled(ime,dat,vr));
            p1.RegistrirajPregled(ime, dat, vr);
        } catch(std::domain_error izuzetak) {
            std::cout&lt;&lt;izuzetak.what();
        }
        ima++;
        n--;

    }
    std::sort(p.begin(),p.end(),[](Pregled p1,Pregled p2) {
        if(std::get&lt;2&gt;(p1.DajDatumPregleda().Ocitaj())==std::get&lt;2&gt;(p2.DajDatumPregleda().Ocitaj())) {
            if(std::get&lt;1&gt;(p1.DajDatumPregleda().Ocitaj())==std::get&lt;1&gt;(p2.DajDatumPregleda().Ocitaj())) {
                return std::get&lt;0&gt;(p1.DajDatumPregleda().Ocitaj())&lt;std::get&lt;0&gt;(p2.DajDatumPregleda().Ocitaj());
            } else return std::get&lt;1&gt;(p1.DajDatumPregleda().Ocitaj())&lt;std::get&lt;1&gt;(p2.DajDatumPregleda().Ocitaj());
        } else  return std::get&lt;2&gt;(p1.DajDatumPregleda().Ocitaj())&lt;std::get&lt;2&gt;(p2.DajDatumPregleda().Ocitaj());
    });
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
    for(int i=0; i&lt;p.size(); i++) {
        p[i].Ispisi();
        std::cout&lt;&lt;std::endl;
    }
    int br;
    std::cout&lt;&lt;std::endl&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl&lt;&lt;
             "2 - Najraniji pregled"&lt;&lt;std::endl&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl&lt;&lt;
             "4 - Obrisi najraniji pregled"&lt;&lt;std::endl&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl&lt;&lt;
             "6 - Ispisi sve preglede"&lt;&lt;std::endl&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
    std::cin&gt;&gt;br;
    int duzina=0;
    for(;;) {

        if(br==7) break;
        else if(br==1) {
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int m,s,t;
            std::cin&gt;&gt;m&gt;&gt;t&gt;&gt;s;
            Datum d(m,t,s);
            int br=p1.DajBrojPregledaNaDatum(d);
            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;m&lt;&lt;" "&lt;&lt;t&lt;&lt;" "&lt;&lt;s&lt;&lt;" je: "&lt;&lt;br&lt;&lt;std::endl;
        } else if(br==2) {
            std::cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;std::endl;
            p1.DajNajranijiPregled().Ispisi();
            std::cout&lt;&lt;std::endl;
        } else if(br==3) {
            std::cout&lt;&lt;"Unesite ime pacijenta: ";
            std::string novo;
            std::cin&gt;&gt;novo;
            int brk=0;
            p1.ObrisiPregledePacijenta(novo);
            duzina=ima;
            for (int i=0; i&lt;ima; i++) {
                if(p[i].DajImePacijenta()==novo) {
                    brk++;
                    duzina--;
                }

            }

            std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;brk&lt;&lt;" pregleda"&lt;&lt;std::endl;
            
        } else if(br==4) {
            p1.ObrisiNajranijiPregled();
            std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
        } else if(br==5) {
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int m,s,t;
            std::cin&gt;&gt;m&gt;&gt;t&gt;&gt;s;
            Datum d(m,t,s);
            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;m&lt;&lt;" "&lt;&lt;t&lt;&lt;" "&lt;&lt;s&lt;&lt;" su: "&lt;&lt;std::endl;

            p1.IspisiPregledeNaDatum(d);
        } else if(br==6) {
            p1.IspisiSvePreglede();
        }

        std::cout&lt;&lt;std::endl&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl&lt;&lt;
                 "2 - Najraniji pregled"&lt;&lt;std::endl&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl&lt;&lt;
                 "4 - Obrisi najraniji pregled"&lt;&lt;std::endl&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl&lt;&lt;
                 "6 - Ispisi sve preglede"&lt;&lt;std::endl&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
        std::cin&gt;&gt;br;
    }
    return 0;
}
</pre>
</body>
</html>
