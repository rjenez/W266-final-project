<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student3483.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student3483.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;

class Datum    //Zavrseno
{
    int dan, mjesec, godina;
    void TestDatuma(int dan, int mjesec, int godina) {
<a name="2"></a><font color="#0000FF"><a href="match615-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        int dani[12] {31,28,31,30,31,30,31,31,30,31,30,31};
        if(godina%4==0 &amp;&amp; godina%100!=0 &amp;&amp; godina%400==0) dani[1]++;
        if(mjesec&lt;1 || mjesec&gt;12 || dan&lt;1 || dan&gt;dani[mjesec-1] || godina&lt;1) throw std::domain_error("Neispravan datum");
</font>    }
public:
    Datum(int dan, int mjesec, int godina) {
        TestDatuma(dan,mjesec,godina);
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    void Postavi(int dan, int mjesec, int godina) {
        TestDatuma(dan,mjesec,godina);
        Datum::dan=dan;
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        return std::tie(dan,mjesec,godina);
    }
    void Ispisi() const {
        std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }
};

class Vrijeme    //Zavrseno
{
    int sati, minute;
public:
    Vrijeme(int sati, int minute) {
<a name="8"></a><font color="#00FFFF"><a href="match615-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    void Postavi(int sati, int minute) {
</font>        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const {
        return {sati,minute};
    }
    void Ispisi() const {
        if(sati/10==0) std::cout &lt;&lt; "0" &lt;&lt; sati &lt;&lt; ":";
        else std::cout &lt;&lt; sati &lt;&lt; ":";
        if(minute/10==0) std::cout &lt;&lt; "0" &lt;&lt; minute;
        else std::cout &lt;&lt; minute;
    }
};

class Pregled    //Zavrseno
{
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
public:
<a name="0"></a><font color="#FF0000"><a href="match615-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) :
        datum_pregleda(dan_pregleda,mjesec_pregleda,godina_pregleda), vrijeme_pregleda(sati_pregleda,minute_pregleda) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        datum_pregleda=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        vrijeme_pregleda=novo_vrijeme;
    }

    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();

    std::string DajImePacijenta() const {
        return ime_pacijenta;
    }
    Datum DajDatumPregleda() const {
        return datum_pregleda;
    }
    Vrijeme DajVrijemePregleda() const {
        return vrijeme_pregleda;
</font>    }

    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);

    void Ispisi() const {
<a name="7"></a><font color="#0000FF"><a href="match615-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::cout &lt;&lt; std::left &lt;&lt; std::setw(30) &lt;&lt; ime_pacijenta;
        datum_pregleda.Ispisi();
        std::cout &lt;&lt; " ";
        vrijeme_pregleda.Ispisi();
        std::cout &lt;&lt; std::endl;
</font>    }
};

class Pregledi
{
    Pregled **pregledi {};
    int max_broj_pregleda;
    int broj_registriranih;
public:
    explicit Pregledi(int max_broj_pregleda) {
        Pregledi::max_broj_pregleda=max_broj_pregleda;
        broj_registriranih=0;
        pregledi=new Pregled*[max_broj_pregleda] {};
    }
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) {
        if(spisak_pregleda.size()&gt;max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
        broj_registriranih=spisak_pregleda.size();
        pregledi=new Pregled*[max_broj_pregleda] {};
        auto it(spisak_pregleda.begin());
        for(int i=0; i&lt;max_broj_pregleda; i++) {
            (*pregledi)[i]=*it;
        }
    }
    ~Pregledi() {
        for(int i=0; i&lt;max_broj_pregleda; i++) delete pregledi[i];
        delete[] pregledi;
    }

    Pregledi(const Pregledi &amp;p);
    Pregledi(Pregledi &amp;&amp;p);
    Pregledi &amp;operator =(const Pregledi &amp;p);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pi);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(Pregled *p);

    int DajBrojPregleda() const {
        return broj_registriranih;
    }

    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;        //Zavrseno
    Pregled &amp;DajNajranijiPregled();                              //Zavrseno
    Pregled DajNajranijiPregled() const;                        //Zavrseno

    void IsprazniKolekciju() {
        for(int i=0; i&lt;max_broj_pregleda; i++) delete pregledi[i];
        delete[] pregledi;
        pregledi=nullptr;                                       //Upitno
    }

    void ObrisiNajranijiPregled();                              //Zavrseno
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

void Pregled::PomjeriDanUnaprijed()
{
    std::tuple&lt;int,int,int&gt; datum(datum_pregleda.Ocitaj());
    int dan(std::get&lt;0&gt;(datum)+1), mjesec(std::get&lt;1&gt;(datum)), godina(std::get&lt;2&gt;(datum));
<a name="6"></a><font color="#00FF00"><a href="match615-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    int dani[12] {31,28,31,30,31,30,31,31,30,31,30,31};
    if(godina%4==0 &amp;&amp; godina%100!=0 &amp;&amp; godina%400==0) dani[1]++;
    if(dan==dani[mjesec-1]+1) {
</font>        dan=1;
        mjesec++;
        if(mjesec==13) {
            mjesec=1;
            godina++;
        }
    }
    datum_pregleda.Postavi(dan,mjesec,godina);
}

void Pregled::PomjeriDanUnazad()
{
    std::tuple&lt;int,int,int&gt; datum(datum_pregleda.Ocitaj());
    int dan(std::get&lt;0&gt;(datum)-1), mjesec(std::get&lt;1&gt;(datum)), godina(std::get&lt;2&gt;(datum));
<a name="3"></a><font color="#00FFFF"><a href="match615-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    int dani[12] {31,28,31,30,31,30,31,31,30,31,30,31};
    if(godina%4==0 &amp;&amp; godina%100!=0 &amp;&amp; godina%400==0) dani[1]++;
    if(dan==0) {
        mjesec--;
        if(mjesec&gt;0) dan=dani[mjesec-1];
</font>        else if(mjesec==0) {
            godina--;
            if(godina&lt;0) throw std::domain_error("Neispravan datum");
            mjesec=12;
            dan=31;
        }
    }
    datum_pregleda.Postavi(dan,mjesec,godina);
}

bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2)
{
    std::tuple&lt;int,int,int&gt; dat1(p1.DajDatumPregleda().Ocitaj()), dat2(p2.DajDatumPregleda().Ocitaj());
    if(std::get&lt;2&gt;(dat1)&lt;std::get&lt;2&gt;(dat2)) return true;
    else if(std::get&lt;1&gt;(dat1)&lt;std::get&lt;1&gt;(dat2)) return true;
    else if(std::get&lt;0&gt;(dat1)&lt;std::get&lt;0&gt;(dat2)) return true;
    return false;
}

<a name="5"></a><font color="#FF0000"><a href="match615-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

Pregledi::Pregledi(const Pregledi &amp;p) ::pregledi(new Pregled*[p.max_broj_pregleda] {}),
         max_broj_pregleda(p.max_broj_pregleda), broj_registriranih(p.broj_registriranih)
{
    try {
        for(int i=0; i&lt;p.broj_registriranih; i++) {
            pregledi[i]=new Pregled[*p.pregledi[i]];
</font>        }
    } catch(...) {
<a name="1"></a><font color="#00FF00"><a href="match615-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        for(int i=0; i&lt;p.broj_registriranih; i++) delete pregledi[i];
        delete[] pregledi;
        throw;
    }
}

Pregledi::Pregledi(Pregledi &amp;&amp;p) : pregledi(p.pregledi), max_broj_pregleda(p.max_broj_pregleda), broj_registriranih(p.broj_registriranih)
{
    p.pregledi=nullptr;
    p.broj_registriranih=0;
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;p)
</font>{
    if(p.max_broj_pregleda!=max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
    if(p.broj_registriranih&gt;broj_registriranih) {
        try {
            for(int i=broj_registriranih; i&lt;broj_registriranih; i++)
                pregledi[i]=new Pregled(*p.pregledi[i]);
        } catch(...) {
            for(int i=broj_registriranih; i&lt;r.broj_registriranih; i++) {
                delete pregledi[i];
                pregledi[i]=nullptr;
            }
            throw;
        }
    } else {
        for(int i=p.broj_registriranih; i&lt;broj_registriranih; i++) {
            delete pregledi[i];
            pregledi[i]=nullptr;
        }
    }
    broj_registriranih=p.broj_registriranih;
    for(int i=0; i&lt;broj_registriranih; i++) *pregledi[i]=*p.pregledi[i];
    return *this;

}

Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;p)
{
    if(p.max_broj_pregleda!=max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
<a name="4"></a><font color="#FF00FF"><a href="match615-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::swap(broj_registriranih, p.broj_registriranih);
    std::swap(pregledi, p.pregledi);
    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) 
{
    if(broj_registriranih&gt;=max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
</font>    Pregled *p=new Pregled()
}
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
    
}
void Pregledi::RegistrirajPregled(Pregled *pregled);

int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const
{
    std::tuple&lt;int,int,int&gt; dat1(datum.Ocitaj());
    int br_zakazanih_pregleda;
    br_zakazanih_pregleda=std::count_if(*pregledi,*pregledi+broj_registriranih, [dat1](Pregled pregled) {
        std::tuple&lt;int,int,int&gt; dat2(pregled.DajDatumPregleda().Ocitaj());
        if(std::get&lt;0&gt;(dat1)==std::get&lt;0&gt;(dat2) &amp;&amp; std::get&lt;1&gt;(dat1)==std::get&lt;1&gt;(dat2) &amp;&amp;std::get&lt;2&gt;(dat1)==std::get&lt;2&gt;(dat2)) return true;
        return false;
    });
    return br_zakazanih_pregleda;
}

Pregled &amp;Pregledi::DajNajranijiPregled()
{
    if(max_broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    Pregled *pregled=std::min_element(*pregledi,*pregledi+max_broj_pregleda, [](Pregled p1, Pregled p2) {
        std::tuple&lt;int,int,int&gt; dat1(p1.DajDatumPregleda().Ocitaj());
        std::tuple&lt;int,int,int&gt; dat2(p2.DajDatumPregleda().Ocitaj());
        if(std::get&lt;2&gt;(dat1)&lt;std::get&lt;2&gt;(dat2)) return true;
        else if(std::get&lt;1&gt;(dat1)&lt;std::get&lt;1&gt;(dat2)) return true;
        else if(std::get&lt;0&gt;(dat1)&lt;std::get&lt;0&gt;(dat2)) return true;
        return false;
    });

    return *pregled;
}

Pregled Pregledi::DajNajranijiPregled() const
{
    if(broj_registriranih==0) throw std::domain_error("Nema registriranih pregleda");
    Pregled *pregled=std::min_element(*pregledi,*pregledi+broj_registriranih, [](Pregled p1, Pregled p2) {
        std::tuple&lt;int,int,int&gt; dat1(p1.DajDatumPregleda().Ocitaj());
        std::tuple&lt;int,int,int&gt; dat2(p2.DajDatumPregleda().Ocitaj());
        if(std::get&lt;2&gt;(dat1)&lt;std::get&lt;2&gt;(dat2)) return true;
        else if(std::get&lt;1&gt;(dat1)&lt;std::get&lt;1&gt;(dat2)) return true;
        else if(std::get&lt;0&gt;(dat1)&lt;std::get&lt;0&gt;(dat2)) return true;
        return false;
    });

    return *pregled;
}

void Pregledi::ObrisiNajranijiPregled()
{
    if(broj_registriranih==0) throw std::range_error("Prazna kolekcija");
    Pregled **pregled(new Pregled*[max_broj_pregleda] {});
    Pregled najraniji_pregled(DajNajranijiPregled());
    std::tuple&lt;int,int,int&gt; dat1(najraniji_pregled.DajDatumPregleda().Ocitaj());
    std::pair&lt;int, int&gt; vr1(najraniji_pregled.DajVrijemePregleda().Ocitaj());
    int indeks(0);
    for(int i=0; i&lt;broj_registriranih; i++) {
        bool isti_datum(false), isto_vrijeme(false);
        std::tuple&lt;int,int,int&gt; dat2(pregledi[indeks]-&gt;DajDatumPregleda().Ocitaj());
        std::pair&lt;int, int&gt; vr2(pregledi[indeks]-&gt;DajVrijemePregleda().Ocitaj());

        if(std::get&lt;0&gt;(dat1)==std::get&lt;0&gt;(dat2) &amp;&amp; std::get&lt;1&gt;(dat1)==std::get&lt;1&gt;(dat2) &amp;&amp;std::get&lt;2&gt;(dat1)==std::get&lt;2&gt;(dat2)) isti_datum=true;
        if(vr1.first==vr2.first &amp;&amp; vr1.second==vr2.second) isto_vrijeme=true;
        if(najraniji_pregled.DajImePacijenta()!=pregled[indeks]-&gt;DajImePacijenta() || !isti_datum || !isto_vrijeme)  {
            pregled[indeks]=new Pregled(pregledi[i]-&gt;DajImePacijenta(), pregledi[i]-&gt;DajDatumPregleda(), pregledi[i]-&gt;DajVrijemePregleda());     //Kriticno
            indeks++;
        }
    }
    for(int i=0; i&lt;max_broj_pregleda; i++) delete pregledi[i];
    delete pregledi;

    pregledi=pregled;
}

void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta)
{
    int isto_ime(0);
    for(int i=0; i&lt;broj_registriranih; i++) {
        if(pregledi[i]-&gt;DajImePacijenta()==ime_pacijenta) isto_ime++;
    }

    Pregled **pregled(new Pregled*[isto_ime] {});
    int indeks=0;
    for(int i=0; i&lt;broj_registriranih; i++) {
        if(pregledi[i]-&gt;DajImePacijenta()!=ime_pacijenta)  {
            pregled[indeks]=new Pregled(pregledi[i]-&gt;DajImePacijenta(), pregledi[i]-&gt;DajDatumPregleda(), pregledi[i]-&gt;DajVrijemePregleda());     //Kriticno
            indeks++;
        }
    }
    for(int i=0; i&lt;max_broj_pregleda; i++) delete pregledi[i];
    delete pregledi;

    pregledi=pregled;
}

void IspisiPregledeNaDatum(const Datum &amp;datum) const
{


}

void IspisiSvePreglede() const
{

}

int main ()
{
    return 0;
}
</pre>
</body>
</html>
