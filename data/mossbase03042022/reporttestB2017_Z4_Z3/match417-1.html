<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student8776.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student5304.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;

bool Prestupna(int godina){
    if(godina % 100 != 0 &amp;&amp; godina % 400 == 0 &amp;&amp; godina % 4 == 0) return true;
<a name="1"></a><font color="#00FF00"><a href="match417-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    return false;
}
class Datum{
    int dan, mjesec, godina;
    public:
    Datum(int dan, int mjesec, int godina){
       // if(dan &gt; 31 || mjesec &gt; 12 || mjesec &lt; 1 || dan &lt; 1) throw std::domain_error("Neispravan datum");
        Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
    }
    void Postavi(int dan, int mjesec, int godina){
        //if(dan &gt; 31 || mjesec &gt; 12 || mjesec &lt; 1 || dan &lt; 1) throw std::domain_error("Neispravan datum");
        Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
</font>    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const{
        std::tuple&lt;int, int, int&gt; t;
        std::get&lt;0&gt;(t) = dan;
        std::get&lt;1&gt;(t) = mjesec;
        std::get&lt;2&gt;(t) = godina;
        return t;
    }
    void Ispisi() const{
        std::cout&lt;&lt;std::right&lt;&lt;std::setfill('0')&lt;&lt;std::setw(2)&lt;&lt;Datum::dan&lt;&lt;"/"&lt;&lt;Datum::mjesec&lt;&lt;"/"&lt;&lt;Datum::godina;
    }
    int DajDan() const { return dan;}
    int DajMjesec() const { return mjesec;}
    int DajGodinu() const {return godina;}
<a name="2"></a><font color="#0000FF"><a href="match417-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    friend class Pregled;
    friend class Pregledi;
};

class Vrijeme{
    int sat, minuta;
    public:
    Vrijeme(int sat, int minuta){
        //if(sat &gt; 23 || sat &lt; 1 || minuta &gt; 59 || minuta &lt; 1) throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sat = sat; Vrijeme::minuta = minuta;
    }
    void Postavi(int sat, int minuta){
        //if(sat &gt; 23 || sat &lt; 1 || minuta &gt; 59 || minuta &lt; 1) throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sat = sat; Vrijeme::minuta = minuta;
    }
    std::pair&lt;int, int&gt; Ocitaj() const{
</font>        std::pair&lt;int, int&gt; t;
        t.first = sat;
        t.second = minuta;
        return t;
    }
    void Ispisi() const{
        std::cout&lt;&lt;std::right&lt;&lt;std::setfill('0')&lt;&lt;std::setw(2)&lt;&lt;Vrijeme::sat&lt;&lt;":"&lt;&lt;Vrijeme::minuta;
    }
    int DajMinute() const {return minuta;}
    int DajSate() const {return sat;}
    friend class Pregled;
    friend class Pregledi;
};
class Pregled{
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
    public:
<a name="9"></a><font color="#FF00FF"><a href="match417-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,  const Vrijeme &amp;vrijeme_pregleda) : datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda){
        Pregled::ime_pacijenta = ime_pacijenta;
    }
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,  int godina_pregleda, int sati_pregleda, int minute_pregleda) : 
</font><a name="8"></a><font color="#00FFFF"><a href="match417-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    datum_pregleda(dan_pregleda, mjesec_pregleda, godina_pregleda), vrijeme_pregleda(sati_pregleda, minute_pregleda){
        Pregled::ime_pacijenta = ime_pacijenta;
    }
     void PromijeniPacijenta(const std::string &amp;ime_pacijenta){
</font>         Pregled::ime_pacijenta = ime_pacijenta;
     } 
    void PromijeniDatum(const Datum &amp;novi_datum){
         auto d(novi_datum.Datum::Ocitaj());
         Pregled::datum_pregleda.Datum::Postavi(std::get&lt;0&gt;(d), std::get&lt;1&gt;(d), std::get&lt;2&gt;(d));
    }  
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
        auto vr(novo_vrijeme.Vrijeme::Ocitaj());
        Pregled::vrijeme_pregleda.Vrijeme::Postavi(vr.first, vr.second);
    } 
    void PomjeriDanUnaprijed(){
        auto d(Pregled::datum_pregleda.Datum::Ocitaj());
        std::get&lt;0&gt;(d)++;
        std::vector&lt;std::vector&lt;int&gt;&gt; br_dana{{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
                                              {31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}};
        if(Prestupna(std::get&lt;2&gt;(d))){
            if(std::get&lt;0&gt;(d) &gt; br_dana[1][std::get&lt;1&gt;(d)]){ std::get&lt;1&gt;(d)++; std::get&lt;0&gt;(d) = 1;}
        }
        else if(!Prestupna(std::get&lt;2&gt;(d))){
            if(std::get&lt;0&gt;(d) &gt; br_dana[0][std::get&lt;1&gt;(d)]){ std::get&lt;1&gt;(d)++; std::get&lt;0&gt;(d) = 1;}
        }
        if(std::get&lt;1&gt;(d) &gt; 12){std::get&lt;1&gt;(d) = 1; std::get&lt;2&gt;(d)++;}
        Pregled::datum_pregleda.Datum::Postavi(std::get&lt;0&gt;(d), std::get&lt;1&gt;(d), std::get&lt;2&gt;(d));
    } 
     void PomjeriDanUnazad(){
        auto d(Pregled::datum_pregleda.Datum::Ocitaj());
        std::get&lt;0&gt;(d)--;
        std::vector&lt;std::vector&lt;int&gt;&gt; br_dana{{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
                                              {31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}};
        if(Prestupna(std::get&lt;2&gt;(d))){
            if(std::get&lt;0&gt;(d) &lt; 1){ std::get&lt;1&gt;(d)--; std::get&lt;0&gt;(d) = br_dana[1][std::get&lt;1&gt;(d)];}
        }
        else if(!Prestupna(std::get&lt;2&gt;(d))){
            if(std::get&lt;0&gt;(d) &lt; 1){ std::get&lt;1&gt;(d)--; std::get&lt;0&gt;(d) = br_dana[0][std::get&lt;1&gt;(d)];}
        }
        if(std::get&lt;1&gt;(d) &lt; 1){std::get&lt;1&gt;(d) = 12; std::get&lt;2&gt;(d)--;}
        Pregled::datum_pregleda.Datum::Postavi(std::get&lt;0&gt;(d), std::get&lt;1&gt;(d), std::get&lt;2&gt;(d));
     }
     std::string DajImePacijenta() const{return ime_pacijenta;}  
    Datum DajDatumPregleda() const{return datum_pregleda;}  
    Vrijeme DajVrijemePregleda() const{return vrijeme_pregleda;}  
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
        auto t1(p1.datum_pregleda.Datum::Ocitaj());
        auto t2(p2.datum_pregleda.Datum::Ocitaj());
        if(std::get&lt;2&gt;(t2) &gt; std::get&lt;2&gt;(t1)) return true;
        if(std::get&lt;1&gt;(t2) &gt; std::get&lt;1&gt;(t1)) return true;
        if(std::get&lt;0&gt;(t2) &gt; std::get&lt;0&gt;(t1)) return true;
        auto v1(p1.vrijeme_pregleda.Vrijeme::Ocitaj());
        auto v2(p2.vrijeme_pregleda.Vrijeme::Ocitaj());
        if(std::get&lt;0&gt;(v2) &gt; std::get&lt;0&gt;(v1)) return true;
        if(std::get&lt;1&gt;(v2) &gt; std::get&lt;1&gt;(v1)) return true;
        else return false;
    }  
    void Ispisi() const{
        std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;ime_pacijenta;
        std::cout&lt;&lt;" ";
        datum_pregleda.Datum::Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme_pregleda.Vrijeme::Ispisi();    
        
    }
    friend class Pregledi;
};

class Pregledi{
    int br_p;
    const int max_br_p;
    Pregled **pregled{};
    Pregledi() = default;
    
    void AlocirajNiz(int br){
        pregled = nullptr;
        try{
            pregled = new Pregled*[br];
        }
        catch(std::bad_alloc){
            IsprazniKolekciju();
            throw;
        }
    }
    public:
    explicit Pregledi(int m) : br_p(0), max_br_p(m), pregled(nullptr){
        AlocirajNiz(max_br_p);
    }
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak) : br_p(spisak.size()), max_br_p(spisak.size()), pregled(nullptr){
       
        try{
<a name="10"></a><font color="#FF0000"><a href="match417-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

            pregled = new Pregled*[br_p];
            for(int i = 0; i &lt; br_p; i++){
                pregled[i] = nullptr;
            }
            int br = 0;
</font>            for(auto &amp;x: spisak){
                pregled[br] = new Pregled(x);
                br++;
            }
        }catch(std::bad_alloc){
                IsprazniKolekciju();
                throw;
            }
    }
    ~Pregledi(){
        if(pregled == nullptr) return;
<a name="6"></a><font color="#00FF00"><a href="match417-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        for(int i = 0; i &lt; br_p; i++){
            delete pregled[i];
        }
        delete[] pregled;
    }
    Pregledi(const Pregledi &amp; pregledi) : br_p(pregledi.br_p), max_br_p(pregledi.max_br_p), pregled(nullptr){
</font><a name="7"></a><font color="#0000FF"><a href="match417-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        AlocirajNiz(max_br_p);
        try{
            for(int i = 0; i &lt; br_p; i++){
                this-&gt;pregled[i] = new Pregled(*pregledi.pregled[i]);
</font>            }
        }
        catch(std::bad_alloc){
            IsprazniKolekciju();
            throw;
        }
    }
    Pregledi(Pregledi &amp;&amp;pregledi) : br_p(pregledi.br_p), max_br_p(pregledi.max_br_p), pregled(nullptr){
      pregled = pregledi.pregled;
      pregledi.pregled = nullptr;
    }
    Pregledi &amp;operator =(const Pregledi &amp;pregledi){
        if(max_br_p != pregledi.max_br_p) throw std::logic_error("Nesaglasne liste pregleda");
        if(&amp;pregledi == this) return *this;
        for(int i = 0; i &lt; br_p; i++){
            delete pregled[i];
        }
        br_p = pregledi.br_p;
        try{
            for(int i = 0; i &lt; br_p; i++){
                pregled[i] = new Pregled(*pregledi.pregled[i]);
            }
        }
        catch(std::bad_alloc){
            IsprazniKolekciju();
            throw;
        }
        return *this;
    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi){
        if(max_br_p != pregledi.max_br_p) throw std::logic_error("Nesaglasne liste pregleda");
        if(&amp;pregledi == this) return *this;
        pregled = pregledi.pregled;
        br_p = pregledi.br_p;
        pregledi.pregled = nullptr;
        return *this;
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
        if(br_p == max_br_p) throw std::range_error("Raspored popunjen");
        try{
            pregled[br_p++] = new Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
        }
        catch(std::bad_alloc){
            br_p--;
            throw std::logic_error("Neuspjesna registracija pregleda");
        }
        catch(...){
            br_p--;
            throw;
        }
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
        if(br_p == max_br_p) throw std::range_error("Raspored popunjen");
        try{
            pregled[br_p++] = new Pregled(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
        }
        catch(std::bad_alloc){
            br_p--;
            throw std::logic_error("Neuspjesna registracija pregleda");
        }
        catch(...){
            br_p--;
            throw;
        }
    }
    int DajBrojPregleda() const {
        if(br_p == 0) throw std::domain_error("Nema registriranih pregleda");
<a name="11"></a><font color="#00FF00"><a href="match417-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

        return br_p;}
    void IsprazniKolekciju(){
        if(pregled == nullptr) return;
        for(int i = 0; i &lt; br_p; i++){
            delete pregled[i];
        }
        delete[] pregled;
</font>    }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const{
        if(br_p == 0) throw std::domain_error("Nema registriranih pregleda");
<a name="4"></a><font color="#FF00FF"><a href="match417-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        return std::count_if(pregled, pregled + br_p, [&amp;](Pregled *p){ return (p-&gt;DajDatumPregleda().DajDan() == datum.DajDan() &amp;&amp; p-&gt;DajDatumPregleda().DajMjesec() == datum.DajMjesec() &amp;&amp; p-&gt;DajDatumPregleda().DajGodinu() == datum.DajGodinu());});
    }
    Pregled &amp;DajNajranijiPregled(){
</font><a name="0"></a><font color="#FF0000"><a href="match417-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        if(br_p == 0) throw std::domain_error("Nema registriranih pregleda");
        Pregled *najraniji(pregled[0]);
        for(int i = 0; i &lt; br_p; i++){
            if(Pregled::DolaziPrije(*pregled[i], *najraniji)) najraniji = pregled[i];
        }
    return *najraniji;
    }
    Pregled DajNajranijiPregled() const{
        if(br_p == 0) throw std::domain_error("Nema registriranih pregleda");
        Pregled *najraniji(pregled[0]);
        for(int i = 0; i &lt; br_p; i++){
            if(Pregled::DolaziPrije(*pregled[i], *najraniji)) najraniji = pregled[i];
        }
    return *najraniji;
</font>    }
    void IspisiSvePreglede() const{
        int i = 0;
        for(; i &lt; br_p; i++){
            (*pregled[i]).Ispisi();
            std::cout &lt;&lt; std::endl;
        }
        if(i == 0) throw ("Nema pregleda\n");
    }
    void IspisiPregledeNaDatum(const Datum &amp;datum) const{
        int i = 0;
<a name="3"></a><font color="#00FFFF"><a href="match417-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        for(int i = 0; i &lt; br_p; i++){
            if(pregled[i] -&gt;DajDatumPregleda().DajDan() == datum.DajDan() &amp;&amp; 
            pregled[i] -&gt;DajDatumPregleda().DajMjesec() == datum.DajMjesec() &amp;&amp; 
            pregled[i] -&gt;DajDatumPregleda().DajGodinu() == datum.DajGodinu()){
</font>                pregled[i]-&gt;Ispisi();
                std::cout&lt;&lt;std::endl;
            }
        }
        if(i == 0) throw ("Nema pregleda na trazeni dan");
    }
    void ObrisiNajranijiPregled(){
        if(br_p == 0) throw std::range_error("Prazna kolekcija");
<a name="5"></a><font color="#FF0000"><a href="match417-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        Pregled p = Pregledi::DajNajranijiPregled();
        Pregledi temp = Pregledi(max_br_p);
        int brojac = 0;
        for(int i = 0; i &lt; br_p; i++){
            auto t=pregled[i];
            if (t-&gt;DajImePacijenta() != p.DajImePacijenta() &amp;&amp; 
</font>            t-&gt;DajDatumPregleda().DajDan() != p.DajDatumPregleda().DajDan() &amp;&amp; 
            t-&gt;DajDatumPregleda().DajMjesec() != p.DajDatumPregleda().DajMjesec() &amp;&amp; 
            t-&gt;DajDatumPregleda().DajGodinu() != p.DajDatumPregleda().DajGodinu() &amp;&amp; 
            t-&gt;DajVrijemePregleda().DajSate() != p.DajVrijemePregleda().DajSate() &amp;&amp; 
            t-&gt;DajVrijemePregleda().DajMinute() != p.DajVrijemePregleda().DajMinute())
            temp.pregled[brojac++] = pregled[i];
        }
        std::copy(temp.pregled, temp.pregled + max_br_p, pregled);
        br_p = brojac;
    }
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
        if(br_p == 0) std::range_error("Prazna kolekcija");
        Pregledi temp = Pregledi(max_br_p);
        int brojac = 0;
        for(int i = 0; i &lt; br_p; i++){
            if(pregled[i]-&gt;DajImePacijenta() != ime_pacijenta) 
            temp.pregled[brojac++] = pregled[i];
        }
        br_p = brojac;
        std::copy(temp.pregled, temp.pregled + max_br_p, pregled);
    }
};

int main ()
{
    try{
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    int m;
    std::cin&gt;&gt;m;
    Pregledi p(m);
    std::cin.clear();
    std::cin.ignore(100000,'\n');
    int a = 0;
    while(a &lt; m){
    std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
    std::string s;
    std::getline(std::cin, s);
     std::cin.clear();
    std::cin.ignore(100000,'\n');
    std::string kraj = "kraj";
    if(s.compare(kraj)==0) break;
    std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
    int d(0), m(0), g(0);
    std::cin.clear();
    std::cin.ignore(100000,'\n');
    std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
    std::cin.clear();
    std::cin.ignore(100000,'\n');
    std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
    int h(0), minu(0);
    std::cin.clear();
    std::cin.ignore(10000,'\n');
    std::cin&gt;&gt;h&gt;&gt;minu;
    std::cin.clear();
    std::cin.ignore(100000,'\n');
    p.RegistrirajPregled(s, d, m, g, h, minu);
    a++;
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi "&lt;&lt;std::endl;
    p.IspisiSvePreglede();
    int opcija(0);
    while(opcija != 7){
        std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija\n"&lt;&lt;"1 - Broj pregleda na datum\n"&lt;&lt;"2 - Najraniji pregled\n"&lt;&lt;"3 - Obrisi pregled pacijenta\n";
        std::cout&lt;&lt;"4 - Obrisi najraniji pregled\n"&lt;&lt;"5 - Ispisi sve pregleda na datum\n"&lt;&lt;"6 - Ispisi sve preglede\n"&lt;&lt;"7 - Kraj programa\n\n";
         std::cin.clear();
        std::cin.ignore(100000,'\n');
        std::cin&gt;&gt;opcija;
        std::cin.clear();
        std::cin.ignore(100000,'\n');
        if(opcija == 1){
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int d(0), m(0), g(0);
            std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
            Datum dat(d, m, g);
            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: ";
            std::cout&lt;&lt;p.DajBrojPregledaNaDatum(dat);
        }
        else if(opcija == 2){
            std::cout&lt;&lt;"Najraniji pregled je: ";
            p.DajNajranijiPregled().Pregled::Ispisi();
        }
        else if(opcija == 3){
            std::cout&lt;&lt;"Unesite ime pacijenta: ";
            std::string ime;
            std::getline(std::cin, ime);
            int br = p.DajBrojPregleda();
            p.ObrisiPregledePacijenta(ime);
            std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;br - p.DajBrojPregleda()&lt;&lt;" pregleda";
        }
        else if(opcija == 4){
            p.ObrisiNajranijiPregled();
            std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan ";
        }
        else if(opcija == 5){
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int d(0), m(0), g(0);
            Datum da(d, m, g);
            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su:"&lt;&lt;std::endl;
            p.IspisiPregledeNaDatum(da);
        }
        else if(opcija == 6){
            p.IspisiSvePreglede();
        }
        else if(opcija == 7){
            break;
        }
        std::cout&lt;&lt;std::endl;
    }
	return 0;
    }catch(std::bad_alloc e){
        std::cout&lt;&lt;e.what();
    }catch(std::logic_error e){
        std::cout&lt;&lt;e.what();
    }catch(std::domain_error e){
        std::cout&lt;&lt;e.what();
    }
    catch(std::range_error e){
        std::cout&lt;&lt;e.what();
    }
    catch(const std::string s){
        std::cout&lt;&lt;s;
    }
    catch(...){
    }
}
</pre>
</body>
</html>
