<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4412.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4412.cpp<p></p><pre>
<a name="4"></a><font color="#FF00FF"><a href="match166-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;cmath&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;initializer_list&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;

//uraditi pregled dolazi prije

class Datum
{
    int dan, mjesec, godina;
public:
    Datum (int dan, int mjesec, int godina) {
        Postavi(dan, mjesec, godina);
    };
    void Postavi (int dan, int mjesec, int godina);
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        int a(dan), b(mjesec), c(godina);
        return std::tie&lt;int, int, int&gt; (a,b,c);
    };
    void Ispisi() const {
        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};

void Datum::Postavi (int dan, int mjesec, int godina)
{
    int broj_dana[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0)
        broj_dana[1]++;
<a name="2"></a><font color="#0000FF"><a href="match166-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

    if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1])
        throw std::domain_error("Neispravan datum"); //pr ispis
    Datum::dan=dan;
    Datum::mjesec=mjesec;
    Datum::godina=godina;
}

class Vrijeme
{
    int sati, minute;
public:
    Vrijeme (int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59)
            throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    void Postavi (int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59)
            throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const;
    void Ispisi() const;
};

std::pair&lt;int, int&gt; Vrijeme::Ocitaj() const
{
    return std::make_pair (sati, minute);
}

void Vrijeme::Ispisi() const
{
    if(sati&lt;10) std::cout&lt;&lt;"0";
    std::cout&lt;&lt;sati&lt;&lt;":";
    if(minute&lt;10) std::cout&lt;&lt;"0";
    std::cout&lt;&lt;minute;
}

class Pregled
{
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
public:
    Pregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,
</font>             const Vrijeme &amp;vrijeme_pregleda) : ime_pacijenta(ime_pacijenta),
        datum_pregleda (datum_pregleda), vrijeme_pregleda(vrijeme_pregleda) {}
<a name="1"></a><font color="#00FF00"><a href="match166-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_26.gif"/></a>

    Pregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
             int godina_pregleda, int sati_pregleda, int minute_pregleda) :
        ime_pacijenta(ime_pacijenta), datum_pregleda(Datum(dan_pregleda, mjesec_pregleda, godina_pregleda)),
        vrijeme_pregleda(Vrijeme(sati_pregleda, minute_pregleda)) {}
    void PromijeniPacijenta (const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta=ime_pacijenta;
    };
    void PromijeniDatum (const Datum &amp;novi_datum) {
        auto pomocni(novi_datum.Ocitaj());
        datum_pregleda.Postavi(std::get&lt;0&gt; (pomocni), std::get&lt;1&gt; (pomocni),
                               std::get&lt;2&gt; (pomocni));
    };
    void PromijeniVrijeme (const Vrijeme &amp;novo_vrijeme) {
        auto pomocni(novo_vrijeme.Ocitaj());
        vrijeme_pregleda.Postavi(pomocni.first, pomocni.second);
    };
    void PomjeriDanUnaprijed ();
    void PomjeriDanUnazad ();
    std::string DajImePacijenta () const {
        return ime_pacijenta;
    };
    Datum DajDatumPregleda () const {
        return datum_pregleda;
    };
    Vrijeme DajVrijemePregleda () const {
        return vrijeme_pregleda;
    };
    static bool DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi () const;
};

bool Pregled::DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2)         //true ako je prvi pregled zakazan prije drugog
{
    auto pom(p1.DajDatumPregleda());
    auto pom1(pom.Ocitaj());
    int d1=std::get&lt;0&gt; (pom1);
    int mj1=std::get&lt;1&gt; (pom1);
    int g1=std::get&lt;2&gt; (pom1);
    auto pom2(p1.DajVrijemePregleda());
    auto pom3(pom2.Ocitaj());
    int h1=pom3.first;
    int m1=pom3.second;
    pom=p2.DajDatumPregleda();
    pom1=pom.Ocitaj();
    int d2=std::get&lt;0&gt; (pom1);
    int mj2=std::get&lt;1&gt; (pom1);
    int g2=std::get&lt;2&gt; (pom1);
    pom2=p2.DajVrijemePregleda();
    pom3=pom2.Ocitaj();
    int h2=pom3.first;
    int m2=pom3.second;
    if(g1!=g2) return g1&lt;g2;
    else if(g1==g2 &amp;&amp; mj1!=mj2) return mj1&lt;mj2;
    else if(g1==g2 &amp;&amp; mj1==mj2 &amp;&amp; d1!=d2) return d1&lt;d2;
    else if(g1==g2 &amp;&amp; mj1==mj2 &amp;&amp; d1==d2 &amp;&amp; h1!=h2) return h1&lt;h2;
    else return m1&lt;m2;
}

void Pregled::PomjeriDanUnaprijed()
{
    auto pomocni(datum_pregleda.Ocitaj());
    int d=std::get&lt;0&gt; (pomocni)+1;
    int m=std::get&lt;1&gt; (pomocni);
    int g=std::get&lt;2&gt; (pomocni);
    int broj_dana[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if(d&gt;broj_dana[m-1]) {
        d-=broj_dana[m-1];
        m++;
    }
    if(m&gt;12) {
        m-=12;
        g++;
    }
    datum_pregleda.Postavi(d,m,g);
}

void Pregled::PomjeriDanUnazad()
{
    auto pomocni(datum_pregleda.Ocitaj());
    int d=std::get&lt;0&gt; (pomocni)-1;
    int m=std::get&lt;1&gt; (pomocni);
    int g=std::get&lt;2&gt; (pomocni);
    int broj_dana[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if(d&lt;1) {
        m--;
        d=broj_dana[m-1];
    }
    if(m&lt;1) {
        m=12;
        d=broj_dana[m-1];
        g--;
    }
    datum_pregleda.Postavi(d, m, g);
}

void Pregled::Ispisi() const
{
    std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;ime_pacijenta;
    datum_pregleda.Ispisi();
    std::cout&lt;&lt;" ";
    vrijeme_pregleda.Ispisi();
    std::cout&lt;&lt;std::endl;
}

//dinamicki alocirani niz pokazivaca na objekte tipa Pregled
class Pregledi
{
    int max_broj_pregleda;
    Pregled **pregledi_n;                                                       //din alociran niz pokazivaca na objekte tipa Pregled
    void PostaviMax() {
        max_broj_pregleda--;
    }
public:
    explicit Pregledi (int max_broj_pregleda) :  max_broj_pregleda(max_broj_pregleda),
        pregledi_n(new Pregled *[max_broj_pregleda] {}) {};
    Pregledi (std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    Pregledi (std::vector&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi() {
        for(int i=0; i&lt;max_broj_pregleda; i++) delete pregledi_n[i];
        delete[] pregledi_n;
    };
    Pregledi (const Pregledi &amp;pregledi);
    Pregledi (Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator = (const Pregledi &amp;pregledi);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
</font>    void RegistrirajPregled (const std::string &amp;ime_pacijenta,
                             const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled (const std::string &amp;ime_pacijenta, int dan_pregleda,
<a name="0"></a><font color="#FF0000"><a href="match166-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_43.gif"/></a>

                             int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(Pregled *pregledi);
    int DajBrojPregleda () const;
    int DajBrojPregledaNaDatum (const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled ();
    //Pregled DajNajranijiPregled () const;
    void IsprazniKolekciju ();
    void ObrisiNajranijiPregled ();
    void ObrisiPregledePacijenta (const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum (const Datum &amp;datum) const;
    void IspisiSvePreglede () const;
};

void Pregledi::ObrisiPregledePacijenta (const std::string &amp;ime_pacijenta) {
    for(int i=0; i&lt;this-&gt;DajBrojPregleda(); i++) {
        if(pregledi_n[i]-&gt;DajImePacijenta()==ime_pacijenta) {
            delete pregledi_n[i];
            this-&gt;PostaviMax();
        }
    }
}

void Pregledi::ObrisiNajranijiPregled () {
    auto min_pregled(this-&gt;DajNajranijiPregled()); //ovdje dobijem pregled
    auto min(min_pregled.DajDatumPregleda());
    auto pomocna2(min.Ocitaj());
    int d2=std::get&lt;0&gt; (pomocna2); 
    int m2=std::get&lt;1&gt; (pomocna2);
    int g2=std::get&lt;2&gt; (pomocna2);
    for(int i=0; i&lt;this-&gt;DajBrojPregleda(); i++) {
        auto x=pregledi_n[i];
        auto datum_iz_niza(x-&gt;DajDatumPregleda());
        auto pomocna1(datum_iz_niza.Ocitaj());
        int d1=std::get&lt;0&gt; (pomocna1);
        int m1=std::get&lt;1&gt; (pomocna1);
        int g1=std::get&lt;2&gt; (pomocna1);
        if(d1==d2 &amp;&amp; m1==m2 &amp;&amp; g1==g2) {
            delete pregledi_n[i];
            
        }
    }
}

Pregled &amp;Pregledi::DajNajranijiPregled() {
    return *(*std::min_element(pregledi_n, pregledi_n+this-&gt;DajBrojPregleda(), [] (Pregled *pok1, Pregled *pok2) {
        return (*pok1).DolaziPrije(*pok1, *pok2);
    }));
}

int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const {
    auto pomocna2(datum.Ocitaj());
    int d1=std::get&lt;0&gt; (pomocna2);
    int m1=std::get&lt;1&gt; (pomocna2);
    int g1=std::get&lt;2&gt; (pomocna2);
    int brojac(0);
    for(int i=0; i&lt;this-&gt;DajBrojPregleda(); i++) {
        auto x=pregledi_n[i];
        auto datum_iz_niza(x-&gt;DajDatumPregleda());
        auto pomocna1(datum_iz_niza.Ocitaj());
        int d2=std::get&lt;0&gt; (pomocna1);
        int m2=std::get&lt;1&gt; (pomocna1);
        int g2=std::get&lt;2&gt; (pomocna1);
        if(d1==d2 &amp;&amp; m1==m2 &amp;&amp; g1==g2) brojac++;
    }
    return brojac;
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum ) const {
    auto pomocna2(datum.Ocitaj());
    int d1=std::get&lt;0&gt; (pomocna2);
    int m1=std::get&lt;1&gt; (pomocna2);
    int g1=std::get&lt;2&gt; (pomocna2);
    for(int i=0; i&lt;this-&gt;DajBrojPregleda(); i++) {
        auto x=pregledi_n[i];
        auto datum_iz_niza(x-&gt;DajDatumPregleda());
        auto pomocna1(datum_iz_niza.Ocitaj());
        int d2=std::get&lt;0&gt; (pomocna1);
        int m2=std::get&lt;1&gt; (pomocna1);
        int g2=std::get&lt;2&gt; (pomocna1);
        if(d1==d2 &amp;&amp; m1==m2 &amp;&amp; g1==g2) pregledi_n[i]-&gt;Ispisi();
    }
}

void Pregledi::IspisiSvePreglede () const {
    for(int i=0; i&lt;this-&gt;DajBrojPregleda(); i++)
        pregledi_n[i]-&gt;Ispisi();
}

int Pregledi::DajBrojPregleda() const {
    int brojac(0);
    for(int i=0; i&lt;max_broj_pregleda; i++)
        if(pregledi_n[i]!=nullptr) brojac++;
      
        
    return brojac;
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;pregledi) {
    //error
    if((*this).DajBrojPregleda()&lt;pregledi.DajBrojPregleda()) {
        try {
            for(int i=(*this).DajBrojPregleda(); i&lt;pregledi.DajBrojPregleda(); i++)
                pregledi_n[i]=new Pregled(*pregledi.pregledi_n[i]);
        } catch (...) {
            for(int i=(*this).DajBrojPregleda(); i&lt;pregledi.DajBrojPregleda();i++) {
                delete pregledi_n[i];
                delete[] pregledi_n;
            }
            throw;
        }
    } else {
        for(int i=(*this).DajBrojPregleda(); i&lt;pregledi.DajBrojPregleda(); i++)
            delete pregledi_n[i];
    }
    max_broj_pregleda=pregledi.max_broj_pregleda;
    for(int i=0; i&lt;pregledi.DajBrojPregleda(); i++)
        *pregledi_n[i]=*pregledi.pregledi_n[i];
    return *this;
}

Pregledi::Pregledi (Pregledi &amp;&amp;pregledi) : max_broj_pregleda(pregledi.max_broj_pregleda) ,
    pregledi_n(pregledi.pregledi_n) {
        pregledi.pregledi_n=nullptr;
        pregledi.max_broj_pregleda=0;
}

Pregledi::Pregledi(const Pregledi &amp;pregledi) : max_broj_pregleda(pregledi.max_broj_pregleda), 
    pregledi_n(new Pregled *[pregledi.max_broj_pregleda] {}){
        try {
            for(int i=0; i&lt;pregledi.max_broj_pregleda; i++)
                pregledi_n[i]=new Pregled(*pregledi.pregledi_n[i]);
        } catch (...) {
            for(int i=0; i&lt;max_broj_pregleda; i++)
                delete pregledi_n[i];
                delete[] pregledi_n;
                throw;
        }
}

Pregledi::Pregledi (std::vector&lt;Pregled&gt; spisak_pregleda) :
    max_broj_pregleda(spisak_pregleda.size()), pregledi_n(new Pregled *[spisak_pregleda.size()] {}) {
    int brojac(0);
    for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) {
        try {
            pregledi_n[brojac]=new Pregled(*it);
            brojac++;
        } catch (...) {
            for(int i=0; i&lt;spisak_pregleda.size(); i++) {
                delete pregledi_n[i];
                pregledi_n[i]=nullptr;
            }
            throw;
        }
    }
}


Pregledi::Pregledi (std::initializer_list&lt;Pregled&gt; spisak_pregleda) :
    max_broj_pregleda(spisak_pregleda.size()), pregledi_n(new Pregled *[spisak_pregleda.size()] {})
{
    int brojac(0);
    for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) {
        try {
            pregledi_n[brojac]=new Pregled(*it);
            brojac++;
        } catch (...) {
            for(int i=0; i&lt;spisak_pregleda.size(); i++) {
                delete pregledi_n[i];
                pregledi_n[i]=nullptr;
            }
            throw;
        }
    }
}

int main ()
{
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    int broj_pregleda;
    std::cin&gt;&gt;broj_pregleda;
    std::vector&lt;Pregled&gt; spisak_pregleda;
    //Pregledi evidencija_pacijenata;
   
    for(int i=0; i&lt;broj_pregleda; i++) {
        std::cin.ignore(10000, '\n');
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::string ime;
        std::cin&gt;&gt;ime;
        std::string kraj({'k', 'r', 'a', 'j'});
        if(ime==kraj)  
            break;
        std::cin.ignore(10000, '\n');
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        int d, m, g;
        std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        int h, min;
        std::cin&gt;&gt;h&gt;&gt;min;
        spisak_pregleda.push_back(Pregled(ime, d, m, g, h, min));

    }
    
    Pregledi evidencija_pacijenata(spisak_pregleda);
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
    evidencija_pacijenata.IspisiSvePreglede();
    std::cout&lt;&lt;std::endl;
    for(;;) {
        
    std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl
        &lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl
        &lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl
</font>        &lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl
<a name="6"></a><font color="#00FF00"><a href="match166-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        &lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl
        &lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl
        &lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl
        &lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
    int opcija(0);
    
    std::cin&gt;&gt;opcija;
    if(opcija==1) {
        std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
        int dan, mjesec, godina;
        std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
</font><a name="3"></a><font color="#00FFFF"><a href="match166-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

        std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina
        &lt;&lt;" je : "&lt;&lt;evidencija_pacijenata.DajBrojPregledaNaDatum(Datum(dan, mjesec, godina));
       
    }
    else if(opcija==2) {
        std::cout&lt;&lt;"Najraniji pregled je: ";
        evidencija_pacijenata.DajNajranijiPregled().Ispisi();
        std::cout&lt;&lt;std::endl;
    }
    else if(opcija==3) {
        std::cout&lt;&lt;"Unesite ime pacijenta:";
        std::string ime;
        std::cin&gt;&gt;ime;
        
        evidencija_pacijenata.ObrisiPregledePacijenta(ime);
        std::cout&lt;&lt;std::endl;
        
    }
    else if(opcija==4) {
        evidencija_pacijenata.ObrisiNajranijiPregled();
        std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan";
        std::cout&lt;&lt;std::endl;
    }
    else if(opcija==5) {
        std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
        int d, m, g;
        std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
</font><a name="5"></a><font color="#FF0000"><a href="match166-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su:"&lt;&lt;std::endl;
        evidencija_pacijenata.IspisiPregledeNaDatum(Datum(d, m, g));
        std::cout&lt;&lt;std::endl;
    }
    else if(opcija==6) { //ok
        evidencija_pacijenata.IspisiSvePreglede();
        std::cout&lt;&lt;std::endl;
    }
    else break;
    std::cout&lt;&lt;std::endl;
</font>    }
    /*Pregled p1("Elmira D", 1, 2, 2017, 6, 7);
    Pregled p2("Adisa", 1, 1, 2017, 6, 7);
    Pregledi spisak1({p1, p2});
    //Pregledi spisak2(10);
    //spisak2=spisak1;
    std::cout&lt;&lt;spisak1.DajBrojPregledaNaDatum(Datum(1,2,2017));*/
    

    return 0;
}
</pre>
</body>
</html>
