<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student5496.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student5496.cpp<p></p><pre>
<a name="3"></a><font color="#00FFFF"><a href="match138-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
typedef std::tuple&lt;int,int,int&gt; dat;
typedef std::pair&lt;int,int&gt; vrijeme;
class Datum{
    int dan,mjesec,godina;
  public:
  Datum(int dan, int mjesec, int godina){ Postavi(dan,mjesec,godina);}
  void Postavi(int dan, int mjesec, int godina);
  std::tuple&lt;int, int, int&gt; Ocitaj() const;
  void Ispisi() const{
      std::cout&lt;&lt;Datum::dan&lt;&lt;"/"&lt;&lt;Datum::mjesec&lt;&lt;"/"&lt;&lt;Datum::godina;
  }
};

void Datum::Postavi(int dan, int mjesec, int godina){
    int broj_dana[]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>    if(godina%4==0 &amp;&amp; godina%100!=0 || godina%400==0) broj_dana[1]++;
<a name="2"></a><font color="#0000FF"><a href="match138-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_8.gif"/></a>

    if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1]) 
    throw std::domain_error("Neispravan datum");
    Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
}
std::tuple&lt;int, int, int&gt; Datum::Ocitaj() const{
    dat d;
    d=std::make_tuple(Datum::dan,Datum::mjesec,Datum::godina);
    return d;
}
class Vrijeme{
    int sati,minute;
    public:
    Vrijeme(int sati, int minute){ Postavi(sati,minute);}
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj() const;
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;Vrijeme::sati&lt;&lt;":"&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;Vrijeme::minute;
    }
};
void Vrijeme::Postavi(int sati, int minute){
    if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
    else{ Vrijeme::sati=sati; Vrijeme::minute=minute;}
}
std::pair&lt;int, int&gt; Vrijeme::Ocitaj() const{
    vrijeme v;
    v=std::make_pair(Vrijeme::sati,Vrijeme::minute);
    return v;
}
class Pregled{
    Datum dan;
    Vrijeme v;
    std::string ime_pacijenta;
    Pregled() = default;
    
    public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda);
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda,int minute_pregleda);
</font>    void PromijeniPacijenta(const std::string &amp;ime_pacijenta);
<a name="1"></a><font color="#00FF00"><a href="match138-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_20.gif"/></a>

    void PromijeniDatum(const Datum &amp;novi_datum);
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme);
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const{ return this-&gt;ime_pacijenta;}
    Datum DajDatumPregleda() const{ return this-&gt;dan;}
    Vrijeme DajVrijemePregleda() const{ return this-&gt;v;}
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(30)&lt;&lt;std::setfill(' ')&lt;&lt;std::left&lt;&lt;ime_pacijenta; dan.Ispisi(); std::cout&lt;&lt;" "; v.Ispisi();
        std::cout&lt;&lt;std::endl;
    }
};

Pregled::Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda):
    dan(datum_pregleda),v(vrijeme_pregleda), ime_pacijenta(ime_pacijenta){}
Pregled::Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda,int minute_pregleda):
    dan(dan_pregleda,mjesec_pregleda,godina_pregleda),v(sati_pregleda,minute_pregleda),ime_pacijenta(ime_pacijenta){}
void Pregled::PromijeniPacijenta(const std::string &amp;ime_pacijenta){
    this-&gt;ime_pacijenta=ime_pacijenta;
}
void Pregled::PromijeniDatum(const Datum &amp;novi_datum){
    dat d=novi_datum.Ocitaj();
    this-&gt;dan.Postavi(std::get&lt;0&gt;(d), std::get&lt;1&gt;(d), std::get&lt;2&gt;(d));
}
void Pregled::PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
    vrijeme vr=novo_vrijeme.Ocitaj();
    this-&gt;v.Postavi(vr.first, vr.second);
}
void Pregled::PomjeriDanUnaprijed(){
    dat d=dan.Ocitaj();
    int novi_dan=std::get&lt;0&gt;(d)+1;
    this-&gt;dan.Postavi(novi_dan,std::get&lt;1&gt;(d),std::get&lt;2&gt;(d));
}
void Pregled::PomjeriDanUnazad(){
    dat d=dan.Ocitaj();
    int novi_dan=std::get&lt;0&gt;(d)-1;
    this-&gt;dan.Postavi(novi_dan,std::get&lt;1&gt;(d), std::get&lt;2&gt;(d));
}
bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
    dat d1=p1.DajDatumPregleda().Ocitaj();
    dat d2=p2.DajDatumPregleda().Ocitaj();
    vrijeme v1=p1.DajVrijemePregleda().Ocitaj();
    vrijeme v2=p2.DajVrijemePregleda().Ocitaj();
    bool isti(false);
    for(int i(0); i&lt;1; i++){
    if(std::get&lt;2&gt;(d1) &lt; std::get&lt;2&gt;(d2)) {isti=true; break;}
    if(std::get&lt;1&gt;(d1) &lt; std::get&lt;1&gt;(d2)) {isti=true; break;}
    if(std::get&lt;0&gt;(d1) &lt; std::get&lt;0&gt;(d2)) {isti=true; break;}
    if(v1.first &lt; v2.first) {isti=true; break;}
    if(v1.second &lt; v2.second) {isti=true; break;}
    }
    return isti;
}

class Pregledi{
    int broj_pregleda;
    int max_br_pregleda;
    Pregled **pregledii;
    public:
    explicit Pregledi(int max_br_pregleda):broj_pregleda(0),max_br_pregleda(max_br_pregleda),pregledii(new Pregled*[max_br_pregleda]){}
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi(){ 
        for(int i(0); i&lt;broj_pregleda; i++)
        delete pregledii[i];
        delete [] pregledii;
    }
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator=(const Pregledi &amp;pregledi);
    Pregledi &amp;operator=(Pregledi &amp;&amp;Pregledi);
</font>    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(Pregled *pregled);
    int DajBrojPregleda() const{ return broj_pregleda;}
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled () const;
<a name="0"></a><font color="#FF0000"><a href="match138-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_58.gif"/></a>

    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenata(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};
Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda):broj_pregleda(spisak_pregleda.size()),max_br_pregleda(spisak_pregleda.size()),
    pregledii(new Pregled*[max_br_pregleda]){
    int brojac(0);
    try{
        for(auto x:spisak_pregleda) pregledii[brojac++]=new Pregled(x);
    }catch(...){
        for(int i(0); i&lt;brojac; i++)
        delete pregledii [i];
        throw;
    }
}
Pregledi::Pregledi(const Pregledi &amp;pregledi):broj_pregleda(pregledi.broj_pregleda),max_br_pregleda(pregledi.max_br_pregleda),
    pregledii(new Pregled*[pregledi.max_br_pregleda]{}){
    try{
        for(int i(0);i&lt;broj_pregleda; i++)
        pregledii[i]=new Pregled(*pregledi.pregledii[i]);
    }catch(...){
        if(pregledii==nullptr) return;
        for(int i(0); i&lt;broj_pregleda; i++)
        delete pregledii[i];
        delete [] pregledii;
    }
}
Pregledi::Pregledi(Pregledi &amp;&amp;pregledi):broj_pregleda(pregledi.broj_pregleda),max_br_pregleda(pregledi.max_br_pregleda){
    if(&amp;pregledi!=this){
        for(int i=0; i&lt;max_br_pregleda; i++)
        delete pregledii[i];
        delete [] pregledii;
        pregledii=pregledi.pregledii;
        pregledi.pregledii=nullptr;
    }
}
Pregledi &amp;Pregledi::operator=(const Pregledi &amp;pregledi){
    if(&amp;pregledi==this) return *this;
    for(int i(0); i&lt;broj_pregleda; i++) delete pregledii[i];
    broj_pregleda=pregledi.broj_pregleda;
    try{
        for(int i(0); i&lt;broj_pregleda; i++)
        pregledii[i]=new Pregled(*pregledi.pregledii[i]);
    }catch(...){
        //if(pregledii==nullptr) return;
        for(int i(0); i&lt;broj_pregleda; i++)
        delete pregledii[i];
        delete [] pregledii;
        throw;
    }
    return *this;
}
Pregledi &amp;Pregledi::operator=(Pregledi &amp;&amp;pregledi){
    if(&amp;pregledi==this) return *this;
    pregledii=pregledi.pregledii;
    broj_pregleda=pregledi.broj_pregleda;
    pregledi.pregledii=nullptr;
    return *this;
}
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
    if(broj_pregleda+1&gt;max_br_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
    Pregled *pregled(new Pregled(ime_pacijenta, datum_pregleda,vrijeme_pregleda));
    pregledii[broj_pregleda]=pregled; 
    broj_pregleda++;
}
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda){
    if(broj_pregleda+1&gt;max_br_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
    Pregled *pregled(new Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
    pregledii[broj_pregleda]=pregled;
    broj_pregleda++;
}
void Pregledi::RegistrirajPregled(Pregled *pregled){
    if(broj_pregleda+1&gt;max_br_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
    pregledii[broj_pregleda]=pregled; 
    broj_pregleda++;
}
int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const{
    if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    int brojac(0);
    brojac=std::count_if(pregledii, pregledii+broj_pregleda,[&amp;datum](Pregled *pregled)-&gt;bool{
        dat d1=datum.Ocitaj();
        dat d2=pregled-&gt;DajDatumPregleda().Ocitaj();
        return (d1==d2);       
    });
    return brojac;
}
Pregled &amp;Pregledi::DajNajranijiPregled(){
    if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    auto p=std::min_element(pregledii,pregledii+broj_pregleda, [](Pregled* p1, Pregled *p2)-&gt;bool{
        dat d1=p1-&gt;DajDatumPregleda().Ocitaj();
        dat d2=p2-&gt;DajDatumPregleda().Ocitaj();
        vrijeme v1=p1-&gt;DajVrijemePregleda().Ocitaj();
        vrijeme v2=p2-&gt;DajVrijemePregleda().Ocitaj();
        if(std::get&lt;2&gt;(d1) &lt; std::get&lt;2&gt;(d2)) return true;
        else if(std::get&lt;1&gt;(d1) &lt; std::get&lt;1&gt;(d2)) return true;
        else if(std::get&lt;0&gt;(d1) &lt; std::get&lt;0&gt;(d2)) return true;
        else if(v1.first &lt; v2.first) return true;
        else if(v1.second &lt; v2.second) return true;
        return false;
    });
    return **p;
}
Pregled Pregledi::DajNajranijiPregled() const{
    if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
    auto p=std::min_element(pregledii,pregledii+broj_pregleda, [](Pregled* p1, Pregled *p2)-&gt;bool{
        dat d1=p1-&gt;DajDatumPregleda().Ocitaj();
        dat d2=p2-&gt;DajDatumPregleda().Ocitaj();
        vrijeme v1=p1-&gt;DajVrijemePregleda().Ocitaj();
        vrijeme v2=p2-&gt;DajVrijemePregleda().Ocitaj();
        if(std::get&lt;2&gt;(d1) &lt; std::get&lt;2&gt;(d2)) return true;
        if(std::get&lt;1&gt;(d1) &lt; std::get&lt;1&gt;(d2)) return true;
        if(std::get&lt;0&gt;(d1) &lt; std::get&lt;0&gt;(d2)) return true;
        if(v1.first &lt; v2.first) return true;
        if(v1.second &lt; v2.second) return true;
        return false;
    });
    return **p;
}
void Pregledi::IsprazniKolekciju(){
    for(int i(0); i&lt;broj_pregleda; i++)
    delete pregledii[i];
    broj_pregleda=0;
}

//nije dobro
void Pregledi::IspisiSvePreglede() const{
   Pregledi pom=Pregledi(broj_pregleda);
   std::copy(pregledii,pregledii+broj_pregleda,pom.pregledii);
    std::sort(pom.pregledii,pom.pregledii+broj_pregleda,[](Pregled* p1, Pregled* p2){ 
        dat d1=p1-&gt;DajDatumPregleda().Ocitaj();
        dat d2=p2-&gt;DajDatumPregleda().Ocitaj();
        vrijeme v1=p1-&gt;DajVrijemePregleda().Ocitaj();
        vrijeme v2=p2-&gt;DajVrijemePregleda().Ocitaj();
        if(std::get&lt;2&gt;(d1) &lt; std::get&lt;2&gt;(d2)) return true;
        if(std::get&lt;1&gt;(d1) &lt; std::get&lt;1&gt;(d2)) return true;
        if(std::get&lt;0&gt;(d1) &lt; std::get&lt;0&gt;(d2)) return true;
        if(v1.first &lt; v2.first) return true;
        if(v1.second &lt; v2.second) return true;
        return false;});
    
    //std::for_each(pom.pregledii, pom.pregledii+broj_pregleda,[](Pregled *p)-&gt;void{p-&gt;Ispisi();});
    std::for_each(pregledii,pregledii+broj_pregleda,[](Pregled*p)-&gt;void{p-&gt;Ispisi();});
}
void Pregledi::ObrisiNajranijiPregled(){
    if(broj_pregleda==0) throw std::range_error("Prazna kolekcija");
}
 /*   Pregled pregled=Pregledi::DajNajranijiPregled();
    Pregledi temp_pregledi=Pregledi(broj_pregleda);
    int l=0;
    for(int i=0; i&lt;broj_pregleda; i++){
        auto a=pregledii[i];
        if(a-&gt;DajImePacijenta()==pregled-&gt;DajImePacijenta() &amp;&amp; a-&gt;DajDatumPregleda().Ocitaj()==pregled-&gt;DajDatumPregleda().Ocitaj() &amp;&amp;
        a-&gt;DajVrijemePregleda().Ocitaj()==pregled-&gt;DajVrijemePregleda().Ocitaj()) continue;
        temp_pregledi.pregledii[l++]=pregledii[i];
    }
    std::copy(temp_pregledi.pregledii,temp_pregledi.pregledii+broj_pregleda, pregled);
    broj_pregleda--;
}*/
void Pregledi::ObrisiPregledePacijenata(const std::string &amp;ime_pacijenta){
    if(broj_pregleda&gt;0){
        Pregledi temp_pregledi=Pregledi(broj_pregleda);
        int l=0;
        for(int i=0; i&lt;broj_pregleda; i++){
            if(pregledii[i]-&gt;DajImePacijenta()==ime_pacijenta) continue;
            temp_pregledi.pregledii[l++]=pregledii[i];
        }
        broj_pregleda=l;
        std::copy(temp_pregledi.pregledii,temp_pregledi.pregledii+broj_pregleda,pregledii);
    }
}
void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const{
    int brojac=0;
    /*Pregled temp_pregledi=Pregled(broj_pregleda);
    for(int i=0; i&lt;broj_pregleda; i++){
        if(pregledii[i]-&gt;DajDatumPregleda().Ocitaj()==datum.Ocitaj())
        temp_pregledi.pregledii[brojac++]=pregledii[i];
        else continue;
    }
    std::sort(temp_pregledi.pregledii,temp_pregledi.pregledii+brojac,[](Pregled a, Pregled b){
        return DolaziPrije(a,b);});
    for(int i(0); i&lt;brojac; i++) pregledii[i]-&gt;Ispisi();*/
}
int main ()
{
    int max_br_pregleda;
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    std::cin&gt;&gt;max_br_pregleda;
    Pregledi pregledi(max_br_pregleda);
    int br(0);
    for(int i(0); i&lt;max_br_pregleda; i++){
        std::string ime_pacijenta;
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::cin&gt;&gt;ime_pacijenta;
        if(ime_pacijenta=="kraj") break;
        int dan,mj,god;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        std::cin&gt;&gt;dan&gt;&gt;mj&gt;&gt;god;
        Datum datum_pregleda(dan,mj,god);
        int sat,min;
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        std::cin&gt;&gt;sat&gt;&gt;min;
        Vrijeme vrijeme_pregleda(sat,min);
        pregledi.RegistrirajPregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
        br++;
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi\n";
    //for(int i(0); i&lt;br; i++)
    pregledi.IspisiSvePreglede();
    int izbor;
    do{
        std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija\n";
        std::cout&lt;&lt;"1 - Broj pregleda na datum\n";
        std::cout&lt;&lt;"2 - Najraniji pregled\n";
        std::cout&lt;&lt;"3 - Obrisi pregled pacijenta\n";
        std::cout&lt;&lt;"4 - Obrisi najraniji pregled\n";
        std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum\n";
        std::cout&lt;&lt;"6 - Ispisi sve preglede\n";
        std::cout&lt;&lt;"7 - Kraj programa\n";
        std::cin&gt;&gt;izbor;
        if(izbor==1){ 
            int dan,mjes,god;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu :";
            std::cin&gt;&gt;dan&gt;&gt;mjes&gt;&gt;god;
            Datum d(dan,mjes,god);
            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjes&lt;&lt;" "&lt;&lt;god&lt;&lt;" je : "&lt;&lt;pregledi.DajBrojPregledaNaDatum(d)&lt;&lt;"\n";
        }
        if(izbor==2){
            std::cout&lt;&lt;"Najraniji pregled: ";
            try{
                pregledi.DajNajranijiPregled().Ispisi();
                std::cout&lt;&lt;std::endl;
            }catch(std::domain_error izuzetak){
                std::cout&lt;&lt;izuzetak.what();
            }
        }
        if(izbor==3){
            std::string ime_pacijenta;
            std::cout&lt;&lt;"Unesite ime pacijenta: ";
            pregledi.ObrisiPregledePacijenata(ime_pacijenta);
            std::cout&lt;&lt;"Uspjesno obrisano 1 pregleda";
            std::cout&lt;&lt;std::endl;
        }
        if(izbor==4){
            try{
                pregledi.ObrisiNajranijiPregled();
                std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan\n";
            }catch(std::range_error izuzetak){
                std::cout&lt;&lt;izuzetak.what();
            }
        }
        if(izbor==5){
            int dan,mj,god;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu: ";
            std::cin&gt;&gt;dan&gt;&gt;mj&gt;&gt;god;
            Datum d(dan,mj,god);
            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mj&lt;&lt;" "&lt;&lt;god&lt;&lt;"su:\n";
            pregledi.IspisiPregledeNaDatum(d);
            std::cout&lt;&lt;std::endl;
        }
        if(izbor==6){
            pregledi.IspisiSvePreglede();
            std::cout&lt;&lt;std::endl;
        }
        if(izbor==7) break;
        std::cout&lt;&lt;std::endl;
    }while(izbor!=7);
</font>	return 0;
}
</pre>
</body>
</html>
