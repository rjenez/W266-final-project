<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student6455.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student9887.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match122-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;tuple&gt;
#include &lt;algorithm&gt;
class Datum{
    int dan, mjesec, godina;
    public:
    friend class Pregled;
    friend class Pregledi;
    
    Datum(int dan, int mjesec, int godina);
    void Postavi(int dan, int mjesec, int godina);
    std::tuple&lt;int, int, int&gt; Ocitaj() const{
        std::tuple&lt;int, int, int&gt; t(dan, mjesec, godina);
        return t;
    }
    void Ispisi() const{
        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
   friend bool operator==(const Datum &amp;d1, const Datum &amp;d2);
    
};
 bool operator==(const Datum &amp;d1, const Datum &amp;d2){
        return d1.dan==d2.dan &amp;&amp; d1.mjesec==d2.mjesec &amp;&amp; d1.godina==d2.godina;
    }
  Datum::Datum (int dan, int mjesec, int godina){
      int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>      if(godina%4==0 &amp;&amp;( godina%100!=0 || godina%400==0)) broj_dana[1]++;
<a name="2"></a><font color="#0000FF"><a href="match122-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

      if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1]) throw std::domain_error("Neispravan datum");
      Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
  }
  void Datum::Postavi(int dan, int mjesec, int godina){
       int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>      if(godina%4==0 &amp;&amp;( godina%100!=0 || godina%400==0)) broj_dana[1]++;
<a name="0"></a><font color="#FF0000"><a href="match122-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_86.gif"/></a>

      if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1]) throw std::domain_error("Neispravan datum");
      Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
  }
class Vrijeme{
    int sati;
    int minute;
    public:
    friend class Pregled;
    friend class Pregledi;
    friend bool operator==(const Vrijeme &amp;v1, const Vrijeme &amp;v2);
    Vrijeme(int sati, int minute);
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj () const{
        std::pair&lt;int, int&gt; t(sati, minute);
        return t;
    }
    void Ispisi() const{
        std::cout&lt;&lt;sati&lt;&lt;"::"&lt;&lt;minute;
    }
};
bool operator==(const Vrijeme &amp;v1, const Vrijeme &amp;v2){
        return v1.sati==v2.sati &amp;&amp; v1.minute==v2.minute;
    }
  Vrijeme::Vrijeme(int sati, int minute){
      if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59 ) throw std::domain_error("Neispravno vrijeme");
      Vrijeme::sati=sati; Vrijeme::minute=minute;
  }
  void Vrijeme::Postavi(int sati, int minute){
         if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59 ) throw std::domain_error("Neispravno vrijeme");
      Vrijeme::sati=sati; Vrijeme::minute=minute;
  }
  
class Pregled{
    std::string ime_pacijenta;
    Vrijeme vrijeme_pregleda;
    Datum datum_pregleda;
    public:
    friend class Pregledi;
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,
    const Vrijeme &amp;vrijeme_pregleda):ime_pacijenta(ime_pacijenta), datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda){}
    friend bool operator == (const Pregled &amp;p1, const Pregled &amp;p2);
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
     int godina_pregleda, int sati_pregleda, int minute_pregleda):ime_pacijenta(ime_pacijenta), datum_pregleda(dan_pregleda,mjesec_pregleda,godina_pregleda),
     vrijeme_pregleda(sati_pregleda,minute_pregleda){}
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta){
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum){
        Pregled::datum_pregleda=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
        Pregled::vrijeme_pregleda=novo_vrijeme;
    }
    void PomjeriDanUnaprijed(){
         int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
      if(datum_pregleda.godina%4==0 &amp;&amp;( datum_pregleda.godina%100!=0 || datum_pregleda.godina%400==0)) broj_dana[1]++;
      datum_pregleda.dan++;
      if(datum_pregleda.dan&gt;broj_dana[datum_pregleda.mjesec-1]) datum_pregleda.dan=1, datum_pregleda.mjesec++;
      if(datum_pregleda.mjesec&gt;12 ) datum_pregleda.mjesec=1, datum_pregleda.godina++;
    }
    void PomjeriDanUnazad(){
         int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
      if(datum_pregleda.godina%4==0 &amp;&amp; (datum_pregleda.godina%100!=0 || datum_pregleda.godina%400==0)) broj_dana[1]++;
      datum_pregleda.dan--;
      if(datum_pregleda.dan&lt;1) {datum_pregleda.mjesec--; datum_pregleda.dan=broj_dana[datum_pregleda.mjesec];}
    }
    std::string DajImePacijenta() const{
        return ime_pacijenta;
    }
    Datum DajDatumPregleda() const{
        return datum_pregleda;
    }
    Vrijeme DajVrijemePregleda() const{
        return vrijeme_pregleda;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
        if(p1.datum_pregleda.godina==p2.datum_pregleda.godina){
            if(p1.datum_pregleda.mjesec==p2.datum_pregleda.mjesec){
                if(p1.datum_pregleda.dan==p2.datum_pregleda.dan){
                    if(p1.vrijeme_pregleda.sati==p2.vrijeme_pregleda.sati){
                        if(p1.vrijeme_pregleda.minute==p2.vrijeme_pregleda.minute){
                            return false;
                        }
                        return p1.vrijeme_pregleda.minute&lt;p2.vrijeme_pregleda.minute;
                    }
                    return p1.vrijeme_pregleda.sati&lt;p2.vrijeme_pregleda.sati;
                }
                return p1.datum_pregleda.dan&lt;p2.datum_pregleda.dan;
            }
            return p1.datum_pregleda.mjesec&lt;p2.datum_pregleda.mjesec;
        }
        return p1.datum_pregleda.godina&lt;p2.datum_pregleda.godina;
    }
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime_pacijenta&lt;&lt;datum_pregleda.dan&lt;&lt;"/"&lt;&lt;datum_pregleda.mjesec&lt;&lt;"/"&lt;&lt;datum_pregleda.godina&lt;&lt;"/"&lt;&lt;" "&lt;&lt;vrijeme_pregleda.sati&lt;&lt;":"&lt;&lt;vrijeme_pregleda.minute&lt;&lt;std::endl;
    }
};
bool operator == (const Pregled &amp;p1, const Pregled &amp;p2){
        return p1.ime_pacijenta==p2.ime_pacijenta &amp;&amp; p1.vrijeme_pregleda==p2.vrijeme_pregleda  &amp;&amp;
        p1.datum_pregleda==p2.datum_pregleda ;
    }
class Pregledi{
    Pregled** pok_na_niz;
    int max_broj_pregleda;
    int broj_pregleda;
    void OslobodiMemoriju(Pregled** pok, int broj){
	if(!pok) return;
	for(int i=0;i&lt;broj;i++) delete pok[i];
	delete[] pok;
     }
    
    public:
    explicit Pregledi(int max_broj_pregleda):max_broj_pregleda(max_broj_pregleda),broj_pregleda(0), pok_na_niz(new Pregled*[max_broj_pregleda]{}){}
   
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda): max_broj_pregleda(spisak_pregleda.size()),broj_pregleda(spisak_pregleda.size()), pok_na_niz(new Pregled*[spisak_pregleda.size()]{}){
       int i(0);
        for(auto it(spisak_pregleda.begin()); it!=spisak_pregleda.end();it++){
            pok_na_niz[i++]=new Pregled(*it);
        }
    }
    ~Pregledi(){
        OslobodiMemoriju(pok_na_niz,max_broj_pregleda );
    }
    Pregledi(const Pregledi &amp;pregledi):max_broj_pregleda(pregledi.max_broj_pregleda), broj_pregleda(pregledi.broj_pregleda), pok_na_niz(new Pregled*[pregledi.max_broj_pregleda]{}){
        for(int i=0;i&lt;pregledi.broj_pregleda;i++){
            pok_na_niz[i]=new Pregled(*pregledi.pok_na_niz[i]);
        }
    }
    
    
    Pregledi(Pregledi &amp;&amp;pregledi):max_broj_pregleda(pregledi.max_broj_pregleda){
        broj_pregleda=pregledi.broj_pregleda;
        pok_na_niz=pregledi.pok_na_niz;
        pregledi.pok_na_niz=nullptr;
        pregledi.broj_pregleda=0;
    }
    Pregledi &amp;operator =(const Pregledi &amp;pregledi){
        OslobodiMemoriju(pok_na_niz, broj_pregleda);
        broj_pregleda=pregledi.broj_pregleda;
        pok_na_niz=new Pregled*[max_broj_pregleda]{};
        for(int i=0;i&lt;broj_pregleda;i++){
            pok_na_niz[i]=new Pregled(*pregledi.pok_na_niz[i]);
        }
        return *this;
    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi){
        std::swap(broj_pregleda, pregledi.broj_pregleda);
        std::swap(pok_na_niz, pregledi.pok_na_niz);
        return *this;
    }
   
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
    const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
        if(broj_pregleda==max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
        broj_pregleda++;
        pok_na_niz[broj_pregleda]=new Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
    }
    
    
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
    int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
     int minute_pregleda){
         if(broj_pregleda==max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
         broj_pregleda++;
         Pregled* pok(new Pregled(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda));
         for(int i=0;i&lt;broj_pregleda;i++){
             if(pok_na_niz[i]==nullptr){
                 pok_na_niz[i]=pok;
                 break;
             }
         }
     }
    void RegistrirajPregled(Pregled *pregled){
        if(broj_pregleda==max_broj_pregleda) throw std::range_error("Dostignut maksimalni broj pregleda");
        broj_pregleda++;
        for(int i=0;i&lt;broj_pregleda;i++){
             if(pok_na_niz[i]==nullptr){
                 pok_na_niz[i]=pregled;
                 break;
             }
         }
    }
    int DajBrojPregleda() const{
        return broj_pregleda;
    }    
    
    
    
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const{
       int broj=std::count_if(&amp;pok_na_niz[0], &amp;pok_na_niz[broj_pregleda], [&amp;datum](Pregled* p1){
            
      if(p1-&gt;datum_pregleda.godina==datum.godina){
            if(p1-&gt;datum_pregleda.mjesec==datum.mjesec){
                if(p1-&gt;datum_pregleda.dan==datum.dan){
                   
                return true;
            }
            return false;
        }
        return false;
    }
    return false;
    });
        return  broj;
    }

    Pregled &amp;DajNajranijiPregled(){
        if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
        Pregled** pok=std::min_element(&amp;pok_na_niz[0], &amp;pok_na_niz[broj_pregleda], [](Pregled* p1, Pregled* p2){
            
        if(p1-&gt;datum_pregleda.godina==p2-&gt;datum_pregleda.godina){
            if(p1-&gt;datum_pregleda.mjesec==p2-&gt;datum_pregleda.mjesec){
                if(p1-&gt;datum_pregleda.dan==p2-&gt;datum_pregleda.dan){
                    if(p1-&gt;vrijeme_pregleda.sati==p2-&gt;vrijeme_pregleda.sati){
                        if(p1-&gt;vrijeme_pregleda.minute==p2-&gt;vrijeme_pregleda.minute){
                            return false;
                        }
                        return p1-&gt;vrijeme_pregleda.minute&lt;p2-&gt;vrijeme_pregleda.minute;
                    }
                    return p1-&gt;vrijeme_pregleda.sati&lt;p2-&gt;vrijeme_pregleda.sati;
                }
                return p1-&gt;datum_pregleda.dan&lt;p2-&gt;datum_pregleda.dan;
            }
            return p1-&gt;datum_pregleda.mjesec&lt;p2-&gt;datum_pregleda.mjesec;
        }
        return p1-&gt;datum_pregleda.godina&lt;p2-&gt;datum_pregleda.godina;
    
            
        });
        return **pok;
    }
    Pregled DajNajranijiPregled() const{
         if(broj_pregleda==0) throw std::domain_error("Nema registriranih pregleda");
        Pregled** pok=std::min_element(&amp;pok_na_niz[0], &amp;pok_na_niz[broj_pregleda], [](Pregled* p1, Pregled* p2){
            
        if(p1-&gt;datum_pregleda.godina==p2-&gt;datum_pregleda.godina){
            if(p1-&gt;datum_pregleda.mjesec==p2-&gt;datum_pregleda.mjesec){
                if(p1-&gt;datum_pregleda.dan==p2-&gt;datum_pregleda.dan){
                    if(p1-&gt;vrijeme_pregleda.sati==p2-&gt;vrijeme_pregleda.sati){
                        if(p1-&gt;vrijeme_pregleda.minute==p2-&gt;vrijeme_pregleda.minute){
                            return false;
                        }
                        return p1-&gt;vrijeme_pregleda.minute&lt;p2-&gt;vrijeme_pregleda.minute;
                    }
                    return p1-&gt;vrijeme_pregleda.sati&lt;p2-&gt;vrijeme_pregleda.sati;
                }
                return p1-&gt;datum_pregleda.dan&lt;p2-&gt;datum_pregleda.dan;
            }
            return p1-&gt;datum_pregleda.mjesec&lt;p2-&gt;datum_pregleda.mjesec;
        }
        return p1-&gt;datum_pregleda.godina&lt;p2-&gt;datum_pregleda.godina;
    
            
        });
        return **pok;
    }
    void IsprazniKolekciju(){
        OslobodiMemoriju(pok_na_niz, broj_pregleda);
        max_broj_pregleda=max_broj_pregleda;
        broj_pregleda=0;
        pok_na_niz=new Pregled*[max_broj_pregleda]{};
    }
    void ObrisiNajranijiPregled(){
        if(broj_pregleda==0) throw std::range_error("Prazna kolekcija");
       
        for(int i=0;i&lt;broj_pregleda;i++){
            if((*pok_na_niz[i])==DajNajranijiPregled())
            {
                delete pok_na_niz[i];
                pok_na_niz[i]=nullptr;
                broj_pregleda--;
                break;
            }
        }
    }
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
        for(int i=0;i&lt;broj_pregleda;i++){
            if(pok_na_niz[i]-&gt;ime_pacijenta==ime_pacijenta){
                 delete pok_na_niz[i];
                pok_na_niz[i]=nullptr;
                broj_pregleda--;
                break;
            }
        }
    }

    void IspisiPregledeNaDatum(const Datum &amp;datum) const{
     std::sort(&amp;pok_na_niz[0], &amp;pok_na_niz[broj_pregleda],[](Pregled* p1, Pregled* p2){
         if(p1-&gt;vrijeme_pregleda.sati==p2-&gt;vrijeme_pregleda.sati){
                        if(p1-&gt;vrijeme_pregleda.minute==p2-&gt;vrijeme_pregleda.minute){
                            return false;
                        }
                        return p1-&gt;vrijeme_pregleda.minute&lt;p2-&gt;vrijeme_pregleda.minute;
                    }
                    return p1-&gt;vrijeme_pregleda.sati&lt;p2-&gt;vrijeme_pregleda.sati;
     });
     for(int i=0;i&lt;broj_pregleda;i++){
         if((*pok_na_niz[i]).datum_pregleda==datum){
             pok_na_niz[i]-&gt;Ispisi();
         }
     }
    }
    void IspisiSvePreglede() const{
        std::sort(&amp;pok_na_niz[0], &amp;pok_na_niz[broj_pregleda],[](Pregled* p1, Pregled* p2){
         if(p1-&gt;vrijeme_pregleda.sati==p2-&gt;vrijeme_pregleda.sati){
                        if(p1-&gt;vrijeme_pregleda.minute==p2-&gt;vrijeme_pregleda.minute){
                            return false;
                        }
                        return p1-&gt;vrijeme_pregleda.minute&lt;p2-&gt;vrijeme_pregleda.minute;
                    }
                    return p1-&gt;vrijeme_pregleda.sati&lt;p2-&gt;vrijeme_pregleda.sati;
     });
     for(int i=0;i&lt;broj_pregleda;i++){
             (*pok_na_niz[i]).Ispisi();
         }
     
    }

};
int main ()
{
    std::cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    int max_broj_pregleda(0);
    std::cin&gt;&gt;max_broj_pregleda;
    std::string tekst;
    std::string s{"kraj"};
    Pregledi pregled(max_broj_pregleda); 
    int mjesec(0);
    int godina(0);
    int sati(0);
    int minute(0);
    int dan(0);
   std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
    std::getline(std::cin, tekst);
    if(tekst!=s){
    do{
    std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
    std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
    std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
    std::cin&gt;&gt;sati&gt;&gt;minute;
     Datum d(dan,mjesec,godina);
        Vrijeme v(sati,minute);
        Pregled* p=new Pregled(tekst,d,v); 
    pregled.RegistrirajPregled(p);
    std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
            std::getline(std::cin, tekst);
        
       
        }while(tekst!=s);
    }
    std::cout&lt;&lt; "Trenutno su registrovani sljedeci pregledi\n";
    pregled.IspisiSvePreglede();

   int broj(0);
   do{
    std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija\n";
    std::cout&lt;&lt;"1 - Broj pregleda na datum\n";
    std::cout&lt;&lt;"2 - Najraniji pregled\n";
    std::cout&lt;&lt;"3 - Obrisi pregled pacijenta\n";
    std::cout&lt;&lt;"4 - Obrisi najraniji pregled\n";
    std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum\n";
    std::cout&lt;&lt;"6 - Ispisi sve preglede\n";
    std::cout&lt;&lt;"7 - Kraj programa\n";   
    std::cin&gt;&gt;broj;
    if(broj==1){
        std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
        std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
        Datum datum(dan, mjesec, godina);
        int broj_pregleda=pregled.DajBrojPregledaNaDatum(datum);
        std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" je: "&lt;&lt;broj_pregleda&lt;&lt;std::endl;
    }
    if(broj==2){
        std::cout&lt;&lt;"Najraniji pregled je: \n";
        Pregled pre(pregled.DajNajranijiPregled());
        pre.Ispisi();
    }
    std::string s;
    if(broj==3){
        std::cout&lt;&lt;"Unesite ime pacijenta: ";
        std::getline(std::cin, s);
       pregled.ObrisiPregledePacijenta(s);
    }
    if(broj==4){
        pregled.ObrisiNajranijiPregled();
        std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan\n";
    }
    int d,m,g;
    if(broj==5){
        std::cout&lt;&lt;"Unesite dan mjesec i godinu: ";
        std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
        std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;"su:\n";
        Datum dat(d,m,g);
        pregled.IspisiPregledeNaDatum(dat);
        
    }
    if(broj==6){
        pregled.IspisiSvePreglede();
    }
     }while(broj!=7);
	return 0;
</font>}
</pre>
</body>
</html>
