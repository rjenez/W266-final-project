<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student6790.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student6790.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
//#include &lt;cstring&gt;

class Datum {
<a name="6"></a><font color="#00FF00"><a href="match243-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    int dan,mjesec,godina;
    
    public:
    Datum(int dan,int mjesec,int godina) {
        int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>        if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) broj_dana[1]++;
<a name="4"></a><font color="#FF00FF"><a href="match243-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        if(godina&lt;1 || mjesec&lt;1 || dan&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1])
            throw std::domain_error("Neispravan datum");
        Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
    }
    
    void Postavi(int dan,int mjesec,int godina) {
        int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>        if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) broj_dana[1]++;
<a name="3"></a><font color="#00FFFF"><a href="match243-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

        if(godina&lt;1 || mjesec&lt;1 || dan&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1])
            throw std::domain_error("Neispravan datum");
        Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
    }
    
    std::tuple&lt;int,int,int&gt; Ocitaj() const {
        std::tuple&lt;int,int,int&gt; datum{dan,mjesec,godina};
        return datum;
    }
    void Ispisi() const{
        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
</font>    
    int DajDan() const { return dan; } 
    int DajMjesec() const { return mjesec; }
    int DajGodinu() const { return godina; }
    
    friend bool DaLiSuIstiDatumi(Datum d1,Datum d2);
};

bool DaLiSuIstiDatumi (Datum d1,Datum d2) {
        if(d1.dan==d2.dan) {
            if(d1.mjesec==d2.mjesec) {
                if(d1.godina==d2.godina) 
<a name="0"></a><font color="#FF0000"><a href="match243-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_41.gif"/></a>

                    return true;
            }
        }
        return false;
    }

class Vrijeme {
    int sati,minute;
    
    public:
    static bool DaLiJeIspravnoVrijeme(int sati,int minute) {
        if(sati&lt;0 || minute&lt;0 || sati&gt;23 || minute&gt;59)
            return false;
        return true;
    }
    
    Vrijeme (int sati,int minute) {
        if(!DaLiJeIspravnoVrijeme(sati,minute))
            throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati; Vrijeme::minute=minute;
    }
    void Postavi(int sati,int minute) {
        if(!DaLiJeIspravnoVrijeme(sati,minute))
            throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati; Vrijeme::minute=minute;
    }
    std::pair&lt;int,int&gt; Ocitaj() const {
        std::pair&lt;int,int&gt; vrijeme;
        vrijeme=std::make_pair(sati,minute);
        return vrijeme;
    }
    void Ispisi() const{
        std::cout&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;sati&lt;&lt;":";
        std::cout&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;minute;
    }
    int DajSate() const { return sati; }
    int DajMinute() const { return minute; }
};

class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
    
    public:
    Pregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda): 
            datum_pregleda(datum_pregleda.DajDan(),datum_pregleda.DajMjesec(),datum_pregleda.DajGodinu()),
            vrijeme_pregleda(vrijeme_pregleda.DajSate(),vrijeme_pregleda.DajMinute()){
        Pregled::ime_pacijenta=ime_pacijenta;
        
    }
    Pregled(const std::string &amp;ime_pacijenta,int dan_pregleda,int mjesec_pregleda,int godina_pregleda,int sati_pregleda, int minute_pregleda):
            datum_pregleda(dan_pregleda,mjesec_pregleda,godina_pregleda),vrijeme_pregleda(sati_pregleda,minute_pregleda) {
            Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum){
        int d=novi_datum.DajDan(); int m=novi_datum.DajMjesec();int g=novi_datum.DajGodinu();
        datum_pregleda.Postavi(d,m,g);
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
        int s=novo_vrijeme.DajSate(); int m=novo_vrijeme.DajMinute();
        vrijeme_pregleda.Postavi(s,m);
    }

    void PomjeriDanUnaprijed(){
        int d=datum_pregleda.DajDan(); int m=datum_pregleda.DajMjesec();int g=datum_pregleda.DajGodinu();
        int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
        d++;
        if(d&gt;broj_dana[m-1]) {
            d=1;
            m+=1;
            if(m==12) {
                m=1;
                g++;
            }
        }
        datum_pregleda.Postavi(d,m,g);
    }
    
    void PomjeriDanUnazad(){
        int d=datum_pregleda.DajDan(); int m=datum_pregleda.DajMjesec();int g=datum_pregleda.DajGodinu();
        int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
        d--;
        if(d==0) {
            if(m==1) d=31;
            else d=broj_dana[m-2];
            m--;
            if(m==0) {
                m=12;
                g--;
            }
        }
        datum_pregleda.Postavi(d,m,g);
    }
    std::string DajImePacijenta() const{
        return ime_pacijenta;
    }
    Datum DajDatumPregleda() const{
        Datum dat(datum_pregleda.DajDan(),datum_pregleda.DajMjesec(),datum_pregleda.DajGodinu());
        return dat;
    }
    Vrijeme DajVrijemePregleda() const{
        Vrijeme v(vrijeme_pregleda.DajSate(),vrijeme_pregleda.DajMinute());
        return v;
    }
    static bool DolaziPrije(const Pregled &amp;p1,const Pregled &amp;p2){
        int g1=p1.datum_pregleda.DajGodinu();
        int g2=p2.datum_pregleda.DajGodinu();
        if(g2&gt;g1) return false;
        else {
            int m1=p1.datum_pregleda.DajMjesec();
            int m2=p2.datum_pregleda.DajMjesec();
            if(m2&gt;m1) return false;
            else {
                int d1=p1.datum_pregleda.DajDan();
                int d2=p2.datum_pregleda.DajDan();
                if(d2&gt;d1) return false;
                else {
                    int s1=p1.vrijeme_pregleda.DajSate();
                    int s2=p2.vrijeme_pregleda.DajSate();
                    if(s2&gt;s1) return false;
                    else {
                        int min1=p1.vrijeme_pregleda.DajMinute();
                        int min2=p2.vrijeme_pregleda.DajMinute();
                        if(min2&gt;min1) return false;
                    }
                }
            }
        }
        return true;
    }
    void Ispisi() const{
        std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;std::setfill(' ')&lt;&lt;ime_pacijenta;
        datum_pregleda.Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme_pregleda.Ispisi();
        std::cout&lt;&lt;std::endl;
    }
    Datum DajDatum(Pregled p) {
</font>        return p.datum_pregleda;
    }
};

class Pregledi{
<a name="1"></a><font color="#00FF00"><a href="match243-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_14.gif"/></a>

    int broj_pregleda;
    const int max_broj_pregleda;
    Pregled **pregled;
    
    public:
    explicit Pregledi(int max_broj_pregleda): broj_pregleda(0),
            max_broj_pregleda(max_broj_pregleda),
            pregled(new Pregled*[max_broj_pregleda]{}){}
            
    Pregledi (std::initializer_list&lt;Pregled&gt; spisak_pregleda): broj_pregleda(spisak_pregleda.size()),
            max_broj_pregleda(spisak_pregleda.size()),pregled(new Pregled*[spisak_pregleda.size()]{}) {
        int i=0;
        for(auto it=spisak_pregleda.begin();it!=spisak_pregleda.end();it++){
            try {
                pregled[i]=new Pregled(*it);
                i++;
            }
            catch(std::bad_alloc) {
                for(int i(0);i&lt;spisak_pregleda.size();i++) {
                    delete pregled[i];
                    pregled[i]=nullptr;
                }
                throw;
            }
        }
    }
    ~Pregledi(){
        for(int i(0);i&lt;max_broj_pregleda;i++) 
            delete pregled[i];
            delete[] pregled;
    }
    Pregledi(const Pregledi &amp;pregledi): broj_pregleda(pregledi.broj_pregleda), 
    max_broj_pregleda(pregledi.max_broj_pregleda), pregled(new Pregled*[pregledi.max_broj_pregleda]{}){
        try {
            
            for(int i(0);i&lt;pregledi.broj_pregleda;i++) 
                pregled[i]=new Pregled(*pregledi.pregled[i]);
        }
        catch(...) {
            for(int i(0);i&lt;pregledi.broj_pregleda;i++)
                delete pregled[i];
            delete[] pregled;
            throw;
        }
    }
    Pregledi(Pregledi &amp;&amp;pregledi):broj_pregleda(pregledi.broj_pregleda),
            max_broj_pregleda(pregledi.max_broj_pregleda),pregled(pregledi.pregled){
        pregledi.pregled=nullptr;
        pregledi.broj_pregleda=0;
    }
    Pregledi &amp;operator=(const Pregledi &amp;pregledi);
    Pregledi &amp;operator=(Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda);
</font>    void RegistrirajPregled(const std::string &amp;ime_pacijenta,int dan_pregleda,int mjesec_pregleda,int godina_pregleda,int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(Pregled *pregled);
    int DajBrojPregleda() const;
    int DajBrojPregedaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
<a name="2"></a><font color="#0000FF"><a href="match243-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_10.gif"/></a>

    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};


Pregledi &amp;Pregledi::operator=(const Pregledi &amp;pregledi) {
    if(pregledi.broj_pregleda&gt;broj_pregleda){
        try {
            for(int i(0);i&lt;pregledi.broj_pregleda;i++)
                pregled[i]=new Pregled(*pregledi.pregled[i]);
        }
        catch(...) {
            for(int i=broj_pregleda;i&lt;pregledi.broj_pregleda;i++) {
                delete pregled[i];
                pregled[i]=nullptr;
            }
            throw;
        }
    }
    else {
        for(int i=pregledi.broj_pregleda;i&lt;broj_pregleda;i++) {
            delete pregled[i];
            pregled[i]=nullptr;
        }
    }
    broj_pregleda=pregledi.broj_pregleda;
    for(int i(0);i&lt;broj_pregleda;i++) 
        *pregled[i]=*pregledi.pregled[i];
    return *this;
}

Pregledi &amp;Pregledi::operator=(Pregledi &amp;&amp;pregledi) {
    std::swap(broj_pregleda,pregledi.broj_pregleda);
    std::swap(pregled,pregledi.pregled);
    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta,
    const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda){
</font>        if(broj_pregleda&gt;=max_broj_pregleda) throw std::range_error("Dostignut maksimalan broj pregleda");
        pregled[broj_pregleda++]=new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
}

<a name="5"></a><font color="#FF0000"><a href="match243-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta,int dan_pregleda,
    int mjesec_pregleda,int godina_pregleda,int sati_pregleda, int minute_pregleda){
        if(broj_pregleda&gt;=max_broj_pregleda) throw std::range_error("Dostignut maksimalan broj pregleda"); 
        pregled[broj_pregleda++]=new Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda);
</font>}

//void Pregledi::RegistrirajPregled(Pregled *pregled);

int Pregledi::DajBrojPregleda() const{
    return broj_pregleda;
}



//friend bool DaLiSuIstiDatumi(Datum d1,Datum d2);

int Pregledi::DajBrojPregedaNaDatum(const Datum &amp;datum) const{
    int brojac(0);

    for(int i(0);i&lt;broj_pregleda;i++) {
        Datum d=pregled[i]-&gt;DajDatumPregleda();
        if(DaLiSuIstiDatumi(datum,d))
            brojac++;
            
    }
    return brojac;
}

//Pregled DajNajranijiPregled() const;

int main () {
    Pregled p("Meho",1,1,2000,14,23);
    p.Ispisi();
    
    //p.Ispisi();
    //std::cout&lt;&lt;p.DajImePacijenta();
    //p.DajDatumPregleda().Ispisi();
    
    
    
	return 0;
}
</pre>
</body>
</html>
