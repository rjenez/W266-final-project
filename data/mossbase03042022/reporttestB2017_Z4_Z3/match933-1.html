<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student7346.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student5957.cpp<p></p><pre>
<a name="7"></a><font color="#0000FF"><a href="match933-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
using std::string;
using std::cout;
using std::cin;

// RAZLOG ZA PASTE - ZADATAK JE IZBRISAN SA C9 I DEMONSTRATOR NIJE MOGAO URADITI RESTORE
// (IZ NEPOZNATOG RAZLOGA) PA MI JE POSLAO KOD ZADATKA

class Datum{
</font>    int dan,mjesec,godina;
    public:
    Datum(int dan, int mjesec, int godina);
    void Postavi(int dan, int mjesec, int godina);
<a name="4"></a><font color="#FF00FF"><a href="match933-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::tuple&lt;int, int, int&gt; Ocitaj() const{ return std::make_tuple(dan,mjesec,godina); }
    void Ispisi() const{ cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina; }
</font>};
Datum::Datum(int dan, int mjesec, int godina){
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) broj_dana[1]++;
    if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1])
    throw std::domain_error("Neispravan datum!");
    Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
}
void Datum::Postavi(int dan, int mjesec, int godina){
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) broj_dana[1]++;
<a name="5"></a><font color="#FF0000"><a href="match933-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1])
    throw std::domain_error("Neispravan datum!");
    Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
}

class Vrijeme{
    int sati,minute;
    public:
    Vrijeme(int sati, int minute);
</font><a name="0"></a><font color="#FF0000"><a href="match933-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj () const{ return std::make_pair(sati,minute); }
    void Ispisi() const{ cout&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;std::right&lt;&lt;sati&lt;&lt;":"&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;std::right&lt;&lt;minute; }
</font>};
Vrijeme::Vrijeme(int sati, int minute){
    if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59)
    throw std::domain_error("Neispravno vrijeme");
    Vrijeme::sati=sati; Vrijeme::minute=minute;
}
void Vrijeme::Postavi(int sati, int minute){
    if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59)
    throw std::domain_error("Neispravno vrijeme");
    Vrijeme::sati=sati; Vrijeme::minute=minute;
}

class Pregled{
    string ime;
    Datum dat;
    Vrijeme vrijeme;
    public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda);
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta){ ime=ime_pacijenta; }
    void PromijeniDatum(const Datum &amp;novi_datum){ dat=Datum(novi_datum); }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){ vrijeme=Vrijeme(novo_vrijeme); }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const{ return ime; }
<a name="6"></a><font color="#00FF00"><a href="match933-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Datum DajDatumPregleda() const{ return dat; }
    Vrijeme DajVrijemePregleda() const{ return vrijeme; }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi() const{ cout&lt;&lt;std::fixed&lt;&lt;std::setw(30)&lt;&lt;std::setfill(' ')&lt;&lt;std::left&lt;&lt;ime;
</font>    DajDatumPregleda().Ispisi(); cout&lt;&lt;" "; DajVrijemePregleda().Ispisi();  }
};
Pregled::Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda):
    ime(ime_pacijenta),dat(datum_pregleda), vrijeme(vrijeme_pregleda){}
Pregled::Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda,
    int sati_pregleda, int minute_pregleda):ime(ime_pacijenta),dat(dan_pregleda,mjesec_pregleda,godina_pregleda),
    vrijeme(sati_pregleda,minute_pregleda){}
void Pregled::PomjeriDanUnaprijed(){
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    auto t(dat.Ocitaj());
    if((std::get&lt;2&gt;(t)%4==0 &amp;&amp; std::get&lt;2&gt;(t)%100!=0) || std::get&lt;2&gt;(t)%400==0) broj_dana[1]++;
    std::get&lt;0&gt;(t)++;
    if(std::get&lt;0&gt;(t)&gt;broj_dana[std::get&lt;1&gt;(t)-1]){ std::get&lt;0&gt;(t)=1; std::get&lt;1&gt;(t)++; }
    if(std::get&lt;1&gt;(t)&gt;12){ std::get&lt;1&gt;(t)=1; std::get&lt;2&gt;(t)++; }
    dat.Postavi(std::get&lt;0&gt;(t),std::get&lt;1&gt;(t),std::get&lt;2&gt;(t));
}
void Pregled::PomjeriDanUnazad(){
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    auto t(dat.Ocitaj());
    if((std::get&lt;2&gt;(t)%4==0 &amp;&amp; std::get&lt;2&gt;(t)%100!=0) || std::get&lt;2&gt;(t)%400==0) broj_dana[1]++;
    std::get&lt;0&gt;(t)--;
    if(std::get&lt;0&gt;(t)&lt;1){
        std::get&lt;1&gt;(t)--;
        if(std::get&lt;1&gt;(t)&lt;1){ std::get&lt;1&gt;(t)=12; std::get&lt;2&gt;(t)--; }
        std::get&lt;0&gt;(t)=broj_dana[std::get&lt;1&gt;(t)-1];
    }
    dat.Postavi(std::get&lt;0&gt;(t),std::get&lt;1&gt;(t),std::get&lt;2&gt;(t));
}
bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
    auto d1(p1.DajDatumPregleda().Ocitaj()),d2(p2.DajDatumPregleda().Ocitaj());
    if(std::get&lt;2&gt;(d1)==std::get&lt;2&gt;(d2)){
        if(std::get&lt;1&gt;(d1)==std::get&lt;1&gt;(d2)){
            if(std::get&lt;0&gt;(d1)==std::get&lt;0&gt;(d2)){
                auto v1(p1.DajVrijemePregleda().Ocitaj()),v2(p2.DajVrijemePregleda().Ocitaj());
                if(std::get&lt;0&gt;(v1)==std::get&lt;0&gt;(v2)){
                    if(std::get&lt;1&gt;(v1)==std::get&lt;1&gt;(v2)) return false;
                    return std::get&lt;1&gt;(v1)&gt;std::get&lt;1&gt;(v2);
                }
                return std::get&lt;0&gt;(v1)&gt;std::get&lt;0&gt;(v2);
            }
            return std::get&lt;0&gt;(d1)&gt;std::get&lt;0&gt;(d2);
        }
        return std::get&lt;1&gt;(d1)&gt;std::get&lt;1&gt;(d2);
    }
    return std::get&lt;2&gt;(d1)&gt;std::get&lt;2&gt;(d2);
}

bool operator ==(const Datum &amp;d1,const Datum &amp;d2){
    return d1.Ocitaj()==d2.Ocitaj();
}

class Pregledi{
    int max_br_pregleda;
    int broj_reg;
    Pregled **niz_pregleda=nullptr;
    public:
    explicit Pregledi(int max_broj_pregleda);
<a name="1"></a><font color="#00FF00"><a href="match933-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi(){ for(int i(0);i&lt;max_br_pregleda;i++) delete niz_pregleda[i]; delete[] niz_pregleda; }
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
</font>    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
    const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
    int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
    int minute_pregleda);
    void RegistrirajPregled(Pregled *pregled);
    int DajBrojPregleda() const{ return broj_reg; }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};
Pregledi::Pregledi(int max_broj_pregleda):max_br_pregleda(max_broj_pregleda),broj_reg(0){
    niz_pregleda=new Pregled*[max_br_pregleda]{}; }
Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda):max_br_pregleda(spisak_pregleda.size()){
    niz_pregleda=new Pregled*[spisak_pregleda.size()]{};
    int i(0);
    for(auto it(spisak_pregleda.begin());it!=spisak_pregleda.end();it++){
        niz_pregleda[i]=new Pregled(*it);
        i++;
    }
    broj_reg=spisak_pregleda.size();
}
Pregledi::Pregledi(const Pregledi &amp;pregledi):max_br_pregleda(pregledi.max_br_pregleda){
    niz_pregleda=new Pregled*[pregledi.max_br_pregleda]{};
<a name="8"></a><font color="#00FFFF"><a href="match933-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

    for(int i(0);i&lt;pregledi.broj_reg;i++){
        niz_pregleda[i]=new Pregled(*pregledi.niz_pregleda[i]);
    }
    broj_reg=pregledi.broj_reg;
</font>}
Pregledi::Pregledi(Pregledi &amp;&amp;pregledi):max_br_pregleda(pregledi.max_br_pregleda){
    niz_pregleda=new Pregled*[pregledi.max_br_pregleda]{};
    for(int i(0);i&lt;pregledi.broj_reg;i++){
        niz_pregleda[i]=pregledi.niz_pregleda[i];
        pregledi.niz_pregleda[i]=nullptr;
    }
    broj_reg=pregledi.broj_reg;
    pregledi.niz_pregleda=nullptr;
}
Pregledi &amp;Pregledi::operator =(const Pregledi &amp;pregledi){
    if(&amp;pregledi!=this){
        for(int i(0);i&lt;max_br_pregleda;i++) delete niz_pregleda[i]; delete[] niz_pregleda;
        niz_pregleda=nullptr;
        max_br_pregleda=pregledi.max_br_pregleda;
        niz_pregleda=new Pregled*[pregledi.max_br_pregleda]{};
<a name="9"></a><font color="#FF00FF"><a href="match933-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

        for(int i(0);i&lt;pregledi.broj_reg;i++){
            niz_pregleda[i]=new Pregled(*pregledi.niz_pregleda[i]);
        }
        broj_reg=pregledi.broj_reg;
</font>    }
    return *this;
}
Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi){
    if(&amp;pregledi!=this){
        for(int i(0);i&lt;max_br_pregleda;i++) delete niz_pregleda[i]; delete niz_pregleda;
        niz_pregleda=nullptr;
        max_br_pregleda=pregledi.max_br_pregleda;
        niz_pregleda=new Pregled*[pregledi.max_br_pregleda]{};
        for(int i(0);i&lt;pregledi.broj_reg;i++){
            niz_pregleda[i]=pregledi.niz_pregleda[i];
            pregledi.niz_pregleda[i]=nullptr;
        }
        pregledi.niz_pregleda=nullptr;
        broj_reg=pregledi.broj_reg;
    }
    return *this;
}
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda,
const Vrijeme &amp;vrijeme_pregleda){
        for(int i(0);i&lt;max_br_pregleda;i++){
            if(niz_pregleda[i]==nullptr){
                niz_pregleda[i]=new Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda);
                broj_reg++;
                return;
            }
        }
        throw std::range_error("Dostignut maksimalni broj pregleda");
}
void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,int mjesec_pregleda,
int godina_pregleda, int sati_pregleda,int minute_pregleda){
    for(int i(0);i&lt;max_br_pregleda;i++){
            if(niz_pregleda[i]==nullptr){
                niz_pregleda[i]=new Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,
                sati_pregleda,minute_pregleda);
                broj_reg++;
                return;
            }
        }
    throw std::range_error("Dostignut maksimalni broj pregleda");
}
void Pregledi::RegistrirajPregled(Pregled *pregled){
    for(int i(0);i&lt;max_br_pregleda;i++){
            if(niz_pregleda[i]==nullptr){
                niz_pregleda[i]=pregled;
                pregled=nullptr;
                broj_reg++;
                return;
            }
        }
    throw std::range_error("Dostignut maksimalni broj pregleda");
}
int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const{
    return std::count_if(niz_pregleda,niz_pregleda+broj_reg,[&amp;datum](Pregled *pregled){
       return datum.Ocitaj()==pregled-&gt;DajDatumPregleda().Ocitaj(); });
}
Pregled &amp;Pregledi::DajNajranijiPregled(){
    if(broj_reg==0) throw std::domain_error("Nema registriranih pregleda");
    return **std::min_element(niz_pregleda,niz_pregleda+broj_reg,[](Pregled *p1,Pregled *p2){
        return !Pregled::DolaziPrije(*p1,*p2); });
}
Pregled Pregledi::DajNajranijiPregled() const{
    if(broj_reg==0) throw std::domain_error("Nema registriranih pregleda");
    return **std::min_element(niz_pregleda,niz_pregleda+broj_reg,[](Pregled *p1,Pregled *p2){
        return !Pregled::DolaziPrije(*p1,*p2); });
}
<a name="3"></a><font color="#00FFFF"><a href="match933-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

void Pregledi::IsprazniKolekciju(){
    for(int i(0);i&lt;broj_reg;i++){
        delete niz_pregleda[i];
        niz_pregleda[i]=nullptr;
    }
    broj_reg=0;
}
void Pregledi::ObrisiNajranijiPregled(){
    if(broj_reg==0) throw std::range_error("Prazna kolekcija");
    Pregled *min(niz_pregleda[0]);
</font>    for(int i(0);i&lt;broj_reg;i++){
        if(Pregled::DolaziPrije(*min,*niz_pregleda[i])) min=niz_pregleda[i];
    }
    for(int i(0);i&lt;broj_reg;i++){
        if(min==niz_pregleda[i]){
            delete niz_pregleda[i];
            for(int j(i);j&lt;broj_reg-1;j++) niz_pregleda[j]=niz_pregleda[j+1];
            broj_reg--;
            niz_pregleda[broj_reg]=nullptr;
            i--;
        }
    }
}
void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
    for(int i(0);i&lt;broj_reg;i++){
        if(ime_pacijenta==niz_pregleda[i]-&gt;DajImePacijenta()){
            delete niz_pregleda[i];
            for(int j(i);j&lt;broj_reg-1;j++) niz_pregleda[j]=niz_pregleda[j+1];
            broj_reg--;
            niz_pregleda[broj_reg]=nullptr;
            i--;
        }
    }
}
void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const{
    std::sort(niz_pregleda,niz_pregleda+broj_reg,[](Pregled *p1,Pregled *p2){
        return !Pregled::DolaziPrije(*p1,*p2); });
    for(int i(0);i&lt;broj_reg;i++){
        if(datum==niz_pregleda[i]-&gt;DajDatumPregleda()) 
        { niz_pregleda[i]-&gt;Ispisi(); cout&lt;&lt;std::endl; }
    }
}
void Pregledi::IspisiSvePreglede() const{
    std::sort(niz_pregleda,niz_pregleda+broj_reg,[](Pregled *p1,Pregled *p2){
        return !Pregled::DolaziPrije(*p1,*p2); });
    for(int i(0);i&lt;broj_reg;i++){ niz_pregleda[i]-&gt;Ispisi(); cout&lt;&lt;std::endl; }
}

int main ()
{
    int n(0);
    cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
    cin&gt;&gt;n;
    Pregledi p(n);
    try{
        for(int i(0);i&lt;n;i++){
            string ime;
            cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
            cin.clear();
            cin.ignore(1000,'\n');
            std::getline(cin,ime);
            if(ime=="kraj") break;
            int d(0),m(0),g(0),h(0),min(0);
<a name="2"></a><font color="#0000FF"><a href="match933-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
            cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
            cout&lt;&lt;"Unesite sate i minute pregleda: ";
            cin&gt;&gt;h&gt;&gt;min;
            p.RegistrirajPregled(ime,d,m,g,h,min);
        }
        cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
</font>        p.IspisiSvePreglede(); cout&lt;&lt;std::endl;
        while(true){
            try{
            int opcija(0);
            cout&lt;&lt;"Odaberite jednu od sljedecih opcija\n1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta";
            cout&lt;&lt;"\n4 - Obrisi najraniji pregled\n5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa"&lt;&lt;std::endl;
            cin&gt;&gt;opcija;
            if(opcija==1){
                int d(0),m(0),g(0);
                cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
                Datum dat(d,m,g);
                cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;p.DajBrojPregledaNaDatum(dat)&lt;&lt;std::endl;
            }
            if(opcija==2){
                cout&lt;&lt;"Najraniji pregled je:"&lt;&lt;std::endl;
                p.DajNajranijiPregled().Ispisi(); cout&lt;&lt;std::endl;
            }
            if(opcija==3){
                string ime;
                cin.clear();
                cin.ignore(1000,'\n');
                cout&lt;&lt;"Unesite ime pacijenta: ";
                getline(cin,ime);
                int d(p.DajBrojPregleda());
                p.ObrisiPregledePacijenta(ime);
                cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;d-p.DajBrojPregleda()&lt;&lt;" pregleda"&lt;&lt;std::endl;
            }
            if(opcija==4){
                p.ObrisiNajranijiPregled();
                cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
            }
            if(opcija==5){
                int d(0),m(0),g(0);
                cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
                Datum dat(d,m,g);
                cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su:"&lt;&lt;std::endl;
                p.IspisiPregledeNaDatum(dat); cout&lt;&lt;std::endl;
            }
            if(opcija==6){
                p.IspisiSvePreglede(); cout&lt;&lt;std::endl;
            }
            if(opcija==7) break;
        }
        catch(std::range_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
        }
        catch(std::domain_error izuzetak){
            cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;
        }
        cout&lt;&lt;std::endl;
        }
    }
    catch(std::range_error izuzetak){
        cout&lt;&lt;izuzetak.what();
    }
    catch(std::domain_error izuzetak){
        cout&lt;&lt;izuzetak.what();
    }
    
	return 0;
}

</pre>
</body>
</html>
