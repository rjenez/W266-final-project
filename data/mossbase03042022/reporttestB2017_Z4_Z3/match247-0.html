<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4167.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z3/student4167.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match247-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_54.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;

class Datum
{
	int d, m, g;
	public:
	Datum(int dan, int mjesec, int godina) : d(0), m(0), g(0) {d = dan; m = mjesec; g = godina;}
    void Postavi(int dan, int mjesec, int godina);
    int DajDan() const {return d;}
    std::tuple&lt;int, int, int&gt; Ocitaj() const{ return (std::make_tuple(d,m,g));}
    void Ispisi() const {std::cout &lt;&lt; d &lt;&lt; "/" &lt;&lt; m &lt;&lt; "/" &lt;&lt; g;}
};

class Vrijeme
{
    int s, m;
	public:
	Vrijeme(int sati, int minute) {s = sati; m = minute;}
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj () const {return (std::make_pair(s, m));}
    void Ispisi() const {std::cout.fill('0'); std::cout.width(2); std::cout &lt;&lt; s &lt;&lt; ":";
        std::cout.fill('0'); std::cout.width(2); std::cout &lt;&lt; m; }
};

class Pregled
{
    std::string ime;
    Datum datum_pr;
    Vrijeme vrijeme_pr;
	public:
	Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : datum_pr(datum_pregleda), vrijeme_pr(vrijeme_pregleda)
	{
	    ime = ime_pacijenta; datum_pr = datum_pregleda; vrijeme_pr = vrijeme_pregleda;
	}
	Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) : datum_pr(dan_pregleda,mjesec_pregleda,godina_pregleda), vrijeme_pr(sati_pregleda,minute_pregleda)
	{
	    ime = ime_pacijenta;
	}
	void Postavi(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda)
	{
	    this-&gt;ime = ime_pacijenta; this-&gt;datum_pr = datum_pregleda; this-&gt;vrijeme_pr = vrijeme_pregleda;
	}
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {ime = ime_pacijenta;}
    void PromijeniDatum(const Datum &amp;novi_datum) {datum_pr = novi_datum;}
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {vrijeme_pr = novo_vrijeme;}
    void PomjeriDanUnaprijed()
    {
        int dan = datum_pr.DajDan(); dan += 1;
    }
    void PomjeriDanUnazad()
    {
        int dan = datum_pr.DajDan(); dan -= 1;
    }
    std::string DajImePacijenta() const {return ime;}
    Datum DajDatumPregleda() const {return datum_pr;}
    Vrijeme DajVrijemePregleda() const {return vrijeme_pr;}
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2)
    {
        if(p1.DajDatumPregleda().Ocitaj() &gt; p2.DajDatumPregleda().Ocitaj()) return true;
        else return false;
    }
    void Ispisi() const
    {
        std::cout &lt;&lt; std::left &lt;&lt; std::cout.width(30) &lt;&lt; DajImePacijenta();
        DajDatumPregleda().Ispisi(); std::cout &lt;&lt; " "; DajVrijemePregleda().Ispisi(); std::cout &lt;&lt; std::endl;
    }
};

class Pregledi
{
    const int kapacitet;
    int broj_evidentiranih;
    Pregled **svi_pregledi;
    public:
	explicit Pregledi(int max_broj_pregleda) : kapacitet(max_broj_pregleda), broj_evidentiranih(0), svi_pregledi(new Pregled*[max_broj_pregleda]) {}
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) : broj_evidentiranih(spisak_pregleda.size()), kapacitet(spisak_pregleda.size()), svi_pregledi(new Pregled*[spisak_pregleda.size()])
    {
        int brojac(0);
        for(auto &amp;x : spisak_pregleda) svi_pregledi[brojac++] = new Pregled(x);
    }
    ~Pregledi();
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda)
    {
        Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
        int index(-1);
        for (int i = 0; i &lt; broj_evidentiranih; i++)
        {
            if(svi_pregledi[i]-&gt;DajImePacijenta() == ime_pacijenta) index = i;
        }
        if (index == -1) throw std::domain_error ("Pacijent nije nadjen");
        if (broj_evidentiranih == kapacitet) throw std::range_error ("Dostignut maksimalni broj pregleda");
        //svi_pregledi[index]-&gt;Pregled(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda)
    {
        Pregled(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
        int index(-1);
        for (int i = 0; i &lt; broj_evidentiranih; i++)
        {
            if(svi_pregledi[i]-&gt;DajImePacijenta() == ime_pacijenta) index = i;
        }
        if (index == -1) throw std::domain_error ("Pacijent nije nadjen");
        if (broj_evidentiranih == kapacitet) throw std::range_error ("Dostignut maksimalni broj pregleda");
        
    }
    void RegistrirajPregled(Pregled *pregled);
   /* {
        if (broj_evidentiranih == kapacitet) throw std::range_error ("Dostignut maksimalni broj pregleda");
        for (int i = 0; i &lt; broj_evidentiranih; i++)
        {
            
        }
    }*/
    int DajBrojPregleda() const {return broj_evidentiranih;}
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const; //realizirati pomocu count_if
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
    void Obrisi ()
    {
        if (svi_pregledi == nullptr) return;
        for (int i = 0; i &lt; broj_evidentiranih; i++) delete svi_pregledi[i];
        delete[] svi_pregledi; 
    }
};

void Datum::Postavi(int dan, int mjesec, int godina)
{
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if((godina % 4 == 0 &amp;&amp; godina % 100 != 0) || godina % 400 == 0) broj_dana[1]++;
<a name="1"></a><font color="#00FF00"><a href="match247-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_40.gif"/></a>

    if(godina &lt; 1 || dan &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &gt; broj_dana[mjesec - 1])
        throw std::domain_error ("Nesipravan datum");
    this-&gt;d = dan; this-&gt;m = mjesec; this-&gt;g = godina;
}


void Vrijeme::Postavi(int sati, int minute)
{
    if(sati &lt; 0 || sati &gt; 23) throw std::domain_error ("Neispravno vrijeme");
    else s = sati;
    if(minute &lt; 0 || minute &gt; 59) throw std::domain_error ("Neispravno vrijeme");
    else m = minute;
}

Pregledi::~Pregledi()
{
    for (int i = 0; i &lt; broj_evidentiranih; i++) delete svi_pregledi[i];
    delete[] svi_pregledi;
}

Pregledi::Pregledi(const Pregledi &amp;pregledi) : kapacitet(pregledi.kapacitet), broj_evidentiranih(pregledi.broj_evidentiranih), svi_pregledi(new Pregled*[pregledi.kapacitet])
{
    for (int i = 0; i &lt; pregledi.broj_evidentiranih; i++)
    {
        svi_pregledi[i] = new Pregled(*pregledi.svi_pregledi[i]);
    }
}

Pregledi::Pregledi(Pregledi &amp;&amp;pregledi) : kapacitet(pregledi.kapacitet), broj_evidentiranih(pregledi.broj_evidentiranih), svi_pregledi(pregledi.svi_pregledi)
{
    pregledi.svi_pregledi = nullptr; pregledi.broj_evidentiranih = 0;
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;pregledi)
{
    if (&amp;pregledi != this)
    {
        Obrisi();
        broj_evidentiranih = pregledi.broj_evidentiranih;
        for (int i = 0; i &lt; pregledi.broj_evidentiranih; i++) 
        {
            svi_pregledi[i] = new Pregled(*pregledi.svi_pregledi[i]);
        }
    }
    return *this;
}

Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi)
{
    if (&amp;pregledi != this)
    {
        Obrisi();
        svi_pregledi = pregledi.svi_pregledi;
        broj_evidentiranih = pregledi.broj_evidentiranih;
        pregledi.svi_pregledi = nullptr;
    }
    return *this;
}


int main ()
{
    try{
	int max_br_pr;
	std::cout &lt;&lt; "Unesite maksimalan broj pregleda: ";
	std::cin &gt;&gt; max_br_pr;
	std::string ime_pac;
	int d, m, g, s, min;
	Datum datum_preg(d, m, g);
	Vrijeme vrijeme_preg(s, min);
	Pregled pregl(ime_pac, datum_preg, vrijeme_preg);
	//std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
	//std::getline(std::cin, ime_pac);
	//std::cin.ignore(1000, '\n');
	for (int i = 0; i &lt; max_br_pr; i++)
	{
	    std::cin.ignore(1000, '\n');
	    std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
	    std::getline(std::cin, ime_pac);
	    
	    if (ime_pac.compare("kraj") == 0)
	    {
	        std::cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi" &lt;&lt; std::endl;
	        pregl.Ispisi(); std::cout &lt;&lt; std::endl;
	    }
	    
	    
	    std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: ";
	    std::cin &gt;&gt; d &gt;&gt; m &gt;&gt; g;  datum_preg.Postavi(d,m,g);
	    std::cout &lt;&lt; "Unesite sate i minute pregleda: ";
	    std::cin &gt;&gt; s &gt;&gt; min;  vrijeme_preg.Postavi(s,min);
	    pregl.Postavi(ime_pac, datum_preg, vrijeme_preg);

	}
	
	
	std::cout &lt;&lt; std::endl &lt;&lt; "Odaberite jednu od sljedecih opcija: ";
	int n;
	std::cin &gt;&gt; n;
	do{
	if (n == 1) std::cout &lt;&lt; "1 - Broj pregleda na datum";
	if (n == 2) std::cout &lt;&lt; "2 - Najraniji pregled";
	if (n == 3) std::cout &lt;&lt; "3 - Obrisi pregled pacijenta";
	if (n == 4) std::cout &lt;&lt; "4 - Obrisi najraniji pregled";
	if (n == 5) std::cout &lt;&lt; "5 - Ispisi sve pregleda na datum";
	if (n == 6) std::cout &lt;&lt; "6 - Ispisi sve preglede";
	if (n == 7) {std::cout &lt;&lt; "7 - Kraj programa"; return 0;}
	} while (n != 1 || n != 2 || n != 3 || n != 4 || n != 5 || n != 6 || n != 7);
    }
    catch (std::domain_error izuzetak)
    {
        std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
</font>    }
	return 0;
}</pre>
</body>
</html>
