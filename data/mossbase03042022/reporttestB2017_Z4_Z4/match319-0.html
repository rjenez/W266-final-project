<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student8367.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student8367.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt; 
#include &lt;memory&gt;

class Datum
{
    int dan, mjesec, godina;
    bool TestIspravnosti (int d, int m, int g) {
        int DaniUMjesecu [] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if (g &gt;= 1 &amp;&amp; m &gt;=1 &amp;&amp; m &lt;= 12) {
            int ZadnjiDanMjeseca = DaniUMjesecu [m-1];
            if (m == 2 &amp;&amp; ((g % 4 == 0 &amp;&amp; g % 100 != 0) || (g % 400 == 0))) {
                ZadnjiDanMjeseca = 29;
            }
            return (d &gt;= 1 &amp;&amp; d &lt;= ZadnjiDanMjeseca);
        } else {
            return false;
        }
    }
public:
    Datum() { }
    Datum (int dan, int mjesec, int godina) {
        if (!TestIspravnosti(dan, mjesec, godina)) throw std::domain_error ("Neispravan datum");
        Datum::dan = dan;
        Datum::mjesec = mjesec;
        Datum::godina = godina;
    }

    void Postavi (int dan, int mjesec, int godina) {
        if (!TestIspravnosti(dan, mjesec, godina)) throw std::domain_error ("Neispravan datum");
        Datum::dan = dan;
        Datum::mjesec = mjesec;
        Datum::godina = godina;
    }

    std::tuple &lt;int, int, int &gt; Ocitaj() const {
        return std::make_tuple (dan, mjesec, godina);
    }

    void Ispisi() const {
<a name="10"></a><font color="#FF0000"><a href="match319-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

        std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }
};

class Vrijeme
{
    int sati, minute;
public:
</font>    Vrijeme() { }
    Vrijeme(int sati, int minute) {
        if ((sati &lt; 0 || sati &gt; 23) || (minute &lt; 0 || minute &gt; 59)) throw std::domain_error ("Neispravno vrijeme");
        Vrijeme::sati = sati;
        Vrijeme::minute = minute;
    }

    void Postavi(int sati, int minute) {
        if ((sati &lt; 0 || sati &gt; 23) || (minute &lt; 0 || minute &gt; 59)) throw std::domain_error ("Neispravno vrijeme");
        Vrijeme::sati = sati;
        Vrijeme::minute = minute;
    }

    std::pair &lt;int, int &gt; Ocitaj() const {
        return std::make_pair (sati, minute);
    }

    void Ispisi() const {
        if (sati &lt; 10)
            std::cout &lt;&lt; "0";
        std::cout &lt;&lt; sati &lt;&lt; ":";
        if (minute &lt; 10)
            std::cout &lt;&lt; "0";
        std::cout &lt;&lt; minute;
    }
};

class Pregled
{
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
public:
    Pregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        Pregled::ime_pacijenta = ime_pacijenta;
        Pregled::datum_pregleda = datum_pregleda;
        Pregled::vrijeme_pregleda = vrijeme_pregleda;
    }

    Pregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
        try {
            Pregled::ime_pacijenta = ime_pacijenta;
            Pregled::datum_pregleda.Postavi(dan_pregleda, mjesec_pregleda, godina_pregleda);
            Pregled::vrijeme_pregleda.Postavi(sati_pregleda, minute_pregleda);
        }

        catch (std::domain_error poruka) {
            throw std::domain_error (poruka.what());
        }
    }

    void PromijeniPacijenta (const std::string &amp;ime_pacijenta);
    void PromijeniDatum (const Datum &amp;novi_datum);
    void PromijeniVrijeme (const Vrijeme &amp;novo_vrijeme);
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const;
    Datum DajDatumPregleda() const;
    Vrijeme DajVrijemePregleda() const;
    static bool DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi() const;
};

void Pregled::PromijeniPacijenta (const std::string &amp;ime_pacijenta)
{
    Pregled::ime_pacijenta = ime_pacijenta;
}

void Pregled::PromijeniDatum (const Datum &amp;novi_datum)
{
    Pregled::datum_pregleda = novi_datum;
}

void Pregled::PromijeniVrijeme (const Vrijeme &amp;novo_vrijeme)
{
    Pregled::vrijeme_pregleda = novo_vrijeme;
}

void Pregled::PomjeriDanUnaprijed()
{
    int DaniUMjesecu[] =  {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    std::tuple &lt;int, int, int &gt; datumPregleda = datum_pregleda.Ocitaj();
    int ZadnjiDanMjeseca = DaniUMjesecu [std::get &lt; 1 &gt; (datumPregleda)-1];
    if (std::get &lt; 1 &gt; (datumPregleda) == 2 &amp;&amp; ((std::get &lt; 2 &gt; (datumPregleda) % 4 == 0 &amp;&amp; std::get &lt; 2 &gt; (datumPregleda) % 100 != 0) || (std::get &lt; 2 &gt; (datumPregleda) % 400 == 0))) {
        ZadnjiDanMjeseca = 29;
    }

    std::get &lt; 0 &gt; (datumPregleda) += 1;
    if (std::get &lt; 0 &gt; (datumPregleda)) {
    std::get &lt; 0 &gt; (datumPregleda) = 1;
        std::get &lt; 1 &gt; (datumPregleda) += 1;
        if (std::get &lt; 1 &gt; (datumPregleda) &gt; 12) {
            std::get &lt; 1 &gt; (datumPregleda) = 1;
            std::get &lt; 2 &gt; (datumPregleda) += 1;
        }
    }
}

void Pregled::PomjeriDanUnazad()
{
    int DaniUMjesecu[] =  {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    std::tuple &lt;int, int, int &gt; datumPregleda = datum_pregleda.Ocitaj();
    int ZadnjiDanMjeseca = DaniUMjesecu [std::get &lt; 1 &gt; (datumPregleda)-1];
    if (std::get &lt; 1 &gt; (datumPregleda) == 2 &amp;&amp; ((std::get &lt; 2 &gt; (datumPregleda) % 4 == 0 &amp;&amp; std::get &lt; 2 &gt; (datumPregleda) % 100 != 0) || (std::get &lt; 2 &gt; (datumPregleda) % 400 == 0))) {
        ZadnjiDanMjeseca = 29;
    }

    std::get &lt; 0 &gt; (datumPregleda) -= 1;
    if (std::get &lt; 0 &gt; (datumPregleda) &lt; 1) {
        std::get &lt; 0 &gt; (datumPregleda) = ZadnjiDanMjeseca;
        std::get &lt; 1 &gt; (datumPregleda) -=1;
        if (std::get &lt; 1 &gt; (datumPregleda) &lt; 1) {
            std::get &lt; 1 &gt; (datumPregleda) = 12;
            std::get &lt; 2 &gt; (datumPregleda) -= 1;
        }
    }
}

std::string Pregled::DajImePacijenta() const
{
    return ime_pacijenta;
}

Datum Pregled::DajDatumPregleda() const
{
    return datum_pregleda;
}

Vrijeme Pregled::DajVrijemePregleda() const
{
    return vrijeme_pregleda;
}

bool Pregled::DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2)
{
    std::tuple &lt; int, int, int &gt; datumPregledaP1 = p1.DajDatumPregleda().Ocitaj();
    std::pair &lt; int, int &gt; vrijeme_pregledaP1 = p1.DajVrijemePregleda().Ocitaj();
    std::tuple &lt; int, int, int &gt; datumPregledaP2 = p2.DajDatumPregleda().Ocitaj();
<a name="11"></a><font color="#00FF00"><a href="match319-1.html#11" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

    std::pair &lt; int, int &gt; vrijeme_pregledaP2 = p2.DajVrijemePregleda().Ocitaj();
    if (std::get &lt; 2 &gt; (datumPregledaP1) &gt; std::get &lt; 2 &gt; (datumPregledaP2)) {
        return false;
    } else if (std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2)) {
</font>        if (std::get &lt; 1 &gt; (datumPregledaP1) &gt; std::get &lt; 1 &gt; (datumPregledaP2)) {
            return false;
        } else if (std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2)) {
            if  (std::get &lt; 0 &gt; (datumPregledaP1) &gt; std::get &lt; 0 &gt; (datumPregledaP2)) {
                return false;
            } else if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2)) {
<a name="4"></a><font color="#FF00FF"><a href="match319-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                if (vrijeme_pregledaP1.first &gt; vrijeme_pregledaP2.first) {
                    return false;
                } else if (vrijeme_pregledaP1.first == vrijeme_pregledaP2.first) {
                    if (vrijeme_pregledaP1.second &gt; vrijeme_pregledaP2.second) {
                        return false;
                    }
                }
            }
        }
    }
    return true;
</font>}

void Pregled::Ispisi() const
{
    std::cout &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; ime_pacijenta;
    datum_pregleda.Ispisi();
    std::cout &lt;&lt; " ";
    vrijeme_pregleda.Ispisi();
    std::cout &lt;&lt; std::endl;
}

class Pregledi
{
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; preglediPok ;
public:
    explicit Pregledi (int max_broj_pregleda=0):preglediPok(0) {}

    Pregledi (std::initializer_list &lt; Pregled &gt; spisak_pregleda):preglediPok(spisak_pregleda.size()) {
        int index {0};
<a name="7"></a><font color="#0000FF"><a href="match319-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

        for (auto i = spisak_pregleda.begin(); i !=spisak_pregleda.end(); i++) {
            preglediPok[index] = std::make_shared&lt;Pregled&gt; (*i);
            index++;
</font>        }
    }

    //~Pregledi();
    Pregledi (const Pregledi &amp;pregledi);
    Pregledi (Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator = (const Pregledi &amp;pregledi);
    Pregledi &amp;operator = (Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled (std::shared_ptr&lt;Pregled&gt; pregled);
    int DajBrojPregleda() const;
    int DajBrojPregledaNaDatum (const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta (const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum (const Datum &amp;datum);
    void IspisiSvePreglede();
};

Pregledi::Pregledi (const Pregledi &amp;pregledi):preglediPok(pregledi.preglediPok.size())
{
    for (int i = 0; i &lt; preglediPok.size(); i++) {
        preglediPok[i] = std::make_shared&lt;Pregled&gt; (*pregledi.preglediPok[i]);
    }
}

Pregledi::Pregledi (Pregledi &amp;&amp;pregledi):preglediPok(std::move(pregledi.preglediPok)){}
Pregledi &amp;Pregledi::operator = (const Pregledi &amp;pregledi)
{
    if (&amp;pregledi != this) {
        preglediPok.resize(pregledi.preglediPok.size());
        for (int i = 0; i &lt; preglediPok.size(); i++) {
<a name="8"></a><font color="#00FFFF"><a href="match319-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

            preglediPok[i] = std::make_shared&lt;Pregled&gt; (*pregledi.preglediPok[i]);
        }
    }
    return *this;
}

Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi)
</font>{
    if (&amp;pregledi != this) {
        preglediPok=std::move(pregledi.preglediPok);
    }
    return *this;
}

void Pregledi::RegistrirajPregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda)
{
    preglediPok.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
}

void Pregledi::RegistrirajPregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda)
{
    try {
        preglediPok.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda));
    } catch(std::domain_error poruka) {
        throw std::domain_error(poruka.what());
    }
}

void Pregledi::RegistrirajPregled (std::shared_ptr&lt;Pregled&gt; pregled)
{
    preglediPok.push_back(pregled);
}

int Pregledi::DajBrojPregleda() const
{
    return preglediPok.size();
}

int Pregledi::DajBrojPregledaNaDatum (const Datum &amp;datum) const
{
    return std::count_if (preglediPok.begin(), preglediPok.end(), [&amp;datum](std::shared_ptr&lt;Pregled&gt; pregled) {
        std::tuple &lt; int, int, int &gt; datumPregledaP1 = datum.Ocitaj();
<a name="1"></a><font color="#00FF00"><a href="match319-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        std::tuple &lt; int, int, int &gt; datumPregledaP2 = pregled-&gt; DajDatumPregleda().Ocitaj();
        return (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2) &amp;&amp; std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2) &amp;&amp; std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2));
    });
}

Pregled &amp;Pregledi::DajNajranijiPregled()
{
    if (preglediPok.size() == 0) throw std::domain_error ("Nema registriranih pregleda");
</font>    return **std::min_element (preglediPok.begin(), preglediPok.end(), [] (std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) {
        std::tuple &lt; int, int, int &gt; datumPregledaP1 = p1-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP1 = p1-&gt;DajVrijemePregleda().Ocitaj();
        std::tuple &lt; int, int, int &gt; datumPregledaP2 = p2-&gt;DajDatumPregleda().Ocitaj();
<a name="12"></a><font color="#0000FF"><a href="match319-1.html#12" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

        std::pair &lt; int, int &gt; vrijeme_pregledaP2 = p2-&gt;DajVrijemePregleda().Ocitaj();
        if (std::get &lt; 2 &gt; (datumPregledaP1) &gt; std::get &lt; 2 &gt; (datumPregledaP2)) {
            return false;
        } else if (std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2)) {
</font>            if (std::get &lt; 1 &gt; (datumPregledaP1) &gt; std::get &lt; 1 &gt; (datumPregledaP2)) {
                return false;
            }

            else if (std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2)) {
                if (std::get &lt; 0 &gt; (datumPregledaP1) &gt; std::get &lt; 0 &gt; (datumPregledaP2)) {
                    return false;
                }

                else if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2)) {
<a name="5"></a><font color="#FF0000"><a href="match319-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

                    if (vrijeme_pregledaP1.first &gt; vrijeme_pregledaP2.first) {
                        return false;
                    } else if (vrijeme_pregledaP1.first == vrijeme_pregledaP2.first) {
                        if (vrijeme_pregledaP1.second &gt; vrijeme_pregledaP2.second) {
                            return false;
                        }
                    }
                }
            }
        }
        return true;
</font>    });
}

Pregled Pregledi::DajNajranijiPregled() const
{
    if (preglediPok.size() == 0) throw std::domain_error ("Nema registriranih pregleda");
    return **std::min_element (preglediPok.begin(), preglediPok.end(), [] (std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) {
        std::tuple &lt; int, int, int &gt; datumPregledaP1 = p1-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP1 = p1-&gt;DajVrijemePregleda().Ocitaj();
        std::tuple &lt; int, int, int &gt; datumPregledaP2 = p2-&gt;DajDatumPregleda().Ocitaj();
<a name="13"></a><font color="#00FFFF"><a href="match319-1.html#13" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

        std::pair &lt; int, int &gt; vrijeme_pregledaP2 = p2-&gt;DajVrijemePregleda().Ocitaj();
        if (std::get &lt; 2 &gt; (datumPregledaP1) &gt; std::get &lt; 2 &gt; (datumPregledaP2)) {
            return false;
        } else if (std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2)) {
</font>            if (std::get &lt; 1 &gt; (datumPregledaP1) &gt; std::get &lt; 1 &gt; (datumPregledaP2)) {
                return false;
            }

            else if (std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2)) {
                if (std::get &lt; 0 &gt; (datumPregledaP1) &gt; std::get &lt; 0 &gt; (datumPregledaP2)) {
                    return false;
                }

                else if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2)) {
<a name="6"></a><font color="#00FF00"><a href="match319-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

                    if (vrijeme_pregledaP1.first &gt; vrijeme_pregledaP2.first) {
                        return false;
                    } else if (vrijeme_pregledaP1.first == vrijeme_pregledaP2.first) {
                        if (vrijeme_pregledaP1.second &gt; vrijeme_pregledaP2.second) {
                            return false;
                        }
                    }
                }
            }
        }
        return true;
</font>    });
}

void Pregledi::IsprazniKolekciju()
{
    for (int i = 0; i &lt; preglediPok.size(); i++) {
        preglediPok[i]=nullptr;
    }
    preglediPok.resize(0);
}

void Pregledi::ObrisiNajranijiPregled()
{
    if (preglediPok.size() == 0) throw std::range_error ("Prazna kolekcija");
    std::shared_ptr&lt;Pregled&gt; p= *std::min_element (preglediPok.begin(), preglediPok.end(), [] (std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) {
        std::tuple &lt; int, int, int &gt; datumPregledaP1 = p1-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP1 = p1-&gt;DajVrijemePregleda().Ocitaj();
        std::tuple &lt; int, int, int &gt; datumPregledaP2 = p2-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP2 = p2-&gt;DajVrijemePregleda().Ocitaj();
        if (std::get &lt; 2 &gt; (datumPregledaP1) &gt; std::get &lt; 2 &gt; (datumPregledaP2)) {
            return false;
        } else if (std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2)) {
            if (std::get &lt; 1 &gt; (datumPregledaP1) &gt; std::get &lt; 1 &gt; (datumPregledaP2)) {
                return false;
            }

            else if (std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2)) {
                if (std::get &lt; 0 &gt; (datumPregledaP1) &gt; std::get &lt; 0 &gt; (datumPregledaP2)) {
                    return false;
                }

                else if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2)) {
                    if (vrijeme_pregledaP1.first &gt; vrijeme_pregledaP2.first) {
                        return false;
                    } else if (vrijeme_pregledaP1.first == vrijeme_pregledaP2.first) {
                        if (vrijeme_pregledaP1.second &gt; vrijeme_pregledaP2.second) {
                            return false;
                        }
                    }
                }
            }
        }
        return true;
    });
    for(int i=0;i&lt;preglediPok.size();i++)
    {
        if(preglediPok[i]==p)
        {
            preglediPok[i]=nullptr;
            for(int j=i;j&lt;preglediPok.size()-1;j++)
                preglediPok[j]=preglediPok[j+1];
            break;
        }
    }
    preglediPok.resize(preglediPok.size()-1);
}

void Pregledi::ObrisiPregledePacijenta (const std::string &amp;ime_pacijenta)
{
    for (int i = 0; i &lt; preglediPok.size(); i++) {
        if (preglediPok[i] -&gt; DajImePacijenta() == ime_pacijenta) {
            preglediPok[i]=nullptr;
            for (int j = i; j &lt; preglediPok.size() - 1; j++)
                preglediPok[j] = preglediPok [j+1];
            preglediPok.resize(preglediPok.size()-1);
            i--;
        }
    }
}

void Pregledi::IspisiPregledeNaDatum (const Datum &amp;datum)
{
    std::sort (preglediPok.begin(), preglediPok.end(), [] (std::shared_ptr&lt;Pregled&gt; p1,std::shared_ptr&lt;Pregled&gt; p2) {
        std::tuple &lt; int, int, int &gt; datumPregledaP1 = p1-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP1 = p1-&gt;DajVrijemePregleda().Ocitaj();
        std::tuple &lt; int, int, int &gt; datumPregledaP2 = p2-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP2 = p2-&gt;DajVrijemePregleda().Ocitaj();
        if (std::get &lt; 2 &gt; (datumPregledaP1) &gt; std::get &lt; 2 &gt; (datumPregledaP2)) {
            return false;
        } else if (std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2)) {
            if (std::get &lt; 1 &gt; (datumPregledaP1) &gt; std::get &lt; 1 &gt; (datumPregledaP2)) {
                return false;
            }

            else if (std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2)) {
                if (std::get &lt; 0 &gt; (datumPregledaP1) &gt; std::get &lt; 0 &gt; (datumPregledaP2)) {
                    return false;
                }

                else if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2)) {
                    if (vrijeme_pregledaP1.first &gt; vrijeme_pregledaP2.first) {
                        return false;
                    } else if (vrijeme_pregledaP1.first == vrijeme_pregledaP2.first) {
                        if (vrijeme_pregledaP1.second &gt; vrijeme_pregledaP2.second) {
                            return false;
                        }
                    }
                }
            }
        }
        return true;
    });
    std::tuple &lt; int, int, int &gt; datumPregledaP1 = datum.Ocitaj();
    std::tuple &lt; int, int, int &gt; datumPregledaP2;
    for (int i = 0; i &lt; preglediPok.size(); i++) {
<a name="14"></a><font color="#FF00FF"><a href="match319-1.html#14" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

        datumPregledaP2 = preglediPok[i] -&gt;DajDatumPregleda().Ocitaj();
        if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2) &amp;&amp; std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2) &amp;&amp; std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2))
</font>            preglediPok[i] -&gt; Ispisi();
    }
}

void Pregledi::IspisiSvePreglede() 
{
    std::sort (preglediPok.begin(), preglediPok.end(), [] (std::shared_ptr&lt;Pregled&gt; p1,std::shared_ptr&lt;Pregled&gt; p2) {
        std::tuple &lt; int, int, int &gt; datumPregledaP1 = p1-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP1 = p1-&gt;DajVrijemePregleda().Ocitaj();
        std::tuple &lt; int, int, int &gt; datumPregledaP2 = p2-&gt;DajDatumPregleda().Ocitaj();
        std::pair &lt; int, int &gt; vrijeme_pregledaP2 = p2-&gt;DajVrijemePregleda().Ocitaj();
        if (std::get &lt; 2 &gt; (datumPregledaP1) &gt; std::get &lt; 2 &gt; (datumPregledaP2)) {
            return false;
        } else if (std::get &lt; 2 &gt; (datumPregledaP1) == std::get &lt; 2 &gt; (datumPregledaP2)) {
            if (std::get &lt; 1 &gt; (datumPregledaP1) &gt; std::get &lt; 1 &gt; (datumPregledaP2)) {
                return false;
            }

            else if (std::get &lt; 1 &gt; (datumPregledaP1) == std::get &lt; 1 &gt; (datumPregledaP2)) {
                if (std::get &lt; 0 &gt; (datumPregledaP1) &gt; std::get &lt; 0 &gt; (datumPregledaP2)) {
                    return false;
                }

                else if (std::get &lt; 0 &gt; (datumPregledaP1) == std::get &lt; 0 &gt; (datumPregledaP2)) {
                    if (vrijeme_pregledaP1.first &gt; vrijeme_pregledaP2.first) {
                        return false;
                    } else if (vrijeme_pregledaP1.first == vrijeme_pregledaP2.first) {
                        if (vrijeme_pregledaP1.second &gt; vrijeme_pregledaP2.second) {
                            return false;
                        }
                    }
                }
            }
        }
        return true;
    });
    for (int i = 0; i &lt; preglediPok.size(); i++) {
        preglediPok[i] -&gt; Ispisi();
    }
}


int main ()
{
    
    Pregledi preglediP;
    for(int i=0;;i++)
    {
        std::string imePacijenta;
<a name="0"></a><font color="#FF0000"><a href="match319-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        std::cout &lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::getline (std::cin,imePacijenta);
        if(imePacijenta=="kraj")
        {
            break;
        }
        std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: ";
        int dan,mjesec,godina;
        std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
        std::cout &lt;&lt; "Unesite sate i minute pregleda: ";
        int sati,minute;
        std::cin&gt;&gt;sati&gt;&gt;minute;
</font>        try
        {
            std::shared_ptr&lt;Pregled&gt; p=std::make_shared&lt;Pregled&gt;(imePacijenta,dan,mjesec,godina,sati,minute);
            preglediP.RegistrirajPregled(p);
<a name="2"></a><font color="#0000FF"><a href="match319-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

            p=nullptr;
        }
        catch(std::domain_error poruka)
        {
            std::cout &lt;&lt; poruka.what()&lt;&lt; std::endl;
        }
        catch(std::range_error poruka)
        {
            std::cout &lt;&lt; poruka.what()&lt;&lt; std::endl;
        }
        std::cin.clear();
</font>        std::cin.ignore(10000,'\n');
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi\n";
    preglediP.IspisiSvePreglede();
    for(;;)
    {
        std::cout&lt;&lt;"\nOdaberite jednu od sljedecih opcija\n1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta\n4 - Obrisi najraniji pregled\n5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa\n";
        int opcija;
<a name="9"></a><font color="#FF00FF"><a href="match319-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

        std::cin&gt;&gt;opcija;
        if(opcija==1)
        {
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int dan,mjesec,godina;
            std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
</font>            Datum datum(dan,mjesec,godina);
            int brojPregledaNaDatum=preglediP.DajBrojPregledaNaDatum(datum);
            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" je: "&lt;&lt;brojPregledaNaDatum;
        }
        else if(opcija==2)
        {
            try
            {
                Pregled p=preglediP.DajNajranijiPregled();
                std::cout&lt;&lt;"Najraniji pregled je:\n";
                p.Ispisi();
            }
            catch(std::domain_error poruka)
            {
                std::cout&lt;&lt;poruka.what();
            }
            
        }
        else if(opcija==3)
        {
            std::cin.clear();
            std::cin.ignore(10000,'\n');
            std::string imePacijenta;
            std::cout&lt;&lt;"Unesite ime pacijenta: ";
<a name="3"></a><font color="#00FFFF"><a href="match319-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

            std::getline (std::cin,imePacijenta);
            int brP=preglediP.DajBrojPregleda();
            preglediP.ObrisiPregledePacijenta(imePacijenta);
            int brP1=preglediP.DajBrojPregleda();
            std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt; brP-brP1 &lt;&lt;" pregleda";
</font>        }
        else if(opcija==4)
        {
            try
            {
                preglediP.ObrisiNajranijiPregled();
                std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan";
            }
            catch(std::range_error poruka)
            {
                std::cout&lt;&lt;poruka.what();
            }
        }
<a name="15"></a><font color="#FF0000"><a href="match319-1.html#15" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

        else if(opcija==5)
        {
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            int dan,mjesec,godina;
            std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
</font>            Datum datum(dan,mjesec,godina);
            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" su:\n";
            preglediP.IspisiPregledeNaDatum(datum);
        }
        else if(opcija==6)
        {
            preglediP.IspisiSvePreglede();
        }
        else if(opcija==7)
        {
            return 0;
        }
        std::cout&lt;&lt;std::endl;
    }
    return 0;
}
</pre>
</body>
</html>
