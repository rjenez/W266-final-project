<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student9557.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student5129.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;

#include &lt;vector&gt;
#include &lt;memory&gt;

#include &lt;tuple&gt;

#include &lt;stdexcept&gt;

class Datum {
    int dan, mjesec, godina;
public:
    static constexpr int brojDana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    static bool jeLiPrestupna(int godina) {
        return godina % 400 == 0 || (godina % 4 == 0 &amp;&amp; godina % 100 != 0);
    }
    
<a name="6"></a><font color="#00FF00"><a href="match463-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Datum(int dan, int mjesec, int godina);
    void Postavi(int dan, int mjesec, int godina);
    std::tuple&lt;int, int, int&gt; Ocitaj() const;
    void Ispisi() const;
</font>};

class Vrijeme {
    int sati, minute;
public:
<a name="9"></a><font color="#FF00FF"><a href="match463-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Vrijeme(int sati, int minute);
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj() const;
    void Ispisi() const;
</font>};

class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
<a name="0"></a><font color="#FF0000"><a href="match463-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    Vrijeme vrijeme_pregleda;
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda,
        int sati_pregleda, int minute_pregleda);
        
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta);
    void PromijeniDatum(const Datum &amp;novi_datum);
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme);
    
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    
    std::string DajImePacijenta() const;
    Datum DajDatumPregleda() const;
    Vrijeme DajVrijemePregleda() const;
    
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
    
    void Ispisi() const;
};

class Pregledi {
</font>    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pregledi;
    
    void pobrisiPreglede() {
        for (int i = 0; i &lt; pregledi.size(); i++)
            pregledi[i] = nullptr;
        
        pregledi.resize(0);
    }
public:
    explicit Pregledi();
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    
    ~Pregledi() {
        pobrisiPreglede();
    }
    
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp;operator=(const Pregledi &amp;pregledi);
    Pregledi &amp;operator=(Pregledi &amp;&amp;pregledi);
    
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
<a name="2"></a><font color="#0000FF"><a href="match463-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int datum_pregleda, int mjesec_pregleda,
        int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled);
    
    int DajBrojPregleda() const;
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
</font>    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

int main ()
{
    try {
        Pregledi pregledi;
        
        for (;;)
        {
            std::string ime;
            std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
            std::cin &gt;&gt; ime;
            if (ime == "kraj")
                break;
                
            int dan, mjesec, godina;
            std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: ";
            std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
            
            int sati, minute;
<a name="8"></a><font color="#00FFFF"><a href="match463-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            std::cout &lt;&lt; "Unesite sate i minute pregleda: ";
            std::cin &gt;&gt; sati &gt;&gt; minute;
            
            pregledi.RegistrirajPregled(ime, dan, mjesec, godina, sati, minute);
        }
        
        std::cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi" &lt;&lt; std::endl;
</font>        pregledi.IspisiSvePreglede();
        
        for (;;)
        {
            int opcija;
            std::cout &lt;&lt; std::endl;
            std::cout &lt;&lt; "Odaberite jednu od sljedecih opcija" &lt;&lt; std::endl;
            std::cout &lt;&lt; "1 - Broj pregleda na datum" &lt;&lt; std::endl;
            std::cout &lt;&lt; "2 - Najraniji pregled" &lt;&lt; std::endl;
            std::cout &lt;&lt; "3 - Obrisi pregled pacijenta" &lt;&lt; std::endl;
            std::cout &lt;&lt; "4 - Obrisi najraniji pregled" &lt;&lt; std::endl;
            std::cout &lt;&lt; "5 - Ispisi sve pregleda na datum" &lt;&lt; std::endl;
            std::cout &lt;&lt; "6 - Ispisi sve preglede" &lt;&lt; std::endl;
            std::cout &lt;&lt; "7 - Kraj programa" &lt;&lt; std::endl;
            std::cin &gt;&gt; opcija;
            
            if (opcija == 7)
                break;
                
            if (opcija == 1) {
                int dan, mjesec, godina;
                std::cout &lt;&lt; "Unesite dan mjesec i godinu : ";
                std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
                
                std::cout &lt;&lt; "Broj pregleda na datum " &lt;&lt; dan &lt;&lt; " " &lt;&lt; mjesec &lt;&lt; " " &lt;&lt; godina &lt;&lt; " je: "
<a name="5"></a><font color="#FF0000"><a href="match463-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                    &lt;&lt; pregledi.DajBrojPregledaNaDatum(Datum(dan, mjesec, godina)) &lt;&lt; std::endl;
            }
            else if (opcija == 2) {
                std::cout &lt;&lt; "Najraniji pregled je:" &lt;&lt; std::endl;
                pregledi.DajNajranijiPregled().Ispisi();
            }
            else if (opcija == 3) {
                std::string ime;
</font>                std::cout &lt;&lt; "Unesite ime pacijenta: ";
                std::cin &gt;&gt; ime;
                
<a name="7"></a><font color="#0000FF"><a href="match463-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

                int trenutniBroj = pregledi.DajBrojPregleda();
                pregledi.ObrisiPregledePacijenta(ime);
                std::cout &lt;&lt; "Uspjesno obrisano " &lt;&lt; trenutniBroj - pregledi.DajBrojPregleda() &lt;&lt; " pregleda" &lt;&lt; std::endl;
            }
            else if (opcija == 4) {
</font>                pregledi.ObrisiNajranijiPregled();
                std::cout &lt;&lt; "Najraniji pregled uspjesno obrisan" &lt;&lt; std::endl;
            }
            else if (opcija == 5) {
                int dan, mjesec, godina;
                std::cout &lt;&lt; "Unesite dan mjesec i godinu : ";
                std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
                
                std::cout &lt;&lt; "Pregledi na datum " &lt;&lt; dan &lt;&lt; " " &lt;&lt; mjesec &lt;&lt; " " &lt;&lt; godina &lt;&lt; " su:" &lt;&lt; std::endl;
                pregledi.IspisiPregledeNaDatum(Datum(dan, mjesec, godina));
            }
            else if (opcija == 6) {
                pregledi.IspisiSvePreglede();
            }
        }
    }
    catch(const std::exception &amp;er) {
        std::cout &lt;&lt; er.what() &lt;&lt; std::endl;
    }
    
	return 0;
}

/**
 * 
 * DATUM
 * 
 **/

constexpr int Datum::brojDana[];

Datum::Datum(int dan, int mjesec, int godina)
{
    Postavi(dan, mjesec, godina);
}

void Datum::Postavi(int dan, int mjesec, int godina)
{
    if (mjesec &lt; 1 || mjesec &gt; 12 || dan &lt; 1 ||
        dan &gt; Datum::brojDana[mjesec - 1] + (mjesec == 2 &amp;&amp; jeLiPrestupna(godina)))
            throw std::domain_error("Neispravan datum");
        
    this-&gt;dan = dan;
    this-&gt;mjesec = mjesec;
<a name="1"></a><font color="#00FF00"><a href="match463-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    this-&gt;godina = godina;
}

std::tuple&lt;int, int, int&gt; Datum::Ocitaj() const
{
    return std::make_tuple(dan, mjesec, godina);
}

void Datum::Ispisi() const
{
    std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina/* &lt;&lt; std::endl*/;
}

/**
 * 
 * END DATUM
 * 
 **/
 
/**
 * 
 * VRIJEME
 * 
 **/

Vrijeme::Vrijeme(int sati, int minute) 
</font>{
    Postavi(sati, minute);
}

void Vrijeme::Postavi(int sati, int minute)
{
    if (minute &lt; 0 || minute &gt; 59 || sati &lt; 0 || sati &gt; 23)
        throw std::domain_error("Neispravno vrijeme");
        
    this-&gt;sati = sati;
    this-&gt;minute = minute;
}

std::pair&lt;int, int&gt; Vrijeme::Ocitaj() const
{
    return { sati, minute };
}

void Vrijeme::Ispisi() const
{
    std::cout.fill('0');
    std::cout &lt;&lt; std::setw(2) &lt;&lt; sati &lt;&lt; ":"
        &lt;&lt; std::setw(2) &lt;&lt; minute/* &lt;&lt; std::endl*/;
    std::cout.fill(' ');
}

/**
 * 
 * END VRIJEME
 * 
 **/
 
/**
 * 
 * PREGLED
 * 
 **/

Pregled::Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) :
    datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda)
{
<a name="10"></a><font color="#FF0000"><a href="match463-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    this-&gt;ime_pacijenta = ime_pacijenta;
}

Pregled::Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
    int godina_pregleda, int sati_pregleda, int minute_pregleda) :
</font>    datum_pregleda(Datum(dan_pregleda, mjesec_pregleda, godina_pregleda)),
    vrijeme_pregleda(Vrijeme(sati_pregleda, minute_pregleda))
{
    this-&gt;ime_pacijenta = ime_pacijenta;
}
    
void Pregled::PromijeniPacijenta(const std::string &amp;ime_pacijenta)
{
    this-&gt;ime_pacijenta = ime_pacijenta;
}

void Pregled::PromijeniDatum(const Datum &amp;novi_datum)
{
    this-&gt;datum_pregleda = novi_datum;
}

void Pregled::PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme)
{
    this-&gt;vrijeme_pregleda = novo_vrijeme;
}

void Pregled::PomjeriDanUnaprijed()
{
    int dan_pregleda, mjesec_pregleda, godina_pregleda;
    std::tie(dan_pregleda, mjesec_pregleda, godina_pregleda) = datum_pregleda.Ocitaj();
    
    dan_pregleda++;
    if (dan_pregleda &gt; Datum::brojDana[mjesec_pregleda - 1] + (mjesec_pregleda == 2 &amp;&amp; Datum::jeLiPrestupna(godina_pregleda)))
    {
        dan_pregleda = 1;
        mjesec_pregleda++;
        
        if (mjesec_pregleda &gt; 12)
        {
            mjesec_pregleda = 1;
            godina_pregleda++;
        }
    }
    
    datum_pregleda = Datum(dan_pregleda, mjesec_pregleda, godina_pregleda);
}

void Pregled::PomjeriDanUnazad()
{
    int dan_pregleda, mjesec_pregleda, godina_pregleda;
    std::tie(dan_pregleda, mjesec_pregleda, godina_pregleda) = datum_pregleda.Ocitaj();
    
    dan_pregleda--;
    if (dan_pregleda &lt; 1)
    {
        mjesec_pregleda--;
        if (mjesec_pregleda &lt; 1)
        {
            mjesec_pregleda = 12;
            godina_pregleda--;
        }
        
        dan_pregleda = Datum::brojDana[mjesec_pregleda - 1] + (mjesec_pregleda == 2 &amp;&amp; Datum::jeLiPrestupna(godina_pregleda));
    }
    
<a name="3"></a><font color="#00FFFF"><a href="match463-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    datum_pregleda = Datum(dan_pregleda, mjesec_pregleda, godina_pregleda);
}

std::string Pregled::DajImePacijenta() const
{
    return ime_pacijenta;
}

Datum Pregled::DajDatumPregleda() const
{
    return datum_pregleda;
}

Vrijeme Pregled::DajVrijemePregleda() const
{
    return vrijeme_pregleda;
}

bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2)
</font>{
    int v1_min, v1_sat, v2_min, v2_sat;
    int d1_dan, d1_mon, d1_god, d2_dan, d2_mon, d2_god;
    
    std::tie(v1_sat, v1_min) = p1.vrijeme_pregleda.Ocitaj();
    std::tie(v2_sat, v2_min) = p2.vrijeme_pregleda.Ocitaj();
    
    std::tie(d1_dan, d1_mon, d1_god) = p1.datum_pregleda.Ocitaj();
    std::tie(d2_dan, d2_mon, d2_god) = p2.datum_pregleda.Ocitaj();
    
    if (d1_god &lt; d2_god)
        return true;
    else if (d1_god &gt; d2_god)
        return false;
        
    if (d1_mon &lt; d2_mon)
        return true;
    else if (d1_mon &gt; d2_mon)
        return false;
        
    if (d1_dan &lt; d2_dan)
        return true;
    else if (d1_dan &gt; d2_dan)
        return false;
        
    
    if (v1_sat &lt; v2_sat)
        return true;
    else if (v1_sat &gt; v2_sat)
        return false;
    
    if (v1_min &lt; v2_min)
        return true;
    else if (v1_min &gt; v2_min)
        return false;
        
    return false;
}

void Pregled::Ispisi() const
{
    std::cout &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; ime_pacijenta;
    std::cout &lt;&lt; std::right;
    datum_pregleda.Ispisi();
    std::cout &lt;&lt; " ";
    vrijeme_pregleda.Ispisi();
    std::cout &lt;&lt; std::endl;
}

/**
 * 
 * END PREGLED
 * 
 **/
 
/**
 * 
 * PREGLEDI
 * 
 **/

Pregledi::Pregledi(){}

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda)
{
    try {
        for (auto pregled : spisak_pregleda)
            pregledi.push_back(std::make_shared&lt;Pregled&gt;(pregled));
    }
    catch (...) {
        pobrisiPreglede();
        throw;
    }
}

Pregledi::Pregledi(const Pregledi &amp;pregledi)
{   try {
        for (int i = 0; i &lt; pregledi.pregledi.size(); i++)
            this-&gt;pregledi.push_back(std::make_shared&lt;Pregled&gt;(*pregledi.pregledi[i]));
    }
    catch (...) {
        pobrisiPreglede();
        throw;
    }
}

Pregledi::Pregledi(Pregledi &amp;&amp;pregledi)
{
    this-&gt;pregledi = pregledi.pregledi;
    
    pregledi.pregledi.resize(0);
}

Pregledi &amp;Pregledi::operator=(const Pregledi &amp;pregledi)
{
    for (int i = 0; i &lt; this-&gt;pregledi.size(); i++)
            *(this-&gt;pregledi[i]) = *pregledi.pregledi[i];
    
    try {    
        for (int i = this-&gt;pregledi.size(); i &lt; pregledi.pregledi.size(); i++)
            this-&gt;pregledi.push_back(std::make_shared&lt;Pregled&gt;(*pregledi.pregledi[i]));
    }
    catch(...) {
        pobrisiPreglede();
        throw;
    }
    
    return *this;
}

Pregledi &amp;Pregledi::operator=(Pregledi &amp;&amp;pregledi)
{
<a name="4"></a><font color="#FF00FF"><a href="match463-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    this-&gt;pregledi = pregledi.pregledi;
    
    pregledi.pregledi.resize(0);
    
    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda)
</font>{
    auto tmp = std::make_shared&lt;Pregled&gt;(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
    
    RegistrirajPregled(tmp);
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
    int godina_pregleda, int sati_pregleda, int minute_pregleda)
{
    RegistrirajPregled(ime_pacijenta, Datum(dan_pregleda, mjesec_pregleda, godina_pregleda), Vrijeme(sati_pregleda, minute_pregleda));
}

void Pregledi::RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled)
{
    pregledi.push_back(pregled);
}

int Pregledi::DajBrojPregleda() const
{
    return pregledi.size();
}

int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const
{
    return std::count_if(pregledi.begin(), pregledi.end(), [datum](const std::shared_ptr&lt;Pregled&gt; p) {
        return p-&gt;DajDatumPregleda().Ocitaj() == datum.Ocitaj();
    });
}

Pregled &amp;Pregledi::DajNajranijiPregled()
{
    if (pregledi.size() == 0)
        throw std::domain_error("Nema registriranih pregleda");
    
    return **std::min_element(pregledi.begin(), pregledi.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return Pregled::DolaziPrije(*p1, *p2);
    });
}

Pregled Pregledi::DajNajranijiPregled() const
{
    if (pregledi.size() == 0)
        throw std::domain_error("Nema registriranih pregleda");
        
    return **std::min_element(pregledi.begin(), pregledi.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return Pregled::DolaziPrije(*p1, *p2);
    });
}

void Pregledi::IsprazniKolekciju()
{
    pobrisiPreglede();
}

void Pregledi::ObrisiNajranijiPregled()
{
    if (pregledi.size() == 0)
        throw std::range_error("Prazna kolekcija");
    
    auto poz = std::min_element(pregledi.begin(), pregledi.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return Pregled::DolaziPrije(*p1, *p2);
    });
    
    pregledi.erase(poz);
}

void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta)
{
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt;::iterator found;
    while ((found = std::find_if(pregledi.begin(), pregledi.end(), [ime_pacijenta](const std::shared_ptr&lt;Pregled&gt; p) {
        return p-&gt;DajImePacijenta() == ime_pacijenta;
    })) != pregledi.end()) {
        pregledi.erase(found);
    }
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const
{
    Pregledi tmp(*this);
<a name="11"></a><font color="#00FF00"><a href="match463-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    std::sort(tmp.pregledi.begin(), tmp.pregledi.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return Pregled::DolaziPrije(*p1, *p2);
    });
    
    for (int i = 0; i &lt; pregledi.size(); i++)
</font>        if (tmp.pregledi[i]-&gt;DajDatumPregleda().Ocitaj() == datum.Ocitaj())
            tmp.pregledi[i]-&gt;Ispisi();
            
}
void Pregledi::IspisiSvePreglede() const
{
    Pregledi tmp(*this);
    std::sort(tmp.pregledi.begin(), tmp.pregledi.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return Pregled::DolaziPrije(*p1, *p2);
    });
    
    for (int i = 0; i &lt; pregledi.size(); i++)
        tmp.pregledi[i]-&gt;Ispisi();
}</pre>
</body>
</html>
