<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student7051.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student3217.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;iomanip&gt;
#include &lt;initializer_list&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;memory&gt;

class Datum {
    int dan, mjesec, godina;
public:
<a name="5"></a><font color="#FF0000"><a href="match663-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Datum(int dan, int mjesec, int godina) {
        Postavi(dan, mjesec, godina);
    }
    
    void Postavi(int dan, int mjesec, int godina);
    
    std::tuple&lt;int, int, int&gt; Ocitaj() const;
    
    void Ispisi() const {
</font>        std::cout &lt;&lt; std::right &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }
};

class Vrijeme {
    int sati, minute;
public:

    Vrijeme(int sati, int minute) {
        Postavi(sati, minute);
    }
    
    void Postavi(int sati, int minute) {
        if (sati &lt; 0 || sati &gt; 23 || minute &lt; 0 || minute &gt; 59)
            throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati = sati;
        Vrijeme::minute = minute;
    }
    
    std::pair&lt;int, int&gt; Ocitaj () const {
        std::pair&lt;int, int&gt; tmp;
        tmp = std::make_pair(sati, minute);
        
        return tmp;
    }
    
    void Ispisi() const {
         std::cout &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; sati &lt;&lt; ":" &lt;&lt;  std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; minute;
    }
};

class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
public:

    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : ime_pacijenta(ime_pacijenta),
        datum_pregleda(std::get&lt;0&gt;(datum_pregleda.Ocitaj()), std::get&lt;1&gt;(datum_pregleda.Ocitaj()), std::get&lt;2&gt;(datum_pregleda.Ocitaj())), 
        vrijeme_pregleda(vrijeme_pregleda.Ocitaj().first, vrijeme_pregleda.Ocitaj().second) {}
    
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) : 
        ime_pacijenta(ime_pacijenta), datum_pregleda(dan_pregleda, mjesec_pregleda, godina_pregleda) , vrijeme_pregleda(sati_pregleda, minute_pregleda) {}
        
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta = ime_pacijenta;
    }
    
    void PromijeniDatum(const Datum &amp;novi_datum) {
        Pregled::datum_pregleda = novi_datum;
    }
    
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        Pregled::vrijeme_pregleda = novo_vrijeme;
    }
    
    void PomjeriDanUnaprijed();
      
    void PomjeriDanUnazad();
    
    std::string DajImePacijenta() const { return ime_pacijenta; }
    
<a name="3"></a><font color="#00FFFF"><a href="match663-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    Datum DajDatumPregleda() const { return datum_pregleda; }
    
    Vrijeme DajVrijemePregleda() const { return vrijeme_pregleda; }
    
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2); 
    
    void Ispisi() const;
    
};

class Pregledi {
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; niz_pregleda;
    
public:
    explicit Pregledi() {}
        
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
</font>    
    ~Pregledi() {
        for (int i = 0 ; i &lt; niz_pregleda.size() ; i++)
            niz_pregleda[i] = nullptr;
    }
    
    Pregledi(const Pregledi &amp;pregledi);
    
    Pregledi(Pregledi &amp;&amp;pregledi);
    
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
    
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);
    
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    
<a name="2"></a><font color="#0000FF"><a href="match663-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    
    void RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled); 
    
    int DajBrojPregleda() const { return niz_pregleda.size(); }
    
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    
    Pregled &amp;DajNajranijiPregled(); 
    
    Pregled DajNajranijiPregled() const;
    
    void IsprazniKolekciju();
    
    void ObrisiNajranijiPregled();
    
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
</font>    
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    
    void IspisiSvePreglede() const;
    
};

int main ()
{
   /* std::cout &lt;&lt; "Unesite maksimalan broj pregleda: ";
    int max_broj;
    std::cin &gt;&gt; max_broj;
    Pregledi pregledi(max_broj);
    for (int i = 0; i &lt; max_broj; i++) {
        std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::string ime;
        std::cin &gt;&gt; ime;
        std::cin.ignore(10000, '\n');
        if (ime == "kraj") break;
        std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: ";
        int dan, mjesec, godina;
        std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
        std::cout &lt;&lt; "Unesite sate i minute pregleda: ";
        int sati, minute;
        std::cin &gt;&gt; sati &gt;&gt; minute;
        pregledi.RegistrirajPregled(ime, dan, mjesec, godina, sati, minute);
    }
    std::cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi" &lt;&lt; std::endl;
    pregledi.IspisiSvePreglede();
    std::cout &lt;&lt; std::endl &lt;&lt; "Odaberite jednu od sljedecih opcija" &lt;&lt; std::endl &lt;&lt; "1 - Broj pregleda na datum" &lt;&lt; std::endl &lt;&lt; "2 - Najraniji pregled" &lt;&lt; std::endl &lt;&lt;
                     "3 - Obrisi pregled pacijenta" &lt;&lt; std::endl &lt;&lt; "4 - Obrisi najraniji pregled" &lt;&lt; std::endl &lt;&lt; "5 - Ispisi sve pregleda na datum" &lt;&lt; std::endl &lt;&lt;
                     "6 - Ispisi sve preglede" &lt;&lt; std::endl &lt;&lt; "7 - Kraj programa" &lt;&lt; std::endl;
    int unos;
    std::cin &gt;&gt; unos;
    while (unos != 7) {
        if (unos == 1) {
            std::cout &lt;&lt; "Unesite dan mjesec i godinu : ";
            int dan, mjesec, godina;
            std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
            try {
                Datum datum(dan, mjesec, godina);
                int broj_pregleda_na_datum = pregledi.DajBrojPregledaNaDatum(datum);
                std::cout &lt;&lt; "Broj pregleda na datum " &lt;&lt; dan &lt;&lt; " " &lt;&lt; mjesec &lt;&lt; " " &lt;&lt; godina &lt;&lt; " je: " &lt;&lt; broj_pregleda_na_datum &lt;&lt;std::endl;
            } catch(std::domain_error izuzetak) {
                std::cout &lt;&lt; izuzetak.what();
            }
        }
        else if (unos == 2) {
            try {
                std::cout &lt;&lt; "Najraniji pregled je: " &lt;&lt; std::endl;
                Pregled najraniji = pregledi.DajNajranijiPregled();
                najraniji.Ispisi();
            } catch(std::domain_error izuzetak) {
                std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
            }
            
        }
        else if (unos == 3) {
            std::cout &lt;&lt; "Unesite ime pacijenta: ";
            std::string ime;
            std::cin &gt;&gt; ime;
            int trenutni_br_pr = pregledi.DajBrojPregleda();
            pregledi.ObrisiPregledePacijenta(ime);
            int br_pr_nakon_brisanja = pregledi.DajBrojPregleda();
            std::cout &lt;&lt; "Uspjesno obrisano " &lt;&lt; trenutni_br_pr - br_pr_nakon_brisanja &lt;&lt; " pregleda";
        }
        else if (unos == 4) {
            pregledi.ObrisiNajranijiPregled();
            std::cout &lt;&lt; "Najraniji pregled uspjesno obrisan" &lt;&lt; std::endl;
        }
        else if (unos == 5) {
            std::cout &lt;&lt; "Unesite dan mjesec i godinu : ";
            int dan, mjesec, godina;
            std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
            try {
                Datum datum(dan, mjesec, godina);
                std::cout &lt;&lt; "Pregledi na datum " &lt;&lt; dan &lt;&lt; " " &lt;&lt; mjesec &lt;&lt; " " &lt;&lt; godina &lt;&lt; " su:" &lt;&lt; std::endl;
                pregledi.IspisiPregledeNaDatum(datum);
            } catch(std::domain_error izuzetak) {
                std::cout &lt;&lt; izuzetak.what();
            }
        }
        else if (unos == 6) {
            pregledi.IspisiSvePreglede();
        }
        std::cin.ignore(10000, '\n');
        
        std::cout &lt;&lt; std::endl &lt;&lt; "Odaberite jednu od sljedecih opcija" &lt;&lt; std::endl &lt;&lt; "1 - Broj pregleda na datum" &lt;&lt; std::endl &lt;&lt; "2 - Najraniji pregled" &lt;&lt; std::endl &lt;&lt;
                     "3 - Obrisi pregled pacijenta" &lt;&lt; std::endl &lt;&lt; "4 - Obrisi najraniji pregled" &lt;&lt; std::endl &lt;&lt; "5 - Ispisi sve pregleda na datum" &lt;&lt; std::endl &lt;&lt;
                     "6 - Ispisi sve preglede" &lt;&lt; std::endl &lt;&lt; "7 - Kraj programa" &lt;&lt; std::endl;
        std::cin &gt;&gt; unos;
    }*/
    
	return 0;
}

void Datum::Postavi(int dan, int mjesec, int godina) {
        int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if ((godina % 400 == 0 || godina % 100 != 0) &amp;&amp; godina % 4 == 0)
            broj_dana[1]++;
        if (godina &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &lt; 1 || dan &gt; broj_dana[mjesec - 1])
<a name="4"></a><font color="#FF00FF"><a href="match663-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            throw std::domain_error("Neispravan datum");
        Datum::dan = dan;
        Datum::mjesec = mjesec;
        Datum::godina = godina;
    }
    
    std::tuple&lt;int, int, int&gt; Datum::Ocitaj() const {
        std::tuple&lt;int, int, int&gt; tmp;
</font>        tmp = std::make_tuple(dan, mjesec, godina);
        
        return tmp;
    }
    
void Pregled::PomjeriDanUnaprijed() {
    int broj_dana[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    Datum datum = this-&gt;DajDatumPregleda();
    std::tuple&lt;int, int, int&gt; ocitani_datum = datum.Ocitaj();
    ++std::get&lt;0&gt;(ocitani_datum);
<a name="6"></a><font color="#00FF00"><a href="match663-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    if (std::get&lt;0&gt;(ocitani_datum) &gt; broj_dana[std::get&lt;1&gt;(ocitani_datum) - 1]) { //ako je broj dana veci od broja dana u mjesecu
        std::get&lt;0&gt;(ocitani_datum) = 1; //dan postavi na jedan
</font>        ++std::get&lt;1&gt;(ocitani_datum); //uvecaj mjesec
        if (std::get&lt;1&gt;(ocitani_datum) &gt; 12) { //ako je broj mjeseci veci od 12
            std::get&lt;1&gt;(ocitani_datum) = 1; //mjesec postavi na 1
            ++std::get&lt;2&gt;(ocitani_datum); //uvecaj godinu
        }
    }
        
    (*this).datum_pregleda.Postavi(std::get&lt;0&gt;(ocitani_datum), std::get&lt;1&gt;(ocitani_datum), std::get&lt;2&gt;(ocitani_datum));
}
    
void Pregled::PomjeriDanUnazad() {
    Datum datum = this-&gt;DajDatumPregleda();
    std::tuple&lt;int, int, int&gt; ocitani_datum = datum.Ocitaj();
    --std::get&lt;0&gt;(ocitani_datum);
    //ako je dan manji od nula funkcija Postavi ce baciti izuzetak
    (*this).datum_pregleda.Postavi(std::get&lt;0&gt;(ocitani_datum), std::get&lt;1&gt;(ocitani_datum), std::get&lt;2&gt;(ocitani_datum)); 
}
    
bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
    int broj_dana1[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
<a name="7"></a><font color="#0000FF"><a href="match663-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    int broj_dana2[]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    std::tuple&lt;int, int, int&gt; ocitano_p1 = p1.datum_pregleda.Ocitaj(); 
    std::tuple&lt;int, int, int&gt; ocitano_p2 = p2.datum_pregleda.Ocitaj();
    int godina = std::get&lt;2&gt;(ocitano_p1);
    if ((godina % 400 == 0 || godina % 100 != 0) &amp;&amp; godina % 4 == 0)
        broj_dana1[1]++;
    godina = std::get&lt;2&gt;(ocitano_p2);
    if ((godina % 400 == 0 || godina % 100 != 0) &amp;&amp; godina % 4 == 0)
        broj_dana2[1]++;
    
    if (std::get&lt;2&gt;(ocitano_p1) &lt; std::get&lt;2&gt;(ocitano_p2))
        return true;
    else if (std::get&lt;2&gt;(ocitano_p1) == std::get&lt;2&gt;(ocitano_p2)) {
        int br_dana_p1 = std::get&lt;0&gt;(ocitano_p1);
        for (int i = 0 ; i &lt; std::get&lt;1&gt;(ocitano_p1) - 1 ; i++)
            br_dana_p1 += broj_dana1[i];
        int br_dana_p2 = std::get&lt;0&gt;(ocitano_p2);
        for (int i = 0 ; i &lt; std::get&lt;1&gt;(ocitano_p2) - 1 ; i++)
            br_dana_p2 += broj_dana2[i];
            
        return br_dana_p1 &lt; br_dana_p2;
    }
    return false;
}
    
void Pregled::Ispisi() const {
    std::string ime = Pregled::DajImePacijenta();
    Datum dat_pregleda = Pregled::DajDatumPregleda();
    Vrijeme vr_pregleda = Pregled::DajVrijemePregleda();
    std::cout &lt;&lt; std::setfill(' ') &lt;&lt; std::left &lt;&lt; std::setw(30) &lt;&lt; ime;
    dat_pregleda.Ispisi();
    std::cout &lt;&lt; " ";
    vr_pregleda.Ispisi();
    std::cout &lt;&lt; std::endl;
    std::cout.unsetf(std::ios::floatfield);
}

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) {
        niz_pregleda.resize(spisak_pregleda.size());
        int i(0);
        for (auto it = spisak_pregleda.begin() ; it != spisak_pregleda.end() ; it++, i++)
            niz_pregleda[i] = std::make_shared&lt;Pregled&gt;(it-&gt;DajImePacijenta(), it-&gt;DajDatumPregleda(), it-&gt;DajVrijemePregleda()); 
}

Pregledi::Pregledi(const Pregledi &amp;pregledi) {
        niz_pregleda.resize(pregledi.niz_pregleda.size());
        try {
            for (int i = 0 ; i &lt; niz_pregleda.size() ; i++)
                niz_pregleda[i] = std::make_shared&lt;Pregled&gt;(*pregledi.niz_pregleda[i]);
        } catch(std::bad_alloc) {
            for (int i = 0 ; i &lt; pregledi.niz_pregleda.size() ; i++)
               niz_pregleda[i] = nullptr;
               throw;
        }
}

Pregledi::Pregledi(Pregledi &amp;&amp;pregledi) {
        niz_pregleda.resize(pregledi.niz_pregleda.size());
        for (int i = 0 ; i &lt; niz_pregleda.size() ; i++) {
            niz_pregleda[i] = pregledi.niz_pregleda[i];
            pregledi.niz_pregleda[i] = nullptr;
        }
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;pregledi) {
    if (pregledi.niz_pregleda.size() &gt; niz_pregleda.size()) {
        try {
            for (int i = niz_pregleda.size() ; i &lt; pregledi.niz_pregleda.size() ; i++)
                niz_pregleda[i] = std::make_shared&lt;Pregled&gt;(*pregledi.niz_pregleda[i]);
                
        } catch (std::bad_alloc) {
            for (int i = niz_pregleda.size() ; i &lt; pregledi.niz_pregleda.size() ; i++) {
                niz_pregleda[i] = nullptr;
            }
            throw;
        }
    }
    else {
        for (int i = pregledi.niz_pregleda.size() ; i &lt; niz_pregleda.size() ; i++) {
            niz_pregleda[i] = nullptr;
        }
    }
    niz_pregleda.resize(pregledi.niz_pregleda.size());
    for (int i = 0 ; i &lt; niz_pregleda.size() ; i++)
        *niz_pregleda[i] = *pregledi.niz_pregleda[i];
        
    return *this;
}

Pregledi &amp;Pregledi::operator =(Pregledi &amp;&amp;pregledi) {
    for (int i = 0 ; i &lt; niz_pregleda.size() ; i++)
        std::swap(niz_pregleda[i], pregledi.niz_pregleda[i]);
        
<a name="0"></a><font color="#FF0000"><a href="match663-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
   niz_pregleda.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, datum_pregleda, vrijeme_pregleda));
    
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
    niz_pregleda.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda));
</font>   
}

int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const {
    return std::count_if(niz_pregleda.begin(), niz_pregleda.end(), [datum] (std::shared_ptr&lt;Pregled&gt; pok_na_pregled) {
        Datum dat = pok_na_pregled-&gt;DajDatumPregleda();
        std::tuple&lt;int, int, int&gt; dat_pregleda1 = dat.Ocitaj();
<a name="8"></a><font color="#00FFFF"><a href="match663-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

        std::tuple&lt;int, int, int&gt; dat_pregleda2 = datum.Ocitaj();
         return std::get&lt;0&gt;(dat_pregleda1) == std::get&lt;0&gt;(dat_pregleda2) &amp;&amp; std::get&lt;1&gt;(dat_pregleda1) == std::get&lt;1&gt;(dat_pregleda2) &amp;&amp;
</font>                std::get&lt;2&gt;(dat_pregleda1) == std::get&lt;2&gt;(dat_pregleda2);
    });
}

void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
    for (int i = 0 ; i &lt; niz_pregleda.size() ; i++) {
        if (niz_pregleda[i]-&gt;DajImePacijenta() == ime_pacijenta)
            niz_pregleda.erase(niz_pregleda.begin() + i);
            
    }
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const {
    std::tuple&lt;int, int, int&gt; ocitani_datum = datum.Ocitaj();
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; vekt_pregleda;
    for (int i = 0 ; i &lt; niz_pregleda.size() ; i++) {
        Datum pomocni = niz_pregleda[i]-&gt;DajDatumPregleda();
<a name="1"></a><font color="#00FF00"><a href="match663-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        std::tuple&lt;int, int, int&gt; jedan_datum = pomocni.Ocitaj();
        if (std::get&lt;0&gt;(jedan_datum) == std::get&lt;0&gt;(ocitani_datum) &amp;&amp; std::get&lt;1&gt;(jedan_datum) == std::get&lt;1&gt;(ocitani_datum) &amp;&amp; std::get&lt;2&gt;(jedan_datum) == std::get&lt;2&gt;(ocitani_datum))
            vekt_pregleda.push_back(niz_pregleda[i]);
</font>    }
    std::sort(vekt_pregleda.begin(), vekt_pregleda.end(), [](std::shared_ptr&lt;Pregled&gt; pregled1, std::shared_ptr&lt;Pregled&gt; pregled2) {
        return pregled1-&gt;DolaziPrije(*pregled2, *pregled1); ///////
    });
    for (int i = 0 ; i &lt; vekt_pregleda.size() ; i++)
        vekt_pregleda[i]-&gt;Ispisi();
    
}

<a name="9"></a><font color="#FF00FF"><a href="match663-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

void Pregledi::IspisiSvePreglede() const {
    std::sort(niz_pregleda.begin(), niz_pregleda.end(), [](std::shared_ptr&lt;Pregled&gt; pregled1, std::shared_ptr&lt;Pregled&gt; pregled2) {
</font>        return pregled1-&gt;DolaziPrije(*pregled1, *pregled2);
    });
    for (int i = 0 ; i &lt; niz_pregleda.size() ; i++)
        niz_pregleda[i]-&gt;Ispisi();
}

Pregled &amp;Pregledi::DajNajranijiPregled() {
    if (niz_pregleda.size() == 0)
        throw std::domain_error("Nema registriranih pregleda");
        
    auto najraniji_pregled = std::min_element(niz_pregleda.begin(), niz_pregleda.end(), [](std::shared_ptr&lt;Pregled&gt; pregled1, std::shared_ptr&lt;Pregled&gt; pregled2) {
        return Pregled::DolaziPrije(*pregled1, *pregled2);
    });
    
    return *(*najraniji_pregled);
}

Pregled Pregledi::DajNajranijiPregled() const {
    if (niz_pregleda.size() == 0)
        throw std::domain_error("Nema registriranih pregleda");
        
    auto najraniji_pregled = std::min_element(niz_pregleda.begin(), niz_pregleda.end(), [](std::shared_ptr&lt;Pregled&gt; pregled1, std::shared_ptr&lt;Pregled&gt; pregled2) {
        return Pregled::DolaziPrije(*pregled1, *pregled2);
    });
   
   return *(*najraniji_pregled);
}

void Pregledi::ObrisiNajranijiPregled() {
    try {
        Pregled najraniji_pregled = this-&gt;DajNajranijiPregled();
        Datum datum_najranijeg = najraniji_pregled.DajDatumPregleda();
      
        for (int i = 0 ; i &lt; niz_pregleda.size() ; i++) {
            std::tuple&lt;int, int, int&gt; datum = niz_pregleda[i]-&gt;DajDatumPregleda().Ocitaj();
            std::pair&lt;int, int&gt; vrijeme = niz_pregleda[i]-&gt;DajVrijemePregleda().Ocitaj();
            
            if (niz_pregleda[i]-&gt;DajImePacijenta() == najraniji_pregled.DajImePacijenta() &amp;&amp;
                std::get&lt;0&gt;(datum) == std::get&lt;0&gt;(datum_najranijeg.Ocitaj()) &amp;&amp; 
                std::get&lt;1&gt;(datum) == std::get&lt;1&gt;(datum_najranijeg.Ocitaj()) &amp;&amp; 
                std::get&lt;2&gt;(datum) == std::get&lt;2&gt;(datum_najranijeg.Ocitaj()) &amp;&amp;
                vrijeme.first == najraniji_pregled.DajVrijemePregleda().Ocitaj().first &amp;&amp; 
                vrijeme.second == najraniji_pregled.DajVrijemePregleda().Ocitaj().second) {
            
                niz_pregleda.erase(niz_pregleda.begin() + i);
            }
        }
    } catch(std::domain_error) {
        throw;
    }
}

void Pregledi::RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled) {
    niz_pregleda.push_back(pregled);
}

void Pregledi::IsprazniKolekciju() {
    for (int i = 0 ; i &lt; niz_pregleda.size() ; i++) {
        niz_pregleda[i] = nullptr;
    }
   // broj_pregleda = 0;
   //niz_pregleda.resize(0);
}
    
   </pre>
</body>
</html>
