<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student7090.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student9081.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;iomanip&gt;
#include &lt;memory&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;

class Datum {
    int dan,mjesec,godina;
public:
    Datum (int dan, int mjesec, int godina) {Postavi(dan,mjesec,godina);}
    void Postavi (int dan, int mjesec, int godina);
    std::tuple&lt;int,int,int&gt; Ocitaj() const {return std::make_tuple(dan,mjesec,godina);}
    void Ispisi () const {std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;}
};

void Datum::Postavi (int dan, int mjesec, int godina)
{
    int bd[]{31,28,31,30,31,30,31,31,30,31,30,31};
    if (godina%4==0 &amp;&amp; (godina%100!=0 || godina%400==0)) bd[1]++;
    if (godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;bd[mjesec-1]) throw std::domain_error ("Neispravan datum");
    Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
}

class Vrijeme {
    int sati,minute;
public:
    Vrijeme (int sati, int minute) {Postavi(sati,minute);}
    void Postavi (int sati,int minute);
    std::pair&lt;int,int&gt; Ocitaj () const {return std::make_pair(sati,minute);}
    void Ispisi () const {std::cout&lt;&lt;std::right&lt;&lt;std::setfill('0')&lt;&lt;std::setw(2)&lt;&lt;sati&lt;&lt;":"&lt;&lt;std::setfill('0')&lt;&lt;std::setw(2)&lt;&lt;minute;}
};

void Vrijeme::Postavi (int sati, int minute)
{
    if (sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59)
        throw std::domain_error ("Neispravno vrijeme");
    Vrijeme::sati=sati; Vrijeme::minute=minute;
}

class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
    static int DajBrojDana (int mjesec,int godina);
public:
    Pregled (const std::string &amp;ime, const Datum &amp;datum, const Vrijeme &amp;vrijeme): ime_pacijenta(ime),datum_pregleda(datum),vrijeme_pregleda(vrijeme) {}
    Pregled (const std::string &amp;ime, int dan, int mjesec, int godina, int sati, int minute): ime_pacijenta(ime),datum_pregleda(Datum(dan,mjesec,godina)),vrijeme_pregleda(Vrijeme(sati,minute)) {}
<a name="0"></a><font color="#FF0000"><a href="match375-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    void PromijeniPacijenta (const std::string &amp;ime) {ime_pacijenta=ime;}
    void PromijeniDatum (const Datum &amp;novi_datum) {datum_pregleda=novi_datum;}
    void PromijeniVrijeme (const Vrijeme &amp;novo_vrijeme) {vrijeme_pregleda=novo_vrijeme;}
    void PomjeriDanUnaprijed ();
    void PomjeriDanUnazad ();
    std::string DajImePacijenta () const {return ime_pacijenta;}
    Datum DajDatumPregleda () const {return datum_pregleda;}
    Vrijeme DajVrijemePregleda () const {return vrijeme_pregleda;}
    static bool DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi () const {std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;std::setfill(' ')&lt;&lt;ime_pacijenta; datum_pregleda.Ispisi(); std::cout&lt;&lt;" "; vrijeme_pregleda.Ispisi(); std::cout&lt;&lt;std::endl;}
</font><a name="6"></a><font color="#00FF00"><a href="match375-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

};

bool Pregled::DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2)
{
    auto par1(p1.vrijeme_pregleda.Ocitaj()),par2(p2.vrijeme_pregleda.Ocitaj());
</font><a name="1"></a><font color="#00FF00"><a href="match375-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    auto tup1(p1.datum_pregleda.Ocitaj()),tup2(p2.datum_pregleda.Ocitaj());
    if (std::get&lt;2&gt;(tup1)==std::get&lt;2&gt;(tup2))
    {
        if (std::get&lt;1&gt;(tup1)==std::get&lt;1&gt;(tup2))
        {
            if (std::get&lt;0&gt;(tup1)==std::get&lt;0&gt;(tup2))
</font>            {
                if (par1.first==par2.first)
                {
                    return par1.second&lt;par2.second;
                }
                return par1.first&lt;par2.first;
            }
            return std::get&lt;0&gt;(tup1)&lt;std::get&lt;0&gt;(tup2);
        }
        return std::get&lt;1&gt;(tup1)&lt;std::get&lt;1&gt;(tup2);
    }
    return std::get&lt;2&gt;(tup1)&lt;std::get&lt;2&gt;(tup2);
}

int Pregled::DajBrojDana (int mjesec, int godina)
{
    int bd[]{31,28,31,30,31,30,31,31,30,31,30,31};
    if (godina%4==0 &amp;&amp; (godina%100!=0 || godina%400==0)) bd[1]++;
    return bd[mjesec-1];
}

void Pregled::PomjeriDanUnaprijed()
{
    std::tuple&lt;int,int,int&gt; t(datum_pregleda.Ocitaj());
    std::get&lt;0&gt;(t)++;
    if (std::get&lt;0&gt;(t)&gt;DajBrojDana(std::get&lt;1&gt;(t),std::get&lt;2&gt;(t))) std::get&lt;0&gt;(t)=1,std::get&lt;1&gt;(t)++;
    if (std::get&lt;1&gt;(t)&gt;12) std::get&lt;1&gt;(t)=1,std::get&lt;2&gt;(t)++;
    datum_pregleda.Postavi(std::get&lt;0&gt;(t),std::get&lt;1&gt;(t),std::get&lt;2&gt;(t));
}

void Pregled::PomjeriDanUnazad ()
{
    std::tuple&lt;int,int,int&gt; t(datum_pregleda.Ocitaj());
    std::get&lt;0&gt;(t)--;
    if (std::get&lt;0&gt;(t)==0)
    {
        std::get&lt;1&gt;(t)--;
        if (std::get&lt;1&gt;(t)==0) std::get&lt;1&gt;(t)=12,std::get&lt;2&gt;(t)--;
        std::get&lt;0&gt;(t)=DajBrojDana(std::get&lt;1&gt;(t),std::get&lt;2&gt;(t));
    }
    datum_pregleda.Postavi(std::get&lt;0&gt;(t),std::get&lt;1&gt;(t),std::get&lt;2&gt;(t));
}

class Pregledi {
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pregledi;
public:
    explicit Pregledi () {}
    Pregledi (std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi () = default;
    Pregledi (const Pregledi &amp;pregledi);
    Pregledi (Pregledi &amp;&amp;p): pregledi(p.pregledi) {p.pregledi.resize(0);}
    Pregledi &amp;operator=(const Pregledi &amp;p);
    Pregledi &amp;operator=(Pregledi &amp;&amp;p) {std::swap(pregledi,p.pregledi); p.pregledi.resize(0); return *this;}
    void RegistrirajPregled (const std::string &amp;s, const Datum &amp;d, const Vrijeme &amp;v);
    void RegistrirajPregled (const std::string &amp;s, int dan, int mjesec, int godina, int sati, int minute);
    void RegistrirajPregled (std::shared_ptr&lt;Pregled&gt; p);
<a name="4"></a><font color="#FF00FF"><a href="match375-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    int DajBrojPregleda () const {return pregledi.size();}
    int DajBrojPregledaNaDatum (const Datum &amp;d) const;
    Pregled &amp;DajNajranijiPregled ();
    Pregled DajNajranijiPregled () const;
    void IsprazniKolekciju () {pregledi.resize(0);}
    void ObrisiNajranijiPregled ();
    void ObrisiPregledePacijenta (const std::string &amp;ime);
    void IspisiPregledaNaDatum (const Datum &amp;d) const;
    void IspisiSvePreglede () const;
};

void Pregledi::IspisiPregledaNaDatum (const Datum &amp;d) const
</font>{
    std::vector&lt;bool&gt; vec(pregledi.size(),false);
    auto t1(d.Ocitaj());
    for (int i=0;i&lt;pregledi.size();i++)
    {
        int min(0);
        while (vec[min]==true) min++;
        for (int j=0;j&lt;pregledi.size();j++)
        {
            if (vec[j]==false &amp;&amp; Pregled::DolaziPrije(*pregledi[j],*pregledi[min]))
            min=j;
        }
        vec[min]=true;
<a name="9"></a><font color="#FF00FF"><a href="match375-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        auto t2(pregledi[min]-&gt;DajDatumPregleda().Ocitaj());
        if (std::get&lt;0&gt;(t1)==std::get&lt;0&gt;(t2) &amp;&amp; std::get&lt;1&gt;(t1)==std::get&lt;1&gt;(t2) &amp;&amp; std::get&lt;2&gt;(t1)==std::get&lt;2&gt;(t2))
</font>            pregledi[min]-&gt;Ispisi();
    }
}

void Pregledi::IspisiSvePreglede () const
{
    std::vector&lt;bool&gt; vec(pregledi.size(),false);
    for (int i=0;i&lt;pregledi.size();i++)
    {
        int min(0);
        while (vec[min]==true) min++;
        for (int j=0;j&lt;pregledi.size();j++)
        {
            if (vec[j]==false &amp;&amp; Pregled::DolaziPrije(*pregledi[j],*pregledi[min]))
            min=j;
        }
        vec[min]=true;
        pregledi[min]-&gt;Ispisi();
    }
}

void Pregledi::ObrisiPregledePacijenta (const std::string &amp;ime)
{
    for (int i=0;i&lt;pregledi.size();++i)
    {
        if (pregledi[i]-&gt;DajImePacijenta()==ime)
        {
            pregledi[i]=nullptr;
            pregledi.erase(pregledi.begin()+i);
            i--;
        }
    }
}

void Pregledi::ObrisiNajranijiPregled ()
{
    if (pregledi.size()==0) throw std::range_error ("Prazna kolekcija");
    auto p(&amp;DajNajranijiPregled());
    for (int i=0;i&lt;pregledi.size();i++)
    {
        if (pregledi[i].get()==p)
        {
            pregledi[i]=nullptr;
            pregledi.erase(pregledi.begin()+i);
        }
    }
}

Pregled Pregledi::DajNajranijiPregled() const
{
    if (pregledi.size()==0) throw std::domain_error ("Nema registriranih pregleda");
    return **std::min_element(pregledi.begin(),pregledi.end(),[](std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2)
    {
        return Pregled::DolaziPrije(*p1,*p2);
    });
}

Pregled &amp;Pregledi::DajNajranijiPregled ()
{
    if (pregledi.size()==0) throw std::domain_error ("Nema registriranih pregleda");
    return **std::min_element(pregledi.begin(),pregledi.end(),[] (std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2)
    {
        return Pregled::DolaziPrije(*p1,*p2);
    });
}

int Pregledi::DajBrojPregledaNaDatum (const Datum &amp;d) const
{
    return std::count_if(pregledi.begin(),pregledi.end(),[d] (std::shared_ptr&lt;Pregled&gt; p)
    {
<a name="2"></a><font color="#0000FF"><a href="match375-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        auto t1(p-&gt;DajDatumPregleda().Ocitaj()),t2(d.Ocitaj());
        return std::get&lt;0&gt;(t1)==std::get&lt;0&gt;(t2) &amp;&amp; std::get&lt;1&gt;(t1)==std::get&lt;1&gt;(t2) &amp;&amp; std::get&lt;2&gt;(t1)==std::get&lt;2&gt;(t2);
    });
}

void Pregledi::RegistrirajPregled (std::shared_ptr&lt;Pregled&gt; p)
</font>{

    pregledi.resize(pregledi.size()+1);
    pregledi[pregledi.size()-1]=p;
}

void Pregledi::RegistrirajPregled (const std::string &amp;s, int dan, int mjesec, int godina, int sati, int minute)
{

    pregledi.resize(pregledi.size()+1);
    pregledi[pregledi.size()-1]=std::make_shared&lt;Pregled&gt; (s,dan,mjesec,godina,sati,minute);
}

void Pregledi::RegistrirajPregled (const std::string &amp;s, const Datum &amp;d, const Vrijeme &amp;v)
{
    pregledi.resize(pregledi.size()+1);
    pregledi[pregledi.size()-1]=std::make_shared&lt;Pregled&gt; (s,d,v);
}

Pregledi &amp;Pregledi::operator=(const Pregledi &amp;p)
{
    if (&amp;p!=this) {
        std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; novi(p.pregledi.size());
        for (int i=0;i&lt;p.pregledi.size();i++)
            novi[i]=std::make_shared&lt;Pregled&gt; (*p.pregledi[i]);
        pregledi=novi;
    }
    return *this;
}

Pregledi::Pregledi(const Pregledi &amp;p)
{
<a name="8"></a><font color="#00FFFF"><a href="match375-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    pregledi.resize(p.pregledi.size());
    for (int i=0;i&lt;pregledi.size();i++)
        pregledi[i]=std::make_shared&lt;Pregled&gt; (*p.pregledi[i]);
}

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda)
</font>{
    pregledi.resize(spisak_pregleda.size());
<a name="10"></a><font color="#FF0000"><a href="match375-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    auto it(spisak_pregleda.begin());
    for (int i=0;i&lt;pregledi.size();i++)
    {
        pregledi[i]=std::make_shared&lt;Pregled&gt; (*it);
</font>        it++;
    }
}

int main ()
{
    Pregledi pr;
    for (;;)
    {
        std::string ime;
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
<a name="3"></a><font color="#00FFFF"><a href="match375-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        std::getline(std::cin,ime);
        if (ime=="kraj") break;
        int dan,mjesec,godina,sati,minute;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        std::cin&gt;&gt;sati&gt;&gt;minute;
</font>        std::cin.ignore(10000,'\n');
        pr.RegistrirajPregled(ime,dan,mjesec,godina,sati,minute);
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi\n";
    pr.IspisiSvePreglede();
    for (;;)
    {
        int x;
        std::cout&lt;&lt;"\nOdaberite jednu od sljedecih opcija\n1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta\n";
        std::cout&lt;&lt;"4 - Obrisi najraniji pregled\n5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa\n";
<a name="7"></a><font color="#0000FF"><a href="match375-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::cin&gt;&gt;x;
        if (x==1)
        {
            int d,m,g;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
            std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;pr.DajBrojPregledaNaDatum(Datum(d,m,g))&lt;&lt;std::endl;
</font>        }
        else if (x==2) {std::cout&lt;&lt;"Najraniji pregled je:\n"; pr.DajNajranijiPregled().Ispisi();}
<a name="5"></a><font color="#FF0000"><a href="match375-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        else if (x==3)
        {
            std::string ip;
            std::cout&lt;&lt;"Unesite ime pacijenta: ";
            std::cin.ignore(10000,'\n');
            std::getline(std::cin,ip);
            int broj(pr.DajBrojPregleda());
            pr.ObrisiPregledePacijenta(ip);
</font>            std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;broj-pr.DajBrojPregleda()&lt;&lt;" pregleda\n";
        }
        else if (x==4)
        {
            pr.ObrisiNajranijiPregled();
            std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan\n";
        }
<a name="11"></a><font color="#00FF00"><a href="match375-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        else if (x==5)
        {
            int d,m,g;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
            std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
            std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su: \n";
</font>            pr.IspisiPregledaNaDatum(Datum(d,m,g));
        }
        else if (x==6) pr.IspisiSvePreglede();
        else if (x==7) break;
    }
	return 0;
}
</pre>
</body>
</html>
