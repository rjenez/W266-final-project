<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student1093.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student8815.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;

class Datum {
    int d, m, g;
    bool TestDatuma(int dan, int mjesec, int godina) const;
public:
    Datum(int dan, int mjesec, int godina) {
        if(!TestDatuma(dan, mjesec, godina)) throw std::domain_error("Neispravan datum");
        d=dan; m=mjesec; g=godina;
    };
    void Postavi(int dan, int mjesec, int godina) {
        if(!TestDatuma(dan, mjesec, godina)) throw std::domain_error("Neispravan datum");
        d=dan; m=mjesec; g=godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const { return std::tie(d, m, g); }
    void Ispisi() const { std::cout&lt;&lt;d&lt;&lt;"/"&lt;&lt;m&lt;&lt;"/"&lt;&lt;g; };
};

bool Datum::TestDatuma(int dan, int mjesec, int godina) const {
    int broj_dana[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) broj_dana[1]++;
    if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;broj_dana[mjesec-1]) return false;
    return true;
}


class Vrijeme {
    int s, min;
    bool TestVremena(int sati, int minute) const;
public:
    Vrijeme(int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
        s=sati; min=minute;
    }
    void Postavi(int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
        s=sati; min=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const { return std::make_pair(s, min); }
    void Ispisi() const { std::cout&lt;&lt;std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt;s&lt;&lt;":"&lt;&lt;std::setw(2)&lt;&lt;min&lt;&lt;std::setfill(' '); }
};


class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda) { 
        Pregled::ime_pacijenta=ime_pacijenta; 
    }
<a name="0"></a><font color="#FF0000"><a href="match956-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) : 
    ime_pacijenta(ime_pacijenta), datum_pregleda(dan_pregleda, mjesec_pregleda, godina_pregleda), vrijeme_pregleda(sati_pregleda, minute_pregleda) {}
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) { Pregled::ime_pacijenta=ime_pacijenta; }
    void PromijeniDatum(const Datum &amp;novi_datum) { datum_pregleda=novi_datum; }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) { vrijeme_pregleda=novo_vrijeme; }
</font>    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const { return ime_pacijenta; }
<a name="5"></a><font color="#FF0000"><a href="match956-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Datum DajDatumPregleda() const { return datum_pregleda; }
    Vrijeme DajVrijemePregleda() const { return vrijeme_pregleda; }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
    void Ispisi() const { std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime_pacijenta&lt;&lt;std::right; datum_pregleda.Ispisi(); std::cout&lt;&lt;" "; vrijeme_pregleda.Ispisi(); std::cout&lt;&lt;std::endl;}
</font><a name="4"></a><font color="#FF00FF"><a href="match956-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

};

bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
    std::tuple&lt;int, int, int&gt; dat1(p1.datum_pregleda.Ocitaj()), dat2(p2.datum_pregleda.Ocitaj());
</font>    if(std::get&lt;2&gt;(dat1)==std::get&lt;2&gt;(dat2)) {
        if(std::get&lt;1&gt;(dat1)==std::get&lt;1&gt;(dat2)) {
            if(std::get&lt;0&gt;(dat1)==std::get&lt;0&gt;(dat2)) {
                std::pair&lt;int, int&gt; vr1(p1.vrijeme_pregleda.Ocitaj()), vr2(p2.vrijeme_pregleda.Ocitaj());
                if(vr1.first==vr2.first) {
                    return vr1.second&lt;vr2.second;
                }
                else return vr1.first&lt;vr2.first;
            }
            else return std::get&lt;0&gt;(dat1)&lt;std::get&lt;0&gt;(dat2);
        }
        else return std::get&lt;1&gt;(dat1)&lt;std::get&lt;1&gt;(dat2);
    }
    else return std::get&lt;2&gt;(dat1)&lt;std::get&lt;2&gt;(dat2);
}


class Pregledi {
<a name="9"></a><font color="#FF00FF"><a href="match956-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pregledi;
public:
    explicit Pregledi() = default;
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    Pregledi(const Pregledi &amp;p) : pregledi(p.DajBrojPregleda()) { for(int i=0; i&lt;p.DajBrojPregleda(); i++) pregledi[i]=std::make_shared&lt;Pregled&gt;(*p.pregledi[i]); }
</font>    Pregledi &amp;operator =(const Pregledi &amp;p);
    Pregledi(Pregledi &amp;&amp;p) : pregledi(std::move(p.pregledi)) {}
    Pregledi &amp;operator =(Pregledi &amp;&amp;p) { pregledi=std::move(p.pregledi); return *this; }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) { pregledi.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, datum_pregleda, vrijeme_pregleda)); }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled) { pregledi.push_back(pregled); }
    int DajBrojPregleda() const { return pregledi.size(); }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju() { pregledi.resize(0); }
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

void Pregledi::IspisiSvePreglede() const {
    std::vector&lt;Pregled&gt; v;
    for(int i=0; i&lt;pregledi.size(); i++) v.push_back(*pregledi[i]);
    std::sort(v.begin(), v.end(), [](Pregled p1, Pregled p2) { return Pregled::DolaziPrije(p1, p2); });
    for(int i=0; i&lt;v.size(); i++) v[i].Ispisi();
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const {
    std::tuple&lt;int, int, int&gt; d1=datum.Ocitaj();
    std::vector&lt;Pregled&gt; v;
    for(int i=0; i&lt;pregledi.size(); i++) v.push_back(*pregledi[i]);
    std::sort(v.begin(), v.end(), [](Pregled p1, Pregled p2) { return Pregled::DolaziPrije(p1, p2); });
    std::for_each(v.begin(), v.end(), [d1](Pregled p) {
<a name="6"></a><font color="#00FF00"><a href="match956-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                                                        std::tuple&lt;int, int, int&gt; d2(p.DajDatumPregleda().Ocitaj());
                                                        if(std::get&lt;0&gt;(d1)==std::get&lt;0&gt;(d2) &amp;&amp; std::get&lt;1&gt;(d1)==std::get&lt;1&gt;(d2) &amp;&amp; std::get&lt;2&gt;(d1)==std::get&lt;2&gt;(d2)) p.Ispisi();
</font><a name="10"></a><font color="#FF0000"><a href="match956-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                                                        });
</font>}

void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
    int br(std::count_if(pregledi.begin(), pregledi.end(), [ime_pacijenta](std::shared_ptr&lt;Pregled&gt; p) { return p-&gt;DajImePacijenta()==ime_pacijenta; }));
    if(br==0) return;
    std::remove_if(pregledi.begin(), pregledi.end(), [ime_pacijenta](std::shared_ptr&lt;Pregled&gt; p) { return p-&gt;DajImePacijenta()==ime_pacijenta; });
    pregledi.resize(pregledi.size()-br);
}

void Pregledi::ObrisiNajranijiPregled() {
    auto prvi((std::min_element(pregledi.begin(), pregledi.end(), [](std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2)-&gt;bool { return Pregled::DolaziPrije(*p1, *p2); })));
    if(prvi==pregledi.end()) throw std::range_error("Prazna kolekcija");
    std::remove(pregledi.begin(), pregledi.end(), *prvi);
    pregledi.resize(pregledi.size()-1);
}

Pregled Pregledi::DajNajranijiPregled() const {
    auto prvi(std::min_element(pregledi.begin(), pregledi.end(), [](std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) { return Pregled::DolaziPrije(*p1, *p2); }));
    if(prvi==pregledi.end()) throw std::domain_error("Nema registriranih pregleda");
    return **prvi;
}

Pregled &amp;Pregledi::DajNajranijiPregled() {
    auto prvi(std::min_element(pregledi.begin(), pregledi.end(), [](std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) { return Pregled::DolaziPrije(*p1, *p2); }));
    if(prvi==pregledi.end()) throw std::domain_error("Nema registriranih pregleda");
    return **prvi;
}

<a name="1"></a><font color="#00FF00"><a href="match956-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) : pregledi(spisak_pregleda.size()) {		
    int i=0;
	for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) { pregledi[i]=std::make_shared&lt;Pregled&gt;(*it); i++; }
</font>}

int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const {
    std::tuple&lt;int, int, int&gt; d1=datum.Ocitaj();
    return std::count_if(pregledi.begin(), pregledi.end(), [d1](std::shared_ptr&lt;Pregled&gt; p)-&gt;bool {
<a name="8"></a><font color="#00FFFF"><a href="match956-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                                                                                    std::tuple&lt;int, int, int&gt; d2(p-&gt;DajDatumPregleda().Ocitaj());
                                                                                    return (std::get&lt;0&gt;(d1)==std::get&lt;0&gt;(d2) &amp;&amp; std::get&lt;1&gt;(d1)==std::get&lt;1&gt;(d2) &amp;&amp; std::get&lt;2&gt;(d1)==std::get&lt;2&gt;(d2));
</font>                                                                                });
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
    Datum d(dan_pregleda, mjesec_pregleda, godina_pregleda);
    Vrijeme v(sati_pregleda, minute_pregleda);
    pregledi.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, d, v));
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;p) {
    pregledi.resize(p.DajBrojPregleda());
    for(int i=0; i&lt;p.DajBrojPregleda(); i++) pregledi[i]=std::make_shared&lt;Pregled&gt;(*p.pregledi[i]);
    return *this;
}

int main ()
{
    Pregledi p;
    for(;;) {
        std::string ime;
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::cin&gt;&gt;std::ws;
        std::getline(std::cin, ime);
        if(ime=="kraj") break;
        int d, m, g, s, min;
        std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
        std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
        std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
        std::cin&gt;&gt;s&gt;&gt;min;
        p.RegistrirajPregled(ime, d, m, g, s, min);
    }
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
    p.IspisiSvePreglede();
    int opcija(0);
    while(opcija!=7) {
        std::cout&lt;&lt;std::endl&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl;
        std::cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
    	std::cin&gt;&gt;opcija;
    	if(opcija==1) {
    	    int d, m, g;
    	    std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
    	    std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
    	    Datum dat(d, m, g);
<a name="2"></a><font color="#0000FF"><a href="match956-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    	    std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;p.DajBrojPregledaNaDatum(dat)&lt;&lt;std::endl;
    	}
    	else if(opcija==2) {
    	    std::cout&lt;&lt;"Najraniji pregled je:"&lt;&lt;std::endl;
</font>    	    Pregled pom(p.DajNajranijiPregled());
    	    pom.Ispisi();
    	}
    	else if(opcija==3) {
    	    std::string ime;
    	    std::cout&lt;&lt;"Unesite ime pacijenta: ";
    	    std::cin.ignore(1000, '\n');
    	    std::getline(std::cin, ime);
    	    int br1(p.DajBrojPregleda());
    	    p.ObrisiPregledePacijenta(ime);
    	    int br2(p.DajBrojPregleda());
<a name="3"></a><font color="#00FFFF"><a href="match956-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    	    std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;br1-br2&lt;&lt;" pregleda"&lt;&lt;std::endl;
    	}
    	else if(opcija==4) {
    	    p.ObrisiNajranijiPregled(); 
    	    std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
    	}
    	else if(opcija==5) {
</font>    	    int d, m, g;
    	    std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
    	    std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
    	    Datum dat(d, m, g);
<a name="7"></a><font color="#0000FF"><a href="match956-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    	    std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su:"&lt;&lt;std::endl;
    	    p.IspisiPregledeNaDatum(dat);
    	}
    	else if(opcija==6) p.IspisiSvePreglede();
</font>    }
	return 0;
}</pre>
</body>
</html>
