<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student2503.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student2503.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;tuple&gt;
#include &lt;new&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;

class Datum
{
<a name="5"></a><font color="#FF0000"><a href="match228-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    int dan,mjesec,godina;
public:
    Datum(int dan, int mjesec, int godina) {
        Postavi(dan,mjesec,godina);
    }
    void Postavi(int dan, int mjesec, int godina) {
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>        if((godina % 4) == 0 &amp;&amp; (godina % 100) != 0 || (godina % 400) == 0) broj_dana[1]++;
        int parametar(mjesec-1);
<a name="7"></a><font color="#0000FF"><a href="match228-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        if((godina&lt;1) || (mjesec&lt;1) || (mjesec&gt;12) || (dan&lt;1) || (dan&gt;broj_dana[parametar])) throw std::domain_error("Neispravan datum");
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        return (std::make_tuple(dan,mjesec,godina));
    }
    void Ispisi() const {
</font><a name="3"></a><font color="#00FFFF"><a href="match228-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        std::cout&lt;&lt;std::get&lt;0&gt; (Ocitaj())&lt;&lt;"/"&lt;&lt;std::get&lt;1&gt;(Ocitaj())&lt;&lt;"/"&lt;&lt;std::get&lt;2&gt;(Ocitaj());
    }
};

class Vrijeme
{
    int sati, minute;
public:
    Vrijeme(int sati, int minute) {
        Postavi(sati,minute);
    }
    void Postavi(int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const {
        std::pair&lt;int,int&gt; p {sati,minute};
</font>        return p;
    }
    void Ispisi() const {
        if(sati&lt;10) {
            std::cout&lt;&lt;"0"&lt;&lt;Ocitaj().first&lt;&lt;":";
        } else {
            std::cout&lt;&lt;Ocitaj().first&lt;&lt;":";
        }
        if(minute&lt;10) {
            std::cout&lt;&lt;"0"&lt;&lt;Ocitaj().second;
        } else {
            std::cout&lt;&lt;Ocitaj().second;
        }
    }
};


class Pregled
{
    std::string ime;
    Datum datum;
    Vrijeme vrijeme;
public:
    Pregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda) : datum(datum_pregleda) , vrijeme(vrijeme_pregleda) {
        Pregled::ime=ime_pacijenta;
    }
<a name="9"></a><font color="#FF00FF"><a href="match228-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda) : datum(dan_pregleda,mjesec_pregleda,godina_pregleda), vrijeme(sati_pregleda,minute_pregleda) {
        Pregled::ime=ime_pacijenta;
</font>    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        Pregled::datum=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        Pregled::vrijeme=novo_vrijeme;
    }
    void PomjeriDanUnaprijed() {
        std::tuple&lt;int,int,int&gt; neki_datum (datum.Ocitaj());
        int dan(std::get&lt;0&gt;(neki_datum));
        int mjesec(std::get&lt;1&gt;(neki_datum));
        int godina(std::get&lt;2&gt;(neki_datum));
        dan++;
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if((godina % 4) == 0 &amp;&amp; (godina % 100) != 0 || (godina % 400) == 0) broj_dana[1]++;
        int parametar(mjesec-1);
        if(dan&gt;broj_dana[parametar]) {
            dan=1;
            mjesec++;
        }
        if(mjesec&gt;12) {
            mjesec=1;
            godina++;
        }
        datum.Postavi(dan,mjesec,godina);
    }
    void PomjeriDanUnazad() {
        std::tuple&lt;int,int,int&gt; neki_datum (datum.Ocitaj());
        int dan(std::get&lt;0&gt;(neki_datum));
        int mjesec(std::get&lt;1&gt;(neki_datum));
        int godina(std::get&lt;2&gt;(neki_datum));
        dan--;
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if((godina % 4) == 0 &amp;&amp; (godina % 100) != 0 || (godina % 400) == 0) broj_dana[1]++;
        int parametar(mjesec-1);
        if(dan==0) mjesec--;
        if(mjesec!=0) {
            parametar=mjesec-1;
            dan=broj_dana[parametar];
        } else if(mjesec==0) {
            mjesec=12;
            godina--;
            dan=31;
        };
        datum.Postavi(dan,mjesec,godina);
    }
    std::string DajImePacijenta() const {
        return ime;
    }
    Datum DajDatumPregleda() const {
<a name="0"></a><font color="#FF0000"><a href="match228-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

        return datum;
    }
    Vrijeme DajVrijemePregleda() const {
        return vrijeme;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
        if(std::get&lt;2&gt;(p1.datum.Ocitaj())&lt;std::get&lt;2&gt;(p2.datum.Ocitaj())) return true;
        else if(std::get&lt;2&gt;(p1.datum.Ocitaj())&gt;std::get&lt;2&gt;(p2.datum.Ocitaj())) return false;
        else if(std::get&lt;2&gt;(p1.datum.Ocitaj())==std::get&lt;2&gt;(p2.datum.Ocitaj())) {
</font>            if(std::get&lt;1&gt;(p1.datum.Ocitaj())&lt;std::get&lt;1&gt;(p2.datum.Ocitaj())) return true;
<a name="8"></a><font color="#00FFFF"><a href="match228-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

            else if(std::get&lt;1&gt;(p1.datum.Ocitaj())&gt;std::get&lt;1&gt;(p2.datum.Ocitaj())) return false;
</font>            else if(std::get&lt;1&gt;(p1.datum.Ocitaj())==std::get&lt;1&gt;(p2.datum.Ocitaj())) {
<a name="4"></a><font color="#FF00FF"><a href="match228-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

                if(std::get&lt;0&gt;(p1.datum.Ocitaj())&lt;std::get&lt;0&gt;(p2.datum.Ocitaj())) return true;
                else if(std::get&lt;0&gt;(p1.datum.Ocitaj())&gt;std::get&lt;0&gt;(p2.datum.Ocitaj())) return false;
                else if(std::get&lt;0&gt;(p1.datum.Ocitaj())==std::get&lt;0&gt;(p2.datum.Ocitaj())) {
</font>                    if(p1.vrijeme.Ocitaj().first&lt;p2.vrijeme.Ocitaj().first) return true;
                    else if(p1.vrijeme.Ocitaj().first&gt;p2.vrijeme.Ocitaj().first) return false;
                    else if(p1.vrijeme.Ocitaj().first==p2.vrijeme.Ocitaj().first) {
                        if(p1.vrijeme.Ocitaj().second&lt;p2.vrijeme.Ocitaj().second) return true;
                        return false;
                    }
                }
            }
        }

    }
    void Ispisi() const {
        std::cout&lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;ime;
<a name="6"></a><font color="#00FF00"><a href="match228-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

        datum.Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme.Ispisi();
        std::cout&lt;&lt;std::endl;
    }
};


class Pregledi
{
    int broj_pregleda;
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt;v;
public:

    explicit Pregledi() : broj_pregleda(0) {
    }
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda): broj_pregleda(spisak_pregleda.size())  {
</font>        std::initializer_list&lt;Pregled&gt;::iterator it (spisak_pregleda.begin());
        for(int i(0); i&lt;spisak_pregleda.size(); i++) {
            v.push_back(std::make_shared&lt;Pregled&gt;(*it));
            it++;
        }
    }

    Pregledi(const Pregledi &amp;pregledi)
        : broj_pregleda(pregledi.broj_pregleda) {
        for(int i(0); i&lt;broj_pregleda; i++)
            v.push_back(pregledi.v.at(i));
    }
    Pregledi(Pregledi &amp;&amp;pregledi) : broj_pregleda(pregledi.broj_pregleda), v(pregledi.v) { }
    Pregledi &amp;operator =(const Pregledi &amp;pregledi) {
        v.resize(pregledi.broj_pregleda);
        for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
            Pregledi::v[i]=pregledi.v[i];
        }
        Pregledi::broj_pregleda=pregledi.broj_pregleda;
        return *this;
    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi) {
        if(&amp;pregledi!=this) {
            v.resize(pregledi.broj_pregleda);
            Pregledi::broj_pregleda=pregledi.broj_pregleda;
            for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
                Pregledi::v[i]=pregledi.v[i];
            }
            for(int i(0); i&lt;pregledi.broj_pregleda; i++) {
                pregledi.v[i]=nullptr;
            }
        }
        return *this;
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        broj_pregleda++;
        std::shared_ptr&lt;Pregled&gt; p (std::make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
        v.push_back(p);
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
        broj_pregleda++;
        Pregled pr(ime_pacijenta,dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
        std::shared_ptr&lt;Pregled&gt; p (std::make_shared&lt;Pregled&gt;(pr));
        v.push_back(p);
    }
    void RegistrirajPregled(Pregled *pregled) {
        broj_pregleda++;
        std::shared_ptr&lt;Pregled&gt; p (std::make_shared&lt;Pregled&gt;(*pregled));
        v.push_back(p);
    }
    int DajBrojPregleda() const {
        return broj_pregleda;
    }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const {

        int brojac(std::count_if(v.begin(),v.end(),[&amp;datum] (std::shared_ptr&lt;Pregled&gt; p) {
            return(std::get&lt;0&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt; (datum.Ocitaj()) &amp;&amp;
                   std::get&lt;1&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;1&gt; (datum.Ocitaj()) &amp;&amp;
                   std::get&lt;2&gt;(p-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;2&gt; (datum.Ocitaj()));
        }));
        if(brojac!=0) return brojac;
        else throw std::domain_error("Nema registriranih pregleda");
    }
    Pregled &amp;DajNajranijiPregled() {
        Pregled &amp;najraniji(*(v[0]));
        for(int i(1); i&lt;v.size(); i++) {
            if(Pregled::DolaziPrije(*(v[i]),najraniji)) najraniji=*(v[i]);
        }

        return najraniji;
    }
    Pregled DajNajranijiPregled() const {
        Pregled najraniji(*(v[0]));
        for(int i(1); i&lt;v.size(); i++) {
            if(Pregled::DolaziPrije(*(v[i]),najraniji)) najraniji=*(v[i]);
        }
        return najraniji;
    }
    void IsprazniKolekciju() {
        int n(v.size());
        n--;
        for(int i(n); i&gt;=0; i--)
            v.erase(v.begin()+i);
        broj_pregleda=0;
    }
    void ObrisiNajranijiPregled() {
        Pregled najraniji(DajNajranijiPregled());
        int n(v.size());
        for(int i(0); i&lt;n; i++) {
            if(v[i]-&gt;DajImePacijenta()==DajNajranijiPregled().DajImePacijenta()
<a name="2"></a><font color="#0000FF"><a href="match228-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

                    &amp;&amp; std::get&lt;0&gt;(v[i]-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt;(DajNajranijiPregled().DajDatumPregleda().Ocitaj())
                    &amp;&amp; std::get&lt;1&gt;(v[i]-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;1&gt;(DajNajranijiPregled().DajDatumPregleda().Ocitaj())
                    &amp;&amp; std::get&lt;2&gt;(v[i]-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;2&gt;(DajNajranijiPregled().DajDatumPregleda().Ocitaj())
</font>                    &amp;&amp; v[i]-&gt;DajVrijemePregleda().Ocitaj().first==DajNajranijiPregled().DajVrijemePregleda().Ocitaj().first
                    &amp;&amp; v[i]-&gt;DajVrijemePregleda().Ocitaj().second==DajNajranijiPregled().DajVrijemePregleda().Ocitaj().second) {
                v.erase(v.begin()+i);
                break;
            }
        }
        broj_pregleda--;
    }
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
        int n(v.size());
        for(int i(0); i&lt;n; i++) {
            if(v[i]-&gt;DajImePacijenta()==ime_pacijenta) {
                v.erase(v.begin()+i);
                n--;
                i--;
                broj_pregleda--;
            }
        }
    }
    void IspisiPregledeNaDatum(const Datum &amp;datum) const {
        std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; ve;
        ve=v;
        std::sort(ve.begin(),ve.end(), [] ( std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) {
            Pregled  &amp;pr1(*(p1)),&amp;pr2(*(p2));
            return(Pregled::DolaziPrije(pr1,pr2));
        });
        for(int i(0); i&lt;v.size(); i++) {
<a name="1"></a><font color="#00FF00"><a href="match228-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

            if(std::get&lt;0&gt;(ve[i]-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;0&gt;(datum.Ocitaj()) &amp;&amp; std::get&lt;1&gt;(ve[i]-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;1&gt;(datum.Ocitaj()) &amp;&amp; std::get&lt;2&gt;(ve[i]-&gt;DajDatumPregleda().Ocitaj())==std::get&lt;2&gt;(datum.Ocitaj())) ve[i]-&gt;Ispisi();
        }
    }
    void IspisiSvePreglede() const {
</font>        std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; ve;
        ve=v;
        std::sort(ve.begin(),ve.end(), [] ( std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) {
            Pregled  &amp;pr1(*(p1)),&amp;pr2(*(p2));
            return(Pregled::DolaziPrije(pr1,pr2));
        });
        std::for_each(ve.begin(),ve.end(), [] (std::shared_ptr&lt;Pregled&gt; p) {
            p-&gt;Ispisi();
        });
    }
};


int main ()
{
       Pregledi p;
        int d(1);
        for(int i = 0; i &lt; 20; i++,d++){
            p.RegistrirajPregled(std::make_shared&lt;Pregled&gt;(Pregled("Dalila", {d,d%12+1,2000+d}, {1,1})));
        }
        p.IspisiSvePreglede();
    return 0;
}
</pre>
</body>
</html>
