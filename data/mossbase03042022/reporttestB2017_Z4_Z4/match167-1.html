<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student6594.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student1213.cpp<p></p><pre>

/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;tuple&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;iomanip&gt;
#include &lt;memory&gt;
#include &lt;initializer_list&gt;

using namespace std;

<a name="19"></a><font color="#FF00FF"><a href="match167-0.html#19" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

vector&lt;int&gt; dani{31,28,31,30,31,30,31,31,30,31,30,31};

class Datum{
    int  d,m,g;
public:
    Datum(int dan=1, int mjesec=1, int godina=1){
</font>        if(godina &lt; 1 || dan &lt; 1 || dan &gt; dani[mjesec-1] || mjesec &lt; 1 || mjesec &gt; 12) 
            throw domain_error("Neispravan datum!");
        d=dan; m=mjesec; g=godina;
    }
    void Postavi(int dan, int mjesec, int godina){
        if(godina &lt; 1 || dan &lt; 1 || dan &gt; dani[mjesec-1] || mjesec &lt; 1 || mjesec &gt; 12) 
            throw domain_error("Neispravan datum!");
        d=dan; m=mjesec; g=godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const{
        tuple&lt;int,int,int&gt; rez(d,m,g);
<a name="12"></a><font color="#0000FF"><a href="match167-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        return rez;;
    }
    void Ispisi() const{
        cout&lt;&lt;d&lt;&lt;"/"&lt;&lt;m&lt;&lt;"/"&lt;&lt;g&lt;&lt;" ";
    }
};

class Vrijeme{
  int s,m;
public:
    Vrijeme(int sati=0, int minute=0){
        if(sati&gt;23 || sati&lt;0) throw domain_error("Neispravno vrijeme!");
</font>        if( minute&gt;59 || minute&lt;0) throw domain_error("Neispravno vrijeme!");
        s=sati; m=minute;
    }
    void Postavi(int sati, int minute){
        if(sati&gt;23 || sati&lt;0) throw domain_error("Neispravno vrijeme!");
        if( minute&gt;59 || minute&lt;0) throw domain_error("Neispravno vrijeme!");
        s=sati; m=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const{
        pair&lt;int,int&gt; p(s,m);
        return p;
    }
    void Ispisi() const{
        cout &lt;&lt;setw(2)&lt;&lt;right&lt;&lt;setfill('0')&lt;&lt;s;
<a name="2"></a><font color="#0000FF"><a href="match167-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        cout&lt;&lt;":"&lt;&lt;setfill('0') &lt;&lt;setw(2)&lt;&lt;m;
    }
 
};

class Pregled{
  string s; Datum d; Vrijeme v;
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,
     const Vrijeme &amp;vrijeme_pregleda){
         s=ime_pacijenta;
         d=datum_pregleda;
         v=vrijeme_pregleda;
     }
    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,
     int godina_pregleda, int sati_pregleda, int minute_pregleda){
         s=ime_pacijenta;
         d=Datum(dan_pregleda,mjesec_pregleda,godina_pregleda);
         v=Vrijeme(sati_pregleda,minute_pregleda);
         //d=datum_pregleda;
         //v=vrijeme_pregleda;
     }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta){
        s=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum){
        d=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
        v=novo_vrijeme;
    }
    void PomjeriDanUnaprijed(){
</font>        
        
    }
    void PomjeriDanUnazad(){
        
    }
    std::string DajImePacijenta() const { return s;}
    Datum DajDatumPregleda() const { return d;}
    Vrijeme DajVrijemePregleda() const { return v;}
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
        Datum dat1=p1.d;
        Datum dat2=p2.d;
        Vrijeme vr1=p1.v;
        Vrijeme vr2=p2.v;
        if(get&lt;2&gt;(dat1.Ocitaj())&gt;get&lt;2&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;1&gt;(dat1.Ocitaj())&gt;get&lt;1&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;0&gt;(dat1.Ocitaj())&gt;get&lt;0&gt;(dat2.Ocitaj()) &amp;&amp; vr1.Ocitaj().first&gt;vr2.Ocitaj().first &amp;&amp; vr1.Ocitaj().second&gt;vr2.Ocitaj().second) return false;
<a name="13"></a><font color="#00FFFF"><a href="match167-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        return true;
    }
    void Ispisi() const{
        cout&lt;&lt;setw(30)&lt;&lt;left&lt;&lt;setfill(' ')&lt;&lt;s;
        d.Ispisi();
        v.Ispisi();
        cout&lt;&lt;endl;

    }

};

bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
</font>        Datum dat1=p1.DajDatumPregleda();
        Datum dat2=p2.DajDatumPregleda();
        Vrijeme vr1=p1.DajVrijemePregleda();
        Vrijeme vr2=p2.DajVrijemePregleda();
        if(get&lt;2&gt;(dat1.Ocitaj())&gt;get&lt;2&gt;(dat2.Ocitaj())) return false;
        if(get&lt;2&gt;(dat1.Ocitaj())==get&lt;2&gt;(dat2.Ocitaj())&amp;&amp; get&lt;1&gt;(dat1.Ocitaj())&gt;get&lt;1&gt;(dat2.Ocitaj())) return false;
        if(get&lt;2&gt;(dat1.Ocitaj())==get&lt;2&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;1&gt;(dat1.Ocitaj())==get&lt;1&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;0&gt;(dat1.Ocitaj())&gt;get&lt;0&gt;(dat2.Ocitaj()))return false;
        if(get&lt;2&gt;(dat1.Ocitaj())==get&lt;2&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;1&gt;(dat1.Ocitaj())==get&lt;1&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;0&gt;(dat1.Ocitaj())==get&lt;0&gt;(dat2.Ocitaj()) &amp;&amp; vr1.Ocitaj().first&gt;vr2.Ocitaj().first) return false;
        if(get&lt;2&gt;(dat1.Ocitaj())==get&lt;2&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;1&gt;(dat1.Ocitaj())==get&lt;1&gt;(dat2.Ocitaj()) &amp;&amp; get&lt;0&gt;(dat1.Ocitaj())==get&lt;0&gt;(dat2.Ocitaj()) &amp;&amp; vr1.Ocitaj().first==vr2.Ocitaj().first)
            {
                if(vr1.Ocitaj().second&gt;vr2.Ocitaj().second)
                return false;
            }
        return true;
    }

class Pregledi{

vector&lt;shared_ptr&lt;Pregled&gt;&gt; lista;
public:
    explicit Pregledi(){
        
    }
<a name="17"></a><font color="#0000FF"><a href="match167-0.html#17" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda){
        lista.resize(spisak_pregleda.size());
      
        int br=0;
        for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++){
</font>            lista[br]=make_shared&lt;Pregled&gt;(*it);
            br++;
        }
    }
    ~Pregledi(){
        for(int i=0; i&lt;lista.size(); i++) 
<a name="0"></a><font color="#FF0000"><a href="match167-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

           lista[i]=nullptr;
    }
    Pregledi &amp;operator =(const Pregledi &amp;pregledi){
        if(this==&amp;pregledi) return *this;
          for(int i=0; i&lt;lista.size(); i++)
               lista[i]=nullptr;
            lista.resize(pregledi.lista.size());
          for(int i=0; i&lt;lista.size(); i++)
          lista[i] = make_shared&lt;Pregled&gt;(*pregledi.lista[i]);
          return *this;

    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi){
        if(this==&amp;pregledi) return *this;
          for(int i=0; i&lt;lista.size(); i++)
              lista[i]=nullptr;
            lista.resize(pregledi.lista.size());

          for(int i=0; i&lt;lista.size(); i++)
               lista[i] = pregledi.lista[i];
</font>          for(int i=0; i&lt;pregledi.lista.size(); i++)
               pregledi.lista[i] = nullptr;
          return *this;

    }
<a name="21"></a><font color="#00FF00"><a href="match167-0.html#21" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Pregledi(const Pregledi &amp;pregledi){
        
        lista.resize(pregledi.lista.size());
        for(int i=0; i&lt;lista.size(); i++) lista[i]=make_shared&lt;Pregled&gt;(*pregledi.lista[i]);
</font>    }
<a name="23"></a><font color="#00FFFF"><a href="match167-0.html#23" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
     const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
          lista.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
</font>
     }
    Pregledi(Pregledi &amp;&amp;pregledi){
<a name="22"></a><font color="#0000FF"><a href="match167-0.html#22" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        lista.resize(pregledi.lista.size());
        for(int i=0; i&lt;lista.size(); i++) lista[i]=pregledi.lista[i];
</font>        for(int i=0; i&lt;pregledi.lista.size(); i++) pregledi.lista[i]=nullptr;
        

    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
     int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
<a name="16"></a><font color="#00FF00"><a href="match167-0.html#16" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

     int minute_pregleda){
    
          lista.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda));

     }
    void RegistrirajPregled(shared_ptr&lt;Pregled&gt;pregled){
          lista.push_back(pregled);

    }
    
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const{
</font><a name="1"></a><font color="#00FF00"><a href="match167-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

        try{
          return count_if(lista.begin(), lista.end(), [datum](shared_ptr&lt;Pregled&gt;p){
               auto t1=datum.Ocitaj();
               auto t2=p-&gt;DajDatumPregleda().Ocitaj();
               return (get&lt;0&gt;(t1)==get&lt;0&gt;(t2) &amp;&amp; get&lt;1&gt;(t1)==get&lt;1&gt;(t2) &amp;&amp; get&lt;2&gt;(t1)==get&lt;2&gt;(t2));
          });
          } catch(...) {throw domain_error("Nema registriranih pregleda");}

    }
    Pregled &amp;DajNajranijiPregled(){
        if (lista.size()==0) throw domain_error("Nema registriranih pregleda");
          return *(*(min_element(lista.begin(), lista.end(), [](shared_ptr&lt;Pregled&gt;p1, shared_ptr&lt;Pregled&gt;p2){return(DolaziPrije(*p1,*p2));})));
</font>
    }
    int DajBrojPregleda() const { return lista.size();}
    Pregled DajNajranijiPregled() const{
<a name="14"></a><font color="#FF00FF"><a href="match167-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        if (lista.size()==0) throw domain_error("Nema registriranih pregleda");
          return *(*(min_element(lista.begin(), lista.end(), [](shared_ptr&lt;Pregled&gt;p1, shared_ptr&lt;Pregled&gt;p2){return(DolaziPrije(*p1,*p2));})));
</font>
    }
    
    void ObrisiNajranijiPregled(){
        auto p=DajNajranijiPregled();
        Datum d=p.DajDatumPregleda();
        Vrijeme v=p.DajVrijemePregleda();
        for(int i=0; i&lt;lista.size(); i++){
            Datum d1=lista[i]-&gt;DajDatumPregleda();
            Vrijeme v1=lista[i]-&gt;DajVrijemePregleda();
            if(p.DajImePacijenta()==lista[i]-&gt;DajImePacijenta())
            if(get&lt;2&gt;(d.Ocitaj())==get&lt;2&gt;(d1.Ocitaj()) &amp;&amp; get&lt;1&gt;(d.Ocitaj())==get&lt;1&gt;(d1.Ocitaj()) &amp;&amp; get&lt;0&gt;(d.Ocitaj())==get&lt;0&gt;(d1.Ocitaj()) &amp;&amp; v.Ocitaj().first==v1.Ocitaj().first &amp;&amp; v.Ocitaj().second==v1.Ocitaj().second) 
            {
<a name="15"></a><font color="#FF0000"><a href="match167-0.html#15" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                lista[i]=nullptr;
                for(int j=i; j&lt;lista.size()-1; j++) lista[j]=lista[j+1];
                lista.resize(lista.size()-1);
</font>                break;
            }
            
        }
    }
<a name="18"></a><font color="#00FFFF"><a href="match167-0.html#18" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    void IsprazniKolekciju(){
        if(lista.size()==0) throw domain_error("Nema registriranih pregleda");
          for(int i=0; i&lt;lista.size(); i++) lista[i]=nullptr;
</font>

    }
<a name="3"></a><font color="#00FFFF"><a href="match167-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
        int br=0;
          for(int i=0; i&lt;lista.size(); i++)
               if(lista[i]-&gt;DajImePacijenta()==ime_pacijenta){
                    br++;
                    lista[i]=nullptr;
                    for(int j=i; j&lt;lista.size()-1; j++) lista[j]=lista[j+1];
                    lista.resize(lista.size()-1);
                    i--;
               }
          if(br!=0) cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;br&lt;&lt;" pregleda";
</font>          cout&lt;&lt;endl;

    }
    void IspisiPregledeNaDatum(const Datum &amp;datum) const{
        vector&lt;shared_ptr&lt;Pregled&gt;&gt;drugi;
          
<a name="5"></a><font color="#FF0000"><a href="match167-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

          auto t1=datum.Ocitaj();
          for(int i=0; i&lt;lista.size(); i++)
          {
               auto t2=lista[i]-&gt;DajDatumPregleda().Ocitaj();
                if(get&lt;0&gt;(t1)==get&lt;0&gt;(t2) &amp;&amp; get&lt;1&gt;(t1)==get&lt;1&gt;(t2) &amp;&amp; get&lt;2&gt;(t1)==get&lt;2&gt;(t2))
                 {
                    drugi.push_back(make_shared&lt;Pregled&gt;(*lista[i]));
</font>                    
                 }
          }
          for(int i=0; i&lt;DajBrojPregledaNaDatum(datum);i++)
               for(int j=i; j&lt;DajBrojPregledaNaDatum(datum);j++)
                   {
<a name="4"></a><font color="#FF00FF"><a href="match167-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

                    if(!DolaziPrije( *drugi[i],*drugi[j]))
                     {
                         auto pom1 = drugi[i];
                         drugi[i] = drugi[j];
                         drugi[j] = pom1;
                    }
               }

            for(int i=0; i&lt;DajBrojPregledaNaDatum(datum); i++)
                drugi[i]-&gt;Ispisi();

          for(int i=0; i&lt;DajBrojPregledaNaDatum(datum); i++)
              drugi[i]=nullptr;

    }
    void IspisiSvePreglede() const{
</font><a name="10"></a><font color="#FF0000"><a href="match167-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

          vector&lt;shared_ptr&lt;Pregled&gt;&gt;drugi; drugi.resize(lista.size());
          for(int i=0; i&lt;lista.size(); i++) drugi[i]=lista[i];
          for(int i=0; i&lt;lista.size(); i++)
               for(int j=i; j&lt;lista.size(); j++)
</font>               {
<a name="11"></a><font color="#00FF00"><a href="match167-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                    if(!DolaziPrije(*drugi[i],*drugi[j]))
                    {
                         auto pom1 = drugi[i];
                         drugi[i] = drugi[j];
                         drugi[j] = pom1;
                    }
               }
          for(int i=0; i&lt;lista.size(); i++)
            drugi[i]-&gt;Ispisi();
</font>
       for(int i=0; i&lt;lista.size(); i++) drugi[i]=nullptr;

    }

    
};

void petlja(Pregledi &amp;p){
    int n;
    try{
     for(;;){
<a name="6"></a><font color="#00FF00"><a href="match167-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

          cout&lt;&lt;endl;
          cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;endl;
          cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;endl;
          cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;endl;
          cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;endl;
          cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;endl;
          cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;endl;
          cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;endl;
          cout&lt;&lt;"7 - Kraj programa"&lt;&lt;endl;
          cin&gt;&gt;n;
</font>          switch(n) {
          case 1: {
<a name="7"></a><font color="#0000FF"><a href="match167-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

               cout&lt;&lt;"Unesite dan mjesec i godinu : "; int d,m,g; cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
               Datum dat=Datum(d,m,g);
               cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;p.DajBrojPregledaNaDatum(dat)&lt;&lt;endl;
</font>               break;
          }
          case 2:{
               cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;endl;
               p.DajNajranijiPregled().Ispisi(); break;
          }
          case 3: {
               string drugi;
               cout&lt;&lt;"Unesite ime pacijenta: ";
               cin&gt;&gt;drugi;
               p.ObrisiPregledePacijenta(drugi);
               break;
          }
          case 4:
               p.ObrisiNajranijiPregled(); cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;endl; break;
    
          case 5: {
<a name="9"></a><font color="#FF00FF"><a href="match167-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

               cout&lt;&lt;"Unesite dan mjesec i godinu : ";
               int d,m,g; cin&gt;&gt;d&gt;&gt;m&gt;&gt;g; Datum dat=Datum(d,m,g);
               cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su: "&lt;&lt;endl;
               p.IspisiPregledeNaDatum(dat); break;
</font>          }
          case 6: {
               p.IspisiSvePreglede(); break;
          }
          case 7: {
               return;
          }
          }
     }
     } catch(domain_error d) { throw d;}
     catch(range_error r) { throw r; } 
}

void pac(Pregledi &amp;p){
    for(;;){
<a name="8"></a><font color="#00FFFF"><a href="match167-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

          cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
          string s; 
          cin&gt;&gt;s;
          if(s=="kraj") break;
          cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
          int d,m,god; 
          cin&gt;&gt;d&gt;&gt;m&gt;&gt;god;
          cout&lt;&lt;"Unesite sate i minute pregleda: ";
          int sek,min; 
          cin&gt;&gt;sek&gt;&gt;min;
          p.RegistrirajPregled(s,d,m,god,sek,min);
</font>          //cout&lt;&lt;"ADSdADSD"&lt;&lt;endl;
     }
}

int main ()
{
 
     Pregledi p;
     pac(p);
     cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;endl;
     p.IspisiSvePreglede();
     try{
         petlja(p);
     }catch(domain_error d) { cout&lt;&lt;d.what();}
     catch(range_error r) { cout&lt;&lt;r.what(); } 
  

	return 0;
}
</pre>
</body>
</html>
