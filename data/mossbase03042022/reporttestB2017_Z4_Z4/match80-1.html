<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student6216.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student7771.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match80-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;utility&gt;
using namespace std;
class Datum{
    public:
  int dan, mjesec, godina;
  int nizz[12]{31,28,31,30,31,30,31,31,30,31,30,31};

    Datum(int dan=1, int mjesec=1, int godina=2000) {
        if(dan&gt;31 || dan&lt;=0 || mjesec&gt;12 || mjesec&lt;=0 || godina&lt;0) throw domain_error("Neispravan datum");
        if(dan&gt;nizz[mjesec-1]) throw domain_error("Neispravan datum");
        Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
    };
    void Postavi(int dan, int mjesec, int godina){
        if(dan&gt;31 || dan&lt;=0 || mjesec&gt;12 || mjesec&lt;=0 || godina&lt;0) throw domain_error("Neispravan datum");
        Datum::dan = dan; Datum::mjesec = mjesec; Datum::godina = godina;
    }
    tuple&lt;int, int, int&gt; Ocitaj() const{
        return tuple&lt;int, int, int&gt;(dan, mjesec, godina);
    }
   
    void Ispisi() const{
        cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }
   
};

class Vrijeme{
public:
    int sati, minute;
    Vrijeme(int sati=1, int minute=0){
        if(sati&gt;23 || sati&lt;0 || minute&gt;59 || minute&lt;0) throw domain_error("Neispravno vrijeme");
        Vrijeme::sati = sati; Vrijeme::minute = minute;
    }
        
    void Postavi(int sati, int minute){
        if(sati&gt;23 || sati&lt;0 || minute&gt;59 || minute&lt;0) throw domain_error("Neispravno vrijeme");
        Vrijeme::sati = sati; Vrijeme::minute = minute;
    }
    pair&lt;int, int&gt; Ocitaj() const{
        return pair&lt;int, int&gt;(sati, minute);
    }
    int DajSate() const{ return sati; }
    int DajMinute() const{ return minute; }
    void Ispisi() const{
        if(sati &lt;10){
        cout &lt;&lt;"0"&lt;&lt; sati &lt;&lt; ":";
        if(minute&lt;10) cout &lt;&lt; "0"&lt;&lt;minute;
        else cout &lt;&lt; minute;
        } else if(minute &lt;10){
            cout &lt;&lt; sati &lt;&lt; ":0" &lt;&lt;minute; 
        } else cout &lt;&lt; sati &lt;&lt;":"&lt;&lt;minute;
    }
    friend class Pregled;
};

class Pregled{
    string ime_prezime;
    Datum d;
    Vrijeme v;
public:
    Pregled(const string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda): ime_prezime(ime_pacijenta), d(datum_pregleda),
    v(vrijeme_pregleda){
      //  ime_prezime = ime_pacijenta; d.dan = datum_pregleda.dan; d.mjesec = datum_pregleda.mjesec; d.godina = datum_pregleda.godina;
      //  v.sati = vrijeme_pregleda.sati;  v.minute = vrijeme_pregleda.minute;
    }
    Pregled(const string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda,
    int sati_pregleda, int minute_pregleda): ime_prezime(ime_pacijenta), d(dan_pregleda, mjesec_pregleda, godina_pregleda), v(sati_pregleda, minute_pregleda) {
      //  ime_prezime = ime_pacijenta; Pregled::d=Datum(dan_pregleda, mjesec_pregleda, godina_pregleda);
     //   Pregled::v=Vrijeme(sati_pregleda, minute_pregleda);
    }
    void PromijeniPacijenta(const string &amp;ime_pacijenta){
        ime_prezime = ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum){
        Pregled::d.dan = novi_datum.dan; Pregled::d.mjesec = novi_datum.mjesec; Pregled::d.godina = novi_datum.godina;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
        Pregled::v.sati = novo_vrijeme.sati; Pregled::v.minute = novo_vrijeme.minute;
    }
    void PomjeriDanUnaprijed(){
       if(d.godina % 4 == 0 &amp;&amp; d.godina%100 != 0 &amp;&amp; d.godina%400 == 0 &amp;&amp; d.mjesec==2){
            if(d.dan==28) d.dan++;
            if(d.dan==29) {
                d.dan = 1; d.mjesec = 3;
            }
            
        } else if(d.mjesec == 2 &amp;&amp; d.dan == 28){
            d.dan = 1; d.mjesec = 3;
        } else if(d.mjesec == 12 &amp;&amp; d.dan == 31){
            d.dan = 1; d.mjesec = 1; d.godina++;
        } else if(d.dan == d.nizz[d.mjesec-1]){
            d.dan == 1; d.mjesec++;
        } else 
        if(d.dan&lt;31 &amp;&amp; d.dan&gt;0)
        d.dan++;
    }
    void PomjeriDanUnazad(){
        if((d.godina % 4 == 0 &amp;&amp; d.godina%100 != 0 &amp;&amp; d.godina%400 == 0) &amp;&amp; d.mjesec == 3){
            d.dan = 29;
            d.mjesec--;
        } else if(d.mjesec == 3){
            d.dan = 28;
            d.mjesec--;
        }else
        if(d.dan == 1 &amp;&amp; d.mjesec != 1){
            d.dan == d.nizz[d.mjesec-2];
            d.mjesec--;
        } else if(d.dan == 1 &amp;&amp; d.mjesec ==1){
            d.dan = 31;
            d.mjesec = 12;
            d.godina--;
        } else
        if(d.dan&lt;=31 &amp;&amp; d.dan&gt;1)
        d.dan--;
    }
    string DajImePacijenta() const {
        return ime_prezime;
    }
    Datum DajDatumPregleda() const{
        return d;
    }
    Vrijeme DajVrijemePregleda() const{
        return v;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
       if(p1.DajDatumPregleda().godina &lt; p2.DajDatumPregleda().godina) return true; else
        if(p1.DajDatumPregleda().godina &gt; p2.DajDatumPregleda().godina) return false; else    
            if(p1.DajDatumPregleda().godina ==  p2.DajDatumPregleda().godina &amp;&amp; p1.DajDatumPregleda().mjesec &lt; p2.DajDatumPregleda().mjesec) return true; else
            if(p1.DajDatumPregleda().mjesec &gt; p2.DajDatumPregleda().mjesec) return false; else
                if(p1.DajDatumPregleda().mjesec == p2.DajDatumPregleda().mjesec &amp;&amp; p1.DajDatumPregleda().dan &lt; p2.DajDatumPregleda().dan) return true; else
                if(p1.DajDatumPregleda().dan &gt; p2.DajDatumPregleda().dan) return false; else
                    if(p1.DajDatumPregleda().dan == p2.DajDatumPregleda().dan &amp;&amp; p1.DajVrijemePregleda().sati &lt; p2.DajVrijemePregleda().sati) return true; else
                    if(p1.DajVrijemePregleda().sati &gt; p2.DajVrijemePregleda().sati) return false; else
                        if(p1.v.sati == p2.v.sati &amp;&amp;p1.v.minute &lt; p2.v.minute) return true;
                        return false;
                            
    }
    void Ispisi() const{
        cout &lt;&lt; left &lt;&lt; setw(30) &lt;&lt; ime_prezime;
        d.Ispisi(); cout &lt;&lt; " " ;
        v.Ispisi(); cout &lt;&lt; endl; 
    }
    friend class Pregledi;
    
};

class Pregledi{
    vector&lt;shared_ptr&lt;Pregled&gt;&gt; niz;
public:
int brojacizb=0; 
   explicit Pregledi(){ }
   Pregledi(initializer_list&lt;Pregled&gt;spisak_pregleda){
      niz.resize(spisak_pregleda.size());
       for(auto iterator = spisak_pregleda.begin(); iterator != spisak_pregleda.end(); ++iterator){
           niz[niz.size()] = make_shared&lt;Pregled&gt;(iterator-&gt;DajImePacijenta(), iterator-&gt;DajDatumPregleda(), iterator-&gt;DajVrijemePregleda());
          }
      
   }
   ~Pregledi(){}
  
   Pregledi(const Pregledi &amp;pregledi){
       niz.resize(pregledi.niz.size());
       for(int i=0; i&lt; pregledi.niz.size(); i++)
           niz[i] = make_shared&lt;Pregled&gt;(*(pregledi.niz[i]));
       }
    Pregledi(Pregledi &amp;&amp;pregledi){
        niz.resize(pregledi.niz.size());
        for(int i=0; i&lt;pregledi.niz.size(); i++)
            niz[i] = make_shared&lt;Pregled&gt;(*(pregledi.niz[i])); 
             pregledi.niz.resize(0);
    }
    Pregledi &amp;operator =(const Pregledi &amp;pregledi){
        niz = pregledi.niz;
        return *this;
    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi){
        niz = pregledi.niz;
        pregledi.niz.resize(0);
        return *this;
    } 
    void RegistrirajPregled(const string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
        niz.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
        } 
         
    
    void RegistrirajPregled(const string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda,
    int sati_pregleda, int minute_pregleda){
        niz.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
        }
        
          
    void RegistrirajPregled(shared_ptr&lt;Pregled&gt; pregled){
        niz.push_back(make_shared&lt;Pregled&gt;(*(pregled)));
        } 
        
    
    int DajBrojPregleda() const{ return niz.size(); }
    int DajBrojPregledaNaDatum(const Datum &amp;datum){
        return count_if(niz.begin(),niz.end(),[&amp;datum](shared_ptr&lt;Pregled&gt; p) {
            if (datum.dan == p-&gt;DajDatumPregleda().dan &amp;&amp; datum.mjesec == p-&gt;DajDatumPregleda().mjesec &amp;&amp; datum.godina == p-&gt;DajDatumPregleda().godina) return true; return false;
        });
    }
    Pregled &amp;DajNajranijiPregled(){
       return  **min_element(niz.begin(), niz.end() , [](shared_ptr&lt;Pregled&gt; p1, shared_ptr&lt;Pregled&gt; p2){
                if(p1-&gt;DajDatumPregleda().godina &lt; p2-&gt;DajDatumPregleda().godina) return true; else 
                if(p1-&gt;DajDatumPregleda().godina &gt; p2-&gt;DajDatumPregleda().godina) return false; else
                if(p1-&gt;DajDatumPregleda().godina ==  p2-&gt;DajDatumPregleda().godina &amp;&amp; p1-&gt;DajDatumPregleda().mjesec &lt; p2-&gt;DajDatumPregleda().mjesec) return true; else 
                if( p1-&gt;DajDatumPregleda().mjesec &gt; p2-&gt;DajDatumPregleda().mjesec) return false; else
                if(p1-&gt;DajDatumPregleda().mjesec ==  p2-&gt;DajDatumPregleda().mjesec &amp;&amp; p1-&gt;DajDatumPregleda().dan &lt; p2-&gt;DajDatumPregleda().dan) return true; else
                if(p1-&gt;DajDatumPregleda().dan &gt; p2-&gt;DajDatumPregleda().dan) return false; else
                if(p1-&gt;DajDatumPregleda().dan == p2-&gt;DajDatumPregleda().dan &amp;&amp; p1-&gt;DajVrijemePregleda().sati &lt; p2-&gt;DajVrijemePregleda().sati) return true; else
                if(p1-&gt;DajVrijemePregleda().sati &gt; p2-&gt;DajVrijemePregleda().sati) return false;
                if(p1-&gt;DajVrijemePregleda().sati == p2-&gt;DajVrijemePregleda().sati &amp;&amp; p1-&gt;DajVrijemePregleda().minute &lt; p2-&gt;DajVrijemePregleda().minute) return true; else
                if(p1-&gt;DajVrijemePregleda().minute &gt; p2-&gt;DajVrijemePregleda().minute) return false; else
                if(p1-&gt;DajVrijemePregleda().minute == p2-&gt;DajVrijemePregleda().minute) return true; return false;
            }) ; 
    }
   /* void IsprazniKolekciju(){
        for(int i=0; i&lt;broj_pregleda; i++){
        delete niz[i];    
        }delete[] niz; //niz = nullptr;    
        broj_pregleda = 0;
    }*/
    void ObrisiNajranijiPregled(){
        auto p = make_shared&lt;Pregled&gt;(DajNajranijiPregled());
        for(int i=0; i&lt;niz.size(); i++){
            if(niz[i]-&gt;DajDatumPregleda().godina == p-&gt;DajDatumPregleda().godina &amp;&amp;
            niz[i]-&gt;DajDatumPregleda().mjesec == p-&gt;DajDatumPregleda().mjesec &amp;&amp;
            niz[i]-&gt;DajDatumPregleda().dan == p-&gt;DajDatumPregleda().dan)
            {
            niz.erase(niz.begin()+i);
            }
           
        }
        

    }
    void ObrisiPregledePacijenta(const string &amp;ime_pacijenta){
        int brojac(0);
        for(int i=0; i&lt;niz.size() ; i++){
            if(niz[i]-&gt;DajImePacijenta() == ime_pacijenta){
                
                niz.erase(niz.begin()+i);
                i--;
                brojac++;
                brojacizb++;
            }
        }
      
        
    }
    void IspisiPregledeNaDatum(const Datum &amp;d){
        vector&lt;shared_ptr&lt;Pregled&gt;&gt; p;
        //Pregled **p(new Pregled*[broj_pregleda]);
        
       for(int i=0; i&lt;niz.size(); i++){
           if(d.dan == niz[i]-&gt;DajDatumPregleda().dan &amp;&amp; d.mjesec == niz[i]-&gt;DajDatumPregleda().mjesec &amp;&amp; d.godina == niz[i]-&gt;DajDatumPregleda().godina)
           {                
            p.push_back(make_shared&lt;Pregled&gt;(niz[i]-&gt;DajImePacijenta(), niz[i]-&gt;DajDatumPregleda(), niz[i]-&gt;DajVrijemePregleda()));
            
           }
       }
       
       sort(p.begin(), p.end(), [](shared_ptr&lt;Pregled&gt; p1, shared_ptr&lt;Pregled&gt; p2){
          if(p1-&gt;DajVrijemePregleda().sati &lt; p2-&gt;DajVrijemePregleda().sati) return true; else
          if(p1-&gt;DajVrijemePregleda().sati &gt; p2-&gt;DajVrijemePregleda().sati) return false; else
          if(p1-&gt;DajVrijemePregleda().sati == p2-&gt;DajVrijemePregleda().sati &amp;&amp; p1-&gt;DajVrijemePregleda().minute &lt; p2-&gt;DajVrijemePregleda().minute) return true; else
          if(p1-&gt;DajVrijemePregleda().minute == p2-&gt;DajVrijemePregleda().minute) return true; return false;
       });
      // cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi \n";
       for(int i=0; i&lt;p.size(); i++){ 
           p[i]-&gt;Ispisi();
       }
       
      
    }
    void IspisiSvePreglede(){
        sort(niz.begin(), niz.end() , [](shared_ptr&lt;Pregled&gt; p1, shared_ptr&lt;Pregled&gt; p2){
            if(p1-&gt;DajDatumPregleda().godina &lt; p2-&gt;DajDatumPregleda().godina) return true; else
            if(p1-&gt;DajDatumPregleda().godina &gt; p2-&gt;DajDatumPregleda().godina) return false; else 
            if(p1-&gt;DajDatumPregleda().godina == p2-&gt;DajDatumPregleda().godina &amp;&amp; p1-&gt;DajDatumPregleda().mjesec &lt; p2-&gt;DajDatumPregleda().mjesec) return true; else
            if(p1-&gt;DajDatumPregleda().mjesec &gt; p2-&gt;DajDatumPregleda().mjesec ) return false; else
            if(p1-&gt;DajDatumPregleda().mjesec == p2-&gt;DajDatumPregleda().mjesec &amp;&amp; p1-&gt;DajDatumPregleda().dan &lt; p2-&gt;DajDatumPregleda().dan) return true; else
            if(p1-&gt;DajDatumPregleda().dan &gt; p2-&gt;DajDatumPregleda().dan) return false; else
            if(p1-&gt;DajDatumPregleda().dan == p2-&gt;DajDatumPregleda().dan &amp;&amp; p1-&gt;DajVrijemePregleda().sati &lt; p2-&gt;DajVrijemePregleda().sati) return true; else
            if(p1-&gt;DajVrijemePregleda().sati &gt; p2-&gt;DajVrijemePregleda().sati) return false; else
            if(p1-&gt;DajVrijemePregleda().sati == p2-&gt;DajVrijemePregleda().sati &amp;&amp; p1-&gt;DajVrijemePregleda().minute &lt; p2-&gt;DajVrijemePregleda().minute) return true; else
            if(p1-&gt;DajVrijemePregleda().minute &gt; p2-&gt;DajVrijemePregleda().minute) return false; return false;
            
        });
      //  cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi \n";
        for(int i=0;i&lt;niz.size(); i++){
            niz[i]-&gt;Ispisi();
        }
    }
    
};

int main ()
{   
    int i = 0;
    
    
    
   
    
    Pregledi pregledi;
   
    string ime_pacijenta;
    
    

    for(;;){
    cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
    
    cin &gt;&gt; ime_pacijenta;
    if(ime_pacijenta == "kraj") {
    cin.clear();
    cin.ignore(10000,'\n');
    break;}
    
    cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: ";
    int dan, mjesec, godina;
    cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
    
    cout &lt;&lt; "Unesite sate i minute pregleda: ";
    int sati, minute;
    cin &gt;&gt; sati &gt;&gt; minute;

 //   Pregled p1(ime_pacijenta, dan, mjesec, godina, sati, minute); 
    pregledi.RegistrirajPregled(ime_pacijenta, dan, mjesec, godina, sati, minute);
    i++;
    }
    cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi\n";
    pregledi.IspisiSvePreglede();
    int n; 
   

    
    for(;;){
    cout &lt;&lt; "\nOdaberite jednu od sljedecih opcija\n";
    cout &lt;&lt; "1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta\n";
    cout &lt;&lt; "4 - Obrisi najraniji pregled\n5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa\n";
    
    
    cin &gt;&gt; n;
    if(n==1){
        cout &lt;&lt; "Unesite dan mjesec i godinu : ";
        int a,b,c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        
        cout &lt;&lt; "Broj pregleda na datum " &lt;&lt; a &lt;&lt; " " &lt;&lt;b&lt;&lt; " "&lt;&lt;c &lt;&lt; " je: " &lt;&lt; pregledi.DajBrojPregledaNaDatum(Datum(a,b,c)) &lt;&lt; endl;
       
        
    }
    else if(n==2){
        cout &lt;&lt; "Najraniji pregled je:\n";
        pregledi.DajNajranijiPregled().Ispisi();
    }
    else if(n==3){
        cout &lt;&lt; "Unesite ime pacijenta: ";
        string ime_pac;
        cin &gt;&gt; ime_pac;
        pregledi.ObrisiPregledePacijenta(ime_pac);
        cout &lt;&lt; "Uspjesno obrisano " &lt;&lt; pregledi.brojacizb &lt;&lt; " pregleda";
        
        
    }
    else if(n==4){
        pregledi.ObrisiNajranijiPregled();
        cout &lt;&lt; "Najraniji pregled uspjesno obrisan\n";
    
       
    }
    else if(n==5){
        cout &lt;&lt; "Unesite dan mjesec i godinu : ";
        int a,b,c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        cout &lt;&lt; "Pregledi na datum "&lt;&lt;a&lt;&lt;" " &lt;&lt;b&lt;&lt;" "&lt;&lt;c &lt;&lt; " su:\n";
        pregledi.IspisiPregledeNaDatum(Datum(a,b,c));
        cout &lt;&lt; endl;
    }
    else if(n==6){
        
        pregledi.IspisiSvePreglede();
        cout &lt;&lt; endl;
    }
    else if(n==7){ 
        break;
    }
           
    }
    
   
    
  
	return 0;
</font>}
</pre>
</body>
</html>
