<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student7196.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student7196.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;iterator&gt;

class Datum {
    int dan, mjesec, godina;
    static int BrojDana(int mjesec, int godina);
public:
    Datum(int dan, int mjesec, int godina) {
        Postavi(dan, mjesec, godina);
    }
    void Postavi(int dan, int mjesec, int godina);
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        return std::make_tuple(dan, mjesec, godina);
    }
    void Ispisi() const {
        std::cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }
};

int Datum::BrojDana(int mjesec, int godina) {
    int broj_dana_u_mjesecu[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
    if (godina%4==0 &amp;&amp; godina%100!=0 || godina%400==0) broj_dana_u_mjesecu[1]=29;
    return broj_dana_u_mjesecu[mjesec-1];
}

void Datum::Postavi(int dan, int mjesec, int godina) {
    if (godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;BrojDana(mjesec, godina)) {
        throw std::domain_error("Neispravan datum");
    }
    Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
}


class Vrijeme {
    int sati, minute;
public:
    Vrijeme(int sati, int minute) {
        Postavi(sati, minute);
    }
    void Postavi(int sati, int minute);
    std::pair&lt;int, int&gt; Ocitaj() const {
        return std::make_pair(sati, minute);
    }
    void Ispisi() const {
        std::cout &lt;&lt; std::right &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; sati &lt;&lt; ":"
        &lt;&lt; std::right &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; minute;
    }
};

void Vrijeme::Postavi(int sati, int minute) {
    if (sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
    Vrijeme::sati=sati; Vrijeme::minute=minute;
}


class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
<a name="10"></a><font color="#FF0000"><a href="match677-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

    static int BrojDanaUMjesecu(int mjesec, int godina);
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, 
     const Vrijeme &amp;vrijeme_pregleda);
</font>    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, 
    int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        Pregled::datum_pregleda=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
<a name="8"></a><font color="#00FFFF"><a href="match677-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

        Pregled::vrijeme_pregleda=novo_vrijeme;
    }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    std::string DajImePacijenta() const {
        return ime_pacijenta;
    }
    Datum DajDatumPregleda() const {
        return datum_pregleda;
    }
    Vrijeme DajVrijemePregleda() const {
        return vrijeme_pregleda;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);
</font>    void Ispisi() const;
};

Pregled::Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : 
ime_pacijenta(ime_pacijenta), 
datum_pregleda(datum_pregleda), 
vrijeme_pregleda(vrijeme_pregleda) {}

Pregled::Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, 
 int godina_pregleda, int sati_pregleda, int minute_pregleda) : 
ime_pacijenta(ime_pacijenta), 
datum_pregleda(dan_pregleda, mjesec_pregleda, godina_pregleda), 
vrijeme_pregleda(sati_pregleda, minute_pregleda) {}

void Pregled::Ispisi() const {
    std::cout &lt;&lt; std::left &lt;&lt; std::setw(30) &lt;&lt; std::setfill(' ') &lt;&lt; ime_pacijenta;
<a name="5"></a><font color="#FF0000"><a href="match677-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    datum_pregleda.Ispisi();
    std::cout &lt;&lt; " ";
    vrijeme_pregleda.Ispisi();
    std::cout &lt;&lt; std::endl;
}

int Pregled::BrojDanaUMjesecu(int mjesec, int godina) {
    int broj_dana_u_mjesecu[12]{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if (godina%4==0 &amp;&amp; godina%100!=0 || godina%400==0) broj_dana_u_mjesecu[1]=29;
    return broj_dana_u_mjesecu[mjesec-1];
}

void Pregled::PomjeriDanUnazad() {
    int dan(std::get&lt;0&gt;(datum_pregleda.Ocitaj()));
    int mjesec(std::get&lt;1&gt;(datum_pregleda.Ocitaj()));
<a name="6"></a><font color="#00FF00"><a href="match677-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    int godina(std::get&lt;2&gt;(datum_pregleda.Ocitaj()));
    dan--;
    if (dan&lt;1) {
        mjesec--;
        if (mjesec&lt;1) {
            mjesec=12;
            godina--;
        }
        dan=BrojDanaUMjesecu(mjesec, godina);
</font>    }
}

void Pregled::PomjeriDanUnaprijed() {
    int dan(std::get&lt;0&gt;(datum_pregleda.Ocitaj()));
    int mjesec(std::get&lt;1&gt;(datum_pregleda.Ocitaj()));
    int godina(std::get&lt;2&gt;(datum_pregleda.Ocitaj()));
    dan++;
    if (dan&gt;BrojDanaUMjesecu(mjesec, godina)) dan=1, mjesec++;
    if (mjesec&gt;12) mjesec=1, godina++;
}

bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
    return std::get&lt;2&gt;(p1.datum_pregleda.Ocitaj())&lt;std::get&lt;2&gt;(p2.datum_pregleda.Ocitaj()) 
<a name="4"></a><font color="#FF00FF"><a href="match677-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    || std::get&lt;2&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;2&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;1&gt;(p1.datum_pregleda.Ocitaj())&lt;std::get&lt;1&gt;(p2.datum_pregleda.Ocitaj()) 
</font><a name="2"></a><font color="#0000FF"><a href="match677-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    || std::get&lt;2&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;2&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;1&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;1&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;0&gt;(p1.datum_pregleda.Ocitaj())&lt;std::get&lt;0&gt;(p2.datum_pregleda.Ocitaj()) 
</font><a name="0"></a><font color="#FF0000"><a href="match677-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    || std::get&lt;2&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;2&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;1&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;1&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;0&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;0&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; p1.vrijeme_pregleda.Ocitaj().first&lt;p2.vrijeme_pregleda.Ocitaj().first 
</font><a name="1"></a><font color="#00FF00"><a href="match677-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    || std::get&lt;2&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;2&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;1&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;1&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; std::get&lt;0&gt;(p1.datum_pregleda.Ocitaj())==std::get&lt;0&gt;(p2.datum_pregleda.Ocitaj()) 
    &amp;&amp; p1.vrijeme_pregleda.Ocitaj().first==p2.vrijeme_pregleda.Ocitaj().first 
</font>    &amp;&amp; p1.vrijeme_pregleda.Ocitaj().second&lt;p2.vrijeme_pregleda.Ocitaj().second;
}


class Pregledi {
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; p_pregledi;
public:
    explicit Pregledi()=default;
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    ~Pregledi()=default;
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi)=default;
    Pregledi &amp;operator =(const Pregledi &amp;pregledi);
    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi)=default;
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, 
     const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, 
     int mjesec_pregleda, int godina_pregleda, int sati_pregleda, 
     int minute_pregleda);
    void RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled);
    int DajBrojPregleda() const {
        return p_pregledi.size();
    }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
    void IsprazniKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;
    void IspisiSvePreglede() const;
};

void Pregledi::IsprazniKolekciju() {
    p_pregledi.resize(0);
}

Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) {
    for (std::initializer_list&lt;Pregled&gt;::iterator iter=spisak_pregleda.begin(); iter!=spisak_pregleda.end(); iter++) {
        p_pregledi.push_back(std::make_shared&lt;Pregled&gt;(*iter));
    }
}

Pregledi::Pregledi(const Pregledi &amp;pregledi) {
    for (auto iter=pregledi.p_pregledi.begin(); iter!=pregledi.p_pregledi.end(); iter++) {
        p_pregledi.push_back(std::make_shared&lt;Pregled&gt;(**iter));
    }
}

Pregled &amp;Pregledi::DajNajranijiPregled() {
    if (p_pregledi.size()==0) throw std::domain_error("Nema registriranih pregleda");
    return **std::min_element(p_pregledi.begin(), p_pregledi.end(), [](std::shared_ptr&lt;Pregled&gt; prvi, std::shared_ptr&lt;Pregled&gt; drugi) {
        return Pregled::DolaziPrije(*prvi, *drugi);
    });
}

Pregled Pregledi::DajNajranijiPregled() const {
    if (p_pregledi.size()==0) throw std::domain_error("Nema registriranih pregleda");
    return **std::min_element(p_pregledi.begin(), p_pregledi.end(), [](std::shared_ptr&lt;Pregled&gt; prvi, std::shared_ptr&lt;Pregled&gt; drugi) {
        return Pregled::DolaziPrije(*prvi, *drugi);
    });
}

Pregledi &amp;Pregledi::operator =(const Pregledi &amp;pregledi) {
    p_pregledi.resize(0);
    for (auto iter=pregledi.p_pregledi.begin(); iter!=pregledi.p_pregledi.end(); iter++) {
        p_pregledi.push_back(std::make_shared&lt;Pregled&gt;(**iter));
    }
    return *this;
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, 
const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
    p_pregledi.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, datum_pregleda, vrijeme_pregleda));
}

void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, 
int dan_pregleda, int mjesec_pregleda, int godina_pregleda, 
int sati_pregleda, int minute_pregleda) {
    p_pregledi.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, 
     sati_pregleda, minute_pregleda));
}

void Pregledi::RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled) {
    p_pregledi.push_back(pregled);
}

int Pregledi::DajBrojPregledaNaDatum(const Datum &amp;datum) const {
    return std::count_if(p_pregledi.begin(), p_pregledi.end(), [datum](std::shared_ptr&lt;Pregled&gt; pregled) {
        return (pregled-&gt;DajDatumPregleda()).Ocitaj()==datum.Ocitaj();
    });
}

void Pregledi::ObrisiNajranijiPregled() {
    if (p_pregledi.size()==0) throw std::range_error("Prazna kolekcija");
    std::tuple&lt;int, int, int&gt; datum_najranijeg((DajNajranijiPregled().DajDatumPregleda()).Ocitaj());
    std::pair&lt;int, int&gt; vrijeme_najranijeg((DajNajranijiPregled().DajVrijemePregleda()).Ocitaj());
    for (auto iter=p_pregledi.begin(); iter!=p_pregledi.end(); iter++) {
        if (((*iter)-&gt;DajDatumPregleda()).Ocitaj()==datum_najranijeg &amp;&amp; 
        ((*iter)-&gt;DajVrijemePregleda()).Ocitaj()==vrijeme_najranijeg) {
            p_pregledi.erase(iter);
            break;
        }
    }
}

void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
    for (auto iter=p_pregledi.begin(); iter!=p_pregledi.end(); iter++) {
        if ((*iter)-&gt;DajImePacijenta()==ime_pacijenta) {
            iter=p_pregledi.erase(iter);
            iter--;
        }
    }
}

void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const {
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; vektor_pokazivaca;
    for (auto iter=p_pregledi.begin(); iter!=p_pregledi.end(); iter++) {
        if (((*iter)-&gt;DajDatumPregleda()).Ocitaj()==datum.Ocitaj()) vektor_pokazivaca.push_back(*iter);
    }
    std::sort(vektor_pokazivaca.begin(), vektor_pokazivaca.end(), [](std::shared_ptr&lt;Pregled&gt; prvi, std::shared_ptr&lt;Pregled&gt; drugi) {
        return Pregled::DolaziPrije(*prvi, *drugi);
    });
    for (auto iter=vektor_pokazivaca.begin(); iter!=vektor_pokazivaca.end(); iter++) {
        (*iter)-&gt;Ispisi();
    }
}

void Pregledi::IspisiSvePreglede() const {
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; vektor_pokazivaca;
    for (auto iter=p_pregledi.begin(); iter!=p_pregledi.end(); iter++) {
        vektor_pokazivaca.push_back(*iter);
    }
    std::sort(vektor_pokazivaca.begin(), vektor_pokazivaca.end(), [](std::shared_ptr&lt;Pregled&gt; prvi, std::shared_ptr&lt;Pregled&gt; drugi) {
        return Pregled::DolaziPrije(*prvi, *drugi);
    });
    for (auto iter=vektor_pokazivaca.begin(); iter!=vektor_pokazivaca.end(); iter++) {
        (*iter)-&gt;Ispisi();
    }
}


int main ()
{
    Pregledi pregledi;
    while (1) {
        try {
            std::string ime_pacijenta;
            std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
            std::getline(std::cin, ime_pacijenta);
            if (ime_pacijenta=="kraj") break;
            std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: ";
            int dan(0), mjesec(0), godina(0);
            std::cin &gt;&gt; dan &gt;&gt; mjesec &gt;&gt; godina;
            int sati(0), minute(0);
            std::cout &lt;&lt; "Unesite sate i minute pregleda: ";
            std::cin &gt;&gt; sati &gt;&gt; minute;
            std::cin.clear();
            std::cin.ignore(10000, '\n');
<a name="7"></a><font color="#0000FF"><a href="match677-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            pregledi.RegistrirajPregled(ime_pacijenta, dan, mjesec, godina, sati, minute);
        }
        catch(std::domain_error domain_greska) {
            std::cout &lt;&lt; domain_greska.what() &lt;&lt; std::endl;
</font>        }
        catch(std::range_error range_greska) {
            std::cout &lt;&lt; range_greska.what() &lt;&lt; std::endl;
        }
    }
    std::cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi" &lt;&lt; std::endl;
    pregledi.IspisiSvePreglede();
    int opcija(0);
    while (opcija!=7) {
        try {
            std::cout &lt;&lt; std::endl;
            std::cout &lt;&lt; "Odaberite jednu od sljedecih opcija" &lt;&lt; std::endl;
            std::cout &lt;&lt; "1 - Broj pregleda na datum" &lt;&lt; std::endl;
            std::cout &lt;&lt; "2 - Najraniji pregled" &lt;&lt; std::endl;
            std::cout &lt;&lt; "3 - Obrisi pregled pacijenta" &lt;&lt; std::endl;
            std::cout &lt;&lt; "4 - Obrisi najraniji pregled" &lt;&lt; std::endl;
            std::cout &lt;&lt; "5 - Ispisi sve pregleda na datum" &lt;&lt; std::endl;
            std::cout &lt;&lt; "6 - Ispisi sve preglede" &lt;&lt; std::endl;
            std::cout &lt;&lt; "7 - Kraj programa" &lt;&lt; std::endl;
            std::cin &gt;&gt; opcija;
            if (opcija==7) break;
            else if (opcija==1) {
                int uneseni_dan(0), uneseni_mjesec(0), unesena_godina(0);
                std::cout &lt;&lt; "Unesite dan mjesec i godinu : ";
                std::cin &gt;&gt; uneseni_dan &gt;&gt; uneseni_mjesec &gt;&gt; unesena_godina;
                std::cout &lt;&lt; "Broj pregleda na datum " &lt;&lt; uneseni_dan &lt;&lt; " " 
<a name="9"></a><font color="#FF00FF"><a href="match677-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

                &lt;&lt; uneseni_mjesec &lt;&lt; " " &lt;&lt; unesena_godina 
                &lt;&lt; " je: " &lt;&lt; pregledi.DajBrojPregledaNaDatum(Datum(uneseni_dan, uneseni_mjesec, unesena_godina));
                std::cout &lt;&lt; std::endl;
</font>            }
            else if (opcija==2) {
                std::cout &lt;&lt; "Najraniji pregled je:" &lt;&lt; std::endl;
                pregledi.DajNajranijiPregled().Ispisi();
            }
            else if (opcija==3) {
                std::string ime_p;
                std::cout &lt;&lt; "Unesite ime pacijenta: ";
                std::cin.clear();
                std::cin.ignore(10000, '\n');
                std::getline(std::cin, ime_p);
                int broj_trenutnih(pregledi.DajBrojPregleda());
                pregledi.ObrisiPregledePacijenta(ime_p);
                int broj_novih(pregledi.DajBrojPregleda());
                int broj_obrisanih(broj_trenutnih-broj_novih);
                std::cout &lt;&lt; "Uspjesno obrisano " &lt;&lt; broj_obrisanih &lt;&lt; " pregleda" &lt;&lt; std::endl;
            }
            else if (opcija==4) {
                pregledi.ObrisiNajranijiPregled();
                std::cout &lt;&lt; "Najraniji pregled uspjesno obrisan" &lt;&lt; std::endl;
            }
            else if (opcija==5) {
                int uneseni_dan(0), uneseni_mjesec(0), unesena_godina(0);
                std::cout &lt;&lt; "Unesite dan mjesec i godinu : ";
                std::cin &gt;&gt; uneseni_dan &gt;&gt; uneseni_mjesec &gt;&gt; unesena_godina;
<a name="3"></a><font color="#00FFFF"><a href="match677-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                std::cout &lt;&lt; "Pregledi na datum " &lt;&lt; uneseni_dan &lt;&lt; " " 
                &lt;&lt; uneseni_mjesec &lt;&lt; " " &lt;&lt; unesena_godina &lt;&lt; " su:" &lt;&lt; std::endl;
                pregledi.IspisiPregledeNaDatum(Datum(uneseni_dan, uneseni_mjesec, unesena_godina));
            }
            else if (opcija==6) {
                pregledi.IspisiSvePreglede();
</font>            }
        }
        catch(std::domain_error domain_greska) {
            std::cout &lt;&lt; domain_greska.what() &lt;&lt; std::endl;
        }
        catch(std::range_error range_greska) {
            std::cout &lt;&lt; range_greska.what() &lt;&lt; std::endl;
        }
    }
	return 0;
}
</pre>
</body>
</html>
