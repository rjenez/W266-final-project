<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student1793.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student1793.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 4
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;stdexcept&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
using namespace std;

class Datum
{
    int dan,mjesec,godina;

    static int BrojDana(int mjesec, int godina) {
        int broj_dana[] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if(godina % 4 == 0 &amp;&amp; godina % 100 != 0 || godina % 400 == 0)
            broj_dana[1]++;
        return broj_dana[mjesec - 1];
    }

    static bool IspravanDatum(int dan, int mjesec, int godina) {
        if (dan&lt;=0||dan&gt;BrojDana(mjesec,godina) || mjesec&lt;=0||mjesec&gt;12 || godina&lt;0)
            return false;

        return true;
    }

public:
    Datum(int dan, int mjesec, int godina) {
        Postavi(dan,mjesec,godina);
    }
    void Postavi(int dan, int mjesec, int godina) {
        if(!IspravanDatum(dan,mjesec,godina)) throw domain_error("Neispravan datum");
        this-&gt;dan = dan;
        this-&gt;mjesec = mjesec;
        this-&gt;godina = godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        return tuple&lt;int,int,int&gt;(dan,mjesec,godina);
    }
    void Ispisi() const {
        cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};



class Vrijeme
{
    int sati, minute;

    static bool IspravnoVrijeme(int sati, int minute) {
        if(sati&lt;0||sati&gt;23||minute&lt;0||minute&gt;59) return false;

        return true;

    }
public:
    Vrijeme(int sati, int minute) {
        Postavi(sati,minute);
    }
    void Postavi(int sati, int minute) {
        if(!IspravnoVrijeme(sati,minute)) {
            throw domain_error("Neispravno vrijeme");
        }
        this-&gt;sati = sati;
        this-&gt;minute = minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const {
        return make_pair(sati,minute);
    }
    void Ispisi() const {
        cout&lt;&lt; (sati&lt;10?"0":"")&lt;&lt;sati&lt;&lt;":"&lt;&lt; (minute&lt;10?"0":"")&lt;&lt;minute;
    }
};


class Pregled
{
    string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
public:
    Pregled(const string &amp;ime_pacijenta, const Datum&amp; datum_pregleda, const Vrijeme&amp; vrijeme_pregleda):
        datum_pregleda(datum_pregleda),vrijeme_pregleda(vrijeme_pregleda) {
        this-&gt;ime_pacijenta = ime_pacijenta;
    }
    Pregled(const string&amp; ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda):
        datum_pregleda(dan_pregleda,mjesec_pregleda,godina_pregleda),vrijeme_pregleda(sati_pregleda,minute_pregleda) {
        this-&gt;ime_pacijenta = ime_pacijenta;
    }
    void PromijeniPacijenta(const string&amp; ime_pacijenta) {
        this-&gt;ime_pacijenta = ime_pacijenta;
    }
    void PromijeniDatum(const Datum&amp;novi_datum) {
        this-&gt;datum_pregleda = novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme&amp; novo_vrijeme) {
        this-&gt;vrijeme_pregleda = novo_vrijeme;
    }
    string DajImePacijenta()const {
        return ime_pacijenta;
    }
    Datum DajDatumPregleda()const {
        return datum_pregleda;
    }
    Vrijeme DajVrijemePregleda()const {
        return vrijeme_pregleda;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled&amp;p2) {
        int dan1,mjesec1,godina1;
        tie(dan1,mjesec1,godina1) = p1.datum_pregleda.Ocitaj();
        int dan2,mjesec2,godina2;
        tie(dan2,mjesec2,godina2) = p2.datum_pregleda.Ocitaj();

        pair&lt;int,int&gt; v1 = p1.vrijeme_pregleda.Ocitaj();
<a name="3"></a><font color="#00FFFF"><a href="match742-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        pair&lt;int,int&gt; v2 = p1.vrijeme_pregleda.Ocitaj();

        if(godina1&lt;godina2)return true;
        else if(godina1==godina2) {
            if(mjesec1&lt;mjesec2)return true;
            else if(mjesec1==mjesec2) {
                if(dan1&lt;dan2)return true;
                else if(dan1==dan2) {
                    if(v1.first&lt;v2.first)return true;
</font>                    else if(v1.first==v2.first) {
                        if(v1.second == v2.second)return true;
                    }
                }
            }
        }

        return false;
    }
    void Ispisi()const {
        cout&lt;&lt;left&lt;&lt;setw(30)&lt;&lt;ime_pacijenta;
        datum_pregleda.Ispisi();
        cout&lt;&lt;" ";
        vrijeme_pregleda.Ispisi();
        cout&lt;&lt;endl;
    }
};

class Pregledi
{
    vector&lt;shared_ptr&lt;Pregled&gt;&gt;pregledi;
public:
    explicit Pregledi() {
    }
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) {
        for (auto it = spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) {
<a name="9"></a><font color="#FF00FF"><a href="match742-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            pregledi.push_back(make_shared&lt;Pregled&gt;(*it));
        }
    }
    ~Pregledi() {
        for (int i = 0; i &lt; pregledi.size(); i++) {
            pregledi[i]=nullptr;
        }
    }
    Pregledi(const Pregledi &amp;p) {
</font>
        for (int i = 0; i &lt; pregledi.size(); i++) {
            pregledi.push_back(make_shared&lt;Pregled&gt;(*p.pregledi[i]));
        }

    }
    Pregledi(Pregledi &amp;&amp;p) {
        pregledi = p.pregledi;
        p.pregledi.resize(0);
    }
<a name="7"></a><font color="#0000FF"><a href="match742-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Pregledi &amp;operator =(const Pregledi &amp;p) {
        if(this==&amp;p) return *this;
        for (int i = 0; i &lt; pregledi.size(); i++) {
            pregledi[i]=nullptr;
</font>        }
        for (int i = 0; i &lt; pregledi.size(); i++) {
<a name="5"></a><font color="#FF0000"><a href="match742-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

            pregledi.push_back(make_shared&lt;Pregled&gt;(*p.pregledi[i]));
        }
        return *this;
    }
    Pregledi &amp;operator =(Pregledi &amp;&amp;p) {
        if(this==&amp;p) return *this;
        for (int i = 0; i &lt; pregledi.size(); i++) {
            pregledi[i]=nullptr;
</font>        }
        pregledi = p.pregledi;
<a name="0"></a><font color="#FF0000"><a href="match742-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        p.pregledi.resize(0);
        return *this;
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta,
                            const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        pregledi.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
    }
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
</font>                            int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
<a name="1"></a><font color="#00FF00"><a href="match742-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

                            int minute_pregleda) {
      
        pregledi.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
    }
    void RegistrirajPregled(shared_ptr&lt;Pregled&gt; pregled) {
        
        pregledi.push_back(pregled);
    }
    int DajBrojPregleda() const {
        return pregledi.size();
    }
    int DajBrojPregledaNaDatum(const Datum &amp;datum) const {
</font>        int d,m,g;
        tie(d,m,g) = datum.Ocitaj();
        return count_if(pregledi.begin(),pregledi.end(),[d,m,g](shared_ptr&lt;Pregled&gt;p) {
            int dan,mjesec,godina;
            tie(dan,mjesec,godina) = p-&gt;DajDatumPregleda().Ocitaj();
            return dan==d &amp;&amp; mjesec ==m &amp;&amp; godina==g;
        });
    }
<a name="6"></a><font color="#00FF00"><a href="match742-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Pregled &amp;DajNajranijiPregled() {
        if(pregledi.size()==0)throw domain_error("Nema registriranih pregleda");
        return **min_element(pregledi.begin(),pregledi.end(),[](shared_ptr&lt;Pregled&gt; a,shared_ptr&lt;Pregled&gt;b) {
</font><a name="2"></a><font color="#0000FF"><a href="match742-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            return Pregled::DolaziPrije(*a,*b);
        });
    }
    Pregled DajNajranijiPregled() const {
        if(pregledi.size()==0)throw domain_error("Nema registriranih pregleda");
        return **min_element(pregledi.begin(),pregledi.end(),[](shared_ptr&lt;Pregled&gt;a,shared_ptr&lt;Pregled&gt;b) {
</font>            return Pregled::DolaziPrije(*a,*b);
        });
    }
    void IsprazniKolekciju() {
        for (int i = 0; i &lt; pregledi.size(); i++) {
            pregledi[i]=nullptr;
        }
        pregledi.resize(0);
    }
   void ObrisiNajranijiPregled() {
        if(pregledi.size()==0)throw range_error("Prazna kolekcija");
        auto najraniji= min_element(pregledi.begin(),pregledi.end(),[](shared_ptr&lt;Pregled&gt;a,shared_ptr&lt;Pregled&gt;b) {
            return Pregled::DolaziPrije(*a,*b);
        });
        pregledi.erase(najraniji);
    }

    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
        for (int i = 0; i &lt; pregledi.size(); i++) {
            if(pregledi[i]-&gt;DajImePacijenta() == ime_pacijenta) {
            
                pregledi.erase(pregledi.begin()+i);
                i--;
            }
               
        }
    }

    void IspisiPregledeNaDatum(const Datum &amp;datum) const {
        Pregledi p;
        int d,m,g;
        tie(d,m,g) = datum.Ocitaj();
        for (int i = 0; i &lt; pregledi.size(); i++) {
            int dan,mjesec,godina;
            tie(dan,mjesec,godina) = pregledi[i]-&gt;DajDatumPregleda().Ocitaj();
            if( dan==d &amp;&amp; mjesec ==m &amp;&amp; godina==g) {
                p.RegistrirajPregled(make_shared&lt;Pregled&gt;(*pregledi[i]));
            }
        }
        p.IspisiSvePreglede();
    }


    void IspisiSvePreglede()  {
        sort(pregledi.begin(),pregledi.end(),[](shared_ptr&lt;Pregled&gt;a,shared_ptr&lt;Pregled&gt;b) {
            return Pregled::DolaziPrije(*a,*b);
        });

        for (int i = 0; i &lt; pregledi.size(); i++) {
            pregledi[i]-&gt;Ispisi();
        }
    }
};
int main ()
{

    try {

        Pregledi p;

        while(true) {
            string ime;
            cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
            getline(cin,ime);
<a name="4"></a><font color="#FF00FF"><a href="match742-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

            if(ime=="kraj")break;
            cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
            int dan,mjesec,godina;
            cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
            cout&lt;&lt;"Unesite sate i minute pregleda: ";
            int sati, minute;
            cin&gt;&gt;sati&gt;&gt;minute;
            cin.ignore(1000,'\n');
</font>            p.RegistrirajPregled(ime, dan, mjesec, godina, sati, minute);
        }

        cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;endl;
        p.IspisiSvePreglede();


        while(true) {
            cout&lt;&lt;"Odaberite jednu od sljedecih opcija\n1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta\n4 - Obrisi najraniji pregled\n5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa"&lt;&lt;endl;
            int izbor;
            cin&gt;&gt;izbor;

            if(izbor==1) {
                int d,m,g;
                cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
<a name="8"></a><font color="#00FFFF"><a href="match742-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

                cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;p.DajBrojPregledaNaDatum(Datum(d,m,g))&lt;&lt;endl;
            } else if(izbor==2) {
                cout&lt;&lt;"Najraniji pregled je:"&lt;&lt;endl;
                p.DajNajranijiPregled().Ispisi();
            } else if(izbor==3) {
                string pomocno_ime;
                cout&lt;&lt;"Unesite ime pacijenta: ";
                cin.ignore(1000,'\n');
</font>                getline(cin,pomocno_ime);
                int prije = p.DajBrojPregleda();
                p.ObrisiPregledePacijenta(pomocno_ime);
                int poslije = p.DajBrojPregleda();
                cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;prije-poslije&lt;&lt;" pregleda"&lt;&lt;endl;
            } else if(izbor==4) {
                p.ObrisiNajranijiPregled();
                cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;endl;
            } else if(izbor==5) {
                int d,m,g;
                cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
<a name="10"></a><font color="#FF0000"><a href="match742-1.html#10" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su:"&lt;&lt;endl;
                p.IspisiPregledeNaDatum(Datum(d,m,g));
</font>            } else if(izbor==6) {
                p.IspisiSvePreglede();
            } else if(izbor==7) {
                break;
            }
        }
    } catch(domain_error e) {
        cout&lt;&lt;e.what()&lt;&lt;endl;
    } catch(range_error e) {
        cout&lt;&lt;e.what()&lt;&lt;endl;
    }
    return 0;

}
</pre>
</body>
</html>
