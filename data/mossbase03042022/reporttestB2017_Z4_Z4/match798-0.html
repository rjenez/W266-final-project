<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student6363.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student6363.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;exception&gt;
#include &lt;tuple&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;iomanip&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
using std::cout;
using std::cin;
using std::endl;
using std::string;
using std::vector;
using std::shared_ptr;
using std::make_shared;
class Datum
{
<a name="0"></a><font color="#FF0000"><a href="match798-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

    int dan,mjesec,godina;
    static int BrojDana (int mjesec, int godina) {
        int BrojDana[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        if ((godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0) BrojDana[1]++;
        return BrojDana[mjesec-1];
    }
public:
    Datum(int dan, int mjesec, int godina) {
        Postavi(dan,mjesec,godina);
    }
    void Postavi(int dan, int mjesec, int godina) {
        if(godina&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&lt;1 || dan&gt;BrojDana(mjesec,godina)) throw std::domain_error("Neispravan datum");
</font>        Datum::dan = dan;
        Datum::mjesec = mjesec;
<a name="8"></a><font color="#00FFFF"><a href="match798-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        Datum::godina = godina;
    }

    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        return std::make_tuple(dan,mjesec,godina);
    }
    void Ispisi() const {
</font>        cout &lt;&lt; dan &lt;&lt; "/" &lt;&lt; mjesec &lt;&lt; "/" &lt;&lt; godina;
    }

    friend class Pregled;
    friend class Pregledi;
};

class Vrijeme
{
<a name="3"></a><font color="#00FFFF"><a href="match798-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

    int sati,minute;
public:
    Vrijeme(int sati, int minute) {
        Postavi(sati,minute);
    }

    void Postavi(int sati, int minute) {
        if(sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
</font>        Vrijeme::sati=sati;
<a name="1"></a><font color="#00FF00"><a href="match798-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

        Vrijeme::minute=minute;
    }

    std::pair&lt;int, int&gt; Ocitaj () const {
        return std::make_pair(sati,minute);
    }

    void Ispisi() const {
        std::cout &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; sati &lt;&lt; ":" &lt;&lt; std::setw(2) &lt;&lt; minute &lt;&lt; std::setfill(' ');
    }

    friend class Pregled;
</font>    friend class Pregledi;
};

class Pregled
{
    string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;

public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda,const Vrijeme &amp;vrijeme_pregleda):
        ime_pacijenta(ime_pacijenta), datum_pregleda(datum_pregleda), vrijeme_pregleda(vrijeme_pregleda) {}

<a name="2"></a><font color="#0000FF"><a href="match798-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda) :
        ime_pacijenta(ime_pacijenta), datum_pregleda(dan_pregleda,mjesec_pregleda,godina_pregleda), vrijeme_pregleda(sati_pregleda,minute_pregleda) {}

    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }

    void PromijeniDatum(const Datum &amp;novi_datum) {
        datum_pregleda=novi_datum;
    }

    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        vrijeme_pregleda=novo_vrijeme;
</font>    }

    void PomjeriDanUnaprijed() {
        int dan1(datum_pregleda.dan), mjesec1(datum_pregleda.mjesec), godina1(datum_pregleda.godina);
        dan1++;
        if(dan1&gt;Datum::BrojDana(mjesec1,godina1)) {
            dan1=1;
            mjesec1=1;
        }
        if (mjesec1&gt;12) {
            mjesec1=1;
            godina1++;
        }
        datum_pregleda=Datum(dan1, mjesec1, godina1);
    }

    void PomjeriDanUnazad() {
        int dan1(datum_pregleda.dan), mjesec1(datum_pregleda.mjesec), godina1(datum_pregleda.godina);
        dan1--;
        if (dan1&lt;1) {
            mjesec1--;
            if (mjesec1&gt;0) dan1=Datum::BrojDana(mjesec1, godina1);
        }
        if(mjesec1&lt;1) {
            mjesec1=12;
            godina1--;
            if(godina1&lt;1) throw std::domain_error("Neispravan datum");
            dan1=Datum::BrojDana(mjesec1,godina1);
        }
<a name="6"></a><font color="#00FF00"><a href="match798-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

        datum_pregleda=Datum(dan1, mjesec1, godina1);
    }

    std::string DajImePacijenta() const {
        return ime_pacijenta;
    }

    Datum DajDatumPregleda() const {
        return datum_pregleda;
    }

    Vrijeme DajVrijemePregleda() const {
        return vrijeme_pregleda;
    }

    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
</font>        return ( p1.datum_pregleda.godina&lt;p2.datum_pregleda.godina ||
                 (p1.datum_pregleda.godina==p2.datum_pregleda.godina &amp;&amp; p1.datum_pregleda.mjesec&lt;p2.datum_pregleda.mjesec) ||
                 (p1.datum_pregleda.godina==p2.datum_pregleda.godina &amp;&amp; p1.datum_pregleda.mjesec==p2.datum_pregleda.mjesec &amp;&amp;
                  p1.datum_pregleda.dan&lt;p2.datum_pregleda.dan) || (p1.datum_pregleda.godina==p2.datum_pregleda.godina &amp;&amp;
                          p1.datum_pregleda.mjesec==p2.datum_pregleda.mjesec &amp;&amp; p1.datum_pregleda.dan==p2.datum_pregleda.dan &amp;&amp; p1.vrijeme_pregleda.sati&lt;p2.vrijeme_pregleda.sati)
                 || (p1.datum_pregleda.godina==p2.datum_pregleda.godina &amp;&amp; p1.datum_pregleda.mjesec==p2.datum_pregleda.mjesec &amp;&amp;
                     p1.datum_pregleda.dan==p2.datum_pregleda.dan &amp;&amp; p1.vrijeme_pregleda.sati==p2.vrijeme_pregleda.sati
                     &amp;&amp; p1.vrijeme_pregleda.minute&lt;p2.vrijeme_pregleda.minute));
    }

    void Ispisi() const {
        cout &lt;&lt; std::left &lt;&lt; std::setw(30) &lt;&lt; ime_pacijenta &lt;&lt; std::right;
        datum_pregleda.Ispisi();
        cout &lt;&lt; " ";
        vrijeme_pregleda.Ispisi();
        cout &lt;&lt; endl;
    }

    friend class Vrijeme;
    friend class Datum;
    friend class Pregledi;
};

class Pregledi
{
    vector&lt;shared_ptr&lt;Pregled&gt;&gt; pregledi;
public:
    explicit Pregledi() {}
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) {
        auto it = spisak_pregleda.begin();
        for(int i=0; i&lt;spisak_pregleda.size(); i++,it++)
            pregledi.push_back(make_shared&lt;Pregled&gt;(*it));
    }

    ~Pregledi() {
        for(int i=0; i&lt;pregledi.size(); i++) pregledi.at(i)=nullptr;
    }

    Pregledi(const Pregledi &amp;pregledi) {
        for(int i=0; i&lt;pregledi.pregledi.size(); i++)
            Pregledi::pregledi.push_back(make_shared&lt;Pregled&gt;(*(pregledi.pregledi.at(i))));
    }

    Pregledi(Pregledi &amp;&amp;pregledi) {
        Pregledi::pregledi=std::move(pregledi.pregledi);
    }

    Pregledi &amp;operator =(const Pregledi &amp;pregledi) {
        if(&amp;pregledi!=this) { // samododjela?
            Pregledi::pregledi.resize(0);
            for(int i=0; i&lt;pregledi.pregledi.size(); i++)
                Pregledi::pregledi.push_back(make_shared&lt;Pregled&gt;(*(pregledi.pregledi.at(i))));
        }
        return *this;
    }

    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi) {
<a name="5"></a><font color="#FF0000"><a href="match798-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        if(&amp;pregledi!=this) Pregledi::pregledi=std::move(pregledi.pregledi);
        return *this;
    }

    void RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
</font>        pregledi.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
    }

    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,int mjesec_pregleda, int godina_pregleda,
                            int sati_pregleda,int minute_pregleda) {
        pregledi.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
    }

    void RegistrirajPregled(shared_ptr&lt;Pregled&gt; pregled) {
        pregledi.push_back(pregled);
    }

    int DajBrojPregleda() const {
        return pregledi.size();
    }

    int DajBrojPregledaNaDatum(const Datum &amp;datum) const {
        int brojac = std::count_if(pregledi.begin(),pregledi.end(),
        [datum](shared_ptr&lt;Pregled&gt;p) {
            return (p-&gt;datum_pregleda.dan==datum.dan &amp;&amp; p-&gt;datum_pregleda.mjesec==datum.mjesec &amp;&amp;
                    p-&gt;datum_pregleda.godina==datum.godina);
        });
        return brojac;
    }

<a name="7"></a><font color="#0000FF"><a href="match798-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

    Pregled &amp;DajNajranijiPregled() {
        if(pregledi.size()==0) throw std::domain_error("Nema registriranih pregleda");
        return **(std::min_element(pregledi.begin(),pregledi.end(),
</font>                                   [](shared_ptr&lt;Pregled&gt;p1,shared_ptr
<a name="4"></a><font color="#FF00FF"><a href="match798-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

                                      &lt;Pregled&gt;p2)-&gt;bool {return Pregled::DolaziPrije(*p1,*p2);}));
    }

    Pregled DajNajranijiPregled() const {
        if(pregledi.size()==0) throw std::domain_error("Nema registriranih pregleda");
        return **std::min_element(pregledi.begin(),pregledi.end(),
</font>                                  [](shared_ptr&lt;Pregled&gt;p1,shared_ptr
                                     &lt;Pregled&gt;p2)-&gt;bool {return Pregled::DolaziPrije(*p1,*p2);});
    }

    void IsprazniKolekciju() {
        for(int i=0; i&lt;pregledi.size(); i++) pregledi.at(i)=nullptr;
        pregledi.resize(0);
    }

    void ObrisiNajranijiPregled() {
        if(pregledi.size()==0) throw std::range_error("Prazna kolekcija");
        Pregled &amp;del=DajNajranijiPregled();
        for(int i=0; i&lt;pregledi.size(); i++)
            if(&amp;del==pregledi.at(i).get()) {
                for(int j=i; j+1&lt;pregledi.size(); j++) pregledi.at(j)=pregledi.at(j+1);
                pregledi.resize(pregledi.size()-1);
                break;
            }
    }

    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
        for(int i=0; i&lt;pregledi.size(); i++) {
            if(pregledi.at(i)-&gt;ime_pacijenta==ime_pacijenta) {
                for(int j=i; j+1&lt;pregledi.size(); j++) pregledi.at(j)=pregledi.at(j+1);
                pregledi.resize(pregledi.size()-1);
                i--;
            }
        }
    }

    void IspisiPregledeNaDatum(const Datum &amp;datum) const {
        vector&lt;shared_ptr&lt;const Pregled&gt;&gt; vp;
        for(int i=0; i&lt;pregledi.size(); i++)
            if(pregledi.at(i)-&gt;datum_pregleda.dan==datum.dan &amp;&amp; pregledi.at(i)-&gt;datum_pregleda.mjesec==datum.mjesec &amp;&amp;
                    pregledi.at(i)-&gt;datum_pregleda.godina==datum.godina) vp.push_back(pregledi.at(i));
        std::sort(vp.begin(),vp.end(),[](shared_ptr&lt;const Pregled&gt; p1, shared_ptr&lt;const Pregled&gt;p2) {
            return Pregled::DolaziPrije(*p1,*p2);
        });
        for(int i=0; i&lt;vp.size(); i++) vp.at(i)-&gt;Ispisi();
    }

    void IspisiSvePreglede() const {
        vector&lt;shared_ptr&lt;const Pregled&gt;&gt; vp;
        for(int i=0; i&lt;pregledi.size(); i++) vp.push_back(pregledi.at(i));
        std::sort(vp.begin(),vp.end(),[](shared_ptr&lt;const Pregled&gt; p1, shared_ptr&lt;const Pregled&gt;p2) {
            return Pregled::DolaziPrije(*p1,*p2);
        });
        for(int i=0; i&lt;vp.size(); i++) vp.at(i)-&gt;Ispisi();
    }

    friend class Datum;
    friend class Vrijeme;
    friend class Pregled;
};


int main ()
{
      {//AT8 (skriveni) Test klase pregled getteri setteri, const
        Pregled p1("Dalila", Datum(17,2,2018), Vrijeme(10,10));
        try {p1.PromijeniDatum({32,1,2018});} catch(std::domain_error &amp;ex){std::cout &lt;&lt; "OK1 " &lt;&lt; ex.what() &lt;&lt; std::endl; }
        try {p1.PromijeniVrijeme({-1,-1});} catch(std::domain_error &amp;ex){std::cout &lt;&lt; "OK2 " &lt;&lt; ex.what() &lt;&lt; std::endl; }
        p1.PromijeniDatum({18,2,2018});
        p1.PromijeniVrijeme({11,11});
        p1.Ispisi();
    }
    return 0;
}
</pre>
</body>
</html>
