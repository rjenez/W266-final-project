<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student4469.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student4026.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match42-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_86.gif"/></a>

/B2017/2018: ZadaÄ‡a 4, Zadatak 4

#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;iomanip&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;memory&gt;

class Datum {
    int dan,mjesec,godina;
    
    
    void provjeri(int dan, int mjesec, int godina) {
        if(godina&lt;0)throw std::domain_error("Neispravan datum");
      if( (godina%4==0 &amp;&amp; godina%100!=0) || godina%400==0  ) 
      if(mjesec==2 &amp;&amp; dan&gt;29)throw std::domain_error("Neispravan datum");
      
      if(mjesec&lt;0||mjesec&gt;12) throw std::domain_error("Neispravan datum");
      if(mjesec==4 || mjesec==6 || mjesec==9 || mjesec==11){
      if(dan&lt;0 || dan&gt;30)throw std::domain_error("Neispravan datum");
      } else {
          if(dan&lt;0 || dan&gt;31)throw std::domain_error("Neispravan datum");
      }
   
    }
    
    public:
   
    
  Datum(int dan, int mjesec, int godina) {

     provjeri(dan, mjesec,godina);
     Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
  }
  void Postavi(int dan, int mjesec, int godina) {
      provjeri(dan,mjesec,godina);
      Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
  }
  std::tuple&lt;int,int,int&gt; Ocitaj()const{
      return std::make_tuple(dan,mjesec,godina);
  }
  void Ispisi()const {
      std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
  }

};      
          
    class Vrijeme {
        int sati, minute;
        void provjeri(int sati, int minute) {
            
            if(sati&lt;0 || sati&gt;24||minute&lt;0||minute&gt;59)throw std::domain_error("Neispravno vrijeme"); 
        }
        public:
       
              Vrijeme(int sati, int minute ){
                  provjeri(sati,minute);
                  Vrijeme::sati=sati; Vrijeme::minute=minute; 
              }
              void Postavi(int sati, int minute){
                  provjeri(sati,minute);
                  Vrijeme::sati=sati; Vrijeme::minute=minute;
              }
              std::pair&lt;int,int&gt; Ocitaj () const {
                  return std::make_pair(sati,minute);
              }
              void Ispisi() const {
                  if(sati&lt;10)std::cout&lt;&lt;"0"; std::cout&lt;&lt;sati&lt;&lt;":"; if(minute&lt;10)std::cout&lt;&lt;0;std::cout&lt;&lt;minute;
              }
              
          };
          
   class Pregled
{

    friend class Datum;
    friend class Vrijeme;
    std::string ime_pacijenta;
    Datum datum;
    Vrijeme vrijeme;
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda):datum(datum_pregleda),vrijeme(vrijeme_pregleda) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }

    Pregled(const std::string &amp;ime_pacijenta,  int dan_pregleda,  int mjesec_pregleda, int godina_pregleda, int
            sat_pregleda, int minute_pregleda):datum(dan_pregleda,mjesec_pregleda,godina_pregleda),vrijeme(sat_pregleda,minute_pregleda) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        Pregled::ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        Pregled::datum=novi_datum;

    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        Pregled::vrijeme=novo_vrijeme;
    }
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();

    std::string DajImePacijenta() const {
        return ime_pacijenta;
    }
    Datum DajDatumPregleda()const {
        return datum;
    }
    Vrijeme DajVrijemePregleda()const {
        return vrijeme;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2);

    void Ispisi() {
        std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;ime_pacijenta;
        datum.Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme.Ispisi();
        std::cout&lt;&lt;std::endl;
    }

};

void Pregled::PomjeriDanUnaprijed()
{
    int a,b,c;
    std::tie(a,b,c)=datum.Ocitaj();
    if(a==28 &amp;&amp; b==2) {
        if ( (c%4==0 &amp;&amp; c%100!=0) || (c%400==0  ) )
            a=29;
        else {
            b++;
            a=1;
        }
    }

    if(a==30 &amp;&amp; (b==1 || b==3 || b==5 || b==7 ||b==8 ||b==10 || b==12) )
        a=31;

    else if(a==30) {
        a=1;
        b++;
    }

    else if(a==31 &amp;&amp; b==12) {
        a=1;
        b=1;
        c++;
    } else a++;
    datum.Postavi(a,b,c);
}

void Pregled::PomjeriDanUnazad()
{
    int a,b,c;
    std::tie(a,b,c)=datum.Ocitaj();
    if(a==1 &amp;&amp; b==3) {
        if( (c%4==0 &amp;&amp; c%100!=0) || (c%400==0)  )
            b=2;
        a=29;
    }
    if(a==1 &amp;&amp; (b==2 || b==4 || b==6 || b==8 || b==9 || b==11 || b==1)   ) {
        a=31;
        if(b==1) {
            b=12;
            c--;
        }
    } else if(a==1 &amp;&amp; ( b==5 || b==7 || b==10 || b==12) ) {
        a=30;
        b--;
    } else a--;
    datum.Postavi(a,b,c);
}

bool Pregled::DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2)
{
    auto  t1= p1.DajDatumPregleda().Ocitaj();
    auto t2=p2.DajDatumPregleda().Ocitaj();
    if (std::get&lt;2&gt;(t1)&lt;std::get&lt;2&gt;(t2))
        return true;
    if(std::get&lt;2&gt;(t1)&gt;std::get&lt;2&gt;(t2))
        return false;
    if(std::get&lt;1&gt;(t1)&lt;std::get&lt;1&gt;(t2))return true;
    if(std::get&lt;1&gt;(t1)&gt;std::get&lt;1&gt;(t2))return false;
    if(std::get&lt;0&gt;(t1)&lt;std::get&lt;0&gt;(t2))return true;
    if(std::get&lt;0&gt;(t1)&gt;std::get&lt;0&gt;(t2))return false;

    auto p1_vrijeme=p1.vrijeme.Ocitaj();
    auto p2_vrijeme=p2.vrijeme.Ocitaj();


    if(p1_vrijeme.first&lt;p2_vrijeme.first) return true;
    if(std::get&lt;0&gt;(p1_vrijeme)&gt;std::get&lt;0&gt;(p2_vrijeme))return false;
    if(std::get&lt;1&gt;(p1_vrijeme)&lt;std::get&lt;1&gt;(p2_vrijeme))return true;
    if(std::get&lt;1&gt;(p1_vrijeme)&gt;std::get&lt;1&gt;(p2_vrijeme))return false;

    return false;
}

    
    class Pregledi {
     std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt;vektor_pregleda;
      public:
      explicit Pregledi() {}
      
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);
    Pregledi (const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp; pregledi):vektor_pregleda(std::move(pregledi.vektor_pregleda)) {}
    Pregledi &amp;operator=(const Pregledi &amp;p);
    Pregledi &amp;operator=(Pregledi &amp;&amp;pregledi);
    void RegistrirajPregled(const std::string ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda,int minute_pregleda);
    
    void RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pregled) {
       vektor_pregleda.push_back(pregled);
    }
    
    int DajBrojPregledaNaDatum(const Datum&amp; datum) const;
    Pregled &amp;DajNajranijiPregled();
    Pregled DajNajranijiPregled() const;
     
    void IsprazniKolekciju() {
        if (vektor_pregleda.size()==0)throw std::range_error("Prazna kolekcija");
        vektor_pregleda.clear();
    }
    
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum &amp;datum) const;  
    void IspisiSvePreglede() const;
    
    int DajBrojPregleda()const {
         return vektor_pregleda.size();
     }   
        
    };
          
         Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) {
           auto it=spisak_pregleda.begin();
            for(int i=0;i&lt;spisak_pregleda.size();i++) {
               vektor_pregleda.push_back(std::make_shared&lt;Pregled&gt;(*it));
            }
        }
        
    Pregledi::Pregledi (const Pregledi &amp;pregledi) {
       
      for(int i=0;i&lt;pregledi.vektor_pregleda.size();i++) {
          vektor_pregleda.push_back(std::make_shared&lt;Pregled&gt;(*pregledi.vektor_pregleda[i]));
      }
        
    }  
          
     Pregledi&amp; Pregledi::operator=(const Pregledi &amp;p){
        vektor_pregleda.resize(p.vektor_pregleda.size());
        for(int i=0;i&lt;p.vektor_pregleda.size();i++)
        vektor_pregleda[i]=std::make_shared&lt;Pregled&gt;(*p.vektor_pregleda[i]);
        return *this;
    }
    
    Pregledi&amp; Pregledi::operator=(Pregledi &amp;&amp;pregledi) {
        vektor_pregleda=std::move(pregledi.vektor_pregleda);
        return *this;
    }
    
    void Pregledi::RegistrirajPregled(const std::string ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
        try {
            vektor_pregleda.push_back(std::make_shared&lt;Pregled&gt;( Pregled(ime_pacijenta,datum_pregleda,vrijeme_pregleda)) );
        }
        catch(...){
            throw ;
        }
    }
    
    void Pregledi::RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda,
    int mjesec_pregleda, int godina_pregleda, int sati_pregleda,
     int minute_pregleda) {
        
         try { vektor_pregleda.push_back(std::make_shared&lt;Pregled&gt;(Pregled(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda))) ;}
         catch(...){
             throw ;
         }
         
     }
     
     
    int Pregledi::DajBrojPregledaNaDatum(const Datum&amp; datum) const {
      return  std::count_if(vektor_pregleda.begin(),vektor_pregleda.end(), [&amp;datum]  (std::shared_ptr&lt;Pregled&gt; novi_pok) {
       
             if(novi_pok-&gt;DajDatumPregleda().Ocitaj()==datum.Ocitaj() )return true;
          return false;
      }     );
        
    }
    
    Pregled&amp; Pregledi::DajNajranijiPregled() {
        if(vektor_pregleda.size()==0)throw std::domain_error("Nema registriranih pregleda");
        
        auto it=std::min_element(vektor_pregleda.begin(),vektor_pregleda.end(),[] (std::shared_ptr&lt;Pregled&gt; pregled1,std::shared_ptr&lt;Pregled&gt; pregled2) {
            auto tuple1=pregled1-&gt;DajDatumPregleda().Ocitaj();
            auto tuple2=pregled2-&gt;DajDatumPregleda().Ocitaj();
            
            if(std::get&lt;2&gt;(tuple1)&lt;std::get&lt;2&gt;(tuple2) )return true;
            else if(std::get&lt;2&gt;(tuple1)&gt;std::get&lt;2&gt;(tuple2))return false;
            else {
                if(std::get&lt;1&gt;(tuple1)&lt;std::get&lt;1&gt;(tuple2))return true;
                else if(std::get&lt;1&gt;(tuple1)&gt;std::get&lt;1&gt;(tuple2))return false;
                else {
                    if(std::get&lt;0&gt;(tuple1)&lt;std::get&lt;0&gt;(tuple2))return true;
                else if(std::get&lt;0&gt;(tuple1)&gt;std::get&lt;0&gt;(tuple2))return false;
                    else {
                        auto vrijeme1=pregled1-&gt;DajVrijemePregleda().Ocitaj();
                        auto vrijeme2=pregled2-&gt;DajVrijemePregleda().Ocitaj();
                        if(std::get&lt;0&gt;(vrijeme1)&lt;std::get&lt;0&gt;(vrijeme2))return true;
                        else if(std::get&lt;0&gt;(vrijeme1)&gt;std::get&lt;0&gt;(vrijeme2))return false;
                        else {
                            if(std::get&lt;1&gt;(vrijeme1)&lt;std::get&lt;1&gt;(vrijeme2))return true;
                            else if(std::get&lt;1&gt;(vrijeme1)&gt;std::get&lt;1&gt;(vrijeme2))return false;
                        }
                        
                    }
                }
            }
         return false;   
        }   );
        return **it;
    }
    
     Pregled Pregledi::DajNajranijiPregled() const {
        if(vektor_pregleda.size()==0)throw std::domain_error("Nema registriranih pregleda");
        
        auto it=std::min_element(vektor_pregleda.begin(),vektor_pregleda.end(),[] (std::shared_ptr&lt;Pregled&gt; pregled1,std::shared_ptr&lt;Pregled&gt; pregled2) {
            
            if(pregled1-&gt;DajDatumPregleda().Ocitaj()&lt;pregled2-&gt;DajDatumPregleda().Ocitaj() ) return true; return false;
        }   );
        return **it;
    }
          
           void Pregledi::ObrisiNajranijiPregled() {
        if(vektor_pregleda.size()==0)throw std::range_error("Prazna kolekcija");
        
       Pregled p(DajNajranijiPregled());    
    for(int i=0;i&lt;vektor_pregleda.size();i++) {
        if(vektor_pregleda[i]-&gt;DajImePacijenta()==p.DajImePacijenta() &amp;&amp; vektor_pregleda[i]-&gt;DajDatumPregleda().Ocitaj()==p.DajDatumPregleda().Ocitaj() &amp;&amp; vektor_pregleda[i]-&gt;DajVrijemePregleda().Ocitaj()==p.DajVrijemePregleda().Ocitaj() ){
             vektor_pregleda[i]=nullptr;
            vektor_pregleda.erase(vektor_pregleda.begin()+i);
            break;
        }
    }
    
    }
    
    void Pregledi::ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta) {
        for(int i=0;i&lt;vektor_pregleda.size();i++) {
           
           if(vektor_pregleda[i]-&gt;DajImePacijenta()==ime_pacijenta ) {
                vektor_pregleda[i]=nullptr; 
              vektor_pregleda.erase(vektor_pregleda.begin()+i);i--;
           }    
        }
        
    }
    
   void Pregledi::IspisiPregledeNaDatum(const Datum &amp;datum) const {
        
        std::vector&lt;Pregled&gt; vektor;
        for(int i=0;i&lt;vektor_pregleda.size();i++) {
        
        if(vektor_pregleda[i]-&gt;DajDatumPregleda().Ocitaj()==datum.Ocitaj()) {
            vektor.push_back(*vektor_pregleda[i]);
        }
            
        }
        
        std::sort(vektor.begin(),vektor.end(),[](const Pregled &amp;p1, const Pregled &amp;p2) {
           if(p1.DolaziPrije(p1,p2) )return true; return false;});
            
   
        for(auto a:vektor)a.Ispisi();
        
    }  
    
    void Pregledi::IspisiSvePreglede() const {
       
       std::vector&lt;Pregled&gt; vektor;
       for(int i=0;i&lt;vektor_pregleda.size();i++) {
           vektor.push_back(*vektor_pregleda[i]);
       }
        
        std::sort(vektor.begin(),vektor.end(),[](const Pregled &amp;p1, const Pregled &amp;p2) {
           if(p1.DolaziPrije(p1,p2) )return true; return false;});
            
   
        for(auto a:vektor)a.Ispisi();
        
    }
          
          
          
int main ()
{
  
    Pregledi pregledi;
    std::string ime; 
   
    do{
     
        std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
     
        std::getline(std::cin,ime);
        if(ime!="kraj") {
            
            std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
            int dan,mjesec,godina; 
            
            std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
            
            
            
            Datum datum(dan,mjesec,godina);
            std::cout&lt;&lt;"Unesite sate i minute pregleda: "; 
            int sati,minute;
           
               
            std::cin&gt;&gt;sati&gt;&gt;minute;
            Vrijeme vrijeme(sati,minute);
               
            
            auto pok=std::make_shared&lt;Pregled&gt; (Pregled(ime,datum,vrijeme));
               pregledi.RegistrirajPregled(pok); 
            std::cin.ignore(10000,'\n');
        }
        
    } while(ime!="kraj");
    
    std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
    pregledi.IspisiSvePreglede();
    
  
    while(1){
       
        std::cout&lt;&lt;std::endl;
         
    std::cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;std::endl;
    std::cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl;
</font>    std::cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl;
    std::cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl;
    std::cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl;
<a name="1"></a><font color="#00FF00"><a href="match42-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

    std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl;
    std::cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl;
    std::cout&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
        
         int opcija; std::cin&gt;&gt;opcija; 
        std::cin.ignore(10000,'\n');
        
        switch(opcija) {
    
         case 1:{
         std::cout&lt;&lt;"Unesite dan mjesec i godinu : "; int d,m,g;
         std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g; 
         std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;pregledi.DajBrojPregledaNaDatum(Datum(d,m,g));
         std::cout&lt;&lt;std::endl;
         break;}
         
         case 2:{
         std::cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;std::endl; 
         pregledi.DajNajranijiPregled().Ispisi();
         std::cout&lt;&lt;std::endl;
         break;}
         
         case 3: {
         std::cout&lt;&lt;"Unesite ime pacijenta: "; std::string imepacijenta;
         std::getline(std::cin, imepacijenta); int prije=pregledi.DajBrojPregleda();
         pregledi.ObrisiPregledePacijenta(imepacijenta); 
         std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;prije-pregledi.DajBrojPregleda()&lt;&lt;" pregleda"&lt;&lt;std::endl;break; }
         
        
        case 4:{
        try{pregledi.ObrisiNajranijiPregled();
        std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
        }
         catch(std::range_error izuzetak){std::cout&lt;&lt;izuzetak.what();break;} break; }
         
        case 5:{
        std::cout&lt;&lt;"Unesite dan mjesec i godinu : "; int d1,m1,g1; std::cin&gt;&gt;d1&gt;&gt;m1&gt;&gt;g1;
        std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;d1&lt;&lt;" "&lt;&lt;m1&lt;&lt;" "&lt;&lt;g1&lt;&lt;" su:"; std::cout&lt;&lt;std::endl; pregledi.IspisiPregledeNaDatum(Datum(d1,m1,g1));
        std::cout&lt;&lt;std::endl;
        break;}
        
        case 6:
       { pregledi.IspisiSvePreglede(); break;}
        
        case 7:return 0;
            
        }
    }
    
    
	return 0;
</font>}

</pre>
</body>
</html>
