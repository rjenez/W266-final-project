<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student3320.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student6109.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match160-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2017/2018: Zadaća 4, Zadatak 4
/B2017/2018: Zadaća 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;iomanip&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;cmath&gt;
#include &lt;cctype&gt;
#include &lt;algorithm&gt;
#include &lt;utility&gt;
#include &lt;cstring&gt;
#include &lt;string&gt;

class Datum {
int dan_pr, mjesec_pr, godina_pr;
void DajDane() const {return dan_pr;}
void DajMjesec() const {return mjesec_pr;}
void DajGodine() const {return godina_pr;}
public:
Datum(int dan, int mjesec, int godina) {
    if(dan&lt;0 || mjesec&lt;1 || mjesec&gt;12 || godina&lt;0 || godina&gt;2018) throw std::domain_error("Neispravan datum");
    if((mjesec==1 || mjesec==3 || mjesec==5 || mjesec==7 || mjesec==8 || mjesec==10 || mjesec==12) &amp;&amp; dan&gt;31) throw std::domain_error("Neispravan datum");
    if((mjesec==4 || mjesec==6 || mjesec==9 || mjesec==11) &amp;&amp; dan&gt;30) throw std::domain_error("Neispravan datum");
    if(godina%4==0 &amp;&amp; (godina%100!=0 || godina%400==0)) {
        if(mjesec==2 &amp;&amp; dan&gt;29) throw std::domain_error("Neispravan datum");
    } else {
        if(mjesec==2 &amp;&amp; dan&gt;28) throw std::domain_error("Neispravan datum");
    }
    Datum::dan_pr=dan;
    Datum::mjesec_pr=mjesec;
    Datum::godina_pr=godina;
}
void Postavi(int dan, int mjesec, int godina) {
    if(dan&lt;0 || mjesec&lt;0 || mjesec&gt;12 || godina&lt;0 || godina&gt;2018) throw std::domain_error("Neispravan datum");
    if((mjesec==1 || mjesec==3 || mjesec==5 || mjesec==7 || mjesec==8 || mjesec==10 || mjesec==12) &amp;&amp; dan&gt;31) throw std::domain_error("Neispravan datum");
    if((mjesec==4 || mjesec==6 || mjesec==9 || mjesec==11) &amp;&amp; dan&gt;30) throw std::domain_error("Neispravan datum");
    if(godina%4==0 &amp;&amp; (godina%100!=0 || godina%400==0)) {
        if(mjesec==2 &amp;&amp; dan&gt;29) throw std::domain_error("Neispravan datum");
    } else {
        if(mjesec==2 &amp;&amp; dan&gt;28) throw std::domain_error("Neispravan datum");
    }
    *this=Datum(dan, mjesec, godina);
}
std::tuple&lt;int, int, int&gt;Ocitaj() const {
    return std::make_tuple(dan_pr, mjesec_pr, godina_pr);
}
void Ispisi() const {std::cout &lt;&lt; dan_pr &lt;&lt; "/" &lt;&lt; mjesec_pr &lt;&lt; "/" &lt;&lt; godina_pr &lt;&lt; std::endl;}
friend class Pregled;
friend class Pregledi;
};


class Vrijeme {
int sati_pr, minute_pr;
void DajSate() const {return sati_pr;}
void DajMinute() const {return minute_pr;}
public:
Vrijeme(int sati, int minute) {
    if(sati&lt;0 || minute&lt;0 || sati&gt;23 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
    Vrijeme::sati_pr=sati; 
    Vrijeme::minute_pr=minute;
}
void Postavi(int sati, int minute) {
    if(sati&lt;0 || minute&lt;0 || sati&gt;23 || minute&gt;59) throw std::domain_error("Neispravno vrijeme");
    *this=Vrijeme(sati, minute);    
}
std::pair&lt;int, int&gt;Ocitaj() const {
    return std::make_pair(sati_pr, minute_pr);
}
void Ispisi() const {std::cout &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; sati_pr &lt;&lt; ":" &lt;&lt; std::setw(2) &lt;&lt; minute_pr;}
friend class Pregled;
friend class Pregledi;
};


class Pregled {
std::string ime_pacijenta_pr;
Datum datum;
Vrijeme vrijeme;
public: 
Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : datum(datum_pregleda), vrijeme(vrijeme_pregleda) {
    Pregled::ime_pacijenta_pr=ime_pacijenta;
}
Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) : datum(dan_pregleda, mjesec_pregleda, godina_pregleda), vrijeme(sati_pregleda, minute_pregleda) {
    Pregled::ime_pacijenta_pr=ime_pacijenta;
}
void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
    Pregled::ime_pacijenta_pr=ime_pacijenta;
}
void PromijeniDatum(const Datum &amp;novi_datum) {datum=novi_datum;}
void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {vrijeme=novo_vrijeme;}
void PomjeriDanUnaprijed(); //
void PomjeriDanUnazad(); //
std::string DajImePacijenta() const {return ime_pacijenta_pr;}
Datum DajDatumPregleda() const {return datum;}
Vrijeme DajVrijemePregleda() const {return vrijeme;}
static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
    if(p1.Pregled::datum.godina_pr&lt;p2.Pregled::datum.godina_pr) return false;
    else if(p1.Pregled::datum.godina_pr&gt;p2.Pregled::datum.godina_pr) return true;
    else {
        if(p1.Pregled::datum.mjesec_pr&lt;p2.Pregled::datum.mjesec_pr) return false;
        else if(p1.Pregled::datum.mjesec_pr&gt;p2.Pregled::datum.mjesec_pr) return true;
        else {
            if(p1.Pregled::datum.dan_pr&lt;p2.Pregled::datum.dan_pr) return false;
            else if(p1.Pregled::datum.dan_pr&gt;p2.Pregled::datum.dan_pr) return true;
            else {
                if(p1.Pregled::vrijeme.sati_pr&lt;p2.Pregled::vrijeme.sati_pr) return false;
                else if(p1.Pregled::vrijeme.sati_pr&gt;p2.Pregled::vrijeme.sati_pr) return true;
                else {
                    if(p1.Pregled::vrijeme.minute_pr&lt;p2.Pregled::vrijeme.minute_pr) return false;
                }
            }
        }
    }
    return true; // samo ako je p1&gt;=p2 u minutama(nista nije navedeno ako je sve =);
}
/*void Ispisi() const {std::cout &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; ime_pacijenta_pr;
    std::cout &lt;&lt; datum.dan_pr &lt;&lt; "/" &lt;&lt; datum.mjesec_pr &lt;&lt; "/" &lt;&lt; datum.godina_pr &lt;&lt; " ";
    std::cout &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; vrijeme.sati_pr &lt;&lt; ":" &lt;&lt; std::setw(2) &lt;&lt; vrijeme.minute_pr &lt;&lt; std::endl;
}*/

void Ispisi() const {
    std::cout &lt;&lt; std::setw(30) &lt;&lt; std::left &lt;&lt; ime_pacijenta_pr;
    datum.Ispisi();
    std::cout &lt;&lt; " ";
    vrijeme.Ispisi();
    std::cout &lt;&lt; std::endl;
}
friend class Pregledi;
};

class Pregledi {
std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; spisak;
int pronadji(int *dan, int *mjesec, int *godina, int *sati, int *minute) const {
    for(int i=0; i&lt;spisak.size(); i++) {
        if(std::strcmp(dan, spisak[i]-&gt;Datum.DajDane())==0) {
            if(std::strcmp(mjesec, spisak[i]-&gt;Datum::DajMjesec())==0) {
                if(std::strcmp(godina, spisak[i]-&gt;Datum::DajGodine())==0) {
                    if(std::strcmp(sati, spisak[i]-&gt;Vrijeme::DajSate())==0) {
                        if(std::strcmp(minute, spisak[i]-&gt;Vrijeme::DajMinute())==0) {
                            return i;
                        } else return -1;       
                    } else return -1;
                } else return -1;
            } else return -1;
        } else return -1;
    }
    return -1;
}
public:
explicit Pregledi()=default;
Pregledi(std::initializer_list&lt;Pregled&gt;spisak_pregleda) {
    for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++) {
        try {
            std::shared_ptr&lt;Pregled&gt;p(new Pregled(*it));
            spisak.push_back(p);
        }catch(std::bad_alloc) {
            for(int i=0; i&lt;spisak_pregleda.size(); i++) {
                spisak[i]=nullptr;
            }
            throw;
        }
    }
}
~Pregledi() {
    for(int i=0; i&lt;spisak.size(); i++) spisak[i]=nullptr;
}
Pregledi(const Pregledi &amp;pregledi) {
    try {
        spisak.resize(pregledi.spisak.size());
        for(int i=0; i&lt;pregledi.spisak.size(); i++) {
            std::shared_ptr&lt;Pregled&gt;p(new Pregled(*pregledi.spisak[i]));
            spisak[i]=p;
        }
    }catch(...) {
        for(int i=0; i&lt;pregledi.spisak.size(); i++) spisak[i]=nullptr;
        throw;
    }
}
Pregledi(Pregledi &amp;&amp;pregledi) {spisak=std::move(pregledi.spisak);}
Pregledi  &amp;operator =(const Pregledi &amp;pregledi) {
    int stara_duzina=spisak.size();
    if(pregledi.spisak.size()&gt;spisak.size()) {
        try {
            for(int i=spisak.size(); i&lt;pregledi.spisak.size(); i++) {
                std::shared_ptr&lt;Pregled&gt;p(new Pregled(*pregledi.spisak[i]));
                spisak.push_back(p);
            }
        }catch(...) {
            for(int i=spisak.size(); i&lt;pregledi.spisak.size(); i++) {
                spisak[i]=nullptr;
            }
            spisak.resize(stara_duzina);
            throw;
        }
    }
    spisak.resize(pregledi.spisak.size());
    for(int i=0; i&lt;spisak.size(); i++) *spisak[i]=*pregledi.spisak[i];
    return *this;
}
Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi) {
    spisak=std::move(pregledi.spisak);
    return *this;
}
void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
    if(pronadji(datum_pregleda.DajDane(), datum_pregleda.DajMjesec(), datum_pregleda.DajGodine(), vrijeme_pregleda.DajSate(), vrijeme_pregleda.DajMinute())!=-1) throw std::logic_error("Termin vec popunjen");
    spisak[spisak.size()]=std::make_shared&lt;Pregled&gt;(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
}
void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
    if(godina_pregleda&lt;0 || godina_pregleda&gt;2018 || sati_pregleda&lt;0 || sati_pregleda&gt;23 || minute_pregleda&lt;0 || minute_pregleda&gt;59 || mjesec_pregleda&lt;1 || mjesec_pregleda&gt;12) throw std::range_error("Neuspjesna registracija");
    if((mjesec_pregleda==1 || mjesec_pregleda==3 || mjesec_pregleda==5 || mjesec_pregleda==7 || mjesec_pregleda==8 || mjesec_pregleda==10 || mjesec_pregleda==12) &amp;&amp; dan_pregleda&gt;31) throw std::domain_error("Neispravan datum");
    if((mjesec_pregleda==4 || mjesec_pregleda==6 || mjesec_pregleda==9 || mjesec_pregleda==11) &amp;&amp; dan_pregleda&gt;30) throw std::domain_error("Neispravan datum");
    if(godina_pregleda%4==0 &amp;&amp; (godina_pregleda%100!=0 || godina_pregleda%400==0)) {
        if(mjesec_pregleda==2 &amp;&amp; dan_pregleda&gt;29) throw std::domain_error("Neispravan datum");
    } else {
        if(mjesec_pregleda==2 &amp;&amp; dan_pregleda&gt;28) throw std::domain_error("Neispravan datum");
    }
    std::shared_ptr&lt;Pregled&gt;p(new Pregled(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda));
    spisak.push_back(p);
}
/*void RegistrirajPregled(Pregled *pregled) {
    std::shared_ptr&lt;Pregled&gt;p(new Pregled(Pregledi.ime_pacijenta_pr);
    spisak.push_back(p);
}*/
int DajBrojPregleda() const {return spisak.size();}
int DajBrojPregledaNaDatum(const Datum &amp;datum) const {
    int brojac=0;
    for(int i=0; i&lt;spisak.size(); i++) {
        if(1) brojac++;
    }
    return brojac;
}
Pregled &amp;DajNajranijiPregled();
Pregled DajNajranijiPregled() const;
void ObrisiNajranijiPregled();
void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
void IspisiPregledeNaDatum(const Datum &amp;datum) const {
    for(int i=0; i&lt;spisak.size(); i++) {
        if() datum.Datum::Ispisi(); 
    }
}
void IspisiSvePreglede() const {
    for(int i=0; i&lt;spisak.size(); i++) spisak[i]-&gt;Ispisi();
}
};

/*explicit Pregledi(int max_broj_pregleda);//
Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda);//
~Pregledi();//
Pregledi(const Pregledi &amp;pregledi);//
Pregledi(Pregledi &amp;&amp;pregledi);//
Pregledi &amp;operator =(const Pregledi &amp;pregledi);//
Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi);//
void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);//
void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);//
void RegistrirajPregled(Pregled *pregled);
int DajBrojPregleda() const;
int DajBrojPregledaNaDatum(const Datum &amp;datum) const;
Pregled &amp;DajNajranijiPregled();
Pregled DajNajranijiPregled() const;
void IsprazniKolekciju();
void ObrisiNajranijiPregled();
void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta);
void IspisiPregledeNaDatum(const Datum &amp;datum) const;
void IspisiSvePreglede() const;
*/

int main() {
</font>    return 0;
}</pre>
</body>
</html>
