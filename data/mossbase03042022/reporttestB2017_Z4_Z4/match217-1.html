<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student2232.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student7936.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;cmath&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;new&gt;

class Datum
{
    int dan,mjesec,godina;
public:
    Datum(int dan, int mjesec, int godina) {
        int dani_u_mjesecu [12] {31,28,31,30,31,30,31,31,30,31,30,31};
        if (godina%4==0 &amp;&amp; (godina%100==0 &amp;&amp; godina%400==0)) dani_u_mjesecu[1]++;
        if (mjesec&lt;0 || mjesec&gt;12 || godina&lt;0 || dan&lt;0 || dan&gt;dani_u_mjesecu[mjesec-1]) throw std::domain_error ("Neispravan datum");
        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    void Postavi(int dan, int mjesec, int godina) {
        int dani_u_mjesecu [12] {31,28,31,30,31,30,31,31,30,31,30,31};
        if (godina%4==0 &amp;&amp; (godina%100==0 &amp;&amp; godina%400==0)) dani_u_mjesecu[1]++;
        if (mjesec&lt;0 || mjesec&gt;12 || godina&lt;0 || dan&lt;0 || dan&gt;dani_u_mjesecu[mjesec-1]) throw std::domain_error ("Neispravan datum");
<a name="14"></a><font color="#FF00FF"><a href="match217-0.html#14" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        Datum::dan=dan;
        Datum::mjesec=mjesec;
        Datum::godina=godina;
    }
    std::tuple&lt;int, int, int&gt; Ocitaj() const {
        auto pom (std::make_tuple(dan,mjesec,godina));
</font>        return pom;
    }
    void Ispisi() const {
<a name="7"></a><font color="#0000FF"><a href="match217-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

        std::cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};

class Vrijeme
{
    int sati,minute;
public:
    Vrijeme(int sati, int minute) {
</font>        if (sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error ("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    void Postavi(int sati, int minute) {
<a name="8"></a><font color="#00FFFF"><a href="match217-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        if (sati&lt;0 || sati&gt;23 || minute&lt;0 || minute&gt;59) throw std::domain_error ("Neispravno vrijeme");
        Vrijeme::sati=sati;
        Vrijeme::minute=minute;
    }
    std::pair&lt;int, int&gt; Ocitaj () const {
        auto pom (std::make_pair(sati,minute));
</font>        return pom;
    }
    void Ispisi() const {
        std::cout&lt;&lt;std::setw(2)&lt;&lt;std::right&lt;&lt;std::setfill('0')&lt;&lt;sati&lt;&lt;":"&lt;&lt;std::setw(2)&lt;&lt;minute&lt;&lt;std::setfill(' ');
    }
};

class Pregled
{
    std::string ime;
    Datum datum;
    Vrijeme vrijeme;
public:
    Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : datum(datum_pregleda),vrijeme(vrijeme_pregleda) {
        ime=ime_pacijenta;
    }
<a name="6"></a><font color="#00FF00"><a href="match217-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) : datum(dan_pregleda,mjesec_pregleda,godina_pregleda), vrijeme(sati_pregleda,minute_pregleda) {
        ime=ime_pacijenta;
</font>    }
    void PromijeniPacijenta(const std::string &amp;ime_pacijenta) {
        ime=ime_pacijenta;
    }
    void PromijeniDatum(const Datum &amp;novi_datum) {
        datum=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme) {
        vrijeme=novo_vrijeme;
    }
    void PomjeriDanUnaprijed() {
        auto pom=datum.Ocitaj();
        std::get&lt;0&gt;(pom)++;
        datum.Postavi(std::get&lt;0&gt;(pom),std::get&lt;1&gt;(pom),std::get&lt;2&gt;(pom));
    }
    void PomjeriDanUnazad() {
        auto pom=datum.Ocitaj();
        std::get&lt;0&gt;(pom)--;
        datum.Postavi(std::get&lt;0&gt;(pom),std::get&lt;1&gt;(pom),std::get&lt;2&gt;(pom));
    }
    std::string DajImePacijenta() const {
        return ime;
    }
    Datum DajDatumPregleda() const {
        return datum;
    }
    Vrijeme DajVrijemePregleda() const {
        return vrijeme;
    }
    static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2) {
        auto pom1=p1.datum.Ocitaj();
        auto pom2=p2.datum.Ocitaj();
        if (std::get&lt;2&gt;(pom1)&lt;std::get&lt;2&gt;(pom2)) return true;
        if (std::get&lt;2&gt;(pom1)==std::get&lt;2&gt;(pom2)) {
            if (std::get&lt;1&gt;(pom1)&lt;std::get&lt;1&gt;(pom2)) return true;
        }
        if (std::get&lt;2&gt;(pom1)==std::get&lt;2&gt;(pom2) &amp;&amp; std::get&lt;1&gt;(pom1)==std::get&lt;1&gt;(pom2)) {
            if (std::get&lt;0&gt;(pom1)&lt;std::get&lt;0&gt;(pom2)) return true;
        }
        if (std::get&lt;2&gt;(pom1)==std::get&lt;2&gt;(pom2) &amp;&amp; std::get&lt;1&gt;(pom1)==std::get&lt;1&gt;(pom2) &amp;&amp; std::get&lt;0&gt;(pom1)==std::get&lt;0&gt;(pom2)) {
            auto tom1=p1.vrijeme.Ocitaj();
            auto tom2=p2.vrijeme.Ocitaj();
            if (tom1.first&lt;tom2.first) return true;
            if (tom1.first==tom2.first) {
                if (tom1.second&lt;tom2.second) return true;
            }
        }
        return false;
    }
<a name="1"></a><font color="#00FF00"><a href="match217-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    void Ispisi() const {
        std::cout&lt;&lt;std::left&lt;&lt;std::setw(30)&lt;&lt;ime;
        datum.Ispisi();
        std::cout&lt;&lt;" ";
        vrijeme.Ispisi();
        std::cout&lt;&lt;std::endl;
    }
};

class Pregledi
{
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pregled;
public:


    explicit Pregledi() : pregled() {}

    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) : pregled(spisak_pregleda.size()) {
        auto it(spisak_pregleda.begin());
        for(int i=0; i&lt;int(spisak_pregleda.size()); i++) pregled.at(i)=std::make_shared&lt;Pregled&gt;(*it++);
</font><a name="3"></a><font color="#00FFFF"><a href="match217-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

    }


    Pregledi(const Pregledi &amp;pregledi) : pregled(pregledi.pregled.size()) {
        for (int i=0; i&lt;pregled.size(); i++) pregled.at(i)=std::make_shared&lt;Pregled&gt;(*pregledi.pregled.at(i));
</font><a name="2"></a><font color="#0000FF"><a href="match217-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

    }

    Pregledi(Pregledi &amp;&amp;pregledi) : pregled(pregledi.pregled.size()) {
        std::swap(pregled,pregledi.pregled);
        pregledi.pregled.resize(0);
    }


    Pregledi &amp;operator =(const Pregledi &amp;pregledi) {
        if (&amp;pregledi!=this) {
</font>            if(pregled.size()&lt;pregledi.pregled.size()) {
<a name="5"></a><font color="#FF0000"><a href="match217-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

                for(int i(pregled.size()); i&lt;pregledi.pregled.size(); i++) pregled.push_back(std::make_shared&lt;Pregled&gt;(*pregledi.pregled.at(i)));
            }
            pregled.resize(pregledi.pregled.size());
            for(int i(0); i&lt;pregled.size(); i++)
</font><a name="0"></a><font color="#FF0000"><a href="match217-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

                *pregled.at(i)=*pregledi.pregled.at(i);
        }
        return *this;
    }

    Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi) {
        std::swap(pregled,pregledi.pregled);
        pregledi.pregled.resize(0);
        return *this;
    }


    void RegistrirajPregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) {
        pregled.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
    }


    void RegistrirajPregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) {
        pregled.push_back(std::make_shared&lt;Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
    }


    void RegistrirajPregled(std::shared_ptr&lt;Pregled&gt; pok_pregled) {
</font>        pregled.push_back(std::make_shared&lt;Pregled&gt;(pok_pregled-&gt;DajImePacijenta(),pok_pregled-&gt;DajDatumPregleda(),pok_pregled-&gt;DajVrijemePregleda()));
    }


    int DajBrojPregleda() const {
        return pregled.size();
    }

    void IspisiSvePreglede() {
        std::sort (pregled.begin(),pregled.end(),[] (std::shared_ptr&lt;Pregled&gt; p1,std::shared_ptr&lt;Pregled&gt; p2) {
            return Pregled::DolaziPrije(*p1,*p2);
        });
        for (int i(0); i&lt;pregled.size(); i++) pregled.at(i)-&gt;Ispisi();
    }


    void IspisiPregledeNaDatum(const Datum &amp;datum) {
        std::sort (pregled.begin(),pregled.end(),[datum] (std::shared_ptr&lt;Pregled&gt; p1,std::shared_ptr&lt;Pregled&gt; p2) {
            return Pregled::DolaziPrije(*p1,*p2);
        });
        for (int i(0); i&lt;pregled.size(); i++)
            if (pregled.at(i)-&gt;DajDatumPregleda().Ocitaj()==datum.Ocitaj()) pregled.at(i)-&gt;Ispisi();
    }


    Pregled &amp;DajNajranijiPregled() const {
<a name="9"></a><font color="#FF00FF"><a href="match217-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

        auto min=*std::min_element (pregled.begin(),pregled.end(),[] (std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2)  {
            if (Pregled::DolaziPrije(*p1,*p2)) return true;
</font>            return false;
        });
        if (min==0) throw std::domain_error ("Nema registriranih pregleda");
        return *min;
    }


    Pregled DajNajranijiPregled() {
<a name="10"></a><font color="#FF0000"><a href="match217-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

        auto min=*std::min_element(pregled.begin(),pregled.end(),[] (std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt; p2) {
            if (Pregled::DolaziPrije(*p1,*p2)) return true;
</font>            return false;
        });
        if (min==0) throw std::domain_error ("Nema registriranih pregleda");
        return *min;
    }


    void IsprazniKolekciju() {
        for(int i(0); i&lt;pregled.size(); i++) pregled.at(i)=nullptr;
        pregled.resize(0);
    }


    void ObrisiNajranijiPregled() {
        auto min=DajNajranijiPregled();
        if (pregled.size()==0) throw std::range_error ("Prazna kolekcija");
        int a(pregled.size());
        for (int i(0); i&lt;a; i++) {
            if (pregled.at(i)-&gt;DajDatumPregleda().Ocitaj()==min.DajDatumPregleda().Ocitaj()) {
                for (int j(i); j&lt;a-1; j++) {
                    *pregled.at(j)=*pregled.at(j+1);
                }
                pregled.at(a-1)=nullptr;
                pregled.resize(a-1);
                break;
            }
        }
    }


    void ObrisiPregledePacijenta(std::string ime_pacijenta) {
        int a(pregled.size());
        for (int i(0); i&lt;a; i++) {
            if (pregled.at(i)-&gt;DajImePacijenta()==ime_pacijenta) {
                for (int j(i); j&lt;a-1; j++) {
                    *pregled.at(j)=*pregled.at(j+1);
                }
                pregled.at(a-1)=nullptr;
                i--;
                a--;
                pregled.resize(a);
            }
        }
    }


    int DajBrojPregledaNaDatum(const Datum &amp;datum) {
        int broj=std::count_if (pregled.begin(),pregled.end(),[&amp;datum] (std::shared_ptr&lt;Pregled&gt; p) {
            if (p-&gt;DajDatumPregleda().Ocitaj()==datum.Ocitaj()) return true;
            return false;
        });
        return broj;
    }




};

int main ()
{
    try {
<a name="13"></a><font color="#00FFFF"><a href="match217-0.html#13" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        Pregledi glavni;
        for (;;) {
            std::cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
            std::string ime;
            std::getline(std::cin,ime);
            if (ime=="kraj") break;
            std::cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
</font>            int dan,mjesec,godina;
            std::cin&gt;&gt;dan&gt;&gt;mjesec&gt;&gt;godina;
            Datum datum (dan,mjesec,godina);
            std::cout&lt;&lt;"Unesite sate i minute pregleda: ";
            int sati,minute;
            std::cin&gt;&gt;sati&gt;&gt;minute;
            Vrijeme vrijeme (sati,minute);
            glavni.RegistrirajPregled(ime,datum,vrijeme);
            std::cin.clear();
            std::cin.ignore (1000,'\n');
        }
        std::cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;std::endl;
        glavni.IspisiSvePreglede();
        for (;;) {
            std::cout&lt;&lt;"\nOdaberite jednu od sljedecih opcija"&lt;&lt;std::endl;
            std::cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;std::endl;
            std::cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;std::endl;
            std::cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;std::endl;
            std::cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;std::endl;
            std::cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;std::endl;
            std::cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;std::endl;
            std::cout&lt;&lt;"7 - Kraj programa"&lt;&lt;std::endl;
            int broj;
<a name="12"></a><font color="#0000FF"><a href="match217-0.html#12" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            std::cin&gt;&gt;broj;
            if (broj==1) {
                std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                int d,m,g;
                std::cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
</font>                Datum dat (d,m,g);
                int broj_pregleda_na_datum=glavni.DajBrojPregledaNaDatum(dat);
                std::cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;broj_pregleda_na_datum&lt;&lt;std::endl;;
            } else if (broj==2) {
                std::cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;std::endl;
                auto min=glavni.DajNajranijiPregled();
                min.Ispisi();
            } else if (broj==3) {
                std::cout&lt;&lt;"Unesite ime pacijenta: ";
                std::cin.clear();
                std::cin.ignore (1000,'\n');
                std::string pacijent;
                std::getline(std::cin,pacijent);
                int brojac(glavni.DajBrojPregleda());
                glavni.ObrisiPregledePacijenta(pacijent);
                brojac-=glavni.DajBrojPregleda();
                std::cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;brojac&lt;&lt;" pregleda"&lt;&lt;std::endl;
            } else if (broj==4) {
                glavni.ObrisiNajranijiPregled();
<a name="11"></a><font color="#00FF00"><a href="match217-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

                std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;
            } else if (broj==5) {
                std::cout&lt;&lt;"Unesite dan mjesec i godinu : ";
                int dd,mm,gg;
                std::cin&gt;&gt;dd&gt;&gt;mm&gt;&gt;gg;
</font>                Datum date(dd,mm,gg);
                std::cout&lt;&lt;"Pregledi na datum "&lt;&lt;dd&lt;&lt;" "&lt;&lt;mm&lt;&lt;" "&lt;&lt;gg&lt;&lt;" su:"&lt;&lt;std::endl;
                glavni.IspisiPregledeNaDatum(date);
            } else if (broj==6) {
                glavni.IspisiSvePreglede();
            } else if (broj==7) {
                glavni.IsprazniKolekciju();
                break;
            }
        }
<a name="4"></a><font color="#FF00FF"><a href="match217-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

    } catch (std::domain_error d) {
        std::cout&lt;&lt;d.what()&lt;&lt;std::endl;
    } catch (std::range_error r) {
        std::cout&lt;&lt;r.what()&lt;&lt;std::endl;
    }
    return 0;
</font>}</pre>
</body>
</html>
