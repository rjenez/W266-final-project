<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student1581.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student5979.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;tuple&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;initializer_list&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;
#include &lt;new&gt;

class Datum{
    int dan,mjesec,godina;
    public:
    Datum (int dan, int mjesec, int godina);
    Datum(const Datum &amp; a){
        dan=a.dan;
        mjesec=a.mjesec;
        godina=a.godina;
    }
<a name="0"></a><font color="#FF0000"><a href="match770-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

    void Postavi (int dan, int mjesec, int godina);
    std::tuple&lt;int,int,int&gt; Ocitaj() const{
        return std::make_tuple(dan,mjesec,godina);
    }
    void Ispisi() const{
        std::cout &lt;&lt;dan &lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina;
    }
};
Datum::Datum(int dan, int mjesec, int godina){
    int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>    if( godina % 4== 0 &amp;&amp; godina %  100 != 0 or godina % 400==0) broj_dana[1]++;
    if(godina&lt;1 or mjesec&lt;1 or dan &lt;1 or dan &gt;broj_dana[mjesec-1])
        throw std::domain_error("Neispravan datum!");
<a name="7"></a><font color="#0000FF"><a href="match770-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

    Datum::dan=dan;Datum::mjesec=mjesec;Datum::godina=godina;
}
void Datum::Postavi(int dan, int mjesec, int godina){
    int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
</font>    if( godina % 4== 0 &amp;&amp; godina %  100 != 0 or godina % 400==0) broj_dana[1]++;
    if(godina&lt;1 or mjesec&lt;1 or dan &lt;1 or dan &gt;broj_dana[mjesec-1])
        throw std::domain_error("Neispravan datum");
    Datum::dan=dan;Datum::mjesec=mjesec;Datum::godina=godina;
}
    

class Vrijeme{
    int sati,minute;
    public:
    Vrijeme (int sati, int minute){
        if(sati&lt;0 or sati &gt;23 or minute&lt;0 or minute&gt;59)
            throw std::domain_error("Neispravno vrijeme");
        Vrijeme::sati=sati; Vrijeme::minute=minute;
    }
    void Ispisi() const{
        std::cout &lt;&lt; std::setw(2)&lt;&lt;std::setfill('0')&lt;&lt; std::right&lt;&lt;sati&lt;&lt;":"&lt;&lt; std::right&lt;&lt;std::setw(2)&lt;&lt;minute;
    }
};
class Pregled {
    std::string ime_pacijenta;
    Datum datum_pregleda;
    Vrijeme vrijeme_pregleda;
    public:
    Pregled (const std::string &amp;  ime_pacijenta1 , const Datum &amp;datum_pregleda1,
    const Vrijeme&amp; vrijeme_pregleda1) : ime_pacijenta(ime_pacijenta1), datum_pregleda(datum_pregleda1), vrijeme_pregleda(vrijeme_pregleda1) { }
    
    
    Pregled (const std::string&amp; ime_pacijenta,int dan_pregleda, int mjesec_pregleda
    
    , int godina_pregleda, int sati_pregleda, int minute_pregleda) :datum_pregleda(Datum(dan_pregleda,mjesec_pregleda,godina_pregleda)), vrijeme_pregleda(Vrijeme(sati_pregleda,minute_pregleda)) {
        Pregled::ime_pacijenta = ime_pacijenta;
    }
    
    
    void PromijeniPacijenta(const std::string&amp; ime_pacijenta){
        this-&gt;ime_pacijenta=ime_pacijenta;
    }
    void PromijeniDatum(const Datum&amp; novi_datum){
        this-&gt;datum_pregleda=novi_datum;
    }
    void PromijeniVrijeme(const Vrijeme&amp; novo_vrijeme){
        this-&gt;vrijeme_pregleda=novo_vrijeme;
    }
    Datum DajDatumPregleda() const;
    Vrijeme DajVrijemePregleda () const ;
    std::string DajImePacijenta() const;
    void PomjeriDanUnaprijed();
    void PomjeriDanUnazad();
    static bool DolaziPrije(const Pregled&amp;p1,const Pregled&amp;p2);
    void Ispisi() const;
};

    void Pregled::PomjeriDanUnaprijed(){
         int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
<a name="8"></a><font color="#00FFFF"><a href="match770-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

          auto x=datum_pregleda.Ocitaj();
         if( std::get&lt;2&gt;(x) % 4== 0 &amp;&amp; std::get&lt;2&gt;(x) %  100 != 0 or std::get&lt;2&gt;(x) % 400==0) broj_dana[1]++;
</font>        
        if(std::get&lt;0&gt;(x)==broj_dana[std::get&lt;1&gt;(x)-1]){
            if(std::get&lt;1&gt;(x)==12) datum_pregleda.Postavi(1,1,std::get&lt;2&gt;(x)+1);
            else datum_pregleda.Postavi(1,std::get&lt;1&gt;(x)+1,std::get&lt;2&gt;(x));
        }else{
<a name="9"></a><font color="#FF00FF"><a href="match770-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

            datum_pregleda.Postavi(std::get&lt;0&gt;(x)+1,std::get&lt;1&gt;(x),std::get&lt;2&gt;(x));
</font>        }
    }
        std::string Pregled:: DajImePacijenta() const{
            return ime_pacijenta;
        }
        Datum  Pregled::DajDatumPregleda() const{
            return datum_pregleda;
        }
        Vrijeme Pregled::DajVrijemePregleda () const {
            return vrijeme_pregleda;
        }
        void Pregled::Ispisi() const{
            std::cout &lt;&lt;std::setw(30)&lt;&lt;std::left&lt;&lt;std::setfill(' ') &lt;&lt; ime_pacijenta;
            datum_pregleda.Ispisi();
            std::cout&lt;&lt;" ";
            vrijeme_pregleda.Ispisi(); 
            std::cout&lt;&lt;std::endl;
        };
    
    
        static bool DolaziPrije(const Pregled&amp; p1,const Pregled&amp; p2){
            int d1, d2, m1,m2,g1,g2;
    
            std::tie(d1,m1,g1)=p1.DajDatumPregleda().Ocitaj();
            std::tie(d2,m2,g2)=p2.DajDatumPregleda().Ocitaj();
            if(g1&lt;g2)
                return true;
            else if(g1==g2 and m1&lt;m2)
                return true;
            else if( g1==g2 and m1==m2 and d1&lt;d2)
                return true;
            return false;
        }
  


void  Pregled::PomjeriDanUnazad(){
         int broj_dana[12]{31,28,31,30,31,30,31,31,30,31,30,31};
<a name="10"></a><font color="#FF0000"><a href="match770-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

         auto x=datum_pregleda.Ocitaj();
         if( std::get&lt;2&gt;(x) % 4== 0 &amp;&amp; std::get&lt;2&gt;(x) %  100 != 0 or std::get&lt;2&gt;(x) % 400==0) broj_dana[1]++;
</font>        if(std::get&lt;0&gt;(x)==1){
            if(std::get&lt;1&gt;(x)==1) datum_pregleda.Postavi(31,12,std::get&lt;2&gt;(x)-1);
<a name="2"></a><font color="#0000FF"><a href="match770-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

            else datum_pregleda.Postavi(broj_dana[std::get&lt;1&gt;(x)-2],std::get&lt;1&gt;(x)-1,std::get&lt;2&gt;(x));
        }else{
</font><a name="11"></a><font color="#00FF00"><a href="match770-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

            datum_pregleda.Postavi(std::get&lt;0&gt;(x)-1,std::get&lt;1&gt;(x),std::get&lt;2&gt;(x));
</font>        }
    }
    
class Pregledi{
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt;  pok;
    int registrovani;
    public:
    explicit Pregledi() {registrovani=0;};
<a name="5"></a><font color="#FF0000"><a href="match770-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

    Pregledi (std::initializer_list&lt;Pregled&gt; spisak_pregleda);
  //  ~Pregledi();
    Pregledi(const Pregledi &amp;pregledi);
    Pregledi(Pregledi &amp;&amp;pregledi);
    Pregledi &amp; operator=(const Pregledi &amp; pregledi);
    Pregledi &amp; operator= (Pregledi&amp;&amp;);
</font>    void RegistrirajPregled(const std::string ime_pacijenta ,const Datum&amp; datum_pregleda, const Vrijeme &amp; vrijeme_pregleda);
    void RegistrirajPregled (const std::string&amp; ime_pacijenta,int dan_pregleda, int mjesec_pregleda
    , int godina_pregleda, int sati_pregleda, int minute_pregleda);
    void RegistrirajPregled(std::shared_ptr&lt; Pregled&gt; pregled);
    int DajBrojPregleda() const{
        return registrovani;
    }
    int DajBrojPregledaNaDatum(const Datum&amp; datum) const;
    Pregled&amp; DajNajranijiPregled();
<a name="6"></a><font color="#00FF00"><a href="match770-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

    Pregled DajNajranijiPregled() const;
    void IspraziKolekciju();
    void ObrisiNajranijiPregled();
    void ObrisiPregledePacijenta(const std::string&amp; ime_pacijenta);
    void IspisiPregledeNaDatum(const Datum&amp; datum) const;
    void IspisiSvePreglede()const;
};
    Pregledi::Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda){
</font>        
            registrovani=spisak_pregleda.size();
            pok.resize(spisak_pregleda.size());
            auto a=spisak_pregleda.begin();
            for (int i = 0; i &lt; spisak_pregleda.size(); i++) {
                pok[i]=std::make_shared&lt;Pregled&gt; (*a);
                a++;
            }
        
    }
    Pregledi::Pregledi(Pregledi &amp;&amp;pregledi){
        pok=std::move(pregledi.pok);
        registrovani=pregledi.registrovani;
        pregledi.registrovani=0;
    }
   /* Pregledi:: ~Pregledi(){
        for (int i = 0; i &lt; registrovani; i++) {
            delete  pok[i];
        }
        delete[] pok;
        pok=nullptr;
        registrovani=0;
        velicina=0;
    }*/
    Pregledi::Pregledi(const Pregledi&amp; pregledi){
        std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; p1(pregledi.registrovani) ;
            for (int i = 0; i &lt; pregledi.registrovani; i++) {
                p1[i]= std::make_shared&lt;Pregled&gt;(*(pregledi.pok[i]));
            }
        pok=p1;
        registrovani=pregledi.registrovani;
    }
    Pregledi&amp; Pregledi ::operator=(const Pregledi &amp; pregledi){
       std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; p1(pregledi.registrovani) ;
        if(&amp;pregledi!=this){
      
            for (int i = 0; i &lt; pregledi.registrovani; i++) {
                p1[i]= std::make_shared&lt;Pregled&gt; (*(pregledi.pok[i]));
            }
        pok=p1;
        registrovani=pregledi.registrovani;
        }
        return *this;
    }
    Pregledi&amp; Pregledi :: operator= (Pregledi&amp;&amp; pregledi){
        if(&amp;pregledi!=this){
        std::swap(pok,pregledi.pok);
        std::swap(registrovani,pregledi.registrovani);
        }
        return *this;
    }
    
    void Pregledi::RegistrirajPregled(const std::string ime_pacijenta ,const Datum&amp; datum_pregleda, const Vrijeme &amp; vrijeme_pregleda){
        
        pok.push_back(std::make_shared&lt; Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
        registrovani++;
    }
     void Pregledi::RegistrirajPregled(const std::string&amp; ime_pacijenta,int dan_pregleda, int mjesec_pregleda
    , int godina_pregleda, int sati_pregleda, int minute_pregleda){
        
        pok.push_back(std::make_shared&lt; Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda,godina_pregleda,sati_pregleda,minute_pregleda));
        registrovani++;
    }
    void Pregledi::RegistrirajPregled( std::shared_ptr&lt;Pregled&gt; p1){
        pok.push_back(p1);
        registrovani++;
    }
    int Pregledi::DajBrojPregledaNaDatum(const Datum&amp; datum) const{
        int n;
        if(registrovani==0)
            throw std::domain_error("Nema registriranih pregleda");
        auto a= datum.Ocitaj();
        n=std::count_if(pok.begin(),pok.begin()+registrovani,[a] (std::shared_ptr&lt; Pregled&gt; p){ return a==p-&gt;DajDatumPregleda().Ocitaj();});
        return n;
    }
    
    Pregled&amp;  Pregledi::DajNajranijiPregled(){
        if(registrovani==0)
            throw std::domain_error("Nema registriranih pregleda");
        auto a(std::min_element(pok.begin(),pok.begin()+registrovani,[](std::shared_ptr&lt; Pregled&gt; p1,std::shared_ptr&lt; Pregled&gt; p2){return DolaziPrije(*p1,*p2);}));
        return *(pok[a-pok.begin()]);
    }
    Pregled  Pregledi::DajNajranijiPregled() const{
        if(registrovani==0)
            throw std::domain_error("Nema registriranih pregleda");
        auto a(std::min_element(pok.begin(),pok.begin()+registrovani,[](std::shared_ptr&lt; Pregled&gt; p1,std::shared_ptr&lt; Pregled&gt; p2){return DolaziPrije(*p1,*p2);}));
        return *(pok[a-pok.begin()]);
    }
    
    void Pregledi:: ObrisiNajranijiPregled(){
        if(registrovani==0)
            throw std::domain_error("Nema registriranih pregleda");
        auto a(std::min_element(pok.begin(),pok.begin()+registrovani,[](std::shared_ptr&lt; Pregled&gt; p1,std::shared_ptr&lt; Pregled&gt; p2){return DolaziPrije(*p1,*p2);}));
        pok.erase(a);
        registrovani--;
    }
    void Pregledi::ObrisiPregledePacijenta(const std::string &amp; ime_pacijenta){
        if(registrovani==0)
            throw std::domain_error("Nema registriranih pregleda");
        for (int i = 0; i &lt; registrovani; i++) {
            if(pok[i]-&gt;DajImePacijenta()==ime_pacijenta){
                pok.erase(pok.begin()+i);
                registrovani --;
                i--;
            }
            
        }

        
        
    }
    void Pregledi::IspisiPregledeNaDatum(const Datum&amp; datum) const{
        auto b=datum.Ocitaj();
        std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pomocni ;
        for (int i = 0; i &lt; registrovani; i++) {
            auto a=pok[i]-&gt;DajDatumPregleda().Ocitaj();
            if(a==b){
                pomocni.push_back(pok[i]);
            }
        }
        std::stable_sort(pomocni.begin(),pomocni.end(),[](std::shared_ptr&lt;Pregled&gt; p1, std::shared_ptr&lt;Pregled&gt;p2){
<a name="1"></a><font color="#00FF00"><a href="match770-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_1.gif"/></a>

            return DolaziPrije(*p1,*p2);
        });
        for (int i = 0; i &lt;pomocni.size() ; i++) {
                pomocni[i]-&gt;Ispisi();
        }
    }
    void Pregledi::IspisiSvePreglede() const{
       std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pomocni(registrovani) ;
</font>        std::copy(pok.begin(),pok.begin()+registrovani,pomocni.begin());
        std::stable_sort(pomocni.begin(),pomocni.end(),[](std::shared_ptr&lt;Pregled&gt;p1, std::shared_ptr&lt;Pregled&gt;p2){
            return DolaziPrije(*p1,*p2);
        });
        for (int i = 0; i &lt; registrovani; i++) {
            pomocni[i]-&gt;Ispisi();
        }
    }
    void Pregledi::IspraziKolekciju(){
        for (int i = 0; i &lt; registrovani; i++) {

            pok[i]=nullptr;
        }
        registrovani=0;
    }
int main ()
{


    Pregledi pregledii;
    int uu(0);
    while (1) {
        
        std::string ime;
        std::cout &lt;&lt; "Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
        std::cin &gt;&gt; ime;
        if(uu==0){
        //std::getline(std::cin,ime);
        uu++;
        }
        else{
            /*std::cin.ignore(100,'\n');
            std::getline(std::cin,ime);*/
        }
        if(ime=="kraj") break;
        int dan,mjesec,godina,sati,minute;
<a name="3"></a><font color="#00FFFF"><a href="match770-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

        std::cout &lt;&lt; "Unesite dan mjesec i godinu pregleda: " ;
        std::cin &gt;&gt; dan&gt;&gt;mjesec&gt;&gt;godina;
        std::cout &lt;&lt; "Unesite sate i minute pregleda: " ;
        std::cin &gt;&gt; sati&gt;&gt;minute;
</font>        
            pregledii.RegistrirajPregled(ime,dan,mjesec,godina,sati,minute);

     
    }
    std::cout &lt;&lt; "Trenutno su registrovani sljedeci pregledi" &lt;&lt; std::endl;
    pregledii.IspisiSvePreglede();
    int opcija;

    while (1) {
        std::cout &lt;&lt; "\nOdaberite jednu od sljedecih opcija\n1 - Broj pregleda na datum\n2 - Najraniji pregled\n3 - Obrisi pregled pacijenta\n4 - Obrisi najraniji pregled\n5 - Ispisi sve pregleda na datum\n6 - Ispisi sve preglede\n7 - Kraj programa" &lt;&lt; std::endl;
        std::cin &gt;&gt; opcija;
         std::string s;
         int dan,mjesec,godina,k;
        switch(opcija){
<a name="4"></a><font color="#FF00FF"><a href="match770-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

            case 1:  std::cout &lt;&lt; "Unesite dan mjesec i godinu : " ; std::cin &gt;&gt; dan&gt;&gt;mjesec&gt;&gt;godina; std::cout &lt;&lt; "Broj pregleda na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" je: "&lt;&lt;pregledii.DajBrojPregledaNaDatum(Datum(dan,mjesec,godina))&lt;&lt;std::endl; break;
            case 2:  std::cout &lt;&lt; "Najraniji pregled je:" &lt;&lt; std::endl; pregledii.DajNajranijiPregled().Ispisi(); break;
</font>            case 3: /*std::cin.ignore(100,'\n');*/ std::cout &lt;&lt; "Unesite ime pacijenta: ";k=pregledii.DajBrojPregleda(); /*std::getline(std::cin,s);*/ std::cin &gt;&gt; s ;   pregledii.ObrisiPregledePacijenta(s); std::cout&lt;&lt; "Uspjesno obrisano "&lt;&lt;k-pregledii.DajBrojPregleda()&lt;&lt;" pregleda"&lt;&lt;std::endl; break;
            case 4: try{pregledii.ObrisiNajranijiPregled(); std::cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;std::endl;} catch (std::domain_error a){ std::cout &lt;&lt; a.what() &lt;&lt; std::endl;} break;
            case 5: std::cout &lt;&lt; "Unesite dan mjesec i godinu : "; std::cin &gt;&gt; dan&gt;&gt;mjesec&gt;&gt;godina;std::cout &lt;&lt; "Pregledi na datum "&lt;&lt;dan&lt;&lt;" "&lt;&lt;mjesec&lt;&lt;" "&lt;&lt;godina&lt;&lt;" su:"&lt;&lt;std::endl;  pregledii.IspisiPregledeNaDatum(Datum(dan,mjesec,godina)); break;
            case 6: pregledii.IspisiSvePreglede(); break;
            case 7: return 0;
           
            
        }
    }

	return 0;
}
</pre>
</body>
</html>
