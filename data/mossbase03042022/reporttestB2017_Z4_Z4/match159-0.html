<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student4124.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student4124.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;stdexcept&gt;
#include &lt;initializer_list&gt;
#include &lt;memory&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;

<a name="1"></a><font color="#00FF00"><a href="match159-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_42.gif"/></a>

class Datum
{
    int daan, mjeesec, goodina;
    
public:

    Datum (int dan, int mjesec, int godina) {
        Postavi(dan, mjesec, godina);
    }
    
    void Postavi (int dan, int mjesec, int godina);
    
    int DajDan () const {
        return daan;
    }
    
    int DajMjesec () const {
        return mjeesec;
    }
    
    int DajGodinu () const {
        return goodina;
    }
    
    void Ispisi () const {
        std::cout&lt;&lt; daan&lt;&lt; "/"&lt;&lt; mjeesec&lt;&lt; "/"&lt;&lt; goodina;
    }
};

class Vrijeme
{
    
    int sec, min;
    
public:

    Vrijeme (int sati, int minute) {
        Postavi(sati, minute);
    }
    
    void Postavi (int sati, int minute) {
        if (sati&lt;0 || minute&lt;0 || sati&gt;23 || minute&gt;59) 
        throw std::domain_error ("Neispravno vrijeme");
        sec=sati;
        min=minute;
    }
    
    int DajSate () const {
        return sec;
    }
    
    int DajMinute () const {
        return min;
    }
    
    void Ispisi () const {
        std::cout&lt;&lt; std::setfill('0')&lt;&lt; std::setw(2)&lt;&lt; std::right&lt;&lt; sec&lt;&lt; ":"&lt;&lt; std::setw(2)&lt;&lt; std::right&lt;&lt; std::setfill('0')&lt;&lt; min;
    }
};

class Pregled
{
    
    std::string ime;
    Datum pr;
    Vrijeme vr;
    
public:

    Pregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda) : ime(ime_pacijenta), pr(datum_pregleda.DajDan(),datum_pregleda.DajMjesec(),datum_pregleda.DajGodinu()),
        vr(vrijeme_pregleda.DajSate(),vrijeme_pregleda.DajMinute()) {}
        
    Pregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda) :
        ime(ime_pacijenta), pr(dan_pregleda, mjesec_pregleda, godina_pregleda), vr(sati_pregleda, minute_pregleda) {}
        
    void PromijeniPacijenta (const std::string &amp;ime_pacijenta) {
        ime=ime_pacijenta;
    }
    
    void PromijeniDatum (const Datum &amp;novi_datum) {
        pr.Postavi(novi_datum.DajDan(), novi_datum.DajMjesec(), novi_datum.DajGodinu());
    }
    
    void PromijeniVrijeme (const Vrijeme &amp;novo_vrijeme) {
        vr.Postavi(novo_vrijeme.DajSate(), novo_vrijeme.DajMinute());
    }
    
    void PomjeriDanUnaprijed ();
    
    void PomjeriDanUnazad ();
    
    std::string DajImePacijenta () const {
        return ime;
    }
    
    Datum DajDatumPregleda () const {
        return pr;
    }
    
    Vrijeme DajVrijemePregleda () const {
        return vr;
    }
    
    static bool DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2) ;
    
    void Ispisi () const;
};

class Pregledi
{
    std::vector&lt;std::shared_ptr&lt;Pregled&gt;&gt; pregl;
    
public:

    Pregledi()=default;
    Pregledi (const Pregledi &amp;pregledi): pregl(pregledi.pregl.size()) {
        for(int i(0); i&lt;pregledi.pregl.size(); i++)
            pregl[i]=std::make_shared&lt;Pregled&gt;(*pregledi.pregl[i]);
    }
    
    Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda) : pregl(spisak_pregleda.size()) {
        auto it(spisak_pregleda.begin());
        for(int i(0); i&lt;pregl.size(); i++)
            pregl[i]=std::make_shared&lt;Pregled&gt;(*it++);
    }
    
    Pregledi (Pregledi &amp;&amp;pregledi)=default;
    Pregledi &amp;operator=(const Pregledi &amp;pregledi);
    Pregledi &amp;operator=(Pregledi &amp;&amp;pregledi) = default;
    
    void RegistrirajPregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda);
    
    void RegistrirajPregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda);
    
    void RegistrirajPregled (std::shared_ptr&lt;Pregled&gt; pregled) ;
    
    int DajBrojPregleda () const {
        return pregl.size();
    }
    
    int DajBrojPregledaNaDatum (const Datum &amp;datum) const {
        if(pregl.size()==0) throw std::domain_error ("Nema registriranih pregleda");
        auto kopija(pregl);
        return std::count_if(kopija.begin(), kopija.end(), [datum](const std::shared_ptr&lt;Pregled&gt; p1) {
            return (p1-&gt;DajDatumPregleda().DajDan()==datum.DajDan() &amp;&amp; p1-&gt;DajDatumPregleda().DajMjesec()==datum.DajMjesec() &amp;&amp; p1-&gt;DajDatumPregleda().DajGodinu()==datum.DajGodinu());
        });
    }
    
    Pregled &amp;DajNajranijiPregled() ;
    Pregled DajNajranijiPregled() const;
    void IprazniKolekciju() {
        for(int i(0); i&lt;pregl.size(); i++)
            pregl[i]=nullptr;
    }
    
    void ObrisiNajranijiPregled ();
    void ObrisiPregledePacijenta (const std::string &amp;ime_pacijenta) ;
    void IspisiPregledeNaDatum (Datum &amp;datum) const;
    void IspisiSvePreglede () const;
};

int main()
{
    
    try {
        try {
            int broj_pacijenata;
            std::cout&lt;&lt; "Unesite broj pacijenata: ";
            std::cin&gt;&gt; broj_pacijenata;
            Pregledi pregledi;
            for(int i(0); i&lt;broj_pacijenata; i++) {
                std::cout&lt;&lt; "Unesi ime pacijenata: ";
                std::string ime;
                std::cin&gt;&gt; ime;
                std::cout&lt;&lt; "Unesi datum pregleda (d m g): "&lt;&lt; std::endl;
                int d, m, g;
                std::cin&gt;&gt; d&gt;&gt; m&gt;&gt; g;
                std::cout&lt;&lt; "Unesi vrijeme pregleda (h m): "&lt;&lt; std::endl;
                int h, min;
                std::cin&gt;&gt;h&gt;&gt;min;
                pregledi.RegistrirajPregled(ime, {d, m, g}, {h, min});
            }
            pregledi.IspisiSvePreglede();
        } catch(std::range_error izuzetak) {
            std::cout&lt;&lt;izuzetak.what();
        }
    } catch(std::domain_error izuzetak) {
        std::cout&lt;&lt;izuzetak.what();
    }
    return 0;
}

void Datum::Postavi (int dan, int mjesec, int godina)
{
    int br_dana[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
</font>    if(godina%4==0 &amp;&amp; (godina%100!=0 || godina%400==0)) br_dana[1]++;
<a name="0"></a><font color="#FF0000"><a href="match159-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_54.gif"/></a>

    if(godina&lt;1 || dan&lt;1 || mjesec&lt;1 || mjesec&gt;12 || dan&gt;br_dana[mjesec-1])
        throw std::domain_error ("Neispravan datum");
    daan=dan;
    mjeesec=mjesec;
    goodina=godina;
}

void Pregled::PomjeriDanUnaprijed ()
{
    try {
        Datum dat(DajDatumPregleda());
        dat.Postavi(dat.DajDan()+1, dat.DajMjesec(), dat.DajGodinu());
        pr=dat;
    } catch(...) {
        try {
            Datum dat(DajDatumPregleda());
            dat.Postavi(1, dat.DajMjesec()+1, dat.DajGodinu());
            pr=dat;
        } catch(...) {
            Datum dat(DajDatumPregleda());
            dat.Postavi(1, 1, dat.DajGodinu()+1);
            pr=dat;
        }
    }

}

void Pregled::PomjeriDanUnazad ()
{
    try {
        Datum dat(DajDatumPregleda());
        dat.Postavi(dat.DajDan()-1, dat.DajMjesec(), dat.DajGodinu());
        pr=dat;
    } catch(...) {
        try {
            int br_dana[12] {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
            Datum dat(DajDatumPregleda());
            if(dat.DajGodinu()%4==0 &amp;&amp; (dat.DajGodinu()%100!=0 || dat.DajGodinu()%400==0)) br_dana[1]++;
            dat.Postavi(br_dana[dat.DajMjesec()-2], dat.DajMjesec()-1, dat.DajGodinu());
            pr=dat;
        } catch(...) {
            Datum dat(DajDatumPregleda());
            dat.Postavi(31, 12, dat.DajGodinu()-1);
            pr=dat;
        }
    }
}

bool DolaziPrije (const Pregled &amp;p1, const Pregled &amp;p2)
{
    if(p1.DajDatumPregleda().DajGodinu()&lt;p2.DajDatumPregleda().DajGodinu())
        return true;
    if(p1.DajDatumPregleda().DajGodinu()==p2.DajDatumPregleda().DajGodinu()) {
        if(p1.DajDatumPregleda().DajMjesec()&lt;p2.DajDatumPregleda().DajMjesec())
            return true;
        if(p1.DajDatumPregleda().DajMjesec()==p2.DajDatumPregleda().DajMjesec()) {
            if(p1.DajDatumPregleda().DajDan()&lt;p2.DajDatumPregleda().DajDan())
                return true;
            if(p1.DajDatumPregleda().DajDan()==p2.DajDatumPregleda().DajDan()) {
                if(p1.DajVrijemePregleda().DajSate()&lt;p2.DajVrijemePregleda().DajSate())
                    return true;
                if(p1.DajVrijemePregleda().DajSate()==p2.DajVrijemePregleda().DajSate()) {
                    if(p1.DajVrijemePregleda().DajMinute()&lt;p2.DajVrijemePregleda().DajMinute())
                        return true;
                    return false;
                }
                return false;
            }
            return false;
        }
        return false;
    }
    return false;
}

void Pregled::Ispisi () const
{
    std::cout&lt;&lt; std::setw(30)&lt;&lt; std::setfill (' ')&lt;&lt; std::left&lt;&lt; ime;
    pr.Ispisi();
    std::cout&lt;&lt; " ";
    vr.Ispisi();
    std::cout&lt;&lt; std::endl;
}

Pregledi &amp;Pregledi::operator=(const Pregledi &amp;pregledi)
{
    pregl.resize(pregledi.pregl.size());
    for(int i(0); i&lt;pregledi.pregl.size(); i++)
        pregl[i]=std::make_shared&lt;Pregled&gt;(*pregledi.pregl[i]);
    return *this;
} 

void Pregledi::RegistrirajPregled (const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda)
{
    std::shared_ptr&lt;Pregled&gt; pregled;
    pregled=std::make_shared&lt;Pregled&gt;(ime_pacijenta, datum_pregleda, vrijeme_pregleda);
    pregl.push_back(pregled);
}

void Pregledi::RegistrirajPregled (const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda, int godina_pregleda, int sati_pregleda, int minute_pregleda)
{
    std::shared_ptr&lt;Pregled&gt; pregled;
    pregled=std::make_shared&lt;Pregled&gt;(ime_pacijenta, dan_pregleda, mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda);
    pregl.push_back(pregled);
}

void Pregledi::RegistrirajPregled (std::shared_ptr&lt;Pregled&gt; pregled)
{
    std::shared_ptr&lt;Pregled&gt; pr(pregled);
    pregl.push_back(pr);
}

Pregled &amp;Pregledi::DajNajranijiPregled ()
{
    if(pregl.size()==0)
        throw std::domain_error ("Nema registriranih pregleda");
    auto kopija(pregl);
    return **std::min_element(kopija.begin(), kopija.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return DolaziPrije(*p1, *p2);
    });
}

Pregled Pregledi::DajNajranijiPregled () const
{
    if(pregl.size()==0)
        throw std::domain_error ("Nema registriranih pregleda");
    auto kopija(pregl);
    return **std::min_element(kopija.begin(), kopija.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return DolaziPrije(*p1, *p2);
    });
}

void Pregledi::ObrisiNajranijiPregled ()
{
    if(pregl.size()==0)
        throw std::range_error ("Prazna kolekcija");
    for(int i(0); i&lt;pregl.size(); i++) {
        if(pregl[i]-&gt;DajDatumPregleda().DajDan()==DajNajranijiPregled().DajDatumPregleda().DajDan() &amp;&amp;
                pregl[i]-&gt;DajDatumPregleda().DajMjesec()==DajNajranijiPregled().DajDatumPregleda().DajMjesec() &amp;&amp;
                pregl[i]-&gt;DajDatumPregleda().DajGodinu()==DajNajranijiPregled().DajDatumPregleda().DajGodinu()) {
            pregl[i]=nullptr;
            for(int j(i); j&lt;pregl.size()-1; j++)
                pregl[j]=pregl[j+1];
        }
    }
}

void Pregledi::ObrisiPregledePacijenta (const std::string &amp;ime_pacijenta)
{
    for(int i(0); i&lt;pregl.size(); i++) {
        if(pregl[i]-&gt;DajImePacijenta()==ime_pacijenta) {
            pregl[i]=nullptr;
            for(int j(i); j&lt;pregl.size()-1; j++)
                pregl[j]=pregl[j+1];
        }
    }
}

void Pregledi::IspisiPregledeNaDatum (Datum &amp;datum) const
{
    auto kopija(pregl);
    std::sort(kopija.begin(), kopija.end(), [](std::shared_ptr&lt;Pregled&gt; v1, std::shared_ptr&lt;Pregled&gt; v2) {
        return DolaziPrije(*v1, *v2);
    });
    std::for_each(kopija.begin(), kopija.end(), [datum](const std::shared_ptr&lt;Pregled&gt; p) {
        if(p-&gt;DajDatumPregleda().DajDan()==datum.DajDan() &amp;&amp;
                p-&gt;DajDatumPregleda().DajMjesec()==datum.DajMjesec() &amp;&amp;
                p-&gt;DajDatumPregleda().DajGodinu()==datum.DajGodinu())
            p-&gt;Ispisi();
    });
}

void Pregledi::IspisiSvePreglede () const
{
    auto kopija(pregl);
    std::sort(kopija.begin(), kopija.end(), [](const std::shared_ptr&lt;Pregled&gt; p1, const std::shared_ptr&lt;Pregled&gt; p2) {
        return DolaziPrije(*p1, *p2);
    });
    for(int i(0); i&lt;kopija.size(); i++)
        kopija[i]-&gt;Ispisi();
</font>}
</pre>
</body>
</html>
