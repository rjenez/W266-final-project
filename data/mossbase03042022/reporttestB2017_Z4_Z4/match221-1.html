<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student9825.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2017/Z4/Z4/student6594.cpp<p></p><pre>
/B2017/2018: ZadaÄ‡a 4, Zadatak 3
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;
#include &lt;tuple&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;memory&gt;
#include &lt;vector&gt;
using namespace std;

bool prestupna(int year){
     return ( (year % 4 == 0 &amp;&amp; year % 100 != 0) || ( year % 400 == 0));
}



class Datum{
<a name="0"></a><font color="#FF0000"><a href="match221-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

     int dan,mjesec,godina;
public:
     Datum(int dan=1, int mjesec=1, int godina=1){
          vector&lt;int&gt; dani{31,28,31,30,31,30,31,31,30,31,30,31};
          if(prestupna(godina)) dani[1]++;
          if(godina &lt; 1 || dan &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &gt; dani[mjesec-1]) throw domain_error("Neispravan datum!");
          Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
     }
     void Postavi(int dan, int mjesec, int godina){
          vector&lt;int&gt; dani{31,28,31,30,31,30,31,31,30,31,30,31};
          if(prestupna(godina)) dani[1]++;
          if(godina &lt; 1 || dan &lt; 1 || mjesec &lt; 1 || mjesec &gt; 12 || dan &gt; dani[mjesec-1]) throw domain_error("Neispravan datum!");
          Datum::dan=dan; Datum::mjesec=mjesec; Datum::godina=godina;
     }
     std::tuple&lt;int, int, int&gt; Ocitaj() const { return make_tuple(dan,mjesec,godina);}
     void Ispisi() const {cout&lt;&lt;dan&lt;&lt;"/"&lt;&lt;mjesec&lt;&lt;"/"&lt;&lt;godina&lt;&lt;" ";}
</font>
};

class Vrijeme{
<a name="4"></a><font color="#FF00FF"><a href="match221-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_1.gif"/></a>

  int sati,minute;
public:
     Vrijeme(int sati=0, int minute=0){
          if(sati&gt;23 || sati&lt;0 || minute&gt;59 || minute&lt;0)throw domain_error("Neispravno vrijeme!");
</font>          Vrijeme::sati=sati; Vrijeme::minute=minute;
     }
     void Postavi(int sati, int minute){
          if(sati&gt;23 || sati&lt;0 || minute&gt;59 || minute&lt;0)throw domain_error("Neispravno vrijeme!");
<a name="2"></a><font color="#0000FF"><a href="match221-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_1.gif"/></a>

          Vrijeme::sati=sati; Vrijeme::minute=minute;
     }
     std::pair&lt;int, int&gt; Ocitaj () const{
          return make_pair(sati,minute);
     }
     void Ispisi() const{cout &lt;&lt;setw(2)&lt;&lt;right&lt;&lt;setfill('0')&lt;&lt;sati &lt;&lt; ":" &lt;&lt;setfill('0') &lt;&lt;setw(2) &lt;&lt; minute ;}
</font>};

class Pregled{
     string ime;
     Datum dat;
     Vrijeme vr;
public:
     Pregled(const std::string &amp;ime_pacijenta, const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
           ime=ime_pacijenta; dat=datum_pregleda; vr=vrijeme_pregleda;
      }
     Pregled(const std::string &amp;ime_pacijenta, int dan_pregleda, int mjesec_pregleda,int godina_pregleda, int sati_pregleda, int minute_pregleda){
           ime=ime_pacijenta;
           dat=Datum(dan_pregleda,mjesec_pregleda,godina_pregleda);
<a name="5"></a><font color="#FF0000"><a href="match221-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_1.gif"/></a>

           vr=Vrijeme(sati_pregleda,minute_pregleda);
      }
     void PromijeniPacijenta(const std::string &amp;ime_pacijenta){
          ime=ime_pacijenta;
     }
     void PromijeniDatum(const Datum &amp;novi_datum){
          dat=(novi_datum);
     }
     void PromijeniVrijeme(const Vrijeme &amp;novo_vrijeme){
          vr=(novo_vrijeme);
     }
     void PomjeriDanUnaprijed(){
</font>          tuple&lt;int,int,int&gt; t=dat.Ocitaj();
          int dan=get&lt;0&gt;(t), mj=get&lt;1&gt;(t), god=get&lt;2&gt;(t);
          dan++;
          if(dan==32 &amp;&amp; (mj==1 || mj==3 || mj==5 || mj==7 || mj==8 || mj==10 || mj==12)){
               dan=1; mj++;
               if(mj==13) { mj=1; god++;}
          }
          else if(dan==31 &amp;&amp;(mj==4 || mj==6 || mj==9 || mj==11)){
               dan=1; mj++; if(mj==13) { mj=1; god++;}
          }
          else if(mj==2 &amp;&amp; ((dan==29 &amp;&amp; !prestupna(god))||(dan==30 &amp;&amp; prestupna(god)))){
               dan=1; mj=3;
          }
          dat=Datum(dan,mj,god);
     }
     void PomjeriDanUnazad(){
          tuple&lt;int,int,int&gt; t=dat.Ocitaj();
          int dan=get&lt;0&gt;(t), mj=get&lt;1&gt;(t), god=get&lt;2&gt;(t);
          dan--;
          if(dan==0){
               mj--;
               if(mj==0) { mj=12; god--;}
               if(mj==1 || mj==3 || mj==5 || mj==7 || mj==8 || mj==10 || mj==12){
                    dan=31;
               }
               else if(mj==4 || mj==6 || mj==9 || mj==11) dan=30;
               else if(mj==2 &amp;&amp; prestupna(god)) mj=29;
               else mj=28;
          }
<a name="8"></a><font color="#00FFFF"><a href="match221-0.html#8" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_0.gif"/></a>

          dat=Datum(dan,mj,god);
     }
     std::string DajImePacijenta() const{ return ime;}
     Datum DajDatumPregleda() const { return dat;}
     Vrijeme DajVrijemePregleda() const { return vr;}
     static bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
</font><a name="6"></a><font color="#00FF00"><a href="match221-0.html#6" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

          vector&lt;int&gt; dani{31,28,31,30,31,30,31,31,30,31,30,31};
</font>          int suma2=get&lt;0&gt;(p2.DajDatumPregleda().Ocitaj()), suma1=get&lt;0&gt;(p1.DajDatumPregleda().Ocitaj());
          int mj1=get&lt;1&gt;(p1.DajDatumPregleda().Ocitaj()), mj2=get&lt;1&gt;(p2.DajDatumPregleda().Ocitaj());
          int god1=get&lt;2&gt;((p1.DajDatumPregleda().Ocitaj())), god2=get&lt;2&gt;((p2.DajDatumPregleda().Ocitaj()));
          int sat1=p1.DajVrijemePregleda().Ocitaj().first, sat2=p2.DajVrijemePregleda().Ocitaj().first;
          int min1=p1.DajVrijemePregleda().Ocitaj().second, min2=p2.DajVrijemePregleda().Ocitaj().second;
          if(god1&lt;god2) return true;
          else if(god1==god2){
               if(mj1&lt;mj2) return true;
               else if(mj1==mj2){
                    if(suma1&lt;suma2) return true;
                    else if(suma1==suma2){
                         if(sat1&lt;sat2) return true;
                         else if(sat1==sat2){
                              if(min1&lt;min2) return true;
                              return false;
                         }
                         else return false;
                    }
                    else return false;
               }
               else return false;
          }
          else return false;
     }
     void Ispisi() const{
        cout&lt;&lt;setw(30)&lt;&lt;left&lt;&lt;setfill(' ')&lt;&lt;ime;
        dat.Ispisi();
        vr.Ispisi();
        cout&lt;&lt;endl;
     }

};

bool DolaziPrije(const Pregled &amp;p1, const Pregled &amp;p2){
<a name="7"></a><font color="#0000FF"><a href="match221-0.html#7" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_0.gif"/></a>

          vector&lt;int&gt; dani{31,28,31,30,31,30,31,31,30,31,30,31};
</font>          //p1.Ispisi(); p2.Ispisi();
          int suma2=get&lt;0&gt;(p2.DajDatumPregleda().Ocitaj()), suma1=get&lt;0&gt;(p1.DajDatumPregleda().Ocitaj());
          int mj1=get&lt;1&gt;(p1.DajDatumPregleda().Ocitaj()), mj2=get&lt;1&gt;(p2.DajDatumPregleda().Ocitaj());
          int god1=get&lt;2&gt;((p1.DajDatumPregleda().Ocitaj())), god2=get&lt;2&gt;((p2.DajDatumPregleda().Ocitaj()));
          int sat1=p1.DajVrijemePregleda().Ocitaj().first, sat2=p2.DajVrijemePregleda().Ocitaj().first;
          int min1=p1.DajVrijemePregleda().Ocitaj().second, min2=p2.DajVrijemePregleda().Ocitaj().second;
          if(god1&lt;god2) return true;
          else if(god1==god2){
               if(mj1&lt;mj2) return true;
               else if(mj1==mj2){
                    if(suma1&lt;suma2) return true;
                    else if(suma1==suma2){
                         if(sat1&lt;sat2) return true;
                         else if(sat1==sat2){
                              if(min1&lt;min2) return true;
                              return false;
                         }
                         else return false;
                    }
                    else return false;
               }
               else return false;
          }
          else return false;
     }

class Pregledi{
     vector&lt;shared_ptr&lt;Pregled&gt;&gt; niz;
public:
     explicit Pregledi(){
          niz.resize(0);
     }
     Pregledi(std::initializer_list&lt;Pregled&gt; spisak_pregleda){
          niz.resize(spisak_pregleda.size());
          int i=0;
          for(auto it=spisak_pregleda.begin(); it!=spisak_pregleda.end(); it++)
               niz[i++]=make_shared&lt;Pregled&gt;(*it);    
     }
     ~Pregledi(){
          for(int i=0; i&lt;niz.size(); i++) niz[i]=nullptr;
     }
     Pregledi(const Pregledi &amp;pregledi){
          niz.resize(pregledi.niz.size());
          for(int i=0; i&lt;niz.size(); i++) niz[i]=make_shared&lt;Pregled&gt;(*pregledi.niz[i]);
     }
     Pregledi(Pregledi &amp;&amp;pregledi){
          niz.resize(pregledi.niz.size());
          for(int i=0; i&lt;niz.size(); i++) niz[i]=pregledi.niz[i];
          for(int i=0; i&lt;pregledi.niz.size(); i++) pregledi.niz[i]=nullptr;
       
     }
     Pregledi &amp;operator =(const Pregledi &amp;pregledi){
          if(this==&amp;pregledi) return *this;
          for(int i=0; i&lt;niz.size(); i++)
               niz[i]=nullptr;
          niz.resize(pregledi.niz.size());
          for(int i=0; i&lt;niz.size(); i++)
          niz[i] = make_shared&lt;Pregled&gt;(*pregledi.niz[i]);
          return *this;
     }
     Pregledi &amp;operator =(Pregledi &amp;&amp;pregledi){
           if(this==&amp;pregledi) return *this;
          for(int i=0; i&lt;niz.size(); i++)
               niz[i]=nullptr;

          niz.resize(pregledi.niz.size());

          for(int i=0; i&lt;niz.size(); i++)
               niz[i] = pregledi.niz[i];
          for(int i=0; i&lt;niz.size(); i++)
               pregledi.niz[i] = nullptr;
<a name="3"></a><font color="#00FFFF"><a href="match221-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_1.gif"/></a>

          pregledi.niz.resize(0);
          return *this;
    
     }
     void RegistrirajPregled(const std::string &amp;ime_pacijenta,const Datum &amp;datum_pregleda, const Vrijeme &amp;vrijeme_pregleda){
         // if(stanje==kapacitet) throw range_error("Dostignut maksimalni broj pregleda");
          niz.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,datum_pregleda,vrijeme_pregleda));
     }
     void RegistrirajPregled(const std::string &amp;ime_pacijenta, const int &amp;dan_pregleda,const int &amp;mjesec_pregleda, const int &amp;godina_pregleda,const int &amp; sati_pregleda,const int &amp; minute_pregleda){
</font>          //if(stanje==kapacitet) throw range_error("Dostignut maksimalni broj pregleda");
          niz.push_back(make_shared&lt;Pregled&gt;(ime_pacijenta,dan_pregleda,mjesec_pregleda, godina_pregleda, sati_pregleda, minute_pregleda));
      }
     void RegistrirajPregled(shared_ptr&lt;Pregled&gt; pregled){
          //if(stanje==kapacitet) throw range_error("Dostignut maksimalni broj pregleda");
          niz.push_back(pregled);
     }
     int DajBrojPregleda() const { return niz.size();}
     int DajBrojPregledaNaDatum(const Datum &amp;datum) const{
          try{
          return count_if(niz.begin(), niz.end(), [datum](shared_ptr&lt;Pregled&gt; p){
               auto t1=datum.Ocitaj();
               auto t2=p-&gt;DajDatumPregleda().Ocitaj();
               return (get&lt;0&gt;(t1)==get&lt;0&gt;(t2) &amp;&amp; get&lt;1&gt;(t1)==get&lt;1&gt;(t2) &amp;&amp; get&lt;2&gt;(t1)==get&lt;2&gt;(t2));
          });
          } catch(...) {throw domain_error("Nema registriranih pregleda");}
     }
     Pregled &amp;DajNajranijiPregled(){
          if (niz.size()==0) throw domain_error("Nema registriranih pregleda");
          return *(*(min_element(niz.begin(), niz.end(), [](shared_ptr&lt;Pregled&gt; p1, shared_ptr&lt;Pregled&gt; p2){return(DolaziPrije(*p1,*p2));})));
     }
     Pregled DajNajranijiPregled() const{
          if (niz.size()==0) throw domain_error("Nema registriranih pregleda");
         return *(*(min_element(niz.begin(), niz.end(), [](shared_ptr&lt;Pregled&gt; p1, shared_ptr&lt;Pregled&gt; p2){return(DolaziPrije(*p1,*p2));})));
     }
     void IsprazniKolekciju(){
          if(niz.size()==0) throw domain_error("Nema registriranih pregleda");
<a name="9"></a><font color="#FF00FF"><a href="match221-0.html#9" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_0.gif"/></a>

          for(int i=0; i&lt;niz.size(); i++) niz[i]=nullptr;
         
     }
     void ObrisiNajranijiPregled(){
          if(niz.size()==0) throw range_error("Prazna kolekcija");
</font>          shared_ptr&lt;Pregled&gt; pom=niz[0];
          int ind=0;
          for(int i=0; i&lt;niz.size(); i++)
          {
               if(DolaziPrije(*niz[i],*pom)){pom = niz[i]; ind = i;}
          }
          niz[ind]=nullptr;
<a name="10"></a><font color="#FF0000"><a href="match221-0.html#10" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_0.gif"/></a>

          for(int i = ind; i&lt;niz.size()-1; i++)
                    niz[i] = niz[i+1];
           
          niz.resize(niz.size()-1);
</font>          //niz[stanje-1]-&gt;Ispisi();
     }
<a name="1"></a><font color="#00FF00"><a href="match221-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

     void ObrisiPregledePacijenta(const std::string &amp;ime_pacijenta){
          
          int br=0;
          for(int i=0; i&lt;niz.size(); i++)
               if(niz[i]-&gt;DajImePacijenta()==ime_pacijenta){
                    br++;
                    niz[i]=nullptr; 
                    for(int j=i; j&lt;niz.size()-1; j++) niz[j]=niz[j+1];
                    niz.resize(niz.size()-1);
</font>                    i--;
               }
          if(br!=0) cout&lt;&lt;"Uspjesno obrisano "&lt;&lt;br&lt;&lt;" pregleda"&lt;&lt;endl;
     }
     void IspisiPregledeNaDatum(const Datum &amp;datum) const{
          //Pregled **pom=new Pregled*[DajBrojPregledaNaDatum(datum)];
          std::vector&lt;shared_ptr&lt;Pregled&gt;&gt; pom; pom.resize(niz.size());
          int j=0;
          auto t1=datum.Ocitaj();
          for(int i=0; i&lt;niz.size(); i++)
          {
               auto t2=niz[i]-&gt;DajDatumPregleda().Ocitaj();
                    if(get&lt;0&gt;(t1)==get&lt;0&gt;(t2) &amp;&amp; get&lt;1&gt;(t1)==get&lt;1&gt;(t2) &amp;&amp; get&lt;2&gt;(t1)==get&lt;2&gt;(t2))
                         {
                              pom[j] = make_shared&lt;Pregled&gt;(*niz[i]);
                              j++;
                         }
          }

          for(int i=0; i&lt;DajBrojPregledaNaDatum(datum);i++)
               for(int j=i; j&lt;DajBrojPregledaNaDatum(datum);j++)
                   {
                    if(DolaziPrije(*pom[j], *pom[i]))
                     {
                         auto pom1 = pom[i];
                         pom[i] = pom[j];
                         pom[j] = pom1;
                    }
               }

            for(int i=0; i&lt;DajBrojPregledaNaDatum(datum); i++)
                pom[i]-&gt;Ispisi();

          for(int i=0; i&lt;DajBrojPregledaNaDatum(datum); i++)
               pom[i]=nullptr;
     }
     void IspisiSvePreglede() const{
           std::vector&lt;shared_ptr&lt;Pregled&gt;&gt; pom; pom.resize(niz.size());
          for(int i=0; i&lt;niz.size(); i++)
               pom[i] = niz[i];

          for(int i=0; i&lt;niz.size(); i++)
               for(int j=i; j&lt;niz.size(); j++)
               {
                  //  pom[j]-&gt;Ispisi(); pom[i]-&gt;Ispisi();
                    if(DolaziPrije(*pom[j], *pom[i]))
                    {
                         auto pom1 = pom[i];
                         pom[i] = pom[j];
                         pom[j] = pom1;
                    }
               }
          //cout&lt;&lt;endl&lt;&lt;"ASdaDSASDSD"&lt;&lt;endl;
          for(int i=0; i&lt;niz.size(); i++)
            pom[i]-&gt;Ispisi();
          
     }

};

int main ()
{
     //cout&lt;&lt;"Unesite maksimalan broj pregleda: ";
     //int n; cin&gt;&gt;n; 
     Pregledi p; int n;
     while(1){
          cout&lt;&lt;"Unesite ime novog pacijenta ili 'kraj' za zavrsetak unosa: ";
          string ime; cin&gt;&gt;ime;
          if(ime=="kraj") break;
          cout&lt;&lt;"Unesite dan mjesec i godinu pregleda: ";
          int d,m,g; cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
          cout&lt;&lt;"Unesite sate i minute pregleda: ";
          int s,min; cin&gt;&gt;s&gt;&gt;min;
          p.RegistrirajPregled(ime,d,m,g,s,min);
     }
     cout&lt;&lt;"Trenutno su registrovani sljedeci pregledi"&lt;&lt;endl;
     p.IspisiSvePreglede();
     try{
     while(1){
          cout&lt;&lt;endl;
          cout&lt;&lt;"Odaberite jednu od sljedecih opcija"&lt;&lt;endl;
          cout&lt;&lt;"1 - Broj pregleda na datum"&lt;&lt;endl;
          cout&lt;&lt;"2 - Najraniji pregled"&lt;&lt;endl;
          cout&lt;&lt;"3 - Obrisi pregled pacijenta"&lt;&lt;endl;
          cout&lt;&lt;"4 - Obrisi najraniji pregled"&lt;&lt;endl;
          cout&lt;&lt;"5 - Ispisi sve pregleda na datum"&lt;&lt;endl;
          cout&lt;&lt;"6 - Ispisi sve preglede"&lt;&lt;endl;
          cout&lt;&lt;"7 - Kraj programa"&lt;&lt;endl;
          cin&gt;&gt;n;
          if(n==1){
               cout&lt;&lt;"Unesite dan mjesec i godinu : "; int d,m,g; cin&gt;&gt;d&gt;&gt;m&gt;&gt;g;
               Datum dat=Datum(d,m,g);
               cout&lt;&lt;"Broj pregleda na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" je: "&lt;&lt;p.DajBrojPregledaNaDatum(dat)&lt;&lt;endl;
               
          }
          else if(n==2){
               cout&lt;&lt;"Najraniji pregled je: "&lt;&lt;endl;
               p.DajNajranijiPregled().Ispisi();
          }
          else if(n==3){
               string pom;
               cout&lt;&lt;"Unesite ime pacijenta: ";
               cin&gt;&gt;pom;
               p.ObrisiPregledePacijenta(pom);
               
          }
          else if(n==4){
               p.ObrisiNajranijiPregled(); cout&lt;&lt;"Najraniji pregled uspjesno obrisan"&lt;&lt;endl;
          }
          else if(n==5){
               cout&lt;&lt;"Unesite dan mjesec i godinu : ";
               int d,m,g; cin&gt;&gt;d&gt;&gt;m&gt;&gt;g; Datum dat=Datum(d,m,g);
<a name="11"></a><font color="#00FF00"><a href="match221-0.html#11" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_0.gif"/></a>

               cout&lt;&lt;"Pregledi na datum "&lt;&lt;d&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;g&lt;&lt;" su: "&lt;&lt;endl;
               p.IspisiPregledeNaDatum(dat);
</font>          }
          else if(n==6){
               p.IspisiSvePreglede();
          }
          else if(n==7){
               break;
          }
     }
     } catch(domain_error d) { cout&lt;&lt;d.what();}
     catch(range_error r) { cout&lt;&lt;r.what(); } 
     return 0;
}
</pre>
</body>
</html>
