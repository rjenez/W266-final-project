<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student6656.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student6656.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match27-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_12.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;cctype&gt;
#include &lt;vector&gt;
using std::vector;
using std::make_pair;
using std::string;
using std::map;
using std::set;

map&lt;string, set&lt;int&gt;&gt; KreirajIndeksPojmova (string s) {
    map&lt;string, set&lt;int&gt;&gt; mapa;
    for (int i=0; i&lt;s.length(); i++) {
        if ((i==0 &amp;&amp; ((s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') || (s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9'))) || (((s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') || (s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')) &amp;&amp; !((s[i-1]&gt;='A' &amp;&amp; s[i-1]&lt;='Z') || (s[i-1]&gt;='a' &amp;&amp; s[i-1]&lt;='z') || (s[i-1]&gt;='0' &amp;&amp; s[i-1]&lt;='9')))) {
</font><a name="0"></a><font color="#FF0000"><a href="match27-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_81.gif"/></a>

            int pozicija(i);
            string rijec;
            while (i&lt;s.length() &amp;&amp; ((s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') || (s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9'))) {
                rijec+=s[i];
                i++;
            }
            bool postoji(false);
            map&lt;string, set&lt;int&gt;&gt;::iterator iter;
            for (auto it=mapa.begin(); it!=mapa.end(); it++) {
                iter=it;
                string pom_rijec(rijec);
                for (int j=0; j&lt;pom_rijec.length(); j++)
                    pom_rijec[j]=std::toupper(pom_rijec[j]);
                string m_rijec(it-&gt;first);
                for (int j=0; j&lt;m_rijec.length(); j++)
                    m_rijec[j]=std::toupper(m_rijec[j]);
                if (pom_rijec==m_rijec) {
                    postoji=true;
                    break;
                }
            }
            set&lt;int&gt; skup;
            if (!postoji) {
                skup.insert(pozicija);
                for (int i=0; i&lt;rijec.length(); i++) {
                    if (rijec[i]&gt;='A' &amp;&amp; rijec[i]&lt;='Z')
                        rijec[i]+='a'-'A';
                }
                mapa.insert(make_pair(rijec, skup));
            }
            else {
                iter-&gt;second.insert(pozicija);
            }
        }
    }
    return mapa;
}

set&lt;int&gt; PretraziIndeksPojmova (string rijec, map&lt;string, set&lt;int&gt;&gt; mapa) {
    set&lt;int&gt; skup;
    for (auto it=mapa.begin(); it!=mapa.end(); it++) {
        string pom_rijec(rijec);
        for (int i=0; i&lt;pom_rijec.length(); i++)
            pom_rijec[i]=std::toupper(pom_rijec[i]);
        string m_rijec(it-&gt;first);
        for (int i=0; i&lt;m_rijec.length(); i++)
            m_rijec[i]=std::toupper(m_rijec[i]);
        if (pom_rijec==m_rijec)
            return it-&gt;second;
    }
    throw std::logic_error ("Pojam nije nadjen");
}

void IspisiIndeksPojmova (const map&lt;string, set&lt;int&gt;&gt; &amp;mapa) {
    for (auto it=mapa.begin(); it!=mapa.end(); it++) {
        vector&lt;int&gt; v;
        std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        for (auto it2=it-&gt;second.begin(); it2!=it-&gt;second.end(); it2++) {
            v.push_back(*it2);
        }
        for (int i=0; i&lt;v.size(); i++) {
            if (i!=v.size()-1)
                std::cout &lt;&lt; v[i] &lt;&lt; ",";
            else 
                std::cout &lt;&lt; v[i];
        }
        std::cout &lt;&lt; std::endl;
    }
}

int main ()
{
    string s;
    std::cout &lt;&lt; "Unesite tekst: ";
    std::getline (std::cin, s);
    map&lt;string, set&lt;int&gt;&gt; mapa(KreirajIndeksPojmova(s));
    IspisiIndeksPojmova(mapa);
    for (;;) {
        try {
            string rijec;
            std::cout &lt;&lt; "Unesite rijec: ";
            std::getline (std::cin, rijec);
            if (rijec==".")
                break;
            set&lt;int&gt; skup(PretraziIndeksPojmova(rijec, mapa));
            for (int x : skup)
                std::cout &lt;&lt; x &lt;&lt; " ";
            std::cout &lt;&lt; std::endl;
        }
        catch (...) {
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
</font>        }
    }
	return 0;
}</pre>
</body>
</html>
