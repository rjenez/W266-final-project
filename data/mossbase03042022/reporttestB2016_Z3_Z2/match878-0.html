<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student9673.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student9673.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

std::string DajMala (std::string s){
    for(int i = 0; i &lt; s.length(); i++) s[i]=std::tolower(s[i]);
    return s;
}

bool SlovoIliBroj(char znak){
    return (((znak&gt;='a' &amp;&amp; znak&lt;='z') || (znak&gt;='A' &amp;&amp; znak&lt;='Z')) || (znak&gt;='0' &amp;&amp; znak&lt;='9'));
}

std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string s){
    std::map&lt;std::string, std::set&lt;int&gt;&gt; m;
    std::string rijec;
    bool TraziKraj(false), PomocniKraj(false), Iste(false);
    int pocetak, kraj;
    
    for(int i = 0; i &lt; s.length(); i++){
        
        if(!TraziKraj &amp;&amp; SlovoIliBroj(s[i]) &amp;&amp; (i == 0 || !SlovoIliBroj(s[i-1]))){
            pocetak = i; TraziKraj = true;
            std::set&lt;int&gt; indexi;
            
            while(SlovoIliBroj(s[i]) &amp;&amp; i &lt; s.length()){
                rijec.push_back(s[i]); i++;
            }
            
            kraj = i;
            TraziKraj = false;
            auto it (m.find(rijec));
            
            if(it == m.end()){
                std::string pomoc;
                for (int j = kraj; j &lt; s.length(); j++) {
                    int mjesto(0);
                
                    if(!PomocniKraj &amp;&amp; SlovoIliBroj(s[j]) &amp;&amp; (j == 0 || !SlovoIliBroj(s[j-1]))){
                        mjesto = j;
                        PomocniKraj = true;
            
                        while(SlovoIliBroj(s[j]) &amp;&amp; j &lt; s.length()){
                            pomoc.push_back(s[j]); j++;
                        }
                        
                        PomocniKraj = false; 
                        if (DajMala(rijec) == DajMala(pomoc)) {
                            Iste = true;
                            indexi.insert(mjesto); indexi.insert(pocetak);
                        }
                        pomoc.resize(0);
                    }
                    if(j == s.length()) break;
                }
                if(Iste) { m.insert(std::make_pair(DajMala(rijec), indexi)); Iste = false; }
                else { indexi.insert(pocetak); m.insert(std::make_pair(DajMala(rijec), indexi)); }
            }
            rijec.resize(0); 
        }
        if(i == s.length()) break;
    }
    return m;
}

<a name="1"></a><font color="#00FF00"><a href="match878-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

std::set&lt;int&gt; PretraziIndeksPojmova(std::string s, std::map&lt;std::string, std::set&lt;int&gt;&gt; m){
    auto it (m.find(s));
    if(it == m.end()) throw std::logic_error("Pojam nije nadjen");
</font><a name="0"></a><font color="#FF0000"><a href="match878-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

    return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; m){
    
        for (auto it = m.begin(); it != m.end(); it++) {
            std::cout &lt;&lt; it -&gt; first &lt;&lt; ": ";
            auto kraj (it -&gt; second.end()); kraj--;
</font>                for (auto it1 = it -&gt; second.begin(); it1 != it -&gt; second.end(); it1++) {
                    if(it1 == kraj) std::cout &lt;&lt; *it1;
                    else std::cout &lt;&lt; *it1 &lt;&lt; ",";
                }
<a name="2"></a><font color="#0000FF"><a href="match878-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

        std::cout &lt;&lt; std::endl;
    }
}

int main(){
    std::string s;

    std::cout &lt;&lt; "Unesite tekst: ";
    std::getline(std::cin, s);
    auto m(KreirajIndeksPojmova(s));
</font>    IspisiIndeksPojmova(m);
    
    while(1){
        try{
            std::string t;
            std::cout &lt;&lt; "Unesite rijec: ";
            std::getline(std::cin, t);
            if(t == ".") break;
            auto b (PretraziIndeksPojmova(t,m));
            for(auto x : b) std::cout &lt;&lt; x &lt;&lt; " "; 
            std::cout &lt;&lt; std::endl;
        }
        catch(std::logic_error e){
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
        }
    }
    return 0;
}</pre>
</body>
</html>
