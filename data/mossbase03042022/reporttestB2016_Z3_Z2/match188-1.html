<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7774.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4554.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

<a name="0"></a><font color="#FF0000"><a href="match188-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::cout;
using std::cin;
using std::endl;
using std::map;
using std::string;
using std::set;

typedef map&lt;string,set&lt;int&gt;&gt; Mapa;

bool SlovoCifra(char c) {
    if((c &gt;= 'a' &amp;&amp; c &lt;= 'z') || (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') || (c &gt;= '0' &amp;&amp; c &lt;= '9'))
        return true;
    return false;    
}

void UMala (string &amp;rijec) {
    
    for (auto it = rijec.begin(); it != rijec.end(); it++) {
        if(*it &gt;= 'A' &amp;&amp; *it &lt;= 'Z')
            *it += 'a' - 'A';
    }
}

Mapa KreirajIndeksPojmova(string str) {
    
    Mapa mapa;
    string rijec;
    bool ulaz(true);
    
    for (auto p = str.begin(); p != str.end(); p++) {
        if((ulaz &amp;&amp; SlovoCifra(*p)) || (SlovoCifra(*p) &amp;&amp; !SlovoCifra(*(p-1)))) {
            ulaz = false;        
            auto q(p);
            
            while (SlovoCifra(*q) &amp;&amp; q != str.end()) {
                q++;
            }
            rijec = str.substr(p-str.begin(), q-p);
            UMala(rijec);
            auto it(mapa.find(rijec));
            if(it == mapa.end()) {
                int broj(p-str.begin());
                std::set&lt;int&gt; skup = {broj};
                mapa.insert(std::make_pair(rijec, skup));
            } else { 
                it-&gt;second.insert(p-str.begin());
            }    
            p = --q;
        }
        ulaz = false;
    }
     
    return mapa;
}

set&lt;int&gt; PretraziIndeksPojmova(string rijec, Mapa mapa) {
    
    auto it(mapa.find(rijec));
    
    if(it == mapa.end())
        throw std::logic_error ("Pojam nije nadjen");
        
    return it-&gt;second;    
}

void IspisiIndeksPojmova (Mapa mapa) {
    
    for (auto it = mapa.begin(); it != mapa.end(); it++){
        cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        set&lt;int&gt; skup(it-&gt;second);
        for (auto it2 = skup.begin(); it2 != skup.end() ; it2++) {
            if(++it2 != skup.end())
                cout &lt;&lt; *--it2 &lt;&lt; ",";
            else 
                cout &lt;&lt; *--it2;
        }
        cout &lt;&lt; endl;
    }
}

int main ()
{
    string recenica;
    cout &lt;&lt; "Unesite tekst: ";
    std::getline(std::cin, recenica);
    
    Mapa mapa(KreirajIndeksPojmova(recenica));
    IspisiIndeksPojmova(mapa);
    
    
    string rijec;
    set&lt;int&gt; skup;
    
    for(;;) {
        cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin,rijec);
        
        if(rijec == ".")
            break;
            
        try {
            skup=PretraziIndeksPojmova(rijec, mapa);
        }
        catch (std::logic_error err) {
            std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;
            continue;
        }
        for (auto x : skup) {
            cout &lt;&lt; x &lt;&lt; " ";
        }    
        cout &lt;&lt; endl;
</font>    }
    
	return 0;
}</pre>
</body>
</html>
