<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student8797.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student8797.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;utility&gt;

<a name="0"></a><font color="#FF0000"><a href="match82-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

bool Uslov(char s){
    if(  (s&gt;='a' &amp;&amp; s&lt;='z') || (s&gt;='A' &amp;&amp; s&lt;='Z') || (s&gt;='0' &amp;&amp; s&lt;='9') )
        return true;
    return false;    
}


void Mala(std::string &amp;s){
    for(int i=0; i&lt;s.length();i++)
        if((s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z'))
            s[i]+=32;
}
std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova (std::string s){
    std::map&lt;std::string,std::set&lt;int&gt;&gt; a;
    for(int i=0; i&lt;s.length(); i++){
        bool prvi(false), drugi(false);
        std::string pomocni;
        std::set&lt;int&gt; p;
        while(Uslov(s[i])){
            prvi=true;
            pomocni.push_back(s[i]);
            i++;
        }
        for(int j=0; j&lt;s.length();j++){
            unsigned int w=j;
            unsigned int k=0;
            while(j&lt;s.length() &amp;&amp; k&lt;pomocni.length() &amp;&amp; (s[j]==pomocni[k] || s[j]==pomocni[k]+32 || s[j]==pomocni[k]-32)){
                j++;k++;
                if( k==pomocni.length() &amp;&amp; (w==0 || !Uslov(s[w-1])) &amp;&amp;  (j==s.length()|| !Uslov(s[j]))  ){
                    drugi=true;
                    p.insert(w);
                }
            }
        }
        if(prvi&amp;&amp;drugi){
            Mala(pomocni);
            a.insert(std::make_pair(pomocni,p));
        }
        
    }
    return a;
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string s, std::map&lt;std::string, std::set&lt;int&gt;&gt; m){
    auto p=m.find(s);
    if(p!=m.end())
        return (*p).second;
    throw std::logic_error("Unesena rijec nije nadjena!");    
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; m){
    for(auto p=m.begin(); p!=m.end(); p++){
        std::cout &lt;&lt;(*p).first&lt;&lt;": ";
        int br=0;
        for(auto i=(*p).second.begin(); i!=(*p).second.end(); i++){
            if(br++==(*p).second.size()-1)
                std::cout&lt;&lt;*i;
            else
                std::cout&lt;&lt;*i&lt;&lt;",";
        }        
        std::cout&lt;&lt;std::endl;        
    }
}

int main ()
{   
    std::string s;
    std::cout &lt;&lt; "Unesite tekst: ";
    std::getline(std::cin,s);
    auto a(KreirajIndeksPojmova(s));
    IspisiIndeksPojmova(a);
    while(true){
        std::string rijec;
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
        if(rijec==".") break;
        try {
            auto lol =PretraziIndeksPojmova(rijec,a);
            for(auto i=lol.begin(); i!=lol.end(); i++)
                std::cout&lt;&lt;*i&lt;&lt;" ";
            std::cout &lt;&lt;std::endl;    
        }
        catch (std::logic_error error) {
            std::cout &lt;&lt; error.what() &lt;&lt; std::endl;
        }
        
    }
	return 0;
</font>}</pre>
</body>
</html>
