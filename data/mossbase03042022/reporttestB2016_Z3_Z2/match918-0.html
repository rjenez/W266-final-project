<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7320.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7320.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match918-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;

#define pb push_back
#define mp make_pair
#define ff first
#define ss second

bool ValidnoSlovo(char c) {
  return ((c &gt;= 'A' &amp;&amp; c &lt;= 'Z') || (c &gt;= 'a' &amp;&amp; c &lt;= 'z') || (c &gt;= '0' &amp;&amp; c &lt;= '9'));
}
std::map&lt;std::string, std::set&lt;int&gt; &gt; KreirajIndeksPojmova(std::string s) {
</font>  s += ' ';
  std::vector&lt;std::string&gt; SpisakRijeci; 
  std::string TrenutnaRijec = "";
<a name="2"></a><font color="#0000FF"><a href="match918-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

  std::map&lt;std::string, std::set&lt;int&gt; &gt; Mapa;
  
  for(int i = 0; i &lt; s.length(); i++) {
    if (ValidnoSlovo(s[i])) TrenutnaRijec += s[i];
</font>    else {
      if (TrenutnaRijec.length() &gt; 0) {
        for (int i = 0; i &lt; TrenutnaRijec.length(); i++) 
          if (TrenutnaRijec[i] &gt;= 'A' &amp;&amp; TrenutnaRijec[i] &lt;= 'Z') TrenutnaRijec[i] += 32;
      
        SpisakRijeci.pb(TrenutnaRijec);
        int PocetakRijeci = i - TrenutnaRijec.length(); 
        Mapa[TrenutnaRijec].insert(PocetakRijeci);
        //std::cout &lt;&lt; TrenutnaRijec &lt;&lt; " = " &lt;&lt; PocetakRijeci &lt;&lt; "\n";
      }
      TrenutnaRijec = "";
    }
  }
  
  return Mapa;
}
void IspisiIndeksPojmova(const std::map&lt;std::string, std::set&lt;int&gt; &gt; &amp;Mapa) {
  for(auto x = Mapa.begin(); x != Mapa.end(); x++) {
    std::cout &lt;&lt; x-&gt;ff &lt;&lt; ": ";
    int BrojElemenata = x-&gt;ss.size() - 1;
    for(auto j = x-&gt;ss.begin(); j != x-&gt;ss.end(); j++, BrojElemenata--) 
      if(BrojElemenata) std::cout &lt;&lt; *j &lt;&lt; ",";
      else std::cout &lt;&lt; *j &lt;&lt; "\n";
  }
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string query, const std::map&lt;std::string, std::set&lt;int&gt; &gt; &amp;Mapa) {
  std::set&lt;int&gt; ret;
  bool postoji = 0;
  for (int i = 0; i &lt; query.length(); i++)
    if (query[i] &gt;= 'A' &amp;&amp; query[i] &lt;= 'Z') query[i] += 32;
  for(auto x = Mapa.begin(); x != Mapa.end(); x++) {
    if (x-&gt;ff == query) {
      postoji = 1;
      for (auto y = x-&gt;ss.begin(); y != x-&gt;ss.end(); y++) ret.insert(*y);
    }
  }
  if (!postoji) throw std::logic_error("Pojam nije nadjen");
  return ret;
}
int main () {
  std::cout &lt;&lt; "Unesite tekst: "; std::string Tekst; getline(std::cin, Tekst);
  std::map&lt;std::string, std::set&lt;int&gt; &gt; M = KreirajIndeksPojmova(Tekst);
	IspisiIndeksPojmova(M);
	while (1) {
	  std::string upit;
	  std::set&lt;int&gt; Set;
	  std::cout &lt;&lt; "Unesite rijec: "; std::cin &gt;&gt; upit;
	  if (upit == ".") break;
	  try {
<a name="1"></a><font color="#00FF00"><a href="match918-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_6.gif"/></a>

	    Set = PretraziIndeksPojmova(upit, M);
	    for (auto x = Set.begin(); x != Set.end(); x++) std::cout &lt;&lt; *x &lt;&lt; " ";
	    std::cout &lt;&lt; "\n";
</font>	  }
	  catch(std::logic_error c) {
	    std::cout &lt;&lt; "Unesena rijec nije nadjena!\n";
	  }
	}
	return 0;
}</pre>
</body>
</html>
