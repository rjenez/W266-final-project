<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2464.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student1266.cpp<p></p><pre>
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;algorithm&gt;

<a name="0"></a><font color="#FF0000"><a href="match171-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

using std::cin;
using std::cout;
using std::string;
using std::map;
using std::set;

map&lt;string, set&lt;int&gt;&gt; KreirajIndeksPojmova(string s)
{
    map&lt;string, set&lt;int&gt;&gt; mapa;
    int i=0;
    while(i&lt;s.length())
    {
        if(((s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') || (s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')) &amp;&amp; (i==0 || (i&gt;0 &amp;&amp; !((s[i-1]&gt;='A' &amp;&amp; s[i-1]&lt;='Z') || (s[i-1]&gt;='a' &amp;&amp; s[i-1]&lt;='z') || (s[i-1]&gt;='0' &amp;&amp; s[i-1]&lt;='9')))))
        {
            int j=i;
            string pom="";
            while(j&lt;s.length() &amp;&amp; ((s[j]&gt;='A' &amp;&amp; s[j]&lt;='Z') || (s[j]&gt;='a' &amp;&amp; s[j]&lt;='z') || (s[j]&gt;='0' &amp;&amp; s[j]&lt;='9'))) 
            {
                char t=s[j];
                if(t&gt;='A' &amp;&amp; t&lt;='Z') t+=('a'-'A');
                pom+=t;
                j++;
            }
            mapa[pom].insert(i);
        }
        i++;
    }
    return mapa;
}

set&lt;int&gt; PretraziIndeksPojmova(string s, map&lt;string, set&lt;int&gt;&gt; mapa)
{
    auto u=mapa.find(s);
    if(u==mapa.end()) throw std::logic_error("Pojam nije nadjen");
    return mapa[s];
}

void IspisiIndeksPojmova(map&lt;string, set&lt;int&gt;&gt; mapa)
{
    std::for_each(mapa.begin(), mapa.end(), [](std::pair&lt;string, set&lt;int&gt;&gt; pr)
    {
        cout &lt;&lt; pr.first &lt;&lt; ": ";
        int brojz=0;
        for(int a : pr.second)
        {
            cout &lt;&lt; a;
            brojz++;
            if(brojz&lt;pr.second.size()) cout &lt;&lt; ",";
        }
        cout &lt;&lt; "\n";
    });
}

int main ()
{
    string s;
    cout &lt;&lt; "Unesite tekst: ";
    std::getline(cin, s);
    map&lt;string, set&lt;int&gt;&gt; m=KreirajIndeksPojmova(s);
    IspisiIndeksPojmova(m);
    string t;
    do
    {
        cout &lt;&lt; "Unesite rijec: ";
        std::getline(cin, t);
        if(t!=".")
        {
            try
            {
                set&lt;int&gt; pj=PretraziIndeksPojmova(t, m);
                for(int x : pj) cout &lt;&lt; x &lt;&lt; " ";
                cout &lt;&lt; "\n";
            }
            catch(...)
            {
                cout &lt;&lt; "Unesena rijec nije nadjena!\n";
            }
        }
    } while(t!=".");
</font>	return 0;
}</pre>
</body>
</html>
