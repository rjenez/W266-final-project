<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student5244.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student6040.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match59-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_96.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt; 
#include &lt;stdexcept&gt;

std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova (std::string s){
    std::transform(s.begin(),s.end(),s.begin(),tolower);
    std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa;
    std::vector&lt;std::string&gt; rijeci;
    int razmak(1);
    int i(0);
    while(i&lt;s.length()){
        std::string temp;
        if(s[i]==' ') razmak=1;
        else if(razmak==1){
            razmak=0;
        }
        while(s[i]!=' ' &amp;&amp;  i&lt;s.length() &amp;&amp; ((s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9'))){
            temp+=s[i];
            i++;
        }
        bool b(false);
        for(int i=0;i&lt;rijeci.size();i++){
            if(rijeci[i]==temp){
                b=true;
                break;
            }
        }
        if(b==false &amp;&amp; temp!=""){
            rijeci.push_back(temp);
        }
        i++; 
    }
    for(int i=0;i&lt;rijeci.size();i++){
        std::set&lt;int&gt; indexi;
        for(int j=0;j&lt;s.length();j++){
            std::string temp;
            int h=j;
            while((s[h]&gt;='a' &amp;&amp; s[h]&lt;='z') || (s[h]&gt;='0' &amp;&amp; s[h]&lt;='9')){
                temp+=s[h];
                h++;
                j++;
            }
            if(temp==rijeci[i]) indexi.insert(h-rijeci[i].length());
        }
        mapa.insert(std::make_pair(rijeci[i], indexi));
    }
    
   
    return mapa;
}

std::set&lt;int&gt;  PretraziIndeksPojmova(std::string s, std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa){
     std::transform(s.begin(),s.end(),s.begin(),tolower);
      auto it(mapa.find(s));
     if(!mapa.count(s)) throw std::logic_error("Pojam nije nadjen");
      return it-&gt;second;
}

void IspisiIndeksPojmova (std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa){
    auto it(mapa.begin());
    for(it=mapa.begin();it!=mapa.end();++it){
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        std::set&lt;int&gt; set(it-&gt;second);
        std::set&lt;int&gt;::iterator ite;
        for(ite=set.begin();ite!=set.end();++ite){
            if(ite!=--set.end()) std::cout&lt;&lt;*ite&lt;&lt;",";
            else std::cout&lt;&lt;*ite;
        }
        std::cout&lt;&lt;std::endl;
    }
    /*for(auto x:mapa){
        std::cout&lt;&lt;x.first&lt;&lt;": ";
        auto it2=x.second.end();
        it2--;
        for(auto it=x.second.begin();it!=it2;it++){
            std::cout&lt;&lt;*it&lt;&lt;",";
        }
        std::cout&lt;&lt;*it2&lt;&lt;std::endl;
    }*/
}

int main ()
{  
        std::string s, rijec;
        std::cout&lt;&lt;"Unesite tekst: ";
        std::getline(std::cin, s);
        
        IspisiIndeksPojmova(KreirajIndeksPojmova(s));
        for(;;){
            std::cout&lt;&lt;"Unesite rijec: ";
            std::getline(std::cin, rijec);
            if(rijec==".") break;
            try{
                std::set&lt;int&gt; set(PretraziIndeksPojmova(rijec, KreirajIndeksPojmova(s)));
                std::set&lt;int&gt;::iterator it;
                for(it=set.begin();it!=set.end();++it){
                    if(it!=--set.end()) std::cout&lt;&lt;*it&lt;&lt;" ";
                    else std::cout&lt;&lt;*it&lt;&lt;std::endl;
                }
            }
            catch(std::logic_error e){
                std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
</font>            }
            
        }
    
    
	return 0;
}
</pre>
</body>
</html>
