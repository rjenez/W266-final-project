<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4770.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4770.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match866-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_6.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;cctype&gt;
#include &lt;stdexcept&gt;
bool slovo(char a)
{
    if((a &gt;= 'A' &amp;&amp; a &lt;= 'Z') || (a &gt;= 'a' &amp;&amp; a &lt;= 'z') || (a &gt;= '0' &amp;&amp; a &lt;= '9')) return true;
    return false;
}
std::string MalaSlova(std::string s)
</font>{
    std::string a;
    for(int i = 0; i &lt; s.size(); i++)
    {
        if(s[i] &gt;= 'A' &amp;&amp; s[i] &lt;= 'Z') a.push_back(s[i] + 'a' - 'A');
        else a.push_back(s[i]);
    } return a;
}

std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova (std::string tekst)
{
    std::string s(MalaSlova(tekst));
    std::vector&lt;std::string&gt; vs;
    int n = s.size();
    for(int i = 0; i &lt; n; i++)
    {
        int poc;
        while(i &lt; n &amp;&amp; !slovo(s[i])) i++;
        poc = i;
        int kraj(0);
        while(i &lt; n &amp;&amp; slovo(s[i])) i++;
        kraj = i;
        if(kraj - poc &gt; 0) vs.push_back(s.substr(poc, kraj - poc));
    }
    for(int i = 0; i &lt; vs.size(); i++)
    {
        bool obrisano(false);
        for(int j = i + 1; j &lt; vs.size(); j++)
        {
            if(vs[i] == vs[j]) 
            {
                vs.erase(vs.begin() + j);
                j--;
                obrisano = true;
            }
        } if (obrisano) i--;
    }
    std::vector&lt;std::vector&lt;int&gt;&gt; novi(vs.size());
    int m, k;
    int vel(vs.size());
    for(int i = 0; i &lt; vel; i++)
    {
        m = vs[i].size();
        k = 0;
        for(int j = 0; j &lt;= n - m; j++)
        {
           if( (j == 0 || j == n - m || !slovo(s[j-1])) &amp;&amp; !slovo(s[m+j]) &amp;&amp; vs[i] == s.substr(j,m))
            {  
                novi[i].push_back(j);
                k++;
            }
        }
    }
    std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa;
    for(int i = 0; i &lt; vel; i++)
    {
        for(int j = 0; j &lt; novi[i].size(); j++)
        {
            mapa[vs[i]].insert(novi[i][j]);
        }
    }
    return mapa;
}
std::set&lt;int&gt; PretraziIndeksPojmova (std::string s, std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa)
{
    bool ima(false);
    std::string tmp = MalaSlova(s);
    std::set&lt;int&gt; setic;
    for(auto it = mapa.begin(); it != mapa.end(); it++)
    {
        if(tmp == it -&gt; first) 
        {
            ima = true;
            for(auto i = (it -&gt; second).begin(); i != (it -&gt; second).end(); i++)
                setic.insert(*i);
        }
    }
    if(!ima) throw std::logic_error("Pojam nije nadjen");
    return setic;
}
void IspisiIndeksPojmova (std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa)
{
    for(auto it = mapa.begin(); it != mapa.end(); it++)
    {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for(auto x = (it -&gt; second).begin(); x != (it -&gt; second).end(); x++)
        {
            if( x == it -&gt; second.begin()) std::cout&lt;&lt;*x;
            else std::cout&lt;&lt;","&lt;&lt;*x;
        } std::cout&lt;&lt;std::endl;
            
    }
} 
int main ()
{
    std::cout&lt;&lt;"Unesite tekst: ";
    std::string tekst;
<a name="1"></a><font color="#00FF00"><a href="match866-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    std::getline(std::cin, tekst);
    std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa(KreirajIndeksPojmova(tekst));
    IspisiIndeksPojmova(mapa);
    std::string pom = { "."};
</font>    for(;;)
    {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string rijec;
        std::getline(std::cin, rijec);
        if(rijec == pom) break;
        try {
<a name="2"></a><font color="#0000FF"><a href="match866-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

            std::set&lt;int&gt; setic(PretraziIndeksPojmova(rijec, mapa));
            for(auto it = setic.begin(); it != setic.end(); it++)
                std::cout&lt;&lt;*it&lt;&lt;" ";
</font>            } 
        catch(std::logic_error)
            {
                std::cout&lt;&lt;"Unesena rijec nije nadjena!";
            }
        std::cout&lt;&lt;std::endl;
    }
    
	return 0;
}</pre>
</body>
</html>
