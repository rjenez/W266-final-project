<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student6571.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student6571.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match64-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string str){
    std::set&lt;int&gt; skup;
    std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa;
 int poc_ind=0;
 std::vector&lt;std::string&gt; vektor;
for(int i=0; i&lt;str.size(); i++){
    if(str[i]&gt;='A'&amp;&amp;str[i]&lt;='Z'){
        str[i]=std::tolower(str[i]);
    }
     
    if(!(str[i]&gt;='a'&amp;&amp;str[i]&lt;='z' || str[i]&gt;='A'&amp;&amp;str[i]&lt;='Z' || str[i]&gt;='0'&amp;&amp;str[i]&lt;='9' )){
       std::string rijec=str.substr(poc_ind, i-poc_ind);
             if(mapa.count(rijec)!=1){
             mapa[rijec].insert(poc_ind);
             } 
             else {
                 mapa[rijec].insert(poc_ind);
                 
             }
             poc_ind = i+1;
    }
   
   
}

    std::string rijec=str.substr(poc_ind, str.size()-poc_ind);
    if(mapa.count(rijec)!=1){
        mapa[rijec].insert(poc_ind);
    } else {
        mapa[rijec].insert(poc_ind);
    }
    
    std::string rijec1="";
      if(mapa.count(rijec1)==1){
          mapa.erase("");
      }

  return mapa;
}

std::set&lt;int&gt; PretraziIndeksPojmova(std::string rijec, std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa){
    std::set&lt;int&gt; novi_skup;
    int brojac=0;
        for(auto it=mapa.begin(); it!=mapa.end(); it++){
            if(it-&gt;first==rijec){
        for(auto i=it-&gt;second.begin(); i!=it-&gt;second.end(); i++){
            novi_skup.insert(*i);
            brojac++;
        }
    } 
            
}
if( brojac==0) throw std::logic_error ("Unesena rijec nije nadjena!");
    
    return novi_skup;
   
}
void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt;mapa ){
    for(auto it=mapa.begin(); it!=mapa.end(); it++){
        int brojac =0;
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        
        for(auto j=it-&gt;second.begin(); j!=it-&gt;second.end(); j++){
            brojac ++;
            
        }
        int i=0;
        for(auto x=it-&gt;second.begin(); x!=it-&gt;second.end(); x++){
            if(i&lt;brojac-1){
                std::cout&lt;&lt;*x&lt;&lt;",";
                i++;
            } else {
                std::cout&lt;&lt;*x;
                std::cout&lt;&lt;std::endl;
            }
        }
    
    
    
    }
   
    
}

int main ()
{

    std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa;
    std::set&lt;int&gt; skup;
    std::string tekst;
    std::string rijec;
    std::cout&lt;&lt;"Unesite tekst: ";
    std::getline(std::cin, tekst);
   auto k=KreirajIndeksPojmova(tekst);
   
   IspisiIndeksPojmova(k);
   for(;;){
   std::cout&lt;&lt;"Unesite rijec: ";
   std::getline(std::cin, rijec);
   if(rijec==".") break;
   try{
       
   auto u(PretraziIndeksPojmova(rijec, k));
   for(auto x:u){
     std::cout&lt;&lt;x&lt;&lt;" ";
    
   }
   std::cout&lt;&lt;std::endl;
   
   
   
   }
   catch(std::logic_error izuzetak){
       std::cout&lt;&lt;izuzetak.what()&lt;&lt;std::endl;;
   }}
	return 0;
</font>}</pre>
</body>
</html>
