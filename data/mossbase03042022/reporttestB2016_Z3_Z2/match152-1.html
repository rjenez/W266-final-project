<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2967.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4296.cpp<p></p><pre>
#include &lt;set&gt;
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
<a name="0"></a><font color="#FF0000"><a href="match152-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

using std::cout;
using std::cin;
using std::endl;
bool Znak(char c)
{
    if((c&gt;='0' &amp;&amp; c&lt;='9') || (c&gt;='A' &amp;&amp; c&lt;='Z') || (c&gt;='a' &amp;&amp; c&lt;='z'))
        return false;
    else return true;
}
std::string rijec(int i, std::string s)
{
    std::string p;
    while(i&lt;s.size() &amp;&amp; !Znak(s[i])) {
        p.push_back(tolower(s[i]));
        i++;
    }
    return p;
}
std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string s)
{
    std::map&lt;std::string, std::set&lt;int&gt;&gt; M;
    int i {};
    while(i&lt;s.size()) {
        while(Znak(s[i]) &amp;&amp; i&lt;s.size())
            i++;
        if(i==s.size())
            break;
        std::string p=rijec(i,s);
        auto it = M.find(p);
        if (it != M.end()) it-&gt;second.insert(i);
        else M.insert(std::make_pair(p,std::set&lt;int&gt;  {i}));
        i+=p.size();
    }
    return M;
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string s, std::map&lt;std::string, std::set&lt;int&gt;&gt; M)
{
    std::set&lt;int&gt; S;
    auto it = M.find(s);
    if (it != M.end()) {
        S=it-&gt;second;
    } else throw std::logic_error("Pojam nije nadjen");
    return S;
}
void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; M)
{
    for(auto it = M.begin(); it != M.end(); it++) {
        cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        auto ita=it-&gt;second.begin();
        while(ita!=it-&gt;second.end()) {
            ita++;
            if(ita==it-&gt;second.end()) {
                ita--;
                cout&lt;&lt;*ita;
                break;
            } else {
                ita--;
                std::cout &lt;&lt;*ita&lt;&lt;",";
            }
            ita++;

        }

        cout&lt;&lt;endl;
    }
}
int main ()
{
    std::map&lt;std::string, std::set&lt;int&gt;&gt; M;
    cout&lt;&lt;"Unesite tekst: ";
    std::string s;
    std::getline(std::cin, s);
    M=KreirajIndeksPojmova(s);
    IspisiIndeksPojmova(M);
    for(;;) {
        cout&lt;&lt;"Unesite rijec: ";
        std::string s;
        std::getline(std::cin, s);
        if(s==".")
            break;
        try {
            std::set&lt;int&gt; S;
            S=PretraziIndeksPojmova(s,M);
            for(auto it: S)
                cout&lt;&lt;it&lt;&lt;" ";
            cout&lt;&lt;endl;
        } catch(...) {
            cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;endl;
            
        }
    }
    return 0;
</font>}</pre>
</body>
</html>
