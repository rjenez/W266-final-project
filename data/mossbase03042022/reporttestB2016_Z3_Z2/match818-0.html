<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7791.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7791.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match818-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;
//#include &lt;cstring&gt;
using std::cout;
using std::cin;
using std::vector;
using std::string;
using std::map;
using std::set;
bool Provjera(char a)
</font>{
    if((a&gt;='a' &amp;&amp; a&lt;='z') || (a&gt;='A' &amp;&amp; a&lt;='Z') || (a&gt;='0' &amp;&amp; a&lt;='9'))
    return true;
    return false;
}
vector&lt;string&gt; PovadiRijeci(string recenica)
{
    vector&lt;string&gt; rijeci;
    
    for(int i=0;i&lt;recenica.size();i++)
    {
        if(i==0 &amp;&amp; i&lt;recenica.size())
        {
            string pom;
            while(!Provjera(recenica[i]) &amp;&amp; i&lt;recenica.size())
            i++;
            if(i!=recenica.size())
            {
                while(Provjera(recenica[i]))
                {
                    pom.push_back(recenica[i]);
                    i++;
                    if(i==recenica.size())
                    break;
                }
            }
<a name="2"></a><font color="#0000FF"><a href="match818-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

            for(int j=0;j&lt;pom.size();j++)
            {
                if(pom[j]&gt;='A' &amp;&amp; pom[j]&lt;='Z')
</font>                {
                    pom[j]=pom[j]-('A'-'a');
                }
            }
            if(pom.size()!=0)
            rijeci.push_back(pom);
        }
        if(i&lt;recenica.size() &amp;&amp; i!=0)
        {
            string pom;
            if(!Provjera(recenica[i-1]))
            {
                while(!Provjera(recenica[i]) &amp;&amp; i&lt;recenica.size())
                i++;
                if(i!=recenica.size())
                {
                    while(Provjera(recenica[i]) &amp;&amp; i&lt;recenica.size())
                    {
                        pom.push_back(recenica[i]);
                        i++;
                    }
                    for(int j=0;j&lt;pom.size();j++)
                    {
                        if(pom[j]&gt;='A' &amp;&amp; pom[j]&lt;='Z')
                        {
                            pom[j]=pom[j]-('A'-'a');
                        }
                    }
                    bool temp(true);
                    for(int j=0;j&lt;rijeci.size();j++)
                    {
                        if(pom==rijeci[j])
                        temp=false;
                    }
                    if(temp &amp;&amp; pom.size()!=0)
                    rijeci.push_back(pom);
                }
            }
        }
        if(i==recenica.size()-1 || i==recenica.size())
        break;
    }
    return rijeci;
}
map&lt;string,set&lt;int&gt;&gt; KreirajIndeksPojmova(string recenica)
{
  vector&lt;string&gt; rijeci;
 for(int i=0;i&lt;recenica.size();i++)
  {
      if(recenica[i]&gt;='A' &amp;&amp; recenica[i]&lt;='Z')
      recenica[i]=recenica[i]-('A'-'a');
  }
  rijeci=PovadiRijeci(recenica);
  map&lt;string,set&lt;int&gt;&gt; indeksi;
  for(int i=0;i&lt;rijeci.size();i++)
  {
      set&lt;int&gt; skup;
      bool pronadjeno(false);
      for(int j=0;j&lt;recenica.size();j++)
      {
          bool pom(false);
          bool pom2(false);
          if(j==0)
          {
              pom=true;
              if(rijeci[i]==recenica.substr(j,rijeci[i].size()) &amp;&amp; recenica.size()==rijeci[i].size())
              {
                pronadjeno=true;
                skup.insert(j); 
              }
              else if(rijeci[i]==recenica.substr(j,rijeci[i].size()) &amp;&amp; !Provjera(recenica[j+rijeci[i].size()]))
              {
                  pronadjeno=true;
                  skup.insert(j);
              }
          }
        if(j==recenica.size()-rijeci[i].size() &amp;&amp; !pom)
        {
            if(rijeci[i]==recenica.substr(j,rijeci[i].size()) &amp;&amp; !Provjera(recenica[j-1]))
            {
              pronadjeno=true;
              skup.insert(j);  
              pom2=true;
            }
        }
         if(!pom &amp;&amp; !pom2)
          if(rijeci[i]==recenica.substr(j,rijeci[i].size()) &amp;&amp; !Provjera(recenica[j-1]) &amp;&amp; !Provjera(recenica[j+rijeci[i].size()]))
          {
          pronadjeno=true;
          skup.insert(j);
          }
      }
     // if(pronadjeno)
      indeksi.insert(std::make_pair(rijeci[i],skup));
  }
  return indeksi;
}

void IspisiIndeksPojmova(map&lt;string,set&lt;int&gt;&gt; mapa)
{
    if(mapa.size()!=0)
    for(auto it=mapa.begin();it!=mapa.end();it++)
    {
        cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int brojac(0);
        for(auto pom: it-&gt;second)
        {
        cout&lt;&lt;pom;
        if(brojac!=it-&gt;second.size()-1)
        cout&lt;&lt;",";
        brojac++;
        }
        cout&lt;&lt;std::endl;
    }
}
<a name="1"></a><font color="#00FF00"><a href="match818-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

set&lt;int&gt; PretraziIndeksPojmova(string rijec,map&lt;string,set&lt;int&gt;&gt; mapa)
{
   // bool pronadjeno(false);
    set&lt;int&gt; skup;
    for(int i=0;i&lt;rijec.size();i++)
    {
        if(rijec[i]&gt;='A' &amp;&amp; rijec[i]&lt;='Z')
</font>        rijec[i]=rijec[i]-('A'-'a');
    }
    for(auto it=mapa.begin();it!=mapa.end();it++)
    {
        if(rijec==it-&gt;first)
        {
       // pronadjeno=true;
        skup=it-&gt;second;
        return skup;
        }
    }
   // if(!pronadjeno)
    throw std::logic_error("Pojam nije nadjen");
}
int main ()
{
    cout&lt;&lt;"Unesite tekst: ";
    string recenica;
    std::getline(cin,recenica);
    auto mapa=KreirajIndeksPojmova(recenica);
    IspisiIndeksPojmova(mapa);
   // cin.ignore(10000,'\n');
    while(true)
    {
      string pom;
      cout&lt;&lt;"Unesite rijec: ";
      std::getline(cin,pom);
      if(pom.size()==1 &amp;&amp; pom[0]=='.')
      break;
      try
      {
          auto skup=PretraziIndeksPojmova(pom,mapa);
          for(auto pom: skup)
          cout&lt;&lt;pom&lt;&lt;" ";
          cout&lt;&lt;std::endl;
          
      }
      catch(std::logic_error izuzetak)
      {
          cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
      }
    }
	return 0;
}</pre>
</body>
</html>
