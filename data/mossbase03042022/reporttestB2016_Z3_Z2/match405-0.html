<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2267.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2267.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;cctype&gt;
#include &lt;utility&gt;
#include &lt;algorithm&gt;
#include &lt;stdexcept&gt;

std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string s)
{

    std::map&lt;std::string,std::set&lt;int&gt;&gt; kreirana_mapa;
    int pocetak;
    bool pronadjena;
    for(int i=0; i&lt;s.size(); i++) {

        pronadjena=false;
<a name="2"></a><font color="#0000FF"><a href="match405-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        if((s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9')) {
            pronadjena=true;
</font>            pocetak=i;
            i++;
        }

        if(pronadjena) {
            while((s[i]&gt;='a' &amp;&amp; s[i]&lt;='z') || (s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') || (s[i]&gt;='0' &amp;&amp; s[i]&lt;='9'))
                i++;

            std::string ubaci_rijec;
            ubaci_rijec=s.substr(pocetak,i-pocetak);

            for(int i=0; i&lt;ubaci_rijec.size(); i++) {
                if(ubaci_rijec[i]&gt;='A' &amp;&amp; ubaci_rijec[i]&lt;='Z')  ubaci_rijec[i]=tolower(ubaci_rijec[i]);
            }
           
            if(kreirana_mapa.count(ubaci_rijec)&gt;0)    continue;

            std::set&lt;int&gt; skup;
            skup.insert(pocetak);

            int pomoc=i;
            while(pomoc&lt;s.size()) {

                if(((s[pomoc]&gt;='a' &amp;&amp; s[pomoc]&lt;='z') || (s[pomoc]&gt;='A' &amp;&amp; s[pomoc]&lt;='Z') || (s[pomoc]&gt;='0' &amp;&amp; s[pomoc]&lt;='9')) &amp;&amp; ((!((s[pomoc-1]&gt;='A' &amp;&amp; s[pomoc-1]&lt;='Z') || (s[pomoc-1]&gt;='0'&amp;&amp; s[pomoc-1]&lt;='9') || (s[pomoc-1]&gt;='a' &amp;&amp; s[pomoc-1]&lt;='z') )) || pomoc==0 ) &amp;&amp; ((pomoc==s.size()-1 ||  (!((s[pomoc-1]&gt;='A' &amp;&amp; s[pomoc-1]&lt;='Z') || (s[pomoc-1]&gt;='0'&amp;&amp; s[pomoc-1]&lt;='9') || (s[pomoc-1]&gt;='a' &amp;&amp; s[pomoc-1]&lt;='z') ) )))) {
                    int poc=pomoc;
<a name="3"></a><font color="#00FFFF"><a href="match405-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

                    int cuvaj=poc;

                    while((s[cuvaj]&gt;='a' &amp;&amp; s[cuvaj]&lt;='z') || (s[cuvaj]&gt;='A' &amp;&amp; s[cuvaj]&lt;='Z') || (s[cuvaj]&gt;='0' &amp;&amp; s[cuvaj]&lt;='9'))
</font>                        cuvaj++;
                    std::string rijec;
                    rijec=s.substr(poc,cuvaj-poc);

                    for(int i=0; i&lt;rijec.size(); i++) {
                        if(rijec[i]&gt;='A' &amp;&amp; rijec[i]&lt;='Z')   rijec[i]=tolower(rijec[i]);
                    }


                    if(rijec==ubaci_rijec)
                        skup.insert(poc);
                }

                pomoc++;
            }

<a name="0"></a><font color="#FF0000"><a href="match405-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

            kreirana_mapa.insert(std::make_pair(ubaci_rijec,skup));
            
        }
    }

    return kreirana_mapa;

}

std::set&lt;int&gt; PretraziIndeksPojmova(std::string rijec,std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa)
</font>{

    std::set&lt;int&gt; skup;

{
        for(int i=0;i&lt;rijec.size();i++) {
        if(rijec[i]&gt;='A' &amp;&amp; rijec[i]&lt;='Z')  
                rijec[i]=tolower(rijec[i]);}
        
        auto ima_li_ga(mapa.find(rijec));
        if(ima_li_ga==mapa.end()) {
            throw std::logic_error("Pojam nije nadjen");
        }

        auto it(mapa.begin());

        for(auto itt=ima_li_ga-&gt;second.begin(); itt!=ima_li_ga-&gt;second.end(); itt++)
            skup.insert(*(itt));
    }
    
    return skup;

}

void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa)
{

<a name="1"></a><font color="#00FF00"><a href="match405-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    for(auto it=mapa.begin(); it!=mapa.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int nije_kraj(0);

        for(auto it_skup=it-&gt;second.begin(); it_skup!=it-&gt;second.end(); it_skup++)  {
</font>            nije_kraj++;
            if(nije_kraj==it-&gt;second.size()) std::cout&lt;&lt;*(it_skup);
            else
                std::cout&lt;&lt;*(it_skup)&lt;&lt;",";
        }
<a name="4"></a><font color="#FF00FF"><a href="match405-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        std::cout&lt;&lt;std::endl;

    }

}


int main ()
{

    std::cout&lt;&lt;"Unesite tekst: ";
    std::string s;

    std::getline(std::cin,s);

    std::map&lt;std::string,std::set&lt;int&gt;&gt; moja_mapa=KreirajIndeksPojmova(s);
</font>    IspisiIndeksPojmova(moja_mapa);


    try {
        for(;;) {
            std::string r;
            std::cout&lt;&lt;"Unesite rijec: ";
            std::getline(std::cin,r);
            if(r[0]=='.')
                break;
            
            for(int i=0;i&lt;r.size();i++) {
                if(r[i]&gt;='A' &amp;&amp; r[i]&lt;='Z')  
                    r[i]=tolower(r[i]);} 
            auto it=moja_mapa.find(r);
            if(it==moja_mapa.end()) {
                std::cout&lt;&lt;"Unesena rijec nije nadjena!";
                std::cout&lt;&lt;std::endl;
                continue;
            }
            std::set&lt;int&gt; skup_pozicija=PretraziIndeksPojmova(r,moja_mapa);
            auto it_skup=skup_pozicija.begin(); 
            while(it_skup!=skup_pozicija.end()){
                std::cout&lt;&lt;*(it_skup)&lt;&lt;" ";
                it_skup++;
            }
            std::cout&lt;&lt;std::endl;
  
        }
    }

    catch(std::logic_error izuzetak ) {
        std::cout&lt;&lt;izuzetak.what();
    }

    return 0;
}</pre>
</body>
</html>
