<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student9325.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student9325.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match87-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_95.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;set&gt;

typedef std::map&lt;std::string, std::set&lt;int&gt;&gt; TipMapa;

void PretvoriUMala(std::string &amp;s) {
    for(auto &amp;x : s) {
        if(x &gt;= 'A' &amp;&amp; x &lt;='Z') {
            x += 32;
        }
    }
}
TipMapa KreirajIndeksPojmova(std::string s) {
    TipMapa mapa;
    
    int pocetak = 0, duzina = 0, pozicija = 0;
    std::set&lt;std::string&gt; set_kljuc;
    PretvoriUMala(s);
    
    for(int i = 0; i &lt; s.length(); i++) {
        if(!((s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z') || (s[i] &gt;= '0' &amp;&amp; s[i] &lt;= '9'))) continue;
        duzina = 0;
        pocetak = i;
        
        while(i &lt; s.length() &amp;&amp; ((s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z') || (s[i] &gt;= '0' &amp;&amp; s[i] &lt;= '9'))) {
            duzina++;
            i++;
        }
        set_kljuc.insert(s.substr(pocetak, duzina));
    }
    
    for(auto i = set_kljuc.begin(); i != set_kljuc.end(); i++) {
        std::string temp = *i;
        std::set&lt;int&gt; set_pozicija;
        
        for(int j = 0; j &lt; s.length(); j++) {
            int k = 0;
            if(j != 0) k = j-1;
            
            if(temp[0] == s[j] &amp;&amp; (j == 0 || !((s[k] &gt;= 'a' &amp;&amp; s[k] &lt;= 'z') || (s[k] &gt;= '0' &amp;&amp; s[k] &lt;= '9')))) {
                pozicija = j;
                duzina = 0;
                
                while((s[j] &gt;= 'a' &amp;&amp; s[j] &lt;= 'z') || (s[j] &gt;= '0' &amp;&amp; s[j] &lt;= '9')) {
                    duzina++;
                    j++;
                }
                if(s.substr(pozicija, duzina) == temp) {
                    set_pozicija.insert(pozicija);
                }
            }
        }
        mapa.insert(std::make_pair(temp, set_pozicija));
    }
    return mapa;
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string s, TipMapa mapa) {
    for(auto it = mapa.begin(); it != mapa.end(); it++) {
        if(it-&gt;first == s) {
            return it-&gt;second;
        }
    }
    throw std::logic_error("Unesena rijec nije nadjena!");
}
void IspisiIndeksPojmova(TipMapa mapa) {
    for(auto it1 = mapa.begin(); it1 != mapa.end(); it1++) {
        std::cout &lt;&lt; it1-&gt;first &lt;&lt; ": ";
        auto kraj = (*it1).second.end();
        kraj--;
        for(auto it2 = (*it1).second.begin(); it2 != kraj; it2++) {
            std::cout &lt;&lt; *it2 &lt;&lt; ",";
        }
        std::cout &lt;&lt; *kraj;
        std::cout &lt;&lt; std::endl;
    }
}

int main () {
    std::cout &lt;&lt; "Unesite tekst: ";
    std::string s;
    std::getline(std::cin, s);
    auto mapa = KreirajIndeksPojmova(s);
    IspisiIndeksPojmova(mapa);
    
    std::string temp;
    
    while(true) {
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, temp);
        if(temp == ".") return 0;
        
        try {
            auto sk = PretraziIndeksPojmova(temp, mapa);
            for(auto x : sk) {
                std::cout &lt;&lt; x &lt;&lt; " ";
            }
            std::cout &lt;&lt; std::endl;
</font>        }
        catch(std::logic_error izuzetak) {
            std::cout &lt;&lt; izuzetak.what() &lt;&lt; std::endl;
        }
    }
}</pre>
</body>
</html>
