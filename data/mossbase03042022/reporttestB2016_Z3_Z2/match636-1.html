<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2111.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student5899.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match636-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;vector&gt; 
#include &lt;set&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;

//provjeravamo da li je znak slovo ili broj
bool slovo(char s)
{
	if ((s &gt;= 'A' &amp;&amp; s &lt;= 'Z') || (s &gt;= 'a' &amp;&amp; s &lt;= 'z') || (s&gt;='0' &amp;&amp; s&lt;='9'))
</font>		return true;
	return false;
}

<a name="2"></a><font color="#0000FF"><a href="match636-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

std::string PretvoriUMala(std::string s)
{
    for(int i=0;i&lt;s.length();i++)
    {
        if(s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z')
</font>            s[i]+=32;
    }
    return s;
}


std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string a)
{
    std::map&lt;std::string,std::set&lt;int&gt;&gt; novo;
    std::set&lt;int&gt; skup;
    std::string help;
    std::string pomoc;
    std::string s(PretvoriUMala(a));
    for(int i=0;i&lt;s.length();i++)
    {
        if(s[i]==' ') continue; //ako je razmak
        else
        {
            if(!slovo(s[i])) continue;
            skup.insert(i);
            while((slovo(s[i])) || s[i]!=' ') //uzimamo rijec
            {
                if(!slovo(s[i]) || s[i]=='\0') break;
                help+=s[i];
                i++;
            }
             for(int j=0;j&lt;s.length();j++) //petlja za pretragu istih rijeci
             {
                if(i==j) continue;
                int k;
                k=j;
                while ((slovo(s[i])) || s[k]!=' ') //uzimamo rijec koju poredimo
                {
                    if(!slovo(s[k]) || s[k]=='\0') break;
                    pomoc+=s[k];
                    k++;
                }
                if(help==pomoc) //ako su isti indeks stavljamo u skup
                {
                    skup.insert(j);
                    pomoc.resize(0);
                    j=k;
                }
                else
                {
                    pomoc.resize(0);
                    j=k;
                    continue;
                }
            }
        }
        novo[help]=skup; //kreiramo par u mapi
        help.resize(0);
        skup.clear();// cistimo skup 
    }
<a name="0"></a><font color="#FF0000"><a href="match636-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    return novo; 
    
}

std::vector&lt;std::string&gt; NapraviVektorStringova(std::string s)
{
    std::vector&lt;std::string&gt; vektorstringova;
    std::string help;
    for(int i=0;i&lt;s.length();i++)
</font>    {
        while(s[i]!=' ')
        {
            help+=s[i];
            i++;
            if(s[i]=='\0' || s[i]==' ') break;
        }
        if(s[i]==' ' || s[i]=='\0')
            vektorstringova.push_back(help);
        help.resize(0);
    }
    return vektorstringova;
}

std::set&lt;int&gt; PretraziIndeksPojmova(std::string s,std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa)
{
    std::set&lt;int&gt; skup;
    auto v(NapraviVektorStringova(s));
    for(int i=0;i&lt;v.size();i++)
    {
        auto it(mapa.find(v[i])); //trazimo kljucnu rijec
        if(it==mapa.end()) throw std::logic_error ("Pojam nije nadjen");
        else
        {
            skup=mapa[v[i]]; 
        }
    }
    return skup;
}

void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa)
{
    for(auto it=mapa.begin();it!=mapa.end();it++)
    {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        int brojac(0);
        for(auto i=(it-&gt;second).begin();i!=(it-&gt;second).end();i++)
        {
            brojac++; //brojimo elemente
            if(brojac==std::distance((it-&gt;second).begin(),(it-&gt;second).end())) std::cout&lt;&lt;*i; //koristimo funkciju distance da saznamo broj elemenata 
                                                                                             //ako je brojac jednak broju elemenata dosli smo na kraj
            else
            std::cout &lt;&lt;*i&lt;&lt;",";
        }
        std::cout &lt;&lt;std::endl;
    }
}
int main()
{
    std::string s;
    std::cout&lt;&lt;"Unesite tekst: ";
    std::getline(std::cin,s);
<a name="3"></a><font color="#00FFFF"><a href="match636-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    auto mapa(KreirajIndeksPojmova(s));
    IspisiIndeksPojmova(mapa);
    while (1) 
    {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string rijec;
        std::getline(std::cin,rijec);
        if(rijec==".") break;
</font>        try
        {
            auto skup(PretraziIndeksPojmova(rijec,mapa)); //moze baciti izuzetak
            for(auto x:skup)
            std::cout&lt;&lt;x&lt;&lt;" ";
        }
        catch(std::logic_error e)
        {
            std::cout&lt;&lt;"Unesena rijec nije nadjena!";
        }
        std::cout&lt;&lt;std::endl;
    }
    
    
    return 0;
}</pre>
</body>
</html>
