<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student9676.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student3978.cpp<p></p><pre>
<a name="2"></a><font color="#0000FF"><a href="match381-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;

bool JeSlovo(char c)
{
    return (c&lt;='z' &amp;&amp; c&gt;='a');
</font>}

bool JeBroj(char c)
{
    return (c&lt;='9' &amp;&amp; c&gt;='0');
}

bool NeSmije(char c) 
{
    return (c&gt;='/' &amp;&amp; c&lt;='!');
}

std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string s)
{
    std::map&lt;std::string, std::set&lt;int&gt;&gt; indeks_pojmova;
    int i(0);
    while(i&lt;s.length())
    {
        if(s[i]&lt;='Z' &amp;&amp; s[i]&gt;='A') s[i]=s[i]+32;
        i++;
    }
    
    int j(0);
    while(j&lt;s.length()) 
    {
        std::set&lt;int&gt; skup;
        while(s[j]==' ' || s[j]=='\t' || (!JeBroj(s[j]) &amp;&amp; !JeSlovo(s[j]))) j++;
        int k(j), br_slova(0);
        skup.insert(j);
        while(JeSlovo(s[k]) || JeBroj(s[k])) {
            k++;
            br_slova++;
        }
        
        int q(k-1);
        while(q&lt;s.length()) {
            int p(j);
            int pamti(j), brojac(0);
            if(s[q]==s[p] &amp;&amp; (JeSlovo(s[q]) || JeBroj(s[q])) &amp;&amp; (JeSlovo(s[p]) || JeBroj(s[p])) &amp;&amp; !NeSmije(s[q]) &amp;&amp; !NeSmije(s[p]))
            {
                pamti=q;
                while(s[q]==s[p] &amp;&amp; (JeSlovo(s[q]) || JeBroj(s[q])) &amp;&amp; !NeSmije(s[p]) &amp;&amp; !NeSmije(s[q])  &amp;&amp;(JeSlovo(s[p]) || JeBroj(s[p]))) {
                    brojac++;
                    p++; q++;
                }
            }
            if(j!=0){
            if(brojac==br_slova &amp;&amp; !JeSlovo(s[q]) &amp;&amp; !JeBroj(s[q]) &amp;&amp; (JeSlovo(s[q-1]) || JeBroj(s[q-1])) &amp;&amp; !JeSlovo(s[j-1]) &amp;&amp; 
            !JeBroj(s[j-1]) &amp;&amp; !JeSlovo(s[pamti-1]) &amp;&amp; !JeBroj(s[pamti-1])) 
                    skup.insert(pamti);}
            else {
                if(brojac==br_slova &amp;&amp; !JeSlovo(s[q]) &amp;&amp; !JeBroj(s[q])) skup.insert(pamti);
            }
            q++;
        }
        if(!indeks_pojmova.count(s.substr(j, j+br_slova)))
        indeks_pojmova.insert(std::make_pair(s.substr(j, br_slova), skup));
        while(JeSlovo(s[j]) || JeBroj(s[j])) j++;
        j++;
    }
   
    return indeks_pojmova;
}

std::set&lt;int&gt; PretraziIndeksPojmova(std::string rijec, std::map&lt;std::string, std::set&lt;int&gt;&gt; indeks_pojmova)
{
<a name="0"></a><font color="#FF0000"><a href="match381-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    auto it(indeks_pojmova.find(rijec));
    if(it==indeks_pojmova.end()) throw std::logic_error("Unesena rijec nije nadjena!");
    else return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; indeks_pojmova)
{
    for(auto it=indeks_pojmova.begin(); it!=indeks_pojmova.end(); it++)
</font>    {   
       std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
       std::set&lt;int&gt;skup(it-&gt;second);
       for(auto it1=skup.begin(); it1!=skup.end(); it1++) {
           auto it2(skup.end());
           it2--;
           std::cout &lt;&lt; *it1;
           if(it2!=it1) std::cout &lt;&lt; ",";
       }
       std::cout &lt;&lt; std::endl;
    }
}

int main ()
{
    std::string tekst;
    std::cout&lt;&lt; "Unesite tekst: ";
<a name="3"></a><font color="#00FFFF"><a href="match381-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

    std::getline(std::cin, tekst);
    std::map&lt;std::string, std::set&lt;int&gt;&gt; indeks_pojmova(KreirajIndeksPojmova(tekst));
    IspisiIndeksPojmova(indeks_pojmova);
    std::string rijec;
</font>    std::cout &lt;&lt; "Unesite rijec: ";
    std::getline(std::cin, rijec);
    while(rijec!=".")
    {
        try{
        std::set&lt;int&gt;skup(PretraziIndeksPojmova(rijec, indeks_pojmova));
        for(int x : skup) std::cout &lt;&lt; x &lt;&lt; " ";
<a name="1"></a><font color="#00FF00"><a href="match381-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        std::cout &lt;&lt;std::endl;
        }
        catch(std::logic_error tekst)
        {
            std::cout &lt;&lt; tekst.what() &lt;&lt; std::endl;
        }
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
    }
	return 0;
</font>}</pre>
</body>
</html>
