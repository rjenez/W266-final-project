<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student8069.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student3217.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match16-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;

//Provjerava da li ima razmak ili nesto sto je u zadatku definirano kao 'odvajac' rijeci

bool JeLiOdvojeno(char &amp;a ){
    if(a&lt;'0' || (a&gt;'9' &amp;&amp; a&lt;'A') || (a&gt;'Z' &amp;&amp; a&lt;'a') || a&gt;'z' ) return true;
    
    return false;
}

//Pretvara velika slova u mala

void Smanji(std :: string &amp;s){
    for(int i(0); i&lt; s.length(); i++){
        s[i]=std :: tolower(s[i]);
    }
}


std :: string IzdvojiRijec(std :: string recenica, int n){
    int razmak(1), broj_rijeci(0), i(0), p(0), k(0);
    
    while(i&lt;recenica.length()-1){
        if(JeLiOdvojeno(recenica[i])) razmak=1;
        else if(razmak==1){
            razmak=0;
            broj_rijeci++;
        }
        if(broj_rijeci==n){
            p=i;
            break;
            }
        i++;
        
    }  
    
    int b=p;
    while(JeLiOdvojeno(recenica[b])==false &amp;&amp; b&lt;recenica.length()){
        k++;
        b++;
    }
    
    return recenica.substr(p,k);
    
}

//Ova fja vraca skup pozicija rijeci i u ovom zadatku je pomocna fja

std :: set&lt;int&gt; PozicijaRijeci(std :: string tekst, std :: string rijec){
    int pozicija, i(0), brojslova(0), znak(0), razmak(0), broj_rijeci(0);
    std :: set&lt;int&gt; skup;
    Smanji(tekst);                                   //smanjujem tekst kako se moze trazena rijec naci
    while(i&lt;tekst.length()){
        if(JeLiOdvojeno(tekst[i])==false){             //provjerava razmak
            znak++;
            razmak=1;
        } else if(razmak==1){
            razmak=0;
            broj_rijeci++;
        }
        
        int cuvar=i;
        
        while(JeLiOdvojeno(tekst[i])==false &amp;&amp; tekst[i]==rijec[brojslova] &amp;&amp; cuvar&lt;tekst.length()){
            cuvar++;                  //cuvar cuva poziciji od i kako bi kasnije bilo lakse ustanoviti na kojoj se poziciji nalazi trazena rijec
            brojslova++;
            
        }
        
        int duzina=rijec.length();
        if(znak==brojslova &amp;&amp; znak==duzina &amp;&amp; rijec==IzdvojiRijec(tekst,broj_rijeci+1)){  //ako je if-uslov zadovoljen ubacuje se pozicija rijeci u skup
            pozicija=cuvar-duzina;
            if(JeLiOdvojeno(tekst[pozicija])) pozicija ++ ;
            skup.insert(pozicija);
        }
        
        
        if(JeLiOdvojeno(tekst[i])){            ///ako naidje na nesto sto je definirano kao odvajac rijeci, onda se clanovi unutar if-uslova resetiraju, tj postavljaju na nulu 
            znak=0;
            cuvar=0;
            brojslova=0;
            pozicija=0;
            cuvar=0;
        }
        
        i++;
    }
    
    return skup;
    
}

int brojRijeci(std :: string tekst){
    int razmak(1), broj_rijeci(0), i(0);
    while(i&lt;tekst.length()-1){
        if(JeLiOdvojeno(tekst[i])) razmak=1;
        else if(razmak==1){
            razmak=0;
            broj_rijeci++;
        }
        i++;
    }
    
    return broj_rijeci;
}

std :: map&lt;std :: string, std :: set&lt;int&gt;&gt; KreirajIndeksPojmova(std :: string tekst){
    std :: map&lt;std :: string, std :: set&lt;int&gt;&gt; mapa;
    std :: string pomocni;
    std :: set&lt;std :: string&gt; skuprijeci;
    
    
    for(int i(0); i&lt;brojRijeci(tekst) ; i++){
        pomocni=IzdvojiRijec(tekst, i+1);
        skuprijeci.insert(pomocni);
    }
    
    
    for(std :: string x: skuprijeci){
        Smanji(x);
        mapa.insert(std :: make_pair(x, PozicijaRijeci(tekst, x)));
    
    }
    return mapa;
    
}

std :: set&lt;int&gt; PretraziIndeksPojmova(std :: string rijec, std :: map&lt;std :: string, std :: set&lt;int&gt;&gt; mapa){
    Smanji(rijec);
    auto it(mapa.find(rijec));
    if(it == mapa.end()) throw std :: logic_error("Unesena rijec nije nadjena!");
    return it-&gt;second;
}


void IspisiSkupJedan(std :: set&lt;int&gt; skup){  //trebaju mi dvije fje za ispis skupa jer je u zadatku naznacen drugaciji ispis za prvi dio zadatka i za drugi dio zadatka
    std :: vector&lt;int&gt; pomocni;
    for(int x: skup) pomocni.push_back(x);
    int n=pomocni.size();
    for(int i(0); i&lt;n-1; i++){
        std :: cout &lt;&lt; pomocni[i] &lt;&lt; ",";
    }
    std :: cout &lt;&lt; pomocni[n-1];
}

void IspisiSkupDva(std :: set&lt;int&gt; skup){ 
    for(int x: skup) std :: cout &lt;&lt; x &lt;&lt; " ";
    std :: cout &lt;&lt; std :: endl;
}

void IspisiIndeksPojmova(std :: map &lt;std :: string, std :: set&lt;int&gt;&gt; mapa){
    for(auto &amp;par: mapa){
        std :: cout &lt;&lt; par.first &lt;&lt; ": ";
        IspisiSkupJedan(par.second);
        std :: cout &lt;&lt; std :: endl;
        
    }
    
}

int main ()
{
    std :: string tekst;
    std :: cout &lt;&lt; "Unesite tekst: ";
    std :: getline(std :: cin, tekst);
    std :: string rijec;
    
    std :: map&lt;std :: string, std :: set&lt;int&gt;&gt; mapa=KreirajIndeksPojmova(tekst);
    
    IspisiIndeksPojmova(mapa);
    
    do{
        std :: cout &lt;&lt; "Unesite rijec: ";
        try{
        std :: getline(std :: cin, rijec);
        if(rijec[rijec.length()-1]=='.') break;
        std :: set &lt;int &gt; skup=PretraziIndeksPojmova(rijec, mapa);
        IspisiSkupDva(skup);
        } catch(std :: logic_error IZUZETAK){
            std :: cout &lt;&lt; IZUZETAK.what() &lt;&lt; std :: endl;
</font>        }
        }while(1);
        
    
	return 0;
}</pre>
</body>
</html>
