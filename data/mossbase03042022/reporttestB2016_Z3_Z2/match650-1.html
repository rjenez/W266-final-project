<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student8665.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student1738.cpp<p></p><pre>
/B2016/2017: Zadaća 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;
#include &lt;iterator&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;

// Ako se pojavljuje rijec više od jedanput - nije OK !

std::set&lt;int&gt; NadjiPoziciju (std::string tekst,std::string rijec)
{
    int pozicija;
    bool isti (false);
    auto itrijec(rijec.begin());
    std::set&lt;int&gt; pozicije;
    auto iterat(tekst.begin());
    auto rj(rijec.end());
    rj--;
    
    
    if (*rj==' ') rijec.erase(rijec.begin()+(rijec.size()-1));
    for (auto it= tekst.begin();it!=tekst.end();it++)
    {
        bool isti=false;
        pozicija=0;
        itrijec=rijec.begin();
    
         
          if (*itrijec==*it)
        {
      
          pozicija=it-iterat;
            isti=true;
            
            if (rijec.size()==1)
            {
                it--;
                if ((*it&gt;=32 &amp;&amp; *it&lt;=47) || (*it&gt;=58 &amp;&amp; *it&lt;=64) || *it==' ') 
                {
                    pozicije.insert(pozicija);
                    isti=false;
                }
            }
          
            for (int i=0;i&lt;rijec.size();i++)
            {
                
                if (rijec.size()==1) break;
            
                if (*itrijec!=*it) 
                {
                    
                    isti=false;
                    break; 
                    
                }
                itrijec++;
                 it++;
                 
            }
            if (rijec.size()==1) {it++;}
            
        }
        if (isti) {if (*it&lt;'A' || (*it&lt;'a' &amp;&amp; *it&gt;'Z')|| (*it&gt;'z')) pozicije.insert(pozicija);}
        if (*it=='\0') break;
   
        
    }
    
    return pozicije; 
}

std::vector &lt;std::string&gt; NadjiRijeci(std::string tekst)
{
    std::string rijec;
    std::string razmak(" ");
    std::vector&lt;std::string&gt; rijeci;
    bool kraj (false);
    int broj_rijeci(1);
    int broj_slova(0);
    
<a name="1"></a><font color="#00FF00"><a href="match650-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

   for (int i=0;i&lt;tekst.size();i++)
   {
       if ((tekst[i]&gt;='a' &amp;&amp; tekst[i]&lt;='z') || (tekst[i]&gt;=48 &amp;&amp; tekst[i]&lt;=57)){
</font>           kraj=true;
       }
       else if (kraj==true)
       {
           kraj=false;
           broj_rijeci++;
       }
   }
   
   
       for (int j=0;j&lt;=tekst.size();j++)
       {
           if ((tekst[j]&gt;='a' &amp;&amp; tekst[j]&lt;='z') || (tekst[j]&gt;=48 &amp;&amp; tekst[j]&lt;=57))
           {
               rijec.push_back(tekst[j]);
               kraj=true;
           }
           else if (kraj==true)
           {
               kraj=false;
               rijeci.push_back(rijec);
<a name="3"></a><font color="#00FFFF"><a href="match650-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

               rijec.resize(0);
           }
       }
       

    return rijeci;
}

std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova (std::string tekst)
{
   std::map&lt;std::string,std::set&lt;int&gt;&gt; Indeks_pojmova;
</font>  
  std::set&lt;int&gt; pozicije;
  std::vector&lt;std::string&gt;rijeci ;
  
         rijeci=NadjiRijeci(tekst);
         
          for (int i=0;i&lt;tekst.length();i++)
          {
              if(tekst[i]&lt;'a' &amp;&amp; tekst[i]&gt;'A') tekst[i]+='a'-'A'; 
          }
          rijeci=NadjiRijeci(tekst);
           
           for (int i=0;i&lt;rijeci.size();i++)
           { if (i==rijeci.size()-1) break;
               for (int j=i+1;j&lt;rijeci.size();j++)
               {
                   if (rijeci[i]==rijeci[j])    
                   {
                       rijeci.erase(rijeci.begin()+j);
                       if (i!=0) i--;
                   }
               }
           }
           
             for (int i=0;i&lt;rijeci.size();i++)
             {
                 pozicije=NadjiPoziciju(tekst,rijeci[i]);
                 Indeks_pojmova.insert(std::make_pair(rijeci[i],pozicije));
             }
  
  
  
  
  return Indeks_pojmova;
}

std::set&lt;int&gt; PretraziIndeksPojmova (std::string rijec,std::map&lt;std::string,std::set&lt;int&gt;&gt; indekspojmova)
{
    
    std::set&lt;int&gt; pozicije ;
   auto it (indekspojmova.begin()); // ovdje dolazi do greške
    it=indekspojmova.find(rijec);
    if (it==indekspojmova.end()) throw std::logic_error ("Unesena rijec nije nadjena!");     // pri drugom pozivu funkcije it ne pokazuje na rijec u indeksu, iako postoji
    else         for(int a: it-&gt;second) pozicije.insert(a);
    
    return  pozicije;
}

void IspisiIndeksPojmova (std::map&lt;std::string,std::set&lt;int&gt;&gt; indekspojmova){

   for (auto it = indekspojmova.begin();it!=indekspojmova.end();it++)
   {
<a name="2"></a><font color="#0000FF"><a href="match650-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

       std::cout &lt;&lt; it-&gt;first &lt;&lt; ": " ;
       for (auto p=it-&gt;second.begin();p!=it-&gt;second.end();p++){
        auto po (it-&gt;second.end()); 
</font>        po--;
      
         if (p==po) std::cout &lt;&lt; *p;
         else   std::cout &lt;&lt; *p&lt;&lt; ",";   
      
      
   } std::cout &lt;&lt; std::endl;
    
}
}



int main (){
    
    try{
        std::cout &lt;&lt; "Unesite tekst: ";
        std::string tekst;
        std::getline (std::cin,tekst);
        
        std::map&lt;std::string,std::set&lt;int&gt;&gt; indekspojmova(KreirajIndeksPojmova(tekst));
         IspisiIndeksPojmova(indekspojmova);  
         std::string rijec;
         std::set&lt;int&gt; pozicija;
         
        do{
          std::cout &lt;&lt; "Unesite rijec: ";
          std::getline(std::cin,rijec);
          if (rijec==".") break; 
          pozicija=PretraziIndeksPojmova(rijec,indekspojmova);
          for (auto x: pozicija) std::cout &lt;&lt; x &lt;&lt; " " ;
<a name="0"></a><font color="#FF0000"><a href="match650-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

          std::cout &lt;&lt; std::endl;
        }while(rijec!=".");
     }catch (std::logic_error izuzetak){
        std::cout &lt;&lt;izuzetak.what()&lt;&lt; std::endl;
        std::cout&lt;&lt;"Unesite rijec: ";
</font>    }        
	return 0;
}</pre>
</body>
</html>
