<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student1966.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student6010.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
#include &lt;utility&gt;
#include &lt;iterator&gt;
#include &lt;stdexcept&gt;
<a name="0"></a><font color="#FF0000"><a href="match32-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_95.gif"/></a>

std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova (std::string str) {
    std::map&lt;std::string, std::set&lt;int&gt;&gt; rezultat;
    std::set&lt;int&gt; prazan_skup;
    std::vector&lt;std::string&gt; spisak_rijeci;
    for(int i=0; i&lt;str.size(); i++) {if(str[i]&gt;='A' &amp;&amp; str[i]&lt;='Z') str[i]=str[i]+32;
        if(str[i]=='\n' || str[i]&lt;32) {str[i]='\0';
        str.resize(i+1);}
    }
    for(int i=0; i&lt;str.size(); i++) {
        for(int j=str.size()-1; j&gt;=i; j--) {
            std::string rijec;
            for(int k=i; k&lt;=j; k++) {
                rijec.push_back(str[k]);
            } if(i==0 || (str[i-1]&lt;'0' || (str[i-1]&gt;'9' &amp;&amp; str[i-1]&lt;'A') || (str[i-1]&gt;'Z' &amp;&amp; str[i-1]&lt;'a') || str[i-1]&gt;'z')) {
                if(j==str.size()-1 || (str[j+1]&lt;'0' || (str[j+1]&gt;'9' &amp;&amp; str[j+1]&lt;'A') || (str[j+1]&gt;'Z' &amp;&amp; str[j+1]&lt;'a') || str[j+1]&gt;'z')) {
                    bool jedinstvena=true;
                    for(int m=0; m&lt;rijec.size(); m++) {
                        if(rijec[m]&lt;'0' || (rijec[m]&gt;'9' &amp;&amp; rijec[m]&lt;'A') || (rijec[m]&gt;'Z' &amp;&amp; rijec[m]&lt;'a') || rijec[m]&gt;'z') jedinstvena=false;
                    }
                    for(int l=0; l&lt;spisak_rijeci.size(); l++) {
                   if(rijec==spisak_rijeci[l]) jedinstvena=false;
                    }
                    if(jedinstvena) rezultat.insert(std::make_pair(rijec, prazan_skup));}}}}
    for(int i=0; i&lt;str.size(); i++) {
        for(int j=str.size()-1; j&gt;=i; j--) {
            std::string word;
            for(int k=i; k&lt;=j; k++) {word.push_back(str[k]);}
            auto it(rezultat.find(word));
            if(it!=rezultat.end()) it-&gt;second.insert(i);
        }
    }
    return rezultat;
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string rijec, std::map&lt;std::string, std::set&lt;int&gt;&gt; indekspojmova) {
    std::set&lt;int&gt; rezultat;
    auto p(indekspojmova.find(rijec));
    if(p==indekspojmova.end()) throw std::logic_error("Unesena rijec nije nadjena!");
    else rezultat=p-&gt;second;
    return rezultat;
}
void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; indekspojmova) {
    for(auto it=indekspojmova.begin(); it!=indekspojmova.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        auto t((it-&gt;second).begin()), v((it-&gt;second).end());
        auto zamjena=t;
        for(int i=0; i&lt;std::distance(t, v); i++) {
        if(i!=std::distance(t,v)-1) std::cout&lt;&lt;*zamjena++&lt;&lt;",";
        else std::cout&lt;&lt;*zamjena;
        } std::cout&lt;&lt;std::endl;
    }
}
int main ()
{
   std::string tekst, rijec;
   std::cout&lt;&lt;"Unesite tekst: ";
   std::getline(std::cin, tekst);
   auto a(KreirajIndeksPojmova(tekst));
   IspisiIndeksPojmova(a);
   while(rijec!=".") {
       std::cout&lt;&lt;"Unesite rijec: ";
       std::cin&gt;&gt;rijec;
       if(rijec!=".") {
       try{
          auto b=PretraziIndeksPojmova(rijec, a);
          for(auto x: b) std::cout&lt;&lt;x&lt;&lt;" ";
       }  catch(std::logic_error e) {std::cout&lt;&lt;e.what();}}
       std::cout&lt;&lt;std::endl;
</font>   } return 0;
}</pre>
</body>
</html>
