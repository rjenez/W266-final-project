<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student8004.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student8004.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match158-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;set&gt;
#include &lt;cstring&gt;
using namespace std;

bool slovo(char a)
{
    if((toupper(a)&gt;='A'&amp;&amp;toupper(a)&lt;='Z') || (a&gt;='0'&amp;&amp;a&lt;='9')) return true;
    return false;
}

map&lt;string,set&lt;int&gt;&gt; KreirajIndeksPojmova(string s)
{
    for(int i=0; i&lt;s.size(); i++)
    {
        if(toupper(s[i])&gt;='A' &amp;&amp; toupper(s[i])&lt;='Z') s[i]=tolower(s[i]);
    }
    map&lt;string, set&lt;int&gt;&gt; m;
    for(int i=0; i&lt;s.size(); i++)
    {
        if(slovo(s[i]))
        {
            int p=i;
            while(i!=s.size() &amp;&amp; slovo(s[i])) {i++;}
            int k=i;
            string pom=s.substr(p,k-p);
            set&lt;int&gt; pr;
            for(int j=0; j&lt;s.size(); j++)
                if(s.substr(j, pom.size())==pom &amp;&amp; (j==0 || !slovo(s[j-1])) &amp;&amp; (j+pom.size()==s.size() || !slovo(s[j+pom.size()]))) pr.insert(j);
            m.insert(make_pair(pom,pr));
        }
        
    }
    return m;
}

set&lt;int&gt; PretraziIndeksPojmova(string s, map&lt;string, set&lt;int&gt;&gt; m)
{
    for(int i=0; i&lt;s.size(); i++)
    {
        if(toupper(s[i])&gt;='A' &amp;&amp; toupper(s[i])&lt;='Z') s[i]=tolower(s[i]);
    }
    for(auto it=m.begin(); it!=m.end(); it++)
    {
        if(it-&gt;first==s) return it-&gt;second;
    }
    throw logic_error("Pojam nije nadjen");
}

void IspisiIndeksPojmova (map&lt;string, set&lt;int&gt;&gt; m)
{
    for(auto it=m.begin(); it!=m.end(); it++)
	{
	    cout&lt;&lt;it-&gt;first&lt;&lt;": ";
	    int br=it-&gt;second.size();
	    for(auto x: it-&gt;second)
	    {
	        if(br!=1) cout&lt;&lt;x&lt;&lt;",";
	        else cout&lt;&lt;x;
	        br--;
	    }
	    cout&lt;&lt;endl;
	}
}

int main ()
{
	string s;
	cout&lt;&lt;"Unesite tekst: ";
	getline(cin,s);
	auto m=KreirajIndeksPojmova(s);
	IspisiIndeksPojmova(m);
	while(1)
	{
	    cout&lt;&lt;"Unesite rijec: ";
	    string p; getline(cin,p);
	    if(p==".") break;
	    try{
	        set&lt;int&gt; pom=PretraziIndeksPojmova(p,m);
	        for(auto x: pom) cout&lt;&lt;x&lt;&lt;" ";
	        cout&lt;&lt;endl;
	    }
	    catch(logic_error) { cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;endl;}
	}
	return 0;
</font>}</pre>
</body>
</html>
