<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7125.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student7125.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match46-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_97.gif"/></a>

/B2016/2017: Zadaća 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;set&gt;
#include &lt;string&gt;
#include &lt;stdexcept&gt;


std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string ulaz);
std::set&lt;int&gt; PretraziIndeksPojmova(std::string ulaz, std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa);
void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa);
void mytolower(std::string &amp;ulaz);
bool jestotreba(char &amp;p);
std::set&lt;int&gt; pozicije(std::string &amp;ulaz, std::string sub);

int main ()
{
    std::cout&lt;&lt;"Unesite tekst: ";
    std::string ulaz;
    std::getline(std::cin,ulaz);
    auto mapa(KreirajIndeksPojmova(ulaz));
    IspisiIndeksPojmova(mapa);
    while(true){
        std::cout&lt;&lt;"Unesite rijec: ";
        std::getline(std::cin,ulaz);
        if(ulaz == ".")
            break;
        try{
        auto skup(PretraziIndeksPojmova(ulaz,mapa));
        for(auto it(skup.begin()); it != skup.end(); it++){
            std::cout&lt;&lt; *it &lt;&lt;" ";
        }
        std::cout&lt;&lt;std::endl;
        }catch(std::logic_error){
            std::cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;std::endl;
        }
    }
    
	return 0;
}
std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string ulaz){
    //inicijalizuj mapu
    std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa;
    //sva slova ulaza postavi na mala
    mytolower(ulaz);
    //izračunaj odmah duđinu da se žaba funkcija length ne poziva više puta
    int p(0),duz(ulaz.length());
    while(p &lt; duz){
        //preskoči sve što ne treba
        while(p &lt; duz  &amp;&amp; !jestotreba(ulaz[p])) p++;
        
        int q(p);
        //kada si došao na riječ nađi koliko ima elemenata
        while(q &lt; duz  &amp;&amp; jestotreba(ulaz[q])) q++;
        //za tu riječ pretraži u stringu eventalna ponavljanja i ubaci ih u mapu
        mapa[ulaz.substr(p,q-p)] = pozicije(ulaz,ulaz.substr(p,q-p));
        //preskoči tu riječ
        while(p &lt; duz  &amp;&amp; jestotreba(ulaz[p])) p++;
    }
    
    return mapa;
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string ulaz, std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa){
    mytolower(ulaz);
    int i(0);
    //pretražuj riječ
    auto it(mapa.find(ulaz));
    //ako nije pronađena riječ iterator će pokazivati iza kraja
    if(it == mapa.end() || ulaz.length() == 0)
        throw std::logic_error("Pojam nije nadjen");
    //ako je pronađen vrati indeks pojmova
    return mapa[ulaz];
}
void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa){
    for(auto it(mapa.begin()); it != mapa.end(); it++){
        std::cout&lt;&lt; it-&gt;first&lt;&lt;": ";
       for(auto it2(it-&gt;second.begin()); it2 != it-&gt;second.end(); it2++){
           auto it3(it2);
           it3++;
           //ispisuj zarez samo ako it2 nije zadnji član skupa
           if(it3 != it-&gt;second.end())
            std::cout&lt;&lt;*it2&lt;&lt;",";
            else std::cout&lt;&lt;*it2;
       }
        std::cout&lt;&lt;std::endl;
    }
}
//pomoćna funkcija za prebacivanje sve u mala slova(nisam bio siguran da li možemo koristiti bibliotečno mytolower pa sam svoju napisao)
void mytolower(std::string &amp;ulaz){
    for(int i(0); i &lt; ulaz.length(); i++)
        if(ulaz[i] &gt;= 'A' &amp;&amp; ulaz[i] &lt;= 'Z')
            ulaz[i] -= 'A' -'a';
}
//funkcija za testiranje karaktera nekog
bool jestotreba(char &amp;p){
    if ((p &gt;= 'a' &amp;&amp; p &lt;= 'z') ||(p&gt;= '0' &amp;&amp; p &lt;= '9'))
        return true;
    return false;
}
std::set&lt;int&gt; pozicije(std::string &amp;ulaz, std::string sub){
    int p(0),duz(ulaz.length());
    //inicijalizuj skup, te pomocne varijable
    std::set&lt;int&gt; poz;
    while(p &lt; duz){
        //preskači sve što ne treba
        while(p &lt; duz  &amp;&amp; !jestotreba(ulaz[p])) p++;
        int q(p);
        //nađi dužinu riječi
        while(q &lt; duz  &amp;&amp; jestotreba(ulaz[q])) q++;
        //testiraj da li je proslijeđena riječ ona koja nam treba
        if(sub == ulaz.substr(p,q-p))
            poz.insert(p);
        //ako jeste ona koja treba onda ubaci njenu poziciju u skup
        //preskoči ostatak riječi
        while(p &lt; duz  &amp;&amp; jestotreba(ulaz[p])) p++;
    }
    //vrati skup
    return poz;
</font>}</pre>
</body>
</html>
