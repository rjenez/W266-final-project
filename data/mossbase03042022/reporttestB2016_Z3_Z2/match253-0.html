<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student1624.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student1624.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;iterator&gt;
#include &lt;stdexcept&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;utility&gt;
std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string recenica) {
    std::map&lt;std::string, std::set&lt;int&gt;&gt; indeksi;
    std::vector&lt;std::string&gt; words;
    std::set&lt;int&gt; skup;
    for(int i=0; i&lt;recenica.length(); i++) recenica[i]=tolower(recenica[i]);
    for(int i=0; i&lt;recenica.length(); i++) {
             std::string pomocni;
            for(int j=recenica.length()-1; j&gt;=i; j--){
              pomocni=recenica.substr(i, j-i+1);
               bool rijec_je=true;
<a name="0"></a><font color="#FF0000"><a href="match253-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_17.gif"/></a>

            if((i==0 || recenica[i-1]&lt;'0' || (recenica[i-1]&gt;'9' &amp;&amp; recenica[i-1]&lt;'A') || (recenica[i-1]&gt;'Z' &amp;&amp; recenica[i-1]&lt;'a')|| recenica[i-1]&gt;'z') &amp;&amp;( j==recenica.length()-1 || recenica[j+1]&lt;'0' || (recenica[j+1]&gt;'9' &amp;&amp; recenica[j+1]&lt;'A') || (recenica[j+1]&gt;'Z' &amp;&amp; recenica[j+1]&lt;'a') ||recenica[j+1]&gt;'z')) {
</font><a name="1"></a><font color="#00FF00"><a href="match253-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

             for(int k=0; k&lt;pomocni.length(); k++) if(pomocni[k]&lt;'0' || (recenica[k]&gt;'9' &amp;&amp; recenica[k]&lt;'a') || recenica[k]&gt;'z') rijec_je=false;
</font>          } else rijec_je=false;
            if(rijec_je) {
                bool sama=true;
                for(int k=0; k&lt;words.size(); k++) {if(pomocni==words[k]) sama=false;}
                if(sama) {words.push_back(pomocni);
<a name="2"></a><font color="#0000FF"><a href="match253-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

                indeksi.insert(std::make_pair(pomocni, skup));
                }}}}
            for(int i=0; i&lt;recenica.length(); i++) {
                for(int j=recenica.length()-1; j&gt;=i; j--) {
</font>                    std::string podstring(recenica.substr(i, j-i+1));
                    for(int l=0; l&lt;words.size(); l++) if(podstring==words[l]) indeksi[podstring].insert(i); 
                }}
        return indeksi;
}
std::set&lt;int&gt; PretraziIndeksPojmova(std::string word, std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa) {
    auto it=mapa.find(word);
    if(it==mapa.end()) throw std::logic_error("Unesena rijec nije nadjena");
    else return it-&gt;second;
}
void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa) {
    for(auto p=mapa.begin(); p!=mapa.end(); p++) {
        std::cout&lt;&lt;(p-&gt;first);
        std::cout&lt;&lt;": ";
        auto pocetak((p-&gt;second).begin()), kraj((p-&gt;second).end()), pok((p-&gt;second).begin());
        int naprijed(0);
        while(naprijed&lt;distance(pocetak, kraj)) {
            if(naprijed+1&lt;distance(pocetak, kraj)) std::cout&lt;&lt;*pok&lt;&lt;",";
            else std::cout&lt;&lt;*pok;
            naprijed++;
            pok++;
        }
<a name="3"></a><font color="#00FFFF"><a href="match253-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        std::cout&lt;&lt;std::endl;
    }
}
int main ()
{
    std::string s, trazena;
    std::cout&lt;&lt;"Unesite tekst: ";
    std::getline(std::cin, s);
</font>    auto indeksi=KreirajIndeksPojmova(s);
    IspisiIndeksPojmova(indeksi);
    for(;;) {
        std::cout&lt;&lt;"\nUnesite rijec: ";
        std::cin&gt;&gt;trazena;
        if(trazena!=".") {
            try{
                auto pozicije=PretraziIndeksPojmova(trazena, indeksi);
                for(int x: pozicije) std::cout&lt;&lt;x&lt;&lt;" ";
            } catch(...) {std::cout&lt;&lt;"Unesena rijec nije nadjena!";}
        } else break;
    }
	return 0;
}</pre>
</body>
</html>
