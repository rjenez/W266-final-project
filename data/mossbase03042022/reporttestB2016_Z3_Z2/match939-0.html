<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4377.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4377.cpp<p></p><pre>
/B2016/2017: ZadaÄ‡a 3, Zadatak 2

#include &lt;iostream&gt;
#include &lt;stdexcept&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;algorithm&gt;
#include &lt;iterator&gt; 

std::vector&lt;std::string&gt; DajRijeci(const std::string &amp;recenica, std::vector&lt;int&gt; &amp;v2)
{
    if(recenica.size() &lt;= 0) throw std::domain_error("Ne valja recenica");
    bool logika (true);
    std::vector&lt;std::string&gt; v;
    std::string rijec;
    auto it(recenica.begin());
    int brojac(0);
    while(it &lt;= recenica.end())
    {
        if(it == recenica.end() || !((*it &gt;= 'a' &amp;&amp; *it &lt;= 'z') || (*it &gt;= 'A' &amp;&amp; *it &lt;= 'Z') || (*it &gt;= '0' &amp;&amp; *it &lt;= '9')))
        {
            if(!logika)
            {
                brojac++;
                v.push_back(rijec);
                rijec.clear();
            }
            logika = true;
        }
        else
        {
            v2.resize(brojac+1);
            v2[brojac] = std::distance(recenica.begin(), it)-rijec.size();
            logika = false;
            rijec += *it;
        }
        it++;
    }
    return v;
}

std::map&lt;std::string, std::set&lt;int&gt;&gt; KreirajIndeksPojmova(const std::string &amp;recenicaa)
{
    std::string recenica = recenicaa;
    if(recenica.size() &lt;= 0) throw std::domain_error("Ne valja recenica");
    std::transform(recenica.begin(), recenica.end(), recenica.begin(), tolower);
    std::vector&lt;int&gt; pozicije;
    auto v = DajRijeci(recenica, pozicije);
    std::string rijec;
    std::set&lt;int&gt; skup;
<a name="2"></a><font color="#0000FF"><a href="match939-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa;
    for(int i=0; i&lt;v.size(); i++)
    {
        auto it(mapa.find(v[i]));
</font>        if(it == mapa.end())
        {
            int brojac(0);
            for(int j=0; j&lt;v.size(); j++)
            {
                if(v[i] == v[j])
                {
                    brojac++;
                    skup.insert(pozicije[j]);
                }
            }
            mapa.insert(std::make_pair(v[i], skup));
            skup.clear();
        }        
    }
    return mapa;
}

<a name="0"></a><font color="#FF0000"><a href="match939-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_7.gif"/></a>

std::set&lt;int&gt; PretraziIndeksPojmova(const std::string &amp;rijec, const std::map&lt;std::string, std::set&lt;int&gt;&gt; &amp;mapa)
{
    auto it(mapa.find(rijec));
    if(it == mapa.end()) throw std::logic_error("Pojam nije nadjen");
    return it-&gt;second;
}

void IspisiIndeksPojmova(std::map&lt;std::string, std::set&lt;int&gt;&gt; mapa)
{
    for(auto it = mapa.begin(); it != mapa.end(); it++) 
</font>    {
        std::cout &lt;&lt; it-&gt;first &lt;&lt; ": ";
        for(auto it2 = it-&gt;second.begin(); it2 != it-&gt;second.end(); it2++)
        {
            std::cout &lt;&lt; *it2;
            auto uslov(it-&gt;second.end());
            uslov--;
            if(it2 != uslov) std::cout &lt;&lt; ",";
        }
<a name="1"></a><font color="#00FF00"><a href="match939-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

        std::cout &lt;&lt; std::endl;
    }
}

int main ()
{
    std::cout &lt;&lt; "Unesite tekst: ";
    std::string s, rijec;
    std::getline(std::cin, s);
    auto m (KreirajIndeksPojmova(s));
</font>    IspisiIndeksPojmova(m);
    for(;;)
    {
        try {
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
        if(rijec == ".") break;
        
        auto skup (PretraziIndeksPojmova(rijec, m));
        for(auto it = skup.begin(); it != skup.end(); it++) std::cout &lt;&lt; *it &lt;&lt; " ";
        std::cout &lt;&lt; std::endl;
        }catch(std::logic_error a){ std::cout &lt;&lt; "Unesena rijec nije nadjena!" &lt;&lt; std::endl;}
    }

	return 0;
}</pre>
</body>
</html>
