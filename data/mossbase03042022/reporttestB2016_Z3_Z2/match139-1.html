<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student5562.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2553.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match139-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;utility&gt;

void PretvoriUMala(std::string &amp;rijec)
{
    for (int i = 0; i &lt; rijec.length(); i++)
        if (rijec[i] &gt;= 'A' &amp;&amp; rijec[i] &lt;= 'Z')
            rijec[i] += 'a' - 'A';
}

typedef std::map&lt;std::string, std::set&lt;int&gt;&gt; Index;

Index KreirajIndeksPojmova (const std::string &amp;tekst)
{
    Index indeks;
    bool space(true);
    for (int i = 0; i &lt; tekst.length(); i++)
    {
        if (tekst[i] &lt; '0' || (tekst[i] &gt; '9' &amp;&amp; tekst[i] &lt; 'A') || (tekst[i] &gt; 'Z' &amp;&amp; tekst[i] &lt; 'a') || tekst[i] &gt; 'z')
            space = true;
        else if (space)
        {
            space = false;
            int p(i);
            while (!(tekst[p] &lt; '0' || (tekst[p] &gt; '9' &amp;&amp; tekst[p] &lt; 'A') || (tekst[p] &gt; 'Z' &amp;&amp; tekst[p] &lt; 'a') || tekst[p] &gt; 'z' ) &amp;&amp; p != tekst.length())
                p++;
            std::string rijec(tekst.substr(i, p - i));
            PretvoriUMala(rijec);
            if (!indeks.count(rijec)) indeks.insert(std::make_pair(rijec, std::set&lt;int&gt;{i}));
            else indeks[rijec].insert(i);
        }
    }
    return indeks;
}

std::set&lt;int&gt; PretraziIndeksPojmova(std::string rijec, Index indeks)
{
    PretvoriUMala(rijec);
    for (Index::iterator it = indeks.begin(); it != indeks.end(); it++)
        if (it-&gt;first == rijec) return it-&gt;second;
    throw std::logic_error("Pojam nije nadjen");
}

void IspisiIndeksPojmova(Index indeks)
{
    for (Index::iterator it1 = indeks.begin(); it1 != indeks.end(); it1++)
    {
        std::cout &lt;&lt; it1-&gt;first &lt;&lt; ": ";
        std::set&lt;int&gt;::iterator it2(it1-&gt;second.begin());
        for (int i = 0; i &lt; int(it1-&gt;second.size()) - 1; i++){ 
            std::cout &lt;&lt; *it2++ &lt;&lt; ",";
        }
        std::cout &lt;&lt; *it2 &lt;&lt; "\n";
    }
}

int main () 
{
    std::string tekst;
    std::cout &lt;&lt; "Unesite tekst: ";
    std::getline(std::cin, tekst);
    Index indeks(KreirajIndeksPojmova(tekst));
    IspisiIndeksPojmova(indeks);
    for(;;)
    {   
        std::string rijec;
        std::cout &lt;&lt; "Unesite rijec: ";
        std::getline(std::cin, rijec);
        if (rijec == ".") break;
        try
        {
            std::set&lt;int&gt; pozicije(PretraziIndeksPojmova(rijec, indeks));
            for (std::set&lt;int&gt;::iterator it = pozicije.begin(); it != pozicije.end(); it++)
                std::cout &lt;&lt; *it &lt;&lt; " ";
        }
        catch (std::logic_error)
        {
            std::cout &lt;&lt; "Unesena rijec nije nadjena!";
        }
        std::cout &lt;&lt; "\n";
    }
    
	return 0;
</font>}</pre>
</body>
</html>
