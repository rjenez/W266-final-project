<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2922.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student2922.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match129-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;set&gt;
#include &lt;utility&gt;
#include &lt;map&gt;
#include &lt;stdexcept&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;
using namespace std;
bool Slovo (char znak ){
    return ((znak&gt;='A' &amp;&amp; znak&lt;='Z')||(znak&gt;='a' &amp;&amp; znak &lt;='z') || (znak&gt;='0' &amp;&amp; znak&lt;='9'));
}

map &lt;string, set&lt;int&gt;&gt; KreirajIndeksPojmova (string rec){
    map &lt;string, set&lt;int&gt;&gt; pomocna;
    int i(0);
    //Sad i tjeramo do prvog slova u recenici aka preskacemo
    //Neslova
    for(; !Slovo(rec[i]) &amp;&amp; i&lt;rec.length(); i++);
    for(; i&lt;rec.length(); i++){
        //Sad je pronadjena rijec, nuzno ju je zapamtiti
        //zabiljeziti po svim ponavljanjima
        //i potom ignorisati njena ponavljanja u stringu 
        if(Slovo(rec[i]) &amp;&amp; ((i!=0 &amp;&amp; !Slovo ( rec[i-1] ) ) || (i==0))){
            //rijec na poziciji "i"
            int duzina{0};
            for(; Slovo(rec[i+duzina]); duzina++);
            string rijec = rec.substr(i, duzina);
            //Transformacija stringa u mala slova putem tolower 
            transform(rijec.begin(), rijec.end(), rijec.begin(), ::tolower);
            
            //Da li smo vec imali ovu rijec? Ako da onda je samo preskoci
            if(pomocna.count(rijec) ) continue;
            //Sad imamo nasu rijec
            
            //Sad je nuzno naci njena sva ponavljanja i pobiljeziti ih
            set&lt;int&gt; pon;
            pon.insert(i);
            for( int k{i+duzina}; k&lt;rec.length(); k++){
                int klizac{k};
                //Da li je to rijec duzine 1?
                if(duzina == 1 &amp;&amp; i!=0 &amp;&amp; Slovo(rec[i-1]) ) continue;
                //Ako se prvo slovo ne poklapa onda sigurno nece ni ostatak rijeci, pa je preskoci brojanjem k preko te rijeci koja ne zadovoljava
                else if (k!=0 &amp;&amp; !Slovo(rec[k-1]) &amp;&amp; tolower(rec[k])!=rijec[0]){
                    
                    while(Slovo(rec[klizac])) klizac++;
                    k=klizac;
                }
                if(k==rec.length()) break;
                string pomocna_rijec = rec.substr(k,duzina);
                transform(pomocna_rijec.begin(), pomocna_rijec.end(), pomocna_rijec.begin(), ::tolower);
                
                //Sad poredimo pomocnu rijec (koja nam treba zbog malih slova)
                //I rijec koju sad zelimo ubaciti u mapu
                if(rec[i] == rijec[0] &amp;&amp; pomocna_rijec==rijec /*&amp;&amp; (duzina!=1 || k==0 || !Slovo(rec[k-1]))*/){
                    pon.insert(k);
                    //Ako je zadovoljeno onda prebacimo za duzina
                    k+=duzina;
                }
            }
            //Sad su popamcena sva ponavljanja
            pomocna.insert(make_pair(rijec, pon));
            i+=duzina;
        }
        
    }
    
    return pomocna;
}

set&lt;int&gt; PretraziIndeksPojmova (string rijec, map&lt;string, set&lt;int&gt;&gt; mapa){
    //Bacanje izuzetka ako je brojanje ispalo nula tj logicki netacno
    if(!mapa.count(rijec)) throw logic_error("Pojam nije nadjen");
    return mapa[rijec];
}

void IspisiIndeksPojmova( map&lt;string, set&lt;int&gt;&gt; mapa){
    for(auto it = mapa.begin(); it!=mapa.end(); it++){
        cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        for( auto it_set  = begin(it-&gt;second); it_set!=end(it-&gt;second); it_set++){
            if(it_set==prev(end(it-&gt;second))) cout&lt;&lt;*it_set;
            else cout &lt;&lt;*it_set&lt;&lt;",";
        }
        cout&lt;&lt;endl;
    }
}

int main (){
    cout &lt;&lt; "Unesite tekst: ";
    string tekst;
    getline(cin, tekst);
    auto indeks = KreirajIndeksPojmova(tekst);
    IspisiIndeksPojmova(indeks);
    string unos;
    for(;;){
        cout&lt;&lt;"Unesite rijec: ";
        string rijec;
        
        getline(cin, rijec);
        
        //Prekid besk petlje je unos tacke
        if(rijec == ".") break;
        transform(rijec.begin(), rijec.end(), rijec.begin(), ::tolower);
        try{
            auto popis = PretraziIndeksPojmova(rijec, indeks);
            for( auto x : popis) cout &lt;&lt; x&lt;&lt;" ";
            cout &lt;&lt;endl;
        }catch(...){
            cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;endl;
        }
    }
	return 0;
</font>}</pre>
</body>
</html>
