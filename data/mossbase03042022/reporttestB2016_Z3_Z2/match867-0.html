<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4614.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4614.cpp<p></p><pre>
<a name="1"></a><font color="#00FF00"><a href="match867-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;stdexcept&gt;

    using std::cout;
    using std::cin;
    using std::endl;
</font>    
    void PretvoriUMala(std::string &amp;s){
        for(int i=0; i&lt;s.length(); i++){
            if(s[i]&gt;='A' &amp;&amp; s[i]&lt;='Z') s[i] += 'a'-'A';
        }
    }
    
    void Ispisi(std::set&lt;int&gt;skup){
        for(auto it = skup.begin(); it != skup.end(); it++){
            auto pom(it);
            pom++;
            if(pom == skup.end()) std::cout&lt;&lt;*it;
            else std::cout&lt;&lt;*it&lt;&lt;",";
        }
    }
    
    bool JesteSlovo(char s){
        if((s &gt;='a' &amp;&amp; s &lt;='z') || (s &gt;='A' &amp;&amp; s &lt;='Z') || (s &gt;='0' &amp;&amp; s&lt;='9')) 
            return true;
        return false;
    }
    
<a name="2"></a><font color="#0000FF"><a href="match867-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    std::map&lt;std::string,std::set&lt;int&gt;&gt; KreirajIndeksPojmova(std::string s){
        std::map&lt;std::string,std::set&lt;int&gt;&gt; mapa;
       /* std::vector&lt;std::string&gt;rijeci;
        PretvoriUMala(s);
        
        int pomocna(0);
        for(int i=0; i&lt;s.length(); i++){
            if(!JesteSlovo(s[i])){
                rijeci.push_back(s.substr(pomocna, i-pomocna));
                pomocna = i+1;
            }
        }
        rijeci.push_back(s.substr(pomocna,s.length()-pomocna));
        
        //if(rijeci[0]==s.substr(rijeci[i].size()) &amp;&amp; (!JesteSlovo(s[rijeci[0].size()])))
        
        for(int i=0; i&lt;rijeci.size(); i++){
            std::set&lt;int&gt;skup;
            for(int j=0; j&lt;s.length(); j++)
                if(j == 0 &amp;&amp; rijeci[i]==s.substr(j,rijeci[i].size()) &amp;&amp; (!JesteSlovo(s[j+rijeci[i].size()]))) skup.insert(j);
                else if(j&gt;0 &amp;&amp; rijeci[i]==s.substr(j,rijeci[i].size()) &amp;&amp; (!JesteSlovo(s[j+rijeci[i].size()]))  &amp;&amp; (!JesteSlovo(s[j-1])))
                    skup.insert(j);
            pojmovi.insert(std::make_pair(rijeci[i],skup));
            }
        
        */
        PretvoriUMala(s);
</font>        int brojac(0),pomocna(0);
        std::string str;
        for(int i = 0; i&lt;s.length(); i++){
            if(JesteSlovo(s[i])){
                brojac++;
                int j=i;
                while ((JesteSlovo(s[j]) &amp;&amp; j&lt;s.length())) j++; 
                if(brojac &gt; 0){
                    pomocna +=i;
                    str = s.substr(i,j-i);
                    auto it(mapa.find(str));
                    if(it == mapa.end()){
                        std::set&lt;int&gt;skup;
                        skup.insert(pomocna);
                        mapa.insert(std::make_pair(str,skup));
                    }
                    else{
                        auto it(mapa.find(str));
                        it-&gt;second.insert(pomocna);
                    }
                    i = j;
                    pomocna = 0;
                }
            }
        }
        return mapa;
    }
    
    std::set&lt;int&gt; PretraziIndeksPojmova(const std::string p, std::map&lt;std::string,std::set&lt;int&gt;&gt;mapa){
        std::set&lt;int&gt;skup;
        auto trazi(mapa.find(p));
        if(trazi == mapa.end())
            throw std::logic_error("Pojam nije nadjen");
        for(auto x : trazi-&gt;second) skup.insert(x);
            return skup;
        
    }
    
<a name="3"></a><font color="#00FFFF"><a href="match867-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    void IspisiIndeksPojmova(std::map&lt;std::string,std::set&lt;int&gt;&gt;pojmovi){
        for(auto it = pojmovi.begin(); it != pojmovi.end(); it++){
            cout&lt;&lt;it-&gt;first&lt;&lt;": ";
</font>            Ispisi(it-&gt;second);
            cout&lt;&lt;endl;
        }
        
    }
    
int main (){
    cout&lt;&lt;"Unesite tekst: ";
    std::string unos;
    std::getline(cin,unos);
    auto p = KreirajIndeksPojmova(unos);
    IspisiIndeksPojmova(p);
    for(;;){
        std::string rijec;
        cout&lt;&lt;"Unesite rijec: ";
        std::getline(cin,rijec);
        if(rijec == ".") break;
        try{
            auto skup = PretraziIndeksPojmova(rijec,p);
<a name="0"></a><font color="#FF0000"><a href="match867-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

            for(int x : skup) cout&lt;&lt;x&lt;&lt;" ";
            cout&lt;&lt;endl;
        }
        catch(std::logic_error){
            cout&lt;&lt;"Unesena rijec nije nadjena!"&lt;&lt;endl;
        }
    }

    /*auto m = KreirajIndeksPojmova("cvbkn34m5.n,34r67fgudbsc$%&amp;/I()HVBNBn/&amp;/&amp;n///z&amp;asdb23rgf87baew bfcQN3RCG3BR83O4NZTH");
    IspisiIndeksPojmova(m);
    auto skup = PretraziIndeksPojmova("n", m);
    for (const auto &amp;c : skup) std::cout &lt;&lt; c &lt;&lt; " ";*/

	return 0;
</font>}
</pre>
</body>
</html>
