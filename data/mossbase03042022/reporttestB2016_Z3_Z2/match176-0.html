<html>
<head>
<title>../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4863.cpp</title>
</head>
<body bgcolor="white">
<hr/>
../../data/programming-homework-dataset-plagiarism-detection/src/B2016/Z3/Z2/student4863.cpp<p></p><pre>
<a name="0"></a><font color="#FF0000"><a href="match176-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

/B2016/2017: ZadaÄ‡a 3, Zadatak 2
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;set&gt;
#include &lt;map&gt;
#include &lt;utility&gt;
#include &lt;stdexcept&gt;

typedef std::map&lt;std::string, std::set&lt;int&gt;&gt; T_mapa;
bool SlovoCifra(char x) {
    return((x&gt;='a' &amp;&amp; x&lt;='z') || (x&gt;='A' &amp;&amp; x&lt;='Z') || (x&gt;='0' &amp;&amp; x&lt;='9'));
}

std::string U_mala(std::string s) {
    for(int i=0; i&lt;s.length(); i++)
        if(s[i] &gt;='A' &amp;&amp; s[i]&lt;='Z')
            s[i]+='a'-'A';
    return s;
}
T_mapa KreirajIndeksPojmova (std::string tekst) {
    T_mapa pojmovi;
    for(int i=0; i&lt;tekst.length(); i++) {
        int j(i);
        if(SlovoCifra(tekst[j])){
        while(j&lt;tekst.length() &amp;&amp; SlovoCifra(tekst[j]))
            j++;
        bool pronadjeno(false);
        for(auto it(pojmovi.begin()); it != pojmovi.end(); it++) {
            if(U_mala(tekst.substr(i, j-i)) == it-&gt;first &amp;&amp; j-i != 0) {
                pronadjeno = true;
                break;
            }
        }
        if(!pronadjeno) pojmovi.insert(std::make_pair(U_mala(tekst.substr(i, j-i)), std::set&lt;int&gt;{i}));
        if (pronadjeno) pojmovi[U_mala(tekst.substr(i, j-i))].insert(i);
        i=j-1;
    }
    }
    return pojmovi;
}

std::set&lt;int&gt; PretraziIndeksPojmova(std::string rijec, T_mapa pojmovi) {
        for(auto it(pojmovi.begin()); it != pojmovi.end(); it++)
            if(it-&gt;first == U_mala(rijec))
                return it-&gt;second;
        throw std::logic_error("Pojam nije nadjen");
}

void IspisiIndeksPojmova(T_mapa pojmovi) {
    for(auto it(pojmovi.begin()); it != pojmovi.end(); it++) {
        std::cout&lt;&lt;it-&gt;first&lt;&lt;": ";
        auto it2(it-&gt;second.begin());
        while(it2 != it-&gt;second.end()) {
            std::cout&lt;&lt;*it2;
            if(++it2 != it-&gt;second.end())
                std::cout&lt;&lt;",";
        }
        std::cout&lt;&lt;std::endl;
    }
}

int main ()
{
    std::string s;
    std::cout&lt;&lt;"Unesite tekst: ";
    std::getline(std::cin, s);
    auto pojmovi (KreirajIndeksPojmova(s));
    IspisiIndeksPojmova(pojmovi);
    for(;;) {
        std::cout&lt;&lt;"Unesite rijec: ";
        std::string rijec;
        getline(std::cin, rijec);
        if(rijec == ".")
            break;
        try{
        auto sk(PretraziIndeksPojmova(rijec, pojmovi));
            for(auto x : sk) std::cout&lt;&lt;x&lt;&lt;" ";
        }catch(std::logic_error) {
            std::cout&lt;&lt;"Unesena rijec nije nadjena!";
        }
        std::cout&lt;&lt;std::endl;
</font>    }
	return 0;
}</pre>
</body>
</html>
